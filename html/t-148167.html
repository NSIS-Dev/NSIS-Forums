<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problems with latest CVS build and Modern UI" />

  <title>Problems with latest CVS build and Modern UI - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problems with latest CVS build and Modern UI</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148167">Problems with latest CVS build and Modern UI</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bradharding</span><br />
      <span class="post-time small text-muted">5th September 2003 01:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problems with latest CVS build and Modern UI</strong><br />
      Hi!<br />
      <br />
      I'm having a couple of problems with the latest CVS build of NSIS, using Modern UI, and I'm not sure if it's something I need to change in my code.<br />
      <br />
      1) The subtitle text in the window titlebar for each page is back when before I could just use Caption "${MUI_TITLE}" to disable it.<br />
      <br />
      2) I've been using SetFont to change the font used on each page. That still works fine for all pages except for the inner dialog text on the license page, which stays at 8-point tahoma/ms sans serif/whatever.<br />
      <br />
      3) Using !define MUI_BRANDINGTEXT " " no longer works. The default branding text is there, regardless.<br />
      <br />
      I've put the !define's for the settings for each page before the !insertmacro command for the pages (which solved a few errors), but no idea what to do now....<br />
      <br />
      Any ideas?<br />
      <br />
      Thanks in advance..<br />
      <br />
      Brad.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bradharding</span><br />
      <span class="post-time small text-muted">5th September 2003 03:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, I've resolved 1) and 3), but am having no luck with 2). Is this an oversight in the Modern UI code, or could I be doing something wrong? I'm guessing that SetFont should set the font for all pages, like it has previously....<br />
      <br />
      Regards,<br />
      <br />
      Brad.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">5th September 2003 07:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=148146" target="_blank">http://forums.winamp.com/showthread....hreadid=148146</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">R@m00n</span><br />
      <span class="post-time small text-muted">5th September 2003 13:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've one problem:<br />
      I want one license page but the license file should depend on the language.<br />
      How can I do this with the latest Snapshot?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th September 2003 13:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">LicenseLangString.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">R@m00n</span><br />
      <span class="post-time small text-muted">5th September 2003 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks,<br />
      I'll try.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">R@m00n</span><br />
      <span class="post-time small text-muted">5th September 2003 13:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm using the following code:<br />
      <br />
      LangString LicenseLangString ${LANG_ENGLISH} "License.rtf"<br />
      LangString LicenseLangString ${LANG_GERMAN} "Lizenz.rtf"<br />
      !define MUI_LICENSEPAGE_RADIOBUTTONS<br />
      !insertmacro MUI_PAGE_LICENSE LicenseLangString<br />
      <br />
      I get only:<br />
      <br />
      LicenseData: open failed "LicenseLangString"<br />
      Usage: LicenseData local_file_that_has_license_text | license_lang_string<br />
      Error in macro MUI_PAGE_LICENSE on macroline 15</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th September 2003 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The command <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.3" target="_blank">LicenseLangString</a>...<br />
      <br />
      LinceseLangString myLicense ${LANG_ENGLISH} "license.rtf"<br />
      LinceseLangString myLicense ${LANG_GERMAN} "license-german.rtf"<br />
      <br />
      LicenseData $(myLicesnse)<br />
      or<br />
      !insertmacro MUI_PAGE_LICENSE $(myLicense)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">R@m00n</span><br />
      <span class="post-time small text-muted">5th September 2003 15:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, can you perhaps give me a whole example.<br />
      <br />
      If I try to use LicenseLangString before the Language loading I get "LicenseLangString "myLicense" set multiple times for 0, wasting space (...)".<br />
      So it doesn't load the license and the field is blank.<br />
      <br />
      If I use the code after language initialisation it's blank cause it's after the !insertmacro MUI_PAGE_LICENSE $(myLicense)<br />
      <br />
      If I use the language initialisation before the page command I'm getting one warning after the other that some strings are missing and many fields are blank.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th September 2003 15:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fixed in latest CVS version.<br />
      <br />
      It wasn't because you've defined the LangString after you've used it, you should be able to do that. The right way is to use the LangString created by LicenseLangString before you set it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bradharding</span><br />
      <span class="post-time small text-muted">5th September 2003 23:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Joost,<br />
      <br />
      Followed the link you gave, but I'm not sure how or where it'll help me resolve the issue I'm having.<br />
      <br />
      It seems that for whatever reason, I'm unable to change the font on the license page, whereas every other page is displayed fine. I've put all the page settings before inserting the page, but other than that, it has worked as it should in the past. I've attached my nsi file. Any ideas?<br />
      <br />
      Thanks in advance.<br />
      <br />
      Brad.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th September 2003 23:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Assuming you are talking only about the license data itself your answer is that RTF has its own font settings. To change the font for the license data you should change the RTF or use a text file instead.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bradharding</span><br />
      <span class="post-time small text-muted">5th September 2003 23:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks kichik, but no, I'm referring to the inner dialog text on the license page. (sorry, should have been clearer). The header text and button text are fine, and the overall width of the window is fine to match the other pages. I've attached a screenshot of the page to show you what I mean.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th September 2003 10:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fixed in latest CVS version. I have also improved SetFont so you can set a different font for every language from the script.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">6th September 2003 12:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">&gt;&gt; Using !define MUI_BRANDINGTEXT no longer works.<br />
      <br />
      i can copy this :(<br />
      CVS from this morning.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">6th September 2003 12:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should use the normal BrandingText command.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">6th September 2003 12:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">huh?<br />
      <br /></p>

      <blockquote>
        Important: Because the Modern UI has its own macro system, its own default settings and a lot of new features, the interface configuration works differently. So you should not use commands like Icon, BrandingText etc.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">6th September 2003 13:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll change that. Because of the new langauge stuff, the Modern UI doesn't need it own BrandingText setting anymore.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">6th September 2003 13:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">@Joost<br />
      <br />
      the change must be somewhere between 30-08 and 03-09.<br />
      <br />
      all versions from september has bugs like "brandingtext has already been defined"<br />
      <br />
      the version from 30-08 works fine here - i have to step back to get all my scripts so far to work.<br />
      <br />
      little bit disappointed and angry about that.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">6th September 2003 13:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please read <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=148146" target="_blank">http://forums.winamp.com/showthread....hreadid=148146</a><br />
      <br />
      A lot has changed, you should not use MUI_BRANDINGTEXT anymore. You should also make other changes to make your script compatible (as descriped in that topic).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bradharding</span><br />
      <span class="post-time small text-muted">7th September 2003 00:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, everyone!<br />
      <br />
      Now it works as before.<br />
      <br />
      Just one other query: I've been experimenting with SetCtlColors, and have been able to set the background colour of all things on all pages except for two problems:<br />
      <br />
      How do you set the background colour of the inner dialog of the start menu page? Becuase it doesn't have a custom show page, is it possible at all?<br />
      <br />
      Also, how do you set the background colour of the branding text without the horizontal bevelled line disappearing altogether. Using the following example in the documentation does just that:<br />
      <br /></p>
      <pre>
<code><br /> Function .onGUIInit<br />   # 1028 is the id of the branding text control<br />   GetDlgItem $R0 $HWNDPARENT 1028<br />   CreateFont $R1 "Tahoma" 10 700<br />   SendMessage $R0 ${WM_SETFONT} $R1 0<br />   # set background color to white and text color to red<br />   SetCtlColors $R0 FFFFFF FF0000<br /> FunctionEnd<br /></code>
</pre><br />
      <br />
      Thanks again.<br />
      <br />
      Brad.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th September 2003 09:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As for the StartMenu, not yet. See <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=711900&amp;group_id=22049&amp;atid=373088" target="_blank">http://sourceforge.net/tracker/index...49&amp;atid=373088</a><br />
      <br />
      For the branding in the MUI you need to set the background to control number 1256. I have added an option in latest CVS to combine both colors and /BRANDING. Use:<br />
      <br />
      GetDlgItem $0 $HWNDPARENT 1256<br />
      SetCtlColors $0 /BRANDING FF0000</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">7th October 2003 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've updated my kit to use:<br />
      <br />
      LicenseLangString myLicense ${LANG_ENGLISH} "license/en/license.txt"<br />
      ...<br />
      but i want to copy it to the install dir BUT if I try:<br />
      <br />
      File $(myLicense)<br />
      <br />
      it tell that file does not exists!!<br />
      <br />
      How do I resolve this problem ?<br />
      (Did I mention, the license is working and it's loaded in the kit but i need to copy it to the destionation foloder and create a link to it)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th October 2003 14:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">$(myLicense) contains the text of the license and is a runtime "variable". You would have to copy the right license according to the language select (StrCmp $LANGUAGE ...).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">7th October 2003 14:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Imagine that now I have 5 languages and the list will grow soon. Do I have to include assembles style if/else code for every change?<br />
      I think we need a better way, quick.<br />
      <br />
      Any ideea?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th October 2003 14:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can always create a nice little macro.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
