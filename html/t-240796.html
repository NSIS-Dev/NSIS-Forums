<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="building nsis on macos: some solutions &amp; some questions"><title>building nsis on macos: some solutions &amp; some questions - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">building nsis on macos: some solutions &amp; some questions</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240796">building nsis on macos: some solutions &amp; some questions</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">farialima</span><br><span class="post-time small text-muted">14th March 2006 10:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>building nsis on macos: some solutions &amp; some questions</strong><br>I tried to build on MacOS. I had some compilation errors, which I was able to solve by editing SCons/Config/gnu and changing the line 25 from:<br>defenv['MAP_FLAG'] = '-Wl,-Map,${TARGET.base}.map'<br>to<br>defenv['MAP_FLAG'] = '-Wl'<br><br>I don't know if it qualify as a patch... maybe I had this error because I'm not using the right tools ? I use gcc version 3.3 20030304 (Apple Computer, Inc. build 1666), and scons v0.96.91.D001.<br><br>in anycase, running:<br>scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all PREFIX=/Users/farialima install<br>now works, it creates a 'makensis' in my personal bin folder, but it's missing some stubs, for zlib and other things. Running 'makensis' gives<br>Error: opening stub "/Users/farialima/share/nsis/Stubs/zlib"<br>Error initalizing CEXEBuild: error setting default stub<br><br>How can I complete my installation on the Mac ? should I take some other files from another installation ? I could not find any documentation beside the "appendix G" at <a href="http://nsis.sourceforge.net/Docs/AppendixG.html" target="_blank">http://nsis.sourceforge.net/Docs/AppendixG.html</a> (great name BTW) ?<br><br>I am not familiar with the internals of NSIS; is there any hope to have a complete NSIS (including the MUI...) running on MacoS ?<br><br><br>thanks<br><br>Fran√ßois</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th March 2006 12:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You should use the compiled makensis along with files from a matching compiled version. As said in the documentation, right below the scons command line you've used:</p><blockquote>This should only build makensis. Once you have makensis, you can drop it in a downloaded precompiled package such as the nightly build. Note that the in order for this to work, the precompiled package must be compiled using the exact same sources as makensis. In particular, Source\exehead\config.h and Source\exehead\fileform.h must be identical.</blockquote>However, even if you do that, you won't be able to run makensis on MacOS X. makensis doesn't yet run on big-endian platforms like PowerPC. The current CVS version almost runs, but not yet. Unless you have the new mactel, you won't be able to run makensis.<br><br>I'll a test to the code that'll check if the -map flag is available or not.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">farialima</span><br><span class="post-time small text-muted">14th March 2006 17:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry for not knowing how to read. :(. Thanks for pointing me to the right info.<br><br>I had also looked at the DarwinPort, which I was able to compile, and which seems to take care of the BigEnding thing, but it is an older version (2.05) and it has other problems. You may be interesting in knowing about it. I've entered two bugs on it, I'm not sure it's still maintained:<br><a href="http://bugzilla.opendarwin.org/show_bug.cgi?id=7502" target="_blank">http://bugzilla.opendarwin.org/show_bug.cgi?id=7502</a><br><a href="http://bugzilla.opendarwin.org/show_bug.cgi?id=7504" target="_blank">http://bugzilla.opendarwin.org/show_bug.cgi?id=7504</a><br><br>I'm not familiar enough with the code, and with MacOS, to be able to help on the coding side, but if you need testing or anything, please contact me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th March 2006 17:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The DarwinPort took care of only one of many big endian problems. It took care of the one that made makensis crash immediately and that's it. SourceForge compile farm has a PowerPC to test on and I also have a MacOS X machine in the house, so testing is not needed. But if you'd like to get into the code, patches are always appreciated.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">farialima</span><br><span class="post-time small text-muted">14th March 2006 17:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK. Just one last thing, I'll waste bandwidth but it has to be said: thanks for this excellent tool. NSIS is clearly the best. Just right between complexity and features. Extensible to hell if needed. Clearly the best. Congratulations.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">16th March 2006 04:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">With the next version, or CVS, I recommend that you turn on the NSIS_CONFIG_CONST_DATA_PATH option when building on MacOSX. This will make makensis look for stuff in the subdirectory where makensis is located, instead of some predefined location. This way you can move the directory around and it will still work. I think this should be made the default on MacOSX, should notify any mac packagers though. What do you think kichik?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">16th March 2006 17:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why should it be the default for MacOS X? makensis is a console application, like ls and tar, and should therefore be installed to /usr/bin. If it was a GUI (cocoa?) application, it should have had the ability to move.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">18th March 2006 04:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hmm, didn't really consider that.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>