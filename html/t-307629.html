<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Possible bug in 2.45 !searchparse" />

  <title>Possible bug in 2.45 !searchparse - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Possible bug in 2.45 !searchparse</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307629">Possible bug in 2.45 !searchparse</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">qwertymodo</span><br />
      <span class="post-time small text-muted">23rd June 2009 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Possible bug in 2.45 !searchparse</strong><br />
      I have a script that works fine in 2.44 and fails on a call to !searchparse after upgrading to 2.45. I don't remember the exact error message because I downgraded back to 2.44 to double check, and it compiled just fine on 2.44, but it was something about the search token was not found in the file. Here are the script and the text file it is parsing, both from the beginning until the relevant line and then one line after.<br />
      <br /></p>
      <pre>
<code><br />!define BUILDSCRIPTVERSION `version="1.3.4.0"`<br /><br />!searchparse /file AppInfo.cfg `AppInfoVersion="` CFG_VER_MAJOR `.` CFG_VER_MINOR `.` CFG_UPDATE `.` CFG_REVISION `"`<br />!searchparse ${BUILDSCRIPTVERSION} `version="` SCRIPT_VER_MAJOR `.` SCRIPT_VER_MINOR `.` SCRIPT_UPDATE `.` SCRIPT_REVISION `"`<br />!if "${CFG_VER_MAJOR}.${CFG_VER_MINOR}" != "${SCRIPT_VER_MAJOR}.${SCRIPT_VER_MINOR}"<br />!error "Incompatible AppInfo.cfg file.  Please use AppInfo.cfg version ${SCRIPT_VER_MAJOR}.${SCRIPT_VER_MINOR}.${SCRIPT_UPDATE}.x"<br />!endif<br /><br />!if ${CFG_UPDATE} &lt; ${SCRIPT_UPDATE}<br />!error "Incompatible AppInfo.cfg file.  Please use AppInfo.cfg version ${SCRIPT_VER_MAJOR}.${SCRIPT_VER_MINOR}.${SCRIPT_UPDATE}.x"<br />!endif<br /><br />!searchparse /file AppInfo.cfg `LauncherSourceFile="` PROGRAMSCRIPT `"`   &lt;&lt;&lt;HERE IS WHERE IT FAILS<br />!searchparse /file AppInfo.cfg `MainAppEXE="` APPEXE `"`<br /><br />. . .<br /></code>
</pre><br />
      <br />
      It fails on parsing `LauncherSourceFile="` so apparently it is making it through `AppInfoVersion="` just fine. Here's the text file it is parsing:<br />
      <br />
      <pre>
<code><br />AppInfoVersion="1.3.4.0"<br /><br />#***REQUIRED LINES***<br /><br />AppName="PortableApps Launcher Wizard"<br />LauncherSourceFile="PALauncherWizard.nsi"<br /><br />#MainAppEXE is the exe of the actual app, not the launcher<br />#Include its relative path within the U3 Package<br />#i.e. Device\MainAppEXE.exe<br />MainAppEXE="Device\PALauncherWizard.exe"<br /><br />. . .<br /></code>
</pre><br />
      <br />
      As I said, it compiles just fine with 2.44, but not with 2.45. I noticed in the 2.45 changelog that there was a bugfix for searchparse, so perhaps that broke something else...<br />
      <br />
      If this is the wrong place to post this, please just point me in the right direction.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th June 2009 12:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try the latest build. There was another !searchparse fix since 2.45.<br />
      <br />
      <a href="http://nsis.sourceforge.net/Development_Files" target="_blank">http://nsis.sourceforge.net/Development_Files</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">qwertymodo</span><br />
      <span class="post-time small text-muted">25th June 2009 02:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Appears to be fixed in the latest nightly build. Thanks for the heads up :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
