<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Multilanguage &quot;Browse for Folder&quot; and cancel dialog" />

  <title>Multilanguage "Browse for Folder" and cancel dialog - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Multilanguage "Browse for Folder" and cancel dialog</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251644">Multilanguage "Browse for Folder" and cancel dialog</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joconnor</span><br />
      <span class="post-time small text-muted">21st July 2006 19:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Multilanguage "Browse for Folder" and cancel dialog</strong><br />
      Hi all,<br />
      <br />
      I'm having a small problem with getting NSIS to display in a completely translated format...hopefully you guys can help a guy out!<br />
      <br />
      Basically, I've setup the multilanguage environment correctly (I think!) and pretty much all the pages come out translated except for several buttons and window titles that always appear in English.<br />
      <br />
      1) the "Browse for Folder" dialog:<br />
      - title of window is always "Browse for Folder"<br />
      - the buttons are always "Make New Folder", "OK", and "Cancel"<br />
      <br />
      2) The "cancel installation" confirmation window:<br />
      - the buttons are always "Yes" and "No"<br />
      <br />
      All other text in these windows and elsewhere in NSIS gets translated properly using the language files.<br />
      <br />
      I've done some searching, both extensively in these forums and far and wide on the World's Wild Web and haven't found anything that seems to work...is there something obvious that I'm not defining? Like a MUI_REALLY_TRANSLATE_EVERYTHING_FOR_REAL_THIS_TIME definition? :cry:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">21st July 2006 21:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i don't think that nsis translates these langstrings, as they are default in all windows. i'm always having a weird mixture of languages, as i'm using an english windows os with german settings (keyboard, locale..). if you got a similiar working environment, maybe test your installer on a computer with matching windows version and settings.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">scully13</span><br />
      <span class="post-time small text-muted">21st July 2006 22:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The text displayed there is based on which language Windows is in. So, even if your install is in Spanish it shows up there in English if Windows is English. You can change some of the text though yourself using DirText if you know the translations.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joconnor</span><br />
      <span class="post-time small text-muted">24th July 2006 14:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So I guess as far as easy modifications are concerned, I'm out of luck? But is there a more complicated solution? I'm fairly new to NSIS, and have only just started to explore the expanse of plugins available, but would anyone know of a replacement PlugIn(s) that could serve as the "Browse for Folder" and "Cancel" dialogs?<br />
      <br />
      Obviously, they need to allow for replacement text and translations, or I'll be stuck with the same issues.<br />
      <br />
      Failing the plug-in avenue, has no one else addressed this? I can't believe that I'm the only one who has to turn in projects with stringent translation policies!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th July 2006 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://forums.winamp.com/showthread.php?postid=1845364" target="_blank">MessageBoxEx</a> can be used for the message boxes.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">25th July 2006 02:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Did you try dialogs or dialogEx? See my signature.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joconnor</span><br />
      <span class="post-time small text-muted">26th July 2006 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">On your suggestion I've been playing a bit with DialogEx, and I'm not sure it will do the trick. First of all, I'm not yet sure how to invoke it from the "Browse..." button on MUI_PAGE_DIRECTORY, but also, unless I'm missing something, I think it suffers from the same translation "problem"...the parameter list is as follows:<br />
      <br />
      ${ModernFolderBox} [Title] [Caption] [InitDir] [Return]<br />
      <br />
      It provides a mechanism for changing the Title of Dialog, which DirText does not, but I haven't found a way to control the text on the buttons yet; they still read "Make New Folder", "ok", and "cancel"...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">27th July 2006 00:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Those strings are from you PC..in my machine I get them translated...or you want them always translated?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joconnor</span><br />
      <span class="post-time small text-muted">27th July 2006 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, the "bug" that has been raised against my installer script is complaining that the button-text does not match the selected install-language.<br />
      <br />
      So, yes, I'm trying to have those several buttons I mentioned always reflect the installer language....I don't want them to rely on the language of the windows distribution at all if possible.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">27th July 2006 16:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">According to <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/shellcc/platform/shell/reference/callbackfunctions/browsecallbackproc.asp" target="_blank">MSDN</a>, only on XP machines has that feature.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joconnor</span><br />
      <span class="post-time small text-muted">1st August 2006 18:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, still working on a solution for the 'browse for folder' dialog, but using DrO's MessageBox plugin (<a href="http://forums.winamp.com/attachment.php?s=&amp;postid=1113028" target="_blank">http://forums.winamp.com/attachment....postid=1113028</a>), here's my solution for the 'cancel dialog' (basically its been hacked together from several post, but I'm putting it here for anyone reading this that doesn't want to have to hack together one themselves...)<br />
      <br />
      Replace "!define MUI_ABORTWARNING" with "!define MUI_CUSTOMFUNCTION_ABORT UserAbort"<br />
      <br />
      New Function:<br />
      <br />
      Function UserAbort<br />
      messagebox::show MB_ICONHAND|MB_DEFBUTTON2 "" "" "$(TEXT_ABORTWARNING_MSG)" "$(TEXT_YES_MSG)" "$(TEXT_NO_MSG)"<br />
      Pop $0<br />
      StrCmp $0 "2" 0 +2<br />
      Abort<br />
      FunctionEnd<br />
      <br />
      LangString TEXT_YES_MSG ${LANG_ENGLISH} "Yes"<br />
      LangString TEXT_YES_MSG ${LANG_FRENCH} "Oui"<br />
      <br />
      LangString TEXT_NO_MSG ${LANG_ENGLISH} "No"<br />
      LangString TEXT_NO_MSG ${LANG_FRENCH} "Non"<br />
      <br />
      LangString TEXT_ABORTWARNING_MSG ${LANG_ENGLISH} "Are you sure you want to quit $(^Name) Setup?"<br />
      LangString TEXT_ABORTWARNING_MSG ${LANG_FRENCH} "Êtes-vous sûr de vouloir quitter l'installation de $(^Name) ?"</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
