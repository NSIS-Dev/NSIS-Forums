<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Reboot now, Reboot Later Processing" />

  <title>Reboot now, Reboot Later Processing - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Reboot now, Reboot Later Processing</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322277">Reboot now, Reboot Later Processing</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Squirre1</span><br />
      <span class="post-time small text-muted">8th September 2010 19:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Reboot now, Reboot Later Processing</strong><br />
      &nbsp; I have some logging that I do in my: Function .onInstSuccess<br />
      <br />
      At the end of my installation, I do not have it do a manual reboot, I let it ask... And if the user selects the reboot later option, it does not appear to process the .onInstSuccess, that being the case, what exit function does it process, .onRebootFailed..<br />
      <br />
      Thanks,<br />
      <br />
      Squirre1</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jiake</span><br />
      <span class="post-time small text-muted">9th September 2010 05:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try to use Function .onGUIEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Squirre1</span><br />
      <span class="post-time small text-muted">9th September 2010 12:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Naaa... I dont initialize logging unless the installation is actually started, not just ran.. Sooo, .onGUIEnd is not a good option, it will attempt to log closing lines when not initialized...<br />
      <br />
      I just need to know the closing function that is called if someone chooses not to reboot at the end of any installation..</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">9th September 2010 13:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm guessing you're using MUI's built-in reboot option? If so, there is no such callback.<br />
      <br />
      Go to ProgramFiles\NSIS\Contrib\Modern UI 2\Pages\Finish.nsh . Adjust these lines...<br />
      <br /></p>
      <pre>
<code>     ;Check whether the user has chosen to reboot the computer<br />      ${if} ${RebootFlag}<br />        SendMessage $mui.FinishPage.RebootNow ${BM_GETCHECK} 0 0 $mui.FinishPage.ReturnValue<br />        ${if} $mui.FinishPage.ReturnValue = ${BST_CHECKED}<br />          Reboot<br />        ${else}<br />          /* Your code would go here */<br />          Return<br />        ${endif}<br />      ${endif} 
</code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>