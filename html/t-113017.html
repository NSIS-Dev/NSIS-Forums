<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS delete function seems to lock files"><title>NSIS delete function seems to lock files - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS delete function seems to lock files</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=113017">NSIS delete function seems to lock files</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">hutch120</span><br><span class="post-time small text-muted">6th November 2002 06:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS delete function seems to lock files</strong><br>Hi All,<br><br>I'm using NSIS to deliver updates for the product I work on. Just recently I needed to delete a file on the destination machine prior to copying/extracting it from the installer. Although the delete process and copy process seemed to have worked correctly there were issues when it came to using the file later in the installation script.<br><br>These are the basic steps(sections) performed:<br>1. Delete fileX from destination machine<br>2. Install/extract fileX onto destination machine<br>3. Execute a function that uses and modifies fileX<br><br>* If I run with all 3 steps the 3rd step fails.<br>* If I manually delete the file and only run steps 2 and 3 the installation works.<br>* If I put a sleep in between step 1 and 2 the installation works.<br><br>I would like to find a better solution to putting a sleep after the delete, also I'm wondering what is actually occuring.<br><br>If the NSIS installer is locking the file can it be unlocked?<br>Has anyone seen something similar to the above scenario?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">6th November 2002 07:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The reason that sleep solves the problem is that the destination machine did not finish step 1/2 when you start step 3. You should give it some time to finish the task. Eg. with a sleep.<br><br>-Hendri.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th November 2002 15:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What NSIS version are you using?<br>What Windows version are you using?<br>Have you set the overwrite flag to anything else than the default?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">hutch120</span><br><span class="post-time small text-muted">6th November 2002 21:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Running<br>* NSIS v2.0a7 modern interface.<br>* Win2k Pro<br>Overwrite flag set to ifnewer</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">n0On3</span><br><span class="post-time small text-muted">7th November 2002 01:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am having problems with Delete, too.<br><br>If this conforts you:confused:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th November 2002 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why don't you just overwrite the file?</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>