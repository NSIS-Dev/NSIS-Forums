<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Delete external files" />

  <title>Delete external files - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Delete external files</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215692">Delete external files</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">11th May 2005 11:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Delete external files</strong><br />
      &nbsp; In my installation script I copy two self chosen files to a self chosen directory. These files are NOT compiled within the installer.<br />
      Is it possible to delete them with the uninstaller? I retrieve error when trying that with: Delete "filename"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th May 2005 14:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try:</p>
      <pre>
<code>Delete "$INSTDIR\filename"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">11th May 2005 14:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">the files are copied to a "self chosen" directory. so maybe the files are not in $INSTDIR.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th May 2005 14:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In the uninstaller, $INSTDIR is the directory where the uninstaller resides. If the uninstaller is not written to the same directory as those files, you'd have to find the path of those files first and pass it on to Delete.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">11th May 2005 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hm sorry. in my first post i wrote Delete "filename" but filename contains also the complete path.<br />
      <br />
      like: c:\temp\example.txt<br />
      <br />
      I read this out from an config file of the application. I succesfully checked the filename with a MessageBox. The file exists but I can not delete it.<br />
      <br />
      ??</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th May 2005 16:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Then you're probably experiencing the problem described in the following FAQ item:<br />
      <a href="http://nsis.sourceforge.net/index.php?id=19&amp;backPID=15&amp;tx_faq_faq=20" target="_blank">http://nsis.sourceforge.net/index.ph...&amp;tx_faq_faq=20</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">11th May 2005 20:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hm. I found that faq, too and tried it. but it does not work. maybe i did something wrong. tomorrow i can post the code (it's at work).<br />
      <br />
      or it's the filename... at the installation process i have to escape "\" and " ", because the installed programm (openVPN) need it in the config file. on deinstallation i have to "re"escape the string (from "\\" to "\" and "\ " to " "). maybe there went something wrong.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">11th May 2005 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">When you say the file exists, did you do it with IfFileExists?<br />
      <br />
      IfFileExists "filepath" 0 +2<br />
      MessageBox MB_OK "filepath exists!"<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">11th May 2005 20:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll check that tomorrow! If I remember I did not check with IfFileExist.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">12th May 2005 06:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I checked it with IfFileExists (see code)<br />
      <br /></p>
      <pre>
<code>
    delete:
<br />      ${</code>UnStrRep} $tmp $tmp "\\" "\"
<br />      ${UnStrRep} $tmp $tmp " " " "
<br />      ${UnStrTrimNewLines} $tmp $tmp
<br />      DetailPrint "LÃ¶sche Datei $tmp"
<br />      
<br />      IfFileExists $tmp FileExists FileNotExists
<br />      FileExists:
<br />        MessageBox MB_OK "Die Datei $tmp existiert"
<br />        goto loop
<br />      FileNotExists:
<br />        MessageBox MB_OK "Die Datei $tmp existiert nicht"
<br />        goto error 
<br />&gt;

</pre>The installer goes to the FileNotExists: label. I don't know why. The content of $tmp 'seemed' to be correct (for me, but apparent not for the uninstaller.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">blue_raptor</span><br />
      <span class="post-time small text-muted">12th May 2005 07:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">*oh oh* I feel so ashamed. Sorry guys for waisting your time!<br />
      <br />
      I did a "noob" mistake in programming. I cut the filepath with StrCpy $tmp $2 "" 4<br />
      but it has to be<br />
      StrCpy $tmp $2 "" 5<br />
      <br />
      :igor:<br />
      <br />
      For this weekend I'll creep away.<br />
      <br />
      <br />
      edit: my installer und uninstaller works fine for now (in that way it should work)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>