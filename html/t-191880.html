<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Proposal: /NOIEPROXY flag for nsisdl plugin" />

  <title>Proposal: /NOIEPROXY flag for nsisdl plugin - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Proposal: /NOIEPROXY flag for nsisdl plugin</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=191880">Proposal: /NOIEPROXY flag for nsisdl plugin</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">30th August 2004 14:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Proposal: /NOIEPROXY flag for nsisdl plugin</strong><br />
      Hi,<br />
      <br />
      I've just made a little modification to nsisdl: I've introduced a new flag called /NOIEPROXY which makes the plugin not to read IE proxy settings, so it tries to download the files directly.<br />
      The reason behind this modification is that in certain enviroments, some of the intranet http servers can't be connected via the corporate proxy server and I can't make the users switch to M$IE proxy options just because that single download, it's easier to give them the option to not to use the proxy in that one case.<br />
      Use:<br />
      <br />
      The /NOIEPROXY flag should be the first flag for the nsis::download command.<br />
      If /NOIEPROXY or /NOIEPROXY=1 is the first flag for this command, then the IE proxy config is not used. Examples:<br /></p>

      <ul>
        <li>NSISdl::download /NOIEPROXY http://www.domain.com/file localfile.exe</li>

        <li>NSISdl::download /NOIEPROXY=1 http://www.domain.com/file localfile.exe</li>
      </ul><br />
      If this flag is ommitted or for exp. /NOIEPROXY=0 is inserted then IE proxy is used.<br />
      Examples:<br />

      <ul>
        <li>NSISdl::download http://www.domain.com/file localfile.exe</li>

        <li>NSISdl::download /NOIEPROXY=0 http://www.domain.com/file localfile.exe</li>
      </ul><br />
      I think this modification is helpful and does not make the usage or the source code much too complicated. I hope that it might be included in the CVS someday.<br />
      <br />
      Regards,<br />
      <br />
      Memph
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">30th August 2004 17:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, I though this topic generates much more interest than that :)<br />
      Anyone interested?<br />
      <br />
      Regards,<br />
      <br />
      Memph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">3DTrains</span><br />
      <span class="post-time small text-muted">30th August 2004 21:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Me! &lt;*waves*&gt; :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">31st August 2004 09:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Marc,<br />
      <br />
      I forgot to mention, and that might disturb people: If you apply the patch against nsisdl.cpp in the NSISDL source, you'll get the modified source.<br />
      <br />
      The directory where the cpp file to be patched resides is:<br /></p>
      <pre>
<code>C:\Program Files\NSIS\Contrib\NSISdl</code>
</pre><br />
      <br />
      <br />
      The command to apply the patch:<br />
      <pre>
<code>/usr/bin/patch nsisdl.cpp nsisdl.cpp.diff.txt</code>
</pre><br />
      <br />
      The patch command requires cygwin to be deployed. If you want, I can upload the modified nsisdl.cpp source here.<br />
      <br />
      Regards,<br />
      <br />
      Memph
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mdm</span><br />
      <span class="post-time small text-muted">31st August 2004 18:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">confused...<br />
      1. do I add the /NOIEPROXY flag to nsisdl.cpp (where?)?<br />
      2. what about deleting nsisdl.dll file if my installer has no need to go to any webserver? Is that a working solution?<br />
      <br />
      mdm</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">31st August 2004 18:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi mdm,<br />
      <br />
      1: you have to patch your nsisdl.cpp the way I described above. I'll attach to whole source, in case you don't have patch utility. Usage is described in my first post: you have to put this flag right after the 'NSISdl::download' command.<br />
      2: Well, I'm not sure if I understand what you mean to say. My patch is to enable an NSIS user to avoid to use MSIE's web proxy settings and go to the web server directly. If your installer does not download data via web, you just simply comment out the 'NSISdl::download' command in your script.<br />
      <br />
      Regards,<br />
      <br />
      Memph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mdm</span><br />
      <span class="post-time small text-muted">31st August 2004 18:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">please excuse me for being obtuse here..<br />
      my nsisdl.cpp and the one you sent has no line: NSISdl::download.<br />
      Is NSISdl::download a command for my nullsoft installation script? I don't have any web downloads within my installation script("If your installer does not download data via web, you just simply comment out the 'NSISdl::download' command in your script").<br />
      <br />
      appreciate your patience,<br />
      mdm</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">1st September 2004 09:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Mdm,<br />
      <br />
      'NSISdl::download' is invocation form of "NSISdl" plugin's "download" function, so in this form it should present in an nsi script, so "C:\Program Files\NSIS\Contrib\NSISdl\ReadMe.txt" for details. If you don't want to use web in your NSIS installer you, don't need it and this topic is needles either :)<br />
      In the nsisdl.cpp you can find a line starting with "_declspec(dllexport) void download", that's where you can check the C++ source code.<br />
      <br />
      Regards,<br />
      <br />
      Memph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">k_hejwosz</span><br />
      <span class="post-time small text-muted">1st September 2004 11:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Modified nsisdl.dll</strong><br />
      Could you please upload the recompiled nsisdl.dll with the /NOIEPROXY flag?<br />
      <br />
      I would be much obliged</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">1st September 2004 12:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      Here it goes, along with the source.<br />
      <br />
      Regards,<br />
      <br />
      Memph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">k_hejwosz</span><br />
      <span class="post-time small text-muted">1st September 2004 12:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks.<br />
      <br />
      Konrad</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">2nd September 2004 22:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanks, added in latest cvs.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">memph</span><br />
      <span class="post-time small text-muted">3rd September 2004 11:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Kichik,<br />
      <br />
      Thank you!<br />
      <br />
      Regards,<br />
      <br />
      Memph</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
