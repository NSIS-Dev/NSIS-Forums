<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Header image in Modern UI"><title>Header image in Modern UI - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Header image in Modern UI</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202244">Header image in Modern UI</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">khawkins123</span><br><span class="post-time small text-muted">16th December 2004 16:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Header image in Modern UI</strong><br>I am using the Modern UI with the following entries in my .nsi script.<br><br>!define MUI_ICON "Messenger.ico"<br>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP "STPMessengerTitleSmall.bmp"<br><br>The icon displays fine but I can't get get the header image to display. Am I missing something?<br><br>Also the following colors command seems to have no effect:<br><br>!define MUI_INSTFILESPAGE_COLORS "F0F0F0 000000"<br><br>Any help would be appreciated.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br><span class="post-time small text-muted">16th December 2004 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">works just fine for me. could you plz attach your script, or an example, where it doesn't work?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khawkins123</span><br><span class="post-time small text-muted">16th December 2004 16:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Here's the whole script</strong><br>; main.nsi<br>; Main installer script for use with NSIS Installer<br>;--------------------------------<br><br>;--------------------------------<br>; Let's use the "Modern" UI style<br>!include "MUI.nsh"<br>;--------------------------------<br><br>!define VERSION "3.2.0"<br>!define MUI_ICON "Messenger.ico"<br>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP "MessengerTitleSmall.bmp"<br><br>LangString MUI_TEXT_WELCOME_INFO_TEXT ${LANG_ENGLISH} "Welcome to Messenger Install"<br>LangString MUI_TEXT_WELCOME_INFO_TITLE ${LANG_ENGLISH} "Messenger Install"<br>LangString MUI_TEXT_INSTALLING_TITLE ${LANG_ENGLISH} "Installing Messenger"<br><br><br>; The name of the installer<br>Name "Messenger version ${VERSION}"<br><br>; The file to write<br>OutFile "InstallMessenger_v${VERSION}.exe"<br><br>; The default installation directory<br>InstallDir $PROGRAMFILES\Messenger${VERSION}<br><br>;--------------------------------<br>; Pages<br>;--------------------------------<br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_DIRECTORY<br>!insertmacro MUI_PAGE_INSTFILES<br><br><br>; The stuff to install<br>Section "" ;No components page, name is not important<br><br>; Set output path to the installation directory.<br>SetOutPath $INSTDIR<br><br>; Put files there<br>File /r ..\FilesToInstall\*.*<br><br>SectionEnd ; end the section</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th December 2004 20:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1. The header bitmap must be extracted to a temporary location using File/ReserveFile.<br>2. You must specify the full path to the bitmap.<br><br>E.g.<br></p><pre>
<code>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP "$PLUGINSDIR\MessengerTitleSmall.bmp"<br>Function .onInit<br> InitPluginsDir<br> ReserveFile "/oname=$PLUGINSDIR\MessengerTitleSmall.bmp" "MessengerTitleSmall.bmp"<br>FunctionEnd</code>
</pre><br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">khawkins123</span><br>
      <span class="post-time small text-muted">17th December 2004 20:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the reply. After making the .onInit Entry change now a welcome page which wasn't displaying before is coming up. I still don't see the bitmap. The page is completely blank. NSIS seems very tempermental.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">17th December 2004 21:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry,<br>
      ReserveFile "/oname=$PLUGINSDIR\MessengerTitleSmall.bmp" "MessengerTitleSmall.bmp"<br>
      ...won't work.<br>
      <br>
      You'd need to use:<br>
      SetOutPath $PLUGINSDIR<br>
      ReserveFile "MessengerTitleSmall.bmp"<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">17th December 2004 21:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I think the problem is being caused because you are using LangString's when you aren't including any seperate languages. If you are only using English then you don't need to use LangString's. If you do, MUI just seems to fall to pieces (I have found).<br>
      <br>
      Just use plain !defines rather than LangString's.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br>
      <span class="post-time small text-muted">17th December 2004 22:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        If you do, MUI just seems to fall to pieces (I have found).
      </blockquote>I have no trouble using language strings in my English-only MUI-based installers.<br>
      <br>
      Did you remember to include the
      <pre>
<code>!insertmacro MUI_LANGUAGE "English"</code>
</pre>line in your script ?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">17th December 2004 23:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by pengyou</i><br>
        <b>I have no trouble using language strings in my English-only MUI-based installers.<br>
        <br>
        Did you remember to include the</b>
        <pre>
<b><code>!insertmacro MUI_LANGUAGE "English"</code></b>
</pre><b>line in your script ?</b>
      </blockquote>That's the reason that I said that LangStrings are pointless in his script because he isn't including the English language!<br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br>
      <span class="post-time small text-muted">18th December 2004 00:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        That's the reason that I said that LangStrings are pointless in his script because he isn't including the English language!
      </blockquote>The script might only use English at the moment but perhaps there are plans to add more languages in the future? Adding the MUI_LANGUAGE line is an easier change than getting rid of all the language strings in the script.<br>
      <br>
      Surely there is no harm in using language strings even if the script only uses one language, provided the necessary MUI_LANGUAGE line is used? Some of my installers start out as English-only and end up supporting several languages and I have found it easier to use language strings right from the start.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">18th December 2004 11:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need to include the English language:<br>
      !insertmacro MUI_LANGUAGE "English"<br>
      <br>
      This must be put in after you insert the Page macro's and before you insert any LangStrings.<br>
      <br>
      I think the reason that your installer isn't working properly is because you are currently using LangStrings specifying ${LANG_ENGLISH} when you do not have ${LANG_ENGLISH} set (using the MUI_LANGUAGE macro).<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">19th December 2004 22:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There is absolutely no need to add that .onInit code in this topic. For a MUI header image you only need:<br>
      <br>
      !define MUI_HEADERIMAGE<br>
      !define MUI_HEADERIMAGE_BITMAP "STPMessengerTitleSmall.bmp"<br>
      <br>
      But an installer always needs a language, if you are only using Ennglish, you have to include the MUI_LANGUAGE macro for English.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bgosalci</span><br>
      <span class="post-time small text-muted">21st December 2004 11:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Uninstaller header image</strong><br>
      Hi, I have a similar problem, I am successfully displaying my bitmaps in the header using the command !define MUI_HEADERIMAGE_BITMAP but when trying to change the header image of my uninstaller the same header image as the one set by !define MUI_HEADERIMAGE_BITMAP is shown.<br>
      <br>
      How would I set the uninstaller header image. I am using<br>
      !define MUI_UNHEADERIMAGE_BITMAP "${NSISDIR}\Contrib\Graphics\Header\orange-uninstall.bmp" but it does not work</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">21st December 2004 12:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use !define MUI_HEADERIMAGE_UNBITMAP "$PLUGINSDIR\file.bmp"<br>
      Also remeber it's the path to the Bitmap file on the user's computer, not yours!!!<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">22nd December 2004 15:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's not true, the MUI will extract the file to the users system automatically.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sirchris</span><br>
      <span class="post-time small text-muted">22nd December 2004 22:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This doesnt work for me either<br>
      <br>
      !define MUI_HEADERIMAGE<br>
      !define MUI_HEADERIMAGE_BITMAP "${NSISDIR}\Contrib\Graphics\Header\nsis.bmp"<br>
      <br>
      I get no header image without the mui_headerimage_bitmap line i'll get the default</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">23rd December 2004 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Did you include the language macro? Try to modify a basic example script to see whether the problem is related to your script.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sirchris</span><br>
      <span class="post-time small text-muted">23rd December 2004 13:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">!insertmacro MUI_LANGUAGE "English"<br>
      <br>
      ;--------------------------------<br>
      ;Interface Configuration<br>
      <br>
      !define MUI_HEADERIMAGE<br>
      !define MUI_HEADERIMAGE_BITMAP "${NSISDIR}\Contrib\Graphics\Header\nsis.bmp"<br>
      !define MUI_ABORTWARNING<br>
      <br>
      ;--------------------------------<br>
      ;Pages<br>
      <br>
      !insertmacro MUI_PAGE_LICENSE "${NSISDIR}\Contrib\Modern UI\License.txt"<br>
      <br>
      I was just modifying the basic script . I added the headerimage_bitmap line and moved the language line to the top</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd December 2004 13:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please see the MUI readme. It shows you how to make a script in steps. You <b>always</b> insert the MUI_LANGUAGE macro after all interface configuration and MUI_PAGE macro's.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sirchris</span><br>
      <span class="post-time small text-muted">23rd December 2004 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I did have that there. The only reason I moved it was I was getting an error, which seems to be gone now interestingly enough. maybe it ws something else.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>