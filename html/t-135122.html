<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Installation file signature" />

  <title>Installation file signature - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Installation file signature</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135122">Installation file signature</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">klaabu</span><br />
      <span class="post-time small text-muted">12th May 2003 09:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Installation file signature</strong><br />
      Hi all the NSIS developers!<br />
      <br />
      I have a question regarding installation exe-file and adding a signature to it. The point is that I added a feature to my product which allows it to upgrade itself. It's done in a simple way - it just finds the file on the network, downloads and executes it with silent option (/S) and the installation script with some help from accompanying dll knows what to do. It works as I want it to work but the only thing I want to add to it is a small signature somewhere which confirms that it is really the correct file and correct version. What's the best way to do it? I was thinking about just adding the signature as a file to the project and then the application could extract (the same way as the exe header is doing it) it itself after downloading and then check it to be sure that it it's not a random file being executed.<br />
      Has anyone done it or can anyone maybe even give some hints how to do it in a better/easier way?<br />
      Thanks in advance!<br />
      /Allan<br />
      <br />
      P.S. My best wishes to the developers of the NSIS! It's a great piece of software and I never want to use InstallShield again.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">12th May 2003 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i bet md5 is documented out well enough to implement it in any way :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">klaabu</span><br />
      <span class="post-time small text-muted">12th May 2003 12:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the hint. MD5 is my old friend. I just hoped that there is an easier way to do the check or even some readymade contributional utility.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th May 2003 12:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi klaabu, welcome to the forum!<br />
      <br />
      MD5 is a good idea indeed. You can use <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=117789&amp;highlight=md5" target="_blank">this plug-in</a> to get the signature of the downloaded file and <a href="http://www.geocities.com/ballarke/Applications/MD5Win32/" target="_blank">this program</a> to get MD5 hash on your computer. You'd probably want to get a command line MD5 version and add this few lines to your script to automate the process:<br />
      <br /></p>
      <pre>
<code>!system "echo !define MD5hash \ &gt; md5.nsh" = 0<br />!system "md5 mydl.dat &gt;&gt; md5.nsh" = 0<br />!include md5.nsh<br /># ${MD5hash} now contains the requested MD5 hash</code>
</pre><br />
      <br />

      <blockquote>
        P.S. My best wishes to the developers of the NSIS! It's a great piece of software and I never want to use InstallShield again.
      </blockquote>Thanks :D
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
