<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Request : Tutorial on InstallOptions 2 using HM NIS Edit" />

  <title>Request : Tutorial on InstallOptions 2 using HM NIS Edit - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Request : Tutorial on InstallOptions 2 using HM NIS Edit</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=179216">Request : Tutorial on InstallOptions 2 using HM NIS Edit</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dygear</span><br />
      <span class="post-time small text-muted">7th May 2004 06:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Request : Tutorial on InstallOptions 2 using HM NIS Edit</strong><br />
      &nbsp; As most if not all of you know that HM NIS Edit comes with an InstallOptions dialog designer, will if some on could make a tutorial on how to get this to work that would be cool.<br />
      <br />
      I am going for something like this : <a href="http://www.gnyso-strike.com/host/dygear/Images/NSIS/NSISIO2_1.jpg" target="_blank">http://www.gnyso-strike.com/host/dyg.../NSISIO2_1.jpg</a><br />
      <br />
      <a href="http://www.gnyso-strike.com/host/dygear/Images/NSIS/NSISIO2_2.jpg" target="_blank">http://www.gnyso-strike.com/host/dyg.../NSISIO2_2.jpg</a><br />
      <br />
      and would output this :<br />
      <br /></p>
      <pre>
<code>amx_admin "" "" "abcdefghijklmnopqrstu" "ce"</code>
</pre><br />
      <br />
      How the hell did he do all of this, thats what i need to know, and i am hoping for a tutorial on the subject.<br />
      Its not installing anything, its just adding a line to the file, Could some one show me code on all of this.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">7th May 2004 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Talk to the developer. Although, as you say is only the designer...<br />
      you'll have to use the hand-code to make it work, as you can see the IO DOCs.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ranametal</span><br />
      <span class="post-time small text-muted">7th May 2004 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can download a tutorial in MS-Word format <a href="http://forums.winamp.com/attachment.php?s=&amp;postid=1103601" target="_blank">here</a> from this <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=150727" target="_blank">forum thread</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dygear</span><br />
      <span class="post-time small text-muted">7th May 2004 21:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1st thanks for replying all of you.<br />
      <br />
      2nd ranametal, that helpe soo much meny thanks.<br />
      <br />
      3rd Lobo Lunar, i know the guy quite well, but he is WAY more advaned then me, so when we talk its like " ok do this Pop $R1 ".<br />
      And i am like " WTF? ".<br />
      So he helps to a certain extent but hes just to good for me now.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dygear</span><br />
      <span class="post-time small text-muted">7th May 2004 23:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, followed that guide and i am stuck!<br />
      <br />
      this is my code unedited.<br /></p>
      <pre>
<code>; Script generated by the HM NIS Edit Script Wizard.<br /><br />; HM NIS Edit Wizard helper defines<br />!define PRODUCT_NAME "Admin"<br />!define PRODUCT_VERSION ".0a"<br />!define PRODUCT_PUBLISHER "AmxModX, Dygear."<br />!define PRODUCT_WEB_SITE "http://www.amxmodx.org"<br />!define PRODUCT_STARTMENU_REGVAL "NSIS:StartMenuDir"<br /><br />SetCompressor lzma<br /><br />; MUI 1.67 compatible ------<br />!include "MUI.nsh"<br /><br />; MUI Settings<br />!define MUI_ABORTWARNING<br />!define MUI_ICON "${NSISDIR}\Contrib\Graphics\Icons\modern-install-colorful.ico"<br /><br />; Language Selection Dialog Settings<br />!define MUI_LANGDLL_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"<br />!define MUI_LANGDLL_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"<br />!define MUI_LANGDLL_REGISTRY_VALUENAME "NSIS:Language"<br /><br />; Welcome page<br />!insertmacro MUI_PAGE_WELCOME<br />; License page<br />!insertmacro MUI_PAGE_LICENSE "..\License\gpl.txt"<br />; Directory page<br />!insertmacro MUI_PAGE_DIRECTORY<br />; Start menu page<br />var ICONS_GROUP<br />!define MUI_STARTMENUPAGE_NODISABLE<br />!define MUI_STARTMENUPAGE_DEFAULTFOLDER "Admin"<br />!define MUI_STARTMENUPAGE_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"<br />!define MUI_STARTMENUPAGE_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"<br />!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME "${PRODUCT_STARTMENU_REGVAL}"<br />!insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />; Instfiles page<br />!insertmacro MUI_PAGE_INSTFILES<br />; Finish page<br />!define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\gpl.txt"<br />!insertmacro MUI_PAGE_FINISH<br /><br />; Language files<br />!insertmacro MUI_LANGUAGE "English"<br />!insertmacro MUI_LANGUAGE "French"<br />!insertmacro MUI_LANGUAGE "German"<br /><br />; Reserve files<br />!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br /><br />; MUI end ------<br /><br />Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"<br />OutFile "Admin.exe"<br />InstallDir "$PROGRAMFILES\AmxModX Tools"<br />ShowInstDetails show<br /><br />Function .onInit<br />  !insertmacro MUI_LANGDLL_DISPLAY<br />FunctionEnd<br /><br />Section "MainSection" SEC01<br />  SetOutPath "$INSTDIR"<br />  SetOverwrite ifnewer<br />  File "..\License\gpl.txt"<br />  CreateDirectory "$SMPROGRAMS\$ICONS_GROUP"<br />  CreateShortCut "$SMPROGRAMS\$ICONS_GROUP\gpl.lnk" "$INSTDIR\gpl.txt"<br />SectionEnd<br /><br />Section -AdditionalIcons<br />  WriteIniStr "$INSTDIR\${PRODUCT_NAME}.url" "InternetShortcut" "URL" "${PRODUCT_WEB_SITE}"<br />  CreateShortCut "$SMPROGRAMS\$ICONS_GROUP\Website.lnk" "$INSTDIR\${PRODUCT_NAME}.url"<br />SectionEnd<br /><br />Section -Post<br />  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "${PRODUCT_STARTMENU_REGVAL}" "$ICONS_GROUP"<br />SectionEnd</code>
</pre><br />
      <br />
      It says to do this ...<br />
      <br />

      <blockquote>
        Now you should note the Field numbers of the data entry controls. We are interested in<br />
        <br />
        Username (Text – Field 2)<br />
        Password (Password – Field 4)<br />
        <br />
        [Field 2]<br />
        Type=Text<br />
        Left=150<br />
        Right=300<br />
        Top=20<br />
        Bottom=35<br />
        <br />
        [Field 4]<br />
        Type=Password<br />
        Left=150<br />
        Right=300<br />
        Top=40<br />
        Bottom=56<br />
        <br />
        <br />
        <br />
        This example is using the Modern User Interface.<br />
        <br />
        In you .onInit callback function, specify the INI filename and its alias. This is because I keep my INI files, graphics, etc in a sub-directory.<br />
        <br />
        !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS "assets\UserPass.ini" "UserPass"<br />
        <br />
        <br />
        In your NSI script where you set up the page order:<br />
        <br />
        LangString USERPASS_TITLE ${LANG_ENGLISH} "Enter your Username and Password."<br />
        LangString USERPASS_SUBTITLE ${LANG_ENGLISH} " "<br />
        Page custom UsernamePasswordPage<br />
        <br />
        <br />
        The custom page function:<br />
        <br />
        # CUSTOM PAGE.<br />
        # =========================================================================<br />
        # Get the Username and Password.<br />
        Function UsernamePasswordPage<br />
        <br />
        !insertmacro MUI_HEADER_TEXT "$(USERPASS_TITLE)" "$(USERPASS_SUBTITLE)"<br />
        <br />
        # Display the page.<br />
        !insertmacro MUI_INSTALLOPTIONS_DISPLAY "UserPass"<br />
        <br />
        # Get the user entered values.<br />
        !insertmacro MUI_INSTALLOPTIONS_READ $Username "UserPass" "Field 2" "State"<br />
        !insertmacro MUI_INSTALLOPTIONS_READ $Password "UserPass" "Field 4" "State"<br />
        <br />
        FunctionEnd<br />
        <br />
        <br />
        <br />
        The VARs $Username and $Password will contain the user entered values.
      </blockquote>Thats all well and good, but how might i get this to work ?<br />
      <br />
      *Note* Dygear = UberNoobie at NSIS<br />
      as you can see i did not even make the NSIS file myself. :confused:
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">7th May 2004 23:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try this:<br />
      <br /></p>
      <pre>
<code>
/* Installer Defines */
<br /><br />&gt;!define PRODUCT_NAME "Admin"
<br />&gt;!define PRODUCT_VERSION ".0a"
<br />&gt;!define PRODUCT_PUBLISHER "AmxModX, Dygear."
<br />&gt;!define PRODUCT_WEB_SITE "http://www.amxmodx.org"
<br />&gt;!define PRODUCT_STARTMENU_REGVAL "NSIS:StartMenuDir"
<br /><br />&gt;/* Default Installer Configuration */
<br /><br />&gt;Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"
<br />&gt;OutFile "Admin.exe"
<br />&gt;InstallDir "$PROGRAMFILES\\AmxModX Tools"
<br />&gt;ShowInstDetails show
<br /><br />SetCompressor lzma
<br /><br />&gt;/* Include Modern UI 1.70 */
<br /><br />&gt;!include "MUI.nsh"
<br /><br />  /* MUI Settings */
<br /> !define MUI_ABORTWARNING
<br /> !define MUI_ICON "${NSISDIR}\\Contrib\\Graphics\\Icons\\modern-install-colorful.ico"
<br /><br />  /* Language Selection Dialog Settings */
<br /> !define MUI_LANGDLL_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"
<br /> !define MUI_LANGDLL_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"
<br /> !define MUI_LANGDLL_REGISTRY_VALUENAME "NSIS:Language"
<br /><br />  /* Page Configurations */
<br /><br />    Page custom UsernamePasswordPage
<br />   !insertmacro MUI_PAGE_WELCOME
<br />   !insertmacro MUI_PAGE_LICENSE "..\\License\\gpl.txt"
<br />   !insertmacro MUI_PAGE_DIRECTORY
<br />    
<br />   var ICONS_GROUP
<br />     !define MUI_STARTMENUPAGE_NODISABLE
<br />     !define MUI_STARTMENUPAGE_DEFAULTFOLDER "Admin"
<br />     !define MUI_STARTMENUPAGE_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"
<br />     !define MUI_STARTMENUPAGE_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"
<br />     !define MUI_STARTMENUPAGE_REGISTRY_VALUENAME "${PRODUCT_STARTMENU_REGVAL}"
<br />   !insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP
<br />    
<br />   !insertmacro MUI_PAGE_INSTFILES
<br /><br />     !define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\\gpl.txt"
<br />   !insertmacro MUI_PAGE_FINISH
<br /><br />  /* Language files */
<br /><br /> !insertmacro MUI_LANGUAGE "English"
<br /> !insertmacro MUI_LANGUAGE "French"
<br /> !insertmacro MUI_LANGUAGE "German"
<br /><br />  /* Reserve files */
<br /><br /> !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS
<br />  ReserveFile "..\\Assets\\UserPass.ini"
<br /><br />  /* Language strings */
<br /><br />    /* Username and Password page */
<br />  
<br />   LangString USERPASS_TITLE ${LANG_ENGLISH} "Enter your Username and Password."
<br />   LangString USERPASS_SUBTITLE ${LANG_ENGLISH} " "
<br /><br />&gt;/* Special Functions */
<br /><br />  /* .onInit */
<br /><br /> Function .onInit
<br />   !insertmacro MUI_LANGDLL_DISPLAY
<br />   !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS "assets\\UserPass.ini" "UserPass.ini"
<br />  FunctionEnd
<br /><br />&gt;/* Custom Page */
<br /><br />  /* Username and Password page */
<br /> Function UsernamePasswordPage
<br /><br />   !insertmacro MUI_HEADER_TEXT "$(USERPASS_TITLE)" "$(USERPASS_SUBTITLE)"
<br /><br />    # Display the page.
<br />   !insertmacro MUI_INSTALLOPTIONS_DISPLAY "UserPass.ini"
<br /><br />    # Get the user entered values.
<br />   !insertmacro MUI_INSTALLOPTIONS_READ $Username "UserPass" "Field 2" "State"
<br />   !insertmacro MUI_INSTALLOPTIONS_READ $Password "UserPass" "Field 4" "State"
<br /><br />  FunctionEnd
<br /><br />&gt;/* Sections */
<br /><br />  /* MainSection */
<br /><br /> Section "MainSection" SEC01
<br />    SetOutPath "$INSTDIR"
<br />    SetOverwrite ifnewer
<br />    File "..\\License\\gpl.txt"
<br />   CreateDirectory "$SMPROGRAMS\\$ICONS_GROUP"
<br />   CreateShortCut "$SMPROGRAMS\\$ICONS_GROUP\\gpl.lnk" "$INSTDIR\\gpl.txt"
<br />  SectionEnd
<br /><br />  /* Hidden Sections */
<br /><br />    /* AdditionalIcons */
<br /><br />   Section -AdditionalIcons
<br />      WriteIniStr "$INSTDIR\\${PRODUCT_NAME}.url" "InternetShortcut" "URL" "${PRODUCT_WEB_SITE}"
<br />     CreateShortCut "$SMPROGRAMS\\$ICONS_GROUP\\Website.lnk" "$INSTDIR\\${PRODUCT_NAME}.url"
<br />    SectionEnd
<br /><br />    /* Post */
<br /><br />   Section -Post
<br />      WriteRegStr${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "${PRODUCT_STARTMENU_REGVAL}" "$ICONS_GROUP"
<br />    SectionEnd 
<br />&gt;
</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dygear</span><br />
      <span class="post-time small text-muted">8th May 2004 06:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Did not work, look at this, see if you can compile it.<br />
      <br />
      Do i need some extra dlls?<br />
      All i have is the stock NSIS 2.0.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">9th May 2004 03:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Now I tested it and changed it to work. You only need to add the LangStrings for French and German and to add a funcionality of the User and Password page.<br />
      <br />
      You have to put the script in a subfolder of a folder containing the Assets and License subfolders.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dygear</span><br />
      <span class="post-time small text-muted">17th June 2004 06:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>