<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Turn off sections on runtime" />

  <title>Turn off sections on runtime - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Turn off sections on runtime</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308791">Turn off sections on runtime</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vankov</span><br />
      <span class="post-time small text-muted">23rd July 2009 11:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Turn off sections on runtime</strong><br />
      Turn off sections on runtime<br />
      <br />
      <br />
      <br />
      I have a problem :<br />
      Section "VerifyEnvironment"<br />
      ${If} $CommandLine == '/admin'<br />
      messageBox MB_OK "/admin"<br />
      ${Else}<br />
      SectionIn RO<br />
      ${EndIf}<br />
      <br />
      CommandLine is "/admin" but section is read-only!If i continue install the messageBox is show!!!:confused:<br />
      Please help!:up:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">23rd July 2009 12:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SectionIn is not a run time instruction therefore you section will be disabled unconditionally.<br />
      <br />
      Are you trying to unselect the section or make it read only? To unselect it, use the UnselectSection macro in Sections.nsh. To make it read only, use the SetSectionFlag macro with ${SF_RO}.<br />
      <br />
      Note: These must be done prior to the Components page.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vankov</span><br />
      <span class="post-time small text-muted">23rd July 2009 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i have:<br />
      SectionGroup "Prerequisits (Required)" sec<br />
      <br />
      Section "VerifyEnvironment" sec1<br />
      ......<br />
      and i use :<br />
      insertmacro SetSectionFlag ${sec} ${SF_RO}<br />
      !insertmacro SetSectionFlag ${sec1} ${SF_RO}<br />
      !insertmacro SetSectionFlag ${sec2} ${SF_RO}<br />
      <br />
      and the results is - only SectionGroup is read-only!!:confused: and i can make it check box 1/0(mark or unmark) with sec1,sec2 ....</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vankov</span><br />
      <span class="post-time small text-muted">27th July 2009 13:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">please help!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">27th July 2009 17:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Where have you put this code? As I have already said, you need to use it before the components and instfiles pages. That could be in .onInit or a page PRE function.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">27th July 2009 18:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">And the code has to be *below* the section defines - otherwise the ${sec1} - ${secN} values are not defined. Not defined is like "0" which is probably the value of ${sec} and explains how the group gets turned into RO.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vankov</span><br />
      <span class="post-time small text-muted">29th July 2009 09:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by demiller9</i><br />
        <b>And the code has to be *below* the section defines</b>
      </blockquote>Now is ok!10x!
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
