<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="noob vs System.dll"><title>noob vs System.dll - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">noob vs System.dll</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=153956">noob vs System.dll</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">blayde</span><br><span class="post-time small text-muted">25th October 2003 20:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>noob vs System.dll</strong><br>i'm hoping someone can point out what i'm missing here, i'm trying to use system.dll.<br><br>i've spent a good two hours trying this way and that to get a single call to a dll working. i've read the faq, forum archives etc and can't find the solution.<br><br>in my dll is the function<br>int __stdcall GetDriveFSType( LPCTSTR pDriveRoot, char* outFSType )<br><br>the first argument is a string : a drive letter essentially.<br>the second argument gets set as the result.<br>the return indicates any errors.<br><br>i've followed <a href="http://nsis.sourceforge.net/Docs/AppendixC.html#C.5" target="_blank">this example by bjc</a> but with no luck. the second argument is always 1024 after the call ( i strpy it 1024, see the link to see why ). yet the return value comes back fine.<br><br>could someone please tell me the right line of code to use to call this function.<br><br>TIA</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">25th October 2003 20:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There are examples in available in the archive that explain how to get the drive type<br><br><a href="http://nsis.sf.net/archive" target="_blank">http://nsis.sf.net/archive</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">25th October 2003 21:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">... maybe putting a direct link to System Plugin examples:<br><br><a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=135&amp;instances=0,32" target="_blank">System Plugin Examples</a><br><br>(please any Archive admin, move my Create Font API to System Plugin Examples folder)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">26th October 2003 00:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">System::Call 'mydll::GetDriveFSType(t r0, t .r1) i .r2'</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">blayde</span><br><span class="post-time small text-muted">26th October 2003 05:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">brainsucker :<br><br>well bugger me it worked. it's always the one thing i didn't think of : no '.' for the first argument. thanks a lot.<br><br>only, now i'm really confused. this code, to my mind, goes against the <a href="http://nsis.sourceforge.net/Docs/AppendixC.html#C.5" target="_blank">example code</a>. it says</p><blockquote>placing a period/dot ('.') in front of a System.dll variable means 'makes no change to source' and it appears to be used everywhere except where a pointer is returned.</blockquote>but you used it on variables that changed, and didn't on variables that stayed the same.<br><br><br>everyone else :<br><br>thanks for the suggestions. to make my question clearer i should have added that my dll had other functions i need as well, so i have to use it. but thanks all the same.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">26th October 2003 23:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've asked NSIS developers to change this example and documentation tens of times...<br>Everything is simple: param defenition looks like "TYPE INPUT OUTPUT".<br>Before proc run it parses INPUT for value (with required type), and after proc run it outputs value to the OUTPUT. In case when the input doesn't matter, but you want to specify output, you could use dot ('.'), to skip it. For example "i r1 r2", will read input from $1, and after run put it to $2. "i r1" will only read from $1 and never put output to somewhere. "i .r2" will take no input, but will place output value to r2.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">27th October 2003 18:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Didn't we say I was just going to rewrite the readme?<br><br>Well, it's taking too long anyway... I'd better update that page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd November 2003 10:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Updated.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>