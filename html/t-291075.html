<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Referencing Section index beofre it's declared" />

  <title>Referencing Section index beofre it's declared - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Referencing Section index beofre it's declared</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=291075">Referencing Section index beofre it's declared</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">30th April 2008 16:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Referencing Section index beofre it's declared</strong><br />
      I have a problem similar to the below, where I have a sectiongroup with three sections in it, and if at least one of those sections is selected, I want to first install some files required by all sections. So I have something like the below, but it does not compile because the hidden section is referencing the symbol ${Sec_ThisGroup} which is not yet defined. Any ideas on how I can work around this? I'm going to be encountering this in several places.<br />
      <br /></p>
      <pre>
<code><br />Section "-Hidden common"<br />Section RO<br />  ${If} ${SectionIsSelected} ${Sec_ThisGroup}<br />  ${OrIf} ${SectionIsPartiallySelected} ${Sec_ThisGroup}<br />    ;Install common files<br />  ${EndIf}    <br />SectionEnd<br /><br />SectionGroup "this group" Sec_ThisGroup<br />Section "Blah 1"<br /><br />SectionEnd<br />Section "Blah 2"<br /><br />SectionEnd<br />Section "Blah 3"<br /><br />SectionEnd<br />SectionGroupEnd</code>
</pre><br />
      <br />
      <br />
      Instead of using the If SectionIsSelected, a less elegant alternative is that I place code in the onSelChange or components page leave callback, that enables and disables the hidden common section, but I'd need that also in the oninit in case the installer is run silently. I figured it would be much easier to maintain if I just had a hidden section before the other section, because it will be run regardless of whether it's silent or not. As I add more logic to handle certain silent install scenarios, my code is getting pretty tangled and more difficult to handle.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">30th April 2008 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe there should be a mandatory waiting period before posting :) I thought I was at a dead end but right after I posted I reallized I could declare a function after the section declarations, but call the function from the first section, and basically nest all the logic within that function, then the section index will be declared when the compiler reaches the function, but the code at runtime will be run from the first section.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
