<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Simple question" />

  <title>Simple question - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Simple question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236439">Simple question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tbednarz</span><br />
      <span class="post-time small text-muted">26th January 2006 17:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Simple question</strong><br />
      I have my core application and a tool, which should only be installed, if it is not already there. The tool is 3rd party so I do have two cab files.<br />
      <br />
      Currently I have in my script:<br />
      <br />
      Section "my app" SEC01 ;(required section)<br />
      <br />
      SetOutPath "$INSTDIR"<br />
      SectionIn 1, RO<br />
      SetOverwrite on<br />
      <br />
      File "myAppFiles\Setup_MyApp.ini"<br />
      File "MyAppFiles\MyApp.CAB"<br />
      StrCpy $0 "$INSTDIR\Setup_MyApp.ini"<br />
      <br />
      Call InstallCAB<br />
      MessageBox MB_OK|MB_ICONINFORMATION \<br />
      "Please wait for the myApp application install to finish on your device before continuing."<br />
      <br />
      SectionEnd<br />
      <br />
      <br />
      No I use RAPI to query the registry of the PPC to find out, if the tool is already installed or not. If it is NOT, I need to add another CAB file and also need to change Setup_MyApp.ini.<br />
      <br />
      Could anybody please explain me, where to do this and how?<br />
      <br />
      Tom</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">26th January 2006 18:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't understand what's the problem. Are you having problems with defining the logic? If so, see the <a href="http://nsis.sourceforge.net/Docs/Chapter2.html#2.3.5.1" target="_blank">tutorial</a>. Are you have problems using RAPI? If so, see the <a href="http://nsis.sourceforge.net/Copying_files_to_pda" target="_blank">Wiki page</a>.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tbednarz</span><br />
      <span class="post-time small text-muted">26th January 2006 19:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well RAPI is not the problem since thats all in C/C++ which I use as programming language for almost 15 years!<br />
      <br />
      The problem is the script where I still do not see the real program flow. There is no main (entry point), from which you can call functions and define a program flow. Instead there are tons of macros and jumps from one place to another, variables can be defined everywhere and seem to be only of type String. So I do not understand where to do what!<br />
      <br />
      Here the structure of my script which works but I do not understand how!!<br />
      <br />
      - It starts with some defines followed by some includes.<br />
      - Then many !insertmacro follow to define the pages shown<br />
      - Then there are some ReserveFile for my custom dialogs<br />
      - Then follow three sections<br />
      - After that the section descriptions!<br />
      - Then follows a .onInit function<br />
      - Then all functions containing my code for the custom pages<br />
      <br />
      So the program flow cannot be along line numbers, it is magic to me where it starts and when it does what. The documentation describes what a page is, what a section, how variables are declared etc. But I could not find something explaining in which order all those things are processed!<br />
      <br />
      So to install multiple CAB files on a PDA depending on some conditions NOT definable by the user should I :<br />
      <br />
      - define multiple sections, for every cab file one? Then call InstallCAB inside every section? (If so where is defined in which order and when a section is processed? How can I conditionally execute a section? To me there is a lot of magic in many of the samples!)<br />
      <br />
      - Write a separate INI file for every CAB file and put the logic in the myApp section using some ${if} statements and call there InstallCAB?<br />
      <br />
      Many thanks for your help!<br />
      <br />
      Tom</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th January 2006 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The program flow is explained in the tutorial. Was it not clear enough? How do you think it can be improved?<br />
      <br />
      How you wish to install multiple CABs is up to you. If you want to give the user the option, you'd want two sections so the user will see two components he can select from. If you want it to be based on some other logic, then yes, you'd need ${If} and friends.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
