<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="StrCmp not working for me??"><title>StrCmp not working for me?? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">StrCmp not working for me??</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143379">StrCmp not working for me??</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 05:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>StrCmp not working for me??</strong><br>My code below displays the message box whether $R1 is empty or not. Any ideas on what my problem is? Thanks in advance!!!<br><br>Function UninstallOldVersion<br>push $R1<br>ReadRegStr $R1 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${MUI_PRODUCT}" "UninstallString"<br>StrCmp $R1 "" UninstallOldVersion_noold<br>MessageBox MB_OK $R1<br>ExecWait '"$INSTDIR\uninstall.exe upgrade" _?=$INSTDIR'<br>UninstallOldVersion_noold:<br>pop $R1<br>FunctionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 06:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Works for me, which version of nsis are you using?<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mhollander</span><br><span class="post-time small text-muted">24th July 2003 07:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I created a function that shows me the contents of the $0-$9 and $R0 - $R9. I have found it usefull when coming to debug the code.<br><br>I have included it in the attached script. Tryit and let us know if you have managed to solve the problem.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mhollander</span><br><span class="post-time small text-muted">24th July 2003 08:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oops. Forgot the attachment.:D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 08:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you want a program to show the status of nsis script, i.e. variables, stack, etc. you should use the dumpstate plugin available on the NSIS Archive.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mhollander</span><br><span class="post-time small text-muted">24th July 2003 09:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The more I work with this product and find these jewels and pearls that people have written to improve and enhance the more I LOOOVE the product. Guys I have to say this. Keep it up. You Rock.<br>:D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 14:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Vytautas, I am using version 2.0 beta 3. So, you're saying that if $R1 is filled, your version skips the MessageBox? I don't get that at all???</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes I have tried your code with the latest CSV version and it worked fine, i.e. if the registry key did not exist it skipped the MessageBox and if it did it showed it.<br><br>You might have to download the newest NSIS version, however you should note that you most likely have to modify your existing scripts to compile with the CSV version.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 14:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm glad you brought that up...CSV that is. What exactly is that (I'm pretty new to NSIS, if you couldn't tell)? And, what is different with the CSV version from the version I have?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mhollander</span><br><span class="post-time small text-muted">24th July 2003 14:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">CVS (Concurrent Versions System) is a tool used by many software developers to manage changes within their source code tree. CVS provides the means to store not only the current version of a piece of source code, but a record of all changes (and who made those changes) that have occurred to that source code. Use of CVS is particularly common on projects with multiple developers, since CVS ensures changes made by one developer are not accidentally removed when another developer posts their changes to the source tree.<br><br><a href="http://sourceforge.net/cvs/?group_id=22049" target="_blank">http://sourceforge.net/cvs/?group_id=22049</a><br><br>If this helps.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 14:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">In other words CSV is the newest version of the software available, it quite often contains bugs and always contains new features. The most recent version of nsis can be found <a href="http://nsis.sourceforge.net/nightly/nsis.zip" target="_blank">here</a>.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">24th July 2003 14:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">CVS (not CSV) is Concurrent Versioning System and is a sytem used by SourceForge and others to store source code. The NSIS source code is stored on cvs.sourceforge.net and a tool like TortoiseCVS or NSIS Update (which uses TortoiseCVS for you) can "sync" to the latest copy of the source code and executables stored in CVS, i.e. copy them to your computer. NSIS Update goes one step further, it compiles the makensis.nsi file with makensis and then runs the created installer so that you get a properly installed latest copy of NSIS.<br><br>The NSIS developers make their changes to the source code in CVS and so when you get this code and the executables you get the most recent copy of NSIS that exists. <a href="http://nsis.sourceforge.net/changelog.php" target="_blank">This page</a> shows what changes developers made and when (but bear in mind that due to current SourceForge problems the links on that page sometimes take a day or two after the date of the change to show you the correct information).<br><br>The only caveat is that when "syncing" you will get the most recent source code but the executables (makensis.exe, makensisw.exe and the plugins) aren't necessarily built from that source code, they might be slightly older. When this happens you just have to wait for an NSIS developer to "check in" a more recently compiled version of the executables, or use the version you got.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 14:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry about the mixup:igor: at midnight CVS can get spelled as CSV<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">24th July 2003 15:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hehe it would be funny if the NSIS source code was stored as CSV (comma separated values) instead of in CVS :P</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 15:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So, do I have to install some CVS software on my computer? If so, where do I get that?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 15:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well I have CVS on my system and your code appears to work OK, so my guess is that if you did install CVS your problem should be fixed, however you should note that there are quite a few changes to the script syntax in the CVS version and you will need to modify your script especially if using ModernUI. I posted the link to the newest CVS version of NSIS a couple of posts back.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 15:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry did not read your question properly. You only need to have CVS software if you are a developer and want to upload modified code to the server.<br><br>It has been a very long day :p !!!<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No problem...it's been a long day for me, too.<br><br>So, once I've installed the NSIS version that you linked me to, it should "link" to CVS so that I can keep up-to-date on the newest versions of NSIS (I'm talking about the "Update" button in the NSIS menu)? I supposed I click on one of the CVS radial buttons on the NSIS menu to get the latest version????</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">24th July 2003 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by jcagle</i><br><b>So, do I have to install some CVS software on my computer? If so, where do I get that?</b></blockquote>NSIS Update will get the latest CVS copy of NSIS for you automatically, you don't need anything else unless you are an NSIS developer and want to submit code (like Vytautas said). NSIS Update can be run from the NSIS.exe menu program in your NSIS directory.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th July 2003 15:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yep, you can use NSIS Update, however I have found that the update sometimes reports unusual errors, this I believe is due to some work being done on the SourceForge CVS Servers so the link above can be used if the Update program fails. The link has a nightly build, a zipped version of NSIS which can be up to 24 hours out of date, but thats better than nothing.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jcagle</span><br><span class="post-time small text-muted">24th July 2003 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">When you talk about the "CVS" version...how is that different from the "regular" version? For example, I told you that I had version 2.0 beta 3. Is that the CVS version? If not, how did I get that version and not the CVS version?<br><br>Finally, I'm assuming that if there is syntax differences between my "regular" version and the "CVS" version, I will see errors when I compile the script and will just have to fix them one-by-one?<br><br>Thanks again!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">24th July 2003 16:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">2.0 beta 3 is probably a version you downloaded from sourceforge.net. If you type makensis at the command prompt you'll see some blurb including a line link "MakeNSIS v2.0b4 (CVS) - Copyright 1999-2003 Nullsoft, Inc.". <font color="blue">As you can see mine says (CVS) in brackets to indicate it is a CVS version, yours won't have this if it is a proper release.</font><br><br>A CVS version is NOT a proper release, it's just a version that developers created to include their latest changes. New CVS versions are compiled all the time as developers improve NSIS, every now and again a version is considered to be stable enough and to contain enough new features to warrant it being provided for download on sf.net as a PROPER release, then the (CVS) bit will vanish.<br><br>Anytime you use NSIS Update and choose "Download the latest development files from CVS" (either "merge your changes" or "clean copy") or you use a CVS client (like TortoiseCVS) to grab the latest files you will be getting a CVS version.<br><br>If you want a PROPER release look here instead: <a href="http://sourceforge.net/project/showfiles.php?group_id=22049" target="_blank">http://sourceforge.net/project/showf...group_id=22049</a><br><br><font color="blue">Edits are in blue</font></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">24th July 2003 16:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">As for syntax errors, well if the CVS version has had changes made to it by developers that change existing syntax then yes your script will need modifying. On the plus side you'll also be able to use any new features that have been added but not "released" yet (ie. a PROPER release version of NSIS doesn't exist yet that contains that new feature or features, but the CVS code will contain them).</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>