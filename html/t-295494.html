<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="UltraModern UI"><title>UltraModern UI - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">UltraModern UI</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295494">UltraModern UI</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Fu Long</span><br><span class="post-time small text-muted">4th August 2008 09:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>UltraModern UI</strong><br>I came to this marvellous program a few days ago and was able to write an installer with only a few day's work. Thanks for your great job!<br><br>However, I used the 'UltraModernUI' and have a few questions (I am not sure if ALL problems have to do with the GUI). I am not sure about the version (it nowhere it tells me for sure) but it seems to be "Version 1.00 beta 2 - March ??, 2008", as this is stated in ReadMe.txt.<br><br>.) One can "!define UMUI_PARAMS_REGISTRY_ROOT HKLM" but the correct installation path "UMUI_INSTALLERFULLPATH_REGISTRY_ROOT" is in HKCU (cannot write to HKLM)<br>.) !define UMUI_INSTALLDIR_REGISTRY_KEY "InstDir" together with !define UMUI_INSTALLDIR_REGISTRY_VALUENAME "$INSTDIR" seems not to work - how does it work?<br>.) !define UMUI_UNINSTALLPATH_REGISTRY_VALUENAME "Uninstall With" together with !define UMUI_UNINSTALL_FULLPATH "$INSTDIR\Uninstall.exe" seems not to work - does not write the correct path when changed (always writes default path)<br>.) InstallDirRegKey ${UMUI_PARAMS_REGISTRY_ROOT} "${UMUI_PARAMS_REGISTRY_KEY}" "InstDir" does not work - DOC says: read installation DIR from registry if present (else use '$InstallDir')<br>.) !define UMUI_USE_ALTERNATE_PAGE has a bug: it does not support fonts (Arial 12 remains small: 8Pt?)<br>.) !define UMUI_ALTERNATIVESTARTMENUPAGE_SETSHELLVARCONTEXT has a MAJOR bug: when disabled also disables the 'shortcut' checkbox!<br>.) I am REALLY MISSING a checkbox for (NOT) creating a desktop shortcut (usually an icon can be installed on the desktop but can be unselected by the user)<br>.) !define MUI_HEADER_TRANSPARENT_TEXT this does not work: there are UGLY fields in the various pages. To make it visible, select a grey background and check the various pages. Take special attention to the two size fields when selecting items to install (one has transparent background, the other has opaque background) - YECK!<br><br>The documentation that comes with the 'UltraModernUI' is very incomplete (to put it politely). Has anybody more information?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">SuperPat</span><br><span class="post-time small text-muted">4th August 2008 15:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) UMUI_PARAMS_REGISTRY_ROOT and UMUI_PARAMS_REGISTRY_KEY are global define used if the specialised define (e.g.: UMUI_INSTALLERFULLPATH_REGISTRY_ROOT MUI_STARMENU_REGISTRY_ROOT and all other) are not defined.<br><br>2) UMUI_INSTALLDIR_REGISTRY_VALUENAME is used by the maintenance page to save the original path of the installer.<br>(in th uninstallation, if you choose the repair or modify option, it will locate the installer thanks to the path savez in th registry). See Mainteance.nsi example.<br><br>3) the UMUI_UNINSTALL_FULLPATH must always contains the uninstaller path. For example $INSTDIR\uninstall.exe.<br>This value is save to the registry to be use by the maintenance page to locate it if you choose the uninstall options. (In your code you must write your installer in the same directory of the define). See Mainteance.nsi example.<br><br>4) InstallDirRegKey is use by NSIS to load the $INSTDIR variable with the content saved in the registry but you need to white this value manually in your section:<br>WriteRegStr HKLM ${UMUI_PARAMS_REGISTRY_ROOT} "${UMUI_PARAMS_REGISTRY_KEY}" "InstDir" $INSTDIR<br>Except if you define also UMUI_INSTALLDIR_REGISTRY_VALUENAME. In this case the value is saved automatically and you need to remove the InstallDirRegKey instruction.<br><br>5) the alternate page use "MS Sans Serif" size: 8<br>Remove this define to use the old font.<br><br>6) You are right, i will see it soon. Thanks for report.<br><br>7) See the AdditionalTasks.nsi far a "create desktop" shortcut checkbox example.<br><br>8) !define MUI_HEADER_TRANSPARENT_TEXT is used only in the header, not in body pages.<br>If you speak about not transparent text in pages:<br>For the label that change like in components, directory and installfile pages, the new text is written (by NSIS) on the top of the old text and become unreadable. Only the solution I know is to use a background image having plains colors at the position of theses labels.<br><br>9) The documentation will be completed progressively soon.<br><br>I hop I've correctly answer your question.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">SuperPat</span><br><span class="post-time small text-muted">9th August 2008 16:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks to this post, several bug were corrected and a new build is available, see this post:<br><br><a href="http://forums.winamp.com/showthread.php?s=&amp;postid=2388434#post2388434" target="_blank">http://forums.winamp.com/showthread....34#post2388434</a></p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>