<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Nature of Reboot" />

  <title>Nature of Reboot - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Nature of Reboot</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287866">Nature of Reboot</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonymo</span><br />
      <span class="post-time small text-muted">2nd March 2008 00:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Nature of Reboot</strong><br />
      To update the app, the user clicks on the installer. If a version is already installed, it calls the uninstaller and then installs the current version.<br />
      <br />
      The uninstaller removes some stuff with the /REBOOTOK flag.<br />
      <br />
      How can I have the uninstaller pass a value to the installer telling it if a reboot is necessary?<br />
      <br />
      If a reboot is necessary, the installer shows a message telling the user "a reboot is necessary before proceeding with installation".<br />
      <br />
      If the message is in the uninstaller and the user doesn't choose to restart, the uninstaller has no way of making the installer that called it abort, correct?<br />
      <br />
      Perhaps I'm misunderstanding the nature of reboot. Reboot does not make the installation/uninstallation stop in its tracks and wait for the computer to reboot before proceeding?<br />
      <br />
      In that case the code would just continue to execute while the computer is trying to reboot, which is why you need to put an Abort or Quit or whatnot after the Reboot?<br />
      <br />
      Why can't the installer/uninstaller make a note of where it is, Reboot, and then continue what it was doing on reboot?<br />
      <br />
      Excuse my ignorance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">M. Ratz</span><br />
      <span class="post-time small text-muted">3rd March 2008 09:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi anonymo<br />
      <br />
      I had the same problem first. I now write with my installer an entry to<br />
      <br />
      HKLM "Software\microsoft\Windows\Currentversion\Run"<br />
      <br />
      and then give the user a Messagebox, telling him that the computer is now rebooted. After rebooting the first action of the installer is to delete the run-entry.<br />
      <br />
      With WinXP it has no problems but with Vista u must have a look on UAC, because UAC blocks autostart-programs so the user has to allow the blocked autostart program.<br />
      <br />
      good luck<br />
      M. Ratz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">3rd March 2008 10:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by M. Ratz</i><br />
        <b><br />
        With WinXP it has no problems but with Vista u must have a look on UAC, because UAC blocks autostart-programs so the user has to allow the blocked autostart program.<br /></b>
      </blockquote>Do not assume that you can write to HKLM on any NT system!
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">M. Ratz</span><br />
      <span class="post-time small text-muted">3rd March 2008 10:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">@ Anders<br />
      <br />
      Of course you are right. In my installer I require admin-rights so that I can write to HKLM.<br />
      <br />
      my fault sry</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
