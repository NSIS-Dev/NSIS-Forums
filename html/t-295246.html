<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Setting File permissions"><title>Setting File permissions - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Setting File permissions</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295246">Setting File permissions</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">LynnRW</span><br><span class="post-time small text-muted">29th July 2008 20:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Setting File permissions</strong><br>I'm writing an installer for an application used by several different users who log onto the Win-XP at different times.<br><br>I use the following code (+ more) and everything works OK for me. However if another user logs-on, they get "can't write file..." errors in the Log directory, etc.<br><br>InstallDir $PROGRAMFILES\MyApp<br><br>CreateDirectory "$INSTDIR\Bin"<br>CreateDirectory "$INSTDIR\Logs"<br><br>I know I can make the Shortcuts available to ALL-users, but how can I give All-users the necessary file permissions?<br><br>Thanks for your help.<br><br>Lynn</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nsnb</span><br><span class="post-time small text-muted">29th July 2008 20:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am a newbie, don't know much yet, but I think that what you're looking for is <b>SetShellVarContext</b> :<br><br></p><blockquote>Sets the context of $SMPROGRAMS and other shell folders. If set to 'current' (the default), the current user's shell folders are used. If set to 'all', the 'all users' shell folder is used. The all users folder may not be supported on all OSes. If the all users folder is not found, the current user folder will be used. Please take into consideration that a "normal user" has no rights to write in the all users area. Only admins have full access rights to the all users area. You can check this by using the UserInfo plug-in. See Contrib\UserInfo\UserInfo.nsi for an example.</blockquote>Chris</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KrisAster</span><br><span class="post-time small text-muted">29th July 2008 21:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">LynnRW, can another user navigate to that location? It seems that they have read access to execute the application, but it seems that it is trying to write a file to that location. Is this what you'd like to happen? Most applications in today's Vista / XP world probably shouldn't be writing files (or opening files with those permissions) to '\Program Files' directory. Customarily, the files a program would want to write are program settings and the like, which would be better stored in a user's directory (ie C:\Documents and Settings\&lt;username&gt;\Application Data\&lt;Your program&gt;).<br><br>That being said, I think that the 'AccessControl' plugin might be what you're looking for.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">29th July 2008 22:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">In order to support multi-user OS properly (e.g. WinXP), your application should be prepared that the user, who runs the application, might have limited access rights. Hence your application <i>might</i> run with limited access rights! Therefore user-specific data should be saved to "C:\Documents and Settings\John Doe\Application Data\My Program" and data that applies to all users should be saved at "C:\Documents and Settings\All Users\Application Data\My Program". If you need to save data at a different location, a privileged user with Admin rights is required...</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>