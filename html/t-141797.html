<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Add Check for Flash Function in Modern UI flow example" />

  <title>Add Check for Flash Function in Modern UI flow example - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Add Check for Flash Function in Modern UI flow example</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=141797">Add Check for Flash Function in Modern UI flow example</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mikemanczur</span><br />
      <span class="post-time small text-muted">11th July 2003 00:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Add Check for Flash Function in Modern UI flow example</strong><br />
      Can someone give me an example of how I can insert a page after the license page that checks for Flash using the below function:<br />
      <br />
      Function IsFlashInstalled<br />
      Push $R0<br />
      ClearErrors<br />
      ReadRegStr $R0 HKCR "CLSID\{D27CDB6E-AE6D-11cf-96B8-444553540000}" ""<br />
      IfErrors lbl_na<br />
      StrCpy $R0 1<br />
      Goto lbl_end<br />
      lbl_na:<br />
      StrCpy $R0 0<br />
      lbl_end:<br />
      Exch $R0<br />
      FunctionEnd<br />
      <br />
      I am having a little trouble with it. Do I use an *.ini, just a message box? I am pretty new at this so please give me an example. I attached my *.nsi file.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">11th July 2003 02:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could do it with an INI or just a message box. Although you did mention you wanted a page which would require an INI file. You could do it with a message box using the function,<br />
      <br />
      MUI_CUSTOMFUNCTION_LICENSE_LEAVE<br />
      <br />
      Check out the Modern UI docs for more details. Add<br />
      <br />
      !define MUI_CUSTOMFUNCTION_LICENSE_LEAVE myLicensePgLeave<br />
      <br />
      to your script. Then add the leaving license page function and make it something like this. I pretty much just made it pseudo code to give you an idea of what it might look like.<br />
      <br />
      Function myLicensePgLeave<br />
      IsFlashInstalled<br />
      <br />
      ; If it is then display message box A<br />
      <br />
      ; If not then display message box B<br />
      FunctionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th July 2003 11:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why check after the license is shown? If you want to check before the license is shown do it in .onInit or .onGUIInit (if you're using the MUI see the MUI readme before you try using .onGUIInit).<br />
      <br />
      If you want to show a page then you need an INI file and InstallOptions. Take a look at the InstallOptions.nsi example in Examples\Modern UI.<br />
      <br />
      Ignore what's below in the little writing, it's just another solution that isn't possible yet.<br />
      <br />
      <font size="1">You might also consider putting the warning in the welcome page. For that you'd have to change the text in it. To do that you need to define a pre function for the welcome page (!define MUI_CUSTOMFUNCTION_WELCOME_PRE myFunction), and in that function write to the INI file the values you need (use the MUI_INSTALLOPTIONS_WRITE macro, for example: !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "Field 2" "Text" "Flash is not installed... bla bla bla"). You should also define a leave function for the welcome page so the user won't be able to leave it and continue the installtion. I'm afraid this is not yet possible...</font></p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
