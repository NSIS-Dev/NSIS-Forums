<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="WM_SETCURSOR with Bitmap Control" />

  <title>WM_SETCURSOR with Bitmap Control - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">WM_SETCURSOR with Bitmap Control</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=304462">WM_SETCURSOR with Bitmap Control</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rolando</span><br />
      <span class="post-time small text-muted">22nd March 2009 11:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>WM_SETCURSOR with Bitmap Control</strong><br />
      I've been trying to set a hand cursor on a bitmap image I have placed using nsDialogs like this:<br />
      <br />
      ${NSD_CreateBitmap} 0 108u 100% 100% ""<br />
      Pop $IMAGE<br />
      ${NSD_SetImage} $IMAGE "$PLUGINSDIR\blah.bmp" $IMAGEHANDLE<br />
      <br />
      GetFunctionAddress $0 TestFunction<br />
      nsDialogs::OnClick $IMAGE $0<br />
      <br />
      How can I make it in a way that when the user hovers over the bitmap, the cursor changes to IDC_HAND?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">22nd March 2009 12:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you need to handle the window message, and nsDialogs can't do it.<br />
      <br />
      <a href="http://nsis.sourceforge.net/WndSubclass_plug-in" target="_blank">http://nsis.sourceforge.net/WndSubclass_plug-in</a> can do it, but it's very much in the Alpha stage, and you pretty much need to be a win32 programmer to use it</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rolando</span><br />
      <span class="post-time small text-muted">22nd March 2009 12:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If I'm not mistaken I only need to use LoadCursor() and SetCursor() correct?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">23rd March 2009 02:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">now this is a bit weird as i made a modification to nsDialogs to do just the same thing for one of the winamp lang pack authors last weekend (still need to sort out the patch difference and to have a look at implementing <a href="http://sourceforge.net/tracker2/index.php?func=detail&amp;aid=2129316&amp;group_id=22049&amp;atid=373088" target="_blank">this</a> as well).<br />
      <br />
      the attached 7z file has an altered nsDialogs.dll and nsDialogs.nsh - should be able to just extract it out into the main NSIS folder (with path extraction) to have it replace the required files.<br />
      <br />
      then the following will need to be added to the script something like the following (am guessing at the variable's being used):<br />
      <br />
      <b>${NSD_OnSetCursor} $IMAGE Button_SetCursor ; add after the button has been created<br />
      <br />
      Function Button_SetCursor ; add this where you want it to go<br />
      Pop $0<br />
      Push 32649 ;${IDC_HAND}<br />
      FunctionEnd</b><br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">23rd March 2009 12:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">but should there be a special callback for every message? nsDialogs can't support everything. It would make more sense if nsD had some sort of subclass support, or that people would use external subclass plugins IMHO</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">23rd March 2009 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i agree with you that it can't support everything (and obviously that's where the subclass has to come in on things) but for certain common cases then it makes sense to have it natively done in nsDialogs. and in this case, it's a minor adjustment to expand the code already used for setting the cursor on the link control to be able to be applied for the other created controls.<br />
      <br />
      native subclass support of some form would make things easier but then it comes down how to integrate that into the existing framework.<br />
      <br />
      then again i thought most of the 'special' cases which would require subclassing of some sort are aready handled by existing plugins. either way it's an area that needs to be worked through a bit more (since all i've done was a quick hack to get something working [to save you some #nsis questions ;) ] but is something that needs a bit more thinking through as such).<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
