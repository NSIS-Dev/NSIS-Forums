<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Clear to stack" />

  <title>Clear to stack - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Clear to stack</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317648">Clear to stack</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gruys</span><br />
      <span class="post-time small text-muted">11th March 2010 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Clear to stack</strong><br />
      Is there a method to clear the stack?<br />
      <br />
      On the stack there is an errorcode 5, I can pop as many as i want but the stack will not be emptied.<br />
      <br />
      <br />
      <br />
      # name the installer<br />
      outFile "bare.exe"<br />
      <br />
      # default section start; every NSIS script has at least one section.<br />
      section<br />
      pop $0<br />
      MessageBox MB_OK "$0" ; displays 5<br />
      pop $0<br />
      MessageBox MB_OK "$0" ; still displays 5<br />
      pop $0<br />
      MessageBox MB_OK "$0" ; still displays 5<br />
      pop $0<br />
      ClearErrors ; does not help<br />
      MessageBox MB_OK "$0" ; still 5<br />
      pop $0<br />
      MessageBox MB_OK "$0" ; stack is NEVER empied?!<br />
      <br />
      <br />
      # default section end<br />
      sectionEnd<br />
      <br />
      <br />
      Anyone knows how to clear the stack? :-(<br />
      <br />
      Thanks advance</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">11th March 2010 14:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Read Pop in the manual.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gruys</span><br />
      <span class="post-time small text-muted">13th March 2010 15:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have done this.<br />
      But, like I earlier said, Pop does reads a string of the stack into the user variable $x, but does not pops the value of the stack, so it leaves the stack alone.<br />
      <br />
      Really weird<br />
      <br />
      Thx in advance</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gruys</span><br />
      <span class="post-time small text-muted">13th March 2010 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have solved the mystery. Because the stack was empty the original value in $0 was never overwritten when popping again from an empty stack. Thanks for listening.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th March 2010 17:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As I said, the manual effectively tells you this. If you Pop from the stack when it is empty the error flag will be set (it does not say you will get an empty value).<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
