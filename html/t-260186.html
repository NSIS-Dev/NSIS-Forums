<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Setting Folder Permissions" />

  <title>Setting Folder Permissions - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Setting Folder Permissions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260186">Setting Folder Permissions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">f1nn</span><br />
      <span class="post-time small text-muted">23rd November 2006 12:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Setting Folder Permissions</strong><br />
      Hi I am trying to set the permissions on my root folder to be normal other than read only does anyone know how to do this. I have tried using setfileattributes I have also seen other people have had to try and do this can anyone advise me can this be done ie set the attributes of a folder.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bholliger</span><br />
      <span class="post-time small text-muted">23rd November 2006 12:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi f1nn!<br />
      <br />
      Have a look:<br />
      <br />
      <a href="http://nsis.sourceforge.net/AccessControl_plug-in" target="_blank">http://nsis.sourceforge.net/AccessControl_plug-in</a><br />
      <br />
      Cheers<br />
      <br />
      Bruno</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">f1nn</span><br />
      <span class="post-time small text-muted">24th November 2006 11:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Bholliger,<br />
      <br />
      I cam across the access control plug in and tryed it I believe that I am using it in the proper way. I installed the plug in to the NSIS plug in folder. Then I added a section to the script and in the section used the following from the web site example<br />
      AccessControl::GrantOnFile \<br />
      "$INSTDIR" "(BU)" "GenericRead + GenericWrite"<br />
      <br />
      The problem now is that when i first installl the application as admin. and then check the permissions onthe folder under users ie. Right click on the start menu click on explorer navigate to the app folder in c program files right click here on properties then security tab and highlight users users do not have the Write permission. However If I run the installer a second time without uninstalling and recheck the permission the users now have Write permissions. I am at a loss here to understand why this is requires two runs of the installer to set the write permissions on the users. I would be glad of any suggestions or help with what is the cause of this.<br />
      <br />
      Many Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th November 2006 11:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You probably created the folder after you gave it permissions. Move the AccessControl call below the code where you create the folder.<br />
      <br />
      BTW, giving all users permissions for the Program Files folder or anything under it is a bad idea. You are allowing users to interfere with what other users do. Not only you are giving users to change program settings for each other, you also give them permissions to change the program itself. This is a security hole at worst and an annoyance for users at best. You should save your program settings in the application data folder instead.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">f1nn</span><br />
      <span class="post-time small text-muted">24th November 2006 11:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Kichik,<br />
      <br />
      Thhanks for the reply I agree with what you are saying this is just a quick fix for now to let try to sort out what is happening with another problem I am having with all user install on XP as I have been getting some strange results. On XP Home edition the desktop icons show up on any users drive and some XP PRO machines on others the icons dont show up. This may be related to the way a new user is added I think but i am not sure and I think it may be related to the problem at this thread.<br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=248693" target="_blank">http://forums.winamp.com/showthread....hreadid=248693</a><br />
      <br />
      So what I am trying to do is get it running on others users accounts to gather some info on the behaviour. I will try what you suggest and let you know<br />
      <br />
      Many thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">f1nn</span><br />
      <span class="post-time small text-muted">24th November 2006 13:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Kichik,<br />
      <br />
      Thank you for the suggestion it solved my problem I was setting the permission to early in the script, I now do it after the mainsection were the files are added and it works fine, the folder now has write permission.<br />
      <br />
      Many thanks</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
