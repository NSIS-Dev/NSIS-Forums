<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS silent installer with logging of the internal commands"><title>NSIS silent installer with logging of the internal commands - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS silent installer with logging of the internal commands</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=354368">NSIS silent installer with logging of the internal commands</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">talu</span><br><span class="post-time small text-muted">9th January 2013 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS silent installer with logging of the internal commands</strong><br>Hello,<br><br>1) I need a silent installer whose log file contains all the log messages that the internal NSIS commands (File, SetOutPath, CreateShortCut, etc) would normally display in the interactive log window.<br><br>2) The community-provided logging mechanisms that I have studied (DumpLog-plugin, LogEx-plugin, etc.) do not capture the log output of the internal NSIS commands. Or am I wrong, does some such plugin exist?<br><br>3) Now, DumpLog only works with non-silent installers, because it -- if I understood correctly -- retrieves the log data from a log window object, and that window is not instantiated in silent mode (please correct if this explanation does not make sense).<br><br>4) Some background: we are deploying our software both to land-based premises and ships sailing overseas behind unreliable communications networks. We can not always assume a standard environment where the software will be run, so need to capture quite verbose installation logs.<br><br>5) Because we also deploy different versions and configurations of our program suite depending on the client, we want to trace each installation attempt made in some system with its own installation log file and place all logs in a certain directory (e.g. INSTDIR\logs).<br><br>6) I think the best solution would be that the internal NSIS commands should be changed to save their logging information *also* into some small internal storage that is always accessible to some (new, yet-to-be-invented?) DumpLog-style mechanism. Or can their logging info be accessed already in some fashion?<br><br>7) Would "LogSet on" work for us?<br><br>Thanks in advance for Your time and insights...<br><br>Cheers,<br>Tapio L.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th January 2013 17:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Detailprints do not exist in silent mode, so there is nothing to capture for the normal logging functions. You'll have to write strings to a log file manually. You can for example exchange the File command with a ${File} macro that does both the File command and writes a log line.<br><br>As for verbosity, NSIS does not provide much of it. You may need to replace everything with win api commands using the system plugin, and use windows's getlasterror function if something goes wrong. This will not work with the File command, obviously. If you need a higher level of integration, maybe a plugin can do it, but otherwise you'll have to modify the NSIS source code.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">talu</span><br><span class="post-time small text-muted">11th January 2013 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks a lot for your answer -- I think we now understand the options.<br><br>For the moment, in silent mode we shall use the special build and "LogSet on". At the end, its default "$INSTDIR\install.log" will be closed ("LogSet off") and copied into a release-specific name into directory "$INSTDIR\setuplogs".<br><br>In interactive mode we shall only use "DumpLog" as it creates a less verbose log.<br><br>This seems to work adequately for us now, but we might study using a ${File} -style macro and your other suggestions at some later time.<br><br>Thank You and Cheers,<br>Tapio L.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>