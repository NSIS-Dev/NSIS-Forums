<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Reboot finish page and problem"><title>Reboot finish page and problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Reboot finish page and problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296882">Reboot finish page and problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">zanz</span><br><span class="post-time small text-muted">3rd September 2008 23:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Reboot finish page and problem</strong><br>1) Is there a way to make the installer always reboot besides setting the SetRebootFlag = true in the script?<br><br>2) Is there a way to detect that the user selected 'Restart Now' or 'Restart Later' option from the reboot finish screen?<br><br>I want the installer to always reboot after the product is installed, at the same time I only want to launch the product only if the user selected 'Restart Later' option. I've tried using IfRebootFlag value but itâ€™s always true since in the script I manually set SetRebootFlag to true (so I always get the reboot screen at the end of installation). As a result, our product is caught in a situation where the installer launches the product and at the same time it's rebooting the machine. It creates a bad user experience. It'll be great to get an answer to the above two questions. Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th September 2008 12:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you want to always reboot, don't use the finish page and simply call Reboot yourself.<br><br>I don't see why you'd like to execute your product if the system will always reboot, but if you want to check the radio buttons, simply do so in the leave callback function of the finish page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nsnb</span><br><span class="post-time small text-muted">11th October 2008 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>simply do so in the leave callback function of the finish page.</b></blockquote>What is the "leave callback function of the finish page"?<br><br>I searched the NSIS User Manual but all I could find was <b>.onGUIEnd</b>. Is this it?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">12th October 2008 06:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Each page can have a create function and a leave function (sometimes called a <i>callback</i> function). The leave function runs when the user clicks "next" (or in this case, finish) just before the page unloads. This gives you the ability to use an "abort" to prevent the next page from loading.<br><br>For more info, search the NSIS manual for the <i>Page</i> and <i>PageEx</i> commands. Also check out some of the sample scripts included with NSIS. And if you use the MUI (modern user interface), make sure you read the MUI docs as there are special macros there to use for defining page callbacks.)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nsnb</span><br><span class="post-time small text-muted">13th October 2008 23:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Comperio</i><br><b>For more info, search the NSIS manual for the <i>Page</i> and <i>PageEx</i> commands.</b></blockquote>Thank you! This is great education for me.<br><br>BTW, regarding the original subject (which prompted my question) I managed to solve it by using MUI_FINISHPAGE_TEXT_REBOOT and 'SetRebootFlag true'. I am using MUI2 and it is great as it has most of what I need built in.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>