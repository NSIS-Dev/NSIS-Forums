<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problem with spaces in nsExec" />

  <title>Problem with spaces in nsExec - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problem with spaces in nsExec</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213594">Problem with spaces in nsExec</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cdsr</span><br />
      <span class="post-time small text-muted">19th April 2005 17:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problem with spaces in nsExec</strong><br />
      Hi, I've read through all the posts/archives/examples/etc. but I can't seem to get my script working. I'm trying to do the following: the user presses a "Create Database" button and the installer runs mysql.exe, gives it a .sql file and builds the database.<br />
      <br />
      My problem is that the default selection for the MySQL 4.3.10 installer are to a) not add the mysql.exe location to PATH and b) install MySQL to c:\program files\mysql\mysql server 4.1\<br />
      <br />
      I can get this to work if the PATH is set, or if it's installed to somewhere without a space in the path (like c:\mysql) but if the above two conditions are both true then my script fails. Here is the relevant code:<br />
      <br />
      nsExec::ExecToStack 'cmd /C "$mysql_path\mysql.exe" -uroot &lt; "$PLUGINSDIR\create_lms_db.sql"'<br />
      <br />
      where:<br />
      $mysql_path = C:\Program Files\MySQL\MySQL Server 4.1\bin<br />
      <br />
      This returns:<br />
      'C:\Program' is not recognized as an internal command, operable program or batch file.<br />
      <br />
      Other variations I've tried are:<br />
      ExecWait '"$mysql_path\mysql.exe" -uroot &lt; "$PLUGINSDIR\create_lms_db.sql"'<br />
      <br />
      nsExec::ExecToStack '"$mysql_path\mysql.exe" -uroot &lt; "$PLUGINSDIR\create_lms_db.sql"'<br />
      <br />
      For the above two, and basically all other variations, it seems like mysql.exe is getting called but it doesn't understand its input. The output of the mysql.exe command is what you get when you run "mysql.exe -?" (not any sort of file not found error -- like when running "mysql &lt; asdf.asdf" -- or unknown option -- like when running "mysql -asdf").<br />
      <br />
      Here's what I get:<br />
      <br />
      C:\Program Files\mysql\MySQL Server 4.1\bin\mysql.exe Ver 14.7 Distrib 4.1.9, for Win95/Win98 (i32)<br />
      Copyright (C) 2002 MySQL AB<br />
      This software comes with ABSOLUTELY NO WARRANTY. This is free software, and you are welcome to modify and redistribute it under the GPL license<br />
      Usage: C:\Program Files\mysql\MySQL Server 4.1\bin\mysql.exe [OPTIONS] [database]<br />
      -?, --help Display this help and exit.<br />
      -I, --help Synonym for -?<br />
      --auto-rehash Enable automatic rehashing. One doesn't need to use 'rehash' to get table and field completion, but startup and reconnecting may take a longer time. Disable with --disable-auto-rehash.<br />
      -A, --no-auto-rehash<br />
      No automatic rehashing. One has to use 'rehash' to get table and field completion. This gives a quicker start of mysql and disables r<br />
      <br />
      Can anybody see what I'm doing wrong?<br />
      <br />
      Thanks,<br />
      Chad Russell</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">19th April 2005 18:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Both nsExec and ExecDos can only create hidden process with redirected IO (pipes). Real console window also includes shell tricks ( &lt; &gt; ) and terminal emulation. This is why - mysql.exe not gets stdin from nsExec. Vbgunz also found problem with mysqladmin.exe - it looks like this program requires terminal emulation. But ExecWait with black console window should work I guess...<br />
      Another variant (with hidden window). If sql file size is less then 1k (or 8k for special NSIS build) you can read it to memory and use in the ExecDos as stdin. This explains how to read file to memory <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=821&amp;instances=0,11,814" target="_blank">http://nsis.sourceforge.net/archive/...ances=0,11,814</a><br />
      ExecDos <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=704&amp;instances=0,32" target="_blank">http://nsis.sourceforge.net/archive/...instances=0,32</a></p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
