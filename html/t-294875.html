<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Sections.nsf RadioButton confusion finally understood."><title>Sections.nsf RadioButton confusion finally understood. - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Sections.nsf RadioButton confusion finally understood.</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294875">Sections.nsf RadioButton confusion finally understood.</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Andrew Wallo</span><br><span class="post-time small text-muted">21st July 2008 20:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Sections.nsf RadioButton confusion finally understood.</strong><br>I've had a rather complicated use for the Sections page... as I wanted to have two pages that were essentially the same functionality, but with options being screened.<br><br>i.e. I had two collections of Radio choices, that depended upon one annother for what would be enabled and what wouldn't, but didn't make sense to present together.<br><br>So I used the PageEx feature to wrap two Sections pages, seperately. However, the event handling function was the same for both... so it needed to be 'layered' with intelligence for both sets of Radio Buttons.<br><br>And since I was Using Sections.nsh feature for enforcing 1 and only one selection per group this became somewhat odd.<br><br>The structure in .onSelChange ( the event handler for a Sections page.. ) ( In fact the event handler for ALL/EVERY SECTIONS PAGE simultaneously ) causes you to need to trap all possible radio buttons whether they're on the page or not....<br><br>StartRadioButtons $var<br>RadioButton ${section_lablename} ; show on pg1<br>RadioButton ${section_lablenamename} ; show on pg1<br>RadioButton ${section_lablenamename} ; show on pg1<br>RadioButton ${section_lablename} ; show oh pg1<br>RadioButton ${section_lablenamename} ; show oh pg2<br>RadioButton ${section_lablenamename} ; show oh pg2<br>RadioButton ${section_lablename} ; show oh pg2<br>RadioButton ${section_lablenamename} ; show oh pg2<br>RadioButton ${section_lablenamename} ; show oh pg2<br>EndRadioButtons<br><br>; Options that have had SetSectionText ""<br>; operated on them won't show up.<br>; thus page 1 cleared all pg2 opttions and visa versa.<br><br>MessageBox MB_OK "We selected number $var"<br><br>I've had some confusion as to what affects the operation of these macros. I finally understood what was going on, and I decided to share my experience.<br><br>First off, the order in which you list the RadioButton calls depend on what Integer number is returned by the StartRadioButton marco... i.e. 0indexed through N-1 are the possible settings.... not the order their defined in the section definitions....or what is displayed... so if you're hiding several of them... you're available selections may come back 0 1 2 7 8 9 not 0 1 2 3 4 5<br><br>The StartRadioButton macro REQUIRES you pass it a handle. Which initially I presumed was just the handle for where the return code was put... but NOT SO!!!! The setting of that handle is what forces the de-selection of the existing option to be rejected. Thus enforcing something always being selected.<br><br>( In the case of my application where I didn't have a default selection, but wanted something to BE selected after something was chosen... this created confusion later.... You can see when I didn't presume to seed the macro... because I wanted it all to be blank initially... that the entire macro structure became unstable.)<br><br>After much frustration and finally forcing myself to comment the macros line by line, I realized that the initial var was supposed to be the CURRENT selected setting for the radio buttons... not just the [default].<br><br>So that meant that .onSelChange needed to store and reload an integer value each time the function was called...<br>so that the next it came back after a user-click, $var was the old ( last selected ) value. Otherwise, you got erratic behavior.<br><br>This REALLY needs to be commented better in the Sections.nsh code.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>