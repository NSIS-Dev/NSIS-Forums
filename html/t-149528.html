<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Crash in latest nsis20b4.exe"><title>Crash in latest nsis20b4.exe - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Crash in latest nsis20b4.exe</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149528">Crash in latest nsis20b4.exe</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">17th September 2003 15:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Crash in latest nsis20b4.exe</strong><br>I just downloaded the nightly built NSIS. I extracted the archive and run !InstallNSIS.bat. The Installer starts correctly (after building it) and finishes the setup without problems. But then it crashes. Here are the details:<br><br>AppName: nsis20b4.exe<br>AppVer: 0.0.0.0<br>ModName: xpfprot.dll<br>ModVer: 1.1.0.0<br>Offset: 00001a8e<br><br>I use Windows XP SP1. Hope you find the bug soon and fix it. Just write if you need more information.<br><br>Regards<br>Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">17th September 2003 16:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Which version of makensis.exe are you using? Open CVS\Entries and look for a number such as 1.241 in the makensis.exe line.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">21st September 2003 12:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I just downloaded the newest nightly built NSIS. The crash appears at exact the same time. The offset and modules are the same as in my first post.<br>The version number of makensis.exe I found in ENTRIES is 1.243.<br>Please help.<br>Konrad<br><br>P.S. Sorry for the late answer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st September 2003 15:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I need some more information:<br></p><ul><li>What is xpfprot.dll? I can't find a thing about it on the internet. Is it part of F-PROT?</li><li>Does it happen on any other installers?</li><li>Where exactly does it crash? Before .onGUIEnd? Before .onInstFailed/.onInstSuccess? During the last section? Use message boxes to find out.</li><li>Does it happen on the uninstaller too?</li></ul></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">21st September 2003 15:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So you are running the F-PROT anti-virus software?<br><br>Did it work fine with previous snapshot and the same anti-virus software?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">21st September 2003 15:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">XPFPROT.dll is a DLL of Mediafours XPlay. It is a DLL which grants access to Apples iPod. Don't know what the problem is...<br>The NSIS installer is the only one, which crashes. Anyway the crash doesn't seem to have any effect on the installation. It occurs after pressing the Finish button on the last page of the installer, no matter if Readme should be displayed or not (which actually works). My own installer written with NSIS doesn't crash.<br><br>I don't know if older setups did work, because I just installed XPlay.<br><br>Hope that helps.<br>Regards<br>Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st September 2003 15:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">iPod, good choice ;)<br><br>What about the other things?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">21st September 2003 15:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The other points you wanted to know:<br><br>It happens on the uninstaller, too.<br><br>Could you please send me an makensis.nsi which displays MessageBoxes in the critical methods, I can find out in which method the crash occurs.<br>Sorry but I don't have much time, otherwise I would do it on my own. I think it is only seconds for you because you know that code pretty well ;-)<br><br>Hope, we find that bug.<br>Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st September 2003 16:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try without the finish page too.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">21st September 2003 21:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It only crashes if a old version of NSIS is already installed. It crashes after the .onGUIEnd method. It crashes everytime after the uninstallation.<br><br>Regards Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 12:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try compiling with this one:<br><br><a href="http://nsis.sf.net/makensis.zip" target="_blank">http://nsis.sf.net/makensis.zip</a><br><br>And test without the finish page too.<br><br>Can you also test with older setups? b3, b2, etc.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">22nd September 2003 12:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It crashes even if the installer doesn't use the Finish page after the message box "clean up $PLUGINSDIR".<br>You can download a free trial of XPlay at <a href="http://www.mediafour.com" target="_blank">www.mediafour.com</a>. You don't need an iPod to reproduce the error. I think that is a lot simpler, because you can then debug the setup.<br>If you need more help, just ask.<br><br>Regards Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 14:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm afraid it doesn't work that way, my computer almost never crashes, including this case. Download the same zip again (updated) and try again. Let me know what's the last message box you see.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">22nd September 2003 14:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Juhu, you got it. The crash doesn't occur any more with this makensis.exe. I can see all message boxes (including the last "exiting process..."). What did you change?<br>Thank you very much.<br><br>Regards Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It seems that DLL was expecting COM to still be initialized. I just made NSIS call the uninitialization after the SHFileOperation call so it will still have COM stuff ready when it tries to hook to our folder deletion.<br><br>Can you get it to crash again (using the old version) and attach the full crash report, including the registers, memory dump, etc.? I want to make a complete report for MediaFour and I need that information to do so.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 14:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Test the attached file too please.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">22nd September 2003 15:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I can only save a xml-file called appcompat.txt. The dmp-file which is created in the temp folder isn't accessible. I can't copy nor open it. When I close the crash dialog the file is automatically deleted. I can also not copy the technical details via copy and paste. How can I save that dump file without sending it to MS?<br><br>Thanks in advance<br>Konrad</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">22nd September 2003 15:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There occurs no crash with the xplaycrash.exe. It only displays one messagebox with a filename and "Delete" as caption.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 15:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I will try to find a utility that allows you to copy from that window later. For now, I could do with the value of ESI. It should be listed below the DLLs list and before the memory dump.<br><br>Try the attached file please.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Konrad</span><br><span class="post-time small text-muted">22nd September 2003 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">New zip file still doesn't crashs. Just displays 4 messageboxes.<br>The ESI value for thread 1 at crash is: 0x00000000</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 15:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Finally got it to crash here too. I'll let you know what turns up.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd September 2003 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have uploaded a new version, with no debug information that should no longer crashed. I have also reported this to MediaFour:<br><br><a href="http://forums.mediafour.com/showthread.php?s=&amp;threadid=3202" target="_blank">http://forums.mediafour.com/showthre...&amp;threadid=3202</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">23rd September 2003 22:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MediaFour have fixed XPlay's part of this bug. I was told the fix will be included in the next version after it passes through QA.<br><br>Thank you Konard for your report.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>