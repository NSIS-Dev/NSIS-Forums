<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS slow"><title>NSIS slow - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS slow</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=237483">NSIS slow</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">MikeDC1</span><br><span class="post-time small text-muted">8th February 2006 03:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS slow</strong><br>My app requires a lot of components to be installed which results in an NSIS installer of approx 200MB. This all works fine except the problem I have is that it can be very slow to just view the file in windows explorer or other programs. The problem is that it seems to search the entire file for the icon to display. On CDs this can be extremely slow and give the impression that the PC has frozen for the first minute and the CD is faulty. The first time I encountered it I removed the CD several times before waiting long enough. Is there any solution to this?<br><br>Thanks,<br>Michael</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">{_trueparuex^}</span><br><span class="post-time small text-muted">8th February 2006 09:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have experience similar problems with big installers. And indeed, it feels like it's searching the icon. I don't recall problems like this in older (2.0x) versions.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">9th February 2006 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Interesting problem, any link where we can download the 200MB installer? Then I can test on one of my slow test machines see where the problem is.<br><br>And have you tried to build without HAVE_UPX?<br><br>And try various option below:<br><br>CRCCheck off<br>SetCompress off<br>; SetCompressor lzma<br>; SetCompressor zlib</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MikeDC1</span><br><span class="post-time small text-muted">9th February 2006 12:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by onad</i><br><b>Interesting problem, any link where we can download the 200MB installer? Then I can test on one of my slow test machines see where the problem is.<br><br>And have you tried to build without HAVE_UPX?<br><br>And try various option below:<br><br>CRCCheck off<br>SetCompress off<br>; SetCompressor lzma<br>; SetCompressor zlib</b></blockquote>Thanks for the reply onad. I have tried the different compressions but not with compression off and not with the CRC check off. What is HAVE_UPX? I'll organise a link, it will take a while to upload the file.<br><br>Is it possible this is just a windows thing and it will happen on any large file?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">{_trueparuex^}</span><br><span class="post-time small text-muted">9th February 2006 13:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by onad</i><br><b>And have you tried to build without HAVE_UPX?<br><br>And try various option below:<br><br>CRCCheck off<br>SetCompress off<br>; SetCompressor lzma<br>; SetCompressor zlib</b></blockquote>No UPX or any other exe packers. And I will try those options when I have more time.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br><span class="post-time small text-muted">9th February 2006 20:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is this something that ReserveFiles would help with?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MikeDC1</span><br><span class="post-time small text-muted">9th February 2006 22:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here's the link to the file if anyone is interested<br><br><a href="http://www.mikesdriveway.com/Misc/SmileSetup.exe" target="_blank">http://www.mikesdriveway.com/Misc/SmileSetup.exe</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">24th February 2006 11:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The icon is located at the very beginning of the installer, so that's probably not the problem. I'd guess you have an anti-virus software installed which scans the file when you view it in Explorer. Try disabling any automatic scanners.<br><br>ReserveFile can't help here as the installer isn't even executed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">27th February 2006 10:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I downloaded the installer and I will test the Icon issue on an old regualr 300MHZ P3 with XP EN. This is a "Clean" XP with no additional software installed.<br><br>I'll and post the outcome asap.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">27th February 2006 10:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I had NO issue of icon appearing on this slower XP machine. It must be some other software on your Windows machine.<br><br>Notes:<br>Or maybe a corrupt icon cache. There are free tools to clean the cashe e.g. MS powertoys.<br><br>If you use the software from a CD, note that if you have an autorun.inf ,assign an *ICON=* AND having a *LABEL* line in there will result in an Icon NOT displayed in the explorer. This is an Windows OS defect.<br><br>OK ---<br>[autorun]<br>OPEN=\SmileSetup.exe<br>ICON=CDIMG.ICO<br><br>NOT OK ---<br>[autorun]<br>OPEN=\SmileSetup.exe<br>ICON=CDIMG.ICO<br>LABEL=MyTestLabel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">27th February 2006 10:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">BTW your installer does not install everything correctly. E.g. there is no main application istalled thus the Shortcut Icon is empty.<br><br>Also, if I have my main Windows on E: some things get installed on wrong location e.g.<br>C:\Program Files\Microsoft SQL Server\80\Tools\Binn<br><br>I have a C partition where the is no "Program Files" etc.<br><br>I think you have to review your own installer code a little more ;) and make it more robust.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MikeDC1</span><br><span class="post-time small text-muted">27th February 2006 11:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by onad</i><br><b>BTW your installer does not install everything correctly. E.g. there is no main application istalled thus the Shortcut Icon is empty.<br><br>Also, if I have my main Windows on E: some things get installed on wrong location e.g.<br>C:\Program Files\Microsoft SQL Server\80\Tools\Binn<br><br>I have a C partition where the is no "Program Files" etc.<br><br>I think you have to review your own installer code a little more ;) and make it more robust.</b></blockquote>Thanks for the info. I took my app files out of this install as I didn't want to release it as a freebie but I will look at the C drive issue.<br><br>BTW, whoever said it was anti-virus software was absolutely right, I disabled mcafee and the problem went away. Thanks everyone who looked at this.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>