<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )"><title>Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / ) - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=83283">Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">amitchel_us</span><br><span class="post-time small text-muted">2nd April 2002 00:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )</strong><br>I'm planning to use NSIS (which rocks) to install a Java application on WinNT/2000. The framework includes configuration files with directory listings. For example :<br><br>UPLOAD_DIR = d:/InstallDir/subDir<br><br>InstallDir is the same as NSIS' $INSTDIR. So if the user decides to install on F:\InstallDir, I want to change my configuration files to F:/InstallDir/subDir.<br><br>Java's file are either forward slash (/), or double-backslash (\\). A single backslash (\) is an escape character. So, F:\InstallDir is invalid.<br><br>Here's what I've thought of :<br>1. use NSIS strcmp, strcpy, strlen. I don't think this will work because there's no for..loop to loop through each character in $INSTDIR.<br><br>2. use an MS-Dos command through Exec to replace the slashes. It doesn't look like there's an easy way to do it. Win-2000's wsh may have it, but most of my customers are NT. If I could call it, though, I could probably write the result to a file and then read the file back in to get the value<br><br>3. Check this forum for similar items. I didn't see any.<br><br>Thanks in advance,<br>Andy</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Pomflain</span><br><span class="post-time small text-muted">2nd April 2002 05:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Look at the utility functions.</strong><br>Look at the example for parsing $CMDLINE parameters. Instead of delimiting by ' ', just scan until you hit the \ and then do a strcat. Like this:<br><br>#Scan for parameters $R1 is the counter which points to the '\'<br>IntOp $R1 $R1 - 1 ; Move pointer back to point before the '\'<br>StrCpy $R2 "/"<br>StrCpy $R0 $R0 "" $R1 ; Copy until the '\'<br>StrCpy $R0 "$R0$R2" ; Replace the '\' with '/'<br><br>I think that should work, but I'm also sure someone else will have a much simpler solution, they always do.<br><br>Hope that helps (a little).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">2nd April 2002 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Since I guess that there will be multiple '\' that need to be replaced, just scan the complete string character by character and replace if recessary will be more easy than waiting with copieng till a '\' is encountered. But that's just my guess. Otherwise you will have a loop with two possibilities and a lot of jumps. With this solution you just copie each character to a new string unless it's equal to '\'.<br><br>Take a look at the source. It's a function that replaces in a string any substring by another string (StrReplace).<br><br>I hope this will answer the question.<br><br>Good luck,<br>greetz, Hendri.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">2nd April 2002 15:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I generalized the ReplChar function to a StrReplace function that replaces any substring by an other string. The statement above was not correct, the previous function only worked for substrings of length 1. That was sufficient for your problem. The new function can take substrings of any length. But anyway, take a look at the general function. I guess more people will like this one...<br><br>This function can of course also solve the problem of replacing '\' by '/'.<br><br>Good luck, greetz,<br>-Hendri.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amitchel_us</span><br><span class="post-time small text-muted">3rd April 2002 00:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's terrific. It just clicked into place once I saw how you used labels for the loops. I had no idea. Thanks for the cleverness.<br><br>Andy</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">3rd April 2002 07:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thx for the nice words :D :D :D<br><br>-Hendri.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">treaz</span><br><span class="post-time small text-muted">15th January 2003 19:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>I guess there is a silly person here who doesn't know how to integrate your StrReplace function and put it to use.<br><br>I need to replace Strings in a file, but how do I specify a file name or get your StrReplace function read my file?<br><br>Could you please advice. Thanks.<br>:o</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">15th January 2003 20:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Read this:<br><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=121562" target="_blank">http://forums.winamp.com/showthread....hreadid=121562</a><br><br>-Hendri.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>