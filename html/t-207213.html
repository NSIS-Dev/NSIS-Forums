<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Files fail to write?"><title>Files fail to write? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Files fail to write?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=207213">Files fail to write?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">8th February 2005 07:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Files fail to write?</strong><br>This link explains the problem:<br><a href="http://worldwind.arc.nasa.gov/forums/index.php?showtopic=1225&amp;hl=" target="_blank">http://worldwind.arc.nasa.gov/forums...topic=1225&amp;hl=</a><br><br>Question is.. is this a problem on the user end (IE out of hard drive space / not able to write?) Or could this be a corrupt file in the installer?<br><br>If anyone has any suggestions / fixes I'd be much obliged.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">10th February 2005 21:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That error is shown if <a href="http://msdn.microsoft.com/library/en-us/fileio/base/writefile.asp" target="_blank">WriteFile</a> fails. WriteFile should rarely fail. Is the file it fails for empty after it fails or does it contain some content? Can you please attach the NSIS script (can't get from CVS, SF is having problems at the moment)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">12th February 2005 07:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://wiki.worldwindcentral.com/World_Wind_Eta_Full_b1" target="_blank">http://wiki.worldwindcentral.com/World_Wind_Eta_Full_b1</a><br><br>Hit edit to see the script formatted normally.<br><br>Feel free to make changes. Also be aware that changes will be made over the next few days, we are releasing a new version next week hopefully :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">12th February 2005 11:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Nothing special in the script. What about the file that fails to extract?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">12th February 2005 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think the problem is the number of files. The program installs &gt; 4000 files.<br><br>I had thought maybe it simply tries to write them too fast.<br><br>The file itself is a .dds image file. There are ~ 3000 such files.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">12th February 2005 18:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Do the files that failed extracting contain some content or are they empty?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">13th February 2005 01:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hmm.. some of the .wwp files might be empty. However the .dds files 'should' all be 128kb in size.<br><br>Is there a way I can catch the error and try again / recover?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th February 2005 04:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I mean on the user's computer, after it fails. For example, if the error shows: "Extract: error writing to file 0024_0066.dds", is the file named 0024_0066.dds empty for the user who got this error or does it contain some data?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">13th February 2005 05:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That I don't know. It has never happened to me or the devs :(<br><br>It looks like this is a 1 in a 1000 error. However we've released 600,000 copies :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th February 2005 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Would you be able to find any WriteFile calls in fileform.c, add GetLastError in their fail check code and print its return value? That should provide enough details to explain what happens here. Let me know if you can't and I'll create a special version with these changes on the weekend.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Llynix</span><br><span class="post-time small text-muted">16th February 2005 01:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you could create a special version of NSIS that does this it would be helpful. If you could make it so that the error was nice and pretty for users.. I could include this special installer with the next release.. and hopefully we can catch it.<br><br>Our release date for the next one is the 21st.. so we are in a big rush right now :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">17th February 2005 19:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://stashbox.org/uploads/1108669162/makensis_extract_err_dbg.zip" target="_blank">http://stashbox.org/uploads/11086691...ct_err_dbg.zip</a><br><br>Built using the latest CVS version. See the <a href="http://nsis.sourceforge.net/development/changelog/" target="_blank">change log</a> for changes made since 2.05. A patch with the change made to add the logging is in the zip and is also attached.<br><br>Use <a href="http://www.sysinternals.com/ntw2k/freeware/debugview.shtml" target="_blank">DebugView</a> while installing to see the error message.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>