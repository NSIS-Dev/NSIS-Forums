<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Environment Variables"><title>Environment Variables - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Environment Variables</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307468">Environment Variables</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">hohausfn</span><br><span class="post-time small text-muted">18th June 2009 13:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Environment Variables</strong><br>Hello,<br><br>i have a new problem. I write a new Environment-Variable in my installer like this<br></p><pre>
<code>${EnvVarUpdate} $0 "VarName" "A" "HKLM" "$INSTDIR"</code>
</pre>this works fine.<br><br>But later in my installer i start with <b>ExecWait</b> a .bat file which needs the EnVar "VarName".<br><pre>
<code>ExecWait $INSTDIR\installService.bat</code>
</pre><br>But the result is that the Service could not find the ${VarName}.<br><br><br>Could anyone please help me with my problem?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">18th June 2009 14:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The problem is that when your installer starts another program that new program inherits the same environment as the installer (i.e. the new program will not see the new variable your installer has created).<br><br>The solution is simple - your installer must <u>also</u> make the new value available <u>before</u> it starts the new program.<br><br>The NSIS wiki explains how to do this: <a href="http://nsis.sourceforge.net/Setting_Environment_Variables" target="_blank">http://nsis.sourceforge.net/Setting_...ment_Variables</a> (the "Setting Environmental Variables Temporarily" section tells you what to do)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">hohausfn</span><br><span class="post-time small text-muted">18th June 2009 14:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It works. Thank you very very much ;-)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lanlananhanh</span><br><span class="post-time small text-muted">7th July 2009 06:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://creditauto.net/" target="_blank"><font color="#EEEEEE"><u>credit auto</u></font></a><br><br>:confused: :rolleyes:</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>