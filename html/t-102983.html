<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="License page"><title>License page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">License page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=102983">License page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">1st September 2002 13:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>License page</strong><br>Hiya folks,<br><br>Is there a script-based way to detect UI interaction events (callback functions) and manipuate UI components?<br><br>I want to have a standard "professional" license page in which there are 2 radio buttons ("I accept" / "I don't accept"), with the latter selected by default - and instead of the current "I Agree" button there will be a "Next &gt;" (disabled if "I don't accept" is selected).<br><br>I can easily create the radio-button UI resources in an exe file (a most powerful feature in NSIS 2, wheeee!), rename "I Agree" to "Next &gt;", and as far as I remember I can disable that button on will with window messages (right?). My only problem is catching click events in the radio buttons...<br><br>Any ideas?<br><br>And if not, I'd like to propose this stuff (license page + UI interaction) on the feature list.<br><br>Lastly, if there some rough idea when NSIS 2.0 will become official and feature-complete?<br><br>Thanks a bunch!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">1st September 2002 13:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">&gt; as far as I remember I can disable that button on will with window<br>&gt; messages (right?)<br>SendMessage WM_ENABLE with a wparam of TRUE or FALSE (enable &amp; disable) respectively and a lparam of zero.<br><br>We could do with .onWindowEvent or somesuch I guess, is that feasible do you reckon KiCHiK (or even necessary?), you're most likely to know.<br><br>&gt; .. NSIS 2.0 will become official<br>Justin is looking at making an official 2.0 release at the moment, I'd imagine it's a lot of work considering how much has gone into the unofficial 2.0ax branch.<br><br>&gt; feature-complete?<br>It's not gonna stop until it takes over the world muahahaha! :D (but using DLLs &amp; scripts of course, none of that nasty bloatware :))</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">1st September 2002 17:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello there fellow Israeli :D<br><br>I guess I could add a callback such as .onWindowEvent that will be called whenever you get WM_COMMAND, that would make sense now that you can customize the UI.<br><br>But (there is always a but :D), it won't help you here. You can't enable or disable anything with WM_ENABLE. WM_ENABLE is only sent by the EnableWindow function after it has done its stuff.<br><br>Luckily for you, it will be very easy to emulate EnableWindow because for the static control background color I have already added SetWindowLong so you can set the WS_DISABLED style. But (yet another one) you also need GetWindowLong to get the old style so you can or with it.<br><br>Wouldn't it just be simpler to add EnableWindow you ask? Yes, it would :)<br>But (third one but [fourth] who's counting?) it will be hell of a lot simpler to just add .onVerifyLicense, but not as useful.<br><br>I am for the .onWindowEvent and EnableWindow thingy, what do you all think?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">YtseJam</span><br><span class="post-time small text-muted">1st September 2002 17:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">"Attack of the Yerushalmim". heh. :) &lt;/offtopic&gt;<br><br>Sorry. ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">2nd September 2002 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i> <b><br>I guess I could add a callback such as .onWindowEvent that will be called whenever you get WM_COMMAND, that would make sense now that you can customize the UI.<br><br>Luckily for you, it will be very easy to emulate EnableWindow because for the static control background color I have already added SetWindowLong so you can set the WS_DISABLED style. But (yet another one) you also need GetWindowLong to get the old style so you can or with it.<br><br>Wouldn't it just be simpler to add EnableWindow you ask? Yes, it would :)</b></blockquote>Hmmm... I browsed I little through MSDN, got a sickly feeling, thought about the beauty of the Java language and the simplicity of its documentation, and here are my $0.02:<br><br>1. I am *SO* happy I don't have to code in VisualStudio on a daily basis anymore!<br><br>2. What will ".onWindowEvent" return actually?<br><br>3. My vote goes to EnableWindow, but... (Ha! I can do it too! :D )<br><br>The 4 most common functionalities for controls are: show/hide, enable/disable, select/deselect (radio buttons / checkboxes), and set/kill focus. I think NSIS should support them all.<br><br>The Jerusalem Mafia lives on! :)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">2nd September 2002 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>What will ".onWindowEvent" return actually?</blockquote>Why should it return anythnig? NSIS functions can't return anything anyway :)<br>You will get wParam and lParam and do whatever you want with it.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">2nd September 2002 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b><br>Why should it return anythnig? NSIS functions can't return anything anyway :)<br>You will get wParam and lParam and do whatever you want with it.</b></blockquote>That's what I was talking about - what is the meaning of the wParam and lParam values in this context?<br><br>How do I know which specific event fired this callback function, and relating to which control?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">2nd September 2002 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You go to this MSDN page and learn all about it :D<br><a href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/menus/menureference/menumessages/wm_command.asp" target="_blank">http://msdn.microsoft.com/library/en...wm_command.asp</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">2nd September 2002 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">:D Yeah, I already browsed it earlier at work ("Must... survive... Microsoft... Eeeegh... Uuuuggggh...").<br><br>Then I went to see what's the deal with that "Chinese" link that Nant mentioned in the NSIS 2 thread... :eek: And to make a long story short, if I'll get fired I'll start porting NSIS to Java as a hobby... :D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">2nd September 2002 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, that's how it is with Microsoft :D<br><br>.onWindowEvent will basically give you the control id and the notification code (pushed, selected, etc.) and you will do with it whatever you want.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">11th September 2002 11:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>kichik wrote on 09-09-2002 08:05 PM:<br>I have been thinking about it a lot. There is a problem with it, in the install log there are two threads. If I give the UI thread an option to mess itself with NSIS functions, the installer thread wouldn't work as it should, would cause crashes, and would basically suck. Should the installer log not have a callback function?</blockquote>I'm not sure I understand what you mean by "install log": the optional log that can be generated during the installation? the installer workflow?<br><br>Anyway, I think that NSIS already has some "dangerous" features, but they're mild and optional - and this is a good model in my opinion.<br><br>Take ".onVerifyDirectory" as an example: it doesn't crash anything if used incorrectly, but it can certainly cause a lot of troubles - so you don't have to use it, and if you do you get a decent warning in the NSIS help.<br><br>As for possible crashes - can you elaborate? Give some example scenarios? If the installer is multi-threaded, where's the problem?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">18th September 2002 18:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The problem is that NSIS uses static buffers to execute instructions, that is, if two instructions are executed simultaneously, they will both use the same buffer at the same time, each will set it to what it needs, and non will work as should.<br><br></p><blockquote>I'm not sure I understand what you mean by "install log": the optional log that can be generated during the installation? the installer workflow?</blockquote>Nope, the visible install log, what the user sees.<br><br><blockquote>Anyway, I think that NSIS already has some "dangerous" features, but they're mild and optional - and this is a good model in my opinion.</blockquote>This is very dangerous, a lot of commands will not work, or get corrupted. Files can be extracted into places you never wished them to, files can get corrupted, your script will just not work as should.<br><br><blockquote>Take ".onVerifyDirectory" as an example: it doesn't crash anything if used incorrectly, but it can certainly cause a lot of troubles - so you don't have to use it, and if you do you get a decent warning in the NSIS help.</blockquote>It isn't executed with something else at the same time. If there was another NSIS code piece executed at the same time, it just wouldn't work.<br><br><blockquote>As for possible crashes - can you elaborate? Give some example scenarios? If the installer is multi-threaded, where's the problem?</blockquote>If one instruction sets a buffer to a number bigger than the installer size and then the File instruction comes and look for the file, and it has the file location in the installer in that buffer, it might read from a memory that does not belong to NSIS and crash NSIS.<br><br>Like I said, I still need to think of the best way of doing this.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Daab</span><br><span class="post-time small text-muted">18th September 2002 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ah, I see now... The classic "Thread-safe by assumption" trick, and then you break the assumption. I also read your recent stuff about .onInitDialog... I see the gravity of the problem :(<br><br>&lt;useless-preach-mode&gt;<br>That's why I like Java so much, you don't have to bust your ass to have global, thread-safe data<br>&lt;/useless-preach-mode&gt;<br><br>I guess I'm being silly because I haven't even glanced at the code, but why not just implement a mutex on that instructions buf? Worst-case scenario, the installer will appear to be stuck while a blocking command is being processed (ExecWait for example) which will slow things up, but the obvious logic is that it won't be stuck forever or the user shouldn't have used that blocking command in the first place...<br><br>Well, not exactly 100% worst-case, and anyway it gets far more complicated with a multiple buffers... Yep, I see your point. :cry:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nandhp</span><br><span class="post-time small text-muted">6th June 2006 18:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Has anything happened with this? I'm using EnableWindow in my script right now, but I need .onWindowEvent.<br><br>I have added two radio buttons and a checkbox to my license (actually a readme) page. The radio buttons allow you to choose installation type A or B, and the checkbox is a sub-option for type B. I would like to disable the checkbox when the user selects type A. I would use a custom page, but I couldn't get the InstallOptionsEx RichEdit to work (It only displayed the first line, even though MULTILINE was set). Is there any way I can get the change event for the radio buttons in current NSIS?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">6th June 2006 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Not without writing a plugin in Delphi or C/C++.<br><br>-Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>