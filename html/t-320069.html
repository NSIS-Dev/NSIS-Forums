<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="mui2 custom page with variables" />

  <title>mui2 custom page with variables - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">mui2 custom page with variables</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320069">mui2 custom page with variables</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">18th June 2010 19:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>mui2 custom page with variables</strong><br />
      Hi all,<br />
      <br />
      I'm trying to implement a custom mui2 page which knows some variables, something like e.g. the existing directory page but instead of filling a path variable I want to e.g. fill a boolean variable which tells me if a checkbox has been selected. The aim is to be ready to use this page multiple times just doing something like<br />
      !define MUI_CHECKBOXPAGE_VARIABLE ${enableA}<br />
      !define ... (some text things)<br />
      !insertmacro MUI_PAGE_CHECKBOX<br />
      <br />
      !define MUI_CHECKBOXPAGE_VARIABLE ${enableB}<br />
      !define ... (some text things)<br />
      !insertmacro MUI_PAGE_CHECKBOX<br />
      <br />
      I tried so by various ways: Just defining my custom page with a function accessing the MUI_CHECKBOXPAGE_VARIABLE I get a problem when filling MUI_CHECKBOXPAGE_VARIABLE in the "leave" function, probably because at include time the !define line was not yet passed? So I tried to copy everything from the directory page. There is some page declaration done within a macro so my hope is that MUI_CHECKBOX_PAGE_VARIABLE must be available only at the time of using the macro. But when filling it with StrCpy "${MUI_CHECKBOXPAGE_VARIABLE}" "True" I get a usage error for StrCpy. Same when changing it a bit like for the existing startmenu page where the variable is provided as parameter like<br />
      <br />
      !insertmacro MUI_PAGE_CHECKBOX ${enableA}<br />
      <br />
      Any ideas how I can create a flexible custom page that accepts variables defined before using its insertmacro?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">22nd June 2010 14:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe the problem can be tracked down to problems with code like this<br />
      <br />
      Var bar<br />
      <br />
      ...<br />
      <br />
      !macro foo out<br />
      StrCpy "${out}" "bar"<br />
      !macroend<br />
      <br />
      ...<br />
      <br />
      foo $bar<br />
      <br />
      From the error message it seems that out is not considered being an output variable in the StrCpy line.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">22nd June 2010 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can pass variables to macros. At the end of the day, any constants are evaluated. It is after evaluation that syntax is checked. Therefore, your code in the 2nd post above (should) work.<br />
      <br />
      However, !define MUI_CHECKBOXPAGE_VARIABLE ${enableA}. Is that Var enableA? In which case it should be $enableA not ${enableA} or is there something I am missing.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
