<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="UTF-8 scripts" />

  <title>UTF-8 scripts - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">UTF-8 scripts</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152812">UTF-8 scripts</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">16th October 2003 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>UTF-8 scripts</strong><br />
      i figured that utf-8 scripts (like scripts containing Chinese, Japanese, Korean) don't compile, since one has to remove the "ï»¿" at the very beginning of the document. maybe nsis should ignore that, so one does not have to edit the script each time it's been saved.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">16th October 2003 15:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS does not use Unicode, because it is not supported by Win9x.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">18th October 2003 15:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you could just have a small program that processes the file beforehand to convert the file into ansi so nsis can cope with it.<br />
      <br />
      you could use a richedit v2 control to load the file and then save it out as a normal text file. not the best of ideas since some of the extra characters (especially for languages that need it) would be lost but it would give you a useable file :)<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">25th October 2003 15:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">had a few minutes to kill and knocked up this.<br />
      <br />
      the program will convert a unicode file to ansi (not exactly sure how things will be mapped with files that fully use extended characters) and it requires riched20.dll (richedit v2+ basically on most machines now - checks for this on init).<br />
      <br />
      <u>usage</u>: create a shortcut to the test program (for the moment) and add the file to convert onto the end of the target string.<br />
      <br />
      at the moment it will output to 'convert.nsi' but will increase the features for tomorrow (only spent 30 minutes on it ;) )<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">25th October 2003 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why would you use richedit to do this conversion? It isn't really something you should use for conversion.<br />
      <br />
      You can convert text to ANSI using any text editor like Notepad.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">25th October 2003 17:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i know it's not the best method to use for conversion but it's just doing the same as a text editor would do (though notepad on my win98 system can't do that conversion).<br />
      <br />
      thought it would be useful to have a simple conversion from a unicode file to ansi which is automatically done, nevermind :(<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th October 2003 17:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why not use <a href="http://msdn.microsoft.com/library/en-us/intl/unicode_2bj9.asp" target="_blank">WideCharToMultiByte</a>?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">25th October 2003 17:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hadn't considered that until Joost posted. thought the richedit idea was a simple way to do it since from what i understand it will convert things using WideCharToMultiByte internally (so it will cope with displaying in the ansi version of the richedit control).<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">25th October 2003 17:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">All NT versions of Notepad support this convertion. Because Win9x doesn't support Unicode, it's unlikely that anyone using Win9x would product Unicode files.<br />
      <br />
      If you want to convert a file, you'd better use standard Windows API than a RichEdit control (which is designed to display data).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">25th October 2003 17:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">oops, should have realised that. using the api's does make more sense now i've had it pointed out, just not sure why i didn't think about it earlier. (feel very stupid now but thank you for pointing things out)<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">27th October 2003 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">taking comments made earlier i had a go at using the WideCharToMultiByte and this is what i've done.<br />
      <br />
      When calling it just pass the filename to read and the file to save to and if all is fine it will generate a ansi version of the file (will indicate errors via messageboxes at the moment).<br />
      <br />
      The file paths need to be full paths and if they are long names then it is advisable to put quotes around the path ("c:\blah blah.log").<br />
      <br />
      It will also check before conversion to see if the file is unicode or not (which is sensible).<br />
      It currently won't strip out the unicode file indicator from the start if there is one (hence the wierd character at the start of converted files)<br />
      <br />
      Slightly off topic, it could be useful for makensisw to have the ability to run a preprocessing script/program (like vc++, etc can do). Just a thought<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">OCedHrt</span><br />
      <span class="post-time small text-muted">4th January 2004 11:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Win9x doesn't need to support unicode because of MSFT's Unicode Layer. I have asked several developers who are familiar with coding w/ unicode and they all say that it is no where near as difficult and daunting a task as most developers think it is.<br />
      <br />
      -wow..I can't type :p</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">4th January 2004 11:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Then NSIS would have to include huge and buggy Win9x Unicode libraries, which will make your installer more than 10 times larger.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">OCedHrt</span><br />
      <span class="post-time small text-muted">4th January 2004 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Dunno, maybe. But the dll itself is &lt; 245k. Maybe that is 10 times larger..hm. dunno how big NSIS is but still..</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">4th January 2004 11:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The NSIS exehead is only 34 KB large. Supporting this buggy library would require lots of work, we would have to create sepeate Win9x/NT code and include the library which is almost 10 times larger than the installer itself.<br />
      <br />
      So it is not possible to support it. However, NSIS does support MBCS so you can still use all languages.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
