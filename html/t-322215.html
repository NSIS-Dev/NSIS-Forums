<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Go to a NSIS page!" />

  <title>Go to a NSIS page! - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Go to a NSIS page!</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322215">Go to a NSIS page!</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thanatos83</span><br />
      <span class="post-time small text-muted">6th September 2010 13:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Go to a NSIS page!</strong><br />
      HI. :)<br />
      <br />
      I read the documentation about how to jump a NSIS page, so i need to jump to a page specific if a user select one option u other option.<br />
      <br />
      Well I set this in my script:<br />
      <br /></p>
      <pre>
<span style="color: #FF8000">#Installerpages<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_WELCOME<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_LICENSE</span><span style="color: #007700">$(</span><span style="color: #0000BB">MUILicense</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">PagecustomSetupTypeSetupTypeLeave<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_DIRECTORY<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_STARTMENUApplication$StartMenuGroup<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_INSTFILES<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_FINISH<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_CONFIRM<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_INSTFILES<br /><br /></span><span style="color: #007700">Function</span><span style="color: #0000BB">RelGotoPage<br />IntCmp$R900MoveMove<br />StrCmp$R9</span><span style="color: #DD0000">"X"</span><span style="color: #0000BB">0Move<br />StrCpy$R9</span><span style="color: #DD0000">"120"<br /><br /></span><span style="color: #0000BB">Move</span><span style="color: #007700">:<br /></span><span style="color: #0000BB">SendMessage$HWNDPARENT</span><span style="color: #DD0000">"0x408""$R9"""<br /></span><span style="color: #0000BB">FunctionEnd
<br /></span>

<!-- php buffer end -->
                
                
                
</pre>
      <hr />
      <pre>
        
Them i put this:<br /><br />
        PHP Code:
        
                
</pre>
      <hr />
      <pre>
                <code style="white-space:nowrap">
                
                        <!-- php buffer start --></code><span style="color: #000000">
<span style="color: #007700">${If}</span><span style="color: #0000BB">$SelRap</span><span style="color: #007700">==${</span><span style="color: #0000BB">BST_CHECKED</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">StrCpy$R93<br />CallRelGotoPage<br /></span><span style="color: #007700">${Else}<br /></span><span style="color: #0000BB">StrCpy$R96<br />CallRelGotoPage<br /></span><span style="color: #007700">${EndIf}
</span></span>
</pre><br />
      But i confuse because the third page of NSIS is my custom page and then it shows me the install page. What is the order of the NSIS pages that shows with <b>"StrCpy $R9 3"</b> or for example 1,2,3,4, etc... ?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">6th September 2010 14:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's a relative jump. If you pass '3', it should jump three pages forward. So where you end up depends entirely on where you're jumping from.<br />
      <br />
      Also, why on earth would you want to jump 120 pages? o__O</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th September 2010 14:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Going forward any number than there are pages simulates a Cancel click.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thanatos83</span><br />
      <span class="post-time small text-muted">6th September 2010 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by MSG</small><br />
        It's a relative jump. If you pass '3', it should jump three pages forward. So where you end up depends entirely on where you're jumping from.<br />
        <br />
        Also, why on earth would you want to jump 120 pages? o__O
      </blockquote>OK, thanks i change this for 8 pages in total... now i see how this work with relative jumps.<br />
      <br />
      But there's also a problem, because the first condition work nice and goes to install files but if i select de second and try to jump to !insertmacro MUI_PAGE_DIRECTORY page then the installer generated an error and exits from installer.<br />
      <br />
      May be it is a bug ? :stare:
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">6th September 2010 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">no idea about the crash (might need full example code)... but if you only need to move forward, I'd recommend using the technique of calling Abort in the pages' Pre function. Use a variable to indicate which page you want to land on and call Abort in every page that is not the page you want.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thanatos83</span><br />
      <span class="post-time small text-muted">7th September 2010 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hi.<br />
      <br />
      I get the same problem... crash if i jump to directory page, maybe the reason is the value 1 of <b>StrCpy $R9 1</b> because it's reserved value for next page ?.<br />
      <br />
      I put my script, any help please!<br />
      <br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #FF8000">#Página-Bienvenida<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_WELCOME<br />
      <br /></span> <span style="color: #FF8000">#Página-Licencia<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_LICENSE</span><span style="color: #007700">$(</span><span style="color: #0000BB">MUILicense</span><span style="color: #007700">)<br />
      <br /></span> <span style="color: #FF8000">#Página-Tipodeinstalación<br /></span> <span style="color: #0000BB">PagecustomTipoInstalacionTipoInstalacionLeave<br />
      <br /></span> <span style="color: #FF8000">#Página-Directorio<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_PREDirectorio_PreFunction<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_DIRECTORY<br />
      <br /></span> <span style="color: #FF8000">#Página-MenuInicio<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_PREMenuInicio_PreFunction<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_STARTMENUApplication$StartMenuGroup<br />
      <br /></span> <span style="color: #FF8000">#Página-AccesoDirecto<br /></span> <span style="color: #0000BB">PagecustomAccesoDirecto<br />
      <br /></span> <span style="color: #FF8000">#Página-Instalación<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_PREInstalacion_PreFunction<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_INSTFILES<br />
      <br /></span> <span style="color: #FF8000">#Página-Finalizar<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_PREFinalizar_PreFunction<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_FINISH<br />
      <br /></span> <span style="color: #FF8000">#DefinelafunciónFunAbo<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_CUSTOMFUNCTION_ABORTFunAbo<br />
      <br /></span> <span style="color: #FF8000">#Páginasdedesinstalación<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_CONFIRM<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_INSTFILES<br />
      <br /></span> <span style="color: #FF8000">#Functionjumppages<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">RelGotoPage<br />
      IntCmp$R900MoveMove<br />
      StrCmp$R9</span><span style="color: #DD0000">"X"</span><span style="color: #0000BB">0Move<br />
      StrCpy$R9</span><span style="color: #DD0000">"6"</span><span style="color: #007700">;</span><span style="color: #0000BB">Nºtotaldepáginas<br />
      <br />
      Move</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">SendMessage$HWNDPARENT</span><span style="color: #DD0000">"0x408""$R9"""<br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br />
      <br /></span> <span style="color: #FF8000">#CustomfunctionSetupType<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">TipoInstalacion<br />
      StrCpy$R81</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslaprimerapágina<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_HEADER_TEXT</span><span style="color: #DD0000">"$(Tit1)""$(SubTit1)"<br />
      <br /></span> <span style="color: #0000BB">nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Create</span><span style="color: #007700">/</span><span style="color: #0000BB">NOUNLOAD1018<br />
      Pop$CD1<br />
      <br /></span> <span style="color: #007700">${If}</span><span style="color: #0000BB">$CD1</span><span style="color: #007700">==</span><span style="color: #0000BB">error<br />
      Abort<br /></span> <span style="color: #007700">${EndIf}<br />
      <br />
      ${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">12u20u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(InstRap)"<br /></span> <span style="color: #0000BB">Pop$Rad2<br />
      <br /></span> <span style="color: #FF8000">#PordefectoseleccionalaInstalaciónrápida<br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_SetState</span><span style="color: #007700">}</span><span style="color: #0000BB">$Rad2</span><span style="color: #007700">${</span><span style="color: #0000BB">BST_CHECKED</span><span style="color: #007700">}<br />
      <br />
      ${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">12u33u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(InstPer)"<br /></span> <span style="color: #0000BB">Pop$Rad1<br />
      <br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateLabel</span><span style="color: #007700">}</span><span style="color: #0000BB">0u0u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(L1)"<br /></span> <span style="color: #0000BB">Pop$Lab1<br />
      <br />
      nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Show<br />
      FunctionEnd<br />
      <br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">TipoInstalacionLeave<br /></span> <span style="color: #FF8000">#GuardaelestadodelcontroldelRadioButton<br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_GetState</span><span style="color: #007700">}</span><span style="color: #0000BB">$Rad1$SelPer<br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_GetState</span><span style="color: #007700">}</span><span style="color: #0000BB">$Rad2$SelRap<br />
      <br /></span> <span style="color: #FF8000">#CondiciónbasadaenlaseleccióndelRadioButton<br /></span> <span style="color: #007700">${If}</span><span style="color: #0000BB">$SelRap</span><span style="color: #007700">==${</span><span style="color: #0000BB">BST_CHECKED</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">StrCpy$R94</span><span style="color: #007700">;</span><span style="color: #0000BB">vahacialapáginadeinstalación<br />
      CallRelGotoPage<br /></span> <span style="color: #007700">${Else}<br /></span> <span style="color: #0000BB">StrCpy$R91</span><span style="color: #007700">;</span><span style="color: #0000BB">vahacialapáginadeseleccionardirectorio<br />
      CallRelGotoPage<br /></span> <span style="color: #007700">${EndIf}<br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br />
      <br /></span> <span style="color: #FF8000">#Directorypage<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">Directorio_PreFunction<br />
      StrCpy$R82</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslasegundapágina<br />
      FunctionEnd<br />
      <br /></span> <span style="color: #FF8000">#Startmenupage<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">MenuInicio_PreFunction<br />
      StrCpy$R83</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslatercerapágina<br />
      FunctionEnd<br />
      <br />
      <br /></span> <span style="color: #FF8000">#CustomfunctionShorcut<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">AccesoDirecto<br />
      StrCpy$R84</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslacuartapágina<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_HEADER_TEXT</span><span style="color: #DD0000">"$(Tit2)""$(SubTit2)"<br />
      <br /></span> <span style="color: #0000BB">nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Create</span><span style="color: #007700">/</span><span style="color: #0000BB">NOUNLOAD1018<br />
      Pop$CD2<br />
      <br /></span> <span style="color: #007700">${If}</span><span style="color: #0000BB">$CD2</span><span style="color: #007700">==</span><span style="color: #0000BB">error<br />
      Abort<br /></span> <span style="color: #007700">${EndIf}<br />
      <br />
      ${</span><span style="color: #0000BB">NSD_CreateCheckBox</span><span style="color: #007700">}</span><span style="color: #0000BB">0u14u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(AccEsc)"<br /></span> <span style="color: #0000BB">Pop$Check1<br />
      <br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateCheckBox</span><span style="color: #007700">}</span><span style="color: #0000BB">0u33u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(AccIni)"<br /></span> <span style="color: #0000BB">Pop$Check2<br />
      <br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateLabel</span><span style="color: #007700">}</span><span style="color: #0000BB">0u0u100</span><span style="color: #007700">%</span><span style="color: #0000BB">20</span><span style="color: #DD0000">"$(L2)"<br /></span> <span style="color: #0000BB">Pop$Lab2<br />
      <br />
      nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Show<br />
      FunctionEnd<br />
      <br />
      <br /></span> <span style="color: #FF8000">#Installationpage<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">Instalacion_PreFunction<br />
      StrCpy$R85</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslaquintapágina<br />
      FunctionEnd<br />
      <br /></span> <span style="color: #FF8000">#Finishpage<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">Finalizar_PreFunction<br />
      StrCpy$R86</span><span style="color: #007700">;</span><span style="color: #0000BB">estaeslasextapágina<br />
      FunctionEnd<br />
      <br />
      <br /></span> <span style="color: #FF8000">#Customfunctionabort<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">FunAbo<br />
      StrCmp$R810End</span><span style="color: #007700">;</span><span style="color: #0000BB">Comparethevariablewiththe<br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">pageindexofyourchoice<br />
      StrCpy$R91<br />
      CallRelGotoPage<br />
      Abort<br />
      End</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">FunctionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
      PD... Sorry for some strings in spanish language i'm spanish :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">7th September 2010 22:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by thanatos83</small><br />
        hi.<br />
        <br />
        I get the same problem... crash if i jump to directory page, maybe the reason is the value 1 of <b>StrCpy $R9 1</b> because it's reserved value for next page ?.<br />
        <br />
        I put my script, any help please!
      </blockquote>Thanks for the semi-full example; it gives us something to work with :)<br />
      <br />
      Those who want to poke at it, the following is missing (just put it at the top):<br />
      PHP Code:
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!include</span><span style="color: #DD0000">"MUI2.nsh"<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">StartMenuGroup<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">CD1<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">CD2<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Check1<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Check2<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Lab1<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Lab2<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Rad1<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">Rad2<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">SelPer<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">SelRap<br />
      Outfile</span><span style="color: #DD0000">"$%temp%\temp.exe"<br />
      <br /></span> <span style="color: #0000BB">Section<br />
      SectionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
      On to the issue at hand, then... the problem in your script appears to be that you're calling 'RelGotoPage 1' from your Custom Page's Leave function. You can't do that, as NSIS will get stuck in a loop. Not sure why, but it does :)<br />
      <br />
      As you only need to go +1 page anyway, you can just -not- call "RelGotoPage" at all, and NSIS will take the user to the next page as usual :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thanatos83</span><br />
      <span class="post-time small text-muted">8th September 2010 00:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Exactly, i removed the part in the condition:<br />
      <br />
      ${Else}<br />
      StrCpy $R9 1 ; va hacia la página de seleccionar directorio<br />
      Call RelGotoPage<br />
      ${EndIf}<br />
      <br />
      So it seems NSIS was getting in a constant loop, and now work fine...<br />
      <br />
      Thanks for help :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">8th September 2010 00:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No prob :) I'd still recommend using the other method, seeing as you're only going forward... as you can then easily re-order pages, add/remove pages, etc. without having to worry about updating the relGotoPage index numbers. But this should definitely work :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
