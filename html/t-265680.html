<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="LogEx plugin"><title>LogEx plugin - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=" LogEx plugin"><title>LogEx plugin - NSIS Forums</title><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">LogEx plugin</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265680">LogEx plugin</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">13th February 2007 01:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>LogEx plugin</strong><br>I have created a new Logging plugin:<br>http://nsis.sourceforge.net/LogEx_plug-in<br><br>With this plugin you can:<br>- Open a new or existing logfile, and append strings to it.<br>- Copy this string to the Status Listbox and/or Statusbar. (like DetailPrint)<br>- Append an existing file to the log file (esp. usefull when executing a console app)<br>--- Add a prefix to each new line of this file.<br>--- Choose which lines from this file to append.<br><br>Example:<br><br></p><pre>
<code><br>LogEx::Init /NOUNLOAD "$TEMP\log.txt"<br>LogEx::Write /NOUNLOAD "Write this line to the log file only"<br>LogEx::Write /NOUNLOAD "Write this line to the log file and the status list box" true<br>LogEx::Write /NOUNLOAD "Write this line to the log file, the status list box and \<br>    the statusbar" true true<br>LogEx::Write /NOUNLOAD 'Write complete "dir" output to the log file with "&gt;" as prefix'<br>ExecDos::exec 'cmd /C dir' "" "$TEMP\output.log"<br>LogEx::AddFile /NOUNLOAD "$TEMP\output.log" "&gt;"<br>LogEx::Write /NOUNLOAD 'Write "dir" output from line3 to the log file'<br>ExecDos::exec 'cmd /C dir' "" "$TEMP\output.log"<br>LogEx::AddFile /NOUNLOAD "$TEMP\output.log" "" 3<br>LogEx::Write /NOUNLOAD 'Write "dir" output from line3 to line6 to the log file'<br>ExecDos::exec 'cmd /C dir' "" "$TEMP\output.log"<br>LogEx::AddFile /NOUNLOAD "$TEMP\output.log" "" 3 6<br>LogEx::Close<br></code>
</pre><br>
      <br>
      Please give your comments.<br>
      <br>
      JP de Ruiter
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">palecekp</span><br>
      <span class="post-time small text-muted">16th February 2007 11:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>stack problem</strong><br>
      Hi,<br>
      <br>
      I found your plugin for logging and try to use it.<br>
      <br>
      There is a little bit problem with LogEx::Write function, which totaly destroy (clean) the stack (maybe more 'pops' then 'pushs').<br>
      <br>
      I didn't tested another functions in library.<br>
      <br>
      In other way, library looks very usefull.<br>
      <br>
      Best regards Pavel Palecek</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">16th February 2007 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>RE: stack problem</strong><br>
      Hi,<br>
      <br>
      Thanks for trying.:)<br>
      <br></p>

      <blockquote>
        maybe more 'pops' then 'pushs'
      </blockquote>you are right.<br>
      It did always read the max number of parameters, so when you specified less parameters then max, there where more pops then pushes. :rolleyes:<br>
      <br>
      I did fix this (I changed the order of parameters: optional parameters first, and check if they are valid)<br>
      <br>
      Also did the following:<br>
      v0.2<br>
      - Fixed stack bug.<br>
      - Added parameter "bAppendToFile" to Init function<br>
      - Changed the way AddFile function reads the file (read the file at ones in a buffer allocated with VirtualAlloc)<br>
      - Added comments in sourcecode<br>
      <br>
      See the plugin page at http://nsis.sourceforge.net/LogEx_plug-in for version 0.2<br>
      <br>
      Hope you can use this plugin.<br>
      JP
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">17th February 2007 00:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I found a small bug with v0.2<br>
      When the function AddFile was used with an empty file, the installer crashed.<br>
      <br>
      I uploaded a new version: 0.3.<br>
      It checks the filesize, and if zero returns right away.<br>
      <br>
      Best regards,<br>
      Jan Pieter</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">18th February 2007 21:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">P.S.: the example in the first post doesn't work anymore.<br>
      <br>
      See http://nsis.sourceforge.net/LogEx_plug-in for a valid example.<br>
      <br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">palecekp</span><br>
      <span class="post-time small text-muted">19th February 2007 08:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: RE: stack problem</strong><br>
      Hi,<br>
      <br>
      plugin works very well, in my case, now.<br>
      <br>
      Thank you<br>
      <br>
      Pavel Palecek</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">djg72</span><br>
      <span class="post-time small text-muted">30th March 2007 22:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problems with Append</strong><br>
      I am trying to write a script using LogEx. It installs SQL Express and then reboots. I seem to only get log entries from after the reboot.<br>
      <br>
      I tried using the bAppendToFile:<br></p>
      <pre>
<code>LogEx::Init /NOUNLOAD bAppendToFile "$INSTDIR\InstallLog.txt"<br></code>
</pre><br>
      Which created a file named "bAppendToFile" on my desktop.<br>
      <br>
      I also tried:<br>
      <pre>
<code>LogEx::Init /NOUNLOAD /bAppendToFile "$INSTDIR\InstallLog.txt"<br></code>
</pre><br>
      Which didn't seem to create a file at all.<br>
      <br>
      I may have my syntax wrong, could you post an example with the correct syntax for appending to a file?<br>
      <br>
      Thanks.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">31st March 2007 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello djg72,<br>
      <br>
      thanks for trying this plugin!<br>
      <br>
      You pointed my to a small error in the readme file:<br>
      In the readme file I talked about 'bAppendFile' , while I actually use 'bTruncateFile'. I fixed it now.<br>
      Thanks for that.<br>
      <br>
      Now to your problem:<br>
      I used the so called 'Hungarian' variable namestyle.<br>
      This means that I added a 'b' in front of the variable name when it's a boolean variable.<br>
      So bTruncateFile is a boolean variable.<br>
      <br>
      To use truncation (when the logfile already exist, all data will be erased), use the following code:<br></p>
      <pre>
<code>LogEx::Init /NOUNLOAD true "$INSTDIR\InstallLog.txt"</code>
</pre>When you use the following code:<br>
      <pre>
<code><br>LogEx::Init /NOUNLOAD "$INSTDIR\InstallLog.txt"<br></code>
</pre>and the logfile already exists, the existing data will not be deleted.<br>
      <br>
      Hope this will help you.<br>
      <br>
      Best regards,<br>
      Jan Pieter
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">djg72</span><br>
      <span class="post-time small text-muted">2nd April 2007 18:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Thanks</strong><br>
      Thank you for your reply. I had originally tried using the line you suggested and it didn't work. Thank you also for clearing up that 'bTruncateFile' and 'bAppendFile' are the true and false of the same variable.<br>
      <br>
      I figured out my problem was I tried to open the logfile in the .onInit function which was trying to write to a directory that didn't exist. Once rebooted, the directory existed and the logfile could be written.<br>
      <br>
      I changed:<br></p>
      <pre>
<code><br>Function .onInit<br>     ;Open Log file<br>     LogEx::Init /NOUNLOAD "$INSTDIR\InstallLog.txt"<br>     LogEx::Write /NOUNLOAD "Function .onInit : Log File Opened..."          <br></code>
</pre><br>
      To this:<br>
      <pre>
<code><br>Function .onInit<br>     ;Open Log file<br>     SetOutPath "$INSTDIR"<br>     LogEx::Init /NOUNLOAD "$INSTDIR\InstallLog.txt"<br>     LogEx::Write /NOUNLOAD "Function .onInit : Log File Opened..."          <br></code>
</pre><br>
      Maybe this will help someone.<br>
      <br>
      Thanks again for your help and this plugin works great.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lushdog</span><br>
      <span class="post-time small text-muted">27th August 2007 12:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm getting a "Ã¿Ã¾" when I try to append a few particular files to the log.<br>
      <br>
      They are logs from the most recent version of MS SQL Express so I'm thinking it's an encoding issue (i.e. not plain text).<br>
      <br>
      Any ideas?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">27th August 2007 12:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you send me a log file?<br>
      I don't have SQL server installed right now.<br>
      <br>
      Regards, JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lushdog</span><br>
      <span class="post-time small text-muted">27th August 2007 14:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's because the SQL server log uses UTF-Little Endian encoding rather than ASCII.<br>
      <br>
      It works if I convert the logfile to asciI "c:\type unicode.txt &gt; ascii.txt".<br>
      <br>
      My only problem is that "type.exe" isn't anywhere on my windows install so I'm having problems running it with "exec" or with the "execdos" plugin.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">27th August 2007 14:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's 'part' of the command shell.<br>
      try: '$SYSDIR\cmd.exe /c "type unicode.txt &gt; ascii.txt"'</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lushdog</span><br>
      <span class="post-time small text-muted">27th August 2007 14:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Or:<br>
      <br>
      ReadEnvStr $R0 COMSPEC<br>
      ExecWait '"$R0" /C TYPE "c:\summary.txt" &gt; "c:\SummaryAscii.txt"'<br>
      <br>
      Thanks a bunch!!!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">27th August 2007 14:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Your welcome.<br>
      Thanks for using my plug-in.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fantrs91</span><br>
      <span class="post-time small text-muted">25th April 2008 16:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      I'm using your plugin and it's really helpful :)<br>
      <br>
      I have one minor issue with it: when using logex::Close, the log file I generate gets 2 blank lines at the end.<br>
      <br>
      Is there a way to avoid having blank lines at the end of the file ?<br>
      <br>
      Thanks</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">25th April 2008 23:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      <br>
      great to hear you like my plugin.<br>
      <br>
      About your issue: I have never seen this.<br>
      All my generated log files end without extra lines.<br>
      Can you give me a piece of code with which I can reproduce this?<br>
      <br>
      BTW, you mentioned that this happens when you use ::Close.<br>
      Does this mean that if you don't use ::Close, the logfile does not have these extra lines?<br>
      <br>
      Best regards,<br>
      Jan Pieter</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">26th April 2008 19:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      <br>
      I looked in it a little further, and I was able to reproduce your issue.<br>
      It turned out that I never closed the plugin properly in my own installer :rolleyes:<br>
      I fixed the plugin, so you shouldn't see this issue anymore with v0.4<br>
      (see http://nsis.sourceforge.net/LogEx_plug-in)<br>
      <br>
      Thanks for pointing me to this :)<br>
      <br>
      Regards,<br>
      Jan Pieter</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fantrs91</span><br>
      <span class="post-time small text-muted">28th April 2008 12:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      You are right, I did not have the blank lines when NOT using logex::Close , with plugin version 0.3 .<br>
      <br>
      I just downnloaded and installed version 0.4 and it now works perfectly :-)<br>
      <br>
      Thanks a lot!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">baxi</span><br>
      <span class="post-time small text-muted">8th October 2008 15:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Read right on the file</strong><br>
      I tried your plugin and found it to be quite usefull. I have only one problem with it: the file cannot be read while it is opened via your plugin. I would suggest the to change the dwShareMode parameter in the CreateFile function at least to 1:<br>
      <br>
      if(!strcmp(buf,"true"))<br>
      {<br>
      popstring(buf); // Get Second parameter from the stack (should be the log filename)<br>
      // Open an existing file and overwrite, or create a new file, without sharing<br>
      hFile=CreateFile(buf,FILE_WRITE_DATA,1,NULL,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL<br>
      ,NULL);<br>
      }// else open an existing file and append, or create a new file, without sharing<br>
      else hFile=CreateFile(buf,FILE_APPEND_DATA,1,NULL,OPEN_ALWAYS,FILE_ATTRIBUTE_NORMAL,N<br>
      ULL);</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">8th October 2008 18:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello baxi,<br>
      <br>
      good suggestion.<br>
      I updated the plugin, you can find it here:<br>
      http://nsis.sourceforge.net/LogEx_plug-in<br>
      <br>
      Can you please confirm that it's working, because I'm not able to test the plugin right now.<br>
      <br>
      Regards,<br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">baxi</span><br>
      <span class="post-time small text-muted">8th October 2008 18:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      <br>
      I tried it and its working fine<br>
      <br>
      Baxi</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">9th October 2008 17:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for trying and letting me know.<br>
      <br>
      I hope you find this plugin usefull<br>
      <br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">knippenberg</span><br>
      <span class="post-time small text-muted">28th November 2008 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>LogEx with NSIS Unicode branch</strong><br>
      Hi JP,<br>
      <br>
      I have been using your plugin for several weeks now and it worked fine so far. Just today I switched to the unicode build of nsis available at <a href="http://www.scratchpaper.com/," target="_blank">http://www.scratchpaper.com/,</a> since we needed to support unicode languages in our installer. Since then, it seems that your plugin doesn't work any more. I copied the LogEx.dll to the new plugin subfolder and don't get any errors on compiling. When I run the installer, it creates a file named "t" in the installer's directory, and doesn't create any logfiles any more.<br>
      <br>
      Any ideas on this? I think it may be due to the fact that the whole installer script is now provided as UTF8-encoded file rather than ANSI.<br>
      <br>
      Thanks for your efforts,<br>
      <br>
      Stefan</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">28th November 2008 17:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stefan,<br>
      <br>
      since more people asked for Unicode support, I decided to implement it in the LogEx plugin.<br>
      (It turned out to to be quiet easy actually).<br>
      <br>
      I updated the plugin, you can find it here:<br>
      http://nsis.sourceforge.net/LogEx_plug-in<br>
      <br>
      I tried it with non-Unicode, and that works.<br>
      Can you please confirm that it's working for Unicode as well?<br>
      <br>
      Regards,<br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">knippenberg</span><br>
      <span class="post-time small text-muted">1st December 2008 10:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi JP,<br>
      <br>
      thanks for your quick response! In tried the update immediately (well... immediately as i read your post :)) but couldn't get it to work...<br>
      <br>
      I still have the same issue with the "t" file in the setup.exe directory. When opening it with notepad, I can see that there are several lines with one character. It contains t's and f's, so my guess is that LogEx accidentally logs the calls to the LogEx routine itself.<br>
      <br>
      I use it like this:<br>
      <br></p>
      <pre>
<code><br>Section "Required components" SEC01<br><br>....<br><br>LogEx::Init /NOUNLOAD true "${INSTALL_LOGFILE}"<br>LogEx::Write /NOUNLOAD false false "logging started..."<br></code>
</pre><br>
      <br>
      The call to Init seems to create the "t" file, and all succeeding calls to Write seem to add one line with the letter t or f to the file, most probably depending on which parameters I use.<br>
      At the point of the init call, the directory for INSTALL_LOGFILE already exists.<br>
      <br>
      Any idea what I'm doing wrong here?<br>
      <br>
      Thanks,<br>
      <br>
      Stefan
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">1st December 2008 21:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stefan,<br>
      <br>
      OK, so appearantly it isn't that easy.<br>
      I installed the Unicode version, and got the same problems you have.<br>
      <br>
      I'm not sure what the problem is, I haven't found it so far.<br>
      I'll let you know when I found the solution.<br>
      <br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">30th December 2008 12:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stefan,<br>
      <br>
      it took some longer than I thought, but I finally have made a (separate) Unicode plugin.<br>
      It is included in the zip file from http://nsis.sourceforge.net/LogEx_plug-in.<br>
      <br>
      Hope you can still use it.<br>
      <br>
      Best regards, JP<br>
      <br>
      P.S.: Also used the new NSIS 2.42 API library with this version (0.7)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">31st December 2008 10:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I uploaded v0.7.1, which now uses the PluginCallback function from the new NSIS API lib, so /NOUNLOAD is no longer required.<br>
      <br>
      Regards,<br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">knippenberg</span><br>
      <span class="post-time small text-muted">7th January 2009 08:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi JP,<br>
      <br>
      just noticed your post, I definetely can still use it and will try it asap. Thanks for your efforts!<br>
      <br>
      Stefan</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">knippenberg</span><br>
      <span class="post-time small text-muted">7th January 2009 11:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi again,<br>
      <br>
      I tested the new version but still have the same issue as before. I also tried with the provided example in the zip file:<br>
      converted to unicode,<br>
      compile (success),<br>
      execute (file t with singular character per row)<br>
      <br>
      I went as far as deinstalling both the normal and the unicode version of nsis and installing a fresh 2.42 unicode version, so I won't accidentally use the wrong version. Still the same... I removed the /NOUNLOAD parameter as well.<br>
      <br>
      For LogEx, I first just copied the dll in the unicode folder to the nsis plugin directory.<br>
      Also tried extracting everything in the zip to the nsis root dir, leaving me with one LogEx.dll in \Plugins and one LogEx.dll in Plugins\Unicode. Neither version works for me...<br>
      Any ideas?<br>
      <br>
      Stefan</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">7th January 2009 15:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stefan,<br>
      <br>
      Removing the /NOUNLOAD in the Unicode version appearantly doesn't work.<br>
      But when I use the /NOUNLOAD, the Unicode version works OK.<br>
      Can you try the attached Unicode example?<br>
      It isworking fine here.<br>
      <br>
      I will ask jimpark about the /NOUNLOAD.<br>
      <br>
      Regards, JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jimpark</span><br>
      <span class="post-time small text-muted">7th January 2009 19:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was able to make the LogEx plugin work simply by using the right pluginapi.lib. However, the DosEx plugin needs to be ported over also for the exampleu.nsi to work. :(</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">7th January 2009 21:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stefan,<br>
      <br>
      I released a new version of the LogEx plugin, which in combination with the new NSIS 2.42 Unicode (not available yet) will work without the /NOUNLOAD.<br>
      <br>
      Best regards, JP<br>
      <br>
      P.S.: jimpark, you're right, I forgot to mention that the ExecDos plugin does not work with Unicode.<br>
      I used a logfile created with the non Unicode ExecDos plugin which I converted to Unicode manually.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">knippenberg</span><br>
      <span class="post-time small text-muted">8th January 2009 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi JP,<br>
      <br>
      using your latest plugin version, it works without any other changes :) Thanks for your and jimpark's efforts :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
      <span class="post-time small text-muted">23rd March 2009 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi JP, I'm using your plugin, version 0.7.2, thank you.<br>
      <br>
      Normally it works just fine, but it seems to leave dirt on the stack when the current page isn't InstallFiles.<br>
      My installer has just one single custom page and no standard pages. I want to add to the log file but not to the details window, because there is no details window!<br>
      LogEx::Write false "text" should work, but the stack is dirty afterwards.<br>
      <br>
      Another issue that I'm having is that even after LogEx::Close the installer can't delete the logfile:<br>
      <br>
      Delete $logfile<br>
      <br>
      doesn't do anything (I verified that the $logfile holds the full path).</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">23rd March 2009 19:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi silo5,<br>
      <br>
      as I'm on vacation right now, I'm not able to look into your problem.<br>
      But I'll have a look at it as soon as I can.<br>
      <br>
      Regards,<br>
      JP</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
      <span class="post-time small text-muted">23rd March 2009 21:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Enjoy your vacation!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">26th March 2009 23:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi silo5,<br>
      <br>
      thanks, I did enjoy my vacation indeed.<br>
      <br>
      About your issues:<br>
      The first one is because of me being lazy: It only checks for a "true", and doesn't expect a "false".<br>
      In fact I expect that "false" is written to the logfile instead of "text"...<br>
      I will fix this in a new version, but for now you can use<br></p>
      <pre>
<code><br>LogEx::Write "text"<br></code>
</pre><br>
      instead.<br>
      As no "true" is found, it assumes it's false.<br>
      <br>
      When checking for your second issue, I found that the logfile is released as soon as Logex::Close is called.<br>
      (The logfile is locked indeed while the Logex plugin has it opened).<br>
      Also calling Delete $logfile afterwards removed the logfile from my system.<br>
      <br>
      Can you give me a script in which this issue happens, so that I can reproduce it?<br>
      <br>
      Regards JP
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
      <span class="post-time small text-muted">27th March 2009 08:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by jpderuiter</i><br>
        It only checks for a "true", and doesn't expect a "false"...<br>
        I will fix this in a new version
      </blockquote>When you do, check also that if "text" starts with a number it is taken to be "true" instead of being "text". I have this comment in my notes from a while ago, I did not check if you've already fixed this issue in the latest version.<br>

      <blockquote>
        When checking for your second issue, ... Can you give me a script in which this issue happens
      </blockquote>I'll try
    </div>
    <hr>
    
    
    

    <div class="container">
      

      <ol class="breadcrumb">
        <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

        <li><a href="f-65.html">NSIS Discussion</a></li>

        <li class="active">LogEx plugin</li>
      </ol>

      <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265680">LogEx plugin</a></p><br>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
        <span class="post-time small text-muted">27th March 2009 09:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">JP, sorry but I can't give you a script to reproduce this issue. I have chopped down my installer script to a bare minimum that I thought would reproduce but it doesn't.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">27th March 2009 18:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"></p>

        <blockquote>
          sorry but I can't give you a script to reproduce this issue. I have chopped down my installer script to a bare minimum that I thought would reproduce but it doesn't.
        </blockquote>Hmm, then I'm sorry as well, because I can't reproduce this either, and as far as I can see, there is nothing wrong with the plugin code .<br>
        <br>

        <blockquote>
          When you do, check also that if "text" starts with a number it is taken to be "true" instead of being "text". I have this comment in my notes from a while ago, I did not check if you've already fixed this issue in the latest version.
        </blockquote>Hmmm, I'm not able to reproduce this as well.<br>
        Maybe you can provide a script for this?<br>
        <br>
        By the way, what version of NSIS are you using, the normal or the Unicode version?<br>
        <br>
        JP
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
        <span class="post-time small text-muted">29th March 2009 08:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I'm using the standard version.<br>
        Possiby you've alaready fixed the number vs. true issue in a recent update, like I said, I had this issue marked in my notes from a previous version, then I upgraded the plugin.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">30th March 2009 10:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"></p>

        <blockquote>
          Possiby you've already fixed the number vs. true issue in a recent update, like I said
        </blockquote>Yes, you're right.<br>
        Appearently I fixed this when I made the Unicode version.<br>
        (Though I wasn't aware of this issue...)<br>
        I will upload a new version with the "only checks for a 'true' and doesn't expect a 'false'" issue fix later today.<br>
        <br>
        Regards,<br>
        JP
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">30th March 2009 21:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I uploaded a new version of the LogEx plugin, with the fix for "false" as a value for a boolean parameter.<br>
        <a href="http://nsis.sourceforge.net/LogEx_plug-in" target="_blank">http://nsis.sourceforge.net/LogEx_plug-in</a></p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
        <span class="post-time small text-muted">1st April 2009 08:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Thank you JP, tested here and it works fine.<br>
        I really appreciate your work.<br>
        FYI, to simplify my installer I rely on an undocumented behavior of your plugin. I call LogEx::Close even if the logfile hasn't been opened. Apparently this call is harmless and leaves the stack in good shape.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">1st April 2009 17:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi silo5,<br>
        <br>
        thanks for your feedback.<br>
        <br>
        What do you mean with an "undocumented behavior of your plugin"?<br>
        Do you use it to deal with the problem that you can't delete the log file after closing the plugin?<br>
        Using LogEx::Close without a previous LogEx::Init won't do anything, since the LogEx::Close function does not find a logfile handle, and thus skips the Close call.<br>
        <br>
        Please note that you need a LogEx::Close call after calling LogEx::Init, even if you didn't write anything to the logfile at all, because the Init function creates and opens the logfile.<br>
        <br>
        Regards,<br>
        JP</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
        <span class="post-time small text-muted">2nd April 2009 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"></p>

        <blockquote>
          <i>Originally posted by jpderuiter</i><br>
          What do you mean with an "undocumented behavior of your plugin"?
        </blockquote>That you had not explicitly said that is it OK to call LogEx::Close without a previous LogEx::Init. But now you have said it, so this behavior isn't undocumented anymore.<br>

        <blockquote>
          Do you use it to deal with the problem that you can't delete the log file after closing the plugin?
        </blockquote>No, I worked around that problem in my code.
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">2nd April 2009 18:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"></p>

        <blockquote>
          That you had not explicitly said that is it OK to call LogEx::Close without a previous LogEx::Init.
        </blockquote>Well, since it's good programming practice to check variables and stack before continuing a function, I don't think I should document this behaviour.<br>
        What to document when a function doesn't do anything at all anyway?<br>
        <br>
        And what purpose has this behaviour for you?<br>
        Why do you do this at all?
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">silo5</span><br>
        <span class="post-time small text-muted">3rd April 2009 13:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">It simplifies the code of my installer by keeping fewer state variables and writing less conditional code. I can't give a general example, because this simplification is specific to my installer code.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">3rd April 2009 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">OK, so I guess you only open a logfile when it's needed, but you don't want to check whether you opened the logfile before at the end of the script, so you always close the logfile.<br>
        <br>
        Well, you can do that indeed, as explained before.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">matthiasb</span><br>
        <span class="post-time small text-muted">25th August 2010 11:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I'm not entirely sure if it's a bug, wrong usage or caused by something different but calling LogEx::Write crashes the installer when using long strings.<br>
        Everything works as expected as long given string does not exceed 999 chars.<br>
        When trying to log a string with 1000 chars (1023 should be possible?) my application crashes.<br>
        <br>
        Can someone confirm this?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">25th August 2010 12:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi Matthias,<br>
        <br>
        this is a bug indeed.<br>
        I assigned a TCHAR size of 1000, thinking that would be enough...<br>
        I will fix the plugin as soon as possible, but since I'm on vacation, this will be half september...<br>
        <br>
        You can fix it yourself if you need it sooner, but then you'll have to recompile the plugin.<br>
        Change "TCHAR buf[1000];" to "TCHAR buf[NSIS_MAX_STRLEN];" in the Write function (line 146).<br>
        <br>
        Sorry for the inconvenience.<br>
        <br>
        jpderuiter</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">matthiasb</span><br>
        <span class="post-time small text-muted">25th August 2010 12:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Thanks for the fast response.<br>
        Since i have to log the stdout of an application untrimmed i'm going to use redirection instead for this one.<br>
        For everything else LogEx is fine as it is now.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">25th August 2010 15:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">@jpderuiter You should ideally be using the string_size plug-in function variable and not a compile time define (so people can use the 8192 string build without recompiling). You would also have to allocate the memory using GlobalAlloc.<br>
        <br>
        Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">25th August 2010 22:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Thanks, will do that.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">gringoloco023</span><br>
        <span class="post-time small text-muted">5th September 2010 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>using the string_size plug-in function variable ?</strong><br>
        Would this be the right-way of using the string_size plug-in function variable:<br></p>
        <pre>
<code>TCHAR</code><span style="color: #007700">*</span><span style="color: #0000BB">buf</span><span style="color: #007700">=</span><span style="color: #0000BB">GlobalAlloc</span><span style="color: #007700">(</span><span style="color: #0000BB">GPTR</span><span style="color: #007700">,</span><span style="color: #0000BB">string_size</span><span style="color: #007700">*</span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">TCHAR</span><span style="color: #007700">));
</span>
</pre>instead of:<br>
        <pre>
<code>TCHARbuf</code><span style="color: #007700">***91;</span><span style="color: #0000BB">NSIS_MAX_STRLEN</span><span style="color: #007700">***93;;
</span>
</pre>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2010 18:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Just missing the cast:<br></p>
        <pre>
<code>TCHAR* buf = (TCHAR*)GlobalAlloc(GPTR, string_size * sizeof(TCHAR));</code>
</pre><br>
        You could also use PTCHAR instead of TCHAR* which I always use nowadays. Note I also use TCHAR* buf as opposed to TCHAR *buf. Having the * next to the type as opposed to the variable name to me just makes more sense. Also don't forget GlobalFree.<br>
        <br>
        Stu
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">7th September 2010 20:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi all,<br>
        <br>
        unfortunately I'm getting a bunch of winntl.h compile errors.<br>
        This is the first time I see these errors, and I have no clue what's causing it.<br>
        Maybe something is wrong in the platform SDK, so maybe I'll have to reinstall everything.<br>
        <br>
        But I do not have the spare time to do that...<br>
        Maybe somebody else can recompile it?<br>
        All that need to be changed is mentioned in the previous posts.<br>
        <br>
        Thanks in advance.<br>
        <br>
        jpderuiter</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">7th September 2010 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">What are the errors?<br>
        <br>
        When I'm building there are a couple of things:<br>
        1. Linker -&gt; Input -&gt; Ignore All Default Libraries<br>
        Set to Yes. Removes linkage to CRT (but does not remove dependency; see 2).<br>
        2. Linker -&gt; Manifest File -&gt; Generate Manifest<br>
        Set to Disabled otherwise your DLL will have a run time error if the required Microsoft Visual C Run Time library isn't installed (even though you're not using it).<br>
        3. C/C++ -&gt; Code Generation -&gt; Buffer Security Check<br>
        Set to No if you get "unresolved external symbol __security_cookie" link errors.<br>
        4. C/C++ -&gt; Optimization -&gt; Optimization<br>
        Set to Disabled if you get "unresolved external symbol _memset" link errors.<br>
        <br>
        Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">7th September 2010 20:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I'm building on VC6, so not all settings are available.<br>
        Changing the ones I can doesn't fix it.<br>
        This is part of the errorlog:</p>

        <blockquote>
          NOTE: WINVER has been defined as 0x0500 or greater which enables<br>
          Windows NT 5.0 and Windows 98 features. When these headers were released,<br>
          Windows NT 5.0 beta 1 and Windows 98 beta 2.1 were the current versions.<br>
          For this release when WINVER is defined as 0x0500 or greater, you can only<br>
          build beta or test applications. To build a retail application,<br>
          set WINVER to 0x0400 or visit <a href="http://www.microsoft.com/msdn/sdk" target="_blank">http://www.microsoft.com/msdn/sdk</a><br>
          to see if retail Windows NT 5.0 or Windows 98 headers are available.<br>
          See the SDK release notes for more information.<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1050) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1051) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1052) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1061) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1062) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1063) : error C2081: 'LONG_PTR' : name in formal parameter list illegal<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1217) : error C2146: syntax error : missing ')' before identifier 'UINT'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1217) : error C2491: 'IsValidCodePage' : definition of dllimport function not allowed<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1217) : error C2059: syntax error : ')'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1217) : error C2085: 'CodePage' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1222) : error C2085: 'GetACP' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1227) : error C2085: 'GetOEMCP' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1233) : error C2146: syntax error : missing ')' before identifier 'UINT'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1233) : error C2085: 'GetCPInfo' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1233) : error C2146: syntax error : missing ',' before identifier 'UINT'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1233) : error C2146: syntax error : missing ',' before identifier 'CodePage'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1234) : error C2085: '__out' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1234) : error C2146: syntax error : missing ',' before identifier 'LPCPINFO'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1234) : error C2146: syntax error : missing ',' before identifier 'lpCPInfo'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1234) : error C2059: syntax error : ')'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1240) : error C2146: syntax error : missing ')' before identifier 'UINT'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1240) : error C2085: 'GetCPInfoExA' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1240) : error C2146: syntax error : missing ',' before identifier 'UINT'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1240) : error C2146: syntax error : missing ',' before identifier 'CodePage'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1241) : warning C4042: '__in' : has bad storage class<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1241) : error C2146: syntax error : missing ',' before identifier 'DWORD'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1241) : error C2146: syntax error : missing ',' before identifier 'dwFlags'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1242) : error C2085: '__out' : not in formal parameter list<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1242) : error C2146: syntax error : missing ',' before identifier 'LPCPINFOEXA'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1242) : error C2146: syntax error : missing ',' before identifier 'lpCPInfoEx'<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1242) : error C2059: syntax error : ')'<br>
          ...<br>
          C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include\winnls.h(1312) : fatal error C1003: error count exceeds 100; stopping compilation
        </blockquote>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">7th September 2010 20:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Maybe the file is damaged? You could try reinstalling or upgrading.<br>
        <br>
        Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">steinbohrer</span><br>
        <span class="post-time small text-muted">8th February 2011 00:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>NULL-char at the end of each line</strong><br>
        Hi jpderuiter,<br>
        <br>
        I've just tried your LogEx-plugin and there is one minor flaw.<br>
        I use your Unicode version and there is an NULL-char at the end of each line in the log-file.<br>
        <br></p>
        <pre>
<code><br>LogEx::Init false "$EXEDIR\InstallLog.txt"<br>LogEx::Write true true "&lt;&gt; Dies ist ein äöüÄÖÜß LogEintrag!"<br>LogEx::Close<br></code>
</pre><br>
        <br>
        Please have a look at the picture:<br>
        <a href="http://www.procolab.at/LogEx.jpg" target="_blank">http://www.procolab.at/LogEx.jpg</a><br>
        <br>
        If I'm correct, the plugin is written in C and C uses ASCIIZ-strings.<br>
        Do you strip the end-marker off the string before you copy it to the log-file?<br>
        <br>
        Is there any chance you can fix this in the near future? :)<br>
        <br>
        Thank you very much,<br>
        Michael.
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">8th February 2011 18:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Fortunately I suddenly saw the light, and found that I had to put the SDK include Library at the top of the list of include directories in vs6.0.<br>
        <br>
        Anyway, I compiled a new version of this plugin, check the wiki:<br>
        <a href="http://nsis.sourceforge.net/LogEx_plug-in" target="_blank">http://nsis.sourceforge.net/LogEx_plug-in</a><br>
        <br>
        I fixed both bugs, the one from matthiasb (mentioned 25th august 2010) and the one from steinbohrer.<br>
        I don't have time to test it thoroughly, so if you find any problems, please tell me.<br>
        <br>
        jpderuiter</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">hnedka</span><br>
        <span class="post-time small text-muted">1st June 2011 03:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi, I have probably discovered a bug. In function Log::Write, you don't remove the parameter from the stack if the file handle is not correct, which leads to stack corruption. May be present in other places, haven't checked.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">20th June 2011 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi hnedka,<br>
        <br>
        thanks for pointing that out.<br>
        I fixed it, and uploaded v0.9.1 to the wiki page.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">SJSJ</span><br>
        <span class="post-time small text-muted">18th August 2011 06:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>Timestamps in Logs?</strong><br>
        Hi, a very useful plugin!<br>
        Is there a way to embed the timestamps when I do a LogEx::Write?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">18th August 2011 09:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi,<br>
        <br>
        not via the LogEx plugin, but you can get the current time with the Time plugin (<a href="http://nsis.sourceforge.net/Time_plug-in" target="_blank">http://nsis.sourceforge.net/Time_plug-in</a>), or using the system plugin (<a href="http://stackoverflow.com/questions/2407509/writing-current-date-time-as-file-name-using-nsis" target="_blank">http://stackoverflow.com/questions/2...ame-using-nsis</a>).</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">absalom0</span><br>
        <span class="post-time small text-muted">20th September 2011 18:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I am currently doing development to test out support for Windows 8 (Windows Developer Preview). Is there any chance that LogEx will be updated to support Windows 8 (Windows version 6.2.8102) anytime soon? :)<br>
        <br>
        Thanks</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">21st September 2011 07:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I'm not sure what you mean.<br>
        Is the LogEx plugin not working on Windows 8?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">absalom0</span><br>
        <span class="post-time small text-muted">21st September 2011 17:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Yeah, I had plugins and forums confused. You're good. I am apparently looking at the wrong place. &gt;&lt;<br>
        <br>
        Thanks though.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">JoeSnuffie</span><br>
        <span class="post-time small text-muted">6th July 2012 16:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>Prepend?</strong><br>
        I'm using NSIS as a software updater for my company's applications. I am currently using an application called at the end of the NSIS application to create a log file but I would like to include this process in the NSIS application. To do this I need to be able to prepend my strings rather than append them. This will keep the latest update information at the top of the file. Can this be done?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
        <span class="post-time small text-muted">11th July 2012 22:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Hi Joe,<br>
        <br>
        no, you cannot prepend text to an existing logfile.<br>
        What you can do is create a new logfile when the installer starts, and when finished append the previous created logfile.<br>
        <br>
        jpderuiter</p>
      </div>
      <hr>

      <div class="footer">
        <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
      </div>
    </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script> <script type="text/javascript">
//<![CDATA[
    hljs.initHighlightingOnLoad();
    //]]></script></div></body></html>