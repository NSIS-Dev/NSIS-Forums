<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="system and system32" />

  <title>system and system32 - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">system and system32</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136938">system and system32</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DVDK</span><br />
      <span class="post-time small text-muted">28th May 2003 21:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>system and system32</strong><br />
      I want to copy some files to the system folder and system32 folder on a WinXP system with a modern NSIS.<br />
      <br />
      Something.dll should be installed in system32 folder.<br />
      Somethingelse.dll should be installed in system folder.<br />
      <br />
      I therefore write:<br />
      <br />
      SetOutPath "$SYSDIR\"<br />
      File "Something.dll"<br />
      SetOutPath "?" :igor:<br />
      File "Somethingelse.dll"<br />
      <br />
      ...But which path can I use for the system folder? (Somethingelse.dll)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">28th May 2003 21:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How about:<br />
      <br />
      SetOutPath "$WINDIR\system"<br />
      File "Something.dll"<br />
      SetOutPath "$WINDIR\system32"<br />
      File "Somethingelse.dll"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th May 2003 10:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think it'll be a better idea to keep $SYSDIR and not use $WINDIR\System32 to make sure you get the right value. As for getting C:\Windows\System without assuming the directory name, I am sorry but I have no idea.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nilpo</span><br />
      <span class="post-time small text-muted">30th May 2003 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>XP System folders</strong><br />
      On a windows XP system the system folder is defined in the registry<br />
      <br />
      (HKLM\Software\Windows\CurrentVersion\)<br />
      <br />
      The default value for Windows XP is System32. $SYSDIR will return the value of this regisrty entry at the time of execution.<br />
      <br />
      So I would use:<br />
      <br />
      $SYSDIR for System32, and<br />
      $WINDIR\System for the System folder<br />
      <br />
      In the event that the system32 folder was changed to a different value the installer would still install to the Windows system directory. (So it could be possible to return the same value for both, however, this would insure that the installed program would function no matter how the user's system was set up.)<br />
      <br />
      P.S. Using this set-up would also help make your installer cross-platform compliant if that is an issue.<br />
      <br />
      For questions or comments about this post, please contact me.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
