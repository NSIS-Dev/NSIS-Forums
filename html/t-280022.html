<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Conditional Section" />

  <title>Conditional Section - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Conditional Section</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=280022">Conditional Section</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">graham.reeds</span><br />
      <span class="post-time small text-muted">26th October 2007 10:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Conditional Section</strong><br />
      I need to have a section where it detects whether an older version of our application has been installed and if so present the user an additional options page, but only present that page if the an older version has been detected.<br />
      <br />
      Now I've managed to do the detection via simple looking for where the old registry settings would be kept (we've been bought so the registry settings, program locations, etc. are moving to be inline with the parent firm) but need to a) perform the detection somewhere, and b) only appear if the detection is true.<br />
      <br />
      If it helps I am using HM NIS Edit and select ModernUI 2.<br />
      <br />
      I did a search for Conditional Pages and came up with 3 results none of which helped me out. I am fairly sure I saw something in the online manual when I was checking into NSIS about it but can't find it now.<br />
      <br />
      Thanks, G.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th October 2007 10:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's pretty easy.<br /></p>
      <pre>
<code><br />!include LogicLib.nsh<br />Page Custom OldVersionPage OldVersionPageLeave<br /><br />Function OldVersionPage<br />  ${If} [some condition]<br />    Abort ; Skip the page.<br />  ${EndIf}<br />FunctionEnd<br /></code>
</pre><br />
      <br />
      Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">graham.reeds</span><br />
      <span class="post-time small text-muted">26th October 2007 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Checking the error flag</strong><br />
      Thanks.<br />
      <br />
      I have one other question. I am writing a registry value so that if the installer has already ported across the original settings it won't do it again.<br />
      <br />
      So I look at ReadRegDword for checking if the setting has been there. According to the documentation "The error flag will be set and $x will be set to an empty string ("" which is 0) if the DWORD is not present."<br />
      <br />
      It seems to me that it would be better check the error flag than simply checking to see whether the string is empty. Searching the manual two error results: !error and exit error levels, nothing about the error flag. How do you check the error flag?<br />
      <br />
      Thanks, Graham Reeds</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">graham.reeds</span><br />
      <span class="post-time small text-muted">26th October 2007 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Stop the press - found the answer in an older thread.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">graham.reeds</span><br />
      <span class="post-time small text-muted">26th October 2007 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Stop the press - found the answer in an older thread.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
