<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="PAssDialog + Number.txt" />

  <title>PAssDialog + Number.txt - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">PAssDialog + Number.txt</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=275503">PAssDialog + Number.txt</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kallan06</span><br />
      <span class="post-time small text-muted">7th August 2007 09:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>PAssDialog + Number.txt</strong><br />
      &nbsp; Hi all ! Please i need help :(<br />
      <br />
      It's possible with passDialog to verify serial number with table, .txt or other...<br />
      <br />
      I explain my problem :<br />
      I've an .txt file with 1000 serials,<br /></p>
      <pre>
<code>Number</code>.txt
<br />1111-1111-1111-1111-1111
<br />2222-2222-2222-2222-2222
<br />3333-3333-3333-3333-3333
<br />&gt;...... 
</pre>Is it possible to integrate these 1000 serials in nsis script?<br />
      Is it possible with passDialog to compare the serial entered with 1000 serials list? If yes, how ?<br />
      <br />
      <br />
      Please help me :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th August 2007 15:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">PassDialog doesn't do the comparing, you have to do it in your NSIS code.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ClayDowling</span><br />
      <span class="post-time small text-muted">7th August 2007 23:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">kallan06,<br />
      <br />
      Use the file functions to read the data from the file. That will work very well.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">8th August 2007 02:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What is going to stop a user from just looking at the text file in $plugins dir(I assume you would put it there) ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ClayDowling</span><br />
      <span class="post-time small text-muted">8th August 2007 02:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I would assume that there is nothing to prevent them from doing that. Since decompiling an NSIS script isn't a major challenge either, I would expect cracks of this app to be circulating fairly quickly. It's possible though that it's considered a low-value target.<br />
      <br />
      There is a registration component which I wrote that might be a happier solution. You can find it in the plugins section. I won't claim that it's rock-solid though, just better than a list of valid serials in a text file.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kallan06</span><br />
      <span class="post-time small text-muted">8th August 2007 15:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">that works perfectly if is in MUI<br />
      <br /></p>
      <pre>
<code>
Name    "Serial"
<br />&gt;OutFile "Serial.exe"
<br /><br />&gt;## Include headers
<br />&gt;!include MUI.nsh
<br />&gt;!include LogicLib.nsh
<br />&gt;## Pages
<br />&gt;!insertmacro MUI_PAGE_WELCOME
<br /> Page custom SerialPageShow SerialPageLeave
<br />&gt;;!define MUI_PAGE_CUSTOMFUNCTION_SHOW ComponentsPageShow
<br />&gt;!insertmacro MUI_PAGE_COMPONENTS
<br />&gt;!insertmacro MUI_PAGE_INSTFILES
<br /><br />&gt;## Languages
<br />&gt;!insertmacro MUI_LANGUAGE English
<br /><br />&gt;## Displays the serial dialog
<br />&gt;Function SerialPageShow
<br /><br />&gt;!insertmacro MUI_HEADER_TEXT "Enter Serial Code" "Enter the software serial code to continue."
<br /><br />&gt;PassDialog:: Dialog Serial            
<br />                   /HEADINGTEXT 'Please enter the serial code located on the software CD case...' 
<br />                   /CENTER             
<br />                   /BOXDASH 12  70 4 '' 
<br />                   /BOXDASH 92  70 4 ''  
<br />                   /BOXDASH 172 70 4 ''   
<br />                   /BOXDASH 252 70 4 ''    
<br />                   /BOX     332 70 4 ''
<br /><br /> Pop $R0 # success, back, cancel or error
<br /><br />&gt;FunctionEnd
<br /><br />&gt;## Validate serial numbers
<br />&gt;Function SerialPageLeave
<br /><br /> ## Pop values from stack
<br /> Pop $R0
<br /> Pop $R1
<br /> Pop $R2
<br /> Pop $R3
<br /> Pop $R4
<br /><br /><br /> ## A bit of validation
<br /><br />&gt;;StrCpy '$5' '$R0-$R1-$R2-$R3-$R4'
<br />&gt;StrCpy '$5' '$R0-$R1-$R2-$R3-$R4$\r$\n'
<br />&gt;StrCpy $6 0
<br /><br />Loop:
<br />&gt;IntOp $6 $6 + 1
<br />StrCmp$6 500 Bad ;1 more than the # serials in file
<br />&gt;Push $6 ;line number to read from 
<br />File/oname=$PLUGINSDIRserial.txt "Numbers.txt"
<br />&gt;Push "$PLUGINSDIR\serial.txt" ;text file to read 
<br />Call ReadFileLine 
<br />Pop$0 ;output string (read from file.txt) 
<br />&gt;StrCmp $0 $5 Good
<br />Goto Loop
<br /><br />Bad:
<br />&gt;MessageBox MB_OK|MB_ICONEXCLAMATION "The entered username or password is incorrect!"
<br />&gt;Delete "$PLUGINSDIR\serial.txt"
<br />&gt;Abort
<br /><br />Good:
<br />&gt;Delete "$PLUGINSDIR\serial.txt"
<br />&gt;FunctionEnd
<br /><br />&gt;Function ReadFileLine
<br />Exch$0 ;file
<br />Exch
<br />Exch$1 ;line number
<br />Push$2
<br />Push$3
<br /><br />  FileOpen$2 $0 r
<br /> StrCpy$3 0
<br />Loop:
<br />&gt;IntOp $3 $3 + 1
<br />  ClearErrors
<br />  FileRead$2 $0
<br />  IfErrors+2
<br /> StrCmp$3 $1 0 loop
<br />  FileClose$2
<br /><br />Pop$3
<br />Pop$2
<br />Pop$1
<br />Exch$0
<br /><br />FunctionEnd
<br /><br />&gt;## Just a dummy section
<br />&gt;Section 'A section'
<br />&gt;SectionEnd 
<br />&gt;
</code>
</pre><br />
      You have and idea why "SerialPageLeave" don't display with XPUI mode
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anandharaja</span><br />
      <span class="post-time small text-muted">7th March 2009 02:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">iam searching a script like this thanks. hai friend i want a script like this for <b>UltraModernUI</b> Serial number page. please give script.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Manchut</span><br />
      <span class="post-time small text-muted">14th February 2013 06:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I look this script and somebody know how must look files: serial.txt and numbers.txt? Thanks for help</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
