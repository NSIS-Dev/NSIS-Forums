<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Executing code if a Section has not been selected" />

  <title>Executing code if a Section has not been selected - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Executing code if a Section has not been selected</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=109139">Executing code if a Section has not been selected</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DebtAngel</span><br />
      <span class="post-time small text-muted">9th October 2002 21:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Executing code if a Section has not been selected</strong><br />
      I'm using NSIS 1.98.<br />
      <br />
      What I want to do is display a message box if the user tries to install without selecting one of my optional sections.<br />
      <br />
      The section is actually only semi-optional, as without it the program will throw the occasional error. But it's humongous, so I want to give the user the option of not installing it. If they decide not to include it, I want to add a message saying (basically) "Are you sure this is a good idea?" before allowing the user to pass the section selection screen.<br />
      <br />
      How would I go about doing this? Sample source code would be lovely, as I have not played with the callback functions of NSIS at all, and I have a feeling they're going to be involved.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th October 2002 21:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You will need to use SectionGetFlags as in this example:<br />
      <a href="http://www.clantpa.co.uk/nsis/wiki/index.php/ControllingAvailableInstallationOptions" target="_blank">http://www.clantpa.co.uk/nsis/wiki/i...llationOptions</a><br />
      <br />
      You were right, you will need a callback for doing this. There are two callbacks that might fit, .onNextPage and .onSelChange. In .onNextPage you will have to count the number of pages past, and if you get to the page after the component page you will check for that section and let the user choose, use Abort to prevent from going to the next page if the user said he wants to change his selection. If you check it in .onSelChange the user will get the message right after he disselected that section. You will have to "remember" if you already used the message box so it won't show up even if the user changed another section and not that section.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
