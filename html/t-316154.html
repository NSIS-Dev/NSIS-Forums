<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Jumping to a conditional page"><title>Jumping to a conditional page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Jumping to a conditional page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316154">Jumping to a conditional page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">11th January 2010 11:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Jumping to a conditional page</strong><br>From my first page's SHOW function I jump six pages forward, into a custom nsDialogs page. This custom page is a conditional one. Like this:</p><pre>
<code>Function MyCustomPage<br>  ${If} $MyVar == "ShowThePage"<br>    nsDialogs::Create 1018<br>    Pop $2<br>    nsDialogs::Show<br>  ${EndIf}<br>FunctionEnd</code>
</pre><br>
      In the case that the page is NOT shown, the installer crashes. How can I jump into this conditional page properly?<br>
      <br>
      <br>
      <br>
      (Note: Adding an ${Else} statement with a 'skip to next page' command is not a solution, because in that case you can't go Back from the following page.)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br>
      <span class="post-time small text-muted">11th January 2010 11:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe this helps?<br>
      <a href="http://nsis.sourceforge.net/Go_to_a_NSIS_page" target="_blank">http://nsis.sourceforge.net/Go_to_a_NSIS_page</a><br>
      <br>
      I'm not sure if this will help you with the Back button.<br>
      Maybe you have to make your own Back button code.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">11th January 2010 11:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Like I said I'm jumping six pages ahead, so obviously I'm already using that code... :rolleyes: The problem lies in jumping forward into a <b>conditional</b> page.<br>
      <br>
      <br>
      (Edit: Since the page after all this is another nsDialogs page, I can use nsDialogs::OnBack to solve my problem. But IIRC there's no OnBack callback for default pages, is there?)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">11th January 2010 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think I've got it working... My solution: Using the ${Else} GotoNextPage clause, but only if the previously visited page was <i>before</i> MyCustomPage.<br>
      <br></p>
      <pre>
<code>!define PAGE_NUMBER_MyCustomPage 7<br>Function MyCustomPage<br>  ${If} $MyVar == "ShowThePage"<br>    nsDialogs::Create 1018<br>    Pop $2<br>    StrCpy $PREVIOUSPAGE ${PAGE_NUMBER_MyCustomPage}<br>    nsDialogs::Show<br>  ${ElseIf} $PREVIOUSPAGE &lt; ${PAGE_NUMBER_MyCustomPage}<br>      StrCpy $PREVIOUSPAGE ${PAGE_NUMBER_MyCustomPage}<br>      SendMessage $HWNDPARENT "0x408" "1" ""<br>  ${EndIf}<br>FunctionEnd</code>
</pre><br>
      <br>
      And then of course updating $PREVIOUSPAGE in every page, just before I leave it.<br>
      <br>
      <br>
      After the installer jumps forward six pages, the ${ElseIf} statement will force it to go forward one more. (Of course the next page should always be shown. If it's another conditional page, I guess you'd need to make it jump forward yet again in the ${Else} case.) This way, the installer will always reach a real page that it can actually draw, preventing it from crashing.<br>
      <br>
      Naturally if the user clicks the Back button the ${ElseIf} statement will not be true, and there will again not be any page to draw. But this is no problem because the installer will then just go back yet another page. The crash only occurs when <i>manually</i> jumping pages using SendMessage.
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>