<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Folder Creation" />

  <title>Folder Creation - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Folder Creation</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314361">Folder Creation</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">IB53</span><br />
      <span class="post-time small text-muted">4th November 2009 06:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Folder Creation</strong><br />
      I just installed NSIS and I'm trying to come to grips with things, I've read a lot of the documentation but there are still many things which are confusing me.<br />
      So my first question is regarding creating a folder. If I create a folder under (say) Userdata, and it already exists (for example the user runs the install twice or they have a folder of that name already), what happens? Does the install error out, does the user get a question or what?<br />
      What's the best way to prevent this happening, for example, should I be somehow testing for it's existence and taking appropriate action?<br />
      Any examples would be more than welcome! :)<br />
      <br />
      many thanks,, and,, "Hello!" nice to meet you all.<br />
      <br />
      Ian</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">4th November 2009 07:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Folder Creation</strong><br /></p>

      <blockquote>
        If I create a folder under (say) Userdata, and it already exists (for example the user runs the install twice or they have a folder of that name already), what happens? Does the install error out, does the user get a question or what?
      </blockquote>Answer 1) <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.9" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.9</a> or <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.3.3" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.3.3</a><br />
      Answer 2) Why don't you just try it, and see what happens? That would be a lot faster than posting in the forums...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">IB53</span><br />
      <span class="post-time small text-muted">5th November 2009 03:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you for your reply.<br />
      <br />
      To answer your question - because no matter what the answer to "what happens if" I would not have known what to do about it so i would still have had to post a question to answer that.<br />
      <br />
      Even after having looked again at the page you reference I'm still unsure of the answer, as I said, I have read the documentation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CG!</span><br />
      <span class="post-time small text-muted">5th November 2009 04:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i'm new to NSiS too and that's what i figured out from learning by doing:<br />
      if your install trys to create a folder that already exists, nothing happens. No error message, nothing. So if you install into a sensitive folder, check if it already exists first or use user confirmations when a file as to be replaced.<br />
      if you try to delete a folder that has still files in it, nothing will be deleted and no error comes up.<br />
      if you got a folder tree like this:<br />
      Root<br />
      -- Files<br />
      -- Subfolder #1<br />
      ---- Subfolder #2<br />
      ------ Files<br />
      then you'll gave to create Subfolder #1 first. i know, that's basic knowledge but easy to forget because NSiS does not create Subfolder in not existing folder. With other words: nothing will be done and no error comes up. Same count's for deleting folder. You can't just RMDir the root if there are still files or subfolders in it.<br />
      DOS style i say ... a least it what it looks like to me. ^^<br />
      <br />
      Hope i could help a bit or more.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">5th November 2009 08:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by CG!</i><br />
        <b>NSiS does not create Subfolder in not existing folder.</b>
      </blockquote>This is not true. Read the documentation.<br />
      <br />
      IB53: What you would have to do to 'try it out yourself', is something like this:<br />
      <br />
      ClearErrors<br />
      CreateDirectory "C:\YourPath\YourExistingSubDir"<br />
      ${If} ${Errors}<br />
      MessageBox MB_OK "Error!"<br />
      ${Else}<br />
      MessageBox MB_OK "No error."<br />
      ${EndIf}<br />
      <br />
      That way, you'll know whether or not NSIS raises the error flag in this situation. You will also see whether or not the user is shown an error/question in this situation. (Spoiler: The user won't see a thing, and no error flag is set.)<br />
      <br />
      Once you know the above two pieces of information, you'll also know that you don't have to do anything to 'prevent it', because nothing goes wrong in the first place.<br />
      <br />
      As you can see, it would've been much quicker to just test this thing out and see what happens.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CG!</span><br />
      <span class="post-time small text-muted">5th November 2009 09:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Creating subfolders in not axisting folders doesn't work for me and it's what i discovered by doing instead of reading.<br />
      i'm still new to NSiS, so there's alot to learn left.<br />
      <br /></p>

      <blockquote>
        <i>Originally posted by MSG</i><br />
        <pre>
<code>ClearErrors<br />CreateDirectory "C:\YourPath\YourExistingSubDir"<br />${If} ${Errors}<br />  MessageBox MB_OK "Error!"<br />${Else}<br />  MessageBox MB_OK "No error."<br />${EndIf}</code>
</pre>
      </blockquote>This wasn't the question ... i think.<br />
      As far as i understood, he wanted to know if NSiS displays error messages on itself.<br />
      So my answer was "No" for the mentioned cases.<br />
      That it's possible to catch a possible error is common knowledge and a must have.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
