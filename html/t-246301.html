<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="I just want to create a installer for firefox plugin - need help"><title>I just want to create a installer for firefox plugin - need help - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">I just want to create a installer for firefox plugin - need help</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=246301">I just want to create a installer for firefox plugin - need help</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Inspirator</span><br><span class="post-time small text-muted">16th May 2006 17:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>I just want to create a installer for firefox plugin - need help</strong><br>Hi I searched for a good programm to get my issue done. Hopefully it is nsis I know for quite a long time but was never to deep into it.<br><br>If there is someone here helping me out it would make be very happy.<br><br>I just want an installer for install a firefox plugin.<br>For that I have 3 files. A html file, update file and .xpi file. Of course normally user just have to load the html file where they have to click a link to perform an install of the plugin. But there are reason that make other ways needed much. Such as sending customers a plugin to install that do not know how to cope with archive like .zip and so on. Besides an installer is able to give more informations and details.<br><br>I realized that in many install maker programs a .exe file is needed that one has to perform and to include in the installer file. In my case there is no need for that.<br><br>I just will need to install 3 files and to provide a link (message screen with some information) that will open up firefox. That's it.<br><br>How is it possible. I guess it is not much to do - but I couldn't find out how to put in the right way.<br><br>Please help!<br><br>Thanks a lot.<br><br>Regards<br>Inspirator</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">16th May 2006 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">step1:<br>check if firefox is installed on target machine and get its version to verify if your plugin is compatible with the installed version<br><br>step2:<br>extract your files into $PLUGINSDIR and show a welcome page with all needed info and user interaction<br><br>step3:<br>execwait firefox and load your html file where must exists a link to .xpi, and a prompt to install the plugin.<br><br>that's all, when your installer is finished all files from $PLUGINSDIR removed</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Inspirator</span><br><span class="post-time small text-muted">17th May 2006 04:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>understand but can not solve</strong><br>Thanks a lot for this step-by-step solution.<br>I can understand but can't realize that.<br><br>I checked viewhtml.nsi in Example directory of NSIS.<br>I look to me like a good template for it but of couse for the wrong browser. I tried to use venis IX to help me.<br><br>step1<br>is the check just the way to take the standard firefox installation folder? My firefox extention will be compatible with I guess almost all firefox versions?<br>Probably I want not need it. But not sure if this check is basis for other following operations.<br><br>step2<br>extracting to which pluginsdir, that from firefox oder from windows??? So this is the same operation as saying where to copy the files ?!? A welcome page means a custom message or ? So one also can implement a lisense text or better have a check box to be check to accept lisense in order to go on and call the html file.<br><br>step3<br>is is the same as calling a .exe file? I mean I relaized a lot of function that probably have to do with calling a file. But don't know how to do that exactly.<br><br>I am very bloddy beginner and just know the helper programms to NSIS but not to deep. So will need further help on that.<br>The News Script Wizard on Venis IX ist okay ?? or. But I guess it will not ask me all I need to set up.<br><br>Regards<br>Inspirator</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">17th May 2006 05:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">hmm, seems to me that you should get your self a bit deeper into nsis. play a little with included examples to understand the basics.<br>step1 is usually the .onInit function before the nsis gui comes up.<br>check if firefox is installed means that obviously you don't want to offer an installation for a system without firefox, instead a messagebox must pop up i.e. "firefox not found" and exit installer.<br>version compatibility is something you have to test and know, obviously you don't want to cause stability issues on target.<br>$PLUGINSDIR is temporary and is used by nsis, see manual.<br><br>so the procedure should be like this:<br>set up the pages you want to show, directory page not needed.<br>in .onInit function grab the required info from registry, and extract your files to $PLUGINSDIR.<br>now let the gui comes up, show the license etc.<br>next use the collected info to launch firefox with parameter your html file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">17th May 2006 08:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">To install a .xpi based plugin one does not need NSIS, just drag and drop the .xpi on a firefox browser Window, firefox then alsready asks to install the plugin.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">BioDuo</span><br><span class="post-time small text-muted">17th May 2006 08:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Actually I once wrote a similar script for that<br><br></p><pre>
<code>ReadRegStr $0 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe" ""<br>StrCmp $0 "" NoFireFox 0<br><br>WriteRegStr HKEY_CLASSES_ROOT ".xpi" "" "BioDuo"<br>WriteRegStr HKEY_CLASSES_ROOT "BioDuo\shell\open\command" "" '"$0" "%1"'<br><br>CreateDirectory "$TEMP\BioDuo"<br><br>SetOutPath "$TEMP\BioDuo\"<br>File flashgot-0.5.9.995-fx+fl+mz+ns+zm+tb.xpi<br><br>ExecShell open "$TEMP\BioDuo\flashgot-0.5.9.995-fx+fl+mz+ns+zm+tb.xpi"<br><br>DeleteRegKey HKEY_CLASSES_ROOT ".xpi"<br>DeleteRegKey HKEY_CLASSES_ROOT "BioDuo"<br>Goto End<br><br>NoFireFox:<br>MessageBox MB_OK|MB_ICONSTOP "FireFox wasn't found on your system, installation failed"<br>End:</code>
</pre><br>
      <br>
      flashgot-0.5.9.995-fx+fl+mz+ns+zm+tb.xpi is the plug-in ;)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">17th May 2006 09:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">problem is that mozilla. extensions files aren't associated with firefox. so, your script adds this capability, but xpi also work for other programs but firefox, so people might not like this. you can install them using this commandline<br>
      <br>
      nsExec::Exec '"path/to/firefox.exe" -install-global-extension "path/to/extension.xpi"'<br>
      <br>
      this brings up the problem, that the extension will be installed for all user-profiles. don't know if there's a workaround.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">onad</span><br>
      <span class="post-time small text-muted">17th May 2006 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yathosho mentioned:<br>
      <br>
      &gt; this brings up the problem, that the extension<br>
      &gt; will be installed for all user-profiles.<br>
      &gt; don't know if there's a workaround.<br>
      <br>
      see: <a href="http://kb.mozillazine.org/Installing_extensions" target="_blank">http://kb.mozillazine.org/Installing_extensions</a><br>
      <br>
      thus,<br>
      <br>
      nsExec::Exec '"path/to/firefox.exe" "path/to/extension.xpi"'<br>
      <br>
      should be good.<br>
      <br>
      IMHO, to install .XPI via NSIS is NOT such a good idea (Now I cannoy use ones extention om my Linux and not on my Apple OSX.<br>
      <br>
      Just @#%$#% drop the XPI on you Firefox browser window!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Inspirator</span><br>
      <span class="post-time small text-muted">17th May 2006 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>okay I will try to get it together</strong><br>
      Thank you all very much for your quick response and comments. It seems different way will lead to aim. After all it seem to be not to be to easy to get it done.<br>
      <br>
      So the easiest is perhaps the one Red Wine discribed?!?<br>
      I am not sure.<br>
      <br>
      I try to sum up:<br>
      <br>
      1. I have the html file I want to show, where the user just<br>
      has to click a link and the plugin will be installed<br>
      &gt; this causes no problem ;)<br>
      <br>
      2. Checking Registry seems to be the way BioDuo solved his<br>
      issue<br>
      ReadRegStr $0 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe" ""<br>
      StrCmp $0 "" NoFireFox 0<br>
      <br>
      NoFireFox:<br>
      MessageBox MB_OK|MB_ICONSTOP "FireFox wasn't found on your system, installation failed"<br>
      End:<br>
      <br>
      I guess this is for get to know if Firefox is installed or not and if not a message should pop up saying no firefox installed on system.<br>
      <br>
      My question : is the path to firefox standard?<br>
      How does the version extraction works exactly.<br>
      I have just one examples for IE and Windows version check.<br>
      <br>
      3. copy the files to $PLUGINSDIR I understand, also that this has to be initiated first<br>
      <br>
      4. License text will be displayed and if checkbox is selected it should start firefox calling html.<br>
      <br>
      I tried to collect all into one file now. But I guess it is still far away from working :igor:<br>
      <br>
      ; Script generated with the Venis Install Wizard<br>
      <br>
      ; Define your application name<br>
      !define APPNAME "WM Begleiter - Firefox - Free"<br>
      !define APPNAMEANDVERSION "WM Begleiter - Firefox - Free 1.1."<br>
      <br>
      <br>
      ; is this need for my case ???<br>
      ; Main Install settings<br>
      Name "${APPNAMEANDVERSION}"<br>
      InstallDir "$PLUGINSDIR\WM Begleiter"<br>
      OutFile "wm_begleiter_firefox_free.exe"<br>
      <br>
      ; Modern interface settings<br>
      !include "MUI.nsh"<br>
      <br>
      !define MUI_ABORTWARNING<br>
      <br>
      !insertmacro MUI_PAGE_WELCOME<br>
      !insertmacro MUI_PAGE_LICENSE "license.txt"<br>
      !insertmacro MUI_PAGE_INSTFILES<br>
      !insertmacro MUI_PAGE_FINISH<br>
      <br>
      ; Set languages (first is default language)<br>
      !insertmacro MUI_LANGUAGE "English"<br>
      !insertmacro MUI_LANGUAGE "German"<br>
      !insertmacro MUI_RESERVEFILE_LANGDLL<br>
      <br>
      Section "WM Begleiter - Firefox - Free" Section1<br>
      <br>
      nsExec::Exec '"$1/firefox.exe" "$PLUGINSDIR/file1.html"'<br>
      ; or do I need such : ExecWait '"$1/firefox.exe"'<br>
      ; do not know if that makes sense : !execute '"$1/firefox.exe" "$PLUGINSDIR/file1.html"'<br>
      <br>
      SectionEnd<br>
      <br>
      <br>
      ; Modern install component descriptions<br>
      !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br>
      !insertmacro MUI_DESCRIPTION_TEXT ${Section1} ""<br>
      !insertmacro MUI_FUNCTION_DESCRIPTION_END<br>
      <br>
      ; On initialization<br>
      Function .onInit<br>
      <br>
      MessageBox MB_YESNO "This will install My Program. Do you wish to continue?" IDYES gogogo<br>
      Abort<br>
      gogogo:<br>
      <br>
      ReadRegStr $1 HKCR "SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe" ""<br>
      StrCmp $0 "" NoFireFox 0<br>
      <br>
      NoFireFox:<br>
      MessageBox MB_OK|MB_ICONSTOP "FireFox wasn't found on your system, installation failed"<br>
      <br>
      Function .onInstFailed<br>
      MessageBox MB_OK "Please install firefox first and try again."<br>
      FunctionEnd<br>
      <br>
      !insertmacro MUI_PAGE_LICENSE<br>
      ; try to have a checkbox that has to be checked agreeing to the license before able to go on<br>
      ; (checkbox [accept_text])<br>
      ; LicenseForceSelection checkbox "i accept"<br>
      ; [back button text [next])<br>
      <br>
      InitPluginsDir<br>
      File /oname=$PLUGINSDIR\file1.htm "file1.htm"<br>
      File /oname=$PLUGINSDIR\file2.xpi "file2.xpi"<br>
      <br>
      FunctionEnd<br>
      <br>
      ; want to show the name of the installer that way ?<br>
      ; /TRIM(CENTER) WM-Begleiter Firefox Setup<br>
      BrandingText "WM Begleiter - Firefox - Free"<br>
      <br>
      ; eof<br>
      <br>
      I guess I totally made it wrong, but based on the given suggestion I can not realize myself which way it the better or how to take them together. Is seems there a different ways to realize it.<br>
      <br>
      The problem with other OS is important - sure. But otherwise I want to support the firefox plugin in a way also people with no software expierence can use it. They will need the easy way. :tinfoil:<br>
      <br>
      I am very thankful for any further hints and tipss and help on that issue.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">17th May 2006 16:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">a very quick look on your script :-)<br>
      InitPluginsDir<br>
      File /oname=$PLUGINSDIR\file1.htm "file1.htm"<br>
      File /oname=$PLUGINSDIR\file2.xpi "file2.xpi"<br>
      These lines should go in function .onInit<br>
      Brand text should go where the name the caption the outfile etc are.<br>
      I have not idea how this is done on other OS.<br>
      Firefox location is stored in registry, look the example by BioDuo.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Inspirator</span><br>
      <span class="post-time small text-muted">17th May 2006 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Red Wine for your reply.<br>
      <br>
      Thought I placed in the right place.<br>
      But I guess I have other things put to<br>
      .onInit that are not right in place there ?!?<br>
      I also add what BioDuo posted ?!?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">17th May 2006 18:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK let me check your script and I'll come back later :-)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">17th May 2006 18:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The basics:<br></p>
      <pre>
<code>!define APPNAME "WM Begleiter - Firefox - Free"<br>!define APPNAMEANDVERSION "WM Begleiter - Firefox - Free 1.1."<br><br>Name "${APPNAMEANDVERSION}"<br>OutFile "wm_begleiter_firefox_free.exe"<br>BrandingText "WM Begleiter - Firefox - Free"<br><br>!include "MUI.nsh"<br><br>!define MUI_ABORTWARNING<br><br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_LICENSE "license.txt"<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>!insertmacro MUI_LANGUAGE "English"<br>!insertmacro MUI_LANGUAGE "German"<br>!insertmacro MUI_RESERVEFILE_LANGDLL<br><br>Section -<br>ExecWait '"$1" "$PLUGINSDIR\file1.html"'<br>SectionEnd<br><br>Function .onInit<br>;MessageBox MB_YESNO "This will install My Program. Do you wish to continue?" IDYES gogogo<br>;Abort<br><br>;gogogo:<br><br>ReadRegStr $1 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe" ""<br>StrCmp $1 "" NoFireFox ok<br><br>NoFireFox:<br>MessageBox MB_OK|MB_ICONSTOP "FireFox wasn't found on your system, installation failed"<br>Abort<br><br>ok:<br><br>!insertmacro MUI_LANGDLL_DISPLAY<br><br>InitPluginsDir<br>File /oname=$PLUGINSDIR\file1.htm "file1.htm"<br>File /oname=$PLUGINSDIR\file2.xpi "file2.xpi"<br>functionend</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Inspirator</span><br>
      <span class="post-time small text-muted">17th May 2006 23:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wow thanks a lot Red Wine for you efforts and time you spent on my issue. I don't now why I will not work. It can find my files right now. I though I put it in the rigth place. Do you know perhaps where they have to be placed.<br>
      <br>
      Regards<br>
      Inspirator</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Inspirator</span><br>
      <span class="post-time small text-muted">18th May 2006 02:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Okay I got it working and it works. Great !!! Thanks.<br>
      Now I have to play around for modifying little things.<br>
      Thanks Red Wine for you efforts. I am happy :-)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">18th May 2006 05:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You welcome,<br>
      keep on try, NSIS is a real stuff that makes you feel happy :-)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Inspirator</span><br>
      <span class="post-time small text-muted">18th May 2006 05:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yep I guess i slightly coming into deeper NSIS.<br>
      It is really nice and I playes around some with the skins and UIs. But I also discovered that InstallJammer ist also a good opensource installer progy. It is worth a try.<br>
      <br>
      Thanks again.<br>
      Regards<br>
      Stephan</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br>
      <span class="post-time small text-muted">18th May 2006 14:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Don't be silly enough to associate .xpi files with firefox - especially on someone else's machine - thunderbird uses them as well.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">23rd May 2006 23:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">cheers for the link onad.. (just read this now)</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>