<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="[Problem] Embedding other Installer" />

  <title>[Problem] Embedding other Installer - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">[Problem] Embedding other Installer</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272847">[Problem] Embedding other Installer</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">15th June 2007 11:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>[Problem] Embedding other Installer</strong><br />
      Hi all,<br />
      <br />
      Since some days im trying to build a installer script which installs the main flash application and also the Acrobat Reader 7...if wanted.<br />
      <br />
      On the NSIS Wiki are some code examples i try to implement in my actual script. But it dont get is solved to get the component "Adobe Acrobat Reader 7" into the Components Page, so the user could check/uncheck the Acrobat Reader Setup.<br />
      There's always just my Component "Flash Application".<br />
      <br />
      Script attached in next post.<br />
      <br />
      On the NSIS Wiki page "Embedding other Installer" the author says "You will need to download several binaries to get this script to compile"...but what binaries i need ?<br />
      <br />
      Please help!<br />
      <br />
      Greetings<br />
      Thalos</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th June 2007 13:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You're specifying a relative path to execute in your Adobe Reader section.<br />
      <br />
      Please attach your script as a separate text file.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">15th June 2007 13:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, here comes the file<br />
      <br />
      Thanks for Help!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th June 2007 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Put this at the top of your Adobe Reader section<br />
      SetOutPath "$INSTDIR"<br />
      <br />
      And change ExecWait to ExecWait "$INSTDIR\ ...<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">15th June 2007 13:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, still not working as intended...<br />
      <br />
      i replaced the following as you said :<br />
      <br />
      Section "Adobe Acrobat Reader 7" SEC02<br />
      SetOutPath "$INSTDIR"<br />
      File "prerequisites\AdbeRdr709_DLM_de_DE.exe"<br />
      ExecWait "$INSTDIR\"<br />
      SectionEnd<br />
      <br />
      ..but im not sure if i did it correctly...at the ExecWait "$INSTDIR\ ..." command im not sure what should be placed after the slash. But i tried some things (like "$INSTDIR\prerequisites\AdbeRdr709_DLM_de_DE.exe", "$INSTDIR\", "$INSTDIR\prerequisites"), but i never got the "Adobe Acrobat Reader 7" entry in the components page, still only the "Digitale Fotografie Anwendung".<br />
      <br />
      I attached the actual .nsi file again</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th June 2007 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ExecWait '"$INSTDIR\AdbeRdr709_DLM_de_DE.exe" "/sPB /rs /l /msi /qb-! /norestart ALLUSERS=2 EULA_ACCEPT=YES SUPPRESS_APP_LAUNCH=YES"'<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">15th June 2007 14:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, that doesnt bring the entry in the components page. Still only the "Digitale Fotografie Anwendung"-entry..</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th June 2007 14:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You'll need to do some testing. Check that $INSTDIR\AdbeRdr709_DLM_de_DE.exe exists, execute that command in command prompt etc<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 10:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, i did some testing on the weekend and nearly got solved the problem. Im now getting the "Adobe Acrobat Reader"-entry in the Components page during installation. BUT after installing the main application, it doesnt executes the Acrobat Reader setup exe. Im thinking the failure is in the "ExecWait" command line which have to be adjusted a bit to execute the acrobat reader setup file correctly.<br />
      <br />
      My file hierarchy:<br />
      <br />
      Digitalfotografie<br />
      |__dat<br />
      |<br />
      |__pdf<br />
      |<br />
      |__prerequisites<br />
      | |_AdbeRdr709_DLM_de_DE.exe<br />
      |<br />
      main application exe<br />
      <br />
      And heres the section script segment for the Adobe Reader Setup:<br />
      <br />
      Section "Adobe Acrobat Reader" SEC02<br />
      SetOutPath "$INSTDIR"<br />
      File "prerequisites\AdbeRdr709_DLM_de_DE.exe"<br />
      ExecWait '"$INSTDIR\AdbeRdr709_DLM_de_DE.exe" "/sPB /rs /l /msi /qb-! /norestart ALLUSERS=2 EULA_ACCEPT=YES SUPPRESS_APP_LAUNCH=YES"'<br />
      SectionEnd<br />
      <br />
      Here, i dont understand what the "/sPB /rs /l /msi /qb-" commands really does, so please explain it to me :)<br />
      <br />
      I also tried to execute the "AdbeRdr709_DLM_de_DE.exe"<br />
      from the CD Path (File "$EXEDIR\prerequisites\AdbeRdr709_DLM_de_DE.exe), but that doesnt solve it also im not sure if this is a correct way...<br />
      <br />
      So please guys help the unskilled NSIS scripting Thalos to solve this. :)<br />
      <br />
      Thanks for help!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 10:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Those are command line parameters for the installer. You could try Google.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 10:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok found something...<br />
      /sPB - silent mode with progress Bar<br />
      /rs - Reboot Suppress<br />
      /l - Enable Error Logging<br />
      /msi -[Command line] Parameters for MSIEXEC<br />
      /qb-! - to hide the Cancel button.<br />
      <br />
      But why he doesnt execute the Adobe Reader Setup ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 10:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have in your command line:<br />
      SUPPRESS_APP_LAUNCH=YES<br />
      <br />
      Stu :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 11:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hmm, no that doesnt help ^^<br />
      <br />
      if i delete this command it doesent execute the setup :)<br />
      And if im right this command is just for the supress of launching the application AFTER installation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 11:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Right I am confused now. I thought you said the setup runs because you get an entry in Add/Remove, so what is the problem?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 12:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok, next try :)<br />
      <br />
      my english isnt good, but im trying to explain the problem now as detailed as i can :)<br />
      <br />
      Im trying to build a installer with MDM Zinc. Zinc uses the NSIS script. And this NSIS script i want to change. I have a Flash Application which gets installed correctly (install/uninstall script is ok), but to use this flash application with its full functions the user needs Acrobat Reader 7+ . I have downloaded a setup file for Acrobat reader named "AdbeRdr709_de_DE.exe" which i want to be installed after the Flash Application Setup.<br />
      <br />
      To do this i changed the "standard"-script and inserted the "MUI_PAGE_COMPONENTS".<br />
      Now i have 2 Section (1 for the Flash Application and 1 for the Adobe Reader Setup) which now can be check/unchecked during installation at the Components Page.so far so good...<br />
      <br />
      <a href="http://support-thinkhouse.de/nsis/components.gif" target="_blank">http://support-thinkhouse.de/nsis/components.gif</a><br />
      <br />
      The Problem is that it doesnt include the Adobe Reader setup file. Cause if i uncheck the Main Application the file size shrinks to 0.0Kb...<br />
      I really tried several Path Variants, thinking that this would be the problem, but never get it solved whatever path i give to the Adobe Reader Setup file...<br />
      <br />
      <a href="http://support-thinkhouse.de/nsis/components2.gif" target="_blank">http://support-thinkhouse.de/nsis/components2.gif</a><br />
      <br />
      Here again my file hierarchy:<br />
      <br />
      Digitalfotografie<br />
      |__dat<br />
      |<br />
      |__pdf<br />
      |<br />
      |__prerequisites<br />
      | |_AdbeRdr709_DLM_de_DE.exe(this i want to execute after installation)<br />
      |<br />
      main application exe<br />
      <br />
      <br />
      And here is the actual fsp.nsi in txt format again:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That script cannot possibly compile. $EXEDIR is a run time variable and yet you are using it in a compile time instruction (File "$EXEDIR\AdbeRdr709_de_DE.exe").<br />
      Or did you just change that now?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah that was my last try. :)<br />
      Thought that this would execute the file from CD...<br />
      <br />
      but in the "File" and "ExecWait" command line i tried several things such as :<br />
      <br />
      -File "$INSTDIR\AdbeRdr709_de_DE.exe"<br />
      -File "AdbeRdr709_de_DE.exe"<br />
      -File "\prerequisites\AdbeRdr709_de_DE.exe"<br />
      <br />
      and some other things...same in "ExecWait" command line</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 12:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Are you sure that the script is even compiling?<br />
      If makensis cannot find the file you will get an error on compile and the new installer will not be created.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 12:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ahaa found something new..."Compile NSIS Scrip" :)<br />
      <br />
      Never did that...always saved the file and the changes were accepted ^^<br />
      <br />
      Ok i compiled it and the makensis said the following:<br />
      <br />
      Processing script file: "E:\Programme\MDM Zinc v2.5\NSIS\fsp.nsi"<br />
      !define: "PRODUCT_NAME"="MyFSPApplication1234567890"<br />
      !define: "PRODUCT_KEYNAME"="Ratgeber digital"<br />
      !define: "PRODUCT_VERSION"="1234567890.1234567890"<br />
      !define: "PRODUCT_PUBLISHER"="Mycompany,Inc.1234567890"<br />
      !define: "PRODUCT_WEB_SITE"="http://www.fsp1234567890fsp.com"<br />
      !define: "PRODUCT_DIR_REGKEY"="Software\Microsoft\Windows\CurrentVersion\App Paths\fspprojectorreglocation1234567890.exe"<br />
      !define: "PRODUCT_UNINST_KEY"="Software\Microsoft\Windows\CurrentVersion\Uninstall\MyFSPApplication1234567890"<br />
      !define: "PRODUCT_UNINST_ROOT_KEY"="HKLM"<br />
      !include: could not find: "C:\Programme\NSIS\System.nsh"<br />
      Error in script "E:\Programme\MDM Zinc v2.5\NSIS\fsp.nsi" on line 16 -- aborting creation process<br />
      <br />
      so he doesnt find the "System.nsh" in that directory. Well, the file system.nsh doesnt exist there, its in C:\Programme\NSIS\Examples\System\System.nsh<br />
      <br />
      Should i give the rigth pass to it in the script or copy the file to the NSIS directory ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 13:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Saving the .nsi file will not automatically build the .exe file!!! This has never been the case, so perhaps all this time you've been using your first built installer which has always been broken :(<br />
      <br />
      !include "${NSISDIR}\System.nsh"<br />
      -&gt;<br />
      !include "MUI.nsh"<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 13:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        Saving the .nsi file will not automatically build the .exe file!!!
      </blockquote>no no ^^<br />
      the compilation is also done by Zinc. I always hit "build" after changing something in the script. But it doesnt says me if is something wrong in the script linke makensis does.<br />
      <br />

      <blockquote>
        !include "${NSISDIR}\System.nsh"
      </blockquote>doesnt help...the System.nsh is in another directory, so i changed this in ""${NSISDIR}\Examples\System\System.nsh" and its ok.<br />
      <br />
      <br />
      But now he gives an error i dont understand :confused:<br />
      <br />
      Processing script file: "E:\Programme\MDM Zinc v2.5\NSIS\fsp.nsi"<br />
      !define: "PRODUCT_NAME"="MyFSPApplication1234567890"<br />
      !define: "PRODUCT_KEYNAME"="Ratgeber digital"<br />
      !define: "PRODUCT_VERSION"="1234567890.1234567890"<br />
      !define: "PRODUCT_PUBLISHER"="Mycompany,Inc.1234567890"<br />
      !define: "PRODUCT_WEB_SITE"="http://www.fsp1234567890fsp.com"<br />
      !define: "PRODUCT_DIR_REGKEY"="Software\Microsoft\Windows\CurrentVersion\App Paths\fspprojectorreglocation1234567890.exe"<br />
      !define: "PRODUCT_UNINST_KEY"="Software\Microsoft\Windows\CurrentVersion\Uninstall\MyFSPApplication1234567890"<br />
      !define: "PRODUCT_UNINST_ROOT_KEY"="HKLM"<br />
      !include: "C:\Programme\NSIS\Examples\System\System.nsh"<br />
      !define: "System.NSH.Included"=""<br />
      !include: closed: "C:\Programme\NSIS\Examples\System\System.nsh"<br />
      !include: "C:\Programme\NSIS\Include\MUI.nsh"<br />
      !include: "C:\Programme\NSIS\Contrib\Modern UI\System.nsh"<br />
      NSIS Modern User Interface version 1.78 - Â© 2002-2007 Joost Verburg (C:\Programme\NSIS\Contrib\Modern UI\System.nsh:11)<br />
      !define: "MUI_VERBOSE"="3"<br />
      !include: closed: "C:\Programme\NSIS\Contrib\Modern UI\System.nsh"<br />
      !include: closed: "C:\Programme\NSIS\Include\MUI.nsh"<br />
      !define: "MUI_ABORTWARNING"=""<br />
      !define: "MUI_ICON"="C:\Programme\NSIS\Contrib\Graphics\Icons\modern-install.ico"<br />
      !define: "MUI_UNICON"="C:\Programme\NSIS\Contrib\Graphics\Icons\modern-uninstall.ico"<br />
      !insertmacro: MUI_PAGE_WELCOME<br />
      !insertmacro: end of MUI_PAGE_WELCOME<br />
      !insertmacro: MUI_PAGE_LICENSE<br />
      LicenseData: open failed "Notes1234567890.rtf"<br />
      Usage: LicenseData local_file_that_has_license_text | license_lang_string<br />
      <b>Error in macro MUI_PAGE_LICENSE on macroline 21<br />
      Error in script "E:\Programme\MDM Zinc v2.5\NSIS\fsp.nsi" on line 26 -- aborting creation process</b>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 13:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Check 2 lines before the bit you boldened. It cannot find the file "Notes1234567890.rtf".<br />
      <br />
      Ah right, "${NSISDIR}\Examples\System\System.nsh" is the script header for the System plugin.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thalos</span><br />
      <span class="post-time small text-muted">18th June 2007 14:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">puh ok, got the script compiled, but now im really confused..<br />
      <br />
      ..first of all im not cheking the link between the NSIS installer script an MDM Zinc...<br />
      i now changed the script, compiled it, built a new exe with Zinc and it now uses a old version of the script...:confused:<br />
      <br />
      When i compiled the actaul script and test the installer via makensis i now have the 2 Components in the components page.<br />
      And after installing the Flash Application the Adobe Acrobat Reader Setup is started. Just how i wanted it to be :)<br />
      <br />
      BUT...wait first of all my file hierarchy again :)<br />
      <br />
      Anwendung<br />
      |__dat<br />
      |<br />
      |__pdf<br />
      |<br />
      |__prerequisites<br />
      | |_AdbeRdr709_DLM_de_DE.exe(<br />
      |<br />
      main application exe<br />
      <br />
      <br />
      and the script for the Flash Application:<br />
      <br />
      Section "Digitale Fotografie Anwendung" SEC01<br />
      SetOutPath "$INSTDIR"<br />
      SetOverwrite ifnewer<br />
      <b>File "E:\Arbeit\Digitale Fotografie\Anwendung\Anwendung\"</b><br />
      CreateDirectory "$SMPROGRAMS\${PRODUCT_KEYNAME}\${PRODUCT_NAME}"<br />
      CreateShortCut "$SMPROGRAMS\${PRODUCT_KEYNAME}\${PRODUCT_NAME}\Digitale Fotografie.lnk" "$INSTDIR\Ratgeber digital - Digitalfotografie.exe"<br />
      CreateShortCut "$DESKTOP\Ratgeber digital - Digitale Fotografie.lnk" "$INSTDIR\Ratgeber digital - Digitalfotografie.exe"<br />
      SectionEnd<br />
      <br />
      As u can see, i have changed this part, beacause the Flash Application needs 2 folder ("dat" and "pdf") and its whole contents to run. But with this command only the files in the "Anwendung"-folder are copied, the "dat" and "pdf" folder arent "installed"...<br />
      <br />
      So 2. Question would be:<br />
      how do implement a whole folder-structure ?<br />
      <br />
      i attach the actual fsp.nsi file if needed :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th June 2007 15:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should check the documentation on File :)<br />
      Hint: /r.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
