<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Only allowing 1 component per install?"><title>Only allowing 1 component per install? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Only allowing 1 component per install?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308686">Only allowing 1 component per install?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">ryanpager</span><br><span class="post-time small text-muted">21st July 2009 15:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Only allowing 1 component per install?</strong><br>Is there a way to disable the ability to chose more than 1 component everytime someone wants to do the install.<br><br>Reason being, as this is acting as a 4 in 1 installer, and they should only be able to install 1 at a time.<br><br>Thanks,<br>Ryan</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">21st July 2009 17:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can use .onSelChange (Manual chapter 4.7.2.1.8).<br>This function is called when the user changes the selection.<br>Then find out which component is selected with SectionGetFlags (Manual chapter 4.9.13.2).<br>(You have to remember what component was selected previously).<br>Then use SectionSetFlags to select this component only.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st July 2009 17:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Check out Examples\one-section.nsi<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ryanpager</span><br><span class="post-time small text-muted">21st July 2009 20:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is what I have so far, its working for the most part. The only problem I am having, is that I need the default to be all "off/unselected" rather than all selected from the start.<br><br>Ideas? Here is my code<br><br>Function .onInit<br>!insertmacro MUI_LANGDLL_DISPLAY<br>StrCpy $1 ${SEC01} ; Group 1 - Option 1 is selected by default<br>StrCpy $2 ${SEC02}<br>StrCpy $3 ${SEC03}<br>StrCpy $4 ${SEC04}<br>FunctionEnd<br><br>Function .onSelChange<br><br>!insertmacro StartRadioButtons $1<br>!insertmacro RadioButton ${SEC01}<br>!insertmacro RadioButton ${SEC02}<br>!insertmacro RadioButton ${SEC03}<br>!insertmacro RadioButton ${SEC04}<br>!insertmacro EndRadioButtons<br><br>FunctionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">21st July 2009 20:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK, I didn't know about these macro's.<br>Makes it easier ;-)<br><br>Well, obviously you have to make all sections unselected by default, by adding the /o flag for each section:</p><pre>
<code>; Sections<br><br>Section /o "Option 1" SEC01<br>SectionEnd<br><br>Section /o "Option 2" SEC02<br>SectionEnd<br><br>Section /o "Option 3" SEC03<br>SectionEnd<br><br>Section /o "Option 4" SEC04<br>SectionEnd<br><br>;--------------------------------<br><br>; Functions<br><br>Function .onInit<br>!insertmacro MUI_LANGDLL_DISPLAY<br>StrCpy $1 ${SEC01} ; Group 1 - Option 1 is selected by default<br>FunctionEnd<br><br>Function .onSelChange<br><br>!insertmacro StartRadioButtons $1<br>!insertmacro RadioButton ${SEC01}<br>!insertmacro RadioButton ${SEC02}<br>!insertmacro RadioButton ${SEC03}<br>!insertmacro RadioButton ${SEC04}<br>!insertmacro EndRadioButtons<br><br>FunctionEnd</code>
</pre>BTW, you only need to have ${SEC01} copied to $1 in onInit.<br>
      This is where the previous selected section is stored.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ryanpager</span><br>
      <span class="post-time small text-muted">21st July 2009 20:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Got it, all I needed to do was add the /o!<br>
      <br>
      <br>
      Thanks!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">21st July 2009 23:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">One problem there is once the user has clicked one of the components he's forced to install one of them. You may want to add an additional empty section in the group that the user can select.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>