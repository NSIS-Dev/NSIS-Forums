<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Conditionally extract files" />

  <title>Conditionally extract files - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Conditionally extract files</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=341517">Conditionally extract files</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ptz</span><br />
      <span class="post-time small text-muted">31st January 2012 15:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Conditionally extract files</strong><br />
      I want to have a single large installer file from which I will only extract parts, depending on the user's choice. How can I achieve this? I only know the "File" command for adding files to the installer, but it seems to have a dual action - it also extracts everything that's been added.<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">31st January 2012 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You cannot conditionally extract files if you are using /r (this is what I assume you have done). You need individual File instructions and conditionally execute them using LogicLib.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ptz</span><br />
      <span class="post-time small text-muted">31st January 2012 17:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Let me rephrase. Suppose I have 2 files that I need to include (this happens at compile time) in my installer so that one of them is extracted (this happens at runtime) depending on user's choice. In order to have both files in my installer file I need to have<br />
      File file1<br />
      File file2<br />
      But this, to the best of my knowledge, will not only add (at compile time) file1 and file2 to the installer, but will also extract (at runtime) both of them without asking. I need to separate the compile-time and runtime events.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">31st January 2012 18:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>${If} [user wants file 1]<br />  File file1<br />${EndIf}<br />${If} [user wants file 2]<br />  File file2<br />${EndIf}</code>
</pre>The compiler will still bundle both files in the package, but will only extract the file (execute the File instruction) if you do not jump over it. Having multiple Sections and a Components page effectively gives you the same behaviour.<br />
      <br />
      Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ptz</span><br />
      <span class="post-time small text-muted">1st February 2012 08:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, Stu. I thought I have - but clearly haven't - experiment enough to understand that the compiler will bundle both file1 and file2 with such code.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
