<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="display real size of ZiP/7Z contents" />

  <title>display real size of ZiP/7Z contents - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">display real size of ZiP/7Z contents</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=315271">display real size of ZiP/7Z contents</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CG!</span><br />
      <span class="post-time small text-muted">11th December 2009 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>display real size of ZiP/7Z contents</strong><br />
      is there any way to display the "real" size of files, that are packed using zip or 7-zip, inside the installer and that are delivered inside the NSiS package?<br />
      Doesn't matter if i hardcode it as long as anyone maybe willing to tell me how. But an plugin that meassures the size at runtime or calculates it at compile time would be my favorite solution ofc.<br />
      <br />
      Thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CG!</span><br />
      <span class="post-time small text-muted">12th December 2009 01:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Found a solution.<br />
      Hardcoded and working using SectionSetSize.<br />
      Took me a while to find the right words for what i was looking for, so my search finally pointed in the right direction. :/<br />
      But if some knows a method that calculates the file size inside the archive(s) during compiling or runtime automaticly, let me know please.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Instructor</span><br />
      <span class="post-time small text-muted">12th December 2009 12:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Using <a href="http://nsis.sourceforge.net/NsUnzip_plugin" target="_blank">nsUnzip</a>:<br />
      <br /></p>
      <pre>
<code>Name "Test"<br />OutFile "Test.exe"<br /><br />Section<br />        StrCpy $R0 0<br />        GetFunctionAddress $0 VerboseCallback<br />        nsUnzip::Extract "1.zip" /callV=$0 /END<br />        Pop $0<br />        MessageBox MB_OK "Uncompressed size: $R0$\nError: $0"<br />SectionEnd<br /><br />Function VerboseCallback<br />        Pop $0  ;File name<br />        Pop $1  ;Uncompressed size<br />        Pop $2  ;Compressed size<br />        Pop $3  ;CRC: ff00ff00<br />        Pop $4  ;Compress ratio<br />        Pop $5  ;File date: "dd.MM.yy"<br />        Pop $6  ;File time: "hh:mm"<br />        Pop $7  ;Method: "Stored", "Shrunk", "Reduce1", "Reduce2", "Reduce3", "Reduce4", "Implode", "Token", "Defl:#", "Def64#", "ImplDCL", "PKres11", "BZip2", "Unk:###"<br />        Pop $8  ;Encrypted: "E" or not " "<br /><br />        IntOp $R0 $R0 + $1<br />FunctionEnd</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CG!</span><br />
      <span class="post-time small text-muted">12th December 2009 15:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Mr. instructor, Sir.<br />
      <br />
      All i need to figure out now, is how to hand these values over to NSiS before the user reaches the components dialog, so the install size will be automaticly calculated with the uncompressed size only.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
