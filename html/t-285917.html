<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CABSetup::BuildSetupFiles add=path bug ?" />

  <title>CABSetup::BuildSetupFiles add=path bug ? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">CABSetup::BuildSetupFiles add=path bug ?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=285917">CABSetup::BuildSetupFiles add=path bug ?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">galevsky</span><br />
      <span class="post-time small text-muted">29th January 2008 23:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CABSetup::BuildSetupFiles add=path bug ?</strong><br />
      Hi all,<br />
      <br />
      I spend lot of time to understand what was wrong with one of my script...<br />
      <br />
      <br /></p>
      <pre>
<code>CABSetup::BuildSetupFiles /NOUNLOAD "/add=${SOURCE_FILES}" /S |</code>
</pre><br />
      <br />
      The script will try to create the cab but fail with return code 1. My ${SOURCE_FILES} was "C:\Documents and Settings\Admin\My Doc\Here_v1\sources\"<br />
      <br />
      But no problem if I use the source files from "C:\Program Files\Test_v1\sources" instead.<br />
      <br />
      Any idea ? I am admin, so I don't think it is a rights issue, both Program Files\ and Documents and Settings\ are on the same partition.... I cannot see.<br />
      <br />
      Thks,<br />
      <br />
      Gal'
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mr Inches</span><br />
      <span class="post-time small text-muted">31st January 2008 14:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi<br />
      <br />
      A return code of 1 from BuildSetupFiles with the /MakeFiles option usually indicates there a problem with the syntax of the contents of the directive file created by the earlier switches.<br />
      <br />
      The most likely reason I can think of for it having a problem is one or more of the paths added for your source files or folder are invalid. Note that the Add expects a path and file specification; if you only give it a path it does not assume '*.*'.<br />
      <br />
      The error message in the DetailLog suggests running the command externally to observe MAKECAB's error message (I am looking at ways to capture it's output for redisplay from within CABSetup, but it does some strange things with it's console output...).<br />
      <br />
      If you could post a copy of the {dataset}.DDF file that CABSetup creates and/or run the command given in the error from BuildSetupFiles and reproduce it's output, they may provide some more clues.<br />
      <br />
      Duncan</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">galevsky</span><br />
      <span class="post-time small text-muted">31st January 2008 14:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I will do that in a while.<br />
      <br />
      PS: I had set my SOURCE_FILES to "C:\some\path\*.*" so no problem with that.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
