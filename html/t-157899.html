<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Rotating images while instfiles?"><title>Rotating images while instfiles? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Rotating images while instfiles?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=157899">Rotating images while instfiles?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">28th November 2003 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Rotating images while instfiles?</strong><br>Hello,<br><br>ive searched the articles / plugins and fourms but didnt find a way to display rotating images while the installation process.<br><br>Maybe someone out there who can help me how to realize this?<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">28th November 2003 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have not tried this myself but I think it might be possible using the bgImage plugin, although I could be wrong.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th November 2003 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It's not possible with bgImage, but with some source changes to it, it would most certainly be possible.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">28th November 2003 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>thanks for your replies.<br><br>Yes tried with bgImage before kichik's post but couldnt use addimage without using setbg before.<br><br>@kichik: i saw you made the bgImage plugin. Would you able to create a similiar plugin for adding images to the NSIS dialogs?<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th November 2003 14:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can already add images to the NSIS dialog using AddBrandingImage and SetBrandingImage. See gfx.nsi for example.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">28th November 2003 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>yes i tried that before. However i cant use AddBrandingImage inside functions/sections. Even if i could i dont want the window gets resized.<br><br>What i tried to do is displaying different images below the installation progress.<br><br>AddBrandingImage wont help me here.<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th November 2003 14:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">AddBrandingImage will help you. You use AddBrandingImage outside of a function or a section and then SetBrandingImage inside. See gfx.nsi.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">28th November 2003 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>i did see how gfx.nsi used it. However when i use AddBrindingImage once the window gets "framed".<br><br>Ie. when i use AddBrandingImage bottom 100 the bottom 100 pixels of the NSIS window gets reservde for the branding image. This goes for all dialogs rather than just the instfiles dialog. The branding image gets adjusted to the border as well.<br><br>I saw Modern GUI used SetBrandingImage with a imageid. I couldnt figure out what 1046 means. Maybe i could use InstallOptions in addition with SetBrandingImage? This would lead into a second problem i currently have: How can i use InstallOptions inside the instfiles page (when using modern GUI) .<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th November 2003 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is one big misunderstanding :(<br><br>You want to switch the pictures, not rotate them as in 90 degrees to the right or something like that...<br><br>You can do that with BgImage. You don't have to use AddImage, SetBg can set an image too as the background. But those will show behind the installer. If you want it to show below the progress bar you'd need some more work. Let me know if BgImage is not enough for you and I'll tell you how to do that.<br><br>As for the new questions, you can't use InstallOptions in a section, 1046 is the id of the branding image placeholder in the MUI UI (open modern.exe in Resource Hacker - dialog 105) and yes, AddBrandingImage does indeed adds an image for the entire installation. But you can switch that while installing too...<br><br>I'm sorry for the confusion.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">28th November 2003 17:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>sorry for not beeing specific. Yes i meant switching pictures.<br>SetBG isnt enough - i would like to have just the installer window.<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th November 2003 17:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok, then you'd have to edit the UI file with Resource Hacker, add a place holder for an image where you want it to be and then do the image loading and setting on yourself using System.dll. The code for loading and setting images can be found in exec.c under EW_SETBRANDINGIMAGE. You should use that as a refernce for the System.dll calls. To get the HWND of the place holder you should use:<br><br>FindWindow $0 "#32770" "" $HWNDPARENT<br>GetDlgItem $0 $0 &lt;insert control id&gt;<br># load image...<br>SendMessage $0 &lt;insert value of STM_SETIMAGE here&gt; &lt;insert value of IMAGE_BITMAP here&gt; &lt;insert handle to loaded image here&gt;</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ibartel</span><br><span class="post-time small text-muted">1st December 2003 16:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>thanks alot it's working well now (exactly is i wanted).<br><br>kind regards,<br>Ingo Bartel</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nandhp</span><br><span class="post-time small text-muted">12th February 2004 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>SendMessage $0 &lt;insert value of STM_SETIMAGE here&gt; &lt;insert value of IMAGE_BITMAP here&gt; &lt;insert handle to loaded image here&gt;</blockquote>I'm trying to get this to work for my installer, but I don't understand what "insert handle to loaded image here" means. Could someone provide some advice with this?<br><br>BTW, this doesn't work:<br><br>SendMessage $0 ${STM_SETIMAGE} ${IMAGE_BITMAP} "STR:C:\windows\blocks.bmp"</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nandhp</span><br><span class="post-time small text-muted">12th February 2004 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found <a href="http://nsis.sourceforge.net/archive/viewpage.php?pageid=405" target="_blank">http://nsis.sourceforge.net/archive/...php?pageid=405</a> which works for me (I'm not using MUI)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">fluidz91</span><br><span class="post-time small text-muted">17th October 2006 10:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>i copy files using :<br><br></p><pre>
<code><br>File /r ..\plugin\eclipse32\<br></code>
</pre><br>
      <br>
      and i wanted some image files to display during installation (about 233 Mb files).<br>
      I tried ebanner and the modified MUI provided here but there is no way to specify multiple file and time between displays so that i can display only one picture during install.<br>
      I tried to "cut" the process of the files copy in parts but i could not manage well with it.<br>
      Would it be possible ?<br>
      Hope i ve been clear ^^<br>
      Thanks
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fluidz91</span><br>
      <span class="post-time small text-muted">20th October 2006 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is it possible to edit the script image.nsh to load multiple pictures and display them at given time during install ?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fluidz91</span><br>
      <span class="post-time small text-muted">31st October 2006 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">just giving this thread a last chance to get an answer ! ^^</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br>
      <span class="post-time small text-muted">31st October 2006 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sourceforge.net/AnimGif_plug-in" target="_blank">http://nsis.sourceforge.net/AnimGif_plug-in</a></p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fluidz91</span><br>
      <span class="post-time small text-muted">2nd November 2006 19:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx Takhir, i'll try this (thought about using an animated gif but didn't try if it was possible during the files copy)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skyfish8u8</span><br>
      <span class="post-time small text-muted">3rd November 2006 05:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi all:<br>
      <br>
      Everybody can give me Modern_Instpics.zip,I don't down it.thx!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skyfish8u8</span><br>
      <span class="post-time small text-muted">3rd November 2006 05:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi all:<br>
      <br>
      Everybody can give me Modern_Instpics.zip,I don't down it.thx!<br>
      <br>
      <br>
      Email: <a href="mailto:skyfish2u@yahoo.com">skyfish2u@yahoo.com</a></p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br>
      <span class="post-time small text-muted">3rd November 2006 05:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">have you tried here: <a href="http://vytautas.mine.nu/joomla/index.php?option=com_docman&amp;task=cat_view&amp;gid=21&amp;Itemid=35" target="_blank">http://vytautas.mine.nu/joomla/index...d=21&amp;Itemid=35</a><br>
      <br>
      Vytautas</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skyfish8u8</span><br>
      <span class="post-time small text-muted">3rd November 2006 08:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry,I can't open the URL. Vytautas,Would you send it give me ? Thx!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br>
      <span class="post-time small text-muted">3rd November 2006 08:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hhhmmm strange seems to work for me. anyhow file sent</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skyfish8u8</span><br>
      <span class="post-time small text-muted">3rd November 2006 09:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are a great guy! I'll keep secret your mail address! Thx again!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fluidz91</span><br>
      <span class="post-time small text-muted">3rd November 2006 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Takhir,<br>
      <br>
      i tried to display an animated gif in the current window where i have the progress bar of the copying files but the gif "flicks" and is not well displayed (almost invisible).<br>
      i tried both dll versions (in the second package, the example with the bird and baby is exactly what i want and display correctly).<br>
      If i put another window on top then i return to the installation window the gif display correctly but for a really short time...<br>
      Any idea ?<br>
      Thx anyone who could help !<br>
      <br>
      <br>
      Extract code :<br>
      <br></p>
      <pre>
<code><br># Installer sections<br>Section -Main SEC0000<br>    SetOutPath $INSTDIR<br>    SetOverwrite on<br>    AnimGif::play /NOUNLOAD /VALIGN=CENTER "$EXEDIR\aist.gif"<br>    File ..\plugin\eclipse32\*<br></code>
</pre><br>
      <br>
      Edit : do i have to create an empty white placeholder for animated header GIF like proposed in an example ??
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br>
      <span class="post-time small text-muted">3rd November 2006 14:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't need placeholder for INSTFILES page. If you can attach image and (short) script to post I'll test it. May some overlapping with progress bar have place? Try with default bottom valign.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fluidz91</span><br>
      <span class="post-time small text-muted">3rd November 2006 15:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Takhir,<br>
      <br>
      i was about to send you my complete script but wanted to clean some useless code before, i found that i had tested Modern_Instpics with an "!include Image.nsh" so i comment it and recompile script and test it and... it works !<br>
      I m now using default modern.exe UI and not modern_instpics.exe overriden by the Image.nsh include.<br>
      Sorry for that and special thx for your help Takhir and dll ! ^^</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skyfish8u8</span><br>
      <span class="post-time small text-muted">14th November 2006 07:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to do it</strong><br></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>Ok, then you'd have to edit the UI file with Resource Hacker, add a place holder for an image where you want it to be and then do the image loading and setting on yourself using System.dll. The code for loading and setting images can be found in exec.c under EW_SETBRANDINGIMAGE. You should use that as a refernce for the System.dll calls. To get the HWND of the place holder you should use:<br>
        <br>
        FindWindow $0 "#32770" "" $HWNDPARENT<br>
        GetDlgItem $0 $0 &lt;insert control id&gt;<br>
        # load image...<br>
        SendMessage $0 &lt;insert value of STM_SETIMAGE here&gt; &lt;insert value of IMAGE_BITMAP here&gt; &lt;insert handle to loaded image here&gt;</b>
      </blockquote>Kichik:<br>
      I'm a newbie in NSIS, Would you tell me that how can i do it ?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">14th November 2006 23:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See the result of this thread:<br>
      <br>
      <a href="http://nsis.sourceforge.net/wiki/ModernUI_Mod_to_Display_Images_while_installing_files" target="_blank">http://nsis.sourceforge.net/wiki/Mod...stalling_files</a></p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>