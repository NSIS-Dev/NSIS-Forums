<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="VPatch development" />

  <title>VPatch development - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">VPatch development</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=106236">VPatch development</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">20th September 2002 19:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>VPatch development</strong><br />
      It's been really quiet about VPatch the last time (VPatch is a program which can calculate differences between 2 files, and then create a small .EXE program out of it which updates one file to the other one). I'm currently rewriting VPatch v1.21 and will release a beta version soon. It's about 15% faster which is nice :D<br />
      These faster versions based on the current algoritm will be called v1.5x.<br />
      <br />
      After that, I'm thinking about VPatch 2.0 with a completely different algoritm. Does anyone have ideas about patching? VPatch 1.x currently searches for large similar blocks (typically 256-1024 byte blocks). Performance issues can't make this smaller with 1.x algoritm.<br />
      <br />
      If you have any ideas I'd like to hear them!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sdbarker</span><br />
      <span class="post-time small text-muted">20th September 2002 20:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">... nsis fits into this how? I'm confused?<br />
      <br />
      -Scott</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">20th September 2002 20:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS can be used to make installers, but if you want to change a 10 MB file just a little bit (-&gt;update), then you don't want to include the entire file. Hence you use VPatch to create a patch file, and then use it inside NSIS to update this file on the users PC.<br />
      I made it because it's useful in combination with NSIS :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MoNKi</span><br />
      <span class="post-time small text-muted">20th September 2002 21:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm trying to make a patch engine too and it works like you, searching for similar blocks, it first search blocks of size 1/2*"bigger file size" and aproximates to a power of 2, then 1/4*"bigger file size", 1/8,.... It stops when the block size is 32 because for block size 16 it takes very,very long time if the files are very diferents.<br />
      If i found a block in block size=1024 then this block is marked as found and in the next iteration (512) skipt this block (for speed gain). The advantages: is very fast in very similar files. Disadvantages: very slow in other cases.<br />
      <br />
      I'm was working in a new algorithm, but it needs a bigger amount of memory (8*new file size :(). If i discover a new algorithm i will tell you.<br />
      <br />
      (Sorry for my poor english)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">20th September 2002 21:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you make a VPatch NSIS DLL?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">21st September 2002 10:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I probably should make a NSIS DLL instead of the current 3KB EXE runtime :D<br />
      I don't know much C so it'll be a little experimenting to merge them.<br />
      <br />
      To MoNKI:<br />
      sounds nice, since my program only goes down to about 128/256 block sizes (depends on settings). However performance is greatly dependant on the type of file. If there are large similarities it is very fast, but EXE files for example are incredibly slow and give almost no gain. Does your algoritm have this problem with EXE files too?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">21st September 2002 12:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Joost - I don't understand a thing about the Microsoft C++ IDE 6.0. I've just spent an hour trying to get a DLL project (and if I open the ExDLL workspace, nothing opens). :igor:<br />
      I have no idea why this project won't open. Can someone make me a simple project which compiles and exports a function?<br />
      I've attached the C EXE runtime, basically only the command line parameters (source and target filenames) need to be popped of the stack. But it's a bit hard to do if you can't create a project properly...<br />
      <br />
      Can anyone give me a hand? Thanks :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">21st September 2002 12:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oops :rolleyes:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MoNKi</span><br />
      <span class="post-time small text-muted">21st September 2002 12:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, but i haven't two good exe files to check it (around 600kb) the only exe file with diferent versións that i have are the versións of makensisw (± 20kb).<br />
      <br />
      PD: My algorithm actualy gets bigger patch files than vpatch (in teory, it not produces patch files, is in very earlier stage), maybe combining two diferent algorithms i will beat you, ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br />
      <span class="post-time small text-muted">21st September 2002 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">We're not having a competition ;)<br />
      Compression depends on the block size chosen, if you choose the same block size as with your program there probably won't be much of a difference. If the implementation is more efficient, then you can choose smaller block sizes :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
