<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS message box Q2"><title>NSIS message box Q2 - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS message box Q2</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142767">NSIS message box Q2</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br><span class="post-time small text-muted">19th July 2003 11:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS message box Q2</strong><br>You may have seen a message by me before on a message box but I found out what I wanted.<br>I want a message box that askes if you want to install into one folder(click yes) or a different folder(click no) from a regristy string. The 2 reigstry strings I want installer to use are the Winamp 2.x and the Winamp3 one.<br><br><br>PLZ help me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">19th July 2003 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What exaclly is your question? Do you want to find out how to get registry values, or how to use them in a message box?<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">19th July 2003 15:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Read the Manual...<br>You'll find usages to the <b>MessageBox</b>...<br>see also the goto statments: +0, +1, ....</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br><span class="post-time small text-muted">20th July 2003 02:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I can't understand any of that stuff. If you don't know what I'm talking about goto this page: <a href="http://yathosho.deviantart.com/" target="_blank">http://yathosho.deviantart.com/</a> then click on something that since then 7. Download it then open it. A message box should come up and it askes where to install. How does it pick out the winamp 2&amp;3 directory no matter where it is? Can someone plz make me a message box like that.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br><span class="post-time small text-muted">20th July 2003 04:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><pre>
<code>OutFile mbox.exe<br>Section ""<br>  MessageBox MB_YESNO "YES, continue installing in your Winamp 3.x \<br>directory.$\n$\n NO, install in your Winamp 2.x directory instead." \<br>IDYES yeslabel IDNO nolabel<br>  yeslabel:<br>  MessageBox MB_OK "You pressed yes"<br>  Goto done<br>  nolabel:<br>  MessageBox MB_OK "You pressed no"<br>  done:<br>SectionEnd</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">20th July 2003 04:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sunjammer, did you go to the link???? I don't think you did. That doesn't change the install dir to the directory that you have installed your winamp's into.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">20th July 2003 04:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I should have just said to Vytautas.<br>
      "....or how to use them in a message box?"<br>
      I think I need to know.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th July 2003 11:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>## $R0 = winamp2 instdir<br>## $R1 = winamp3 instdir<br>MessageBox MB_YESNO|MB_ICONQUESTION "Click Yes to install to \<br>$R0.$\r$\nClick No to install to $R1." IDNO dir2<br>StrCpy $INSTDIR $R0<br>Goto exit<br>dir2:<br>StrCpy $INSTDIR $R1<br>exit:</code>
</pre><br>
      Is that what you want?<br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">27th July 2003 01:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">um yes, sort of. But I want it to use these:<br>
      HKLM \<br>
      "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" \<br>
      "UninstallString"<br>
      <br>
      AND<br>
      <br>
      HKLM \<br>
      "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3" \<br>
      "UninstallString"</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br>
      <span class="post-time small text-muted">27th July 2003 05:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use the code from Afrow UK and add these lines before his script</p>
      <pre>
<code>ReadRegStr $R0 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" "UninstallString"<br>ReadRegStr $R1 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3" "UninstallString"</code>
</pre>This will work perfectly if both versions are installed but if one is missing the message box will not make sense so you should check to see if both versions are installed and if not then skip the message box and use the path of the installed version.<br>
      <br>
      Vytautas :)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">27th July 2003 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br>ReadRegStr $R0 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" "UninstallString"<br>ReadRegStr $R1 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3" "UninstallString"<br>StrCmp $R0 "" 0 +3<br> StrCpy $INSTDIR $R1<br>Goto exit<br>StrCmp $R1 "" 0 +3<br> StrCpy $INSTDIR $R0<br>Goto exit<br><br>## $R0 = winamp2 instdir<br>## $R1 = winamp3 instdir<br>MessageBox MB_YESNO|MB_ICONQUESTION "Click Yes to install to \<br>$R0.$\r$\nClick No to install to $R1." IDNO dir2<br>StrCpy $INSTDIR $R0<br>Goto exit<br>dir2:<br>StrCpy $INSTDIR $R1<br>exit:<br></code>
</pre><br>
      <br>
      This will work.<br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">30th July 2003 11:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">maby I shoud just stick with the last reply and edit it to my liking<br>
      :( :mad: :( :mad: :( :mad: :( :mad: :( :mad:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">30th July 2003 11:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There is nothing wrong with the script.<br>
      It works fine.<br>
      <br>
      Place in .onInit function.<br>
      <br>
      I put this part in special:<br>
      ReadRegStr $R0 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" "UninstallString"<br>
      ReadRegStr $R1 HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3" "UninstallString"<br>
      StrCmp $R0 "" 0 +3<br>
      StrCpy $INSTDIR $R1<br>
      Goto exit<br>
      StrCmp $R1 "" 0 +3<br>
      StrCpy $INSTDIR $R0<br>
      Goto exit<br>
      <br>
      It stops the message box appearing if one of the registry values is missing, because if e.g. Winamp1.x value is missing, then there is no point asking the user to optionally install to Winamp1.x dir [does not exist]<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">30th July 2003 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">does this:<br>
      WriteRegStr HKLM SOFTWARE\Pure_Krypton\Winamp3 "Install Location" $INSTDIR<br>
      create a registry string/setting (don't know the correct name to use) from the install directory that you have specified?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">30th July 2003 13:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Correct :)<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pure-krypton</span><br>
      <span class="post-time small text-muted">7th August 2003 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks a heap for the help. Shouldn't need anymore.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>