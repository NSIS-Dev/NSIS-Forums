<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MUI_DIRECTORY crash on NT 4SP6a?"><title>MUI_DIRECTORY crash on NT 4SP6a? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MUI_DIRECTORY crash on NT 4SP6a?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174068">MUI_DIRECTORY crash on NT 4SP6a?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">25th March 2004 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MUI_DIRECTORY crash on NT 4SP6a?</strong><br>Hello Everyone!,<br><br>I'm having an issue that only occurs on Windows NT4. When I run the Basic example that is included with NSIS it reproduces the problem. The problem is when I click the next button on the components screen to go to the directory screen I get an access violation error and the installer aborts.<br><br>What is causing this behaviour? If I remark the call to insert the directory page, the issue doesn't occur, but I'd like my end-user to be able to define the install dir.<br><br>NSIS 2.0 (from CVS 2004/03/24 4pm EST)<br>NT 4 SP 6a<br><br><br>Any help would be appreciated.<br><br>Cheers,<br><br>ZIMSMS</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">25th March 2004 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please try the stable 2.0 release.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">25th March 2004 15:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Joost,<br><br>I can't use the stable one, because of the browse install bug you fixed for me. This was fine in the stable release, it's in the 'special one'.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">25th March 2004 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So it's a problem with the development version? Can you help us finding out when the problem was introduced?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">25th March 2004 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have one compiled on March 2 which works before the browse fix, and one on the 11th that doesn't. So it looks like it was introduced on the 2nd because that's when I built with the changes you gave me for the browse installation bug. I also have one built on the second a few hours after the other that doesn't work but has the browse fix, so that has to be it. I hope that helps.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th March 2004 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What's the exact error mesasge shown?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">26th March 2004 16:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here's an image of the error.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th March 2004 17:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What's the error without Dr. Watson? Can you get a stack trace (WinDbg.exe, VC, etc.)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">26th March 2004 18:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I apologize, but there is no development environment on our nt4 box. However, here is the dr watson log. I made sure it was empty before creating the crash. I used basic.exe (basic.nsi) to do this.<br><br><br><font size="1">[attached below]</font></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">26th March 2004 18:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Looks like GetDiskFreeSpaceExW, isn't supported on NT4 using unicows.dll?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th March 2004 18:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No, GetDiskFreeSpaceExW is supported on NT4. The problem is probably wrong documentation in MSDN. It looks like GetDiskFreeSpaceExW doesn't check if one of its parameters is NULL like MSDN says it should.<br><br>Please attach large files/logs next time.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">26th March 2004 18:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik,<br><br>Sorry, I tried to attach it as a file, but it was too big. I guess I could have compressed it, my apologies. When should this be fixed?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">24th April 2004 20:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Fixed in latest CVS version.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mrtech</span><br><span class="post-time small text-muted">29th April 2004 20:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Tried the latest dev build, but I'm still seeing this crash on NT systems, any help?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">29th April 2004 20:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Even though you have the latest CVS, it is not in the included binaries. You will need to rebuild.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mrtech</span><br><span class="post-time small text-muted">29th April 2004 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">??, the latest Dev Snaphost is 4/29 the patch was checked in 4/24. I've downloaded the dev snapshot, installed it, rebuilt my installer and tested with no success.<br><br>What am I doing wrong here?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">29th April 2004 23:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">"Even though you have the latest CVS, it is not in the included binaries. You will need to rebuild."<br><br>This refers to rebuilding the NSIS compiler (makensis.exe), not rebuilding your script.<br><br>If you cannot rebuild the NSIS compiler, you'll need to wait until a new binary version of it is available.<br><br>You can check the Changelog (<a href="http://nsis.sourceforge.net/development/changelog/" target="_blank">http://nsis.sourceforge.net/development/changelog/</a>) to see if a new NSIS compiler (makensis.exe) is available.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>