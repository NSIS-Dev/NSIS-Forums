<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Another question" />

  <title>Another question - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Another question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=133142">Another question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th April 2003 23:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Another question</strong><br />
      I'm going to make up an updates program for our Quake2 D-Day: Normandy mod, and I am wondering if it is possible for my program to download all kinds of files off a webserver.<br />
      <br />
      This might be just standard .txt files, or maybe in someother puretext format (I'm currently unsure)<br />
      <br />
      This isn't for the purpose of downloading the updates, but is for getting the list of updates which we can update using php onto their local computer. My program can then use that list.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">26th April 2003 09:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can be downloaded any type of file (with NSISdl plugin). In my program (for example), I download .zip and .ini files to upgrade it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th April 2003 13:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Good good!<br />
      In my experiance, I was thinking NSISdl would not when it would not download from links like this:<br />
      <br />
      <a href="http://myweb.tiscali.co.uk/afrowuk/downloads.php?id=102" target="_blank">http://myweb.tiscali.co.uk/afrowuk/downloads.php?id=102</a><br />
      <br />
      This won't work with NSISdl, sine it hasnn't got any file extension on the end.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">26th April 2003 13:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's not true. NSIS Update uses NSISdl to check for updates, it's also a PHP page. Maybe you did not send the required headers, what is the error message?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th April 2003 18:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here's what I have right now:<br />
      <br /></p>
      <pre>
<code><br />StrCpy $R1 0<br />updateloop:<br />IntOp $R1 $R1 + 1<br />StrCmp $R1 10 0 +2<br />Quit<br /><br />ReadINIStr $R0 "$EXEDIR\settings.txt" "Settings" "MasterServer"<br /><br />NSISdl::download $R0 "$TEMP\ddayupdater\main\updates.txt"<br />Pop $R0<br />  StrCmp $R0 "success" +3<br />    MessageBox MB_OK "Error: Not connected to internet,$\nor the updates MasterServer is down."<br />    Goto updateloop<br /></code>
</pre><br />
      <br />
      The address it reads out of the INI file is <a href="http://myweb.tiscali.co.uk/afrowuk/ddayupdates/updates.txt" target="_blank">http://myweb.tiscali.co.uk/afrowuk/d...es/updates.txt</a><br />
      <br />
      You click on that link and it will load fine, but if I try and download it like the code shows, it just fails.<br />
      <br />
      What's wrong?<br />
      <br />
      -Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th April 2003 18:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I founf the problem. I have to create the directory before hand and then it will download to that directory.<br />
      <br />
      It would be nice if NSISdl would work without having to specify a SaveAs path / file, since you may be downloading from one of those php links I described above, you won't know what the file name or extension will be, so therefore you cannot do a SaveAs.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">26th April 2003 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Create the subfolder $TEMP\ddayupdater\main\ before downloading.<br />
      <br />
      [EDIT]I posted some minutes after Afrow UK found the answer! (beat by the time):) [/EDIT]</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">27th April 2003 17:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Afrow, you can create another PHP script that will output the name of the file and use it as the path to save the file with the second download.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
