<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="to un. or not to un. that is the question" />

  <title>to un. or not to un. that is the question - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">to un. or not to un. that is the question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=229187">to un. or not to un. that is the question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hgerstung</span><br />
      <span class="post-time small text-muted">24th October 2005 08:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>to un. or not to un. that is the question</strong><br />
      Hi!<br />
      <br />
      This un./not un. stuff is driving me crazy. I am trying to use the Path manipulation code from <a href="http://nsis.sourceforge.net/wiki/Path_Manipulation" target="_blank">http://nsis.sourceforge.net/wiki/Path_Manipulation</a> in order to add my programs binary directory to the path under Windows NT/2000/XP in a persistent way but cannot get rid of those x&amp;%!rgh-compiler errors related to the "un." prefix stuff. I would like to use the macro "RemoveFromPath" while in installer and uninstaller mode. It compiles but at the end says:<br />
      <br />
      Processed 1 file, writing output:<br />
      Adding plug-ins initializing function... Done!<br />
      Error: resolving uninstall function "un.RemoveFromPath" in uninstall section "Uninstall" (0)<br />
      Note: uninstall functions must begin with "un.", and install functions must not<br />
      Error - aborting creation process<br />
      <br />
      which reminds me of some odd problems I had in the past with this stuff (un.) ... I just would like to propose that in a future version we could simply be allowed to call un. functions while in installer mode. If I explicitely say "un.xxxx" the compiler could be nice and just pretends that I know that I want that function and not the installer-version of it...<br />
      <br />
      But back to this problem:<br />
      Any hints what I can check?<br />
      I put the two functions AddToPath and RemoveFromPath as well as the rest of that utility stuff shown on the Wiki page in an include file "path.nsh" and include this at the beginning of my installer. What the heck can I do to let the pig fly?<br />
      <br />
      Thanks in advance,<br />
      kind regards,<br />
      Heiko</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">24th October 2005 09:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS compiller cannot share source code functions, all the code with 'un' prefix belongs to uninstaller only and will be used for uninstaller.exe compilation. The rest of code will be used in installer.exe build. May be in 3.0 version of NSIS ;) To use macro in both programs, use macro as the only content of 2 functions:</p>
      <pre>
<code><br />Function A2P<br />!macro AddToPath<br />FunctionEnd<br /><br />Function un.A2P<br />!macro AddToPath<br />FunctionEnd<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">25th October 2005 14:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could call the macro directly (!insertmacro XYZ). This may increase your code size if you do this more than once (inst+uninst) in your code. But I prefer this so I don't have the hassle with "un." for helper functions.<br />
      <br />
      One more point: If you have a function you do not use, you get a warning. Macros don't cause warnings. So I think "pure macro" is a very practical solution for little helpers.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
