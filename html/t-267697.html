<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MUI_PAGE_INSTFILES: change bgcolor"><title>MUI_PAGE_INSTFILES: change bgcolor - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MUI_PAGE_INSTFILES: change bgcolor</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=267697">MUI_PAGE_INSTFILES: change bgcolor</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">gerome69</span><br><span class="post-time small text-muted">13th March 2007 15:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MUI_PAGE_INSTFILES: change bgcolor</strong><br>Hi together!<br>Is it possible to change the background color of the page<br>MUI_PAGE_INSTFILES<br><br>If yes: how?<br><br>Thanks for Tips, Bernd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">13th March 2007 16:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you want to change the bkg color, this wiki page might help start,<br><br><a href="http://nsis.sourceforge.net/Demonstrating_Page%27s_Custom_Functions_Pre_Show_Leave" target="_blank">http://nsis.sourceforge.net/Demonstr...Pre_Show_Leave</a><br><br>if you want to change the progress bar then you'll find the answer in MUI documentation<br><br><a href="http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html" target="_blank">http://nsis.sourceforge.net/Docs/Mod...UI/Readme.html</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">gerome69</span><br><span class="post-time small text-muted">13th March 2007 16:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>If you want to change the bkg color, this wiki page might help start,<br><a href="http://nsis.sourceforge.net/Demonstrating_Page%27s_Custom_Functions_Pre_Show_Leave" target="_blank">http://nsis.sourceforge.net/Demonstr...Pre_Show_Leave</a></blockquote>But they do nothing else than:<br>!insertmacro MUI_PAGE_INSTFILES<br><br>And for other pages some things with FindWindow and SetCtlColors.<br>I managed this for my custom pages in the same way, but my problem is that I don't have any ideas "to get a foot in the door", while the page MUI_PAGE_INSTFILES is displayed. There is nothing like an eventhandler etc.<br><br><blockquote><a href="http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html" target="_blank">http://nsis.sourceforge.net/Docs/Mod...UI/Readme.html</a></blockquote>Surely I had a look at this page and did not find anything.<br><br>Greetings, Bernd</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">13th March 2007 17:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">copied from MUI documentation ;)<br><br>Installation Page Interface Settings<br><br>MUI_INSTFILESPAGE_COLORS (/windows | (foreground color: RRGGBB hexadecimal) (background color: RRGGBB hexadecimal))<br>The colors of the details screen. Use /windows for the default Windows colors.<br>Default: /windows<br><br>MUI_INSTFILESPAGE_PROGRESSBAR ("" | colored | smooth)<br>The style of the progress bar. Colored makes it use the MUI_INSTALLCOLORS.<br>Default: smooth</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Davion</span><br><span class="post-time small text-muted">13th March 2007 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You're too fast Red Wine,<br>I've just copied the same block :D<br><br>it's always good to refresh before submitting</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">gerome69</span><br><span class="post-time small text-muted">13th March 2007 17:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Red Wine</i><br>MUI_INSTFILESPAGE_COLORS (/windows | (foreground color: RRGGBB hexadecimal) (background color: RRGGBB hexadecimal))<br>The colors of the details screen. Use /windows for the default Windows colors.<br>Default: /windows</blockquote>Sorry for not reading this.<br>I tried it (maybe the wrong way) and it has no effect. My whole installer background is white, but while the progressbar for the file copying is show, the background remains in the standard windows color gray :-(<br><br>Relevant passage from my code:<br><pre>
<code><br>!include "MUI.nsh"<br>!define MUI_BGCOLOR FFFFFF<br>!define MUI_ABORTWARNING<br>!define MUI_ICON ".\icon.ico"<br>!define MUI_UNICON ".\icon.ico"<br>!define MUI_WELCOMEFINISHPAGE_BITMAP ".\side.bmp"<br>!define MUI_WELCOMEPAGE_TITLE_3LINES<br>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP ".\header.bmp"<br>!define MUI_HEADERIMAGE_UNBITMAP ".\header.bmp"<br>!define MUI_INSTFILESPAGE_COLORS "FFFFFF 00000"<br>!insertmacro MUI_PAGE_WELCOME<br>Page custom ShowSQLServerConfigDialog WriteToIni<br>!insertmacro MUI_PAGE_INSTFILES<br>!define MUI_FINISHPAGE_TITLE_3LINES<br>!define MUI_FINISHPAGE<br>!insertmacro MUI_PAGE_FINISH<br>!insertmacro MUI_UNPAGE_INSTFILES<br><br>!insertmacro MUI_LANGUAGE "German"<br></code>
</pre><br>
      <br>
      What might be wrong?<br>
      <br>
      Thanks for further help, Bernd
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">13th March 2007 17:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">post a snapshot (png) if possible showing what you want to change.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">gerome69</span><br>
      <span class="post-time small text-muted">13th March 2007 17:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Red Wine</i><br>
        <b>post a snapshot (png) if possible showing what you want to change.</b>
      </blockquote>I did. My installer should have a complete white background. But the inner window stills remains gray. How do I get a HWD to this part of the gui to change the color to white?<br>
      <br>
      Greetings, Bernd
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">13th March 2007 17:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>!define MUI_INSTFILESPAGE_PROGRESSBAR "colored"<br>!define MUI_INSTFILESPAGE_COLORS "0xFFFFFF 0xFFFFFF"<br>......<br>......<br>!define MUI_PAGE_CUSTOMFUNCTION_SHOW inst_show<br>!insertmacro MUI_PAGE_INSTFILES<br>.......<br>.......<br><br>function inst_show<br>         FindWindow $1 "#32770" "" $HWNDPARENT<br>         SetCtlColors $1 '' '0xFFFFFF'<br>functionend</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">gerome69</span><br>
      <span class="post-time small text-muted">13th March 2007 18:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Red Wine</i><br>
        <pre>
<b><code>!define MUI_INSTFILESPAGE_PROGRESSBAR "colored"<br>!define MUI_INSTFILESPAGE_COLORS "0xFFFFFF 0xFFFFFF"<br>......<br>......<br>!define MUI_PAGE_CUSTOMFUNCTION_SHOW inst_show<br>!insertmacro MUI_PAGE_INSTFILES<br>.......<br>.......<br><br>function inst_show<br>         FindWindow $1 "#32770" "" $HWNDPARENT<br>         SetCtlColors $1 '' '0xFFFFFF'<br>functionend</code></b>
</pre>
      </blockquote>:) Thanks, this works fine.<br>
      The only thing which is not 100% perfect: The background color of the progressbar remains gray.<br>
      How do I get a handle to this to change it's bgcolor to white, too?<br>
      <br>
      B.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">13th March 2007 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">"colored" makes it white for me (no XP theme-classic windows)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">gerome69</span><br>
      <span class="post-time small text-muted">13th March 2007 18:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Red Wine</i><br>
        <b>"colored" makes it white for me (no XP theme-classic windows)</b>
      </blockquote>But I want to use it also with XP style.<br>
      <br>
      What I found out now from:<br>
      Contrib\UIs\UI Holder\resource.h and resource.rc<br>
      <br>
      The element I'm looking for is not the progress bar. It is the label. And I want to change the bgcolor of this label.<br>
      <br>
      CONTROL "",IDC_INTROTEXT,"Static",...<br>
      #define IDC_INTROTEXT 1006<br>
      <br>
      So what I did now:<br>
      FindWindow $0 "#32770" "" $HWNDPARENT<br>
      GetDlgItem $1 $0 1006<br>
      <br>
      This gives me definetly an handle for the label. :-)<br>
      <br>
      Then I tried:<br>
      SetCtlColors $1 0xffffff bgcolor<br>
      =&gt; White letters on black background, exactly the opposite of what I wanted :-(<br>
      <br>
      SetCtlColors $1 0x000000 bgcolor<br>
      =&gt; Black letters on black background, nothing to see.<br>
      <br>
      SetCtlColors $1 0xffffff transparent<br>
      =&gt; White letters on black background, exactly the opposite of what I wanted :-(<br>
      <br>
      SetCtlColors $2 0xffffff transparent<br>
      =&gt; White letters on white bgground =&gt; nothing to see.<br>
      <br>
      SetCtlColors $2 0xffffff transparent<br>
      =&gt; Black letters on white ground =&gt; perfect.<br>
      No, not at all. All text are written on the label without erasing the old text. So a more or less black bar on white background appears.<br>
      <br>
      Any other ideas?<br>
      <br>
      B.<br>
      <br>
      transparent
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">13th March 2007 19:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SetCtlColors $1 "0x000000" "0xFFFFFF" ;)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">gerome69</span><br>
      <span class="post-time small text-muted">13th March 2007 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Red Wine</i><br>
        <b>SetCtlColors $1 "0x000000" "0xFFFFFF" ;)</b>
      </blockquote>Huuuh, yes that's it! Thanks for your assistence and patience.<br>
      <br>
      I'm not familiar with this WINApi function, I normally use QT framework for windows stuff.<br>
      <br>
      Greetings, Bernd
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>