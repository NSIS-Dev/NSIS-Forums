<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Nullsoft Error Handling" />

  <title>Nullsoft Error Handling - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Nullsoft Error Handling</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283441">Nullsoft Error Handling</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">slloyd</span><br />
      <span class="post-time small text-muted">19th December 2007 19:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Discussion on Nullsoft Error Handling</strong><br />
      I was hoping to start a discussion on error handling. I have been using nullsoft for quite some time and still find it quite difficult, if not impossible, to determine what causes some errors. I am interested in how others are handling errors and whether or not they feel the error handling in nullsoft lacking. Mostly, I would love to be able to capture the windows error(number or message) for errors. Some examples of problems I have had are:</p>

      <ul>
        <li>CopyFiles errors: Copy failed when the file on a CD had a crc error. The script called CopyFiles on a directory with many files so I was unable to determine what one failed. The only way I was able to determine what happened is to manually try to copy each file from the CD until I saw the windows error.</li>

        <li>RegDLL errors: Unable to see the failure message when registering a dll or ocx file. It would sure be nice to capture the windows error on this one also.</li>
      </ul>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">carlosfocker</span><br />
      <span class="post-time small text-muted">19th December 2007 20:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I agree that error handling should be beefed up. Making your installer easy to troubleshoot is i feel an important aspect to consider while coding your installer. A suggestion would be able to set a type of error rather than a generic one. Kind of like a sudo exception. Then you could check to see if FileNotFoundError was set.<br />
      <br />
      For my current error handling techniques, I include a detailedprint in the functions or macros I build to declare problems. An example would be:<br />
      <br /></p>
      <pre>
<code><br />StrCpy $R0 "c:\test\file.txt"<br />IfFileExists $R0 FileExists FileNotExists<br /><br />FileExists:<br /><br /><br />FileNotExists:<br />detailprint 'Error: $R0 does not exist.'<br /></code>
</pre><br />
      <br />
      Building this into my macros at least gives me some type of clue when it fails.<br />
      <br />
      Also, to centralize my error catching and notification, I created a macro that checks if errors were set and prints a specified message in the installer console or a messagebox.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd February 2008 12:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">End of discussion?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">carlosfocker</span><br />
      <span class="post-time small text-muted">24th February 2008 17:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I guess it isn't that important to anybody.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Daniel James</span><br />
      <span class="post-time small text-muted">11th March 2008 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Discussion on Nullsoft Error Handling</strong><br /></p>

      <blockquote>
        <i>Originally posted by slloyd</i><br />
        I was hoping to start a discussion on error handling.
      </blockquote>I'm glad you did! Pity it didn't get further.<br />
      <br />

      <blockquote>
        Mostly, I would love to be able to capture the windows error(number or message) for errors.
      </blockquote>I agree. It would be very nice to have a $ERROR variable that could be checked just as one checks errno in C, or a GetLastError function, and some way to return a textual error message based on this (in the local language, of course).<br />
      <br />
      It might also be nice to have some sort of ON ERROR construct (as in Basic), but I'm not sure it wold be easy to get agreement on the most useful semantics for that :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">yilmaz</span><br />
      <span class="post-time small text-muted">28th August 2008 03:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>error handling</strong><br />
      I am so surprised and disappointed to know taht NSIS does not have a useful error handling mechanism.<br />
      Hopefully in the next version, NSIS adds this feature.<br />
      Otherwise, we will keep on guessing on errors :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sheik</span><br />
      <span class="post-time small text-muted">29th August 2008 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Or even better, have a callback function that we can set up that NSIS will call when it detects an error during the install of files.<br />
      <br />
      We have lots of .On* functions, why not .OnError where it sends us the filename, location where it was to be installed, filesize. We can parse it, determine if we care about it or not, and send back some sort of code, like "IGNORE" or "RETRY" to tell NSIS what to do about the error.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
