<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Need help with controlling available install options" />

  <title>Need help with controlling available install options - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Need help with controlling available install options</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=310377">Need help with controlling available install options</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MikeWard</span><br />
      <span class="post-time small text-muted">20th August 2009 08:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Need help with controlling available install options</strong><br />
      Ok firstly I am fairly new to NSIS so I apologise if I am asking a question that has already been answered, I did however search for previous topics but nothing seemed to cover specifically what I am trying to do.<br />
      <br />
      Basically, my installation has 3 sections:<br />
      <br />
      Base Files<br />
      Animated Installation<br />
      Non-Animated Installation<br />
      <br />
      Now, the install file itself works just fine, however, if a user chose to install all the options, this would result in a corrupt install. As such, what I want to do is set it so that "Base Files" can not be unselected as those are required for either installation, and set it so that Animated Installation and Non-Animated Installation are unchecked by default.<br />
      <br />
      What I would then like to do is set a condition so that if a user selects the Animated Installation option, the Non-Animated Installation option would then grey out so that the user was unable to select both. Similarly if a user was to select the Non-Animated Installation option, the Animated Installation option would then grey out so that the user was unable to select both.<br />
      <br />
      This code example kind of looks like it would do what I am asking, however this looks to be for an older version of NSIS so I was unsure if this code would work for me: nsis.sourceforge.net/Controlling_Available_Install_Options<br />
      <br />
      Currently, this is how the installer looks when it gets to the choose components section, obviously having both the Animated and Non-Animated options selected is not the ideal scenario here:<br />
      <a href="http://i444.photobucket.com/albums/qq170/MikeWard88/private/setupfile.jpg" target="_blank">http://i444.photobucket.com/albums/q.../setupfile.jpg</a><br />
      <br />
      <br />
      Any help would be appreciated, and thanks in advance.<br />
      <br />
      Mike<br />
      <br />
      EDIT - I am using the latest version of NSIS.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">20th August 2009 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sections.nsh has macros that help you do this (You want the *Radio* macros)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MikeWard</span><br />
      <span class="post-time small text-muted">20th August 2009 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I should have posted this earlier, but I found an example script which works in the latest version of NSIS at the following link:<br />
      <br />
      nsis.sourceforge.net/Examples/one-section.nsi<br />
      <br />
      Needless to say I now have it successfully implemented in my install script.<br />
      <br />
      Thanks for the help anyway.<br />
      <br />
      Cheers, Mike</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">File077</span><br />
      <span class="post-time small text-muted">21st August 2009 09:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>I hope this helps</strong><br />
      Actually, I am in the middle of doing the same thing, so I might as well paste my script here for you to copy.<br />
      <br />
      Try to look over all of the crap you don't need and just go to the juice. The examples that helped me are the mathtest.nsi believe it or not.<br />
      <br />
      Please excuse all of the extra code, again.<br />
      <br />
      What I did was set a variable called install_type<br />
      then depending on which radio button was selected, I set the variable's value to 0 or 1, in the .onInit I set it to -1 for No radio buttons selected.<br />
      <br />
      The current bug I am having myself, is that if none are selected, and you press cancel, it doesn't close. But hopefully this is a start.<br />
      <br />
      I am also going to provide the ini file I used as an attachment. I really hope this helps. It isn't bug free cause I am writing it myself this very second.<br />
      <br />
      <br /></p>
      <pre>
<code><br />/******************************************************************************<br />;NSIS Modern User Interface<br />;Copyright 2004-2009 Josh Lee<br />; Special thanks to Bob Gneu for helping with the Registry Key logic of UT3<br />;--------------------------------<br /><br />-1 Compressor Setings<br />-2 User Over-ridable Config<br />-3 Constants<br />-4 Registry Information<br />-5 Variable Decleration<br />-6 Pages<br />-7 Language Definition<br />-8 Section Over-rides<br />-8.5  Page Overrides (after sections for variable def.)<br />-9 Function Decleration<br />******************************************************************************/<br />/* BUGS, xxx:todo list<br />license is always in spanish<br /><br />*/<br />!include "MUI.nsh"<br />!include "Sections.nsh"<br /><br />!include FileFunc.nsh<br />!include "StrFunc.nsh"<br />${StrRep}<br /><br />        <br />;=== Runtime Switches<br />SetCompress                     Auto<br />SetCompressor                   /SOLID lzma<br />SetCompressorDictSize   32<br />SetDatablockOptimize    On<br />XPStyle                                 on<br />CRCCheck                        on<br />AutoCloseWindow                 True<br />;Request application privileges for Windows Vista<br />RequestExecutionLevel   user<br /><br /><br />;!insertmacro MUI_LANGUAGE "English" ;first language is the default language<br />;LoadLanguageFile "${NSISDIR}\Contrib\Language files\French.nlf"<br />;LoadLanguageFile "${NSISDIR}\Contrib\Language files\German.nlf"<br />;LoadLanguageFile "${NSISDIR}\Contrib\Language files\Italian.nlf"<br />;LoadLanguageFile "${NSISDIR}\Contrib\Language files\Spanish.nlf"<br /><br />LicenseLangString myLicenseData ${LANG_ENGLISH} "required_files\licenses\english.txt"<br />LicenseLangString myLicenseData ${LANG_FRENCH}  "required_files\licenses\french.txt"<br />LicenseLangString myLicenseData ${LANG_GERMAN}  "required_files\licenses\german.txt"<br />LicenseLangString myLicenseData ${LANG_ITALIAN} "required_files\licenses\italian.txt"<br />LicenseLangString myLicenseData ${LANG_SPANISH} "required_files\licenses\spanish.txt"<br />LicenseData $(myLicenseData)<br />###############################################################################<br />###############################################################################<br /># Begin Config<br />;--------------------------------<br />;General<br /><br />        ;Name and file<br />         NAME "Unreal Tournament 3 - Jailbreak"<br />        !define VERSION "Alpha9"<br />        !define SHORTNAME "JB_${VERSION}"<br />        !define UNINSTALLER "Uninstall_Jailbreak.exe"<br />        ; Version of installer in X.X.X.X format (requried by NSIS2 MUI)<br />        !define JAILBREAK_INSTALLER_VERSION "1.0.0.0"<br />        <br />        ; Installer File name<br />        OutFile "${SHORTNAME}_Installer.exe"<br />        <br />         ;Default installation folder<br />    InstallDir "$DOCUMENTS\My Games\Unreal Tournament 3\UTGame\Published\CookedPC"<br />        <br />        ; images<br />        ;=== Icon &amp; Stye ===<br />        !define AP_ICON "required_files\JBIcon.ico"<br />        !define LOGO "required_files\logo.bmp"<br />        !define SPLASH "required_files\logo.bmp"<br />        ;=== BEGIN: BASIC INFORMATION<br />        !define NAME "Unreal Tournament 3 - Jailbreak x"<br />        !define Caption "${NAME} - Installer"<br />        ;=== Program Icon<br />        Icon "${AP_ICON}"<br />        !define STARTMENUFOLDER "Unreal Tournament 3\PlanetJailbreak.com"<br />        !define DEFAULT_DESTINATION "${InstallDir}"<br />        !define CHECKRUNNING "UT3.exe"<br />        !define CLOSENAME "Unreal Tournament 3"<br />        !define PRODUCT_WEB_SITE "http://www.PlanetJailbreak.com"<br />        !define INSTALLERCOMMENTS "For additional details, visit PlanetJailbreak.com xxx:todo"<br />        !define INSTALLERADDITIONALTRADEMARKS "Jailbreak is a Trademark of PlanetJailbreakÃ¢â€žÂ¢" ;end this entry with a period and a space if used<br />        !define INSTALLERLEGALCOPYRIGHT "PlanetJailbreakÃ¢â€žÂ¢ and contributors."<br />        ;!define LICENSEAGREEMENT "required_files\JBLicense.txt"<br />        !define PRODUCT_COMPANY "PlanetJailBreak.com"<br />        !define MESSAGE_INTRO           "UT3 Jailbreak has been installed."<br />        !define MESSAGE_SIGNATURE       "$\n$\nFor further assistance please use the forums at PlanetJailbreak.com. $\n$\n- UT3 Jailbreak | Project Lead - Wormbo"<br />        !define SUCCESS_MESSAGE         "${MESSAGE_INTRO} $\n$\nThere are shortcuts available to you in your installation directory. ${MESSAGE_SIGNATURE}"<br />        !define FAILURE_MESSAGE         "${MESSAGE_INTRO} $\n$\nUnfortunately your UT3 installation was not found in the registry. ${MESSAGE_SIGNATURE}"<br />        ;Interface Settings<br />        ;=== Header Icon<br />    !define MUI_ICON "${AP_ICON}"<br />        !define MUI_ABORTWARNING<br />        !define MUI_WELCOMEFINISHPAGE_BITMAP "${LOGO}"<br />        !define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveDirectory<br />        <br /><br />        # Command Line<br />        !define UT3_BINARY_LOC                          "Binaries\UT3.exe"<br />        !define STEAM_UT3_DIR               "\steamapps\common\unreal tournament 3\"<br /><br />        !define UT3_CMD_OPTIONS                         "-mod=..\Jailbreak -solomod"<br /><br />        !define EDITOR_LNK                              "UnrealED - Jailbreak.lnk"<br />        !define GAME_LNK                                        "Play Jailbreak.lnk"<br /># End Config<br />###############################################################################<br />###############################################################################<br /># Begin Constants<br />;--------------------------------------------------------------------------------------------------------------------<br />#  Branding Variables<br />;!include "required_files\constants.nsh"<br />        BrandingText "${INSTALLERLEGALCOPYRIGHT}"<br />        VIProductVersion "${JAILBREAK_INSTALLER_VERSION}"<br />        VIAddVersionKey ProductName "${NAME}"<br />        VIAddVersionKey Comments "${INSTALLERCOMMENTS}"<br />        VIAddVersionKey PRODUCT_COMPANY "${PRODUCT_COMPANY}"<br />        VIAddVersionKey ProductWebsite "${PRODUCT_WEB_SITE}"<br />        VIAddVersionKey Website "${PRODUCT_WEB_SITE}"<br />        VIAddVersionKey LegalCopyright "${INSTALLERLEGALCOPYRIGHT}"<br />        VIAddVersionKey FileDescription "${NAME}"<br />        VIAddVersionKey FileVersion "${VERSION}"<br />        VIAddVersionKey ProductVersion "${VERSION}"<br />        VIAddVersionKey InternalName "${NAME}"<br />        VIAddVersionKey LegalTrademarks "${INSTALLERADDITIONALTRADEMARKS}"<br />        VIAddVersionKey OriginalFilename "${FILENAME}.paf.exe"<br />        VIAddVersionKey PlanetJailbreak.comInstallerVersion "${JAILBREAK_INSTALLER_VERSION}"<br /># End Constants<br />###############################################################################<br />###############################################################################<br /># Begin  Registry Information<br />;--------------------------------------------------------------------------------------------------------------------<br />#  Registry Key Variables<br />;!include "required_files\registry_keys.nsh"<br /><br />;--------------------------------<br />        ;Get installation folder from registry if available<br />        InstallDirRegKey HKCU "Software\${PRODUCT_COMPANY}" ""<br />        ;language<br />        !define MUI_LANGDLL_REGISTRY_ROOT "HKCU" <br />        !define MUI_LANGDLL_REGISTRY_KEY "Software\${PRODUCT_COMPANY}" <br />        !define MUI_LANGDLL_REGISTRY_VALUENAME "Installer Language"<br />        ;start menu<br />        !define MUI_STARTMENUPAGE_REGISTRY_ROOT "HKCU" <br />        !define MUI_STARTMENUPAGE_REGISTRY_KEY "Software\${PRODUCT_COMAPNY}" <br />        !define MUI_STARTMENUPAGE_REGISTRY_VALUENAME "Start Menu Folder"<br />        <br />        !define PRODUCT_UNINST_KEY              "Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_COMPANY}"<br />        !define PRODUCT_UNINST_ROOT_KEY "HKLM"<br />        # UT3 CU Registry Keys<br />        !define INSTALL_CU_KEY_UNK1_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{C019D439-E7F8-49EB-85FA-6D0C8CCBDA23}"<br />        !define INSTALL_CU_KEY_UNK2_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{A007C579-B78D-4FDE-A85A-16987A251E53}"<br />        !define INSTALL_CU_KEY_UNK3_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{FDBBAF14-5ED8-49B7-A5BE-1C35668B074D}"<br />        !define INSTALL_CU_KEY_UNK4_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{69082C6E-1944-4EAD-B119-06DCBF492C3F}"<br />        !define INSTALL_CU_KEY_US_WIN_32        "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{BFA90209-7AFF-4DB6-8E4B-E57305751AD7}"<br />        !define INSTALL_CU_KEY_UNK1_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{C019D439-E7F8-49EB-85FA-6D0C8CCBDA23}"<br />        !define INSTALL_CU_KEY_UNK2_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{A007C579-B78D-4FDE-A85A-16987A251E53}"<br />        !define INSTALL_CU_KEY_UNK3_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{FDBBAF14-5ED8-49B7-A5BE-1C35668B074D}"<br />        !define INSTALL_CU_KEY_UNK4_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{69082C6E-1944-4EAD-B119-06DCBF492C3F}"<br />        !define INSTALL_CU_KEY_US_WIN_64        "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\InstallShield_{BFA90209-7AFF-4DB6-8E4B-E57305751AD7}"<br /><br />        # UT3 LM Registry Keys<br />        !define INSTALL_LM_KEY_UNK1_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{C019D439-E7F8-49EB-85FA-6D0C8CCBDA23}"<br />        !define INSTALL_LM_KEY_UNK2_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{A007C579-B78D-4FDE-A85A-16987A251E53}"<br />        !define INSTALL_LM_KEY_UNK3_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{FDBBAF14-5ED8-49B7-A5BE-1C35668B074D}"<br />        !define INSTALL_LM_KEY_UNK4_32          "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{69082C6E-1944-4EAD-B119-06DCBF492C3F}"<br />        !define INSTALL_LM_KEY_US_WIN_32        "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{BFA90209-7AFF-4DB6-8E4B-E57305751AD7}"<br />        !define INSTALL_LM_KEY_UNK1_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{C019D439-E7F8-49EB-85FA-6D0C8CCBDA23}"<br />        !define INSTALL_LM_KEY_UNK2_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{A007C579-B78D-4FDE-A85A-16987A251E53}"<br />        !define INSTALL_LM_KEY_UNK3_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{FDBBAF14-5ED8-49B7-A5BE-1C35668B074D}"<br />        !define INSTALL_LM_KEY_UNK4_64          "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{69082C6E-1944-4EAD-B119-06DCBF492C3F}"<br />        !define INSTALL_LM_KEY_US_WIN_64        "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{BFA90209-7AFF-4DB6-8E4B-E57305751AD7}"<br />        # Steam Registry Keys<br />        !define INSTALL_KEY_STEAM               "Software\Valve\Steam"<br /><br /><br /># End Registry Information<br />###############################################################################<br />###############################################################################<br /># Begin Variable Decleration<br />;--------------------------------------------------------------------------------------------------------------------<br />;Variables<br />Var StartMenuFolder <br />Var install_type ; 0 regular - 1 nohome <br /># End Variable Decloration<br />###############################################################################<br />###############################################################################<br /># Begin Pages<br />;--------------------------------------------------------------------------------------------------------------------<br />;Pages<br />ReserveFile "ioInstallType.ini"<br />!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />        ; Installer Pages<br />;       !define MUI_CUSTOMFUNCTION_GUIINIT CustomPageFunction<br /><br />        !define MUI_WELCOMEPAGE_TITLE "Unreal Tournament 3 - Jailbreak"<br />        !insertmacro MUI_PAGE_WELCOME<br /><br />        #!ifdef LICENSEAGREEMENT<br />        !define MUI_LICENSEPAGE_CHECKBOX<br />        !insertmacro MUI_PAGE_LICENSE $(myLicenseData)<br />        #!endif<br />        <br />        <br />        Page custom PAGE_ioInstallType<br /><br />        !insertmacro MUI_PAGE_COMPONENTS<br />        !insertmacro MUI_PAGE_DIRECTORY<br />        <br />        !insertmacro MUI_PAGE_STARTMENU Application $StartMenuFolder<br />                !define MUI_STARTPAGE_TITLE "Test"<br />  <br />        !insertmacro MUI_PAGE_INSTFILES<br />        <br />                !define MUI_FINISHPAGE_TITLE "Jailbreak"<br />        !insertmacro MUI_PAGE_FINISH<br />                !define MUI_FINISHPAGE_TEXT "$(finish)"<br />        ; Un-installer Pages<br />        !insertmacro MUI_UNPAGE_CONFIRM<br />        !insertmacro MUI_UNPAGE_INSTFILES<br /># End Pages<br /><br />Function PAGE_ioInstallType  ;FunctionName defined with Page command<br />  ;Feel free to improve here...<br />  <br />  ;StrCpy $ioInstallTypeFile "ioInstallType.ini"<br />  <br />  ;Set the Language lines here before displaying the form<br />  IntOp $install_type 0 - 1<br />  Reset:<br />          !insertmacro MUI_HEADER_TEXT "Install Type" "Please select one of the folowing before continuing."<br />          ;!insertmacro MUI_INSTALLOPTIONS_INITDIALOG "${ioInstallTypeFile}"<br /><br />          !insertmacro MUI_INSTALLOPTIONS_EXTRACT "ioInstallType.ini"<br />          ;File /oname="ioInstallType.ini" ".\ioInstallType.ini"<br />                !insertmacro MUI_INSTALLOPTIONS_WRITE "ioInstallType.ini" "Field 1" "Text" "Default (Curent User)"<br />                !insertmacro MUI_INSTALLOPTIONS_WRITE "ioInstallType.ini" "Field 2" "Text" "Advanced (--nohomedir)"<br />                !insertmacro MUI_INSTALLOPTIONS_WRITE "ioInstallType.ini" "Field 3" "Text" "This is the standard Jailbreak installation."<br />                !insertmacro MUI_INSTALLOPTIONS_WRITE "ioInstallType.ini" "Field 4" "Text" "For users that have specified '--nohomedir' for their game. Only recommended for experienced users."<br />                !insertmacro MUI_INSTALLOPTIONS_WRITE "ioInstallType.ini" "Field 5" "Text" "Choose the type of installation you prefer, then click Next."<br />                !insertmacro MUI_INSTALLOPTIONS_DISPLAY "ioInstallType.ini"<br />                ;--------------------------------------------------------------------------------------------------------------------<br />                !insertmacro INSTALLOPTIONS_READ $R0 "ioInstallType.ini" "Field 1" "State"<br />                IntCmp $R0 1 do_STANDARD_INSTALL <br />                ;--------------------------------------------------------------------------------------------------------------------<br />                !insertmacro INSTALLOPTIONS_READ $R0 "ioInstallType.ini" "Field 2" "State"<br />                IntCmp $R0 1 do_CUSTOM_INSTALL<br />                ;--------------------------------------------------------------------------------------------------------------------<br />                IntCmp $install_type -1 StartReset<br />                <br />                StartReset:<br />                        MessageBox MB_OK|MB_ICONEXCLAMATION "Please select an option."<br />                        Goto Reset<br />                        <br />                do_STANDARD_INSTALL:<br />                        IntOp $install_type 0 + 0<br />                        Abort<br />                do_CUSTOM_INSTALL:<br />                        IntOp $install_type 0 + 1<br />                        Abort<br />FunctionEnd<br /><br /><br /><br />###############################################################################<br />###############################################################################<br /># Begin Language Definition<br />;--------------------------------------------------------------------------------------------------------------------<br />;Language Selection Dialog Settings<br />        ;Remember the installer language<br /><br />;--------------------------------------------------------------------------------------------------------------------<br />;Languages<br />;!include "required_files\language_setup.nsh"<br />         !insertmacro MUI_LANGUAGE "English" ;first language is the default language<br />         !insertmacro MUI_LANGUAGE "French"<br />/*       <br />         !insertmacro MUI_LANGUAGE "German"<br />          !insertmacro MUI_LANGUAGE "Spanish"<br />          !insertmacro MUI_LANGUAGE "SpanishInternational"<br />          !insertmacro MUI_LANGUAGE "SimpChinese"<br />          !insertmacro MUI_LANGUAGE "TradChinese"<br />          !insertmacro MUI_LANGUAGE "Japanese"<br />          !insertmacro MUI_LANGUAGE "Korean"<br />          !insertmacro MUI_LANGUAGE "Italian"<br />          !insertmacro MUI_LANGUAGE "Dutch"<br />          !insertmacro MUI_LANGUAGE "Danish"<br />          !insertmacro MUI_LANGUAGE "Swedish"<br />          !insertmacro MUI_LANGUAGE "Norwegian"<br />          !insertmacro MUI_LANGUAGE "NorwegianNynorsk"<br />          !insertmacro MUI_LANGUAGE "Finnish"<br />          !insertmacro MUI_LANGUAGE "Greek"<br />          !insertmacro MUI_LANGUAGE "Russian"<br />          !insertmacro MUI_LANGUAGE "Portuguese"<br />          !insertmacro MUI_LANGUAGE "PortugueseBR"<br />          !insertmacro MUI_LANGUAGE "Polish"<br />          !insertmacro MUI_LANGUAGE "Ukrainian"<br />          !insertmacro MUI_LANGUAGE "Czech"<br />          !insertmacro MUI_LANGUAGE "Slovak"<br />          !insertmacro MUI_LANGUAGE "Croatian"<br />          !insertmacro MUI_LANGUAGE "Bulgarian"<br />          !insertmacro MUI_LANGUAGE "Hungarian"<br />          !insertmacro MUI_LANGUAGE "Thai"<br />          !insertmacro MUI_LANGUAGE "Romanian"<br />          !insertmacro MUI_LANGUAGE "Latvian"<br />          !insertmacro MUI_LANGUAGE "Macedonian"<br />          !insertmacro MUI_LANGUAGE "Estonian"<br />          !insertmacro MUI_LANGUAGE "Turkish"<br />          !insertmacro MUI_LANGUAGE "Lithuanian"<br />          !insertmacro MUI_LANGUAGE "Slovenian"<br />          !insertmacro MUI_LANGUAGE "Serbian"<br />          !insertmacro MUI_LANGUAGE "SerbianLatin"<br />          !insertmacro MUI_LANGUAGE "Arabic"<br />          !insertmacro MUI_LANGUAGE "Farsi"<br />          !insertmacro MUI_LANGUAGE "Hebrew"<br />          !insertmacro MUI_LANGUAGE "Indonesian"<br />          !insertmacro MUI_LANGUAGE "Mongolian"<br />          !insertmacro MUI_LANGUAGE "Luxembourgish"<br />          !insertmacro MUI_LANGUAGE "Albanian"<br />          !insertmacro MUI_LANGUAGE "Breton"<br />          !insertmacro MUI_LANGUAGE "Belarusian"<br />          !insertmacro MUI_LANGUAGE "Icelandic"<br />          !insertmacro MUI_LANGUAGE "Malay"<br />          !insertmacro MUI_LANGUAGE "Bosnian"<br />          !insertmacro MUI_LANGUAGE "Kurdish"<br />          !insertmacro MUI_LANGUAGE "Irish"<br />          !insertmacro MUI_LANGUAGE "Uzbek"<br />          !insertmacro MUI_LANGUAGE "Galician"<br />          !insertmacro MUI_LANGUAGE "Afrikaans"<br />          !insertmacro MUI_LANGUAGE "Catalan"<br />          !insertmacro MUI_LANGUAGE "Esperanto"<br />*/<br /><br />                ;LangString welcome ${LANG_ENGLISH} "This wizard will guide you through the installation of ${NAME}.\r\n\r\nIf you are upgrading an existing installation of ${NAME}, please close UT3 before proceeding.\r\n\r\nClick Next to continue."<br />                LangString finish ${LANG_ENGLISH} "${NAME} has been installed on your device.\r\n\r\nClick Finish to close this wizard."<br />                LangString runwarning ${LANG_ENGLISH} "Please close all instances of ${CLOSENAME} and then click OK.  Jailbreak Mod can not be upgraded while it is running."<br />                LangString invaliddirectory ${LANG_ENGLISH} "The destination folder you selected is invalid.  Please choose a valid folder."<br />                LangString notenoughspace ${LANG_ENGLISH} "The device you have selected to install to does not have enough free space for Jailbreak."<br />;       LangString required ${LANG_ENGLISH} "required"<br />                ;LangString checkforplatform ${LANG_ENGLISH} "Checking for previous install of Jailbreak"<br />                ;LangString refreshmenu ${LANG_ENGLISH} "Refreshing Jailbreak Menu"<br /><br /><br /><br /># End Language Definition<br />###############################################################################<br />;--------------------------------------------------------------------------------------------------------------------<br />;Reserve Files<br />!insertmacro MUI_RESERVEFILE_LANGDLL<br />  ;If you are using solid compression, files that are required before<br />  ;the actual installation should be stored first in the data block,<br />  ;because this will make your installer start faster.<br />  <br />###############################################################################<br />###############################################################################<br /># Begin Section Over-rides<br />;--------------------------------<br />;Installer Sections<br /><br />Section "!Jailbreak (required)" section_jailbreak_main<br />SectionIn RO<br />        SetOutPath $INSTDIR<br /><br />        ;Store installation folder<br />        WriteRegStr HKCU "Software\Jailbreak" "" $INSTDIR<br /><br /><br />        # Begin copying necessary files over<br />        ;File /oname=$OUTDIR\readme.txt                 readme.txt<br />        ;File /oname=$OUTDIR\changelog.txt      changelog.txt<br /><br />        # CustomChars<br />        ;CreateDirectory        $OUTDIR\Screenshots<br /><br />        ;CreateDirectory        $OUTDIR\Splash<br /><br />        ;SetOutPath $INSTDIR\Splash<br />        ;File /oname=$OUTDIR\Splash.bmp                                                         ..\..\Trunk\Splash\Splash.bmp<br />        ;File /oname=$OUTDIR\EdSplash.bmp                                               ..\..\Trunk\Splash\EdSplash.bmp<br /><br />        # Maps<br />        CreateDirectory         $INSTDIR\Maps<br />        # Localization<br />        CreateDirectory         $INSTDIR\Localization<br />        CreateDirectory         $INSTDIR\Localization\DEU<br />        CreateDirectory         $INSTDIR\Localization\ESN<br />        CreateDirectory         $INSTDIR\Localization\FRA<br />        CreateDirectory         $INSTDIR\Localization\INT<br />        CreateDirectory         $INSTDIR\Localization\ITA<br /><br />        SetOutPath $INSTDIR\Localization<br /><br />    ; Write Uninstaller information<br /><br />        WriteUninstaller "$INSTDIR\${UNINSTALLER}"<br /><br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "DisplayName" "${NAME}"<br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "UninstallString" "$INSTDIR\${UNINSTALLER}"<br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "DisplayVersion" "${VERSION}"<br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "URLInfoAbout" "${PRODUCT_WEB_SITE}"<br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "Publisher" "${PRODUCT_COMPANY}"<br />        WriteRegStr "${PRODUCT_UNINST_ROOT_KEY}" "${PRODUCT_UNINST_KEY}" "Install Date" "${__TIMESTAMP__}"<br />            #######################################################################<br />                # Sub Section Start Menu Begin<br />                ;!include "required_files\start_menu.nsh"<br />                ;Call setStartFolder<br />                !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br /><br />                        SetOutPath                      $INSTDIR<br /><br />                    # Get the path to the UT3 binary<br /><br />                        <br />                        <br />                        WriteIniStr             "$INSTDIR\${PRODUCT_COMPANY}.url" "InternetShortcut" "URL" "${PRODUCT_WEB_SITE}"<br />                        CreateDirectory         "$SMPROGRAMS\$StartMenuFolder"<br />                        CreateShortCut          "$SMPROGRAMS\$StartMenuFolder\Website.lnk" "$INSTDIR\${PRODUCT_COMPANY}.url"<br />                        CreateShortCut          "$SMPROGRAMS\$StartMenuFolder\Uninstall.lnk" "$INSTDIR\${UNINSTALLER}"<br /><br /><br />                        ClearErrors<br /><br />                        # Check Current User keys first<br />                        ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK1_32}"                        'InstallLocation'<br />                    IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK2_32}"                'InstallLocation'<br />                    IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK3_32}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK4_32}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_US_WIN_32}"      'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK1_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK2_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK3_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_UNK4_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKCU "${INSTALL_CU_KEY_US_WIN_64}"      'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors # Check the Local Machine keys<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK1_32}"                'InstallLocation'<br />                    IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK2_32}"                'InstallLocation'<br />                    IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK3_32}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK4_32}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_US_WIN_32}"      'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK1_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK2_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK3_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_UNK4_64}"                'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                                ReadRegStr $0 HKLM "${INSTALL_LM_KEY_US_WIN_64}"      'InstallLocation'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                        ReadRegStr $0 HKCU "${INSTALL_KEY_STEAM}"                     'SteamPath'<br />                        IfErrors 0 CheckFiles<br />                        ClearErrors<br />                        ReadRegStr $0 HKLM "${INSTALL_KEY_STEAM}"                     'InstallPath'<br />                        IfErrors 0 CheckFiles<br />                            GOTO SkipShortcuts<br /><br />                        CheckFiles:<br /><br />                        ${StrRep} $0 "$0" "/" "\"<br />                        IffileExists "$0Binaries\UT3.exe" CreateShortcuts 0<br />                        IffileExists "$0\steamapps\common\unreal tournament 3\Binaries\UT3.exe" 0 SkipShortcuts<br /><br />                    CreateSteamShortcuts:<br />                        # Startup Menu Shortcuts<br />                                ;CreateShortCut "$SMPROGRAMS\Gneu\Project: White\${EDITOR_LNK}"       "$0${STEAM_UT3_DIR}${UT3_BINARY_LOC}" "editor ${UT3_CMD_OPTIONS}"<br />                                ;CreateShortCut "$SMPROGRAMS\Gneu\Project: White\${GAME_LNK}"         "$0${STEAM_UT3_DIR}${UT3_BINARY_LOC}" "${UT3_CMD_OPTIONS}"<br /><br />                        # Install Directory Shortcuts<br />                                ;CreateShortCut "$INSTDIR\${EDITOR_LNK}"      "$0${STEAM_UT3_DIR}${UT3_BINARY_LOC}" "editor ${UT3_CMD_OPTIONS}"<br />                                ;CreateShortCut "$INSTDIR\${GAME_LNK}"                "$0${STEAM_UT3_DIR}${UT3_BINARY_LOC}" "${UT3_CMD_OPTIONS}"<br /><br />                                MessageBox MB_OK "${SUCCESS_MESSAGE}"<br /><br />                        GoTo Done<br />                    CreateShortcuts:<br />                                # Startup Menu Shortcuts<br />                                ;CreateShortCut "$SMPROGRAMS\Gneu\Project: White\${EDITOR_LNK}"       "$0Binaries\UT3.exe" "editor ${UT3_CMD_OPTIONS}"<br />                                ;CreateShortCut "$SMPROGRAMS\Gneu\Project: White\${GAME_LNK}"         "$0Binaries\UT3.exe" "${UT3_CMD_OPTIONS}"<br /><br />                        # Install Directory Shortcuts<br />                                ;CreateShortCut "$INSTDIR\${EDITOR_LNK}"      "$0${UT3_BINARY_LOC}" "editor ${UT3_CMD_OPTIONS}"<br />                                ;CreateShortCut "$INSTDIR\${GAME_LNK}"                "$0${UT3_BINARY_LOC}" "${UT3_CMD_OPTIONS}"<br /><br />                                MessageBox MB_OK "${SUCCESS_MESSAGE}"<br />                                GoTo Done<br /><br />                    SkipShortcuts:<br />                        MessageBox MB_OK "${FAILURE_MESSAGE}"<br /><br />                        Done:<br />                        ;Create shortcuts<br /><br />                !insertmacro MUI_STARTMENU_WRITE_END<br />                # End Sub Section Start Menu<br />                #######################################################################<br />                <br />SectionEnd<br /><br />Section "Jailbreak Maps" section_maps<br />        SetOutPath $INSTDIR<br />SectionEnd<br /><br />;Assign descriptions to sections<br />!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br />        !insertmacro MUI_DESCRIPTION_TEXT ${section_jailbreak_main} "Jailbreak Mod."<br />        !insertmacro MUI_DESCRIPTION_TEXT ${section_maps} "Jailbreak Maps."<br />!insertmacro MUI_FUNCTION_DESCRIPTION_END<br /><br />;--------------------------------<br />;Uninstaller Section<br /><br />Section "Uninstall"<br />  Delete "$INSTDIR\${UNINSTALLER}"<br />  RMDir "$INSTDIR"<br />  DeleteRegKey /ifempty HKCU "Software\${PRODUCT_COMPANY}"<br />SectionEnd<br /># End Section Over-rides<br />###############################################################################<br />###############################################################################<br /># Begin Function Decleration<br />;!include "required_files\functions.nsh"<br />        ;--------------------------------<br />        ;Installer Functions<br />Function .onGUIEnd<br />        ;System::Call "kernel32::RemoveMutexA(i 0, i 0, t 'WhiteMod_Mutex') i .r1 ?e"<br />FunctionEnd<br /><br />Function .onInit<br />        ;------------------------------------------------------------------------------------------------------------<br />        ; Make sure we dont have two running...<br />        System::Call "kernel32::CreateMutexA(i 0, i 0, t 'jailbreak_installer_mutex') i .r1 ?e"<br />        Pop $R0<br /><br />        StrCmp $R0 0 +3<br />                MessageBox MB_OK|MB_ICONEXCLAMATION "There is already an installer running."<br />                Abort<br /><br />        ;------------------------------------------------------------------------------------------------------------<br />        ;spash screen<br />        InitPluginsDir<br />        File /oname=$PLUGINSDIR\splash.bmp "${SPLASH}"<br />                                        ;delay   fadein   fadeout<br />        advsplash::show 2000 500 500 -1 $PLUGINSDIR\splash<br /><br />        Pop $0 <br />        Delete $PLUGINSDIR\splash.bmp<br />        ;------------------------------------------------------------------------------------------------------------<br />        ; if language was selected on a preious install, this won't run<br />        !insertmacro MUI_LANGDLL_DISPLAY<br />        ;------------------------------------------------------------------------------------------------------------<br />        ; anoyance, start folder defaults to NAME<br />        ;Call setStartFolder<br />        StrCpy $StartMenuFolder "${STARTMENUFOLDER}"<br />        IntOp $install_type 0 - 1<br />        ;------------------------------------------------------------------------------------------------------------<br />FunctionEnd<br /><br /><br />;--------------------------------<br />;Uninstaller Functions<br /><br />Function un.onInit<br />  ; Restore Language selection<br /> ; MoreInfo::GetOSUserinterfaceLanguage<br /> ; pop $LANGUAGE<br />  !insertmacro MUI_UNGETLANGUAGE<br />FunctionEnd<br /><br />Function LeaveDirectory<br />        GetInstDirError $0<br />        ;=== Does it already exist? (upgrade)<br />        IfFileExists "$INSTDIR\Jailbreak.u" "" CheckInstallerError<br />                ;=== Check if app is running?<br />                StrCmp ${CHECKRUNNING} "NONE" CheckInstallerError<br />                        FindProcDLL::FindProc "${CHECKRUNNING}"<br />                        StrCmp $R0 "1" "" CheckInstallerError<br />                                MessageBox MB_OK|MB_ICONINFORMATION "$(runwarning)"<br />                                Abort<br />        CheckInstallerError:<br />                ${Switch} $0<br />                        ${Case} 0 ;=== Valid directory and enough free space<br />                                ${Break}<br />                        ${Case} 1<br />                                MessageBox MB_OK "$(invaliddirectory)"<br />                                Abort<br />                                ${Break}<br />                        ${Case} 2<br />                                IfFileExists "$INSTDIR" "" NotEnoughSpaceNoUpgrade ;=== Is upgrade<br />                                        SectionGetSize ${section_jailbreak_main} $1 ;=== Space Required for App<br />                                        ${GetRoot} "$INSTDIR" $2<br />                                        ${DriveSpace} "$2\" "/D=F /S=K" $3 ;=== Space Free on Device<br />                                        ${GetSize} "$INSTDIR" "/M=*.* /S=0K /G=1" $4 $5 $6 ;=== Current installation size<br />                                        IntOp $7 $3 + $4 ;=== Space Free + Current Install Size<br /><br />                                NotEnoughSpaceNoUpgrade:<br />                                        MessageBox MB_OK "$(notenoughspace)"<br />                                        Abort<br />                                ${Break}<br />                ${EndSwitch}<br />FunctionEnd<br /><br />Function  setStartFolder<br />        StrCpy $StartMenuFolder "${STARTMENUFOLDER}"<br />FunctionEnd<br /># End Function Decleration<br />###############################################################################<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">File077</span><br />
      <span class="post-time small text-muted">21st August 2009 09:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, the ini didn't get attached.<br />
      <br />
      <br /></p>
      <pre>
<code><br />[Settings]<br />NumFields=5<br /><br />[Field 1]<br />Type=RadioButton<br />Text=&amp;Default (Curent User)<br />;State=1<br />Left=8<br />Right=200<br />Top=28<br />Bottom=38<br /><br />[Field 2]<br />Type=RadioButton<br />Text=&amp;Advanced (--nohomedir)<br />Left=8<br />Right=254<br />Top=57<br />Bottom=68<br /><br />[Field 3]<br />Type=Label<br />Text=This is the standard Jailbreak installation.<br />Left=18<br />Right=254<br />Top=41<br />Bottom=56<br /><br />[Field 4]<br />Type=Label<br />Text=For users that have specified '--nohomedir' for their game. Only recommended for experienced users.<br />Left=18<br />Right=254<br />Top=73<br />Bottom=98<br /><br />; top <br />[Field 5]<br />Type=Label<br />Text=Choose the type of installation you prefer, then click Next.<br />Left=4<br />Right=268<br />Top=14<br />Bottom=22<br /><br /><br /><br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">File077</span><br />
      <span class="post-time small text-muted">21st August 2009 09:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The one bug in the thing I posted to help you might get answered here. Lets hope for both of us it does.<br />
      <br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=310433" target="_blank">http://forums.winamp.com/showthread....hreadid=310433</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MikeWard</span><br />
      <span class="post-time small text-muted">21st August 2009 15:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is what I used in the end, does the job nicely.<br />
      <br /></p>
      <pre>
<code>Section "$(RequiredSection)" SEC01<br />  SectionIn RO<br />SectionEnd<br /><br />Section "$(AnimInstall)" SEC02<br />SectionEnd<br /><br />Section /o "$(NoAnimInstall)" SEC03<br />SectionEnd<br /><br />Function .onInit<br />  !insertmacro MUI_LANGDLL_DISPLAY<br />    StrCpy $1 ${SEC02} ; Group 1 - Option 1 is selected by default<br />FunctionEnd<br /><br />Function .onSelChange<br />  !insertmacro StartRadioButtons $1<br />    !insertmacro RadioButton ${SEC02}<br />    !insertmacro RadioButton ${SEC03}<br />  !insertmacro EndRadioButtons<br />FunctionEnd</code>
</pre><br />
      <br />
      <br />
      Now I just need to figure out how to make the installer appear "always on top" - basically mid way through my install around 350 command prompt windows need to run. As such I want to keep the main install window on top, mainly for epilepsy suffers as I would not want to give them an epileptic shock.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">21st August 2009 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you should probably run these command windows hidden with nsExec or one of the other "DOS exec plugins"<br />
      <br />
      If you really want to use always on top, you would have to call user32::SetWindowPos with the system plugin</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MikeWard</span><br />
      <span class="post-time small text-muted">21st August 2009 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmmm interesting.<br />
      <br />
      Ok, here is a snippet of code I have in place now<br /></p>
      <pre>
<code>  ; Unset all file-attributes (like Read-Only) and check if gta3.img and gta3.dir exist<br />  SetOutPath "$INSTDIR\models"<br />/*<br />  IfFileExists "$INSTDIR\models\gta3.img" errModelInstall startModelInstallImg<br />  Goto errModelInstall<br />  startModelInstallImg:<br />  IfFileExists "$INSTDIR\models\gta3.dir" errModelInstall startModelInstallDir<br />  Goto errModelInstall<br />  startModelInstallDir:<br />*/<br />  SetFileAttributes "$INSTDIR\models\gta3.img" FILE_ATTRIBUTE_NORMAL<br />  SetFileAttributes "$INSTDIR\models\gta3.dir" FILE_ATTRIBUTE_NORMAL<br />  ; Add models to gta3.img<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\baggage.dff"'<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\baggage.txd"'<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\bank1955.dff"'<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\bank1955.txd"'<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\banshee.dff"'<br />  ExecWait '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\banshee.txd"'</code>
</pre><br />
      <br />
      <br />
      So, could I change the ExecWait to nsExecWait ???<br />
      <br />
      EDIT - Actually should it be nsExec::ExecWait ?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">21st August 2009 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">well, yes, nsExec by itself does not work since it is a plugin</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MikeWard</span><br />
      <span class="post-time small text-muted">21st August 2009 23:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">All sorted, nsExec::Exec was the winner :)<br />
      <br />
      Code Snippet<br /></p>
      <pre>
<code>  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\baggage.dff"'<br />  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\baggage.txd"'<br />  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\bank1955.dff"'<br />  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\bank1955.txd"'<br />  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\banshee.dff"'<br />  nsExec::Exec '"$INSTDIR\addtogta3img\ImgEdCmd.exe" "$INSTDIR\models\gta3.img" /a "$INSTDIR\addtogta3img\banshee.txd"'</code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
