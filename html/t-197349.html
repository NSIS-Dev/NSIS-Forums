<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="BassMOD syntax for streaming a wma" />

  <title>BassMOD syntax for streaming a wma - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">BassMOD syntax for streaming a wma</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197349">BassMOD syntax for streaming a wma</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 04:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>BassMOD syntax for streaming a wma</strong><br />
      Does this seem like plausible syntax for streaming a wma with BassMod ?<br />
      <br />
      Kind of like fixing my car by throwing a wrench at it ;)<br />
      <br />
      System::Call /NOUNLOAD "BASSMOD::BASS_StreamCreateURL\(PChar('http://64.236.34.97:80/stream/1012'+#0),0,BASS_STREAM_BLOCK,nil,0)"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 04:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried this as a macro<br />
      !macro BASSMOD_STREAMPLAY<br />
      System::Call 'BASSMOD::BASS_StreamCreateURL(PChar($\'http://64.236.34.97:80/stream/1012$\'+#0),0,BASS_STREAM_BLOCK,nil,0)'<br />
      !macroend</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 04:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">got a 'encountered a systems error and needs to quit' Thought I might get lucky ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th October 2004 18:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">PChar? System doesn't work with Pascal syntax ;)<br />
      <br />
      Use simple quotes, the string passed is already "PChar".<br />
      <br />
      Also replace nil with 0 and BASS_STREAM_BLOCK with its real value.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 19:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">this a little closer?<br />
      !macro BASSMOD_WMASTREAMPLAY</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 19:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">System::Call 'BASSMOD::BASS_StreamCreateURL("http://www.mysite.com/afile.wma", 0, 0, NULL, 0)'<br />
      !macroend</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">25th October 2004 21:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">tried this..but it is not yet working<br />
      <br />
      !include BassMod.nsi<br />
      Function .onInit<br />
      InitPluginsDir<br />
      File bassmod.dll<br />
      !insertmacro BASSMOD_Init<br />
      !insertmacro BASSMOD_MusicLoad<br />
      Section<br />
      System::Call 'BASSMOD::BASS_STREAMCREATEURL("http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma",0,0,NULL,0)'<br />
      SectionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">26th October 2004 00:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">replaced the NULL with 0...not quite working yet...<br />
      BASSMOD::BASS_STREAMCREATEURL("http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma",0,0,0,0)'</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">26th October 2004 03:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">First of all, BASSMOD doesn't support WMA, but BASSWMA does.<br />
      <br />
      Second, you should define each parameter type for each one of the parameters. Like this out-topic example:<br />
      <br /></p>

      <blockquote>
        System::Call "user32::MessageBox(<font color="red">i</font> $HWNDPARENT, <font color="red">t</font> 'NSIS System Plug-in', <font color="red">t</font> 'Test', <font color="red">i</font> 0)"
      </blockquote>I suggest you to try this below (not tested):
      <pre>
<code>System::Call 'BASSWMA::BASS_WMA_StreamCreateFile(i,t "http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma",i,i,i)'</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">26th October 2004 04:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">no...that was a no go too :(<br />
      Do I need to call another !macro to get the stream to play. Should play automatically I from what I have read....Sure there are some on the list who have attempted this :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">26th October 2004 19:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I posted this on the Bass forum too...<br />
      if they give me answer, I'll post it here</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">26th October 2004 20:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">got this back from the BASS forum:<br />
      I don't know how to make NSIS call a function from a DLL, but if it is how you say, that should work fine. Although I don't know if the "i" in there first, third, fourth and fifth parameters is just for showing purposes, because if they are like that in the source code, that seems wrong.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">26th October 2004 22:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The dll I'm using is BASSWMA:<br />
      <br /></p>

      <blockquote>
        <b>BASSWMA 2.0</b> (.0.4)<br />
        An extension to BASS, enabling the playback of WMA files and streams, and also WMA file encoding and network broadcasting. Requires the Windows Media Format modules, which come installed with Windows Media Player, or can be installed separately (wmfdist.exe). C/C++, Visual Basic, Delphi and MASM APIs are included.
      </blockquote>To work, the dll has to be in the same folder as your script at the time you compile it.<br />
      <br />
      The "i"'s are parameter types, which are "integers". The same is for "t" which is "pointer to the first character of string". Maybe this is quite complicated for you, but it's how it works.<br />
      <br />

      <blockquote>
        no...that was a no go too<br />
        Do I need to call another !macro to get the stream to play. Should play automatically I from what I have read....Sure there are some on the list who have attempted this
      </blockquote>This is not another macro, this is a plugin call.<br />
      <br />
      Sorry if sometimes I'm rude. I before didn't even know what System plugin was. Now that I'm pretty familiar with it, I can make a real use of it.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">26th October 2004 22:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">not necessarily complicated...just new :)<br />
      I'll put the plugins in the project folder and see how it goess</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">27th October 2004 21:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">not quite working yet...<br />
      no errors...just not launching the wma<br />
      I posted this code to the BASS forum to...<br />
      OutFile "example.exe"<br />
      !include BassMod.nsi<br />
      ;<br />
      Function .onInit<br />
      InitPluginsDir<br />
      SetOutPath $PLUGINSDIR<br />
      File "bassmod.dll"<br />
      File "basswma.dll"<br />
      !insertmacro BASSMOD_Init<br />
      System::Call "BASSWMA::BASS_WMA_StreamCreateFile(i,'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma',i,i,i)"<br />
      FunctionEnd<br />
      ;<br />
      Function .onGUIEND<br />
      !insertmacro BASSMOD_Free<br />
      FunctionEnd<br />
      ;<br />
      Section<br />
      ;dummy<br />
      SectionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">28th October 2004 00:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You forgot a <i>t</i> before <i>'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma'</i>, like my code mentions.<br />
      <br /></p>

      <blockquote>
        I posted this code to the BASS forum to...
      </blockquote>Since when they can read NSIS syntax. It is quite difficult to have NSIS help on other sites than this forums. NSIS support is only available right here.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">28th October 2004 05:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yep...added the 't' to no avail<br />
      Why I posted the code....<br />
      thought there might be some NSIS folks on the base forum...who had figured this one out. Nsis is pretty easy to read and the code I posted is pretty cut and dried.<br />
      many thanks<br />
      g</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">28th October 2004 12:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What is <i>!insertmacro BASSMOD_Init</i> and <i>!insertmacro BASSMOD_Free</i> on your code, initializing BASSMOD which shouldn't exist in your code for WMA? Didn't I tell you why BASSMOD isn't the correct plugin for your code?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">28th October 2004 20:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes...I'm sure you did<br />
      on the bass forum, someone said you needed the bass [not BassMod] to work in conjunction with basswma..here is newest post from the Bass forum I try to incorporate :)<br />
      Todays Post:<br />
      As I expected, you've confused two things. Bassmod is for playing MOD-type files. It is cross-platform, but not with as many features. In order to use BassWMA, you need to use Bass, not Bassmod. Your script should be something like this (though I'm not very sure about the syntax):<br />
      <br />
      <br />
      OutFile "example.exe"<br />
      ;<br />
      Function .onInit<br />
      InitPluginsDir<br />
      SetOutPath $PLUGINSDIR<br />
      File "bass.dll"<br />
      File "basswma.dll"<br />
      System::Call "BASS::BASS_Init(i, i, i, i, i) i(1, 44100, 0, 0, 0).r0"<br />
      ; figure out if there's an error in r0, or whatever...<br />
      System::Call "BASSWMA::BASS_WMA_StreamCreateFile(i, t, i, i, i) i(0,'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma',0,0,0).r0"<br />
      ; figure out if there's an error in r0, or whatever...<br />
      System::Call "BASS::BASS_StreamPlay(i, i, i) i(r0, 0, $(BASS_SAMPLE_LOOP)).r0"<br />
      ; figure out if there's an error in r0, or whatever...<br />
      FunctionEnd<br />
      ;<br />
      Function .onGUIEND<br />
      System::Call "BASS::BASS_Free()"<br />
      FunctionEnd<br />
      ;<br />
      Section<br />
      ;dummy<br />
      SectionEnd</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
