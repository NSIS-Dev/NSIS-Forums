<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problem removing empty instdir" />

  <title>Problem removing empty instdir - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problem removing empty instdir</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=225436">Problem removing empty instdir</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">NukeyDoo</span><br />
      <span class="post-time small text-muted">8th September 2005 08:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problem removing empty instdir</strong><br />
      I'm having a weird issue wit 2.09.<br />
      <br />
      If I select a single level instdir for my app, i.e. "My App" and then inst all files to it, upon uninstall everything including said folder gets removed cleanly. However, if I choose an inst path like "My Company\My App" and then inst all files, upon uninstall only the files and the folder "My App" gets removed, leaving the folder "My Company" there.<br />
      <br />
      I'm thinking ahead to the future when I release more apps, I want to have them all in the main folder "My Company" with sub folders for the names of the apps, and then when one gets removed, the top level folder will not get removed unless there are no other sub folders. If no sub folders, then it should be removed.<br />
      <br />
      In this case since I only have one app, the top level folder should be getting removed but it's not.<br />
      <br />
      Does anyone have any code that can do this?<br />
      <br />
      TIA</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Instructor</span><br />
      <span class="post-time small text-muted">8th September 2005 09:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br />Name "Output"<br />OutFile "Output.exe"<br /><br />!include "FileFunc.nsh"<br />!insertmacro un.GetParent<br /><br />#... install code<br /><br />Section un.Install<br />        RMDir $INSTDIR            # Remove "My Company\My App"<br />        ${un.GetParent} "$INSTDIR" $0<br />        RMDir $0                  # Remove "My Company"<br />SectionEnd<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">NukeyDoo</span><br />
      <span class="post-time small text-muted">9th September 2005 11:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Worked great! Thank ya kindly!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
