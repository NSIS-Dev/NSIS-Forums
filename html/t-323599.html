<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="nsExec/ExecDos return 128...why?" />

  <title>nsExec/ExecDos return 128...why? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">nsExec/ExecDos return 128...why?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323599">nsExec/ExecDos return 128...why?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mike1975</span><br />
      <span class="post-time small text-muted">30th October 2010 04:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>nsExec/ExecDos return 128...why?</strong><br />
      I have a 2003 Windows Server I am attempting to install an application. The install fails as the nsExec command in my nis script I am using all return 128 and the supplied command is not executed.<br />
      <br />
      I than used the following test.nsi script provided with a nsi compiler tool and received the same 128 errors.<br />
      <br />
      Name "nsExec Test"<br />
      <br />
      OutFile "nsExec Test.exe"<br />
      <br />
      ShowInstDetails show<br />
      <br />
      Section "Silent MakeNSIS"<br />
      nsExec::Exec '"${NSISDIR}\makensis.exe"'<br />
      Pop $0 # return value/error/timeout<br />
      DetailPrint ""<br />
      DetailPrint " Return value: $0"<br />
      DetailPrint ""<br />
      SectionEnd<br />
      <br />
      Section "MakeNSIS commands help"<br />
      nsExec::ExecToLog '"${NSISDIR}\makensis.exe" /CMDHELP'<br />
      Pop $0 # return value/error/timeout<br />
      DetailPrint ""<br />
      DetailPrint " Return value: $0"<br />
      DetailPrint ""<br />
      SectionEnd<br />
      <br />
      Section "Output to variable"<br />
      nsExec::ExecToStack '"${NSISDIR}\makensis.exe" /VERSION'<br />
      Pop $0 # return value/error/timeout<br />
      Pop $1 # printed text, up to ${NSIS_MAX_STRLEN}<br />
      DetailPrint '"${NSISDIR}\makensis.exe" /VERSION printed: $1'<br />
      DetailPrint ""<br />
      DetailPrint " Return value: $0"<br />
      DetailPrint ""<br />
      SectionEnd<br />
      <br />
      I have no idea what has chaned on this server cause it once looked.<br />
      <br />
      I have been searching the forum for the past couple of hours but didn't find any answer. There was one post which kinda describe the same problem but the solution didn't seem to apply. Any ideas?<br />
      <br />
      Mike</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">30th October 2010 09:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Exit codes of your script are 1/1/0 both for nsExec and ExecDos in my Vista. Two versions of error 128 (no child process to wait for) from Google: 1) incorrect cmd.exe; 2) adware or computer infections. For me it looks like process was created (CreateProcess not returned error), but just after this process was terminated by system.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mike1975</span><br />
      <span class="post-time small text-muted">2nd November 2010 02:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Looks like it is Symantec Endpoint Protection as when it is removed everything works fine. I have searched Symantec's site and google and there is nothing about this. I find it hard to believe I am the first to come across this false positive.<br />
      <br />
      I'll be sending information to Symantec to ensure this is resolved.<br />
      <br />
      As a side note, I tried it on a different computer with Symatec Endpoint Protection (version 11.0.5002.333 with Nov 1st, 2010 defintions) and the return value was -1073741819 (instead of 128) but this was a Windows XP version 2002 SP3.<br />
      <br />
      Mike</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
