<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="License File" />

  <title>License File - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">License File</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323246">License File</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 12:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>License File</strong><br />
      Hi all,<br />
      <br />
      Im working on Localization of my installer.<br />
      <br />
      my page flow is as follows.<br />
      1.welcome<br />
      2.license<br />
      3.custom page. ( i have created my own directory page)<br />
      4.custom page..<br />
      5...<br />
      ...<br />
      8.finish page<br />
      <br />
      Issue:<br />
      <br />
      Im using the following code<br />
      <br /></p>
      <pre>
<code>
<br />FindWindow$HWND</code><span style="color: #DD0000">"#32770"""</span><span style="color: #0000BB">$HWNDPARENT
<br /><br />GetDlgItem$R4$HWND1207
<br />SendMessage$R4</span><span style="color: #007700">${</span><span style="color: #0000BB">WM_SETTEXT</span><span style="color: #007700">}</span><span style="color: #0000BB">1</span><span style="color: #DD0000">"STR:$(HELLO)"
</span>
</pre>1.The above code works fine when i dont include license page.<br />
      2.The above code doesnt work if i have license page before my custom page.<br />
      <br />
      <br />
      I removed my license page and introduced welcome page again and tested it. It works fine.<br />
      <br />
      i guess the issue is in identifying the parent window.<br />
      <br />
      Suggestion please.. Thanks in advance.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">19th October 2010 13:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There is a very simple way of using a multi-language license (file): <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.3" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.3</a><br />
      <br />
      Or do it like on any other page by using LangString:<a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.2" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.3</a><br />
      <br />
      BTW: Searching the (linked) scripting reference may help you to solve such problems within minutes ... :D<br />
      Also using Google (if you have an idea of the search words) might often be better than the forum search (especially when searching for commands).<br />
      <br />
      Gunther</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi gunther ,<br />
      <br />
      Nice to see your reply again for my new post :)<br />
      <br />
      But my issue was not in usage of a multi-language license . Please read it again. If it is not clear will try to explain.<br />
      <br />
      As u said.. when ever i find issue i'll try solving by myself. But if the deadline is near.. i google it.. if it is very near I post in forum :P</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th October 2010 13:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have omitted some quite important information. Where are you using this code? Are you using nsDialogs or InstallOptions? To me it looks like InstallOptions. If that is the case, just write the language string to the INI file itself. If it is nsDialogs you should be using the control handle returned on the stack.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">19th October 2010 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br /></p>

      <blockquote>
        <small>Originally posted by Pravin</small><br />
        But my issue was not in usage of a multi-language license . Please read it again. If it is not clear will try to explain.
      </blockquote>upps ..., sorry - my bad. :confused:<br />
      <br />
      OK, now I read it again ...<br />
      For debugging: Add a message box right after "GetDlgItem $R4 $HWND 1207" and see if you got a valid handle in $R4 or if it is 0).<br />
      <br />
      What page are you on at this stage?<br />
      Are you sure there is an object with the ID 1207?<br />
      <br />
      Gunther
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 14:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>To Afrow</b><br />
      <br /></p>

      <blockquote>
        1.Where are you using this code?<br />
        2.Are you using nsDialogs or InstallOptions?
      </blockquote>1. Im using the code in function which belongs to page.<br />
      2. You are right Im using InstallOptions.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 15:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>TO gunther</b><br />
      <br /></p>

      <blockquote>
        Are you sure there is an object with the ID 1207?
      </blockquote>IF object doesnt exist how come it works fine if i omit the "LICENSE PAGE"<br />
      <br />
      As i mentioned earlier it works fine if i omit the license page in the installer and insert my custom page with the above code.<br />
      <br />
      But it doesnt work if License page is my previous page of the custom installer.<br />
      <br />
      ( Since it works fine when i remove LICENSE page, so I assume my code is fine. But this may not be true )
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 15:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>TO gunther</b><br />
      <br /></p>

      <blockquote>
        Are you sure there is an object with the ID 1207?
      </blockquote>IF object doesnt exist how come it works fine if i omit the "LICENSE PAGE"<br />
      <br />
      As i mentioned earlier it works fine if i omit the license page in the installer and insert my custom page with the above code.<br />
      <br />
      But it doesnt work if License page is my previous page of the custom installer.<br />
      <br />
      ( Since it works fine when i remove LICENSE page, so I assume my code is fine. But this may not be true )<br />
      <br />
      Now for time being till the issue is fixed I have omitted<br />
      <br />
      <pre>
<span style="color: #007700">;!</span><span style="color: #0000BB">insertmacroMUI_PAGE_LICENSE</span><span style="color: #DD0000">"E:\ProgramFiles\license.txt"
</span>
</pre>and I have created my own custom license page but the issue is For Text Box where i display the license agreement i dont get scroll :D
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 15:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>To Afrow</b><br />
      <br /></p>

      <blockquote>
        If that is the case, just write the language string to the INI file itself. If it is nsDialogs you should be using the control handle returned on the stack.
      </blockquote>1.I dont understand writing Language String to the INI file.Can u explain me <b>Afrow</b><br />
      2.I have not tried nsDialogs so far. Will give a try.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">19th October 2010 15:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1How to delete the post created by us.<br />
      <br />
      2.How to include the string "Originally Posted by" along with the person's name in the quote.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th October 2010 17:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can't delete posts. You can only edit them and within a limited time after posting. Use the INSTALLOPTIONS_WRITE macro. I'm not sure why your code stops working with a license page but using FindWindow to get the custom page's handle isn't the way to go. You Pop the handle after InstallOptions::InitDialog, just like you Pop the handle after nsDialogs::Create.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">21st October 2010 08:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Afrow. But as of now let me continue with InstallOptions.<br />
      <br />
      Once i learn about NSIS better I will try with nsDialogs.<br />
      <br />
      Can u guide me in creating Custom license page.??</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">21st October 2010 08:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Pravin</small><br />
        Once i learn about NSIS better I will try with nsDialogs.
      </blockquote>Not that this is on-topic or anything, but that's a bad idea. nsDialogs is much easier to learn than InstallOptions.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">21st October 2010 09:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sure MSG. I'll follow with nsDialogs . But To be frank i have not used nsDialogs so far and i have used installOptions all over my code. I have a release by this week end. I think its not the time to play with the code. So May be from next week I'll implement nsDialogs.<br />
      <br />
      1.As discussed earlier Iam able to pass value dynamically for all my custom page except the custom page which follows the MUI license page.<br />
      2.It works fine if i remove the MUI license page.<br />
      3.So, For time being i have removed license page and trying to create a custom license page.<br />
      <br />
      please help me to create a custom license page. Is there any forum available which discuss about the custom license page??</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">21st October 2010 11:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So... What is it you want help with? If you're already familiar with InstallOptions, you should be able to make a license page on your own. Info on how to rename the Next button to Agree (or something like that) is available in the forums, use search.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">21st October 2010 11:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have set My license text to READONLY and its back ground color is GERY.But Im looking for White Color(As we get in MUI). Regarding rename the Next button to Agreee ,Im going through the forums.<br />
      <br />
      Help in the sense. I want to know whether there is any forum where custom license page is discussed. Thanks for your response.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">21st October 2010 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As far as I know there is only one English NSIS forum, and you're already here. As for the color of your text field, once again, try searching the forums. Setting background color is a very common question.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">21st October 2010 13:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanks :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">27th October 2010 13:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">(ReadOnly textbox with scroll)<br />
      <br /></p>
      <pre>
<code>GetDLgItem$R1$HWND11201
<br />SetCtlColors$R1000000FFFFFF
<br />CustomLicense</code><span style="color: #007700">::</span><span style="color: #0000BB">LoadFile</span><span style="color: #DD0000">"E:\ProgramFiles\license.txt"</span><span style="color: #0000BB">$R1
<br /></span>

<!-- php buffer end -->
                
                
                
</pre>
      <hr />
      <pre>
        
With the above code i constructed my custom page using install options.<br /><br />My installer is multiLingual.<br /><br />Where am i supposed to include the LangString??<br /><br />i referred the forums and i found there was solution for MUI<br /><br />
        PHP Code:
        
                
</pre>
      <hr />
      <pre>
                <code style="white-space:nowrap">
                
                        <!-- php buffer start --></code><span style="color: #000000">
<span style="color: #0000BB">LicenseLangStringLicenseRTF</span><span style="color: #007700">${</span><span style="color: #0000BB">LANG_JAPANESE</span><span style="color: #007700">}</span><span style="color: #DD0000">"E:\ProgramFiles\license.txt"
<br /></span><span style="color: #0000BB">LicenseLangStringLicenseRTF</span><span style="color: #007700">${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"E:\ProgramFiles\license.txt"
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_LICENSE</span><span style="color: #007700">$(</span><span style="color: #0000BB">LicenseRTF</span><span style="color: #007700">)
</span></span>
</pre>what about custom license page??<br />

      <blockquote>
        As i discussed earlier if i use MUI _PAGE_ LICENSE , the very next page following the license page alone not being translated. I find the strings are translated only if i click next and come back. Thats is the reason why i opted for Custom License.
      </blockquote>Please help me to solve above two issues or either one among those.Thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pravin</span><br />
      <span class="post-time small text-muted">27th October 2010 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Following is the final code , i would like to share with you all which I use for custom license page using InstallOptions.Works fine. If im wrong please correct me.<br />
      <br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #0000BB"><br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineLicense_en</span><span style="color: #DD0000">"$PLUGINSDIR\License_en.txt"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineLicense_jp</span><span style="color: #DD0000">"$PLUGINSDIR\License_jp.txt"<br />
      <br /></span> <span style="color: #0000BB">LangStringlicense_txt</span><span style="color: #007700">${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"${License_en}"<br /></span> <span style="color: #0000BB">LangStringlicense_txt</span><span style="color: #007700">${</span><span style="color: #0000BB">LANG_JAPANESE</span><span style="color: #007700">}</span><span style="color: #DD0000">"${License_jp}"<br />
      <br /></span> <span style="color: #0000BB">FindWindow$HWND</span><span style="color: #DD0000">"#32770"""</span><span style="color: #0000BB">$HWNDPARENT<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Ipassthesevaluestothetextboxwhichicreatedusinginstalloptions</span><span style="color: #007700">.<br />
      ;</span><span style="color: #0000BB">Textboxflags</span><span style="color: #007700">:</span><span style="color: #0000BB">NOTABSTOP</span><span style="color: #007700">|</span><span style="color: #0000BB">MULTILINE</span><span style="color: #007700">|</span><span style="color: #0000BB">VSCROLL</span><span style="color: #007700">|</span><span style="color: #0000BB">READONLY</span><span style="color: #007700">|</span><span style="color: #0000BB">NOWORDWRAP<br />
      GetDLgItem$R1$HWND1201<br />
      SetCtlColors$R1000000FFFFFF<br />
      CustomLicense</span><span style="color: #007700">::</span><span style="color: #0000BB">LoadFile</span><span style="color: #DD0000">"$(license_txt)"</span><span style="color: #0000BB">$R1<br />
      <br /></span> <span style="color: #007700">Function.</span><span style="color: #0000BB">onInit<br />
      File</span><span style="color: #007700">/</span><span style="color: #0000BB">oname</span><span style="color: #007700">=</span><span style="color: #0000BB">$PLUGINSDIRLicense_en</span><span style="color: #007700">.</span><span style="color: #0000BB">txt</span><span style="color: #DD0000">"E:\ProgramFiles\license_en.txt"<br /></span> <span style="color: #0000BB">File</span><span style="color: #007700">/</span><span style="color: #0000BB">oname</span><span style="color: #007700">=</span><span style="color: #0000BB">$PLUGINSDIRLicense_jp</span><span style="color: #007700">.</span><span style="color: #0000BB">txt</span><span style="color: #DD0000">"E:\ProgramFiles\license_jp.txt"<br /></span> <span style="color: #0000BB">FunctionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
      I was advised by the moderators to prefer nsDialogs. So you ppl also stick to that. Even i'll be replacing my code from Install Options to nsDialogs in my near future.<br />
      <br />
      Keep Coding..!! Keep on Coding..!! :)
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
