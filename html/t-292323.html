<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Section/Component Screen,Strange Indexed Display Problem"><title>Section/Component Screen,Strange Indexed Display Problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Section/Component Screen,Strange Indexed Display Problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292323">Section/Component Screen,Strange Indexed Display Problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Andrew Wallo</span><br><span class="post-time small text-muted">26th May 2008 18:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Section/Component Screen,Strange Indexed Display Problem - Pretty Pictures included!</strong><br>Including a .jpg of the issue at hand. The comonents screen is inserting a line at the top of the section list equating to the count of the number of sections I have minus one. ) That line [10]- doesn't exist in my code....<br><a href="http://www.jericho-media.com/images/SectionsIndexProblem.jpg" target="_blank">http://www.jericho-media.com/images/...dexProblem.jpg</a><br><br>If I comment out every reference in the code to section g1oB, then this view is shown: ( Note the decrement of the errant row... )<br><br><a href="http://www.jericho-media.com/images/SectionsIndexProblem2.jpg" target="_blank">http://www.jericho-media.com/images/...exProblem2.jpg</a><br><br><br>If you look closely, you'll find that the top section is (incorrectly displayed as an index), ( currently equaling the number of sections I'm defining less one. ( zero indexed - I presume ) Has anyone had this happen to them before?<br><br>Source of issue: My strange requirements make me want to use the components screen twice. Recording differenct selections and handling them seperately later. Ultimately, there will be zero relevant code in the actual sections, but neverthe less, I want to use the component page interface twice..... thus..... I do the following:<br><br><br>ComponentText "Blah blah" "Again Blah" " "<br>Page components setupComponents "" components_leave<br><br>ComponentText "Blah de balh balh" "MoreBlah" " "<br>Page components setupComponents2 "" components_leave2<br><br>Please note that the two setupComponents functions differ slightly as to the display... if I REMOVE all mention of the second call to the components page, ( and only use the components screen once....) the system behaves normally.... but if I reference it twice this strange index issue happens... ( And on the first call to the page, not the second. ) ... and then I get odd indexing behavior, and the second page doesn't display properly either.<br><br>Furthermore if I set it up to call the setupComponents functions as the show functions instead of the pre functions then it displays like this:<br><a href="http://www.jericho-media.com/images/SectionsIndexProblem3.jpg" target="_blank">http://www.jericho-media.com/images/...exProblem3.jpg</a><br><br><br>I have a series of sections which I am turning on and off in my pre-display call like so:<br><br><br><br>;The only thing I do in my function call other than change the text names of hte sections to empty strings.. is to disable the NEXT button until a callback is made to the .onSelChange<br><br>Function setupComponents<br><br>Var /GLOBAL NextButton<br>; Disable the next button until selection is made.<br>GetDlgItem $NextButton $HWNDPARENT 1<br>EnableWindow $NextButton "0"<br><br>RunPlatforms:<br>SectionSetText ${g1o1} "" ; These we dont' show...<br>SectionSetText ${g1o2} ""<br>SectionSetText ${g1o3} ""<br>SectionSetText ${g1o4} ""<br>SectionSetText ${g1o5} ""<br>SectionSetText ${g1o6} ""<br>; Hide the platform options.<br>SectionSetText UnselectSection ${g1o7} ; these<br>SectionSetText UnselectSection ${g1o8} ; we<br>SectionSetText UnselectSection ${g1o9} ; do.<br>SectionSetText UnselectSection ${g1oA}<br>SectionSetText UnselectSection ${g1oB}<br>FunctionEnd<br><br><br>// The sections are defined as so:<br><br><br>Section /o "New Install" g1o1<br>SectionEnd<br><br>Section /o "Install Fresh (Discard local configuration.)" g1o2<br>SectionEnd<br><br>Section /o "Upgrade (Retain existing settings.)" g1o3<br>SectionEnd<br><br>Section /o "Archive Utility" g1o4<br>SectionEnd<br><br>Section /o "Restore Utility" g1o5<br>SectionEnd<br><br>Section /o "Uninstaller" g1o6<br>SectionEnd<br><br>Section /o "Imail Declude Install" g1o7<br>SectionEnd<br><br>Section /o "SmarterMail Declude Install" g1o8<br>SectionEnd<br><br>Section /o "Alligate Declude Install" g1o9<br>SectionEnd<br><br>Section /o "Imail MXGuard Install" g1oA<br>SectionEnd<br><br>Section /o "Default SNF Install" g1oB<br>SectionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Andrew Wallo</span><br><span class="post-time small text-muted">26th May 2008 22:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have solved the issue:<br><br><br>Ok, so for the record: Because this question was asked many times previously, but not in a way people understood it.... and the manual was descriptively silent on how to include multiple Component Pages ( or any other pages for that matter. )<br><br>In order to call a standard ( not custom page ) multiple times, it seems you need to encapsulate it in a PageEx call. For example: In order to have two fixed component type pages.... you need to put this in your page order:<br><font face="courier new"><br>PageEx components<br>ComponentText "Welcome. Please select from the available utilities." " " " "<br>PageCallbacks setupPlatforms showPlatforms components_leave2<br>PageExEnd<br><br>PageEx components<br>ComponentText "Welcome Please select from the available utilities." " " " "<br>PageCallbacks setupComponents2 "" components_leave2<br>PageExEnd<br></font><br><br>Don't forget that as you use <font color="darkred">SectionSetText SectionName ""</font> to hide sections from each components page... i.e.<br>On the first component page.... you hide the sections you ask about in section 2. And then on Section two you hide the page 1 components.... if you go back.. from page 2 to page 1 nothing will show because you've cleared them all.... so unless you create a resetSectionTexts function and call it from/in your Pre functions.... and then reclear the ones you don't want to show up.... you scratch your head for a week, going huh?<br>i.e.<br><font face="courier new"><br><font color="darkred">Function resetSectionTexts<br>SectionSetText SectionName "OriginalTextHere"<br>.... as many as you have sections...<br>FunctionEnd</font></font><br><br>Keywords:<br>Multiple Component Pages<br>Calling Section Page Twice<br>Component Page Twice<br>Two Component Pages<br>Two Section Pages<br>Use of PageEx<br>Calling a Page Twice</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Andrew Wallo</span><br><span class="post-time small text-muted">26th May 2008 22:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Gee....Thats such a perfectly written issue and solution completely documented. I'd like to thank you for coming back and including a detailed solution to the problem and properly keywording it for future NSIS head-scratchers.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Andrew Wallo</span><br><span class="post-time small text-muted">26th May 2008 22:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why, thank me. Me is to kind.<br>lol.<br>;-)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>