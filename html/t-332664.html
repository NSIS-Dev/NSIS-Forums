<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="one file bundle"><title>one file bundle - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">one file bundle</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332664">one file bundle</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">corneliu</span><br><span class="post-time small text-muted">20th July 2011 16:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>one file bundle</strong><br>Hey everyone,<br><br>I have built an installer which does the job just fine. Now I would like to bundle all the files (icons, logos, licenses, nsi installer and other dependencies) in one installer file. I can't find a tutorial that explains this stuff. I know it exists. Can anybody point to it, please?<br><br>Thank you in advance,<br><br>Corneliu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">20th July 2011 16:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What exactly are you trying to accomplish? You can put any file in your installer by using the File command...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">20th July 2011 19:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Once you have compiled your installer script (.nsi) with MakeNSIS.exe, you get a fully self-contained installer EXE file. That EXE contains all the required resources (like Icon, License, etc). And, as MSG said, if any files are extracted from your installer (during the install process) using the "File" command, then these file are included into the installer EXE automatically. No need to "bundle" anything manually.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">corneliu</span><br><span class="post-time small text-muted">20th July 2011 20:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you MSG and LoRd_MuldeR,<br><br>That's what I was looking for, the File command. One thing I want to mention for those who are looking for help and are reading this thread. You must set SetOutPath before using the File command otherwise the files are not found.<br>Everything works well now.<br><br>Cheers,<br><br>Corneliu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">20th July 2011 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by corneliu</small><br>You must set SetOutPath before using the File command otherwise the files are not found.</blockquote>Not found?<br><br>SetOutPath sets the output path ($OUTDIR) where the files are extracted to - <i>at install time</i>.<br>Usually you will do "SetOutPath $INSTDIR", so the files are extracted to the install path ($INSTDIR) the user has selected.<br>And this is documented quite clear, I think.<br><br><pre>
<code><b>4.9.1.5 File</b><br>Adds file(s) to be extracted to the current output path ($OUTDIR).<br>Note that the output file name is $OUTDIR\filename_portion_of_file.</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">corneliu</span><br>
      <span class="post-time small text-muted">20th July 2011 21:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">When the script is compiled the files are added to the executable. All good so far, the executable is fat. Now when you execute the executable, it extracts the files somewhere where it can't find them. I want to copy the extracted files to the installation folder in Program Files. But they are not found anymore. That's why I have to set SetOutPath before using the File command. I know it is documented, just it can be easily overlooked. It took me quite a while to figure it out.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br>
      <span class="post-time small text-muted">20th July 2011 21:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>File</b> is an <i>install time</i> command. It is executed when the user runs the installer. And, as the documentation explains, <b>File</b> extracts to the path specified by $OUTDIR. You can change $OUTDIR by using <b>SetOutPath</b>. You could use this to extract to some fixed path, e.g. a specific sub-dir of "Program Files". However it usually is better to set $OUTDIR to $INSTDIR, i.e. the install dir chosen by the user. You can set a default for $INSTDIR via <b>InstallDir</b>. And always use $PROGRAMFILES instead of "hard-coded" paths.<br>
      <br>
      <br>
      Extremely bad idea:<br></p>
      <pre>
<code>Section "Application"<br>    SetOutPath "C:\Program Files\Your Company\Your Product"<br>    File "MySuperDuperApplication.exe"<br>SectionEnd</code>
</pre><br>
      <br>
      Works okay, but usually not recommended:<br>
      <pre>
<code>Section "Application"<br>    SetOutPath "$PROGRAMFILES\Your Company\Your Product"<br>    File "MySuperDuperApplication.exe"<br>SectionEnd</code>
</pre><br>
      <br>
      Recommended:<br>
      <pre>
<code>InstallDir "$PROGRAMFILES\Your Company\Your Product"<br><br>Section "Application"<br>    SetOutPath $INSTDIR<br>    File "MySuperDuperApplication.exe"<br>SectionEnd</code>
</pre>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>