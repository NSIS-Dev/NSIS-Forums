<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to Call an NSIS Plugin from C/C++"><title>How to Call an NSIS Plugin from C/C++ - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to Call an NSIS Plugin from C/C++</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=170776">How to Call an NSIS Plugin from C/C++</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">JoeAcunzo</span><br><span class="post-time small text-muted">24th February 2004 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to Call an NSIS Plugin from C/C++</strong><br>I'm writing a C++ class that provides an update-from-web ability. This class needs to download (via HTTP) an INI file that describes the update (latest version number, URL to the update program, etc.). The INI will point at an NSIS installer that should be downloaded and then run to perform the update.<br><br>I was originally planning on writing an installer that does nothing more than uses the NSISdl plugin just to obtain the INI file. However, it would be easier if the C++ class could just download the INI file without having to exec this small NSIS installer. (I hate to add extraneous programs/files to my app.)<br><br>I've looked at the NSISdl source and see the exported functions of "download" and "download_quiet" used by the plugin architecture. I'd like to call those functions directly from my C++ class.<br><br>Is there any sample C/C++ code available on how to directly call the NSISdl plugin, or other plugins? Is there anything I should know about calling an exported function inside an NSIS plugin DLL? For example, I realize they are "C" style functions and would require the correct declaration in my C++ app. Anything else?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">24th February 2004 22:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You should be able to find the right information from the NSIS source code, as it has to call the plugins itself ;)<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JoeAcunzo</span><br><span class="post-time small text-muted">24th February 2004 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I know I could look at the NSIS source itself, but I was hoping for a small snippet of sample code so I don't have to dig through all of NSIS. I've yet to crack it open and would like to avoid it if possible. :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">24th February 2004 23:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you try <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vccore/html/vcwlkSysimportAttributeTutorial.asp" target="_blank">dllImport</a>?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JoeAcunzo</span><br><span class="post-time small text-muted">25th February 2004 01:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm trying to call the NSIS plugin from "unmanaged" C++ code, so from what I read on that web page, I don't need to use dllImport. I just wanted to see some C/C++ sample code that creates the required NSIS "stack" structs and passes it to the plugin function entry point. In my case, the "download" function of NSISdl.dll, but I'll take any sample for any plugin (again, C/C++ sample).<br><br>So does anyone have a C/C++ sample that calls an entry point in an NSIS plugin that they can share with me?<br><br>BTW, I've quickly become a *big* fan of NSIS installer. I've used InstallShield for years and as soon as I saw the NSIS install Welcome screen that said "isn't huge and doesn't suck", like InstallShield does, I knew NSIS was the installer for me and it's been great so far!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">25th February 2004 06:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why don't you just port the NSISdl code into your app. I believe that that would be far simpler to implement than recreating the NSIS variable and stack structures.<br><br>Vytautas</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>