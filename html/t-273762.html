<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="SQL File Execution Problems"><title>SQL File Execution Problems - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">SQL File Execution Problems</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273762">SQL File Execution Problems</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">madams</span><br><span class="post-time small text-muted">2nd July 2007 16:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>SQL File Execution Problems</strong><br>Hi,<br><br>I am simply trying to execute an SQL file to create a database in mySql. Whenever I try using either of the code snippets below however, I always get errors.<br><br>When I try using this:<br></p><blockquote>nsExec::ExecToLog 'cmd /C "$mySQLEXE" -uroot -p$databaseLoginPass &lt; "$databaseConfigFile"'</blockquote>(Where $mySQLEXE is the path to the mysql.exe file, $databasepass is the root user password, and $databaseConfigFile is the full path to the SQL file.)<br><br>I get the error: 'C:\Program' is not recognized as an internal or external command,operable program or batch file. I have doubled checked all the paths and the database password, and everything is correct.<br><br>When I try using this:<br><blockquote>nsExec::ExecToLog '"cmd /C "$mySQLEXE" -uroot -p$databaseLoginPass &lt; "$databaseConfigFile""'</blockquote>I don't get an error, but no database is created.<br><br>If anybody knows what is going on please let me know.<br><br>Thanks!</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">2nd July 2007 19:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's just cmd.exe messing with your quotes.</p><pre>
<code>    1.  If all of the following conditions are met, then quote character<br>        on the command line are preserved:<br><br>        - no /S switch<br>        - exactly two quote characters<br>        - no special characters between the two quote characters,<br>          where special is one of: &amp;&lt;&gt;()@^|<br>        - there are one or more whitespace characters between the<br>          the two quote characters<br>        - the string between the two quote characters is the name<br>          of an executable file.<br><br>    2.  Otherwise, old behavior is to see if the first character is<br>        a quote character and if so, strip the leading character and<br>        remove the last quote character on the command line, preserving<br>        any text after the last quote character.</code>
</pre>Add <i>IF 1==1</i> right after <i>/C</i> or use a short filename for $mysqlexe (GetFullPathName /SHORT).
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">madams</span><br>
      <span class="post-time small text-muted">2nd July 2007 19:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks a lot kichik, the IF 1==1 thing worked perfectly.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>