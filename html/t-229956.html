<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="MUI and the ghost button close ....." />

  <title>MUI and the ghost button close ..... - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">MUI and the ghost button close .....</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=229956">MUI and the ghost button close .....</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">neotwix</span><br />
      <span class="post-time small text-muted">2nd November 2005 11:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>MUI and the ghost button close .....</strong><br />
      Hi,<br />
      <br />
      My QA department saw somthing, I never realy saw before.<br />
      During the installation of files for the setup, the available<br />
      buttons are &lt;back, next&gt;, cancel. back and next are unavailable.<br />
      When the installation of files are done. &lt;back and Cancel become unavailable and next&gt; become availalbe.<br />
      When I click on this button, a Close button appear quicly and desapear, and the finish page appear.<br />
      <br />
      Why This buttun "Close" apppear ? It is normal ?<br />
      Maybe it's due to the ToggleInstFiles.dll plugins ?<br />
      to add the show/unshow files during install....<br />
      <br />
      thanks.<br />
      Here is a part of my nsis file:<br />
      <br />
      ; Welcome page<br />
      !insertmacro MUI_PAGE_WELCOME<br />
      ; License page<br />
      !define MUI_LICENSEPAGE_RADIOBUTTONS<br />
      !insertmacro MUI_PAGE_LICENSE "../../setup_files/license.rtf"<br />
      ; Components page<br />
      !insertmacro MUI_PAGE_COMPONENTS<br />
      ; Directory page<br />
      !insertmacro MUI_PAGE_DIRECTORY<br />
      ; Instfiles page<br />
      !insertmacro MUI_PAGE_INSTFILES<br />
      !define MUI_PAGE_CUSTOMFUNCTION_PRE UnloadToggleInstFiles<br />
      !define MUI_FINISHPAGE_NOAUTOCLOSE<br />
      ; finish Page<br />
      !insertmacro MUI_PAGE_FINISH</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">2nd November 2005 13:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This occurs because the default text to close the installer (on the close button) is "Close". The Finish page however changes it to "Finish" through the InstallOptions plugin (which it uses as it is a InstallOptions dialog).<br />
      It can take a while to load an InstallOptions dialog on older systems and this is why you often get a pause in between.<br />
      <br />
      Try this:<br /></p>
      <pre>
<code>!include WinMessages.nsh<br /><br />!insertmacro MUI_PAGE_INSTFILES<br />!define MUI_FINISHPAGE_NOAUTOCLOSE<br />!define MUI_PAGE_CUSTOMFUNCTION_PRE FinishPre<br />!insertmacro MUI_PAGE_FINISH<br /><br />!insertmacro MUI_LANGUAGE English<br /><br />Function FinishPre<br /> GetDlgItem $R0 $HWNDPARENT 1<br /> SendMessage $R0 ${WM_SETTEXT} "" "STR:Finish"<br />FunctionEnd</code>
</pre><br />
      <br />
      -Stu
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
