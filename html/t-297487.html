<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Language selection dialog box issue on Vista" />

  <title>Language selection dialog box issue on Vista - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Language selection dialog box issue on Vista</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297487">Language selection dialog box issue on Vista</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zanz</span><br />
      <span class="post-time small text-muted">16th September 2008 22:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Language selection dialog box issue on Vista</strong><br />
      In the language selection dialog, I want to display user's OS language as a selected language by default. My installer includes 10 languages, so if you launch installation on French system, then 'French' would be selected in the language box when the installer is invoked. Same for English, Spanish and so on.<br />
      <br />
      I used the following code inside .oninit:<br />
      <br />
      System::Call kernel32::GetSystemDefaultLangID()i.a<br />
      <br />
      Which would write the value of the OS's lang to $LANGUAGE var. This works fine on XP, but on Vista the lang selection dialog always defaults to 'German'. On XP, on French, German, and Chinese systems, I see the default language correctly but on Vista, itâ€™s always German, even on French/Chinese/English systems. The issue is reproducible on several vista machines. I do write the language value to registry, but before testing, I make sure to clean the registry.<br />
      <br />
      Any hints, ideas, or workarounds will be really appreciated. Thanks!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2008 06:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is it because GetSystemDefaultLangID returns German or due to some other issue?</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
