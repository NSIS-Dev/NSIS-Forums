<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS non-Unicode Chinese with special location settings"><title>NSIS non-Unicode Chinese with special location settings - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS non-Unicode Chinese with special location settings</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294679">NSIS non-Unicode Chinese with special location settings</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">AxelMock</span><br><span class="post-time small text-muted">17th July 2008 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS non-Unicode Chinese with special location settings</strong><br>Hi,<br><br>I have an NSIS installer running for driver installation with support for<br>about 24 languages including Traditional and Simplified Chinese.<br><br>Now a customer in Singapore complained about unreadable parts of the dialogs.<br><br>We found out, that setting the Location in "Control Panel| Regional and language options"<br>to Chinese (Singapore) (Regional Options Tab and Advanced Tab) and will lead to this.<br><br>Reason: Chinese (Taiwan) and Chinese (PRC) are the language codes supported by Traditional<br>and Simplified Chinese Language files.<br>All other "SubLanguages" with different language code get displayed incorrectly.<br>(Tested even on a native chinese Windows System)<br><br>As a workaround I duplicated the Simplified and Traditional Chinese Language files (nlf/nsh)<br>and set the correct Language code in the header, and added these language variants.<br><br>TradChinese_MC (Macau), TradChinese_HK (Hongkong) and SimpChinese_SP (Singapore).<br></p><blockquote>!insertmacro MUI_LANGUAGE "SimpChinese"<br>!insertmacro MUI_LANGUAGE "SimpChinese_SP"<br>!insertmacro MUI_LANGUAGE "TradChinese"<br>!insertmacro MUI_LANGUAGE "TradChinese_MC"<br>!insertmacro MUI_LANGUAGE "TradChinese_HK"</blockquote>This workaround works fine except for one thing:<br><br>On non-Vista systems the Dialog Title of the Welcome Dialog shows 2 strange signs<br>instead of the chinese characters for "Setup" in the ^SetupCaption string.<br>This happens only on non-Vista (W2K, WXP, W2k3) systems.<br><br>Is this a "Feature" of Windows before Vista or another reasonable explanation.<br>If it can be fixed - HOW?<br><br>Remark: I know that most probably the Unicode Version of NSIS will fix this too,<br>but the (internal) requirement that the installer needs a complete re-test led to the<br>decision to stay with the non-Unicode version at the moment.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KrisAster</span><br><span class="post-time small text-muted">17th July 2008 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Have you tried to open the nlf/nsh files on an XP system? Do they show up unusually in a text editor like Notepad too, or is it only during an installation?<br><br>Also, have you tried to change those to other characters to see if it has something to do with those specific characters or just with that particular caption? (I know it's not likely, especially if they DO show up if the more standard region is used, but perhaps a different font is being used for that region?)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>