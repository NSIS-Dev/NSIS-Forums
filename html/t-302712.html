<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="how does a specific BMP show when a radiobutton clicked?"><title>how does a specific BMP show when a radiobutton clicked? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">how does a specific BMP show when a radiobutton clicked?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302712">how does a specific BMP show when a radiobutton clicked?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">3rd February 2009 03:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>how does a specific BMP show when a radiobutton clicked?</strong><br>I already read this article<br><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=257510&amp;highlight=radiobutton" target="_blank">http://forums.winamp.com/showthread....ht=radiobutton</a><br><br>like the sample file {_trueparuex^} uploaded, i modified my INI and NSI file but it doesn't seem to work.<br><br><br>=== INI file ===============================================<br>[Settings]<br>NumFields=9<br><br>[Field 1]<br>Type=Label<br>Text=choose your monitor resolution<br>Left=17<br>Right=211<br>Top=4<br>Bottom=14<br><br>[Field 2]<br>Type=Groupbox<br>Text=resolution<br>Left=0<br>Right=84<br>Top=22<br>Bottom=153<br><br>[Field 3]<br>Type=Groupbox<br>Text=description<br>Left=88<br>Right=228<br>Top=23<br>Bottom=153<br><br>[Field 4]<br>Type=RadioButton<br>Text=1280 X 1024<br>Left=10<br>Right=68<br>Top=43<br>Bottom=71<br>Flags=NOTIFY<br><br>[Field 5]<br>Type=RadioButton<br>Text=1680 X 1050 small<br>Left=10<br>Right=75<br>Top=76<br>Bottom=99<br>Flags=NOTIFY<br><br>[Field 6]<br>Type=RadioButton<br>Text=1680x1050 big<br>Left=10<br>Right=72<br>Top=108<br>Bottom=128<br>Flags=NOTIFY<br><br>[Field 7]<br>Type=Bitmap<br>Text=crt.bmp<br>Left=95<br>Right=220<br>Top=35<br>Bottom=144<br>Flags=RESIZETOFIT<br><br>[Field 8]<br>Type=Bitmap<br>Text=wide2.bmp<br>Left=94<br>Right=218<br>Top=33<br>Bottom=144<br>Flags=RESIZETOFIT<br><br>[Field 9]<br>Type=Bitmap<br>Text=wide.bmp<br>Left=95<br>Right=219<br>Top=32<br>Bottom=144<br>Flags=RESIZETOFIT<br><br><br>======== and this is NSI file ===========================<br><br><br>Name "InstallOptions Test"<br>OutFile "imagechanging.exe"<br>ShowInstDetails show<br><br>Function .onInit<br><br>InitPluginsDir<br>File /oname=$PLUGINSDIR\monitor.ini "AccountInf.ini"<br>File /oname=$PLUGINSDIR\crt.bmp "crt.bmp"<br>File /oname=$PLUGINSDIR\wide2.bmp "wide2.bmp"<br>File /oname=$PLUGINSDIR\wide.bmp "wide.bmp"<br><br>FunctionEnd<br><br>Page custom ShowCustom LeaveCustom ": Testing InstallOptions"<br><br>Function ShowCustom<br><br>InstallOptions::initDialog /NOUNLOAD "$PLUGINSDIR\monitor.ini"<br>Pop $0<br><br>InstallOptions::show<br>Pop $0<br><br>FunctionEnd<br><br>Function LeaveCustom<br><br>; At this point the user has either pressed Next or one of our custom buttons<br>; We find out which by reading from the INI file<br>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Settings" "State"<br>StrCmp $0 1 RadioButton<br>StrCmp $0 2 RadioButton<br>StrCmp $0 3 RadioButton<br>Abort ; Return to the page<br><br>RadioButton:<br><br>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 4" "State"<br>ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 7" "HWND"<br>ShowWindow $1 $0<br>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 5" "State"<br>ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 8" "HWND"<br>ShowWindow $1 $0<br>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 6" "State"<br>ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 9" "HWND"<br>ShowWindow $1 $0<br><br>Abort ; Return to the page<br><br>FunctionEnd<br><br>Page instfiles<br><br>Section<br>SectionEnd<br><br>=========================================================<br><br>anyone knows which part i made mistake?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">3rd February 2009 05:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">First, I'll say it's probably best to keep all your PAGE calls together. While it may work the way you have it, I think it makes for a cleaner script.<br><br>Next, have a look at this part:</p><pre>
<code>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Settings" "State"<br>StrCmp $0 1 RadioButton<br>StrCmp $0 2 RadioButton<br>StrCmp $0 3 RadioButton<br>Abort ; Return to the page</code>
</pre>There are a couple things to point out:<br>
      1) You are checking to see which control is "notifying" of an action. But, you are checking for the wrong values. In your case, the radio buttons are fields 4, 5, 6. So you need to check for values of "4", "5", or "6". In your case, it simply returns you back to page without doing anything<br>
      <br>
      2) You have an abort command if the none of the radio buttons are selected. When the user presses "next", it returns a value of zero. But in your case, you are going to go right back to the page instead of moving forward.<br>
      <br>
      3) When using radio buttons in an INI file, you should set Flag=Group on the first radio button in the list (which is Field #4 in your example.)<br>
      <br>
      Since you only seem to care whether or not a radio button is selected (and not necessarily WHICH radio button), you could probably get away with a much simpler check, which would also correctly handle a press of the "next" button: (example created using LogicLib...don't forget to add <i>!include logiclib.nsh</i> near the top of your script):<br>
      <pre>
<code><br>ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Settings" "State"<br>${Unless} $0 = 0<br>  ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 4" "State"<br>  ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 7" "HWND"<br>  ShowWindow $1 $0<br>  ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 5" "State"<br>  ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 8" "HWND"<br>  ShowWindow $1 $0<br>  ReadINIStr $0 "$PLUGINSDIR\monitor.ini" "Field 6" "State"<br>  ReadINIStr $1 "$PLUGINSDIR\monitor.ini" "Field 9" "HWND"<br>  ShowWindow $1 $0<br>  abort<br>${EndUnless}</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joe1202</span><br>
      <span class="post-time small text-muted">3rd February 2009 15:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">//Comperio<br>
      <br>
      Thanks so much!<br>
      I can see the BMPs chaging now!<br>
      wow!</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>