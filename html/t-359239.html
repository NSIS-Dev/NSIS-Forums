<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Shifting the default text position in NSIS installer pages" />

  <title>Shifting the default text position in NSIS installer pages - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Shifting the default text position in NSIS installer pages</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=359239">Shifting the default text position in NSIS installer pages</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">12th April 2013 06:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Shifting the default text position in NSIS installer pages</strong><br />
      I am using a background image for my installer pages, I have set all the other controls transparent.<br />
      There is a logo in the background image , which is overlapping with text on installer pages like the text on welcome page, license page etc.<br />
      <br />
      So is it possible that I can shift the position of this text from default to the one suitable for me, so that my background logo remains visible? Please Help.<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th April 2013 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">For all pages except the welcome and finish pages, I would recommend you modify the UI itself using Resource Hacker. The UI is Contrib\Graphics\UIs\modern.exe - copy to your script directory. You can apply it using <i>!define MUI_UI modern_new.exe</i>. You can just delete a load of controls that you are currently hiding. Be careful though... deleting some controls will result in a compile error so check your script still compiles when you do. For those that you cannot delete, I give them a size of 0, 0 and position them outside the dialog.<br />
      <br />
      As for the welcome and finish pages, you must either resize the controls at run time using the System plug-in and SetWindowPos or you could make a copy of the MUI source code and modify that instead. In either case it's quite messy.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">12th April 2013 08:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What control contains the text ? I used resource hacker but couldn't actually move the text position.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th April 2013 08:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You haven't said which text you are trying to resize so my guess is as good as yours. If you modify it in Resource Hacker make sure you click Compile before saving.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">12th April 2013 08:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I am trying to reposition text on Welcome page, Install directory page and Finish Page.<br />
      And I am compiling and then saving in resource hacker. But couldnt find the right controls I guess.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th April 2013 08:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As I said the welcome and finish pages need to be repositioned by modifying the Modern UI source code or by moving them at run time using the SetWindowPos API. The welcome and finish pages are not standard dialogs - they are created at run time using the nsDialogs plug-in. The directory page is dialog 103 (the main text control is #1006).<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">12th April 2013 11:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok..Thanks Stu. I was able to reposition the text on $instdir page using resource hacker.<br />
      But , I am still confused about welcome/finish page.. Even if I use SetWindowPos API as you suggested, I still need to know the Handle of the control that contains the text, isnt it ? Or am I missing something here.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th April 2013 12:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm working on a small plug-in which will make control resizing easier. It will be ready in an hour.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">12th April 2013 12:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wow. Thats great. :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th April 2013 14:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry I ran out of time and I want to make sure it works for RTL languages.<br />
      <br />
      For the welcome/finish page control handles, check Contrib\Modern UI 2\Pages\*. There are variables defined for each control.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th April 2013 18:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Finished the plug-in:<br />
      <a href="http://nsis.sourceforge.net/NsResize_plug-in" target="_blank">http://nsis.sourceforge.net/NsResize_plug-in</a><br />
      <br />
      You can use the nsResize::Add function to increase the size of controls using the same units as nsDialogs (pixels, dialog units or percent). I've also added an example script which increases the size of the entire NSIS installer and uninstaller UI along with all wizard pages without any hacking of the UI with Resource Hacker.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">15th April 2013 07:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hey Stu.. Many thanks for this plugin.<br />
      <br />
      But I am not able to use it properly.<br />
      For example, I am trying to resize the text on Directory page so I am doing this:<br />
      <br /></p>

      <blockquote>
        nsResize::Set 1006 25 150 460 190
      </blockquote>But the text remain unchanged on installer directory page.<br />
      <br />
      Can you pls give me an example for resizing controls?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th April 2013 11:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It wants a window handle rather than an id. Also I would use dialog units over pixels and I would use Add rather than Set if you just want to make a control bigger.<br />
      <br />
      For example:</p>
      <pre>
<code>FindWindow $R0 `#32770` `` $HWNDPARENT<br />GetDlgItem $R0 $R0 1006<br />nsResize::Add $R0 0 0 0 20u</code>
</pre>This will make the control 20 dialog units higher.<br />
      <br />
      Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">15th April 2013 13:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok. Great. It worked!!! Thanks.<br />
      <br />
      And regarding the text on welcome page I checked Contrib\Modern UI 2\Pages\welcome.nsh as you suggested, the MUI_WELCOMEPAGE_TEXT is defined for text control but when I used it to resize, nothing happened.<br />
      <br /></p>
      <pre>
<code>FindWindow $R0 `#32770` `` $HWNDPARENT<br />GetDlgItem $R0 $R0 MUI_WELCOMEPAGE_TEXT<br />nsResize::Set $R0 0 200 50u 50u</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th April 2013 14:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That is just a compile time define for the label text. The handle is stored in $mui.WelcomePage.Text:</p>
      <pre>
<code>nsResize::Set $mui.WelcomePage.Text 0 200u 50u 50u</code>
</pre>Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">15th April 2013 14:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well I tried this too earlier..but Nsis is not recognizing it, text size is not changing and this warning is showing up :<br />
      <br /></p>

      <blockquote>
        unknown variable/constant "mui.WelcomePage.Text" detected.
      </blockquote>Has it worked for you ?<br />
      (Sorry for bugging you this much. )
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th April 2013 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You must be using MUI1. Switch to MUI2.nsh.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">16th April 2013 07:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You're right. I was using MUI1.nsh. Now I switched to MUI2.nsh , found out that it doesnt support MUI_HWND so modified the code according to MUI2 , and finally it Worked. Thanks a lot Stu.<br />
      Similarly it worked for Finish page. (Wow)<br />
      But I dont why , there are coming these same warnings, as below:<br />
      <br /></p>

      <blockquote>
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:4)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:5)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText.Info" detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:6)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:6)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_TEXT:6)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_TEXT:7)<br />
        unknown variable/constant "mui.ComponentsPage.DescriptionText" detected, ignoring (macro:MUI_DESCRIPTION_TEXT:8)<br />
      </blockquote>Though there is no MUI_DESCRIPTION_* in my code.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">16th April 2013 23:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Do you have MUI_FUNCTION_DESCRIPTION_BEGIN but with no MUI_PAGE_COMPONENTS?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">miraz.zaidi</span><br />
      <span class="post-time small text-muted">18th April 2013 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah.. removed it and all is working fine now. A big thanks to you for all the help. :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
