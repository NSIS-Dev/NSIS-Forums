<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS API XML Reference"><title>NSIS API XML Reference - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=" NSIS API XML Reference"><title>NSIS API XML Reference - NSIS Forums</title><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS API XML Reference</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=155982">NSIS API XML Reference</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">12th November 2003 14:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS API XML Reference</strong><br>Hi!<br><br>I think it should be useful to standardize the NSIS API and to describe and document them inside an XML format file which should be used by NSIS Editors too to help integration of new features.<br><br>Is there someone (also Nullsoft guys) who wants to partecipate to this project?<br><br>Anyone already thought about this?<br>Any comments?<br><br>This should be useful also for new Nullsoft and non-Nullsoft software.<br><br>Camillo.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">12th November 2003 14:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSIS used a customized Halibut version to output XHTML and HTML Help documentation. You would have to modify Halibut to output XML files.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">12th November 2003 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I was looking at something to describe the API and the properties of the parameters that should go with the API.<br><br>Like:<br><br>&lt;Function name="AddBrandingImage" description="Function to set the bla bla bla..."&gt;<br>&lt;Parameter name="Align" type="enum" enumvalues="top|left" description="bla bla" /&gt;<br>&lt;Option&gt;<br>&lt;Parameter name="Height" type="int" description="bla bla" /&gt;<br>&lt;Parameter name="Width" type="int" description="bla bla" /&gt;<br>&lt;/Option&gt;<br>&lt;/Function&gt;<br>&lt;Function name="AutoCloseWindow" description="Function to set the bla bla bla..."&gt;<br>&lt;Parameter name="Autoclose" type="enum" enumvalues="false|true" description="bla bla" /&gt;<br>&lt;/Function&gt;<br><br>And so on...<br><br>This is a simple implementation and does not cover every NSIS API.<br><br>I think it's a big effort, so we need the help of a Nullsoft dev.<br><br>Do you think Halibut can do this kinf of things?<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">12th November 2003 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That should be possible, but you will have to add support to Halibut.<br><br>Finishing NSIS 2 has priority for the developers, maybe some other users want to help you.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">12th November 2003 17:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Halibut?</strong><br>Where can I find the Halibut version for NSIS?<br><br>Do I have to contact the author? (Who is he?)<br><br>I cannot find any info about this Halibut...<br>Only here:<br><a href="http://www.chiark.greenend.org.uk/~sgtatham/halibut.html" target="_blank">http://www.chiark.greenend.org.uk/~s...m/halibut.html</a><br><br>Thanks,<br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">12th November 2003 17:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Halibut's sources and executable are in NSIS's CVS. It's a modified version of Halibut.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">14th November 2003 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Halibut &amp; cvs</strong><br>Ok I downloaded the last shapshot of NSIS cvs dir and I found the source of Halibut and the docs for NSIS documentation.<br><br>Two things, please help:<br>1) I cannot access the cvs repository as an anonymous; I am behind a firewall so I tried the port 80 but this is the result:<br><br><font color="darkblue"><br>D:\Dev\TortoiseCVS&gt;cvs -d:pserver:anonymous@cvs-pserver.sf.net:80/cvs/NSIS login<br><br>Logging in to :pserver:anonymous@cvs-pserver.sf.net:80:/cvs/NSIS<br>CVS password:<br>cvs [login aborted]: authorization failed: server cvs-pserver.sf.net rejected ac<br>cess to /cvs/NSIS for user anonymous<br></font><br><br>Know why?<br><br>2) I am also a developer and I really would like to integrate my idea in Halibut, but:<br>- is it possible?<br>- to whom do I have to ask? is there somebody who is currently working on the project?<br><br>Thanks,<br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th November 2003 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><ol style="list-style-type: decimal"><li>Instructions on using CVS can be found here:<br><br><a href="http://sourceforge.net/cvs/?group_id=22049" target="_blank">http://sourceforge.net/cvs/?group_id=22049</a><br><br>After a short look it seems you have just specified the wrong project name.<br><br>You can also use NSIS Update which runs CVS for you or the nightly snapshot (available in the development page on the NSIS hoempage).</li><li>Halibut was originally developed by the same person who wrote PuTTY, I think. I think it would be easier to make a converter from the XML listing you have suggested to Halibut files because there are a lot of other information in the documentation but instructions reference. But if you can fit it all in XML so it will be easier for other programs to read it, it would be even better.</li></ol><br>BTW, Virtlink once started a similar project, he might still be interested, so you might be able to work together on this.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">14th November 2003 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Halibut &amp; cvs</strong><br>1) Well, a few more tries, but nothing moved right:<br><br>I changed the server and project name:<br><br><font color="darkblue"><br>D:\Dev\TortoiseCVS&gt;cvs -d:pserver:anonymous@cvs.sourceforge.net:80/cvs/nsis login<br>Logging in to :pserver:anonymous@cvs.sourceforge.net:80:/cvs/nsis<br>CVS password:<br>cvs [login aborted]: unrecognized auth response from cvs.sourceforge.net: HTTP/1<br>.1 400 Bad Request<br></font><br><br>I changed the project name:<br><br><font color="darkblue"><br>D:\Dev\TortoiseCVS&gt;cvs -d:pserver:anonymous@cvs-pserver.sf.net:80/cvs/nsis login<br><br>Logging in to :pserver:anonymous@cvs-pserver.sf.net:80:/cvs/nsis<br>CVS password:<br>cvs [login aborted]: authorization failed: server cvs-pserver.sf.net rejected ac<br>cess to /cvs/nsis for user anonymous<br></font><br><br>Am I doing something wrong?<br><br>2) The Virtlink Project (NICE) seems to be unfortunately ended.<br>Look here: <a href="http://nsis.sourceforge.net/archive/viewpage.php?pageid=80" target="_blank">http://nsis.sourceforge.net/archive/....php?pageid=80</a><br><br>Are you saying that it should be good and useful to convert Halibut to use xml instead of its current work files?<br>This should be a nice project to work on, but unfortunately, I don't know anything about Halibut and can't find any docs about it. Is there something out there?<br>If not, maybe I should try to develop first a converter to Halibut.<br><br>[REEDITED MSG]<br>Ops, I found what you were talkin about and sent a mail to VirtLink.<br>Thanx!<br>[/REEDITED MSG]<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th November 2003 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why are you trying to access CVS on port 80? The first error you got it because of that (server sent you error 400 - bad request). The second seem to come from a server that has port 80 open especially for people with firewall restrictions. Am I correct?<br><br>Anyway, in both cases, you're missing root. It's supposed to be /cvsroot/nsis not in /cvs/nsis. Have a look at that page I linked to in the last post.<br><br>I wasn't talking about NICE, I was talking about <a href="http://forums.winamp.com/showthread.php?s=&amp;postid=916189#post916189" target="_blank">this thread</a>.<br><br>As for converting Halibut to use XML, I don't think that would be wise. I think it will be way easier to create a new program that will process XML only. But that's up to you. I think starting with just a converter will be a good idea, but, again, that's up to you.<br><br>We will use whatever form of XML parser you supply us as long, as long as it's maintainable, easy to use, creates both CHM and HTML, open-source, and last but not least - has a relatively small and fast first conversion step from the current method.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">14th November 2003 14:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) You were right; this worked for me:<br><br>cvs -d:pserver:anonymous@cvs-pserver.sf.net:80/cvsroot/nsis login<br><br>Yes I am connecting to this server on port 80 because I am behind a firewall... I am at work!<br><br>2) Sorry for boring you, but this thing is getting interesting; could you please reply me with 3 lines to explain me the current Halibut method? Who writes the docs,with which software (notepad???) and in which format (BUT files?)? What does Halibut (parses the BUT files and creates both HTML and CHM)?<br><br>Thanx for your time!<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th November 2003 14:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Halibut eats .but files which are simple text files containing certain one line or inline mark-ups. There are mark-ups to start chapters, sections and smaller sections, mark-ups to link to other sections or an external page and some more mark-ups that are usually not used. Using these files it creates HTML pages with contents and splits them according to a setting set in the text files (see config.but in NSIS's case). Our own Halibut version also spits out input for Microsoft's HTML Help compiler (hhc) if asked to (see config_chm.but).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">18th November 2003 10:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi!<br><br>I was wondering if you have in mind some design issues for a new documentation software. Maybe more features or corrections for the current software. I think simplicity is the most important key.<br><br>Currently I started working on a little app which should convert Halibut's BUT files to a simple simple xml format.<br>I am stuck with recursive tags at the moment, but I see they are not so used in the current BUT files.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">18th November 2003 12:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If already going towards XML, I'd like it to be as abstract as possible. For example, the parameter list should be as you described above and not as currently kept. Other than that, there is nothing else I can think of at the moment. I will let you know if something else comes up.<br><br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">19th November 2003 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>XML Conversion Sample</strong><br>Hi!<br><br>I just completed the converter from Halibut to simple xml.<br><br>First step will be to define a simple standard xml format to describe the docs architecture (all very simple) and implement the parser and renderer. Take the current BUT files and convert them to the new xml format.<br><br>Next I will work on the parameter list.<br>This is a bit complicated because NSIS API have many different syntactical behaviours. If you have suggestions on this point please tell me.<br><br>I attached to this msg a sample of the BUT files converted to xml.<br>Just unzip and view with Internet Explorer.<br>Recursive tags already works.<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">19th November 2003 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Cool, good work.<br><br>I don't think a convertor would really work for the parameter list. The format is pretty loose there... Manual work would be best there.<br><br>I don't currently have any suggestions to the format of the XML, but if I think of anything, I'll let you know.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">25th November 2003 18:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Docs beta release</strong><br>Hi!<br><br>This is the first release of NSIS docs created using simple xml files instead of halibut files.<br><br>The process was:<br>1) Converted BUT files to simple xml.<br>2) Parsed simple xml and rendered new docs.<br><br>The tag are quite the same as those in Halibut, except:<br>- H tag replaced by T1.<br>- S# tags replaced by T#+1.<br>- c tag can be multiline.<br>- b tag needs &lt;ul&gt; and &lt;/ul&gt; for start and end of list.<br>Other changes could be made easily.<br><br>The conversion is completely automatic.<br><br>I managed to reproduce the structure of html pages as halibut does, but it can be personalized with the header and footer files.<br><br>Now I am going to check the html for any errors, but I think the conversion is quite perfect.<br><br>To check it, unzip in a folder and open "toc.html".<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">26th November 2003 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>[UPDATE] Some bugs corrected</strong><br>Hi!<br><br>This is an updated version of the docs produced from xml; I found some bugs in the conversion routine from halibut to xml and corrected them:<br>- new lines<br>- pre tags next to ul tags<br>- preformatted html<br><br>Download this one!<br><br>PS BUT halibut files are not the latest but those of NSIS2b3. I will update them when I will have a stable version of my software.<br><br>PPS The source code of my new doc software will be open source soon.<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">virtlink</span><br><span class="post-time small text-muted">26th November 2003 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It all looks very great, but I have a few suggestions.<br><br>At first, would it be possible to make an Xml Styleheet which provides the markup for the 'halibut-xml'-files. I think it is possible, and it would save you a lot of trouble. You could use Saxon to parse the xml and xslt-files to html files. And it would create the possibility to change the looks of the output html-file without diving into computer code. Another thing is that people with Xml and Xslt-enabled browsers may assign a different stylesheet to the Xml-files, which results in the look-and-feel they desire, which may very well differ from the default look-and-feel.<br><br>Just a suggestion, but I think that you should take a look here: <a href="http://forums.winamp.com/showthread.php?s=&amp;postid=916000#post916000" target="_blank">http://forums.winamp.com/showthread....000#post916000</a>. I've been working on stylesheets and xml for the documentation of NSIS, and the results looked promising in my eyes.<br><br>Keep up the good work! :up:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th November 2003 21:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">camillo, cool, getting better :)<br><br>Any estimate on when the real XML benifit will pop in? I want to know if we'll be able to push it into NSIS 2.<br><br>I think a XSLT could save some time, but the program would still need to work out the refernces, links and contents.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">27th November 2003 09:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">kichik:<br>The xml parser and doc renderer is quite ok.<br>I'm just struggling with &lt;PRE&gt; formatting... the xml tends (by design xml is so...) to strip out the spaces ' '... maybe I will leave it so for now.<br>For the xml benefit it's not only a matter of upgrading the xml parser, but also:<br>1- study a suitable format to express data (e.g. function parameters)<br>2- make (cut &amp; paste) the xml files<br><br>some questions:<br>1- have you in mind to standardize NSIS API syntax &amp; parameters?<br>2- do you know every possible syntax for NSIS API parameters? like a radio, checkbox or listbox syntax?<br><br>virtlink:<br>Do you have any simple idea of how to use an xsl schema in this stuff... this is the moment where I need ideas... :)<br>Would you like to help me reviewing current NSIS docs to extrapolate a cool xml format for data and making the xml files?<br>My idea is like making queries to a db (which is the xml file) and have a few commands to get out the info by name.<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">virtlink</span><br><span class="post-time small text-muted">27th November 2003 11:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, I can help you. I wrote a stylesheet before, and I think that I figured out how to do it this time.<br><br>And I suppose that you mean that you actually need a way to describe the parameters better in XML, and to preserve the whitespace. I think that a stylesheet can preserve whitespace when nescessary, and I also have some toughts about Xml-elements for the parameters (e.g. describing <font face="courier new">[optional [optional2]] required</font>).<br><br>I'll take a look into it today, but not now. :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br><span class="post-time small text-muted">27th November 2003 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">virtlink:<br>One thing... the xml parser I am using is a simple xml parser written in C not by me a couple of years ago; I took it, converted to C++ and I am changing it to implement the behaviour I want (like the whitespace problem...); so it is a very simple parser.<br>The whole project is ANSI C++, so "should" be portable...<br>The idea is to keep it simple; I would like, if possible, to encapsulate the xls parser into my parser and dont use an external &amp; complicated one (also because xls is written in xml, my xml parser should be enough to parse it).<br>So we have to work on a simple description language... or I should look for an open source advanced parser or switch definitely to Microsoft MSXML.<br><br>Anyway, go on with it!<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">27th November 2003 14:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">As you've said, the hard part is indeed coming up with the XML schema (description language) and create the XMLs. Because of that, I think it would be best to use an existing XML parser, <a href="http://xmlsoft.org/" target="_blank">libxml</a> for example as it seems the fastest one.<br><br>I think the schema should consist of three basic blocks, instructions, installer attributes and pre-processor commands. Each command of each type should first describe the number of arguments it can get and then list the different possibilties. There shold be several types of arguemnts - mandatory (function name), from a list (on|off), optional (/o or /e) and probably some type that indicates it is requried only if some other one was used.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">virtlink</span><br><span class="post-time small text-muted">28th November 2003 11:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">From my perspecitive, I think that the syntax should be able to be understood by programs (e.g. be describtable) but should also be used to generate the documentation.<br><br>I've created the following example with the File instruction:<br></p><pre>
<code><br>&lt;i id="File" cat="basic" syntax="File"&gt;<br>  &lt;d&gt;Adds file(s) to be extracted to the current output path (&lt;see cref="$OUTDIR"/&gt;).&lt;/d&gt;<br>  &lt;p name="/nonfatal" required="0" type="switch"&gt;When used, a warning will be issued if no files found instead of an error.&lt;/p&gt;<br>  &lt;p name="/a" required="0" type="switch"&gt;When used, the attributes of the file(s) added will be preserved.&lt;/p&gt;<br>  &lt;po required="1"&gt;<br>    &lt;pg&gt;<br>      &lt;p name="/r" required="0" type="switch"&gt;When used, files and directories are added recursively.&lt;/p&gt;<br>      &lt;po required="1" repeat="-1"&gt;<br>        &lt;p name="file" type="filepath"&gt;The output filename. Note that the output file name is &lt;see cref="$OUTDIR"/&gt;\filename_portion_of_file,<br>          or, if no filename specified, the whole tree will go in &lt;see cref="$OUTDIR"/&gt;\last_folder_name.&lt;/p&gt;<br>        &lt;p name="wildcard" type="pathwc"&gt;The output path. Note that the whole tree will go in &lt;see cref="$OUTDIR"/&gt;.&lt;/p&gt;<br>      &lt;/po&gt;<br>    &lt;/pg&gt;<br>    &lt;pg&gt;<br>      &lt;p name="/oname" value="/oname=" required="1" type="text" nospace="1" /&gt;<br>      &lt;p name="file.dat" type="filename" required="1"&gt;The output filename.&lt;/p&gt;<br>      &lt;p name="infile.dat" type="filepath" required="1"&gt;The input filename (and optionally a fully qualified path).&lt;/p&gt;<br>    &lt;/pg&gt;<br>  &lt;/po&gt;<br>&lt;/i&gt;<br></code>
</pre><br>
      <br>
      In this code, the following elements are used:

      <ul>
        <li>I element: An instruction (or attribute).</li>

        <li>P element: An instruction parameter.</li>

        <li>PG element: A group of parameters.</li>

        <li>PO element: The user has to choose one parameter from the parameters contained in this element (i.e. option1 | (option2_1 option2_2) | /switch).<br>
        <br>
        Trough this, all parameters of all instructions, attrbutes, functions, macros, Var, etc.. can be specified.</li>
      </ul>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">28th November 2003 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This seems to me a good description language.<br>
      Did you check that every NSIS instruction can be described by such a language?<br>
      Should we be more generic and add some more elements that maybe NSIS Docs do not use but that another software could use in the future?<br>
      <br>
      Now we should choose how to implement the parsing of that xml.<br>
      The fastest one is implement the parsing intelligence inside the source code.<br>
      The smartest is to use an xsl schema which would describe in some manner the xml and which describes the rendering of such an element.<br>
      <br>
      kichik: When will NSIS 2 come out?<br>
      How much time do we have?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">28th November 2003 12:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>Did you check that every NSIS instruction can be described by such a language?</b>
      </blockquote>The File instruction seemed the most complex one to me. So if the File instruction can be described, then with no doubt the others can too.<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>Should we be more generic and add some more elements that maybe NSIS Docs do not use but that another software could use in the future?</b>
      </blockquote>Yes, we should. This format's main advantage is that programs can read it too. If that would not be nescessary, then we would just be writing HTML.<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>Now we should choose how to implement the parsing of that xml.<br>
        The fastest one is implement the parsing intelligence inside the source code.<br>
        The smartest is to use an xsl schema which would describe in some manner the xml and which describes the rendering of such an element.</b>
      </blockquote>I agree. I think that an XSL schema would be complicated, but highly modifiable on the other hand. A source code parser would be fast, but wouldn't allow much modification.<br>
      <br>
      I tought that a combined work of the two might be nice. What about a program which parses the 'xml-file for applications' to an 'xml-file which looks like a webpage', which then can be combined with an xsl-file. This would allow users to modify the look of the documentation, and save us a lot of touble getting the stylesheet right. We could use a modified version of the format and stylesheet I made before: <a href="http://forums.winamp.com/showthread.php?s=&amp;postid=916000#post916000" target="_blank">http://forums.winamp.com/showthread....000#post916000</a>.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">28th November 2003 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) Ok for me the xml description of functions can be that one; maybe we should also wait for kichik to see if he has suggestions.<br>
      <br>
      2) What I mean is: do we need a more rich desciption language? So it can include other possibilities?<br>
      <br>
      3) I dont like very much the idea that the browser should parse itself the xsl file to format the page, bacause I think we will be limited to IExplorer6 and we should check for the browser version.<br>
      <br>
      Instead it would be cool that the new software will parse the xsl and generate html from the xml formatted as xsl said.<br>
      <br>
      Rememeber also that additional text must be added to those xml documents to produce the final docs.<br>
      <br>
      Lets take an example:<br>
      halibut2xml file: basic.but.xml<br>
      xml NSIS function reference: functions.xml<br>
      xsl formatting stylesheet: functions.xsl<br>
      output file: Chapter1.html<br>
      <br>
      So the process should be:<br>
      an xml parser parse the basic.but.xml for preprocessor directives; it finds a tag that tells the parser to include file "functions.xml" and format it as "functions.xsl".<br>
      The inclusion converts the file in a complete xml file.<br>
      This xml file is then rendered to html to produce output.<br>
      <br>
      Dont know if it is simple to parse xsl and generate html, or if some libraries do the job for me.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">28th November 2003 14:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS 2 will hopefully be released in less than a month. Not much more is to be done before b5, and after that it's RC1 and then final.<br>
      <br>
      To know if the format will fit every command you really have to go on every command and check. I would start with those who can take an infinite number of parameters such as !if. Does that format work with them?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">28th November 2003 15:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>2) What I mean is: do we need a more rich desciption language? So it can include other possibilities?</b>(...)
      </blockquote>Any suggestions? I think that while the xml should specify everything as detailed as possible, it also still should be easy to add a new instruction.<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>3) I dont like very much the idea that the browser should parse itself the xsl file to format the page, bacause I think we will be limited to IExplorer6 and we should check for the browser version.</b>(...)
      </blockquote>You are right about the compatibility issue. I didn't mean that the ONLY way of reading the docs is by letting the bowser apply the stylesheet. I indeed meant that we also need a program to convert them to HTML, and include them both: the HTML and the XML + stylesheet.<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>Instead it would be cool that the new software will parse the xsl and generate html from the xml formatted as xsl said.</b>(...)
      </blockquote>The program <a href="http://saxon.sourceforge.net/" target="_blank">Saxon</a> does just that. And it's open source :)!<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>Rememeber also that additional text must be added to those xml documents to produce the final docs.</b>(...)
      </blockquote>Well, in my example, the extra describing text is included. For the text that can't be described, since they aren't part of an instruction (i.e. a tutorial), different elements (tags) must be invented.<br>
      <br>

      <blockquote>
        <i>Part of a post originally posted by camillo</i><br>
        (...)<b>An xml parser parse the basic.but.xml for preprocessor directives; it finds a tag that tells the parser to include file "functions.xml" and format it as "functions.xsl".<br>
        The inclusion converts the file in a complete xml file.<br>
        This xml file is then rendered to html to produce output.<br></b>(...)
      </blockquote>Do you mean that your program, or any other program, would generate functions.xml from basic.but.xml? Or are the two (functions.xml and basic.but.xml) combined to form the document. I go for the first.<br>
      <br>

      <blockquote>
        <i>Last part of a post originally posted by kichik</i><br>
        (...)<b>To know if the format will fit every command you really have to go on every command and check. I would start with those who can take an infinite number of parameters such as !if. Does that format work with them?</b>
      </blockquote>A 'isinfinite="1"' argument could be set on the P-element (or PO or PG). Then the parser should add the [...] to the end of it.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">28th November 2003 17:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        Any suggestions?...
      </blockquote>I dont have any suggestions for now.<br>
      Let's start with this schema and try to apply it to the whole stuff!<br>
      <br>

      <blockquote>
        You are right about the compatibility issue...
      </blockquote>Ok I will try to use "libxml" to parse xls: saxon is in java, libxml is in C.<br>
      Let's see if it parses xls and formats xml to html.<br>
      <br>

      <blockquote>
        Do you mean that your program...
      </blockquote>I was meaning the second one... because the xml API should be written separately as a standalone reference (1 for each category: basic, instructions,preprocessor etc.) and then included in the documentation like they were database tables. Doing like this you could have 2 people working on docs at the same moment, a technician and a documenter. I think this is the cleaner solution, but maybe it is not the simplest; anyway, also the first is also a good one (we don't have much time)... maybe let's ask also to NSIS guys!
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">18th December 2003 10:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Help needed for XML &amp; XSLT docs</strong><br>
      Anyone want to help making the xml files for NSIS new documentation?<br>
      <br>
      Help needed in rendering xml &amp; xslt files:<br>
      <br>
      Xml files are the archives:<br>
      instructions.xml<br>
      installer_attributes.xml<br>
      preprocessor_commands.xml<br>
      <br>
      Xsl stylesheets:<br>
      instructions.xsl<br>
      installer_attributes.xsl<br>
      preprocessor_commands.xsl<br>
      <br>
      Virtlink, are you always here?<br>
      <br>
      Thanks,<br>
      Camillo</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">18th December 2003 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Help needed for XML &amp; XSLT docs</strong><br></p>

      <blockquote>
        <i>Originally posted by camillo</i><br>
        (...)<b>Virtlink, are you always here?</b>
      </blockquote>Not always, but I monitor the forums from time to time. :D ;)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">19th December 2003 10:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">virtlink: do you have time to make an xslt schema to transalate the xml that you posted previously and compile tha xml file of all instructions?<br>
      <br>
      I'll tell you the steps which I want to use make the new docs:<br>
      1) [Human step - but I will get them from halibut files] Make docs pages in pseudo-xml (pseudo because it must not have a top level tag).<br>
      <br>
      2) Divide these files into Chapters and Appendixes, creating Chapter1.xml, Chapter2.xml etc.<br>
      <br>
      2) [Human step] Make standalone-xml-data files (functions, instructions etc.)<br>
      <br>
      3) Apply stylesheet to transform standalone-xml-data files to xml-data (for example: apply instructions.xsl to instructions.xml).<br>
      <br>
      4) Include the transformed xml-data in the previously generated xml docs (Chapter1.xml, Chapter2.xml etc.).<br>
      <br>
      5) Process xml docs and replace reference and links.<br>
      <br>
      6) Apply formatting stylesheet to the whole project to produce html pages.<br>
      <br>
      7) Add header and footer to pages with chapter index.<br>
      <br>
      We should have 1 stylesheet for each data category (instructions, attributes, commands)? Or 1 for all?<br>
      <br>
      Then we need another formatting xslt to translate to html, but this is simpler.<br>
      <br>
      Tell me what do you think!<br>
      <br>
      If anybody is interested in this, tell me!<br>
      <br>
      Camillo</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">19th December 2003 12:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I still son't understand this very well, but please tell be if I'm wrong:<br>
      There are source files (generated from the .but files), then we transform them using some stylesheet. The output is another file (still Xml), which has to be transformed to Html using another stylesheet.<br>
      <br>
      Can you give some lines of example Xml/Html code for each step?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">22nd December 2003 09:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Working (i hope) Demo!</strong><br>
      The file is to big to be attached to this message (about 1 MB). Download it from here:<br>
      <br>
      <a href="http://www.webplus.it/camillo/download/doxtest.zip" target="_blank">http://www.webplus.it/camillo/download/doxtest.zip</a><br>
      <br>
      This zip file must be unzipped in a dir (if it is the root of a drive is better, because you will need to change a couple of paths to make it works in a directory different from "E:".<br>
      <br>
      There is a "_README" directory that contains:<br>
      - Architecture design (NSISDocsArchitecture.tif)<br>
      - Important infos (readme.txt)<br>
      <br>
      The architecture is made up of 5 layers:<br>
      - Pseudo-xml layer<br>
      - Data layer<br>
      - Business layer<br>
      - Presentation layer<br>
      - HTML layer<br>
      <br>
      1) Pseudo-xml is the markup language which I defined taking some rules from Halibut:<br>
      C = chapter<br>
      A = appendix<br>
      T# = paragraph<br>
      R = internal reference<br>
      L = link<br>
      W = web link<br>
      etc.<br>
      This files are clled psudo-xml because the xml top level element is missing.<br>
      <br>
      2) Data layer is like a database and contains the standalone xml files which must contain instructions, attributes, commands etc.<br>
      Data layer is converted in pseudo-xml with appropriate xsl transforms.<br>
      <br>
      3) Business layer is the conversion of pseudo-xml to real xml with the inclusion of files generated from data layer.<br>
      <br>
      4) Presentation layer is the conversion of business layer replacing all reference and internal links.<br>
      <br>
      5) HTML layer is the conversion of presentation layer into html with another xsl Transform.<br>
      <br>
      Tell me if it works on your machine!<br>
      On my machine this is a working example (from halibut files to html documentation). Conversion from halibut to pseudo-xml is separated from the process because it must be done only once. Don't do it, because I added some lines to pseudo-xml converted from Halibut to test the include feature.<br>
      <br>
      Camillo</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">22nd December 2003 11:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've looked at the (great) samples, and read trough your description and the 'architecture'-image twice.<br>
      I think that I understand it now, but please correct me if I'm wrong:<br>
      There are source files. These are combined with the 'pseudo-xml' files. The 'pseudo-xml' files contain how the data in the source files is layouted (one instruction per page, or all instructions per chapter, etc..). Then you have files which can be converted to Html easely.<br>
      <br>
      I left out some steps (link supstitution, data rendering, etc..) but I am aware of that, and I think that my description above gives a more general point of view (yours is very detailed).<br>
      <br>
      - DaniÃ«l</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
      <span class="post-time small text-muted">22nd December 2003 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">B.t.w., is it true that most of the text and descriptions now contained in 'pseudo'-xml .but.xml-files should be contained in the data files (in the \dl folder)?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">22nd December 2003 12:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, you are right:<br>
      <br>
      "most of the text and descriptions now contained in 'pseudo'-xml .but.xml-files should be contained in the data files (in the \dl folder)"<br>
      <br>
      I left them only to have the current situation.<br>
      When the data files will be ready, we will strip out repetitions.<br>
      <br>
      What you call "source files" I prefer to call "data files", but it's ok; they are "combined" (xsl transformed and included) in 'pseudo-xml' files; the 'pseudo-xml' files contain how the data in the 'source files' is layouted (processed and xsl transformed).<br>
      BUT the first xsl-transform to source-files (i.e. instructions.xsl) contains the description of layout of "source files" in our pseudo-xml markup language. Infact to every &lt;i&gt; tag is added a &lt;T2&gt; tag to define a new paragraph.<br>
      <br>
      Camillo</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
      <span class="post-time small text-muted">23rd December 2003 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Kichik: will NSIS 2 be released shortly?<br>
      I will be out from the 25th of December until the 6th of January, but I can reach my email and NSIS forum.<br>
      Did you download the zip? How do you think the job is going on?<br>
      <br>
      Virtlink: can you help me editing the source-files (those in the dt) directory while I am away?<br>
      Tell me if the software I sent you is working well!<br>
      If you have time, can you think also at the html rendering?<br>
      <br>
      Camillo</p>
    </div>
    <hr>
    
    
    

    <div class="container">
      

      <ol class="breadcrumb">
        <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

        <li><a href="f-65.html">NSIS Discussion</a></li>

        <li class="active">NSIS API XML Reference</li>
      </ol>

      <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=155982">NSIS API XML Reference</a></p><br>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">virtlink</span><br>
        <span class="post-time small text-muted">23rd December 2003 20:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Your program works, but I have a suggestion.<br>
        Maybe it would be a little bit easier to build a program which converts the files in the dl-folder to their rendered equalivents.<br>
        Creating a stylesheet for them seems a little bit unnescessary IMHO, since (if we do it correctly), the syntax should never change.<br>
        And in case the syntax changes (added functionality), then much more has to change anyway. A little bit digging in the C++ program would be a lot easier than learning Xslt from the beginning. And I think that there are more people on these forums who know C++ than Xslt-stylesheets.<br>
        <br>
        I will try to write a small Console program for it in C#, but then should you translate it to C++.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">camillo</span><br>
        <span class="post-time small text-muted">24th December 2003 08:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I think that using a stylesheet is much more simple, because you don't have to change the C++ code.<br>
        Also non-programmers could do it and use it.<br>
        Just do a xsl:for...next and format the item as you like...<br>
        <br>
        Next I need that rendered "dl" files should contain paragraphs (T1,T2) to be referenced from the documents.<br>
        <br>
        Anyway make a little sample of what you think about it and we'll see if it works better.<br>
        <br>
        More: think about this software as a generic documentation software, not only for NSIS; so the "dl" files can change quickly and doing a new C++ code for each would be a useless mess.<br>
        <br>
        I was thinking that the "instructions.xsl" file should transform the "instructions.xml" file in a near-html fashion, with tables and layout, but still our markup language tag for defining paragraphs and links.<br>
        <br>
        Camillo</p>
      </div>
      <hr>

      <div class="footer">
        <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
      </div>
    </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script> <script type="text/javascript">
//<![CDATA[
    hljs.initHighlightingOnLoad();
    //]]></script></div></body></html>