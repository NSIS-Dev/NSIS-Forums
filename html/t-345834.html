<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How to set an environment variable in system variable" />

  <title>How to set an environment variable in system variable - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How to set an environment variable in system variable</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=345834">How to set an environment variable in system variable</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gowrisankar</span><br />
      <span class="post-time small text-muted">27th June 2012 14:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to set an environment variable in system variable</strong><br />
      Hai,<br />
      <br />
      I want to set the environment variable in system variable path for my application. How can I set that using nsis?...........:rolleyes:<br />
      <br />
      For ex: C:\Program Files\Sample\bin, I want to set this path in System variable..<br />
      pls help me..<br />
      <br />
      <br />
      Thanks in advance...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">T.Slappy</span><br />
      <span class="post-time small text-muted">28th June 2012 06:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try this: <a href="http://nsis.sourceforge.net/Setting_Environment_Variables_to_Active_Installer_Process" target="_blank">http://nsis.sourceforge.net/Setting_...taller_Process</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gowrisankar</span><br />
      <span class="post-time small text-muted">29th June 2012 08:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hai,<br />
      Thank for your guidelines, I downloaded the plugin and update the SetEnv.dll in application path plugin folder. Also I tried the code the following code<br />
      <br />
      <b>1:The First Way</b><br />
      ReadEnvStr $R0 "PATH"<br />
      StrCpy $R0 "$R0;C:\MYAPP"<br />
      System::Call 'Kernel32::SetEnvironmentVariableA(t, t) i("PATH", R0).r0'<br />
      <br />
      <b>2:The Second Way</b><br />
      ReadEnvStr $R0 "PATH"<br />
      StrCpy $R0 "$R0;C:\MYAPP"<br />
      SetEnv::SetEnvVar "PATH" $R0<br />
      <br />
      when I using the first way code, it writes the environment variable in user variable path but it won't write in system variable path.<br />
      <br />
      When I using the second way code, there is no effect on that code, it does not write the environment variable any where.<br />
      <br />
      But I want to set the environment variable as in System variable path.<br />
      Pls suggest for that.......:)<br />
      <br />
      thanks in advance.....:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">29th June 2012 11:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Changing %path% this way can corrupt the entire string if it is longer than the NSIS max string length. To be safe you should allocate and manipulate strings directly with the system plugin (kernel32::lstrcat)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
