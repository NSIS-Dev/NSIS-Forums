<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Zipdll"><title>Zipdll - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Zipdll</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=239785">Zipdll</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">lastninja</span><br><span class="post-time small text-muted">3rd March 2006 10:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Zipdll</strong><br>hi all,<br>Im a newbye with zipdll scripting.<br>I have 2 qurstions. I succesfully create an installer that during installation extract a zip file into an installation dir, but:<br>1) this works ONLY in the system/machine where I create the installer. In other systems the installer just copy the zip file but it doesnt extract files within. What did I forget?<br>2) (less crucial) when the installation finished I delete the zip file from installation directory using Nsis' Delete command. Is there a method to extract files from zip file directly during installation without the need to copy the entire file zip in the installation dir?<br><br>thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Larsen</span><br><span class="post-time small text-muted">3rd March 2006 10:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why do you use a zip file? Couldn´t you just add files to your setup and have them compressed and uncompressed by NSIS?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lastninja</span><br><span class="post-time small text-muted">3rd March 2006 10:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I use Nsis to create game installer. My mork is to protect games which they will be sell in digital delivery. I use a specific program to protect games. After protecting, the program calls nsis to create installer. But the problem is that I have a source dir size over 2GB and nsis doesnt start. I dont know if the problem is related to nsis or the other program. So I have to zip file to reduce the source dir size. Other solution?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Larsen</span><br><span class="post-time small text-muted">3rd March 2006 11:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I probably can´t help you with that problem as I´m a newbie, too.<br><br>But to narrow the problem down:<br>- "nsis doesnt start" --&gt; any error message?<br>- "related to nsis or the other program" --&gt; did you try to compile the script via commandline instead of with that other program?<br>- What is the file size of the biggest file in that directory?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lastninja</span><br><span class="post-time small text-muted">3rd March 2006 14:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>- "nsis doesnt start" --&gt; any error message?</blockquote>error message is diplayed on the other program<br><br><blockquote>- "related to nsis or the other program" --&gt; did you try to compile the script via commandline instead of with that other program?</blockquote>no i didnt, but it is irrilevant because I need to use that program.<br><br><blockquote>- What is the file size of the biggest file in that directory? [/B]</blockquote>files are all small, except for video and sounds (max 50 mb).<br><br><br>No one can tell me why file extraction from a zip doenst work on other systems?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Larsen</span><br><span class="post-time small text-muted">3rd March 2006 14:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You could use the special build of NSIS that creates an install.log.<br><br><a href="http://nsis.sourceforge.net/Special_Builds" target="_blank">http://nsis.sourceforge.net/Special_Builds</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">3rd March 2006 15:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>1) this works ONLY in the system/machine where I create the installer. In other systems the installer just copy the zip file but it doesnt extract files within. What did I forget?</blockquote>Do you have a sample script you can post that shows the problem?<br><br><blockquote>2) (less crucial) when the installation finished I delete the zip file from installation directory using Nsis' Delete command. Is there a method to extract files from zip file directly during installation without the need to copy the entire file zip in the installation dir?</blockquote>If the zip file is an external file (say on a CD/DVD) then you should be able to unzip by specifying the CD/DVD path as the source and $INSTDIR as the destination. But, if the zip file is part of the installation, you're stuck.<br><blockquote>...But the problem is that I have a source dir size over 2GB and nsis doesnt start.</blockquote>Are you using NTFS on the system building the installs? (If memory serves me, FAT32 does not support files over 2GB.) Also: are you getting any errors or other symptoms? (The advanced logging option suggested by Larsen wouldn't be a bad choice--you might be able to get some more info about where it's failing.)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lastninja</span><br><span class="post-time small text-muted">3rd March 2006 16:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">thanks for the reply,<br><br></p><blockquote><i>Originally posted by Comperio</i><br>Do you have a sample script you can post that shows the problem?</blockquote>Here there is the most relevant part of the script:<br><br><br>;--------------------------------<br>;Include<br>!include "MUI.nsh"<br><br>!include ${INSTALL_DEFS}<br>!include "ZipDLL.nsh"<br>;--------------------------------<br>[...]<br>;--------------------------------<br>; Main Section<br>Section "${AM_APPNAME}" SecStarted<br><br>; BASIC REQUIREMENTS<br>AddSize ${AM_SIZEONDISK}<br><br>; INSTALL FILES<br>SetOutPath "$INSTDIR"<br><br>Call AMInstallFiles<br><br>ZipDLL::extractall "${AM_SRC}\install.zip" "$INSTDIR"<br>Delete /REBOOTOK "$INSTDIR\install.zip"<br><br>[...]<br>SectionEnd<br><br><br>All variables are right setted.<br><br><blockquote>If the zip file is an external file (say on a CD/DVD) then you should be able to unzip by specifying the CD/DVD path as the source and $INSTDIR as the destination. But, if the zip file is part of the installation, you're stuck.</blockquote>Zip file is part of the installetion, but it isnt so much important...<br><br><br><blockquote>Are you using NTFS on the system building the installs? (If memory serves me, FAT32 does not support files over 2GB.) Also: are you getting any errors or other symptoms? (The advanced logging option suggested by Larsen wouldn't be a bad choice--you might be able to get some more info about where it's failing.)</blockquote>I use fat32, ok for files &gt; 2GB, but this is for directory too?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">3rd March 2006 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What is AM_SRC? Are you trying to decompress a file from the local compiler machine or what?<br>ZipDLL extracts files on the machine running the installer. You need to extract the Zip file first and then uncompress the contents of it afterwards.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lastninja</span><br><span class="post-time small text-muted">3rd March 2006 18:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Afrow UK</i><br><b>What is AM_SRC? Are you trying to decompress a file from the local compiler machine or what?<br>ZipDLL extracts files on the machine running the installer. You need to extract the Zip file first and then uncompress the contents of it afterwards.<br><br>-Stu</b></blockquote>thinking what to reply to you I finally find the error! It is exactly that variable. What in idiot!<br>Thanks to help me to focus the error...</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>