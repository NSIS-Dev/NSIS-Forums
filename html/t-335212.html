<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Creating a DB connection file via NSIS?" />

  <title>Creating a DB connection file via NSIS? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Creating a DB connection file via NSIS?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=335212">Creating a DB connection file via NSIS?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jakc</span><br />
      <span class="post-time small text-muted">25th September 2011 04:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Creating a DB connection file via NSIS?</strong><br />
      I am putting together an installer with NSIS <font size="1">(1st time, but liking it and have learnt a lot from these forums and from the NSIS tag on Stack Overflow).</font><br />
      This installer has already installed a JRE and Tomcat.<br />
      <br />
      The next part will be to <b>create a connection file to allow my application to point to a database</b>.<br />
      - Save this file into $PLUGINSDIR (will move it once I deploy some WARs at a later step).<br />
      <br />
      Currently, when manually doing our installs, we have a small JAR application that helps the user build this connection property file.<br />
      It has built in functionality to try and ping the DB, regardless of its Oracle, Oracle XE, SQL Server 2005/2008<br />
      It has a drop-down which provides the bones of the URL connection strings, and then user can tweak if need be.<br />
      <br />
      <a href="http://www.dekho.com.au/help/32/ImagesExt/image13_19.jpg" target="_blank">http://www.dekho.com.au/help/32/Imag...image13_19.jpg</a><br />
      <br />
      In my original <a href="https://cacoo.com/diagrams/76bVHnXFPWXUNb3b#406EF" target="_blank">mockup</a> of an installer, ideally, I wanted something that did away with the JAR app and had this component built into the installer. Something like this:<br />
      <br />
      <a href="https://cacoo.com/diagrams/76bVHnXFPWXUNb3b-406EF.png?t=1316069089558" target="_blank">https://cacoo.com/diagrams/76bVHnXFP...=1316069089558</a><br />
      <br />
      Little unsure on where to start.<br />
      Had a look at some database related posts, and saw some samples <a href="http://nsis.sourceforge.net/Category:Database_Functions" target="_blank">here</a>.<br />
      <br />
      <u>I would like some advice/initial pointers on the best way to go about this.</u><br />
      - Should I be trying to code this all within NSIS, or should I be calling on something external to test the connection? Not sure if you can Telnet via NSIS?<br />
      - Has anyone seen any similar samples that I can reverse engineer?<br />
      - Any other advice would be great.<br />
      <br />
      <br />
      Thanks in advance.<br />
      <br />
      For info, once I have achieved this, a later step will be to create a database by running some SQL scripts I have.<br />
      Just thinking ahead, I guess which database vendor/version they have, will depend on which sql script to run. Im thinking that if the user chooses e.g. SQL Server 2005 on this page, this could be writen to a variable to use later when choosing the right sql script.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br />
      <span class="post-time small text-muted">25th September 2011 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can't you call the JAR in the background (without GUI) and pass the parameters that the user has entered in the NSIS GUI (url, schema, username, password) to the JAR as command-line arguments? Then return the result of the test from the JAR via Exit Code?<br />
      <br />
      That will probably be the easiest solution, if you already have coded that JAR and also your installer installs a JRE anyway.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">T.Slappy</span><br />
      <span class="post-time small text-muted">26th September 2011 05:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use NSIS as interface to your Java application:<br />
      - enter all parameters into NSIS form [custom nsDialogs page] and pass them to application<br />
      - app returns some result and NSIS shows appropriate MessageBox [if necessary]<br />
      - continue on next page with next app...<br />
      <br />
      This is great approach in case you need to modify/add some feature because you can simply change application and installer does not need to be rewritten.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
