<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Please add an optional no text CRC progress dialog"><title>Please add an optional no text CRC progress dialog - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Please add an optional no text CRC progress dialog</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=326100">Please add an optional no text CRC progress dialog</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">17th January 2011 21:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Please add an optional no text CRC progress dialog</strong><br>Greetings:<br><br>I have asked this in the past a few times and have been told that I just need to modify the NSIS source code. Unfortunately, our legal department does not allow us to touch the source code, so that option is out.<br><br>The issue is that the initial "Setup is validating... 99%" (sorry, I know the text is incorrect) is in English with no option for localization nor for individual installer to adjust that text.<br><br>Would it be possible to add an option for suppressing this text into the NSIS installer settings? The result would be the installer icon and a numerical percentage only on that dialog that should be self-evident to the customer as to what is going on.<br><br>Is there any other ideas that anyone else has on resolving this? Turning off the CRC is pretty much out of the question as it could lead to installing corrupt data.<br><br>Derek</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">17th January 2011 23:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you try hex editing the stub? Replace the text with just %d%% (and a ending 0)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">18th January 2011 02:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, I don't know all the files off hand. What is the file name of the stub? Thanks for the suggestion, I look forward to trying it out.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">18th January 2011 07:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSIS\stubs<br><br>Something like <a href="http://img46.imageshack.us/img46/8029/stub.png" target="_blank">http://img46.imageshack.us/img46/8029/stub.png</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">18th January 2011 22:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks Anders, I will take a shot at this.<br><br>Back to the original issue. We have been joyfully using NSIS for about 8 years now and this is one of the issues that our Localization QA and Cert always ding us on and we have to fight back with "Cannot Fix".<br><br>Do you think that this is something that could be fixed natively within NSIS in some manner? Something like adding a new stub "lzma_notext" and SetCompressor support?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th January 2011 00:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why not get your coders to submit a patch? Or would your legal department not allow that?<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">19th January 2011 00:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">We are not allowed to download the source code, thus we are blocked from that as well.<br><br>I did find the string "verifying installer: %d" in the "lzma" stub but I could not find the string "Please wait while Setup is loading..." so hex editing the stub would only help with one part. If that string is stored elsewhere, please let me know and I would be willing to give it a shot.<br><br>The primary concern is the message in the French market and the Toubon Law since those English strings are shown on a French OS.<br><br>Thanks to both of you for responding on this matter.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">19th January 2011 08:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Source/exehead/lang.h?revision=6037&amp;view=markup" target="_blank">http://nsis.svn.sourceforge.net/view...37&amp;view=markup</a> shows the 6 hardcoded english strings, "verifying installer: %d%%" appears in all stubs, "unpacking data: %d%%" is only present when solid compression is used. I don't remember anything along the lines of "Please wait while Setup is loading..."</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th January 2011 11:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please wait while Setup is loading... is in MUI only. Without checking it is probably hard coded in modern.exe.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">19th January 2011 15:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Afrow UK</small><br>Please wait while Setup is loading... is in MUI only. Without checking it is probably hard coded in modern.exe.</blockquote>You are correct sir, thankfully it is easy to change that with ChangeUI and resource hacker</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">19th January 2011 17:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oh, ok, so this is a little more complicated and yes, we are using MUI2. Thanks again for your help.<br><br>I have searched through the files in my NSIS install directory and I cannot find the "Please wait while Setup is loading" string in modern.exe or any other files. Can either of you direct me where I should be looking or if I shouldn't be looking for plain text?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">19th January 2011 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, I forgot to search for text in wide format, so I did find "Â‚Please wait while Setup is loading..." in modern.exe<br><br>A hacking I will go... a hacking I will go... :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th January 2011 19:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You could have used Resource Hacker to modify modern.exe.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br><span class="post-time small text-muted">19th January 2011 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">funny that, hacking the exe is fine but doing it the proper way in the code isn't allowed (sounds like you legal department have too many bugs of their own).<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">19th January 2011 21:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>You could have used Resource Hacker to modify modern.exe.</blockquote>I will, once I get back to this.<br><br><blockquote>funny that, hacking the exe is fine but doing it the proper way in the code isn't allowed</blockquote>At this point, it hasn't gone back to legal for approval (and I doubt they would give it). I am just trying to see if resolving this myself is even possible.<br><br>Their core issue they have has to do with downloading open source source code. There aren't that many problems with using pre-compiled open source solutions (NSIS for example =).<br><br>But to get back to the original point, it would certainly be beneficial if NSIS offered at least a No Text options for these messages natively. Even better if they were fully localized. Considering the massive and awesome localization support that NSIS offers (I have made internal version of our installers in pirate and wookie) the fact that this message is hard coded in English feels like a tragic oversight.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">20th January 2011 18:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">They can't be localized since the language stuff has not been loaded when that dialog is open</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">20th January 2011 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Anders</small><br>They can't be localized since the language stuff has not been loaded when that dialog is open</blockquote>Fair enough and that makes sense. At that point a no text option would get us out of trouble with loc and cert.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JamesBellinger</span><br><span class="post-time small text-muted">21st January 2011 02:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is there a reason those strings couldn't be localized by default for major languages? It would probably take under 1 KB.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">21st January 2011 17:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think they could be, but the issue is more like there is no code in those stubs for OS system language detection. While the strings themselves could be small there would probably be challenges with detection and displaying the strings properly in all situations.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>