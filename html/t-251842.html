<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="!tempfile - most bizarre problem"><title>!tempfile - most bizarre problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">!tempfile - most bizarre problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251842">!tempfile - most bizarre problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">ikoonman</span><br><span class="post-time small text-muted">24th July 2006 17:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>!tempfile - most bizarre problem</strong><br>On my dev machine I have C and D drives (D is working drive), so HM NIS Editor and makensis executables are installed on that drive. When I create the installer.exe, and copy it to a test machine (only C drive), the strangest thing happen.<br><br>When, in the beginning of my script, I call four macros (!tempfile) to create temporary filenames, they all point to "D:\temp...." !!!!! Surely it must now be "C:\temp..."?<br><br>How is this possible? Even more, how do I fix it?<br><br>makensis ver 2.18, hm nis edit 2.0.3<br><br>Please advise!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">24th July 2006 18:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">!tempfile simply uses the directory Windows reports as the temporary directory. If you've set it to D:\temp, that's what it'd be.<br><br>If you want to create temporary file names on runtime, you should use GetTempFileName.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ikoonman</span><br><span class="post-time small text-muted">24th July 2006 19:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>!tempfile simply uses the directory Windows reports as the temporary directory. If you've set it to D:\temp, that's what it'd be.</b></blockquote><b><br><br>That's what is so bizarre. The test machine has no D drive - why is it trying to create a tempfile on that drive?<br><br></b><blockquote><b>If you want to create temporary file names on runtime, you should use GetTempFileName.</b></blockquote>Thanks will try</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">24th July 2006 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Because that piece of code is not running on the test machine, it's running on the developer machine. Preprocessor instructions are executed at compile time, not runtime. What you're looking for is GetTempFileName.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>