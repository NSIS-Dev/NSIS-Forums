<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Defaul value for DropList" />

  <title>Defaul value for DropList - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Defaul value for DropList</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270701">Defaul value for DropList</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Maxim30</span><br />
      <span class="post-time small text-muted">5th May 2007 22:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Defaul value for DropList</strong><br />
      Hello,<br />
      <br />
      I have a custom page with more 'DropList's; the "ListItems" string for eachone is "None|0|1|2|3". Prior I read from the registry their possible DWord values if present and I would show them in the droplist (as default current value). I have used the following not working code:<br />
      <br />
      !insertmacro mui_installoptions_write ... "ListItems" "None|0|1|2|3"<br />
      <br />
      ReadRegDWORD $0 HKLM ...<br />
      <br />
      !insertmacro mui_installoptions_write ... "state" $0<br />
      <br />
      When showing the custom page, in the droplist a white bar appears in place of the variable $0 instead of the right value (a number from 1 to 3):<br />
      <br />
      can you give me the right code ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">6th May 2007 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The value of state needs to be correctly referred in ListItems.<br />
      In your case must be either none or 1 or 2 or 3.<br />
      I'd suggest debug your script with a massagebox to verify what actually $0 carries out.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br />
      <span class="post-time small text-muted">6th May 2007 16:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">STATE should set the value of the droplist, so your code should be working. But, you may need to make sure that (1) you are inserting the code in the right place and (2) that $0 is actually getting a valid value.<br />
      <br />
      (And I assume that you are getting the right file/field name in your MUI_INSTALLOPTIONS_WRITE statement?)<br />
      <br />
      PS: Looks like RedWine has beat me to it as usual! :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Maxim30</span><br />
      <span class="post-time small text-muted">6th May 2007 21:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have found: in effect I had mistyped the $0 variable by $1, now it works!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
