<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Protect from unpacker"><title>Protect from unpacker - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Protect from unpacker</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322999">Protect from unpacker</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">newbiensis</span><br><span class="post-time small text-muted">8th October 2010 19:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Protect from unpacker</strong><br>I used NIS Edit to create the setup, how to protect my job?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">8th October 2010 20:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You are using open source software, you pretty much need to change the order of the commands in the nsis source and recompile nsis.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">8th October 2010 20:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">short answer: you don't<br><br>The standard question we ask you, at this point, is this:<br>Are you trying to protect...<br>A. your installer<br>B. you installer code<br>C. the files inside your installer<br>D. the files being installed<br><br>For A: you can tag the installer with a customer ID.. it's easily removed, of course.. on-the-fly building of the installer would be more secure but depending on the installer size also a lot more CPU/RAM intensive.. not sure if you want to put that on a web server if that's your distribution form.<br><br>For B: although there's some old utilities that try to decompile the installer code, based on some test runs against both simple and complex installers, the result is pretty much unusable.<br><br>For C: 7zip and the like can always extract files from your installer as NSIS uses pretty standard compression routines. If you want to try to protect against that, you could try archiving them into a password-protected archive and un-archive them on installation (similarly, there are encryption/decryption plugins available which means the files are useless without decryption).<br><br>For D: even with the protection at point C, at some point the files will end up on the user's drive 'as is' in usable form. Using Process Monitor, anybody can see what registry and file i/o you perform, take the installed files + registry changes, and package that up.<br><br>So if you're trying to protect the files / application being installed.. then it's those files / that application that should have protection code added.. never the installer. Hence: you don't.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">newbiensis</span><br><span class="post-time small text-muted">8th October 2010 21:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">my case is C, blowfish.ddl is good? or dcryptdll?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">8th October 2010 21:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Using a plugin to extract password protected archives can be bypassed by using a custom plugin to get the password etc<br><br>IMHO you should focus on protecting your app and not the installer and just accept the fact that unbreakable DRM is impossible</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">newbiensis</span><br><span class="post-time small text-muted">8th October 2010 22:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">there i find the plugin?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">8th October 2010 23:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Where, I don't think there is a public one, but it would take 5 minutes to create a fake plugin that just dumps the parameters passed to it. You could probably even hex edit the dumpstate plugin's named export.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">newbiensis</span><br><span class="post-time small text-muted">9th October 2010 09:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok but if i use blowfish.dll or dcryptdll.dll?!?!?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">9th October 2010 10:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Does not matter which plugin you use, the key has to be in plain text at some point</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">9th October 2010 10:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Animaether</small><br>For C: 7zip and the like can always extract files from your installer as NSIS uses pretty standard compression routines.</blockquote>what other tools are their to extract files from installers and do they also just work when the installer is lzma compressed? 7zip does not extract when using bzip2.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">newbiensis</span><br><span class="post-time small text-muted">9th October 2010 10:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">and winrar? which plugin should I use?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th October 2010 11:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Yathosho</small><br>7zip does not extract when using bzip2.</blockquote>I hear the latest beta fixed that.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">9th October 2010 12:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Yathosho</small><br>what other tools are their to extract files from installers and do they also just work when the installer is lzma compressed?</blockquote>Personally, I'm a big fan of Total Commander...<br><a href="http://www.ghisler.com/" target="_blank">http://www.ghisler.com/</a><br>...and it has a plugin available that lets me browse into installer packages (not just NSIS) through the same familiar TC interface...<br><a href="http://www.totalcmd.net/plugring/InstallExplorer.html" target="_blank">http://www.totalcmd.net/plugring/InstallExplorer.html</a><br>...and it works just fine with LZMA, yes. It has saved me a couple of times when installers did bad system checks (old applications determining I don't have enough memory due to a 16bit wrap-around, a Western Digital utility that failed to extract on Win7 because it looked for a non-existing file required for the installer.. but not for the utility itself, of course.. etc.) It doesn't work with BZIP2, but see MSG's reply.<br><br>But basically you shouldn't rely on the compressor for any form of protection... NSIS has source freely available and the compression/decompression routines are available to whoever really wants to open up your installer and extract the files.<br><br>But, as noted again and again.. you shouldn't rely on any security inside the installer itself -at all- if what you're protecting is the application/files it's installing :)</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>