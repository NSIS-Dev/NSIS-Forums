<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Sections"><title>Sections - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Sections</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187012">Sections</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">KirillKr</span><br><span class="post-time small text-muted">18th July 2004 22:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Sections</strong><br>Sorry, but I can't understand how I can do this.<br>I want write Half-Life installer.<br>I have sections:<br>HL - always installed<br>CSTRIKE - may be installed or not<br>NiceBot - install if CSTRIKE selected<br>ZBot - install of CSTRIKE selected.<br>NiceBot and ZBot must be radio button, because they can't be installed together.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">18th July 2004 23:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No need the raio buttons, NSIS uses checkboxes, well... you can make your own custom page with InstallOptions.<br><br>I recommend that you read the example one-section.nsi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KirillKr</span><br><span class="post-time small text-muted">19th July 2004 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I read this example, but I don't understand, how I can do my thing... sorry... Can you write code?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th July 2004 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It's not as simple to just 'write the code'.<br>You need to create a custom InstallOptions dialogue with radio-buttons.<br><br>See NSIS\Contrib\InstallOptions<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KirillKr</span><br><span class="post-time small text-muted">19th July 2004 14:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I read this example, but I don't understand, how I can do my thing... sorry... Can you write code?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KirillKr</span><br><span class="post-time small text-muted">19th July 2004 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Afrow UK</i><br><b>It's not as simple to just 'write the code'.<br>You need to create a custom InstallOptions dialogue with radio-buttons.<br><br>See NSIS\Contrib\InstallOptions<br><br>-Stu</b></blockquote>Standart select component not be usefull?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ppppppp</span><br><span class="post-time small text-muted">24th July 2004 01:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I hope NSIS can make section more easy, just like innosetup. Only set parameter,evry thing is OK.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KirillKr</span><br><span class="post-time small text-muted">27th July 2004 09:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I create ini-file: 2 checkbox, 2 radiobutton.<br>How I can on fly enabled/disabled if second checkbox checked/unchecked?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">27th July 2004 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by ppppppp</i><br><b>I hope NSIS can make section more easy, just like innosetup. Only set parameter,evry thing is OK.</b></blockquote>How more easy can be just doing this:<br><pre>
<code><br>Section "Hello"<br>;<br>SectionEnd<br><br>Section "Hola"<br>;<br>SectionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KirillKr</span><br>
      <span class="post-time small text-muted">27th July 2004 22:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br>[Settings]<br>NumFields=7<br>Title=Install Components<br><br>[Field 1]<br>Type=GroupBox<br>Left=120<br>Top=0<br>Right=255<br>Bottom=55<br>Text=Êîìïîíåíòû (Addons)<br><br>[Field 2]<br>Type=GroupBox<br>Left=120<br>Top=60<br>Right=255<br>Bottom=100<br>Text=Áîòû (Bots)<br>Flags=DISABLED<br><br>[Field 3]<br>Type=Checkbox<br>Left=125<br>Top=15<br>Right=250<br>Bottom=25<br>Text=Install Counter-Strike<br>State=1<br><br>[Field 4]<br>Type=Checkbox<br>Left=125<br>Top=35<br>Right=250<br>Bottom=45<br>Text=Install bots for CS<br>State=0<br><br>[Field 5]<br>Type=RadioButton<br>Left=125<br>Top=70<br>Right=250<br>Bottom=80<br>Text=NiceBot<br>State=0<br>Flags=DISABLED<br><br>[Field 6]<br>Type=RadioButton<br>Left=125<br>Top=85<br>Right=250<br>Bottom=95<br>Text=ZBot<br>State=0<br>Flags=DISABLED<br><br>[Field 7]<br>Type=Bitmap<br>Text=spforce.bmp<br>Top=1<br>Left=1<br>Right=80<br>Bottom=120<br></code>
</pre><br>
      How I can on checkin [field 4] enable/disable [FIELD 2]
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">27th July 2004 23:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">InstallOptionsEx might be able to do this (if it can't then it would be nice if it could!)<br>
      <br>
      As far as I know (or remember) for normal InstallOptions, you can't have selecting one checkbox unselect another.<br>
      <br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KirillKr</span><br>
      <span class="post-time small text-muted">27th July 2004 23:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Afrow UK</i><br>
        <b>InstallOptionsEx might be able to do this (if it can't then it would be nice if it could!)<br>
        <br>
        As far as I know (or remember) for normal InstallOptions, you can't have selecting one checkbox unselect another.<br>
        <br>
        <br>
        -Stu</b>
      </blockquote>No, InstallOptionEx check input on PageLeave too...
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">28th July 2004 00:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well in that case, unless deguix plans on changing IOEx to support live dialogue manipulation then I'm afraid there's nothing you can do except do it the old fassioned way.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">28th July 2004 01:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This part of InstallOptions is already very well planned by kichik and eccles (and others who contributed). Most parts of InstallOptions are preserved or expended in InstallOptionsEx. But yes, new things arrived to the plugin. One of the things expanded is the NOTIFY flag which is enough to your objective in this case.<br>
      <br>
      The NOTIFY flag makes a control to return its value to the INI file, and to return the focus to the script code.<br>
      <br>
      To make a selection of a checkbox, you can send BM_SETCHECK message to the checkbox to be selected/deselected.<br>
      <br>
      To know more about the NOTIFY flag, see InstallOptions or InstallOptionEx readme.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KirillKr</span><br>
      <span class="post-time small text-muted">28th July 2004 05:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by deguix</i><br>
        <b>This part of InstallOptions is already very well planned by kichik and eccles (and others who contributed). Most parts of InstallOptions are preserved or expended in InstallOptionsEx. But yes, new things arrived to the plugin. One of the things expanded is the NOTIFY flag which is enough to your objective in this case.<br>
        <br>
        The NOTIFY flag makes a control to return its value to the INI file, and to return the focus to the script code.<br>
        <br>
        To make a selection of a checkbox, you can send BM_SETCHECK message to the checkbox to be selected/deselected.<br>
        <br>
        To know more about the NOTIFY flag, see InstallOptions or InstallOptionEx readme.</b>
      </blockquote>Where I must send message? In which function or other?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br>
      <span class="post-time small text-muted">28th July 2004 11:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Lobo Lunar suggested earlier in this thread that one-section.nsi could be adapted to suit KirillKr's requirements.<br>
      <br>
      Here are two variants based upon one-section.nsi:<br>
      <br>
      CSdemo-A.nsi supports three options:<br>
      <br>
      (1) Install HL<br>
      (2) Install HL + CSTRIKE + NiceBot<br>
      (3) Install HL + CSTRIKE + ZBot<br>
      <br>
      CSdemo-B.nsi supports four options:<br>
      <br>
      (1) Install HL<br>
      (2) Install HL + CSTRIKE<br>
      (3) Install HL + CSTRIKE + NiceBot<br>
      (4) Install HL + CSTRIKE + ZBot</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">28th July 2004 12:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If he still wants the InstallOptions way, here is a code example totally tested by me:<br>
      <br></p>
      <pre>
<code>Page custom ShowFunction LeaveFunction<br><br>!define BM_GETCHECK 0x00F0<br>!define BM_SETCHECK 0x00F1<br><br>!define BST_UNCHECKED 0<br>!define BST_CHECKED 1<br><br>Var hwnd<br>Var Result<br>Var notifySel<br><br>Function ShowFunction<br><br>  InstallOptions::initDialog /NOUNLOAD ".\test.ini"<br>  Pop $hwnd<br>  InstallOptions::show <br>  Pop $Result<br><br>FunctionEnd<br><br>Function LeaveFunction<br><br>  ReadINIStr $notifySel ".\test.ini" "Settings" "State"<br><br>  StrCmp $notifySel 0 Validate  ; Next button<br>  StrCmp $notifySel 4 Start4  ; Field 4<br>  Abort ; Return to the page<br><br>  Start4:<br><br>    GetDlgItem $0 $hwnd 1203<br>    SendMessage $0 ${BM_GETCHECK} "" "" $1<br><br>    StrCmp $1 ${BST_CHECKED} 0 EndChecked<br><br>      GetDlgItem $0 $hwnd 1201<br>      EnableWindow $0 1<br><br>      GetDlgItem $0 $hwnd 1204<br>      EnableWindow $0 1<br>      SendMessage $0 ${BM_GETCHECK} "" "" $1<br><br>      GetDlgItem $0 $hwnd 1205<br>      EnableWindow $0 1<br>      SendMessage $0 ${BM_GETCHECK} "" "" $2<br><br>      StrCmp $1 ${BST_UNCHECKED} 0 EndCheckIfEmpty<br>        StrCmp $2 ${BST_UNCHECKED} 0 EndCheckIfEmpty<br>        <br>          GetDlgItem $0 $hwnd 1204<br>          SendMessage $0 ${BM_SETCHECK} ${BST_CHECKED} ""<br>        <br>      EndCheckIfEmpty:<br><br>    Goto EndNotChecked<br><br>    EndChecked:<br>    <br>    GetDlgItem $0 $hwnd 1201<br>    EnableWindow $0 0<br><br>    GetDlgItem $0 $hwnd 1204<br>    EnableWindow $0 0<br><br>    GetDlgItem $0 $hwnd 1205<br>    EnableWindow $0 0<br>    <br>    EndNotChecked:<br><br>    Abort<br><br>  Validate:<br><br>FunctionEnd</code>
</pre><br>
      <br>
      (But as you know, you have to change somethings to be compatible with your script)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KirillKr</span><br>
      <span class="post-time small text-muted">31st July 2004 08:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Great thanks.<br>
      <b>pengyou</b> Your code working.<br>
      <b>deguix</b> I can't remade your code for me...</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>