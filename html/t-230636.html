<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Add stuff to a form" />

  <title>Add stuff to a form - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Add stuff to a form</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=230636">Add stuff to a form</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">10th November 2005 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Add stuff to a form</strong><br />
      &nbsp; I'd like to add a label or a text box into the form which shows the destination folder to install, but I don't know how? Please help. thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th November 2005 21:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why not set the text using DirText? You can add multiple lines using $\r$\n.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">11th November 2005 00:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I meaned I want to add another DIRREQUEST box into dir-page (original page which comes with NSIS package).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">11th November 2005 00:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You'll have to create a custom one using InstallOptions or InstallOptionsEx. The first is documented and available from the NSIS help, the latter you can find a discussion on here :<br />
      <a href="http://forums.winamp.com/showthread.php?threadid=181087" target="_blank">http://forums.winamp.com/showthread.php?threadid=181087</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">11th November 2005 00:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">By the way.. I've done a directory page with two directory fields - it's a bit intricate and has a few 'hacks' to get things looking well. I would recommend using InstallOptionsEx instead of InstallOptions for this.<br />
      <br />
      Two reasons that pop into mind:<br />
      1. you can get a NOTIFY event from a user changing the directory path - you can't with InstallOptions (only when going through the browse button, and technically that's not supported - but hey, it works)<br />
      <br />
      2. you can specify the text of the browse button (defaults to "...") - can't do that in InstallOptions, so you have to set the text on the control manually, re-size the control, move it to the left, an then re-size the directory path textbox control to fit. Totally doable, but not preferable ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">17th November 2005 15:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thank you very much.<br />
      I have a droplist on my custom page, and I used GetDrive to get all available drives on my computer. How to list all drives under listItems of droplist (it means when I click the arrow of droplist, it displays drives so I can select one). Thank you</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">17th November 2005 16:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need to write to ListItems with WriteINIStr before showing the page. The value that you write should be in the format "str1|str2|etc"<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">21st November 2005 22:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanks<br />
      when I call GetDrive "ALL" "FunctionName", in FunctionName I got drive in $9 and drive type in $8, and I have more than 4 dif. drives, how can I write these drives to my droplist. Please help, thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">21st November 2005 23:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>
SomePrePageFunction
<br />&gt;# clear variable R9, just in case
<br /># we'll be using it to store the list of drives
<br />&gt;StrCpy $R9 ""
<br />&gt;# call the GetDrives function
<br />&gt;${GetDrives} "ALL" "CallBackFunc"
<br />&gt;# $R9 now contains e.g. "|C:\|D:\|E:\"
<br /># chop the first "|" off
<br />&gt;StrCpy $R9 $R9 -1 1
<br />&gt;# now you have a list of drives in the format a listbox requires
<br /><br /># if you're using MUI, you can then write it to your
<br /># InstallOptions file using the following:
<br />&gt;!insertmacro MUI_INSTALLOPTIONS_WRITE "InstallOptions.ini" "Field 1" "ListItems" $R9
<br />&gt;# please keep in mind that you need to put in the correct ini filename
<br /># and the correct Field number
<br /><br /># initialize the dialog
<br />&gt;!insertmacro MUI_INSTALLOPTIONS_INITDIALOG "InstallOptions.ini"
<br />&gt;# and show it
<br />&gt;!insertmacro MUI_INSTALLOPTIONS_SHOW
<br />SectionEnd
<br /><br />&gt;Function CallBackFunc
<br />  # add the drive to the drives list
<br /> StrCpy $R9 "$R9|$9"
<br /> Push $0
<br />FunctionEnd 
<br />&gt;
</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">22nd November 2005 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you very much. I really appreciate your help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">6th December 2005 15:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have a custom page, in there I have a DirRequest control, and I want to change the text of Browse button. This is what I did, but it didn't work:<br />
      GetDlgItem $1 $HWND 1200<br />
      SendMessage $1 ${WM_SETTEXT}1 "STR:Browse"<br />
      When I compile, this gives me a warning and ignore the line GetDlgItem because it doesn't recognize the constant HWND. What should I do? Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th December 2005 15:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">FindWindow $R0 "#32770" "" $HWNDPARENT<br />
      GetDlgItem $R1 $R0 1200<br />
      SendMessage $R1 ${WM_SETTEXT} 1 "STR:Browse"<br />
      <br />
      $HWND is a variable not a constant that you'd have to define yourself.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">6th December 2005 21:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I got it. Thank u very much. Can you show me how to resize the browse button of DirRequest? (since after I change its text from "..." to "browser", it doesn't not display right) thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th December 2005 00:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need to use Resource Hacker for that. Search Google.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">7th December 2005 15:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I got it. Thank you.<br />
      I have a DirRequest on a custom page, when I click browse button it displays browser window, is there any way that I can add text to this window (below the title "Browse for folder")? thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th December 2005 15:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The Text= attribute changes that for DirRequest controls.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">7th December 2005 16:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you very much Afrow.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">8th December 2005 01:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Custom page</strong><br />
      &nbsp; I have a DIrRequest on a custom page. Right after I click OK button on the browser window, is there any way that I can get the selected path, so I can modify it, and display a message box to user before it (selected path) is displayed on the text box of DirRequest? Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">8th December 2005 16:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have a DIrRequest on a custom page. Right after I click OK button on the browser window, is there any way that I can get the selected path, so I can modify it, and display a message box to user before it (selected path) is displayed on the text box of DirRequest? Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th December 2005 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">All the InstallOptions examples show you how to validate input on an InstallOptions page.<br />
      Tip: From the Leave function with ReadINIStr (DirRequest&gt;State). To go back to a page, call Abort from the pages' Leave function.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">8th December 2005 21:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you Afrow UK.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">9th December 2005 03:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>validate the selected dir</strong><br />
      &nbsp; I think I didn't state clearly my problem before. This is it: I have a DirRequest on a custom page. I click browse button-&gt; browser window appears-&gt; I select a dir ( C:\ProgramFiles)-&gt; I click OK on browser window-&gt; the selected dir (C:\ProgramFiles) is displayed on text box of dirRequest, but I don't want this, I want to change C:\ProgramFiles to C:\balba and display a message-&gt; and user click OK button on the message wind.-&gt; then new path(C:\balba)is displayed on the text box of dirRequest. It means somehow I can read and modify the selected path before it is displayed on the textbox of DirRequest control. I have tried many times in many ways, couldn't do it. Please help. Thank you.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">9th December 2005 11:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use Flags=NOTIFY<br />
      This will act like the user clicking next when he clicks OK (on the browse window) but the field number of the DirRequest control will be written to Settings&gt;State which you can check with ReadINIStr. For examples see Examples\InstallOptions\NotifyTest.nsi<br />
      <br />
      -Stu<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anvinh173</span><br />
      <span class="post-time small text-muted">12th December 2005 16:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you very much. I got it. Really appreciate your help.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>