<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Check for 64 bit CPU" />

  <title>Check for 64 bit CPU - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Check for 64 bit CPU</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265455">Check for 64 bit CPU</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">switt</span><br />
      <span class="post-time small text-muted">9th February 2007 12:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Check for 64 bit CPU</strong><br />
      I am looking for a way to check the architecture of the cpu (32bit or 64bit). My installation script should deny a installation on a 64 bit system.<br />
      <br />
      Thanks for your help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th February 2007 12:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The <a href="http://goodbye-microsoft.com/" target="_blank">Debian installer</a> has a plug-in that uses cupid to find out the processor architecture.<br />
      <br />
      In case you just want to install on a 32-bit OS, you can use ${RunningX64} from x64.nsh.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">9th February 2007 13:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>!ifndef PROC<br />  !define PROC 32 ; to be defined in cmd line<br />!endif<br />LangString wrongWow ${LANG_ENGLISH} "This distribution is for ${PROC} bits computers only."<br /><br />Function .onInit<br /><br />  System::Call "kernel32::GetCurrentProcess() i .s"<br />  System::Call "kernel32::IsWow64Process(i s, *i .r0)"<br />  IntCmp $0 0 is32<br />  IntCmp ${PROC} 64 procOk<br />wrongProc:<br />  MessageBox MB_OK|MB_ICONSTOP $(wrongWow)<br />  Abort $(wrongWow)<br />is32:<br />  IntCmp ${PROC} 32 procOk wrongProc wrongProc<br />procOk:<br />...</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th February 2007 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That would only work if the user is running on x64 OS.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">9th February 2007 14:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This script works on all systems. Attached is a popup of x64 package on my 32-bits XP. Normall command file defines PROC for makensis.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th February 2007 14:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">IsWow64Process tests if the OS is running x64. It won't tell you the real processor capability. It's what ${RunningX64} does.<br />
      <br />
      If you want to know the real capability of the processor itself and not the OS, you have to use cpuid. Even GetNativeSystemInfo returns x86 while running XP on x64. And that API is not even available on versions below XP.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">onad</span><br />
      <span class="post-time small text-muted">12th February 2007 15:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You probably have a good reason for deny the installer to run on 64Bit Win OS,<br />
      <br />
      But keep in mind that 32Bit installer and applications just work fine in most cases.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">12th February 2007 15:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SCSI passthrough driver included to package and it not works on wrong OS.. So we have 2 packages, 32 and 64.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">onad</span><br />
      <span class="post-time small text-muted">13th February 2007 14:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">"SCSI passthrough driver", yes that IS a good reason! ;)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
