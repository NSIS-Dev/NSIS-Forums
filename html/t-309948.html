<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Math plugin compiled with mingw32 causes an access violation"><title>Math plugin compiled with mingw32 causes an access violation - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Math plugin compiled with mingw32 causes an access violation</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=309948">Math plugin compiled with mingw32 causes an access violation</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">f0rt</span><br><span class="post-time small text-muted">13th August 2009 19:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Math plugin compiled with mingw32 causes an access violation</strong><br>Normally the ".c" file extension of a source file implies that it should be compiled with a C-Compiler. However the Math plugin is different in that respect because it actually needs a C++ compiler. The mingw32 C++ compiler is not directly<br>invoked but rather via "i586-mingw32msvc-gcc -xc++" for the source files of the Math plugin.<br><br>As a consequence name mangling (name decoration) occurs so that the DllMain function is no longer recognized as an entry function by the linker. This ultimately caused an access violation because the DllMain function provided by the Math plugin was not called and some values were not properly initialized. The access violation could be reproduced with the installer built from the math.nsi source (NSIS and its plugins built with mingw32): Run the installer (math.exe) and an access violation occurs just after you closed the window of the installer.<br><br>A detailed description including a proposed bug fix of the issue is available at the Sourceforge tracker:<br>sf.net/support/tracker.php?aid=2835731<br><br>I wonder if it would be better reverting to pure C for the Math plugin source files.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">19th August 2009 10:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've committed your change to SVN in r5998. Please close the bug, I don't appear to have permission to do so.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">f0rt</span><br><span class="post-time small text-muted">19th August 2009 19:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for applying the patch. I closed the bug.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>