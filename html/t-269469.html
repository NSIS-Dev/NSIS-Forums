<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="howto using macro" />

  <title>howto using macro - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">howto using macro</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269469">howto using macro</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 07:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>howto using macro</strong><br />
      Hi,<br />
      <br />
      call me stupid or something, but what i have to do with given macros ( <a href="http://nsis.sourceforge.net/RadioButtons#Macros" target="_blank">http://nsis.sourceforge.net/RadioButtons#Macros</a> )?<br />
      i don't know where to save this code to use it. can somebody give me one (or more) tipps?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 08:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sourceforge.net/Macro_vs_Function" target="_blank">http://nsis.sourceforge.net/Macro_vs_Function</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 08:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've seen this site before, it shows me how they work, but not how to implement. the question is, can i "outsourcing" the macro code to another file?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 08:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes you can do it in one or more headers (nsh) and include 'em in your main script e.g. !include "myheader.nsh"<br />
      You may want to take a look at the included within NSIS installation headers e.g. FileFunc.nsh would give you a start.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 08:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">mmh, i already try that.... i will try it again. thx for help</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 08:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, take a look here, download the full project and examine it, should be easier to go with it.<br />
      <br />
      <a href="http://nsis.sourceforge.net/NSIS_Beyond_a_Traditional_Installation_II" target="_blank">http://nsis.sourceforge.net/NSIS_Bey...nstallation_II</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 10:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>!include: closed: "C:\Program Files\NSIS\Include\LogicLib.nsh"<br />!macro: macro named "StartRadioButtons" already found!<br />!include: error in script: "RadioButtons.nsh" on line 10</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'd like me to be helpful, could you be more specific?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 12:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry, yes, ok, here what i want to do:<br />
      <br />
      Maybe you know Daemon Tools for virtually mounting CDs/DVDs and awxDTools is a helpfull tool mounting CDs/DVDs directly from context menu. But there are some buggy problems (under vista) i want to change. one of them is the language selection via registry. so i want to create a tool, that can change the language. thats why i need radiobuttons.<br />
      <br /></p>
      <pre>
<code><br />Name "awxDTools Language Selector"<br /><br />SetCompressor /SOLID lzma<br /><br /># Defines<br />!define REGKEY "SOFTWARE\$(^Name)"<br />!define VERSION 1.0<br />!define COMPANY "Torsten Burschka"<br />!define URL <a href="http://www.fantasquad.de/amt" target="_blank">www.fantasquad.de/amt</a><br /><br /># MUI defines<br />!define MUI_ICON awxDTools.ico<br />!define MUI_FINISHPAGE_NOAUTOCLOSE<br /><br /># Included files<br />!include Sections.nsh<br />!include MUI.nsh<br />!include RadioButtons.nsh<br /></code>
</pre><br />
      <br />
      The RadioButtons.nsh is the postat macro.<br />
      <br />
      ps, ist an autogeneratet code, so some things might be not correct.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 17:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, $(^Name) might be useless because it might contain invalid characters for the registry, better use a string that you know it's gonna be acceptable, also writing to registry requires a root which might be defined as well e.g</p>
      <pre>
<code>!define REG_ROOT `HKCU`<br />!define REG_KEY `SOFTWARE\My Company\My Application`</code>
</pre>RadioButtons is a macro included in NSIS header Sections.nsh, you do not need to include it as separate header while actually there is not such header named RadioButtons.nsh.<br />
      Even more, sections.nsh is a header dedicated to make the life easy regarding to control of components/sections, it won't help you do such things like you mentioned above.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 17:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">my intension was this:<br />
      <br /></p>
      <pre>
<code>SectionGroup /e !Language SECGRP0000<br />    Section "English - English" SEC0000<br />        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language English<br />    SectionEnd<br /><br />    Section /o "German - Deutsch" SEC0001<br />        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language German<br />    SectionEnd<br /><br />    Section "Dutch - Nederlands" SEC0002<br />        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language Dutch<br />    SectionEnd<br />SectionGroupEnd</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 17:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This makes sense :)<br />
      Provided that you show the components page, include sections.nsh and use readiobuttons into .OnSelChange function to have only one section selected.<br />
      The included example one-section.nsi is almost identical for such a case.<br />
      It needs quotes here:<br />
      WriteRegStr HKEY_CURRENT_USER "Software\arniWORX\awxDTools" "Language" "English"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 17:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes, but also one-section.nsi has the same problem with "already found"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 17:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is weird, the example works pretty fine with or without logiclib included.<br />
      Just found an identical for your case example that I've posted here the other day.<br />
      Could you please copy/paste my code compile it and let us know if the same problem occurs?<br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=267375" target="_blank">http://forums.winamp.com/showthread....hreadid=267375</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yepp, thats weird. your example works....</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">13th April 2007 19:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So what is this "RadioButtons.nsh"?<br />
      I suspect is a header that you've made which causes the conflict. If you have copied there the RadioButtons macros you don't need to do that, simply include the sections.nsh header.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torstenburschka</span><br />
      <span class="post-time small text-muted">13th April 2007 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes, so it is. i think i will rewrite your code an implement it.<br />
      <br />
      thx for your help.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
