<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MySQL Service Problems"><title>MySQL Service Problems - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MySQL Service Problems</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=200797">MySQL Service Problems</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Mikej0h</span><br><span class="post-time small text-muted">1st December 2004 10:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MySQL Service Problems</strong><br>After trying all possible combinations I hope you guys can help me out with this frustrating problem.<br><br>When I try to register a service, it does not insert the service, or it inserts a faulty commandline.<br>The service-commandline must be as following (or must look like it):<br>"C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqld-nt" --defaults-file="C:\Program Files\MySQL\MySQL Server 4.1\my.ini" MySQL41<br><br><br>Here an example of one of the lines I tried(it were more strings, but they all give the same problem).<br>ExecWait `"$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld" --install MySQL41 --defaults-file="$INSTDIR\logres.ini"`<br><br>This creates a service but with the wrong commandline (which causes it cannot be started). The commandline is like this:<br>"C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqld" "--defaults-file=C:\Program Files\Logres\Promis Project\logres.ini" MySQL41<br><br><br>Can anybody help me out with a working solution ?<br>Thanks in advance.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">scrose</span><br><span class="post-time small text-muted">1st December 2004 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm taking a wild guess at this. Perhaps quotations need to go around each parameter in its entirety.</p><pre>
<code>ExecWait '"$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld" "--install MySQL41" "--defaults-file=$INSTDIR\logres.ini"'</code>
</pre>Or perhaps you could try reversing the order of the parameters.<pre>
<code>ExecWait '"$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld" "--defaults-file=$INSTDIR\logres.ini" "--install MySQL41"'</code>
</pre></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mikej0h</span><br><span class="post-time small text-muted">1st December 2004 22:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've tried your suggestion but it just doing nothing. No service appeared in the serviceslist.<br><br>I cannot change the lineup of the commands because of its prefixed at that way. According to the MySQL Manual I have to execute this in a command prompt:<br>mysqld --install MySQL41 --defaults-file="C:\Program Files\MySQL\MySQL Server 4.1\my.ini"<br><br>When I copy/paste that into a command windows, it works when I use it in NSIS it's not working.<br><br>Are there any other people who succesfully added a mysql service to windows ?<br>Or if you have other suggestions.... :)<br><br>Thanks in advance</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">RobGrant</span><br><span class="post-time small text-muted">2nd December 2004 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try this:<br><br>ExpandEnvStrings $0 "%COMSPEC%"<br>nsExec::Exec '"$0" /C "$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld" "--defaults-file=C:\Program Files\Logres\Promis Project\logres.ini"' MySQL41<br><br>Or some variation, but keeping the ExpandEnvStrings, and the nsExec::Exec "$0" /C bit.<br><br>have fun :)<br><br>[edited code slightly, missed a closing quotation mark]</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mikej0h</span><br><span class="post-time small text-muted">2nd December 2004 14:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for you reply, I tried your code. But it does not add anything to the registry/services list.<br>I made some changes to your code, in hope it would work, but it doesn't.<br><br>I tried the following code:<br>ExpandEnvStrings $0 "%COMSPEC%"<br>nsExec::Exec '"$0" /C "$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld" --install MySQL41 --defaults-file=`"C:\Program Files\Logres\Promis Project\logres.ini"`'<br><br>According to the manual of MySQL first the executable must call itself, then the option "--install &lt;servicename&gt;" and then I need to feed it with a config file where the quotations must be within the program path. Like this:<br>--defaults-file="C:\Program Files\Logres\Promis Project\logres.ini"<br><br>I'm out off suggestions and ideas, anybody ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mikej0h</span><br><span class="post-time small text-muted">4th December 2004 13:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, we solved the problem.<br>The solution was to use a different my.ini file. The first code I posted also worked after changing the .ini file.<br><br>So people if your MySQL service-installation fails to install, just use an other my.ini file.<br>The problem was not caused by NSIS in any way.<br><br><br>Keywords (for people who are seaching): MySQL, quotes, quotations, service, service-installation.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>