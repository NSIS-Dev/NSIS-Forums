<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="how to get the physical memory size"><title>how to get the physical memory size - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">how to get the physical memory size</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=338570">how to get the physical memory size</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">linzhong</span><br><span class="post-time small text-muted">1st December 2011 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>how to get the physical memory size</strong><br>how to get the system's physical memory size in the nsis script? Please tell me,thank you!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">1st December 2011 13:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://nsis.sourceforge.net/HwInfo_plug-in" target="_blank">http://nsis.sourceforge.net/HwInfo_plug-in</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">linzhong</span><br><span class="post-time small text-muted">2nd December 2011 09:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">thank you!,but the value is incorrect.My computer is 32bit windowsXP OS,4096MB physical memory.but use:<br><br>Section "Silent MakeNSIS"<br>HwInfo::GetSystemMemory<br>StrCpy $R0 $0<br>MessageBox MB_OK "You have $0MB of RAM"<br><br>SectionEnd<br><br>-------------<br>get the value 2048MB</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">2nd December 2011 09:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">On 32 bits WinXP, the virtual address space of processes and applications is limited to 2 GB, unless the process is image_file_large_address_aware and the /3GB flag is set in boot.ini. <a href="http://msdn.microsoft.com/en-us/windows/hardware/gg487508" target="_blank">http://msdn.microsoft.com/en-us/wind...dware/gg487508</a><br>If you don't have the 3GB option enabled, there's probably no need to "find" the full 4GB because no single process will be able to address more than 2GB anyway. If you do have the option enabled, and NSIS doesn't support large virtual address space (I don't know if this is the case), you'll probably have to create and execute a new process that <i>does</i> support it, and then have that report back to NSIS.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">linzhong</span><br><span class="post-time small text-muted">2nd December 2011 09:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I find in msdn ,it says use "GlobalMemoryStatusEx" instead of "GlobalMemoryStatus"</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">linzhong</span><br><span class="post-time small text-muted">2nd December 2011 09:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">void CHardwareInfo::GetTotalSystemMemory( int &amp;sysMem )<br>{<br>MEMORYSTATUS memorystatus;<br>GlobalMemoryStatus( &amp;memorystatus );<br>sysMem = (int)( ceil( memorystatus.dwTotalPhys / 1048576.f ) );<br>}<br>-----------------------<br>above is the hwinfo soure,the follow is msdn article:<br><br>How to use the API to obtain the total physical memory value<br>To retrieve the most accurate value that is under program control, developers should follow these steps:<br>1.Call the GlobalMemoryStatusEx function.<br>2.Query the ullAvailPhys member of the MEMORYSTATUSEX structure.<br>The components use either the GlobalMemoryStatusEx function or the same kernel technique that is used by the GlobalMemoryStatusEx function to calculate the total physical memory on a computer. To programmatically obtain this value, query the ullAvailPhys member of the MEMORYSTATUSEX structure passed as input to the GlobalMemoryStatusEx function.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>