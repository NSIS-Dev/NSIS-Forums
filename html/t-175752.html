<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Back Button not working properly" />

  <title>Back Button not working properly - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Back Button not working properly</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=175752">Back Button not working properly</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">8th April 2004 00:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Back Button not working properly</strong><br />
      &nbsp; Hi All,<br />
      From a NSIS script file, I'm trying to do something like this<br />
      <br />
      If the user forgets to enter input, display a messagebox that forces him to enter input.<br />
      <br />
      This works fine but when I hit the back button, it displays the message box instead of navigating to the previous page.<br />
      <br />
      Is there any way to read the value of Back, Next etc from the code? Do they live in register variables? I checked $R1, it's empty!<br />
      <br />
      Would really appreciate any help,<br />
      Thanks in advance,<br />
      M.J.S<br />
      <br />
      P.S. I'm using NSIS 2.0 and the modern UI.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">8th April 2004 11:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        After you have called the DLL, InstallOptions adds one string to the stack, with one of the following values. [Except for the function "InitDialog" which returns the page handle.]:<br />
        <br />
        <b>success</b> - The user has pressed the Next button<br />
        <b>back</b> - The user has pressed the Back button<br />
        <b>cancel</b> - The user has pressed the Cancel button<br />
        <b>error</b> - An error has occurred, the dialog cannot be displayed.
      </blockquote>An example:<br />
      <br />
      <pre>
<code>
InstallOptions::ShowPage "Test.ini"
<br />&gt;Pop $0 
<br />&gt;
</code>
</pre>The return value is returned to variable $0.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">8th April 2004 13:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Using the leave function is easier.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">8th April 2004 17:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried the leave function approach before I posted to the forum.<br />
      <br />
      page custom Foo "" leaveFoo<br />
      <br />
      Function leaveFoo<br />
      ;do something<br />
      FunctionEnd<br />
      <br />
      When I compiled the script, it zeroed this code out...<br />
      <br />
      Any idea why?<br />
      <br />
      <br />
      Thanks,<br />
      M.J.S</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">8th April 2004 17:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Page custom Foo leaveFoo</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">13th April 2004 00:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Cool, thanks for the help. This works for me. I'm still a little unclear on how I would find the variable in which "back" is stored.<br />
      <br />
      Thanks,<br />
      Malathi</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just wonderinf if anyone has answers to the question that I posted...<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th April 2004 19:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You mean the text of the button? See the language file for the language string name.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 19:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for your response. I'm actually trying to get this to work for me...<br />
      <br />
      Function customPage<br />
      <br />
      ; Do something to get R1. Not sure what exactly...<br />
      StrCmp $R1 "back" _goback done<br />
      _goback:<br />
      Call Foo ;to go back to the previous custom page<br />
      done:<br />
      <br />
      FunctionEnd<br />
      <br />
      <br />
      Thanks Again,</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th April 2004 19:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you want to stay on the current page use Abort in the leave function.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nope. Want to go back to the previous screen. Foo actually reads in values from Foo.ini.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th April 2004 20:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can also use Abort in the pre function to stay on the current page.<br />
      <br />
      What exactly are you trying to do? When do you want to go back?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 21:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Function Bar LeaveBar<br />
      _start:<br />
      ;If the user forgets to enter input<br />
      goto _start<br />
      FunctionEnd<br />
      <br />
      Function Foo<br />
      _start:<br />
      ;If the user forgets to enter input<br />
      goto _start<br />
      Function End<br />
      <br />
      Function LeaveBar<br />
      ; If the user hit the back button( how do I know this?) Call Foo<br />
      ;else goto _done<br />
      _done:<br />
      FunctionEnd<br />
      <br />
      Here Screen 1 inovolves Foo. We are on screen 2 (involving Bar) trying to hit back to get to Screen 1 again...<br />
      <br />
      If the goto _start is not present it works perfectly but this is not an option for me as I want to force the user to enter input.<br />
      <br />
      Thanks,<br />
      Malathi</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th April 2004 22:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't really understand what you mean. Do you want to go back to page 1 when validating page 2? Why?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nope. What I want to do is to go back to Page 1 whenever the user hits back even if all the entries for the required fields are blank. I'm able to accomplish this for cancel i.e irrespective of the state of the required fields, I'm able to cancel out of the installer by inserting a simple strcmp function. All I want is to do the same for back but I dont know how to get hold of the variable that is populated when the user hits back.<br />
      <br />
      Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th April 2004 22:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The leave function is only called when the user clicks Next.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">14th April 2004 22:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ahh..Any other options? All I want to do is<br />
      StrCmp $UserHitBack "Back" Call Page1<br />
      <br />
      Problem is I dont know how I can get the variable that the installer stores the value of the back button in...Is it one of the register variables?<br />
      <br />
      Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">15th April 2004 09:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please explain exactly what feature you want. If a user clicks Back it will of course go the to previous page. What else do you want?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mj_igx</span><br />
      <span class="post-time small text-muted">21st April 2004 22:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think I have this figured out. Thanks for your help. Will let you know how it goes...<br />
      <br />
      Basically, the problem stems from the loop that I'm using to force the user to enter input. Moving the loop to the leave function fixes it.<br />
      <br />
      Thanks,<br />
      Malathi</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
