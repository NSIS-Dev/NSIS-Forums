<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Hidden section bug" />

  <title>Hidden section bug - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Hidden section bug</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=279788">Hidden section bug</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Leanid</span><br />
      <span class="post-time small text-muted">23rd October 2007 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Hidden section bug</strong><br />
      I have posted problem on SourceForge:<br />
      <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1817989&amp;group_id=22049&amp;atid=373085" target="_blank">http://sourceforge.net/tracker/index...49&amp;atid=373085</a><br />
      Issue: 1817989<br />
      <br />
      But I think I was not understood. I want to discuss this problem here. Since I still think it's a bug.<br />
      I repeat problem description:<br />
      <br />
      OutFile "install.exe"<br />
      Page components<br />
      InstType "qa"<br />
      InstType "prod"<br />
      SectionGroup "qa" qa<br />
      Section "" qaclean<br />
      SectionIn "1"<br />
      SectionEnd<br />
      Section "mod1" mod1<br />
      SectionIn "1"<br />
      SectionEnd<br />
      Section "mod2" mod2<br />
      SectionIn "1"<br />
      SectionEnd<br />
      Section "" qadeploy<br />
      SectionIn "1"<br />
      SectionEnd<br />
      SectionGroupEnd<br />
      Function .onSelChange<br />
      SectionGetFlags ${qaclean} $0<br />
      SectionGetFlags ${qadeploy} $1<br />
      MessageBox MB_OK "qaclean: $0 qadeploy $1"<br />
      FunctionEnd<br />
      <br />
      <br />
      In installer I see sections:<br />
      mod1 and mod2, section qaclean and qadeploy are hidden.<br />
      I want hidden section to be selected if any of my visible sections are selected.<br />
      ------------------------------<br />
      I still think it's high priority bug.<br />
      In current implementation you can have 2 different results<br />
      with the same visual selection.<br />
      <br />
      situation 1:<br />
      1) Inst Type Qa selected.<br />
      2) I extend section and deselect mod1.<br />
      3) Visually I see that Qa - partially selected, one mod2 section selected.<br />
      4) Nsis will install, mod2 + qaclean + qadeploy<br />
      <br />
      Situation 2:<br />
      1) Inst Type Qa selected.<br />
      2) I extend section and deselect mod1 and mod2.<br />
      3) Select mod2.<br />
      3) Visually I see that Qa - partially selected, one mod2 section selected. Same as in situation 1<br />
      4) Nsis will install, mod2 only.<br />
      <br />
      As you see with the same visual selection Nsis will install different sections. I think it'a a bug and to fix it I had to write my own .onSelChnage function.<br />
      <br />
      In current implementation you are correctly deselect hidden section if all visible have been deselected.<br />
      But you select hidden section back only if I select all section from Installation type. This is bug. You should select hidden section when any of visible section in current installation type selected.<br />
      <br />
      <br />
      What do you think?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd October 2007 21:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hidden sections are automatically selected only if the section group is completely selected. This is by design and isn't actually affected by the fact they're hidden.<br />
      <br />
      What you are looking for is different. You simply want to have the two last sections selected if any of the first two are selected. That's what .onSelChange or some later processing of the section selection is for.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Leanid</span><br />
      <span class="post-time small text-muted">24th October 2007 14:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I understand your logic and .onSelChnage is what I used to achieve behavior I need.<br />
      <br />
      I just saying that in current implementation if you use hidden section and allow Custom Install type, Nsis might install different groups with the same visual selection.<br />
      <br />
      If this is by design, then it is wrong design. Or you should add warning: "do not use hidden section if custom install type allowed, or use .onSelChnage to control this behavior".<br />
      <br />
      From user point of view I gave same type of input to Nsis, but receive different results.<br />
      <br />
      If you think it's Ok, it's fine with me. I fixed it for myself. I just noticed it by accident, just watching how much space required with my selection. I was lucky to find it before I send it to customers. But I see it could be easily missed by someone.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
