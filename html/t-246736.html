<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Can't get AddBrandingImage/SetBrandingImage to work"><title>Can't get AddBrandingImage/SetBrandingImage to work - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Can't get AddBrandingImage/SetBrandingImage to work</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=246736">Can't get AddBrandingImage/SetBrandingImage to work</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Nils Schneider</span><br><span class="post-time small text-muted">22nd May 2006 11:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Can't get AddBrandingImage/SetBrandingImage to work</strong><br>Hello,<br><br>I'm trying to insert a branding image at the top of the installer without success. I used AddBrandingImage to reserve space for the image and this part works.<br><br>But in my main installing section I'm using SetBrandingImage title.bmp but the bitmap isn't being displayed although it resides in the same directory where the installer is located in.<br><br>Another question, isn't it possible to link the bitmap to the installer instead of the need to ship it?<br><br>EDIT: Why do I have to set the branding image in a section? Isn't it possible to set the branding image for the whole installer?<br><br>Thanks in advance,<br><br>Nils</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">22nd May 2006 18:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you are using the MUI (Modern User Interface) you just need to add these 3 lines below your "!include "MUI.nsh"" line:<br></p><pre>
<code><br>!include "MUI.nsh"<br>!define MUI_WELCOMEFINISHPAGE_BITMAP "LeftPanel.bmp"<br>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP "Header.bmp"<br></code>
</pre><br>
      <br>
      Hope this helps.<br>
      Jnuw
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nils Schneider</span><br>
      <span class="post-time small text-muted">23rd May 2006 09:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I didn't use the MUI but tried it with the same result. Space is reserved for the image, but it isn't being displayed.<br>
      <br>
      Any other tips?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">23rd May 2006 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How about show us your code, what you have so we can see what's wrong</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nils Schneider</span><br>
      <span class="post-time small text-muted">23rd May 2006 20:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No problem, here it is:<br>
      <br></p>
      <pre>
<code><br>; Installation Script (C) 2006 by MyCompanyName Software GmbH<br><br>!include "versioncheck.nsi"<br>!include "Sections.nsh"<br><br>; __________________________________________________________<br>;<br><br>!define         NAME                                    "MyProgramName"<br>!define         EDITORNAME                              "MyProgramName - Karteneditor"<br>!define         EXE                                             "bin\S2C.exe"<br>!define         EDITOREXE                               "bin\S2CEditor.exe"<br><br>!define         SECTION_PROGRAMFILES    "Programmdateien (benötigt)"<br>!define         SECTIONGROUP_SHORTCUTS  "Verknüpfungen"<br>!define         SECTION_STARTMENU               "Startmenü"<br>!define         SECTION_DESKTOP                 "Desktop"<br><br>; __________________________________________________________<br>;<br><br>Name                    "${NAME}"<br>OutFile                 "..\Autorun\setup.exe"<br><br>Icon                    "fun_32x32.ico"<br>UninstallIcon   "fun_32x32.ico"<br><br>InstallDir              "$PROGRAMFILES\MyPublisherName\MyCompanyName\${NAME}"<br><br>LicenseData             license.txt<br>LicenseForceSelection   checkbox        "Ich habe die Lizenzbestimmungen gelesen und stimme ihnen zu"<br><br>CompletedText                   "Installation abgeschlossen"<br>DetailsButtonText               "Details anzeigen"<br>InstallButtonText               "Installieren"<br><br>SpaceTexts                              "Benötigter Speicherplatz: " "Verfügbarer Speicherplatz: "<br><br>SubCaption              0               "Lizenzbestimmungen"<br>SubCaption              1               " "<br>SubCaption              2               "Installationsverzeichnis"<br>SubCaption              3               "Installiere Dateien"<br>SubCaption              4               "Abgeschlossen"<br><br>MiscButtonText                  "Zurück" "Weiter &gt;" "Abbrechen" "Beenden"<br><br>UninstallButtonText             "Deinstallieren"<br>UninstallCaption                "${NAME} Deinstallation"<br>UninstallText                   "Die folgende Anwendung wird ${NAME} deinstallieren. Drücken sie Weiter um fortzufahren." "Verzeichnis:"<br><br>UninstallSubCaption     0       " "<br>UninstallSubCaption     1       " "<br>UninstallSubCaption     2       " "<br><br>DirText                                 "Wählen sie das Verzeichnis aus, in welches ${NAME} installiert werden soll:" "Zielverzeichnis" "Durchsuchen..." "Verzeichnis wählen"<br>ComponentText                   "Die folgende Anwendung wird ${NAME} auf ihrem Computer installieren. Bitte wählen sie aus, welche Komponenten sie installieren möchten." " " "Wählen sie die zu installierenden Komponenten"<br><br>; THIS ONE DOESN'T WORK<br>AddBrandingImage                top 124<br>BrandingText                    " "<br><br>; _______________________<br>;<br><br>AutoCloseWindow true<br>XPStyle         on<br>ShowInstDetails show<br><br>; Registry key to check for directory (so if you install again, it will <br>; overwrite the old one automatically)<br>InstallDirRegKey HKLM "SOFTWARE\MyPublisherName\MyCompanyName\${NAME}" "Install_Dir"<br><br>; _______________________<br>; Program files<br>; <br><br>Section "${SECTION_PROGRAMFILES}"<br><br>        ; AND THIS ONE DOESN'T WORK EITHER<br>        SetBrandingImage /RESIZETOFIT "title.bmp"<br><br>        ; Set output path to the installation directory.<br>        ; Put files there<br><br>        SetOutPath $INSTDIR\bin<br>        File "..\${EXE}"<br>        File "..\${EDITOREXE}"<br>        File "..\bin\*.dll"<br><br>        SetOutPath $INSTDIR\data<br>        ;File /r "..\data\*.*"<br><br>        SetOutPath $INSTDIR<br><br>        ; Write the installation path into the registry<br>        WriteRegStr HKLM "SOFTWARE\MyPublisherName\MyCompanyName\${NAME}" "Install_Dir" "$INSTDIR"<br><br>        ; Write the uninstall keys for Windows<br>        WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}" "DisplayName" "${NAME}"<br>        WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}" "UninstallString" '"$INSTDIR\uninstall.exe"'<br>        WriteUninstaller "uninstall.exe"<br>SectionEnd<br><br>; _______________________<br>; Shortcuts<br>; <br><br>Var DirectXVersion<br>Var Result<br><br>Section "DirectX 9.0c"<br>        ReadRegStr $DirectXVersion HKLM "Software\Microsoft\DirectX" "Version"<br>        !define Ver2 "4.09.00.0904"<br>        ${VersionCheck} "$DirectXVersion" "${Ver2}" $Result<br><br>        IntCmp $Result 2 equal less more<br>                less:<br>                more:<br>                        ;!insertmacro UnselectSection "DirectX 9.0c"<br>                        SectionIn RO<br>                        Goto done<br>                equal:<br>                        ExecWait "DirectX/directx_9c_redist.exe"<br>        done:<br>SectionEnd<br><br>; _______________________<br>; Shortcuts<br>; <br><br>SectionGroup "${SECTIONGROUP_SHORTCUTS}"<br>        Section "${SECTION_STARTMENU}"<br>                CreateDirectory "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}"<br>                CreateShortCut  "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\Uninstall.lnk" "$INSTDIR\uninstall.exe" "" "$INSTDIR\uninstall.exe" 0<br>                CreateShortCut  "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\${NAME}.lnk" "$INSTDIR\${EXE}" "" "$INSTDIR\${EXE}" 0<br>                CreateShortCut  "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\${NAME}.lnk" "$INSTDIR\${EDITOREXE}" "" "$INSTDIR\${EDITOREXE}" 0<br>        SectionEnd<br>        <br>        Section "${SECTION_DESKTOP}"<br>                CreateShortCut  "$DESKTOP\${NAME}.lnk" "$INSTDIR\${EXE}" "" "$INSTDIR\${EXE}" 0<br>                CreateShortCut  "$DESKTOP\${NAME}.lnk" "$INSTDIR\${EDITOREXE}" "" "$INSTDIR\${EDITOREXE}" 0<br>        SectionEnd<br>SectionGroupEnd<br><br>; _______________________<br>; Uninstall<br>;<br><br>Section "Uninstall"<br>        ; remove registry keys<br>        DeleteRegKey HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}"<br>        DeleteRegKey HKLM "SOFTWARE\MyPublisherName\MyCompanyName\${NAME}"<br><br>        ; remove shortcuts, if any.<br>        Delete "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\*.*"<br>        RMDir  "$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}"<br>        Delete "$DESKTOP\${NAME}.lnk"<br><br>        ; remove files<br>        RMDir /r "$INSTDIR"<br>SectionEnd<br><br>; _______________________<br>; Callbacks<br>;<br><br>Function .onInstSuccess<br>;       MessageBox MB_YESNO "Möchten sie ${NAME} nun starten?" IDNO NoStart<br>        Exec "autorun.exe"<br>;       NoStart:<br>FunctionEnd<br><br>Function .onUserAbort<br>        Exec "autorun.exe"<br>FunctionEnd<br></code>
</pre><br>
      <br>
      The bitmap has a size of 342x124 pixels, 24bit.<br>
      <br>
      Many thanks,<br>
      <br>
      Nils
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd May 2006 20:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">MUI_HEADERIMAGE_BITMAP would most likely require you to put your bitmap images in $PLUGINSDIR, not $EXEDIR.<br>
      If your bitmap resides in the same folder as your installer, you still need to tell the installer that it is there by using the $EXEDIR constant, e.g. SetBrandingImage `$EXEDIR\title.bmp`<br>
      or by setting the working folder to $EXEDIR with SetOutPath first. Without calling SetOutPath, the working directory is usually $DESKTOP (which is the highest level directory in the directory hierarchy).<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>