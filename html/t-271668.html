<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="ini files language strings"><title>ini files language strings - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">ini files language strings</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271668">ini files language strings</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">23rd May 2007 20:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>ini files language strings</strong><br>Hi,<br><br>I am new to NSIS and would like to know how to use laguage strings in ini files using custom pages using the new interface.<br><br>Thanks in advance,</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">23rd May 2007 20:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You should write the language string into the INI file using WriteINIStr or the MUI_INSTALLOPTIONS_WRITE macro at runtime.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">24th May 2007 08:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks,<br><br>I tried the WriteINISTr command like this:<br><br>Function CustomPageA<br><br>------------------------<br>!insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE)"<br>!insertmacro MUI_INSTALLOPTIONS_DISPLAY "ioA.ini"<br>WriteINISTR "ioA.ini" "Field 1" "databasemessage1" dbMessage1<br><br>FunctionEnd<br>------------------------<br><br>The compiler will give me the following log.<br><br>------------------------<br>Function: "CustomPageA"<br>!insertmacro: MUI_HEADER_TEXT<br>!insertmacro: end of MUI_HEADER_TEXT<br>!insertmacro: MUI_INSTALLOPTIONS_DISPLAY<br>!insertmacro: end of MUI_INSTALLOPTIONS_DISPLAY<br>WriteINIStr: [Field 1] databasemessage1=dbMessage1 in ioA.ini<br>FunctionEnd<br>------------------------<br><br>So he sort of have seemed to understood.<br><br>My ini file starts as follows:<br><br>-------------------------<br>[Settings]<br>NumFields=5<br><br>[Field 1]<br>Type=label<br>Text=databasemessage1<br>Left=0<br>Right=-1<br>Top=0<br>Bottom=9<br><br>-------------------------<br><br><br>So I have no errors but nothing is changed as still have the databasemessage1 displayed on my custum page instead of the contents of the language string dbMessage1.<br><br><br>I haven't found any doculentation on the MUI_INSTALLOPTIONS_WRITE macro ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">24th May 2007 11:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MUI_INSTALLOPTIONS_WRITE is documented in the MUI readme and is the macro you should use in this case. If you're using the MUI to extract and display the page, you should use it to modify the page.<br><br>If you use WriteINIStr, you must use a full path ($PLUGINSDIR\ioA.ini).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">24th May 2007 12:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">My custompage function is now as follows:<br><br><br>--------------------------------<br>Function CustomPageA<br><br>!insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE)"<br>!insertmacro MUI_INSTALLOPTIONS_DISPLAY "ioA.ini"<br>!insertmacro MUI_INSTALLOPTIONS_WRITE "ioA.ini" "Field 1" "databasemessage1" "hi"<br><br>FunctionEnd<br>--------------------------------<br><br>Again no errors but no results either.<br><br>Is this the right place to put this macro ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">24th May 2007 16:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There's not much point writing the language string to the page after displaying it.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">29th May 2007 15:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The thing is that I tried to place the installoptions_write in many places but all without succes.<br><br>Maybe I should give up.<br><br><br>Maarten</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">29th May 2007 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What is databasemessage1?<br>It should either be Text or State depending on the control.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">29th May 2007 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi<br><br>Thanks for the reply.<br><br>databasemessage1 is what is to be replaced in my ini.file which starts as follows:<br><br>[Settings]<br>NumFields=5<br><br>[Field 1]<br>Type=label<br>Text=databasemessage1<br>Left=0<br>Right=-1<br>Top=0<br>Bottom=9</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">29th May 2007 17:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">!insertmacro MUI_INSTALLOPTIONS_WRITE "ioA.ini" "Field 1" "Text" "hi"<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Maartenmostert</span><br><span class="post-time small text-muted">31st May 2007 13:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks very much I got it working now</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>