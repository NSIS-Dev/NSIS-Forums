<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="&quot;Other GenPat error&quot;"><title>"Other GenPat error" - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">"Other GenPat error"</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287360">"Other GenPat error"</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">NinjaHippie</span><br><span class="post-time small text-muted">22nd February 2008 05:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>"Other GenPat error"</strong><br>There is a bug in GenPat involving repetition of the source folder name.<br><br></p><pre>
<code>nsisPatchGen ver1 ver2</code>
</pre><br><br>This code, run on the attached data folders produces the following error message:<br><br><blockquote>File Modified: folder_diff.txt<br>Creating patch file: patchFiles\folder_diff.txt.pat<br>"..\nsisPatchGen" : "GenPat failed to start"</blockquote>The (attached) directories ver1 and ver2 each contain a subfolder called "folder_ver1". folder_ver1 contains a file called "diff.txt" that contains different data for each version and therefore requires a generated patch file.<br><br>The problem is that the the name "folder_ver1" contains the name of the source root directory ("ver1"), and when GenPat encounters the file, it strips out the root name from the path (hence the log message "Creating patch file: patchFiles\folder_diff.txt.pat" should read "Creating patch file: patchFiles\folder_ver1\diff.txt.pat").<br><br>This only occurs if the root name is repeated at the end of a sub-folder name (so "ver1_folder" would work fine).<br><br>I'll try and have a look at the GenPat source on Monday, but I thought I'd post up here first and see if anyone has solved the problem already.<br><br>Is this the correct place to write bug reports?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">NinjaHippie</span><br><span class="post-time small text-muted">22nd February 2008 07:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've been having some trouble getting nsisPatchGen to build. More specifically, I can't seem to get QT to link in correctly.<br><br>I found a download for QT4.1.4 (<a href="http://rebecca-aiml.sourceforge.net/download.htm" target="_blank">http://rebecca-aiml.sourceforge.net/download.htm</a>), and I think I've added the appropriate include directories to the project, but I'm still getting missing declaration errors:<br><br></p><pre>
<code>error C2244: 'QMultiMap&lt;Key,T&gt;::insert' : unable to match function definition to an existing declaration</code>
</pre></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd February 2008 10:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Bug reports usually go in the bug tracker. But it's OK to post in the forums to gather the information first.<br><br>I'm not quite sure I understand if the bug is in GenPat or nsisPatchGen. As far as I know GenPat doesn't handle paths to that degree, so it must be nsisPatchGen. You're also looking at QT, so that means you've reached this conclusion as well.<br><br>I can say at least "GenPat failed to start" is caused by its failure to find GenPat.exe. It seems to ignore %VPATCH% mentioned in its readme and just call VPatch.exe. I saw no evidence that it looks for %VPATCH% anywhere in its source code. It just looks for it in %PATH% like every other executed program.<br><br>As for "Other GenPat error", that can be resolved by appending backslashes to ver1 and ver2 on the command line. It won't solve the real bug, but it's a viable workaround.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">NinjaHippie</span><br><span class="post-time small text-muted">22nd February 2008 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi kichik,<br><br>Thanks for the reply.<br><br>Yea, on closer inspection it seems likely that the bug exists in nsisPatchGen.<br><br>When I read you post for the first time I couldn't quite figure out why you were referring to a "GenPat failed to start" error that I've never heard of. In my hasty attempt to produce a simplified example of my problem I must have caused another. I cut and paste the "failed to start" error message thinking it was the "Other GenPatch error" I had been experiencing.<br><br>Thanks for the backslashes tip, I don't know why I didn't think to try that in the first place. I'll give it a go first thing on Monday. If I have time (and if I can get nsisPatchGen to finally compile) I'll try and put a proper fix in as well.<br><br>Thanks again</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">viperpiper</span><br><span class="post-time small text-muted">10th March 2008 00:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry - was away working somewhere with really bad internet access. I'll have a look at the bug soon.<br><br>As for the build problem - what compiler are you using?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">NinjaHippie</span><br><span class="post-time small text-muted">10th March 2008 02:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hey viper,<br><br>I'm using VC2005 Express Edition. The backslashes workaround is working though, and I haven't had a chance to try compiling again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">balena</span><br><span class="post-time small text-muted">11th September 2008 20:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found the error. You are checking for errors before to wait the execution completion on PatchGenerator.cpp. Please check it out.<br><br>I am attaching a diff file I made to make things to work.<br><br>When you correct this BUG, please don't forget to update the nsisPatchGen project at SourceForge.<br><br>Best Regards,<br><br>Guilherme Balena Versiani<br>ComunIP S/A</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>