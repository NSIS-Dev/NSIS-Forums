<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Modern UI Bitmap Replacement"><title>Modern UI Bitmap Replacement - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Modern UI Bitmap Replacement</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250456">Modern UI Bitmap Replacement</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br><span class="post-time small text-muted">5th July 2006 20:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Modern UI Bitmap Replacement</strong><br>Ok, this is probably faulty because I'm guessing most of this, and it was a very rushed job, but the header and wizard images in my installer aren't displaying, there just white. I have editted both the System.nsh of MUI and of course my own script. I've tried the images in the default folders in NSIS, and now the images are in the folder under the paths currently, and they just will not show.<br><br>Here is the script code: (I've removed the file install lists and the uninstall lists to save space.)<br><br></p><pre>
<code><br><br>; Define your application name<br>!define APPNAME "Dark Signs"<br>!define APPNAMEANDVERSION "Dark Signs v0.96.1"<br><br>; Main Install settings<br>Name "${APPNAMEANDVERSION}"<br>InstallDir "$PROGRAMFILES\Vectra Media\Dark Signs"<br>InstallDirRegKey HKLM "Software\${APPNAME}" ""<br>OutFile "..\DSSetup.exe"<br><br>; Use compression<br>SetCompressor LZMA<br><br>; Modern interface settings<br>!include "MUI.nsh"<br><br>!define MUI_HEADERIMAGE<br>!define MUI_HEADERIMAGE_BITMAP "C:\Documents and Settings\Ross\Desktop\Vectra Media\DarkSigns\Source\vm.bmp"<br>!define MUI_ABORTWARNING<br>!define MUI_FINISHPAGE_RUN "$INSTDIR\darksigns.exe"<br>  <br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_LICENSE "..\license.txt"<br>!insertmacro MUI_PAGE_DIRECTORY<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>!insertmacro MUI_UNPAGE_WELCOME<br>!insertmacro MUI_UNPAGE_CONFIRM<br>!insertmacro MUI_UNPAGE_INSTFILES<br>!insertmacro MUI_UNPAGE_FINISH<br><br>; Set languages (first is default language)<br>!insertmacro MUI_LANGUAGE "English"<br>!insertmacro MUI_RESERVEFILE_LANGDLL<br><br>Section "Dark Signs" Install<br><br>        {Removed to save space.}<br><br>SectionEnd<br><br>Section -FinishSection<br><br>        WriteRegStr HKLM "Software\${APPNAME}" "" "$INSTDIR"<br>        WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" "DisplayName" "${APPNAME}"<br>        WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" "UninstallString" "$INSTDIR\uninstall.exe"<br>        WriteUninstaller "$INSTDIR\uninstall.exe"<br><br>SectionEnd<br><br>; Modern install component descriptions<br>!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br>        !insertmacro MUI_DESCRIPTION_TEXT ${Section1} ""<br>!insertmacro MUI_FUNCTION_DESCRIPTION_END<br><br>;Uninstall section<br>Section Uninstall<br><br>        {Removed to save space.}<br><br>SectionEnd<br><br>BrandingText "Vectra Media"<br><br>; eof<br></code>
</pre><br>
      <br>
      I have pasted my MUI into Nopaste to save space in the thread, it can be read here:<br>
      <br>
      <a href="http://rafb.net/paste/results/poskne59.html" target="_blank">http://rafb.net/paste/results/poskne59.html</a><br>
      <br>
      Many thanks.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th July 2006 20:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need<br>
      !define MUI_HEADERIMAGE<br>
      before it as well.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah it's not that, it had that in before, but I removed it to see if it would work without it. I'll put it back in though.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th July 2006 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Without MUI_HEADERIMAGE, MUI_HEADERIMAGE_BITMAP is completely ignored.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Okay. i've fixed it now, but it still doesn't work. Do you have any other ideas?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th July 2006 20:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Firstly try moving the !include MUI.nsh line to the top of your script above anything else.<br>
      <br>
      If that does not work, try putting this in your script:<br>
      <br>
      Function .onInit<br>
      InitPluginsDir<br>
      FunctionEnd<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 20:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Neither of those fixes worked. :(</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th July 2006 20:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I built the exact script that you have there, but used C:\trees.bmp for the image and it works fine.<br>
      Perhaps the bitmap that you are trying to use is corrupt or the incorrect format. Try copying it to C:\ and referencing it from there.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 20:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nope it still doesn't work! *rips hair out*<br>
      <br>
      Could you make the changes you did with c:\trees.bmp<br>
      <br>
      To change them to c:\darksigns.bmp for the large sidebar and c:\vm.bmp for the header. So I know that I'm changing the right ones.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 22:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can anyone help with this? I'm going to try and get a blank copy of System.nsh and start over if I can find one.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 23:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've just totally remade it, with a clean system.nsh, and it still won't work, if I replace my images with one of the standards, it works fine. But if I put in my own custom bitmaps, it won't display them.<br>
      <br>
      They where created and saved using Photoshop.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sayyan Kotor</span><br>
      <span class="post-time small text-muted">5th July 2006 23:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ah ha! I did it, had to make sure it was saved as 8bit Indexed, rather than 16bit RGB.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>