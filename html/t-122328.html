<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Program Back/Cancel button" />

  <title>Program Back/Cancel button - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Program Back/Cancel button</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=122328">Program Back/Cancel button</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">22nd January 2003 00:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Program Back/Cancel button</strong><br />
      &nbsp; Hi,<br />
      <br />
      May I know if there is anyway to modify or program the back buttons and the Cancel/Next buttons?<br />
      <br />
      For example I want the installer to do something before going back to the previous page when the user clicks "Back".<br />
      <br />
      Thanks.:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">22nd January 2003 01:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      Continuation to my above posting...<br />
      <br />
      It would also be nice if someone could advice me on how do I enable my CANCEL button at my Install Page. Currently while my installer is extracting its files, etc, I am unable to stop it half-way by clicking Cancel button because it has been disabled.<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">22nd January 2003 11:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The Cancel button is always disabled while installing. This is configured in the NSIS compiler itself.<br />
      <br />
      If you aren't using the Modern UI, you can use the following:<br /></p>
      <pre>
<code>Page license</code>|components|directory|instfiles ***91;pre_function***93; ***91;post_function***93; 
</pre>Where you replace [pre_function] with the function name of a function that contains instructions that need to be executed before loading, and [post_function] with the function name of a function that contains instructions that need to be executed after loading.<br />
      <br />
      <font size="1">Taken from: <a href="http://nsis.sourceforge.net/Docs/Chapter3.html#3.5.2" target="_blank">Chapter 3.5.2</a></font>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">22nd January 2003 15:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can't enable the cancel button yet. I do plan on adding this feature sometime in the future though.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">23rd January 2003 20:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">May I know then if there is anyway to modify or program the back button?<br />
      <br />
      What I actually wish to do is:<br />
      If the user clicks on "BACK" then the installer skips all my functions and checking which I have coded.<br />
      <br />
      Thanks.<br />
      :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">24th January 2003 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Look here: <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=122389" target="_blank">http://forums.winamp.com/showthread....hreadid=122389</a>. KiCHiK said two days ago that a feature that would enable to do things at exit of a page would become available tomorrow (yesterday). I haven't heard anything from him about it since.<br />
      <br />
      So I don't know whether KiCHiK implemented a variable or function that can be used to check what button was used. I should be there in order to let what you want work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th January 2003 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It will only be called when pressing next. Should be available today I hope.<br />
      <br />
      treaz, you should just copy 1 to a variable and before checking check if this variable is 1. If it is, skip your functions. No need to know when the user clicks back, just flag that you have already done the testing.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th January 2003 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Up and running.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">7th March 2003 22:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        It will only be called when pressing next. Should be available today I hope.<br />
        <br />
        treaz, you should just copy 1 to a variable and before checking check if this variable is 1. If it is, skip your functions. No need to know when the user clicks <b>back</b>, just flag that you have already done the testing.
      </blockquote>May I know how do I verify if the user clicked the BACK button instead of any other button? If I have a way to check, it would solve my problem for sure.<br />
      <br />
      Thanks.:)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th March 2003 22:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">After the function executes copy 1 to a variable and before executing again check if that variable is 1. If the function has already executed it won't execute it again. If really want it only not to execute when pressing back (can't see why, but it's your call) then set that variable in one of the next page's callback functions and have the function that you don't want to execute check for it and unset it after it checked.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">7th March 2003 22:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">My apologies but I am totally confused by your explanation.<br />
      <br />
      I need to run my check function every time the text boxes get changed. Therefore if I use a variable (to check that once the function has been ran, it does not run again), I will not be able to run my check function again once the user modifies the text boxes.<br />
      <br />
      Not sure if I am making myself clear, cause I seem to have difficulty explaining the senerio.<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th March 2003 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I will answer this tomorrow unless someone does before me. Too tired to think :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">10th March 2003 21:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Let me try to explain me scenerio:<br />
      <br />
      I have a customised page that takes in 4 user inputs.<br />
      These inputs should be checked only when the user click NEXT.<br />
      <br />
      The checking process: these 4 inputs are passed as arguments into a java class which does the validation. If there is an error, a message box would pop up to tell the user what was wrong with the inputs. The user should be allowed to re-enter the inputs.<br />
      <br />
      I do NOT wish to run the check function upon clicking the BACK button, firstly because the checking takes a very long time. Secondly, because my checking function pops up a message box if the information entered was invalid.<br />
      <br />
      Currently if the input boxes were empty and the user click BACK or even CANCEL, my checking function would run and return an error message to say that an error occurred (because it does not accept empty inputs). BUT this doesn't make sense because the user did not request to move forward with this installation. He merely requested to go BACK.<br />
      <br />
      I wish to know how I can make my above scenerio more sensible.<br />
      Any help would be great. Thanks!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">10th March 2003 23:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The Check funtion should be called on the next page's pre function.<br />
      <br />
      If using Modern UI and your next page is the InsFiles page, use<br />
      !define MUI_CUSTOMFUNCTION_INSTFILES_SHOW "Check"<br />
      Where "Check" is your special function.<br />
      <br />
      If you don't use Modern UI, use the<br />
      Page InstFiles "Check"<br />
      <br />
      Does that answer your query?<br />
      <br />
      -Stuart</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">10th March 2003 23:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      Thanks for your reply.<br />
      I have tried that method of putting my check function as the pre function for the next page.<br />
      <br />
      However, I would not be able to return to the previous page automatically if the input given by the users are invalid.<br />
      <br />
      If you have any ideas, I would be more than glad to try it.<br />
      <br />
      Thanks.:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">11th March 2003 08:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you use Install Options 2, you can do this:<br />
      <br />
      Use this code in the function of your page.<br />
      <br /></p>
      <pre>
<code> !insertmacro MUI_HEADER_TEXT "TEXT TO TITLE" "TEXT TO SUBTITLE"
<br /><br />  #If you use !insertmacro MUI_INSTALLOPTIONS_DISPLAY "inifile.ini"
<br />  #replace this by:
<br /><br />  Push $R0
<br />    InstallOptions</code>::dialog "$PLUGINSDIR\\inifile.ini"
<br />  Pop $R0
<br /><br />  #...
<br /><br /> StrCmp $R0 "success" 0 EndSuccess
<br /><br />&gt;#Put here the code that you want to run when next button is pressed.
<br /><br /> EndSuccess:
<br /><br />&gt;#Put here the code that you want to run when any button is pressed. 
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">treaz</span><br />
      <span class="post-time small text-muted">11th March 2003 19:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks a lot!<br />
      <br />
      I finally got my problem solved.<br />
      That was indeed a very helpful piece of code.<br />
      <br />
      :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">12th March 2003 08:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I viewed the Modern UI documentation and I detected a change in this doc, now this code:<br />
      <br />
      Push $R0<br />
      InstallOptions::dialog "$PLUGINSDIR\inifile.ini"<br />
      Pop $R0<br />
      <br />
      Can be replaced by:<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY_RETURN "inifile.ini"<br />
      <br />
      But I didn't test this, so if you get any problems with this, you can use the old code posted by me before.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
