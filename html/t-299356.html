<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Required Section within a group" />

  <title>Required Section within a group - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Required Section within a group</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=299356">Required Section within a group</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tonst</span><br />
      <span class="post-time small text-muted">30th October 2008 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Required Section within a group</strong><br />
      &nbsp; Hi<br />
      <br />
      How do I have a section within a group that is required if the group is ticked.<br />
      <br />
      i.e.<br />
      <br />
      Group<br />
      -Shared Components<br />
      -Program 1<br />
      -Program 2<br />
      -Program 3<br />
      <br />
      If P1/2/3 are checked then shared must be, if group is unchecked then don't install shared.<br />
      <br />
      I tried RO on the shared section but that means i can't uncheck the group.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">1st November 2008 00:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Put your user chosen sections in the group. Add a section outside of the group, before or after, depending on if these "shared" things need to be installed before or after the other section. Make the shared section hidden with the hyphen in the beginning of the name, and make it readonly so that it can't be deselected. Inside of the shared section, wrap all you logic with (IsPartiallySelected OR IsSelected) logic so that it doesn't actually do anything unless at least on item in the group is checked. The reason you need the OR IsSelect is because IsPartiallySelected would evaluate to false if all three of the sections it contains are checked. The below is an example. I think this requires the FileFunc and LogicLib headers. Search the wiki for IsPartiallySelected to verify what dependencies there are.<br />
      <br /></p>
      <pre>
<code>
Section "-Programs Prerequs" ProgramsPrerequs
<br />  SectionIn RO ;make sure nothing can deselect it
<br /> $(If} ${SectionIsPartiallySelected} ${ProgramsSectionGroup}
<br />     ${</code>OrIf} ${SectionIsSelected} ${ProgramsSectionGroup}
<br />    ;Install postrequs here, this is only run if at least one selection in the group is made
<br />  ${EndIf}
<br />&gt;SectionEnd
<br /><br />SectionGroup"Programs" ProgramsSectionGroup
<br />  Section"Program 1" Program1
<br />    InstallStuffHere
<br />  SectionEnd
<br />  Section"Program 2" Program2
<br />    InstallStuffHere
<br />  SectionEnd
<br />  Section"Program 2" Program2
<br />    InstallStuffHere
<br />  SectionEnd
<br />SectionGroupEnd
<br /><br />Section"-Programs Postrequs" ProgramsPostrequs
<br />  SectionIn RO ;make sure nothing can deselect it
<br /> $(If} ${SectionIsPartiallySelected} ${ProgramsSectionGroup}
<br />     ${OrIf} ${SectionIsSelected} ${ProgramsSectionGroup}
<br />    ;Install postrequs here, this is only run if at least one selection in the group is made
<br />  ${EndIf}
<br /><br />&gt;SectionEnd 
<br />&gt;

</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tonst</span><br />
      <span class="post-time small text-muted">6th November 2008 11:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, this seems to be doing the job :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
