<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Pre-compressing data files" />

  <title>Pre-compressing data files - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Pre-compressing data files</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=290227">Pre-compressing data files</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">badger101101</span><br />
      <span class="post-time small text-muted">14th April 2008 21:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Pre-compressing data files</strong><br />
      This has been asked previously by someone else, but there was no definitive answer. So I'll ask in a slightly different context.<br />
      <br />
      We currently have a Linux web server configured to generate NSIS installers on-the-fly when someone purchases our software online. The problem we have is that we "stamp" a unique serial number on the software's executable before it gets packaged into an installer, which means the end-user has to wait an uncomfortably long time while makensis compresses everything. Does makensis currently have a way of utilizing pre-compressed files?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">14th April 2008 22:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Pre-compressing data files</strong><br />
      At design time:<br />
      1) Create and compile an installer with your compression mode of choice with all files you want pre-compressed and generate the installer exe(we call Premade.exe)<br />
      2) Create the main installer script which will:<br />
      a)Extract the serial stamped EXE to its destination<br />
      b)Then use the <font face="courier new">SetCompress off</font> command.<br />
      c)Use File command to extract and run the Premade.exe<br />
      <br />
      By using the SetCompress off command, the precompressed Premade.exe will be included in the final main installer, but it will not be compressed, and thus the time to build the final installer will be much faster. So your web server will ahve your main isntaller *.nsi, a Premade.exe, and you will generate your serial stamped application *.exe on the fly.<br />
      <br />
      On demand at user's request:<br />
      1) Compile the main installer script which will compress the serial stamped exe, and also package the Premade.exe, but it will not be compressed because of the SetCompress command(since the Premade.exe was created with a compression level of your choice, trying to compress it again would have little gain).<br />
      <br />
      Hope this is what you need.<br />
      <br />
      FYI, during testing I set the "SetCompress off" command in all of my scripts because I can compile extremely quickly that way.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">badger101101</span><br />
      <span class="post-time small text-muted">14th April 2008 23:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the suggestion. That should actually work out nicely.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">99999999</span><br />
      <span class="post-time small text-muted">15th April 2008 03:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are talking about a topic which I had originally brought up (well I know I brought it up too.)<br />
      <br />
      This was only 1/2 of what I needed, unfortunately. I have been also looking for a way of moving away from the single .exe file installer, and moving to single installer executable which installs packages which are downloaded to the user's machine, and has customization options in the form of scripting in each of the packages.<br />
      <br />
      That turned out to be a much taller order than my original suspicions, and will unfortunately take me away from NSIS all together, for our package installer.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
