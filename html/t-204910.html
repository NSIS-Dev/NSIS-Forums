<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="lzma compression no worky?" />

  <title>lzma compression no worky? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">lzma compression no worky?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=204910">lzma compression no worky?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">14th January 2005 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>lzma compression no worky?</strong><br />
      I've got an installer I've been making recently that uses lzma compression. Only recently every time I try to make said installer I get the following result from makensis trying to build the script...<br />
      <br />
      Error: deflateToFile: deflate() failed(-4 input/output error) Error - aborting creation process<br />
      <br />
      Wha happen?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">17th January 2005 20:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No thoughts? Anyone? I'm curious because this problem is fairly important for me.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">17th January 2005 23:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">out of space on the drive that contains the temp dir?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">18th January 2005 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Doubt it but not a bad guess. I've got about 2GB worth of free space on the drive I'm using.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th January 2005 18:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There was a problem with clzma.cpp that caused it to return LZMA_IO_ERROR (the error you're seeing) instead of LZMA_THREAD_ERROR. I've attached the new fixed version. If you have a compiler, please recompile with it and let me know if the error is still LZMA_IO_ERROR.<br />
      <br />
      Now, time for some details. Which version of NSIS are you using? Have you compiled makensis.exe on your own? Does it happen only with that specific installer or with others too? Do you get a similar error with bzip2 or zlib compression?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">18th January 2005 21:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Compiled it. Tried it. Works. You're the King kichik. In responses to your questions...<br />
      <br />
      -The version I'm using is daily snapshot 2.04 build 22. I believe I installed it on January 6th.<br />
      <br />
      -Never compile makensis except for testing the file you attached. I usually just run the daily snapshot installer.<br />
      <br />
      -I haven't tried many other installers with it. I don't have any other installers I can test with. The only minor tests I've done is to eliminate all the files except for license files to be included in the installer so there's only script code and that works fine.<br />
      <br />
      -The problem only occurs with lzma. bzip2 and zlib seem to work fine, they've never failed for me so I've always been happy to have them as alternatives.<br />
      <br />
      Once again kichik thanks very much! If you need any more details I am at your disposal.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th January 2005 19:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well... Hmm... It wasn't supposed to fix it. Recompiling probably just hid the problem. Does the problem still go away if you recompile with the old version of clzma.cpp? You can test it with the examples that come with NSIS. makensis.nsi uses lzma too and contains more than one file. It should be a good example.<br />
      <br />
      BTW, Build 22 is 2.04 :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th January 2005 20:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Heh, seems I've been updating build numbers for nothing. It's not even used if it's not the same major, minor and revision version. It will be zero for 2.05 :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">21st January 2005 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        <b>Well... Hmm... It wasn't supposed to fix it. Recompiling probably just hid the problem. Does the problem still go away if you recompile with the old version of clzma.cpp? You can test it with the examples that come with NSIS. makensis.nsi uses lzma too and contains more than one file. It should be a good example.<br />
        <br />
        BTW, Build 22 is 2.04 :)</b>
      </blockquote>Conveniently rebuilding using the non modified clzma.cpp does work as well.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">21st January 2005 20:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's weird... Does the original makensis.exe work now too?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">21st January 2005 22:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It appears to be working off and on now with the original now. I don't know what to say. So far I've had more luck using the rebuilt source.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">21st January 2005 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe there really is an IO error. Does it happen on other computers?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">21st January 2005 23:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll be trying that next week, we'll see. Thanks for all your help kichik.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">27th January 2005 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Seems to be working fine on other machines. Could be the error was valid. Anyways I'm happy I've got some alternatives if anything goes wrong again. Thanks for your help kichik.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">27th January 2005 20:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If it doesn't happen on other machines, it might be the memory - lzma uses a lot of it. Try testing your memory with memtest86.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">2nd February 2005 03:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So I open up my work computer to take a look that everythings working properly and it turns out some of the capacitors on the motherboard are starting to melt. That's the best way I can think of to describe it. There is some sort of substance being emitted from the capacitors.<br />
      <br />
      Anyways after discovering that I switched to a new (and conveniently faster) machine and am back making installers with good old lzma compression. Just like the good times again. I don't think memory was the problem, likely it was some kind of issue with the motherboard.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd February 2005 18:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Right, melted capacitors are a no-go with lzma. I'll have to remember that :)<br />
      <br />
      Congratulations on your new computer :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">HGOwen</span><br />
      <span class="post-time small text-muted">5th February 2005 10:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The capacitors havent melted.<br />
      <br />
      Theyre cheapo capacitors from Taiwan and use a Water based Electrotyte.<br />
      <br />
      The Electrotyte is incomplete, and thus they release Hydrogen in use. This makes them bulge and eventually pop.<br />
      <br />
      EDIT: Spelling</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">7th February 2005 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the exaplanation HG, that's pretty much what I saw.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">peterob</span><br />
      <span class="post-time small text-muted">8th February 2005 08:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Off-topic - dodgy caps<br />
      <br />
      Replace the caps and the board will work perfectly again. I've recovered upwards of 50 boards that way.<br />
      <br />
      The caps that go, in my experience, are usually the 6.3V, 1000 microfarad ones, those that haven't popped will in time.<br />
      <br />
      You've got nothing to lose, anyway.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">8th February 2005 17:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's true but I ain't no electrical engineer and the boards not mine, it's my companies. It's a good idea for sure but I don't know if it'll happen. Thanks for the idea though.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
