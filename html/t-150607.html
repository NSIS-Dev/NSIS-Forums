<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problem with LANGDLL" />

  <title>Problem with LANGDLL - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problem with LANGDLL</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150607">Problem with LANGDLL</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Konrad</span><br />
      <span class="post-time small text-muted">27th September 2003 12:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problem with LANGDLL</strong><br />
      &nbsp; I use the following macros in my NSIS script:<br />
      <br /></p>
      <pre>
<code>
"WinCD"
<br /><br />&gt;;-------------------------------
<br />;Language Settings
<br /><br />&gt;!define MUI_LANGDLL_REGISTRY_ROOT "HKLM"
<br />&gt;!define MUI_LANGDLL_REGISTRY_KEY "Software\${FOLDERNAME}"
<br />&gt;!define MUI_LANGDLL_REGISTRY_VALUENAME "Installer Language"
<br /><br />&gt;;always show language selection dialog
<br />&gt;!define MUI_LANGDLL_ALWAYSSHOW 
<br />&gt;
</code>
</pre>But unfortunately it also asks for the language if I start the uninstaller, because it doesn't even store the selected value in the registry. In other NSIS versions it worked without problems.<br />
      <br />
      Please help.<br />
      Thanks Konrad
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">27th September 2003 12:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It is doing what you have told it to do, that is what MUI_LANGDLL_ALWAYSSHOW is supposed to do. From the MUI docs:<br />
      <br /></p>

      <blockquote>
        <b>MUI_LANGDLL_ALWAYSSHOW</b><br />
        Always show the language selection dialog, <i>even if a language has been stored in the registry</i>. The language stored in the registry will be selected by default.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Konrad</span><br />
      <span class="post-time small text-muted">27th September 2003 12:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But in older versions this only means, if I start a new installer then it displays the language selection dialog. In the uninstaller it took always the language of the installer, because it makes no sense running the uninstaller in another language than the installer.<br />
      <br />
      How can I accomplish that behaviour with the new version?<br />
      Konrad</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th September 2003 23:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Works fine for me.<br />
      <br />
      The language is stored after the installation has been completed, so a wrong language choice won't give any problems.<br />
      <br />
      Therefore, you have to complete the installation before the key will be written.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Konrad</span><br />
      <span class="post-time small text-muted">8th October 2003 17:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Found the problem</strong><br />
      &nbsp; As I moved the installer language setting to the beginning of the script as in your example it works.<br />
      You should change that in you readme, because there the setting made after the pages. For me that doesn't work. The installer doesn't create a language setting key in the registry. It only works if you define it before the pages.<br />
      <br />
      regards<br />
      Konrad</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">8th October 2003 18:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's not true. It should only be before MUI_LANGDLL_DISPLAY.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Konrad</span><br />
      <span class="post-time small text-muted">8th October 2003 18:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But in my script it is that way I told you:<br />
      As soon as I move the language setting after the pages section, it doesn't store the value in the registry.<br />
      I also tried to define MUI_ICON after the pages section but then the compiler says, that MUI_ICON is already defined. Moving MUI_ICON above the pages section als fixes that problem.<br />
      <br />
      Perhaps I can send you the NSIS-file that you can check it out for yourself. Because I don't want to post it in the forum, please send me your e-mail address.<br />
      <br />
      Regards<br />
      Konrad</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">8th October 2003 18:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm sorry, I misunderstood. It's indeed right that the LangDLL registry settings should be before the instfiles page. I'll fix that in the Readme.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>