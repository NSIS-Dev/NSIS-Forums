<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Add this to 1.99?" />

  <title>Add this to 1.99? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Add this to 1.99?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=86763">Add this to 1.99?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LIGHTNING UK!</span><br />
      <span class="post-time small text-muted">5th May 2002 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Add this to 1.99?</strong><br />
      Hi,<br />
      <br />
      Any chance of getting a couple of bits added to the code in the next version?<br />
      <br />
      Here is what I have in mind:<br />
      <br />
      The browse dialog box is the old style, even on the newer os's. This means, amongst other things, that you dont get the 'right click' explorer type context menu (which a lot of people like). Can you change the following:<br />
      <br />
      bi.ulFlags = BIF_RETURNONLYFSDIRS;<br />
      to<br />
      bi.ulFlags = BIF_RETURNONLYFSDIRS | BIF_VALIDATE | IF_NEWDIALOGSTYLE;<br />
      <br />
      The validation doesnt bit doesnt work properly for some reason, even with that flag set, so it is then necessary to added the following to the call back function:<br />
      <br />
      ============<br />
      <br />
      else if (uMsg==BFFM_SELCHANGED)<br />
      {<br />
      TCHAR szDir[MAX_PATH];<br />
      if(!SHGetPathFromIDList((LPITEMIDLIST) lParam ,szDir))<br />
      {<br />
      // Disable the OK button if the currently selected item isnt a valid path<br />
      SendMessage(hwnd, BFFM_ENABLEOK, 0, FALSE);<br />
      }<br />
      }<br />
      <br />
      ============<br />
      <br />
      Thanks - if you do it ;-)<br />
      <br />
      P.S, I think the xp support should be ON by default. For the sake of 1k, its more hastle than its worth to leave it off and make us all change it and compile the code ourselves.<br />
      I also find it strange that when you select a destination directory, it automatically appends the existing path (final directory) to it. Im sure no other program (or at least not many) work in this way.<br />
      <br />
      Just my 2p worth :-)<br />
      <br />
      Keep up the great work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SmartyMan</span><br />
      <span class="post-time small text-muted">7th May 2002 23:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Add this to 1.99?</strong><br /></p>

      <blockquote>
        <i>Originally posted by LIGHTNING UK!</i><br />
        <b>I also find it strange that when you select a destination directory, it automatically appends the existing path (final directory) to it. Im sure no other program (or at least not many) work in this way.<br /></b>
      </blockquote>I like this feature, because that what I always have to do manually when installing software (change the path but keep the Product name as folder)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">justin</span><br />
      <span class="post-time small text-muted">14th May 2002 07:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Add this to 1.99?</strong><br /></p>

      <blockquote>
        <i>Originally posted by LIGHTNING UK!</i><br />
        I also find it strange that when you select a destination directory, it automatically appends the existing path (final directory) to it. Im sure no other program (or at least not many) work in this way.
      </blockquote>From makensis.htm (under InstallDir):<br />

      <blockquote>
        Sets the default installation directory is. See the variables section for variables that can be used to make this string (especially $PROGRAMFILES). Note that the part of this string following the last \ will be used if the user selects 'browse', and may be appended back on to the string at install time (to disable this, end the directory with a \ (which will require the entire parameter to be enclosed with quotes)). If this doesn't make any sense, play around with the browse button a bit.
      </blockquote>-Justin
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LIGHTNING UK!</span><br />
      <span class="post-time small text-muted">14th May 2002 07:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Justin,<br />
      <br />
      It's ok, I just commented out the bit of code that does the appending.<br />
      <br />
      Hows about my other ideas though? Any chance you can put them in the next version?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sdbarker</span><br />
      <span class="post-time small text-muted">14th May 2002 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Add this to 1.99?</strong><br /></p>

      <blockquote>
        <i>Originally posted by LIGHTNING UK!</i><br />
        <b>P.S, I think the xp support should be ON by default. For the sake of 1k, its more hastle than its worth to leave it off and make us all change it and compile the code ourselves.<br /></b>
      </blockquote>I disagree. I personally would have to recompile to <i>disable</i> XP support. Granted I generally re-compile anyway, but that 1k is precious to me. :)<br />
      <br />
      -Scott
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zaraza</span><br />
      <span class="post-time small text-muted">14th May 2002 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Can't we all get along?</strong><br />
      Maybe those of us without VC++ can get an alternate compiled download, e.g. NSIS 1.98 XP Edition? :D<br />
      <br />
      When doing an install for a 20MB app I will gladly live with an extra 1KB.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sdbarker</span><br />
      <span class="post-time small text-muted">14th May 2002 18:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But, when doing an install for &lt; 100k app, I'd rather not have that extra 1k and help keep it sub-100.<br />
      <br />
      -Scott</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">14th May 2002 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Can't we all get along?</strong><br /></p>

      <blockquote>
        <i>Originally posted by Zaraza</i><br />
        <b>Maybe those of us without VC++ can get an alternate compiled download, e.g. NSIS 1.98 XP Edition? :D<br />
        <br />
        When doing an install for a 20MB app I will gladly live with an extra 1KB.</b>
      </blockquote>I am currently working on a NSIS mod that will enable you to add XP support on script compile time with no need of VC++. A version that works only on NT is already available. If you want I will send it to you.<br />
      <br />
      KiCHiK
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LIGHTNING UK!</span><br />
      <span class="post-time small text-muted">14th May 2002 19:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1k isnt even 1k! It will still probably occupy more than that due to the cluster size on the drive you are using. I dont even really see the need for an installer is the program/files you are installing are &lt; 100k....you might as well just write a batch file. No end user would care about 1k, even on the slowest modems it wouldnt take anywhere near a second to download. Now if you had 100k medium and with the XP support it came out to 101k then I could understand but otherwise, whats the big deal!!!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sdbarker</span><br />
      <span class="post-time small text-muted">14th May 2002 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But it takes UP 1k on disk, at least, yes because of cluster size.<br />
      <br />
      The need is to not have the useless bloat in there. 1k of bloat is still bloat.<br />
      <br />
      I know it would take less than a second.<br />
      <br />
      Have you polled all of the end users to find out if they would care or not?<br />
      <br />
      The big deal is that it's the principle of the thing. That 1k is not needed. That's why I recompile NSIS in the first place, to remove support for all of the functions that I don't need. Part of the beauty behind this piece of software is how exceptionally advanced it is for it's size. I don't wish to compromise that.<br />
      <br />
      -Scott</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
