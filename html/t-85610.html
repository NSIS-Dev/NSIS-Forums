<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="LicenseData x 2" />

  <title>LicenseData x 2 - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">LicenseData x 2</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=85610">LicenseData x 2</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cyric</span><br />
      <span class="post-time small text-muted">23rd April 2002 00:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>LicenseData x 2</strong><br />
      Hey all :) Our legal department just finished with the license agreement and its huge :( The .txt file is about 47k which is over the 32k limit for the LicenseData attribute.<br />
      <br />
      The reason the license is so big is because the project is a joint venture between ourselves and another company, so there is basically 2 license agreements in the one .txt file.<br />
      <br />
      Is there anyway I can either: -<br />
      a) Use a .txt file over 32k<br />
      b) Display the two agreements seperately<br />
      c) Any other suggestions? Have read about Install Options, is<br />
      that any use to me?<br />
      <br />
      Thanks everybody :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mmullikin</span><br />
      <span class="post-time small text-muted">23rd April 2002 02:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sack the lawyers and start over...??? :D :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cyric</span><br />
      <span class="post-time small text-muted">23rd April 2002 04:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah thats #($*ing helpful :mad: Anybody got any 'practical' solutions?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">veekee</span><br />
      <span class="post-time small text-muted">23rd April 2002 06:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you could develop your own plugin that will display the license file over 32kb use use it instead of normal license window !:D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cyric</span><br />
      <span class="post-time small text-muted">23rd April 2002 06:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">no can do, my c isnt good enough :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pomflain</span><br />
      <span class="post-time small text-muted">23rd April 2002 06:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">From script.cpp starting with line 551<br />
      <br />
      case TOK_LICENSEDATA:<br />
      if (build_header.licensedata_ptr != -1)<br />
      {<br />
      warning("LicenseData: specified multiple times, wasting space (%s:%d)",curfilename,linecnt);<br />
      }<br />
      #ifdef NSIS_CONFIG_SILENT_SUPPORT<br />
      if (build_header.common.silent_install)<br />
      {<br />
      warning("LicenseData: SilentInstall enabled, wasting space (%s:%d)",curfilename,linecnt);<br />
      }<br />
      #endif<br />
      {<br />
      char data[32768];<br />
      FILE *fp;<br />
      int datalen;<br />
      fp=fopen(line.gettoken_str(1),"rb");<br />
      if (!fp)<br />
      {<br />
      ERROR_MSG("LicenseData: open failed \"%s\"\n",line.gettoken_str(1));<br />
      PRINTHELP()<br />
      }<br />
      datalen=fread(data,1,32767,fp);<br />
      if (!feof(fp))<br />
      {<br />
      ERROR_MSG("LicenseData: license must be &lt; 32 kilobytes.\n");<br />
      fclose(fp);<br />
      return PS_ERROR;<br />
      }<br />
      fclose(fp);<br />
      data[datalen]=0;<br />
      build_header.licensedata_ptr=add_string_main(data,0);<br />
      SCRIPT_MSG("LicenseData: \"%s\" \n",line.gettoken_str(1));<br />
      }<br />
      return make_sure_not_in_secorfunc(line.gettoken_str(0));<br />
      <br />
      <br />
      <br />
      <br />
      <br />
      Change 32768 to whatever size you want and recompile the source. I think that's all you'd need to change.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pomflain</span><br />
      <span class="post-time small text-muted">23rd April 2002 06:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh and note that in the fread line...<br />
      <br />
      datalen=fread(data,1,32767,fp);<br />
      <br />
      You should make that datalen=fread(data,1,(YOUR_SIZE - 1),fp);</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rainwater</span><br />
      <span class="post-time small text-muted">23rd April 2002 07:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As far as I know, you can't use that solution because you are limited to 32k in the textbox.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">justin</span><br />
      <span class="post-time small text-muted">23rd April 2002 19:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could use installoptions to display the second and/or third pages...<br />
      <br />
      -Justin</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cyric</span><br />
      <span class="post-time small text-muted">23rd April 2002 22:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">how would i go about that? the textfield is only for input and the label isnt big enough and doesnt scroll :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SmartyMan</span><br />
      <span class="post-time small text-muted">23rd April 2002 23:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by rainwater</i><br />
        <b>As far as I know, you can't use that solution because you are limited to 32k in the textbox.</b>
      </blockquote>Thats right (AFAIK).<br />
      I would prefer NSIS using the RichEditCtrl - not only because there is no size limit but for things like making URLs look like those (blue and underlined, mouse becomes hand when upon the link).<br />
      <br />
      For the "installer size maniacs": both the EditCtrl and the RichEditCtrl are used directly from windows, so using .rtf would not increase the size of the installers.<br />
      <br />
      Compatibility to existing .nsi projects is also given, since the RichEditCtrl can of cause load .txt files.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cyric</span><br />
      <span class="post-time small text-muted">24th April 2002 00:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well SmartyMan it is opensource so do you think you could knock something together?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">24th April 2002 10:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Another idea, not the nice solution of putting it in the lisense textbox but it works already without modifications:<br />
      <br />
      create an exe that displays the thing nicely. Then execwait this exe and check the return code: 0 if not accepted and 1 if accepted...<br />
      <br />
      Just an idea...<br />
      <br />
      -Hendri.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">24th April 2002 21:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">A rich text box would be a very nice feature :) Maybe for 2.0</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SmartyMan</span><br />
      <span class="post-time small text-muted">24th April 2002 23:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Cyric</i><br />
        <b>Well SmartyMan it is opensource so do you think you could knock something together?</b>
      </blockquote>...and do all the work again with the next update?<br />
      No way.<br />
      I would eventually work on these sources, if there where a guarantee that my workwill be taken over in the next official release.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mmullikin</span><br />
      <span class="post-time small text-muted">25th April 2002 00:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Another option would be to NOT have the license info in the installer. Instead display the license agreement in an opening dialog of the app. User has to agree to it or exit. Since the license info is obviously important to the company (47k worth of important!) they could also display it in the About dialog or something.<br />
      <br />
      Just a thought.<br />
      <br />
      -mmullikin<br />
      <br />
      :( Sorry about the "sack the lawyers" line in my first reply - I was just trying to bring a little levity to an otherwise bad situation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">gombok</span><br />
      <span class="post-time small text-muted">29th April 2002 19:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>bad idea</strong><br />
      who reads a license agreement bigger than 32k ??????</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">30th April 2002 08:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Gombok,<br />
      <br />
      reading is up to the user! For legal reasons, you have to display all of the agreement the user is about to sign with or without reading!<br />
      <br />
      -Hendri.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pomflain</span><br />
      <span class="post-time small text-muted">2nd May 2002 20:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Nope.</strong><br /></p>

      <blockquote>
        <i>Originally posted by rainwater</i><br />
        <b>As far as I know, you can't use that solution because you are limited to 32k in the textbox.</b>
      </blockquote>That's only for user input, you can throw just about as much data as you want into the box in the program. The problem I was running into then was running out of stack space, so I changed the compiler's settings to reserve 4 mb of virtual memory and 2 mb of physical memory for stack space. I then was able to use a license data file of 913 kb without any problems. Sure it's quite excessive as to the memory allocation, but it does allow you to use about as large a license file as you want.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
