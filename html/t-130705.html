<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="InstallOptions and &quot;State&quot; value" />

  <title>InstallOptions and "State" value - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">InstallOptions and "State" value</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=130705">InstallOptions and "State" value</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">2nd April 2003 20:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>InstallOptions and "State" value</strong><br />
      I have this code:<br /></p>
      <pre>
<code><br />Function "Task"<br />!insertmacro MUI_HEADER_TEXT "Task" "Some Task for ${MUI_PRODUCT}"<br />!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS "${ResDir}\task.ini" "task.ini"<br />File /oname=$PLUGINSDIR\1e.ico "${ResDir}\1e.ico"<br />File /oname=$PLUGINSDIR\ico1.ico "${ResDir}\ico1.ico"<br />File /oname=$PLUGINSDIR\ico2.ico "${ResDir}\ico2.ico"<br />File /oname=$PLUGINSDIR\ico3.ico "${ResDir}\ico3.ico"<br />WriteIniStr $PLUGINSDIR\task.ini "Field 6" Text $PLUGINSDIR\1e.ico<br />WriteIniStr $PLUGINSDIR\task.ini "Field 7" Text $PLUGINSDIR\ico1.ico<br />WriteIniStr $PLUGINSDIR\task.ini "Field 8" Text $PLUGINSDIR\ico2.ico<br />WriteIniStr $PLUGINSDIR\task.ini "Field 9" Text $PLUGINSDIR\ico3.ico<br />!insertmacro MUI_INSTALLOPTIONS_INITDIALOG "task.ini"<br />!insertmacro MUI_INSTALLOPTIONS_SHOW<br />FunctionEnd<br /></code>
</pre><br />
      <br />
      I have some checkbox around. If I select some of them the State<br />
      goes to "1". If I click to the new page and then return to<br />
      the prev. one the checkbox isn't check.<br />
      how to make the checkbox still check?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">2nd April 2003 20:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Extract the INI file prior to the function, in .onInit for example. In this specific function you are always overwriting the INI file with the user's selection with the original INI file.<br />
      <br />
      Also extract the icons and write to the INI in the same place instead of in that function.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">2nd April 2003 20:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks KichiK it works :up:<br />
      But in StartMenu Page I have the same problem.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">2nd April 2003 20:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Attach the code.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">2nd April 2003 21:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here it is. It's a little big</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd April 2003 12:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please upgrade to 2.0b3 and if after all required changes it still doesn't work attach the new script (thought you are using &lt;b3 because of modern2, ignore this).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd April 2003 14:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I had no problem with the start menu page using your script. The only problem I had was when checking the check box but that's because of your function so I guess it's on purpose.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">3rd April 2003 21:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK!<br />
      <br />
      Yes I'm using the modern2.exe because I like<br />
      the component's description dialog.<br />
      <br />
      Let me try it again.<br />
      <br />
      Thanks</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
