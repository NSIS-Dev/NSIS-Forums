<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="3.0 vs 2.0 (Winamp)" />

  <title>3.0 vs 2.0 (Winamp) - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">3.0 vs 2.0 (Winamp)</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=98492">3.0 vs 2.0 (Winamp)</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">11th August 2002 23:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>3.0 vs 2.0 (Winamp)</strong><br />
      greatWho pointed me to a problem in his <a href="http://forums.winamp.com/showthread.php?s=&amp;postid=650273#post650273" target="_blank">post</a>. winamp plugin authors that want to support both, the old and the new versions of winamp will have to face a problem. winamp 3.0 has a different directory structure and different way to save its settings (ini-files).<br />
      <br />
      i started writing a function that checks for the installed version of winamp (none, 2.x only, 3.x only, both). but i figured that this doesn't go far enough. even if i can determine the version installed, i still have to blow my code with two various ways to setup the plugin properly.<br />
      <br />
      winamp 2 saves its settings in winamp.ini and the plugins in winamp\plugins<br />
      <br />
      winamp 3 saves its settings in studio.ini and the plugins (called components) in winamp\wacs\data<br />
      <br />
      although i can't figure out a way to avoid two different ways of setup (in one installer) to deal with the ini-files, it would help to get an outdir variable for plugin-directories. i remember older versions of nsis had a variable called $WAVSDIR (or similiar, can't really remember) to adress the plugin directory of winamp. it would be nice to see a feature in future versions of nsis to get back something like this. this should work with both versions of winamp.<br />
      <br />
      ideas? let us know!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">liquidmotion</span><br />
      <span class="post-time small text-muted">12th August 2002 04:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">correct me if i'm wrong, but wouldn't the problem lie in that winamp3 uses differently structured "components" rather than "plugins"?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 09:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't have to split your code. Just create generic functions such as GetPluginsDir that will return the correct plug-ins dir without letting the scripter worry about the version of Winamp.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">12th August 2002 09:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ah, thats nice (i love you kichik). is there a similiar way for the ini-file? the studio.ini of winamp still has the the structure as the old winamp.ini, although not all commands are supported. but it is possible to widely configure AVS through that .ini, don't know about other plugins.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 09:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What you need is a function that returs the filename of the INI to edit. BTW, I just want to make sure you have noticed that winamp.exe has version info in it so you can use GetDLLVersion to get Winamp's version.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">12th August 2002 12:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">the problem might be, that winamp 2 and 3 have different registry-entries and directories. so one still has to query the registry to find that out (i think its the safest way). the getversion would be unnecessary then.<br />
      <br />
      i think i'll find a clever function to accomplish the problem. will keep you updated.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">12th August 2002 12:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i was wondering if it is possible to label the buttons of the messagebox. in the documentation i found MB_DEFBUTTON1, but i don't know if this helps solving my problem, nor how to use it. i want to buttons for my messagebox, let's name the "button 1" and "button 2" for the example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As far as I know it isn't possible to change the buttons captions with just the MessageBox API call.<br />
      <br />
      Let me know when you finish writing these function and I will add them to functions.htm.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">EL-VIS2</span><br />
      <span class="post-time small text-muted">12th August 2002 14:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Testing for both version and giving choice</strong><br />
      For NSIS v1.98<br />
      This tests for winamp2 and winamp3 and gives choice if both version are found. Don't know if perfect yet but I've tested it several times and it seems to work correct...<br />
      <br />
      edited by KiCHiK: script attached below :down:<br />
      Please attach large scripts next time to keep the forum tidy.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">12th August 2002 15:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Testing for both version and giving choice</strong><br /></p>

      <blockquote>
        <i>Originally posted by EL-VIS2</i><br />
        <b>For NSISW 1.4</b>
      </blockquote>MakeNSISW is just the Window Wrapper, this is not the NSIS version.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">EL-VIS2</span><br />
      <span class="post-time small text-muted">12th August 2002 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>NSIS version</strong><br />
      Sorry..... NSIS v1.98</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">veekee</span><br />
      <span class="post-time small text-muted">12th August 2002 18:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">For those who noticed that Winamp was using XML files to store config info :<br />
      as a member of the french community, i created a little script that will parch an XML file (here, i had to change language used from english to french ;) ) !<br />
      I know that the code s***, but this works ;) !<br />
      <br />
      How to use it :<br />
      <br />
      Push "$INSTDIR\studio.xnf"<br />
      Push '&lt;entry name="Language" value="'<br />
      Push 'FR" /&gt;'<br />
      Push '&lt;section name="{3CBD4483-DC44-11D3-B608-000086340885}"&gt;'<br />
      Call XML_Replace<br />
      <br />
      edited by KiCHiK: script attached below :down:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 22:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">EL-VIS2's code attached.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 22:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">veekee's code attached.<br />
      Same goes here, please attach large scripts.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">veekee</span><br />
      <span class="post-time small text-muted">12th August 2002 22:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>glups !</strong><br />
      really sorry about that, Mr. Moderator :cry: :cry: !</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th August 2002 23:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Mr. Moderator forgives :D<br />
      Just trying to keep the forum readable and easy to navigate.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">EL-VIS2</span><br />
      <span class="post-time small text-muted">13th August 2002 10:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Full Basic Script</strong><br />
      Here's my basic AVS-NSIS script:<br />
      <br />
      - checking for winamp verions and giving choice if both are found<br />
      - verifying install path and giving warning if no winamp is found<br />
      - uninstaller<br />
      - link to uninstall exe<br />
      - running winamp<br />
      <br />
      I did no reg-entries and no ini-changes. If you need to refer to GreatWhos' scripting:<br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=98454" target="_blank">http://forums.winamp.com/showthread....threadid=98454</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">8th October 2002 12:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by killahbite</i><br />
        <b>i was wondering if it is possible to label the buttons of the messagebox. in the documentation i found MB_DEFBUTTON1, but i don't know if this helps solving my problem, nor how to use it. i want to buttons for my messagebox, let's name the "button 1" and "button 2" for the example.</b>
      </blockquote>still an open question or an requested feature :D<br />
      <br />
      i want custome messagebox buttons :up:
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
