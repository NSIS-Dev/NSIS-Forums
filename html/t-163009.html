<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="LMZA feature eta?" />

  <title>LMZA feature eta? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">LMZA feature eta?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=163009">LMZA feature eta?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">3rd January 2004 09:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>LMZA feature eta?</strong><br />
      Hi, I am really dying for the ability to compress each file individually into the archive rather than compile the archive and THEN compress.<br />
      Solid compression requires a temp space large enough for all the decompressed files and for some of us that isnt an option.<br />
      <br />
      It was mentioned to be an easy and planned addition, any chance of it being done soon please? I'd really appreciate it.<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">3rd January 2004 11:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The option is already there. Change it in config.h and recompile.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">3rd January 2004 11:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Do you mean recompile NSIS or recompile the project?<br />
      I cant recompile NSIS because, frankly I dont know how.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd January 2004 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I haven't tested these mak files with the free MS compiler so I'd be glad if someone can.<br />
      <br />
      Follow the instructions in the appendix regarding the free Microsoft compiler:<br />
      <br />
      <a href="http://nsis.sourceforge.net/Docs/AppendixC.html#C.1" target="_blank">http://nsis.sourceforge.net/Docs/AppendixC.html#C.1</a><br />
      <br />
      This page might help too:<br />
      <br />
      <a href="http://www.winprog.org/tutorial/msvc.html" target="_blank">http://www.winprog.org/tutorial/msvc.html</a><br />
      <br />
      Download and extract maks.zip into the Source folder, open a command window, cd to the Source folder and type:</p>
      <pre>
<code>nmake /f makenssi.mak</code>
</pre>BTW,

      <blockquote>
        It was mentioned to be an easy and planned addition, any chance of it being done soon please? I'd really appreciate it.
      </blockquote>I don't recall saying easy ;)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">4th January 2004 10:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I spent several hours trying to make it work.<br />
      It doesnt. The error is in the ' cd ".\exehead" ' line(s)and nothing I did would make it work. I had to run it like this :<br />
      <br />
      c:\program files\microsoft.net\sdk\v1.1\bin\&gt; nmake /f "c:\program files\nsis\source\makenssi.mak"<br />
      <br />
      From any other path even with the path envirinment variable set to both dirs it errored out with something about my f: No idea how my f: got involved - it's never had anything installed to it.<br />
      <br />
      I am more than happy to help you test this but I've spent a long time, I'm frustrated and all I want is something you can do in minutes. Please, just give it to me and I'll help you test this method as much as you like afterward.<br />
      <br />
      :S</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">4th January 2004 11:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you post the exact error messages? Did you install the Platform SDK?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">4th January 2004 11:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">-----<br />
      C:\Program Files\Microsoft.NET\SDK\v1.1\Bin&gt;nmake.exe /f "c:\Program Files\NSIS\<br />
      Source\makenssi.mak"<br />
      <br />
      Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
      Copyright (C) Microsoft Corporation. All rights reserved.<br />
      <br />
      No configuration specified. Defaulting to makenssi - Win32 Release.<br />
      Warning: cannot find "makenssi.dep"<br />
      cd ".\exehead"<br />
      NMAKE : fatal error U1077: 'cd' : return code '0x1'<br />
      Stop.<br />
      <br />
      C:\Program Files\Microsoft.NET\SDK\v1.1\Bin&gt;<br />
      -----<br />
      <br />
      -----<br />
      C:\Program Files\NSIS\Source&gt;"c:\Program Files\Microsoft.NET\SDK\v1.1\Bin\nmake.<br />
      exe" /f makenssi.mak<br />
      <br />
      Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
      Copyright (C) Microsoft Corporation. All rights reserved.<br />
      <br />
      No configuration specified. Defaulting to makenssi - Win32 Release.<br />
      cd ".\exehead"<br />
      nmake / /F ".\exehead-lzma.mak" CFG="exehead_lzma - Wi<br />
      n32 Release"<br />
      <br />
      Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
      Copyright (C) Microsoft Corporation. All rights reserved.<br />
      <br />
      if not exist ".\Release-lzma/" mkdir ".\Release-lzma"<br />
      NMAKE : fatal error U1073: don't know how to make '"f:\microsoft visual studio\m<br />
      icrosoft sdk\include\basetsd.h"'<br />
      Stop.<br />
      NMAKE : fatal error U1077: '"c:\Program Files\Microsoft.NET\SDK\v1.1\Bin\nmake.e<br />
      xe"' : return code '0x2'<br />
      Stop.<br />
      -----<br />
      <br />
      The makenssi.dep is in the "c:\Program Files\NSIS\<br />
      Source\' dir and I've checked my registry for EVERY reference to f: and there's nothing even slightly close to that path.<br />
      <br />
      <br />
      SDK's :<br />
      <br />
      Common Setup Files<br />
      <br />
      Debugging Tools for Windows<br />
      <br />
      Core SDK (Windows Server 2003)<br />
      <br />
      Build environment<br />
      <br />
      Register environment variables<br />
      <br />
      Windows Installer SDK (Version 2.0)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th January 2004 11:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">"f:\microsoft visual studio\microsoft sdk" is where PSDK is installed on my computer. Genius VC decided I want the make files to work only on my computer for some reason... Try the attached make files instead, no f: in them.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">5th January 2004 00:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've installed every sdk I can find and none of them have cl.exe and a dll that it needs. I sourced both of them from vs6 and now the file it wants is 'excpt.h'</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">5th January 2004 12:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok, I got sick of that so I installed vb6.<br />
      Im having problems understanding that macro to register the dlls - I just plain dont get it.<br />
      <br />
      This is the error I get :<br />
      <br />
      C:\Program Files\NSIS\Source\exehead\util.c(490) : error C2065: 'CSIDL_FLAG_CREATE' : undeclared identifier<br />
      C:\Program Files\NSIS\Source\exehead\util.c(506) : error C2065: 'CSIDL_PROGRAM_FILES_COMMON' : undeclared identifier<br />
      C:\Program Files\NSIS\Source\exehead\util.c(510) : error C2065: 'CSIDL_PROGRAM_FILES' : undeclared identifier<br />
      C:\Program Files\NSIS\Source\exehead\util.c(516) : error C2065: 'CSIDL_SYSTEM' : undeclared identifier<br />
      C:\Program Files\NSIS\Source\exehead\util.c(520) : error C2065: 'CSIDL_WINDOWS' : undeclared identifier<br />
      Generating Code...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th January 2004 13:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Get <a href="http://prdownloads.sourceforge.net/nsis/makensis_no_solid.zip?download" target="_blank">makensis_no_solid.zip</a> of RC2.<br />
      <br />
      cl.exe comes with .NET SDK.<br />
      <br />
      Tell VC to use the PSDK header files to avoid compile errors about CSIDL_*.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">5th January 2004 13:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, but its broken.<br />
      neither bzip2 or lzma work but it works flawlessly with zlib.<br />
      <br />
      This is the entire thing. All it needs is to be unzipped to c: and rightclicked.<br />
      <a href="http://myne.customer.netspace.net.au/Dev.zip" target="_blank">http://myne.customer.netspace.net.au/Dev.zip</a><br />
      <br />
      I do appreciate your help on this and I feel bad that I cant even figure it out :S<br />
      <br />
      error :<br />
      !insertmacro: MUI_PAGE_WELCOME<br />
      Error: add_db_data() - compress() failed - -1<br />
      Error in macro MUI_INSTALLOPTIONS_INITDIALOG on macroline 5<br />
      Error in macro MUI_FUNCTION_WELCOMEPAGE on macroline 43<br />
      Error in macro MUI_PAGE_WELCOME on macroline 23<br />
      Error in script "F:\Dev\DC 7.NSI" on line 170 -- aborting creation process</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th January 2004 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fixed, thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">5th January 2004 14:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, it seems to hang on generating uninstaller now :/<br />
      (lzma) bzip works fine</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">5th January 2004 15:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh, Bzip doesnt work. Upon attempting to install it generates a "Error decompressing data, corrupted installer?" ok box and quits.<br />
      <br />
      Btw, in my case the size difference between solid and non solid bzip was less than 1mb. My installer was 501mb in both cases. Thankyou for your continuing help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">myne</span><br />
      <span class="post-time small text-muted">6th January 2004 02:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'd like to thank Kichik for his help and, when all else failed debugging for several hours. It works brilliantly. What more could you want from a dev?<br />
      <br />
      A previous installer that had to be released at 540mb with zlib compiled down to 440mb with lzma and doesnt need any temp space. That is the same size as solid compression. :D<br />
      <br />
      Thankyou thankyou thankyou.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br />
      <span class="post-time small text-muted">7th January 2004 16:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i'm using latest cvs, updated few minutes ago (yes, it works again :D).<br />
      but i'm missing documentation how to enable lzma-compression.<br /></p>

      <blockquote>
        4.8.2.4 SetCompressor<br />
        <b>zlib</b>|bzip2<br />
        This command sets the compression algorithm used to compress files/data in the installer. Options are ZLib or BZip2. ...
      </blockquote>will this work:<br />
      <pre>
<code>SetCompressor lzma</code>
</pre><br />
      and will i also have to reserver files like i have to for bzip2?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th January 2004 16:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes that will work, the documentation will be updated.<br />
      <br />
      If you are using solid compression (by default, solid compression is enabled for BZip2 and LZMA), it's important that files which are being extracted in init- or page functions function are located before other files in the data block, because this will make your installer faster.<br />
      <br />
      If there are File commands in your sections or functions above the init- or page functions, you can reserve files.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
