<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="nsDialogs - (Probably) Newbie questions" />

  <title>nsDialogs - (Probably) Newbie questions - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">nsDialogs - (Probably) Newbie questions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286951">nsDialogs - (Probably) Newbie questions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Lenge</span><br />
      <span class="post-time small text-muted">15th February 2008 16:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>nsDialogs - (Probably) Newbie questions</strong><br />
      Hello world,<br />
      <br />
      I am trying my first steps with MUI2 custom pages using nsDialogs. I googled a lot and followed the introduction at <a href="http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html" target="_blank">http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html</a>, but I couln't find something about...<br />
      <br />
      1.) How to make a radio button (or a checkbox) selected? I figured out that ${NSD_GetState} delivers 0/1 to query the selection, but there seems to be no ${NSD_SetState} to change it.<br />
      <br />
      2.) How to change the text of a label? Like above, there is ${NSD_GetText}, but no ${NSD_SetText}.<br />
      <br />
      3.) How do I group different sets of radio buttons on the same page? By default, all radio buttons I create belong to the same radio group.<br />
      <br />
      4.) Just because I am curious: Is there a documentation of what the "magic number" 1018 means with nsDialogs::Create?<br />
      <br />
      Jens</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">15th February 2008 16:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1. EnableWindow $CheckBox 1 ;or 0 to disable<br />
      <br />
      2. SendMessage $Label ${WM_SETTEXT} 0 "STR:Label Text"<br />
      <br />
      3. not sure, but i guess you have to control this by the OnClick function<br />
      <br />
      4. not sure about the correct terminology, but 1018 is the part of the window, where to place the control (1028 would be the area of the brandingtext)<br />
      <br />
      only a guess, but i take it there will be macros following the current syntax to replace EnableWindow and SendMessage in future versions</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Lenge</span><br />
      <span class="post-time small text-muted">15th February 2008 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        1. EnableWindow $CheckBox 1 ;or 0 to disable
      </blockquote>Does not work. This ones makes a control enabled/disabled, but I try to make a radio button (or checkbox) selected/unselected. Or am I doing something wrong?

      <blockquote>
        2. SendMessage $Label ${WM_SETTEXT} 0 "STR:Label Text"
      </blockquote>Works great, thanks!
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">15th February 2008 20:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) SendMessage $hControl ${BM_SETCHECK} ${BST_CHECKED} 0<br />
      3) The first button control of the next group of radio buttons must have the WS_GROUP style set.<br />
      4) 1018 is a hidden control on the parent dialog. I think its purpose is to provide a size and location for the child dialog that is created for the custom pages. 1044 is the full dialog.<br />
      <br />
      I don't see any reason to get rid of EnableWindow or SendMessage, they are very useful and easy enough to understand.<br />
      <br />
      Don</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">15th February 2008 20:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by demiller9</i><br />
        <b>I don't see any reason to get rid of EnableWindow or SendMessage, they are very useful and easy enough to understand.</b>
      </blockquote>only and best reason i can think of is continuity/consistency. i thought it's the reason why it's still undocumented.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Lenge</span><br />
      <span class="post-time small text-muted">15th February 2008 22:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by demiller9</i><br />
        1) SendMessage $hControl ${BM_SETCHECK} ${BST_CHECKED} 0
      </blockquote>Works. Thank you!

      <blockquote>
        3) The first button control of the next group of radio buttons must have the WS_GROUP style set.
      </blockquote>Another newbie question: How would I set this style? ${NSD_CreateRadioButton} does not seem to have a parameter for it.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">16th February 2008 00:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried to create a working example of two radio button groups and it seems more difficult than my first reply makes it sound. The WS_GROUP style is not enough to separate the groups, and creating two groupboxes didn't work for me either.<br />
      <br />
      I'll keep looking for this unless some other Windows experts chime in.<br />
      <br />
      Don</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">16th February 2008 00:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<span style="color: #007700">Var</span><span style="color: #0000BB">Dialog
<br /></span><span style="color: #007700">Function</span><span style="color: #0000BB">c
<br />nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Create</span><span style="color: #007700">/</span><span style="color: #0000BB">NOUNLOAD1018
<br />Pop$Dialog
<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">00100</span><span style="color: #007700">%</span><span style="color: #0000BB">12u</span><span style="color: #DD0000">"a"
<br /></span><span style="color: #0000BB">pop</span><span style="color: #007700">$</span><span style="color: #0000BB">0
<br />System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::GetWindowLong(ir0,i-16)i.r1'
<br /></span><span style="color: #0000BB">IntOp</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">|${</span><span style="color: #0000BB">WS_GROUP</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::SetWindowLong(ir0,i-16,ir1)'
<br /><br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">020100</span><span style="color: #007700">%</span><span style="color: #0000BB">12u</span><span style="color: #DD0000">"b"
<br /></span><span style="color: #0000BB">pop</span><span style="color: #007700">$</span><span style="color: #0000BB">0
<br /><br /><br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">040100</span><span style="color: #007700">%</span><span style="color: #0000BB">12u</span><span style="color: #DD0000">"1"
<br /></span><span style="color: #0000BB">pop</span><span style="color: #007700">$</span><span style="color: #0000BB">0
<br />System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::GetWindowLong(ir0,i-16)i.r1'
<br /></span><span style="color: #0000BB">IntOp</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">|${</span><span style="color: #0000BB">WS_GROUP</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::SetWindowLong(ir0,i-16,ir1)'
<br /><br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateRadioButton</span><span style="color: #007700">}</span><span style="color: #0000BB">060100</span><span style="color: #007700">%</span><span style="color: #0000BB">12u</span><span style="color: #DD0000">"2"
<br /></span><span style="color: #0000BB">pop</span><span style="color: #007700">$</span><span style="color: #0000BB">0
<br /><br />nsDialogs</span><span style="color: #007700">::</span><span style="color: #0000BB">Show
<br />FunctionEnd
<br /><br />pagecustomc
<br /></span>

<!-- php buffer end -->
                
                
                
</pre>
      <hr />
      <pre>
        
edit:<br />even 
        PHP Code:
        
                
</pre>
      <hr />
      <pre>
                <code style="white-space:nowrap">
                
                        <!-- php buffer start --></code><span style="color: #000000">
<span style="color: #0000BB">System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::GetWindowLong(ir0,i-16)i.r1'
<br /></span><span style="color: #0000BB">System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'user32::SetWindowLong(ir0,i-16,i$1|${WS_GROUP})'
</span></span>
</pre>seems to work
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">16th February 2008 02:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you Anders for your examples. You showed me what I didn't have in my own tests: the WS_GROUP bit must be set on all radio button groups' first buttons. (I had only put it on the first button of the second group).<br />
      <br />
      Here's the way I would create two sets of radio buttons with the <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=286912" target="_blank">modification</a> I made to nsDialogs.nsh:</p>
      <pre>
<code>Page custom Choices Choices.Leave<br /><br />Function Choices<br />Var /GLOBAL Group1.Button1<br />Var /GLOBAL Group2.Button1<br /><br />  nsDialogs::Create /NOUNLOAD 1018<br />  Pop $0<br /><br />  # Create controls and set defaults<br />  ${NSD_CreateGroupBox}    0u 0u 100% 45% "A set of options"<br />  Pop $0<br /><br />  <font color="red">!define NSD_ADD_STYLE ${WS_GROUP}</font> <br />  <font color="blue">${NSD_CreateRadioButton} 18u 16u 82u 11u "&amp;Do it right"</font> <br />  Pop $Group1.Button1<br />  SendMessage $Group1.Button1 ${BM_SETCHECK} ${BST_CHECKED} 0<br /><br />  <font color="blue">${NSD_CreateRadioButton} 18u 32u 82u 11u "D&amp;o it fast"</font> <br />  Pop $0<br /><br />  ${NSD_CreateGroupBox}    0u 55% 100% 45% "Please choose"<br />  Pop $0<br /><br />  <font color="red">!define NSD_ADD_STYLE ${WS_GROUP}</font> <br />  <font color="blue">${NSD_CreateRadioButton} 18u 100u 82u 11u "&amp;This or"</font> <br />  Pop $Group2.Button1<br /><br />  <font color="blue">${NSD_CreateRadioButton} 18u 116u 82u 11u "T&amp;hat"</font> <br />  Pop $0<br />  SendMessage $0 ${BM_SETCHECK} ${BST_CHECKED} 0<br /><br />  # Show the page.<br />  nsDialogs::Show<br />FunctionEnd<br /><br />Function Choices.Leave<br />  ${NSD_GetState} $Group1.Button1 $Group1<br />  ${NSD_GetState} $Group2.Button1 $Group2<br />FunctionEnd<br /></code>
</pre><br />
      Don
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
