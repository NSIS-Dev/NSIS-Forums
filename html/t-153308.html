<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Disk spanning"><title>Disk spanning - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Disk spanning</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=153308">Disk spanning</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">misha.cn.ua</span><br><span class="post-time small text-muted">20th October 2003 16:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Disk spanning</strong><br>How can I create an installation, which will have two cd`s?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">20th October 2003 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use CopyFiles or a plug-in like ExtractDLL.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">misha.cn.ua</span><br><span class="post-time small text-muted">21st October 2003 06:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok, but does installer copies itself to hdd, or runs from cd? I mean, will it need to read itself during install process?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st October 2003 12:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Copy it to the HD just to make sure.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">treborhudson</span><br><span class="post-time small text-muted">22nd October 2003 21:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">When using CopyFiles, how can one prompt the user for a 2nd disk when CopyFiles has finished?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd October 2003 21:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">A simple message box should do it. After the user clicks OK, check the right disk is in and continue copying if it is. If it isn't, just ask again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">treborhudson</span><br><span class="post-time small text-muted">22nd October 2003 21:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is the standard way to verify the correct disk to check for the existence of a specific file? Or is there a way to check the CD name or something? Will the installer know about CD spin-up times?<br><br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd October 2003 22:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There is no standard way that I know of. I see nothing wrong in verifying by a certain file. Unless Windows does this internally, the installer won't know about CD spin-up times.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">treborhudson</span><br><span class="post-time small text-muted">22nd October 2003 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is there an example of using CopyFiles? Can you do:<br>CopyFiles "path\to\files\*.*" "$INSTDIR\"<br><br>Or do you need to specify one at a time?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd October 2003 22:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can use wildcards, yes. But always use full paths to be sure. You'd probably want to use:<br><br>CopyFiles "$EXEDIR\path\to\files\*.*" $INSTDIR</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">misha.cn.ua</span><br><span class="post-time small text-muted">23rd October 2003 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok, but how can I get a label of a cd?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">23rd October 2003 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=103197&amp;highlight=cd+label" target="_blank">http://forums.winamp.com/showthread....light=cd+label</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">misha.cn.ua</span><br><span class="post-time small text-muted">24th October 2003 05:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">cosmic66</span><br><span class="post-time small text-muted">30th October 2003 12:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Copy it to the HD just to make sure.</b></blockquote>I am having 1 installer that extracts zip files from several<br>CDs (up to 10).<br>When the installer is launched it is copied into memory.<br><br>Will copying the installer file to the HD help in case<br>it is not kept in memory?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th October 2003 12:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>Will copying the installer file to the HD help in case<br>it is not kept in memory?</blockquote>Yes. This way, Windows will always have somewhere to get the data from.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">cosmic66</span><br><span class="post-time small text-muted">30th October 2003 12:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Yes. This way, Windows will always have somewhere to get the data from.</b><hr></blockquote></div><hr>Do I have to take any other steps to point Windows to the<br>location of the installer file on the HD?<br><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th October 2003 12:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, you have to execute it and exit the one executed from the CD-ROM. Send the one on the HD something on the command line telling it that it's no longer on the CD. You'd probably want to tell it what letter the CD is on too, so you can copy stuff from there.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">cosmic66</span><br><span class="post-time small text-muted">30th October 2003 13:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Quote:</p><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th October 2003 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, just execute the file on HD in .onInit (which is called before anything is shown) and kill the first installer afterwards (use Abort from .onInit).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">cosmic66</span><br><span class="post-time small text-muted">30th October 2003 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>Thanks a lot for your help.<br><br>I have now written a small script that does the following:<br>1. If the installer is called without parameters I assume that it<br>was called from the CD-rom.<br>2. The installer is copied to HD<br>3. The installer from the HD is called.<br>4. The original installer is terminated.<br><br>The script is attached to this posting.<br><br>I am not very experienced in writing NSIS scripts and would<br>appreciate any feedback :-)<br><br>Again, thanks a lot for your help.<br><br><br>Barbara</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th October 2003 20:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Seems good. Just don't forget to replace E:\ with $EXEDIR for release.<br><br>There is just a little thing. You have the following at the end of the .onInit function:<br></p><pre>
<code>Push $R0<br>Push $R1<br>Push $R2<br>Push $R9</code>
</pre><br>
        <br>
        There doesn't seem to be any need for that. There is nothing after .onInit that will read those values from the stack.
      </div>
      <hr>

      <div class="footer">
        <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
      </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
      hljs.initHighlightingOnLoad();
      //]]>
      </script>

      <table cellpadding="6" cellspacing="0" border="0" width="100%">
        <tr>
          <td class="alt2">
            <hr>
            <i>Originally posted by kichik</i><br>
            <b>Well, you have to execute it and exit the one executed from the CD-ROM. Send the one on the HD something on the command line telling it that it's no longer on the CD. You'd probably want to tell it what letter the CD is on too, so you can copy stuff from there.</b> Can I make the transition<br>
            from execution of installer from CD-rom to<br>
            execution of installer from HD<br>
            invisible for the user?</td></tr></table></div></div></body></html>