<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Custom Page Install" />

  <title>Custom Page Install - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Custom Page Install</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=146926">Custom Page Install</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">25th August 2003 03:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Custom Page Install</strong><br />
      &nbsp; Is it possible to use custom pages to install stuff?<br />
      <br />
      If you have two radio buttons on a page, if one is seclected it installs one item, or if the other is select it installs a different item.<br />
      <br />
      I only ask as I have tried this but even if one or the other radio button is selected it still installs both items<br />
      <br />
      Can this be solved, if so how?<br />
      <br />
      Also I was hoping to have two cutome pages doing the same thing on each but with the option to install diffeent items<br />
      <br />
      Oh I didn't want to use the components page for this either<br />
      <br />
      Thanks<br />
      <br />
      (Oh this is a little of topic but<br />
      Also how do you use the Attach file option when posting on here?<br />
      But please this isn't my main question as I can soon upload stuff and attach it via link.)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">25th August 2003 11:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In the 'Section' which does the actual installation (i.e. the one that copies the files to the installation folder, etc), check the status of the radio buttons and take appropriate action. In other words, if radio button 1 was selected, install item 1 otherwise install item 2.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">25th August 2003 18:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok I'm still having problems<br />
      <br />
      I've tried to adapt the Install Options script to what I want<br />
      <br />
      but its still not working<br />
      <br />
      I select one or the other and still both of them are installed<br />
      <br />
      I have attached that full script and the basic script,<br />
      <br />
      If someone could take a look and show me where I'm going wrong I would be grateful<br />
      <br />
      -Tony<br />
      <br />
      <a href="http://www.darksaber.freeserve.co.uk/temp/DSUCPbasicscript.zip" target="_blank">Basic Script</a><br />
      <br />
      <a href="http://www.darksaber.freeserve.co.uk/temp/DSUCP16.zip" target="_blank">Full Script</a><br />
      <br />
      On and before you mention it :) I know I should replce the uninstall delet strings with $INSTDIR but it just doesn't delete half the stuff.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">25th August 2003 19:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've had a look at the "Basic" script but I'm not sure what you are trying to do.<br />
      <br />
      Each of the four sections has an empty name, this means that the section will be a hidden one which will always be installed. This is why you do not see any components listed when the components page appears (and why everything gets installed).<br />
      <br />
      If you give each section a name (eg Section "One" sec1) then it will appear in the components page (as "One", "Two", etc) and the user can tick the box next to the component name to select it for installation. So the components page can be used to select any combination of these four sections.<br />
      <br />
      From your earlier message, I assume that the Ion_Cannon_Option and Hangar_Option custom pages have radio buttons and you want to use these in some way to control what gets installed.<br />
      <br />
      Could you explain a bit more about what you want the script to do?<br />
      <br />
      Do you want some sections to always be installed?<br />
      <br />
      If one section is selected, do you want to automatically select another (or disable another)?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">25th August 2003 20:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I didn't really want them in the components page<br />
      <br />
      That's one reason for no names, I saw this in another forum thread, so I might be wrong, more than likely :(<br />
      <br />
      Yes your right about the radio buttons, what I'm trying to do is have a two custom pages, with two options.<br />
      <br />
      1st option I want to install a certain item or items and disable the 2nd option and visa versa<br />
      <br />
      Same goes for the other custom page<br />
      <br />
      So you can only select one option on each page then install the selected items.<br />
      <br />
      hope that makes sence</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">25th August 2003 23:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Anyone? please :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">26th August 2003 00:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To section have a name, and do not appear in the components page, put the "-" before the name. I.e.:<br />
      <br />
      Section "-Any Name"<br />
      <br /></p>

      <blockquote>
        1st option I want to install a certain item or items and disable the 2nd option and visa versa
      </blockquote>Read the State of the Radiobuttons in the two pages. Use the code below:<br />
      <br />
      (When IOPage1.ini is the name of the INI file you are using for the page, Field #1 and #2 are the numbers of the radiobuttons fields, as #1 the first and #2 the second)<br />
      <br />
      <pre>
<code>ReadINIStr$0 "IOPage1.ini" "Field #1" "State"
<br />&gt;StrCmp $0 1 0 Radiobutton2
<br /><br />  # Code want to run when the radiobutton1 was been selected
<br /><br />&gt;Radiobutton2:
<br />&gt;ReadINIStr $0 "IOPage1.ini" "Field #2" "State"
<br />&gt;StrCmp $0 1 0 Radiobutton2End
<br /><br />  # Code want to run when the radiobutton2 was been selected
<br /><br />&gt;Radiobutton2End:
<br /><br />&gt;# Normal Script Codes 
</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">26th August 2003 01:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here is a simple demo script that uses the component page to do what I think you want. The user can select one of two 'Cannon' options and one of two 'Hanger' options.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">26th August 2003 02:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks to both of you for your time and patience :D<br />
      <br />
      Pengyou before I use your script and remove the custom pages<br />
      <br />
      I would like to ask deguix a few questions<br />
      <br />
      1. Do I still need the SectionGetFlags script in the .oninit section? plus do I still need the .onSelChange section?<br />
      <br />
      2. Does the # need to be in front of the field numbers? or is that just refering to the number itself.<br />
      <br />
      I tried your code, it looks like this<br /></p>
      <pre>
<code><br />Section "-Ion"<br />SetDetailsPrint none<br />ReadINIStr $0 "cannons.ini" "Field 1" "State"<br />StrCmp $0 1 0 Radiobutton2<br />SetOutPath "$INSTDIR\blah"<br />File "Ionblue\*.opt"<br />Radiobutton2:<br />ReadINIStr $0 "cannons.ini" "Field 2" "State"<br />StrCmp $0 1 0 Radiobutton2End<br />SetOutPath "$INSTDIR\blah"<br />File "Ionpurple\*.opt"<br />Radiobutton2End:<br />SectionEnd<br /><br />SetOverwrite on<br />Section "-Hangar"<br />SetDetailsPrint none<br />ReadINIStr $0 "hangar.ini" "Field 1" "State"<br />StrCmp $0 1 0 Radiobutton2<br />SetOutPath "$INSTDIR\blah\blah"<br />File "HangarReb\*.opt"<br />Radiobutton2:<br />ReadINIStr $0 "hangar.ini" "Field 2" "State"<br />StrCmp $0 1 0 Radiobutton2End<br />SetOutPath "$INSTDIR\blah\blah"<br />File "HangarImp\*.opt"<br />Radiobutton2End:<br />SectionEnd<br /></code>
</pre><br />
      <br />
      and the info in the ini files<br />
      <br />
      Cannons.ini<br />
      <pre>
<code><br />[Settings]<br />NumFields=2<br /><br />[Field 1]<br />Type=RadioButton<br />Text= Blue Ion Cannons<br />Left=10<br />Right=-10<br />Top=40<br />Bottom=50<br />State=1<br /><br />[Field 2]<br />Type=RadioButton<br />Text= Purple Ion Cannons<br />Left=10<br />Right=-10<br />Top=60<br />Bottom=70<br />State=0<br /></code>
</pre><br />
      <pre>
<code><br />[Settings]<br />NumFields=2<br /><br />[Field 1]<br />Type=RadioButton<br />Text= Rebel<br />Left=10<br />Right=-10<br />Top=40<br />Bottom=50<br />State=1<br /><br />[Field 2]<br />Type=RadioButton<br />Text= Imperial<br />Left=10<br />Right=-10<br />Top=60<br />Bottom=70<br />State=0<br /></code>
</pre><br />
      <br />
      but with either option selected nothing was installed, so I'm just wondering what I'm doing wrong<br />
      <br />
      Again thanks for your time :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">26th August 2003 14:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">TonyDS, Here is a revised demo script for you. Unlike the previous script, one of the five available options is always selected.<br />
      <br />
      I used macros in the new script so it should be easier to make it work with different numbers of options.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TonyDS</span><br />
      <span class="post-time small text-muted">26th August 2003 15:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Whoa thanks so much :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>