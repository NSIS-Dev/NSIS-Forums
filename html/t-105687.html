<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Hide a control?" />

  <title>Hide a control? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Hide a control?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=105687">Hide a control?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 15:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Hide a control?</strong><br />
      &nbsp; is is possible to hide a control?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 18:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nope, not yet.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">not even with sendmessage?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, you have to change the window's style with GetWindowLong and SetWindowLong, or just use the good old ShowWindow :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 19:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i was thinking of the showwindow but was trying to find a way without writing a plugin</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 21:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried creating a plugin but it hide the control. do you think there would be any limitation to using the ShowWindow api to hide a control.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        I tried creating a plugin but it hide the control
      </blockquote>Weren't you trying to hide the control? :weird:<br />
      ShowWindow should work fine if you give a valid window handle (HWND).
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 21:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yup, didn't work.<br />
      <br />
      created a plugin called HideWin. in the function HideWin I call the following.<br />
      <br />
      ShowWindow((HWND)variables,SW_HIDE);<br />
      <br />
      In the script I call the following (for example)<br />
      <br />
      GetDlgItem $R1 $HWNDPARENT 1028<br />
      HideWin $R1</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 21:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What's variables? Have you poped the variable out? Have you converted it to an integer value?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 21:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i used ExDLL as a base. variables translates to $R1.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 21:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have to convert it to a number first. NSIS gives you a string, and HWND is actually a number. Use myatoi from NSIS source.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">17th September 2002 21:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I just tried that, still nothing.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th September 2002 22:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use IsWindow in NSIS and in your DLL to check out if you get a real HWND.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It does return a real hwnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th September 2002 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm... Get it's text, make sure it is the one you want. Make sure you are getting the control from the right window, you are currently getting it from the parent window, not the inner window.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">tried both, different controls, even the main window. the best I can do is get the main window to flash once.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 14:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ohm and get this. the following code doesn't return a valid hwnd.<br />
      <br />
      FindWindow $R1 "#32770" "" $HWNDPARENT<br />
      IsWindow $R1 +2 0<br />
      MessageBox MB_OK "not a window handle"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th September 2002 14:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">FindWindow $R1 "#32770" "" $HWNDPARENT<br />
      <br />
      should be:<br />
      <br />
      FindWindow $R1 "#32770" 0 $HWNDPARENT<br />
      <br />
      If I remember correctly. Try it...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 14:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nope, the same.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th September 2002 15:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>
FindWindow $R8 "#32770" "" $HWNDPARENT
<br />GetDlgItem $R8 $R8 1006
<br />SetStaticBkColor $R8 0x00BAFAFF 
<br />&gt;
</code>
</pre>This works for me... Are you using it in .onInitDialog?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">just playin withit and for some reason the findwindow isn't returnning a hwnd.<br />
      <br />
      FindWindow $R1 "#32770" "" $HWNDPARENT<br />
      <br />
      returns 0<br />
      <br />
      I'm doing it on the nextpage of a test installer, latest cvs<br />
      <br />
      here's the test<br />
      <br />
      Name "Test Install"<br />
      OutFile "test.exe"<br />
      <br />
      DirText "Choose dir"<br />
      <br />
      Section ""<br />
      SectionEnd<br />
      <br />
      Function .onNextPage<br />
      FindWindow $R1 "#32770" "" $HWNDPARENT<br />
      MessageBox MB_OK $R1<br />
      FunctionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th September 2002 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In .onNextPage the dialog hasn't been created yet... Use .onInitDialog.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 18:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">that just fixed the problem with the findwindow returning 0. I switched after you posted that message about the critial error. I switched it back to oninitdialog. still doesn't work. The plugin gets a valid hwnd too.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 18:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry, the plgin say its not a valid hwnd when the script says it is.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">18th September 2002 19:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks kichik, as you said, just needed to pop the string.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br />
      <span class="post-time small text-muted">20th September 2002 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ShowWin Plugin<br />
      ---------------------------------------------------------<br />
      <br />
      Description:<br />
      ShowWin is a small plugin which will allow you to hide,<br />
      show, enable and disable controls.<br />
      <br />
      Usage:<br />
      ShowWin::Show hwnd<br />
      ShowWin::Hide hwnd<br />
      ShowWin::Enable hwnd<br />
      ShowWin::Disable hwnd<br />
      <br />
      Example:<br />
      Hide the version label<br />
      <br />
      GetDlgItem $R1 $HWNDPARENT 1028<br />
      ShowWin::Hide $R1<br />
      <br />
      Also see ShowWin.nsi.<br />
      <br />
      ---------------------------------------------------------<br />
      Copyright (c) 2002 Don Selkirk</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n_baua</span><br />
      <span class="post-time small text-muted">27th November 2006 10:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you just compile a plugin and put the dll...?<br />
      I may need it badly.<br />
      <br />
      If this feature is already included in newer versions please let me know I am not aware much of NSIS functionality.<br />
      <br />
      Thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">27th November 2006 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The built in ShowWindow instruction doesn't work?<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n_baua</span><br />
      <span class="post-time small text-muted">27th November 2006 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Afrow,<br />
      I just want to hide a single control, not the entire window, I tried sending msg to window as well.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">27th November 2006 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ShowWindow does exactly what this plug-in does. Get the HWND of the control you want to hide using FindWindow and GetDlgItem and use ShowWindow on it, passing 0 or ${WM_HIDE} on the second parameter.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n_baua</span><br />
      <span class="post-time small text-muted">28th November 2006 06:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks kichik,<br />
      <br />
      It worked for me.<br />
      NSIS rocks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tpr</span><br />
      <span class="post-time small text-muted">13th April 2007 23:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello guys,<br />
      <br />
      First of all thanks for all your help, I was able to remove the titlebar of an application (Opera) with<br />
      <br />
      System::Call 'user32::SetWindowLong(i $5,i -16,i 339871820)'<br />
      <br />
      The problem is that after the titlebar is gone and I right-click on Opera on the tray, there's no pop-up menu with close, minimize, etc items.<br />
      Is this a drawback of that method or is there a way to fix it?<br />
      <br />
      Another question: how can I restore the titlebar after I've removed? Or it's impossible?<br />
      <br />
      Thanks in advance,<br />
      <br />
      tpr</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>