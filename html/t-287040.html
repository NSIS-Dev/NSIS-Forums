<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Branding Image problems" />

  <title>Branding Image problems - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Branding Image problems</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287040">Branding Image problems</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">17th February 2008 11:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Branding Image problems</strong><br />
      Yes, it's me again!<br />
      <br />
      I have searched and read everything I can lay my hands on - not only from this forum but from other sites as well - but I am now more confused than when I started.<br />
      <br />
      I think my confusion may be related to my not being familiar with the terminologies used in the documentation.<br />
      <br />
      Firstly, what IS a branding image? Is it the blue (or orange) image on the left side of the interface?<br />
      <br />
      Is creating a custom interface (I have 4 that will be used VERY regularly) as simple as changing the nsisconf.nsh file and then saving that UI as "custom_ui" or something?<br />
      <br />
      I have thus far been "cheating" by simply moving the default "win.bmp" image out of the NSIS directory and replacing it with my own win.bmp image.<br />
      <br />
      I have no doubt there is an easier way. If someone could gently join the dots for me this tired old dinosaur would be eternally grateful.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fabian.rap.more</span><br />
      <span class="post-time small text-muted">17th February 2008 13:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">taken from the NSIS manual::<br />
      <br />
      4.8.1.1 AddBrandingImage<br />
      (left|right|top|bottom) (width|height) [padding]<br />
      Adds a branding image on the top, bottom, left, or right of the installer. Its size will be set according to the width/height specified, the installer width/height and the installer font. The final size will not always be what you requested; have a look at the output of the command for the actual size. Because this depends on the installer font, you should use SetFont before AddBrandingImage. The default padding value is 2.<br />
      <br />
      AddBrandingImage only adds a placeholder for an image. To set the image itself on runtime, use SetBrandingImage.<br />
      <br />
      AddBrandingImage left 100<br />
      AddBrandingImage right 50<br />
      AddBrandingImage top 20<br />
      AddBrandingImage bottom 35<br />
      AddBrandingImage left 100 5<br />
      <br />
      <br />
      <br />
      4.9.14.12 SetBrandingImage<br />
      [/IMGID=item_id_in_dialog] [/RESIZETOFIT] path_to_bitmap_file.bmp<br />
      Sets the current bitmap file displayed as the branding image. If no IMGID is specified, the first image control found will be used, or the image control created by AddBrandingImage. Note that this bitmap must be present on the user's machine. Use File first to put it there. If /RESIZETOFIT is specified the image will be automatically resized (very poorly) to the image control size. If you used AddBrandingImage you can get this size, by compiling your script and watching for AddBrandingImage output, it will tell you the size. SetBrandingImage will not work when called from .onInit!<br />
      <br />
      <br />
      <br />
      <br />
      4.8.1.1 AddBrandingImage<br />
      (left|right|top|bottom) (width|height) [padding]<br />
      Adds a branding image on the top, bottom, left, or right of the installer. Its size will be set according to the width/height specified, the installer width/height and the installer font. The final size will not always be what you requested; have a look at the output of the command for the actual size. Because this depends on the installer font, you should use SetFont before AddBrandingImage. The default padding value is 2.<br />
      <br />
      AddBrandingImage only adds a placeholder for an image. To set the image itself on runtime, use SetBrandingImage.<br />
      <br />
      AddBrandingImage left 100<br />
      AddBrandingImage right 50<br />
      AddBrandingImage top 20<br />
      AddBrandingImage bottom 35<br />
      AddBrandingImage left 100 5</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">18th February 2008 00:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've read all that so many times I almost know it by heart. However it is all completely meaningless to me. Is there an example script somewhere I missed? I couldn't find one.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fabian.rap.more</span><br />
      <span class="post-time small text-muted">18th February 2008 03:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">let me make it simple 4 u. look at <b>win.bmp</b> and complie a script. c where it is. now try ::<br />
      <br />
      <b>SetBrandingImage some_image.bmp</b><br />
      <br />
      then recompile it. that image must have changed. AddBrandingImage is used to tell the compiler where it must be placed</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">18th February 2008 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I must be missing something here cos it still makes absolutely no sense to me at all. I have no doubt we are dealing with a PEBKAC error here.<br />
      <br />
      I'm going to take a break from scripting for a few days then look at it again. Hopefully, whatever insignificant detail I have not absorbed will somehow register in my head and the lights will come back on! :confused:<br />
      <br />
      <br />
      EDIT: I thank you for your attempts to help enlighten an old man.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fabian.rap.more</span><br />
      <span class="post-time small text-muted">18th February 2008 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">it is just an image placed at the side of the installer on the welcome page.....run the nsis installer again and have a look</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">19th February 2008 12:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry .... still not getting it. I don't understand where in the script I should put it, and in what context/syntax.<br />
      <a href="http://img.photobucket.com/albums/v411/hells/more/3_8_2.gif" target="_blank">http://img.photobucket.com/albums/v4...more/3_8_2.gif</a><br />
      <br />
      <br />
      <b>EDIT:</b><br />
      I have attached a basic script called "test.nsi". If I want to change the "win.bmp" image on the installer to "abc.bmp" how would I do it?<br />
      <br />
      <br />
      I know, I know! I'm a pain in the rear. But if you don't ask you don't learn. ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">19th February 2008 12:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmmmm - it seems you can't add attachments on an edit.<br />
      <br />
      Here it is any how! :confused:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fabian.rap.more</span><br />
      <span class="post-time small text-muted">19th February 2008 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">here is a simple example. u should be able to replicate it</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Kaos61</span><br />
      <span class="post-time small text-muted">19th February 2008 13:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">fabian<br />
      <br />
      I thank you so much! If I could send you a beer through this forum I would.<br />
      <br />
      Your patience is appreciated.<br />
      <br />
      <a href="http://img.photobucket.com/albums/v411/hells/4_17_11.gif" target="_blank">http://img.photobucket.com/albums/v4...ls/4_17_11.gif</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Daniel James</span><br />
      <span class="post-time small text-muted">19th February 2008 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Nice try but no banana</strong><br /></p>

      <blockquote>
        <i>Originally posted by fabian.rap.more</i><br />
        <b>here is a simple example. u should be able to replicate it</b>
      </blockquote>Nice ... but that's not what I thought the OP wanted (nor what I would want).<br />
      <br />
      MUI already uses a bitmap (<i>not</i> created as a BrandImage) on the WELCOME page, and it is that bitmap that I think the OP wants to replace (and certainly it is that image that I should like to be able to replace).<br />
      <br />
      If you add a branding image to a MUI installer that image is displayed <b>as well as</b> the MUI image on the WELCOME page ... or rather it isn't because the image isn't loaded until after the WELCOME page has been dismissed.<br />
      <br />
      Try sticking a<br />
      <br />
      <pre>
<code>!insertmacro MUI_PAGE_WELCOME</code>
</pre><br />
      <br />
      in front of the<br />
      <br />
      <pre>
<code>!insertmacro MUI_PAGE_INSTFILES</code>
</pre><br />
      <br />
      in your example and you'll see what I mean ...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fabian.rap.more</span><br />
      <span class="post-time small text-muted">19th February 2008 14:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes u have a point daniel.......i never checked it..........unfortunately i have no time left today so ill try tomorrow.<br />
      <br />
      any moderators or senior members have any idea on how to replace it without renaming the win.bmp?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">19th February 2008 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The large image on the welcome page is control 1200, and is loaded by mui2 macros with the line</p>
      <pre>
<code>System::Call 'user32::LoadImage(i 0, t s, i ${IMAGE_BITMAP}, i 0, i 0, i ${LR_LOADFROMFILE}) i.s' "$PLUGINSDIR\modern-wizard.bmp"<br /></code>
</pre><br />
      I suggest looking at how they did that in Program Files\NSIS\Contrib\Modern UI 2\Pages\Welcome.nsh<br />
      <br />
      You can get a handle to the control by
      <pre>
<code>FindWindow $0 "#32770" "" $HWNDPARENT<br />GetDlgItem $0 $0 1200</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Daniel James</span><br />
      <span class="post-time small text-muted">20th February 2008 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Solution ...</strong><br />
      A little (more) Googling reveals the solution in a post from 2004 :)<br />
      <br /></p>
      <pre>
<code><br />!define MUI_WELCOMEFINISHPAGE_BITMAP "MyImage.bmp"<br />!insertmacro MUI_PAGE_WELCOME<br /></code>
</pre><br />
      <br />
      Easy when you know how ... but the documentation is largely non-existent :(
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">GregL</span><br />
      <span class="post-time small text-muted">26th February 2008 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've noticed that it's not always a lack of documentation, but more that you be looking in the <i>right</i> one. I still use MUI v1, and I knew the answer to your question from Day 1, personally. But if you said you were using MUI2 or nsDialogs, I'd have no idea. :)<br />
      <br />
      A lot of the stuff I've learned was accidental, just from browsing the Help file for a different topic. I'm led to believe that nsDialogs is faster, but it takes 5 or 6 lines of that code to do the same thing in 1 with MUI. I don't see how that's better. :( A time savings of 200 milliseconds is very negligible to me.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Daniel James</span><br />
      <span class="post-time small text-muted">27th February 2008 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by GregL</i><br />
        ... it's not always a lack of documentation, but more that you be looking in the <i>right</i> one.
      </blockquote>Indeed ... but I have <i>never</i> seen MUI_WELCOMEFINISHPAGE_BITMAP mentione in any documentation. If there is some that covers it I'd love to know where?<br />
      <br />

      <blockquote>
        I still use MUI v1, and I knew the answer to your question from Day 1, personally. But if you said you were using MUI2 or nsDialogs, I'd have no idea. :)
      </blockquote>Yes, the post that I found was talking about MUI v1, but I tested it in MUI v2 and it works.<br />
      <br />

      <blockquote>
        A lot of the stuff I've learned was accidental, just from browsing the Help file for a different topic.
      </blockquote>Sounds familiar :( ... it shouldn't have to be that way!<br />
      <br />

      <blockquote>
        I'm led to believe that nsDialogs is faster, but it takes 5 or 6 lines of that code to do the same thing in 1 with MUI. I don't see how that's better. :( A time savings of 200 milliseconds is very negligible to me.
      </blockquote>Oh, I like nsDialogs ... I use it for custom pages <i>with</i> MUI2. I like being able to define the whole layout of a dialog in one place (the .nsi file) and not have to manage and maintain a .ini file as well. Saving a few tenths of a second isn't the issue, really.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">27th February 2008 17:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        I have <i>never</i> seen MUI_WELCOMEFINISHPAGE_BITMAP mentione in any documentation. If there is some that covers it I'd love to know where?
      </blockquote>From the Modern UI ReadMe:<br />
      <br />
      MUI_WELCOMEFINISHPAGE_BITMAP bmp_file<br />
      Bitmap for the Welcome page and the Finish page (recommended size: 164x314 pixels).<br />
      Default: ${NSISDIR}\Contrib\Graphics\Wizard\win.bmp<br />
      <br />
      From the Modern UI 2 ReadMe:<br />
      <br />
      MUI_WELCOMEFINISHPAGE_BITMAP bmp_file<br />
      Bitmap for the Welcome page and the Finish page (recommended size: 164x314 pixels).<br />
      Default: ${NSISDIR}\Contrib\Graphics\Wizard\win.bmp
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Daniel James</span><br />
      <span class="post-time small text-muted">28th February 2008 00:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>So it's IS in the doscs ... it's just impossible to find ...</strong><br /></p>

      <blockquote>
        <i>Originally posted by pengyou</i><br />
        Quote: [snip]<br />
        From the Modern UI 2 ReadMe:<br />
        <br />
        MUI_WELCOMEFINISHPAGE_BITMAP bmp_file<br />
        Bitmap for the Welcome page and the Finish page (recommended size: 164x314 pixels).<br />
        Default: ${NSISDIR}\Contrib\Graphics\Wizard\win.bmp
        <hr />

        <table cellpadding="6" cellspacing="0" border="0" width="100%">
          <tr>
            <td class="alt2">
              <hr />
              <i>Originally by me</i><br />
              I have never seen MUI_WELCOMEFINISHPAGE_BITMAP mentione in any documentation. If there is some that covers it I'd love to know where?
            </td>
          </tr>
        </table>As I said, I'd never seen it ... but now that you mention it I see that it is there if you click "Expand All". I missed some of the sections that it's possible to expand, and there's a lot there that I hadn't seen before. :o<br />
        <br />
        Thanks for that ... but my basic feeling remains the same: if the documentation isn't accessible it isn't good documentation.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">28th February 2008 00:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        As I said, I'd never seen it ... but now that you mention it I see that it is there if you click "Expand All". I missed some of the sections that it's possible to expand, and there's a lot there that I hadn't seen before.<br />
        <br />
        Thanks for that ... but my basic feeling remains the same: if the documentation isn't accessible it isn't good documentation.
      </blockquote>I guess you're not good observer. Documentation is fine, but, as far I can tell, you're always welcome to contribute and improve it.<br />
      btw you could click on expand all, or on every bold blue link above every section of the documentation ;)
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
