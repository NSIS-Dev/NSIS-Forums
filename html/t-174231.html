<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How to tell NSIS to use a different pluginsdir (?) + suggestions" />

  <title>How to tell NSIS to use a different pluginsdir (?) + suggestions - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How to tell NSIS to use a different pluginsdir (?) + suggestions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174231">How to tell NSIS to use a different pluginsdir (?) + suggestions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">niteflyer</span><br />
      <span class="post-time small text-muted">26th March 2004 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to tell NSIS to use a different pluginsdir (?) + suggestions</strong><br />
      My installer needs some plugins, which can be found in NSIS' standard-pluginsdir. The problem is that these have been updated several times since the initial release of NSIS 2 (final) and I want to include the sources and plugins, which actually have been used for the released build of my installer.<br />
      <br />
      The user should be able to repack the installer with any NSIS 2 (final) build, and as I dont want him to overwrite the DLLs in his standard-pluginsdir with the versions I have included in my installer, I've put them together with my scriptsources in the projectfolder and made them public to NSIS with the command<br />
      <br />
      !addplugindir '.'<br />
      <br />
      in the installerscript. NSIS accepts this folder, but still refers primarily to his own pluginsdir, if the plugin-calls in my script can be resolved from this location. My 'workaround' to this, was to rename the DLLs in the projectfolder to installoptions.new.dll or something like that and call<br />
      <br />
      InstallOptions.new::dialog "ini_file_location.ini"<br />
      <br />
      Is there any other way to do what I want without having to rename the DLLs ?<br />
      <br />
      If not, I'd like to suggest that any addplugindir-command puts the standard-plugindir to the end of the nsis-searchorder or to allow pathspecs in a plugin-call like<br />
      <br />
      .\InstallOptions::dialog "ini_file_location.ini"<br />
      <br />
      which is currently not allowed, according to my tests.<br />
      <br />
      I'd also like to suggest that plugins should be compiled with version-information, so that it could be evaluated by GetDLLVersion. It's also more convenient for the programmer to decide which version is more recent, as he could inspect the fileprops of a DLL in his explorer.<br />
      <br />
      Another nice feature would be if VIProductVersion could use the result of GetDLLVersionLocal 'AppName', so that the installer could inherit the build number of the application to be distributed, without the need to modify the script in this respect.<br />
      <br />
      And, before you beat me, one last thing: the compiler does not accept SW_HIDE as showmode for ExecShell. I know, this is documented, but I don't see a reason for crippling, as SW_HIDE is already defined in WinMessages.nsh and WinAPIs ShellExecute accepts this value - it would allow hidden DOS-Boxes without the need for a plugin like nsExec.dll - afaik there already has been a thread about this...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">26th March 2004 20:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What's wrong with using the included plug-ins? If a future NSIS version will be compatible with your script code the plug-ins will probably be backwards compatible too.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
