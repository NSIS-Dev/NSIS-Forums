<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How to change installer based on user's existing files?" />

  <title>How to change installer based on user's existing files? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How to change installer based on user's existing files?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271689">How to change installer based on user's existing files?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gato Muerto</span><br />
      <span class="post-time small text-muted">24th May 2007 01:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to change installer based on user's existing files?</strong><br />
      As the title states, I am trying to change installer options based on if files are already installed. I am attempting the following:<br />
      <br />
      1. Read a list of files to be installed to location. This could be within the original .nsi script itself, but might make it difficult for #3.<br />
      2. Retrieve list of files that are already installed to the location by the program. (Add/Remove functionality)<br />
      3. Detect what files that are not on list 2 but are on list 1 that are already installed.<br />
      4. Show the MUI_PAGE_COMPONENTS page with files on list 3 either a)Not showing as install options or b)Permanently marked to avoid overwriting/erasing the files needed by another program.<br />
      <br />
      I can see how to do 1 and 2, but having difficulties with 3 and 4. I tried using PUSH commands, but there appears to be an upper limit on how many times I can use that in a row... or at least the compiled installer does odd things after the 4-5 POP command I use.<br />
      :igor:<br />
      <br />
      Of course, if you have a different way, I just need to detect already installed files and avoid overwriting existing files.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theblazingangel</span><br />
      <span class="post-time small text-muted">24th May 2007 02:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">would it not be easier to use SetOverwrite off?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gato Muerto</span><br />
      <span class="post-time small text-muted">24th May 2007 02:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The add/remove portion would remove the files if there is no way to selectively disable them (and the user is unaware (always good to assume :D )). Overwriting is the least of the worries.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">24th May 2007 16:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">For 3, use NSISArray.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gato Muerto</span><br />
      <span class="post-time small text-muted">24th May 2007 18:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ooooo. Spiffy. Never seen the array function before, so happily playing with the features. Boss is leaning on me to get results, so working under time constraints.<br />
      <br />
      Is it possible to make NSIS refer to an external dynamic ini file when ON the components page in order to display (or mark as mandatory) specific files for installation, or must it be defined upon compile?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2007 16:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can add lots of sections with no captions to hide them and unselected (/o), then enable the first X depending on the INI file and set the captions (to show them) with SectionSetText.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Gato Muerto</span><br />
      <span class="post-time small text-muted">29th May 2007 18:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks. The boss decided to scrap the idea since it was taking too long, but I think I am going to try this idea to make a stand-alone font installer/uninstaller.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
