<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to add files by wildcards, but uninstall only what is installed"><title>How to add files by wildcards, but uninstall only what is installed - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to add files by wildcards, but uninstall only what is installed</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=204838">How to add files by wildcards, but uninstall only what is installed</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Dkom</span><br><span class="post-time small text-muted">13th January 2005 21:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to add files by wildcards, but uninstall only what is installed</strong><br>If I want to uninstall only installed files - I must create log-file. It's easy if I'll write:<br>SetOutPath "$INSTDIR\Langs"<br>File "Langs\Spanish.txt"<br>File "Langs\German.txt"<br>File "Langs\French.txt"<br><br>But how to wrtie file names (French.txt, German.txt and so on) to log file if code will be:<br>SetOutPath "$INSTDIR\Langs"<br>File "Langs\*.txt"<br><br>Or I must always use full names, if I want ot create such uninstaller? If there are to many files - what will be more easy: to write their full names and paths to both installer and uninstaller or to use File "SomeDir\*.&lt;exttension&gt;" or File /r "Somedir\*.&lt;extension&gt;" and to add some macro to the script?<br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th January 2005 12:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=146048&amp;highlight=log+delete" target="_blank">This thread</a> is full of information about this topic.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dkom</span><br><span class="post-time small text-muted">14th January 2005 17:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Don't you think, that it will be usefull to add new switch \log for example to "File" command in the next NSIS release?<br>For example if code is<br>SetOutPath "$INSTDIR\Somedir"<br>File \log \r "Source\*.*"<br>then installer will automatically generate log with installed files and their paths and put this log into installed dir.<br>In uninstaller it will be only<br>RMDir \log "$INSTDIR\Somedir"<br>and uninstaller will automatically read log and delete only needed files.<br><br>It will be great help for newbies, or for those, who want to delete only installed files and don't want to explore how to write special macro or huge amount of commands for that.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">14th January 2005 17:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Rather than adding a \log switch for each specific command, it would be much better to use a CreateUninstallLog true|false<br><br>However, I doubt this will be implemented. If it's possible using NSIS script already available, then why make it a built-in feature?<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">14th January 2005 17:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here is the simplest way to achieve it. I just put it up on the Archive:<br><a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=679&amp;instances=0" target="_blank">http://nsis.sourceforge.net/archive/...79&amp;instances=0</a><br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dkom</span><br><span class="post-time small text-muted">14th January 2005 17:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">&gt;&gt;Here is the simplest way to achieve it<br><br>As I understood I must to write every file name with its extension ("file1.ext"), but if there are hundred of files in folders and subfolders and I want to write *.* when adding files what must I change in this code? Can I use ${File} \r "Source\*.*" or something like that or only<br>${File} "file1.ext"<br>${File} "file2.ext"<br>....<br>${File} "file100.ext"<br>&gt;&gt; If it's possible using NSIS script already available, then why make it a built-in feature?<br><br>Many things can be done using script, but for example why RmDir has [/r] switch if user can write<br>Delete "$INSTDIR\Somedir\*.*"<br>RmDir "$INSTDIR\Somedir"<br>Possibly because of quick and easy use of RmDir /r?<br><br>It's quick and easy to write CreàteUninstàllLog (and ReàdUninstàllLog to uninstàller) and not to think how to create needed code.<br>I think such implementation will be useful no only for me or will be unneded because of rare use.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">domenico10</span><br><span class="post-time small text-muted">18th January 2005 17:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">We are using Wise Installer and trying out NSIS. &lt;br&gt; With Wise every action (installed file or registry setting) is written to a log file. The uninstaller then undo what is written in the log file.&lt;br&gt; Is there in NSIS a similar function or script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dkom</span><br><span class="post-time small text-muted">18th January 2005 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">&gt;Is there in NSIS a similar function or script?<br><br>You must write all code by yourself. <b>Afrow UK</b> thinks that it can be easy to all, but imho NSIS must have single command for that useful function.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>