<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="new banner.dll bugs"><title>new banner.dll bugs - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">new banner.dll bugs</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136605">new banner.dll bugs</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 20:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>new banner.dll bugs</strong><br>&nbsp; after i downloaded the newest cvs with the updated banner plugin the first thing i noticed after compiling that the setup startes behind the makensisw.exe compiler window (after pressing the "test installer" button).<br>the more problematical thing is that i am using the banner plugin in the .onUserAbort function and when i exit the installer it crashes. i took the old banner.dll into the plugins dir and it worked again with no problems<br><br>DOCa Cola</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">25th May 2003 20:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Never unload UI plug-ins from .onUserAbort, use .onGUIEnd. I'll have a look at that installer coming behind things.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 20:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thx<br><br>i noticed that getting behind the compiler window with the banner example too.<br>ok, i will put these unload things in onguiend, thats more logical cause i have to call that unload-with-banner-function everytime i close it anyway<br><br>DOCa Cola</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 20:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yea, i put the function in .onguiend and that helped, thx. but the window does always run behind the compiler window and behind the 3rd party nsis editor (nisedit) i use too after i clicked the run button</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 21:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">...and not only behind the compiler window, even behind the explorer window, maybe it has something to do with the enabled bzip2 compression and the appearing banner that shows a temp path to something that don't fit in this label instead of the extracting progress<br><br><a href="http://www.borgcore.de/outerspace/nsis/bannerdll.png" target="_blank">http://www.borgcore.de/outerspace/nsis/bannerdll.png</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">25th May 2003 22:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Are you sure that's the bzip2 window? I can't reproduce this... Can you please attach an example script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 22:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok, i will do that, just takes some time due i first must upgrade my script to the new modern ui version...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 22:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">thats my fault, i have a banner call in oninst. now the install window cames up in front of the compiler. but with the old version that was working somehow but the banner example is affected by that change too (loaded behind window that is currently in front).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">25th May 2003 22:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">onInst? Do you mean .onInit?<br><br>Which problem are you talking about? Does the weird cropped path has anything to do with .onInit?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DOCa Cola</span><br><span class="post-time small text-muted">25th May 2003 22:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">arg, nevermind, solved the problem, just mixed something up<br>thx for the help</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dsvedchenko</span><br><span class="post-time small text-muted">29th May 2003 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">My MUI installer don't work with new banner.dll too.<br>It is very large so i reproduce bug in InstallOptions.nsi just add Banner invokation<br>I've submitted bug, but one day gone away and i haven't heard any reaction.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th May 2003 13:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's because I have nothing to say yet. The new version is not ready yet.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dsvedchenko</span><br><span class="post-time small text-muted">29th May 2003 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok. sorry for trouble. but can you remove buggy version from CVS ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th May 2003 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, I can bring the old version back, I guess the new one sucks more, heh :)<br><br>Done.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">16th June 2004 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello folks,<br><br>I am experience a hanging issue when using the banner plugin. This occurs whether I destroy the banner each time, or only destroy it once.<br><br>I am running the banner plugin in a loop (called from .MyInit [override directly after .OnInit]) for a random number of times checking for running processes. Everything compiles fine and functions properly.....if I don't do the following.<br><br>Install the app, while the banner is up I switch tasks to Explorer or something. The banner will then hang and I have to end the install process.<br><br>Note: I am not 100% sure the banner is causing this. However if I remove the banner completely, and perform the same steps the installation continues properly in the background.<br><br>My call to the banner plugin:<br><br><br>Banner::show /NOUNLOAD /set 76 "$(DESC_CHECK_PROCESS)..." "$R0"<br><br><br>Anyone else experiencing this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">16th June 2004 17:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">To reproduce try the following. I even tried to remove the flashing but the banner isn't treated as the same dialog when using nounload. It looks like for each banner:show call you need a new banner:destroy call. That kind of sucks. It would be nice if you could update the banner without having to do the matching calls over and over.<br><br></p><pre>
<code>

<br>&gt;# Look at Readme.txt for usage alongside with the Modern UI
<br><br>&gt;Name "Banner.dll test"
<br><br>&gt;OutFile "Banner Test.exe"
<br><br>&gt;ShowInstDetails show
<br><br>&gt;Function .onInit
<br>    
<br>    again:
<br>               Banner::show /NOUNLOAD "Calculating important stuff..."
<br>       IntOp $0 $0 + 1
<br>        Sleep 100
<br>    Banner</code>::destroy
<br>        StrCmp$0 20 0 again
<br>FunctionEnd
<br><br>Section
<br>    DetailPrint "Using previous calculations to quickly calculate 1*20..."
<br>    Sleep 1000
<br>    DetailPrint "Eureka! It's $0!!!"
<br>   DetailPrint ""
<br>&gt;SectionEnd 
<br>&gt;

</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">16th June 2004 22:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        It looks like for each banner:show call you need a new banner:destroy call.
      </blockquote>Yes.<br>
      Because for each dialog appear, Windows send a new HWND. That's why you need to destroy the dialog when you don't need it.<br>
      Otherwise you'll sucking unnecesary resources from the user.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zimsms</span><br>
      <span class="post-time small text-muted">17th June 2004 12:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well that sucks. I wanted to get rid of the flashing by using the same window. It's too bad banner::Show didn't return a handle so you could set the text multiple times in a loop and when finished destroy it once. That would be a fantastic feature upgrade. BTW, if you fail to call banner::destroy before you leave the function or section banner::show was called in your installer will gpf at runtime. It would be nice if that was trapped at compile time,; though, it is a plugin and not a base item in the ui.<br>
      <br>
      I posted the feature request as #974688.<br>
      I reported the bug as #974691.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yurik</span><br>
      <span class="post-time small text-muted">8th June 2007 10:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>banner + ExecWait hang up</strong><br>
      &nbsp; I have the following in my installer:<br>
      <br>
      Banner::show /NOUNLOAD /set 76 "Installing and running service" ""<br>
      <br>
      ExecWait 'net stop MyService'<br>
      ExecWait '"$INSTDIR\${ServiceExeName}" /uninstall'<br>
      ExecWait '"$INSTDIR\${ServiceExeName}" /install'<br>
      ExecWait 'net start MyService'<br>
      <br>
      Service (which is my own service, ServiceExeName) is a console application able to run as a service (/uninstall and /install show console with some messages regarding to installation process). Service is installed and started OK, but the installer hangs up with banner as well. It does not respond and even does not repaint itself.<br>
      <br>
      Commenting banner::show works. What should I do to keep banner and not have my installer hung up?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">8th June 2007 12:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It seems like you're not the only one with this problem.<br>
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=270838&amp;highlight=banner" target="_blank">http://forums.winamp.com/showthread....ghlight=banner</a><br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>