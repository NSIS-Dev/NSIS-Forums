<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Tray icon"><title>Tray icon - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=" Tray icon"><title>Tray icon - NSIS Forums</title><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=" Tray icon"><title>Tray icon - NSIS Forums</title><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Tray icon</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=144126">Tray icon</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">30th July 2003 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Tray icon</strong><br>It would be great if anyone can show me how to get the installer to display in the System Tray area on the Windows task bar.<br>I doubt this is possible, but it would sure be nice for my program - it downloads updates for my game, which can take hours (if many updates)<br><br>Thanks<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">31st July 2003 00:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You should be able to do it using the APIs and system plugin. Not sure of the actual call but will check it out.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">31st July 2003 00:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><b>Shell_NotifyIcon</b> is the API call...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">31st July 2003 00:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found some info about Shell_NotifyIcon at <a href="http://www.obodigital.com/vb/articles/shellnotifyicon.html" target="_blank">this site.</a> I know it's for VB but someone should be able to convert it to system plugin code.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">31st July 2003 10:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I know hardly anything about using System plugin let alone VB.<br><br>Help would be much appreciated!<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">31st July 2003 23:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Can anyone help me on this one please :p<br><br>-Stu :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">RDaneel</span><br><span class="post-time small text-muted">1st August 2003 01:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, probably the best thing I can do for you (besides writing your installer for you :) ) is to give you a conceptual model for "tray stuff".<br><br>First off, things are fairly simple, and do indeed revolve around the Shell_NotifyIcon API call... the one problem I can see has, I think, been discussed here before - how to receive [Windows] messages sent to your NSIS installer process.<br><br>Anyway, at its simplest, when you want to go into the tray, you set your app (NSIS installer in this case) to be invisible by doing a Win32 API call of ShowWindow(SW_HIDE), and immediately tell Windows to display your icon in the tray, using the Shell_NotifyIcon call.<br><br>Flipping back to non-tray operation is just the reverse - set your main window back to the visible state, and tell Windows to delete your icon from the tray.<br><br>Now, the tricks - when you first go into the tray, along with an icon handle, you tell Windows to use some user-defined Windows message of your choice to inform you of things the user does to your tray icon, like left- or right- clicking it etc. Clearly, if you are unable to get your hands on this message when Windows sends it to your NSIS installer, you will have a problem communicating with your user. :( Hopefully someone else (Joost?) can assist you with this...<br><br>Finally, you will need to feel comfortable using the System plugin, both for simple calls, and for creating/interpreting the data structures used with the Shell_NotifyIcon API call... not to mention checking out the documentation on the handful of Windows API calls involved:<br><br>* Shell_NotifyIcon<br>* ShowWindow<br>* LoadImage (for getting your icon handle, although you might have some other access to your icon already buried in your NSIS installer).<br><br>Good luck! :D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">1st August 2003 13:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for your help!<br>The reason I cannot start to properly understand the System plugin, is due to the fact that I know nothing about C++, C or hardly any VB!<br><br>I know that Brainsucker would have the ultimate solution to this straight off, but he seems to be away atm :(<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">1st August 2003 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The thing is in this part:<br></p><pre>
<code><br>Public Type NOTIFYICONDATA<br>   cbSize As Long<br>   hWnd As Long<br>   uID As Long<br>   uFlags As Long<br>   uCallbackMessage As Long<br>   hIcon As Long<br>   szTip As String * 64<br>End Type<br></code>
</pre><br>
      is important for the API call:<br>
      Declare Function Shell_NotifyIcon Lib "shell32.dll" \ Alias "Shell_NotifyIconA" (ByVal dwMessage As Long, lpData As NOTIFYICONDATA) As Long<br>
      I don't think that's possible with NSIS...<br>
      A less, as you wrote, Mr. Brain popup a good example code solution.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br>
      <span class="post-time small text-muted">1st August 2003 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I am 99% sure that this will be posible with nsis. The declaration can be done using the system dll as it only allocates memory. It's too late tonight for me to this this through, almost 03:30 in the morning. I'll have another look tomorrow.<br>
      <br>
      Vytautas</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">1st August 2003 17:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you :)<br>
      <br>
      #me awaits patiently<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">2nd August 2003 12:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I notice brainsucker is online atm :)...<br>
      <br>
      -Stu :p</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">2nd August 2003 13:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could create taskbar icon, modify or delete it, but it is hard to react to it. However:<br>
      <br>
      <br>
      ; ---------- Some declarations -----------<br>
      ;typedef struct _NOTIFYICONDATA {<br>
      ; DWORD cbSize;<br>
      ; HWND hWnd;<br>
      ; UINT uID;<br>
      ; UINT uFlags;<br>
      ; UINT uCallbackMessage;<br>
      ; HICON hIcon;<br>
      ; TCHAR szTip[64];<br>
      ;}<br>
      !define stNOTIFYICONDATA '(&amp;l4, i, i, i, i, i, &amp;t64) i'<br>
      <br>
      !define NIF_MESSAGE 0x00000001<br>
      !define NIF_ICON 0x00000002<br>
      !define NIF_TIP 0x00000004<br>
      !define NIM_ADD 0x00000000<br>
      !define NIM_MODIFY 0x00000001<br>
      !define NIM_DELETE 0x00000002<br>
      <br>
      ; ----------- To Add icon ---------------<br>
      ; use [t "iconfilename"] instead of [i 32514] to specify your icon,<br>
      ; or if you already have your icon handle you can use it instead of r2<br>
      ; at structure creation time<br>
      System::Call 'User32::LoadIconA(i 0, i 32514) i .r2'<br>
      System::Call '*${stNOTIFYICONDATA}(, $HWNDPARENT, 0, ${NIF_TIP}|${NIF_ICON}, 0, r2, "How do you like this?") .r0'<br>
      System::Call 'Shell32::Shell_NotifyIcon(i ${NIM_ADD}, i r0) i.r1'<br>
      <br>
      ; ----------- To Modify icon ---------------<br>
      System::Call '*$0${stNOTIFYICONDATA}(,,,,,, "Another icon tip...")'<br>
      System::Call 'Shell32::Shell_NotifyIcon(i ${NIM_MODIFY}, i r0) i.r1'<br>
      <br>
      ; ----------- To Delete icon ---------------<br>
      System::Call 'Shell32::Shell_NotifyIcon(i ${NIM_DELETE}, i r0) i.r1'<br>
      System::Free $0</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">2nd August 2003 14:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        I notice brainsucker is online atm :)...
      </blockquote>;)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">2nd August 2003 15:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">wow! it's easy...easier than Visual Basic ;)<br>
      Cool dude :up:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">2nd August 2003 17:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, theres a problem with the code to unload the tray icon.<br>
      Sometimes it works, sometimes it doesn't, but it always brings up a crash.<br>
      <br>
      Can anyone see whats wrong with it?<br>
      <br>
      Thanks, this is excellent!<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">2nd August 2003 18:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, also it seems that if I hover my mouse over the tray icon, it dissapears too.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">2nd August 2003 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Where do you put:<br></p>
      <pre>
<code><br>System::Call 'Shell32::Shell_NotifyIcon(i ${NIM_DELETE}, i r0) i.r1' <br>System::Free $0<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">2nd August 2003 18:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have placed it in my abort/instsuccess functions.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RDaneel</span><br>
      <span class="post-time small text-muted">2nd August 2003 20:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, brainsucker *is* Mr System plug-in, as I understand it, but the rest of us aren't, so there may be some less-obvious things to look at here :)<br>
      <br>
      1) so we are all clear on what is happening, the Shell_NotifyIcon API call needs a NOTIFYICONDATA data structure passed in to it EVERY time... since $0 is being used to hang on to a pointer to this structure, you must make sure that $0 is not overwritten by any other code during the time between the NIM_ADD and NIM_DELETE calls<br>
      <br>
      2) while the example shown is apparently using some magic in the System plug-in to allocate (and fill in) this data structure the first time (just prior to the NIM_ADD call), note that if you use the example code for the NIM_DELETE call, this data structure is released with the System::Free, and the whole initial sequence (the setup code for the NIM_ADD) must be executed again<br>
      <br>
      3) when initializing the structure, the first element *must* be filled in with the size in BYTES of the entire structure... this should be happening with the "&amp;l4" in the structure def, but has the actual value been verified? Actually, there are some semi-trick cases to consider here, since the size specified is used by Windows to decide which version of the Shell_NotifyIcon API to offer/use... the example code will *probably* make the system think that you are only using the "ancient" Win95/WinNT features of this API, which would mean that the example structure will work ;)<br>
      <br>
      4) the NIM_MODIFY sequence will (as shown) modify the TOOLTIP, not the ICON (either or both are possible)... just a comment on the comment :D<br>
      <br>
      5) finally, *don't* blow off brainsucker's first line of the example post - the "but it is hard to react to it" is echoing my earlier remarks about receiving the Windows messages sent back to your NSIS installer to tell you when the user "does something" to your tray icon... if it is your intention to use the tray completely non-interactively, fine - otherwise, this issue will have to be addressed :(</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">2nd August 2003 20:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The idea was so that the installer would not be listed on the task bar, but be instead an icon on the task bar instead.<br>
      The user would be able to right/left click to open the installer again.<br>
      <br>
      I have changed it to use $4 instead (haven't used that in my script)<br>
      It now does not crash, but it still dissapears on mouseover.<br>
      <br>
      Thanks<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">3rd August 2003 00:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ops,<br>
      <br>
      The idea was so that the installer would not be listed on the task bar, but be instead an icon on the sys tray instead.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">3rd August 2003 22:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, the code seems to work on Win98SE, but on WinXP the icon just dissappears on mouse-over.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RDaneel</span><br>
      <span class="post-time small text-muted">4th August 2003 03:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You haven't mentioned whether you think the system is just disappearing your tray icon on you, or your code to make it go away is being invoked... when the icon goes away (on XP), does your app go away too (i.e., it's no longer on the system tasklist)?<br>
      <br>
      Why don't you put debug output to the NSIS log page when *any* of the Shell_NotifyIcon calls are made - this is a way to get more data on what may be happening. Also, if you are worried about being able to *see* the log because your NSIS installer is invisible, just don't turn off visibility to start with when you first make the icon show in the tray. :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">4th August 2003 13:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The tray icon dissappears on mouseover (like I said) while the program is running, not when it has been shut down.<br>
      This happens on WinXP only.<br>
      The icon shows it's label correctly (displays the text) on mouseover on Win98/NT.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">4th August 2003 15:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok...<br>
      according to my recent research about system plugin...<br>
      <b>Shell_NotifyIcon</b> it's a call like Visual Basic handles..<br>
      <font color="red">Shell_NotifyIconA</font> is the called for the plugin.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RDaneel</span><br>
      <span class="post-time small text-muted">4th August 2003 18:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ummm, "Major Dude", get the trace/debug info as suggested above. It is more likely that your NSIS code is [inadvertently] removing the tray icon than that XP is spontaneously doing it. :D<br>
      <br>
      "Forum King", the real deal is that most of the Win32 API calls that handle text actually have *2* entry points: one with "A" appended, and one with "W".<br>
      <br>
      In this particular case, then, the Shell32 DLL has both Shell_NotifyIconA and Shell_NotifyIconW. There *is* no "Shell_NotifyIcon" version of the call in reality - in programming land, your development environment maps this generic version of the name to one of the real ones... either the "A" version for ASCII text, or the "W" version for Unicode.<br>
      <br>
      So, if things work at all as shown in brainsucker's example, I would expect it is because the System plug-in, when it fails on a GetProcAddress call, automatically retries with "A" appended to the supplied API entry point. ;)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">4th August 2003 20:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">After placing brainsuckers' code into an empty script, that does not use any variables (except for the System code itself) my problem persists where the icon just dissappears on mouse-over.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">5th August 2003 15:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Afrow UK: It's the most likely you've forgotten to add<br>
      <br>
      SetPluginUnload alwaysoff<br>
      <br>
      option at the script start (or /nounload to every system call).<br>
      Don't forget to add<br>
      <br>
      SetPluginUnload manual<br>
      <br>
      before the last system call (or fake System::Free 0 call).<br>
      <br>
      RDaneel:<br>
      0. thanx for you comments :)<br>
      1. I've spent to many time debuggin &amp;l option, so there is no one chance it'll fail!!! ;)<br>
      2. System does nothing with the letter A at the proc name end, I've just forgotten to add it... The way it works?... Hmm.. Shell32.dll contains proc version without any letters, may be because it could determine which structure (unicode or ascii) passed to it by cbSize member (there are no other string params, as you see).<br>
      <br>
      P.S. I'll post notifyicon plugin ASAP, which will solve all the problems (the icons at TNA and removing the window from taskbar).</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th August 2003 16:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OMG BRAINSUCKER!!!!<br>
      /me saw the last P.S.<br>
      <br>
      You are the most amazing guy on the net - seriously, you writing a plugin just like that wow!!<br>
      <br>
      So, will this plugin have support for simple sys tray icon click - opens program, or even more!?<br>
      <br>
      -Stu :o :) :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">5th August 2003 16:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by brainsucker</i><br>
        <b><br>
        2. System does nothing with the letter A at the proc name end</b>
      </blockquote>Just to be clear: I used the term "A" for the conversion from<br>
      Visual Basic 4/5/6 API declare function to system plugin syntax :)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RDaneel</span><br>
      <span class="post-time small text-muted">5th August 2003 18:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">brainsucker,<br>
      <br>
      You certainly are an energetic person! :)<br>
      <br>
      Really, be careful with the A/W thing - in general, the A/W naming convention *is* the rule in Win32 system API calls that have any dealings with text, whether as parameters, or in this case, in a structure that is a parameter.<br>
      <br>
      As it happens, for *some* of the API calls, an additional entry point (without A/W) is defined to be the same as the entry point for the "A" version of the call... but not all of them!<br>
      <br>
      So, while Shell_NotifyIcon does have the "extra" entry point, others do not (e.g., ShellAbout and ShellExecute).<br>
      <br>
      Hmmm... might you want to include the strategy on failed GetProcAdress calls that I mentioned earlier (you would only need to make this change in one place)? If you/we can convince yourself/ourselves that the "A" version is probably what the NSIS scripter actually meant to use, this *could* save some confusion - at the cost of further obscuring how things actually work, of course. :D</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">5th August 2003 23:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Afrow UK: I'm thinking about right click menu, but it'll have a little sense anyway (there are 2 ways I see, and both are ugly: 1. assign some variable some value on menu selection, and then check it thru the script 2. Pool some plugin function which will return menu status). Any ideas about additional functionality?<br>
      <br>
      RDaneel: :)<br>
      "Really, be careful with the A/W thing"<br>
      :) I've just forgotten that damn letter!!!! ;) :)<br>
      <br>
      System+A: ok... good idea.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">5th August 2003 23:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think it wouldn't be possible for nsis programs to recieve the values from the menu.<br>
      Because NSIS only runs the codes in different places (in oninit, after a page etc) not constantly...<br>
      <br>
      We can forget the return values I suppose.<br>
      It's just up to the dll now to bring the program on-top when the user clicks on the sys tray icon.<br>
      You could allow additional defines when calling the plugin (no idea what plugin is called but,)<br>
      <br>
      TrayIcon::Load "Icon" "Hover title"<br>
      TrayIcon::Menu "TI_MINIMIZE, TI_OPEN" "Menu header text"<br>
      TrayIcon::Close<br>
      <br>
      Going over the top would be, I dunno...<br>
      <br>
      TrayIcon::Menu "SubMenu('Readme'), Menu('Open Readme', exec $INSTDIR\readme.txt)"<br>
      <br>
      This would create a submenu, which on moueover brings up a second menu which inturn has a button to open the installer readme.<br>
      <br>
      lol<br>
      <br>
      -Stu :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">8th August 2003 23:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Afrow, where did you put the creation code? It must not be in .onInit because in there $HWNDPARENT is not valid.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">9th August 2003 14:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, but after moving it to GUIInit or one of my custom pages, the installer would just crash onInit, and wouldn't even reach any dialogs.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">9th August 2003 14:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">May I ask how the plugin is going?<br>
      I have till next weekend to prepare for the release of my 12 map D-Day campaign, along with the release of my NSIS installer.<br>
      <br>
      It would be nice to get the tray icon working by then, but I can always release the installer (program) again later (It has built in updater).<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">10th August 2003 11:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry... I've got some immediate work (programming USB device).... so ASAP. ;(<br>
      <br>
      BTW, would you like to remove program from taskbar on minimize only, or at any time?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">10th August 2003 12:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, it at the moment I've used System code to remove the taskbar item perminantly for the settings tab (which is executed with ExecWait)<br>
      But, indeed yes, it would be nice if the taskbar item dissapeared on minimize.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
      <span class="post-time small text-muted">10th August 2003 23:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hide on minimize is 10000000 times easier :) I've f*cked all the Sunday of the last week with hiding at normal state (WS_EX_TOOLBOX sux - make new styles and so on, and other techiques work hard with nsis window).<br>
      I'll release tomorrow (i think) minimal version with hide on minimize and no right click menues (but with balloon tooltips for example ;).</p>
    </div>
    <hr>
    
    
    <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]-->

    <div class="container">
      

      <ol class="breadcrumb">
        <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

        <li><a href="f-65.html">NSIS Discussion</a></li>

        <li class="active">Tray icon</li>
      </ol>

      <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=144126">Tray icon</a></p><br>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">11th August 2003 00:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Now, thinking about it, will it be able to work like this:<br>
        <br>
        Installer is ran, and sys tray icon is made (installer is also shown, and task bar item)<br>
        User clicks on sys tray icon to show installer ui and show the task bar item.<br>
        Sys tray icon stays until installer is closed.<br>
        On installer minimization, task bar item dissappears (along with installer ui) Sys tray icon stays.<br>
        <br>
        Thanks for everything!<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">11th August 2003 09:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Is it the question? Yes, it will be able. That is the most natural behaviour, I think.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">tarwal2</span><br>
        <span class="post-time small text-muted">19th August 2003 21:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Did this plugin ever get made? Sounds pretty useful for my purposes. I basically have two installs (one that downloads the second) and it would be nice to have a tray icon that shows progress (and options) for while the second setup is downloading.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">20th August 2003 14:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Brainsucker is still working on it (I assume)<br>
        <br>
        I went and released my program (installer) b1 without the Task Bar functionality.<br>
        When the plugin is finished, I can simply upload the new version of my program (using the plugin), and when everyone runs my program it will download the update for them.<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">23rd August 2003 12:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Is this still being worked on?<br>
        <br>
        -Stu :confused:</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">23rd August 2003 23:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Afrow :) Hope you'll forgive me that delay... I've got so many immediate work... If I'll finish it (work) tomorrow (today) (in basic), I'll try to bring plugin online this evening (there is nothing to do with it actually, in simpliest form (hide on minimize) at last). I'm really sorry...</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">23rd August 2003 23:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">No theres honestly no rush.<br>
        I was just hoping that it hadn't been forgotten!<br>
        <br>
        Thanks for showing that it's still there!<br>
        <br>
        -Stu :)</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">31st August 2003 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>Anyone home!</strong><br>
        Just posting to keep this topic... Alive.<br>
        <br>
        -Stu :eek:</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">3rd September 2003 23:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">So... finally... My conscience won the fight with me :)<br>
        Sorry again for such a long delay...<br>
        Hope it will satisfy all your needs.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">DougCox</span><br>
        <span class="post-time small text-muted">4th September 2003 17:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">brainsucker:<br>
        Your Notify Icon Plugin looks awesome!</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">n0On3</span><br>
        <span class="post-time small text-muted">5th September 2003 13:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">why is the traybar called 'taskbar notification area'? Regular taskbar also notifies that some program is running.<br>
        <br>
        Show me the light! :)</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 17:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Who knows... You probably should sue Microsoft ;)</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Great work, and thanks.<br>
        Right now however, when calling NotifyIcon::Icon r, my installer crashes.<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 19:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Which system you are using? works fine for me under winxp. will check under 98.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 19:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">I am also on Windows XP-Pro.<br>
        See attached script.<br>
        <br>
        I'm using the remove call in .onInstSuccess .onUserAbort and my custom Abort function.<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 19:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">What about demo script?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">5th September 2003 20:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Never unload UI plug-ins from .onUserAbort and .onInstSuccess, use .onGUIEnd.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><strong>Testing script</strong><br>
        \/</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Ah thanks Kichik, I shall try that.<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Well, after using it in .onGUIEnd, the icon isn't removed at all.<br>
        <br>
        Updated testing attachment<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">5th September 2003 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">It's probably because the window is already destroyed. The plug-in should check to see if the window is destroyed and self-desrtuct if that's the case. For now remove it in the last section.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">What about when the user clicks cancel; use it in the custom page function if IO pops cancel?<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Huh, I will discuss with Kichik what to do... Problem found.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">There is also a problem that the installer doesn't close automatically, so the tray icon will get distroyed before the install has properly finished.<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 20:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Well, the good news is that it doesn't crash when called inside the custom page after the user clicks cancel.<br>
        Now, I'll wait for the self-distruct sequence :)<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 20:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Afrow, could you please test BrowseForFolder and BrowseForFolderNew rountines separately (be sure to update the system and exehead to latest cvs versioun).<br>
        <br>
        p.s. updated NotifyIcon.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">5th September 2003 21:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Afrow UK: a small tip: you could skip constant parameters, for example if you use the same icon every time you could skip "i" "103". The same goes for tip at your dday.<br>
        <br>
        Also, IMHO: poping up a info balloon message for every file you are downloading could be a little disturbing for user, may be you should move that info to tip, and popup only on "completed" or "failed" messages?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 21:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Thanks for the tips.<br>
        They are good ideas!<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 21:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Well, it seems that the problem is fixed.<br>
        I am now calling the plugin to remove the notifyicon from .onGUIEnd only, and it works fine, without a crash.<br>
        <br>
        Many D-Dayers are looking forward to the new installer.<br>
        Thanks for writing this excellent plugin!<br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">5th September 2003 21:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Mind writing an archive page for it Afrow? I'll upload the zip to the archive.<br>
        <br>
        [edit] uploaded to <a href="http://nsis.sourceforge.net/archive/download.php?file=NotifyIcon.zip" target="_blank">http://nsis.sourceforge.net/archive/...NotifyIcon.zip</a> [/edit]</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
        <span class="post-time small text-muted">5th September 2003 21:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"><a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=402&amp;instances=0" target="_blank">http://nsis.sourceforge.net/archive/...02&amp;instances=0</a><br>
        <br>
        -Stu</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
        <span class="post-time small text-muted">17th September 2003 04:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">it appears, that the systray icon does not get displayed properly.<br>
        <br>
        my icon file consists of various sizes (including 16x16 pixels). the script uses the icon from the executable (103). the icon in the systray looks like a badly downsampled version of a larger icon. why doesn't it simply display the included 16x16 icon?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
        <span class="post-time small text-muted">17th September 2003 05:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">having opened the .exe in a resource editor, i figured 103 is the id of the icon. now is there a way to further specify the icon size to use for the systray?</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">17th September 2003 09:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content"></p>

        <blockquote>
          <i>Originally posted by n0On3</i><br>
          <b>why is the traybar called 'taskbar notification area'? Regular taskbar also notifies that some program is running.<br>
          <br>
          Show me the light! :)</b>
        </blockquote>Find out <a href="http://blogs.gotdotnet.com/raymondc/commentview.aspx/5a811e6f-cd12-48de-8994-23409290faea" target="_blank">here</a>.
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">n0On3</span><br>
        <span class="post-time small text-muted">17th September 2003 14:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">mmm.... those reasons didn't convince me.<br>
        <br>
        I suspect this is another lost war.<br>
        <br>
        He can join Richard Stallman who fights to make people call open-source "free software" and Linux "GNU/Linux".<br>
        <br>
        Thanks for the link, interesting read.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">17th September 2003 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">That's one of Windows 95 developers, you won't find a better answer ;)</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">17th September 2003 23:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">killahbite: 103 is the number of icon group. and i know no particular way to specify which icon from group to use (the approriate icon should be selected by windows).</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
        <span class="post-time small text-muted">18th September 2003 02:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">the current version downsizes the 32x32 icon to 16x16. it should load the default 16x16 icon instead!</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
        <span class="post-time small text-muted">18th September 2003 21:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">killahbite :) sorry, i couldn't help you. Create additional icon group from one 16x16 icon (it shouldn't take much space) and use it as NotifyIcon icon.</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
        <span class="post-time small text-muted">19th September 2003 13:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

        <p class="post-content">Specifying 16x16 in the desired size should do it. According to Wine source code, LoadImage searches for the best match.</p>
      </div>
      <hr>
      
      
      <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]-->

      <div class="container">
        

        <ol class="breadcrumb">
          <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

          <li><a href="f-65.html">NSIS Discussion</a></li>

          <li class="active">Tray icon</li>
        </ol>

        <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=144126">Tray icon</a></p><br>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
          <span class="post-time small text-muted">19th September 2003 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">bright idea Kichik :)<br>
          I'll check and update a bit later...</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">brainsucker</span><br>
          <span class="post-time small text-muted">19th September 2003 18:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Fixed. Now uses 16x16 as default icon size. The previous behaviour could be selected by '.' flag before f, s, or i.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
          <span class="post-time small text-muted">20th September 2003 10:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Uploaded.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">20th September 2003 10:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">My icon file has a 16x16 icon in it too, but it shows up correctly on the older dll.<br>
          Maybe it's the program you used to create the icon.<br>
          Also, I'm sure the order of the icons inside the file can affect which icon(s) is used.<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
          <span class="post-time small text-muted">17th August 2005 19:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">would it be possible to add a flag, that minimizes the installer to the tray when one clicks on the minimize icon?</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">flyakite</span><br>
          <span class="post-time small text-muted">12th December 2005 20:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Would it be possible to add a feature that when you click on the balloon it calls a function? I have a balloon tip appear when an app. is run silently, and I would like that when you click on the tip it shows a message box asking the user if they would like to restart.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">BioDuo</span><br>
          <span class="post-time small text-muted">22nd February 2006 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content"></p>

          <blockquote>
            <i>Originally posted by flyakite</i><br>
            Would it be possible to add a feature that when you click on the balloon it calls a function?
          </blockquote>I would love so such an option.<br>
          <br>
          I think I found a bug:<br>
          When I run NotifyIcon::Icon /NOUNLOAD in the .onInit or with SilentInstall enabled, at the moment the mouse goes over the trayicon, it simply disappears.
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">22nd February 2006 14:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">I think it's already mentioned in this topic (or in the readme I can't remember) but you can't call the plugin in .onInit because at that point the GUI has not been initialised yet. Notification icons are tied with a Windows GUI and therefore you should call the plugin while the window is in memory - in .onGUIInit. Also, to remove it call in .onGUIEnd.<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">22nd February 2006 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Where does it access the icon from?<br>
          With the default it works but not with my custom one<br>
          Does the icon need to be extracted with File</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">22nd February 2006 21:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">If you don't specify the default icon (105) you specify a full path to an icon file which logically you'd need to extract :).<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">23rd February 2006 06:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Instead of using X:\t could I use \t ?</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">23rd February 2006 15:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Just extract the icon to $PLUGINSDIR and give it that path.<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">25th February 2006 03:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Still doesn't work<br>
          I have extracted to C:\icon.ico<br>
          but still doesn't work<br>
          Using<br>
          NotifyIcon::Icon /NOUNLOAD "fpb" "C:\icon.ico" "START" "Balloon!" "Cool!"</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">25th February 2006 04:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Oops<br>
          Working now<br>
          Forgot to add y<br>
          :)</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">25th February 2006 06:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">When you use this in conjuction with wansis, the skin window stays up.<br>
          Is there a way to fix this???</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">stevelam</span><br>
          <span class="post-time small text-muted">25th February 2006 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content"></p>

          <blockquote>
            <i>Originally posted by rmccue</i><br>
            <b>When you use this in conjuction with wansis, the skin window stays up.<br>
            Is there a way to fix this???</b>
          </blockquote>Hey rmccue I knew it would be you when I saw the topic title on the NSIS homepage!
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">25th February 2006 22:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Hi Steve<br>
          But can anyone answer my q?</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">26th February 2006 20:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Maybe call a custom function on minimize and maximize</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">BioDuo</span><br>
          <span class="post-time small text-muted">21st March 2006 09:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">My program notfies the user if something happens and displays it in a balloon (yeah,.. really! :P)<br>
          <br>
          But I want that if the user click on the balloon a certain action is performed, how do I do that?</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">21st March 2006 18:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">There isn't a way I'm afraid.<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Mr Inches</span><br>
          <span class="post-time small text-muted">23rd March 2006 21:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">So I wonder how that (annoying) "Take the Windows Tour" balloon and the "Windows Update" ballon do it then, they launch Wizards/applications when you click on them...<br>
          <br>
          I think this is the functionality that is sought.<br>
          <br>
          I might take a look, it would be interesting to know its done.<br>
          <br>
          Duncan</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">23rd March 2006 22:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">There is no way via a run-time plugin to call an internal NSIS function from some event. For this to be possible we'd need modifications to the original NSIS source code, or perhaps when compiler plugin support is added this will be possible. I doubt it will get implemented because this would add to installer overhead no doubt.<br>
          <br>
          -Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
          <span class="post-time small text-muted">23rd March 2006 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Actually, you can already call NSIS functions from plug-ins. ExecuteCodeSegment is exported to plug-ins through the extra_parameters structure passed on as the fifth function argument. However, the scripting engine is not multi-threaded, so it's up to the plug-in to synchronize it.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">rmccue</span><br>
          <span class="post-time small text-muted">24th March 2006 23:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Anyway, how would I get it to shrink the wansis window? I'm using FindWindow, ShowWindow in a custom function.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">zeeh3</span><br>
          <span class="post-time small text-muted">20th May 2008 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">I need some help here... the plugin doesn't allow me to HideWindow and I can't get "p" nor "!p" params to work with the NotifyIcon.nsi that comes in zip file (v0.2).</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Alfaromeo</span><br>
          <span class="post-time small text-muted">18th May 2010 08:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">I need to show the system tray icon during an upgrade process. The upgrade will be triggered using the silent switch to make it silent.<br>
          Is this feasible using the NotifyIcon plugin ? If not what are my options.</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
          <span class="post-time small text-muted">18th May 2010 12:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">It's been a while since I looked at the code but it probably doesn't show any notification icon if the installer is silent. If that is the case you would need to modify the plugin to allow a force show option or something that overrides this behaviour. If you don't use the plugin you'll be using System with a lot of SendMessage lines (which the Win32 macros use internally) so it'd be pretty painful.<br>
          <br>
          Stu</p>
        </div>
        <hr>

        <div class="post">
          <p class="post-meta"><span class="post-author text-primary">Alfaromeo</span><br>
          <span class="post-time small text-muted">18th May 2010 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

          <p class="post-content">Yes it is a nice switch to have because on silent , this can be a kind of notification to the user .<br>
          I'm surely in dire need of this.</p>
        </div>
        <hr>

        <div class="footer">
          <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
        </div>
      </div><script src="../js/highlight.pack.js" type="text/javascript">
</script> <script type="text/javascript">
//<![CDATA[
      hljs.initHighlightingOnLoad();
      //]]></script></div></div></body></html>