<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="GetScreenResolution?"><title>GetScreenResolution? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">GetScreenResolution?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264936">GetScreenResolution?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">aerDNA</span><br><span class="post-time small text-muted">2nd February 2007 18:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>GetScreenResolution?</strong><br>Two questions from an NSIS newbie:<br><br>1. Is there a way to get the screen resolution on user system? I'm using the BgImage plugin to place text in the center of the screen (hidden behind the installer window) but the AddText and AddImage functions take absolute position values so for the text to be centered on all systems, position should be relative to screen resolution.<br><br>2. Does the location of .onInit function within the script matter? I've noticed that in most example scripts it's at the end. When I change its position and generally when I shuffle script elements, functionality remains the same but I get slightly different installer sizes; difference is negligible (a few bytes) but still, I'm wondering... Could someone tell me what's the optimal script structure regarding the compiler (e.g. 1.pages, 2.sections, 3.user functions, 4.callback functions...)?<br><br>THX in advance</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">2nd February 2007 18:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>1. Is there a way to get the screen resolution on user system? I'm using the BgImage plugin to place text in the center of the screen (hidden behind the installer window) but the AddText and AddImage functions take absolute position values so for the text to be centered on all systems, position should be relative to screen resolution.</blockquote><a href="http://nsis.sourceforge.net/Get_User%27s_screen_resolution" target="_blank">http://nsis.sourceforge.net/Get_User...een_resolution</a><br><br><blockquote>2. Does the location of .onInit function within the script matter? I've noticed that in most example scripts it's at the end. When I change its position and generally when I shuffle script elements, functionality remains the same but I get slightly different installer sizes; difference is negligible (a few bytes) but still, I'm wondering... Could someone tell me what's the optimal script structure regarding the compiler (e.g. 1.pages, 2.sections, 3.user functions, 4.callback functions...)?</blockquote>If you don't change the script structure the produced installers are always identical in size?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aerDNA</span><br><span class="post-time small text-muted">3rd February 2007 20:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks, Red Wine! The link you posted solves my problem.<br>And to answer your question, yes, when I recompile the script without changing the structure, the output is always identical in size. But when I, for instance, move .onInit from the beginning to the end of the script, exe is 40 bytes larger. For me it's a bit confusing because I figured it didn't matter to compiler. I might as well mention that I'm running Win98 on P4 (I know, I know...)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">3rd February 2007 20:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>I might as well mention that I'm running Win98 on P4</blockquote>I guess one may call it an effortless P4 ;)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">4th February 2007 15:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by aerDNA</i><br><b>But when I, for instance, move .onInit from the beginning to the end of the script, exe is 40 bytes larger.</b></blockquote>I would be worried if those bytes were MegaBytes.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aerDNA</span><br><span class="post-time small text-muted">4th February 2007 17:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Joel</i><br><b>I would be worried if those bytes were MegaBytes.</b></blockquote>Of course, you're right, it's nothing to be worried about, I was just wondering why that happens.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th February 2007 19:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That happens because the data is compressed. Compression results differ not only by the size of the data, but also by the data itself and the order of blocks in it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aerDNA</span><br><span class="post-time small text-muted">7th February 2007 19:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>That happens because the data is compressed. Compression results differ not only by the size of the data, but also by the data itself and the order of blocks in it.</b></blockquote>Thanks. I know that data order affects compression but it never crossed my mind. The reason of my confusion was that I presumed that the compiler internally restructures the script according to a certain protocol to optimize installer execution and that .onInit code would wind up in the same place no matter where you put it in the script. But it matters, obviously, and your explanation makes perfect sense.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>