<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Function Definition Problems" />

  <title>Function Definition Problems - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Function Definition Problems</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322383">Function Definition Problems</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">greena23</span><br />
      <span class="post-time small text-muted">13th September 2010 11:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Function Definition Problems</strong><br />
      Hi,<br />
      <br />
      I am reusing an old function I used on another installer of mine. It is one I found online to check the version of a file. I runs fine in the other installer, but in the other one is gives this error -<br />
      <br />
      !define: "GetFileVersion" already defined!<br />
      Error in Script "(script location and name)" on line 203 -- aborting creation process<br />
      <br />
      The code itself is:<br />
      <br />
      Function GetFileVersion<br />
      <br />
      !define GetFileVersion `!insertmacro GetFileVersionCall`<br />
      <br />
      !macro GetFileVersionCall _FILE _RESULT<br />
      Push `${_FILE}`<br />
      Call GetFileVersion<br />
      Pop ${_RESULT}<br />
      !macroend<br />
      <br />
      Exch $0<br />
      Push $1<br />
      .......<br />
      .......<br />
      <br />
      I have checked and there are no other references to GetFileVersion in the code.<br />
      <br />
      Has anyone any suggestions?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">13th September 2010 11:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">First of all, I wouldn't put define and macro declarations inside a function, it looks ugly. I'm not even sure if it's valid NSIS code, but I've never looked into that so whatever. But if the compiler says something's already defined, then it's already defined. Look in your include files, for example.<br />
      <br />
      Either way, get those declarations out of that function.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">greena23</span><br />
      <span class="post-time small text-muted">13th September 2010 12:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If it is helpful this is where I got the code from<br />
      <br />
      <a href="http://nsis.sourceforge.net/GetFileVersion" target="_blank">http://nsis.sourceforge.net/GetFileVersion</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">greena23</span><br />
      <span class="post-time small text-muted">13th September 2010 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If this is in anyway helpful this is where I got the code for the version check.<br />
      <br />
      <a href="http://nsis.sourceforge.net/GetFileVersion" target="_blank">http://nsis.sourceforge.net/GetFileVersion</a><br />
      <br />
      I have search but cannot find at all where they were defined before. I did a ctrl+f aswell and nothing.<br />
      <br />
      Any help would be much appreciated</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">13th September 2010 13:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Are you maybe including FileFunc.nsh?<br />
      This function is defined there nowadays:<br />
      <a href="http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.8" target="_blank">http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.8</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">greena23</span><br />
      <span class="post-time small text-muted">13th September 2010 15:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was unaware it was defined in FileFunch.nsh I've removed code and it compiles now. However I have a different problem. I am taking this version no. and I am trying to compare it with a set version number. However it keeps saying my version is newer even when it isn't.<br />
      <br />
      I am using this code <a href="http://nsis.sourceforge.net/Comparing_Two_Version_Numbers" target="_blank">http://nsis.sourceforge.net/Comparin...ersion_Numbers</a> to compare the version numbers. However I cannot understand why the it is always saying the version is newer</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th September 2010 17:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use VersionCompare from WordFunc.nsh<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
