<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="keep the language user choose" />

  <title>keep the language user choose - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">keep the language user choose</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308420">keep the language user choose</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skuallpa</span><br />
      <span class="post-time small text-muted">16th July 2009 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>keep the language user choose</strong><br />
      Hello,<br />
      <br />
      I am making an installer in several languages<br />
      <br />
      So I use<br /></p>
      <pre>
<code>;Languages     <br />!insertmacro MUI_LANGUAGE "English" ;first language is the default language   <br />!insertmacro MUI_LANGUAGE "French"   <br />!insertmacro MUI_LANGUAGE "German"   <br />!insertmacro MUI_LANGUAGE "Spanish"</code>
</pre><br />
      <br />
      I want to write a key in the register in function of the choice of the language. How can I do that? I mean, how can I do<br />
      <br />
      <pre>
<code>if(user selected french)<br />  WriteRegStr HKLM "Software\MySoft" "Language" "FR"<br />else if(user selected spanish)<br />  WriteRegStr HKLM "Software\MySoft" "Language" "ES"<br />...<br /></code>
</pre><br />
      Thanks in advance for your help
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">16th July 2009 14:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Search the documentation for "Settings for registry storage of selected language"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skuallpa</span><br />
      <span class="post-time small text-muted">16th July 2009 14:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks jpderuiter for your answer!<br />
      <br /></p>
      <pre>
<code><br />Function .onInit<br /><br />  !insertmacro MUI_LANGDLL_DISPLAY<br /><br />FunctionEnd<br /></code>
</pre><br />
      <br />
      Just a question for the implementation. In the doc, it is written<br />
      <br />

      <blockquote>
        To remember the user's preference, you can define a registry key. These defines should be set before inserting the installation page macro.<br />
        MUI_LANGDLL_REGISTRY_ROOT root<br />
        MUI_LANGDLL_REGISTRY_KEY key<br />
        MUI_LANGDLL_REGISTRY_VALUENAME value_name<br />
        <br />
        The registry key to store the language. The users preference will be remembered. You can also use it for the uninstaller to display the right language. Don't forget to remove this key in the uninstaller.
      </blockquote>I am a little confused. How should I defines this key<br />
      <br />
      MUI_LANGDLL_REGISTRY_ROOT = HKLM<br />
      MUI_LANGDLL_REGISTRY_KEY = Language<br />
      MUI_LANGDLL_REGISTRY_VALUENAME = FR ?<br />
      <br />
      and then write WriteRegStr MUI_LANGDLL_REGISTRY_ROOT MUI_LANGDLL_REGISTRY_KEY MUI_LANGDLL_REGISTRY_VALUENAME?<br />
      <br />
      Can you give me a little example?<br />
      <br />
      Thanks in advance
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">16th July 2009 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">All you need to do is to define the three values.<br />
      No need for WriteRegStr.<br />
      See the MUI MultiLanguage example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skuallpa</span><br />
      <span class="post-time small text-muted">16th July 2009 15:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks again jpderuiter<br />
      <br />
      I have done some tests<br />
      <br /></p>
      <pre>
<code><br />!define MUI_LANGDLL_REGISTRY_ROOT HKLM<br />!define MUI_LANGDLL_REGISTRY_KEY "Software\MySoft"<br />!define MUI_LANGDLL_REGISTRY_VALUENAME "InstallerLanguage"</code>
</pre><br />
      <br />
      After the installation I have well the value written in the register (I had selected French for installation)<br />
      <br />
      <a href="http://img23.imageshack.us/img23/5137/registerl.jpg" target="_blank">http://img23.imageshack.us/img23/5137/registerl.jpg</a><br />
      <br />
      But I have read in an other post that we can used the $LANGUAGE in order to know the language that the user has choosen.<br />
      <br />
      So I have tried to write<br />
      <br />
      <pre>
<code>WriteRegStr HKLM "Software\MySoft" "Language" "${LANGUAGE}"</code>
</pre><br />
      <br />
      But here is the result<br />
      <a href="http://img16.imageshack.us/img16/264/register2l.jpg" target="_blank">http://img16.imageshack.us/img16/264/register2l.jpg</a><br />
      <br />
      Why is the value $LANGUAGE ant not FR ?<br />
      <br />
      Thanks in advance
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skuallpa</span><br />
      <span class="post-time small text-muted">16th July 2009 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have corrected the second point by replacing<br />
      <br /></p>
      <pre>
<code>WriteRegStr HKLM "Software\MySoft" "Language" "${LANGUAGE}"</code>
</pre><br />
      <br />
      by<br />
      <br />
      <pre>
<code>WriteRegStr HKLM "Software\MySoft" "Language" "$LANGUAGE"</code>
</pre><br />
      <br />
      But is there a way to write for example FR instead of 1036 (for french)?. I mean, is it possible to write the tag of the language instead of the code of the language?<br />
      <br />
      Thanks in advance
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">16th July 2009 16:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can't with MUI as it is.<br />
      You'll have to modify the MUI plugin to do that.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">skuallpa</span><br />
      <span class="post-time small text-muted">17th July 2009 06:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok thanks for your reply. This is what I have finally done<br />
      <br /></p>
      <pre>
<code><br />${If} $LANGUAGE == 1031<br />   WriteRegStr HKLM "Software\KeyLemon" "Language" "DE"<br />${ElseIf} $LANGUAGE == 1033<br />   WriteRegStr HKLM "Software\KeyLemon" "Language" "EN"<br />${ElseIf} $LANGUAGE == 1034<br />   WriteRegStr HKLM "Software\KeyLemon" "Language" "ES"<br />${ElseIf} $LANGUAGE == 1036<br />   WriteRegStr HKLM "Software\KeyLemon" "Language" "FR"<br />${Else}<br />   WriteRegStr HKLM "Software\KeyLemon" "Language" "EN"<br />${EndIf} <br /></code>
</pre><br />
      <br />
      I get the language code here: <a href="http://www.science.co.il/language/Locale-Codes.asp?s=country" target="_blank">http://www.science.co.il/language/Lo....asp?s=country</a><br />
      <br />
      I just need a precision. I have seen that there is a full of different code for french or spain language for example<br />
      <br />
      For example<br />

      <blockquote>
        French (France) 1036<br />
        French (Cameroon) 11276<br />
        French (Congo, DRC) 9228<br />
        French (Cote d'Ivoire) 12300<br />
        French (Mali) 13324 340c<br />
        French (Morocco) 14348<br />
        French (Senegal) 10252<br />
        French (West Indies) 7180
      </blockquote>If the user choose french for installation. Can I be sure that the returned language code is 1036 or it could be another one?<br />
      <br />
      Thanks in advance
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">17th July 2009 08:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, if the user chooses french, the language code will be 1036.<br />
      It is defined in the French.nlf file in the Contrib\Language files folder of NSIS.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
