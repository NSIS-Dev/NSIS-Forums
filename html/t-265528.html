<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Jump back over a disabled page" />

  <title>Jump back over a disabled page - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Jump back over a disabled page</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265528">Jump back over a disabled page</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrWatson</span><br />
      <span class="post-time small text-muted">10th February 2007 16:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Jump back over a disabled page</strong><br />
      Hi there,<br />
      <br />
      disabling a certain page during install is easy. You execute 'Abort' in the page's pre_function or the custom page's creator_function.<br />
      <br />
      If you press the 'Back' button in a page that follows an aborted page, the aborted page's pre_function is called and the 'Abort' is executed again which results in an exit of the installer.<br />
      <br />
      In this situation I would need the information that the page which will be aborted is called from the next page of the wizard and I would need a command to call the previous page before aborting.<br />
      <br />
      Is that possible in any way ?<br />
      <br />
      Thanks a lot for every help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">10th February 2007 20:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        If you press the 'Back' button in a page that follows an aborted page, the aborted page's pre_function is called and the 'Abort' is executed again which results in an exit of the installer.
      </blockquote>This happens only when the 'aborted page' is the 1st page in pages sequence, and sounds quite normal if you hit back from the 2nd page then 1st is aborted, where do you think it should jump?<br />
      <br />
      If you want to avoid the possible back thus the end of the installer, you should add some code that disables the back button in 2nd page to cover this case.<br />
      <br />
      There is a related example at wiki,<br />
      <br />
      <a href="http://nsis.sourceforge.net/Demonstrating_Page%27s_Custom_Functions_Pre_Show_Leave" target="_blank">http://nsis.sourceforge.net/Demonstr...Pre_Show_Leave</a>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrWatson</span><br />
      <span class="post-time small text-muted">11th February 2007 08:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Unfortunately it's not the first page in the page sequence:<br />
      <br />
      !insertmacro MUI_PAGE_WELCOME<br />
      Page custom MUI_CUST_UPGRADE<br />
      !insertmacro MUI_PAGE_LICENSE "$(TEXT_License)"<br />
      ...<br />
      <br />
      Function MUI_CUST_UPGRADE<br />
      ;If VersionCheck detects no installed version, this page needs not to be shown<br />
      ${If} $CURRENT_VERSION == ""<br />
      Abort<br />
      ${EndIf}<br />
      ;Otherwise display warning message on page<br />
      !insertmacro MUI_HEADER_TEXT "$(TEXT_UpgradeTitle)" "$(TEXT_UpgradeSubTitle)"<br />
      ...<br />
      <br />
      The jump should go back from the license page to the welcome page, which works well if the custom page is not programmed. In addition, all back jumps are working, if the custom page is not aborted.<br />
      <br />
      Any other ideas ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">11th February 2007 09:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'd suggest check your code twice,<br />
      the following example shows a custom page when a custom install is selected and never exits the installer no matter how many back/next performed.<br /></p>
      <pre>
<code>OutFile 'test.exe'<br />InstallDir "$PROGRAMFILES\boo"<br />LicenseData '${NSISDIR}\License.txt'<br /><br />InstType Typical<br />InstType Full<br /><br />Page License<br />Page Components<br />Page Custom custcreate<br />Page Directory<br />Page InstFiles<br /><br />Section "common" sec1<br />   SectionIn 1 2<br />SectionEnd<br /><br />Section "data" sec2<br />   SectionIn 1 2<br />SectionEnd<br /><br />Section /o "examples" sec3<br />   SectionIn 2<br />SectionEnd<br /><br />Function custcreate<br />   GetCurInstType $0<br />   StrCmp $0 32 next<br />   Abort<br /> next:<br />   InstallOptions::Dialog "$PLUGINSDIR\custom.ini"<br />FunctionEnd<br /><br />Function .onInit<br />   InitPluginsDir<br />   GetTempFileName $0<br />   Rename $0 "$PLUGINSDIR\custom.ini"<br /><br />   WriteINIStr "$PLUGINSDIR\custom.ini" "settings" "numfields" "1"<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "type" "groupbox"<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "text" "I'm a GroupBox, or not..."<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "left" "10"<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "right" "-10"<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "top" "10"<br />   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "bottom" "-10"<br />FunctionEnd</code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
