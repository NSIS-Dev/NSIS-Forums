<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Extract NSIS installations with 7-zip (4.40 beta and up)"><title>Extract NSIS installations with 7-zip (4.40 beta and up) - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Extract NSIS installations with 7-zip (4.40 beta and up)</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245098">Extract NSIS installations with 7-zip (4.40 beta and up)</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">1st May 2006 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Extract NSIS installations with 7-zip!</strong><br>FYI:<br>7-zip (<a href="http://www.7-zip.org" target="_blank">www.7-zip.org</a>) just released 4.40 beta which has the ability to extract files from an NSIS installation.<br><br>The notes say that it exports "some" NSIS installations, so it must have something to do with the compression method used. (It seems to work OK with standard NSIS LZMA compression. Haven't tested any others.)<br><br>Here's the SourceForge page for it:<br><a href="http://sourceforge.net/projects/sevenzip/" target="_blank">http://sourceforge.net/projects/sevenzip/</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ggf31416</span><br><span class="post-time small text-muted">2nd May 2006 02:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: Extract NSIS installations with 7-zip!</strong><br></p><blockquote><i>Originally posted by Comperio</i><br><b>FYI:<br>7-zip (<a href="http://www.7-zip.org" target="_blank">www.7-zip.org</a>) just released 4.40 beta which has the ability to extract files from an NSIS installation.<br><br>The notes say that it exports "some" NSIS installations, so it must have something to do with the compression method used. (It seems to work OK with standard NSIS LZMA compression. Haven't tested any others.)<br><br>Here's the SourceForge page for it:<br><a href="http://sourceforge.net/projects/sevenzip/" target="_blank">http://sourceforge.net/projects/sevenzip/</a></b></blockquote>According to my tests, 7-zip can extract installers with BCJ/LZMA, LZMA and Zlib compression. Extraction from bzip2 installers don't work.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ggf31416</span><br><span class="post-time small text-muted">2nd May 2006 05:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">From the 7-zip Open Discussion forum, "When does "7-Zip" support more formats ???"<br><a href="http://sourceforge.net/forum/forum.php?thread_id=1329708&amp;forum_id=45797" target="_blank">http://sourceforge.net/forum/forum.p...forum_id=45797</a><br><br>"<i>By: Igor Pavlov - ipavlov<br>RE: NSIS Support<br>2006-05-02 00:57<br>NSIS uses modified Deflate (zlib). 7-Zip supports it.<br>NSIS uses modified BZip2. 7-Zip doesn't support it now.</i>"</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">2nd May 2006 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>7-Zip 4.4</strong><br><b>What's new:<br>- 7-Zip now can unpack some installers created by NSIS</b><br><br>any details on what it does?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Koopa</span><br><span class="post-time small text-muted">2nd May 2006 20:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It simply unpacks the files, wich are integrated in the installer.<br><br>It is not able to decompile your installer. 7Zip users have no access to your .nsi script. ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br><span class="post-time small text-muted">2nd May 2006 20:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">what about the [NSIS].nsi entry? ;) but from what someone who knows said, there's a few things which could be done to improve the script decompile. the main thing really is to allow you to access any files in the installer exe assuming it was built in one of the methods that it currently supports (seems that bzip2 installers aren't going to work at the moment <a href="http://forums.winamp.com/showthread.php?postid=1922378#post1922378" target="_blank">ref</a>)<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Koopa</span><br><span class="post-time small text-muted">2nd May 2006 20:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>what about the [NSIS].nsi entry?</blockquote>I guess it's not a valid script, or am I wrong?<br><br>You have to change parts in the [NSIS].nsi, otherwise it will not compile.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">2nd May 2006 20:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">double posting<br><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=245098" target="_blank">http://forums.winamp.com/showthread....hreadid=245098</a><br><br><font color="orange">## already merged ##</font></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br><span class="post-time small text-muted">2nd May 2006 21:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">that's what needs the tweaks so it would create a compilable [NSIS].nsi<br><br>Brummelchen: already noted by the ref i did in my last post, just ran out of time to merge the two threads together like it is now ;)<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">2nd May 2006 22:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">the extracted script is not ready to work - it only shows<br>an approximate script to get the idea behind.<br>i have in mind that nsis compiles the script for runtime use<br>and not for scripting base. works like aPatch or a codefusion<br>patch where the instructions are hold inside encoded.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br><span class="post-time small text-muted">2nd May 2006 23:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">all i'm going on is what kichik mentioned briefly when it was brought up that there was the [NSIS].nsi shown. i can't remember what was fully said but i'm sure he said that it's possible to improve what's decoded to get closer if not to be able to allow compiling of the script. i could be wrong so please don't hold me to it<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br><span class="post-time small text-muted">5th May 2006 10:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well as you people know innosetup have a special unpacker to unpack installation and nicer arrange the script.<br><br>7zip also does the same to zlib and lzma, where it actually made the nsi script so nicerly that using username and password can be shown so clearly. basically the unauthorised just need to use one set of access to enter the installer or just grab the files being extracted.<br><br>I just really hope nsis could become a better security on this one as I see many many people using it because it is a really good installer compiler and " The Way Of Art Script ".<br><br>Thanks for all at least bzip2 should do the job.For the time being.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">5th May 2006 19:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">lzma is cracked in simple words :(<br><br>i made a test package for me with password in lzma and it<br>was clear to read either other methods were very clear.<br><br>i have my own solution now but using bzip2 is the only way<br>for the moment.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Koopa</span><br><span class="post-time small text-muted">5th May 2006 21:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>i have my own solution now but using bzip2 is the only way</blockquote>Yep, but LZMA compression creates smaller files.<br><br>I guess later 7z versions will be able to unpack bzip2 compressed installers too</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">6th May 2006 01:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you put plain-text passwords in your script, they can be extracted anyway. The introduction of this 7-zip feature makes no difference.<br><br>The "decompiled" scripts are also completely useless for most purposes, it's a bit like viewing the assembly code of an application. Everything done by the preprocessor, all names, high-level logic etc. are gone. So it's not like someone could steal your complete script.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">8th May 2006 11:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you want to be sure of security you can write an Plugin for special functions.<br><br>As said before, 7Zip is not able to decompile your installer fully. 7Zip users have no access to your .nsi script.<br><br>Idea: Use an uncompressed NSIS installer and pack with UPX. (which is also unpackable, but not with 7ZIP ;)<br><br>* But better make a plugin if you want to be sure of security via special functions *<br><br>Or, since one has the NSIS source, one can alter the code and take some measure one think are useful (e.g. reversed/scrambleblock of LZMA format). That is one of the main advantages of having Open Source!<br><br>BTW<br>- MSI is "un-packable" also, MS own ORCA tool helps there ;)<br>- NSIS is an installer tool, not a protector tool</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">No login</span><br><span class="post-time small text-muted">11th May 2006 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>This shouldn't be a surprise</strong><br>This shouldn't surprise anyone - I routinely extract NSIS, InstallShield and MSI files before I install them as a precautionary measure. When some ambitious developer thinks he'll disguise his installer, I use a virtual machine to make before/after snapshots to double-check, then package up the snapshot differences as a replacement for the faulty original installer.<br><br>Look, it's an installer. It's little more than a dressed-up self extracting archive. There are legitimate reasons for end users to browse installer .exe files, and I'm glad Igor implemented NSIS support into 7-Zip as the tool I was using was quite unfriendly. Depending on how modular his code is, I may adapt 7-Zip to support MSI and InstallShield as well.<br><br>Those of you trying to disguise your installers or convince Igor to cripple 7-Zip must have little experience in computer security - no matter what you do to your installers, you can't thwart a before/after snapshot from a virtual machine. If a user has bad intentions, this is what they'll do anyway - it doesn't matter what you do to the installer. And if they really want your script, they'll just attach a debugger and grab it from memory, or run the installer in a full CPU emulator.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">toffo</span><br><span class="post-time small text-muted">3rd October 2007 09:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I know this is an old thread, but it may be useful for others..<br>Normally I dont post just because I found a solution, but here I am..<br><br>I want my WinAmp so stripped I can, I have a license<br>for the Pro so I've used the full rock-on edition..<br>extracted it with 7zip and then just used the files in<br>the base folder..<br><br>winamp.exe, dll files and then started it up..<br>it created the ini file and such.. and I just saved my<br>settings.. now I have a perfect working fully stripped<br>and configured WinAmp just like I want it..<br><br>and the best of all.. just copy those files to a fresh<br>install of Windows and it works out of the box =D<br>no need to install it..<br><br>perfect for unattended windows xp ;)<br><br>// Chris</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>