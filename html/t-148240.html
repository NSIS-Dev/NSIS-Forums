<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Banner doesn't show"><title>Banner doesn't show - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Banner doesn't show</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148240">Banner doesn't show</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">5th September 2003 19:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Banner doesn't show</strong><br>The banner plugin doesn't show in the latest CVS</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th September 2003 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks, fixed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">5th September 2003 20:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Was there changes made to the banner plugin, if so was it to remove the task bar item?<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th September 2003 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">6th September 2003 00:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">eek! Banner doesn't show the text</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th September 2003 09:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Works fine for me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">7th September 2003 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Lobo is right. There is problem with it (for me it occurs whenever some window exists under banner dialog at the moment of startup). Moreover: after some time it stops responding to windows messages (seems so), so no repaint occur.<br><br>Also a small tip: the user may want sometimes to set separate window name and ICD_STR text, so may be you should check it is not already set.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">7th September 2003 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">On Win98SE the banner appears but has no text on it (I tried the 'Example.nsi' script in the Contrib\Banner folder).<br><br>[edit]The "Calculating.." text which is supposed to appear in the banner appears in the taskbar.[/edit]<br><br>I am using the 7 September (13:44 GMT) CVS snapshot which has Banner.DLL v1.5.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th September 2003 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It never responded to Windows messages in .onInit. I have fixed that along some other thing in some version, but that resulted in:<br><br><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=136605&amp;highlight=banner" target="_blank">http://forums.winamp.com/showthread....ghlight=banner</a><br><br>so I reverted back. Ramon was supposed to write a new version of Banner that would solve all known issues but got the same results as I did. We were both busy with other things so we left it aside for now.<br><br>Anyway, Banner shows for me every time and besides adding a ShowWindow command on WM_INITDIALOG nothing has changed about Banner. I will need an example.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th September 2003 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oh, of course... If it doesn't accept messages... Bah... Brainsucker, got time to rewrite it? :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">7th September 2003 15:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">thanks... I thought that It was only me. Testing in WinMe appears the banner but no text.<br>In WinXP is fine. It appers correcly, as older versions...<br>Is it fixed now?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th September 2003 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">8th September 2003 13:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I hate GUI. I hate windows GUI twice as much.<br><br>p.s. There are some changes on using at .onInit and some additional functionality. see banner.txt for my comments</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">8th September 2003 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You could of course use banner::destroy without /nounload at .oninit, but NSIS window will appear somewhere at background.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">emiste7</span><br><span class="post-time small text-muted">8th September 2003 14:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">My old banner two text in two different lines....<br>with the update....just the banner no text.<br>Downloaded the Banner1 from here ...same problem..no text.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">8th September 2003 15:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The new DLL in "banner1.zip" works OK on my Win98SE system. The 'Contrib\Banner\Example.nsi' script now works and in my MUI-based installer the banner now appears with two lines of text.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">8th September 2003 16:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">emiste7 could you post your script and you OS version here?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">emiste7</span><br><span class="post-time small text-muted">8th September 2003 18:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I just dowloaded the new version of the NSIS b4 and I used the banner in the Examples.<br>And I dowloaded your banner1.....doesnt work I cant see the text<br>OS XP pro<br>And this it was the old one<br>Function .onInit<br>Banner::show /NOUNLOAD /set 76 "Welcome from the team" "Vers. 2.1"<br>;&amp;&amp; This is much easier on the poor ol' CPU!<br>Sleep 1800<br>Banner::destroy</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">8th September 2003 19:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I know it's a stupid question, but have you copied banner.dll to your plugins dir? ;)<br><br>Ok. it shows the banner window but no text in it? strange. Could you please increase sleep value and drag some window over the banner. During this operation banner window saves it's contents (or its saves the contents of dragged window)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">emiste7</span><br><span class="post-time small text-muted">9th September 2003 02:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes I did......<br>I changed the time ......nothing.<br>I updated the NSIS nothing ,I uninstalled all .....because it wasnt showing in the Finish page the link and run checkbox.<br>I downloaded a new NSIS.....now I can see the text, both lines, but..probably is my immagination, I dont see the icon in the banner.<br>Is the usually an icon in the banner????<br>and The link and the run check box still missing.<br>I dont know......</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lzandman</span><br><span class="post-time small text-muted">9th September 2003 09:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I also noticed something strange using the banner-plugin. When I start my installer from a command-prompt (cmd.exe) in Windows XP the the banner is displayed too small. But when starting it using "start.exe" everything is just fine.<br><br>I guess the difference is, when it is started from cmd.exe the NSIS process is created using CreateProcess(). When started using "start.exe" it is started using ShellExecute(). But can anyone explain why the banner displays incorrectly?<br><br>BTW: I'm still using NSIS v2.0b3<br><br>Greetings,<br><br>Leon</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">9th September 2003 10:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">&gt; Is the usually an icon in the banner????<br>yes, there is usually icon at the MUI banners. his could be connected with troubles with MUI, since banner is using IDD_VERIFY dialog. also, /set 76 will work only at MUI installations, there is no such dialog item at usual nsis (just a tip, I didn't got which banner example you have used. If that is one from contrib\banner it will show only "ver2.1").<br><br>Leon: which banner you have tested? old (from cvs) or banner1?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lzandman</span><br><span class="post-time small text-muted">9th September 2003 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by brainsucker</i><br><b>Leon: which banner you have tested? old (from cvs) or banner1?</b></blockquote>The banner.dll itself doesn't have version info attached, so I can't tell you which version it is.<br><br>I've downloaded the file "NSIS 2.0 Beta 3a - Released March 15, 2003" from the NSIS website. I use the banner.dll that's included in that version.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th September 2003 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try the banner.dll that brainsucker attached here, that's banner1 (see the zip name). As for CVS, see <a href="http://nsis.sf.net/" target="_blank">http://nsis.sf.net/</a> for more information on development versions.<br><br>emiste7, as I've said <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=148349" target="_blank">here</a>, make sure you are using the latest CVS version and not that from 24 hours ago. See the sticky about CVS issues for more information about 24 hours lag. You should use the snapshot until SourceForge fix their CVS issues.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th September 2003 17:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Brainsucker, your Banner version (and my old new one too) pops strings from the stack on another thread. It can cause trouble because the user might use the stack on .onInit after calling Banner.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">9th September 2003 17:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">My ;) banner version waits till the other thread will pop arguments from stack ;) see the while (!hwBanner) Sleep(1); cycle. I was to lasy to pop them before analysis, so this is the easiest way (I think).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th September 2003 18:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ah, right... Probably is easier than poping them on the main thread...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th September 2003 20:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here is anoter version based on some of both worlds. This one works just as the old one (no need to use /NOUNLOAD for destroy and destroy again in a section). For now it's just a proof of concept, it just shows how it works. It is <b>not</b> for public usage as it contains debug messages (nothing you'll see unless you really want to) and it probably needs more testing. But it does resolve the problem with the installer poping on the background.<br><br>Please try it (but don't use it in your production installers for) and tell me if you find any problems.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">9th September 2003 23:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">hm. Sorry, kichik, but it doesn't work for me. the window is still at background. And Install options fail again here.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lzandman</span><br><span class="post-time small text-muted">10th September 2003 09:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Try the banner.dll that brainsucker attached here, that's banner1 (see the zip name). As for CVS, see <a href="http://nsis.sf.net/" target="_blank">http://nsis.sf.net/</a> for more information on development versions.</b></blockquote>Using banner1 it works. Thanx...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">10th September 2003 11:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oops, last minute addition killed it. Here's one that does show it on top. What do you mean by "Install options fail again here"?<br><br>The Banner.dll attached crashes if destroy is called a very short period of time after show, so don't use it except for checking that the dialog shows on the foreground.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">10th September 2003 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik, I tried using your revised banner.dll on my Win98SE system, using the 9 September (19:44 GMT) CVS snapshot. The Contrib\Banner\Example.nsi script worked OK but when I tried my MUI-based script, the installer crashed.<br><br>In my installer I have a custom page 'leave' function which displays a banner for 5 seconds. No banner appeared then after about 5 seconds I got the following error message:<br><br>THE-PROGRAM caused an invalid page fault in<br>module &lt;unknown&gt; at 0000:00cc102c.<br>Registers:<br>EAX=00000000 CS=0187 EIP=00cc102c EFLGS=00010202<br>EBX=00ddfa90 SS=018f ESP=00ddfa40 EBP=00ddfa5c<br>ECX=00000000 DS=018f ESI=00008ab4 FS=1b07<br>EDX=00008ad0 ES=018f EDI=00ddfa44 GS=57ff<br>Bytes at CS:EIP:<br><br>Stack dump:<br>bff7363b 00000724 00000046 00000000 00ddfad0 8a8e57ff 0000018f 00ddfa70<br>bff94407 57ff8ab4 000057ff 00000000 bff719b8 00008aae 00ddfd30 bff7186d<br><br>I'm not sure if 5 seconds counts as "a very short period of time" so the crash may not be a problem. However the banner did not appear (expected to see an icon and two lines of text)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">10th September 2003 12:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It always worked when the NSIS window already existed, that doesn't matter. I need to know if it works on .onInit. Should have been more clear on that, sorry.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">10th September 2003 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK, here's one that's not supposed to crash anywhere. It turned up well on all of my tests, .onInit and not .onInit. Please let me know if it crashes or doesn't behave as expected anywhere.<br><br>It also has some of Brainsucker's additions, namely the ability to hide the taskbar icon (set main text to "") and the ability to set a different text for the window and IDC_STR (/set 1030 "test" "another text"). I have not added the ability to disable the window because that's already possible with the built-in EnableWindow NSIS script instruction.<br><br>It's still full of debug information, so I don't recommend you use it in public installers (unless it's beta too, heh).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">10th September 2003 14:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik, sorry I missed the part about .onInit. After downloading the latest version of your DLL, I modified .onInit to display a banner for 5 seconds (the same banner as my custom page's 'leave' function).<br><br>The .onInit banner appeared (with the icon and two lines of text) when I started the installer. But when I reached the part where the custom page 'leave' function displays a banner, no banner appeared. This time no error appeared and after 60 seconds I tried Ctrl-Alt-Del and found that my installer was listed as "(Not responding)".<br><br>Brainsucker's DLL from banner1.zip works perfectly in my installer (in .onInit and in the custom page's 'leave' function).<br><br>I'm using Win98SE and the 9 September (19:44 GMT) CVS snapshot and an MUI-based installer script.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">10th September 2003 15:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks, fixed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">10th September 2003 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik, your latest banner.dll now works OK in .onInit and in my custom page 'leave' function.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">12th September 2003 17:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK, uploaded new Banner. Thanks for helping us test.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>