<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Error when trying to compile"><title>Error when trying to compile - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Error when trying to compile</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=278001">Error when trying to compile</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">27th September 2007 22:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Error when trying to compile</strong><br>Hi.<br>I'm new to the program and i have an error when trying to compile my nsi:<br><br>Error: resolving install function "Nsis2Io" in function "mui.WelcomePre_26.5.9"<br><br>I'm using the Modern UI in it.<br><br>Any idea of why im getting this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">27th September 2007 22:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You must have a call to Nsis2Io in your code - which doesn't exist? There isn't any references in MUI.nsh or MUI2.nsh.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">28th September 2007 01:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm using the MUI.nsh.<br>I've searched in the System.nsh file and i founded this:<br><br><a href="http://img379.imageshack.us/img379/9237/errorgr1.jpg" target="_blank">http://img379.imageshack.us/img379/9237/errorgr1.jpg</a><br><br>It says something about an uninstaller.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">28th September 2007 07:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, i have decided not to use MUI.<br>Now my installer is running well.<br>But i still having a problem.<br>I want to add a file to the installer, to use it later (at the end of the installation).<br>I've tried using ReserveFile "name.exe" at the begining of the script, and later use Exec "name.exe" on the .onInstSucces function.<br>This works if the file exists in the nsi folder.<br>Then i tried removing the exe from the folder, and it did not work.<br><br>Any idea of how to do this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th September 2007 09:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ReserveFile doesn't actually extract but only adds the file to the compressed block. Use File instead.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th September 2007 19:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I can't reproduce your original issue. Can you attach a script that demonstrates this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">28th September 2007 22:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sure, here i wrote a script:<br><br></p><blockquote>Name "Test"<br>InstallDir "C:\TestFolder\"<br>OutFile "Test.exe"<br>ReserveFile "name.exe" ; &lt;--------------------<br><br>Page components<br>Page directory<br>Page instfiles<br><br>Function .onInstSuccess<br>Exec "name.exe" ; &lt;--------------------<br>FunctionEnd<br><br>Section "Message"<br>MessageBox MB_ICONINFORMATION "Test Message"<br>SectionEnd</blockquote>Just try doing it.<br>I won't work if the file "name.exe" doesn't exists until the run-time.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th September 2007 23:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's because ReserveFile doesn't actually extract. You must use File for that.<br><br>But I wasn't asking about that, I was referring to the original problem for which you opened this thread.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">29th September 2007 00:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>But I wasn't asking about that, I was referring to the original problem for which you opened this thread.</blockquote>I modified my script.<br>But i'm sure is something about Modern UI.<br><br><blockquote>That's because ReserveFile doesn't actually extract. You must use File for that.</blockquote>You did not understand me.<br>This is what i want to do:<br><br>1)Put/add a file to the installer.<br>2)At the end of the instalation, execute that file that is INSIDE of the installer.<br>I want to attach a file to installer and later use it.<br><br>Can i do that?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th September 2007 00:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You have to extract the file in order to execute it. You can't execute it from inside the installer. To extract it, use File.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">29th September 2007 01:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Great, that works.<br>I used File "name.exe" to extract it, then i used ExecWait "name.exe" and then Delete "$INSTDIR\name.exe".<br>It works well.<br><br>Thank you very much.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">29th September 2007 02:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Now i have another doubt.<br>I have readed somes scripts but i still can't understand how to change the description of a section.<br><br>How can i do this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">29th September 2007 03:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">In runtime?<br>See <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.7.2.1.6" target="_blank">Docs</a>.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">29th September 2007 03:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's one of the scripts i've readed.<br>In fact, i did not understand it at all.<br><br>Can someone explain me the script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th September 2007 10:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's a hard task when not using the MUI and requires knowledge of Win32 API. Without using the MUI, you don't even have a place to put the descriptions.<br><br>In short:</p><ul><li>Create a UI with a label to display the descriptions by editing Contrib\UIs\default.exe with Resource Hacker.</li><li>In .onMouseOverSection, get a HWND of that label.</li><li>Set the appropriate text of that label by sending WM_SETTEXT with SendMessage.</li></ul></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Biasoli</span><br><span class="post-time small text-muted">29th September 2007 21:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm gonna try to do it, but i'll have to read a lot.<br><br>Thanks again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">29th November 2007 11:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: Error when trying to compile</strong><br></p><blockquote><i>Originally posted by Biasoli</i><br><b>Error: resolving install function "Nsis2Io" in function "mui.WelcomePre_26.5.9"</b></blockquote>I just had the same problem. It occured when I remmed the line<br>!insertmacro MUI_LANGUAGE "CustomLanguagefile1"<br>Enabling the line back again solved it. Disabling the Finish page also solved it.<br><br>It's got to have something to do with cross-version format changes of the language files, but I don't understand why it would give errors if I remove the entire line. After all, it should just use the default language then, right? And that should always work with the currently installed version of NSIS, right? (Unless the installer failed to overwrite it, but I have no reason to assume that.)<br><br><br>Edit: Note that my CustomLanguagefile1 was a copy from the *new* English languagefile, with one line edited. So it should be 100% new-version-compatible.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th November 2007 17:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I don't understand what you've done to get this error. Please attach an example script.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">galevsky</span><br><span class="post-time small text-muted">29th November 2007 17:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I know why.... you have to insert your MUI_PAGES <b>BEFORE</b> including the MUI_LANGUAGE ...<br><br>If you run MUI_LANGUAGE before the MUI_PAGES =&gt; error to resolve Nsis2Io..<br><br><br>Gal'</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">29th November 2007 21:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's strange, because kichik just told me in the channel that it needs to go AFTER the page declarations.<br><br>Either way, the problem occured for me when I disabled the language define, which is of course the very point - MUI doesn't default to a language, it needs the define. So pebkac, once again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">galevsky</span><br><span class="post-time small text-muted">29th November 2007 21:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">? you didn't understand what I wrote ?<br><br></p><blockquote>you have to insert your MUI_PAGES BEFORE including the MUI_LANGUAGE ...</blockquote><blockquote>That's strange, because kichik just told me in the channel that it needs to go AFTER the page declarations.</blockquote>It is the same thing.... MUI_PAGES come first then MUI_LANGUAGE and LangString.<br><br>And do not skip MUI_LANGUAGE declaration !!!<br><br>Following code is right:<br><pre>
<code><br>!include "MUI.nsh"<br><br>Name "Modern UI Test"<br>OutFile test.exe<br>XPStyle on<br><br><br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>!insertmacro MUI_LANGUAGE "English"<br>!insertmacro MUI_LANGUAGE "Dutch"<br><br><br>LangString msg ${LANG_ENGLISH} "English msg"<br>LangString msg ${LANG_DUTCH} "Dutch msg"<br><br><br>function .onInit<br>        !insertmacro MUI_LANGDLL_DISPLAY<br>functionEnd<br><br>section "Silent" SILENT_SEC<br>       MessageBox MB_OK "$(msg)" ; $() instead of ${}<br>sectionEnd<br></code>
</pre><br>
      <br>
      Following code generates Nsis2io error:<br>
      <pre>
<code><br>!include "MUI.nsh"<br><br>Name "Modern UI Test"<br>OutFile test.exe<br>XPStyle on<br><br><br>!insertmacro MUI_LANGUAGE "English"<br>!insertmacro MUI_LANGUAGE "Dutch"<br><br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br><br>LangString msg ${LANG_ENGLISH} "English msg"<br>LangString msg ${LANG_DUTCH} "Dutch msg"<br><br>function .onInit<br>        !insertmacro MUI_LANGDLL_DISPLAY<br>functionEnd<br><br>section "Silent" SILENT_SEC<br>       MessageBox MB_OK "$(msg)" ; $() instead of ${}<br>sectionEnd<br></code>
</pre><br>
      <br>
      Gal'
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>