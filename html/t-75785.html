<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Show a text file within a section" />

  <title>Show a text file within a section - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Show a text file within a section</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=75785">Show a text file within a section</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mattiasw</span><br />
      <span class="post-time small text-muted">14th February 2002 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Show a text file within a section</strong><br />
      Hi!<br />
      <br />
      I like the look and feel of the LicenseData screen but why can't it show a text file within a section? Are there any other functions that can do that?<br />
      <br />
      ---<br />
      mw</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">14th February 2002 17:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Mattias,<br />
      <br />
      some possibilities:[list=1][*]Load the text into variables and use some huge messagebox.[*]Use</p>
      <pre>
<code>ExecWait "$WINDIR\notepad.exe $EXEDIR\prob.txt"</code>
</pre>to display into the notepad editor.[*]Use a listbox of Install Options.[*]Or look at my solution, attached to this reply.[/list=1]<br />
      <br />
      My solution loads the file prob.txt into an ini using labels. A maximum of 14 lines can be achieved. Furthermore, an end of line command is necessary at the end of each line (at this moment). You could also check wether an eol is present and delete it if present.<br />
      <br />
      I included a safety for the maximum of 14 lines. (Try renaming prob1.txt to prob.txt to see it working.)<br />
      <br />
      I have to admit, it's all cumbersome, but there are no possibilities for this in the current NSIS so we have to create something ourselves...<br />
      <br />
      Good luck, if you have questions, e-mail me,<br />
      greetz from Holland,<br />
      <br />
      Hendri.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">14th February 2002 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">BTW, solution item 3 is not preferred, because a listbox does not have a scrollbar, so scrolling becomes cumbersome. Besides that, it actually is not designed for this purpose, that's why I tried to use labels instead.<br />
      <br />
      Greetz, Hendri.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">14th February 2002 17:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I added the check for EOL and also an extra line to diplay, 15 at max now.<br />
      <br />
      Rename prob1.txt to prob.txt and run the program prob.exe again to see the max number of lines.<br />
      <br />
      Good luck, greetz from Holland,<br />
      Hendri.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mattiasw</span><br />
      <span class="post-time small text-muted">15th February 2002 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CallInstDLL solved the problem</strong><br />
      Hi!<br />
      <br />
      I solved the problem with a DLL. I wrote a simple function that takes three arguments, a file name, a caption and button options. Then call it from the script with CallInstDLL. Simple really!<br />
      <br />
      Example:<br />
      StrCpy $0 "Conf.txt"<br />
      StrCpy $1 "Setup your PDA"<br />
      StrCpy $2 "MB_OK|MB_STOP"<br />
      CallInstDLL IDNETEX.DLL showTextFile<br />
      <br />
      Now there is only one problem left. How can I get information from the DLL back to the script. Using the stack was my first thought but doesn't seem to work. Anyone else?<br />
      <br />
      ---<br />
      mw</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rainwater</span><br />
      <span class="post-time small text-muted">15th February 2002 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just set a user variable like $0. The seruservar function may not be in the example dll but it should be in install options.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">18th February 2002 07:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">A dll is also possible, I wanted to show a solution within NSIS framework.<br />
      <br />
      -Hn3.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mattiasw</span><br />
      <span class="post-time small text-muted">18th February 2002 08:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sure I understand. My solution must distribute the DLL with setup-package. What is the most efficient solution to that problem? A self-extracting auto-starting zip-archive or what? Any ideas?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br />
      <span class="post-time small text-muted">18th February 2002 08:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think, you best pack it together with the install data and compare zlib and bzip2 compression. This is quick and quite OK. Furthermore, use UPX to compress the exehead.<br />
      <br />
      -Hn3.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
