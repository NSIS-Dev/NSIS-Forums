<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="scons build on debian" />

  <title>scons build on debian - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">scons build on debian</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214423">scons build on debian</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">28th April 2005 11:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">scons (0.96.1-1) build result on debian is below. Seems scons treats errors as warnings on debian, is there a way to disable this?<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ scons -j4 MINGWPREFIX=i586-mingw32msvc CPPPATH=/usr/i586-mingw32msvc/include LIBPATH=/usr/i586-mingw32msvc/lib/<br />
      scons: Reading SConscript files ...<br />
      Using GNU tools configuration<br />
      Checking for main() in C library gdi32... no<br />
      Checking for main() in C library user32... no<br />
      Checking for main() in C library version... no<br />
      Checking for main() in C library pthread... no<br />
      Checking for main() in C library stdc++... no<br />
      Checking for main() in C library iconv... no<br />
      Checking for main() in C library libiconv... no<br />
      scons: done reading SConscript files.<br />
      scons: Building targets ...<br />
      i586-mingw32msvc-g++ -O2 -Wall -I/usr/i586-mingw32msvc/include -c -o build/release/Library/LibraryLocal/LibraryLocal.o Contrib/Library/LibraryLocal/LibraryLocal.cpp<br />
      i586-mingw32msvc-g++ -O2 -Wall -I/usr/i586-mingw32msvc/include -c -o build/release/MakeLangId/MakeLangId.o Contrib/MakeLangId/MakeLangId.cpp<br />
      scons: *** [build/release/MakeLangId/resource.o] Exception<br />
      Traceback (most recent call last):<br />
      File "/usr/lib/scons/SCons/Taskmaster.py", line 101, in execute<br />
      self.targets[0].build()<br />
      File "/usr/lib/scons/SCons/Node/__init__.py", line 201, in build<br />
      apply(executor, (self, errfunc), kw)<br />
      File "/usr/lib/scons/SCons/Executor.py", line 115, in __call__<br />
      apply(action, (self.targets, self.sources, env, errfunc), kw)<br />
      File "/usr/lib/scons/SCons/Action.py", line 239, in __call__<br />
      s = self.strfunction(target, source, env)<br />
      TypeError: 'str' object is not callable<br />
      Contrib/MakeLangId/MakeLangId.cpp: In function `BOOL DialogProc(HWND__*, UINT, WPARAM, LPARAM)':<br />
      Contrib/MakeLangId/MakeLangId.cpp:191: warning: comparison between signed and unsigned integer expressions<br />
      Contrib/MakeLangId/MakeLangId.cpp:193: warning: comparison between signed and unsigned integer expressions<br />
      Contrib/MakeLangId/MakeLangId.cpp:241:2: warning: no newline at end of file<br />
      scons: building terminated because of errors.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th April 2005 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SCons doesn't treat warnings as errors. An error is raised when a tool returns a value different than 0. In your case, the error is a few lines above. The printing might get a little mixed if you use -j.<br />
      <br />
      As for the error itself, mind runing scons with --debug=pdb and seeing what string it tries to call there?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">29th April 2005 08:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, now I'm getting this:<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ scons MINGWPREFIX=i586-mingw32msvc CPPPATH=/usr/i586-mingw32msvc/include LIBPATH=/usr/i586-mingw32msvc/lib/<br />
      &lt;snip&gt;<br />
      i586-mingw32msvc-ld -s -mwindows -Wl,--file-alignment,512 -Wl,-Map,LibraryLocal.map -o build/release/Library/LibraryLocal/LibraryLocal build/release/Library/LibraryLocal/LibraryLocal.o -L/usr/i586-mingw32msvc/lib -lkernel32 -loleaut32 -lversion<br />
      i586-mingw32msvc-ld: unrecognised emulation mode: windows<br />
      Supported emulations: i386pe<br />
      scons: *** [build/release/Library/LibraryLocal/LibraryLocal] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Using i586-mingw32msvc-g++ for linking fixes this.<br />
      <br />
      Printing the value of self.strfunction in Action.py gives "$RCCOMSTR". Either way, I don't think strings can be called in python.<br />
      <br />
      Also, does scons have an equivalent of make clean?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th April 2005 10:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've fixed the configuration to use g++ for linking instead of ld. In SCons/Config/gnu change line number 24.<br />
      <br />
      As for RCCOMSTR, I have no idea where SCons creates it. It uses it, but no where it seems to create it. Try removing the parameter using it in SCons/Config/gnu on line 15 and let me know if it works.<br />
      <br />
      To clean using SCons, use -c. To see all available command line options, use -H.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">2nd May 2005 10:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I submitted a patch to fix building Contrib stuff.<br />
      <br />
      The problem I come up against now, is that halibut is built with the include path specified in CPPPATH. I'm not sure how to solve this, but I think the stuff targeted at windows would use MINGW32CPPPATH, and the stuff targeted at the build os can use CPPPATH. It would be nice if CPPPATH could default to /usr/include on linux too.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd May 2005 18:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">CPPPATH defauls to nothing which allows scons or gcc to use whatever it thinks that's required. Does it not find the right header files when you don't use CPPPATH?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">4th May 2005 05:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">pabs@chianamo:~/devel/debian/nsis/NSIS$ scons MINGWPREFIX=i586-mingw32msvc PREFIX=/usr/local<br />
      scons: Reading SConscript files ...<br />
      <br />
      scons: *** Path does not exist for option CPPPATH:<br />
      File "SConstruct", line 69, in ?<br />
      <br />
      I get a similar thing when ommiting PREFIX</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th May 2005 17:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Options with an empty default value is a new feature of 0.96.90. Upgrade and those should disappear.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">6th May 2005 06:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ah, ok. Installed the deb, fixed that.<br />
      <br />
      Now I have problems with halibut:<br />
      <br />
      * _MAX_PATH isn't defined for bk_xhtml.c<br />
      <br />
      * for some reason, the standard libs don't get linked into the binary, preventing linking due to unresolved symbols - fixed by emptying defenv['NODEFLIBS_FLAG'] in NSIS/SCons/Config/gnu<br />
      <br />
      * the __main entry point isn't found - commenting lines 113/114 in NSIS/SCons/Config/gnu:<br />
      #ctx.env.Append(LINKFLAGS = '$NODEFLIBS_FLAG')<br />
      #ctx.env.Append(LINKFLAGS = '-Wl,-e,___main')<br />
      <br />
      * it segfaults during building the docs - I'll work on this<br />
      <br />
      * I get this error during building InstallOptions.dll:<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ scons MINGWPREFIX=i586-mingw32msvc<br />
      scons: Reading SConscript files ...<br />
      Using GNU tools configuration<br />
      Checking for memcpy requirement... (cached) yes<br />
      Checking for memset requirement... (cached) yes<br />
      Checking for main() in C library gdi32... (cached) no<br />
      &lt;snip&gt;<br />
      Contrib/InstallOptions/../ExDLL/exdll.h:103: warning: 'char* getuservariable(int)' defined but not used<br />
      Contrib/InstallOptions/../ExDLL/exdll.h:109: warning: 'void setuservariable(int, const char*)' defined but not used<br />
      i586-mingw32msvc-windres --include-dir Contrib/InstallOptions -i Contrib/InstallOptions/ioptdll.rc -o build/release/InstallOptions/ioptdll.o<br />
      scons: *** Source file: build/release/InstallOptions/ioptdll.o is static and is not compatible with shared target: build/release/InstallOptions/libInstallOptions.so<br />
      scons: building terminated because of errors.<br />
      (not that the windres call didn't actually fail, just scons doesn't like it)<br />
      <br />
      * same with LangDLL, StartMenu<br />
      <br />
      * Makensisw can't be built - undefined symbols: TBN_DROPDOWN , TBDDRET_DEFAULT, TBDDRET_NODEFAULT. _WIN32_IE needs defining as 0x0500 before commctrl.h is included in Contrib/Makensisw/makensisw.h<br />
      <br />
      * Contrib/Math/Source/MyMath.c DBL_MAX_EXP, HUGE_VAL not defined. I placed a copy of the mingw math.h here: <a href="http://bonedaddy.net/pabs3/files/tmp/math.h" target="_blank">http://bonedaddy.net/pabs3/files/tmp/math.h</a><br />
      <br />
      * Contrib/System: build errors:<br />
      586-mingw32msvc-gcc -Os -Wall -fPIC -DSYSTEM_EXPORTS -c -o build/release/System/Source/Buffers.os Contrib/System/Source/Buffers.c<br />
      Contrib/System/Source/Buffers.c:1: warning: -fPIC ignored for target (all code is position independent)<br />
      In file included from Contrib/System/Source/Buffers.c:1:<br />
      Contrib/System/Source/stdafx.h:13:27: warning: no newline at end of file<br />
      In file included from Contrib/System/Source/Buffers.c:3:<br />
      Contrib/System/Source/System.h:94: error: redefinition of typedef 'SystemProc'<br />
      Contrib/System/Source/System.h:75: error: previous declaration of 'SystemProc' was here<br />
      Contrib/System/Source/Buffers.c:11: error: redefinition of typedef 'TempStack'<br />
      Contrib/System/Source/Buffers.c:6: error: previous declaration of 'TempStack' was here<br />
      Contrib/System/Source/Buffers.c: In function `Copy':<br />
      Contrib/System/Source/Buffers.c:40: warning: cast to pointer from integer of different size<br />
      Contrib/System/Source/Buffers.c:49: warning: passing arg 1 of `pushint' makes integer from pointer without a cast<br />
      Contrib/System/Source/Buffers.c:110:18: warning: no newline at end of file<br />
      scons: *** [build/release/System/Source/Buffers.os] Error 1<br />
      <br />
      * linking makensis:<br />
      <br />
      gcc -O2 -Wall -c -o build/release/makensis/zlib/trees.o Source/zlib/trees.c<br />
      g++ -s -Wl,--file-alignment,512 -Wl,-Map,makensis.map -o build/release/makensis/makensis build/release/makensis/build.o build/release/makensis/clzma.o build/release/makensis/crc32.o build/release/makensis/DialogTemplate.o build/release/makensis/dirreader.o build/release/makensis/growbuf.o build/release/makensis/lang.o build/release/makensis/lineparse.o build/release/makensis/makenssi.o build/release/makensis/mmap.o build/release/makensis/Plugins.o build/release/makensis/ResourceEditor.o build/release/makensis/ResourceVersionInfo.o build/release/makensis/script.o build/release/makensis/ShConstants.o build/release/makensis/strlist.o build/release/makensis/tokens.o build/release/makensis/util.o build/release/makensis/bzip2/blocksort.o build/release/makensis/bzip2/bzlib.o build/release/makensis/bzip2/compress.o build/release/makensis/bzip2/huffman.o build/release/makensis/7zip/7zGuids.o build/release/makensis/7zip/Common/CRC.o build/release/makensis/7zip/7zip/Compress/LZ/LZInWindow.o build/release/makensis/7zip/7zip/Compress/LZMA/LZMAEncoder.o build/release/makensis/7zip/7zip/Common/OutBuffer.o build/release/makensis/7zip/7zip/Compress/RangeCoder/RangeCoderBit.o build/release/makensis/7zip/Common/Alloc.o build/release/makensis/zlib/deflate.o build/release/makensis/zlib/trees.o<br />
      /usr/bin/ld: unrecognized option '--file-alignment'<br />
      /usr/bin/ld: use the --help option for usage information<br />
      collect2: ld returned 1 exit status<br />
      scons: *** [build/release/makensis/makensis] Error 1<br />
      removing the --file-alignment thing fixes the build error</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th May 2005 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <ul>
        <li>_MAX_PATH usage removed from bk_xhtml.c</li>

        <li>The standard libraries don't get linked to get smaller file sizes. Emptying NODEFLIBS_FLAG beats the purpose. If GCC requires some more CRT functions other than memcpy and memset, those should be added in the configuration step. NODEFLIBS_FLAG should stay as is.</li>

        <li>Commenting the two LINKFLAGS additions in the configuration test beats the purpose of the test. It'll never find if memcpy is needed with no CRT this way... Even if it doesn't find __main in the test, it'll just include memcpy and memset. It won't fail compiling anything but the tests.</li>

        <li>Try playing with RCFLAGS to get rid of the error about the compiled resources. It might work if the input and output format are specified like they were in the Makefile.</li>

        <li>TBN_DROPDOWN itself requires _WIN32_IE 0x0300, but its return values require 0x0400. Weird... I've added #define _WIN32_IE 0x0400 on the top of makensis.cpp.</li>

        <li>DBL_MAX_EXP and HUGE_VAL are both defined in mathcrt.h. It probably couldn't find them because mathcrt.h was included with wrong capatilization.</li>

        <li>I've removed the double typedef in System.h and Buffers.c.</li>

        <li>Which gcc version are using that doesn't support --file-alignment?</li>
      </ul>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">7th May 2005 14:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">$ gcc --version<br />
      gcc (GCC) 3.3.6 (Debian 1:3.3.6-3)<br />
      $ ld --version<br />
      GNU ld version 2.15<br />
      <br />
      &lt;snip&gt;<br />
      gcc -c -o build/release/halibut/version.o Docs/src/bin/halibut/version.c<br />
      gcc -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,-e,___main -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,-e,___main -o build/release/halibut/halibut build/release/halibut/biblio.o build/release/halibut/bk_xhtml.o build/release/halibut/contents.o build/release/halibut/error.o build/release/halibut/help.o build/release/halibut/index.o build/release/halibut/input.o build/release/halibut/keywords.o build/release/halibut/licence.o build/release/halibut/main.o build/release/halibut/malloc.o build/release/halibut/misc.o build/release/halibut/style.o build/release/halibut/tree234.o build/release/halibut/ustring.o build/release/halibut/version.o<br />
      /usr/bin/ld: unrecognized option '--exclude-libs'<br />
      /usr/bin/ld: use the --help option for usage information<br />
      collect2: ld returned 1 exit status<br />
      scons: *** [build/release/halibut/halibut] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Then I removed "-Wl,--exclude-libs,msvcrt.a" from NODEFLIBS_FLAG.<br />
      <br />
      &lt;snip&gt;<br />
      gcc -nostdlib -Wl,-e,___main -nostdlib -Wl,-e,___main -o build/release/halibut/halibut build/release/halibut/biblio.o build/release/halibut/bk_xhtml.o build/release/halib<br />
      ut/contents.o build/release/halibut/error.o build/release/halibut/help.o build/release/halibut/index.o build/release/halibut/input.o build/release/halibut/keywords.o buil<br />
      d/release/halibut/licence.o build/release/halibut/main.o build/release/halibut/malloc.o build/release/halibut/misc.o build/release/halibut/style.o build/release/halibut/t<br />
      ree234.o build/release/halibut/ustring.o build/release/halibut/version.o<br />
      /usr/bin/ld: warning: cannot find entry symbol ___main; defaulting to 0000000008048094<br />
      This gives these undefined symbols:<br />
      __assert_fail<br />
      exit<br />
      fclose<br />
      fopen<br />
      fprintf<br />
      fputs<br />
      free<br />
      _IO_getc<br />
      localtime<br />
      malloc<br />
      memset<br />
      printf<br />
      putchar<br />
      puts<br />
      sprintf<br />
      stderr<br />
      strcmp<br />
      strcpy<br />
      strftime<br />
      strlen<br />
      time<br />
      vsprintf<br />
      <br />
      Then I removed "-nostdlib" from NODEFLIBS_FLAG. After that, halibut linked fine.<br />
      <br />
      As far as the RCFLAGS things go, I note that the output is complaining about build/release/InstallOptions/libInstallOptions.so rather than build/release/InstallOptions/InstallOptions.dll, or build/release/InstallOptions/InstallOptions.os, so I think perhaps that the link target is using non-mingw stuff, when it shouldn't be.<br />
      <br />
      This looks like a similar problem to the RC issue:<br />
      i586-mingw32msvc-gcc -Os -Wall -x c++ -fPIC -c -o build/release/Math/Source/plugin.os Contrib/Math/Source/plugin.c<br />
      Contrib/Math/Source/plugin.c:1: warning: -fPIC ignored for target (all code is position independent)<br />
      In file included from Contrib/Math/Source/plugin.c:2:<br />
      Contrib/Math/Source/MyMath.h:163:51: warning: no newline at end of file<br />
      Contrib/Math/Source/plugin.c:136:2: warning: no newline at end of file<br />
      scons: *** Source file: Contrib/Math/Source/mathcrt.lib is static and is not compatible with shared target: build/release/Math/libMath.so<br />
      scons: building terminated because of errors.<br />
      <br />
      Here, it looks like C++ plugins need to be linked with the standard libs:<br />
      i586-mingw32msvc-g++ -Os -Wall -fPIC -c -o build/release/NSISdl/util.os Contrib/NSISdl/util.cpp<br />
      Contrib/NSISdl/util.cpp:1: warning: -fPIC ignored for target (all code is position independent)<br />
      Contrib/NSISdl/util.cpp:39:2: warning: no newline at end of file<br />
      i586-mingw32msvc-g++ -s -Wl,--file-alignment,512 -Wl,-e,_DllMain@16 -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,-Map,NSISdl.map -shared -o build/release/NSISdl/libNSISdl.so build/release/NSISdl/asyncdns.os build/release/NSISdl/connection.os build/release/NSISdl/httpget.os build/release/NSISdl/nsisdl.os build/release/NSISdl/util.os .sconf_temp/funcs.os -lkernel32 -luser32 -ladvapi32 -lws2_32<br />
      build/release/NSISdl/connection.os:connection.cpp:(.text+0x1c): undefined reference to `___gxx_personality_sj0'<br />
      build/release/NSISdl/connection.os:connection.cpp:(.text+0x32): undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/connection.os:connection.cpp:(.text+0xa5): undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/connection.os:connection.cpp:(.text+0xdc): undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/connection.os:connection.cpp:(.text+0x13e): undefined reference to `__Unwind_SjLj_Unregister'<br />
      &lt;snip&gt;<br />
      collect2: ld returned 1 exit status<br />
      scons: *** [build/release/NSISdl/libNSISdl.so] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Contrib/System/Source/System.c contains lots of Microsoft assembly, which GCC doesn't understand. I'll probably disable building this in the debian version corresponding to 2.07, as I did for 2.06.<br />
      <br />
      _WIN32_IE needs to be 0x0500 for these (best to put it in makensisw.h, because more than 1 cpp file use it):<br />
      Contrib/Makensisw/toolbar.cpp:58: error: `TBSTYLE_DROPDOWN' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:58: error: (Each undeclared identifier is reported only once for each function it appears in.)<br />
      Contrib/Makensisw/toolbar.cpp:70: error: `TBSTYLE_TRANSPARENT' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:70: error: `TBSTYLE_FLAT' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:90: error: `TB_SETIMAGELIST' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:91: error: `TB_SETDISABLEDIMAGELIST' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:92: error: `TB_SETHOTIMAGELIST' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:96: error: `TB_SETEXTENDEDSTYLE' undeclared (first use this function)<br />
      Contrib/Makensisw/toolbar.cpp:96: error: `TBSTYLE_EX_DRAWDDARROWS' undeclared (first use this function)<br />
      <br />
      Case problem in Contrib/Makensisw/resource.rc:<br />
      i586-mingw32msvc-windres --include-dir Contrib/Makensisw --input-format rc --output-format coff -i Contrib/Makensisw/resource.rc -o build/release/Makensisw/resource.o<br />
      i586-mingw32msvc-windres: can't open icon file `..\..\contrib\graphics\icons\modern-install-blue-full.ico': No such file or directory<br />
      Using this line helped:<br />
      IDI_ICON ICON "../Graphics/Icons/modern-install-blue-full.ico"<br />
      <br />
      I also get a syntax error on line 162 of Contrib/Makensisw/resource.rc - didn't seem to have some of these defined: TCS_HOTTRACK, TCS_BUTTONS, TCS_RAGGEDRIGHT, TCS_OWNERDRAWFIXED, TCS_MULTISELECT. This requires "#define _WIN32_IE 0x0300" before the afxres.h include.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">8th May 2005 03:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To fix the Contrib/Makensisw/resource.rc syntax error, you can also pass --define _WIN32_IE=0x0300 to windres.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">10th May 2005 16:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmmm, this halibut segfault is a heisenbug that sometimes hides itself from gdb (GNU debugger). The backtrace looks something like the following. The parameters to fprintf are all fine, so I've no idea whats going on.<br />
      <br />
      &lt;internal libc functions&gt;<br />
      vfprintf (vfprintf.c:1260)<br />
      fprintf (fprintf.c:32)<br />
      xhtml_add_contents_entry (bk_xhtml.c:1214)<br />
      xhtml_do_contents_section_limit (bk_xhtml.c:1183)<br />
      xhtml_do_contents_limit (bk_xhtml.c:1144)<br />
      xhtml_do_naked_contents (bk_xhtml.c:1122)<br />
      xhtml_do_file (bk_xhtml.c:955)<br />
      xhtml_do_files (bk_xhtml.c:684)<br />
      xhtml_backend (bk_xhtml.c:748)<br />
      main (main.c:229)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th May 2005 21:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">chm_toc might seem to have a valid value, but unless it's used in xhtml_do_top_file or in a function xhtml_do_top_file calls, it's closed. I've made xhtml_do_top_file set both chm_toc and chm_ind to NULL after they're closed. Let me know if a segfault is still raised.<br />
      <br />
      I've removed --file-alignment from makensis' configuration as it seems to be MinGW specific. I've also made the tests reset the LINKFLAGS so halibut will be compiled with proper flags.<br />
      <br />
      All of the weird errors related to MinGW are probably raised because I haven't copied all of the tool specification. I shuold just copy mingw.py from SCons and modify it to properly search for MinGW, instead of just adding the prefix to gcc, g++, ld and friends.<br />
      <br />
      I'll take a look at the other problems later.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">11th May 2005 10:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No more segfaults, yay! Thanks for that, now Docs buildage fails due to no hhc :) - one day I'll get around to finishing hhm. How about making the hhc run optional and not block the rest of the build if it fails? Hmmm, or I might just add a patch for the debian package to not run it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th May 2005 16:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I do intend to make some targets optional in the SConstruct. For example, I'd also like to make it possible to use precompiled stubs and plug-ins, like with the old makefiles. I don't know how I want to do that yet, though. On POSIX, it should not use hhc and chm_config.but at all, but instead use config.but and create HTML documentation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th May 2005 12:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've attached a slightly modified mingw tool definition to be used in cross_env(). It searches for some known prefixes of MinGW and unlike the old cross_env(), it also sets library suffix, shared object suffix and more. Please let me know if it helps.<br />
      <br />
      To get rid of the C++ plug-in errors, add plugin_env.Append(LIBS = ['stdc++']) to SCons/Config/gnu. If the same happens with utilities, add util_env.Append(LIBS = ['stdc++']).<br />
      <br />
      All of those TB_* defines require 0x0400. Once SourceForge's CVS is back online, I'll commit the change to move that define to makensis.h as you've suggested. Same goes to resource.rc.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">14th May 2005 03:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">After unpacking scons.zip over the source tree, I get this:<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ scons<br />
      scons: Reading SConscript files ...<br />
      Using GNU tools configuration<br />
      NameError: name 'Split' is not defined:<br />
      File "SConstruct", line 131:<br />
      envs = SConscript('SCons/Config/gnu')<br />
      File "/usr/lib/python2.2/site-packages/SCons/Script/SConscript.py", line 534:<br />
      return apply(method, args, kw)<br />
      File "/usr/lib/python2.2/site-packages/SCons/Script/SConscript.py", line 471:<br />
      return apply(_SConscript, [self.fs,] + files, {'exports' : exports})<br />
      File "/usr/lib/python2.2/site-packages/SCons/Script/SConscript.py", line 217:<br />
      exec _file_ in call_stack[-1].globals<br />
      File "SCons/Config/gnu", line 34:<br />
      cross_env(stub_env)<br />
      File "SCons/Config/gnu", line 14:<br />
      env.Tool('crossmingw', toolpath = ['../Tools'])<br />
      File "/usr/lib/python2.2/site-packages/SCons/Environment.py", line 1054:<br />
      tool = apply(SCons.Tool.Tool, (tool, toolpath), kw)<br />
      File "/usr/lib/python2.2/site-packages/SCons/Tool/__init__.py", line 102:<br />
      module = imp.load_module(name, file, path, desc)<br />
      File "../Tools/crossmingw.py", line 46:<br />
      None<br />
      <br />
      Using SCons.Util.Split instead of just Split fixes this.<br />
      <br />
      When it gets to hhc, it still wants to run hhc, so I disabled that.<br />
      <br />
      Then I get this:<br />
      i586-mingw32msvc-windres --include-dir Contrib/Makensisw -i Contrib/Makensisw/resource.rc -o build/release/Makensisw/resource.o<br />
      i586-mingw32msvc-windres: can't open icon file `..\..\Contrib\Graphics\Icons\modern-install-blue-full.ico': No such file or directory<br />
      Contrib/Makensisw/resource.rc:0: fatal error: when writing output to : Broken pipe<br />
      compilation terminated.<br />
      scons: *** [build/release/Makensisw/resource.o] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Changing it to use this helped: "../Graphics/Icons/modern-install-blue-full.ico"<br />
      <br />
      Then I get this:<br />
      <br />
      i586-mingw32msvc-g++ -s -Wl,--file-alignment,512 -Wl,-e,_DllMain@16 -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,-Map,NSISdl.map -shared -o build/release/NSISdl/libNSISdl.so build/release/NSISdl/asyncdns.o build/release/NSISdl/connection.o build/release/NSISdl/httpget.o build/release/NSISdl/nsisdl.o build/release/NSISdl/util.o .sconf_temp/funcs.o -lkernel32 -luser32 -ladvapi32 -lws2_32 -Wl,--out-implib,build/release/NSISdl/libNSISdl.a -Wl,--output-def,build/release/NSISdl/NSISdl.def<br />
      Creating library file: build/release/NSISdl/libNSISdl.a<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x1c) : undefined reference to `___gxx_personality_sj0'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x32) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0xa5) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0xdc) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0xea) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x13e) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x168) : undefined reference to `___gxx_personality_sj0'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x17e) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x1f1) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x228) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x236) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x28a) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x133) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x16d) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x3dd) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x3fa) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x43c) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x458) : more undefined references to `operator new[](unsigned int)' follow<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x4ec) : undefined reference to `___gxx_personality_sj0'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x500) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x51f) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x5ae) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x68f) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x6c0) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x86a) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x8f8) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x91e) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x972) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0xa0e) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0xad4) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0xb39) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0xbba) : undefined reference to `operator new[](unsigned int)'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0xcd2) : more undefined references to `operator new[](unsigned int)' follow<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0x4b1) : undefined reference to `___gxx_personality_sj0'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0x4cb) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0xa03) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0xff7) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      collect2: ld returned 1 exit status<br />
      scons: *** [build/release/NSISdl/libNSISdl.so] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Adding stdc++ gives me this:<br />
      i586-mingw32msvc-g++ -s -Wl,--file-alignment,512 -Wl,-e,_DllMain@16 -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,-Map,NSISdl.map -shared -o build/release/NSISdl/libNSISdl.so build/release/NSISdl/asyncdns.o build/release/NSISdl/connection.o build/release/NSISdl/httpget.o build/release/NSISdl/nsisdl.o build/release/NSISdl/util.o .sconf_temp/funcs.o -lkernel32 -luser32 -ladvapi32 -lws2_32 -lstdc++ -Wl,--out-implib,build/release/NSISdl/libNSISdl.a -Wl,--output-def,build/release/NSISdl/NSISdl.def<br />
      Creating library file: build/release/NSISdl/libNSISdl.a<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x32) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0xa5) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x13e) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x17e) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x1f1) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/connection.o:connection.cpp: (.text+0x28a) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x500) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x86a) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/httpget.o:httpget.cpp: (.text+0x91e) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0x4cb) : undefined reference to `__Unwind_SjLj_Register'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0xa03) : undefined reference to `__Unwind_SjLj_Resume'<br />
      build/release/NSISdl/nsisdl.o:nsisdl.cpp: (.text+0xff7) : undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `_abort'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetTextRelBase'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetDataRelBase'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetRegionStart'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `_abort'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetRegionStart'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `_abort'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetLanguageSpecificData'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_GetIP'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SetGR'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SetGR'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SetIP'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_personality.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(new_opv.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(new_opv.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(new_opv.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(tinfo.o) :: undefined reference to `_strcmp'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `_abort'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `_abort'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `___w32_sharedptr_terminate'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `___w32_sharedptr_unexpected'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `___w32_sharedptr_terminate'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_terminate.o) :: undefined reference to `___w32_sharedptr_unexpected'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_throw.o) :: undefined reference to `___w32_sharedptr_unexpected'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_throw.o) :: undefined reference to `___w32_sharedptr_terminate'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_throw.o) :: undefined reference to `__Unwind_SjLj_RaiseException'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_throw.o) :: undefined reference to `__Unwind_SjLj_Resume_or_Rethrow'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_mutex_init_function'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `_malloc'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_once'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_mutex_lock'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_mutex_unlock'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_mutex_unlock'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `_free'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `___gthr_win32_mutex_lock'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_alloc.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_TlsAlloc@0'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `___mingwthr_key_dtor'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_GetLastError@0'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_GetLastError@0'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_TlsGetValue@4'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_SetLastError@4'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_GetLastError@0'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_TlsGetValue@4'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_SetLastError@4'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `__CRT_MT'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_InterlockedIncrement@4'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_malloc'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_TlsSetValue@8'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_GetLastError@0'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_globals.o) :: undefined reference to `_free'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_catch.o) :: undefined reference to `__Unwind_SjLj_Register'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_catch.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_catch.o) :: undefined reference to `__Unwind_SjLj_Unregister'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_catch.o) :: undefined reference to `__Unwind_SjLj_Resume'<br />
      /usr/lib/gcc/i586-mingw32msvc/3.4.2/libstdc++.a(eh_catch.o) :: undefined reference to `__Unwind_DeleteException'<br />
      collect2: ld returned 1 exit status<br />
      scons: *** [build/release/NSISdl/libNSISdl.so] Error 1<br />
      scons: building terminated because of errors.<br />
      <br />
      Then comes the problem where gcc doesn't support MSVC inline asm - in System.c.<br />
      <br />
      After that there are no errors. One thing I did notice is that all the plugins are named lib&lt;foo&gt;.so instead of &lt;foo.dll&gt;, and they all come with a lib&lt;foo&gt;.a accompaning them.<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ file `find build/ -iname \*.so`<br />
      build/release/Banner/libBanner.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/Math/libMath.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/Dialer/libDialer.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/AdvSplash/libAdvSplash.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/BgImage/libBgImage.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/Splash/libSplash.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/VPatch/Source/Plugin/libVPatch.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/StartMenu/libStartMenu.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/UserInfo/libUserInfo.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/LangDLL/libLangDLL.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/Library/TypeLib/libTypeLib.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/nsExec/libnsExec.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      build/release/InstallOptions/libInstallOptions.so: MS Windows PE 32-bit Intel 80386 console DLL<br />
      pabs@chianamo:~/devel/debian/nsis/NSIS$ file `find build/ -iname \*.a`<br />
      build/release/Banner/libBanner.a: current ar archive<br />
      build/release/Math/libMath.a: current ar archive<br />
      build/release/Dialer/libDialer.a: current ar archive<br />
      build/release/AdvSplash/libAdvSplash.a: current ar archive<br />
      build/release/BgImage/libBgImage.a: current ar archive<br />
      build/release/NSISdl/libNSISdl.a: current ar archive<br />
      build/release/Splash/libSplash.a: current ar archive<br />
      build/release/VPatch/Source/Plugin/libVPatch.a: current ar archive<br />
      build/release/StartMenu/libStartMenu.a: current ar archive<br />
      build/release/UserInfo/libUserInfo.a: current ar archive<br />
      build/release/LangDLL/libLangDLL.a: current ar archive<br />
      build/release/Library/TypeLib/libTypeLib.a: current ar archive<br />
      build/release/nsExec/libnsExec.a: current ar archive<br />
      build/release/InstallOptions/libInstallOptions.a: current ar archive</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">14th May 2005 17:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To get it to create DLLs instead of lib*.so, try adding the following as the first line in cross_env():</p>
      <pre>
<code>env.Platform('win32')</code>
</pre>I have copied the makensisw icon to its local directory in CVS, just like shell.ico. It should work now.<br />
      <br />
      As for the C++ stuff, I'll see if I can get it to compile without msvcrt. For now, you can pass nodeflib=0 on the BuildPlugin call, just like in System's SConscript.<br />
      <br />
      Please attach large outputs or at least put them inside [ quote ] [ /quote ] or [ code ] [ /code ]. It's really hard to follow a message with so much output pasted in it.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">15th May 2005 07:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Adding env.Platform('win32') to cross_env() causes this:<br />
      <br /></p>
      <pre>
<code>i586-mingw32msvc-gcc -Os -Wall -c -o build/release/AdvSplash/advsplash.o Contrib/AdvSplash/advsplash.c<br />scons: Could not find command interpreter, is it in your PATH?<br />scons: *** [build/release/AdvSplash/advsplash.o] Error 127<br />scons: building terminated because of errors</code>
</pre><br />
      <br />
      Not sure why this happens.<br />
      <br />
      Sorry about the [ code ] stuff, I'm not really familiar with forums, I mainly use email/irc for communicating with free software projects. I wonder if this forum can gateway to/from email.<br />
      <br />
      I'll attach a CVS diff that allows nsis to build properly on debian.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">15th May 2005 07:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, I don't know exactly how to upload attachments, so I've uploaded it to my homepage:<br />
      <br />
      <a href="http://bonedaddy.net/pabs3/files/tmp/nsis-cvs-debian.patch" target="_blank">http://bonedaddy.net/pabs3/files/tmp...s-debian.patch</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th May 2005 21:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Right... win32 platform sets a bit more than what I thought. I guess crossmingw.py will have to set some more from scons/SCons/Platform/win32.py on its own. Try adding this to crossmingw.py's generate():</p>
      <pre>
<code>    env['OBJPREFIX']      = ''<br />    env['OBJSUFFIX']      = '.obj'<br />    env['SHOBJPREFIX']    = '$OBJPREFIX'<br />    env['SHOBJSUFFIX']    = '$OBJSUFFIX'<br />    env['PROGPREFIX']     = ''<br />    env['PROGSUFFIX']     = '.exe'<br />    env['LIBPREFIX']      = ''<br />    env['LIBSUFFIX']      = '.lib'<br />    env['SHLIBPREFIX']    = ''<br />    env['SHLIBSUFFIX']    = '.dll'<br />    env['LIBPREFIXES']    = [ '$LIBPREFIX' ]<br />    env['LIBSUFFIXES']    = [ '$LIBSUFFIX' ]</code>
</pre>To attach files, click the Post a Reply button. You can't attach files from the quick reply area.<br />
      <br />
      This forum has no e-mail gateway.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">18th May 2005 03:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">With env.Platform('win32') in cross_env() and the changes to generate(), I still get this error:<br />
      <br /></p>
      <pre>
<code><br />scons: done reading SConscript files.<br />scons: Building targets ...<br />i586-mingw32msvc-gcc -Os -Wall -c -o build/release/AdvSplash/advsplash.obj Contrib/AdvSplash/advsplash.c<br />scons: Could not find command interpreter, is it in your PATH?<br />scons: *** [build/release/AdvSplash/advsplash.obj] Error 127<br />scons: building terminated because of errors.<br /></code>
</pre><br />
      <br />
      It doesn't create an .obj file, but interestingly, running the i586-mingw32msvc-gcc command from bash does work.<br />
      <br />
      When I turn off env.Platform('win32'), it all works.<br />
      <br />
      After a successful build, I ran scons -c and find build/, giving the following output. A minor issue for the debian package, because I will have to run rm -rf build/ in the clean target as well as scons -c.<br />
      <br />
      <pre>
<code><br />build/<br />build/release<br />build/release/Banner<br />build/release/Docs<br />build/release/Docs/AppendixC.html<br />build/release/Docs/Section3.3.html<br />build/release/Docs/AppendixD.html<br />build/release/Docs/AppendixE.html<br />build/release/Docs/SectionB.1.html<br />build/release/Docs/AppendixF.html<br />build/release/Docs/IndexPage.html<br />build/release/Docs/SectionB.2.html<br />build/release/Docs/AppendixG.html<br />build/release/Docs/SectionB.3.html<br />build/release/Docs/SectionB.4.html<br />build/release/Docs/SectionE.10.html<br />build/release/Docs/SectionE.11.html<br />build/release/Docs/SectionE.12.html<br />build/release/Docs/SectionE.13.html<br />build/release/Docs/SectionE.14.html<br />build/release/Docs/SectionE.15.html<br />build/release/Docs/style.css<br />build/release/Docs/Section5.1.html<br />build/release/Docs/SectionE.16.html<br />build/release/Docs/Section5.2.html<br />build/release/Docs/SectionE.17.html<br />build/release/Docs/Section5.3.html<br />build/release/Docs/SectionE.18.html<br />build/release/Docs/Section5.4.html<br />build/release/Docs/SectionE.19.html<br />build/release/Docs/SectionD.1.html<br />build/release/Docs/SectionE.20.html<br />build/release/Docs/SectionD.2.html<br />build/release/Docs/SectionE.21.html<br />build/release/Docs/SectionD.3.html<br />build/release/Docs/SectionE.22.html<br />build/release/Docs/SectionD.4.html<br />build/release/Docs/SectionE.23.html<br />build/release/Docs/SectionD.5.html<br />build/release/Docs/SectionE.24.html<br />build/release/Docs/SectionD.6.html<br />build/release/Docs/SectionE.25.html<br />build/release/Docs/Section4.10.html<br />build/release/Docs/Section4.11.html<br />build/release/Docs/Section4.12.html<br />build/release/Docs/Section2.1.html<br />build/release/Docs/Section2.2.html<br />build/release/Docs/Section2.3.html<br />build/release/Docs/Section2.4.html<br />build/release/Docs/SectionF.1.html<br />build/release/Docs/Section2.5.html<br />build/release/Docs/SectionF.2.html<br />build/release/Docs/Section2.6.html<br />build/release/Docs/SectionF.3.html<br />build/release/Docs/Section2.7.html<br />build/release/Docs/SectionF.4.html<br />build/release/Docs/SectionF.5.html<br />build/release/Docs/toc.hhc<br />build/release/Docs/nsis.hhp<br />build/release/Docs/Section4.1.html<br />build/release/Docs/Section4.2.html<br />build/release/Docs/Section4.3.html<br />build/release/Docs/Section4.4.html<br />build/release/Docs/Section4.5.html<br />build/release/Docs/SectionC.1.html<br />build/release/Docs/Section4.6.html<br />build/release/Docs/SectionC.2.html<br />build/release/Docs/Section4.7.html<br />build/release/Docs/SectionC.3.html<br />build/release/Docs/Section4.8.html<br />build/release/Docs/SectionC.4.html<br />build/release/Docs/Chapter1.html<br />build/release/Docs/Section4.9.html<br />build/release/Docs/SectionC.5.html<br />build/release/Docs/Chapter2.html<br />build/release/Docs/SectionC.6.html<br />build/release/Docs/Chapter3.html<br />build/release/Docs/SectionC.7.html<br />build/release/Docs/Chapter4.html<br />build/release/Docs/chmlink.js<br />build/release/Docs/SectionC.8.html<br />build/release/Docs/Chapter5.html<br />build/release/Docs/SectionC.9.html<br />build/release/Docs/Section1.1.html<br />build/release/Docs/Section1.2.html<br />build/release/Docs/Section1.3.html<br />build/release/Docs/SectionE.1.html<br />build/release/Docs/SectionE.2.html<br />build/release/Docs/SectionE.3.html<br />build/release/Docs/SectionE.4.html<br />build/release/Docs/ind.hhk<br />build/release/Docs/SectionE.5.html<br />build/release/Docs/SectionE.6.html<br />build/release/Docs/SectionE.7.html<br />build/release/Docs/SectionE.8.html<br />build/release/Docs/SectionE.9.html<br />build/release/Docs/SectionC.10.html<br />build/release/Docs/SectionC.11.html<br />build/release/Docs/Contents.html<br />build/release/Docs/AppendixA.html<br />build/release/Docs/Section3.1.html<br />build/release/Docs/SectionC.12.html<br />build/release/Docs/AppendixB.html<br />build/release/Docs/Section3.2.html<br />build/release/Math<br />build/release/Math/Source<br />build/release/Dialer<br />build/release/AdvSplash<br />build/release/BgImage<br />build/release/NSISdl<br />build/release/stub_bzip2_solid<br />build/release/Splash<br />build/release/VPatch<br />build/release/VPatch/Source<br />build/release/VPatch/Source/Plugin<br />build/release/zip2exe<br />build/release/zip2exe/zlib<br />build/release/makensis<br /><br />build/release/makensis/7zip<br />build/release/makensis/7zip/7zip<br />build/release/makensis/7zip/7zip/Common<br />build/release/makensis/7zip/7zip/Compress<br />build/release/makensis/7zip/7zip/Compress/LZ<br />build/release/makensis/7zip/7zip/Compress/LZMA<br />build/release/makensis/7zip/7zip/Compress/RangeCoder<br />build/release/makensis/7zip/Common<br />build/release/makensis/zlib<br />build/release/makensis/bzip2<br />build/release/StartMenu<br />build/release/stub_lzma_solid<br />build/release/stub_lzma<br />build/release/stub_zlib<br />build/release/UserInfo<br />build/release/LangDLL<br />build/release/MakeLangId<br />build/release/halibut<br />build/release/Library<br />build/release/Library/LibraryLocal<br />build/release/Library/TypeLib<br />build/release/nsExec<br />build/release/InstallOptions<br />build/release/stub_zlib_solid<br />build/release/Makensisw<br />build/release/stub_bzip2<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th May 2005 12:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, updated to match in CVS.<br />
      <br />
      You don't have to clean the build directory. You can use the install target along with the PREFIX command line option to get a clean copy with no sources and no intermediate build files.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">21st May 2005 08:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SCons/Config/gnu cross_env should be:<br />
      <br /></p>
      <pre>
<code><br />def cross_env(env):<br />  if env['PLATFORM'] != 'win32':<br />    env.Tool('crossmingw', toolpath = ['../Tools'])<br /></code>
</pre><br />
      <br />
      instead of:<br />
      <br />
      <pre>
<code><br />def cross_env(env)<br />  if env['PLATFORM'] != 'win32':<br />    env.Tool('crossmingw', toolpath = ['../Tools'])<br /></code>
</pre><br />
      <br />
      Otherwise I get a syntax error (missing : at the end of the if line).<br />
      <br />
      Also, do you plan to create a way to enable/disable stuff on the commandline so the attached patch isn't nessecary - something like:<br />
      <br />
      scons DONT_BUILD_PLUGINS=System ADD_DEFLIBS=NSISdl DONT_BUILD_CHM DOCS_INSTALL_HTML
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">21st May 2005 16:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fixed cross_env, thanks.<br />
      <br />
      I have added a few command line options. It should now all work without a change, by using:</p>
      <pre>
<code>scons SKIPPLUGINS=System</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">22nd May 2005 12:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Running scons SKIPPLUGINS=System install gives this:<br />
      <br /></p>
      <pre>
<code><br />scons: *** Source `Docs/src/style.css' not found, needed by target `nsis-2.06/Docs/style.css'.  Stop.<br />scons: building terminated because of errors.<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th May 2005 20:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, fixed.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">16th June 2005 12:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm preparing the debian package of 2.07b0 as an exercise in packaging the scons version of nsis. I'm running up against problems with the debian build tools not being able to represent changes to binary files that are changed during scons -c (which needs to be run before building a .deb). It'd be great if .sconf_temp, .sconsign.dblite and SCons/Tools/crossmingw.pyc could be absent from the source release tarball.<br />
      <br />
      Also, might I suggest installing stuff to different locations on POSIX platforms? In my 2.06 debian package, I installed stuff to the following. Hmm, 2.07b0 doesn't seem to install everything when PREFIX is set - only makensis and the stubs.<br />
      <br /></p>
      <pre>
<code><br />/etc/nsisconf.nsh<br />/usr/bin/makensis<br />/usr/share/doc/nsis/ (text readme files and html2text conversions)<br />/usr/share/doc/nsis/examples/ (example nsi files)<br />/usr/share/doc/nsis/html/ (html docs, and html docs from some plugins)<br />/usr/share/nsis/Contrib/<br />/usr/share/nsis/Include/<br />/usr/share/nsis/Plugins/<br /></code>
</pre><br />
      <br />
      I'd suggest that the location of the config file be separately configurable to the PREFIX (in the above, PREFIX=/usr). On end-user POSIX systems, PREFIX should default to /usr/local, and the config file should be in PREFIX/etc/nsisconf.nsh by default. Also, in my debian package, I check for a per-user $HOME/.nsisconf.nsh file, should I submit the patch for that?<br />
      <br />
      Also, it would be good to have a copy of the cvs changelog in the source release tarball as a ChangeLog file (using <a href="http://www.red-bean.com/cvs2cl/" target="_blank">http://www.red-bean.com/cvs2cl/</a>) and a text copy of appendix E as a NEWS file.<br />
      <br />
      Also, I wrote a manpage (in docbook) for makensis for the debian package, should I submit it for inclusion?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">17th June 2005 14:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">.sconf_temp, .sconsign.dblite and SCons/Tools/crossmingw.pyc are absent of source release tarballs. A source release is simply a dump of CVS with a specific tag.<br />
      <br />
      If you submit a patch that will install files to more standard locations on POSIX, I will apply it.<br />
      <br />
      If only makensis and the stubs are installed, it's probably because the `install` target is aliased to the directory specified by PREFIX. If you install to other directories, they must be aliased to `install` too.<br />
      <br />
      Please submit a patch for ~/.nsisconf.nsh. It's a nice feature. I might also back-port it to Windows.<br />
      <br />
      Please also submit the manpage patch.<br />
      <br />
      As for NEWS and ChangeLog, they can be easily generated without being included in the package for now.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">18th June 2005 06:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, the install-docs, install-examples, install-includes, install-plugins etc all complain about the missing directory and then do nothing after I create it.<br />
      <br />
      As far as I can see, the other targets are aliased to the correct directories:<br />
      <br /></p>
      <pre>
<code>defenv.Alias('install', '$PREFIX')<br />defenv.Alias('install-docs', '$PREFIX/NSIS.chm')<br />defenv.Alias('install-docs', '$PREFIX/Docs')<br />defenv.Alias('install-examples', '$PREFIX/Examples')<br />defenv.Alias('install-plugins', '$PREFIX/Plugins')<br />defenv.Alias('install-stubs', '$PREFIX/Stubs')<br />defenv.Alias('install-includes', '$PREFIX/Include')</code>
</pre><br />
      <br />
      Submitted the manpage and the per-user configs patch. I'll try to get my head around scons and create a patch for installing to POSIX standard locations.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th June 2005 12:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What exactly is it saying about those directories? I was talking about a case where you've already changed where it installs files in which case the aliases are out of date.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">18th June 2005 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">From a clean checkout just now:<br />
      <br /></p>

      <blockquote>
        <font size="1">pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install<br />
        scons: Reading SConscript files ...<br />
        <br />
        scons: *** Path for option PREFIX does not exist: debian/nsis/usr<br />
        File "SConstruct", line 80, in ?<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ mkdir -p debian/nsis/usr<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... yes<br />
        Checking for memset requirement... yes<br />
        Checking for main() in C library gdi32... no<br />
        Checking for main() in C library user32... no<br />
        Checking for main() in C library version... no<br />
        Checking for main() in C library pthread... yes<br />
        Checking for main() in C library stdc++... yes<br />
        Checking for main() in C library iconv... no<br />
        Checking for main() in C library libiconv... no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        i586-mingw32msvc-gcc -Os -Wall -x c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DNSIS_COMPRESS_USE_BZIP2 -c -o build/release/stub_bzip2/bgbg.o Source/exehead/bgbg.c<br />
        &lt;snip building makensis and stubs&gt;<br />
        gcc -O2 -Wall -c -o build/release/makensis/zlib/trees.o Source/zlib/trees.c<br />
        g++ -s -Wl,-Map,build/release/makensis/makensis.map -o build/release/makensis/makensis build/release/makensis/build.o build/release/makensis/clzma.o build/release/makensis/crc32.o build/release/makensis/DialogTemplate.o build/release/makensis/dirreader.o build/release/makensis/growbuf.o build/release/makensis/lang.o build/release/makensis/lineparse.o build/release/makensis/makenssi.o build/release/makensis/mmap.o build/release/makensis/Plugins.o build/release/makensis/ResourceEditor.o build/release/makensis/ResourceVersionInfo.o build/release/makensis/script.o build/release/makensis/ShConstants.o build/release/makensis/strlist.o build/release/makensis/tokens.o build/release/makensis/util.o build/release/makensis/bzip2/blocksort.o build/release/makensis/bzip2/bzlib.o build/release/makensis/bzip2/compress.o build/release/makensis/bzip2/huffman.o build/release/makensis/7zip/7zGuids.o build/release/makensis/7zip/Common/CRC.o build/release/makensis/7zip/7zip/Compress/LZ/LZInWindow.o build/release/makensis/7zip/7zip/Compress/LZMA/LZMAEncoder.o build/release/makensis/7zip/7zip/Common/OutBuffer.o build/release/makensis/7zip/7zip/Compress/RangeCoder/RangeCoderBit.o build/release/makensis/7zip/Common/Alloc.o build/release/makensis/zlib/deflate.o build/release/makensis/zlib/trees.o -lpthread -lstdc++<br />
        Install file: "build/release/makensis/makensis" as "debian/nsis/usr/makensis"<br />
        scons: done building targets.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install-docs<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... (cached) yes<br />
        Checking for memset requirement... (cached) yes<br />
        Checking for main() in C library gdi32... (cached) no<br />
        Checking for main() in C library user32... (cached) no<br />
        Checking for main() in C library version... (cached) no<br />
        Checking for main() in C library pthread... (cached) yes<br />
        Checking for main() in C library stdc++... (cached) yes<br />
        Checking for main() in C library iconv... (cached) no<br />
        Checking for main() in C library libiconv... (cached) no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        scons: *** Source `debian/nsis/usr/NSIS.chm' not found, needed by target `install-docs'. Stop.<br />
        scons: building terminated because of errors.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install-examples<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... (cached) yes<br />
        Checking for memset requirement... (cached) yes<br />
        Checking for main() in C library gdi32... (cached) no<br />
        Checking for main() in C library user32... (cached) no<br />
        Checking for main() in C library version... (cached) no<br />
        Checking for main() in C library pthread... (cached) yes<br />
        Checking for main() in C library stdc++... (cached) yes<br />
        Checking for main() in C library iconv... (cached) no<br />
        Checking for main() in C library libiconv... (cached) no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        scons: *** Source `debian/nsis/usr/Examples' not found, needed by target `install-examples'. Stop.<br />
        scons: building terminated because of errors.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ mkdir -p debian/nsis/usr/Examples<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install-examples<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... (cached) yes<br />
        Checking for memset requirement... (cached) yes<br />
        Checking for main() in C library gdi32... (cached) no<br />
        Checking for main() in C library user32... (cached) no<br />
        Checking for main() in C library version... (cached) no<br />
        Checking for main() in C library pthread... (cached) yes<br />
        Checking for main() in C library stdc++... (cached) yes<br />
        Checking for main() in C library iconv... (cached) no<br />
        Checking for main() in C library libiconv... (cached) no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        scons: `install-examples' is up to date.<br />
        scons: done building targets.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ find debian/nsis/usr/<br />
        debian/nsis/usr/<br />
        debian/nsis/usr/Stubs<br />
        debian/nsis/usr/Stubs/lzma<br />
        debian/nsis/usr/Stubs/zlib<br />
        debian/nsis/usr/Stubs/bzip2<br />
        debian/nsis/usr/Stubs/lzma_solid<br />
        debian/nsis/usr/Stubs/uninst<br />
        debian/nsis/usr/Stubs/zlib_solid<br />
        debian/nsis/usr/Stubs/bzip2_solid<br />
        debian/nsis/usr/makensis<br />
        debian/nsis/usr/Examples<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install-plugins<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... (cached) yes<br />
        Checking for memset requirement... (cached) yes<br />
        Checking for main() in C library gdi32... (cached) no<br />
        Checking for main() in C library user32... (cached) no<br />
        Checking for main() in C library version... (cached) no<br />
        Checking for main() in C library pthread... (cached) yes<br />
        Checking for main() in C library stdc++... (cached) yes<br />
        Checking for main() in C library iconv... (cached) no<br />
        Checking for main() in C library libiconv... (cached) no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        scons: *** Source `debian/nsis/usr/Plugins' not found, needed by target `install-plugins'. Stop.<br />
        scons: building terminated because of errors.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ mkdir -p debian/nsis/usr/Plugins<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons PREFIX=debian/nsis/usr SKIPPLUGINS=System SKIPUTILS=Makensisw install-plugins<br />
        scons: Reading SConscript files ...<br />
        Using GNU tools configuration<br />
        Checking for memcpy requirement... (cached) yes<br />
        Checking for memset requirement... (cached) yes<br />
        Checking for main() in C library gdi32... (cached) no<br />
        Checking for main() in C library user32... (cached) no<br />
        Checking for main() in C library version... (cached) no<br />
        Checking for main() in C library pthread... (cached) yes<br />
        Checking for main() in C library stdc++... (cached) yes<br />
        Checking for main() in C library iconv... (cached) no<br />
        Checking for main() in C library libiconv... (cached) no<br />
        scons: done reading SConscript files.<br />
        scons: Building targets ...<br />
        scons: `install-plugins' is up to date.<br />
        scons: done building targets.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ find debian/nsis/usr/<br />
        debian/nsis/usr/<br />
        debian/nsis/usr/Stubs<br />
        debian/nsis/usr/Stubs/lzma<br />
        debian/nsis/usr/Stubs/zlib<br />
        debian/nsis/usr/Stubs/bzip2<br />
        debian/nsis/usr/Stubs/lzma_solid<br />
        debian/nsis/usr/Stubs/uninst<br />
        debian/nsis/usr/Stubs/zlib_solid<br />
        debian/nsis/usr/Stubs/bzip2_solid<br />
        debian/nsis/usr/Plugins<br />
        debian/nsis/usr/makensis<br />
        debian/nsis/usr/Examples</font>
      </blockquote><br />
      <br />
      Clearly the install target doesn't install stuff when PREFIX is set. Running it without PREFIX set seems to install stuff to nsis-&lt;version&gt;, then convert that to a zip file and remove the directory. That sounds like a job for the dist target rather than the install target.<br />
      <br />

      <blockquote>
        <font size="1">pabs@chianamo:~/devel/debian/nsis/NSIS$ scons SKIPPLUGINS=System SKIPUTILS=Makensisw install<br />
        &lt;snip&gt;<br />
        Install file: "Contrib/Splash/splash.txt" as "nsis-18-Jun-2005.cvs/Docs/Splash/splash.txt"<br />
        Install file: "Contrib/StartMenu/Readme.txt" as "nsis-18-Jun-2005.cvs/Docs/StartMenu/Readme.txt"<br />
        Install file: "Include/StrFunc.txt" as "nsis-18-Jun-2005.cvs/Docs/StrFunc/StrFunc.txt"<br />
        Install file: "Contrib/nsExec/nsExec.txt" as "nsis-18-Jun-2005.cvs/Docs/nsExec/nsExec.txt"<br />
        scons: *** Source `Docs/src/style.css' not found, needed by target `nsis-18-Jun-2005.cvs/Docs/style.css'. Stop.<br />
        scons: building terminated because of errors.<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ touch Docs/src/style.css<br />
        pabs@chianamo:~/devel/debian/nsis/NSIS$ scons SKIPPLUGINS=System SKIPUTILS=Makensisw install<br />
        Install file: "build/release/stub_lzma_solid/stub_lzma.exe" as "nsis-18-Jun-2005.cvs/Stubs/lzma_solid"<br />
        Install file: "Source/exehead/uninst.ico" as "nsis-18-Jun-2005.cvs/Stubs/uninst"<br />
        Install file: "build/release/stub_zlib/stub_zlib.exe" as "nsis-18-Jun-2005.cvs/Stubs/zlib"<br />
        Install file: "build/release/stub_zlib_solid/stub_zlib.exe" as "nsis-18-Jun-2005.cvs/Stubs/zlib_solid"<br />
        Install file: "build/release/makensis/makensis" as "nsis-18-Jun-2005.cvs/makensis"<br />
        zip(["nsis-18-Jun-2005.cvs.zip"], ["nsis-18-Jun-2005.cvs"])<br />
        Delete("nsis-18-Jun-2005.cvs")<br />
        scons: done building targets.</font>
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th June 2005 14:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try specifying a full path for PREFIX. It should only ask you to create the very top directory. At least that's how it works on Windows...<br />
      <br />
      If you use `install` without specifying PREFIX, PREFIX is empty and so `install` builds the current directory which also includes the dist directory. I'll see if some nice error can be raised in this case.<br />
      <br />
      Try the attached patch for Docs/src/SConscript to get rid of the style.css error.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">18th June 2005 17:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are right about the full path for PREFIX thing, setting it like that works.<br />
      <br />
      the Docs/src/SConscript patch gives the following error running scons install:<br />
      <br /></p>
      <pre>
<code>&lt;snip&gt;<br />Checking for main() in C library libiconv... (cached) no<br /><br />scons: *** Error trying to evaluate `${SOURCE.dir}': 'NoneType' object has no attribute 'dir'<br />File "SConstruct", line 94, in Distribute</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">18th June 2005 18:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Replace line 99 of the original version with:</p>
      <pre>
<code>env.DistributeDocs('', build_dir + '/style.css')</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">19th June 2005 06:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, I re-checked out cvs (re-checked out, not updated), and got this:<br />
      <br /></p>
      <pre>
<code>&lt;snip output of scons SKIPPLUGINS=System install&gt;<br />Install file: "Include/StrFunc.txt" as "nsis-19-Jun-2005.cvs/Docs/StrFunc/StrFunc.txt"<br />Install file: "Contrib/nsExec/nsExec.txt" as "nsis-19-Jun-2005.cvs/Docs/nsExec/nsExec.txt"<br />scons: *** Source `Docs/src/style.css' not found, needed by target `nsis-19-Jun-2005.cvs/Docs/style.css'.  Stop.<br />scons: building terminated because of errors.<br />pabs@chianamo:~/devel/debian/nsis/NSIS$ find -iname \*.css<br />./Docs/style.css<br />./build/release/Docs/html/style.css<br />pabs@chianamo:~/devel/debian/nsis/NSIS$ scons SKIPPLUGINS=System install<br />scons: Reading SConscript files ...<br />Using GNU tools configuration<br />Checking for memcpy requirement... (cached) yes<br />Checking for memset requirement... (cached) yes<br />Checking for main() in C library gdi32... (cached) no<br />Checking for main() in C library user32... (cached) no<br />Checking for main() in C library version... (cached) no<br />Checking for main() in C library pthread... (cached) yes<br />Checking for main() in C library stdc++... (cached) yes<br />Checking for main() in C library iconv... (cached) no<br />Checking for main() in C library libiconv... (cached) no<br />scons: done reading SConscript files.<br />scons: Building targets ...<br />Install file: "Docs/src/style.css" as "nsis-19-Jun-2005.cvs/Docs/style.css"<br />Install file: "Contrib/AdvSplash/Example.nsi" as "nsis-19-Jun-2005.cvs/Examples/AdvSplash/Example.nsi"<br />&lt;snip rest of install process&gt;</code>
</pre><br />
      <br />
      I'm thinking that it'd be best to just install "prefix/Docs/style.css" from Docs/style.css, and not bother with copying the .css file around.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">19th June 2005 10:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The latest CVS version should take the file from the build directory. You might have downloaded the old version due to the anonymous CVS lag.<br />
      <br />
      Installing style.css from Docs/style.css is what I've tried in the above patch. It might have worked without ${SOURCE.dir}, but then you wouldn't know for sure if it takes it from Docs/style.css or build_dir/../style.css. The version I've uploaded to CVS works for me as opposed to the old version which didn't work on clean builds. It should work for you too.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">20th June 2005 06:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Anonymous CVS seems to have caught up, but now I get the following error building makensisw (it built fine before). I suppose anon CVS is missing a few files :( Any chance I could get read-only developer access? (my sf.net username is pabs3)<br />
      <br /></p>
      <pre>
<code>i586-mingw32msvc-g++ -O2 -Wall -DWIN32_MEAN_AND_LEAN -DRELEASE=2.0 -c -o build/release/Makensisw/makensisw.o Contrib/Makensisw/makensisw.cpp<br />In file included from Contrib/Makensisw/utils.h:26,<br />                 from Contrib/Makensisw/makensisw.h:28,<br />                 from Contrib/Makensisw/makensisw.cpp:23:<br />Contrib/Makensisw/toolbar.h:80:7: warning: no newline at end of file<br />In file included from Contrib/Makensisw/makensisw.h:28,<br />                 from Contrib/Makensisw/makensisw.cpp:23:<br />Contrib/Makensisw/utils.h:63:7: warning: no newline at end of file<br />In file included from Contrib/Makensisw/makensisw.cpp:23:<br />Contrib/Makensisw/makensisw.h:218:7: warning: no newline at end of file<br />In file included from Contrib/Makensisw/makensisw.cpp:27:<br />Contrib/Makensisw/noclib.h:33:7: warning: no newline at end of file<br />Contrib/Makensisw/makensisw.cpp:29:20: update.h: No such file or directory<br />Contrib/Makensisw/makensisw.cpp: In function `int WinMain(HINSTANCE__*, HINSTANCE__*, char*, int)':<br />Contrib/Makensisw/makensisw.cpp:73: error: `FinalizeUpdate' undeclared (first use this function)<br />Contrib/Makensisw/makensisw.cpp:73: error: (Each undeclared identifier is reported only once for each function it appears in.)<br />Contrib/Makensisw/makensisw.cpp: In function `BOOL DialogProc(HWND__*, UINT, WPARAM, LPARAM)':<br />Contrib/Makensisw/makensisw.cpp:104: warning: passing NULL used for non-pointer converting 3 of `LRESULT SendMessageA(HWND__*, UINT, WPARAM, LPARAM)'<br />Contrib/Makensisw/makensisw.cpp:208: warning: passing negative value `-0x000000001' for converting 2 of `UINT DragQueryFileA(HDROP__*, UINT, CHAR*, UINT)'<br />Contrib/Makensisw/makensisw.cpp:293: warning: passing NULL used for non-pointer converting 6 of `void* CreateFileA(const CHAR*, DWORD, DWORD, _SECURITY_ATTRIBUTES*, DWORD, DWORD, void*)'<br />Contrib/Makensisw/makensisw.cpp:300: warning: passing NULL used for non-pointer converting 6 of `void* CreateFileA(const CHAR*, DWORD, DWORD, _SECURITY_ATTRIBUTES*, DWORD, DWORD, void*)'<br />Contrib/Makensisw/makensisw.cpp:469: error: `Update' undeclared (first use this function)<br />Contrib/Makensisw/makensisw.cpp: In function `BOOL SettingsProc(HWND__*, UINT, WPARAM, LPARAM)':<br />Contrib/Makensisw/makensisw.cpp:1018: warning: unused variable 'rv'<br />Contrib/Makensisw/makensisw.cpp: In function `BOOL SymbolSetProc(HWND__*, UINT, WPARAM, LPARAM)':<br />Contrib/Makensisw/makensisw.cpp:1161: warning: passing NULL used for non-pointer converting 4 of `LRESULT SendMessageA(HWND__*, UINT, WPARAM, LPARAM)'<br />Contrib/Makensisw/makensisw.cpp:1164: warning: passing NULL used for non-pointer converting 4 of `LRESULT SendMessageA(HWND__*, UINT, WPARAM, LPARAM)'<br />scons: *** [build/release/Makensisw/makensisw.o] Error 1<br />scons: building terminated because of errors.</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th June 2005 10:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I forgot to add update.cpp and update.h. They are there now.<br />
      <br />
      I'll see if something can be done with CVS.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
