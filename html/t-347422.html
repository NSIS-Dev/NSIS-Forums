<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Add Static window to existing MUI Page"><title>Add Static window to existing MUI Page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Add Static window to existing MUI Page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=347422">Add Static window to existing MUI Page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">gretty</span><br><span class="post-time small text-muted">27th August 2012 01:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Add Static window to existing MUI Page</strong><br>Hello<br><br><b>Is it possible to add a window(a Label) to an existing MUI page; like the installer page, welcome page?</b><br><br>I would like to add a new label to the installer page. My code below adds a new Static window to the window but its never shown/sits above other windows. <i>I know the window exists because I can see it using WinSpy++ but it sits behind another window.</i> Also the new window has a funny style "Style: 50000000 (hidden, enabled)" whilst other normal static windows have the style "Style: 5000008C (visible, enabled)".<br><br><b>How can I get my label(Static Window) to show?</b><br><br></p><pre>
<code>!include nsdialogs.nsh<br>        !include MUI2.nsh<br><br>        !define MUI_PAGE_CUSTOMFUNCTION_SHOW instshow<br><br>        !insertmacro MUI_PAGE_INSTFILES<br>        !insertmacro MUI_LANGUAGE "English"<br><br>        OutFile "test.exe"<br><br>        Function instshow<br>                FindWindow $0 "#32770" "" $HWNDPARENT<br>                GetDlgItem $2 $0 1016<br>                System::Call 'USER32::CreateWindowEx(i0,t "STATIC",t "Some option",i ${WS_CHILD}|${WS_VISIBLE},i100,i100,i100,i20,i$2,i666,i0,i0) $R2'<br>                System::Call `user32::SetWindowPos(i $R2, i ${HWND_TOP}, i 0, i 0, i 0, i 0, i ${SWP_NOSIZE}|${SWP_NOMOVE})` # attempt to push new label to front<br>                <br>                # Attempt to refresh new labels parent window<br>                GetDlgItem $R0 $HWNDPARENT 1016<br>                ShowWindow $R0 ${SW_HIDE}<br>                ShowWindow $R0 ${SW_SHOW}<br>                # Attempt to refresh new label <br>                ShowWindow $R2 ${SW_HIDE}<br>                ShowWindow $R2 ${SW_SHOW}<br>        FunctionEnd<br><br><br>        Section "Dummy"<br><br>        SectionEnd</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">27th August 2012 12:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If it is the welcome or finish pages you can add new controls to it using nsDialogs. If it is any of the other pages you can add controls at run time as you are doing (I cannot say why it isn't working for you though) or you can add it to the UI resource using Resource Hacker.<br>
      <br>
      The UIs are in Contrib\UIs. You can copy modern.exe to your script directory, modify it and then use it in your script with !define MUI_UI modern_modified.exe.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>