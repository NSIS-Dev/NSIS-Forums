<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="SendMessage and SetCtlColors... text overlaying" />

  <title>SendMessage and SetCtlColors... text overlaying - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">SendMessage and SetCtlColors... text overlaying</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255338">SendMessage and SetCtlColors... text overlaying</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Wabiloo</span><br />
      <span class="post-time small text-muted">12th September 2006 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>SendMessage and SetCtlColors... text overlaying</strong><br />
      I don't understand this one.<br />
      On a custom page, I have a field (Field 8) that is there for me to throw warning messages. A number of radio buttons are on the page as well, and when the user select an option, sometimes he needs to be given a warning. If he then changes the selection for a safe option, the warning disappears<br />
      To make it visible, I set that field to a red color.<br />
      <br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!</span><span style="color: #0000BB">macroWarnExists_WILLERASE<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_INSTALLOPTIONS_READ</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #DD0000">"ComposerDatabase.ini""Field8""HWND"<br /></span> <span style="color: #0000BB">SetCtlColors</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">/</span><span style="color: #0000BB">BRANDING</span><span style="color: #DD0000">"FF0000"<br /></span> <span style="color: #007700">${If}</span><span style="color: #0000BB">$dbExists</span><span style="color: #007700">=</span><span style="color: #0000BB">1<br /></span> <span style="color: #007700">${</span><span style="color: #0000BB">AndIf</span><span style="color: #007700">}${</span><span style="color: #0000BB">_WILLERASE</span><span style="color: #007700">}=</span><span style="color: #0000BB">1<br />
      SendMessage</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">${</span><span style="color: #0000BB">WM_SETTEXT</span><span style="color: #007700">}</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"STR:Adatabasefilealreadyexists.Selectingthisoptionwilloverwriteitcompletely."<br /></span> <span style="color: #007700">${Else}<br />
      ;</span><span style="color: #0000BB">SetCtlColors</span><span style="color: #007700">$</span><span style="color: #0000BB">1000000transparent<br />
      SendMessage</span><span style="color: #007700">$</span><span style="color: #0000BB">1</span><span style="color: #007700">${</span><span style="color: #0000BB">WM_SETTEXT</span><span style="color: #007700">}</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"STR:Safeoption"<br /></span> <span style="color: #007700">${EndIf}<br />
      !</span><span style="color: #0000BB">macroend<br />
      <br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">CustomPageLeave<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_INSTALLOPTIONS_READ</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"ComposerDatabase.ini""Settings""State"<br />
      <br /></span> <span style="color: #0000BB">StrCmp</span><span style="color: #007700">$</span><span style="color: #0000BB">00end<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">$dbExists</span><span style="color: #007700">(global</span><span style="color: #0000BB">variable</span><span style="color: #007700">)</span><span style="color: #0000BB">contains1</span><span style="color: #007700">or</span><span style="color: #0000BB">0<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroWarnExists$dbExists<br />
      Abort<br />
      <br />
      end</span><span style="color: #007700">:<br />
      <br /></span> <span style="color: #0000BB">FunctionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
      However, what happens is that if the user selects an unsafe option, the correct message appears, but if he then selects another one (safe), the message does not disappear, and the "Safe option" message is showing *above* the other one...<br />
      <br />
      Funnily enough, if I decide to have the messages in black (by not using the SetCtlColors", then everything is as it should be...<br />
      <br />
      I've tried all sorts of things, like resetting the color to black first, send an empty message, send blank spaces... nothing works.<br />
      <br />
      Any idea?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th September 2006 17:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try refreshing the label by hiding it and showing it again with ShowWindow (SW_HIDE, SW_SHOW).<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
