<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="SetCtlColors Using Variables"><title>SetCtlColors Using Variables - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">SetCtlColors Using Variables</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317939">SetCtlColors Using Variables</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Zilatica</span><br><span class="post-time small text-muted">23rd March 2010 22:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>SetCtlColors Using Variables</strong><br>I'm using SetCtlColors and want to have the last value be a variable, but the text background is ALWAYS black.<br><br>I have tried<br><br>SetCtlColors $__TEXT "" $__WIN_COLOR<br>and<br>SetCtlColors $__TEXT "" "$__WIN_COLOR"<br><br>Where __WIN_COLOR is defined as one of the following definitions:<br>StrCpy $__WIN_COLOR "0x348017"<br>StrCpy $__WIN_COLOR 0x348017<br>IntOp $__WIN_COLOR "0x348017" + 0<br>IntOp $__WIN_COLOR 0x348017 + 0<br>IntOp $__WIN_COLOR "0x348017" + "0"<br><br>The only thing I can make work to give me green background (control color) is<br>SetCtlColors $__TEXT "" 0x348017<br>or<br>SetCtlColors $__TEXT "" "0x348017"<br><br>Every other option using a variable is treated as garbage and results in a black control background.<br><br>What am I missing?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">24th March 2010 01:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">From the User Manual:<br><br>4.9.14.15 SetCtlColors<br>hwnd [/BRANDING] [text_color] [transparent|bg_color]<br><br>Sets a background color and the text color for a static control, edit control, button or a dialog. <font color="red"><b>text_color and bg_color don't accept variables</b></font>.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">24th March 2010 02:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you really really need to use variables (Why?) You would have to go into undocumented land and get the userdata with GetWindowLong with help from the system plugin. To get the layout of the userdata, you would have to check the nsis source (And needless to say, this struct could change in the future)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Zilatica</span><br><span class="post-time small text-muted">24th March 2010 14:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Not too important</strong><br>Eh, it isn't too important. I was using a variable to set red/green/yellow for bad/good/ok values on a minimum requirements dialog. Instead, I can set a variable and just run an if/elseif/else sequence. I just wondered if I was doing something stupid.<br><br><br>Thanks,<br>Zach</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>