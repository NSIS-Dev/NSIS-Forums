<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="MUI2 and nsDialogs - The reason for it?" />

  <title>MUI2 and nsDialogs - The reason for it? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">MUI2 and nsDialogs - The reason for it?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287568">MUI2 and nsDialogs - The reason for it?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Speed78</span><br />
      <span class="post-time small text-muted">25th February 2008 19:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>MUI2 and nsDialogs - The reason for it?</strong><br />
      Hi,<br />
      <br />
      since the latest release I try to use MUI2. IÂ´ve some questions about it:<br />
      <br />
      1. What is the reason for using MUI2?<br />
      2. Is there a list of new features compared to the old version (MUI1)<br />
      3. Will MUI1 be supported in the future, too?<br />
      <br />
      Then I tried to upgrade to nsDialogs, but I really donÂ´t know how to upgrade my current custom installpages to the new nsDialogs. A few questions about it:<br />
      <br />
      1. Is there an editor to create own custom pages with nsDialogs?<br />
      2. How can I set some data (some text or activate a checkbox or a radio button) to a control in my custom page? Should I use SetUserData? How should I use it? Is there an example for doing this?<br />
      3. Will InstallOptions be supported in the future?<br />
      <br />
      At the moment I donÂ´t see the big advantage to use MUI2 and nsDialogs. IÂ´ve used in my software several custom pages and with some real time notifcation in the dialogs without any problems. Maybe someone can give me a hint why I should use this and how to upgrade it?<br />
      <br />
      Best regards<br />
      <br />
      Rainer</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">25th February 2008 20:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nsDialogs is faster and provides more features as compared to InstallOptions. The main features of MUI2 are similar to MUI1, but it is easier to customize or extend. For example, the Multi-User header files provides a MUI2 page. And of course MUI2 uses nsDialogs so the performance is also better.<br />
      <br />
      New features will only be added to MUI2/nsDialogs, but MUI1/InstallOptions will continue to be included in NSIS 2.x. So you don't need to hurry to upgrade existing scripts with custom pages. For new projects MUI2 is recommended.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">25th February 2008 21:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How can you say its easier to extend? With MUI1 you can move controls around on the welcome/finish page just by editing the .ini @ runtime, with MUI2 you would have to call SetWindowPos and GetWindowRect etc, no?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Speed78</span><br />
      <span class="post-time small text-muted">26th February 2008 08:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      is it possible to use a graphical editor to create custom pages with nsDialogs?<br />
      <br />
      Best regards<br />
      <br />
      Rainer</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th February 2008 13:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Not yet that I know of.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bazzauk2002</span><br />
      <span class="post-time small text-muted">26th February 2008 13:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I agree about this graphical editor when using nsdoalogs, i dont think i shall be using it until such a tool comes out.<br />
      Mind you i aint getting very far with the previous way of doing it either. lol<br />
      <br />
      regards bazzauk2002</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">26th February 2008 14:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think it is fairly unlikely that there will ever be a visual designer for nsDialogs for the following reasons:[list=1][*]nsDialogs can be used for any windows control and can therefore be different from OS to OS. e.g., there may be some controls which are supported on Windows XP and not on Windows 95, etc. It will be extremely difficult and time-consuming to develop such a versatile GUI designer.<br />
      [*]nsDialogs commands are interspersed with regular NSIS commands (and can indeed be split over multiple functions and/or macros). Any GUI designer will have to perform advanced parsing of NSIS scripts to even have a hope of handling this.<br />
      [*]nsDialogs commands can accept variables which can be modified at runtime. It is not possible for a design-time GUI to predict what can happen at runtime.[/list=1]<br />
      <br />
      A workaround would be to use the existing InstallOptions designers to visually design your dialog, and then use existing macros to convert them to nsDialogs commands. Unfortunately, however, this is a one-way process, since any modifications made to the generated nsDialogs commands will not be reflected in the original INI file.<br />
      <br />
      If you are not terribly affected by the performance gains of nsDialogs over InstallOptions (have these ever been quantified, by the way?), and are happy with the limited subset of control types supported by InstallOptions, then perhaps you may have no need to switch from InstallOptions at all.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Speed78</span><br />
      <span class="post-time small text-muted">26th February 2008 18:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">IÂ´ve created several setups with NSIS and every setup contains several at least one custom page. Some setup contains more custom pages than the default pages. At the moment IÂ´ve no need to use some other controls like the default controls.<br />
      <br />
      I think the InstallOptions are very beautiful for beginners to create custom pages, because it is very easy using the graphical editor. Without a graphical editor I canÂ´t imagine to create custom pages without it and I think a professional setup creator must contain an editor (by itself or by a third party vendor) to create custom page. I also donÂ´t want to create my HTML site with notepad!<br />
      <br />
      This is really a reason for me not to use nsDialogs, except when I must use it (NSIS &gt; 2.x).<br />
      <br />
      So, please donÂ´t beat me ;). I partly agree with you and I understand the reasons to implement it, but IÂ´m not really convinced of the new implementations. I think it is a big break and at the moment (or nearly in the future) I can only see new work for me :(.<br />
      <br />
      Best regards<br />
      <br />
      Rainer</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">{_trueparuex^}</span><br />
      <span class="post-time small text-muted">27th February 2008 00:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well creating / and using pages with nsDialogs is actually very similiar to creating windows with Windows api. The whole CreateControl call is just kind of wrap around the <a href="http://msdn2.microsoft.com/en-us/library/ms632680(VS.85).aspx" target="_blank">CreateWindowEx</a> function.<br />
      <br />
      With this design developers that has ever created applications with windows or dialog boxes (what kind of makes sense if you are already creating an installer for your application) should feel right at home when using nsDialogs. And I think this is definitely the right direction to go.<br />
      <br />
      And what comes to graphical designer... There never might be a such complete designer as iceman_k describe, but I am quite confident that nsDialogs designer(s) to create the basic layout for pages will appear at some point.<br />
      <br />
      Cheers :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">6th March 2008 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was kind of wondering about the differences as well. As far as I can tell, the benefits offered with nsDialogs in my case isn't worth the additional complexity.<br />
      <br />
      I know that the documentation says to only use nsDialogs in the MUI2 welcome and finish pages, but <b>can I still use install options with other custom pages and have them share the mui2 look, like the HEADERBMP ?</b><br />
      <br />
      I am doing my first custom dialog and am confused about which direction to go. My one custom dialog will be very simple for the most part. I'm not a big fan of win32 programming. I'd rather not have to read through two sets of documentation to determine which is right for me.<br />
      <br />
      If I have to use MUI 1 with install options, then <b>do you tihnk I would regret using MUI 1 if my custom dialog is very simple?</b></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th March 2008 17:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <ul>
        <li>It is faster. Way faster. INI files were holding InstallOptions back for far too long. nsDialogs could easily handle a large number of controls where InstallOptions would have chocked.</li>

        <li>It's actually so much faster than InstallOptions that it can finally handle notification of changes in edit controls.</li>

        <li>It offers direct access from the dialogs to the script. There's no need to read slow INI files in the leave callback function in order to get information. nsDialogs will call functions in your script for you.</li>

        <li>It is far more capable and less limited. You can create any type of control with nsDialogs so there's no need for additional plug-ins such as InstallOptionsEx with a lot of logic in them for every type of new control.</li>

        <li>As controls are created by code, it's much easier to dynamically create pages.</li>

        <li>Simple "add this style" feature requests can now be easily scripted vy the user.</li>
      </ul>As for MUI1 integration and IO+MUI2 integration - it just works. There's no magic to it. Different plug-ins have created different pages in the same installer for a long time. Even MUI1 installers still use both IO and StartMenu.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">AaronLS</span><br />
      <span class="post-time small text-muted">6th March 2008 18:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the prompt reply. I'm glad to hear the install options will work with MUI2. I'm not trying to knock nsDialogs, as I can see the power of it when that is needed.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Speed78</span><br />
      <span class="post-time small text-muted">6th March 2008 20:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        It is faster. Way faster. INI files were holding InstallOptions back for far too long. nsDialogs could easily handle a large number of controls where InstallOptions would have chocked.
      </blockquote>My install pages have 30 Controls and I think this is a large number of controls and donÂ´t saw any performance problems. I donÂ´t know how much controls other developers needed on a custom page but I think the performance are good enough for the most developers.<br />
      <br />

      <blockquote>
        It's actually so much faster than InstallOptions that it can finally handle notification of changes in edit controls.
      </blockquote>IÂ´m using notifications of changes in my custom page too e.g. with radio buttons - (On a click some textboxes will be disabled) without any problems.<br />
      <br />
      <br />

      <blockquote>
        It offers direct access from the dialogs to the script. There's no need to read slow INI files in the leave callback function in order to get information. nsDialogs will call functions in your script for you.
      </blockquote>Ok. I partly agree with you. I think reading an Ini-File is not so beautiful.<br />
      <br />

      <blockquote>
        It is far more capable and less limited. You can create any type of control with nsDialogs so there's no need for additional plug-ins such as InstallOptionsEx with a lot of logic in them for every type of new control.
      </blockquote>I partly agree with you. But for me I donÂ´t need other controls like the default controls. Probably, this is an interesting feature for other developers .<br />
      <br />
      <br />

      <blockquote>
        As controls are created by code, it's much easier to dynamically create pages.
      </blockquote>Creating controls by code is the most disadvantage. I really prefer a gui editor.<br />
      <br />
      <br />
      Nevertheless I prefer MUI2 + IO and I avoid using the nsDialogs. I really donÂ´t want to upgrade my setups to nsDialogs because this takes so much time.<br />
      <br />
      Best regards<br />
      <br />
      Rainer
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th March 2008 21:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        IÂ´m using notifications of changes in my custom page too e.g. with radio buttons - (On a click some textboxes will be disabled) without any problems.
      </blockquote>I was talking of specifically edit (TEXT) controls.

      <blockquote>
        Creating controls by code is the most disadvantage. I really prefer a gui editor.
      </blockquote>Controls created by code don't interfere with a GUI editor. Swing has a GUI editor and so can nsDialogs. It doesn't have to support everything the user later does with the code it generated. It can even save the dialog as an intermediate format and only generate the code when really needed.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">6th March 2008 23:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think the best option for a dialog editor would be to store the dialog in some generic format and allow it to be exported to InstallOptions INI or nsDialogs script code.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th March 2008 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        <b>Swing has a GUI editor and so can nsDialogs. It doesn't have to support everything the user later does with the code it generated. It can even save the dialog as an intermediate format and only generate the code when really needed.</b>
      </blockquote>Java is a much easier language to parse than NSIS, as far as creating a AST model goes. It has a very well defined grammar , which NSIS does not. Java is also very structured while NSIS is more free-form.<br />
      Doing a one time parse to generate the installer is reasonably easy. However, creating and maintaining a model in memory which is synchronized with text editors is very complex.<br />
      I have made an attempt to create such a parser, but I simply don't have the time- it is a full time effort.<br />
      Creating an intermediate format in which dialogs can be stored is trivial. However, the true power of a GUI builder lies in its round-tripping capability- and that will get lost if the GUI representation is not synchronized with the textual representation.<br />
      <br />
      Just my 2 cents.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th March 2008 11:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I agree that round-tripping can be useful, but using an intermediate format is better than having no support at all.<br />
      <br />
      For InstallOptions you had to manually write the code to set texts based on variables / language strings. That should now be possible with a GUI builder.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th March 2008 13:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Even if you want round-tripping, you can decide that you only support built-in macros in nsDialogs.nsh. That's not much worse than other available solutions. Even with a proper AST, you can't handle loops or functions. Actually, you always can, but it'd be harder and harder to represent, no matter which language you choose.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th March 2008 13:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        <b>Even if you want round-tripping, you can decide that you only support built-in macros in nsDialogs.nsh. That's not much worse than other available solutions. Even with a proper AST, you can't handle loops or functions. Actually, you always can, but it'd be harder and harder to represent, no matter which language you choose.</b>
      </blockquote>All good points. I had briefly considered adding a plugin to EclipseNSIS for creating and editing nsDialogs GUIs, but there were too many pitfalls I found and it I rapidly became aware that I would have to impose too many restrictions for it to be more than a useful toy. e.g.,<br />
      <br />
      1) Only predefined nsDialogs macros will be supported.<br />
      2) All nsDialogs calls will have to be in a single NSH file.<br />
      3) nsDialogs calls for a specific dialog cannot be spread over multiple functions or wrapped in other macros.<br />
      4) No use of variables. If a variable is specified for an (x,y) location or control setting, there is no way a GUI editor can represent it correctly.<br />
      etc.<br />
      <br />
      Given these issues, I abandoned the idea of an nsDialogs GUI builder.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th March 2008 18:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Those restrictions are not much different than those of any other GUI editors I've seen, including VEP (though that was a long time ago, so they may have advanced).<br />
      <br />
      Even with all of these restrictions and more, the editor will still be at least as good and feature-complete as any of the old InstallOptions editors.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th March 2008 22:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">One of the advantages VE has is the JDT editor with its associated AST model which it gets for free with Eclipse. Also, from what I remember, VEP was not very happy if you messed around too much with the generated code- it would tolerate only a certain level of manual modification. However, like you said, it may have improved a lot now.<br />
      <br />
      The way VE works is quite interesting- from what I remember, it actually fires up a separate java VM in which the SWT or Swing widgets are instantiated and it then uses reflection and the Java beans mechanism to interact with the widgets.<br />
      Because these are objects which it can interact with in real time, runtime behavior can be emulated reasonably easily.<br />
      e.g., it can use the AST to determine variable values, etc., at runtime and use those to interact with the widget classes and determine how they react to variable inputs.<br />
      <br />
      I am not sure how other Swing GUI editors work and how flexible they are.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">26th September 2010 01:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br />
        Not yet that I know of.
      </blockquote>Any good news since then? :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">redxii</span><br />
      <span class="post-time small text-muted">26th September 2010 08:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">GUI editors are mentioned. You can use a program called ResEdit, kinda like ResHacker, but it's much better than ResHacker. Set the size to 140 high and 300 wide and no border, and design away. Once you have what you want then grab the x y w h values and use those. It only lists dialog units, when using other languages or DPI settings I recommend staying away from using pixels. So much better than guessing and repeat compiling and hoping your nsDialogs page will turn out how you want it.<br />
      <br />
      I also used ResEdit when customizing the included UIs.<br />
      <br />
      <a href="http://www.resedit.net/" target="_blank">http://www.resedit.net/</a> (You don't need the Platform SDK.)<br />
      <br />
      ResEdit is still being updated, ResHacker was last updated in 2002. As a warning though, save your form often because ResEdit tends to crash.<br />
      <br />
      Also when creating a new page I create a mini script, very small and fast to compile. So if your program is large you don't have to wait long to see how your page turns out, and using DetailPrint or MessageBox to see if the variables you use return the desired values.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">26th September 2010 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by redxii</small><br />
        <a href="http://www.resedit.net/" target="_blank">http://www.resedit.net/</a>
      </blockquote>Thanks, I'll give it a try.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
