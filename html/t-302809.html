<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Name, OutFile, InstallDir" />

  <title>Name, OutFile, InstallDir - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Name, OutFile, InstallDir</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302809">Name, OutFile, InstallDir</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KalleBalle</span><br />
      <span class="post-time small text-muted">5th February 2009 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Name, OutFile, InstallDir</strong><br />
      Hey! I am new to this and have mananged to find answers to most questions that have poped up. But with this one I could use some help.<br />
      <br />
      I need to be able to change the name, outfile and installdir among other things depending on the users nationality. Right now the installer is a modified version of Modern UIs MultiLanguage.nsi.<br />
      <br />
      So I have the following code:<br />
      <br />
      var PublisherName<br />
      var ProductGroup<br />
      var ProductName<br />
      <br />
      ;Name and file<br />
      Name $ProductName<br />
      <br />
      ;Default installation folder<br />
      InstallDir "$PROGRAMFILES\$(^PublisherName)\$(^ProductGroup)\$(^ProductName)"<br />
      <br />
      Function .onInit<br />
      <br />
      StrCpy $PublisherName "a"<br />
      StrCpy $ProductGroup "b"<br />
      StrCpy $ProductName "c"<br />
      <br />
      When the installer is run the default path is:<br />
      C:\Programs\\\<br />
      <br />
      Guessing this means that the InstallDir code is run before the .onInit and not update after the .onInit has been run. But there must be some way to make this work...<br />
      <br />
      Help would be greatly appriciated!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">5th February 2009 15:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Function .onInit<br />
      ...<br />
      StrCpy $instdir "c:\some fancy path\$myvar\hello"<br />
      FunctionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th February 2009 15:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What you're looking for is !define and ${const}.</p>
      <pre>
<code>!define PUBLISHER_NAME a<br />!define PRODUCT_GROUP b<br /><br />InstallDir $PROGRAMFILES\${PUBLISHER_NAME}\${PRODUCT_GROUP}</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">KalleBalle</span><br />
      <span class="post-time small text-muted">5th February 2009 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wow, those are some fast replies, impressive and much appreciated. Bit confused. Can NSIS !define be changed at run-time? Else I don't understand how that would work...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th February 2009 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS defines can't be changed at runtime, but if you want to change OutFile as well, you have to use !defines as that can never change on runtime.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
