<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS Check if directory exists"><title>NSIS Check if directory exists - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS Check if directory exists</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=248525">NSIS Check if directory exists</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">BashLogic</span><br><span class="post-time small text-muted">12th June 2006 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS Check if directory exists</strong><br>Greetings,<br><br>the last couple of weeks, I have been fooling arround with NSIS and taken the initiative to convert all related work to it as it would be easier to have the option of starting up the single installer that would take care of all the other installations required to be done :) (various agent software and OS tweaking ..)<br><br>now there are several subjects im facing some dificulties with, I hope some of you guys here could help me out.<br><br>due to the different operating systems and versions that are administered, I need to be able to verify whether a directory in a given path exists so i can continue processing other tasks based on that, how and what is the best way for this to be accomplished, for example, i need to find out whether c:\admtools exists or c:\foobar exists, if it does<br>then a variable would be flagged (myfoldervar=1)<br><br>ive tried to lookup in the forum, but i didnt find any clear answer to this,<br><br>hoping to hear from the pros soon,<br><br>regards<br>BL</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">iceman_k</span><br><span class="post-time small text-muted">12th June 2006 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: NSIS Check if directory exists</strong><br></p><blockquote><i>Originally posted by BashLogic</i><br><b>ive tried to lookup in the forum, but i didnt find any clear answer to this,<br></b></blockquote>Did you try looking up the NSIS Users Manual?<br>Use the IfFileExists instruction.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">BashLogic</span><br><span class="post-time small text-muted">12th June 2006 16:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yes i noticed that "if file exist" feature, i just wanst sure whether it is the appropriate one giving it a thought whehter "if directory exist" method exists as well :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">12th June 2006 17:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">IfFileExists "$INSTDIR\directory\*.*" ...<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">iceman_k</span><br><span class="post-time small text-muted">12th June 2006 18:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by BashLogic</i><br><b>yes i noticed that "if file exist" feature, i just wanst sure whether it is the appropriate one giving it a thought whehter "if directory exist" method exists as well :)</b></blockquote>From the NSIS Users Manual:<br><br><blockquote>Checks for existence of file(s) file_to_check_for (which can be a wildcard, or a <b>directory</b>)</blockquote>I think it speaks for itself.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kekc</span><br><span class="post-time small text-muted">19th June 2009 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is there a way to know is it a file or directory?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th June 2009 14:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you miss my code?<br><br>Same idea but using LogicLib:<br></p><pre>
<code>${If} ${FileExists} `$INSTDIR\file\*.*`<br>  ; file is a directory<br>${ElseIf} ${FileExists} `$INSTDIR\file`<br>  ; file is a file<br>${Else}<br>  ; file is neither a file or a directory (i.e. it doesn't exist)<br>${EndIf}</code>
</pre><br>
      <br>
      Edit: Note the order of checks is important.<br>
      <br>
      Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kekc</span><br>
      <span class="post-time small text-muted">19th June 2009 14:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the answer!<br>
      <br>
      But I have found the winapi function:<br>
      <a href="http://nsis.sourceforge.net/GetFileAttributes" target="_blank">http://nsis.sourceforge.net/GetFileAttributes</a><br>
      <br>
      Good luck!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">19th June 2009 15:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why use that when you can just use the simple logic I gave?<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kekc</span><br>
      <span class="post-time small text-muted">23rd June 2009 08:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">First I thought, that empty dir will be detected as file.<br>
      But then I trieed everything is OK.<br>
      <br>
      Thank you so much!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd June 2009 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes people are misled by the use of *.* but it does cover empty directories because . is the current directory and .. is the parent directory (you will pick up . and .. as files when using FindFirst, FindNext etc).<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SteveRussell</span><br>
      <span class="post-time small text-muted">6th March 2010 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But isn't possible to use a wildcard search on the folder level, is it, thus checking for the existence of multiple folders perhaps with similar names?:<br>
      <br>
      ${If} ${FileExists} `$INSTDIR\file*\*.*`</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br>
      <span class="post-time small text-muted">7th March 2010 00:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The NSIS User Manual describes several useful functions, including "Locate" which supports wildcards:<br>
      <a href="http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.2" target="_blank">http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.2</a><br>
      <br>
      Section E.1.2 of the manual also mentions the "Locate" plugin which supports wildcards:<br>
      <a href="http://nsis.sourceforge.net/Locate_plugin" target="_blank">http://nsis.sourceforge.net/Locate_plugin</a></p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SteveRussell</span><br>
      <span class="post-time small text-muted">7th March 2010 13:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you. I will take a look at it. Some of these things are much simpler when I am doing them in a C++ context. I find myself asking basic questions when it comes to the installer.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>