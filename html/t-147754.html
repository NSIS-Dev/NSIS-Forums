<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Math::Script: Another huge, undocumented, bug-full, but &quot;might be useful&quot; plugin."><title>Math::Script: Another huge, undocumented, bug-full, but "might be useful" plugin. - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Math::Script: Another huge, undocumented, bug-full, but "might be useful" plugin.</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=147754">Math::Script: Another huge, undocumented, bug-full, but "might be useful" plugin.</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">1st September 2003 01:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Math::Script: Another huge, undocumented, bug-full, but "might be useful" plugin.</strong><br>First. Afrow UK: Sorrrrryyyy :) I've got some free time and spent it on math instead of tray icon... No mercy to me, I know...<br><br>To the topic. It's unfinished. No floating-point functions like sin, cos etc, but it's usable for testing.<br>ToDo:<br>1. push / pop<br>2. arrays<br>3. functions:<br>a) floating point<br>b) type conversions<br>c) user defined<br><br>Copy math.zip\plugin\math.dll to your plugins folder and see math.zip\math.nsi as example.<br><br>here comes math.txt:<br></p><blockquote>C-like style scripting (operators at least).<br>Tip: plugin watches the case of the letters.<br><br>How to use it? Simple:<br>Strcpy $0 "Brainsucker"<br>Math::Script "a = 'Math'; B = 'Script'; r0 += ' wants to use ' + a + '::' + b +'!'"<br>DetailPrint "$0"<br>That string will fill r0 with some shit.<br><br>Here are some other samples:<br>10! (factorial, r0 will contain '10! = 362880'):<br>r0 = '10! = ' + (1*2*3*4*5*6*7*8*9)<br>the same:<br>a = b = 1; {++a &lt;= 10, b = b*a}; r0 = (a-1) + '! = ' + b<br>Some floating point:<br>Strcpy $R0 "1e1"<br>Math::Script "pi = 3.14159; R1 = 2*pi*R0; r0 = 'Length of circle with radius ' + R0 + ' is equal to ' + R1 + '.'"<br>Detailprint "$0"<br><br>Ok. Variables.<br>NSIS: r0-r9 -&gt; $0-$9. R0-R9 -&gt; $R0-$R9.<br>Also CMDLINE, INSTDIR, OUTDIR, LANG, EXEDIR.<br>User definable: name starting from character, up to 28 letters long.<br><br>Supported types: int (in fact that is __int64), float (double in fact),<br>string.<br>Int: just numbers, may include sign.<br>Float: -123.456, 123.456e-78, 123e-45<br>String: something in quotes ("", '', ``).<br><br>Operators (some binary, some unary):<br>&gt;&gt;= &lt;&lt;= -= += /= *= |= &amp;= ^= %= -- ++ &gt;&gt; &lt;&lt; &amp;&amp; || &lt;= =&lt; &gt;= =&gt; != ==<br>-&gt; &lt;- = + - * / % &lt; &gt; &amp; | ^ ~ !<br>Only some are applicable to float (logic &amp; arithmetic) and string (+ and logic)<br>of course.<br><br>Script is set of expressions (mathematical in general) delimeted with ';'.<br>Processing is not mathematicaly right (2+2*2 will give 8, not 6), so use round<br>brakes (for ex: 2+(2*2) ).<br><br>Flow control:<br>if-then-else like: [if-expression, then-expr, else-expr]<br>example:<br>[a==0, b=1; c=2, b *= (--c); c/=10]<br>C eq:<br>if (a==0) { b=1; c=2;} else { b*=(c++);c-=10; }<br>while (expr) do; like {expr, do}<br>example:<br>{(c&lt;1.1e25)&amp;&amp;(b &lt; 10), b++; c*=1.23}<br>C eq:<br>while ((c&lt;1.1e25)&amp;&amp;(b&lt;10)) { b++; c*=1.23; }<br><br>All the shit (like variables) will be saved between calls if you'll use<br>/NOUNLOAD or setpluginunload alwaysoff.</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">1st September 2003 01:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Heh. Forgotten the main.<br><br>HAPPY NEW ... AUTUMN! :)<br><br>P.S. todo.4. Float-to-string formatting.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">2nd September 2003 01:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Now Interactive Math Tester included. Just run Mathtest.exe from archive and test your own expression or one from 5 sample expressions with one mouse click :)<br><br>Update: Floating point, type conversion, and float formatting functions are added. Almost all CRT math functions present.<br>Documentation (if it is possible to call THAT thing so) updated a bit.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">2nd September 2003 08:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Cool plug-in. Let me know when you've finished adding all that you wanted.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">5th September 2003 21:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Maybe you based in the function "Mathematical Operation" (old "Advanced Integer Operation"). Try to add these things too:<br><br>- Support for thousand... comma separation (i.e. $1,000,000.00 as in U.S.A.).<br>- Support for comma as decimal separator, and thousand... dot separator (i.e. $1.000.000,00 - as in Brazil).<br>- Predefined functions (i.e. retangle perimeter R=a+b+c+d).<br>- Absolute Value (i.e. |4-12| is 8).<br>- Matrix (i.e. [1;5;2;4]+[6;2;9;12] is [7;7;11;16]).<br>- nPr - Permutation.<br>- nCr - Combination.<br>- % - Percentage (i.e. 8% is 0.08).<br>- E - Exponent (i.e. 2E is 100)<br>- Root (i.e. root(9) is 3)<br>...<br><br>And a question, when you do 1 / 3 what is the result given by the dll? (I cannot open zip files, use NSIS...)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">5th September 2003 21:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1. since the plugin should be small enough in size i'll leave all rarely used functions for scripting. commas for example.<br>3. it will have user definable functions. I'm working on it now, all other things are done.<br>4. fabs()<br>5. for now it will have no support for matrix operation, but matrix is actually an array, and you could write user function to summarize two arrays.<br>6. 7. I should look to the dictionary ;)<br>8. *0.01 actually. unneccesary.<br>all standart mathematical functions are present.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">6th September 2003 04:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">pre-final. Almost all done.<br><br>try this at mathtest.exe:<br><br>ar{"I","like","NSIS"}; s=""; i=0; {i&lt;3, s+=ar[i++]+" "}; r0=s<br><br>or this (this is one script):<br><br>rec(a)([a&gt;1,rec(a-1)*a,1.0])<br>r0 = rec(100)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st September 2003 16:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Still think it's "bug-full"? Should it be released along with NSIS 2.0b4? Any chance you'll get a couple of free minutes to update the docs to HTML (using MUI's readme style)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">21st September 2003 16:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">HTML documentation in my Modern UI/InstallOptions style for System/Math would be very useful. The current text files are quite difficult tot read. The whole template is ready, you just have to convert 'em.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">21st September 2003 21:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik: just kidding :) 1. I've just fixed some of them. 2. currently I don't know any more bugs 3. I know no required features :)<br>Joost: Ok... I'll see what can I do.. Anyway, the Docs-writing is not my primary talent/skill :)<br><br>1. Unary-Pre operators detection fixed.<br>2. Unary Minus operator added (now legal, worked before?).<br>3. GetReference operator (&amp;). For example (a=&amp;b; *a=3;) will set b=3.<br>4. Operators precedence added (C-like), much more intellectual expressions parsing.<br>5. Functions redefenition added, use "#name", like "func()(1); #func()(2);".</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">21st September 2003 21:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Saying it's undocumented and bugfull at the beginning of the documentation is not such a good idea :)<br><br>Nice HTML style documentation would make it way easier to use.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">brainsucker</span><br><span class="post-time small text-muted">21st September 2003 21:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MathTest executable. And another example, ascending bubble sort of array (all items types are accepted), use BubbleSort(ARRAY, SIZE).<br><br>Math::Script /NOUNLOAD "BubbleSort(a,c, i,k,t) (i=1; #{i, i=k=0; #{++k&lt;c, #[a[k]&lt;a[k-1],t=a[k-1];a[k-1]=a[k];a[k]=t;i++]}})"</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>