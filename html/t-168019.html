<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Change the size of the icon for loading window?"><title>Change the size of the icon for loading window? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Change the size of the icon for loading window?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=168019">Change the size of the icon for loading window?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">4th February 2004 12:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Change the size of the icon for loading window?</strong><br>How can I change the size of the icon shown in the setup loading window and the size of the place for the header bitmap?<br>Thanks in advance!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">4th February 2004 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Open up the UI file (Contrib\UIs\modern.exe or default.exe) in Resource Hacker, edit dialog 111, save as another UI and use MUI_UI or ChangeUI to tell NSIS to use it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">4th February 2004 15:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for your reply. I used VisualStudio and edited dialog 111 in modern.exe, removed the old icon and put a new bitmap. Then saved it to a new name. Now the loading window doesn't have any image... Any idea?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">4th February 2004 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ChangeUI (which is what MUI_UI uses) does not take anything else but the dialogs from the resource file. If you want to show the bitmap you'd have to add it yourself to the exe. You should be able to do that using !packhdr and using Resource Hacker's command line options. If you search the forum for !packhdr or Resource Hacker you should find a thread about someone who used the same method but to add XP manifest.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">5th February 2004 16:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please, excuse my stupidity, but I really cannot understand what is happening. After it didn't work with VisualStudio, I downloaded ResourceHacker but the effect was the same. I removed the icon from dialog 111 and put another bitmap. Then I save as another .exe file and used it with !define MUI_UI. The bitmap is there, because I put it over the text field and it is overlapped, but the bitmap content is not there - it is grey. And I really don't understand what is this !packhdr for! Should I use it after I put the bitmap inside the modern.exe and saved it as another name.exe or I may not use it? Please, help!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th February 2004 16:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The bitmap you've added to modern.exe is not part of the dialog, only the bitmap holder. As ChangeUI (MUI_UI too because it uses ChangeUI) doesn't take anything else but the dialogs from the file you specify, the bitmap you've added to modern.exe is not inserted into the resulting installer. To add this bitmap manually, you can use !packhdr. !packhdr allows you to run a program that will modify the exe header. You can use this to add the bitmap back inside. You can call Resource Hacker with some command line arguments that will tell it to add the bitmap to the exe header.<br><br>For example (replace 1 with the desired resource id):<br><br>!packhdr exehead.tmp '"C:\Program Files\Resource Hacker\ResHacker.exe" -add exehead.tmp,exehead.tmp,mybitmap.bmp,BITMAP,1,'<br><br>or:<br><br>!packhdr exehead.tmp '"C:\Program Files\Resource Hacker\ResHacker.exe" -add exehead.tmp,exehead.tmp,myuifile.exe,BITMAP,,'</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello again. Here is where I've come to:<br><br>I edited modern.exe with Resource Hacker and saved it as c:\MyUI.exe. The only thing I did is that I added one more bitmap to dialog 111.<br><br>Then in the script I added the following code:<br><br>!define MUI_UI "c:\MyUI.exe"<br><br>!packhdr "c:\exehead.tmp" '"C:\Program Files\Resource Hacker\ResHacker.exe" -add c:\MyUI.exe,c:\exehead.tmp,c:\MyBMP.bmp,BITMAP,101,'<br><br>I set all paths to c:\ to avoid any quote problems, because I hade some...<br>So the result is the following error:<br>Error finding icon resources: no icons?! -- failing!<br>Error - aborting creation process</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th February 2004 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You got the !packhdr line wrong. You replaced the first exehead.tmp with your UI file. You should have replaced just the third parameter with your UI file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm going crazy with this thing!... Changed the line to:<br><br>!packhdr "c:\exehead.tmp" '"C:\Program Files\Resource Hacker\ResHacker.exe" -add c:\exehead.tmp,c:\exehead.tmp,c:\MyBMP.bmp,BITMAP,101,'<br><br>Now it compiles but when I run the setup, the bitmap is still not there! Please, help!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th February 2004 14:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Are you sure the bitmap place holder you've inserted in dialog 111 is looking for a bitmap with id 101?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 15:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I think te bitmap holder ID is 101. You can see on the attached file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th February 2004 15:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's the id of the bitmap holder. You need to set the caption of the bitmap holder to the id of the bitmap. If that doesn't work with a number, try a name.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 16:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It worked! Great! Now I have to fix two minor problems:<br><br>1. If I set the height of the window and height of the bitmap place holder to 48 pixels, and my bitmap is 48x48 pixels, the dialog looks higher than the bitmap when I run the setup.<br>I fixed this problem by visually adjusting the height of the dialog to be as high as my bitmap, but I wonder why I had to do it this way and why the dialog is not really 48 pixels high when it says that it is 48?<br><br>2. As you remember I set all paths to c:\ because I had quotes problems. When I put the whole second parameter of !packhdr in single quotes, and inside it I put every different file path in double quotes, it said that c:\Program is unknown path - this is happening because it doesn't recognize the quotes... So now when I want to move the files to their original locations what to do with the full paths which have to be quoted because contain spaces?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">6th February 2004 16:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1. It's probably the border. Remove DS_MODALFRAME if you don't want a border.<br><br>2. Resource Hacker's manual says:</p><blockquote>If paths are not included with filenames, then the operating systems’ current folder is presumed to contain the named file. It is generally good practise, though not required here, to enclose filenames contain spaces within double quotes.</blockquote>So you can just skip the paths. But if you really want, you should probably quote each path on its own, not the entire parameter of the -add switch.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 17:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I mean the following:<br><br>!packhdr "c:\exehead.tmp" '"C:\Program Files\Resource Hacker\ResHacker.exe" -add c:\exehead.tmp,c:\exehead.tmp,"\..\extras\MyBMP.bmp",BITMAP,101,'<br><br>As you see here all the second parameter of !packhdr is inside the single quotes, and inside the paths are in double quotes. If only the path to reshacker.exe is inside the double quotes, it's ok, but if I put more quotes for some of the parameters of -add switch, it will say c:\Progra, path not found...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">krisbg</span><br><span class="post-time small text-muted">6th February 2004 17:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks a lot for your help! I found a way to manage somehow with the quotes problem, so everything is ok now!</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>