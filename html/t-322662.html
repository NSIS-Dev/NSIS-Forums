<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="File page similar to directory page in mui2?" />

  <title>File page similar to directory page in mui2? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">File page similar to directory page in mui2?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322662">File page similar to directory page in mui2?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">23rd September 2010 11:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>File page similar to directory page in mui2?</strong><br />
      I wonder if there is a ready-to-use file page just like mui2's directory page but accepting files instead of directories (possibly plus a file extension list). I would implement it using nsDialogs but I think the problem is so common that there are probably several solutions already. Maybe I just didn't use the right search terms to find them?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">23rd September 2010 16:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nope - it's also not all that common in an installer; last I've seen one was for a multi-thousand dollar program that let the user download big fat maintenance update files -or- point to such a file locally (e.g. if provided by the reseller on a separate disc).<br />
      <br />
      But, as you mentioned, it's fairly simple to whip one up yourself with nsDialogs - can just take the template page one for the directory out of the NSIS\Contrib\ModernUI...something folder and adjust that, even :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">23rd September 2010 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I'm now in the process of implementing my own, hope I can post some results soon</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">23rd September 2010 17:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So here it is, layout equals the mui2 directory page. Comments welcome, e.g. on my use of some uniquely created ID to enable multiple use of the page (probably there is a better way?), or how to make the groupbox text useable in multiple languages, ideas for providing "save"-version as well, or JUST GENERALLY NOT GOOD STYLE comments are welcome ;-)<br />
      <br /></p>
      <pre>
<code><br />/*<br /><br />NSIS Modern User Interface 2 - Extensions<br />Generic file page<br />Usage:<br />   Var /GLOBAL filename<br /><br />  !define MUI_FILEPAGE_HEADER_TEXT "Title" ; mandatory as a file page should require some specific description<br />  !define MUI_FILEPAGE_HEADER_SUBTEXT "Subtitle" ; mandatory as a file page should require some specific description<br />  !define MUI_FILEPAGE_TEXT_TOP "Description" ; optional<br />  !insertmacro MUI_PAGE_FILE "filename" "Extension1 description|extension1|Extension2 description|extension2|..." ; attention: use "filename" not "$filename" !<br /><br />*/<br /><br />Var MUI_FILEPAGE_FILEREQUESTHANDLE<br />Var MUI_FILEPAGE_BROWSEBUTTONHANDLE<br /><br />;--------------------------------<br />;Page declaration<br /><br />!macro MUI_PAGE_FILE FILENAME EXTENSIONS <br />    !define MY_ID ${__LINE__}<br />    !insertmacro MUI_PAGE_FILE_MACROS "${MY_ID}" "${FILENAME}" "${EXTENSIONS}" <br />    !verbose push<br />    !verbose ${MUI_VERBOSE}<br />    Page custom MUI_CUSTOMPAGE_FILE_${MY_ID} MUI_CUSTOMPAGE_FILE_LEAVE_${MY_ID}<br /><br />    !verbose pop<br />    !undef MY_ID<br />!macroend<br /><br />!macro MUI_PAGE_FILE_MACROS ID FILENAME EXTENSIONS <br />Function MUI_CUSTOMPAGE_FILE_${ID}<br /><br />    nsDialogs::Create 1018<br />    Pop $0<br /><br />    !insertmacro MUI_HEADER_TEXT "${MUI_FILEPAGE_HEADER_TEXT}" "${MUI_FILEPAGE_HEADER_SUBTEXT}"<br />    !ifndef MUI_FILEPAGE_TEXT_TOP<br />      !define MUI_FILEPAGE_TEXT_TOP ""<br />    !endif<br /><br />    ${NSD_CreateLabel} 0u 0u 100% 60u "${MUI_FILEPAGE_TEXT_TOP}"<br />    <br />    ${NSD_CreateGroupBox} 0u 70u 300u 35u "Selected File"<br />    ${NSD_CreateFileRequest} 10u 85u 210u 12u "$${FILENAME}"<br />    Pop $MUI_FILEPAGE_FILEREQUESTHANDLE<br />    <br />    ${NSD_CreateBrowseButton} 228u 83u 60u 15u "$(^BrowseBtn)"<br />    Pop $MUI_FILEPAGE_BROWSEBUTTONHANDLE<br />    ${NSD_OnClick} $MUI_FILEPAGE_BROWSEBUTTONHANDLE MUI_CUSTOMPAGE_FILE_BROWSE_${ID}<br /><br />    nsDialogs::Show<br />    <br />    !undef MUI_FILEPAGE_HEADER_TEXT<br />    !undef MUI_FILEPAGE_HEADER_SUBTEXT<br />    !undef MUI_FILEPAGE_TEXT_TOP<br /><br />FunctionEnd<br /><br />Function MUI_CUSTOMPAGE_FILE_BROWSE_${ID}<br />  nsDialogs::SelectFileDialog "open" "$${FILENAME}" "${EXTENSIONS}"<br />  Pop $0<br />  ${If} $0 != ""<br />    ${NSD_SetText} $MUI_FILEPAGE_FILEREQUESTHANDLE $0<br />  ${EndIf}<br />FunctionEnd<br /><br />Function MUI_CUSTOMPAGE_FILE_LEAVE_${ID}<br />  Call READ_FILENAME_${ID}<br />FunctionEnd<br /><br />Function READ_FILENAME_${ID}<br />    ${NSD_GetText} $MUI_FILEPAGE_FILEREQUESTHANDLE $${Filename}<br />FunctionEnd<br /><br />!macroend<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">25th September 2010 09:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please use <a href="http://nsis.pastebin.com/" target="_blank">http://nsis.pastebin.com/</a> or attachments to share large amounts of code.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">siggel</span><br />
      <span class="post-time small text-muted">26th September 2010 11:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I've put it to <a href="http://nsis.pastebin.com/sAtyhgTY" target="_blank">http://nsis.pastebin.com/sAtyhgTY</a><br />
      But I can't edit my original post anymore. I'll keep it in mind for future posts.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
