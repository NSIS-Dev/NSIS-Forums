<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Really disabling 'Next' button in a custom page"><title>Really disabling 'Next' button in a custom page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Really disabling 'Next' button in a custom page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296649">Really disabling 'Next' button in a custom page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">zorg117</span><br><span class="post-time small text-muted">29th August 2008 21:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Really disabling 'Next' button in a custom nsDialogs page</strong><br>I am trying to figure out a way to really disable 'Next' button in a custom page created using nsDialogs.<br><br>Here is the code for disabling next button in my nsdialogs page leave function.<br>--------------<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br>--------------<br><br>On my nsDialogs page after the user enters some input and click's 'Next' button (to enter the page's leave function), I disable the 'Next' button and validate some things before enabling it again. This is necessary so that I can control the flow. Unfortunately even when the button appears disabled its not truly disabled and clicking on it multiple times runs the validation step again and again.<br><br>Note: I also tried hiding it, but since I know where it is, clicking on the seemingly non-existent button still counts as a 'Next' button click and the nsDialogs page leave function is entered.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zorg117</span><br><span class="post-time small text-muted">30th August 2008 14:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Anyone?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">31st August 2008 17:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm not sure if I understand your problem. If I disable a button via "GetDlgItem" + "EnableWindow" then it is REALLY disabled. However you could use an additional Var and set this Var to some value which signals whether your "validation step" should run or not. You change that Var every time you enable/disable your button. Now simply check the value of the Var in your "validation" code. In case the Var has the "wrong" value (that is: the Button should be disabled) then you simply skip the validation. Otherwise run the validation normally...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zorg117</span><br><span class="post-time small text-muted">2nd September 2008 15:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you for the response Lord. GetDlgItem+EnableWindow works on every other page but for custom pages for me. Here is how my code looks (I removed some unnecessary information but it should give you a basic idea):<br>#############################################################<br>Page custom PreReqPage CheckPreReqs<br><br>###############################################################################<br>Function DisableNextButton<br>#1 - Next, 2 - Cancel, 3 - Back<br>GetDlgItem $0 $HWNDPARENT 1 #1 for 'Next' button<br>EnableWindow $0 0<br>FunctionEnd<br>###############################################################################<br>Function EnableNextButton<br>#1 - Next, 2 - Cancel, 3 - Back<br>GetDlgItem $0 $HWNDPARENT 1 #1 for 'Next' button<br>EnableWindow $0 1<br>FunctionEnd<br>###############################################################################<br>Function PreReqPage<br>Call ValidatePreReqs<br>Pop $0<br>strcpy $PreReqPass $0<br>${If} $PreReqPass == "1"<br>abort<br>${EndIf}<br>Call HideBackButton<br>nsDialogs::Create /NOUNLOAD 1018<br>Pop $Dialog<br><br>${If} $Dialog == error<br>Abort<br>${EndIf}<br>${NSD_CreateLabel} 0 0 100% 100% ""<br>Pop $Label<br><br>!insertmacro MUI_HEADER_TEXT "Prerequisites Check" "Checking Prerequisites"<br>nsDialogs::Show<br>FunctionEnd<br>###############################################################################<br>Function CheckPreReqs<br>Call DisableNextButton<br><br>Call ValidatePreReqs<br>Pop $0<br>strcpy $PreReqPass $0<br>${If} $PreReqPass == "-1"<br>Call EnableNextButton<br>abort<br>${EndIf}<br>Call EnableNextButton<br>FunctionEnd<br>###############################################################################</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ready3</span><br><span class="post-time small text-muted">3rd September 2008 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is what worked for me. I use this in a function that is called based on:<br>${NSD_OnChange} $Text SerNoChanged<br><br><br>; call this to get a handle to the next button<br>GetDlgItem $sNext $HWNDPARENT 1 # next/install button<br>;then based on different criteria call:<br>EnableWindow $sNext 1 ; to enable<br>; or call<br>EnableWindow $sNext 0 ; to disable</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sheik</span><br><span class="post-time small text-muted">3rd September 2008 20:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This what I use:<br><br>nsDialogs::Create /NOUNLOAD 1018<br>&lt;Snip building of said custom page&gt;<br><br>/* Disable Cancel */<br>GetDlgItem $0 $HWNDPARENT 2<br>EnableWindow $0 0<br><br>nsDialogs::Show</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sheik</span><br><span class="post-time small text-muted">3rd September 2008 20:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oops, mine is disabling Cancel, but the same thing applies for Next as well, just different value for the GetDlgItem.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>