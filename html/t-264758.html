<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to display a custom page based on a setup type"><title>How to display a custom page based on a setup type - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to display a custom page based on a setup type</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264758">How to display a custom page based on a setup type</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">vkoldenh</span><br><span class="post-time small text-muted">31st January 2007 17:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to display a custom page based on a setup type</strong><br>Hi,<br><br>I have created a small installer with a custom page, asking for a specific path. Now I want to be able to show this dialog only, if the customer/user has selected a specific setup type. So for instance, only when he chooses Custom as the setup type.<br><br>Now I have read a number of the forums, and I looked into the documentation, but I need so help or guidance on how this could be done.<br><br>Any help or just ideas would be very much appreciated.<br><br>Thanks in advance.<br><br>Vincent</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">31st January 2007 17:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">See NSIS documentation 4.9.13.10 GetCurInstType<br>Once you manage this, on custom page's create function before the InstallOptions call, check the var and if for instance is anything else than 32 which is the custom install, add abort to skip the page,</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">vkoldenh</span><br><span class="post-time small text-muted">31st January 2007 18:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks. I will have a good read into that chapter.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rochi</span><br><span class="post-time small text-muted">13th March 2007 09:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>I want to get the current install type with GetCurInstType<br>but i can't get the custom install type.<br><br>InstType Full<br><br>GetCurInstType get 0 for "Full" but also 0 for custom ( i think the documentation says custom is ${NSIS_MAX_INST_TYPES} ?)<br>I'm really confused about.<br><br>Thx<br>Frank</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">13th March 2007 09:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">${NSIS_MAX_INST_TYPES} == 32</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rochi</span><br><span class="post-time small text-muted">13th March 2007 10:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">InstType "Full"<br><br>Function .onSelChange<br>;MessageBox MB_OK "Hallo?"<br>GetCurInstType $R1<br>${If} $R1 == ${NSIS_MAX_INST_TYPES}<br>MessageBox MB_OK "Custom"<br>${EndIf}<br>FunctionEnd<br><br>The messagebox appears never.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">13th March 2007 10:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well custom or not (32) is depended on selected/deselected components, e.g. if you select custom from dropdown without changing the components selection then the current install type is still full.<br>Here is a related example:<br></p><pre>
<code>OutFile "Test.exe"<br>InstallDir "$PROGRAMFILES\boo"<br><br>InstType Typical<br>InstType Full<br><br>!include "mui.nsh"<br><br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_LICENSE "${NSISDIR}\Docs\Modern UI\License.txt"<br>!insertmacro MUI_PAGE_COMPONENTS<br>Page Custom custcreate custleave<br>!insertmacro MUI_PAGE_DIRECTORY<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>!insertmacro MUI_LANGUAGE "English"<br><br>Section "common" sec1<br>   SectionIn 1 2<br>SectionEnd<br><br>Section "data" sec2<br>   SectionIn 1 2<br>SectionEnd<br><br>Section /o "examples" sec3<br>   SectionIn 2<br>SectionEnd<br><br>Function custcreate<br>   GetCurInstType $0<br>   StrCmp $0 32 next<br>   Abort<br> next:<br>   !insertmacro MUI_HEADER_TEXT "Warning! Custom Installation" \<br>   "You may see this page whenever your selection is custom installation!"<br>   push $0<br>   InstallOptions::Dialog "$PLUGINSDIR\custom.ini"<br>   pop $0<br>   pop $0<br>FunctionEnd<br><br>Function custleave<br>   MessageBox MB_OK "This is a custom installation"<br>FunctionEnd<br><br>Function .onInit<br>   InitPluginsDir<br>   GetTempFileName $0<br>   Rename $0 "$PLUGINSDIR\custom.ini"<br><br>   WriteINIStr "$PLUGINSDIR\custom.ini" "settings" "numfields" "1"<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "type" "groupbox"<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "text" "I'm a GroupBox, or not..."<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "left" "10"<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "right" "-10"<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "top" "10"<br>   WriteINIStr "$PLUGINSDIR\custom.ini" "field 1" "bottom" "-10"<br>FunctionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>