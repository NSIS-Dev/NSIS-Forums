<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="HTTP calls with NSIS" />

  <title>HTTP calls with NSIS - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">HTTP calls with NSIS</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=185739">HTTP calls with NSIS</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cosmicperl</span><br />
      <span class="post-time small text-muted">7th July 2004 02:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>HTTP calls with NSIS</strong><br />
      Hi,<br />
      I need to make HTTP Post or Get calls and read the results for writing to a file(s). I know about the module to download files from the net, but can I send a HTTP POST? Or can I send a HTPP Get?<br />
      <br />
      Thanks for any help, it's very much appreciated!<br />
      <br />
      Lyle<br />
      <br />
      :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fredtheman</span><br />
      <span class="post-time small text-muted">7th July 2004 16:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: HTTP calls with NSIS</strong><br />
      Don't know about how to POST, but you can just add the parameters in the URL to do a GET, ie.<br />
      <br />
      ::Download "http://srv/myscript.php?item1=a&amp;item2=b<br />
      <br />
      Fred.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cosmicperl</span><br />
      <span class="post-time small text-muted">7th July 2004 22:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Fred.<br />
      <br />
      Here is what I'm trying to acheive. I want to query a cgi script from a server before the files are installed. If the server returns a http error, or an error sent as a text file, I want the install to stop. If it returns a good text file I want to install to complete. Can I read the text that is returned from my script. The sample code for NSISdl only shows if the file was downloaded or not. I need to read from the file.<br />
      <br />
      Also For some of the install files, I want to parse in some data before they are wrtten to the installed folder. How can I do this?<br />
      <br />
      Sorry about all the questions.<br />
      <br />
      Lyle</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th July 2004 23:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS provides commands for file reading and writing, please see the users manual for details.<br />
      <br />
      You can modify strings using StrCpy, StrCmp, StrLen etc.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cosmicperl</span><br />
      <span class="post-time small text-muted">8th July 2004 01:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you Joost Verburg<br />
      <br />
      I've had a look at the manual, here is what I've come up with. I'm ued to perl, so hopefully I'll work this out.<br />
      <br />
      $R0 = "inputfilename.txt"<br />
      $R1 = "outputfilename.txt"<br />
      <br />
      FileOpen $0 $R0 "r"<br />
      FileOpen $1 $R1 "w"<br />
      <br />
      searchfile:<br />
      FileRead $0 $R2<br />
      IfErrors closefiles<br />
      FileWrite $1 $R2<br />
      StrCmp $R2 "linetofind" foundline searchfile<br />
      <br />
      foundline:<br />
      FileWrite $1 "ExtraData"<br />
      Goto searchfile<br />
      <br />
      closefiles:<br />
      FileClose $0<br />
      FileClose $1<br />
      <br />
      <br />
      Would that work?<br />
      <br />
      <br />
      I usually use markers in my files such as --marker-- then search for this in a file and replace with the actual data I want to use. It's easy to do in Perl, but I'm really not familiar with NSIS Script. Would my above code do something similar? Is there a search and replace function I've not noticed?<br />
      <br />
      <br />
      Thanks for your help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cosmicperl</span><br />
      <span class="post-time small text-muted">20th July 2004 11:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Good news.<br />
      <br />
      I've got it working, and furthermore I decided put the code I made into a function so that I can contribute to you all.<br />
      <br />
      It requires the StrFunc include, I've called it FileParse. Only one routine thus far, I'm sure people will want to add more (or I'll add more in the future). The routine is:-<br />
      <br />
      WriteWithSwap ResultVar OutPutFile InputFile StrToSearchFor StrToReplace<br />
      <br />
      Like with StrFunc you have to call it bare first. Then you give it an inputfile and output file, a string to grab and a string to replace it with. It's read the input file and write it to the output file parsing in the swap string. Are you with me?<br />
      <br />
      <br />
      So how do I submit this include to NSIS?<br />
      <br />
      Lyle<br />
      <a href="http://www.cosmicperl.com" target="_blank">http://www.cosmicperl.com</a></p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
