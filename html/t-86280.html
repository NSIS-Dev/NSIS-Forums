<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS Bug..:( Sizes wrong!"><title>NSIS Bug..:( Sizes wrong! - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS Bug..:( Sizes wrong!</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=86280">NSIS Bug..:( Sizes wrong!</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 01:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS Bug..:( Sizes wrong!</strong><br>OK I thought this was just a ZIP2EXE bug but it is the same in normal NSIS.<br><br>When selecting many file it works out the wrong size of teh files.<br><br>When creating a EXE it works out the size of the unzipped exe file wrong.<br><br>It is always more by about 20-50%.<br><br>Thinking about it it maybe just rounding up to the nearest K for each file or something. I have thousands of small files and it is wrong by large amounts. Eg 391 files---total size 837KB NSIS says the install size is 1008KB.<br><br>:(<br><br>Could this be fixed. And hopefully add ZIP2EXE additional features as requested by me before.<br><br>I noticed this before with v1.96 or something when I first used NSIS but I thought it was just ZIP2EXE and it is still here on v1.98<br><br>If this is a bug I cannot beleive no-one has noticed it before.<br><br>I have only been here for 5 minutes. :);)<br><br>Is this more dodgy NullSoft code?:);)<br><br>Cheers,<br><br>Rovastar</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 01:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here is a small sample file.<br><br>Total actual uncompressed size 33.6KB Size NSIS says it is will 40KB.<br><br>Grrrr cannot upload exe files. I have renamed a zip file and attached if you are interested.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 13:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Errm I am sorry I did not email you Smile (so you could put this is in main bug report place) but I didn't know if this is a bug or not as I do not know enough about NSIS. I was actaully awaiting confirmation - of someone more knowledgeable.<br><br>Is it a bug or not?<br><br>also<br><br>I would I would suggest that you get sub-forums from in here of NSIS Wishlist and NSIS Bug reporting, etc. One open thread will get overloaded.<br><br>And way it will loads easier for you to mod.<br><br>Probably best to PMing someone at Nullsoft for this request (Justin or Steve).<br><br>Hope it helps.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">29th April 2002 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Rovastar,<br><br>I'll ask Justin for a sub-Forum. Nice Idea. Didn't know this possibility.<br><br>For your bug: I guess Justin solved it in 1.98.<br></p><blockquote>Made size estimation display nicer and reorganized a little bit.</blockquote>-Hendri.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No you do not undersatnd Smile.<br><br>v1.98 just fixes the rounding amount.<br><br>ie 1.51 MB install was dispalyed as 1MB It was using integers. now it goes to 0.1 of the unit value. Now with v1.98 it displays 1.5MB so it looks nicer.<br><br>Not fixing the amount being wrong in the first place.<br><br>My Bug is that it actually displays the wrong amount to be installed.<br><br>Have a look at my little test NSIS or make one yourself.<br>You notice it more with lots of small files.<br><br>CAn someone test this and confirm or deny? It looks a big bug to me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">29th April 2002 16:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I tested it in NSIS 1.98 and indeed the problem exists! So it's a bug...<br><br>And indeed i did not understand. Sorry, I did not read the whole thread. I saw something about filesize and since the thread was long...<br><br>So it's a bug... :(<br><br>-Hendri.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 16:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK no problem. At least I wasn't doing something wrong.:)<br><br>:) I cannot believe that that bug has been there all the time and no-one has noticed. LOL.<br><br>There must be thousands upon thousands of programs using the NSIS installers out with the incorrect install size. :):D<br><br>I hope it is fixed soon.<br><br>Cheers,<br><br>Rovastar</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">justin</span><br><span class="post-time small text-muted">29th April 2002 22:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, it does round the size of files up to the nearest KB.<br><br>I personally think this is fair to do, since small files typically use as much as 4k or even 32k of space...<br><br>-Justin</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">29th April 2002 23:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">:( :down:<br>For my situation it is a mess though as I have 1000's of small (2 to 5k) files and want to use NSIS (too help support Nullsoft (MilkDrop) stuff too!). It looks unprofessional.<br><br>But it is NOT just samll files. What about large installs as ALL files are rounded up.<br><br>If you have 1000 files and they are all rounded up then the size of the install will display typicially 0.5MB larger than it actually is. (0.5 being the average fraction of a KB that each file is over)<br><br>This is just wrong??!?<br><br>Surely it is not that hard to work out before you compile/create the exe of the correct size? :confused: You could do you interger rounding after it has added up all the files. It would only take a fraction of a second of CPU time to calculte without the rounding.<br><br>If you really will not see this a bug will could you at least make an option for displaying the correct install size?<br><br>NSIS is a well used and respected install method for all sorts of things everywhere. Big and small installs with large and small files.<br>Surely you should cater for all?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">eccles</span><br><span class="post-time small text-muted">30th April 2002 00:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Rovastar,<br><br>If you take a directory containing your 1000 small files, then in explorer right-click and select properties; there are two figures shown - 'Size' and 'Size on disk'. It's this second figure that NSIS attempts to estimate; as this is the actual hard disk space used by those files - and the end-user would need at least that amount of hard disk space free to be able to install those files, even if the logical sizes of all the files added together is a lot less.<br><br>Therefore I think NSIS currently does the Right Thing.<br><br>--<br>Dave.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">30th April 2002 01:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Arrh OK I see what you mean now.<br><br>Sorry I may have missed the point a little with Justin comments. Sorry, I got you now.<br><br>So it is a rough estimation of the size of the install.<br><br>For one of my test set of files<br>Files: 684<br>SIze: 1.13MB<br>Size On Disk 2.70MB<br>NSIS estimated size: 1.5MB<br><br>Then...<br><br>Is it all possible to work out the 'Size' and 'Size on disk' before it is installed? as this would keep every happy.:)<br><br>Or does it depened on your OS/File Format etc. ANd if it does could you work it out it out give that information (accessing winver etc) on the fly?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mmullikin</span><br><span class="post-time small text-muted">30th April 2002 03:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>Is it all possible to work out the 'Size' and 'Size on disk' before it is installed? as this would keep every happy.</blockquote><blockquote>Or does it depened on your OS/File Format etc. ANd if it does could you work it out it out give that information (accessing winver etc) on the fly?</blockquote>It can get pretty complicated. The installing machine may always be a Windows machine, but the destination directory could be a drive/folder on a network server where the cluster sizes can vary quite widely.<br><br>IMHO NSIS is doing the best it can on size estimation.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br><span class="post-time small text-muted">30th April 2002 08:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>small files typically use as much as 4k or even 32k of space...</blockquote>I didn't think of this, but of course. The current estimation is the best! No bugs!<br><br>-Hendri.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>