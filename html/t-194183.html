<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Resuming files after dl"><title>Resuming files after dl - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Resuming files after dl</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=194183">Resuming files after dl</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">zachmension</span><br><span class="post-time small text-muted">20th September 2004 14:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Resuming files after dl</strong><br>Hi all,<br><br>i am a newbie on NSIS and need to provide File Resume features in an installer.<br><br>We simply want to dl files from web and, in case the installer has been quit abnormally or download was not successfull, we want to resume files, that is, checking if the file exists and, if it exists, check for its size and dl it again.<br><br>Is there any implemented feature of NSIS to do this or can someone give a hint how to do it?<br><br>Thanks for your help in advance.<br><br>cheers.<br>alex</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">20th September 2004 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Possible:<br>1. NSISdl plugin.<br>2. <b>IfFileExists</b> instruction.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zachmension</span><br><span class="post-time small text-muted">20th September 2004 15:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>thats what i am actually doing. I may had added the code i am using. Here it is:<br><br><br><br>addsize 600<br><br>IfFileExists "Diary.mp3" Resume<br><br>MessageBox MB_YESNO "File already exists! Do you want<br>to overwrite Diary.mp3" IDYES Install IDNO Resume<br><br>Install:<br>Dialer::AttemptConnect<br>NSISdl::download<br><a href="http://www.kq9.org/temp/Diary.mp3" target="_blank">http://www.kq9.org/temp/Diary.mp3</a> "$INSTDIR\Diary.mp3"<br><br>DetailPrint "Installation details..."<br>SetOutPath "$INSTDIR"<br><br>Resume:<br><br>If file exists, we go to resume. What i wanted is reload the installer automatically, when it has to. That is, when i started dl and something abnormally happaned, i wanted to restart dl again automatically without interference of the user.<br><br>Thanks again for help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">20th September 2004 21:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you try re-calling the plugin?<br>Use a label or goto statment for this.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">20th September 2004 21:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The first error there, is you are using IfFileExists on a non exact path. You need to tell it EXACTLY what path to check.<br><br>IfFileExists "Diary.mp3" Resume<br>Should be:<br>IfFileExists "$INSTDIR\Diary.mp3" Resume<br><br>-Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>