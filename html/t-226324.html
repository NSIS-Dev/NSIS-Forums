<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How to install from lines in a file." />

  <title>How to install from lines in a file. - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How to install from lines in a file.</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=226324">How to install from lines in a file.</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">polygonansigt</span><br />
      <span class="post-time small text-muted">18th September 2005 10:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to install from lines in a file.</strong><br />
      Hi all.<br />
      I have been playing around with nsis for some days now, but i find myself somewhat lost now.<br />
      I have written functions to connect to the internet and retrieve a file:<br />
      <br />
      directory/fileonsystem1.dll|filenameonserver1.dll|MD5<br />
      directory/fileonsystem2.dll|filenameonserver2.dll|MD5<br />
      directory/fileonsystem3.dll|filenameonserver3.dll|MD5<br />
      eof<br />
      <br />
      It goes through that file using readfile, test if fileonsystem1.dll exists on the computer, if it does calculates the md5 value and compare it to the value in the retrieved file, if there is a difference it writes the line to a file. When eof is reached i have a file that looks like this:<br />
      <br />
      plugins/fileonsystem1.dll|filenameonserver1.dll<br />
      plugins/fileonsystem2.dll|filenameonserver2.dll<br />
      <br />
      Here i am completely lost. I would like to have those lines put into sections, one section for each file so the user can select which files to download and install.<br />
      <br />
      I am probabably doing something real wierd i find the scripting laungage quite hard :-)<br />
      <br />
      Many Regards<br />
      poly</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">polygonansigt</span><br />
      <span class="post-time small text-muted">18th September 2005 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As there are no reply's i perhaps am unclear. I have changed the project a bit here is what i have now:<br />
      <br />
      $R0 = path<br />
      $R1 = filename (file has been downloaded to $TEMP)<br />
      <br />
      SetOutPath "$INSTDIR\$R0" (this works)<br />
      File /nonfatal $TEMP\$R1 (this doesn't work)<br />
      <br />
      The file is not installed. Perhaps i am just trying to do something that isn't possible to to in nsis?<br />
      <br />
      It seems that nsis won't have anything to do with the file if it isn't on the system on the time i compile the program.<br />
      <br />
      Like if i specify the file without variables<br />
      File /nonfatal c:\test\filename.dll<br />
      it works fine as long as the filename is on the disk when i compile, but as the point is to download the file and install it that is not possible for me :-)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th September 2005 20:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The <i>File</i> instruction is a compile time instruction, therefore you cannot use run time variables in it.<br />
      <br />
      <i>File</i> takes a file on the compiler machine and compresses it into the installer file. If you are downloading a file and want to install it, use <i>CopyFiles</i> or <i>Rename</i>.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">polygonansigt</span><br />
      <span class="post-time small text-muted">18th September 2005 20:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh i see, i'll try using copy instead :-)<br />
      Thanx a lot.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
