<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CopyFiles from Website?" />

  <title>CopyFiles from Website? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">CopyFiles from Website?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202015">CopyFiles from Website?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">13th December 2004 22:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CopyFiles from Website?</strong><br />
      &nbsp; Hello all, basically what I want to do is this:<br /></p>
      <pre>
<code>CopyFiles "http://www.blabla.com/version.txt" "$TEMP" 
</code>
</pre>I tried it, but it did not work. Is this possible, or should check out that ftp plug in? Basically I want to make a "Version Checker" for a software app I develop. Once I get this version.txt, Iâ€™ll rename it to version.ini, and pull values out of it. What do you think? Thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">13th December 2004 22:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was just playing around with that FTP dll, but then it occurred to me that many of my customers have ftp blocked by their firewall. Is there a way I can transfer this file using http or web port 80? Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">13th December 2004 23:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well i used <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=198596&amp;highlight=dll" target="_blank">Takhir's plugin</a>, what do you all think about his, is it stable? Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">13th December 2004 23:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What's wrong with NSISdl? :/</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">14th December 2004 06:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Lobo Lunar</i><br />
        <b>What's wrong with NSISdl? :/</b>
      </blockquote>Thanks Lobo, actually my only problem with NSISdl is that i did not know it existed. But now i do, and its working very well, thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">14th December 2004 16:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I now have 2 problems. First, NSISdl was working perfectly at home, but now that i'm at work, its not getting past our proxy server, and giving me the error:<br />
      <br />
      Download failed: HTTP/1.1 407 Proxy Authentication Required ( The ISA Server requires authoriztion to fulfill the request. Access to the Web Proxy service is denied. )<br />
      <br />
      So i'm back to using <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=198596&amp;highlight=dll" target="_blank">Takhir's Plugin</a>, which looks like it may get by proxys a bit better then NSISdl. My problem is now, that the .txt file that i'm trying to download off our website arrives on my desktop via my nsis script with the correct name, but when i open it, instead of it being the 3 line text file i made, it is the "Page can not be displayed" html code.:igor:<br />
      <br />
      Any thoughts? I put the InetLoad.dll in my Plugins folder, and put the other files for Takhir's Plugin (InetLoad.cpp, InetLoad.dsp, InetLoad.dsw, InetLoad.rc, resource.h) in a new folder i made called .\NSIS\Contrib\InetLoad, that was my best guess based on other plugins. Help!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">14th December 2004 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What says Internet Explorer about your link? Is URL correct? What code returns plug-in (OK)? Plug-in not creates any html pages, so text comes from Net, may be from proxy server. Can you test attached version?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">14th December 2004 18:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Takhir, yes, the text file's contents are overwritten with the "page can not be displayed" message, and the following:<br />
      <br />
      HTTP 407 Proxy Authentication Required - The ISA Server requires authorization to fulfill the request. Access to the Web Proxy service is denied. (12209)<br />
      Internet Security and Acceleration Server<br />
      <br />
      I'll just attatch the file after it is downloaded, but the text file on our website starts out with this in it:<br />
      <br />
      [Loans]<br />
      CurLoans=GPLDMsr112204.txt<br />
      [Deposits]<br />
      [Mortgage]<br />
      <br />
      <br />
      My code is this:<br /></p>
      <pre>
<code>InetLoad</code>::load "http://files.fipco.com/updates/gulfpak/GPversion.txt" "$EXEDIR\GPversion.txt"
<br /><br /> Pop $0
<br />  MessageBox MB_OK "$0"
<br /> StrCmp $0 "OK" dlok
<br />  MessageBox MB_OK|MB_ICONEXCLAMATION "Download Error, click OK to abort installation" /SD IDOK
<br />  Abort
<br />dlok: 
</pre>And i do get a return of "OK". Thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">14th December 2004 18:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">With your new inetload.dll (above post), I now get a Proxy Error return for $0. :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">15th December 2004 09:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, Jnum. Google shows few links for this situation, I'll try to understand what happens :(<br />
      It looks like "INTERNET_OPEN_TYPE_PRECONFIG (Retrieves the proxy or direct configuration from the registry)" is not enougth..</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">15th December 2004 11:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I recommend you use Lobo Lunar's Internet plugin from <a href="http://www.lobo-lunar.com/nsis" target="_blank">http://www.lobo-lunar.com/nsis</a> to check that the URL is valid or not already.<br />
      <br />
      Something like this:<br />
      Internet::GetUrlCode "hmd.hostileintent.org" "file.txt" $0<br />
      StrCmp $0 200 +3<br />
      MessageBox "URL is broken!"<br />
      Abort<br />
      <br />
      If you have dynamically changing URL's you can use <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=659&amp;instances=0,11" target="_blank">this function</a> to cut a URL into the correct segments for use with the plugin.<br />
      I.e. <a href="http://www.web.com/files/file.ext" target="_blank">http://www.web.com/files/file.ext</a> =&gt; "www.web.com" "files/file.ext"<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
