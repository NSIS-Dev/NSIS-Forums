<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Math plugin help"><title>Math plugin help - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Math plugin help</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245890">Math plugin help</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">10th May 2006 19:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Math plugin help</strong><br>Hello all.<br><br>Well I made a little nsis script to read all txt files in a folder, inspecting them based on some criteria. This works just fine. The inspection process takes place in a function, and therefore the progress bar does not accurately display the true progress of the script.<br><br>What I would like to do is use Stu's RealProgress plug-in to manually set the progress bar. My strategy (feel free to offer up an alternative) is to get then number of files in the folder, say 250, then divide by 100, giving me 2.5 in this case.<br><br>Then after checking each file, I do this:<br><br>(after 1 file checked)<br>$NumFilesChecked/2.5 = .4 --&gt; rounded = $CurrentProgress<br>RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br><br>(after 2 files checked)<br>$NumFilesChecked/2.5 = .8 --&gt; rounded = $CurrentProgress<br>RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br><br>(after 3 files checked)<br>$NumFilesChecked/2.5 = 1.2 --&gt; rounded = $CurrentProgress<br>RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br><br>Ok, so you get it right. If this is an acceptable strategy for manually setting the RealProgress bar, I just need the syntax for using the Math Plug-in to do decimal division, and rounding (separately).<br><br>I have searched like crazy, but just can't seem to understand the math::script usage, can you help me? Thanks all for looking.<br><br>Jnuw</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th May 2006 20:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">$CurrentFile / $TotalFiles * 100<br><br>Progress bar value should be out of 100, i.e. a percentage figure with no decimal point.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">10th May 2006 22:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Stu, your right, that makes more sense. But I'm still going to need the math plugin for that right, otherwise with IntOp I'll lose the decimals: (IntOp $0 2 / 250 ) equals 0, when it really is .008 right?<br><br>Can I get the syntax for the math plug in to do that division, multiplication, and rounding? Or am I still missing something? Thanks so much for your help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">11th May 2006 01:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I would question whether or not the decimal numbers really matter with a progress bar. As long as you are relatively close, it will still give the end user a relative idea of how far into a process your install really is.<br><br>If you still decide you need to do floating point operations, you might take a look at the this <a href="http://nsis.sourceforge.net/FloatOP_plug-in" target="_blank">floating op</a> plugin.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">11th May 2006 19:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks guys, got it to work!</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>