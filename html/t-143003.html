<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSISdl problem"><title>NSISdl problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSISdl problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143003">NSISdl problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st July 2003 12:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSISdl problem</strong><br>I'm experiencing problems with NSISdl on a few of my users' machines.<br>The users are running big Firewalls, which is causing NSISdl to fail everytime.<br>Is there going to be a way to fix this, because I'm sure this will make (or has made) a lot of installers using NSISdl to not function correctly...<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st July 2003 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is Internet Explorer working properly? Can you get Internet Explorer's proxy configuration from them?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st July 2003 13:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The only user I am able to contact now, uses NetScape.<br>He has no Proxy settings, and has a direct connection.<br><br>The other one having problems is away.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st July 2003 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok, user 1 fixed the problems.<br>He messed around with a firewall setting, and that fixed it.<br><br>Soberly Challenged says:<br></p><blockquote>for some reasons, the firewall was blocking it<br>even though I told it to give access<br>but if you could get the app to be able to use an http and ftp proxy that would be great<br>just have it as an option for the people that need it</blockquote>-Stu</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st July 2003 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSISdl uses the proxy setting from Internet Explorer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st July 2003 14:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I will see what my other user has to say...<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">codehistorian</span><br><span class="post-time small text-muted">21st August 2003 15:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>I have the same problem</strong><br>I am having the same problem with NSIS 2. Any luck figuring this one out? I tested NSISdl's ability to grab proxy settings from IE, and it seems to do that just fine. However even without any proxy configuration we get those complaints from our users.<br><br>Thanks much in advance.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st August 2003 21:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">In the end, users had to configure their firewall settings to fix the problems.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">fromcat2me</span><br><span class="post-time small text-muted">25th September 2003 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>crashes with nsisdl + firewall?</strong><br>Hi,<br><br>I'm writing a script that uses nsisDL a lot, it's been working great but i have 2 issues.<br><br>1) Would it be possible to have an option to not display what files are being downloaded (just not display the names, progress bar is good)<br><br>2) I get crashes using my firewall. I've put MessageBox statements around the call to download() and its definitely happening in the dll. I'm using kerio software firewall. When the installer tries to connect to the internet i get a dialog from kerio saying an app is trying to call out. i can then accept or deny it (there is a checkbox to then accept all or deny all traffic), if i deny all with the checkbox on, the installer is fine. If i keep hitting deny (deny, deny, deny), it will crash out the installer.<br><br>anyone else get this / reproduce this? I'll start hacking around the dll and see if i can resolve it, but if the writers can (or someone else involved in the project), the better</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">25th September 2003 16:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) You can use the quiet option. If you want a progessbar, you have to modify the source to make it hide the name.<br><br>2) We have never had reports about NSISdl crashing. Please create a debug version and see where it crashes.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">fromcat2me</span><br><span class="post-time small text-muted">25th September 2003 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Joost Verburg</i><br><b>1) You can use the quiet option. If you want a progessbar, you have to modify the source to make it hide the name.<br><br>2) We have never had reports about NSISdl crashing. Please create a debug version and see where it crashes.</b></blockquote>thanks for the quick reply. I've coded the change for the name removal<br><br>about the firewall crashing, I get the crash at line 70 of nsisdl.cpp<br><br>return CallWindowProc((long (__stdcall *)(struct HWND__ *, unsigned int, unsigned int, long))lpWndProcOld, hwnd, message, wParam, lParam);<br><br>i'm debuggin this with the code from cvs, not my edited code. the message var is WM_ACTIVATE, wnd seems valid, though i haven't checked, maybe its because the dialog for the firewall is the foreground window? i'm not sure, i'll investigate, if you have any ideas, or ideas on how to get you further info, please post</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th September 2003 12:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is this firewall a free download or do I have to pay to get it?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">26th September 2003 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Can you include attach a script too? Are you downloading multiple files?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">psyke</span><br><span class="post-time small text-muted">26th September 2003 18:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Is this firewall a free download or do I have to pay to get it?</b></blockquote>From the <a href="http://www.kerio.com/us/kpf_download.html" target="_blank">kerio</a> site: "Kerio Personal Firewall is free for home and personal use."<br><br>keep up the great work! :)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th September 2003 18:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I see two of them on the website, one of them is not free. I need to know exactly which one it is.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">psyke</span><br><span class="post-time small text-muted">26th September 2003 21:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">sorry, I thought there was only one firewall offered by kerio with different licneses.<br><br>Of course only Afrow knows what exactly his user is umm.... using. ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">fromcat2me</span><br><span class="post-time small text-muted">30th September 2003 22:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">its the free firewall<br>"kerio personal firewall 2.1.5"<br>link here<br><br><a href="http://www.kerio.com/dwn/kpf2-en-win.exe" target="_blank">http://www.kerio.com/dwn/kpf2-en-win.exe</a><br><br>I can't post the script, as its huge and i'm using it at my co. its a very strange problem. I'm downloading multiple files, but i'm calling download multiple times (only one download per call to download right?)<br><br>basically the code looks like<br><br>NSISdl::download "http://www.blah.com/blah.php" "$PLUGINSDIR\test.dat"<br>Pop $R1<br>StrCmp $R1 "cancel" quit ""<br><br>NSISdl::download "http://www.blah.com/blah2.php" "$PLUGINSDIR\test2.dat"<br>Pop $R1<br>StrCmp $R1 "cancel" quit ""<br><br><br>this works find in 80% of the cases. sometimes i have a hard time getting it to crash, if its crashed once before. if i restart the computer, and keep hitting "deny" with correct timing, it will totally crash out.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">fromcat2me</span><br><span class="post-time small text-muted">3rd October 2003 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here is a simple script i'm using that can crash (brings up the "send error report to microsoft" dialog)<br><br>again, it depends on some kind of weird timing with the firewall. you should not check the box to "create a filter", you have to keep hitting deny at a certain rate, for me its about once a second, and i can get it to crash. Sometimes its ok, sometimes it crashes. I've seen this on multiple machines / OSes.<br><br><br>InstType Standard<br><br>Name "Test crash app"<br>ComponentText "This will crash sometimes"<br>OutFile "crash.exe"<br><br>Page instfiles "" "" ""<br><br>Section -DownloadScripts sec0<br>NSISdl::download /TIMEOUT=5000 "http://www.google.com/not-there.html" "not-there.txt"<br>Pop $R1<br><br>StrCmp $R1 "cancel" quitMe ""<br><br>NSISdl::download /TIMEOUT=5000 "http://www.winamp.com/not-there.html" "not-there2.txt"<br>Pop $R1<br><br>StrCmp $R1 "cancel" quitMe ""<br><br>goto out<br><br>quitMe:<br>Quit<br><br>out:<br>SectionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th November 2003 21:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ramon has found and fixed the bug. A fix should be uploaded soon.<br><br>Thank you for your bug report and information fromcat2me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aheld</span><br><span class="post-time small text-muted">29th February 2004 21:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>bug status</strong><br>Is there any more information on this issue?<br>I can't find anything in the bug tracker and I have similar problem with 2.0b4.<br><br>I need to upgrade to 2.0 anyway, but I have some font code that does not work in 2.0 yet.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">29th February 2004 21:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Which issue are you refering to? Please post details about the problems and system configurations.<br><br>You should also try the download stuff using NSIS 2.0. There have been no big language changes since beta 4, what is the font problem?</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>