<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Multithread compression and decompression in makensis" />

  <title>Multithread compression and decompression in makensis - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Multithread compression and decompression in makensis</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=319634">Multithread compression and decompression in makensis</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">partyzone</span><br />
      <span class="post-time small text-muted">2nd June 2010 23:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Multithread compression and decompression in makensis</strong><br />
      Hi,<br />
      <br />
      I have an automated script that produces an installer with makensis and the installer is run automatically for testing purpose. I noticed that only one core is in use during compression and decompression. I think that a multi-threaded compressor would be great for installer creation and for user installation as most of our modern computers have four cores...<br />
      <br />
      What do you think of that?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">3rd June 2010 05:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If I remember correctly, there are some threads about this topic already.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd June 2010 11:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What compression are you using? LZMA uses multithreading.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">partyzone</span><br />
      <span class="post-time small text-muted">3rd June 2010 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Compression Algo</strong><br />
      Sorry, it seems that I "multi threaded" the topic ;)<br />
      <br />
      Thanks for your fast answers!<br />
      <br />
      I use the default algorithm. In the documentation, there is no mention of multi threading, and furthermore, the description seems to describe lzma as the slower one...<br />
      <br />
      Extract:<br />
      "NSIS supports different compression methods, as explained here. ZLIB is the default compression method, which is fast and uses only a little bit of memory. LZMA is a good method for the creation of small installers for internet distribution. BZIP2 usually compresses better than ZLIB but not as good as LZMA, it is useful if you need lower memory usage or fast script compilation."<br />
      <br />
      I'm a little bit confused...<br />
      <br />
      Is it because the multithreading was added lately? Is it because even with multithreading, the compression is still slower? Should I benchmark for myself or I should pay confidence in the documentation?<br />
      <br />
      Regards,</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd June 2010 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://www.7-zip.org/7z.html" target="_blank">http://www.7-zip.org/7z.html</a><br />
      <br />
      Personally, I always use LZMA. The only downside to its use is slow compression. On the other hand it has extremely good compression ratios and fast decompression.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bytebucket</span><br />
      <span class="post-time small text-muted">9th July 2012 15:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">we use LZMA, but on a multi-core build machine only one core appears to be utilized. Afrow UK indicated here that LZMA is multi-threaded, but that was a couple years ago.<br />
      <br />
      Can anyone confirm whether or not LZMA is multi-threaded? It doesn't appear to be from what we can see when running with that option.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">9th July 2012 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">lzma can support multi-threaded compression but only if the compressor is coded to do it and NSIS uses a heavily altered version which is single-threaded (and i cannot remember if the multi-threaded lzma libraries were around when the NSIS lzma support was added).<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bytebucket</span><br />
      <span class="post-time small text-muted">9th July 2012 19:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok, thanks for the clarification. so it sounds like there's no way currently to get multi-threaded compression with NSIS when building an installer? Do you know if there are any plans in this area to provide this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bytebucket</span><br />
      <span class="post-time small text-muted">17th July 2012 17:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">so are there any plans to add support for multi-threaded compression?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrO</span><br />
      <span class="post-time small text-muted">17th July 2012 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i don't know. all i can suggest is looking through the bug / feature tracker and seeing if anything is in there but just being mentioned doesn't mean anything would happen (since it would need someone to find the time / inclination to work on it).<br />
      <br />
      -daz</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bytebucket</span><br />
      <span class="post-time small text-muted">18th July 2012 19:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">where is the bug tracker? I can't seem to find a link for it anywhere on the site here.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th July 2012 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sourceforge.net/Bug_Reports" target="_blank">http://nsis.sourceforge.net/Bug_Reports</a><br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
