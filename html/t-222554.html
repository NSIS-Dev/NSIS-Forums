<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Color, backgrounds, etc..."><title>Color, backgrounds, etc... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Color, backgrounds, etc...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=222554">Color, backgrounds, etc...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">goldy1064</span><br><span class="post-time small text-muted">26th July 2005 18:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Color, backgrounds, etc...</strong><br>I'm trying to make a custom page menu that will show some links for user options (using InstallOptionsEx) and these links will be images. But I want to change the color of the grey background of the dialog and was wondering how to do this?<br><br>I've got<br></p><pre>
<code><br>...<br>Page Custom Pre Post<br>...<br>Function Pre<br>  InstallOptionsEx::initDialog /NOUNLOAD PLUGINSDIR\install_menu.ini<br>  Pop $HWND<br>  SetCtlColors $HWND 000000 ff0000<br>  InstallOptionsEx::show<br>FunctionEnd<br></code>
</pre><br>
      I don't want blue, but this is just to see if it works. Any help would be much appreciated.<br>
      <br>
      Also, I've modified Contrib/UIs/modern.exe as well as modern_headerbmp.exe to be larger (550x399) and was wondering what all the controls in there were for? It seems as if there are multiple controls for different items?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goldy1064</span><br>
      <span class="post-time small text-muted">26th July 2005 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I've partly answered my own question (I guess that's Murphy's Law, once you post, you figure it out). Anyways, I'm able to change the background color through .onGuiInit with<br></p>
      <pre>
<code><br>...<br>!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br>...<br>Function myGuiInit<br>  SetCtlColors $HWNDPARENT 000000 777777<br>  ...<br>FunctionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">26th July 2005 19:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This could be considered as a feature request. Right now you can't set the page color just by configurating the INI file (you had to use SetCtlColors instead). I'm gonna look over this to see what I can do in short term.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goldy1064</span><br>
      <span class="post-time small text-muted">27th July 2005 23:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So, I've got this stuff working, but now I want to make an image into a link and I can't get it to work. This is what I've got so far...<br>
      <br></p>
      <pre>
<code><br>[Field 1]<br>Type=Link<br>Left=<br>Right=<br>Top=<br>Bottom=<br>Width=<br>Height=<br>Notify=ONCLICK<br><br>[Field 2]<br>Type=Bitmap<br>Text=resource\image.bmp<br>Left=<br>Right=<br>Top=<br>Bottom=<br>Width=<br>Height=<br></code>
</pre><br>
      *Note: left, right, top, bottom, width, and height all have the same values for these two fields (and they're non-blank).<br>
      <br>
      If I do it in this order, nothing is shown, but there is a link at those coordinates. If I switch the order of the two fields, then the image is shown, but there is no link there.<br>
      <br>
      Also, is there a way to make a link transparent so that the bitmap I have placed beneath it can be seen?<br>
      <br>
      Help...!
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">28th July 2005 12:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Don't specify Height and Width. Right and Bottom are considered first.<br>
      <br>
      Hmmm... The non-transparency bug of Link controls is a bug. Now, the bitmap one is not a bug because you didn't put any notifications in it. If you did, there would be another bug that don't change the mouse pointer cursor to a hand, the problem that all controls have at this moment. I'll gonna try to fix them when I return to the development of IOEx.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goldy1064</span><br>
      <span class="post-time small text-muted">28th July 2005 18:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Okay, so now I've got this:<br>
      <br></p>
      <pre>
<code><br>[Field 1]<br>Type=Bitmap<br>Text=resource\image.bmp<br>Left=0<br>Right=100<br>Top=0<br>Bottom=100<br>Width=<br>Height=<br>Notify=ONCLICK<br><br>[Field 2]<br>Type=Link<br>Left=0<br>Right=100<br>Top=0<br>Bottom=100<br>Width=<br>Height=<br>Notify=ONCLICK<br></code>
</pre><br>
      <br>
      and this will work, but the image doesn't have the hand when the cursor is over it like a normal link.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">29th July 2005 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm... I don't think I should fix the non-transparency problem with Link controls, because I would need to do this with other of controls like Label and Checkbox. This would make necessary manually handling most of the messages to change those controls when the page is running, making the plugin even bigger.<br>
      <br>
      I don't know how to implement the change of mouse pointers for controls. Maybe adding another INI value name for this purpose and make it work with certain notifications?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goldy1064</span><br>
      <span class="post-time small text-muted">29th July 2005 17:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think that this would be another one of those link transparency issues because if I had the link field first (which causes the bitmap not be shown, then the mouse changes to the hand in the appropriate place), then the link would be transparent and you would only see the bitmap.<br>
      <br>
      I think I found in the code where to make the link transparent, but I'm not sure how to go about it and I don't really have time to figure it out. I think it's at the switch statement around line 1899:<br></p>
      <pre>
<code><br>  // BgColor<br>  //--------------------------------------------------------------<br>    if((COLORREF)myGetProfileInt("BgColor", 0xFFFFFFFF) == 0xFFFFFFFF)<br>          switch(pField-&gt;nType) {<br>                case FIELD_TEXT:<br>                case FIELD_LISTBOX:<br>                case FIELD_COMBOBOX:<br>                  pField-&gt;crBgColor = GetSysColor(COLOR_WINDOW);<br>                  break;<br>                case FIELD_DATETIME:<br>                case FIELD_MONTHCALENDAR:<br>                  pField-&gt;crBgColor = GetSysColor(COLOR_INFOBK);<br>                  break;<br>                case FIELD_LINK:<br>                  pField-&gt;crBgColor = myGetProfileInt("BgColor", 0xFFFFFFFF);<br>                  break;<br>                default:<br>              pField-&gt;crBgColor = myGetProfileInt("BgColor", 0xFFFFFFFF);<br>                  break;<br>          }<br>        else<br>    {<br>          if (pField-&gt;nFlags &amp; FLAG_CUSTOMDRAW_TEMP)<br>                pField-&gt;nFlags &amp;= ~FLAG_CUSTOMDRAW_TEMP;<br>          pField-&gt;crBgColor = myGetProfileInt("BgColor", 0xFFFFFFFF);<br>        }<br></code>
</pre><br>
      And I put in the case for FIELD_LINK, even though it's not doing anything right now.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">29th July 2005 17:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Did you even read what I wrote in my last 2 posts? I just told you why I'm not going to support this feature of "transparency" anymore. I had that "feature" because of a bug that existed with Link controls, which was fixed on the current IOEx version. Means that this feature you're pursuing was really a bug.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goldy1064</span><br>
      <span class="post-time small text-muted">29th July 2005 18:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is there a place I can get this older version from so that I can have this bug that I want?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">29th July 2005 20:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh crap. I always thought that I had someday implemented this but actually never even did. I don't know why this "trick" was still on docs... :confused: Thank you anyways for reporting this.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>