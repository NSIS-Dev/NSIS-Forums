<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Need help for a very in-depth installation" />

  <title>Need help for a very in-depth installation - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Need help for a very in-depth installation</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=344593">Need help for a very in-depth installation</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eqizeqiz</span><br />
      <span class="post-time small text-muted">3rd May 2012 04:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Need help for a very in-depth installation</strong><br />
      Hey everyone,<br />
      <br />
      First off I read through the rules for this forum and I believe what i'm wanting to do isn't against any of the rules. This type of installation is extremely important to me and I need to be able to accomplish this as soon as possible.<br />
      <br />
      What I'm trying to achieve:<br />
      <br />
      I resell software from a vendor and currently right now they don't offer great "Rebranding" features in the installation of their product. What I want to be able to do is create an installation file that will install both my software and their software at the same time. The only problem is their installation is a basic "setup.exe" that has to be ran since it creates a lot of different registry values etc.<br />
      <br />
      I have my own setup.exe that i want to be ran before theirs so i can make sure that everything is installed properly. Their installation setup.exe installs some files, but sometimes they don't get installed correctly and this is where my setup.exe comes into play by installing this files first so their setup.exe skips trying to install since theirs does a check to see if those files (ones required) have already been installed on the system.<br />
      <br />
      Another thing I would love to be able to do, which i don't know if i can, is when their setup.exe has completed, it takes a file from where my setup.exe installed to and replaces it with a file their setup.exe has created.<br />
      <br />
      For Example... Their setup.exe after completing creates a desktop Icon pointing to their software.exe. I want their software.exe to be renamed to something like vendorsoftware.exe and then a file from my Setup.exe (my installation that happened first) to be placed into their folder and named software.exe<br />
      <br />
      Why you ask? well they don't have an automatic updater feature. i have wrote an automatic updater for their software that i want to be ran before their software opens. My automatic updater needs to run first, check for updates, then run their actual software.<br />
      <br />
      <br />
      Hopefully I didn't confuse you guys too bad. I made these basic steps to give a more "visual" idea..<br />
      <br />
      to help prevent confusion these are "variables" i will use in these steps.<br />
      <br />
      My SETUP.EXE is called "Eqiz Software"<br />
      Their Setup.exe is called "Vendor Software"<br />
      NewSetup.exe = the created installation file using NSIS<br />
      <br />
      1) Main Installation starts (NewSetup.exe)<br />
      2) NewSetup.exe starts installing "Eqiz Software"<br />
      *Note - Being able to play a FlashVideo during this part while other installs are going would be really nice*<br />
      3) Once completed, it then starts the setup.exe for "Vendor Software"<br />
      4) Once completed, it renames the file "startup.exe" from inside the "Vendor Software" directory (which is always the same path, we will say it goes to "C:\VendorInstall\") to "vendorstartup.exe" then takes the "startup.exe" from "Eqiz Software" directory (C:\eqizDirectory\) and places it into the C:\VendorInstall\ directory.<br />
      <br />
      <br />
      This way when the shortcut that was created by the "Vendor Software" installation will open the newely placed "startup.exe" located in C:\VendorInstall\<br />
      <br />
      <br />
      I've tried reading some of the tutorials and code behind trying to do something like this, but i haven't came close to finding out specifically how. If need be i'll pay someone to do this, but i have been programming for a while and can understand it pretty easily if someone could help point me into right direction.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">3rd May 2012 05:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is very simple to do. Simply install your own files, then execute the other setup using ExecWait, then continue doing your own stuff.<br />
      <br />
      Section<br />
      SetOutPath "C:\VendorInstall"<br />
      File "File1.ext"<br />
      File "File2.ext"<br />
      SetOutPath $PLUGINSDIR<br />
      File "Vendor Software.exe"<br />
      ExecWait '"$PLUGINSDIR\Vendor Software.exe"'<br />
      SetOutPath "C:\VendorInstall"<br />
      Rename "C:\VendorInstall\startup.exe" "C:\VendorInstall\Vendorstartup.exe"<br />
      File "startup.exe"<br />
      SectionEnd<br />
      <br />
      Note that the user will need to go through the installation steps of vendor software.exe manually, unless that setup features a silent mode (something like ExecWait '"$PLUGINSDIR\Vendor Software.exe" /silent' ).<br />
      <br />
      It sounds like you're new to NSIS. To learn NSIS, you should start by looking at NSIS\Example1.nsi and Example2.nsi. Learn what all the commands in those examples are for, and why they are used. You can use the command reference for this: <a href="http://nsis.sourceforge.net/Docs/Chapter4.html" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html</a><br />
      Once you've done that, you will be well underway to building your own NSIS installer.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
