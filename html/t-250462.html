<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Variable Problem"><title>Variable Problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Variable Problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250462">Variable Problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">5th July 2006 20:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Variable Problem</strong><br>Hello all.<br><br>I'm having a little problem with how I'm trying to use a variable. Here is an example:<br></p><pre>
<code><br>${MyArray-&gt;Shift} "VarA"<br>${MyArray-&gt;Shift} "VarB"<br>${MyArray-&gt;Shift} "VarC"<br><br>StrCpy $VarA yes<br>StrCpy $VarB no<br>StrCpy $VarC Yes<br><br>StrCpy $0 0<br>Loop:<br>IntCmp $0 3 Done 0 Done<br>${MyArray-&gt;Read} $1 $0<br><br>MessageBox MB_OK $$$1<br><br>IntOp $0 $0 + 1<br>Goto Loop<br><br>Done:<br></code>
</pre><br>
      <br>
      Basically, during the course of my script, a bunch of variables get set to yes or no (VarA, VarB, VarC). I have the list of these variables stored in an Array (MyArray). Several times during my script I want to check each of these variables (over 15 of them in reality), and instead of having 15 separate checks, I want to loop through them.<br>
      <br>
      The problem is when I actually try to use the variable, in a MessageBox in the example above, I only get the variable name, and not its value. I'm using '$$$' above to add 1 $ to the result of the Array Read. So the first time through the loop, $1 gets set the VarA, and then is displayed as $VarA in the MessageBox. However I really want to see 'yes' in the message box.<br>
      <br>
      I realize I'm really using one variable which points to a value that happens to be equal to another variable, and expecting to see the second variable's value. If I could somehow use nesting or concatenation to use the second variable initially, and get the desired value, that would be great. Let me know if I'm just crazy, and there is a much better way to do this.<br>
      <br>
      Thanks for looking.<br>
      <br>
      - Jnuw
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">5th July 2006 21:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hey guys. I figured out a work around, using another array. However, I ran into a similar problem a while back with attempting to nest variables, <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=202192&amp;highlight=nested" target="_blank">http://forums.winamp.com/showthread....ghlight=nested</a> . This would be a cool enhancement, although I'm not sure how many other people have run into this. Just thought I would throw this out there. Thanks all.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">6th July 2006 09:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are giving ${MyArray-&gt;Shift} "VarA" and not $VarA, hence why you're getting "VarA" returned because that is what you put in the array!!<br>
      <br>
      Also you can use the ReadFirst and ReadNext macros to loop through the array which makes it tidier.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">6th July 2006 14:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hey Stu. Yeah, I tried ${MyArray-&gt;Shift} "$VarA" too, no luck. The result of MessageBox MB_OK $1 after the Array Read is still "$VarA", and not "yes". Thanks for the suggestion though.<br>
      <br>
      Jnuw</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">6th July 2006 15:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That is strange. You definitely have the variables defined with the Var instruction?<br>
      <br>
      If not then would you be able to write a script that reproduces the problem.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">6th July 2006 15:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I misspoke, but I still don't have it working. I tried: ${MyArray-&gt;Shift} "$$VarA". Needed the double $$, because I want the variable name in the Array, not the values, as they change over the course of the script. I have a working example of the problem below.<br>
      <br>
      Basically, I want all the variable names to be stored in the Array, so I can loop through the array at any time, and see all the values of these variables. Make sense?<br>
      <br>
      I have method 1 (my original), and method 2 ($$) included, thanks for the help.<br></p>
      <pre>
<code><br>!define ArrayNoValVar<br>!include "NSISArray.nsh"<br>Var VarA<br>Var VarB<br>Var VarC<br>Name Test<br>OutFile Test.exe<br>${Array} MyArray<br><br>Section ""<br>${MyArray-&gt;Init}<br>;Method 1<br>;${MyArray-&gt;Shift} "VarA"<br>;${MyArray-&gt;Shift} "VarB"<br>;${MyArray-&gt;Shift} "VarC"<br><br>;Method2<br>${MyArray-&gt;Shift} "$$VarA"<br>${MyArray-&gt;Shift} "$$VarB"<br>${MyArray-&gt;Shift} "$$VarC"<br><br>StrCpy $VarA yes<br>StrCpy $VarB no<br>StrCpy $VarC Yes<br><br>StrCpy $0 0<br>Loop:<br>IntCmp $0 3 Done 0 Done<br>${MyArray-&gt;Read} $1 $0<br><br>;Method1<br>;MessageBox MB_OK $$$1<br><br>;Method2<br>MessageBox MB_OK $1<br><br>IntOp $0 $0 + 1<br>Goto Loop<br>Done:<br>${MyArray-&gt;Delete}<br>${ArrayUnload}<br>SectionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">6th July 2006 15:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I see well that isn't possible. $VarName is for compile time only. Rather than have these different VarA-C variables, just use an Array.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">6th July 2006 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Stu, will do. What I tried to do originally, is fill the Array with A, B, C, etc... and then as I looped through the Array, and set $1 to those elements, I would do something like this: MessageBox MB_OK $Var$1 , but that does not work either, and brought me back to my nested variables problem. Anyhow, I did as you suggested, and just stored these values in an array, and all is well. Thanks again.<br>
      <br>
      Jnuw</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>