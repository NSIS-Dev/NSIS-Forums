<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Large installers truncate contents"><title>Large installers truncate contents - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Large installers truncate contents</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=263285">Large installers truncate contents</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Hello1024</span><br><span class="post-time small text-muted">8th January 2007 23:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Large installers truncate contents</strong><br>Hi,<br><br>I posted this a while ago at the bottom of a similar thread, but since I got no reply I guess it was the wrong place to post.<br><br>Has anyone had any success with large files. I'm trying to use the LZMA compressor to compress a 10 GB file, but I know most of the file is empty space and it will compress down to 550-600MB.<br><br>Problem is whatever compression I use, it seems to stop after 705MB, as if it had reached the end of the file. No error is given. The file on disk isn't corrupted, because I tried an alternative file with the same results. It isn't a file system limitation, because I'm using an NTFS drive. It isn't a 32 bit limitation, because I'm nowhere near the 2/4GB limits of 32 bit systems (at least for the compressed size). I don't think it's a memory limitation, because I have easily enough virtual memory to store the entire file and more for compression space.<br><br>I can't use what others have suggested in this forum of splitting the installer and the data, because both need to be combined in one file for easier distribution.<br><br>At the moment, I make do with the following:<br>the installer extracts a .bz2 version of the data file, then it extrracts bunzip2.exe, a windows "unzipper". It then execwaits bunzip2 to do the decompression of the file.<br>The problem with this method is that it takes too much time, because as far as I can see, the compressed data is first extracted to a temp folder, then copied to the output folder. Then bz2 copies that to memory, and then decompresses it to the output folder. That process takes about 30 mins on my test machine, whereas simply allocating a 10GB file on the disk and writing 600MB or so of data to the begining of it should take more like 1 min.<br><br>Any ideas of a way I can solve the problem?<br><br>Thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">n_baua</span><br><span class="post-time small text-muted">9th January 2007 06:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Hello1024,<br>I also had a simillar problem when I used the makensisw.exe to compile one of my installers which ran in to 2GB(Video and MP3 files no empty space), the compiler stopped ib between. I solved it by compiling the script file through command line and it worked out for me.<br><br>Give it a try, I also do not think it is the problem with VM or System.<br><br>Best of luck.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Hello1024</span><br><span class="post-time small text-muted">9th January 2007 18:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for the advice - I'll have a go.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Hello1024</span><br><span class="post-time small text-muted">9th January 2007 20:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Just tried that, and it didn't work. I've attached the entire log, but this is the line thats causing trouble:<br><br>File: "ubuntu.img"-&gt;"c:\ubuntu\ubuntu.img" [compress] 53135547/705032704 bytes<br><br>The file ubuntu.img is actually 5,000,000,000 bytes exactly. (~4.65GB)<br><br>Do you think it could be anything todo with the fact I'm compiling on a network drive? If it is, I MIGHT be able to move some hard disks around and get it compiling on the local computer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">n_baua</span><br><span class="post-time small text-muted">10th January 2007 07:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>I never came against the single large file(4+GB) as you are trying to install, I guess this must produce the virtual memory problem and I also fear the network compilation doubt you have is right. just check it out.<br><br>I am not sure why you are using the single img file installation can you just split it up and merge it later(This would be easy with just one marco or batch statement) when setup is done with entire copying.<br><br>:confused:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Hello1024</span><br><span class="post-time small text-muted">10th January 2007 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I can split and merge it, but I need to figure a way so that the extract and merge can be done in a single step, because I don't want it to be extracted in pieces, and then merged to a single file for two reasons - 1. it would take more time - the data is written to the disk, read from the disk, merged, and written to the disk. and 2. that would require my end user to have 20GB of disk space (10GB for the files to be merged, and 10GB for the resultant merged file before the files to be merged are deleted)<br><br>I'll see if I can have a go with the file on a ocal disk drive and see if that solves the problem.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>