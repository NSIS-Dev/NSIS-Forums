<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="cant compile latest snapshot: error RC2104" />

  <title>cant compile latest snapshot: error RC2104 - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">cant compile latest snapshot: error RC2104</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=115778">cant compile latest snapshot: error RC2104</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">neomaniakov</span><br />
      <span class="post-time small text-muted">27th November 2002 12:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>cant compile latest snapshot: error RC2104</strong><br />
      When I try to compile NSIS from latest developments snapshots(today and yesterday):<br />
      <br />
      <a href="http://nsis.sourceforge.net" target="_blank">http://nsis.sourceforge.net</a><br />
      <a href="http://nsis.sourceforge.net/nightly/nsis.zip" target="_blank">http://nsis.sourceforge.net/nightly/nsis.zip</a><br />
      <br />
      Development Snapshot<br />
      NSIS CVS directory zipped up<br />
      Updated: Wed, 27 Nov 2002, 08:44:08 GMT<br />
      <br />
      Listed below error occure:<br />
      <br />
      //------------ ERROR:<br />
      <br /></p>

      <blockquote>
        --------------------Configuration: exehead_bzip2 - Win32 Release--------------------<br />
        Compiling resources...<br />
        E:\downl\nsis271102_844\NSIS\Source\exehead\resource.rc (35): error RC2104 : undefined keyword or key name: DS_SHELLFONT<br />
        Error executing rc.exe.<br />
        <br />
        nsis20a7271102pm.exe - 1 error(s), 0 warning(s)
      </blockquote>//------------ ERROR:<br />
      <br />
      in resource.rc err line is:<br />
      STYLE DS_CONTROL | DS_SHELLFONT | WS_CHILD<br />
      <br />
      My OS is WinXPpro no SP, VC 6.0 with SP<br />
      <br />
      Result is the same when i try to compile on PC with installed SDK.<br />
      <br />
      Any help will be appreciated
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">27th November 2002 15:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please download the latest <a href="http://www.microsoft.com/msdownload/platformsdk/sdkupdate/" target="_blank">Platform SDK</a>.<br />
      I will make sure it is defined anyway in the resource file, but for now download the PSDK.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th November 2002 15:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can also use DS_FIXEDSYS | DS_SETFONT instead of DS_SHELLFONT.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">neomaniakov</span><br />
      <span class="post-time small text-muted">28th November 2002 08:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">10ks for the answer<br />
      I 'll get the latest SDK and will post when compile OK</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">neomaniakov</span><br />
      <span class="post-time small text-muted">29th November 2002 08:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">At the and I compile latest snapshot NSIS without installing new SDK, 10ks :D for the changes which made it possible:<br />
      :up:<br /></p>

      <blockquote>
        //---code:<br />
        #ifndef DS_SHELLFONT<br />
        #define DS_SHELLFONT (DS_SETFONT | DS_FIXEDSYS)<br />
        #endif<br />
        //---code:
      </blockquote>:up:<br />
      <br />
      ...<br />
      one last thing, I changed one line in file "util.c", because "INVALID_FILE_ATTRIBUTES " return undefined error<br />
      <br />

      <blockquote>
        //--- original code in util.c:<br />
        <br />
        d=GetFileAttributes(dir);<br />
        if (d == INVALID_FILE_ATTRIBUTES || !(d&amp;FILE_ATTRIBUTE_DIRECTORY)) dir=0;<br />
        <br />
        //--- original code in util.c:
      </blockquote>with<br />

      <blockquote>
        //--- changed code in util.c:<br />
        <br />
        d=GetFileAttributes(dir);<br />
        if (d == 0xffffffff || !(d&amp;FILE_ATTRIBUTE_DIRECTORY)) dir=0;<br />
        <br />
        //--- changed code in util.c:
      </blockquote>because in old MSDN and SDK:<br />

      <blockquote>
        //---------- from old: Platform SDK: Files and I/O<br />
        GetFileAttributes<br />
        ...<br />
        If the function succeeds, the return value contains the attributes of the specified file or directory.<br />
        <br />
        If the function fails, the return value is 0xffffffff. To get extended error information, call GetLastError.<br />
        ...<br />
        //---------- from old: Platform SDK: Files and I/O
      </blockquote>and i think that INVALID_FILE_ATTRIBUTES is macro name of 0xffffffff in new SDK, some kind of:<br />
      <br />

      <blockquote>
        //---code:<br />
        #define INVALID_FILE_ATTRIBUTES 0xffffffff<br />
        /---code:
      </blockquote>May be some piece of code, same solution as DS_SHELLFONT<br />
      in "util.c" will be usefull for someone who have not installled SDK yet(or crazy slow SDK downloading like me)<br />
      and want to compile NSIS:<br />

      <blockquote>
        //--- offered code:<br />
        #ifndef INVALID_FILE_ATTRIBUTES<br />
        #define INVALID_FILE_ATTRIBUTES 0xffffffff<br />
        #endif<br />
        //--- offered code:
      </blockquote>I hope "INVALID_FILE_ATTRIBUTES" is same as 0xffffffff, cant be shure untill new SDK arrived from microsoft.com ;-(,<br />
      ...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th November 2002 10:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, I have fixed that too. I will upload this file later though because it has some code in progress.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
