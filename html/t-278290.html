<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Check to continue" />

  <title>Check to continue - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Check to continue</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=278290">Check to continue</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">azzzrail</span><br />
      <span class="post-time small text-muted">4th October 2007 14:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Check to continue</strong><br />
      Hi there,<br />
      <br />
      I want the user to confirm that he has read some warningtext before the installation continues.<br />
      <br />
      i tried to use the notify flag with the mui but it doesn't seem to work somehow.<br />
      <br />
      Here's the code<br />
      <br />
      insertmacro MUI_INSTALLOPTIONS_READ $0 "warnings.ini" "Settings" "State"<br />
      <br />
      ${if} $0 == 1<br />
      !insertmacro MUI_INSTALLOPTIONS_READ $3 "warnings.ini" "Field 2" "State"<br />
      <br />
      ${if} $3 == 1<br />
      <br />
      GetDlgItem $R2 $HWNDPARENT 1<br />
      EnableWindow $R2 1<br />
      <br />
      ${else}<br />
      GetDlgItem $R2 $HWNDPARENT 1<br />
      EnableWindow $R2 0<br />
      ${endif}<br />
      abort<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_READ $2 "warnings" "Field 2" "HWND"<br />
      SendMessage $2 ${BM_SETCHECK} 0 0<br />
      abort<br />
      ${endif}<br />
      <br />
      <br />
      i almost completly copied the code for the manual,only changing the commands for using the mui.<br />
      <br />
      the example code disables the next button until the checkbox is checked. after clicking the next button the installer continues. in my example the installer directly continues after clicking the checkbox, which isn't supposed to happen.<br />
      <br />
      Any ideas?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th October 2007 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You're calling Abort in the wrong places. You must always call abort if [Settings]\STATE is set. If you don't, it'll skip to the next page.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">azzzrail</span><br />
      <span class="post-time small text-muted">4th October 2007 15:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hmm. this doesn't seem to work either.<br />
      i now use the abort command when the checkbox is set<br />
      ${if} $3 == 1<br />
      <br />
      GetDlgItem $R2 $HWNDPARENT 1<br />
      EnableWindow $R2 1<br />
      abort<br />
      <br />
      and it still skip to the next page.<br />
      am i getting you wrong?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th October 2007 15:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, you're getting me wrong. You must <i>always</i> call Abort. This shouldn't depend on whether the checkbox is checked or not, but only on [Settings]\STATE. If STATE is set, the leave function is called because the user did something to a control with the NOTIFY flag. If you fail to call Abort in this case, it'll move to the next page.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">azzzrail</span><br />
      <span class="post-time small text-muted">4th October 2007 16:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok. now i understand what you mean. i have to call abort in the settings/state branch to stop the leave function from skipping to the next page. but this doesn't work either. it still skips to the next page. abortning after the ${endif} of the state branch results in leaving the next button disabled.<br />
      maybe i got my stupid day but really can't figure it out, or maybe i'm still getting you wrong.<br />
      could you perhabs edit my code example to be sure?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th October 2007 16:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Seems like the problem is in the first ${If}. You check if [Settings]\STATE is 1, but then check the state of Field 2. If your checkbox is Field 2, you should check for 2 in the first ${If}.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">azzzrail</span><br />
      <span class="post-time small text-muted">4th October 2007 16:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">omfg.. yeah that's it. thx. especially for your patience.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
