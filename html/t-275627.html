<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Password protected archive"><title>Password protected archive - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Password protected archive</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=275627">Password protected archive</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">9th August 2007 17:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Password protected archive</strong><br>Hey all,<br><br>I'm looking for a way to provide a password protected archive with an installed (zip, rar, tarball, archive format doesnt really matter).<br><br>I've looked at the Nsisunz, UnTGZ and ZipDLL plugins, but none of them support encrypted archives.<br><br>Any ideas would be appreciated!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">9th August 2007 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you check the stand alone command line 7za.exe?<br>It might support such feature.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">10th August 2007 10:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th August 2007 12:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why? 7za.exe is the only way to enter the password to open the archive itself.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">10th August 2007 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you pass the password as a parameter to 7za.exe, someone could just use process explorer to check the full command line it was launched with. In the end, no protection is 100%, your only hope is to stop people with limited knowledge</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th August 2007 12:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That is a problem. How about calling the dll instead then with the System plug-in?<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">11th August 2007 04:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yea, I was referring to the command line issue. Thanks for the pointer Stu, I completely overlooked the dll option, will go over the details for the library today.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">11th August 2007 07:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've looked through the 7zip SDK, but there doesnt seem to be anything about using the compiled dll binary at runtime to extract an archive.<br><br>Zlib looks good, but doesnt support password protection.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">ClayDowling</span><br><span class="post-time small text-muted">12th August 2007 11:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why does the archive have to be password protected? If you're extracting the contents during the install there isn't any great benefit.<br><br>If you're worried about somebody getting the contents by decompiling your installer check out the encryption plugins. You can encrypt the archives before putting them in the installer, then decrypt them before extraction.<br><br>If you'd like the decryption and extraction to occur after the software is installed OpenSSL has a lot of functions that can do this for you. The documentation on that package is not quite as clear as you might desire, but Linux Journal has articles on how to use it, and it works the same on Linux and Windows.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">12th August 2007 15:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, the point is to protect the files UNLESS they're extracted through the installer itself.<br><br>I'll look into the crypto plugin option, DcryptDll looks good.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sag47</span><br><span class="post-time small text-muted">12th August 2007 20:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: Password protected archive</strong><br></p><blockquote><i>Originally posted by Backland</i><br><b>Hey all,<br><br>I'm looking for a way to provide a password protected archive with an installed (zip, rar, tarball, archive format doesnt really matter).<br><br>I've looked at the Nsisunz, UnTGZ and ZipDLL plugins, but none of them support encrypted archives.<br><br>Any ideas would be appreciated!</b></blockquote>Se this thread:<br><a href="http://forums.winamp.com/showthread.php?postid=2084891#post2084891" target="_blank">Click Here</a><br><br>As far as cryptic details of the password protected archive; I don't know what encryption standards (AES, Twofish, Serpent) or hash algorythms (SSH1, SSH2, Whirlpool) are used in UHARC. Depending on how mission critical your files are it may be better to get a command line encryptor from <a href="http://www.sf.net" target="_blank">http://www.sf.net</a> and then use NSIS to automatically decrypt it (just search for encryption or something). You can use the same method that is used in automatically extracting UHARC archives as you can with extracting any command line based archive, whether it be encrypted, compressed, or both. However if all you need is simple password protection and not U.S. Government standard encryption then UHARC is good for you.<br><br>Here is a link to UHARC files:<br><a href="ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip" target="_blank">ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip</a><br><br>You could also try bcrypt which uses blowfish (448-bit) encryption. They also provide the source code so there is not limit on implementation. Here is a link:<br><a href="http://sourceforge.net/project/showfiles.php?group_id=62194" target="_blank">bcrypt Homepage on Source Forge</a><br><br>Here is one more link to help you get started:<br><a href="http://sourceforge.net/softwaremap/trove_list.php?form_cat=44" target="_blank">Cryptography on SourceForge.net</a><br><br>If you have need for it I can suggest programs that use extremely strong encryption that are free.<br>SAM</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sag47</span><br><span class="post-time small text-muted">12th August 2007 21:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Backland</i><br><b>I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.</b></blockquote>That is not a viable concern. You cannot simply replace the Zza.exe file with just a simple file that does nothing but extract archives. The same goes with all the popular compressors (RaR, UHARC, etc...)<br><br>Those archives create a hash and encrypt the archive that can only be decrypted with a key (in this case the key is the password). So if you replace a file with just a dummy file that does nothing but extract archives then it will see the archive as being corrupt or not in the format it should be and then throw an error saying something is wrong with the archive. So basically without the password it is just a file of random data that can't be accessed until that password is cracked. So depending on how complicated your password will be the security of your archive.<br>SAM<br><br><b>Edit:</b> I believe I misunderstood your concern when I was replying. Do you mean a dummy file that does nothing but take the arguments given to it and store them in a text file? Because I could see where that would be a concern if you don't ask the user for the password for the archive. In that case I could see where the use of <a href="http://sourceforge.net/project/showfiles.php?group_id=67079" target="_blank">md5deep</a> could be used that creates a hash of your file.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sag47</span><br><span class="post-time small text-muted">12th August 2007 23:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Backland</i><br><b>I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.</b></blockquote>I've changed the documentation to the Crypto Plug-in<br><a href="http://nsis.sourceforge.net/Crypto_plug-in#File_Hash" target="_blank">http://nsis.sourceforge.net/Crypto_plug-in#File_Hash</a><br><br>Documentation now tells you how to do do a validation check on a file.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sag47</span><br><span class="post-time small text-muted">13th August 2007 00:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: Re: Password protected archive</strong><br></p><blockquote><i>Originally posted by sag47</i><br><b>Se this thread:<br><a href="http://forums.winamp.com/showthread.php?postid=2084891#post2084891" target="_blank">Click Here</a><br><br>As far as cryptic details of the password protected archive; I don't know what encryption standards (AES, Twofish, Serpent) or hash algorythms (SSH1, SSH2, Whirlpool) are used in UHARC. Depending on how mission critical your files are it may be better to get a command line encryptor from <a href="http://www.sf.net" target="_blank">http://www.sf.net</a> and then use NSIS to automatically decrypt it (just search for encryption or something). You can use the same method that is used in automatically extracting UHARC archives as you can with extracting any command line based archive, whether it be encrypted, compressed, or both. However if all you need is simple password protection and not U.S. Government standard encryption then UHARC is good for you.<br><br>Here is a link to UHARC files:<br><a href="ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip" target="_blank">ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip</a><br><br>You could also try bcrypt which uses blowfish (448-bit) encryption. They also provide the source code so there is not limit on implementation. Here is a link:<br><a href="http://sourceforge.net/project/showfiles.php?group_id=62194" target="_blank">bcrypt Homepage on Source Forge</a><br><br>Here is one more link to help you get started:<br><a href="http://sourceforge.net/softwaremap/trove_list.php?form_cat=44" target="_blank">Cryptography on SourceForge.net</a><br><br>If you have need for it I can suggest programs that use extremely strong encryption that are free.<br>SAM</b></blockquote>I meant to say SHA-1 and MD5 not SSH1 and SSH2. Hehe, I was thinking diff thoughts when typing that :rolleyes:<br>SAM</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">13th August 2007 05:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Backland</i><br><b>I'll look into the crypto plugin option, DcryptDll looks good.</b></blockquote>DcryptDll is good enough for the job, after all you know that there's not 100% protection out there.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">13th August 2007 09:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah that seems like a great option... and in this case (which needs some less complex protection), the files can be stored in a passworded archive, and the installer checks the integrity of the extraction module (such as 7z.exe) with a hash as suggested by sag47.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>