<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="SectionIn and SetCurInstType" />

  <title>SectionIn and SetCurInstType - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">SectionIn and SetCurInstType</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=176371">SectionIn and SetCurInstType</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">YooperNC</span><br />
      <span class="post-time small text-muted">12th April 2004 16:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>SectionIn and SetCurInstType</strong><br />
      I am trying to design an Installer that will in some cases ask the user for an Installation type ("Client" or "Server"), and in other cases default to "Server". In the latter case, in .onInit, I use SetCurInstType to set the value to "1" -- "0" being the Client installation.<br />
      <br />
      I realize that the Installation Type is 0-based, and SectionIn values are 1-based. But when I set the Installation Type to "1" in the onInit function, a section that has a "SectionIn 2" statement is not included during that installation.<br />
      <br />
      The script has the following order:<br />
      <br />
      - General definitions and macros<br />
      - Configuration<br />
      - Install Options<br />
      - Modern UI Configuration<br />
      - Pages<br />
      - Languages<br />
      - Language Strings<br />
      - Data<br />
      - Reserve Files<br />
      - Install Sections<br />
      - Descriptions<br />
      - Uninstall Section<br />
      - Functions:<br />
      - .onInit<br />
      - etc.<br />
      <br />
      Any thoughts?<br />
      <br />
      Dave</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">12th April 2004 18:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you attach an example script that compiles on every system?<br />
      <br />
      Also note that SetCurInstType only works when your installer has a components page that is shown during the installer configuration.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">YooperNC</span><br />
      <span class="post-time small text-muted">13th April 2004 14:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See, that's just it. For this particular installation, I don't want to display a components page. There is no choice to make, so I want to bypass it altogether and set the installation type myself.<br />
      <br />
      As for attaching example script, I'm not sure how to pick out the parts that might be relevant. It's just as I described above. During .onInit, I set the current installation type to "1", but the SectionIn commands don't seem to care.<br />
      <br />
      Why is a components page required? Why doesn't the SectionIn command simply check the current installation type? I suppose I could include a components page if required...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">13th April 2004 14:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is a limitation of the current installation type system. If you don't want to display a components page you'll have to add some script code in your sections (for example, check the value of a variable you have set).</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
