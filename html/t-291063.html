<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Win9x shows ugly icons for some installers" />

  <title>Win9x shows ugly icons for some installers - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Win9x shows ugly icons for some installers</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=291063">Win9x shows ugly icons for some installers</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">30th April 2008 11:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Win9x shows ugly icons for some installers</strong><br />
      I've noticed that since I upgraded to NSIS 2.36 my installers now use icons with an ugly black edge on Win9x and Win2K systems (but on WinXP and Vista the icons look OK).<br />
      <br />
      At first I thought there was a problem with my icons but I found that I could recreate the problem by inserting the following line into the VersionInfo.nsi example shipped with the NSIS compiler:</p>
      <pre>
<code>Icon "${NSISDIR}\Contrib\Graphics\Icons\orange-install.ico"</code>
</pre><br />
      Working back through my collection of nightly builds I found that the problem appears to have been introduced between NSIS 2.31 and 2.32.<br />
      <br />
      The nsis-01-Oct-2007.cvs compiler generates an installer with an icon that looks the same on Win9x and Vista systems but the nsis-05-Oct-2007.cvs compiler generates an installer which looks ugly on Win9x systems (and I've had reports that Win2K systems also show the ugly version of the icon).<br />
      <br />
      This screenshot shows the results seen on my Win98SE system after compiling the same source file (with the same icon file) using these two nightly builds. The screenshot also shows the basic icon for comparison.<br />
      <br />
      On Vista both installers look like the orange-install.ico shown in the screenshot.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">30th April 2008 11:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Normally only icons with just 32bit images look like that. In 2.32 the icon handling was changed to support PNG icons, maybe that introduced a bug (maybe the icons image order changes or something like that)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">{_trueparuex^}</span><br />
      <span class="post-time small text-muted">30th April 2008 22:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have noticed this too. But I always thought the the actual icon files were changed.<br />
      <br />
      I did a little digging and compared the icons in the installer with Resource Hacker and if the icon image order matters anything that's definitely changed...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">30th April 2008 23:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        I did a little digging and compared the icons in the installer with Resource Hacker and if the icon image order matters anything that's definitely changed...
      </blockquote>You beat me to it! I have just found the same thing.<br />
      <br />
      Perhaps Win9x and Win2K expect the icons to be listed in increasing order of size? This would explain the strange effect on those systems for installers built using NSIS 2.32 or later.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">1st May 2008 03:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If I remember correctly, the Windows XP type icons (with alpha channel) that are not supported by Windows 9x should come after the other icons. This is probably correct in the icon files, but the compiler somehow reverses the order.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">2nd May 2008 19:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have 2GB of compiled installers saying this is fixed for 2.37. It will now use the original icon file order for both the installer and the uninstaller unlike the old versions that only made this possible for the installer icon.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
