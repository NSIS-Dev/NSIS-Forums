<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Easy, automated download and installation for Java Runtime"><title>Easy, automated download and installation for Java Runtime - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Easy, automated download and installation for Java Runtime</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=310480">Easy, automated download and installation for Java Runtime</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">trumpetinc</span><br><span class="post-time small text-muted">22nd August 2009 00:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Easy, automated download and installation for Java Runtime</strong><br>The attached makes adding auto-JRE detection, download and installation easy.<br><br>See <a href="http://nsis.sourceforge.net/Java_Runtime_Environment_Dynamic_Installer" target="_blank">JREDyna Wiki Page</a> for details<br><br><br>I look forward to comments and suggestions for improvements.<br><br>- Kevin<br><br>PS - I can't seem to figure out how to get that URL link to work! Here's the link without http just to get it working: nsis.sourceforge.net/Java_Runtime_Environment_Dynamic_Installer</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">22nd August 2009 03:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, you need x number of posts before you can post URL's<br><br><a href="http://nsis.sourceforge.net/Java_Runtime_Environment_Dynamic_Installer" target="_blank">http://nsis.sourceforge.net/Java_Run...amic_Installer</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">trumpetinc</span><br><span class="post-time small text-muted">24th August 2009 22:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks, Anders - that makes sense (although it would have been nice if the forum software issued a warning, eh?)<br><br>I spent a lot of time fighting the system trying to get the Wiki page looking right, and the forum post. It's a shame that there isn't an easily accessible primer for this sort of thing (just figuring out how to upload a file for the Wiki took quite some doing). This has to be some level of barrier to entry for folks wanting to share their work. But I know that we all do what we can - and for this particular contribution, I was more than willing to go through the learning curve.<br><br>Maybe I should put together a Wiki page on tips and tricks to share solutions on the Wiki :-)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">24th August 2009 22:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSIS main page, click FAQ: <a href="http://nsis.sourceforge.net/FAQ" target="_blank">http://nsis.sourceforge.net/FAQ</a> (At the bottom you will find "Uploading files")</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">tdcolvin</span><br><span class="post-time small text-muted">18th January 2012 19:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Update for W2k3</strong><br>Hi,<br><br>Registered here just to say -- Windows 2003 seems to require lowercase /s and /l arguments. Otherwise you just get an ugly Windows Installer dialog saying "Invalid command line parameters".<br><br>So I changed the ExecWait line to:<br><br>ExecWait '"$TEMP\jre_setup.exe" /s REBOOT=Suppress JAVAUPDATE=0 WEBSTARTICON=0 /l \"$TEMP\jre_setup.log\"' $0<br><br>And it now works fine. Not sure how to upload yet, but hope that helps.<br><br>- Tom</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">EolSC</span><br><span class="post-time small text-muted">19th April 2012 07:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Installer script modification</strong><br>Hi, Kevin!<br>I've used your script for my open-source application installer, thank you for your great work. But I had to improve it a little to work on modern OS.<br>For example, I added check if we' re running installer on x64 so we should<br>read registry in x64 mode.<br></p><pre>
<code>${If} ${RunningX64} ;if it's x64 OS<br>  SetRegView 64 ; change registry view mode for proper x64 JRE detection<br> ${EndIf}<br><br>  ReadRegStr $1 HKLM "SOFTWARE\JavaSoft\Java Runtime Environment" "CurrentVersion"<br>  StrCmp $1 "" DetectTry2<br>  ReadRegStr $2 HKLM "SOFTWARE\JavaSoft\Java Runtime Environment\$1" "JavaHome"<br>  StrCmp $2 "" DetectTry2<br>  Goto GetJRE<br>  ; lots of detection code skipped <br>  .<br>  .<br>  .<br>DetectJREEnd:<br><br>${If} ${RunningX64} <br>  SetRegView 32 ; return to x32 view mode<br> ${EndIf}</code>
</pre><br>
      So, post me a message if you are interested, I 'd like to share my improvements with others and add modified version to nsis.wiki
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">19th April 2012 12:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You do not need to do the RunningX64 test as SetRegView has no effect on a 32-bit OS (you're just adding 2 unnecessary System plug-in calls per usage).<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">trumpetinc</span><br>
      <span class="post-time small text-muted">19th April 2012 16:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">EolSC - I've thought on this a bit...<br>
      <br>
      There are times when detecting 32 bit JVM is desirable, even on 64 bit systems (for example, we have a number of applications that use 32 bit JNI dlls). To incorporate this, we'd need to be somewhat intelligent about when we do or do not do the check in the 64 bit registry branches.<br>
      <br>
      It seems to me that if your installer is wanting the 64 bit JVM installed, then you probably want the entire installer working with the 64 bit area of the registry. If that's the case, then you should probably be calling SetRegView 64 in the main installer (and not having this call in the area specific to download of the 64 bit JVM)...<br>
      <br>
      Further, explicitly changing the registry view in a library like this could mess people up who *have* set the registry view elsewhere. If we are going to do this inside the library, then we'd have to capture the registry view before and set it back to it's prior state afterwards.<br>
      <br>
      Is there really a need to do this check inside the library itself?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">EolSC</span><br>
      <span class="post-time small text-muted">20th April 2012 07:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>x64 checks</strong><br>
      Thanks for your replies, now I understand where I'm missing the point. Surely it was a bad idea to mess up library code, I'll move all checks to main installer and clean up unnecessary checks.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">trumpetinc</span><br>
      <span class="post-time small text-muted">20th April 2012 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hah - in this particular case, it's probably best to do the check elsewhere, but there is *nothing* wrong with messing with the library code, trying out new things, then discussing them in these forums. That's where cool new ideas came from, and I'm delighted that you are willing to poke at it and share your results!</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>