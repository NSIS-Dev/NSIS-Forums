<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="What's the secret behind disabling the Back button?" />

  <title>What's the secret behind disabling the Back button? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">What's the secret behind disabling the Back button?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307803">What's the secret behind disabling the Back button?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">29th June 2009 17:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>What's the secret behind disabling the Back button?</strong><br />
      &nbsp; I am using Modern UI 2.0.<br />
      <br />
      When not adding a custom page between MUI_PAGE_INSTFILES and MUI_PAGE_FINISH, the [Back] button on the finish page is smartly disabled. This makes sense because once installation is done, there really is no "back". If the users wants to revert installation back, simply invoke the uninstaller.<br />
      <br />
      However, when I add a custom page between MUI_PAGE_INSTFILES and MUI_PAGE_FINISH, the [Back] button on the finish page is enabled.<br />
      <br />
      How does NSIS know that it "can" go back in the latter case? i.e. is this a "bug" or a feature?<br />
      <br />
      If the latter, is there a hook or NSIS function that I can use to enable/disable the Back or the Next button in my scripts as well?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">29th June 2009 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">the show callback for a page, there you can call GetDlgItem+EnableWindow</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">29th June 2009 18:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Anders</i><br />
        <b>the show callback for a page, there you can call GetDlgItem+EnableWindow</b>
      </blockquote>Thank you Anders. I am using Modern UI 2.0 so you are most likely referring to MUI_PAGE_CUSTOMFUNCTION_SHOW, right?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">29th June 2009 19:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes<br />
      <br />
      <br />
      Function myshow<br />
      GetDlgItem $0 $hwndparent 3 ;1,2 or 3<br />
      EnableWindow $0 1 ;1 or 0<br />
      FunctionEnd<br />
      <br />
      ...<br />
      <br />
      !define MUI_PAGE_CUSTOMFUNCTION_SHOW myshow<br />
      !insertmacro MUI_PAGE_xxxx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">29th June 2009 20:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks again, Anders. After experimenting with this and successfully implementing what I needed, here are some of my insights for the benefit of others who have similar questions:<br />
      <br />
      1. MUI_PAGE_CUSTOMFUNCTION_SHOW is for "standard" (or built-in) pages only (WELCOME, LICENSE, COMPONENTS, DIRECTORY, STARTMENU, INSTFILES, FINISH).<br />
      <br />
      2. For custom pages, use the same code but in the <a href="http://www.downloadatoz.com/manual/ns/nsis/Section4.5.html#4.5.4" target="_blank">page creator_function</a> :</p>
      <pre>
<code>
GetDlgItem $0 $hwndparent 2 ;1,2 or 3
<br />EnableWindow$0 0 ;1 or 0 
<br />&gt;
</code>
</pre>3. DlgItem 2 stands for the Cancel button. Is there a reference somewhere that tells which DlgItem number is assigned to which button?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">29th June 2009 22:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">3. yes and no, ok and cancel use the standard windows defines (IDOK,IDCANCEL) and you can find the back button in <a href="http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Source/exehead/resource.h?revision=2823&amp;view=markup" target="_blank">http://nsis.svn.sourceforge.net/view...23&amp;view=markup</a><br />
      <br />
      or you could use resource hacker to inspect the resource in a generated installer .exe or winspy++ on a running installer</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>