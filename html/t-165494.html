<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="To extract a file only if a given language was selected..."><title>To extract a file only if a given language was selected... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">To extract a file only if a given language was selected...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=165494">To extract a file only if a given language was selected...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">18th January 2004 19:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>To extract a file only if a given language was selected...</strong><br>Hiya, i want the leia-me.txt file to be extracted only if the user choose PortugueseBR and the readme.txt file to be extracted only if the user selected English, how would i do it?!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">18th January 2004 19:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Check the value of $LANGUAGE.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">18th January 2004 22:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry Joost, but i didn't get it. =|</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">18th January 2004 22:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use this code</p><pre>
<code>;readme files - replace xxxx with the language code for PortugueseBR <br>StrCmp $LANGUAGE 1033 0 +2<br>  file readme.txt<br>StrCmp $LANGUAGE xxxx 0 +2<br>  file leia-me.txt<br>;rest of script <br></code>
</pre><br>
      Vytautas
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br>
      <span class="post-time small text-muted">19th January 2004 00:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, Joost and Vytautas ...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br>
      <span class="post-time small text-muted">19th January 2004 03:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Okk, it worked fine but now i have another problem. After i finish compiling my installer, i get many warnings like this:<br>
      <br>
      Generating language tables... warning: LangString "MUI_INNERTEXT_LICENSE_BOTTOM_CHECKBOX" is not set in language table of language 1033<br>
      ...<br>
      <br>
      And when i run the file, it shows no texts.<br>
      <br>
      Please, help meee! ;)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">19th January 2004 14:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1033 is the language ID of English. You can also use ${LANG_ENGLISH} instead, that's easier. For PortugueseBR use ${LANG_PORTUGUESEBR}.<br>
      <br>
      If you get this error, you have probably used an English language string without including the MUI_LANGUAGE macro for English.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br>
      <span class="post-time small text-muted">21st January 2004 23:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I included the macro for both languages but i still get this error. I think something is in the wrong order, but i've changed it many times and couldn't make it work. I'll post the first lines of my script here and hope you can help me. ;)<br>
      <br>
      !include "MUI.nsh"<br>
      <br>
      !define NAME "Jackal Counter-Strike Pack"<br>
      !define VERSION "v1.0"<br>
      !define MUI_ICON "${NSISDIR}\contrib\graphics\icons\classic-install.ico"<br>
      !define MUI_UNICON "${NSISDIR}\contrib\graphics\icons\classic-uninstall.ico"<br>
      !define MUI_LANGDLL_REGISTRY_ROOT "HKLM"<br>
      !define MUI_LANGDLL_REGISTRY_KEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\JCP"<br>
      !define MUI_LANGDLL_REGISTRY_VALUENAME "Installer Language"<br>
      !define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\cstrike\$(README)"<br>
      !define MUI_FINISHPAGE_SHOWREADME_TEXT $(SHOWREADME)<br>
      !define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED<br>
      !define MUI_FINISHPAGE_RUN "$INSTDIR\hl.exe"<br>
      !define MUI_FINISHPAGE_RUN_PARAMETERS "-console -game cstrike -noforcemaccel -noforcemparms +localinfo mm_gamedll podbot/podbot.dll"<br>
      !define MUI_FINISHPAGE_RUN_TEXT $(RUNTEXT)<br>
      !define MUI_FINISHPAGE_RUN_NOTCHECKED<br>
      !define MUI_LICENSEPAGE_CHECKBOX<br>
      !define MUI_DIRECTORYPAGE_TEXT_DESTINATION $(TD)<br>
      !define MUI_COMPONENTSPAGE_SMALLDESC<br>
      !define MUI_FINISHPAGE_NOAUTOCLOSE<br>
      !define MUI_HEADERIMAGE<br>
      !define MUI_HEADERIMAGE_BITMAP "${NSISDIR}\contrib\graphics\header\win.bmp"<br>
      !define MUI_HEADERIMAGE_UNBITMAP "${NSISDIR}\contrib\graphics\header\win.bmp"<br>
      <br>
      !insertmacro MUI_LANGUAGE "PortugueseBR"<br>
      !insertmacro MUI_LANGUAGE "English"<br>
      <br>
      Name "${NAME}"<br>
      <br>
      XPStyle on<br>
      CRCCheck off<br>
      SetOverwrite on<br>
      SetFont Tahoma 8<br>
      ShowInstDetails nevershow<br>
      ShowUninstDetails nevershow<br>
      OutFile "C:\1_dc\apps\jcp10.exe"<br>
      InstallDirRegKey HKLM "Software\Valve\Half-Life" "InstallPath"<br>
      <br>
      Function .onInit<br>
      <br>
      !insertmacro MUI_LANGDLL_DISPLAY<br>
      InitPluginsDir<br>
      File /oname=$PLUGINSDIR\splash.bmp "C:\1_dc\pack\installer\imagens\splash.bmp"<br>
      advsplash::show 3000 600 400 -1 $PLUGINSDIR\splash<br>
      Pop $0<br>
      <br>
      FunctionEnd<br>
      <br>
      Function .onVerifyInstDir<br>
      <br>
      IfFileExists $INSTDIR\hl.exe PathGood<br>
      Abort<br>
      PathGood:<br>
      <br>
      FunctionEnd<br>
      <br>
      Caption "$(I1) ${NAME} ${VERSION}"<br>
      UninstallCaption "$(I2) ${NAME} ${VERSION}"<br>
      BrandingText "${NAME} $(I3) Nullsoft Scriptable Install System"<br>
      <br>
      !insertmacro MUI_PAGE_LICENSE "C:\1_dc\pack\hl\cstrike\licenca.txt"<br>
      !insertmacro MUI_PAGE_COMPONENTS<br>
      !insertmacro MUI_PAGE_DIRECTORY<br>
      !insertmacro MUI_PAGE_INSTFILES<br>
      !insertmacro MUI_PAGE_FINISH<br>
      !insertmacro MUI_UNPAGE_INSTFILES<br>
      <br>
      LangString RUNTEXT ${LANG_PORTUGUESEBR} "Executar CS?"<br>
      LangString SHOWREADME ${LANG_PORTUGUESEBR} "Deseja ver o leia-me?"<br>
      LangString TD ${LANG_PORTUGUESEBR} "Caso o diretório do HL não esteja certo, insira a localização correta."<br>
      LangString I1 ${LANG_PORTUGUESEBR} "Instalação:"<br>
      LangString I2 ${LANG_PORTUGUESEBR} "Desinstalação:"<br>
      LangString I3 ${LANG_PORTUGUESEBR} "distribuído pelo"<br>
      LangString README ${LANG_PORTUGUESEBR} "leia-me.txt"<br>
      LangString RUNTEXT ${LANG_ENGLISH} "Run CS?"<br>
      LangString SHOWREADME ${LANG_ENGLISH} "Do you wish to see the readme?"<br>
      LangString TD ${LANG_ENGLISH} "If the HL directory shown below isn't right, select the right path."<br>
      LangString I1 ${LANG_ENGLISH} "Instalation:"<br>
      LangString I2 ${LANG_ENGLISH} "Uninstalation:"<br>
      LangString I3 ${LANG_ENGLISH} "packed by"<br>
      LangString README ${LANG_ENGLISH} "readme.txt"<br>
      LangString DP1 ${LANG_PORTUGUESEBR} "Fazendo cópia de segurança..."<br>
      LangString DP2 ${LANG_PORTUGUESEBR} "Copiando arquivos de base..."<br>
      LangString DP3 ${LANG_PORTUGUESEBR} "Inserindo chaves do registro..."<br>
      LangString BANNER1 ${LANG_PORTUGUESEBR} "$\r$\n$\r$\n&gt; Servidor rodando:$\r$\n&gt; ${NAME} ${VERSION} @ jcp.sharewith.us"<br>
      LangString SHORTCUT1 ${LANG_PORTUGUESEBR} "Leia-me.lnk"<br>
      LangString SHORTCUT2 ${LANG_PORTUGUESEBR} "Desinstalador.lnk"<br>
      LangString DP1 ${LANG_ENGLISH} "Making backup..."<br>
      LangString DP2 ${LANG_ENGLISH} "Copying base files..."<br>
      LangString DP3 ${LANG_ENGLISH} "Inserting registry keys..."<br>
      LangString BANNER1 ${LANG_ENGLISH} "$\r$\n$\r$\n&gt; Server running:$\r$\n&gt; ${NAME} ${VERSION} @ jcp.sharewith.us"<br>
      LangString SHORTCUT1 ${LANG_ENGLISH} "Readme.lnk"<br>
      LangString SHORTCUT2 ${LANG_ENGLISH} "Uninstall.lnk"</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">22nd January 2004 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Indeed. The page macros should be before the MUI_LANGUAGE macros.<br>
      <br>
      Some other notes:<br>
      <br>
      You don't have to add SetFont Tahoma 8. NSIS 2 uses the Windows system font by default (the sytem font of modern Windows versions is Tahoma).<br>
      <br>
      The Modern UI automatically sets XPStyle to on.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>