<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Question about compression" />

  <title>Question about compression - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Question about compression</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=248400">Question about compression</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">11th June 2006 01:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Question about compression</strong><br />
      Hi all,<br />
      <br />
      I just wonna know if its possible to create only a setup file which doesn't contain any files except the setup routine. I just want to compress it later so I need only the script (the setup executable). So the setup routine has to be the same, but the files shouldn't be included in it.<br />
      <br />
      Thanks for any help :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">11th June 2006 09:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use CopyFiles.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">11th June 2006 11:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you describe how this works? Cause I don't see that CopyFiles does that what I exactly need.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">11th June 2006 12:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh so you want to compress the files seperately in say a Zip file? In which case, you can use the ZipDll plug-in.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">11th June 2006 15:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I dont want to compress them anyway - first. I want a Setup.exe but this Setup should't have any compressed files in it. The files are in the same (srcdir) dir and should be copied to the $INSTDIR but without unpacking before. Just a "normal" installation - but without compression :)<br />
      <br />
      When you install Firefox, the files are copied to the temp-dir (with a 7zip sfx) and then, an external setup is loaded. I want to realize the same (the files + setup are going to be compressed by 7z under a linux system).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">11th June 2006 15:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The NSIS compiler also supports Linux and includes LZMA compression.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">11th June 2006 16:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Interesting, but i knew this before. But thats not an answer for my question too.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">galil</span><br />
      <span class="post-time small text-muted">11th June 2006 16:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So how is CopyFiles NOT the answer?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">11th June 2006 16:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">because I also have a 30 MB setup with compressed fils init instead of a 100 Kb Setup (or sth) with files in the dir or I am too stupid to use it right.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">11th June 2006 16:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You either...<br />
      <br />
      A. Have the files compressed (or stored uncompressed) in the setup executable (by using File instructions);<br />
      <br />
      Or<br />
      <br />
      B. You store the files outside the setup executable in file format and copy them to the installation directory with the CopyFiles instruction.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">12th June 2006 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">B)<br />
      <br />
      Can I use CopyFiles like File with the same dialogs, status bar and messages? I tried but I only saw a Windows dialog like the dialog which is shown when you copy files with the Explorer.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th June 2006 23:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You'd have to copy the files individually with separate CopyFiles instructions.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Nigg</span><br />
      <span class="post-time small text-muted">12th June 2006 23:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hm, shit. I thought I could use it like:<br />
      <br /></p>

      <blockquote>
        SetOutPath "$INSTDIR\audio\bgm"<br />
        SetOverwrite off<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgm\Drumloop.ogg"<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgm\Intro.ogg"<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgm\Level1-outside.ogg"<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgm\Unerkannt.ogg"<br />
        SetOutPath "$INSTDIR\audio\bgs"<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgs\001-Wind01.ogg"<br />
        File "Silbermond - Der harte Weg zum Ruhm\audio\bgs\002-Wind02.ogg"
      </blockquote>Thanks for your help.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JasonFriday13</span><br />
      <span class="post-time small text-muted">13th June 2006 02:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can, but why would you want behaviour like this? Using copyfiles is one way of doing it, it just does not show the files on the installer dialog. You can use this in you installer, but you have to go without the info of the current files being copied.<br />
      <br />
      The way I would go is including the files into one setup file (SetCompress off), and then make the 7zip sfx (which will compress your setup program).<br />
      <br />
      [edit]Forgot to add that it is my birthday today. I have just turned twenty (20). This is also where my nickname came from, from being born on Friday the 13th.[/edit]</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mariob</span><br />
      <span class="post-time small text-muted">29th June 2006 07:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi!<br />
      <br />
      I also need behaviour like that. Here is why.<br />
      I have client-server application and installation goes like this.<br />
      First, I create a shared folder on server in which I put installation files. Now, I put complete installation (one EXE in which are all the files) and I put all that files again together with exe).<br />
      <br />
      Installation on client machines is run from that shared folder. The reason why files must not be compiled in EXE is that client machines use those files to update.<br />
      <br />
      So, server updates those files in shared folder from internet, and clients updates from that shared folder (so that I avoide all clients to connect to the internet and download same update).<br />
      <br />
      To accomplish that, I would really need to have setup.exe which would contain only script and all the files to be seperately not merged in EXE.<br />
      <br />
      Now I see I can accomplish that with CopyFile, but that is very compromised sollution since I either have to forget on file list being installed and progress bar or I have to implement it myself. And what's the point of installer if I have to implement the thing by my self. No big difference to write that implementation in NSIS script or Delphi.<br />
      I would like installer do the job.<br />
      <br />
      So, I would really need to have an ability where NSIS would leave all the files outside EXE or even better, create required directory structure (as it would look like on client machine upon installation) in destination folder on compiling script and put all the necessery files in them and then create setup.exe which would contain script only. Of course, progress bar and all other things should work as they usually does.<br />
      For the reference, InstallShield Express could do that.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">shouman</span><br />
      <span class="post-time small text-muted">29th June 2006 08:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I really appreciate this post. Keep moveing….</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
