<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="!define and CRLF escape codes" />

  <title>!define and CRLF escape codes - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">!define and CRLF escape codes</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=309140">!define and CRLF escape codes</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zinthose</span><br />
      <span class="post-time small text-muted">31st July 2009 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>!define and CRLF escape codes</strong><br />
      &nbsp; I got a notion in my head and wanted to try it out.<br />
      <br />
      Create a multiline !define.<br />
      <br /></p>
      <pre>
<code>
## Declaration
<br />&gt;Var /GLOBAL NULL
<br />&gt;!define NULL `$NULL\\R\\NStrCpy $NULL 0`
<br /><br />&gt;## Example
<br />   Pop ${NULL}
<br />    DetailPrint $NULL
<br />    
<br />&gt;## Becomes
<br />    Pop $NULL
<br />StrCpy $NULL 0
<br />    DetailPrint $NULL 
<br />&gt;
</code>
</pre>At the moment this doesn't appear possible without building my own processor. The idea is an interesting whimsy and I thought I'd share in the hopes that the concept can be discussed. This might make for some interesting macros in the future if implemented.<br />
      <br />
      <a href="http://sourceforge.net/tracker/?func=detail&amp;aid=2830391&amp;group_id=22049&amp;atid=373088" target="_blank">Request Ticket</a>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">31st July 2009 18:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">first off, a macro can't help you?<br />
      <br />
      the problem with this is, what if you want a newline in the define, !define sometext "foo$\nBar" ? This is far more common, so you would need to come up with another way to escape it. I don't think $\0 does anything, so maybe we could use that</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zinthose</span><br />
      <span class="post-time small text-muted">31st July 2009 19:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">A macro would work IF the macro could be included inline. It would also make the code easier to read than mentally parsing the meta characters in your head like the previous !define example.<br />
      <br />
      At this time though, adding an inline !includemacro causes a compiler error.<br />
      <br /></p>
      <pre>
<code>
## Definitions
<br />   Var /GLOBAL NULL
<br />   !define NULL `!insertmacro NULL`
<br />    !macro NULL
<br />        $NULL
<br />        StrCpy $NULL 0
<br />   !macroend
<br /><br />Section
<br />    ## Example
<br />       Pop ${NULL}
<br />        DetailPrint $NULL
<br />    
<br />    ## Becomes
<br />       Pop !insertmacro NULL # Compile Error here: Pop expects 1 parameters, got 2.
<br />        DetailPrint $NULL
<br />    
<br />    ## Then
<br />        Pop $NULL
<br />        StrCpy $NULL 0
<br />        DetailPrint $NULL  
<br />    
<br />        Quit
<br />SectionEnd 
<br />&gt;
</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">31st July 2009 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br />!macro NULL op<br />${op} $NULL<br />StrCpy $NULL 0 <br />!macroend<br /><br /><br />!insertmacro NULL pop<br />DetailPrint $NULL <br /></code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
