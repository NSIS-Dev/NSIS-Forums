<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Play a video in NSIS Installer"><title>Play a video in NSIS Installer - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Play a video in NSIS Installer</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322384">Play a video in NSIS Installer</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">herdell</span><br><span class="post-time small text-muted">13th September 2010 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Play a video in NSIS Installer</strong><br>&nbsp; Hi, I've found a tool made in nsis that play a video in the main page. I'm very curious, cause I don't know any plugin able to do something like this.<br><br>Can anyone take a look in this program I post here how to this? I'll attach the file below.<br><br>EDIT: I uploaded in megaupload, cause I can't attach the files here.<br>The file contain a virus. I'll upload a clean file later. Sorry.<br><br>The name of the video using in this installer, is: "ý«€" just rename it and open in any video player. You can find it in PLUGINSDIR o extracting this installer.<br><br>I'm waiting fot answers, thanx...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">13th September 2010 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You forgot to include the link. Not that it would help much, as 'decompiling' an installer is tough at best. Why not ask the authors of the installer in question?<br><br>If I wanted to do something like that - without programming something myself or poking at the System plugin - I'd probably check if <a href="http://nsis.sourceforge.net/NsWeb_plug-in" target="_blank">http://nsis.sourceforge.net/NsWeb_plug-in</a> would allow me to display a page that has the video as an embedded object.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">herdell</span><br><span class="post-time small text-muted">13th September 2010 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by Animaether</small><br>You forgot to include the link. Not that it would help much, as 'decompiling' an installer is tough at best. Why not ask the authors of the installer in question?<br><br>If I wanted to do something like that - without programming something myself or poking at the System plugin - I'd probably check if <a href="http://nsis.sourceforge.net/NsWeb_plug-in" target="_blank">http://nsis.sourceforge.net/NsWeb_plug-in</a> would allow me to display a page that has the video as an embedded object.</blockquote>I have no idea who made this installer, and my pc os with virus, so, I'll upload it later.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">herdell</span><br><span class="post-time small text-muted">15th September 2010 01:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry for the double post, but here don't appear the 'Edit' button this time, so, I can't edit my posts. Here is the link clean of virus. Plese, check it out ,if you can.<br><a href="http://www.megaupload.com/?d=2JHSCSC8" target="_blank">http://www.megaupload.com/?d=2JHSCSC8</a><br><br>And this is the video used by the installer:<br><a href="http://www.megaupload.com/?d=11A2TIVX" target="_blank">http://www.megaupload.com/?d=11A2TIVX</a><br>You can also find it in the $PLUGINSDIR folder when the installer is running.<br><br>If an admin edit my first post with this link, will be great. Thanx...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">15th September 2010 07:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">They're creating a SysAnimate32 control.. probably just through nsDialogs.<br><a href="http://msdn.microsoft.com/en-us/library/bb761884%28VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...8VS.85%29.aspx</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">herdell</span><br><span class="post-time small text-muted">17th September 2010 23:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Can you make me a nsis example file?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">18th September 2010 08:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by herdell</small><br>Can you make me a nsis example file?</blockquote><pre>
<code>
"."
<br>&gt;!addplugindir "."
<br>&gt;!include "nsDialogs.nsh"
<br>&gt;!include "LogicLib.nsh"
<br>&gt;!include "WinCore.nsh"
<br>&gt;!include "WinMessages.nsh"
<br>&gt;OutFile "$%temp%\temp.exe"
<br><br>&gt;Section
<br>SectionEnd
<br><br>&gt;!define ACS_CENTER 0x0001
<br>&gt;!define ACS_AUTOPLAY 0x0004
<br>&gt;!define /math ACM_OPENA ${WM_USER} + 100
<br>&gt;!define /math ACM_OPENW ${WM_USER} + 103
<br>&gt;!define ACM_OPEN ${ACM_OPENA} ; lets use the ANSI one.
<br>!</code>define /math ACM_PLAY ${WM_USER} + 101
<br>&gt;!define /math ACM_STOP ${WM_USER} + 102
<br><br>Page Custom customPage
<br><br>&gt;Var dialog
<br>&gt;Var hwnd
<br>&gt;Var null
<br><br>&gt;Var animationControl
<br><br>&gt;Function customPage
<br>  nsDialogs::Create 1018
<br>  Pop $dialog
<br> ${If} $dialog == error
<br>    Abort
<br>  ${EndIf}
<br><br>  /* match dimentions to that of your AVI, otherwise it will center within control */
<br> nsDialogs::CreateControl "SysAnimate32" ${ACS_CENTER}|${ACS_AUTOPLAY}|${WS_VISIBLE}|${WS_CHILD} "" 0 0 422 132 ''
<br>    Pop $animationControl
<br>    SetOutPath $PluginsDir
<br>      File "test.avi"
<br>   StrCpy $1 "$PluginsDir\test.avi"
<br>   StrLen $2 $1
<br><br>    System::Call '*(&amp;t$2 "$1") i.r0'
<br>   SendMessage $animationControl ${ACM_OPEN} 0 $0
<br>    System::Free $0
<br><br> ${NSD_CreateButton} 0 150 64 32 "***91;  ***93;"
<br>    Pop $hwnd
<br>   ${NSD_OnClick} $hwnd animation.stop
<br><br> ${NSD_CreateButton} 72 150 64 32 "|&gt;"
<br>    Pop $hwnd
<br>   ${NSD_OnClick} $hwnd animation.play
<br><br> ${NSD_CreateButton} 144 150 64 32 "|&gt; (x3)"
<br>    Pop $hwnd
<br>   ${NSD_OnClick} $hwnd animation.play3
<br><br> ${NSD_CreateButton} 216 150 64 32 "oo"
<br>    Pop $hwnd
<br>   ${NSD_OnClick} $hwnd animation.loop
<br><br> ${NSD_CreateButton} 288 150 64 32 "???"
<br>    Pop $hwnd
<br>   ${NSD_OnClick} $hwnd animation.twitchy
<br><br>  InitPluginsDir
<br><br>  nsDialogs::Show
<br>FunctionEnd
<br><br>&gt;Function animation.stop
<br>  Pop $null
<br>  SendMessage $animationControl${ACM_STOP} 0 0
<br>FunctionEnd
<br><br>&gt;Function animation.play
<br>  Pop $null
<br> ${MAKELONG} $0 $1 0 -1
<br>  /* $0 = output variable
<br>     $1 = temporary variable used by ${MAKELONG}
<br>     $2 = start frame
<br>     $3 = end frame (-1 = end of video) */
<br> SendMessage $animationControl ${ACM_PLAY} 1 $0
<br>  /* 1 = play once */
<br>&gt;FunctionEnd
<br><br>&gt;Function animation.play3
<br>  Pop $null
<br> ${MAKELONG} $0 $1 0 -1
<br>  SendMessage $animationControl${ACM_PLAY} 3 $0
<br>  /* 1 = play three times */
<br>&gt;FunctionEnd
<br><br>&gt;Function animation.loop
<br>  Pop $null
<br> ${MAKELONG} $0 $1 0 -1
<br>  SendMessage $animationControl${ACM_PLAY} -1 $0
<br>  /* 1 = play indefinitely */
<br>&gt;FunctionEnd
<br><br>&gt;Function animation.twitchy
<br>  Pop $null
<br>  StrCpy $R2 0
<br> ${NSD_CreateTimer} animation.twitchy.next 1000
<br>FunctionEnd
<br><br>&gt;Function animation.twitchy.next
<br>  /* there's 86 frames in the animation */
<br> ${If} $R2 &lt; 76
<br>    IntOp $R3 $R2+ 10
<br>   ${MAKELONG} $0 $1 $R2 $R3
<br>    SendMessage $animationControl${ACM_PLAY} -1 $0
<br>    IntOp $R2 $R2+ 10
<br>  ${Else}
<br>    ${NSD_KillTimer} animation.twitchy.next
<br>    SendMessage $animationControl${ACM_STOP} 0 0
<br>  ${EndIf}
<br>&gt;FunctionEnd 
<br>&gt;

</pre>Note that the AVI should -not- have a sound stream in it, or supposedly the control will refuse to play the video. I'm not sure what restrictions there are on the video codec used, but the example installer used an 8bit RLE video which works... re-encoding that to MS-VIDEO1 (a common, albeit old, codec on the Windows platform) and trying with that didn't work. So you may have to find an authoring suite or converter tool that lets you encode to 8bit MS-RLE for your own videos.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">herdell</span><br>
      <span class="post-time small text-muted">20th September 2010 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanx dude, I'll try.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">herdell</span><br>
      <span class="post-time small text-muted">27th January 2011 22:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm back here to another question:<br>
      <br>
      How to show the video during the installation files in the system?<br>
      <br>
      I want that just only during the installation files, the video plays in loop and the window of NSIS still hide, showing only the video, and after finish the installation of the files, the video stops to play, and the window of NSIS appear again in the finish page.<br>
      <br>
      I know how to do this using images, but I've tried with videos using the script provided above by: <b>Animaether</b>, but I can't handle this, cause this is too complex to me.<br>
      <br>
      Someone can help?<br>
      <br>
      This is the video that I want to use in the script (if someone write one to me):<br>
      <br>
      <a href="http://www.mediafire.com/?rl2kw12xv6fo6bk" target="_blank">http://www.mediafire.com/?rl2kw12xv6fo6bk</a><br>
      <br>
      Thanx...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stass</span><br>
      <span class="post-time small text-muted">2nd November 2013 10:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Code of <b>Animaether</b> why it does not work ... I can not play the files DivX, xVid...<br>
      The reason ?<br>
      Why there is no plug-in for video playback ?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Highcoder</span><br>
      <span class="post-time small text-muted">2nd November 2013 16:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">AVI is a container for different video formats (codecs). His code work with 8-bit RLE AVIs that has NO audio stream. I think the code for DivX and xVid will be much more complex.<br>
      <br></p>

      <blockquote>
        ...Note that the AVI should -not- have a sound stream in it, or supposedly the control will refuse to play the video. I'm not sure what restrictions there are on the video codec used, but the example installer used an <b>8bit RLE video</b> which works... re-encoding that to MS-VIDEO1 (a common, albeit old, codec on the Windows platform) and trying with that didn't work. So you may have to find an authoring suite or converter tool that lets you encode to 8bit MS-RLE for your own videos...
      </blockquote>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stass</span><br>
      <span class="post-time small text-muted">3rd November 2013 11:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        8-bit RLE
      </blockquote>This is not the format, and the misunderstanding ... It is a pity that no one has figured out how to play videos in NSIS ...
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Highcoder</span><br>
      <span class="post-time small text-muted">3rd November 2013 14:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You´re right that this explanation was not 100% exact. Runlengthencoding is a simple kompression. An the first AVIs were compressed with MJPEG &amp; RLE. Both of them have very low requirements on hardware. You can create those Videos with VirtualDUB i think...</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>