<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Need help with Localization - modifying and adding strings"><title>Need help with Localization - modifying and adding strings - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Need help with Localization - modifying and adding strings</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=371383">Need help with Localization - modifying and adding strings</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">darryllrohr</span><br><span class="post-time small text-muted">20th September 2013 16:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Need help with Localization - modifying and adding strings</strong><br>hey guys,<br><br>i am using the modern ui for my installer:<br>!include "MUI2.nsh"<br><br>i am including the various languages. for example:<br>!insertmacro MUI_LANGUAGE "English"<br>!insertmacro MUI_LANGUAGE "French"<br><br>on init, i am including:<br>!insertmacro MUI_RESERVEFILE_LANGDLL<br>!insertmacro MUI_LANGDLL_DISPLAY<br><br>from what i can gather, the modern ui loads the Localization.nsh file:<br>C:\Program Files (x86)\NSIS\Contrib\Modern UI 2\Localization.nsh<br><br>and the Localization.nsh file loads the various translations files. for example:<br>C:\Program Files (x86)\NSIS\Contrib\Language files\English.nsh<br><br>so, i would expect that if i modify one of the strings in the English.nsh file and rebuild my installer, i should see the changes. however, this behavior is not the case. the string is not modified.<br><br>also, i am trying to add a new string in the English.nsh file. for example:<br>${LangFileString} MY_TEST_STRING "test string"<br><br>and i try to use it within the installer with the following syntax:<br>$(MY_TEST_STRING)<br><br>however, that does nto work either.<br><br>so my questions are: how do i add new strings and modify the existing strings using the modern ui 2?<br>also, looking at the russian language files, all the strings are garbage. how can i get the propper translations?<br><br>thanks,</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bnicer</span><br><span class="post-time small text-muted">21st September 2013 02:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">LangString MY_TEST_STRING ${LANG_ENGLISH} "test string"<br>LangString MY_TEST_STRING ${LANG_FRENCH} "chaîne de test"<br><br>Why the string in English.nsh does not change, although modified by you, is rather odd. Are you sure that you modified the right string?<br><br></p><blockquote><i>Originally posted by darryllrohr</i><br>also, looking at the russian language files, all the strings are garbage</blockquote>Do you mean the Russian is a poor translation? You could redo the translated strings, for instance, hiring a translator? If the Russian translation really is garbage, which only a Russian-speaker could judge, you might be able to submit an alternate Russian.nsh<br><br><a href="http://forums.winamp.com/showthread.php?t=302144" target="_blank">http://forums.winamp.com/showthread.php?t=302144</a><br><br>Hopefully not at the risk of starting a blood feud.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">darryllrohr</span><br><span class="post-time small text-muted">24th September 2013 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by bnicer</small><br>LangString MY_TEST_STRING ${LANG_ENGLISH} "test string"<br>LangString MY_TEST_STRING ${LANG_FRENCH} "chaîne de test"<br><br>Why the string in English.nsh does not change, although modified by you, is rather odd. Are you sure that you modified the right string?<br><br>Do you mean the Russian is a poor translation? You could redo the translated strings, for instance, hiring a translator? If the Russian translation really is garbage, which only a Russian-speaker could judge, you might be able to submit an alternate Russian.nsh<br><br><a href="http://forums.winamp.com/showthread.php?t=302144" target="_blank">http://forums.winamp.com/showthread.php?t=302144</a><br><br>Hopefully not at the risk of starting a blood feud.</blockquote>no, the russian strings are literally garbage:<br><pre>
<code>!ifdef MUI_WELCOMEPAGE<br>  ${LangFileString} MUI_TEXT_WELCOME_INFO_TITLE "Âàñ ïðèâåòñòâóåò ìàñòåð óñòàíîâêè $(^NameDA)"<br>  ${LangFileString} MUI_TEXT_WELCOME_INFO_TEXT "Ýòà ïðîãðàììà óñòàíîâèò $(^NameDA) íà âàø êîìïüþòåð.$\r$\n$\r$\nÏåðåä íà÷àëîì óñòàíîâêè ðåêîìåíäóåòñÿ çàêðûòü âñå ðàáîòàþùèå ïðèëîæåíèÿ. Ýòî ïîçâîëèò ïðîãðàììå óñòàíîâêè îáíîâèòü ñèñòåìíûå ôàéëû áåç ïåðåçàãðóçêè êîìïüþòåðà.$\r$\n$\r$\n$_CLICK"<br>!endif</code>
</pre><br>
      <br>
      i did try this as well:<br>
      <pre>
<code>LangString MY_TEST_STRING ${LANG_ENGLISH} "test string"</code>
</pre><br>
      but ${LANG_ENGLISH} never evaluted to anything. it was essentially null.<br>
      <br>
      the only language files that i could find are here:<br>
      C:\Program Files (x86)\NSIS\Contrib\Language files<br>
      i modified a few english strings and they didnt change in my installer.<br>
      is there any other place that the languages are defined?<br>
      i tried modifying MUI_TEXT_WELCOME_INFO_TITLE and MUI_TEXT_WELCOME_INFO_TEXT. i even tried adding a new string and tried to referrence it, but it did not work either.<br>
      <br>
      any suggestions?<br>
      <br>
      thanks,
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br>
      <span class="post-time small text-muted">25th September 2013 20:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">:( All I can say is that it seems like something basic.<br>
      <br></p>

      <blockquote>
        <i>Originally posted by</i> <b>darryllrohr</b><br>
        no, the russian strings are literally garbage:
      </blockquote>If the Russian strings appear as "garbage", the problem is most likely that you are opening/viewing the Russian.nsh file in ansi mode. Nsis 3.0a1 nsh files are encoded as UTF-8. Windows Notepad should automatically display UTF-8. Are you using NSIS 3.0a1?<br>
      <br>
      Have you tried opening other languages, such as Macedonian? The characters there are Cyrillic. If the problem is consistent, you'd see Macedonian as "garbage" too.<br>
      <br>

      <blockquote>
        <i>Originally posted by</i> <b>darryllrohr</b><br>
        but ${LANG_ENGLISH} never evaluted to anything. it was essentially null.
      </blockquote>Could you try:<br>
      MessageBox MB_USERICON|MB_OK "${MY_TEST_STRING}" /SD IDOK<br>
      <br>
      I can't see anything wrong with your code:<br>
      <br>
      !insertmacro MUI_LANGUAGE "English"<br>
      <br>
      Do you include mui2 in your installer?<br>
      <br>
      !include "MUI2.nsh"
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br>
      <span class="post-time small text-muted">25th September 2013 22:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are creating an ansi installer. Âàñ ïðèâåòñòâóåò ìàñòåð óñòàíîâêè is from the 2.46 (ansi) Russian.nsh. The characters will be converted according to the user's codepage. On a Russian system they ought to render in Cyrillic letters. It's my fault for not noticing before. I'm very sorry. :tinfoil:<br>
      <br>
      Note: With multilingual installers, unicode has some advantages, notably, the user could install the Russian version on any system. The characters would always be recognizable: Вас приветствует мастер установки. The Russian.nsh strings in utf-8 would not be garbage.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>