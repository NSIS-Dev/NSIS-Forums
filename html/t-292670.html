<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="32 vs 64 bit SYSDIR - need some help/explanation" />

  <title>32 vs 64 bit SYSDIR - need some help/explanation - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">32 vs 64 bit SYSDIR - need some help/explanation</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292670">32 vs 64 bit SYSDIR - need some help/explanation</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">3rd June 2008 13:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>32 vs 64 bit SYSDIR - need some help/explanation</strong><br />
      myself actually works on 32bit - so all tools are working with $sysdir.<br />
      <br />
      But i am not sure about 64bit.<br />
      <br />
      is it "\system64" instead "\system32" or "\sysWOW64" found here?<br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=269506" target="_blank">http://forums.winamp.com/showthread....hreadid=269506</a><br />
      <br />
      i write on a portable defragger which is available as x86 and x64.<br />
      <br />
      contains $sysdir the correct path for both?<br />
      <br />
      how to determine 32 or 64 bit?<br />
      <br />
      WOW64???<br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=237297" target="_blank">http://forums.winamp.com/showthread....hreadid=237297</a><br />
      <br />
      Application is for WinXP and Vista.<br />
      <br />
      thx<br />
      <br />
      PS registry in the work too, is this needed?<br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=271710" target="_blank">http://forums.winamp.com/showthread....hreadid=271710</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th June 2008 10:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">system32 is for 64-bit files and syswow64 is for 32-bit files. $SYSDIR points to them both and where it actually writes is affected by file-system redirection. x64.nsh contains macros to handle the redirection.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">7th June 2008 21:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i assume that i have to point to syswow64 (redirection off).<br />
      thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">8th June 2008 02:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That'd be $SYSDIR with redirection <b>on</b>. With redirection turned on (the default), files written to system32 are actually written to syswow64.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Spilly</span><br />
      <span class="post-time small text-muted">7th August 2008 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This presents a problem when using $SYSDIR for file paths, like in shortcut creation.<br />
      <br />
      Changing the redirection has no effect on the SYSDIR var, it's always "$WINDIR\system32", but if you install a 32-bit file in SysWOW64:<br />
      <br />
      EnableX64FSRedirection<br />
      SetoutPath $SYSDIR<br />
      File 32bit.dll<br />
      CreateShortcut "$SMPROGRAMS\32bit.lnk" "$SYSDIR\32bit.dll"<br />
      <br />
      the shortcut will be broken. Since you can't modify the $SYSDIR variable, it has become unusable for all binaries stored in SysWOW64.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">10th February 2010 20:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Linking this thread to:<br />
      <a href="http://forums.winamp.com/showthread.php?postid=2607742" target="_blank">http://forums.winamp.com/showthread.php?postid=2607742</a><br />
      Forums &gt; Developer Center &gt; NSIS Discussion &gt; Copying 64-bit DLL to SYSDIR on W7-64<br />
      <br />
      Edit: not related to your shortcut issue, I'm afraid - just noting that thread as this is one of the first ones to pop up in google, and that thread has some updated information on disabling filesystem redirection currently not yet implemented in the x64.nsh header file.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
