<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="adjusting height"><title>adjusting height - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">adjusting height</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=113619">adjusting height</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">11th November 2002 00:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>adjusting height</strong><br>Is there a way to adjust the height of the install dialog? I looked through the documentation for "width" and "dimension" and searched the board for the words also, but it doesn't seem anyone has needed this before. I just want to make my branded picture fit, I am putting it on the left but I want to use a picture that is taller than the installer.<br><br>Anyone know how I might do this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">11th November 2002 04:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The best method is to use a custom UI. There are several examples located in Contrib\UIs of the NSIS folder. You can edit the existing ones with a program like "Resource Hacker", or compile your own. Inside your script you simply set the ChangeUI attribute to the location of your new UI and the compiler will do the rest. For example, the following will set your dialog to use the new modern UI dialog.<br><br>Name "test"<br>OutFile "test.exe"<br>ChangeUI all "${NSISDIR}\Contrib\UIs\modern.exe"<br><br>Section ""<br>SectionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">11th November 2002 23:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for the reply.<br><br>I've since played with the ModernUI and tried adding a branding image but it seems to ignore me completely. Is this something that will be fixed with the Modern UI? If not, is there some tutorial on how to add an image to the modern ui? I could see using resource hacker to make space but I don't know how I'd go about loading something into that spot through the scripting language.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">12th November 2002 02:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">theres a couple ways you can do it. first it comes down to what type of branding image you want to add. NSIS has a souple functions which will allow you to add an image to the inner dialog. Use the AddBrandingImage and the SetBrandingImage functions. If this doesn't do what you need then we can go to the next step which is using resource hacker.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">13th November 2002 02:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well I found out that if you want to add a branding image to the MODERN_UI using all those fancy macros ;) you have to put it <b>after</b> the <i>!insertmacro MUI_SYSTEM</i>.<br><br>This makes space for the image but I am unable to find a function where I can load it from.<br><br>By adding another page I was able to get a function to load the image:<br>Page directory dirImage<br><br>But there are two problems with this. First of all I don't want to add the Image after I've gone through all the other pages the MODERN_UI macros have created. Secondly, the image appeared too low and off to the right, clearly not lined up with the borders of the dialog as it should be. I'm pretty sure this last one is a bug, but if I find a better function to load the branding image from perhaps this problem will go away.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">13th November 2002 03:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is what I do for my installer. I have a full screen graphic so I have to add an additional control to the outer dialog. I modify dialog 105 in the modern.exe UI file (I user resource hacker for this). I add the following line right below the "{" symbol.<br><br>CONTROL "",1001,STATIC,SS_BITMAP|WS_CHILD|WS_VISIBLE|WS_GROUP,0,0,0,0<br><br>I then recompile the page and save the exe. In my code I add the following.<br><br>Function .onGUIInit<br>GetTempFileName $R0<br>File "/oname=$R0" "background.bmp"<br>SetBrandingImage /IMGID=1001 "$R0"<br>Delete $R0<br>FunctionEnd<br><br>This will load the graphic into the control. You might have to play around with the ording in the modern.exe but that's basically it.<br><br>Hope this helps.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">13th November 2002 04:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This almost works but I get the error:<br>Function: ".onGUIInit"<br>Error: Function named ".onGUIInit" already exists.<br>Error in script "eMule.nsi" on line 57 -- aborting creation process<br><br>Is this already defined by the MODERN_UI macro?<br><br>I tried putting that code in the .onInit function but while it compiled it did nothing.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">13th November 2002 13:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MUI does have the GUIInit already used but we should be able to get around it. In your script you should have the following line.<br><br>!insertmacro MUI_SYSTEM<br><br>replace it with the following.<br><br>!insertmacro MUI_INTERFACE<br>!insertmacro MUI_FUNCTIONS_PAGES<br>Function .onGUIInit<br>GetTempFileName $R0<br>File "/oname=$R0" "background.bmp"<br>SetBrandingImage /IMGID=1001 "$R0"<br>Delete $R0<br>!insertmacro MUI_GUIINIT<br>FunctionEnd<br>!insertmacro MUI_FUNCTIONS_ABORTWARNING<br>!insertmacro MUI_UNBASIC<br><br>give it a try</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">13th November 2002 13:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">An easier way of using a customized GUIInit function will be added to the next version of the Modern UI.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">13th November 2002 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ah-ha, thanks dselkirk that did the trick. :D I'm so close... however I still have a problem getting the image in the right spot/size.<br><br>If I use "<i>AddBrandingImage left 164</i>" it will place the branding image down and to the right (and it takes a little more space than I told it to), instead of in the top left corner. Is there a way to tell the image to be at 0,0 <i>after</i> adding the branding image?<br><br>If I add it using reshacker I don't know how much space I'd need since 164 units is not the same as 164 pixels... and don't these units change with system font sizes?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">13th November 2002 21:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The addbrandingimage function adds the image to the inner dialog. the inner dialog is that grey square you see if you edit dialog 105 of the modern.exe. Thats why I add the bitmap control to the ui using resource hacker, it allows me to place the graphic where I want. Also, in resource hacker 164 translates to 110. This shouldn't matter though. The graphic should automatically resize. Why don't you describe how you want it to look and then we can go form there.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">shantanu_gadgil</span><br><span class="post-time small text-muted">13th November 2002 22:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Yet another UI "modern3". Hope it helps</strong><br>This is a modified version of the basic "modern2.exe" UI. You can load it in ResourceHacker and see the location of the image. This is a rough cut :)<br><br>- Shantanu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">shantanu_gadgil</span><br><span class="post-time small text-muted">13th November 2002 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>sorry, forgot to attach the file</strong><br>here is the file<br><br>- Shantanu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">14th November 2002 09:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hey dselkirk, thanks for the clarification on the AddBrandingImage issue. I still think it would be nice to be able to add a branding image with some sort of automatic macro into the MODERN_UI, however resource hacker worked fine.<br><br>I think this is the last problem, when I run the uninstaller it doesn't seem to call .onGUIInit so the branding image doesn't get set. Again, I'd say this is a bug but perhaps it's just ignorance on my behalf. :igor: Do you have a clever way of working around this too?<br><br>@shantanu_gadgil, thanks for the new layout but I got what I needed as far as layout goes.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">14th November 2002 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The uninstaller uses un.onGUIInit, but you should also insert some macro's manually because the Modern UI basic macro inserts un.onGUIInit.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">14th November 2002 18:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well this causes a new problem, the branding image takes up 2x the space now. Is there someway to fix this? It won't let me mix "un." function calls with regular "." functions so I can't see a way around this.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">14th November 2002 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">...or perhaps there is a way to use another gui, like say modern.exe, for the uninstaller so I don't have that big space there?<br><br>I tried ChangeUI with IDD_UNINST but that only changes the inner dialog.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">14th November 2002 18:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There seems to be 2 issues here. I'm not sure whats happening with the branding image size. It almost sounds like 2 images are being added. As for mixing the functions, the only way to do this is to use macros. To do this simply add the following code before any of the !insertmacro I showed you in the previous post.<br><br>!macro MY_GUIINIT<br>GetTempFileName $R0<br>File "/oname=$R0" "background.bmp"<br>SetBrandingImage /IMGID=1001 "$R0"<br>Delete $R0<br>!insertmacro MUI_GUIINIT<br>!macroend<br><br>Now replace all the code inside the .onGUIInit and un.onGUIInit functions with the following.<br><br>!insertmacro MY_GUIINIT<br><br>This will insert the same code in both functions.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">14th November 2002 23:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I was unclear.<br><br>The problem is the image is twice in the installer executable! The installer has two copys of same image compressed seperatly. I add branding image and I gain 100k to installer, then I add branding image to un.onGUIInit and now installer gains 200k!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">15th November 2002 00:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ahh. Basically the reason is that the uninstall is a seperate executable that is compiled at the same time as your installer. That is why nsis is so seperated in the script. Why there's "." and "un.". The only thing you can do is either make a silent uninstall (ie. no graphic need then) or optimize your graphic (index the color). Wish I had a better answer for you. Sorry</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">15th November 2002 02:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well if you say they are seperate executables, isn't there a way for me to change which UI it uses for the uninstaller? I'd be happy if it just used the modern.exe ui...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th November 2002 10:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">They are not separate executables, just separate data blocks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">15th November 2002 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">is it possible to have a common data block? This can be for graphics and functions which are common to both install and uninstall?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th November 2002 13:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'll check.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">15th November 2002 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">cool, thx</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">amanda_like_it</span><br><span class="post-time small text-muted">16th November 2002 11:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Common data block? I'd be very much interested in this, would be a useful feature.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>