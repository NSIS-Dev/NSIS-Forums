<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Building CVS with scons"><title>Building CVS with scons - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Building CVS with scons</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214474">Building CVS with scons</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">29th April 2005 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Problem compiling with Scons</strong><br>Hello,<br><br>I tried to compile NSIS with Scons and the MS Toolkit, but it fails, the command prompt tells me that the sdk path could not be found in the registry, i tried to use CPPPATH and LIBPATH to set the path manually but it did not help.<br>Can someone please help me?<br><br></p><blockquote>D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES<br>scons: Reading SConscript files ...<br><br>scons: *** Path does not exist for option CPPPATH:<br>File "SConstruct", line 61, in ?<br>D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES CPPPATH="C:\Program Files\Microso<br>ft Visual C++ Toolkit 2003\Bin"<br>scons: Reading SConscript files ...<br><br>scons: *** Path does not exist for option LIBPATH:<br>File "SConstruct", line 61, in ?<br>D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES CPPPATH="C:\Program Files\Microso<br>ft Visual C++ Toolkit 2003\Bin" LIBPATH="C:\Program Files\Microsoft Visual C++ T<br>oolkit 2003\lib"<br>scons: Reading SConscript files ...<br>internal error<br>Traceback (most recent call last):<br>File "C:\Program Files\Python24\scons\SCons\Script\__init__.py", line 1103, in<br>main<br>_exec_main()<br>File "C:\Program Files\Python24\scons\SCons\Script\__init__.py", line 1097, in<br>_exec_main<br>_main(args, parser)<br>File "C:\Program Files\Python24\scons\SCons\Script\__init__.py", line 903, in<br>_main<br>SCons.Script.SConscript._SConscript(fs, script)<br>File "C:\Program Files\Python24\scons\SCons\Script\SConscript.py", line 239, i<br>n _SConscript<br>exec _file_ in stack[-1].globals<br>File "SConstruct", line 71, in ?<br>defenv.Tool('mstoolkit', toolpath = ['SCons/Tools'])<br>File "C:\Program Files\Python24\scons\SCons\Environment.py", line 906, in Tool<br><br>return SCons.Tool.Tool(tool, map(self.subst, toolpath))(self)<br>File "C:\Program Files\Python24\scons\SCons\Tool\__init__.py", line 53, in __c<br>all__<br>apply(self.generate, ( env, ) + args, kw)<br>File "SCons/Tools\mstoolkit.py", line 283, in generate<br>include_path, lib_path, exe_path, sdk_path = get_msvctoolkit_paths()<br>File "SCons/Tools\mstoolkit.py", line 82, in get_msvctoolkit_paths<br>raise SCons.Errors.InternalError, "The Platform SDK directory was not found<br>in the registry."<br>InternalError: The Platform SDK directory was not found in the registry.<br>D:\Downloads\nsis\NSIS&gt;</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LIGHTNING UK!</span><br><span class="post-time small text-muted">29th April 2005 08:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you install the Windows SDK?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">29th April 2005 13:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes I installed it, one time without to register the environment variables and one time with these variables and the problem still occurs.<br>Any idea???</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th April 2005 16:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The error "The Platform SDK directory was not found in the registry" shows if there was an error reading the HKLM\SOFTWARE\Microsoft\MicrosoftSDK\Directories\Install Dir registry key. Make sure the key exists and contains a valid value. If it doesn't, either create it or reinstall the Platform SDK.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">29th April 2005 17:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks Kichik,<br><br>I created the registry values and it worked, but i still get errors:<br></p><blockquote>D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes<br>scons: Reading SConscript files ...<br><br>scons: *** Path does not exist for option CPPPATH:<br>File "SConstruct", line 61, in ?<br>D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes CPPPATH="C:\program files\Microsoft Vi<br>sual C++ Toolkit 2003\bin"<br>scons: Reading SConscript files ...<br><br>scons: *** Path does not exist for option LIBPATH:<br>File "SConstruct", line 61, in ?<br>D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes CPPPATH="C:\program files\Microsoft Vi<br>sual C++ Toolkit 2003\bin" LIBPATH="C:\Program Files\Microsoft Visual C++ Toolki<br>t 2003\Lib"<br>scons: Reading SConscript files ...<br>Using Microsoft tools configuration<br>Checking for main() in C library gdi32... no<br>Checking for main() in C library user32... no<br>Checking for main() in C library version... no<br>Checking for main() in C library pthread... no<br>Checking for main() in C library stdc++... no<br>Checking for main() in C library iconv... no<br>Checking for main() in C library libiconv... no<br>scons: done reading SConscript files.<br>scons: Building targets ...<br>cl /nologo /O1 /W3 /GX /TP "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003<br>\bin" /c Contrib\Library\LibraryLocal\LibraryLocal.cpp /Fobuild\release\Library\<br>LibraryLocal\LibraryLocal.obj<br>cl /nologo /O1 /W3 /TP "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin<br>" /c Contrib\MakeLangId\MakeLangId.cpp /Fobuild\release\MakeLangId\MakeLangId.ob<br>j<br>rc "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /fobuild\release\M<br>akeLangId\resource.res Contrib\MakeLangId\resource.rc<br>cl /nologo /O1 /W3 /TP "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin<br>" /c Contrib\zip2exe\main.cpp /Fobuild\release\zip2exe\main.obj<br>MakeLangId.cpp<br>LibraryLocal.cpp<br>main.cpp<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\adler32.c /Fobuild\release\zip2exe\zlib\adler32.obj<br>adler32.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\crc32.c /Fobuild\release\zip2exe\zlib\crc32.obj<br>crc32.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\inffast.c /Fobuild\release\zip2exe\zlib\inffast.obj<br>inffast.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\inflate.c /Fobuild\release\zip2exe\zlib\inflate.obj<br>inflate.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\inftrees.c /Fobuild\release\zip2exe\zlib\inftrees.obj<br>inftrees.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\ioapi.c /Fobuild\release\zip2exe\zlib\ioapi.obj<br>ioapi.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\unzip.c /Fobuild\release\zip2exe\zlib\unzip.obj<br>unzip.c<br>cl /nologo /O1 /W3 "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /c<br>Contrib\zip2exe\zlib\zutil.c /Fobuild\release\zip2exe\zlib\zutil.obj<br>zutil.c<br>rc "/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin" /fobuild\release\z<br>ip2exe\res.res Contrib\zip2exe\res.rc<br>"C:\Program Files\Microsoft Platform SDK for Windows XP SP2\\bin\Win64\link.exe"<br>/nologo /opt:nowin98 /entry:WinMain /map /OUT:build\release\MakeLangId\MakeLang<br>Id.exe "/LIBPATH:C:\Program Files\Microsoft Visual C++ Toolkit 2003\Lib" kernel3<br>2.lib user32.lib build\release\MakeLangId\MakeLangId.obj build\release\MakeLangI<br>d\resource.res<br>"C:\Program Files\Microsoft Platform SDK for Windows XP SP2\\bin\Win64\link.exe"<br>/nologo /opt:nowin98 /map /OUT:build\release\zip2exe\zip2exe.exe "/LIBPATH:C:\P<br>rogram Files\Microsoft Visual C++ Toolkit 2003\Lib" user32.lib gdi32.lib comctl3<br>2.lib comdlg32.lib advapi32.lib shell32.lib build\release\zip2exe\main.obj build<br>\release\zip2exe\zlib\adler32.obj build\release\zip2exe\zlib\crc32.obj build\rel<br>ease\zip2exe\zlib\inffast.obj build\release\zip2exe\zlib\inflate.obj build\relea<br>se\zip2exe\zlib\inftrees.obj build\release\zip2exe\zlib\ioapi.obj build\release\<br>zip2exe\zlib\unzip.obj build\release\zip2exe\zlib\zutil.obj build\release\zip2ex<br>e\res.res<br>Le chemin d'accès spécifié est introuvable.<br>scons: *** [build\release\MakeLangId\MakeLangId.exe] Error 1<br>Le chemin d'accès spécifié est introuvable.<br>scons: *** [build\release\zip2exe\zip2exe.exe] Error 1<br>scons: building terminated because of errors.<br>D:\Downloads\NSIS&gt;</blockquote>Thanks a lot for your help</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th April 2005 22:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">To get rid of the CPPPATH and LIBPATH errors, upgrade to SCons 0.96.90.<br><br>As for the second error, build without -j4 to get an ordered output and post that instead. I can't tell which file it couldn't find by the log you've posted above.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">30th April 2005 06:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks Kichik,<br><br>i did what you said and still get the errors:<br></p><blockquote>Setting environment for using Microsoft Visual C++ 2003 Toolkit.<br>(If you have another version of Visual Studio or Visual C++ installed and wish<br>to use its tools from the command line, run vcvars32.bat for that version.)<br><br>Thank you for choosing the Visual C++ Toolkit 2003! Get started quickly by<br>building the code samples included in the "Samples" directory. Each sample<br>includes a short whitepaper discussing the Visual C++ features, and a batch<br>file for building the code.<br><br>Type "cl /?" for brief documentation on compiler options.<br><br>Visit <a href="http://msdn.microsoft.com/visualc/using/documentation/default.aspx" target="_blank">http://msdn.microsoft.com/visualc/us...n/default.aspx</a> for<br>complete compiler documentation.<br><br>C:\Program Files\Microsoft Visual C++ Toolkit 2003&gt;d:<br><br>D:\&gt;cd downloads\nsis<br><br>D:\Downloads\NSIS&gt;scons MSTOOLKIT=YES<br>scons: Reading SConscript files ...<br>Using Microsoft tools configuration<br>Checking for main() in C library gdi32... no<br>Checking for main() in C library user32... no<br>Checking for main() in C library version... no<br>Checking for main() in C library pthread... no<br>Checking for main() in C library stdc++... no<br>Checking for main() in C library iconv... no<br>Checking for main() in C library libiconv... no<br>scons: done reading SConscript files.<br>scons: Building targets ...<br>cl /nologo /O1 /W3 /GX /TP /c Contrib\Library\LibraryLocal\LibraryLocal.cpp /Fob<br>uild\release\Library\LibraryLocal\LibraryLocal.obj<br>LibraryLocal.cpp<br>"C:\Program Files\Microsoft Platform SDK for Windows XP SP2\bin\Win64\link.exe"<br>/nologo /opt:nowin98 /map /OUT:build\release\Library\LibraryLocal\LibraryLocal.e<br>xe kernel32.lib oleaut32.lib version.lib build\release\Library\LibraryLocal\Libr<br>aryLocal.obj<br>Le chemin d'accès spécifié est introuvable.<br>scons: *** [build\release\Library\LibraryLocal\LibraryLocal.exe] Error 1<br>scons: building terminated because of errors.<br>D:\Downloads\NSIS&gt;</blockquote>I use pythons 2.41, scons 0.96.90, platform sdk for Winxp sp2, visual c++ toolkit 2003 and i work on Windows XP MCE 2005.<br><br>Hope you can help me<br>Bye</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th April 2005 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Looks like the Platform SDK is improperly detected. It doesn't find link.exe or the libraries. Does "C:\Program Files\Microsoft Platform SDK for Windows XP SP2\bin\Win64\link.exe" really exists? What about "C:\Program Files\Microsoft Platform SDK for Windows XP SP2\lib\gdi32.lib"?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">1st May 2005 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik, there is probably a problem with my install of the platform, because i dont find the files you mentionned in your message... But i tried to reinstall the platform and it didnt help there is no Win64 folder, no link.exe...<br>I dont know why???<br>Can someone help me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">1st May 2005 17:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok I tried with another SDK for Windows Server 2003 SP1 and it seems to work correctly, previously i used the sdk for Windows XP SP2... I dont understand why it didnt work???<br><br>But once again thanks a lot for your help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">WebMatze</span><br><span class="post-time small text-muted">2nd May 2005 10:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello,<br><br>I tried to compile NSIS source with SCONS and it worked, but when i tried to test the file makensis.exe, i got an error message<br></p><blockquote><br>D:\Downloads\NSIS\build\release\makensis&gt;makensis<br>Error: opening stub "D:\Downloads\NSIS\build\release\makensis\Stubs\zlib"<br>Error initalizing CEXEBuild: error setting default stub<br><br>D:\Downloads\NSIS\build\release\makensis&gt;<br></blockquote>What did i wrong?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd May 2005 18:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You're not supposed to run it from the build directory. Get the latest CVS version and run:</p><pre>
<code>scons PREFIX="C:\Program Files\NSIS" install</code>
</pre>to install it to C:\Program Files\NSIS, or[/code]scons dist[/code]to get a zip file.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>