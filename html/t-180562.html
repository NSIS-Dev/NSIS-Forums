<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Skip instfiles page"><title>Skip instfiles page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Skip instfiles page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=180562">Skip instfiles page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">happilybottled</span><br><span class="post-time small text-muted">19th May 2004 23:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Skip instfiles page</strong><br>I am writing an installer that needs to have 2 instfiles pages, one of which may be skipped. My problem is that I cannot get the installer to skip an instfiles page - if I put an 'Abort' in the pre-function then the page comes up blank but it is not skipped.<br><br>I know that this is usually done by showing a components page and allowing the user to pick what components they want to install, but for marketing/licensing reasons I need to do it this way.<br><br>The flow of the installer needs to be like:<br><br>Page custom PageWantProductA<br>Page instfiles PreProductA PageProductA LeaveProductA<br>Page custom PageProductAInstallationResults<br>Page license<br>Page directory<br>Page instfiles PreProductB PageProductB LeaveProductB<br><br>Function PageWantProductA<br>; A page that asks the user if they want<br>; product A installed<br>FunctionEnd<br><br>Function PreProductA<br>; If the user wants product A, then unselect all<br>; sections except those for Product A<br>; If the user does not want product B, then skip<br>; this page<br>FunctionEnd<br><br>Function PageProductA<br>FunctionEnd<br><br>Function LeaveProductA<br>; unselect the product A sections, and select<br>; the product B sections<br>FunctionEnd<br><br>Function PageProductAInstallationResults<br>; tell the user Product A was installed sucessfully<br>; (or if it failed)<br>FunctionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">20th May 2004 02:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What I think you should do is to create an invisible custom page after the <i>instfiles</i> page and try to use abort command again on instfiles pre-function. Say after if this works or not.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">happilybottled</span><br><span class="post-time small text-muted">20th May 2004 16:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK, I don't know exactly what you mean by an invisible <i>page</i>, so I don't know how to try it. I do have some custom pages that should sometimes get skipped, and these pages are behaving exactly as I expect.<br><br>If I put the 'Abort' in the pre function, then I see a blank page rather than having the page skipped. I then have to click next. Neither the 'show' nor the 'leave' functions ever get called in this case, and after I click next I go to the next page I expect to see.<br><br>If I try putting the 'Abort' in the show function, then the leave function gets called immediately but I still have to click next to get to the next page. The install page that I see in this case says 'Completed' and when I click on details all it says is 'Completed' (nothing is actually installed) and the progress bar has made no progress (it appears as just a white strip).<br><br>In either of these cases I've tried putting in custom pages before and after the install page, and I've tried skipping those pages and showing those pages - these custom pages always behave as expected and never have any effect on this observed behavior of the install page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">21st May 2004 01:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">An <i>invisible custom page</i> is a page which doesn't appear on the screen. Use "Page custom CustFunc" after instfiles page and create "Function CustFunc" with no commands inside (CustFunc is the name of the function you want), and add to <i>instfiles pre-function</i> the command <i>Abort</i>. Try and say if it does work.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">roy204</span><br><span class="post-time small text-muted">21st May 2004 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi there,<br><br>I work with "happilybottled" and tried your suggestion of an invisible custom page this morning but it didn't fix it. The new page doesn't show (that's expected) but also does not change the logic (I'm not sure how it could) of other pages.<br><br>All in all, we are unable to skip the <b><i>instfiles</i></b> page using Abort in the <i>pre_function</i>, nor stay into it using Abort in the <i>leave_function</i> although it works with every other page type (license, components, etc...).<br><br>Could this be a bug in NSIS or is there a workaround?<br><br>Thanks again for any help, much appreciated.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">21st May 2004 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can use "SetAutoClose true" and "SetAutoClose false" inside your sections to control whether or not the first instfiles page appears.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">happilybottled</span><br><span class="post-time small text-muted">24th May 2004 16:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you pengyou! It looks like I can get the behavior I want by combining SetAutoClose and Abort. (If I don't use Abort then the 'Next &gt;' button does work correctly, but the '&lt; Back' button on the next page still ends up getting me to the install page I was trying to skip.)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>