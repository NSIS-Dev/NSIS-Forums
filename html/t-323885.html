<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Nop... Silliness or Diamond in the Ruff?"><title>Nop... Silliness or Diamond in the Ruff? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Nop... Silliness or Diamond in the Ruff?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323885">Nop... Silliness or Diamond in the Ruff?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Zinthose</span><br><span class="post-time small text-muted">8th November 2010 17:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Nop... Silliness or Diamond in the Ruff?</strong><br>&nbsp; I did a search and was unable to locate any real-world examples for the use of the "Nop" command.<br><br>As far as I can tell it's only purpose is to take the place of commented line...<br></p><pre>
<code>
macro _IsEqual _MyVar _MyVal
<br>    StrCmp`${_MyVal}` `${_MyVar}` +3
<br>   ; DetailPrint "They are not Equal!"
<br>   Nop ; Added to allow for Jump operation when previous line was commeted out
<br>    StrCpy${_MyVar} `${_MyVal}`
<br>!macroend
<br><br>Section
<br>    StrCpy$0 "cake"
<br>   !insertmacro _IsEqual $0 "pie"
<br>   DetailPrint "Done! $$0=$0"
<br>&gt;SectionEnd 
<br>&gt;
</code>
</pre>Even more unlikely would be to use Nop to space macros so jumps will land on the interned targets.
      <pre>
<code>
macro _MakeBrainHurtCode _Mode
<br>    ## TODO Very complex Stuff
<br>   Goto +10
<br>   !if `${_Mode}` == "Simple"
<br>        Nop
<br>        Nop
<br>        Nop
<br>        Nop
<br>        Nop
<br>        Nop
<br>        DetailPrint "Do Stuff"
<br>        Nop
<br>        DetailPrint "Do Stuff"
<br>    !else
<br>       DetailPrint "Do Stuff"
<br>       DetailPrint "Do Stuff"
<br>       DetailPrint "Do Stuff"
<br>        Nop
<br>        DetailPrint "Do Stuff"
<br>       DetailPrint "Do Stuff"
<br>       DetailPrint "Do Stuff"
<br>        Nop
<br>        DetailPrint "Do Stuff"
<br>    !endif
<br>   DetailPrint "Done"
<br>&gt;!macroend 
<br>&gt;
</code>
</pre>According to <a href="http://en.wikipedia.org/wiki/NOP" target="_blank">WikiPedia's article on NOP</a>, it would appear to be very useful in assembler but I'm having trouble justifying it's existence in NSIS.<br>
      <br>
      Whats everyone's take on this? I'd like to know as I'm struggling to find practical things to do with this command.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">8th November 2010 18:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well I wouldn't say 'diamond in the ruff'.. I've not used it beyond exploring the scripting language way early on.. nor have I seen it used (and the only example file using it has the comment "for fun").<br>
      <br>
      That said.. the documentation on it isn't entirely all-encompassing. It says it 'does nothing'.. but while indeed it doesn't -do- anything itself, it does still count as an instruction for things like progress calculation.<br>
      <br>
      No idea in what situation you'd use it, though... perhaps if the author still isn't using LogicLib and using relative offsets, as you mentioned, thus being able to replace existing commands with a Nop for testing (deleting the line entirely would mess up the offset).</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zinthose</span><br>
      <span class="post-time small text-muted">8th November 2010 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I suppose a nice syntax for disabling a line would be:</p>
      <pre>
<code>
"<br>SectionEnd 
<br>&gt;
</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">8th November 2010 19:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Abusing a comment/line-continuance quirk with a seemingly useless command to do something that's useful but entirely overengineered? Songs of praise shall be sung of this.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">8th November 2010 19:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't need Nop for that to work; i.e. `#\` will do. However I suppose that would be useful to retain the number of instructions when using relative jumps.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">{_trueparuex^}</span><br>
      <span class="post-time small text-muted">8th November 2010 21:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use Nop to to somewhat control the progressbar when installing. Progressbar moves by the executed commans in sections and you can use Nop to space the progress so that commands that take longer will also move the progress forward more that other commands.<br>
      <br>
      For example, let's say you have two files to install one is 1 MB and the other is 4 MB:<br>
      <br></p>
      <pre>
<code>
Section ""<br><br>  File "smallerfile.dat"<br>  File "largerfile.dat"<br>  Nop<br>  Nop<br>  Nop<br><br>SectionEnd 
<br>&gt;
</code>
</pre>PaR
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zinthose</span><br>
      <span class="post-time small text-muted">8th November 2010 22:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by {_trueparuex^}</small><br>
        You can use Nop to to somewhat control the progressbar when installing.
      </blockquote>You would think that NSIS would already know the file sizes and automatically calculate the progress jumps.<br>
      <br>
      I think Nop is the answer to "Why is a raven like a writing desk?" It's purpose is to be given purpose... nothing more.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">9th November 2010 06:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Zinthose</small><br>
        You would think that NSIS would already know the file sizes and automatically calculate the progress jumps.
      </blockquote>Filesize is no measure for installer progress: Some files don't get extracted, while others are. Some loops can take much longer than single file extractions. Not to mention the use of execwait to launch external apps...
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>