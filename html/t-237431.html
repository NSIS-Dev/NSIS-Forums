<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Dynamic SelectSection Possible?"><title>Dynamic SelectSection Possible? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Dynamic SelectSection Possible?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=237431">Dynamic SelectSection Possible?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">flyakite</span><br><span class="post-time small text-muted">7th February 2006 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Dynamic SelectSection Possible?</strong><br>I have a tool with over 200 sections, each representing a particular file that can be installed.<br><br>I would like to be able to dynamically enable sections via the command line, by calling the tool with "/file1 /file25" etc.<br><br>I use GetNextParameters and all that to read the values of each parameter on the command line and have no problem with that. The problem is then trying to call !insertmacro SelectSection. It does not work, due to the fact that I am reading the parameters and storing them as a variable, and then trying to pass that variable to SelectSection, which seems to need a define.<br><br>Is there any way I can do this, without doing 200 StrCmps and having a line of code for each SelectSection indexname?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th February 2006 18:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can use LogicLib's ${Switch} instead of 200 StrCmp, or you can create some mapping file. You can also create the switch dynmically while compiling the script. Write a little macro that'll write one line of the switch (using !system 'echo something &gt; somefile') and insert that macro for every section. You can even have that macro both define the section and update the file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">flyakite</span><br><span class="post-time small text-muted">7th February 2006 19:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well I have it partially working. I'm testing it based off of the command in the user manual:<br><br>!system 'echo !define test &gt; newinclude.nsh'<br><br>However, the file newinclude.nsh just gets overwritten with "!define test" for every section, instead of the line getting appended, and I can't figure out how to make it just keep adding to the file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th February 2006 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use two brackets (&gt;&gt;) to append. See the following page for more information:<br><br><a href="http://www.robvanderwoude.com/index.html" target="_blank">http://www.robvanderwoude.com/index.html</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">flyakite</span><br><span class="post-time small text-muted">7th February 2006 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Actually I figured it out, I'm using !appendfile.<br><br>Thanks for you help kichik, I appreciate it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th February 2006 19:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Right, that's actually better because it'll work on Linux and friends. Sorry, forgot about it.<br><br>BTW, LogicLib.nsh uses these instructions to create the code for ${Switch}. You can take a look at it for an example.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>