<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How Can I make show up UAC with ExecWait?"><title>How Can I make show up UAC with ExecWait? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How Can I make show up UAC with ExecWait?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=341912">How Can I make show up UAC with ExecWait?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">9th February 2012 09:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How Can I make show up UAC with ExecWait?</strong><br>My setup needs administrator rights to be executed.<br>In my setup I need to launch many .exe files showing the request Yes or No from UAC. Not necessarily with the request of admin username and password.<br>I saw the UAC plugin but it should be only ansi and I'm using unicode nsis.<br>I want to make sure that the UAC request if you want really execute that file for every file that needs admin rights that I execute.<br><br>mmm ok I think that's all.<br>Sorry again for my bad english :(<br>Waiting for your reply<br>Bennaloz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th February 2012 10:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If your installer is running at admin level, all child processes will also be running at admin level. If you want a yes/no popup, you can simply use the MessageBox command before you execwait.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">9th February 2012 10:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I saw it. When I say yes the first time uac won't ask me again. So Isn't it possible to make the uac asks for execution confirm of a child process?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th February 2012 11:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No, not for an admin-level child process. You are correct that it is possible if you execute them at userlevel using the UAC plugin or the ShellExecAsUser plugin.<br><br>..but seriously, why on earth would you want to bother your clients with loads of UAC popups? The whole point of UAC is that once it's elevated you don't need to worry anymore. If I let an installer get admin level, I don't want it to keep asking me whether I'm really sure I want to give it admin access...<br><br>In my opinion, your idea will only confuse the users. They don't expect new UAC popups from your installer, so they might think that some other application (virus?) is suddenly popping up and demanding admin access.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">9th February 2012 12:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>No ok..."Problem changed"</strong><br>Ok no I'm sorry misunderstood what the problem was. I'am executing the main setup with RequestExecutionLevel user and I need to exec some setups that required admin rights from it. Now those setups don't start. I have to be able to run as user some others setups with admin rights request. Nsis runAs admin plugin I don't think is what I need because for that I need to know login data and I don't know them. Anyway I didn't found any docs about it. So I need to be able to launch executable with admin rights request from a user environment.<br>How to do it?<br>I need something like<br>RequestExecutionLevel user<br>ExecWait '"myapp.exe" runAsAdmin &lt;parameters&gt;' $0 ;myapp can be executed only by admins<br><br>Sorry for the wrong thread title and for the wrong explanation of the problem but really I didn't understood what I needed<br><br>Edit: I should be able to do something as admin from a user account. (Write reg key, install files etc)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">9th February 2012 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why is your main installer "RequestExecutionLevel user"?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">9th February 2012 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Just trying if it's possible do the installation from a simple user. But it's hard. I don't understand how runAs works. And a user can't do so much. I am looking for a way to do the same things maybe without asking login data. If it's possible... or maximum asking them once.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">9th February 2012 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You already said you need to elevate child process and you should only elevate once so why not just use requestexecutionlevel admin?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">9th February 2012 16:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Aaah... I want to be able to launch installers with admin rights request from a user level installer...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th February 2012 16:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you want to install your app at userlevel, and you need to install additional apps at admin level, either create two installers or use the UAC plugin or ShellExecAsUser plugin.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">9th February 2012 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by bennaloz</small><br>Aaah... I want to be able to launch installers with admin rights request from a user level installer...</blockquote>This does not answer my question! Why does the main installer have to stay at user level?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">10th February 2012 07:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by MSG</small><br>If you want to install your app at userlevel, and you need to install additional apps at admin level, either create two installers or use the UAC plugin or ShellExecAsUser plugin.</blockquote>I already saw UAC plugin but the unicode dll miss in the zip. And ShellExecAsUser I will try it I already saw it but I think it doesn't wait and I need that wait for the end of the process. And anyway seems to miss also here the unicode plugin.<br><br>@Anders...<br>Just testing the potential of nsis at the end. Why? If I can ask you this.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bennaloz</span><br><span class="post-time small text-muted">10th February 2012 08:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Done. I found out a version of ExecShell with waiting for the end of the proc in <a href="http://nsis.sourceforge.net/StdUtils_plug-in" target="_blank">http://nsis.sourceforge.net/StdUtils_plug-in</a> that can launch installers at admin level from an installer with user level.<br>In this way having the main installer with RequestExecutionLevel user I can launch flash player prerequisite showing UAC request only for that process -.-''. I wanted to run my installer without UAC request but if I need installing prerequisites showing UAC request for their launch.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>