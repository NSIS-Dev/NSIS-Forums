<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MUI Example"><title>MUI Example - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MUI Example</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260955">MUI Example</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">3rd December 2006 02:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MUI Example</strong><br>I have never built an interface before. I want to build a screen to control an INI. The screen should have places where users can input the variable data like port numbers, IP addresses, and other preferences, and also have check marks for true/false data. It only needs to be this one window, everything else can be invisible. Is there a good stand-alone example of this anywhere?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bholliger</span><br><span class="post-time small text-muted">3rd December 2006 04:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi torpark!<br><br>There are a lot of examples. Have a look at NSIS Examples folder.<br><br>Creating a dialog can be done with Eclipse [1] or HM NIS Edit [2].<br><br>You can find out how to include and validate a dialog in the Modern UI Readme [3]. By the way, there's an excellent function to validate ip addresses. [4]<br><br>[1] <a href="http://eclipsensis.sourceforge.net/" target="_blank">http://eclipsensis.sourceforge.net/</a><br>[2] <a href="http://hmne.sourceforge.net/" target="_blank">http://hmne.sourceforge.net/</a><br>[3] <a href="http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html#customPages" target="_blank">http://nsis.sourceforge.net/Docs/Mod...ml#customPages</a><br>[4] <a href="http://nsis.sourceforge.net/Validate_IP_function" target="_blank">http://nsis.sourceforge.net/Validate_IP_function</a><br><br>Cheers<br><br>Bruno</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">3rd December 2006 04:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So I create the dialog with Eclipse, and validate and include it. What, uh, do you think I would do with an IP validator. or are you referring to the Torpark program I wrote?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bholliger</span><br><span class="post-time small text-muted">3rd December 2006 04:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Erm, you wrote that you would like to ask an ip address from users. To be sure that the ip is correct, I'd validate the input.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">3rd December 2006 06:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am collecting the IP as a string. It would be great to have the "." separators though. Okay, I wrote the UI, now I need to figure out how to install brains and functionality behind it, and get it to write the settings to a .ini file. INI File Attached.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bholliger</span><br><span class="post-time small text-muted">3rd December 2006 06:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Sample script</strong><br>Hi torpark!<br><br>I made a short sample script based on the Modern UI InstallOptions example.<br><br>It shows how to validate the IP and makes sure, that the port number is in a certain range.<br><br>You can easily extend the script to your needs.<br><br>I'd suggest changing the taborder for the controls. Keyboard users jump with tab to the next control, which should therefore follow each other in a certain order.<br><br>I usually create a define for every (used) control in the ini file. If you happen to change the order or insert a control you only have to change the defines and you don't need to change something in the code.<br><br>Hope this helps...<br><br>Have a nice day!<br><br>Cheers<br><br>Bruno<br><br>edit: You'll find more information for the logiclib in the wiki<br><a href="http://nsis.sourceforge.net/LogicLib" target="_blank">http://nsis.sourceforge.net/LogicLib</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">3rd December 2006 14:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">that IP address validator doesn't work too well. It doesn't recognize when values are over 255. I'll keep playing with it to figure out how to push and pull data into those controls.<br><br><b>edit</b> Actually, my fault, I changed a field. It works great. Now how to push and pull data...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">3rd December 2006 16:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Okay. I figured out how to pull the data, using mui_installoption_read. I imagine "write" works the same way. So now another question, How do I make some settings greyed out? For example, I want to add a check mark for "requires proxy", so that in the case that requires proxy state = 1, all the fields in group "proxy settings" become active. Else, they are inactive and not required to be checked. Ideas or examples on that? latest updates attached.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">5th December 2006 05:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">duped in other thread.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bholliger</span><br><span class="post-time small text-muted">5th December 2006 05:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=261025" target="_blank">http://forums.winamp.com/showthread....hreadid=261025</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">torpark</span><br><span class="post-time small text-muted">5th December 2006 05:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Bruno,<br><br>That worked like a charm. Just one last question. For the "Save" button, where do I put the commands it will execute? Do I have to create a new page?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bholliger</span><br><span class="post-time small text-muted">5th December 2006 05:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi torpark!<br><br>You're welcome! :-)<br><br>Put the code instead of the line<br></p><pre>
<code><br>; TODO: save values to ini file/registry...<br></code>
</pre><br>
      <br>
      This code is executed if there's no notify event.<br>
      <br>
      Cheers<br>
      <br>
      Bruno
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torpark</span><br>
      <span class="post-time small text-muted">5th December 2006 06:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Awesome. I just put it at the end of the leavepage area. Thanks very much Bruno.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">torpark</span><br>
      <span class="post-time small text-muted">5th December 2006 16:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Bruno,<br>
      <br>
      I duplicated the changestate macro. However, I am having a pretty obvious problem.<br>
      <br>
      The natural state is for the control item to be unchecked. When it is checked, it is then supposed to change the state of the controlgroup 2. Instead, on the first check, it does nothing. On unchecking it, it THEN changes the state.<br>
      <br>
      If "Disable Tor Management" is checked, all the settings in the tor box should be greyed out.<br>
      <br>
      Why is it acting like this?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bholliger</span><br>
      <span class="post-time small text-muted">5th December 2006 21:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi torpark!<br>
      <br>
      The current code just sets the state according to a control. Therefore we have to introduce some logic to change the state. Enabled -&gt; disabled, disabled -&gt; enabled.<br>
      <br></p>
      <pre>
<code><br>        ${Case} "${UIDISABLETOR}"<br>                !insertmacro MUI_INSTALLOPTIONS_READ $tmpstate2 "tcw.ini" "${UIDISABLETOR}" "State"<br>                ${If} $tmpstate2 == "1"<br>                   StrCpy $tmpstate2 "0"<br>                ${Else}<br>                   StrCpy $tmpstate2 "1"<br>                ${EndIf}<br>                !insertmacro CHANGEGROUPSTATE2 $tmpstate2<br>                Abort<br></code>
</pre><br>
      <br>
      Cheers<br>
      <br>
      Bruno
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>