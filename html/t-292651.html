<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="handling of hard and soft links" />

  <title>handling of hard and soft links - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">handling of hard and soft links</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292651">handling of hard and soft links</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">vapier</span><br />
      <span class="post-time small text-muted">3rd June 2008 01:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>handling of hard and soft links</strong><br />
      i use mingw32 to compile a large project (~150meg) and nsis to make an installer all under Linux so that i dont actually need Windows. in this regard, nsis has been a godsend. cheers to all the developers who have made this a reality. but i digress ...<br />
      <br />
      the project employs a large number of symlinks which, under Linux, work just peachy to conserve space. however, as one would imagine, those symlinks get duplicated as actual files when installed in Windows and considering many of these files are megabytes in range, this is undesirable.<br />
      <br />
      is there a method for using real links under Windows ? newer versions (like Vista) support real softlinks while older versions (like XP/2000) support hardlinks. i dont personally care about older versions of Windows, but the logic would be:<br />
      - softlinks supported ? use em, else ...<br />
      - hardlinks supported ? use em, else ...<br />
      - make duplicate files (like today)<br />
      <br />
      ive searched around (google/nsis docs/nsis forums) but cant find anyone who is doing this</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">3rd June 2008 11:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">for hardlinks, you should be able to do something like:<br />
      <br />
      system::call 'kernel32::CreateHardLink(t "file2",t "file1")i.r0'<br />
      <br />
      (win2000 and later, both files must be on the same volume IIRC(and FS must be NTFS))<br />
      <br />
      and vista softlinks: system::call 'kernel32::CreateSymbolicLink(t "file2",t "file1",i0)i.r0'<br />
      <br />
      (did not actually test this code)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
