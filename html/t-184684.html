<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Pages limited to conditions" />

  <title>Pages limited to conditions - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Pages limited to conditions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=184684">Pages limited to conditions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SupSuper</span><br />
      <span class="post-time small text-muted">27th June 2004 00:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Pages limited to conditions</strong><br />
      &nbsp; How do I make pages that only show up if certain conditions are met?<br />
      I want to make a page which allows you to select between 3 different pages (only one of them can be selected). Also, none of this page pops up if a registry entry exists.<br />
      A page structure like in the attached image.<br />
      Also, how do I make sections selectable through a InstallOptions page (using checkboxes) instead of the Components page?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">evilO</span><br />
      <span class="post-time small text-muted">28th June 2004 08:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi SupSuper :)<br />
      <br />
      1) About the conditionnal pages, you just have to use the callback functions to skip the page or not, using the instruction "abort".<br />
      <br />
      From the doc:<br />
      <br /></p>

      <blockquote>
        4.5.3 Callbacks<br />
        <br />
        Each built-in page has three callback functions. The pre-function, the show-creation function and the leave-function. The pre-function is called right before the page is created, the show-function is called right after it is created and before it is shown and the leave-function is called right after the user has pressed the next button and before the page is left.<br />
        <br />
        * The pre-function allows you to skip the page using Abort.<br />
        * The show-function allows you to tweak the page's user interface with CreateFont, SetCtlColors, SendMessage and others.<br />
        * The leave-function allows you to force the user to stay on the current page using Abort.<br />
        <br />
        A custom page only has two callback functions, one that creates it which is mandatory, and one leave-function that acts just like the leave-function for built-in pages.
      </blockquote>Your can find an example from the doc here:<br />
      <br />
      <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3</a><br />
      <br />
      <br />
      2) About the "sections selectable", could you be more precise? Why don't you want to use the built-in component page?<br />
      <br />
      <br />
      evilO/Olive
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SupSuper</span><br />
      <span class="post-time small text-muted">28th June 2004 11:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) much thanks :)<br />
      <br />
      2) i still use the components page, but i want some components (sections) only selectable through one of the custom pages (thus i made them hidden so they don't show up in the components page). so how can i enable/disable them without using that page? is there some function to do it?<br />
      this is the custom page i'm going to use to select them.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">evilO</span><br />
      <span class="post-time small text-muted">28th June 2004 13:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hum, I looked at your page, looked again on your installer structure, and well I'm not sure to really get the logic of it... :weird:<br />
      <br />
      You have some sections in the component page that are just selectable there, and you have some sections that are hidden in the component page but that are selectable later on in your custom pages...<br />
      <br />
      Am I right ?<br />
      <br />
      <br />
      Well, in that case you could use that code:<br />
      <br />
      - to select a section<br /></p>
      <pre>
<code>
Push $R0
<br />SectionGetFlags section_index $R0
<br />IntOp $R0 $R0&amp; ${SF_SELECTED}
<br />&gt;SectionSetFlags section_index $R0
<br />Pop $R0 
<br />&gt;
</code>
</pre>- to deselect a section<br />
      <pre>
<code>
Push $R0      
<br />SectionGetFlags section_index $R0
<br />IntOp $R0 $R0&amp; ${SECTION_OFF}
<br />&gt;SectionSetFlags section_index $R0    
<br />Pop $R0 
<br />&gt;
</code>
</pre>I hope that is what you asked for :D<br />
      <br />
      evilO/Olive
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SupSuper</span><br />
      <span class="post-time small text-muted">28th June 2004 14:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by evilO</i><br />
        <b>Hum, I looked at your page, looked again on your installer structure, and well I'm not sure to really get the logic of it... :weird:</b>
      </blockquote>it's pretty simple, actually. the page the components are selectable on is only displayed if the program's not installed. if the program's already installed (thus upgrading it) it doesn't make sense for the user to need to install those components. if they were all in the Components page they'd always be displayed. besides, it's more organized this way ;)<br />
      <br />

      <blockquote>
        <i>Originally posted by evilO</i><br />
        <b>You have some sections in the component page that are just selectable there, and you have some sections that are hidden in the component page but that are selectable later on in your custom pages...<br />
        <br />
        Am I right ?</b>
      </blockquote>yep<br />

      <blockquote>
        <i>Originally posted by evilO</i><br />
        <b>Well, in that case you could use that code:<br />
        <br />
        - to select a section<br /></b>
        <pre>
<b><code>
Push $R0
<br />SectionGetFlags section_index $R0
<br />IntOp $R0 $R0&amp; ${SF_SELECTED}
<br />&gt;SectionSetFlags section_index $R0
<br />Pop $R0 
<br />&gt;
</code>
</b>
</pre>- to deselect a section<br />
        <pre>
<code>
Push $R0      
<br />SectionGetFlags section_index $R0
<br />IntOp $R0 $R0&amp; ${SECTION_OFF}
<br />&gt;SectionSetFlags section_index $R0    
<br />Pop $R0 
<br />&gt;
</code>
</pre>I hope that is what you asked for :D<br />
        <br />
        evilO/Olive
      </blockquote>ummm... it doesn't work. this is what i get:<br />
      <i>2 warnings:<br />
      unknown variable/constant "{SF_SELECTED}" detected, ignoring (stdin:317)<br />
      unknown variable/constant "{SECTION_OFF}" detected, ignoring (stdin:326)</i>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">evilO</span><br />
      <span class="post-time small text-muted">28th June 2004 15:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        it's pretty simple, actually.<br />
        ...<br />
        besides, it's more organized this way
      </blockquote>Yes, once you've got the full explanation it's a lot easier ;)<br />
      <br />

      <blockquote>
        ummm... it doesn't work. this is what i get:<br />
        2 warnings:<br />
        unknown variable/constant "{SF_SELECTED}" detected, ignoring (stdin:317)<br />
        unknown variable/constant "{SECTION_OFF}" detected, ignoring (stdin:326)
      </blockquote>Oooops, I forgot to tell you to add this:<br />
      <br />
      !include Section.nsh<br />
      <br />
      Sorry about that... It should work now :)<br />
      <br />
      <br />
      evilO/Olive
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SupSuper</span><br />
      <span class="post-time small text-muted">28th June 2004 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by evilO</i><br />
        <b>Oooops, I forgot to tell you to add this:<br />
        <br />
        !include Section.nsh<br />
        <br />
        Sorry about that... It should work now :)<br />
        <br />
        <br />
        evilO/Olive</b>
      </blockquote>actually it's Sections.nsh ;)<br />
      <br />
      anyways thanks it works now :D
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">evilO</span><br />
      <span class="post-time small text-muted">28th June 2004 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oooooops again :o<br />
      <br />
      Well, sorry for the typo, for once I didn't copy/paste :p<br />
      <br />
      Anyway I'm glad it worked :)<br />
      <br />
      evilO/Olive</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>