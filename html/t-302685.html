<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Persist field values on click of back button."><title>Persist field values on click of back button. - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Persist field values on click of back button.</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302685">Persist field values on click of back button.</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">parag_NSIS</span><br><span class="post-time small text-muted">2nd February 2009 07:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Persist field values on click of back button.</strong><br>Hello,<br><br>Persist field values on click of back button:<br><br>Right now when I enters the values in the textboxes(fields) and clicks on the next button. Now when I click on the back button again that time the values I had entered on the previous page becomes blank. I mean to say the NSIS is not persisting the values for previous pages.<br><br>Can anyone please tell me how can I do it?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">2nd February 2009 08:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">store the value in a variable, then restore the value into the control when the page is loaded.<br><br>For more details... are you using InstallOptions(2/Ex) or nsDialogs?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">parag_NSIS</span><br><span class="post-time small text-muted">3rd February 2009 07:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am using InstallOptions.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">parag_NSIS</span><br><span class="post-time small text-muted">3rd February 2009 07:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">BTW, Do you have code for the above explanation? If yes can you please share it with me.<br><br><br>Thanks for the reply.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">3rd February 2009 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">okay, for InstallOptions it's pretty simple as it stores the values in the .INI file. So all you have to do is make sure you don't extract the .INI again when the page loads.<br><br>There's two easy ways you can do this..<br><br>A. Extract any custom dialog INIs in e.g. the onGUIinit callback. This will also extract INIs that you may not end up using and will slow down installer launch a slight bit.<br></p><pre>
<code><br>outfile 'customtest.exe'<br><br>!include 'LogicLib.nsh'<br>!include 'MUI.nsh'<br><br>!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br>!define MUI_CUSTOMFUNCTION_GUIINIT onGuiInit<br><br>var hwnd<br><br>Page Custom CustomPre CustomPost<br>Page Directory<br><br>!insertmacro MUI_LANGUAGE "English"<br><br><br>Function onGuiInit<br>        !insertmacro MUI_INSTALLOPTIONS_EXTRACT "textfield.ini"<br>FunctionEnd<br><br>Function CustomPre<br>        !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "textfield.ini"<br>        Pop $hwnd<br>        !insertmacro MUI_INSTALLOPTIONS_SHOW<br>FunctionEnd<br><br>Function CustomPost<br>FunctionEnd<br><br>Section<br>SectionEnd<br></code>
</pre><br>
      <br>
      B. Extract the custom dialog INIs when needed, only once. This will only extract the INIs you actually use (if you skip a custom page, its ini won't be extracted), but will make the page showing up be delayed by a fraction.<br>
      <pre>
<code><br>outfile 'customtest.exe'<br><br>!include 'LogicLib.nsh'<br>!include 'MUI.nsh'<br><br>!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br><br>var hwnd<br><br>Page Custom CustomPre CustomPost<br>Page Directory<br><br>!insertmacro MUI_LANGUAGE "English"<br><br>Function CustomPre<br>        ${Unless} ${FileExists} "$PLUGINSDIR\unwelcome.ini"<br>                !insertmacro MUI_INSTALLOPTIONS_EXTRACT "textfield.ini"<br>        ${EndUnless}<br>        !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "textfield.ini"<br>        Pop $hwnd<br>        !insertmacro MUI_INSTALLOPTIONS_SHOW<br>FunctionEnd<br><br>Function CustomPost<br>FunctionEnd<br><br>Section<br>SectionEnd<br></code>
</pre><br>
      <br>
      I hope that helps - textfield.ini is just an installoptions ini file with a single text field, for testing.
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>