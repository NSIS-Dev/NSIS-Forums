<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Change size of Description Box on components page?"><title>Change size of Description Box on components page? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Change size of Description Box on components page?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321606">Change size of Description Box on components page?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br><span class="post-time small text-muted">12th August 2010 13:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Change size of Description Box on components page?</strong><br>&nbsp; Hi,<br><br>is it possible to change the size (make it larger) of the Description Box on the components page?<br><br>I am actually using MUI_COMPONENTSPAGE_SMALLDESC without the INSTTYPE combo box. So there is some space between the MUI_COMPONENTSPAGE_TEXT_TOP and the start of the components list.<br><br>Is it possible to move the components list up and make the Description Box larger?<br>If so - how to do it?<br><br>Thanks,<br>Gunther</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">12th August 2010 14:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can always call the appropriate win32 API commands (through the system plugin). But I'm sure there's easier way to do it. Have you tried searching the forums? Modification of the components page has been discussed before.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">12th August 2010 15:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use Resource Hacker to modify the UI and save as your own then use it with the MUI_UI define.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br><span class="post-time small text-muted">13th August 2010 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MSG, Afrow UK<br><br>thanks for your replies ...!<br>Though I have read a lot in the forum here, the Wiki, the documentation etc. I do not really understand the methods you suggested - sorry.<br><br>@Afrow UK<br>For several reasons I don't want to use a method which results in additional files. So this one is out.<br><br>@MSG<br>Did I get it right that you mean something like<br></p><pre>
<code>FindWindow$0 "#32770" "" $HWNDPARENT
<br>  GetDlgItem$0 $0 1016 
<br>&gt;
</code>
</pre>If so, what are the IDs of the elements on the components page?<br>
      <br>
      I would like to re-arrange and re-size the<br>
      - label next to the components list<br>
      - components list<br>
      - description box title<br>
      - description box<br>
      <br>
      Did I miss anything?<br>
      <br>
      Thanks for further help/ explanation,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pawel</span><br>
      <span class="post-time small text-muted">13th August 2010 22:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Open \NSIS\Contrib\Modern UI 2\Pages\Components.nsh file and you will find all IDs.<br>
      <br>
      Why you dont want to use own GUI? You can just copy original GUI (\NSIS\Contrib\UIs), change its design, save as for example MyGUI.exe and include it to your project, using:<br>
      <br>
      !define MUI_UI "My_GUI_Directory\MyGUI.exe"<br>
      <br>
      -Pawel</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 12:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Pawel,<br>
      <br>
      thanks for your reply.<br></p>

      <blockquote>
        <small>Originally posted by Pawel</small><br>
        Open \NSIS\Contrib\Modern UI 2\Pages\Components.nsh file and you will find all IDs.
      </blockquote>Yes, found them ...<br>
      <br>

      <blockquote>
        Why you dont want to use own GUI?
      </blockquote>I am writing a script file which is hosted in a GIT repository. The nsi file is generated by Cmake. So everbody should be able to compile and generate the Inst file with just have the appropriate version of NSIS installed. So any additional file or needed change is not wanted as well as any platform specific addition (the related program is cross-platform).<br>
      <br>

      <blockquote>
        You can just copy original GUI (\NSIS\Contrib\UIs), change its design, save as for example MyGUI.exe and include it to your project, using:<br>
        <br>
        !define MUI_UI "My_GUI_Directory\MyGUI.exe"
      </blockquote>OK, I gave it a try using Resource Hacker.<br>
      So far so good ..., it works.<br>
      But there is the problem of the additional file ...!<br>
      <br>
      Would it be possible to do the resizing by script (ie. by using SendMessage) so that there would be no additional file?<br>
      <br>
      If not, would it be possible to copy the new GUI file from the repository to the users ${NSISDIR} by the installer before it is used/ initialized, or does it need to be already in place before the installer is run?<br>
      <br>
      Thanks,<br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">14th August 2010 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Netsurfer24</small><br>
        Would it be possible to do the resizing by script (ie. by using SendMessage) so that there would be no additional file?
      </blockquote>Yes, that is what you need the HWND variables for that you got from Components.nsh. You can call win32 commands like GetWindowRect and SetWindowPos using the system plugin.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi MSG!<br></p>

      <blockquote>
        <small>Originally posted by MSG</small><br>
        Yes, that is what you need the HWND variables for that you got from Components.nsh. You can call win32 commands like GetWindowRect and SetWindowPos using the system plugin.
      </blockquote>That is exactly what I am looking for. :up:<br>
      <br>
      I already know the IDs for the window (FindWindow) and the several controls (GetDlgItem).<br>
      <br>
      As this is completely new to me, please excuse my question, but how to use these "win32 commands"?<br>
      Is it always like "System::Call "User32::xyz"?<br>
      And can I use this site <a href="http://msdn.microsoft.com/en-us/library/ff468919%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a> as reference for the parameters needed by the different functions?<br>
      <br>
      Thanks,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">14th August 2010 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes (mostly), and yes, you can.<br>
      Let me copypaste some code from a very old installer of mine:<br></p>
      <pre>
<code>
        nxs::getWindow /NOUNLOAD<br>        Pop $1  ;(now contains the HWND of the nxs window)<br>        System::Alloc 16<br>        Pop $2<br>        System::Call "user32::GetWindowRect(i r1, i r2)"<br>        System::Call "*$2(i .r3, i .r4, i, i)"<br>        System::Free $2<br>        IntOp $4 $4 + 20<br>        System::Call 'User32::SetWindowPos(i $1, i $1, i $3, i $4, i 0, i 0, i 5)' 
</code>
</pre>What this does is simply move the nxs window down 20 pixels.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll give it a try and report back.<br>
      Thanks for now.<br>
      <br>
      Gunther</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Tried the following (in different variations) in the Show function of the Components Page:<br></p>
      <pre>
<code>
FindWindow $mui.ComponentsPage "#32770" "" $HWNDPARENT
<br>        GetDlgItem $mui</code>.ComponentsPage.Text             $mui.ComponentsPage 1006
<br>        GetDlgItem $mui.ComponentsPage.InstTypesText    $mui.ComponentsPage 1021
<br>        GetDlgItem $mui.ComponentsPage.ComponentsText   $mui.ComponentsPage 1022
<br>        GetDlgItem $mui.ComponentsPage.InstTypes        $mui.ComponentsPage 1017
<br>        GetDlgItem $mui.ComponentsPage.Components       $mui.ComponentsPage 1032
<br>        GetDlgItem $mui.ComponentsPage.DescriptionTitle $mui.ComponentsPage 1042
<br>        GetDlgItem $mui.ComponentsPage.DescriptionText  $mui.ComponentsPage 1043
<br>        GetDlgItem $mui.ComponentsPage.SpaceRequired    $mui.ComponentsPage 1023 
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.InstTypes, 1, 10, 50, 180, 50, 0)" ; 1017
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.InstTypesText, 1, 10, 30, 0, 0, 0)" ; 1021
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.SpaceRequired, 1, 20, 115, 0, 0, 0)" ; 1023
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.DescriptionTitle, 0, 198, 40, 100, 100, 0)" ; 1042
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.DescriptionText, 0, 203, 50, 90, 85, 0)" ; 1043
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.ComponentsText, 0, 0, 25, 300, 15, 0)" ; 1022
<br>        System::Call "User32::SetWindowPos($mui.ComponentsPage.Components, 0, 0, 40, 195, 100, 0)" ; 1032 
<br>&gt;

</pre>Has no effect ...!? :(<br>
      <br>
      Although it throws no error it doesn't work at all. No single little difference on the modern smalldesc components page.<br>
      <br>
      Does anybody see what's wrong?<br>
      <br>
      Is it generally possible to change the control sizes and positions (for non-custom pages) of Modern UI pages by using SetWindowPos?<br>
      <br>
      Thanks,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">14th August 2010 18:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need an 'i' for each parameter like MSG has got in his example.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Stu!<br></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br>
        You need an 'i' for each parameter like MSG has got in his example.
      </blockquote>Thanks a lot - that did the trick! :)<br>
      But there are still other problems ... :rolleyes:!<br>
      <br>
      One is that the width and height values seems not to be recognized. Although I have taken the values from Resource Hacker (where they displayed OK), the result in the installer is "wrong".<br>
      <br>
      Second problem deals with the Z index. Now ie. the InstType combo box (which needs to exist - but as I am not using it I don't want it to show up) shows up again.<br>
      <br>
      Can you tell me what I am still doing wrong and what values I have to use for the last parameter if I want a control/ window to be

      <ol style="list-style-type: decimal">
        <li>not shown/ displayed - pushed to the back - behind another control</li>

        <li>displayed on top of other controls - in front</li>
      </ol><br>
      Thanks,<br>
      <br>
      Gunther<br>
      <br>
      PS: I looked at <a href="http://msdn.microsoft.com/en-us/library/ms633545%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">14th August 2010 18:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In Resource Hacker you're using dialog units.<br>
      <a href="http://msdn.microsoft.com/en-us/library/ms645475%28VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...8VS.85%29.aspx</a><br>
      <br>
      If you don't want the InstType combo box, hide it with ShowWindow and ${SW_HIDE}.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 18:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Stu ...<br></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br>
        In Resource Hacker you're using dialog units.<br>
        <a href="http://msdn.microsoft.com/en-us/library/ms645475%28VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...8VS.85%29.aspx</a>
      </blockquote>Ah - so the System Call uses pixels instead of dialog units, right?<br>
      Sorry, but I did not understand how to "convert" my dialog unit values to the needed one. Can you help me out again, please? :)<br>
      <br>
      Or is it possible to use the MapDialogRect function?<br>
      If so, how?<br>
      <br>

      <blockquote>
        If you don't want the InstType combo box, hide it with ShowWindow and ${SW_HIDE}.
      </blockquote>Why doing it the easy way if there is also a complicated one ... :rolleyes: - you are right of course.<br>
      <br>
      Thanks,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">14th August 2010 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This shows how to use GetDialogBaseUnits() (search for that in the page):<br>
      <a href="http://msdn.microsoft.com/en-us/library/bb775794%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a><br>
      <br>
      You get a DWORD from it which you need to split in two (X and Y units) using the LOWORD and HIWORD macros respectively (you'll need to re-write those in NSIS using IntOp I'm afraid).<br>
      <br>
      For X dialog units you multiply LOWORD(dwUnits) by your X pixels value and divide the result by 4.<br>
      For Y dialog units you multiply HIWORD(dwUnits) by your Y pixels value and divide the result by 8.<br>
      <br>
      I suppose you could request that these be added as a macro function or plugin call in nsDialogs.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">14th August 2010 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Netsurfer24</small><br>
        I did not understand how to "convert" my dialog unit values to the needed one.
      </blockquote>If you first GetWindowRect, you'll have the original position in pixels. You can use that as a base.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">14th August 2010 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by MSG</small><br>
        If you first GetWindowRect, you'll have the original position in pixels. You can use that as a base.
      </blockquote>That is an option but you'll still be adding to them in pixel units. You then cannot predict how the dialog will appear for people running different DPI or fonts.<br>
      <br>
      Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 20:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Stu<br>
      <br>
      Thanks for your reply, but now it is getting a bit too complicated for me - I am afraid (it is the first time for me getting in contact with NSIS). Until now I found an answer to all my questions in the docu or here in the forum.<br>
      <br></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br>
        This shows how to use GetDialogBaseUnits() (search for that in the page):<br>
        <a href="http://msdn.microsoft.com/en-us/library/bb775794%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a>
      </blockquote>I found the section on the page but that still gave me no clue how to use this along with NSIS? :cry:<br>

      <blockquote>
        You get a DWORD from it which you need to split in two (X and Y units) using the LOWORD and HIWORD macros respectively (you'll need to re-write those in NSIS using IntOp I'm afraid).
      </blockquote>And again the same problem of not knowing how to use them.<br>
      After some searching I found out that the mentioned macros belong to the Include\Win\WinDef.nsh - correct?<br>
      <br>

      <blockquote>
        For X dialog units you multiply LOWORD(dwUnits) by your X pixels value and divide the result by 4.<br>
        For Y dialog units you multiply HIWORD(dwUnits) by your Y pixels value and divide the result by 8.
      </blockquote>I think if I could make it till here this shouldn't be a problem then. But first of all I need to come to this point ... :(<br>
      <br>

      <blockquote>
        I suppose you could request that these be added as a macro function or plugin call in nsDialogs.
      </blockquote>If I finally succeeded I will do so. ;)<br>
      <br>
      Stu, would you be so kind and post an example code line for the above, please?<br>
      I fear otherwise I get stuck at this point here - and seems to be so close to the finish line ... :)<br>
      <br>
      Thanks a lot,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">14th August 2010 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by MSG</small><br>
        If you first GetWindowRect, you'll have the original position in pixels. You can use that as a base.
      </blockquote>Please be so kind and post an example code line - that makes it a lot easier for me to understand it.<br>
      <br>
      @Stu + MSG:<br>
      If I understood it right I only once need the calculation factor depending on the users font and DPI values, right?<br>
      <br>
      So it might be an alternative to Stu's suggestion to use the GetWindowRect function and then the MapDialogRect Function (<a href="http://msdn.microsoft.com/en-us/library/ms645502%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a>)?<br>
      <br>
      But I still have not understood how to use these functions and I cannot find any hints, neither by Google nor in the forum.<br>
      <br>
      So your (further) help is very much appreciated!<br>
      <br>
      Thanks,<br>
      <br>
      Gunther
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br>
      <span class="post-time small text-muted">15th August 2010 01:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Good news! :up:<br>
      <br>
      I found a (IMHO quite simple) solution to get the X and Y Base Units.<br>
      Starting from <a href="http://support.microsoft.com/kb/145994/en-us?fr=1" target="_blank">http://support.microsoft.com/kb/145994/en-us?fr=1</a> Method 2 I now use the following code:<br></p>
      <pre>
<code>
FindWindow $hndl "#32770" "" $HWNDPARENT
<br>System</code>::Call "*(i 0, i 0, i 4, i 8) i .r1"
<br>&gt;System::Call "User32::MapDialogRect(i $hndl, i r1) i .r2"
<br>&gt;System::Call "*$1(i .r2, i.r3, i.r4, i.r5)"
<br>&gt;System::Free $1 
<br>&gt;

</pre>Then the Base Unit X factor is available in $4 and the Y one in $5 - that's it. :D<br>
      <br>
      Now I am looking for an easy way to calculate the needed pixel values from the dialog units ones? Thought of one or two macros but being not quite sure how to get the return values inserted in the User32::SetWindowPos function call?<br>
      <br>
      Any hints, tips or suggestions?<br>
      <br>
      Thanks,<br>
      Gunther
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>