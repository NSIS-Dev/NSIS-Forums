<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Automate Creation of .nsi files" />

  <title>Automate Creation of .nsi files - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Automate Creation of .nsi files</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150176">Automate Creation of .nsi files</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stonkers</span><br />
      <span class="post-time small text-muted">23rd September 2003 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Automate Creation of .nsi files</strong><br />
      I'm automating builds of our applications (.NET stuff) and looking for a tool to deploy. I've got the build automated using NAnt and staged in D:\Deploy\Application. What I need to do from there is create a .nsi file based on what's in there (D:\Deploy\Application\* recursively). I've found it very easy to create a .nsi and .exe for deployment using NSIWorkbench, but not how to create a .nsi file inside of my build file via command line. Can anyone give me a few pointers or a link to kickstart me?<br />
      <br />
      Much Thanks,<br />
      Eric</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd September 2003 18:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Since a script is a simple text file you can use a lot of programs to create it. A batch file, VB script or even a NSIS installer could do it. You can use FindFirst, FindNext and FindClose to find all the files in that directory and insert the appropriate File commands in a pre-made template. Put that in a silent "installer" and have NAnt execute it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stonkers</span><br />
      <span class="post-time small text-muted">23rd September 2003 18:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Think I figured it out</strong><br />
      Please correct me if I'm wrong. I just have to use the /r option on file. For example, if I want D:\Deploy\Application to install at $INSTDIR\ProdAppName, I would:<br />
      <br />
      SetOutPath $INSTDIR<br />
      SetCompress Auto<br />
      SetOverwrite IfNewer<br />
      file /r "D:\Deploy\Application\*.*"<br />
      <br />
      Sorry for the newbie post!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd September 2003 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, that's true. So what do you want to automate if not that?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stonkers</span><br />
      <span class="post-time small text-muted">23rd September 2003 19:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the help Kichik!<br />
      <br />
      Sounds like I don't need to automate creation of this file. In NAnt, I stage the dll's, exe's... to a specific directory for deployment. With the /r option, I can just grab all of the files there to put in an installer. So I can just use the same .nsi indefinitely. I can tell NAnt to compile it with the command line, and then stage it on the server where it will be installed.<br />
      <br />
      Is there any way to automatedly run the install remotely? Something like:<br />
      <br />
      run myInstall.exe \\Server</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd September 2003 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To run the installer on another computer you need something on that computer to run it. NSIS doesn't create a server on other machines that will run the insatller, for that you need another software. I'm afraid I don't know enough about this subject at the moment so you'll have to check MSDN, they will probably have something to say about SMS (Microsoft's software pushing application if I recall correctly).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stonkers</span><br />
      <span class="post-time small text-muted">23rd September 2003 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you very much Kichik! I've got it creating and staging the installs except monkeying with the services and such in one of them. I'm planning to use Sunjammer's plugin for this (x18servicesv0.1.zip). Do I just build this guy and throw the .dll into the plugins directory in order to use its' functionality?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd September 2003 22:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, just put it in the plugins directory. But you don't need to compile it, there is a compiled veresion in the zip iirc.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
