<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Change Colors"><title>Change Colors - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Change Colors</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197854">Change Colors</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br><span class="post-time small text-muted">30th October 2004 12:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Change Colors</strong><br>How can i change:<br>- text color<br>- background color<br>- space components color<br><br>in this window ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">30th October 2004 15:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You need to use Resource Hacker to get the dialogue id numbers (search Google).<br><br>Then use GetDlgItem, SetCtlColors etc to change the colours of those items.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">30th October 2004 21:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Isn't an archive about this?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br><span class="post-time small text-muted">30th October 2004 22:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have a problem: the DlgItem have standard color.<br><br>Why don't work ?<br><br>This is only an example<br><br></p><pre>
<code><br>Var HWND<br>Var DLGITEM<br><br>Function .oninit<br><br>FindWindow $HWND "#32770" "" $HWNDPARENT<br>; PROGRESSBAR<br>GetDlgItem $DLGITEM $HWND 1004<br>SetCtlColors $DLGITEM C4B550 3E4637<br>; INSTFILESPAGE<br>GetDlgItem $DLGITEM $HWND 1016<br>SetCtlColors $DLGITEM FFFFFF 3E4637<br><br>FunctionEnd <br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">30th October 2004 23:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Should be e.g. 0xC4B550, or 0xFFFFFF<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 08:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">tnx, but don't work :(</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 10:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, just realised you are calling it in .onInit.<br>
      .onInit is called before the dialogue is shown and thus the dialogue does not exist yet. You need to use your code in .onGUIInit or a Section (for InstFiles page) instead.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 10:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i can't use .onGUIInt because with MUI i have this error message <i>Error: Function named ".onGUIInit" already exists.<br></i><br>
      <br>
      I use this but don't work :(<br>
      <br>
      why ?<br>
      <br>
      !define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br>
      <br>
      Function myGuiInit<br>
      <br>
      FindWindow $HWND "#32770" "" $HWNDPARENT<br>
      ; PROGRESSBAR<br>
      GetDlgItem $DLGITEM $HWND 1004<br>
      SetCtlColors $DLGITEM 0xC4B550 0x3E4637<br>
      ; INSTFILESPAGE<br>
      GetDlgItem $DLGITEM $HWND 1016<br>
      SetCtlColors $DLGITEM 0xFFFFFF 0x3E4637<br>
      <br>
      FunctionEnd</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 11:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I guess Modern UI already uses .onGUIInit for it's own purposes.<br>
      <br>
      Use this instead (from MUI readme)<br>
      <br></p>
      <pre>
<code>!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br><br>Function myGUIInit<br>  ...your own code...<br>FunctionEnd</code>
</pre><br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 12:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i use already this, but don't work :(</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">31st October 2004 13:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Dude:<br>
      <br>
      Try that function not in .onInit.<br>
      <br>
      Try it on a show function in your Page.<br>
      <br>
      <a href="http://nsis.sourceforge.net/archive/viewpage.php?pageid=154" target="_blank">Url</a></p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 14:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">For your code, as you are trying to change colours on the InstFiles page, stick the code in a Section (like I said earlier), or in the page show function (like Lobo stated).<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry, but i don't understand<br>
      <br>
      this is full script<br>
      <br>
      where is my error ?<br>
      <br></p>
      <pre>
<code><br>;--------------------------------<br>;Include Modern UI<br><br>  !include "MUI.nsh"<br>  !include "Sections.nsh"<br><br>;--------------------------------<br>;General<br><br>  ;Name and file<br>  Name "GCF Backup v0.1"<br>  OutFile "GCFBackup.exe"<br>  <br>  ShowInstDetails show<br><br>  ;Get installation folder from registry if available<br>  InstallDirRegKey HKLM "Software\Valve\Steam" "InstallPath"<br>  <br>  SetCompressor lzma<br>  <br>  Var HWND<br>  Var DLGITEM<br>  <br>;--------------------------------<br>;Interface Settings<br><br>  !define MUI_ABORTWARNING<br>  !define MUI_COMPONENTSPAGE_NODESC<br>  !define MUI_LICENSEPAGE_BGCOLOR "3E4637"<br>  ;!define MUI_INSTFILESPAGE_COLORS "C4B550 3E4637"<br>  ;!define MUI_INSTFILESPAGE_PROGRESSBAR "colored"<br>  ;C4B550 giallo<br>  ;4C5844 verde chiaro<br>  !define MUI_COMPONENTSPAGE_CHECKBITMAP "bmp\check.bmp"<br>  !define MUI_BGCOLOR "3E4637"<br>  !define MUI_ICON "bmp\Icon.ico"<br>  !define MUI_WELCOMEFINISHPAGE_BITMAP "bmp\welcome.bmp"<br>  ;!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br>  !define MUI_CUSTOMFUNCTION_COMPONENTS_SHOW "CompColor"<br>  <br>;--------------------------------<br>;Pages<br><br>  !insertmacro MUI_PAGE_WELCOME<br>  !insertmacro MUI_PAGE_LICENSE "License\License.rtf"<br>  Page components "CompColor"<br>  ;!insertmacro MUI_PAGE_COMPONENTS<br>  ;!insertmacro MUI_PAGE_DIRECTORY<br>  !insertmacro MUI_PAGE_INSTFILES<br>  <br>;--------------------------------<br>;Languages<br> <br>  !insertmacro MUI_LANGUAGE "English"<br>  <br>;--------------------------------<br>;Installer Sections<br><br>Section "GCF Vari" SecVari<br>ReadINIStr $R1 "$EXEDIR\CFG\config.ini" "GCF" "GCF Vari"<br>nsExec::ExecToLog '"$EXEDIR\7Z\7za.exe" x "$EXEDIR\7Z\$R1.7z" -aoa -y "-o$INSTDIR\SteamApps\"'<br>SectionEnd<br>...<br>...<br><br>Function CompColor<br>;--------------------------------<br>; Colors<br>  <br>FindWindow $HWND "#32770" "" $HWNDPARENT<br>; PROGRESSBAR<br>GetDlgItem $DLGITEM $HWND 1022<br>SetCtlColors $DLGITEM 0x00C4B550 0x003E4637<br>; INSTFILESPAGE<br>GetDlgItem $DLGITEM $HWND 1032<br>SetCtlColors $DLGITEM 0x00FFFFFF 0x003E4637 <br><br>FunctionEnd<br><br>Function .onInit<br>;--------------------------------<br>; Splash Screen<br><br>SetOutPath $TEMP<br>File /oname=spltmp.bmp "bmp\splash.bmp"<br>File /oname=spltmp.wav "snd\hev_logon.wav"<br><br>  splash::show 5500 $TEMP\spltmp<br><br>  Pop $0 <br><br>Delete $TEMP\spltmp.bmp<br>Delete $TEMP\spltmp.wav<br><br>;--------------------------------<br>; Find Process: Steam<br><br>FindProcDLL::FindProc "steam.exe"<br>Pop $R0<br>StrCmp $R0 "605" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Code $R0: Unable to search for process" \<br>  IDABORT<br>  Quit<br>StrCmp $R0 "606" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Code $R0: Unable to identify system type" \<br>  IDABORT<br>  Quit<br>StrCmp $R0 "607" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Code $R0: Unsupported OS" \<br>  IDABORT<br>  Quit<br>StrCmp $R0 "632" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Code $R0: Process name is invalid" \<br>  IDABORT<br>  Quit<br>StrCmp $R0 "1" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Code $R0: 'Steam.exe' process was found, close it" \<br>  IDABORT<br>  Quit<br>  <br>;--------------------------------<br>; Error Check<br><br>StrCmp $INSTDIR "" 0 +3<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Steam not installed, install it before launch GCF Backup" \<br>  IDABORT<br>  Quit<br>IfFileExists "$EXEDIR\CFG\config.ini" +3 0<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Error: 'config.ini' not found" \<br>  IDABORT<br>  Quit<br>IfFileExists "$EXEDIR\7Z\7za.exe" +3 0<br>  MessageBox MB_OK|MB_ICONSTOP \<br>  "Error: '7za.exe' not found" \<br>  IDABORT<br>  Quit<br>  <br>;--------------------------------<br>; Components Check<br><br>ReadINIStr $R1 "$EXEDIR\CFG\config.ini" "GCF" "GCF Vari"<br>IfFileExists "$EXEDIR\7Z\$R1.7z" +7<br>  !insertmacro UnSelectSection "${SecVari}"<br>  SectionSetText ${SecVari} ""<br><br>...<br>...<br>  <br>FunctionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 18:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Shouldn't it be<br>
      !define MUI_CUSTOMFUNCTION_INSTFILES_SHOW "CompColor"<br>
      ?<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 18:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes yes, but in the script i have tested components window<br>
      <br>
      however, don't work</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 19:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">it's very impossible :(<br>
      <br>
      i have tried with every way</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 19:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">From MUI readme:<br></p>

      <blockquote>
        These defines should be set before inserting a page macro.<br>
        <br>
        MUI_PAGE_CUSTOMFUNCTION_PRE function<br>
        MUI_PAGE_CUSTOMFUNCTION_SHOW function<br>
        MUI_PAGE_CUSTOMFUNCTION_LEAVE function
      </blockquote>-Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">31st October 2004 19:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">can you edit my script for example ?<br>
      <br>
      sorry and tnx for all</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">31st October 2004 21:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here you are.<br>
      (Please attach scripts in future)<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RoMZERO</span><br>
      <span class="post-time small text-muted">1st November 2004 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">work fine :)<br>
      <br>
      tnx for all, you are very kind :)<br>
      <br>
      last question: how can i edit the script for change color of the gray space ? (look the image)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">1st November 2004 12:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>FindWindow $0 "#32770" "" $HWNDPARENT</code>
</pre><br>
      <br>
      Where $0 is the dialog handle to paint.
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>