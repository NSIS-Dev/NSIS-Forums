<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Not all files being included/.extracted"><title>Not all files being included/.extracted - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Not all files being included/.extracted</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=218543">Not all files being included/.extracted</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">deathwish2</span><br><span class="post-time small text-muted">10th June 2005 15:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Not all files being included/.extracted</strong><br>Greetings,<br><br>In my script I use the "File" command 8 times and during compilation it indicates that it has included them and displays the compression values. When I run the program, although it says that they have been extracted only 6 actually get extracted. I can't figure out why this would be. Any ideas?<br><br>Thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th June 2005 15:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, attach your script :p<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deathwish2</span><br><span class="post-time small text-muted">10th June 2005 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have a little more info, since I was testing more...<br>(BTW v2.06)<br><br>If one does the following:<br><br>;Download area for most up to date files<br>StrCpy $DOWNLOAD_URL "http://some_url/"<br><br>;Most up to date file at compilation<br>File "test.txt"<br><br>;Download the newest version if possible (i.e. net available)<br>StrCpy $DOWNLOAD_FILENAME "test.txt"<br>NSISdl::download_quiet $DOWNLOAD_URL$DOWNLOAD_FILENAME $TEMP\$DOWNLOAD_FILENAME<br>Pop $R0<br>StrCmp $R0 "success" +2 +1<br>Detail Print "Download of test.txt failed - using local copy."<br>.<br>.<br>.<br><br>When the network isn't available (which is likely for the intentions of this app) what happens is that the "download" directive seems to delete the file test.txt in the destination directory. So falling back to the "local" copy fails unless I do:<br><br>StrCmp $R0 "success" +3 +1<br>Detail Print "Download of test.txt failed - using local copy."<br>File "test.txt"<br>.<br>.<br>.<br><br>Which to me is just an UGLY hack.<br><br>Any suggestions on cleaner code?<br><br>Thx.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th June 2005 16:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Don't use variables for strings if they aren't going to change dynamically. This wastes memory very much!<br><br></p><pre>
<code><br>!define DownloadURL  "http://some_url/"<br>!define DownloadFile "test.txt"<br><br>NSISdl::download_quiet "${DownloadURL}${DownloadFile}" "$TEMP\${DownloadFile}" <br>Pop $R0<br>StrCmp $R0 "success" noDownloadFile<br><br> DetailPrint "Download of test.txt failed - using local copy."<br> SetOutPath $TEMP<br> File "test.txt"<br><br>noDownloadFile:<br></code>
</pre><br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deathwish2</span><br>
      <span class="post-time small text-muted">10th June 2005 17:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx,<br>
      <br>
      I'm going to have to change quite a bit of my code (I only gave an example snippet). Nonetheless... I see where I have to go. Also thanks for the info on the variables/memory... but they will be changing through the script so...:up:</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>