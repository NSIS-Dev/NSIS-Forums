<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Why doesn't &quot;button_text&quot; work anymore in 2.0?" />

  <title>Why doesn't "button_text" work anymore in 2.0? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Why doesn't "button_text" work anymore in 2.0?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=113178">Why doesn't "button_text" work anymore in 2.0?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 09:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Why doesn't "button_text" work anymore in 2.0?</strong><br />
      I've just switched from 1.98 to 2.0b because of the <a href="http://forums.winamp.com/showthread.php?threadid=112824" target="_blank">1.98 bug</a> when <a href="http://forums.winamp.com/showthread.php?threadid=112921" target="_blank">creating shortcuts on a Win98 system</a>. My trepidation about using a pre-release version was overcome by reassurances here that it's pretty stable by now. Well, I just recompiled my script and discovered that the following line no longer works as before:<br />
      <br />
      LicenseText "blah blah ..." Proceed<br />
      <br />
      The documentation hasn't changed, which means that the right-button SHOULD read "Proceed". It does in a 1.98 compile. Now, it's blank !!! Did someone forget to change the documentation, or is it a bug in 2.0?<br />
      <br />
      From <a href="http://forums.winamp.com/showthread.php?threadid=112745" target="_blank">here</a>, it looks like someone else has had the same trouble, but the answers there are too obscure to be any help.<br />
      <br />
      I THINK the answers there (where there is mention of editing language files) are advising how to change the DEFAULT button text. I don't want to CHANGE the default text, I just want to be able to OVERRIDE the default from my script in some cases.<br />
      <br />
      I am using three exe's (Setup, Setup2 and Setup3) that chain from 1 to 2 to 3 in sequence, provided the user doesn't click "cancel" at the licence pages. Setup (which exec's Setup2 just before terminating) does nothing more than display some preliminary information and allow the user to cancel if necessary. But the text is too much for an OKCANCEL text box, so I display it in the scrollable licence page instead. There, I want the buttons to read "Cancel" and "Proceed". If the user Proceeds, Setup2 does some preliminary installation and then exec's Setup3 which completes the job. Setup2 displays my real licence. There, I want the default button text.<br />
      <br />
      (I know there are probably other alternatives to this chaining but, hey, it works, and because all three installers look the same and appear in the same screen position, the chaining is unnoticeable unless you're really looking out for it.)<br />
      <br />
      Can the default button text still be overriden in 2.0 as the documentation indicates?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th November 2002 11:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That other topic is about the Modern UI.<br />
      <br />
      This line:<br /></p>
      <pre>
<code><br />LicenseText "some text" "blabla"<br /></code>
</pre><br />
      <br />
      works fine for me, button text = blabla (latest CVS version).
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 14:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>No go</strong><br />
      Makes no difference whether button_text is quoted or not (which is what I would expect, since it's a single word). Either way the right button is blank. It used to say "Proceed".<br />
      <br />
      Relevant(?) facts:<br />
      * I'm using Windows 98 SE<br />
      (Could it be another Win98 bug, there are still plenty of Win98 users around you know);)<br />
      * I'm using the CVS zip of Nov 6 2002 (I assume that's recent enough).<br />
      <br />
      I even tried a system "rollback":<br />
      - reboot, uninstalled 2.0, uninstalled 1.98, reboot, did a clean install of 2.0, reboot, recompile: Same results.<br />
      <br />
      BTW, there are no installation instructions, so I hope I did right:<br />
      * I unzipped nsis.zip to ...\NSIS\NSIS20b<br />
      * Ran !installNSIS.bat<br />
      * In the installer, I selected the same directory as above ( ...\NSIS\NSIS20b) as the install destination.<br />
      <br />
      Since my source for Setup.nsi is so small, I'm appending it here. Maybe some eagle-eyed debugger can spot something wrong?<br /></p>
      <pre>
<code><br />;------------------------<br /># Global Pseudo-Constants<br />;------------------------<br />  !Define ProductName  "SKK"<br />  !Define Installer    "SKKsetup"<br /><br />;-----------------------<br /># [Installer Attributes]<br />;-----------------------<br /><br />  Name "${ProductName}"<br />  OutFile "..\..\${Installer}.exe"<br />  BGGradient 000000 0000ff ffffff<br />  AutoCloseWindow true<br />  Caption ""<br />  SubCaption 0 ": WARNING:"<br /><br /><br />;----------------------------------------------------------------<br /># [License Page]  We use this to display the introductory warning<br />;----------------------------------------------------------------<br />  LicenseText "IMPORTANT:  PLEASE READ THIS BEFORE PROCEEDING." "Proceed"<br />  LicenseData "..\Texts\Warning.txt"<br />  SubCaption 0 ": WARNING:"<br />;--------------------------<br /><br />  SubCaption 3 "Preparing to Install"<br /><br />Section "" <br />;----------<br />  ClearErrors<br />   Exec $EXEDIR\Setup\${Installer}2.exe<br />  IfErrors Error OK<br />Error:<br />  SetDetailsView show<br />  SetDetailsPrint ListOnly<br />  SetAutoClose false<br />  DetailPrint "ERROR: Could not run above file."<br />  SetDetailsPrint none ; suppresses printing of line "Completed"<br />  Goto End<br />OK:<br />  HideWindow   ; Not really necessary, but just to be safe<br />End:<br />SectionEnd<br /></code>
</pre><br />
      <br />
      What's annoying me is that I didn't save my old (1.98) compile.<br />
      Now to get back a working version, I'm going to have to uninstall 2.0, reinstall 1.98, recompile, then (if I decide to still keep trying it out) reinstall 2.0 again. I'm assuming that installing 2.0 with 1.98 still present would be okay, but not the reverse, since the registry entries would then point to 1.98. [sigh ...]
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">7th November 2002 14:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Since Nullsoft introduced the language support in the scripts, there might be a bug in NSIS. I haven't and can't check right now, because I don't have a NSIS compiler here, but I thing that maybe the following could help:<br /></p>
      <pre>
<code><br />;------------------------<br /># Global Pseudo-Constants<br />;------------------------<br />  !Define ProductName  "SKK"<br />  !Define Installer    "SKKsetup"<br /><br />;-----------------------<br /># [Installer Attributes]<br />;-----------------------<br /><br />  Name "${ProductName}"<br />  OutFile "..\..\${Installer}.exe"<br />  BGGradient 000000 0000ff ffffff<br />  AutoCloseWindow true<br />  LoadLanguageFile "${NSISDIR}\Contrib\Language files\English.nlf"<br />  SubCaption /LANG=${LANG_ENGLISH} 0 ": WARNING:"<br /><br />;----------------------------------------------------------------<br /># [License Page]  We use this to display the introductory warning<br />;----------------------------------------------------------------<br />  LicenseText /LANG=${LANG_ENGLISH} "IMPORTANT:  PLEASE READ THIS BEFORE PROCEEDING." "Proceed"<br />  LicenseData /LANG=${LANG_ENGLISH} "..\Texts\Warning.txt"<br />  SubCaption /LANG=${LANG_ENGLISH} 0 ": WARNING:"<br />;--------------------------<br /><br />  SubCaption /LANG=${LANG_ENGLISH} 3 "Preparing to Install"<br /><br />Section "" <br />;----------<br />  ClearErrors<br />   Exec $EXEDIR\Setup\${Installer}2.exe<br />  IfErrors Error OK<br />Error:<br />  SetDetailsView show<br />  SetDetailsPrint ListOnly<br />  SetAutoClose false<br />  DetailPrint "ERROR: Could not run above file."<br />  SetDetailsPrint none ; suppresses printing of line "Completed"<br />  Goto End<br />OK:<br />  HideWindow   ; Not really necessary, but just to be safe<br />End:<br />SectionEnd<br /></code>
</pre><br />
      <br />
      I might be wrong about some instructions, but I hadn't the time to go through all documentation.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 14:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Bring back the carriage-returns</strong><br />
      Another gripe about 2.0.<br />
      <br />
      All the new text files are no longer readable in Notepad! (I'm using the stock standard Notepad that came with Windows 98 SE.)<br />
      <br />
      This is because the lines are terminated with just Line feeds (ASCII 10) and not a CR-LF pair (ASCII 13, ASCII 10) as God intended!<br />
      <br />
      I have to go back to my old beloved DOS editor (QEdit) to read them, and, if I want them to be readable in Notepad, I have to resave them in QEdit, so it will put back the carriage returns.<br />
      <br />
      Why have you taken them out???</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">7th November 2002 14:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can also read the files with Wordpad or Write.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th November 2002 15:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Found the bug. I will upload a fix in a couple of minutes.<br />
      Which files don't have \r\n? Please be more specific.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th November 2002 15:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fixed the bug concerning you. More fixes to come. You will have to recompile NSIS (with VC) for this fix to work.<br />
      Thanks for the heads up.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 15:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CR/LF and Bug Fix</strong><br />
      Thanks Kitchik!<br />
      <br />
      I don't have VC. Can I just wait for the next nightly CVS upload?<br />
      (Have to go to bed now anyway -- it's 3.00am over here and I'm falling asleep at the keyboard!)<br />
      <br />
      Re the "missing" CRs.<br />
      all the language .nlf files,<br />
      all the example .nsi files,<br />
      all the files in Modern UI<br />
      <br />
      Maybe others too -- haven't checked them all out yet.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th November 2002 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The nightly snapshot doesn't compile the EXE, it just takes it from the CVS. I have recompiled NSIS and uploaded it so you can use the latest version from the CVS.<br />
      <br />
      The CRs are missing because the scripts create the ZIP file on Linux. I thought it was fixed already, but I guess it wasn't... Back to the drawing board :D<br />
      <br />
      If you will download all of the files from the CVS using a Windows CVS client the line breaks should be fine. There is an entry about using CVS client to download NSIS in the FAQ.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 16:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CR/LF again</strong><br />
      BTW, I just remembered seeing this on the CVS site earlier today, on<br />
      <a href="http://sourceforge.net/forum/forum.php?forum_id=212668" target="_blank">this page</a> (under the update by joostverburg)<br />
      <br />
      "The CVS snapshot files are automatically converted to use Windows line breaks now."<br />
      <br />
      Does this have anything to do with it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mottel</span><br />
      <span class="post-time small text-muted">7th November 2002 17:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        <b>The nightly snapshot doesn't compile the EXE, it just takes it from the CVS. I have recompiled NSIS and uploaded it so you can use the latest version from the CVS.<br /></b>
      </blockquote>I don't understand. Do you mean to say that, in general, when bug fixes are made to the development version, they are not reflected in the subsequent uploads? If so, what's the point of the nightly snapshot? And, in that case, how often, as a general rule, do you actually upload a recompiled version to the CVS site. If these sound like stupid questions, I'm sorry, it's because I don't really understand how CVS works in general.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th November 2002 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: CR/LF again</strong><br /></p>

      <blockquote>
        <i>Originally posted by Mottel</i><br />
        <b>BTW, I just remembered seeing this on the CVS site earlier today, on<br />
        <a href="http://sourceforge.net/forum/forum.php?forum_id=212668" target="_blank">this page</a> (under the update by joostverburg)<br />
        <br />
        "The CVS snapshot files are automatically converted to use Windows line breaks now."<br />
        <br />
        Does this have anything to do with it?</b>
      </blockquote>It should convert the line breaks to \r\n (the Windows standard), but I guess that there is a bug somewhere :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">7th November 2002 18:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Mottel</i><br />
        <b><br />
        I don't understand. Do you mean to say that, in general, when bug fixes are made to the development version, they are not reflected in the subsequent uploads? If so, what's the point of the nightly snapshot? And, in that case, how often, as a general rule, do you actually upload a recompiled version to the CVS site. If these sound like stupid questions, I'm sorry, it's because I don't really understand how CVS works in general.</b>
      </blockquote>The snapshot contains all the latest source files. You can compile 'em yourself, but we also update the compiled file (makensis.exe) when we made important changes.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
