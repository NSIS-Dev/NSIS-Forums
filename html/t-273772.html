<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Create Install over then 2 gb"><title>Create Install over then 2 gb - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Create Install over then 2 gb</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273772">Create Install over then 2 gb</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">MaxDELETE</span><br><span class="post-time small text-muted">2nd July 2007 20:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Create Install over then 2 gb</strong><br>Hi!<br>How can create install, size &gt; 2 GB????</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 00:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">From what I gather it is in there for legacy reasons for Win9x compatability. But it is 2007 now and I am not all that bothered about Win9x users.<br><br>Is this just a limit you have set in the NSIS source?<br><br>What would be the implications of removing it? Just effect Win9x users? If so I might hack the source myself. I think having installers over 2 GB (surely all modern games are way over 2GB) is more useful than WIn9x support.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">3rd July 2007 01:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hey..my little cous. has Win95 for learning propurses... :)<br>I use his OS as test machine :p<br><br>Yep, there are a few Win 9x out there.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 01:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I understand that there are some Win9x out there however surely it is best for flexability of the person writing the installer to choose rather than have limits specifically set in NSIS.<br><br>I am doing an installer for a game and I can see the 2GB limit going over and frankly Win9x users we do not care about as they will have old hardware anyway. It is unlikely that a Win9x user will be suitable for installers that are over 2GB in size.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd July 2007 05:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The limit isn't there for Windows 9x users. It's just there, waiting to be removed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrDan</span><br><span class="post-time small text-muted">3rd July 2007 11:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Question</strong><br>Can you not have a small installer executable and use .cab files for the hundreds of gigabytes you wish to install? I'm sure I read somewhere that NSIS works with .cab files...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">n0On3</span><br><span class="post-time small text-muted">3rd July 2007 12:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?threadid=241036" target="_blank">Here</a>'s a topic on how to use external programs to install more than 2GB.<br><br>I would also like that 2GB limit to be removed. I am another user trying to make installers over that limit. The best idea I had is to have the installer span over different files, like a typical compressing program. This way we could even have Windows <a href="http://forums.winamp.com/showthread.php?threadid=272289" target="_blank">show</a> the icon and version tab on properties.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 17:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>The limit isn't there for Windows 9x users. It's just there, waiting to be removed.</b></blockquote>Well that told me. :)<br><br>I suppose that is what you get for searching the forums for the answer and re-quoting them from NSIS mods ;)<br><br><a href="http://forums.winamp.com/showthread.php?postid=1611153#post1611153" target="_blank">http://forums.winamp.com/showthread....53#post1611153</a><br><br>;)<br><br>Anyway I think there are file size limits. Hunted around the web &amp; found this:<br><br>Win32<br>FAT16 for Win9x/ME, max file size = 2GB - 1byte<br>FAT16 for WinNT/2000, max file size = 4GB - 1byte<br>FAT32 for Win9x/ME/2000, max file size = 4GB - 1byte<br>NTFS for WinNT/2000/XP/2003, max file size = 16,384GB - 1byte<br><br>So could apply to some Win9x users using FAT16!</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 18:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Been looking for the 2GB limit in the source but nothing yet.<br><br>Any pointers?<br><br>BTW from the (old) release notes<br><br>v1.1n (3/11/01)<br>* Made add_data_compress and GetCompressedDataFromDataBlock use a slightly more efficient form (1 byte per block is saved, maximum file size is now 2gb instead of 4gb)<br><br>Is that related?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">n0On3</span><br><span class="post-time small text-muted">3rd July 2007 19:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">oh, how sad. in 2001 it was decided to reduce by half the maximum size :(<br><br>(4GB would be enough for my installation needs)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd July 2007 19:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The limitation comes from usage of 32-bit integers. 2^32 is 4gb, 2^31 is 2gb. The limit is all over the source. Search for `int` and you'll "find" it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks LOL nice and easy then.<br><br>"It's just there, waiting to be removed."<br><br>That sounds funny now! :)<br><br>If that wasn't enough there are 3295 occurrences of 'int'! ;)<br><br>So when it goes above this size it is just basically a integer overflow and it crashes out.<br><br>Seriously it must only be 1 (or a few) occurrences of int that represent the total file size.<br><br>I am thinking a check for very increment in total file size to see if the total is say over 1GB (checking if it is over 1GB will not work as it will be the overflow) Then minus 1,048,576 (1GB) from the total file size and increase a new GB filesize counter by 1.<br><br>So there will be integers for the over filesize.<br><br>filesize_mod â€“ the modulus reminder of actually total size in bytes by 1,048,576 (1GB)<br>filesize_whole â€“ the whole number integers of the amount of GB's (1,048,576 bytes)<br><br>Total size = (filesize_whole* 1,048,576) + filesize_mod<br><br>thoughts?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd July 2007 20:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Doing that you've just reimplemented __int64 with the downside of not supporting single files over 2gb.<br><br>That, however, won't be enough. Everything that references files or data in the installer must also be converted so it can point that far. Every point to everything else might also need updating unless you set a limit on the header size as well.<br><br>It also brings the question of backward compatibility. Nothing that reads installers will work. Not so much "our problem", but still something to consider.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rovastar</span><br><span class="post-time small text-muted">3rd July 2007 21:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ummh yeah there are a few things to consider.<br><br>How standard is _int64? I don't know too much about the ultra long integer types as I have never had a reason to ever use them.<br><br>(Do all compliers support this? (I suppose it will be only for you to compile it so it won't to too much of a problem))<br><br>Hence why I my solution tried to avoid them (and I always think of the hardest way to do thing *sigh* ;) ).<br><br>Ummh I know what you mean that every file that references the total-size (or whatever it is called ATM) integer. But surely there will not be that many? How many times is it called upon?<br><br>I would presume this counter (is it more than a counter?) only used when you add a new file to the installer in the compile stage. If that is the case it can only occur in a couple of lines.<br><br>True the backwards compatibility is a problem and it will break things the GUI readers like Venis, that I use. Or would it? I don't know enough about what they do I suppose they read it when the compile by NSIS is complete. Now it would be 2 variables.<br><br>(filesize_whole* 1,048,576) "." (filesize_mod/1,048,576) GB total size<br><br>Ummh more thought required in the backwards compatibility stakes but like you say not so much "our problem".<br><br>The limit is something that will become more problematic in the future as more people expect to be able to do it. So I imagine it would have to be addressed at some point as more people want 2GB installers.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MaxDELETE</span><br><span class="post-time small text-muted">4th July 2007 07:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Can developers all the same will make refusal from Windows 9x - let users 9x use old versions NSIS.<br>I am make installs of computer games and the limit in 2 Ð“Ð± simply kills me!<br>Or start up developers will make the version without restrictions on installation volume</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">4th July 2007 18:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MaxDELETE, I already said it has nothing to do with Windows 9x.<br><br>Rovastar, with GCC you have to use <i>long long</i> but it's essentially the same. That can be solved with a simple #ifdef.<br><br>The problem is not only with code handling the total file size, but also with code that references anything that has to do with an offset into the installer data which can suddenly grow over the 32-bit limit. The display and the counter is the least of our worries in this case.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MaxDELETE</span><br><span class="post-time small text-muted">5th July 2007 11:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Whether it is possible to expect, what NSIS can create archives more than 2 GB? If is not present, it is necessary to search for another installer :(.<br>Though they are (Createinstall for example), but their possibilities do not suit me :(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mr Inches</span><br><span class="post-time small text-muted">6th July 2007 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why don't you use the CABSetup plug-in?<br><br>That way you can enjoy the power and flexibility of NSIS, but still install more than 2GB with your installer.<br><br>Note that even Microsoft's MSI based installers are hard-pressed to exceed 4GB - they use the same tool as CABSetup does to create to disk sets in the Media table). I don't think I have seen a MSI &gt; 2 GB although it *is* possible.<br><br>Even most game installs (where multi-gigabyte installs are common), usually use a product like InstallShield or Windows Installer that store the actual data in "cabinets" outside of the installer the user runs.<br><br>Duncan</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>