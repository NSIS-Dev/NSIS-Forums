<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="rmdir doesn´t work correctly!?"><title>rmdir doesn´t work correctly!? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">rmdir doesn´t work correctly!?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=160382">rmdir doesn´t work correctly!?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Speed78</span><br><span class="post-time small text-muted">17th December 2003 21:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>rmdir doesn´t work correctly!?</strong><br>Hi,<br><br>my uninstall section looks like this...<br><br>------<br>; Delete Files and Directories<br>Delete /REBOOTOK "$INSTDIR\Daten\*.*"<br>Delete /REBOOTOK "$INSTDIR\*.*"<br>RMDir /REBOOTOK "$INSTDIR\Daten"<br>RMDir /REBOOTOK "$INSTDIR"<br>------<br><br>In $INSTDIR there is a file that cannot be deleted, because the file is in use. After a reboot the file is deleted but the directory still exists. This only happens on Win9x and WinME machines. On Win2000 and WinXP it works correctly.<br><br>Any Ideas??<br><br>Best regards<br><br>Speed78</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">17th December 2003 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Which version of NSIS are you using?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Speed78</span><br><span class="post-time small text-muted">18th December 2003 18:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>i use the latest 2.04b version.<br><br>Best regards<br><br>Speed78</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">18th December 2003 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hmm... It seems wininit.ini, which is what NSIS uses to delete folders on Windows 9x with /REBOOTOK, can't delete folders. I'll update docs and try to find some solution in the next version.<br><br>For now, you can create another small installer or even a batch file which will delete the folder and set it to run in HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">s793016</span><br><span class="post-time small text-muted">19th December 2003 06:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">... why can not I delete my own post?<br><br>Sorry, I post something wrong inside this thread, and I could not delete it by myself.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">s793016</span><br><span class="post-time small text-muted">27th December 2003 10:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, my English is very poor.<br><br>I found that Wininit.ini in Win9x Do delete folders.<br><br>Just use "DIRNUL=" to do that.<br><br>And this will delete all things inside that folder.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">27th December 2003 17:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is there any documentation from Microsoft on that feature? All I have been able to find is some "trick lists" that mention this. I tested it on Windows ME and it did work, but nothing says it works on Windows 95 and Windows 98. Furthermore, it recursively deletes all files in the folder unlike MoveFileEx which only removes empty folders as RMDir is supposed to do without the /r switch.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">s793016</span><br><span class="post-time small text-muted">28th December 2003 06:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, my English is very poor.<br><br>I known that because I use HexEditor (ex: UltraEdit ... etc.) to find those ASCII String inside Wininit.exe by handywork.<br><br>I found wininit.exe at both Win98SE &amp; WinME do content that ASCII String, and tested OK.<br><br>Maybe someone could provide a Win95 version Wininit.exe to search that Ascii String?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">1st January 2004 17:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Your English is OK, no need to apologize.<br><br>I think we'll have to find a better solution because of the above reasons.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>