<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="HEADER IMAGE sizes" />

  <title>HEADER IMAGE sizes - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">HEADER IMAGE sizes</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=207390">HEADER IMAGE sizes</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">10th February 2005 02:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>HEADER IMAGE sizes</strong><br />
      &nbsp; Hi!<br />
      <br />
      I have two MUI header images. One for the installer and one for the uninstaller:<br />
      <br />
      <font color="green">!define</font> MUI_HEADERIMAGE_BITMAP <font color="teal">"tigph.bmp"</font><br />
      <font color="green">!define</font> MUI_HEADERIMAGE_UNBITMAP <font color="teal">"pirate.bmp"</font><br />
      <br />
      So far so good.<br />
      <br />
      Now I want to increase the size of the bitmaps.<br />
      <br />
      I edit <font color="darkred">modern_headerbmp.exe</font> (with Resource Hacker) to implement bigger bitmaps, compile and then save as <font color="darkred">modern_headerbmp_2.exe</font>, and add the following line to my script file:<br />
      <br />
      <font color="green">!insertmacro</font> MUI_DEFAULT MUI_UI_HEADERIMAGE <font color="teal">"</font><font color="darkred">${NSISDIR}</font><font color="teal">\Contrib\UIs\modern_headerbmp_2.exe"</font><br />
      <br />
      This works. All header images increase in size by a few pixels.<br />
      <br />
      That is the problem. I don't want "all" header images to be changed. I need bigger uninstaller ones. (Something to do with the bitmap being unshrinkable, sort of.)<br />
      <br />
      <font color="blue">ChangeUI</font> IDD_UNINST <font color="teal">"</font><font color="darkred">${NSISDIR}</font><font color="teal">\Contrib\UIs\modern_2.exe"</font><br />
      <br />
      would be nice, but I don't think it applies, or I haven't discovered how.<br />
      <br />
      <font color="darkred">modern_2.exe</font> is my personalized version of <font color="darkred">modern.exe</font> in which make similar changes to the ones I make in <font color="darkred">modern_headerbmp_2.exe</font>. I'm guessing "dialog 105" contains the header image controls. Is that correct?<br />
      <br />
      Can anyone help out?<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">10th February 2005 17:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi again!<br />
      <br />
      <b>re</b>: How do you change the header image size on the uninstaller pages without changing it on the installer pages?<br />
      <br />
      To increase the header image size you can edit the resources in modern_headerbmp.exe. I now have modern_headerbmp_2.exe with modified controls.<br />
      <br />
      What do I do next?<br /></p>
      <pre>
<code>ChangeUI all "${NSISDIR}\Contrib\UIs\modern_headerbmp_2.exe" 
</code>
</pre>and:<br />
      <pre>
<code>ChangeUI IDD_INST "${NSISDIR}\Contrib\UIs\modern_headerbmp_2.exe" 
</code>
</pre>change the header image size on all pages, whereas:<br />
      <pre>
<code>ChangeUI IDD_UNINST "${NSISDIR}\Contrib\UIs\modern_headerbmp_2.exe" 
</code>
</pre>is an error.<br />
      <br />
      Does this mean that you cannot have two different header image sizes?<br />
      <br />
      I'm new to this forum stuff -- a great institution, like democracy. I wouldn't know if anyone ever slips through the net and doesn't get a reply.<br />
      <br />
      "I won't, I did," I replied to myself.<br />
      <br />
      It's not an unreasonable question.<br />
      <br />
      Thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th February 2005 20:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ChangeUI is not the way way to change the UI using the MUI. The MUI uses ChangeUI too. You need to tell the MUI to use it differently to avoid conflicts. To do that, there are some defines. MUI_UI is one of them.<br />
      <br />
      To your question, you can't have different UI for the installer and the uninstaller. You can add some empty space to the installer bitmap.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">10th February 2005 22:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, Kichik!<br />
      <br />
      I only wanted to change the default MUI header image on the uninstall pages by swapping modern_headerbmp.exe for modern_headerbmp_2.exe.<br />
      <br />
      Is that not possible, or rather, can you only do that once (per script), because the change is universal and applies to all pages?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th February 2005 22:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You cannot change just the uninstaller image size. The installer and the uninstaller share the same dialog.<br />
      <br />
      IDD_UNINST is the confirmation page, not the container dialog.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">10th February 2005 23:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks! I really appreciate it. It would appear you're right.<br />
      <br />
      I have come across this line, which can be used only one time (and further instances are ignored by the compiler):<br /></p>
      <pre>
!insertmacro MUI_DEFAULT MUI_UI_HEADERIMAGE "${NSISDIR}\\Contrib\\UIs\\modern_headerbmp_2.exe" 
</pre>You can't switch back to the original default later on.<br />
      <br />
      I'm not complaining, just asking. NSIS beats INNO and it beats Setup Factory, anyone else reading this.<br />
      <br />
      The other approach you mentioned was adding space to the installer bitmap. Do you mean by a <font color="green">!define</font> statement?<br />
      <br />
      What do you recommend?<br />
      <br />
      Getting late. Must quit.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th February 2005 23:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">MUI_DEFAULT is an internal macro and should not be used. To change the UI you should define MUI_UI.<br />
      <br />
      In the space suggestion I was referring to the image itself, not any define. Simply add some white space to the installer image so its size will match the uninstaller image size.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">11th February 2005 00:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, I have to ask you another question, Kichik.<br />
      <br />
      If you don't use the internal macro or <font color="blue">ChangeUI</font>, that leaves only defining MUI_UI:<br />
      <br />
      <font color="green">!define</font> MUI_UI <font color="darkred">${NSISDIR}\Contrib\UIs\modern_headerbmp_2.exe</font><br />
      <br />
      Why does this result in an error? The error line is:<br />
      <br />
      <font color="green">!insertmacro</font> MUI_PAGE_WELCOME.<br />
      <br />
      I'm tempted to go back to using <font color="blue">ChangeUI</font> IDD_INST ... coupled with your suggestion of adding white space to the image.<br />
      <br />
      Thanks again.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th February 2005 10:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I can't tell much without the exact error message, but if that define line was copied from your script verbatim, you are missing quotes. The NSISDIR define might contain spaces, so the path must be quoted.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bnicer</span><br />
      <span class="post-time small text-muted">11th February 2005 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There were two MUI_UIs that I had to predefine. It was the wrong "define". The Modern User Interface page in the NSIS user manual is a very useful source of information, if you take the time to read it carefully enough as I finally did last night.<br /></p>

      <blockquote>
        <b>MUI_UI <font color="royalblue">ui_file</font></b><br />
        The interface file with the dialog resources. Change this if you have made your own customized UI.<br />
        <i>Default: ${NSISDIR}\Contrib\UIs\modern.exe</i><br />
        <br />
        <b>MUI_UI_HEADERIMAGE <font color="royalblue">ui_file</font></b><br />
        The interface files with the dialog resource IDD_INST that contains a bitmap control and space for the header bitmap.<br />
        <i>Default: ${NSISDIR}\Contrib\UIs\modern_headerbmp.exe</i>
      </blockquote>It was my mistake. Once I defined the headerimage, I didn't need <font color="blue">ChangeUI</font>. You were right.<br />
      <pre>
<code>
exe
<br />&gt;!define MUI_UI_HEADERIMAGE ... modern_headerbmp_2.exe 
<br />&gt;
</code>
</pre>One thing still puzzles me. If <font color="darkred">modern.exe</font> contains no resources for the headerimage, should you even alter the dialog controls to accommodate the larger header bitmap within <font color="darkred">modern.exe</font>, just to play it safe? I did, so I have two modified files. Is that necessary?<br />
      <br />
      It may not be that important. On the other hand, what if something gets misinterpreted. Windows 95 maybe? It could make a difference whether <font color="darkred">modern_2.exe</font> reflects the changes made to <font color="darkred">modern_headerbmp_2.exe</font>.<br />
      <br />
      It continues to be Thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th February 2005 15:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The resources in the UI defined by MUI_UI_HEADERIMAGE (modern_headerbmp.exe by default) override those in the UI defined by MUI_UI (modern.exe by default). It is not necessary to alter the resource in modern.exe that are overridden anyway.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
