<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="http/1.1 400 bad request with NSISdl"><title>http/1.1 400 bad request with NSISdl - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">http/1.1 400 bad request with NSISdl</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187246">http/1.1 400 bad request with NSISdl</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">augy</span><br><span class="post-time small text-muted">20th July 2004 23:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>http/1.1 400 bad request with NSISdl</strong><br>I get the "http/1.1 400 bad request" error string whenever I try a particular download:<br><br>NSISdl::download "http://www.domainprotected.net/$CurInstallClient_Update/eCM for $CurInstall.exe" "$Path\$CurInstall\eCM for $CurInstall.exe"<br><br>as you may have guessed, $CurInstall and $Path are both user variables. I've checked the strings with messageboxes already--they expand out properly at runtime. It's particularly difficult to figure out the problem because I do another download right after this one:<br><br>NSISdl::download "http://www.domainprotected.net/$CurInstallClient_Update/reg/UpdatedRegistryFile.reg" $Path\UpdatedRegistryFile.reg<br><br>and it also expands out just fine with messagebox AND it downloads correctly.<br><br>Please note that I don't actually receive any error message popup; I only get the message if I pop it off the stack and messagebox it. I would assume that the error message it trying to tell me that the file is nonexistent, but I've checked the path over and over and over again (it's been about a week, and the boss is getting irritated =D) to no avail. The program seems to just skip over it; it blips the downloading dialog and then moves on to the next download.<br>Oh, and this isn't an installer per se; it's actually an updater for a program installed with NSIS, so there's no $INSTDIR or anything; however, $Path contains the path to the installation directory, pulled out of the registry.<br><br>So, any ideas?<br><br><br>Thanks alot,<br><br>augy</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">21st July 2004 11:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Remember that <i>$CurInstallClient_Update</i> is considerated one variable, so the value of $CurInstall is ignored. To solve this you need to use a common (or constant) variable (like $0), put the variable you want in it and concatenate the string into it. Like this below:<br><br></p><pre>
<code>StrCpy $0 $CurInstall<br>StrCpy $0 $0Client_Update<br>NSISdl::download "http://www.domainprotected.net/$0/eCM for $CurInstall.exe" "$Path\$CurInstall\eCM for $CurInstall.exe"</code>
</pre><br>
      <br>
      Which means one more thing to go to the documentation:<br>
      <br>
      "When you concatenate user variables with strings and there is no separation by a space, you need to use a common variable like $0, set the value of this constant variable with the user variable's, then you concatenate with a string and use it."
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">augy</span><br>
      <span class="post-time small text-muted">21st July 2004 23:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">"Remember that $CurInstallClient_Update is considerated one variable, so the value of $CurInstall is ignored"<br>
      <br>
      Well, this isn't true--When I messagebox, the string looks fine, and the second NSISdl::download I have listed works just fine, and it uses the user variables in the same way. Is there anything else that may be causing it?<br>
      <br>
      <br>
      augy</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br>
      <span class="post-time small text-muted">22nd July 2004 02:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Perhaps its the spaces in "http://www.domainprotected.net/$CurInstallClient_Update/eCM for $CurInstall.exe" or the spaces in "$Path\$CurInstall\eCM for $CurInstall.exe"?<br>
      <br>
      Did you try:<br>
      "http://www.domainprotected.net/$CurInstallClient_Update/eCM%20for%20$CurInstall.exe"<br>
      or '"$Path\$CurInstall\eCM for $CurInstall.exe"' or a combination of the two?</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>