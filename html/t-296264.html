<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Detect skipped file" />

  <title>Detect skipped file - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Detect skipped file</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296264">Detect skipped file</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">BrettR</span><br />
      <span class="post-time small text-muted">21st August 2008 09:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Detect skipped file</strong><br />
      In one of my patch installers, using NSIS 2.9, I need to copy in an updated file and then execute that file. I would like to skip the execution if the file replacement was skipped (already up-to-date). I found a mention in the forum that the error flag would be set if the file was skipped. My code fragment is as follows:<br />
      <br />
      SetOverwrite ifnewer<br />
      ClearErrors<br />
      File "SETUPEX.EXE"<br />
      IfErrors +4 0<br />
      ExecWait "$INSTDIR\SETUPEX.EXE"<br />
      IfErrors 0 +2<br />
      SetRebootFlag true<br />
      <br />
      I find however that ExecWait is always being called, even when the file has been skipped, so I am assuming that the error flag is not being set. Is there any other way to determine if the file was skipped so I can skip the execution ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">BrettR</span><br />
      <span class="post-time small text-muted">10th September 2008 12:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Bump</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th September 2008 21:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The error flag is only set for the "try" mode. If you want to use ifnewer and know when the file is not overwritten, you'd have to compare dates yourself. Use GetFileTime and GetFileTimeLocal to do so.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">BrettR</span><br />
      <span class="post-time small text-muted">11th September 2008 08:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the help, will see what I can do with those two functions.<br />
      <br />
      Cheers,<br />
      Brett</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
