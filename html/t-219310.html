<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How set charset for font in Installation?" />

  <title>How set charset for font in Installation? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How set charset for font in Installation?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=219310">How set charset for font in Installation?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">20th June 2005 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How set charset for font in Installation?</strong><br />
      How set charset for font in Installation?<br />
      <br />
      I need set charset in Installation after selection of language in language dialog.<br />
      <br />
      How can I do it?<br />
      <br />
      Thank you</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Zozooo</span><br />
      <span class="post-time small text-muted">20th June 2005 19:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>SetFont "fontname" size</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pidgeot</span><br />
      <span class="post-time small text-muted">20th June 2005 20:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Setting the font is not the same as settting the charset.<br />
      <br />
      As far as I'm aware, NSIS can only use the system charset. So basically, only users with Shift-JIS as their system charset can see Japanese text, etc.<br />
      <br />
      Of course, this is dependant on the end-user system, not the system the installer was compiled on.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">20th June 2005 20:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I need set CHARSET of font! but not size</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">23rd June 2005 08:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Who knows how I can do it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd June 2005 11:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's always DEFAULT_CHARSET. If you want to change it, you can call CreateFont using the System plug-in and set the font for all the controls on your own.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">23rd June 2005 14:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Pleeese, give small example of using function CreateFont for setting CHARSET.<br />
      <br />
      Thank you</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">30th June 2005 12:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">kichik, please, give example of using function CreateFont from System plug-in.<br />
      <br />
      Thank you</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">30th June 2005 19:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's not that hard...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pidgeot</span><br />
      <span class="post-time small text-muted">30th June 2005 20:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This full list of charset defines might come in handy. Values taken from the help file for Delphi 7 and verified with MSDN Library April 2003.<br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!</span><span style="color: #0000BB">defineANSI_CHARSET0<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineDEFAULT_CHARSET1<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineSYMBOL_CHARSET2<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMAC_CHARSET77<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineSHIFTJIS_CHARSET128<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineHANGEUL_CHARSET129<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineJOHAB_CHARSET130<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineGB2312_CHARSET134<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineCHINESEBIG5_CHARSET136<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineGREEK_CHARSET161<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineTURKISH_CHARSET162<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineVIETNAMESE_CHARSET163<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineHEBREW_CHARSET177<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineARABIC_CHARSET178<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineBALTIC_CHARSET186<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineRUSSIAN_CHARSET204<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineTHAI_CHARSET222<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineEASTEUROPE_CHARSET238<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineOEM_CHARSET255<br /></span></span> <!-- php buffer end -->
      <hr />
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">4th July 2005 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have next code<br />
      <br /></p>
      <pre>
<code><br />Function SetCustomOwn<br />  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "${PAGE_OWN}"<br /><br />  Pop $hwnd <br /><br />  GetDlgItem $DlgItem $hwnd ${ITEM_GROUPBOX_OWN}<br />  System::Call "gdi32::CreateFont(i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, \<br />  i ${EASTEUROPE_CHARSET}, i ${OUT_DEFAULT_PRECIS}, \<br />  i ${CLIP_DEFAULT_PRECIS}, i ${DEFAULT_QUALITY}, \<br />  i ${DEFAULT_PITCH}, t 'Tahoma') i .r0"<br />  SendMessage $DlgItem ${WM_SETFONT} $0 0 <br />  ; SendMessage $DlgItem ${WM_SETFONT} $0 1<br /><br />  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />FunctionEnd<br /></code>
</pre><br />
      <br />
      BUT it has no effect.<br />
      What's problem?<br />
      <br />
      Thank you
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">5th July 2005 20:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Does $DlgItem contain a valid value? Did you include WinMessages.nsh? Did you try setting another font but the default Tahoma to see if it's just the charset that's not set? Would be easier to see why it has no effect with a full example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">6th July 2005 09:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">$DlgItem contains valid value - I checked it by using<br /></p>
      <pre>
<code>ShowWindow $DlgItem 0</code>
</pre><br />
      WinMessages.nsh was included.<br />
      I've tried "Tahoma", "Arial", "Courier New" but result the same.<br />
      <pre>
<code>Function SetCustomA<br />  !insertmacro MUI_INSTALLOPTIONS_WRITE "${PAGE_DATABASE}" \<br />    "${FLD_IMG_EXISTING_DATABASE}" "Text" \<br />    "$TEMP\${IMG_EXISTING_DATABASE}"<br /><br />  !insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE_DATABASE)"<br />  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "${PAGE_DATABASE}"<br /><br />  Pop $hwnd ; hwnd of dialog<br /><br />  GetDlgItem $DlgItem $hwnd ${ITEM_GROUPBOX_DB}<br />  SendMessage $DlgItem ${WM_SETTEXT} 0 "STR:$(CAPTION_GROUPBOX_DB)"<br /><br />  System::Call "gdi32::CreateFont(i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, \<br />  i 0, i ${OUT_DEFAULT_PRECIS}, \<br />  i ${CLIP_DEFAULT_PRECIS}, i ${DEFAULT_QUALITY}, \<br />  i ${DEFAULT_PITCH}, t 'Courier New') i .r0"<br />  SendMessage $DlgItem ${WM_SETFONT} $0 0<br /><br />  GetDlgItem $DlgItem $hwnd ${ITEM_EXISTING_DATABASE}<br />  SendMessage $DlgItem ${WM_SETTEXT} 0 "STR:$(CAPTION_EXISTING_DATABASE):"<br />  GetDlgItem $DlgItem $hwnd ${ITEM_DATABASE_DESCRIPTION}<br />  SendMessage $DlgItem ${WM_SETTEXT} 0 "STR:$(MSG_DATABASE_DESCRIPTION)"<br /><br />  SendMessage $DlgItem ${WM_SETFONT} $0 0<br /><br />  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />FunctionEnd</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th July 2005 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Seems fine. I'd try with 1 in lParam. Doesn't hurt updating it the control. If it still doesn't work, attach a complete example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">8th July 2005 07:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've tried, but result the same.<br />
      <br />
      Sorry, but I can't attach a complete example, because it's policy of our company.<br />
      I can attach screenshot, but I don't know how I can do it.<br />
      Please, say to me how.<br />
      <br />
      Thank you</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pidgeot</span><br />
      <span class="post-time small text-muted">8th July 2005 07:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You're not being asked to post the entire script you're working on. You're only being asked to show a script that shows the problem. The script doesn't have to do anything else, but it needs to be compileable as-is. Alternatively, use the code you've already posted to create a new, otherwise unrelated script around that function that still shows the problem.<br />
      <br />
      If your company has a policy against that, you wouldn't even have been allowed to post that function above.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">8th July 2005 08:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can see problem code above.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Pidgeot</span><br />
      <span class="post-time small text-muted">8th July 2005 09:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You seem to be misunderstanding me.<br />
      <br />
      If we're to help properly, we'll need you to create a new, complete script that uses the function, but which doesn't work as intended. It is not enough to just see the function, as the reason it fails may be due to something you do before calling the function.<br />
      <br />
      Because YOU are having the problem, YOU will have to make a complete working example script (obviously showing the problem) that we can compile and test without any modifications.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">8th July 2005 09:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I very well understand you.<br />
      But problem only in one function CreateFont.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">8th July 2005 10:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by anonym</i><br />
        <b>I very well understand you.<br />
        But problem only in one function CreateFont.</b>
      </blockquote>If you say the problem is only in that function, you don't understand Pidgeot. The problem might be in another part of the script. That function is far from being stand-alone.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">4th May 2006 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm sorry.<br />
      Please, see problem code below<br />
      <br /></p>
      <pre>
<code><br />Name font<br />OutFile font.exe<br /><br />XPStyle on<br /><br />Var hwnd<br />Var DlgItem<br /><br />Section<br />!include WinMessages.nsh<br /><br />!define GREEK_CHARSET 161<br />!define EASTEUROPE_CHARSET 238<br /><br />!define OUT_DEFAULT_PRECIS 0<br />!define CLIP_DEFAULT_PRECIS 0<br />!define DEFAULT_QUALITY 0<br />!define DEFAULT_PITCH 0<br /><br />System::Call "gdi32::CreateFont(i 0, i 0, i 0, i 0, i 0, \<br />  i 0, i 0, i 0, i ${EASTEUROPE_CHARSET}, i ${OUT_DEFAULT_PRECIS}, \<br />  i ${CLIP_DEFAULT_PRECIS}, i ${DEFAULT_QUALITY}, \<br />  i ${DEFAULT_PITCH}, t 'Tahoma') i .r0"<br /><br />GetDlgItem $1 $HWNDPARENT 1<br />SendMessage $1 ${WM_SETFONT} $0 1<br /><br />  GetDlgItem $DlgItem $HWNDPARENT 1028<br />  SendMessage $DlgItem ${WM_SETFONT} $0 1<br />  SendMessage $DlgItem ${WM_SETTEXT} 0 "STR:***283;š***269;***345;žýáíéú***367;"<br />SectionEnd<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th May 2006 11:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Still works fine for me when changing EASTEUROPE_CHARSET to HEBREW_CHARSET and changing the text to Hebrew. Make sure the file is saved with the correct codepage. Try saving it using Notepad and select ANSI encoding in the save dialog.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">4th May 2006 11:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It works on your computer because you have Hebrew Windows.<br />
      You try my code without changes.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th May 2006 11:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I can't try your code without changes because my non-Unicode codepage is Hebrew and because the characters I copy from the web browser depend on its selected codepage which is probably not the same as yours.<br />
      <br />
      If it doesn't work on your computer because you don't have eastern european codepage selected, then that's the problem. You can't display characters of a different codepage then your selected codepage without Unicode. NSIS is not Unicode enabled.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">anonym</span><br />
      <span class="post-time small text-muted">4th May 2006 11:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I know that NSIS is not Unicode, but Delphi 7 also is not Unicode, but it can displays in different codepages by using different charsets. Charsets uses special for it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th May 2006 11:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't know exactly what Delphi does, but if it's does not create a full blown Unicode application, it can still call the Unicode version of the API.<br />
      <br />
      As far as I can tell, what you're trying to do is not possible. Even if you select the charset, the codepage must fit. For example, how will it decode MBCS without the correct codepage?<br />
      <br />
      But, if you can show me a piece of C code that does this, I'll translate it to NSIS script for you.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
