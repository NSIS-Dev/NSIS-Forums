<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Compare file sizes" />

  <title>Compare file sizes - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Compare file sizes</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=195895">Compare file sizes</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">7th October 2004 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Compare file sizes</strong><br />
      Hello. I want to add a section in my installer that would allow me to compare some file sizes to ensure the installer did its job, and newer files were copied into place. I'm trying to guard against a user not having rights, or having a file locked, and not updated.<br />
      <br />
      I did some searching and I found a thread from about 2 years ago. It said I could use the following script to compare file sizes. I don't really understand how to incorporate or use this code within my own. Could someone help me out. Thanks.<br />
      <br />
      <br />
      outfile FileSizeNew.exe<br />
      name FileSizeNew<br />
      <br />
      ; FileSizeNew<br />
      ;<br />
      ; Script to find the size of a file.<br />
      ; Much more efficient than the<br />
      ; ExtensionDLL FileSize :-)<br />
      ;<br />
      ; by Hendri Adriaens<br />
      ; <a href="mailto:HendriAdriaens@hotmail.com">HendriAdriaens@hotmail.com</a><br />
      <br />
      section<br />
      Push "$EXEDIR\FileSizeNew.nsi"<br />
      Call FileSizeNew<br />
      Pop $0<br />
      MessageBox MB_OK "File size: $0 bytes."<br />
      sectionend<br />
      <br />
      function FileSizeNew<br />
      Exch $0<br />
      Push $1<br />
      FileOpen $1 $0 "r"<br />
      FileSeek $1 0 END $0<br />
      FileClose $1<br />
      Pop $1<br />
      Exch $0<br />
      functionend</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">7th October 2004 19:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) To compare numbers you can use <i>IntCmp</i> command. To compare really big numbers (64-bits) you can use System plugin. To convert these numbers to kb, you can use <i>IntOp $var $var * 1024</i>.<br />
      <br />
      OR<br />
      <br />
      2) To make calculations with this number in an advanced way, is prefferable to use <i>Math</i> plugin.<br />
      <br />
      If you would like me to make an example for you, choose one of the options above.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br />
      <span class="post-time small text-muted">8th October 2004 19:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">deguix, thanks for the reply. Boy, I'm still a bit confused. Basically, after my update, there will be a file here called: "$INSTDIR\GPLoans\GPAdmin.exe". I know its file size should be 5,066,752 bytes. I would like to verify this. Thanks.<br />
      <br />
      Jnuw</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th October 2004 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You would be better of comparing files using MD5 values:<br />
      <br />
      <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=488" target="_blank">http://nsis.sourceforge.net/archive/...b.php?page=488</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">8th October 2004 19:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah, I should use that dll too...</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
