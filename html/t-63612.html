<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Adding Required Option"><title>Adding Required Option - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Adding Required Option</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=63612">Adding Required Option</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Schultz</span><br><span class="post-time small text-muted">24th October 2001 13:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Adding Required Option</strong><br>Justin,<br>this was talked about inside a seperate thread.. And i thought i might throw this out in the open. Could/Would it be possible to add a feature to make certain sections required like to kinda follow Nsis's Scripting style.<br><br>Section /REQUIRED "SectionName"<br><br>SectionEnd<br><br>so you could define your own Required sections and have seperate ones to show ppl different things that are being installed and are required. And also having the possible to make the first selection not required. because i do a lot of install to simplify installing things.. and pretty much the user can choose what he/she wishes to install. right now i am working around this by just creating a bogus section with the name of the Installer with no code in it. so it don't matter if it is selected or not. And if you feel like not needing this then just disreguard it.. thanks..<br>Schultz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">locnar42</span><br><span class="post-time small text-muted">25th October 2001 03:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">another feature along these lines which would be useful would be a callback when the user selects/deselects a particular section along with a command which would allow us to change a particular sections status. I'm thinking it would be used when one section depends on others then it could automatically select all dependancies. Or, display a message to the user the first time they select a particular section to let them know of any special instructions, requirements, license, etc....<br><br>thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DuaneJeffers</span><br><span class="post-time small text-muted">25th October 2001 06:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I believe that this has a syntax already in place. I will have to look, but I believe that this is in place.<br><br>-Duane</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tresni</span><br><span class="post-time small text-muted">7th November 2001 07:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Yes Yes.. Very Good</strong><br>I definatly agree with these both (and I can't find anything in the docs that would allow you to do either of these currently..) Anyone know something I don't? Any plans for this (these) to be implemented in the future?<br><br>I really ,*really* love NSIS. It's a lifesaver over alot of the other options we have for installers. So devs, keep up the good work 8)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">7th November 2001 18:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I believe you can accomplish most of this already (take a look at the docs):<br><br></p><blockquote>* <b>InstType</b> (/NOCUSTOM | /CUSTOMSTRING=str | /COMPONENTSONLYONCUSTOM | install_type_name)<br>Adds an install type to the install type list, or disables the custom install type. There can be as many as 8 types, each one specifying the name of the install. The first type is the default (generally 'Typical'). Each type is numbered, starting at 1. See SectionIn for information on how those numbers are used. If the /NOCUSTOM switch is specified, then the "custom" install type is disabled, and the user has to choose one of the pre-defined install types. Alternatively, if the /CUSTOMSTRING switch is specified, the parameter will override the "Custom" install type text. Alternatively, if the /COMPONENTSONLYONCUSTOM flag is specified, the component list will only be shown if the "Custom" install type is selected.<br></blockquote><blockquote>* <b>Section</b> [section_name]<br>Begins annd opens a new section. If section_name is empty, omitted, or begins with a -, then it is a required section and the user will not see it, nor have the option of disabling it. If the section name is 'Uninstall', then it is a special Uninstall Section.</blockquote>Rob</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tresni</span><br><span class="post-time small text-muted">7th November 2001 20:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>No No No..</strong><br><i>then it is a required section and the user will not see it, nor have the</i> That's not what I want.. Not only that but you can't do prerequists using either of the 2 things you mentioned..<br><br>And the callback when one compent is selected is definately not supported in any way, shape, or form.. More then anything I want to make a component required (or non-selectable) at runtime.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">7th November 2001 20:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can make a section required by using:<br><br>InstType /NOCUSTOM<br><br>Then just making the required section in each type.<br><br>However, I don't think its possible to set this at run time.<br><br>Rob</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Schultz</span><br><span class="post-time small text-muted">8th November 2001 00:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The thing is setting the no custom don't allow users to choose others things that may be optional to what they wish to install only what you have choosen for an install type. And adding the - prior to the name does this but dosn't allow the user to see the section something i don't wish for either.. i would like the user to know everything that is being installed on there cpu.. But just a few sections non selectable.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">locnar42</span><br><span class="post-time small text-muted">8th November 2001 01:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here is sort of what I was looking for when I originally posted.<br>The program I am writting the install for has a couple of components, basically a client and a server. The client can be used in "localmode" where it uses sample data instead of connecting to the server. I have the install list the following pieces:<br></p><ul><li>Required Components</li><li>Toolkit</li><li>Server</li><li>Client</li><li>Sample Data</li></ul><br>Now then, it makes no sense to install the sample data unless the Client piece is also selected. What I would like to do is, either disable the Sample Data when the Client is not selected, or to automatically select Client when the user selects Sample Data.<br><br>This could be solved by either the callback function, or if we could specify dependencies (one method would be a tree structure where Sample Data is below Client in the tree).<br><br>I have created different Install Types for Client, Server, Everything and such. But, I would have to create 11 install types for the simple example above. Add any more component in the mix and the number jumps very quickly.<br><br>Now then, I would imagine that doing the tree structure (which is basically how InstallShield deals with it) would probably add a lot of extra code to the engine. Since it's not going to apply to every install, I thought that the callback function would be the easiest method. I still think the dependencies would be nice so the user could visualize what is going on, but I'd settle for the simplistic.<br><br>Hrmm, does that explain it any better or am I just blabbering.<br></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Lion King</span><br><span class="post-time small text-muted">8th November 2001 01:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i aqree with the requests above, but i'd like to add something<br><br>what about an 'or' selection, one item can only be selected if the other one isn't selected and vice versa<br>or even better: the item is automatically deselected if the other one is selected by the user</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">locnar42</span><br><span class="post-time small text-muted">8th November 2001 02:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Very easily accomplished if we have the callback function and the ability to query/set/unset sections from the script.<br><br>This could be a very powerful feature.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nsfis</span><br><span class="post-time small text-muted">8th November 2001 07:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Query section would be very useful.<br><br>I need to make some steps in .onInstSuccess function based on user selections (e.g. if user selects to install documentation, installer prompts him to open it in the end). Now we have to use variables. But in my case all 10 variables are blocked for other purposes so I need to store user selections in temporary INI file which is not very nice. Ability to query section would be much better.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tresni</span><br><span class="post-time small text-muted">20th November 2001 20:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This post has been sitting for a while with no comment from Justin.. I would really like to hear what you think about this? Is it a possibilty or even an improbability? I would (honestly) write this if I had even a slight clue how, but I'm not that good of a C programmer (honestly I got last after trying to read about the first 10 lines of the NSIS source..) Anyway just want to know if this will ever get added or if we are just going to have to work around it..<br><br>I'll take another peak at the source and see if I can manage my way through it (having friends who program for a living comes in helpful at times.. 8)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">locnar42</span><br><span class="post-time small text-muted">21st November 2001 00:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm willing to write the code, but I hate to fork NSIS. I would much prefer that it is in the original distribution.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tresni</span><br><span class="post-time small text-muted">21st November 2001 23:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I don't like all the forks of NSIS either but here is my thought:<br>From the looks of the Changes lately it would appear that alot of the changes are from user submited code (or possibly even just psuedo-code). It may be that even though we want these option that Justin doesn't have the time to implement everying on his own. So what's wrong with helping him out? Write the code and then instead of doing you own builds, submit the code to Justin.<br><br>There was one thing I was just thinking that fell in line with alot of the ideas here. The ability (using the callback) to see what status a component is (enabled or disabled).<br><br>My suggestion to everyone who has made a fork that is just some small improvement (or single feature..) why not try to get the code included into the main NSIS fork. There are a lot of differant forks out there that have this 'one cool feature' that I want to use but I stick to the main compile because it's not worth that 1 feature when I know most fork developers lose interest and then I'm screwed.. Anyway..</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>