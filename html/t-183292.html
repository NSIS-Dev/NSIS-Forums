<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="path variables under linux"><title>path variables under linux - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">path variables under linux</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183292">path variables under linux</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">gaylord</span><br><span class="post-time small text-muted">14th June 2004 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>path variables under linux</strong><br>Hi,<br>we have now compiled nsis under linux and use the compiler there. works fine.<br><br>one problem is still there: how to specify path names in the script file? for files or/oname modifiers.<br><br>anyone who can help?<br>Gaylord</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">17th June 2004 17:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Just like Windows, only with forward slashes.</p><pre>
<code>File dir/file.ext</code>
</pre></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dygear</span><br><span class="post-time small text-muted">20th June 2004 05:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">WOW, i did not know you could make installers for linux with NSIS.<br><br>How does this work?<br><br>I am running WIN XP (SP1) and I would love to make installers for linux.<br><br>I do work for <a href="http://www.amxmodx.org" target="_blank">AmxModX</a> and they make both Linux and Windows distributions.<br>Now if I could make an installer for Linux that would be sick.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">20th June 2004 11:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No, you can compile Windows installers on a Linux server. You can't create Linux installers.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dygear</span><br><span class="post-time small text-muted">21st June 2004 06:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oh man, you got my hopes up!<br>*Goes back to Wishing he had $4000 to buy Installanywhere*</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Correa</span><br><span class="post-time small text-muted">28th June 2004 13:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">But then you have to change a lot of files in the Modern UI and your .nsi would have to be different under windows and linux :(<br><br>Could you make it so that the compiler under linux will substitute the \ by / when it needs to find a file and it can't?<br><br>Also, the makefile under linux seams to be a bit broken :(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">28th June 2004 17:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Correa</i><br><b>But then you have to change a lot of files in the Modern UI and your .nsi would have to be different under windows and linux :(<br><br>Could you make it so that the compiler under linux will substitute the \ by / when it needs to find a file and it can't?<br><br>Also, the makefile under linux seams to be a bit broken :(</b></blockquote>read two posts above :rolleyes:</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Correa</span><br><span class="post-time small text-muted">28th June 2004 18:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Re-read my post ;)<br><br>I know it won't create a linux installer, and I don't want a linux installer, I want to compile under linux my windows installer and have to maintain a single copy of my installer file in CVS for both the hand made (Windows hosted) installations and the one that runs on a cron using xmingw to build windows executables.<br><br>Again, if you compile the makensis compiler under linux and apply it, it will complain a lot about the \ under the Modern UI includes, which are a pain to change manually, not to mention you will get major cvs conflicts when updating from CVS.<br><br>Please, someone consider the request.<br><br>Thank you.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">1st July 2004 18:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It is planned.<br><br>Makefiles work fine for me. Submit a detailed bug report if you have a problem with them.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">8th July 2004 17:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm trying to get makensis to work on linux and create a MUI installer. This is the only page I can find on Google that appears to talk about it.<br><br>I've managed to get it to compile, but I may have done it wrong. What I did was this:<br><br>- got the cvs code<br>- Changed the exehead compiler (CC in Source/exehead/Makefile) to an xmingw cross-compiler. I also changed RC to an xmingw version of windres.<br>Without these two changes, the stuff in exehead didn't compile at all.<br>- Left Source/Makefile alone<br>- Ran make.<br><br>All this is on a Gentoo linux machine.<br><br>The compile ran (a few warnings, but that's all), and I have an executable makensis.exe, which seems to run OK.<br><br>I spent a while fixing file paths in my nsis scripts, and in MUI scripts.<br><br>But now I get an error on this line:<br>ChangeUI all [NSISpath]/Contrib/UIs/modern.exe.<br>The error is "Can't find IDC_EDIT1 (1000) in the custom UI!"<br><br>If I remove the offending line, I get a working installer, but with no MUI screens (ie not much use because I need them).<br><br>Any help appreciated.<br><br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">8th July 2004 19:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">fixed</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">9th July 2004 09:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Wow! That was lightning fast. I've recompiled, and it looks like it runs OK.<br><br>Thanks a lot.<br><br>I can't test completely right now. If I have further problems, I know where to come...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">9th July 2004 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Some bad news. Everything appears to run OK, and the windows installer is created OK, but none of my custom pages work. I'm working on an installer for a java web app, and there is a page for choosing a port to run on, and a page that checks the java version. These are defined like:<br><br>Page custom port portOut<br><br>They appear to compile OK, but don't appear in the compiled installer, which only shows the MUI_PAGE_LICENSE, MUI_PAGE_DIRECTORY etc.<br><br>The compile shows no errors, and the output includes "Install: 8 pages", which is the correct number of pages, including the custom ones.<br><br>Sorry to be a pain, but if there's a fix for this as quick as the last one, I'd like to get hold of it.<br><br>Incidentally, while I'm here... I needed to change line 9 in Contrib/Modern UI/Language Files/English.nsh from<br>!insertmacro MUI_LANGUAGEFILE_BEGIN "ENGLISH"<br>to<br>!insertmacro MUI_LANGUAGEFILE_BEGIN "English"<br>because of case-sensitive filenames on linux.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th July 2004 14:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Have you made sure it's not your script? Does it work on Windows? Have you tested the examples?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">9th July 2004 15:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">My script has been working on windows for a while, and the resulting executable works fine. I only tried it on linux for the first time yesterday, but it's not brand new.<br>Obviously, I've doctored the file separators for the linux version, but apart from that it's the same.<br><br>I've tried a few of the examples. primes.nsi, silent.nsi and StrFunc.nsi work fine. bigtest.nsi works after some tweaking (filename case and file separators).<br><br>But these don't seem to use custom pages.<br><br>The examples that use custom pages are gfx.nsi and makensis.nsi.<br><br>I haven't got either of these to work, because of the number of file separator etc changes. Also, I get "AddBrandingImage is disabled for non Win32 platforms." with gfx.nsi.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th July 2004 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Contrib/InstallOptions/test*.nsi use custom pages and work fine for me. Have you tried those?<br><br>AddBrandingImage requires Windows fonts handling for pixel to dialog units conversion and is therefore currently disabled.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">12th July 2004 11:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for your continued help on this one...<br><br>I tried Contrib/InstallOptions/test.nsi, and first of all it didn't work, because I was reversing too many file separator characters. The effect was that the custom page was skipped (exactly as I've been experiencing). I got it to work by putting back some windows file separators.<br><br>Now I've fixed my own script - the problem was actually that I had messed up the MUI macros when I converted them to linux file separators, so the ini files didn't behave properly.<br><br>So, thanks for your help Kichik, and sorry I messed up the linux conversion. Looking forward to a version that can automatically translate file separators...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rex123</span><br><span class="post-time small text-muted">14th July 2004 15:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This isn't relevant to the above, but this is the thread I've been using, so I'll continue it...<br><br>My installer makes windows shortcuts to URLs as well as files. These have been working OK, but and I found that the URL shortcuts were not working with my new linux-originated installers (giving errors like "failed to create shortcut" in the install screen). I managed to fix the problem by hacking exec.c. I'm not a C programmer, so it was a bit of a guess, but it seems to have worked. Here's the diff:<br><br><br>Index: exec.c<br>===================================================================<br>RCS file: /cvsroot/nsis/NSIS/Source/exehead/exec.c,v<br>retrieving revision 1.139<br>diff -r1.139 exec.c<br>1006c1006<br>&lt; GetStringFromParm(0x11);<br>---<br>&gt; GetStringFromParm(0x21);</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th July 2004 18:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks, uploaded.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>