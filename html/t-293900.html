<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Direct encryption of the installer ?"><title>Direct encryption of the installer ? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Direct encryption of the installer ?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293900">Direct encryption of the installer ?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 14:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Direct encryption of the installer ?</strong><br>Is possible to make that the makensis build a encrypted installer executable ? Ths operation can be so easy made with the InnoSetup scripts when we add the ISCrypt.dll to the program.<br><br>Can we make the same but for the nsis ?<br><br>thx</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">2nd July 2008 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, you could warp another installer around your actual installer. Then the "outer" installer would extract the "inner" installer to $TEMP at runtime, run it, wait for it to execute and finally delete it. The "outer" installer could use some kind of encryption plugin to protect the "inner" installer. But this doesn't solve the actual problem: The password for decrypting the "inner" installer has to be stored in the "outer" installer. Even if you use some kind obfuscation, the password could be obtained from Memory (as plain text) at runtime. And there's nothing you can do to prevent that. You still remember {_trueparuex^}'s post in your favorite thread? ^^</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 14:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well LoRd_MuldeR, i also imagined that, but this is a dirty way to do the things. In my opinion of inno is able to do that, why the makensis (a superior tool) cant not to do the same ?<br><br>i think must exist some way to do with nsis !</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sheik</span><br><span class="post-time small text-muted">2nd July 2008 15:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Isn't Inno free and open source as well?<br><br>I am curious, if NSIS doesn't appear to meet your needs, and Inno does, why aren't you using Inno?<br><br>It sure isn't the cost thats holding you back...<br>So what is?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">maybe you not understand what i mean.<br>The INNO thing is able to produce crypted installers. I just tried it and the universal extractor cant work with the exe installer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">2nd July 2008 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If Inno Setup is able to encrypt the data, then it MUST be able to <i>decrypt</i> the data at runtime. Otherwise the installer would be useless! If Inno Setup is able to decrypt the data at runtime, then it must "know" the key (password) at runtime. Otherwise decryption would NOT be possible. If Inno Setup "knows" they key (password) at runtime, then the key MUST be stored in the installer EXE. No matter whether they store the key as plain text (what they most likely do NOT do) or wheter they use obfuscation to "hide" the key: There WILL be a way to obtain they key! Either from the EXE file itself or from a memory dump. Accept that fact...<br><br>Obviously you still don't understand the crux :rolleyes:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">but the key is not exposed in a simpe universl extractor extraction !! is the important difference.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">2nd July 2008 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by arfgh</i><br><b>but the key is not exposed in a simpe universl extractor extraction !! is the important difference.</b></blockquote>If you think that makes Inno Setup more secure, than you are mistaken! "Extracting" files from Inno Setup installers <i>might</i> be added to Universal Extractor or a similar tool the same way it was added for NSIS installer. Only somebody must be willing to implement it. And this <i>might</i> happen tomorrow. Last but not least a sophisticated "hacker" won't need a tool like Universal Extractor, just a HexEditor and his/her brain...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">2nd July 2008 16:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">For Inno Setup there is the "Inno Setup Unpacker" almost official tool to unpack Inno installer.<br><br><a href="http://innounp.sourceforge.net/" target="_blank">http://innounp.sourceforge.net/</a><br><br>As for the ISCrypt.dll, is a library similar to Stu's Passdialog.dll, it adds a serial number page on the installer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 20:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yes, you has the reason.<br><br>Then Red Wine what we can do ? exist some procedure to not expose passwords and keys in a extracted nsi file ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">2nd July 2008 20:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Holy endless unbeatable childishness, we start over the same circle again. I give up... That's unbelievable! Nothing would make you understand, I just give up...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Sheik</span><br><span class="post-time small text-muted">2nd July 2008 21:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, I just can't tell if he is a troll egging us on, or whether he is really just this stubborn...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br><span class="post-time small text-muted">2nd July 2008 21:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">bit of both going on both threads involved i'd say.<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">2nd July 2008 21:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'd say both threads involved should be already nuked.<br>They serve nothing but annoyance.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">2nd July 2008 22:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Until compile time plug-ins are supported then you will have to make do with packing one installer in another. The other option is to rebuild NSIS with the constants changed so that decompilers no longer work.<br><br>This is an interesting topic which if you searched properly would have come across:<br><a href="http://forums.winamp.com/showthread.php?threadid=245397" target="_blank">http://forums.winamp.com/showthread.php?threadid=245397</a><br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">2nd July 2008 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Stu, do you observe this conversation constantly? I have already mentioned the thread that you suggest with absolutely no success.<br><br><a href="http://forums.winamp.com/showthread.php?postid=2366844#post2366844" target="_blank">http://forums.winamp.com/showthread....44#post2366844</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">2nd July 2008 23:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Not sure where this should go, so I'll just add it here...<br><br>As a test, I downloaded the <a href="http://legroom.net/software/uniextract#download" target="_blank">Universal Extractor</a>. I did some experiments with a very basic NSIS installer.<br><br>I was able to determine that it was not able to decompress/decompile files based on BZIP compression. While this is not technically a solution, it does provide a way to at least make it harder for someone to get your install files with very little effort. But, if you wanted to go further, than I'd suggest what has already been suggested by Afrow, Sheik, RedWine, LoRd_MuldeR, and others.<br><br>And for you curious types:<br>I discovered from the Universal Extractor web site that it's really nothing more than fancy script built with <a href="http://www.autoitscript.com/" target="_blank">AutoIT</a>. Basically, it's really just a fancy GUI to call various external applications to do the work.<br><br>[added]<br>Univeral extractor also includes <a href="http://innounp.sourceforge.net/" target="_blank">InnoUnp</a>, which means it also has the ability to extract Inno installation scripts. (hmm... :confused: )<br>[/added]<br><br>And (quoting Forest Gump):<br>That's all I have to say about that! :weird:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">2nd July 2008 23:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">final conclusion. All this fact ruins the so good that the nsis is. At least for me !</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">3rd July 2008 00:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by arfgh</i><br><b>final conclusion. All this fact ruins the so good that the nsis is. At least for me !</b></blockquote>LOL That sounds serious! Would you bet on this?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">arfgh</span><br><span class="post-time small text-muted">3rd July 2008 00:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Comperio this "solution" about bzip compresion you told, is not valid. The last version of universal instaler extract a "script.bin" where the used passwords are exposed and all the strings used.<br><br>Red Wine, it means that the nsis is in fact so good, the best. But this other fact ruins it totally. Because Now we CANT make a serious work.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">3rd July 2008 00:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please somebody close this thread :cry:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">3rd July 2008 11:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Remember; NSIS is free. None of us get paid to work on it and it is all down to free time that it is at the stage that it is today.<br><br>The 'final conclusion' is you cannot expect something to be implemented into NSIS by others when you're really the only user that needs the functionality. When you are the only user requiring something then it is down to <b>you</b> not <b>us</b> to implement it.<br><br>Also comparing NSIS to other install solutions (therefore 'ruining' NSIS as it lacks something that the other install solution has) is not going to get anything done either.<br><br>Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>