<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Create database with NSIS" />

  <title>Create database with NSIS - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Create database with NSIS</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=304491">Create database with NSIS</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">23rd March 2009 07:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Create database with NSIS</strong><br />
      Hello there,<br />
      I am trying to create a database with NSIS. I have SQLmetadata.txt file and i want to create a database from this metadata. I would like to use iboConsole database motor to run my database. So is it possible to create a database from metadata with NSIS? Please help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ginglese</span><br />
      <span class="post-time small text-muted">23rd March 2009 09:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      I never used iboConsole but i use PostgreSql and i think it may be same behavior.<br />
      <br />
      Install the database motor then use command batch to create database and then load the SQLmetadata.txt file into it.<br />
      <br />
      it's how i proceed.<br />
      <br />
      Guillaume</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">26th March 2009 09:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi, Anybody has any idea how can i create database with NSIS by using Firebird isql.exe?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ionut_y</span><br />
      <span class="post-time small text-muted">26th March 2009 10:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Firebird database is a single .fdb/.gdb file so you can create it and pack with NSIS or you can create it by your application on first run.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">26th March 2009 10:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is it possible to create database by NSIS installer? Please help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ionut_y</span><br />
      <span class="post-time small text-muted">26th March 2009 10:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">please see my previous post</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">27th March 2009 00:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use the plugin ExecDos for this:<br /></p>
      <pre>
<code><br />ExecDos::exec "[firebird_dir]\bin\isql.exe" "create database C:\test.gdb;\nexit;\n"<br /></code>
</pre><br />
      The second parameter sends the several commands to the isql tool as if you where typing it in the console app (\n stands for a carriage return or Enter)<br />
      <br />
      Regards,<br />
      JP
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">27th March 2009 09:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I use this:<br />
      ExecWait '"C:\Program Files\Firebird\Firebird_2_1\bin\isql.exe" "CREATE DATABASE c:\database.FDB; user SYSDBA password agripomo page_size 16384 default character set ISO8859_1;\nexit;\n"'<br />
      <br />
      Can you help me find the problem this. because when I run this i get error like "Statement failed, SQLCODE = -902<br />
      Unable to complete network request to host "CREATE DATABASE c".<br />
      -Failed to locate host machine.<br />
      -The specified name was not found in the hosts file or Domain Name Services.<br />
      Use CONNECT or CREATE DATABASE to specify a database<br />
      SQL&gt;<br />
      <br />
      can you help please.<br />
      I tried your code aslo i get the same error.<br />
      I tried to run with ExecDos::exec and it i can't compile NSIS and gives error "invalid command"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">27th March 2009 09:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try a double slash in the filename ,e.g. c:\\database.FDB</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">27th March 2009 09:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried but no luck.<br />
      Does NSIS understand SQL commands?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">27th March 2009 09:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS doesn't have to understand SQL commands, it passes the commands as strings to the isql tool.<br />
      It seems like the commandstring is truncated at the semicolon, I'm not sure why.<br />
      What happens when you use "CREATE DATABASE database.FDB;"?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">27th March 2009 09:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i get same error and command prompt just bling and disappear. doesn't make database.It looks like i am so stuck.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">27th March 2009 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">can anyone help me about avobe mentioned problem.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">27th March 2009 18:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK, I checked, and this should work:<br /></p>
      <pre>
<code>ExecDos::exec "C:\Program Files\Firebird\Firebird_2_1\bin\isql.exe" "CREATE DATABASE 'c:\database.FDB';$\nuser SYSDBA password agripomo page_size 16384 default character set ISO8859_1;$\nexit;$\n"</code>
</pre><br />
      - Don't place single quotes before and after the complete ExecDos Command<br />
      - You forgot the \n between the CREATE DATABASE and user SYSDBA commands<br />
      - Use $\n instead of \n<br />
      - Place single quotes before and after the database filename
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">30th March 2009 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks very much i proceed with my scripts by your great help. Thanks again.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">31st March 2009 08:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ExecDos::exec "$folder\bin\isql.exe" "CONNECT '127.0.0.1:$desfolder\database.fdb' user '$login' password '$password' &amp;&amp; INPUT '$source';$\nexit;$\n"<br />
      Do you think this is the right way to input metadata to to database. Please help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">31st March 2009 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To input metadata data you can use the commandline directly:<br /></p>
      <pre>
<code>ExecDos::exec "$folder\bin\isql.exe -i '$source' '127.0.0.1:$desfolder\database.fdb' -user '$login' -pass '$password'"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">1st April 2009 07:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It worked so perfact. thanks.<br />
      I have one SQL file which i should input also in the database. But i learn that from u. Now the question is that is it possible to put variable to that SQL file before i input that file to the database? For ex. in the SQL file there is "ContractorID" where i should put a number. So the idea is that when i create a database for new Contractor i need to put the contractorID in the SQL file and input to the data base. So my idea is that "if possible" i want that NSIS script will ask the CntractorID and send it to SQL file and input that file to the database. I am sorry that asking too many question. thanks for prevous help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">1st April 2009 07:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It worked so perfact. thanks.<br />
      I have one SQL file which i should input also in the database. But i learn that from u. Now the question is that is it possible to put variable to that SQL file before i input that file to the database? For ex. in the SQL file there is "ContractorID" where i should put a number. So the idea is that when i create a database for new Contractor i need to put the contractorID in the SQL file and input to the data base. So my idea is that "if possible" i want that NSIS script will ask the CntractorID and send it to SQL file and input that file to the database. I am sorry that asking too many question. thanks for previous help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">1st April 2009 17:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Rusell,<br />
      <br />
      you can use the TextReplace plugin for that:<br />
      <a href="http://nsis.sourceforge.net/TextReplace_plugin" target="_blank">http://nsis.sourceforge.net/TextReplace_plugin</a><br />
      <br />
      Regards,<br />
      JP</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">2nd April 2009 06:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello,<br />
      thanks for help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">2nd April 2009 07:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">it looks like that if the "source" or "destination" folder is for example: 'C:\program files\folder\database.fdb' isql doesn't except space between 'program and file'. I think you know how to overcome this problem. please help. thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">2nd April 2009 18:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">try:</p>
      <pre>
<code>ExecDos::exec "$folder\bin\isql.exe -i $\"$source$\" $\"127.0.0.1:$desfolder\database.fdb$\" -user '$login' -pass '$password'"</code>
</pre><br />
      ($\" results in a " for isq.exe)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Russell81</span><br />
      <span class="post-time small text-muted">3rd April 2009 06:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanks very much.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hai12345</span><br />
      <span class="post-time small text-muted">20th July 2010 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>changing the password</strong><br />
      hi,<br />
      <br />
      I have one database in my application path, whether can i change password for that using NSIS script. I know the previous password of the database.<br />
      <br />
      help me.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br />
      <span class="post-time small text-muted">20th July 2010 13:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is not a NSIS question, but a firebird question.<br />
      See the Quickstart manual, chapter "Server configuration and management"</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
