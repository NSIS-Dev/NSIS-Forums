<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Select which screens to display within MUI"><title>Select which screens to display within MUI - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Select which screens to display within MUI</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=176838">Select which screens to display within MUI</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">b_avery@yahoo.c</span><br><span class="post-time small text-muted">16th April 2004 08:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Select which screens to display within MUI</strong><br>Is it possible to select which screens to display as part of the Modern UI.<br><br>For example below if DontInstall is false then just finish:<br><br>;--------------------------------<br>;Modern UI Configuration<br><br>!define MUI_WELCOMEPAGE<br>!define MUI_LICENSEPAGE<br>StrCmp DontInstall 'false' DontInstallPage<br>!define MUI_DIRECTORYPAGE<br>!define MUI_ABORTWARNING<br>!define MUI_UNINSTALLER<br>!define MUI_UNCONFIRMPAGE<br>DontInstallPage:<br>!define MUI_FINISHPAGE<br><br><br>But I get:<br><br>Error: command StrCmp not valid outside section or function</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Davion</span><br><span class="post-time small text-muted">16th April 2004 08:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Installoptions</strong><br>I know how to do this with an Installoptions Dialog<br><br>you just have to write this part of Code at the beginning of the Page function:<br><br>!insertmacro MUI_INSTALLOPTIONS_READ $SHOW "IO_PAGE.ini" "Field 1" "State"<br>StrCmp $R1 "1" +2 0<br>Abort<br><br>If the Value of "state" in "Field 1" is '1' it proceeds showing the page because jumps over the abort-instruction<br>if the value isnt '1' it proceeds with abort and so it goes to the next function<br><br>Check the Readme in the contrib\InstallOptions Folder for further information about the IO Dialogs<br><br>hope this helps</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">b_avery@yahoo.c</span><br><span class="post-time small text-muted">16th April 2004 08:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is okay for a custom page, but it's for all the other pages I don't want to display</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">evilO</span><br><span class="post-time small text-muted">16th April 2004 08:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi :)<br><br>Yes it is possible, but not that way.. You should :<br><br><br>1) Sets the flags and values you need, using <font color="green">define</font>. For instance:<br><br>!define MUI_ABORTWARNING<br>!define MUI_FINISHPAGE_SHOWREADME<br><br>2) Set the order of *all* the pages of your installer,<br>no matter which page are displayed or not, using<br><font color="green">insertmacro</font> and NOT <font color="red">define</font><br><br>; Installer<br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro MUI_PAGE_LICENSE "c:\blabla\MyLicenceFile.txt"<br>!insertmacro MUI_PAGE_DIRECTORY<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>; Uninstaller<br>!insertmacro MUI_UNPAGE_CONFIRM<br>!insertmacro MUI_UNPAGE_INSTFILES<br><br><br>3) For each page you have three functions. From the doc:<br>(<a href="http://nsis.sourceforge.net/Docs/" target="_blank">http://nsis.sourceforge.net/Docs/</a>)<br><br></p><blockquote>4.5.3 Callbacks<br><br>Each built-in page has three callback functions. The pre-function, the show-creation function and the leave-function. The pre-function is called right before the page is created, the show-function is called right after it is created and before it is shown and the leave-function is called right after the user has pressed the next button and before the page is left.<br><br>* The pre-function allows you to skip the page using Abort.<br>* The show-function allows you to tweak the page's user interface with CreateFont, SetCtlColors, SendMessage and others.<br>* The leave-function allows you to force the user to stay on the current page using Abort.</blockquote>The function you need is the "pre-function". Let's say you want to skip the directory page:<br><br><br>- First you have to define the "pre-function" associated with the Directory page.<br><br>Insert<br><font color="green">!define MUI_PAGE_CUSTOMFUNCTION_PRE MyDirectoryPage_Pre</font><br><br>Before<br><br>!insertmacro MUI_PAGE_DIRECTORY<br><br><br>- Then you test the value in this function:<br><br><font color="blue"><br>Function MyDirectoryPage_Pre<br>StrCmp DontInstall true 0 end<br>Abort<br><br>end:<br>FunctionEnd<br></font><br><br><br><br>Ok I think that's it.. Oh, and which version of NSIS do you use ? I've noticed your macros<br>have "old" names... Maybe you should download the last version...<br><br>evilO/Olive</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">b_avery@yahoo.c</span><br><span class="post-time small text-muted">16th April 2004 10:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Great, many thanks :-)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>