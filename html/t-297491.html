<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Minimalist installer: Changing the dialog size and bg color" />

  <title>Minimalist installer: Changing the dialog size and bg color - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Minimalist installer: Changing the dialog size and bg color</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297491">Minimalist installer: Changing the dialog size and bg color</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">16th September 2008 23:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Minimalist installer: Changing the dialog size and bg color</strong><br />
      I'm attempting to create simple, minimalist installer. That is, it's a simple white window with a single logo in the upper right corner, the usual fields, and three buttons along the bottom. It eliminates the big graphics on the Welcome and Finish pages.<br />
      <br />
      Playing with MUI and MUI2 seemed to be getting me nowhere, as their designed to mimic InstallShield, MSI, and other well known installers. It occurred to me that it would be simpler to just eliminate the Modern UI (and any of the addon UIs) and return to the simple NSIS natural page look and customize from there.<br />
      <br />
      Eliminating the old-fashioned icon at the top right was easy. What I'm having trouble with, though, is setting the page background color to white, and altering the size. (I did manage to create generous margins by using AddBrandingImage without defining any images.)<br />
      <br />
      There's the "SetCtlColors" command which seems to be undocumented. (Or, more likely, is just not where I'm looking for it.) Will that help me? And, if so, where can I find a description and examples?<br />
      <br />
      Secondly, how does NSIS decide the size of the dialog boxes? Is there an easy way to force a fixed size?<br />
      <br />
      Thanks in advance for your help.<br />
      <br />
      Michael</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">16th September 2008 23:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK, I'm a whiner. :) I found the docs for SetCtlColors (right under my nose!) but it's still not clear how I would change the BG color of an entire dialog, or better yet, the standard bg color for all dialogs.<br />
      <br />
      Is there a really clear writeup somewhere?<br />
      <br />
      Thanks!<br />
      Michael</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">17th September 2008 01:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Are you looking for InstallColors?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">17th September 2008 03:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the suggestion... I'm not sure what InstallColors changes, but it doesn't seem to change the overall color of a dialog box. Or I'm not doing it right.<br />
      <br />
      (The docs are vague. Does it change the color of the install details window?)<br />
      <br />
      What I'm looking for is to change the background color of the entire dialog box from the normal Windows tan color to bright white. (And, of course, have all the gadgetry within the dialog also match.)<br />
      <br />
      Michael</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">17th September 2008 03:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've reread the description, and it is not what you are looking for. It will set the colors in the details list box. I don't see a command to change the dialog background.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">17th September 2008 04:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sigh. Thank you for looking for a solution! There's got to be a way to do this...<br />
      <br />
      Michael</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">17th September 2008 13:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think you'll find it easy to 'theme' your installer this way - probably easier to hack the resource file instead?<br />
      <br />
      Here's an example that does the outer and inner dialog.. thing is, you'll also have to do all the labels.. and buttons.. and those sometimes refuse to change, and they'll still keep the grey 3d colors, and so forth.<br />
      <br /></p>
      <pre>
<code><br />OutFile "test.exe"<br /><br />Section ""<br />        FindWindow $0 "#32770" "" $HWNDPARENT<br />        SetCtlColors $HWNDPARENT 0xFFFFFF 0x00FF00<br />        SetCtlColors $0 0xFFFFFF 0x00EE00<br /><br />        ShowWindow $HWNDPARENT 0<br />        ShowWindow $HWNDPARENT 1<br />SectionEnd<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">17th September 2008 18:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, Animaether! That's a useful code fragment, but I'm guessing you're correct about the difficulties.<br />
      <br />
      So here's the next question: I downloaded ResHacker and tried messing around with the default.exe. (NSIS\Contrib\UIs\default.exe) When I compiled an installer that didn't use MUI -- that is, no Modern UI includes, macros, defines, etc., a "naked" installer -- I was surprised to see that none of my changes were present. Is there something I need to do in order to make my changes "stick"? Or am I simply editing the wrong file?<br />
      <br />
      Thanks again for your help!<br />
      Michael</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">17th September 2008 19:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ChangeUI</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">theTallGuy</span><br />
      <span class="post-time small text-muted">19th September 2008 01:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK, for the record, I was able to achieve my goal, by a more roundabout route.<br />
      <br />
      I tried the different alternate UIs. Most choked when I ran them through reshacker, and I'm not enough of a hacking stud to figure out why. (Though one guess is that the UIs are fairly old, so perhaps they don't work well with recent NSIS builds.) Finally, I downloaded UltraModernUI, which has a fresh build out and a lot of forum activity. To my delight, I could adjust things with ResHacker and it actually worked. Combined with a special "white" skin, which changes all the colored graphics to white squares, and it worked.<br />
      <br />
      (Well, almost. There's one little bit of weirdness that I'll bring up on the UMUI thread, but it's relatively minor.)<br />
      <br />
      Of course, if I were feeling *really* ambitious, I would have coded my own using nsDialogs, but I've already spent too long on this project as it is.<br />
      <br />
      Thanks again to everyone who offered suggestions!<br />
      Michael</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
