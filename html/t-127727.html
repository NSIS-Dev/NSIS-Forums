<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Plugin enumeration bug"><title>Plugin enumeration bug - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Plugin enumeration bug</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=127727">Plugin enumeration bug</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Ippi</span><br><span class="post-time small text-muted">8th March 2003 18:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Plugin enumeration bug</strong><br>Recently I have tried the NSIS2b2 (was using 1.98 before) and on one of my home systems (P-III 1200MHz, WinXP Pro) it is completely unusable because of the following bug:<br>- after plugin enumeration, depending on currently available memory amount, makensis once or twice displays the message <i>"ack! realloc(557359664) failed, trying malloc(278663448)!"</i> and then stops. When I increase the swapfile up to 1GB, it works, but uses more than gigabyte of memory, compiles even simple scripts about half a minute and on top of everything it totally swaps out the OS and applications.<br><br>I've compiled the debug version and found the cause of this error: the <b>m_funcsCount</b> in the <b>Plugins</b> class is not initialized to zero before use and in my case at the end of <b>Plugins::FindCommands</b> it become equal to 69534788.<br><br>The <i>"m_funcsCount=0;"</i> at the beginning of Plugins::FindCommands completely rids of the bug.<br><br>I think it will not be difficult to fix this permanently ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">8th March 2003 20:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you for ridding the world of my stupid bug :)<br><br>I hope this one will fix every BSOD some people got with every run of makensis, with some compiles, with some version, on some machines. An variable taht was not initialized sounds like the right reason.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>