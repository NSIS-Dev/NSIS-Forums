<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="setting parent directory as default from registry" />

  <title>setting parent directory as default from registry - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">setting parent directory as default from registry</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=153996">setting parent directory as default from registry</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">WiKiD</span><br />
      <span class="post-time small text-muted">26th October 2003 01:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>setting parent directory as default from registry</strong><br />
      Hey im having some difficulty setting the parent directory as the user's prompting directory.<br />
      <br />
      Let me explain, as i went <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=65114&amp;highlight=parent" target="_blank">here</a> but it didnt answer exactly what i wanted to do.<br />
      <br />
      okay, i want to go into the registry and take from HKCU "Software\Valve\Steam" ModInstallPath 's data. Once i have that, i can get the dir (c:\games\steam\steamapps\[steamaccount]\half-life) so i can get the parent directory and change the new path to C:\games\steam\steamapps\[steamaccount]\counter-strike.<br />
      <br />
      While it seems that it is a simple task to do, the problem i am running into is actually setting this as the default that the user gets when they select the directory, as opposed to just doing this without user intervention. I've tried all day to get this to work, and im feelin pretty frustrated right now...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br />
      <span class="post-time small text-muted">26th October 2003 06:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should get this info before you show the directory page and set the $INSTDIR, or if using a different variable for directory page the variable you are using, to the value of the prossesed path before showing the directory selection page.<br />
      <br />
      Vytautas</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">WiKiD</span><br />
      <span class="post-time small text-muted">26th October 2003 14:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ive tried that however i seem to have a problem because you would need to do this as a function or section and i cannot get them to work with InstallDir/InstallDirRegKey because that cannot be decalred within a function/section and ReadRegString and other similars can only be decalred within one...<br />
      <br />
      can someone give me some pseudo code to work with please?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">26th October 2003 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can change $INSTDIR without InstallDir and InstallDirRegKey. Wherever a variable is accepted, $INSTDIR is accepted too. For example:<br />
      <br /></p>
      <pre>
<code>Function .onInit<br />  StrCpy $INSTDIR "C:\forced\path"<br />FunctionEnd</code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
