<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content=".ini page issue....." />

  <title>.ini page issue..... - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">.ini page issue.....</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302799">.ini page issue.....</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">parag_NSIS</span><br />
      <span class="post-time small text-muted">5th February 2009 06:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>.ini page issue.....</strong><br />
      Hi,<br />
      <br />
      In one of my (InstallOptions) .ini page, the last two fields (Label and DirRequest) are comming in different background color than the other fields.<br />
      <br />
      I have not applied any new formatting to those two fields (Label and DirRequest).<br />
      <br />
      Why those two fields are comming in different background color?<br />
      <br />
      BTW, I am using the following code to make them similar with the other fields but the code is not working....<br />
      <br />
      <b>Page custom in_DirectoryListing_Pre in_DirectoryListing_show in_DirectoryListing_leave</b><br />
      <br />
      <br />
      Function in_DirectoryListing_show<br />
      ;MessageBox MB_OK "In Show........."<br />
      FindWindow $0 "#32770" "" $HWNDPARENT<br />
      GetDlgItem $0 $0 0x50482 ;DirRequest Control Id<br />
      SetCtlColors $0 000000 3D66AB<br />
      <br />
      FindWindow $0 "#32770" "" $HWNDPARENT<br />
      GetDlgItem $0 $0 0xB0448 ;DirRequest Control Id<br />
      SetCtlColors $0 000000 3D66AB<br />
      FunctionEnd<br />
      <br />
      Am I missing something?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">5th February 2009 07:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">are you using a visual theme/skin in your windows installation that - for some reason - doesn't affect those controls, perhaps?<br />
      also, this seems suspect...<br /></p>
      <pre>
<code><br />GetDlgItem $0 $0 0x50482 ;DirRequest Control Id<br />GetDlgItem $0 $0 0xB0448 ;DirRequest Control Id<br /></code>
</pre><br />
      The first has dialog item ID 328834, and the next is 721992? You have nearly 400,000 items in your dialog? o_O I think you might have been using the HWND values from a specific run?<br />
      <br />
      If you are using installoptions, then the controls on your dialog start numbering their dialog item ID at 1200 for the first control, then move on to 1201 for the 2nd, 1202 = 3, etc.<br />
      <br />
      Alternatively, you can get the HWND (which changes every time the dialog is created), from the INI file:<br />
      'ReadINIStr $R1 $PLUGINSDIR\test.ini "Field 1" "HWND"', and use that directly (no need for GetDlgItem) in your SetCtlColors call.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">parag_NSIS</span><br />
      <span class="post-time small text-muted">5th February 2009 08:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      No I am not using any external theme/skin. I am using the Ultra Modern UI.<br />
      <br />
      BTW, Where can I use this code, <b>pre function?</b> or <b>show function?</b><br />
      <br />
      ReadINIStr $R1 $PLUGINSDIR\test.ini "Field 1" "HWND"<br />
      <br />
      Is there a show function available for CustomPage like the inbuild pages of NSIS?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">5th February 2009 10:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you would use that code -after- you initialize the dialog.<br />
      <br />
      Can't say I have any experience with UMUI itself, but I suspect that's why the background color doesn't match.<br />
      <br />
      Once you've got the correct HWNDs, try setting the background color to 'transparent' before specifying the color directly. If that works, then you don't have to worry about any background color changes in the future, should you choose to use a different UMUI background color.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">5th February 2009 12:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You do realise that Page Custom doesn't have a pre function; only show and leave. You are showing your custom page in its leave function.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
