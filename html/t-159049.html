<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Problems with MUI ..."><title>Problems with MUI ... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Problems with MUI ...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=159049">Problems with MUI ...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">9th December 2003 02:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Problems with MUI ...</strong><br>Hi, i'm designing a pack for CS. And most of it is already done. But now, i've got into some problems. My installer was free of bugs and now, when i try to compile it, i first get some warnings and when it reaches the part of the icon of the installer, it stops the compilation with the error i'll post below (i'll post the entire compilation log).<br><br>------------<br>rocessing script file: "C:\1_dc\pack\installer\scripts\installer.nsi"<br>!include: "MUI.nsh"<br>!include: "C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh"<br>NSIS Modern User Interface version 1.67 - © 2002-2003 Joost Verburg (C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh:11)<br>!include: closed: "C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh"<br>!include: closed: "C:\ARQUIVOS DE PROGRAMAS\NSIS\Include\MUI.nsh"<br>!define: "MUI_PRODUCT"="Jackal Counter-Strike Pack"<br>!define: "MUI_VERSION"="v1.0 RC2"<br>!insertmacro: MUI_LANGUAGE<br>warning: !warning: The MUI_PRODUCT and MUI_VERSION defines have been removed. Use a normal Name command now.<br>(macro:MUI_INSERT:3)<br>!insertmacro: end of MUI_LANGUAGE<br>Function: ".onInit"<br>InitPluginsDir<br>File: "splash.bmp"-&gt;"$PLUGINSDIR\splash.bmp" [compress] 14854/274806 bytes<br>File: "splash.wav"-&gt;"$PLUGINSDIR\splash.wav" [compress] 19651/31674 bytes<br>File: "advsplash.dll"-&gt;"$PLUGINSDIR\advsplash.dll" [compress] 2665/5120 bytes<br>Plugin Command: show 1000 600 400 0xFF00FF $PLUGINSDIR\splash<br>Pop: $0<br>MessageBox: 4: "Isso irá instalar o Jackal Counter-Strike Pack v1.0 RC2. Deseja prosseguir?" (on IDYES goto NoAbort)<br>Abort: ""<br>MessageBox: 0: "Antes será feita uma cópia de segurança de seus arquivos para futura desinstalação."<br>FunctionEnd<br>XPStyle: on<br>CRCCheck: force<br>overwrite = 0, last_overwrite = 0<br>SetOverwrite: on<br>OutFile: "jcp10.exe"<br>LicenseData: "C:\1_dc\pack\hl\cstrike\licenca.txt"<br>InstallRegKey: "HKCU\Software\JCP\"<br>warning: InstallDirRegKey: specified multiple times, wasting space (C:\1_dc\pack\installer\scripts\installer.nsi:34)<br>InstallRegKey: "HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall\JCP\UninstallString"<br>warning: InstallDirRegKey: specified multiple times, wasting space (C:\1_dc\pack\installer\scripts\installer.nsi:35)<br>InstallRegKey: "HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall\JCP\DisplayName"<br>Function: "GetHLPath"<br>ReadRegStr $1 HKLM\Software\Valve\Half-Life\InstallPath<br>FunctionEnd<br>Function: ".onVerifyInstDir"<br>Call "GetHLPath"<br>Pop: $1<br>IfFileExists: "$1\hl.exe" ? PathGood :<br>Abort: ""<br>FunctionEnd<br>!define: "MUI_WELCOMEPAGE"=""<br>!define: "MUI_LICENSEPAGE"=""<br>!define: "MUI_COMPONENTSPAGE"=""<br>!define: "MUI_COMPONENTSPAGE_SMALLDESC"=""<br>!define: "MUI_FINISHPAGE"=""<br>!define: "MUI_FINISHPAGE_SHOWREADME"="$1\cstrike\leia-me.txt"<br>!define: "MUI_FINISHPAGE_NOTCHECKED"=""<br>!define: "MUI_FINISHPAGE_NOAUTOCLOSE"=""<br>!define: "MUI_UNINSTALLER"=""<br>!define: "MUI_ABORTWARNING"=""<br>!define: "MUI_BRANDINGTEXT"="Jackal Counter-Strike Pack v1.0 RC2 distribuído pelo NSIS v2.0b4"<br>!define: "MUI_FONT"="Tahoma"<br>!define: "MUI_FONTSIZE"="8"<br>!define: "MUI_FONT_HEADER"="Tahoma"<br>!define: "MUI_FONTSIZE_HEADER"="8"<br>!define: "MUI_FONT_TITLE"="Tahoma"<br>!define: "MUI_FONTSIZE_TITLE"="8"<br>!define: "MUI_INSTALLCOLORS"="/WINDOWS"<br>!define: "MUI_PROGRESSBAR"="SMOOTH"<br>!define: "MUI_ICON" already defined!<br>Error in script "C:\1_dc\pack\installer\scripts\installer.nsi" on line 73 -- aborting creation process<br>------------<br><br>Sorry about the huge post and my full of mistakes english ;)<br><br>But i would apreciate if some of you can help me, thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">9th December 2003 02:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Have you recently updated NSIS? If so then its because MUI has changed some of its commands. See MUI Readme file for info and if you still can't figgure it out attach your script and I'll take a look at it.<br><br>Vytautas ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">9th December 2003 04:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Actually, i wrote my script in v2.0b3 and updated to CVS. Then, when it bugged, i installed v2.0b4 ... Should it make any difference?! If yes, where could i find the installer of NSIS v2.0b3 so that i don't need to rewrite the script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Vytautas</span><br><span class="post-time small text-muted">9th December 2003 05:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes there are quite a few differences between b3 and b4/b5 versions of nsis. As for a link to b3 I think you might be able to get it from the SourceForge CVS, kichik will know for sure. Although the changes should not be too hard to implement and some of the new feature should be worth the upgrade of the scripts.<br><br>Vytautas</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">9th December 2003 13:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">All previous NSIS 2 versions are available at:<br><br><a href="http://sourceforge.net/project/showfiles.php?group_id=22049" target="_blank">http://sourceforge.net/project/showf...group_id=22049</a><br><br>All previous NSIS 1 versions are available at:<br><br><a href="http://www.nullsoft.com/free/nsis/version-history.html" target="_blank">http://www.nullsoft.com/free/nsis/version-history.html</a><br><br>But it is recommened that you update your script and use NSIS 2.0b4.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mæster</span><br><span class="post-time small text-muted">4th January 2004 10:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">@Cdzitu:<br>Had the same problem with the icon. The solution is to place the icon-definition before! any page-definitions:<br>example:<br><br>!define MUI_ICON "MyIcon.ico"<br>...<br>!insertmacro MUI_PAGE_WELCOME<br>...<br><br>Regards,<br>Mæster.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">4th January 2004 10:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There are more old things in your script<br><br>You have to add new page macros and use normal Name and BrandingText commands. These font settings are also not there anymore, the Modern UI always uses the system font now. All interface settings should be set before the pages.<br><br>I definately recommend you to upgrade your script. Using old development versions is not a good idea.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br><span class="post-time small text-muted">4th January 2004 15:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">InstallRegKey is wrong!!!<br>it has to be InstallDirRegKey<br>and u defined it few times. like the compiler sais, it only can be defined one time.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">cpp1977</span><br><span class="post-time small text-muted">6th April 2004 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Mæster</i><br><b>@Cdzitu:<br>Had the same problem with the icon. The solution is to place the icon-definition before! any page-definitions:<br>example:<br><br>!define MUI_ICON "MyIcon.ico"<br>...<br>!insertmacro MUI_PAGE_WELCOME<br>...<br><br>Regards,<br>Mæster.</b></blockquote>I also had the same error when I had the MUI_ICON line AFTER these 2<br>-------------------------------------------------<br>!define MUI_ABORTWARNING<br>!insertmacro mui_language "English"<br>-------------------------------------------------<br><br>once I moved before, it all worked<br><br><br>p.s. how do I get the exact version of nsi I'm using, my help/about says only 2.0<br>nothing about r1 or r2 whatever...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">VegetaSan</span><br><span class="post-time small text-muted">6th April 2004 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">and for the Icon ... you need to define 2. I tried one but it will give a error at the end<br><br></p><pre>
<code><br>!define MUI_ICON "C:\icon.ico"<br>!define MUI_UNICON "C:\icon.ico"<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cpp1977</span><br>
      <span class="post-time small text-muted">6th April 2004 14:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by VegetaSan</i><br>
        <b>and for the Icon ... you need to define 2. I tried one but it will give a error at the end<br>
        <br></b>
        <pre>
<b><code><br>!define MUI_ICON "C:\icon.ico"<br>!define MUI_UNICON "C:\icon.ico"<br></code></b>
</pre>
      </blockquote>actually i have just the 1 and not the uninstall one and I get no errors. I also have no uninstall parts in my install either
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>