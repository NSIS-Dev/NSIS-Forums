<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Compile time: reading value from a .ini file" />

  <title>Compile time: reading value from a .ini file - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Compile time: reading value from a .ini file</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=173621">Compile time: reading value from a .ini file</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thelliez</span><br />
      <span class="post-time small text-muted">16th March 2004 23:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Compile time: reading value from a .ini file</strong><br />
      Trying to write a generic installer for different flavors of a product, I would like to have the name of the compiled installer to reflect few options (like a build number).<br />
      <br />
      For example, instead of setup.exe, I would like something like setup_123.exe where 123 is a dynamic string available in a .ini file (built from an ant/cvs script).<br />
      <br />
      If I could do some sort of ReadINIStr at compile time I would be set.<br />
      <br />
      I guess I could try passing parameters to the compiler but it would not be as convenient.<br />
      <br />
      Suggestions?<br />
      Thierry</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br />
      <span class="post-time small text-muted">17th March 2004 01:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You will have to create a 'wrapper' installer using NSIS or any other programming language, then call that wrapper from your nsis script using the '!system' command. This wrapper should read your ini file(s) and either define the required defines automatically or generate an include file which can then be included into the script.<br />
      <br />
      Vytautas</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rainwater</span><br />
      <span class="post-time small text-muted">17th March 2004 03:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How about building a config.nsh file that !define's the properties? Otherwise, if you are forced to read a certain ini, then you will need to do what Vytautas said.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tolan</span><br />
      <span class="post-time small text-muted">30th November 2006 07:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You may use some bat magic :)<br />
      My solution (tested on WinXP):<br />
      <br />
      !tempfile VAR_FILE<br />
      !system '@for /f "eol=# delims== tokens=1,2" %i in (ini_file.ini) do @echo ^!define "%i" "%j" &gt;&gt; "${VAR_FILE}"'<br />
      !include "${VAR_FILE}"<br />
      !delfile "${VAR_FILE}"<br />
      !undef VAR_FILE<br />
      <br />
      Hope this helps.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
