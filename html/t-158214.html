<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Help With INI Istall Options"><title>Help With INI Istall Options - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Help With INI Istall Options</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=158214">Help With INI Istall Options</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Woodbark</span><br><span class="post-time small text-muted">1st December 2003 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Help With INI Istall Options</strong><br>I am trying to create an installer that gets the components to install from an INI file extracted .oninit but I am unsure as to how to go about this. Depending on the INI file setting will depend on which components get selected to install, follows an example of what i am trying to do:-<br><br>ReadINIStr $INI_VALUE "c:\Install.ini" "CONFIG" "Email"<br>StrCmp $INI_VALUE "1" "" +8 ;NO_EMAIL<br>SectionEnd<br><br>SubSection /e "Extra Options" SecExtra<br><br>Section "E-mail Option" SecEmail<br>StrCmp $INI_VALUE "1" +6 "";NO_EMAIL<br><br>NO_EMAIL:<br>SectionEnd<br>Section /o "E-mail Option" SecEmail2<br><br>Main:<br>SectionIn 1 RO<br><br>So if the StrCmp is true it should select the component to install, if the StrCmp is False then is should deselect the component not to install.<br><br>I hope this makes sense to someone and I am trying to do something that is possible within NSIS.<br><br>Thanks in advance.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">1st December 2003 17:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You need to unselect the sections before the components page is shown. Probably the best place to do this is .onInit. To unselect a section you don't jump over its definition (you can only jump over instructions, see docs about relative jumps), instead you set the section's flags and remove SF_SELECTED. There are macros that make this easier in Include\Sections.nsh. To include those in your script simply use !include "Sections.nsh".</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Woodbark</span><br><span class="post-time small text-muted">1st December 2003 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks I will give it a try</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Woodbark</span><br><span class="post-time small text-muted">1st December 2003 18:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Right I cannot work out what i need to include in my installer to do this yet (apart from !include Sections.nsh) thanks for pointing me in the right direction, if you can give any more help it would be appreciated (if you have a moment) as I am new to this I will get there eventually i think but may take some time.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>