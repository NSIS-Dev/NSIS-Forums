<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Torrent Patcher?" />

  <title>Torrent Patcher? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Torrent Patcher?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=315758">Torrent Patcher?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rein Masamuri</span><br />
      <span class="post-time small text-muted">27th December 2009 09:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Torrent Patcher?</strong><br />
      OK. I'm aware of BattleTorrent but I'm a complete nub with NSIS.<br />
      I have no idea where to even start with this.<br />
      <br />
      Bittorrent will be the ideal distribution for my program since we will be making small modifications to large files (i.e. they'll essentially just hashcheck their current files, and it will modify the ones that need to be updated).<br />
      <br />
      Can anybody help with a simple starting point on how to utilize bittorrent in NSIS?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">27th December 2009 09:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Torrent Patcher?</strong><br /></p>

      <blockquote>
        Bittorrent will be the ideal distribution for my program since we will be making small modifications to large files (i.e. they'll essentially just hashcheck their current files, and it will modify the ones that need to be updated).
      </blockquote>Are you really sure about this? BitTorrent pieces are always of a fixed size, so if you add even a single byte inbetween two others somewhere, all file data from that point on will have to be redownloaded because the piece hashes have changed. What you probably want is a diff patcher, not BitTorrent hashchecking.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rein Masamuri</span><br />
      <span class="post-time small text-muted">27th December 2009 09:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Re: Torrent Patcher?</strong><br /></p>

      <blockquote>
        <i>Originally posted by MSG</i><br />
        <b>Are you really sure about this? BitTorrent pieces are always of a fixed size, so if you add even a single byte inbetween two others somewhere, all file data from that point on will have to be redownloaded because the piece hashes have changed. What you probably want is a diff patcher, not BitTorrent hashchecking.</b>
      </blockquote>A diff patcher sounds wonderful.<br />
      I take it you'd have to download the diff file and use a diff patcher to make the modifications?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">27th December 2009 10:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Re: Re: Torrent Patcher?</strong><br /></p>

      <blockquote>
        <i>Originally posted by Rein Masamuri</i><br />
        <b>A diff patcher sounds wonderful.<br />
        I take it you'd have to download the diff file and use a diff patcher to make the modifications?</b>
      </blockquote>Yeah, that sounds about right. One method would be to use the md5 plugin on a file and send the md5sum to the server, which then decides what diff file to send back to the installer. After download, the installer then patches the file.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rein Masamuri</span><br />
      <span class="post-time small text-muted">27th December 2009 11:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Re: Re: Re: Torrent Patcher?</strong><br /></p>

      <blockquote>
        <i>Originally posted by MSG</i><br />
        <b>Yeah, that sounds about right. One method would be to use the md5 plugin on a file and send the md5sum to the server, which then decides what diff file to send back to the installer. After download, the installer then patches the file.</b>
      </blockquote>That is way above my head I think, but thanks.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">27th December 2009 13:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well diff patches only work from ONE file to ONE other file. If your software has v1.0, v1.1 and v1.5, then the 1.0-&gt;1.5 and 1.1-&gt;1.5 diff patches will be different.<br />
      <br />
      To deal with this, you'll have to either do incremental upgrades (first 1.0-&gt;1.1 and then 1.1-&gt;1.5), or keep diff patches for both possibilities. The method I described above would allow the installer to only download the diff patches it needs. If it sends the md5 checksums of the v1.1 files to the server, the server will know it needs to give the 1.1-&gt;1.5 diff patches. Then in the future when you create a v1.6, the server would return the 1.1-&gt;1.6 diff patches.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
