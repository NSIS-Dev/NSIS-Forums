<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="icons replacement problem" />

  <title>icons replacement problem - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">icons replacement problem</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=206783">icons replacement problem</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">krisbg</span><br />
      <span class="post-time small text-muted">3rd February 2005 18:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>icons replacement problem</strong><br />
      Hi<br />
      I have a problem with the icons in the case when i create a new version of the setup with new icons and run it on a machine where there was an older installation with old icons:<br />
      <br />
      The icons in the start menu, on the desctop and in the quicklaunch bar are all the ones from the previous installation. Fortunately I found a solution for this problem (maybe I read it somewhere in this forum a year ago..) - i simply change the name of the install and the uninstall icons every time i make a new setup with a new icon. This works for me for a year but yesterday I created a new setup and saw that the problem is still present especially with the uninstall icon. The new uninstall icon which the new setup has to place in the start menu isn't there - instead there is the old uninstall icon from the previous installation. This occurs on all windows versions except XP where everything is OK. And the solution with changing icon name in every new setup I create doesn't work.<br />
      <br />
      Any idea will be appreciated!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">niteflyer</span><br />
      <span class="post-time small text-muted">3rd February 2005 18:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It seems that the icon is cached. Maybe the system has to reboot, or deleting the file ShellIconCache (in windir ?) could help, so that the system is forced to build a new one. But I remember some post, where there was a smarter solution...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd February 2005 19:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This should update the icons:<br />
      <br />
      <a href="http://nsis.sourceforge.net/archive/viewpage.php?pageid=202" target="_blank">http://nsis.sourceforge.net/archive/...php?pageid=202</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">krisbg</span><br />
      <span class="post-time small text-muted">4th February 2005 14:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello again!<br />
      I tried RefreshShellIcons but it doesn't work... Is it important when exactly I will call it? I tried calling it in Section1 immediately after installing the shortcuts or in FinishSection after creating teh uninstaller.exe</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">krisbg</span><br />
      <span class="post-time small text-muted">4th February 2005 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello all! I think I've found a solution (at least it works on two machines till now..).<br />
      In the script I was first creating the uninstall shortcut and then creating the uninstall.exe. Of course in this case I think it is normal Windows not to be able to find the right icon because the exe is still not there and maybe it gets the icon from the cache. So when I moved the uninstall shortcut creation after the creation of the uninstall.exe everything is OK. I'm happy:))!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
