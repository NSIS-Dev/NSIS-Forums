<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Update Check / Auto Update / Web Download" />

  <title>Update Check / Auto Update / Web Download - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Update Check / Auto Update / Web Download</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=204817">Update Check / Auto Update / Web Download</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">xtf</span><br />
      <span class="post-time small text-muted">13th January 2005 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Update Check / Auto Update / Web Download</strong><br />
      Hi,<br />
      <br />
      I'm using NSIS as installer for some apps I wrote. This works great. Now I'm wondering:<br />
      <br />
      Is there a tool available that compares the local version of an app to the version available for download, notifies the user if this is the case and maybe even automatically download (and maybe install) this new version?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">13th January 2005 17:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How I do this :)<br />
      On regular updates (like weekly advertisement rotation ;) ) program first reads XML configuration file (fixed URL), where one of optional tags is "version=xxx". This may be static or script generated file, XML or not. Next step - parsing, and if available version is high then the current one, program displays message box or adds "Update" item to main program popup menu. If "yes" you can point default browser to package URL. Or program can silently download new package without any popups or menu items - very good for big packs, you can do this at night( few GBytes ;) ). New package URL may be static (defined during last install/update) or dynamic (defined as attribute in the xml file).<br />
      Finally this is easy (if packages are not huge), but I don't know ready and free tools :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th January 2005 18:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've done this numerous times. What Takhir explained is exactly how I did it.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">13th January 2005 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I am using this method to:<br />
      install update files.... if needed...<br />
      Or launch my 'real' application and write an 'user variable' xml file if everything is up to date...<br />
      <br />
      all the user does is click on my nsis app...to them they are clicking on the main app...<br />
      <br />
      this is extremely powerful :) and quite cool</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th January 2005 20:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">My 'installer' (or rather some software I wrote in NSIS) would update itself (the exe file)<br />
      <br />
      I'd firstly download the update to "myapp.exe_update" (through the main "myapp.exe" application)<br />
      I'd then extract a seperate exe called "install_update.exe", Exec it and Quit.<br />
      The "install_update.exe" program would Delete "myapp.exe" and Rename "myapp.exe_update" to "myapp.exe" (after a confirm MessageBox).<br />
      Finally it would Exec it and Quit itself also!<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">grahama</span><br />
      <span class="post-time small text-muted">13th January 2005 20:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes...I do that too with what I am doing now:)<br />
      all of my relevant file versions are in a ini file downloaded and compared to a local ini file....Seemed the writing files to the registry was blocked for certain corporate users, so I switched to straight INI comparisons.<br />
      <br />
      really cool in that you can update/replace the icon of your installer.exe this way....<br />
      <br />
      I am very happy with it so far...in that it makes installing/launching applications a brain-dead /one-click affair for the average user<br />
      It happens so fast that the user does not know the difference.<br />
      g</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">13th January 2005 21:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Takhir</i><br />
        <b>How I do this :)<br /></b>
      </blockquote>That's a good way to get the job done. But it requires every app to take care of it's own auto-update.<br />
      Wouldn't it be great if this could be done as part of the NSIS installer/updater, such that every app can take advantage of this?<br />
      The updater could also be made smart enough to only download files that actually changed.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">13th January 2005 21:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's possible with NSIS.<br />
      See this for example:<br />
      <a href="http://hmd.hostileintent.org/mapupdater/manual.html" target="_blank">http://hmd.hostileintent.org/mapupdater/manual.html</a><br />
      That was written in NSIS (by myself :))<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">13th January 2005 21:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is the source code of that app available?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">14th January 2005 07:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In most cases requirements for "updater" integration with main application are too high to create universal program. But I'll think about this too :) . Mapupdater is a specialized program, but I like it's ideas. Most probably this should be hidden resident application with a list of programs and schedule, some settings dialog (like mapupdater shows).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">14th January 2005 09:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What kind of integration is required?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">14th January 2005 10:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1. For example, customer wants Update banner to be visible on the top of <b>his</b> application if new version is available, so we need at least some common interface between "versions tracker" and app.<br />
      2. Partial and silent replacements like dlls (not a whole package download for big apps) may be a real head pain (for example, sometimes it is not easy to restart application with replaced dll - you should stop it first, and not all apps accepts WM_CLOSE).<br />
      May be more reasons, but finally we can skip most of them <b>if</b> application was designed with "tracker" requirements, so these requirements should be standartized first (or stupied customers will never agree with this).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">14th January 2005 18:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">A bit long, but I think this is no bad idea.<br />
      <br />
      I thought about the following Update feature, so one could have 1 installer for all:<br />
      <br />
      - full install from scratch<br />
      - updater<br />
      - web updater<br />
      - web install<br />
      <br />
      Special web features within installer only make sence if the files are only downloaded if needed.<br />
      <br />
      My current solution is one installer for Full and Update (Update removes the previous install, letting only some user settings there). This kind of Update outmatches file-only-updates a bit, because you can change application files as you want. No need to worry about compatibility.<br />
      <br />
      So the ideal solution (for me) would be:<br />
      <br />
      The installer has some file listing with version numbers of the application at the time the installer was created. Maybe the files itself are contained in the installer.exe. It may ask the user to get some new file listing via internet (online update). In any case installer has some recent listing and may have some required files in it. Installer checks what files are missing. In update mode installer checks whether the missing files were already installed (i.e. on user's hard disk). After this some files may be missing. In this case the installer downloads just these files, stores all files (fresh files from web, up to date files from installer itself, up to date files from previous installation) into some temp dir, then the previous installation gets removed and the new release gets installed.<br />
      <br />
      Advantages:<br />
      - minimal download needs<br />
      - one installer for update and installation from scratch<br />
      - offline installer and online installer<br />
      - you could simply build some installer without application files to build some online-only-installer (webinstall)<br />
      - you could include all needed files for some offline-only-installer (maybe with online-check-for-new-updates option during install)<br />
      <br />
      Even if the install package is older than the previously installed version you could use it to bring the application up to date.<br />
      <br />
      I didn't realise this yet because this seems to be a heavy and complex task. Probably this isn't worth while for just one or two people.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">14th January 2005 18:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by stb</i><br />
        I didn't realise this yet because this seems to be a heavy and complex task. Probably this is worth while for just one or two people.
      </blockquote>It's only complex and heave when everyone has to write it from scratch, just like an installer.<br />
      But if there's an updater (like NSIS) that can be easily customised, etc, I think it'd be usefull for nearly every app.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">14th January 2005 19:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      maybe we can build a team of few people to realise this. Maybe 3 or 4 people is a good team size. Of course I'm with this.<br />
      <br />
      Some idea's:<br />
      <br />
      I wrote quite some NSIS code and realised that for most features macros are easier to handle than functions. You don't need "un." (double) and you only include code you actually use. So I would prefer some macro set.<br />
      <br />
      Some work is required on defining and comparing some "file version list". My suggestion is some ini file:<br />
      [myapp.exe]<br />
      version=1.2.3.4<br />
      [myapp_helper.dll]<br />
      version=5.6.7.8<br />
      This is simple and maybe extensible (I think about MD5 checksum).<br />
      <br />
      I have some macros to install DLLs similar to the upgradeDll macro (and that newer thing in current NSIS). I think this should be flexible enough so everyone can user his own technique. Building some temp dir with the install files (including corresponding fileversionlist.ini) should be fine.<br />
      <br />
      I looked at some macros and macro libs like LogicLib and StrFunc. Personally I prefer using my own macro set. That's mainly because I learned NSIS "from scratch" :-) But I don't want to enjoin these things - that interdepends with my work package (size).<br />
      <br />
      We would use nsisDl, wouldn't we? Otherwise we could add some more helper functions into the download dll we would use. So if some C(++) guys want to join...<br />
      <br />
      Just some ideas.<br />
      <br />
      Stefan</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">14th January 2005 19:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The upgrader (and file version list) should be automatically generated I think, if possible, in the same step as compiling the .nsi.<br />
      I'd also be nice to generate only a single container, with all single files individually compressed (non-solid). This container could then even be used as normal installer.<br />
      You could then download individual files by requesting only a part (both FTP and HTTP support this, right).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">14th January 2005 19:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To make it clear: I want some single installer.exe which has _all_ features. I may build different installers but only to get different file sizes (e.g. one webinstaller 100kb, one full installer, one full installer without M$ runtimes).<br />
      <br />
      Yes, files should be downloaded separately (otherwise the thing is easy: download the fresh full installer from the web). Whether<br />
      <br />
      Of course building installers should be batch-processable. I build all my installers using some bat file. Creating the ini file would be some pre-processing step (if you have files in your app without version information inside you need this, if not you can make your own little NSIS preprocessor).<br />
      <br />
      PS: I prefer code running on most OS. Maybe some old W95 installation can be excluded from web features if IE is not installed.. but in general installer should work on all OS (not just win2k/xp)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">N!ghtY</span><br />
      <span class="post-time small text-muted">14th January 2005 23:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is there anything like this working already?<br />
      My needs would be a file that people can download once and on its first run it installs let's say 10 files on a ftp or http location. Next time the user runs the application it should check for updates, eg if there are additional 2 files download them and put into install dir.<br />
      <br />
      Any examples? I am totally new and search for a free installer system with web updating. Of the ones i found nsis looks most promising, but i am lost...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Olaf van der Spek</span><br />
      <span class="post-time small text-muted">15th January 2005 22:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe the first version should be a simple updater that only checks whether there's an update available and if so, notifies the user.<br />
      Then more complex versions can be made later.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">17th January 2005 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Currently, my app checks for updates directly, downloads some app_update.exe from some fix URL, starts this exe and quits itself.<br />
      <br />
      For now I just download something like full package without runtimes. This package checks whether runtimes are installed (they will be) and then makes some uninstall/reinstall.<br />
      <br />
      So what I need is<br />
      1. some smaller update package (only downloading updated components)<br />
      2. some web installer which only downloads needed components (most people will have those runtime libraries anyway).<br />
      <br />
      I think this can be combined to some full/upgrade/online/offline installer. Detecting whether the current app is up to date is some small part of this and will happen automatically.<br />
      <br />
      Some META code:<br />
      <br />
      It all begins after the user starts some install.exe.<br />
      <br />
      1. Check whether application is already installed and get version number of this previous installation.<br />
      <br />
      2. Ask the user to check the web for a new version. This may be obligatory (webinstall.exe).<br />
      <br />
      3. Compare installed version to included/web version. The user may downgrade, upgrade or repair installation (install same version). If no previous installation exists this will be just some full installation.<br />
      <br />
      4. If user wants to perform some installation: Try to get all files needed for the new version. They may be on the hard disk already (previous installation), they may be included with the install.exe or the may need to be downloaded from the web.<br />
      <br />
      5. Copy files from previous installation to TEMP, remove previous, install new.<br />
      <br />
      Application and file version should be managed using some ini file. One can be found within install.exe (if this is no online-only-webinstaller), one can be found in the previous installation's application directory, one may be downloadable from the web. At least one such file is necessary to install.<br />
      <br />
      <br />
      So, to make your "check for update" program, you would make some small installer whithout appversion.ini and without any application files. So the user is forced to make the online-up-to-date-check.<br />
      <br />
      <br />
      I think the complete solution may be useful for many people as all common scenarios can be handled. And I think it could be done if we split the task into a couple of macros:<br />
      <br />
      - download macros (download single files from the web, download appversion.ini)<br />
      <br />
      - file managing macros (save previous installation's files, store files from install.exe and from URL))<br />
      <br />
      - version compare macros (comparing app versions, file versions)<br />
      <br />
      So, anyone interested in joining this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">starsign</span><br />
      <span class="post-time small text-muted">23rd June 2007 08:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      I was wondering if anything happened with this project? I am new to NSIS so I do not (yet) have the experience to develop the code discussed here...can anyone point me in the right direction of a developed solution?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">23rd June 2007 12:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The InetC plugin is the core piece of kit here along with ReadINIStr.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stb</span><br />
      <span class="post-time small text-muted">1st July 2007 19:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes. I think the remaining work can be done with some macros. It would be useful to define a common format for file versions so we can all use the same macro kit. I think this is something which will evolve with time...<br />
      <br />
      I did some things myself but did not make this generic yet. I need some people who commit to this one (and who can contribute specific ideas and code).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br />
      <span class="post-time small text-muted">4th July 2007 06:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello,<br />
      <br />
      Is this Updater project ready now?<br />
      <br />
      best regards<br />
      <br />
      josabraham</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">scanreg</span><br />
      <span class="post-time small text-muted">8th January 2010 18:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is this updater project still active?<br />
      <br />
      Is it available?<br />
      <br />
      Thanks :-)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
