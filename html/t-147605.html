<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS Update updates every single file"><title>NSIS Update updates every single file - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS Update updates every single file</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=147605">NSIS Update updates every single file</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">mikem4600</span><br><span class="post-time small text-muted">30th August 2003 14:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS Update updates every single file</strong><br>I had to format my hard drive due to a nasty crash, and I downloaded the latest nightly build for NSIS. But everytime I use the NSIS Update it tries to update every single file... I think it's because of the timestamps of the files or something.<br><br>Any suggestions? Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th August 2003 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What do you mean by tries to update every single file? It should update every single file... What does the log show that bothers you?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">30th August 2003 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think mikem4600 is complaining about what happens if you use a CVS snapshot ZIP file to update your NSIS installation and then later on try to run 'NSIS Update'.<br><br>Normally 'NSIS Update' will only download newer files, so a 'NSIS Update' run usually involves only a handful of files being downloaded, and this is not a time-consuming operation.<br><br>However, this is not the case if you have used a CVS snapshot to update NSIS by unzipping the snapshot on top of your NSIS installation. The data in the CVS folders in the snapshot does not match the date/timestamps on the actual files, so 'NSIS Update' has to assume that everything has been locally modified, renames these files and then downloads "clean" copies. 'NSIS Update' will in effect download EVERY file again which can take a very long time (and your NSIS installation will double in size).<br><br>Here are some examples from my system, after unzipping the 27 August (19:44 GMT) CVS snapshot:<br><br>Partial DIR listing from the {NSISDIR} folder:<br><br>makensis.exe 413,184 .a.. 15-08-03 12:44:06<br>makensisw.exe 69,120 .a.. 23-08-03 0:44:06<br><br>Extract from the 'Entries' file in the {NSISDIR\CVS} folder:<br><br>/makensis.exe/1.221/Fri Aug 15 19:44:05 2003/-kb/<br>/makensisw.exe/1.103/Sat Aug 23 07:44:06 2003/-kb/<br><br>Since the two EXE files have timestamps which differ from those in the 'Entries' file, 'NSIS Update' will download both files again.<br><br>[edit]Suspect the problem is related to timezones - the CVS snapshot data is timezone specific, so anyone in a different timezone will see the problem I described[/edit]</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th August 2003 18:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">But that shouldn't happen at all, and if it does then not more than one time. It shouldn't list all files. When extracting from the snapshot it should only list dsw and dsp files (because something is funky with the new line conversion).<br><br>I think it's because the snapshot is ahead of the CVS server (because of <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=139427" target="_blank">SF known issues</a>) which will cause CVS to think that the local copy is newer. If this is the case it will no longer bother you by tomorrow or the day after it. I will still need to verify the message from CVS, but it seems the most likely.<br><br>[edit]CVS seems to handle timezones, I don't think that's the problem.<br><br>Actually, my test didn't show all files as updated even though I used the backup server. It must be only the .dsw and .dsp files.[/edit]</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mikem4600</span><br><span class="post-time small text-muted">30th August 2003 18:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by pengyou</i><br><b>I think mikem4600 is complaining about what happens if you use a CVS snapshot ZIP file to update your NSIS installation and then later on try to run 'NSIS Update'.<br><br>Normally 'NSIS Update' will only download newer files, so a 'NSIS Update' run usually involves only a handful of files being downloaded, and this is not a time-consuming operation.<br></b></blockquote>Yep, that's what I ment. Sorry, I wasn't clear enough... I'll try it again though. If it doesn't work then I'll just download 20b3 and let it update it.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mikem4600</span><br><span class="post-time small text-muted">30th August 2003 18:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, it didn't work. I've attached the contains of the Log window just before it starts downloading everything and I kill the cvs95 process, as there is no way to cancel the update.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pengyou</span><br><span class="post-time small text-muted">30th August 2003 19:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">From the CVS Book: "The repository always stores dates in Universal Time, but CVS on the client side usually assumes the local system time zone."<br><br>A quick look at a CVS snapshot found CVS 'Entries' files with timestamps 7 or 8 hours ahead of the timestamps on the corresponding files (eg 'Entries' file has 19:44 yet matching file has 12:44).<br><br>Unzipping the CVS snapshot on a computer using a different time zone from the one used on the system where the snapshot was created could cause confusion when NSIS Update is run. If NSIS Update assumes that the timestamps use the local time zone it could end up assuming that every file needs to be downloaded again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">30th August 2003 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">TortoiseCVS seems to handle times pretty well. So does cvs95.exe that NSIS Update uses. I am a few good hours away from UTC and never had time problems.<br><br>Anyway, a quick solution, unless NSIS Update starts working after the 24 hour difference, would be using just one option. Either the snapshot or NSIS Update.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>