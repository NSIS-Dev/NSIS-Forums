<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Searching through a file" />

  <title>Searching through a file - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Searching through a file</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136627">Searching through a file</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2003 22:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Searching through a file</strong><br />
      I'm getting a path (e.g. pics\temp.pcx) out of 1 line within a file (models\temp.md2).<br />
      However, the file is not pure text, so FileRead only gets to the second line and produces an error.<br />
      Is there a way to convert this file to pure text?<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th May 2003 23:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">FileReadByte doesn't care if the input is text or not, so you can use it to process the file.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2003 23:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's just outputting a load of numbers.<br />
      I need to get a line out of the file and search for ".pcx" in it<br />
      <br />
      I just need to get hold of a line of text from it now...<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th May 2003 23:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use:<br />
      <br />
      IntFmt $0 "%c" $1<br />
      <br />
      where $1 is the output of FileReadByte and you'll get the character read in $0. It's up to you to find out how to skip the non text part of the file, FileReadByte will read anything.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2003 23:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I shall look<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th May 2003 23:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">[edit]heh, ok :)[/edit]<br />
      <br />
      Then the byte read is a character that can not be displayed on screen, maybe 0. As I've said, it's up to you to tell where the text you want begins. Use FileReadByte to skip the parts you don't want, or can't read.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2003 23:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, so I have tried to collect up 20 characters, and then search for .pcx in that:<br />
      <br />
      loop_read:<br />
      ClearErrors<br />
      FileReadByte $R2 $R3<br />
      IfErrors error<br />
      IntFmt $R3 "%c" $R3<br />
      IntOp $R5 $R5 + 1<br />
      StrCpy $R4 $R4$R3<br />
      StrCmp $R5 20 0 loop_read<br />
      <br />
      But $R4 comes out as only about 4 characters long.<br />
      <br />
      What have I done wrong?<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">25th May 2003 23:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, It's not outputting spaces. At least I am getting part of the ".pc" in it!<br />
      <br />
      -Stu :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th May 2003 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here's what I made..<br />
      <br />
      <font size="1">edited by kichik, attached below.</font><br />
      <br />
      Works great on both md2 and sp2 files :)<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">26th May 2003 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please attach large scripts.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
