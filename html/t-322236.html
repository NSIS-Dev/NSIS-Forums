<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="RichEdit20A control fails to load the License file..." />

  <title>RichEdit20A control fails to load the License file... - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">RichEdit20A control fails to load the License file...</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322236">RichEdit20A control fails to load the License file...</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">manasi1128</span><br />
      <span class="post-time small text-muted">7th September 2010 05:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>RichEdit20A control fails to load the License file...</strong><br />
      Hi guys....<br />
      <br />
      I hav an installer script which has 2 custom dialogs.......both of dem have a RichEdit20A each and are suppose to load individual files.....but the problem is the first dialog loads the file properly at first....after clicking continue on the first dialog the second dialog appears but it fails to load the file in the RichEdit20A control......after clicking on the back button of the second dialog even the first dialog fails to load the file....<br />
      .....any help wud be appreciated.... following is the code snippet from my script...<br />
      <br />
      Page custom nsDialogsDirectory-----&gt;1st dialog<br />
      Page custom nsDialogsLicense---------&gt;2nd dialog<br />
      PageEx custom<br />
      PageCallbacks PreIntouch<br />
      PageExEnd<br />
      .....................<br />
      .......................<br />
      <br />
      Function nsDialogsDirectory<br />
      GetDlgItem $0 $HWNDPARENT 1<br />
      SendMessage $0 ${WM_SETTEXT} "0" "STR: Continue"<br />
      <br />
      ........................<br />
      .......................<br />
      <br />
      GetDlgItem $0 $HWNDPARENT 1<br />
      EnableWindow $0 0<br />
      <br />
      nsDialogs::Create /NOUNLOAD 1018<br />
      Pop $DIALOG<br />
      .........................<br />
      ..........................<br />
      .........................<br />
      <br />
      Call ShowPrivacyPolicy<br />
      <br />
      nsDialogs::Show<br />
      FunctionEnd<br />
      <br />
      Function nsDialogsLicense<br />
      <br />
      GetDlgItem $0 $HWNDPARENT 1<br />
      SendMessage $0 ${WM_SETTEXT} "0" "STR: I agree"<br />
      <br />
      ;GetDlgItem $0 $HWNDPARENT 1<br />
      ; EnableWindow $0 1<br />
      <br />
      <br />
      nsDialogs::Create /NOUNLOAD 1018<br />
      <br />
      Call ShowLicense<br />
      <br />
      nsDialogs::Show<br />
      FunctionEnd<br />
      <br />
      <br />
      Function ShowLicense<br />
      <br />
      ; GetDlgItem $0 $HWNDPARENT 1<br />
      <br />
      ; EnableWindow $0 1<br />
      <br />
      File /oname=$PLUGINSDIR\amex-license.rtf "..\cpp\bin\amex-license.rtf"<br />
      <br />
      nsDialogs::CreateControl /NOUNLOAD "RichEdit20A" ${ES_READONLY}|${WS_VISIBLE}|${WS_CHILD}|${WS_TABSTOP}|${WS_VSCROLL}|${ES_MULTILINE}|${ES_WANTRETURN} ${WS_EX_STATICEDGE} 0 170 100% 79u ''<br />
      Pop $LICENSE<br />
      <br />
      FileOpen $4 "$PLUGINSDIR\amex-license.rtf" r<br />
      <br />
      StrCpy $0 $LICENSE<br />
      <br />
      SendMessage $LICENSE ${EM_EXLIMITTEXT} 0 0x7fffffff<br />
      ; set EM_AUTOURLDETECT to detect URL automatically<br />
      ;Do not detect the links<br />
      ;SendMessage $LICENSE 1115 1 0<br />
      <br />
      System::Get /NoUnload "(i, i .R0, i .R1, i .R2) iss"<br />
      Pop $2<br />
      System::Call /NoUnload "*(i 0, i 0, k r2) i .r3"<br />
      <br />
      System::Call /NoUnload "user32::SendMessage(i r0, i ${EM_STREAMIN}, i ${SF_RTF}, i r3) i.s"<br />
      <br />
      loop:<br />
      Pop $0<br />
      StrCmp $0 "callback1" 0 done<br />
      System::Call /NoUnload "kernel32::ReadFile(i $4, i $R0, i $R1, i $R2, i 0)"<br />
      <br />
      Push 0 # callback's return value<br />
      System::Call /NoUnload "$2"<br />
      goto loop<br />
      done:<br />
      System::Free $2<br />
      System::Free $3<br />
      FileClose $4<br />
      FunctionEnd<br />
      <br />
      Showpriavcypolicy function is same as ShowLicense........am i doin sumthing wrong here?.....</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">7th September 2010 06:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Might want to re-read the original thread, as that issue was resolved there - and a plugin is also available.<br />
      <a href="http://forums.winamp.com/showthread.php?t=288129" target="_blank">http://forums.winamp.com/showthread.php?t=288129</a> - RichEdit with nsDialogs?<br />
      <a href="http://forums.winamp.com/showpost.php?p=2524633&amp;postcount=28" target="_blank">http://forums.winamp.com/showpost.ph...3&amp;postcount=28</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">manasi1128</span><br />
      <span class="post-time small text-muted">7th September 2010 07:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thnx dude......dat LoadRTF.nsh solved my problem.....!!!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
