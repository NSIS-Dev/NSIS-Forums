<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="nsis 2.27 under linux - Library.nsh problems" />

  <title>nsis 2.27 under linux - Library.nsh problems - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">nsis 2.27 under linux - Library.nsh problems</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270985">nsis 2.27 under linux - Library.nsh problems</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">smonsarr</span><br />
      <span class="post-time small text-muted">11th May 2007 12:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>nsis 2.27 under linux - Library.nsh problems</strong><br />
      Hi all,<br />
      I use nsis under linux (Ubuntu 7.04) and up till now I have built my own nsis by following the INSTALL recommendations, i.e:<br />
      build makensis with:<br /></p>
      <pre>
<code>scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all</code>
</pre>and then droping it into a nsis zip release. All went well until I tried this with nsis 2.27.<br />
      In my project I need to use Library.nsh for InstallLib etc.<br />
      This is where it all comes appart because Library.nsh used to only attempt to run LibraryLocal.exe (line 149 in Library.nsh 2.27) if running under windows, now in 2.27 (I am guessing since 2.26), LibraryLocal is run even in non WIN32 versions of makensis (line 153). This means that just dropping a linux compiled makensis into a nsis zip release cannot work any more when using Library.nsh.<br />
      <br />
      So now either I succeed in building a full version of nsis under linux or Library.nsh needs to allow one to call InstallLib even when LibraryLocal etc have not been built.<br />
      <br />
      Could I get some pointers on how to compile a full version of nsis under linux ? should Library.nsh be patched ?<br />
      <br />
      Sam.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">13th May 2007 18:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should simply install LibraryLocal as well. It now works on Linux as well. Use the following to build just LibraryLocal:</p>
      <pre>
<code>scons Library/LibraryLocal</code>
</pre>It should then be put in the PATH so Library.nsh can find it.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd May 2007 15:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Make that:</p>
      <pre>
<code>scons LibraryLocal</code>
</pre>And to install, use:
      <pre>
<code>scons NSIS_CONFIG_CONST_DATA_PATH=no PREFIX=/path/to/extracted/zip<br />      /path/to/extracted/zip/LibraryLocal</code>
</pre>I've updated the documentation to match.
      <pre>
<code>scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all<br />      NSIS_CONFIG_CONST_DATA_PATH=no PREFIX=/path/to/extracted/zip<br />      install-compiler<br /><br />scons NSIS_CONFIG_CONST_DATA_PATH=no PREFIX=/path/to/extracted/zip<br />      /path/to/extracted/zip/LibraryLocal</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">smonsarr</span><br />
      <span class="post-time small text-muted">17th August 2007 10:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks kichik,<br />
      Indeed that works great. Thanks.<br />
      Sam.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
