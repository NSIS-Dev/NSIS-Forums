<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to set exit errorlevel code"><title>How to set exit errorlevel code - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to set exit errorlevel code</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135321">How to set exit errorlevel code</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">bcording</span><br><span class="post-time small text-muted">14th May 2003 02:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to set exit errorlevel code</strong><br>I am trying to find how to set an exit errorlevel code. I am using NSIS for automation, and would like to know via ye olde %errorlevel% whether the install finished with an eorror, and if possible different errors. For example 0 for no error, 1 for missing prerquisits, 2 for...you get the idea.<br><br>thanks in advance</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th May 2003 11:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://nsis.sourceforge.net/Docs/AppendixC.html#C.2" target="_blank">This section</a> of the documentation describes the error levels. You can't change the error level to whatever value you want. You'll have to find another way such as writing to an INI file, creating files or writing to the registry.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mbenedict</span><br><span class="post-time small text-muted">9th January 2004 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is this still true? Is there no way to return a custom errorlevel exit code from the nsis process? And if not, is this a feature that will ever be implemented? Thanks.<br><br>Marianne</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">9th January 2004 20:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSIS still uses the same error levels.<br><br>See the NSIS Website for information about submitting feature requests.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dpbluegreen</span><br><span class="post-time small text-muted">6th July 2004 22:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Accessing errorlevel from commandline</strong><br>I'm trying to view the errorlevel from the cmdline, but the value doesn't seem accurate.<br><br>Here is my script for causing a "failure" errorlevel:<br><br>#############################<br>OutFile "c:\temp\testErrorlevel.exe"<br><br>Section ""<br>SetErrors<br>SectionEnd<br>#############################<br><br>Here's one for "success":<br><br>#############################<br>OutFile "c:\temp\testNoErrors.exe"<br><br>Section ""<br>ClearErrors<br>SectionEnd<br>#############################<br><br>And here are my test results:<br>#############################<br>C:\temp&gt;testErrorlevel<br><br>C:\temp&gt;echo %errorlevel%<br>9009<br><br>C:\temp&gt;testNoErrors<br><br>C:\temp&gt;echo %errorlevel%<br>9009<br>#############################</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">6th July 2004 22:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try to get the error level from another NSIS script using Exec.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dpbluegreen</span><br><span class="post-time small text-muted">7th July 2004 01:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I need to communicate my error status to a non-NSIS executable that invokes my module, so using Exec and IfError don't really help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th July 2004 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ExecWait can get the error level. ExecWait waits for the NSIS installer to finish, a DOS box doesn't. 9009 is probably the error level of the application you ran just before the installer.<br><br>SetErrors and ClearErrors is for the script. The error level is not set by them. It is set to a value different than zero if the installation was aborted. As the documentation states:</p><blockquote>* 0 - Normal execution (no error)<br>* 1 - Installation aborted by user<br>* 2 - Installation aborted by script</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dpbluegreen</span><br><span class="post-time small text-muted">7th July 2004 18:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If 'SetErrors' is replaced by 'Abort' in the script above, and 'ClearErrors' by 'Quit', the test results are still the same.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th July 2004 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The first paragraph addresses that.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dpbluegreen</span><br><span class="post-time small text-muted">7th July 2004 19:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, that's a bit too cryptic for me.<br><br>How is ExecWait relevant if I'm checking the errorlevel from the commandline? If you would modify my samples so the tests work correctly, that would help tremendously.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th July 2004 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The command line doesn't wait for the installer and therefore can't get its error level.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zimsms</span><br><span class="post-time small text-muted">8th July 2004 18:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">see this <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=180398" target="_blank">thread</a>.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>