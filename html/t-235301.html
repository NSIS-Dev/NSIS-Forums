<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Radiobuttons and directory page" />

  <title>Radiobuttons and directory page - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Radiobuttons and directory page</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235301">Radiobuttons and directory page</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">12th January 2006 08:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Radiobuttons and directory page</strong><br />
      I want to have a customized MUI directory page, and I'm unclear the best/simplest way to proceed.<br />
      <br />
      MyApp is part of a larger "family of apps" that can share resources, and there are three legitimate places to install the app ...<br />
      <br />
      * based on the environment variable FAMILY_PATH<br />
      <br />
      * based on where another app in the "family" was installed<br />
      <br />
      * default if neither of the two above are present (which would be the case if MyApp is the first app in the "Family" to be installed.)<br />
      <br />
      For example, the environment variable FAMILY_PATH might contain<br />
      X:\Test\Family<br />
      <br />
      The app sibling.exe might be located in:<br />
      C:\Program Files\Sibling<br />
      <br />
      The installer for sibling.exe will leave "bread crumbs" in the registry that indicate where it was installed. The installer for MyApp can detect the InstallDir of sibling.exe<br />
      <br />
      If the environment variable isn't defined and the sibling.exe hasn't been installed, then the myapp.exe would by default be installed in:<br />
      C:\Program Files\MyApp\myapp.exe<br />
      <br />
      The Directory page would be dynamically built based on the presence or absence of the environment variable and the sibling.exe program.<br />
      <br />
      It might look something like the following ( circle O indicates radio button):<br />
      <br />
      ---------------------------<br />
      Do you want to install the app based on:<br />
      <br />
      O - FAMILY_PATH = X:\Test\Family<br />
      <br />
      O - sibling.exe = C:\Program Files\Sibling<br />
      <br />
      O - Other directory .... default = C:\Program Files\MyApp<br />
      <br />
      ------------------------------<br />
      <br />
      The "other directory" would be a normal Type=DirRequest with a preloaded default.<br />
      <br />
      There could be one, two, or three radio buttons, depending on whether FAMILY_PATH was defined, or a registry entry for the InstallDir of sibling.exe was found.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th January 2006 13:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'd edit the INI file on runtime, according to the presence of the "bread crumbs" and disable invalid options. To disable a control, write DISABLED to its FLAGS value.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">12th January 2006 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Any sample code somewhere on how to do that?<br />
      <br />
      What I'd like to end up with is illustrated in the attached screen-shot that is based on the MUI directory page. The Type=DirRequest field would be disabled unless its radiobutton was selected.<br />
      <br />
      My impression is that it is possible to actually edit a dialog used by the MUI or "classic" nsis ... but that seems pretty advanced .... is there documentation and/or sample code that illustrates how to do this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th January 2006 14:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's very simple. Use WriteINIStr or MUI_INSTALLOPTIONS_WRITE.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">12th January 2006 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for your help (and patience) with this less than nsis expert trying to do something maybe over my head.<br />
      <br />
      I'm fuzzy on how to have the Type=DirRequest field be disabled unless its associated RadioButton is selected (see screen-shot from previous post). Is there something like .onSelChange that would apply to a RadioButton on a custom page?<br />
      <br />
      Also, is there an explanation / documentation / sample code on modifying the MUI Directory page to accomplish the equivalent of what I'm trying to do?<br />
      <br />
      Or is it likely to be simpler to build a custom page and invoke it instead of the Directory page?<br />
      <br />
      (Or is this the kind of thing that a plug-in would be used for .... I can see how to do this with a Win32 dialog (or using MFC) but I have very little awareness of plug-ins and how they are used and developed.)<br />
      <br />
      The other approach would be to have RadioButtons in the ComponentsPage (is that possible?). However, I haven't figured out how to have a selection in the ComponentsPage influence the choice in the DirectoryPage.<br />
      <br />
      I would like to set some flag that the user picked "Install In Same Directory as FAMILY_PATH environment variable" on the ComponentsPage, but this seems to happen "too late" to modify the contents of the Type=DirRequest field on the DirectoryPage.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th January 2006 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To disable a control, write DISABLED to its FLAGS value. You can see how it's done in Examples\InstallOptions\testnotify.nsi.<br />
      <br />
      Modifying the internal directory page requires editing the UI (Contrib\UIs\modern.exe) using <a href="http://www.angusj.com/resourcehacker/" target="_blank">Resource Hacker</a> and then handling all of the logic yourself, using FindWindow, GetDlgItem and SendMessage in the pre and leave callback functions of the page.<br />
      <br />
      Showing a pages according to section selection is possible. There's a <a href="http://nsis.sourceforge.net/Show_custom_page_when_a_section_has_been_selected" target="_blank">wiki page</a> about this.<br />
      <br />
      A plug-in would work as well... The choice is up to you. Whatever fits your needs the best. If I were you, I'd have a custom page with two radio buttons for the first two options, and a directory page (which might be skipped) to get the custom directory. The internal directory page has some features which would be hard to imitate using InstallOptions, such as the free and required space.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">12th January 2006 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        If I were you, I'd have a custom page with two radio buttons for the first two options, and a directory page (which might be skipped) to get the custom directory.
      </blockquote>Thanks for the guidance. I only work with nsis about once or twice a year, and it takes me a while to "shake off the rust" and try to get back "up to speed." As the years add up for this "older newbie", that takes longer and longer. You do a wonderful job of support.<br />
      <br />

      <blockquote>
        The other approach would be to have RadioButtons in the ComponentsPage (is that possible?).
      </blockquote>I'm still curious if it is possible to have three mutually exclusive RadioButtons in the Components page. Your wiki page reference would be useful then to "react" to the end-users choice.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th January 2006 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's possible, take a look at Examples\one-section.nsi.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
