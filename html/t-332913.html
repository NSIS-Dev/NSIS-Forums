<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Fast and versatile recompilation process"><title>Fast and versatile recompilation process - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Fast and versatile recompilation process</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332913">Fast and versatile recompilation process</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jai123</span><br><span class="post-time small text-muted">27th July 2011 16:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Fast and versatile recompilation process</strong><br>Hello,<br><br>I am migrating my vb6 installer into NSIS installer. One of my priorities/requirements is to recompile all the needed files in the least number of steps possible. Ideally, a 1 click build-to-release process.<br><br>At the moment, I am planning to create several folders. One for app_path files, one for system_files, etc. So, every time that a file is modified or a new file added, I just drop it in the right folder and recompile. However, if a completely new file is included, steps like registering a DLL still need to be implemented in code.<br><br>Do you have any suggestions on how to create a fast and versatile recompilation process?<br><br>Thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">27th July 2011 17:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can for example execute a bat or vbs script (or nsis exe, for that matter) during compilation using the !system command etc, and let it create a file list and save as NSIS script. Then !include that list.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jai123</span><br><span class="post-time small text-muted">27th July 2011 20:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MSG, I am a newbie, so I am not sure what you mean nor how to implement it.<br><br>By chance, do you have a concrete example that I can look at? Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">27th July 2011 21:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well my idea is basically to run an external script/program that lists all the files in your project directory, and writes it to an .nsh file for you, using either<br></p><blockquote>SetOutPath $INSTDIR<br>File "FoundFileXYZ.ext"</blockquote>or<br><blockquote>SetOutPath $SYSDIR<br>File "FoundFileZYX.dll"<br>call DLLRegisterFunction</blockquote>...depending on whether it found a dll or another file. Then, if you !include that file list into your section, the NSIS compiler will simply paste the contents of the list into your NSIS script, and compile it.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jai123</span><br><span class="post-time small text-muted">9th August 2011 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry for the late reply.<br><br>I am not sure if I understand well the advantage of including the files using an external file instead of directly including them in my NSIS script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th August 2011 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The advantage is that you can execute external scripts/exe's during compilation, but you cannot add dll-registration code if one of the release files happens to have the .dll extension, during compilation. As far as I know, anyway.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jai123</span><br><span class="post-time small text-muted">16th August 2011 18:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hey MSG,<br><br>I was just wondering what do you mean with "you cannot add dll-registration code if one of the release files happens to have the .dll extension".<br><br>Thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">17th August 2011 05:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What I mean with that is that it's just not possible to do what you want to do using NSIS script. Here's what: Try to find a way to do it in NSIS code, and you'll find out it's impossible. My method IS possible. Let's just say the advantage is that it works. &gt;_&gt;</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>