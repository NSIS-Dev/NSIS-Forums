<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="$R0 vs. $0... should it make a difference?"><title>$R0 vs. $0... should it make a difference? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">$R0 vs. $0... should it make a difference?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=233795">$R0 vs. $0... should it make a difference?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">22nd December 2005 19:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>$R0 vs. $0... should it make a difference?</strong><br>Hello all.<br><br>I'm using the <a href="http://nsis.sourceforge.net/Processes_plug-in" target="_blank">Processes Plug-in</a> to check to see if a certain process is running or not.<br><br>Try the below code. If you don't have the Windows Calculator (Start--&gt;Run--&gt;calc) running you will get 0 in the message box. If you do have it running, you will get a 1. This is great, however now re-compile the below code and change the <b>two</b> instances of "$R0" below to just "$0".<br><br>Now you don't any answer in the message box...what gives? I'm so confused. Thanks for your help.<br><br><br></p><pre>
<code><br>Name Test<br>OutFile Test.exe<br>Section ""<br>  Processes::FindProcess Calc<br>  Pop $R0<br>  MessageBox MB_OK "Result:  $R0"<br>SectionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">22nd December 2005 21:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Strange. If you check the variables with dumpstate::debug, you'll find that $R0 contains the value and not $0.<br>
      <br>
      This works:<br></p>
      <pre>
<code><br>Name Test<br>OutFile Test.exe<br>Section ""<br>  Processes::FindProcess Calc<br>  Pop $0<br>  MessageBox MB_OK "Result:  $R0"<br>SectionEnd<br></code>
</pre><br>
      Could this guy be having the same problem?<br>
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=233453" target="_blank">http://forums.winamp.com/showthread....hreadid=233453</a><br>
      <br>
      -Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">22nd December 2005 22:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for checking this out Afrow. This is very strange. I found this works too:<br></p>
      <pre>
<code><br>Name Test<br>OutFile Test.exe<br>Section ""<br>  Processes::FindProcess Calc<br>  MessageBox MB_OK "Result:  $R0"<br>SectionEnd<br></code>
</pre><br>
      It looks like you don't even need to pop it. It is like the plug-in sets the $R0 variable before it finishes.<br>
      <br>
      So if the $R0 is all ready set (to 0 or 1), then by popping it, I would think that it would erase the value, and set it to null. That would be the case if the stack was empty, but it can't be empty because when we "Pop $R0" and then "MessageBox $R0", we get a value (0 or 1).<br>
      <br>
      So then if the stack is not empty, Popping $0 and then MessageBox'in $0 should also work....:confused:<br>
      <br>
      I'm so confused.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">22nd December 2005 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Perhaps kichik or the plugin author can shed some light on this.<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">22nd December 2005 23:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I emailed the author, good idea Afrow, thanks.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">23rd December 2005 10:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In the plug-in's source code, it always uses $R0 to pass the data, not the stack.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">23rd December 2005 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>In the plug-in's source code, it always uses $R0 to pass the data, not the stack.</b>
      </blockquote>Ahhhhh..... the source code! Thanks for your help kichik.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br>
      <span class="post-time small text-muted">26th December 2005 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In the wiki, there are still plug-ins that output to either $0 or $R0 generally because of the old syntax with <i>CallInstDLL</i> instruction. Maybe it would be a good idea to change those plug-ins to use the stack syntax to pass values, like most of the other plug-ins.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>