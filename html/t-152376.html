<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Using the SearchPath command ..."><title>Using the SearchPath command ... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Using the SearchPath command ...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152376">Using the SearchPath command ...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">12th October 2003 14:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Using the SearchPath command ...</strong><br>Hi! For sometime i'm trying to use to SearchPath command but without sucess ... I've read the NSIS manual but my english isn't that good so i can't get the syntax right ...<br><br>I'm trying to use like this:<br><br>SearchPath $(APP) app.exe<br><br>And always get an error message ...<br><br>Anyone can help me?! Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">12th October 2003 14:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">SearchPath $R0 app.exe<br><br>or<br><br>Var APP<br>SearchPath $APP app.exe</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">14th October 2003 18:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi! I'm back. Well, i did like you said. It compiled without any problem but i could not make it work ...<br><br>That's what I'm trying:<br><br>SetOutPath "$INSTDIR"<br>File "C:\anything.dll"<br>SearchPath $R0 app.exe<br>CopyFiles /SILENT "$INSTDIR\anything.dll" "$R0\Plugins"<br><br>But it does not copy the file ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">14th October 2003 18:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It will only work if app.exe is stored in one of the system directories, it does not search the whole drive.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">14th October 2003 22:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry about taking your time Joost ... But, would you know how to do this ? I mean, I'm trying to copy a file from the $INSTDIR to the plugins' directory of Winamp if the user has Winamp. So I need a way to know if the user has Winamp installed and where is it ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th October 2003 23:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">See the waplugin.nsi example in your local Examples folder.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">16th October 2003 23:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi kichik! I've read the waplugin.nsi file ... But i don't think that it can help me ... That's because in the example file the user that installs it have to set the WA directory with the directory page ... On my installer, the install directory has nothing to do with the Winamp directory, otherwise it would be easy. =P But I must find a way to detect the plugins' directory of Winamp to extract one file to this directory if the user has Winamp installed ... In the last case i think i'll suppose that the user has installed Winamp in $PROGRAMFILES\Winamp. So if WA isn't there, what can i do ? =P</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">16th October 2003 23:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It only gives the user the option to choose another directory, it detects the Winamp folder.<br><br>You can use two directory pages if you want.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">20th October 2003 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi! Well, i've read the waplugin.ini file again and i put this part of it in my script:<br><br>Function GetWinampInstPath<br><br>Push $0<br>Push $1<br>Push $2<br>ReadRegStr $0 HKLM \<br>"Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" \<br>"UninstallString"<br>StrCmp $0 "" fin<br><br>StrCpy $1 $0 1 0<br>StrCmp $1 '"' "" getparent<br><br>StrCpy $0 $0 "" 1<br>StrCpy $1 0<br>rqloop:<br>StrCpy $2 $0 1 $1<br>StrCmp $2 '"' rqdone<br>StrCmp $2 "" rqdone<br>IntOp $1 $1 + 1<br>Goto rqloop<br>rqdone:<br>StrCpy $0 $0 $1<br>getparent:<br><br>StrCpy $1 -1<br>gploop:<br>StrCpy $2 $0 1 $1<br>StrCmp $2 "" gpexit<br>StrCmp $2 "\" gpexit<br>IntOp $1 $1 - 1<br>Goto gploop<br>gpexit:<br>StrCpy $0 $0 $1<br><br>StrCmp $0 "" fin<br>IfFileExists $0\winamp.exe fin<br>StrCpy $0 ""<br>fin:<br>Pop $2<br>Pop $1<br>Exch $0<br><br>FunctionEnd<br><br>And has tried to use that function in this part ...<br><br>Section "" SecCopyUI<br><br>Call GetWinampInstPath<br><br>CopyFiles /SILENT "$INSTDIR\example\anything.dll" "$0\Plugins"<br><br>SectionEnd<br><br>But it didn't work ... The var $0 is read just as 0 ... =[<br><br>Any hint? Thank you again guys for helping ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">20th October 2003 11:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You have to get the value from the stack after calling the function:<br><br>Pop $0</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">20th October 2003 21:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, I'm just posting here again to thank you guys for your time since it worked now!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">20th October 2003 21:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">YYYYYYYYYEEEEEEEEEEEEEAAAAAAAAAAAAHHHHHHHHHHH!!!!!!!!!!!!!! UHHHHHHHHHUUUUUUUUUUUU!!! Someone from Brazil!!!!!!!! I'm too!!!!!!!!<br><br>(Rarely this happened before)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cdzitu</span><br><span class="post-time small text-muted">20th October 2003 23:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hehehe! Hi deguix! A lot a people use NSIS here too. =P And as you can see, not only here, but in many parts of the world! When I saw that kichik is from Israel I thought "- Ow, I'm talking to someone in Israel. =O". Internet RULES =P ...</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>