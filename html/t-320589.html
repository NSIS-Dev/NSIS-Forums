<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="securing, encrypting or hiding of file uploaded in NSIS script"><title>securing, encrypting or hiding of file uploaded in NSIS script - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">securing, encrypting or hiding of file uploaded in NSIS script</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320589">securing, encrypting or hiding of file uploaded in NSIS script</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">7th July 2010 06:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>securing, encrypting or hiding of file uploaded in NSIS script</strong><br>salam guyz!<br><br>i already create an NSIS script and i upload many files of my application into it, now i want to secure, encrypt or hide those files and make just single .exe output file for installing my application. i mean i just want to pack all my files but generating one .exe file.<br>plz help me thanks alot.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">7th July 2010 10:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What do you mean by uploading many files into your NSIS script? The script is a text file! If you mean compressing the files into your installer then that is the default behaviour if you use File (rather than CopyFiles say).<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">7th July 2010 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">look dear!<br><br>i have an application and it has four files, and for making that setup.exe i create an NSIS script and i embed/introduce/compress those file into the script, now when ever i am compiling the script it extract four of four files which i dont want, i just want to extract just one file (setup.exe) nothing else THANKS!!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">7th July 2010 16:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">......wtf?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">7th July 2010 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes I am still confused as well. When you build an NSIS script you only get one file (the file named with OutFile). You must be confusing something. Check out the examples in NSIS\Examples.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">underline</span><br><span class="post-time small text-muted">7th July 2010 18:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Seems that "khesrow" try to say that he need a way to avoid extraction of files compiled inside his Setup.exe file<br><br>As I can understand when he try to extract the content of his Setup.exe he get 4 files and he is not confortable with that so he need to avoid extraction...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">7th July 2010 18:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No I don't think he means that but if he does the only proper way to do this is to rebuild NSIS.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">demiller9</span><br><span class="post-time small text-muted">7th July 2010 18:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If he wants the script to extract fewer files, he can put them into different sections and let the user select the section(s) to extract. He could - no, I should say - one can add logic to determine what files to extract based upon existing files, other programs, registry values, or user input.<br><br>If he wants to prevent people from extracting those 4 files with an independent utility, he will have to modify the NSIS package and recompile makensis.exe. 7-zip and other utilities can extract the files because they can process the setup.exe almost as if it were a zip file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 06:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">guyz my English is not good and i apologize for that, and very very thanks for helping me.<br><br>but my application has four files and when i make that through NSIS installable application, i mean i introduce the four file to the NSIS script file due File statement, now when i compiling the script file it gives me my four of four files in a path which i dont want , i just want from it to give me just one file (setup.exe) and the other file should be not readable or should be hide.<br><br>thanks again from yours help!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th July 2010 06:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think you are mistaken. The NSIS compiler always will generate only ONE file, and that is the installer (called setup.exe if you specified that with the OutFile command). The other files you're seeing probably belong to something else.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 07:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">then please shoe me in example (use my application that has four files) thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 07:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">and this is what i did:<br><br><br><br>Name "Example1"<br><br>OutFile "example1.exe"<br><br><br>InstallDir $PROGRAMFILES\Example1<br><br>DirText "This will install My Cool Program on your computer. Choose a directory"<br><br>;--------------------------------<br><br>; The stuff to install<br>Section "" ;No components page, name is not important<br><br>; Set output path to the installation directory.<br>SetOutPath $INSTDIR<br><br>; Put file there<br>File formone.exe<br>File myfolder\test.txt<br>File test.nsi<br><br>SectionEnd ; end the section<br><br>after the compiling this script it gives me all those file (formone.exe, test.txt, text.nsi) in c:\program file\Example1 folder, then where is one .exe file i cant see, now what u say</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th July 2010 07:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Am I understanding you correctly that you only want formone.exe to be installed? And that you want to store test.txt and test.nsi inside the installer, but you don't want them to be installed? In that case, use this:<br><br>File formone.exe<br>goto +3<br>File myfolder\test.txt<br>File test.nsi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 07:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok thanks but because the other files are the resources for formone.exe so can it use its resources which are test.txt,test2.doc,... ,...<br>i mean that formone.exe should be able to use those file but as u said i dont want to show them in install directory.<br>as u said this will ignore other files so formone.exe will not reach to its resources .<br>thanks a lot now u got what i want (generating a single.exe file).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th July 2010 08:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Aha, I see. Well, there are various things you can do. First, you can set the Hidden file attribute to those files (use the <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.3.12" target="_blank">SetFileAttributes command</a>), but then the user can still see them if he has "show hidden files" enabled in his Explorer. You can also extract the files to a directory that the user is not very likely to see, for example $LOCALAPPDATA\YourApp. But still, the user will be able to find it.<br><br>If you really want to prevent the user from reading the file, you'll need to encrypt its contents. There are many file encryption methods out there, and I don't know any of them personally. But I don't think that encryption software is very on-topic in these NSIS forums.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 08:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok dear but it was done by one of my friends, he made from several file on single .exe file as i explained, now i dont know where is he to ask him, but i am sure it has a solution with encrypting, well again thank you very much.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">8th July 2010 10:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What I would do is add the two files you want to hide as resources inside formone.exe; that is assuming you have control over the code in formone.exe.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">khesrow</span><br><span class="post-time small text-muted">8th July 2010 12:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">it is imposable to hide those file within formone.ext it is just a c# compiled file,the solution is just my question's answer that there should be a way for merging file into one file.<br><br>thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">demiller9</span><br><span class="post-time small text-muted">8th July 2010 12:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>there should be a way for merging file into one file.</blockquote>There is. Afrow UK told you: those files could be made resources and would be stored <i>inside</i> your c# exe.<br><br>You will have to make your c# program will find the new hidden files - you must be able to recompile it, right? If you can compile it, you can add resources to it. And you'll add the code to use those new resources.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">8th July 2010 13:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, resources are added using Visual Studio. They need to be added to Properties\Resources.resx for the project and then accessed using [ProjectNamespace].Properties.Resources.[ResourceName] which will be of type byte[] for files I believe. You can load it into a MemoryStream rather than using a FileStream.<br><br>Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>