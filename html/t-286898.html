<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to detect if Firefox is installed?"><title>How to detect if Firefox is installed? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to detect if Firefox is installed?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286898">How to detect if Firefox is installed?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jmzorko</span><br><span class="post-time small text-muted">14th February 2008 19:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to detect if Firefox is installed?</strong><br>Hello, all ...<br><br>I need to modify our NSIS installer to install some browser-specific plugins i've written. The IE plugin was easy (since it can live anywhere), but the Firefox plugin needs to be copied to Firefox's plugins directory. What is the bets way to determine if Firefox is really installed? I could easily look for /program files/mozilla firefox, but this seems a rather simplistic check that could fail if the user decides to install Firefox somewhere else. Is there a better way to determine if Firefox is installed on a user's machine?<br><br>Regards,<br><br>John</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">14th February 2008 21:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">query the registry for the firefox location<br><br>e.g. via HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Mozilla Firefox</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">15th February 2008 13:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">naa, that's totally rubbish...<br><br>ReadRegStr $R8 HKLM "SOFTWARE\Mozilla\Mozilla Firefox" "CurrentVersion"<br>ReadRegStr $R9 HKLM "SOFTWARE\Mozilla\Mozilla Firefox\$R8\Main" "PathToExe"</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">taxilian</span><br><span class="post-time small text-muted">31st December 2008 00:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">it's been awhile since you posted, so you've probably already moved on to new and better projects, but for any others facing this same problem:<br><br>The correct way to install a plugin is usually *not* to put it in the Firefox Plugins directory. This will more or less work, but it has some limitations:[list=1][*]it requires that firefox is already installed before you install your plugin[*]Only Firefox (and only one copy of firefox) has access to your plugin. (Most browsers use the standard NPAPI/NPRuntime interface for plugins)[*]It requires administrator privileges to install this way.[/list=1]The ideal way to install a plugin is outlined here:<br><a href="https://developer.mozilla.org/en/Plugins/The_First_Install_Problem" target="_blank">https://developer.mozilla.org/en/Plu...nstall_Problem</a><br><br>Essentially, you just add some registry entries identifying where the plugin is located and your computer will find it. The one downside to this is that Firefox 2 will not find it if it's in HKEY_CURRENT_USER (though Firefox 3, Opera, Chrome, and Safari on windows all will). If you need to install it w/out administrator privileges so that it will work for Firefox 2, try installing it as an extension in the registry:<br><br><a href="https://developer.mozilla.org/en/Adding_Extensions_using_the_Windows_Registry" target="_blank">https://developer.mozilla.org/en/Add...ndows_Registry</a><br><br>If you have access to HKEY_LOCAL_MACHINE, you can install it there and all the browsers should find it fine. This is also much easier to implement in NSIS, since you don't have to search through the registry and hard drive to find where to put the plugin... just stick it in $APPDATA<br><br>Hope that helps someone!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">31st December 2008 01:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">&gt;&gt; The correct way<br><br>says who? ;)<br><br>take the flash plugin as example and analyse it ;)<br>it does both - adobe knows why<br><br>i would say its the better way cause all NP-based browser can find it (if they were build to find it)<br><br>answered 1) why to install a plugin when the browser is not there?<br>for future purpose, nah, not really.<br><br>answered 2) idd - the actual plugin folder only belongs to it<br>of course you have to think of all installed np-based browser<br>advantage - firefox will find it for 100% - also in case the registry is mixed up<br>disadvantage - in case of two places firefox get a hickcove<br><br>answered 3) i'm not sure about that. its just as simple as copy&amp;paste<br>but it needs registry access for the machine in your way<br><br>here the example for adobe flash player in registry<br></p><pre>
<code>[HKEY_LOCAL_MACHINE\SOFTWARE\MozillaPlugins\@adobe.com/FlashPlayer]<br>"Path"="C:\\WINDOWS\\system32\\Macromed\\Flash\\NPSWF32.dll"<br>"XPTPath"="C:\\WINDOWS\\system32\\Macromed\\Flash\\flashplayer.xpt"<br>"ProductName"="AdobeÂ® FlashÂ® Player Plugin"<br>"Vendor"="Adobe Systems Incorporated"<br>"Description"="AdobeÂ® FlashÂ® Player 10"<br>"Version"="10.0.12.36"<br></code>
</pre><br>
      <br>
      something to mention - extensions dont need machine access<br>
      HKEY_CURRENT_USER\Software\Mozilla\Firefox\Extensions<br>
      <br>
      e.g.<br>
      "mozilla_cc@internetdownloadmanager.com"=...<br>
      <br>
      same argument - extension can be installed directly into the profile - or lokal (user only) for all programs<br>
      <br>
      <i>BTW i cant see your links...</i>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">taxilian</span><br>
      <span class="post-time small text-muted">7th January 2009 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Okay, I'll agree with that. "The best way" is certainly a relative, and opinionated, statement. Allow me to rephrase it, then: After a lot of research, study, and drawing on 2 years of history of a browser plugin that has been installed on literally millions of machines, I submit my opinion that this is the easiest, most scalable way to install a plugin. :-)<br>
      <br>
      I mean no disrespect.<br>
      <br>
      I actually have studied the flash plugin quite a bit, as well as the Silverlight plugin, the common java plugins, and several others. Most of them work in the way I described. In fact, on my machine (and a few others that I have tested it on), Flash only installs in the registry, as you have noted.<br>
      <br>
      There are a lot of reasons that you might want to install when a browser hasn't been installed. One is because they may install a different one than you are expecting. Chrome, Safari, and Opera are all good examples. However, not only that, but many plugins (Silverlight, for example) contain both a NPAPI(firefox) plugin and an ActiveX plugin all in the same file; in which case it makes perfect sense to install it so that either browser could use the same plugin.<br>
      <br>
      <br>
      You are correct that this way requires access to the registry; however, most computers require adminitrator access to write to the firefox home directory. Many developers forget about that, because they always are logged in as an admin user (hey, I do as well), but if you want your plugin to be installable in all cases, then it could be a problem.<br>
      <br>
      The extension install method is the one that my second link (which I incorrectly added, aparently) described. Let me try it again:<br>
      <br>
      Edit: I can't seem to include URLs, so I'll try cutting it apart:<br>
      http s :// developer.mozilla.org/en/Adding_Extensions_using_the_Windows_Registry - Adding Extensions using the Windows Registry<br>
      /Edit<br>
      <br>
      The first link discussed plugin installation in the registry:<br>
      <br>
      Edit:<br>
      http s:// developer.mozilla.org/En/Plugins/The_First_Install_Problem - The First Install Problem<br>
      /Edit<br>
      <br>
      Installing extensions to a profile directory can in many cases be a good way to go; however, it is difficult to ensure that there will not be errors if you are writing to the profile directory (which generally speaking only firefox should be writing to, though this is of course debatable as well), and you have to worry about which profile to install it to (or install it in multiple locations) And, yes, there are suprisingly a lot of different reasons that someone would have multiple profiles on their machine.<br>
      <br>
      When it comes down to it, how you decide to install should take a lot of things into account. When I look at the installer, I have to take into account that it will be installed on thousands of machines every month, and I need to catch every possible use case. If you have a smaller and more controlled userbase, it's not as big of an issue.<br>
      <br>
      The method that we will be using (currently we use an XPI-based install, but it's causing some issues) is a hybrid. We register as a plugin and as an extension, both in the registry, and we register it as an ActiveX control. That way all NP-based browsers will work with it, though firefox 2 will not be able to detect it without a restart (firefox 2 only sees plugins installed in HKEY_LOCAL_MACHINE)</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>