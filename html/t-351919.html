<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Listing installer contents" />

  <title>Listing installer contents - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Listing installer contents</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=351919">Listing installer contents</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thammr</span><br />
      <span class="post-time small text-muted">13th November 2012 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Listing installer contents</strong><br />
      I want to obtain a listing of the contents of installers that I create (zlib compression) so that I can verify and record the contents (contents are dynamically determined at compile time).<br />
      Currently I do this manually using 7-zip which handles NSIS installers very well. Winzip on the other hand doesn't support the format.<br />
      However, I want to do this from a Java program. Can anyone give me a pointer to decoding NSIS installers using java.util.zip.* (assuming that's possible)? Alternatively, is there documentation on the NSIS installer file format?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">13th November 2012 17:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is not an answer to your question, but have you considered making a list during compilation? You can use !tempfile, then !appendfile, and at the end do !system 'copy "${TheTempFile}" "${__FILEDIR__}\FileLog.txt"' or something like that. Or if you want to use File /r or wildcards, you could make an NSIS executable that gets executed during compiletime (using !execute command), and generates a file list for you.<br />
      <br />
      For even more advanced stuff, you could generate a second .nsi file during compiletime, and compile that and execute during compiletime. The sky's the limit.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">thammr</span><br />
      <span class="post-time small text-muted">14th November 2012 08:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, I hadn't thought of that. Its a possible solution.<br />
      I would still prefer to actually examine the installer contents. But if I can't make any progress there, I'll consider generating the required listings during compilation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">14th November 2012 15:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Future NSIS builds may contain a compiletime function to enumerate files on the compiling system, specifically for generating file lists etc. No idea when this functionality will appear in trunk, though. Anders might have an idea... *cough*</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">niteflyer</span><br />
      <span class="post-time small text-muted">19th November 2012 15:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In case you are able and willing to unpack your installer: did you play with <a href="http://nsis.sourceforge.net/NfUtils_header_file#nfu.ProcessStdSwitches" target="_blank">http://nsis.sourceforge.net/NfUtils_...essStdSwitches</a> ?<br />
      This will enable you to extract your files with a commandline-switch (/x) without actually running the installer's script.<br />
      <br />
      nfUtils.exe itself supports this switch for demo-purposes (see also nfutils.exe /?), see <a href="http://nsis.sourceforge.net/NfUtils_header_file#Links" target="_blank">http://nsis.sourceforge.net/NfUtils_header_file#Links</a><br />
      <br />
      Be sure to use <a href="http://nsis.sourceforge.net/NfUtils_header_file#nfu..21AddFile" target="_blank">http://nsis.sourceforge.net/NfUtils_...nfu..21AddFile</a> instad of the FILE-instruction in your installer script.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br />
      <span class="post-time small text-muted">20th November 2012 00:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by thammr</small><br />
        I want to obtain a listing of the contents of installers that I create (zlib compression) so that I can verify and record the contents (contents are dynamically determined at compile time).<br />
        Currently I do this manually using 7-zip which handles NSIS installers very well. Winzip on the other hand doesn't support the format.<br />
        However, I want to do this from a Java program. Can anyone give me a pointer to decoding NSIS installers using java.util.zip.* (assuming that's possible)? Alternatively, is there documentation on the NSIS installer file format?
      </blockquote>7-Zip has a command-line version and can write its output to the STDOUT, Java can run external applications and capture the STDOUT. So where is the problem? Sure, you Java app won't be platform-independant anymore, as soon as you call external apps. But on the other hand, you can get 7-Zip for all relevant platforms, so this shouldn't be a real issue...<br />
      <br />
      See also:<br />
      <a href="http://www.rgagnon.com/javadetails/java-0014.html" target="_blank">http://www.rgagnon.com/javadetails/java-0014.html</a>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
