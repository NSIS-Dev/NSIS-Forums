<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="debugging MUI_PAGE_FINISH?" />

  <title>debugging MUI_PAGE_FINISH? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">debugging MUI_PAGE_FINISH?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=218521">debugging MUI_PAGE_FINISH?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">10th June 2005 10:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>debugging MUI_PAGE_FINISH?</strong><br />
      Hi all,<br />
      <br />
      Someone found a bug in the debian nsis package[1], where the MUI_PAGE_FINISH is never shown.<br />
      <br />
      Is anyone able to reproduce this using the windows version of nsis? I've confirmed it happens with the debian package.<br />
      <br />
      Does anyone know of a way to debug the function? I've tried inserting MessageBox and FileOpen/etc, but neither of these can be used inside the MUI_PAGE_FINISH macro.<br />
      <br />
      1. <a href="http://bugs.debian.org/312564" target="_blank">http://bugs.debian.org/312564</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th June 2005 10:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The MUI_FUNCTION_FINISHPAGE macro is where you'd want to add your code.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">12th June 2005 08:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, so I put this at the end of the PRE function:<br />
      <br />
      MessageBox MB_OK "${PRE}"<br />
      <br />
      And this at the start of the LEAVE function:<br />
      <br />
      MessageBox MB_OK "${LEAVE}"<br />
      <br />
      Result is that it seems that only the PRE function is called. I'm not sure what to make of this, any ideas about what might cause it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th June 2005 13:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Go deeper. Dig into the code of the InstallOptions plug-in.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">13th June 2005 04:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmmm, ok, if I copy the msvc-compiled InstallOptions.dll from the source tarball to the debian package, the finish page works fine. Must be a problem with mingw-compiled versions. I'll investigate further. I not that the mingw version depends on msvcrt.dll for some functions, while the msvc version doesn't: __dllonexit, _assert, _errno, abort, fflush, free, malloc, memset. I expect this might be a problem for some other plugins too.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">13th June 2005 14:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Seems that the actual problem is that the resource is not compiled into the dll for some reason. Good news is that this will not be an issue in 2.07. Now to backport the fix.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">13th June 2005 20:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by pabs</i><br />
        <b>Good news is that this will not be an issue in 2.07. Now to backport the fix.</b>
      </blockquote>Was that a problem with the Makefiles?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">14th June 2005 06:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yep. I used $&lt; instead of $^ in the dlls that needed to link more than one .o file together :/<br />
      <br />
      So, fixing the MUI problem fixed a number of other (hidden) plugin problems too.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
