<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="MUI_LANGDLL_SAVELANGUAGE comes too late" />

  <title>MUI_LANGDLL_SAVELANGUAGE comes too late - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">MUI_LANGDLL_SAVELANGUAGE comes too late</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273536">MUI_LANGDLL_SAVELANGUAGE comes too late</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">28th June 2007 06:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>MUI_LANGDLL_SAVELANGUAGE comes too late</strong><br />
      MUI saves current (langdll selected) language in the INSTFILES page Leave function only. I understand why - not to write registry value on cancelled installation, but IMHO this is not 100% descision. Some initialization may require on INSTFILES page - install drivers, services or perform operations with already installed files. Not a problem to add this line to the script, but moving MUI_LANGDLL_SAVELANGUAGE to INSTFILES Show function looks usefull for me.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th June 2007 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't understand. How can initialization in the instfiles page of drivers or services after that macro? Are you saying the initialization might fail and therefore the macro won't be called?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br />
      <span class="post-time small text-muted">28th June 2007 14:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No. My situation is following: during installation QStar installer asks customer to select devices for claiming. This is done by a special GUI tool (just copied/installed application) that displays a list of available devices. While this happen on INSTFILES page, registry LanguageID value is not setten yet (will be done by MUI in Leave function), so application uses old/default lang. If MUI can save value in Show function LangId will be up-to-date.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th June 2007 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's a very specific case. In the normal case, we'd want the language to be saved only when the installation actually finishes. This allows the user to still cancel the installation in the instfiles page when something is asked or when the Cancel button is available in case he doesn't understand anything because of a wrong language.<br />
      <br />
      That registry key is saved for the MUI anyway. It's not meant for external usage. It can just as well contain the name of the language someday if that's easier for the MUI. The documentation only states it stores the language, nothing else.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
