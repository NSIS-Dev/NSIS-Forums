<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Create users wa3 install dir the installdir"><title>Create users wa3 install dir the installdir - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Create users wa3 install dir the installdir</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=72431">Create users wa3 install dir the installdir</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">mc^^^^</span><br><span class="post-time small text-muted">19th January 2002 07:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Create users wa3 install dir the installdir</strong><br>how do i make the users wa3 install directory be the instdir of the installer?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Pomflain</span><br><span class="post-time small text-muted">19th January 2002 07:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Isn't that probably just stored somewhere in the registry, so you can read the path out with a ReadRegStr command and then set it. You might have to use the .onInit callback to read it before the portion of the installer runs where you normally set the default install directory. Don't know if that helps, may be way off here...rather tired...:(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mc^^^^</span><br><span class="post-time small text-muted">19th January 2002 08:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">it is in the registry, kinda, in the windows uninstall bit you know. for me it has "d:/winamp3/uninst-wa3.exe". I'm not sure if you can get just the directory though. i think you can cause when it says it for me using that key it says "d:/winamp3/" which is good, but i cant get it to be the installdir. im not great at nsis so might need a little guidence;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Rocker</span><br><span class="post-time small text-muted">19th January 2002 10:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">just make your nsis point to $programfiles\winamp3<br><br><br>if its wrong....then the person installing is an idiot:D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mc^^^^</span><br><span class="post-time small text-muted">19th January 2002 12:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You callin me an idiot! mine is in D:\winamp3 cause i have 3 partitions, 1 for xp 1 for 98 and one for programs.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Lactobacillus</span><br><span class="post-time small text-muted">19th January 2002 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try</p><pre>
<code>InstallDirRegKey HKLM Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3 UninstallString</code>
</pre>...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mc^^^^</span><br><span class="post-time small text-muted">19th January 2002 12:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">YOUR A BLOODY CHAMPION MATE!<br><br>now for the hard part:(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">19th January 2002 14:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Lactobacillus!<br><br>Here is the answer for the hard part:<br></p><pre>
<code><br>;-------------------------------------------------<br>; GetParent<br>; input, top of stack  (i.e. C:\Program Files\Poop)<br>; output, top of stack (replaces, with i.e. C:\Program Files)<br>; modifies no other variables.<br>;<br>; Usage:<br>;   Push "C:\Program Files\Directory\Whatever"<br>;   Call GetParent<br>;   Pop $0<br>;   ; at this point $0 will equal "C:\Program Files\Directory"<br><br>Function GetParent <br>  Exch $0 ; old $0 is on top of stack<br>  Push $1<br>  Push $2<br>  StrCpy $1 -1<br>  loop:<br>    StrCpy $2 $0 1 $1<br>    StrCmp $2 "" exit<br>    StrCmp $2 "\" exit<br>    IntOp $1 $1 - 1<br>  Goto loop<br>  exit:<br>    StrCpy $0 $0 $1<br>    Pop $2<br>    Pop $1<br>    Exch $0 ; put $0 on top of stack, restore $0 to original value<br>FunctionEnd<br></code>
</pre><br>
      <br>
      This was taken from functions.html from your NSIS dir.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rocker</span><br>
      <span class="post-time small text-muted">24th January 2002 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by : : : Chromium : : :</i><br>
        <b>You callin me an idiot! mine is in D:\winamp3 cause i have 3 partitions, 1 for xp 1 for 98 and one for programs.</b>
      </blockquote>why did you type that here and on icq???<br>
      <br>
      lol<br>
      <br>
      yeah your an idiot:p:D
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>