<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Dynamically change text in shown dialog in leave function" />

  <title>Dynamically change text in shown dialog in leave function - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Dynamically change text in shown dialog in leave function</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=225395">Dynamically change text in shown dialog in leave function</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yurik</span><br />
      <span class="post-time small text-muted">7th September 2005 12:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Dynamically change text in shown dialog in leave function</strong><br />
      I need to set text for a field in my dialog that is already shown with MUI_INSTALLOPTIONS_DISPLAY. This should be done in the dialog leave function.<br />
      I've tried MUI_INSTALLOPTIONS_WRITE and SendMessage $DlgItem ${WM_SETTEXT} 0 "STR:$0" but none of these two ways works.<br />
      How to do this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th September 2005 13:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think you can do that. AFAIK, the leave function is called after the dialog has been closed.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th September 2005 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This script changes the colours on the dialog from the leave function:<br />
      <a href="http://nsis.sourceforge.net/wiki/File:IoColors.zip" target="_blank">http://nsis.sourceforge.net/wiki/File:IoColors.zip</a><br />
      <br />
      What you want to do is pretty similar so you should get the idea.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th September 2005 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nice.<br />
      However, you are not actually leaving the page.<br />
      You are aborting so that the dialog is shown again.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th September 2005 15:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry forgot to mention the actual code you want is in between the MUI_INSTALLOPTIONS_INITDIALOG and MUI_INSTALLOPTIONS_SHOW calls.<br />
      <br />
      Edit: That's if you want the changes to be made as the page is shown, otherwise what you want as iceman_k rightly said is impossible.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yurik</span><br />
      <span class="post-time small text-muted">7th September 2005 19:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Afrow UK</i><br />
        <b>Sorry forgot to mention the actual code you want is in between the MUI_INSTALLOPTIONS_INITDIALOG and MUI_INSTALLOPTIONS_SHOW calls.<br />
        <br />
        Edit: That's if you want the changes to be made as the page is shown, otherwise what you want as iceman_k rightly said is impossible.<br />
        <br />
        -Stu</b>
      </blockquote>The matter is that I call possibly long external application with ExecWait from the page leave function. So to not to confuse a user, I want to write something at this page as it is still shown. Also, I disable all buttons to not to confuse him.<br />
      So, dialog window is still here.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">7th September 2005 20:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you run ExecWait from within the leave function you cannot update the buttons and text until the ExecWait is complete- at which point it is moot, really. On the other hand if you update the buttons and text before calling ExecWait, your ExecWait will not be called until the user clicks a button in the IO page, which again renders the whole text update pointless.<br />
      Looks like there is no solution to your problem.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th September 2005 09:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just display a Banner.<br />
      <br />
      Edit: Here's an idea that could be possible with InstallOptionsEx perhaps. I haven't checked this but here's the idea. You execute the process with Exec not ExecWait in the custom page's PRE function. If it is possible to get InstallOptionsEx to leave the page every say 5 seconds you could use FindProcDLL to check if the process is still running in the LEAVE function. If it is still running you Abort back to the page, otherwise you re-enable the Next button and set some text to say the process has finished and call Abort.<br />
      <br />
      If you want to run the process only if the user clicks on a button, then that'll be a bit different. You'd probably have to have some boolean variable set or something...<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yurik</span><br />
      <span class="post-time small text-muted">8th September 2005 18:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hm, thanks for idea about displaying a banner - don't know how to do still, but will search. Dealing button - I am able to disable Next button in leave function - this works by simply call to EnableWindow. But I cannot change the text even with WinApi call and cannot understand, why.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th September 2005 19:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Banner plugin. Docs\Banner<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yurik</span><br />
      <span class="post-time small text-muted">9th September 2005 07:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, Afrow UK!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
