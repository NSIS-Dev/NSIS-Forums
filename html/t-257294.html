<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Make menu choose many set up"><title>Make menu choose many set up - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Make menu choose many set up</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257294">Make menu choose many set up</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">sunlight112</span><br><span class="post-time small text-muted">11th October 2006 03:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Make menu choose many set up</strong><br>How can I make a menu before I set up many program.<br>Eg: I want to set up jdk, my sql and my program. I want to request user to set up following these steps:<br>+ JDK<br>+ My Sql<br>+ My product<br>When software run, I must request user to set up JDK<br>first. After that, I will install my sql and so on...<br><br>Thank a lot,</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CancerFace</span><br><span class="post-time small text-muted">11th October 2006 22:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br>From your description I would think that jdk and MySQL are prerequisites to run your program, so there is no reason to have a menu and ask the user to install those, just use some code in your .onInit function to check if jdk and MySQL are installed and then install your program. You can read some registry key/value or search for a specific file in each case (you can use some registry tool, like <a href="http://www.snapfiles.com/get/regshot.html" target="_blank">regshot</a>, to see what keys/values are generated by jdk and MySQL).<br>For example:</p><pre>
<code>Function .onInit<br>...<br>ClearErrors<br>ReadRegStr $R0 HKLM "Software\jdk" "Version"<br>IfErrors +1 +4<br>  SetOutPath $PLUGINSDIR<br>  File "JDK_Installer.exe"<br>  nsExec::ExecToLog '"$PLUGINSDIR\JDK_Installer.exe" /s'<br>ClearErrors<br>ReadRegStr $R0 HKLM "Software\MySql" "Version"<br>IfErrors +1 +4<br>  SetOutPath $PLUGINSDIR<br>  File "MySQL_Installer.exe"<br>  nsExec::ExecToLog '"$PLUGINSDIR\MySQL_Installer.exe" /s'<br>...<br>FunctionEnd</code>
</pre>That is assuming that you want to include jdk and MySQL with your distribution, in the same package. The filenames and switches used in the above example are random by the way.<br>
      <br>
      Hope this helps<br>
      <br>
      CF
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sunlight112</span><br>
      <span class="post-time small text-muted">13th October 2006 09:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I do it the same way you said, but I still do not work.<br>
      My Code here:<br>
      Function .onInit<br>
      !insertmacro MUI_LANGDLL_DISPLAY<br>
      <br>
      ReadRegStr $R0 HKLM "c:\programfiles\java\jdk" "1.5.0_08"<br>
      IfErrors +1 +4<br>
      SetOutPath $PLUGINSDIR<br>
      File "d:\software\jdk.exe"<br>
      nsExec::ExecToLog '"$PLUGINSDIR\jdk.exe" /s'<br>
      <br>
      ReadRegStr $R0 HKLM "c:\Programfiles\my sql Software\MySql\MySqlServer" "5.0"<br>
      IfErrors +1 +4<br>
      SetOutPath $PLUGINSDIR<br>
      File "MySQL_Installer.exe"<br>
      nsExec::ExecToLog '"$PLUGINSDIR\MySQL_Installer.exe" /s'<br>
      FuncitonEnd<br>
      <br>
      I only add your guide in onInist function and when I run it have some errors.<br>
      Can you tell me why????<br>
      Thank!<br>
      I am so sorry for my inconvenience because this is the first time I use NullSoft<br>
      Thank alot,</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CancerFace</span><br>
      <span class="post-time small text-muted">13th October 2006 11:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think you misread my post :(<br>
      This:</p>
      <pre>
<code>ReadRegStr $R0 HKLM "c:\programfiles\java\jdk" "1.5.0_08"</code>
</pre>should look like this:
      <pre>
<code> ReadRegStr $R0 HKLM "SOME_REGISTRY_KEY" "SOME_REGISTRY_VALUE"<br></code>
</pre>You should be reading a value from the registry. I do not know what value as I don't have JDK or MySQL installed, that is why I suggested that you use a freeware tool like <a href="http://www.snapfiles.com/get/regshot.html" target="_blank">regshot</a> to get a snapshot of the registry before installing each one of those and after, so that you can see what registry entries are generated. Then adjust your code so that it reads the appropriate registry entries.<br>
      <br>
      Also this may be wrong:
      <pre>
<code>nsExec::ExecToLog '"$PLUGINSDIR\jdk.exe" /s'</code>
</pre>I do not know what the name of your JDK install package is nor do I not know what the silent switch for that is. That was an example as I stated.<br>
      <br>
      The same goes for the MySQL entries (both registry and switches).<br>
      <br>
      CF
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sunlight112</span><br>
      <span class="post-time small text-muted">17th October 2006 05:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you for your reply,<br>
      Your opinion is very good, your help is one of the process which I must do but I still want to create a menu to help user understand the process set up.<br>
      In my opinion,A menu is the same process to set up Visual Studio 2005 because my application need many software to support them. I want user to follow these steps to set up program because my install is very difficult.I must set up many program:<br>
      + The first, I want to set up JDK (check JDK has already set up yet).<br>
      + The second, I set up my sql 5.0 (check it again).<br>
      + The thirst,I will use tool zip2exe to pack these software which it does not have file exe to became file set up and install it in computer(for two software need to set up in my program)<br>
      + My product<br>
      So I need to create a menu for my program.If you have another opinion, can you help me!<br>
      Thanks,</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CancerFace</span><br>
      <span class="post-time small text-muted">17th October 2006 07:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use sections or section groups and force selection based on your criteria.<br>
      Use .onInit to see if one of your components is installed and disable/enable its section accordingly.<br>
      Check also <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=257534" target="_blank">this</a> post.<br>
      CF</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sunlight112</span><br>
      <span class="post-time small text-muted">17th October 2006 08:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank alot, :D<br>
      However, you can misread my opinion. I do not allow user to option these software which need to set up. I mean I will create a menu<br>
      + JDK<br>
      + My SQL<br>
      + My product 1<br>
      + My product 2<br>
      The first screen will appear below and run JDK first.<br>
      After setting up JDK, this screen will appear again and My SQL will be executed and so on.<br>
      I see your section which you help me, but this section,user can check these software and if they omit JDK or My SQL, they only want to install my product.It may appear problems here.<br>
      I will attach a file which screen the same VS 2005 which I want to create that.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CancerFace</span><br>
      <span class="post-time small text-muted">17th October 2006 08:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, I did not misread your post ;)<br></p>

      <blockquote>
        Use sections or section groups and <b>force selection</b> based on your criteria.
      </blockquote>CF
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sunlight112</span><br>
      <span class="post-time small text-muted">18th October 2006 11:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank a lot, I understand what you mean.<br>
      I create a component page and display the process to install my application. Firstly, I will install JDK(include check JDK is installed or not)and Set up JDK is checked.After finishing setting up JDK, the first screen will appear again and set up MY sql is check and process will continue.<br>
      How can I make the first screen appear again with MY SQL is checked and set up it???<br>
      Can you help me!!!<br>
      Thank alot,</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sunlight112</span><br>
      <span class="post-time small text-muted">19th October 2006 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If anyone is unsure of what I am talking about please tell me. I sounded good in my head, but might not have translated well.<br>
      Please help me!!!</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>