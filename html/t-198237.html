<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="MUI multilingual licence text problem !!" />

  <title>MUI multilingual licence text problem !! - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">MUI multilingual licence text problem !!</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=198237">MUI multilingual licence text problem !!</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jackmack</span><br />
      <span class="post-time small text-muted">3rd November 2004 16:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>MUI multilingual licence text problem !!</strong><br />
      Hi !<br />
      <br />
      I have problems with multilingual licence files. See my code below.<br />
      I try to use several diffrent licence files.<br />
      <br />
      In function .onInit I use !insertmacro MUI_LANGDLL_DISPLAY and choose english or german. But when I choose german no licence text is showed and the other nsis text is german.<br />
      <br />
      When I choose english the german licence text is showed and the other nsis text is english.<br />
      <br />
      Whats going wrong ?<br />
      <br />
      Is there a order in which I must add multilingual statements ?<br />
      <br />
      Thanks ...<br />
      <br />
      .jack<br />
      <br />
      <br />
      LicenseLangString myLicenseData ${LANG_ENGLISH} "licence\licenceEN.txt"<br />
      LicenseLangString myLicenseData ${LANG_GERMAN} "licence\licenceGE.txt"<br />
      <br />
      ; !insertmacro MUI_PAGE_WELCOME<br />
      !insertmacro MUI_PAGE_LICENSE $(myLicenseData)<br />
      !insertmacro MUI_PAGE_COMPONENTS<br />
      !insertmacro MUI_PAGE_INSTFILES<br />
      ; !insertmacro MUI_PAGE_FINISH<br />
      <br />
      ; !insertmacro MUI_UNPAGE_WELCOME<br />
      !insertmacro MUI_UNPAGE_COMPONENTS<br />
      !insertmacro MUI_UNPAGE_INSTFILES<br />
      ; !insertmacro MUI_UNPAGE_FINISH<br />
      <br />
      <br />
      ;-----------------------------------------------------------------------------<br />
      ;Languages -------------------------------------------------------------------<br />
      <br />
      !insertmacro MUI_LANGUAGE "German" ; ID = 1031<br />
      !insertmacro MUI_LANGUAGE "English" ; ID = 1033<br />
      !insertmacro MUI_RESERVEFILE_LANGDLL</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd November 2004 19:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm not sure what is wrong. I shall look into it.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd November 2004 19:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's because you are trying to set a LicenseLangString to a language that hasn't been created yet!<br />
      <br />
      Joost is going to have to do something to fix this, because there's no way you can include language files before you insert the page macro's and thus what you are trying to do is impossible with MUI at the moment.<br />
      He's going to have to add another way to set the LicenseData so that we can add it after including the languages.<br />
      <br />
      If this is possible already then I appologise, but right now I cannot find anything in the MUI documentation about using different License files (it only refers to defining one and only one.)<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">3rd November 2004 20:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        Is there a order in which I must add multilingual statements ?
      </blockquote>Yes, the order matters.<br />
      <br />
      Put your LicenseLangString lines AFTER the MUI_LANGAUGE ones, like this:<br />
      <br />
      !insertmacro MUI_LANGUAGE "German" ; ID = 1031<br />
      !insertmacro MUI_LANGUAGE "English" ; ID = 1033<br />
      <br />
      LicenseLangString myLicenseData ${LANG_ENGLISH} "licence\licenceEN.txt"<br />
      LicenseLangString myLicenseData ${LANG_GERMAN} "licence\licenceGE.txt"<br />
      <br />
      (just move the two LicenseLangString lines)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd November 2004 21:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">pengyou that doesn't work because you have to insert the license page macro before the language macro's (and so before the LicenseLangString entries as well).<br />
      <br />
      You then just get the error...<br />
      LangString "myLicenseData" is not set in language table of language ....<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">3rd November 2004 22:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        pengyou that doesn't work because you have to insert the license page macro before the language macro's (and so before the LicenseLangString entries as well).
      </blockquote>Have another look at what I said:

      <blockquote>
        (just move the two LicenseLangString lines)
      </blockquote>Just in case that is not clear enough, here is what I was suggesting:
      <pre>
<code>; !insertmacro MUI_PAGE_WELCOME<br />!insertmacro MUI_PAGE_LICENSE $(myLicenseData)<br />!insertmacro MUI_PAGE_COMPONENTS<br />!insertmacro MUI_PAGE_INSTFILES<br />; !insertmacro MUI_PAGE_FINISH<br /><br />; !insertmacro MUI_UNPAGE_WELCOME<br />!insertmacro MUI_UNPAGE_COMPONENTS<br />!insertmacro MUI_UNPAGE_INSTFILES<br />; !insertmacro MUI_UNPAGE_FINISH<br />;-----------------------------------------------------------------------------<br />;Languages -------------------------------------------------------------------<br /><br />!insertmacro MUI_LANGUAGE "German" ; ID = 1031<br />!insertmacro MUI_LANGUAGE "English" ; ID = 1033<br />!insertmacro MUI_RESERVEFILE_LANGDLL<br /><br />LicenseLangString myLicenseData ${LANG_ENGLISH} "licence\licenceEN.txt"<br />LicenseLangString myLicenseData ${LANG_GERMAN} "licence\licenceGE.txt"</code>
</pre>Notice that all I did was move the two lines I mentioned.<br />
      <br />
      Here is a script I used to test this idea
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jackmack</span><br />
      <span class="post-time small text-muted">4th November 2004 09:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi !<br />
      <br />
      First thanks for your answers.<br />
      <br />
      The licensedemo.nsi works. When I use the below order<br />
      <br />
      !insertmacro MUI_PAGE_LICENSE "$(myLicenseData)"<br />
      ...<br />
      <br />
      ;-----------------------------------------------------------------------------<br />
      ;Languages -------------------------------------------------------------------<br />
      <br />
      !insertmacro MUI_LANGUAGE "German" ; ID = 1031<br />
      !insertmacro MUI_LANGUAGE "English" ; ID = 1033<br />
      !insertmacro MUI_RESERVEFILE_LANGDLL<br />
      <br />
      LicenseLangString myLicenseData ${LANG_ENGLISH} "licence\licenceEN.txt"<br />
      LicenseLangString myLicenseData ${LANG_GERMAN} "licence\licenceGE.txt"<br />
      <br />
      all works correct.<br />
      <br />
      Many Thanks.<br />
      <br />
      -jack<br />
      <br /></p>

      <blockquote>
        <i>Originally posted by pengyou</i><br />
        <b>Have another look at what I said:Just in case that is not clear enough, here is what I was suggesting:</b>
        <pre>
<b><code>; !insertmacro MUI_PAGE_WELCOME<br />!insertmacro MUI_PAGE_LICENSE $(myLicenseData)<br />!insertmacro MUI_PAGE_COMPONENTS<br />!insertmacro MUI_PAGE_INSTFILES<br />; !insertmacro MUI_PAGE_FINISH<br /><br />; !insertmacro MUI_UNPAGE_WELCOME<br />!insertmacro MUI_UNPAGE_COMPONENTS<br />!insertmacro MUI_UNPAGE_INSTFILES<br />; !insertmacro MUI_UNPAGE_FINISH<br />;-----------------------------------------------------------------------------<br />;Languages -------------------------------------------------------------------<br /><br />!insertmacro MUI_LANGUAGE "German" ; ID = 1031<br />!insertmacro MUI_LANGUAGE "English" ; ID = 1033<br />!insertmacro MUI_RESERVEFILE_LANGDLL<br /><br />LicenseLangString myLicenseData ${LANG_ENGLISH} "licence\licenceEN.txt"<br />LicenseLangString myLicenseData ${LANG_GERMAN} "licence\licenceGE.txt"</code></b>
</pre><b>Notice that all I did was move the two lines I mentioned.<br />
        <br />
        Here is a script I used to test this idea</b>
      </blockquote>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
