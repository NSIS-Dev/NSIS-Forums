<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Help With Install Options- So So Close... I think..."><title>Help With Install Options- So So Close... I think... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Help With Install Options- So So Close... I think...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205605">Help With Install Options- So So Close... I think...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">mattdisaster</span><br><span class="post-time small text-muted">22nd January 2005 07:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Help With Install Options- So So Close... I think...</strong><br>Hi everyone-<br>I've posted on here before and everyone was great helping me out, I was in the irc room earlier this evening and had some excellent help, but I've hit another wall and I think I'm so so close so I figured I'de ask on here. First I'll explain the goal:<br><br>I'de like for the installation to install all the files like normal a normal installation would, following that, 2 custom pages come up(which I have succesfully created and implemented into the setup), each page has something like 4 fields of information that needs to be filled in, mainly paths to directorys and a few locations of executable files. From there I'de like for the setup to then take the information from each field and place it into its spot in config .xml file that was installed along with the other files in the setup.<br><br>Whats happening:<br>I can get the install to work fantastic, the pages to show up, the fields to work (collect and display the data perfect), and the installation finish. But none of the data is being written to the .xml file.<br><br>Via the irc room I set the custom page to run a function once loaded, and that function has the write to file info in it. From what I can see the data isnt being put into any varibles(?) to be placed into the file. I know the function works because if I replace the $R0 variable and put words or something of the like, it will show up in the xml file.<br>Any help would be great, I'll attach the script for the curious. Thanks so much to everyone!<br><br>-matt</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">22nd January 2005 10:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Put a messagebox in .onLeaveFunc to see what $R0 is.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">22nd January 2005 11:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You are using MUI_INSTALLOPTIONS_WRITE instead of MUI_INSTALLOPTIONS_READ. You are writing the content of $R0 into the INI file, not reading it from the INI file.<br><br>Are you sure .onLeaveFunc is called? Its name might start with a dot, but it's not an installer callback function and I don't see it referenced anywhere.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mattdisaster</span><br><span class="post-time small text-muted">22nd January 2005 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you both for the replies, I updated my script alittle and have updated the attachment. I put in the msg box and it does come up, but nothing shows for the $r0 value and to see if it was working I changed the write text from $R0 to "testers" and it wrote it perfect. I still have no clue whats happening or why it isnt putting the data to the $R0. Any ideas? Thanks so much for all the help so far, please excuse my newbness. heh<br><br>-matt<br><br>Edit: You cant edit posts after a certain time, so I've uploaded it to my server. Sorry and thanks again for looking!<br><a href="http://www.disasterparty.com/xlobby/myxlobbyscript.nsi" target="_blank">xlobbyinstaller.nsi</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">22nd January 2005 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you miss kichik's post?<br>You're using:<br>!insertmacro MUI_INSTALLOPTIONS_WRITE $R0 "CPA.ini" "Field 6" "State" when it should be:<br>!insertmacro MUI_INSTALLOPTIONS_READ $R0 "CPA.ini" "Field 6" "State"<br><br>With !insertmacro MUI_INSTALLOPTIONS_WRITE $R0 "CPA.ini" "Field 6" "State"<br>you're effectivly writing to an INI file named $R0, a section in it called "CPA.ini", a key named "Field 6" and a value of "State"!<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mattdisaster</span><br><span class="post-time small text-muted">22nd January 2005 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Oh my lord, I apologize for the misunderstanding! I just doubled checked it, and had the field placed in the wrong function! I tried it the correct way but in the wrong place and then just reverted it back to what I had it. End of story, you guys are the best!<br><br>-matt</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>