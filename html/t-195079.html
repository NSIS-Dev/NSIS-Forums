<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Roll up roll up, execwait question" />

  <title>Roll up roll up, execwait question - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Roll up roll up, execwait question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=195079">Roll up roll up, execwait question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 15:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Roll up roll up, execwait question</strong><br />
      Hi guys, gotta nother one for you. I hope it hasn't been asked before, I try and ask only the questions I have to...<br />
      <br />
      I want to (very simply) pipe the output from an unzip program to a text file.<br />
      <br />
      On the command line I'd do this:<br />
      <br />
      unzip.exe -ddirectory-name -o compressed-file.war &gt; C:\temp.txt<br />
      <br />
      However this doesn't seem to work:<br />
      <br />
      Execwait "unzip.exe -ddirectory-name -o compressed-file.war &gt; C:\temp.txt"<br />
      <br />
      Any ideas? Can I treat Execwait as a shell interface, or is it less flexible than that?<br />
      <br />
      Thanks guys<br />
      <br />
      Rob</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th September 2004 15:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need the command line interpreter for that. Search for MySQL and you'll find your answer. If you want to later read that text file you should skip that and just use nsExec.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Er I hate to be the idiot, but is there some documentation anywhere for nsExec?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th September 2004 16:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">&lt;NSIS folder&gt;\Contrib\nsExec.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 16:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you're clearly the person driving these boards as well as maintaining the project well done mate :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 16:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh er yeah, can I just chuck<br />
      <br />
      nsExec::Exec "unzip.exe -ddirectory-name -o compressed-file.war" into a script without anything else and expect it to do something good? And if it does something good, how do I get the output from that into a text file or whatever?<br />
      <br />
      Love and hugs<br />
      <br />
      Rob</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th September 2004 16:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use nsExec::ExecToLog to print the output into the installation log (the one in the install page, not the text file) or nsExec::ExecToStack to get the output on the stack.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Aah ok I don't use the default one. Incidentally you are almost replying faster than I'm asking, thank you :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">29th September 2004 16:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Not quite sure how I get a rather huge number of lines from the stack when I don't know how many there will be but that's tomorrow's problem :)<br />
      <br />
      Laters<br />
      <br />
      Rob</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th September 2004 16:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nsExec pushes it all as one string. You just use Pop to get it. Note that a stack element size is limited to 1024 by default.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">30th September 2004 09:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hm right ok, I'm probably looking at more like 800Kb of data. Can the stack be made to cope with that sort of input?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">30th September 2004 09:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh also this command simply gives an output of 0 in the log:<br />
      <br />
      nsExec::ExecToStack "c:\temp\unzip.exe -ddirectory-name -o file-to-unzip.war"<br />
      Pop $R1<br />
      LogText $R1</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">30th September 2004 09:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can recompile NSIS with a string size (also affect stack) of 800k, but that won't be a good idea. It means NSIS will use at least 16MB more memory on runtime. If it's that much data, you need to go back to redirecting the output to a text file.<br />
      <br />
      nsExec pushes two strings when ExecToStack is used. See the example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">30th September 2004 09:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Oh duh sorry yes I did know about the 2nd param just forgot.<br />
      <br />
      And AH so do I look for that command line interpreter thing?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">30th September 2004 09:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, you need the command line interpreter. Look for "mysql" in this forum.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">30th September 2004 10:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ooh fantastic it works! You're a star kichik, and I don't care who hears me say it! :p</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
