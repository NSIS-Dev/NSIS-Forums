<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="trouble disabling some buttons" />

  <title>trouble disabling some buttons - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">trouble disabling some buttons</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313111">trouble disabling some buttons</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">alexp123</span><br />
      <span class="post-time small text-muted">28th September 2009 14:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>trouble disabling some buttons</strong><br />
      I am creating an auto-installer which is designed to operate without user interaction. I want to make it so the user can cancel on any page, but cannot hit the next or back buttons. I've been successful at disabling the Back button for all of the pages, and the next button for 4/7 of the pages. I can't seem to disable the "I agree" button for the License page, the "Install" button on the Start Menu Folder page, or the "Next" button on the directory page. Some of the relevent code is copied below. I have also tried many other control ID's, but havent had any success. I tried Resource Hacker and AutoIt as well... any ideas?<br />
      <br />
      from code:<br />
      ; License page<br />
      !define MUI_PAGE_CUSTOMFUNCTION_Pre License_PrePage<br />
      !define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
      !insertmacro MUI_PAGE_LICENSE "..."<br />
      <br />
      ...<br />
      ; Directory page<br />
      !define MUI_PAGE_CUSTOMFUNCTION_Pre Directory_PrePage<br />
      !define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
      !insertmacro MUI_PAGE_DIRECTORY<br />
      <br />
      ...<br />
      ; Start Menu page<br />
      !define MUI_PAGE_CUSTOMFUNCTION_Pre StartMenu_PrePage<br />
      !define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
      !insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />
      <br />
      ...<br />
      <br />
      <br />
      Function License_PrePage<br />
      StrCmp $AutoInstall "true" 0 end<br />
      StrCpy $R5 "250"<br />
      <br />
      GetDlgItem $4 $HWNDPARENT 1<br />
      EnableWindow $4 0<br />
      GetDlgItem $4 $HWNDPARENT 3<br />
      EnableWindow $4 0<br />
      <br />
      end:<br />
      FunctionEnd<br />
      <br />
      ...<br />
      <br />
      Function Directory_PrePage<br />
      StrCmp $AutoInstall "true" 0 end<br />
      StrCpy $R5 "250"<br />
      <br />
      GetDlgItem $4 $HWNDPARENT 1<br />
      EnableWindow $4 0<br />
      GetDlgItem $4 $HWNDPARENT 3<br />
      EnableWindow $4 0<br />
      end:<br />
      FunctionEnd<br />
      <br />
      ...<br />
      <br />
      Function StartMenu_PrePage<br />
      StrCmp $AutoInstall "true" 0 end<br />
      StrCpy $R5 "250"<br />
      <br />
      GetDlgItem $4 $HWNDPARENT 1<br />
      EnableWindow $4 0<br />
      GetDlgItem $4 $HWNDPARENT 3<br />
      EnableWindow $4 0<br />
      <br />
      end:<br />
      FunctionEnd<br />
      <br />
      Any help would be greatly appreciated!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">28th September 2009 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">...Shouldn't button disabling be in the SHOW function, and skipping in the PRE function?<br />
      <br />
      And why on earth would you want to disable the I Agree button on the license page? You don't want people to agree to your license? o_O</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">alexp123</span><br />
      <span class="post-time small text-muted">28th September 2009 14:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by MSG</i><br />
        <b>...Shouldn't button disabling be in the SHOW function, and skipping in the PRE function?<br />
        <br />
        And why on earth would you want to disable the I Agree button on the license page? You don't want people to agree to your license? o_O</b>
      </blockquote>It's not that we dont want them to agree to the license, we just dont want them to have a choice :) The installer is going to be included inside another installer, so they will be agreeing to the license implicitly.<br />
      <br />
      And as for the PRE vs. SHOW function, conventionally you are right, but it shouldnt matter in terms of how the program works in this case. I went ahead and made the switch anyway though :D
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">28th September 2009 16:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">the controls on a page are not yet created in the pre callback.<br />
      <br />
      use the .onVerifyInstDir callback for the directory page</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">alexp123</span><br />
      <span class="post-time small text-muted">28th September 2009 19:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks guys! Using skip page in PRE and disabling in SHOW did the trick for the license and start menu pages, and aborting in .onVerifyInstDir worked for the directory page</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
