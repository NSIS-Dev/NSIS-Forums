<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS install pages"><title>NSIS install pages - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS install pages</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=350822">NSIS install pages</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">29th October 2012 08:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS install pages</strong><br>I found NSIS easy to create installation pages.Now i have a welcome page,user agreement page,choose directory page etc in different pages.How can i create a installation with welcome page,user agreement and choosing path for installation in single page in a simple way? Any template for this design?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">29th October 2012 09:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No. You'll have to create a custom page using nsDialogs.<br><a href="http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html" target="_blank">http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">1st November 2012 12:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">where should i do the coding of nsdialogs? Right now i am using default installer pages with welcome page,licence page etc for which i have !insertmacro MUI_PAGE_WELCOME etc in my nsi file.But if i use the nsdialogs then should i use MUI_PAGE_WELCOME etc macros?<br>Where to include the code of nsDialogs?If you have any example please let me know.If possible plz give reference of a full script which uses all types of nsdialogs so that i can understand it easily..<br>Thank you</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">1st November 2012 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There's an excellent tutorial in the nsDialogs readme. You can simply add a 'page custom yourpagefunction' inbetween your MUI page macro calls.<br><br>In your custom page function you can use the MUI_HEADER_TEXT macro just before you call nsDialogs::show to set the page's header text.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">2nd November 2012 09:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">How to add choose install location box in in nsDialogs?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">2nd November 2012 09:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It's best to use a DIRECTORY page for setting install locations. If you need a second install location, use a second directory page with the MUI_DIRECTORYPAGE_VARIABLE define. (And perhaps MUI_DIRECTORYPAGE_TEXT_DESTINATION and MUI_DIRECTORYPAGE_TEXT_TOP defines.)<br><a href="http://nsis.sourceforge.net/Docs/Modern%20UI%202/Readme.html" target="_blank">http://nsis.sourceforge.net/Docs/Mod...02/Readme.html</a><br><br>But if you still want your own directory field, use NSD_CreateDirRequest.<br><a href="http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html#mref-create" target="_blank">http://nsis.sourceforge.net/Docs/nsD...ml#mref-create</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">2nd November 2012 11:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I was able to add directory for installation in nsdialog.how can i add custom license page?Can i add it by using nsdialog?I want to add licence in same page as directory selection page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">2nd November 2012 11:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, you can create your own custom page with nsDialogs, that's what it's for. But note that both the standard MUI license page and directory page do some very fancy stuff that is not easy to reproduce. Things like install folder verification, free space check, richtext rendering, etc...<br><br>I once created my own directory page, and it was a lot of work. You're probably better off using two standard pages separately.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">2nd November 2012 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok so i think its difficult to include both licence page and directory page together.but i think i can do welcome page and directory for installation can be combined in same page.Now i already have standard welcome page.How i can include directory selection in same page easily?Can i change the standard page script?if possible how?<br><br>Also how to add scroll bar for a text field in nsdialog(like in the licence agreement)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">2nd November 2012 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The MUI2 welcome page is a purely nsDialogs page, you can find the code in NSIS\Contrib\ModernUI2\pages\welcome.nsh (or whatever it's called, my memory isn't perfect). You can either copy and edit this code, or you can use the page's SHOW function to add some elements manually.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">2nd November 2012 14:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What is the major changes in mui.nsh and mui2.nsh? Now i am using mui.nsh. If i want to use mui2.nsh then what changes i should do(in mui 2.nsh document i got like "The interface settings provided by the NSIS compiler itself (such as LicenseText, Icon, CheckBitmap, InstallColors) should not be used in Modern UI scripts.")<br>So should i change anything?<br>If i use mui2.nsh then should i remove reference to mui.nsh(!include mui.nsh required or not?)<br>I tried copying welcome.nsh from the path u specified to my script path and added one extra label. i also included !include welcome.nsh in script.When compiling i got error like "!macro:macro named "MUI_WELCOMEPAGE_INTERFACE" already found!".Can u please help me on all of these errors??</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">2nd November 2012 14:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">All you need to do is replace !include MUI.nsh with !include MUI2.nsh.<br><br>Don't include welcome.nsh directly. Either copy its (nsDialogs) page design code to your own custom page function, or use the MUI macro to insert the official welcome page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">2nd November 2012 14:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">3rd November 2012 09:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have copied the nsdialogs from welcome.nsh to my script.When i compile i got error like Error:resolving install function "Call${MUI_PAGE_UNINSTALLER_FUNCPREFIX}muiPageLoadFullWindow" in function "${pre}"<br>I have copied only nsdialog from macro MUI_FUNCTION_WELCOMEPAGE PRE LEAVE.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">4th November 2012 05:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Don't just blatantly copy code you don't fully understand... The functionname "${MUI_PAGE_UNINSTALLER_FUNCPREFIX}muiPageLoadFullWindow" cannot be found by the compiler. This is logical, because you don't even have that function.<br><br>All you should copy from welcome.nsh is things like<br>${NSD_CreateBitmap} 0u 0u 109u 193u ""<br>Pop $mui.WelcomePage.Image<br>${NSD_SetStretchedImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br>Of course, you would need to change all the ${MUI_ETC} defines to actual values. ${MUI_WELCOMEPAGE_TITLE_HEIGHT} would be 28, ${MUI_WELCOMEPAGE_TEXT_TOP} would be 45, etc...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">5th November 2012 14:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I was able to do custom page using nsdialog. But how to set background color and font color as different colors? I am trying to add a link in welcome page for which i want text color other than black but i want background color of text white only.<br>${NSD_CreateLink} 200u 70u 65u 14u "license agreement"<br>Var /GLOBAL LINK<br>Pop $LINK<br><b>SetCtlColors $LINK "" "ffffff"</b><br>CreateFont $LINK.Font "$(^Font)" "8" "500"<br>SendMessage $LINK ${WM_SETFONT} $LINK.Font 0<br>${NSD_OnClick} $LINK onClickMyLink<br><br>here SetCtlColors $LINK "" "ffffff" makes background white,but i am not getting how to change color of text which is a link..plz help me</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">5th November 2012 21:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why don't you just set the text color with the same setctlcolors command..?<br><a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.14.15" target="_blank">http://nsis.sourceforge.net/Docs/Cha...html#4.9.14.15</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">7th November 2012 04:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i tried using using color for font in links.But didnt work for me<br>${NSD_CreateLink} 200u 70u 65u 14u "license agreement"<br>Var /GLOBAL LINK<br>Pop $LINK<br>SetCtlColors $LINK "" "ffffff"<br>CreateFont $LINK.Font "$(^Font)" "08" "500" /UNDERLINE<br>SetCtlColors $LINK.Font "" "F5DEB3"<br>SendMessage $LINK ${WM_SETFONT} $LINK.Font 0<br>${NSD_OnClick} $LINK onClickMyLink<br><br>But above code didn't change color of word "license agreement".<br>Can you tell me how to set color for text of a link?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">7th November 2012 06:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Fonts don't store color information, setting the text color with SetCtlColors on the link control handle should work...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">7th November 2012 06:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">But does my code will work? Because i didn't get the color for link.<br>this one worked for me and i was able to change font size<br>CreateFont $LINK.Font "$(^Font)" "08" "500" /UNDERLINE<br><br>But SetCtlColors $LINK.Font "" "F5DEB3" didn't change the font.<br>i doubt something wrong with my coding!!Please help me</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">7th November 2012 14:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I want to add a button or checkbox to make user to change installation folder for my application.If they select check box then only another installation page should appear with option for changing installation path.If check box is not selected the installation should be continued to default path.How i can do this by using nsdialog or any other option in nsis.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">7th November 2012 16:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) In the checkbox page's leave function, store the state of the checkbox into a variable.<br>2) In your directory page's pre function, call 'abort' if the variable is not set. This will make NSIS skip the directory page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">8th November 2012 08:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by MSG</small><br>1) In the checkbox page's leave function, store the state of the checkbox into a variable.<br>2) In your directory page's pre function, call 'abort' if the variable is not set. This will make NSIS skip the directory page.</blockquote>Should i change pre function of Directory.nsh of NSIS\Contrib\Modern UI 2\Pages path Or can i do it in my nsis script.now i have something like this<br>Function nsDialogsPageLeave<br><br>${NSD_GetText} $Text $Text_State<br>${NSD_GetState} $Checkbox $Checkbox_State<br>${If} $Checkbox_State == ${BST_CHECKED}<br>;script to open directory page<br><br>${EndIf}<br>FunctionEnd<br><br>can i do any coding to open a directory page in the above code.i think i cannot call "call directory" in this case.any idea to do it?or any alternative?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th November 2012 08:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You need to make your own prefunction. For a MUI page, use the MUI define:<br>!define MUI_PAGE_CUSTOMFUNCTION_PRE YourPreFunction<br>!insertmacro MUI_PAGE_DIRECTORY<br><br>Or, if this is a custom page, simply call abort in your normal page function, before you do nsDialogs::create.<br><br>As for your code example: You should not try to call a page. Instead, skip the page if you don't need it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">8th November 2012 11:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">How to abort or skip a page in nsdialog?<br>Also what does these pre function you told do?How to handle it?<br>I have attached a nsi file(it is a dummy installation in which i was trying to do custom pages)<br>I was not able to skip pages in nsDialogsPageLeave function.Please help me.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th November 2012 13:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I actually already answered your first question:<br></p><blockquote>Or, if this is a custom page, simply call abort in your normal page function, before you do nsDialogs::create.</blockquote>You can read about pre, show and leave functions here: <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3</a><br>Like I said, two times already: Do not try to skip pages in a leave function. Just call abort in a page's PRE function to skip it.<br><br>The script you supplied doesn't make any sense to me. First of all it's a pile of spaghetti, but I also only see one page being created. If there's no second page to skip, how are you expecting to skip it? o_O</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">8th November 2012 14:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">hi...MSG.<br>The script i posted had only welcome page and finish page.My plan was to add change destination folder in welcome page by giving check box for user.If he selects it then only directory page will appear.Also now using skipping of pages i am able to do what i wanted.Now my installation became easy with welcome page which also includes license and change directory and a finish page.Thank u for your help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">8th November 2012 16:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No problem, glad you got it working. Please try to keep your code clean. :)<br><br><br>Edit: (Actually, I'm not entirely sure if in a custom page function you should call abort. Perhaps instead you should just put all the nsDialogs code inside a big ${If} statement. I can't remember for sure. Just see what works for you.)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">9th November 2012 05:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yeah..i used abort to skip page.what i did is for directory page<br><br>Page custom InstallPageCreate checkinstdir<br>Page directory skippage ""<br><br>Function InstallPageCreate<br>;nsdialog script for welcome page and also a check box whether to change directory<br>${NSD_CreateCheckbox} 120u 90u 100% 10u "&amp;Change installation directory"<br>Pop $CheckBox<br>CreateFont $CheckBox.Font "$(^Font)" "08" "500"<br>SetCtlColors $CheckBox "" "FFFFFF"<br>SendMessage $CheckBox ${WM_SETFONT} $CheckBox.Font 0<br>FunctionEnd<br><br>Function checkinstdir<br>${NSD_GetText} $Text $Text_State<br>${NSD_GetState} $Checkbox $Checkbox_State<br>${If} $Checkbox_State == ${BST_CHECKED}<br>strcpy $checked 1<br>${Endif}<br>FunctionEnd<br><br>Function skippage<br>strcmp $checked 1 my1 close1<br>close1:<br>abort<br>my1:<br>FunctionEnd<br><br>This one worked for me.Do you have any better idea or suggestions?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th November 2012 05:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Looks good, but you should add an Else to your checkinstdir function. If the user clicks Back and then disables the checkbox, the installer shouldn't skip the directory page anymore.<br><br>Also, add this after pop $checkbox:<br>${If} $Checkbox_State == ${BST_CHECKED}<br>${NSD_Check} $Checkbox<br>${EndIf}<br>This way, the user's choice will be shown properly if the user clicks Back. (See also the Memory section of the nsDialogs manual: <a href="http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html#step-memory" target="_blank">http://nsis.sourceforge.net/Docs/nsD...ml#step-memory</a> )</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">winman2004</span><br><span class="post-time small text-muted">10th November 2012 04:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have done all the changes you have mentioned here and it is working fine now.<br>Thank you..MSG...</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>