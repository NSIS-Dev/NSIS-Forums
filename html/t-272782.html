<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="suggestion for exdll.h" />

  <title>suggestion for exdll.h - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">suggestion for exdll.h</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272782">suggestion for exdll.h</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">windsor_gabe</span><br />
      <span class="post-time small text-muted">13th June 2007 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>suggestion for exdll.h</strong><br />
      I'm creating my first plugin, and I'm having a build error in the code included from exdll.h.<br />
      <br />
      The problem is that the functions use lstrcpy/lstrcpyn which are actually macros that get mapped to either single-byte or wide-char versions (lstrcpyA/lstrcpyW) depending on the UNICODE macro. But the NSIS stack expects single-byte characters (right?) so the exdll.h functions like popstring() and pushstring() should be using lstrcpyA() etc. instead of depending on the UNICODE macro.<br />
      <br />
      JMHO</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">13th June 2007 19:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Done to make it easier for Unicode plug-ins. Though I must say I can't see a situation where you'd want to build a Unicode plug-in.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">windsor_gabe</span><br />
      <span class="post-time small text-muted">13th June 2007 19:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Mostly just the fact that VC++ 2005 now defaults to UNICODE build for any new projects, so I ran into this right away. Also I'm porting some code from an "MSI custom action" DLL to an NSIS plugin and the other developer had UNICODE turned on so it's easier just to keep it than to go through and fix all the TCHAR dependent code.<br />
      <br />
      When you say "done" does that mean this will be changed in the next version?<br />
      <br />
      Sorry for the newbie question but...I'm a newbie.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">13th June 2007 20:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes, done means the next version. The change is done in CVS.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">13th June 2007 20:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by windsor_gabe</i><br />
        <b>Mostly just the fact that VC++ 2005 now defaults to UNICODE build for any new projects, so I ran into this right away. Also I'm porting some code from an "MSI custom action" DLL to an NSIS plugin and the other developer had UNICODE turned on so it's easier just to keep it than to go through and fix all the TCHAR dependent code.<br />
        <br />
        When you say "done" does that mean this will be changed in the next version?<br />
        <br />
        Sorry for the newbie question but...I'm a newbie.</b>
      </blockquote>Since I hate Unicode strings I prefer disable them in projecto properties :)
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
