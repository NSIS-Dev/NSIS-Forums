<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS 1.7b test"><title>NSIS 1.7b test - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS 1.7b test</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=66663">NSIS 1.7b test</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">justin</span><br><span class="post-time small text-muted">25th November 2001 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS 1.7b test</strong><br>Been working on nsis 1.7b.. changed a lot, so it might have broken a lot, so i'm not quite ready to even put it on firehose.net/nullsoft.com yet. So alas, here's something for us to all test.<br><br><a href="http://1014.org/shiz/nsis17b.exe" target="_blank">http://1014.org/shiz/nsis17b.exe</a><br></p><ul><li>Mostly MBCS support in exehead and compiler.</li><li>Made !ifdef'd blocks out ignored (for all commands other than ones starting with !)</li><li>Made nsisconf.nsi not overwritten in installer.</li><li>Added GetFullPathName</li><li>Added more config.h options, moved MAX_INSTALL_TYPES to NSIS_MAX_INST...</li><li>Added CallInstDLL (using EW_REGISTERDLL)</li><li>Removed GetFullDLLPath, replaced it with more generic SearchPath (which can be used for non-DLLs).</li><li>Optimized fileform.c (GetCompressDataFromDataBlock etc) to be smaller</li><li>Trimmed more from zlib, down to 34kb with nearly all features (excluding XP and logging support) on. THIS NEEDS TESTING. :)</li><li>Lots of other small changes.</li></ul><br>I wouldn't recommend distributing installers made with this, but if they seem to work right they probably do (watch out for files getting extracted improperly, etc).<br><br>-Justin</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">felfert</span><br><span class="post-time small text-muted">26th November 2001 03:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Re: NSIS 1.7b test</strong><br>That CallInstDLL is <b>very</b> cool :) but i have one stupid question:<br>What is MBCS support?<br><br>-Fritz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Koen van de Sande</span><br><span class="post-time small text-muted">26th November 2001 18:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">MBCS = Multi-Byte-Character-Support (for Unicode Characters).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crish</span><br><span class="post-time small text-muted">26th November 2001 18:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i had no problems with my projects ...<br>it works fine</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">eccles</span><br><span class="post-time small text-muted">28th November 2001 21:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've played around with it a bit and I haven't found any problems, although seeing all the changes in zlib scares me... :)<br><br>Starting with 1.67 I've been playing about with some optimisations to reduce some more size... Well now I've merged in the changes to 1.7b from firehose.net... See what you think - here's the changed files.<br><br>Ta.<br><br>Dave Laundon.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">justin</span><br><span class="post-time small text-muted">28th November 2001 22:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Outstanding, your changes save 1kb for me!<br>Shall I merge into and release 1.7b2? :)<br><br>-Justin</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">eccles</span><br><span class="post-time small text-muted">28th November 2001 23:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sure thing :)<br><br>Oh.. I forgot to remove dealWithIcon and doChildSize from UI.C, but otherwise, yeah, go for it!<br><br>Cheers!<br><br>Dave.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">petersa</span><br><span class="post-time small text-muted">29th November 2001 08:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><ul><li>Made !ifdef'd blocks out ignored (for all commands other than ones starting with !)</li></ul>What exactly does that mean?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">29th November 2001 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>Made CRC not check the first 512 bytes, for better compatibility with virii and with digital signing.</blockquote>better compatibility with virii??</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crish</span><br><span class="post-time small text-muted">29th November 2001 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">hmmh first i thought that the reboot parameters are directly<br>for having a action like do reboot<br>but its only for having the action when the system will reboot<br><br>when aving an option like copyng dll after reboot then it would be<br>nice to have also the possibility to reboot the system<br><br>maybe its already included but its not described somewhere<br><br>or im not able to find it ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">F. Heidenreich</span><br><span class="post-time small text-muted">29th November 2001 17:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Crish,<br><br>there is no REBOOT command in the current NSIS 1.7b but according to <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=66494" target="_blank">kichik</a>, reboot is coming in 1.7.<br><br>Regards,<br>~ Florian</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">29th November 2001 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Quoted, I am honored!<br><br>This is a quote from <a href="http://www.nullsoft.com/free/nsis" target="_blank">http://www.nullsoft.com/free/nsis</a><br><br></p><blockquote>1.7b<br>Mostly MBCS support in exehead and compiler.<br>Made CRC not check the first 512 bytes, for better compatibility with virii and with digital signing.<br>Made !ifdef'd blocks out ignored (for all commands other than ones starting with !)<br>Made nsisconf.nsi not overwritten in installer.<br>Added GetFullPathName<br>Added more config.h options, moved MAX_INSTALL_TYPES to NSIS_MAX_INST...<br>Added CallInstDLL (using EW_REGISTERDLL)<br>Removed GetFullDLLPath, replaced it with more generic SearchPath (which can be used for non-DLLs).<br>Optimized fileform.c (GetCompressDataFromDataBlock etc) to be smaller<br><b>Added Reboot, IfRebootFlag, SetRebootFlag</b><br>Added WindowIcon command so you can turn off the icon in the window.<br>Trimmed more from zlib, down to 35kb with nearly all features (excluding XP and logging support) on. THIS NEEDS TESTING. :)<br>Lots of other small changes.</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">29th November 2001 20:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I got the quote from the NSIS page too, but I still have no idea why the first 512 will not be checked.<br><br><b>Made CRC not check the first 512 bytes, for better compatibility with virii and with digital signing.</b><br><br>This will make it a lot more unsafe I think, is there an option to disable this :confused:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">justin</span><br><span class="post-time small text-muted">29th November 2001 23:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Not CRCing the first 512 bytes isn't very unsafe. The first 512 bytes are primarily the EXE header and PSP, and if they are corrupted, the installer will likely fail before it gets a check to CRC itself. TRy randomly screwing with the first 512 bytes of a nsis installer and see what happens.<br><br>As for compatibility with virii, I think it's best that people's first experiences with NSIS installers are it telling them that they have a virus.<br><br>Again, the first 512 bytes, if corrupted, probably aren't going to effect the install process much.<br><br>Prove me wrong if you disagree =)<br><br>-Justin</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">liquidmotion</span><br><span class="post-time small text-muted">30th November 2001 01:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">justin,<br><br>NSIS is coming along to be one of the sweetest programs available. I am only waiting for the day that I will be as good at programming as you are so I can convert my GUI into C++ instead of VB.<br><br>keep up the good work :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">30th November 2001 07:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by justin</i><br><b>Not CRCing the first 512 bytes isn't very unsafe. The first 512 bytes are primarily the EXE header and PSP, and if they are corrupted, the installer will likely fail before it gets a check to CRC itself. TRy randomly screwing with the first 512 bytes of a nsis installer and see what happens.<br><br>As for compatibility with virii, I think it's best that people's first experiences with NSIS installers are it telling them that they have a virus.<br><br>Again, the first 512 bytes, if corrupted, probably aren't going to effect the install process much.<br><br>Prove me wrong if you disagree =)<br><br>-Justin</b></blockquote>So digital signing modifies the first 512 bytes, and now it's still possible to use the installer in this situation?<br><br>And a virus can corrupt anything with changing the first 512 byte? Then, there is no problem I think :)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crish</span><br><span class="post-time small text-muted">2nd December 2001 13:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Quoted, I am honored!<br><br>This is a quote from <a href="http://www.nullsoft.com/free/nsis" target="_blank">http://www.nullsoft.com/free/nsis</a><br><br></b></blockquote>these are only options for replacing files - read the manual there u see it</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">F. Heidenreich</span><br><span class="post-time small text-muted">2nd December 2001 13:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is a quote from <a href="http://www.firehose.net/free/nsis/makensis.htm#Reboot" target="_blank">http://www.firehose.net/free/nsis/makensis.htm#Reboot</a><br><br></p><blockquote>Reboot<br>Reboots the computer. Be careful with this one. If there is an error rebooting, this function sets the error flag and continues. If the reboot is sucessful, this instruction does not return.<br><br>IfRebootFlag [jump_if_set] [jump_if_not_set]<br>Checks the reboot flag, and jumps to jump_if_set if the reboot flag is set, otherwise jumps to jump_if_not_set. The reboot flag can be set by Delete and Rename, or manually with SetRebootFlag.<br><br>SetRebootFlag true|false<br>Sets the reboot flag to either true or false.</blockquote>regards,<br>~ Florian</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">petersa</span><br><span class="post-time small text-muted">3rd December 2001 11:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><ul><li>Made !ifdef'd blocks out ignored (for all commands other than ones starting with !)</li></ul>What exactly does that mean?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crish</span><br><span class="post-time small text-muted">3rd December 2001 16:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">okok<br><br>then my .htm file is the wrong version this parts are not in there ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">manav</span><br><span class="post-time small text-muted">4th December 2001 12:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>hey guys!</strong><br>is there any way in which I can capture the messages that<br>makensis.exe displays in DOS made, and show them to the user<br>inside a VB application<br><br>to make sense of what I am talki' , download the<br>source files for my vb program from<br><a href="http://manavmax.***********/spimp.html" target="_blank">http://manavmax.***********/spimp.html</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">petersa</span><br><span class="post-time small text-muted">5th December 2001 03:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Manav,<br><br>Run MAKENSIS.EXE using %COMSPEC% and output the output to a file. I don't use VB, but this is the command line:<br><br>%COMSPEC% /C MAKENSIS FILE.NSI &gt; OUTPUT.TXT<br><br>Then get your program to load OUTPUT.TXT to a text box.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">manav</span><br><span class="post-time small text-muted">5th December 2001 10:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>thanx</strong><br>thanx a lot - I'll try adding this functionality to the<br>next version of spimp wizard (credited to u ofcourse!)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>