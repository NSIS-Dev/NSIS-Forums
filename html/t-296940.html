<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Building on Linux does not generate makensis binary for me"><title>Building on Linux does not generate makensis binary for me - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Building on Linux does not generate makensis binary for me</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296940">Building on Linux does not generate makensis binary for me</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">eSquire</span><br><span class="post-time small text-muted">5th September 2008 11:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Building on Linux does not generate makensis binary for me</strong><br>Hi everybody,<br><br>I've been trying to build a makensis binary w/o cross-compiler on my Linux x86_64 system.<br><br>Here's what happens:<br><br></p><pre>
<code><br>intern:~/nsis-2.39-src # scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all \<br> NSIS_CONFIG_CONST_DATA=no PREFIX=~/nsis-2.39 install-compiler<br>scons: Reading SConscript files ...<br>Delete("nsis-05-Sep-2008.cvs")<br>Delete(".instdist")<br>Delete(".test")<br>Using GNU tools configuration<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag $MAP_FLAG... no<br>Checking for linker flag -s... no<br>Checking for linker flag $MAP_FLAG... yes<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag -s... no<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for memcpy requirement... yes<br>Checking for memset requirement... yes<br>Checking for linker flag -pthread... no<br>Checking for __BIG_ENDIAN__... no<br>Checking for C library gdi32... no<br>Checking for C library user32... no<br>Checking for C library pthread... no<br>Checking for C library iconv... no<br>Checking for C library dl... no<br>Checking for C library gdi32... no<br>Checking for C library iconv... no<br>Checking for C library pthread... no<br>Checking for C library user32... no<br>Checking for C++ library cppunit... no<br>scons: done reading SConscript files.<br>scons: Building targets ...<br>gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br>gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br>gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br>gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br>gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br>gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br>gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br>scons: done building targets.<br></code>
</pre><br>
      <br>
      I'm missing a makensis binary?! The build/release/makensis directory has none, neither has the zip installation directory. Or am I just looking in the wrong place?<br>
      <br>
      Here are my binary versions:<br>
      <pre>
<code><br>intern:~ # scons -v<br>SCons by Steven Knight et al.:<br>        script: v0.98.3.r2928, 2008/04/29 22:44:09, by knight on bangkok<br>        engine: v0.98.3.r2928, 2008/04/29 22:44:09, by knight on bangkok<br>Copyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 The SCons Foundation<br><br>intern:~ # python -V<br>Python 2.5.1<br><br>intern:~ # gcc -v<br>Using built-in specs.<br>Target: x86_64-suse-linux<br>Configured with: ../configure --enable-threads=posix --prefix=/usr --with-local-prefix=/usr/local <br> --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64<br> --enable-languages=c,c++,objc,fortran,obj-c++,java,ada --enable-checking=release<br> --with-gxx-include-dir=/usr/include/c++/4.2.1 --enable-ssp --disable-libssp --disable-libgcj<br> --with-slibdir=/lib64 --with-system-zlib --enable-shared --enable-__cxa_atexit<br> --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --program-suffix=-4.2<br> --enable-version-specific-runtime-libs --without-system-libunwind --with-cpu=generic --host=x86_64-suse-linux<br>Thread model: posix<br>gcc version 4.2.1 (SUSE Linux)<br></code>
</pre><br>
      I'm not familiar with scons and cross-compiling, so any help would be really appreciated.<br>
      <br>
      Thanks in advance!
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 12:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The compiler should be installed into ~/nsis-2.39. Try providing a full path if that does work. I think I came across scons not eating the wave symbol once.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eSquire</span><br>
      <span class="post-time small text-muted">5th September 2008 13:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for your prompt reply, kichik!<br>
      <br></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>The compiler should be installed into ~/nsis-2.39.</b>
      </blockquote>It is:<br>
      <pre>
<code><br>intern:~ # ll -d nsis*<br>drwxr-xr-x 10 root root    4096 Sep  5 11:45 nsis-2.39<br>drwxrwxrwx 12 root root    4096 Sep  5 14:03 nsis-2.39-src<br>-rw-r--r--  1 root root 1474305 Sep  5 11:44 nsis-2.39-src.tar.bz2<br>-rw-r--r--  1 root root 2277754 Sep  5 11:44 nsis-2.39.zip<br></code>
</pre><br>
      <br>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>Try providing a full path if that does work. I think I came across scons not eating the wave symbol once.</b>
      </blockquote>Here we go (with a clean extracted source tarball):<br>
      <pre>
<code><br>intern:~/nsis-2.39-src # scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all \<br> SKIPMISC=all NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 install-compiler<br>scons: Reading SConscript files ...<br>Delete("nsis-05-Sep-2008.cvs")<br>Delete(".instdist")<br>Delete(".test")<br>Using GNU tools configuration<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag $MAP_FLAG... no<br>Checking for linker flag -s... no<br>Checking for linker flag $MAP_FLAG... yes<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag -s... no<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for memcpy requirement... yes<br>Checking for memset requirement... yes<br>Checking for linker flag -pthread... no<br>Checking for __BIG_ENDIAN__... no<br>Checking for C library gdi32... no<br>Checking for C library user32... no<br>Checking for C library pthread... no<br>Checking for C library iconv... no<br>Checking for C library dl... no<br>Checking for C library gdi32... no<br>Checking for C library iconv... no<br>Checking for C library pthread... no<br>Checking for C library user32... no<br>Checking for C++ library cppunit... no<br>scons: done reading SConscript files.<br>scons: Building targets ...<br>gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br>gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br>gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br>gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br>gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br>gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br>gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br>scons: done building targets.<br><br>intern:~/nsis-2.39-src # ll build/release/makensis/<br>total 4<br>drwxr-xr-x 2 root root  71 Sep  5 14:08 bzip2<br>-rw-r--r-- 1 root root 896 Sep  5 14:08 crc32.o<br>drwxr-xr-x 2 root root  36 Sep  5 14:08 zlib<br><br>intern:~ # ll /root/nsis-2.39<br>total 1680<br>drwxr-xr-x  2 root root    103 Sep  5 11:45 Bin<br>-rw-rw-rw-  1 root root  15632 Dec 22  2007 COPYING<br>drwxr-xr-x  8 root root    100 Sep  5 11:45 Contrib<br>drwxr-xr-x 20 root root   4096 Sep  5 11:45 Docs<br>drwxr-xr-x 16 root root   4096 Sep  5 11:45 Examples<br>drwxr-xr-x  2 root root   4096 Sep  5 11:45 Include<br>drwxr-xr-x  3 root root     36 Sep  5 11:45 Menu<br>-rw-rw-rw-  1 root root 347464 Aug 16 23:25 NSIS.chm<br>-rw-r--r--  1 root root 699392 Aug 16 23:25 NSIS.exe<br>drwxr-xr-x  2 root root   4096 Sep  5 11:45 Plugins<br>drwxr-xr-x  2 root root    105 Sep  5 11:45 Stubs<br>-rw-r--r--  1 root root 492544 Aug 16 23:25 makensis.exe<br>-rw-r--r--  1 root root 136192 Aug 16 23:25 makensisw.exe<br>-rw-rw-rw-  1 root root   1726 Dec  1  2007 nsisconf.nsh<br></code>
</pre><br>
      <br>
      Still the same. I don't know, shouldn't the build output include some lines about the makensis binary, not just the archive libraries?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It should and it does for me. Try replacing `install-compiler` with `/root/nsis-2.39/makensis`.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eSquire</span><br>
      <span class="post-time small text-muted">5th September 2008 13:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Still not working</strong><br>
      Whoa, this starts to feel like a chatroom. :)<br></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>It should and it does for me. Try replacing `install-compiler` with `/root/nsis-2.39/makensis`.</b>
      </blockquote>Doing that just produces:<br>
      <pre>
<code>...<br>scons: *** Do not know how to make target `/root/nsis-2.39/makensis'.  Stop.<br>...</code>
</pre><br>
      Using only 'makensis' as a target gives:<br>
      <pre>
<code>intern:~/nsis-2.39-src # scons  SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all \<br> SKIPMISC=all NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 makensis<br>scons: Reading SConscript files ...<br>Delete("nsis-05-Sep-2008.cvs")<br>Delete(".instdist")<br>Delete(".test")<br>Using GNU tools configuration<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag $MAP_FLAG... no<br>Checking for linker flag -s... no<br>Checking for linker flag $MAP_FLAG... yes<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for linker flag -s... no<br>Checking for compiler flag -m32... yes<br>Checking for linker flag -m32... no<br>Checking for memcpy requirement... yes<br>Checking for memset requirement... yes<br>Checking for linker flag -pthread... no<br>Checking for __BIG_ENDIAN__... no<br>Checking for C library gdi32... no<br>Checking for C library user32... no<br>Checking for C library pthread... no<br>Checking for C library iconv... no<br>Checking for C library dl... no<br>Checking for C library gdi32... no<br>Checking for C library iconv... no<br>Checking for C library pthread... no<br>Checking for C library user32... no<br>Checking for C++ library cppunit... no<br>scons: done reading SConscript files.<br>scons: Building targets ...<br>gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br>gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br>gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br>gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br>gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br>gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br>gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br>scons: done building targets.</code>
</pre><br>
      Sadly, no surprises here. The build and compiler directories look the same as above.<br>
      <br>
      Anything else I should try?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What happens when you don't specify a target? Try also running scons with --tree=all and attach the output here.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eSquire</span><br>
      <span class="post-time small text-muted">5th September 2008 17:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for your patience, kichik!<br></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>What happens when you don't specify a target?</b>
      </blockquote>Still no makensis binary. :(<br>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>Try also running scons with --tree=all and attach the output here.</b>
      </blockquote>Exactly the same output. Please see the attached file. I really wish I knew more about scons.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">--tree=all is for debugging, but it was ignored in your case. You're probably using an old version of scons where it's still --debug=dtree or --debug=tree. The output should be huge with that one. Make sure to still pass `install-compiler` along with it.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eSquire</span><br>
      <span class="post-time small text-muted">5th September 2008 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>now we're getting somewhere</strong><br></p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>--tree=all is for debugging, but it was ignored in your case. You're probably using an old version of scons where it's still --debug=dtree or --debug=tree. The output should be huge with that one. Make sure to still pass `install-compiler` along with it.</b>
      </blockquote>I was using scons 0.98.3.r2928; it supports the --tree=all option, so the output above seemed to be correct. :weird:<br>
      <br>
      BUT: I compiled scons 1.0.0 anyway and tried it again. Now we're getting somewhere: long logfile attached. Not working, but it's a completely different problem.<br>
      <br>
      Looks like the OpenSuSE 10.3 packaged scons is not working for NSIS - it doesn't detect/use/whatever the g++ compiler?<br>
      <br>
      Here's the result of
      <pre>
<code>intern:~/nsis-2.39-src # scons --tree=all SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all \<br> NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 install-compiler &amp;&gt; ../tree-all-scons100.log</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 21:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What does config.log show after running scons once on a clean source tree?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eSquire</span><br>
      <span class="post-time small text-muted">5th September 2008 21:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I really appreciate your dedication. :) Isn't it getting late at your whereabouts?</p>

      <blockquote>
        <i>Originally posted by kichik</i><br>
        <b>What does config.log show after running scons once on a clean source tree?</b>
      </blockquote>Here it is.<br>
      <br>
      I'll be headed to bed soon myself, so my response times will be delayed for about the next 10 hours. :D
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">5th September 2008 22:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It successfully discovered there's no need for stdc++ on your system. Is the build log still the same after a clean build? It shouldn't have passed -lstdc++ with this config.log.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>