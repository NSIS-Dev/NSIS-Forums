<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="[ask] Password"><title>[ask] Password - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">[ask] Password</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255417">[ask] Password</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">JHN</span><br><span class="post-time small text-muted">13th September 2006 14:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>[ask] Password</strong><br>Hello,<br><br>I want to make installer so when everytime people wants to install it, its asking password. And if posibble every time the password was diffrent, or changed random. is it posibble?<br><br>thanks<br><br>Jay</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">The Glimmerman</span><br><span class="post-time small text-muted">13th September 2006 18:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think it's possible.<br>But no one will and can use your installer i think.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">CrushBug</span><br><span class="post-time small text-muted">13th September 2006 18:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Maybe the installer is a game? :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">14th September 2006 18:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">it's certainly possible, but you'll have to be more precise as to what your goals are, really. If it's some manner of copy protection, then I'd not even bother with it.. once somebody has the product actually installed, who needs the installer? they can always re-distribute the actual files.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JHN</span><br><span class="post-time small text-muted">15th September 2006 13:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">my goal is i want to create installer for my program that only selected people that can install it, thats why i want to use password to protect it, so everyone can download it. but they need to email me asking for the password before they can install it, and the password has to changed everytime someone install it. I hope someone can give me a clue how to made it posibble with NSIS. thanks a lot.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">15th September 2006 14:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well, if you want it to work that way, you cant hardcode the password into the installer...<br><br>as Animaether said, once you give the password to a person, they dont need your installer anymore to distribute its files</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JHN</span><br><span class="post-time small text-muted">15th September 2006 14:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">maybe i didn't make it clear, i want the password changed periodic or every time someone install it. I think not everyone can extract and gather all the files in installer, especially there's registry entry. So i am hoping someone can help me and give me a clue how i can build an installer with password, and the password change periodic or every time some one install it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Backland</span><br><span class="post-time small text-muted">15th September 2006 14:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So... everytime someone uses your installer, you want the the copy of the installer on your website to change its password somehow... ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br><span class="post-time small text-muted">15th September 2006 16:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i'd solve this problem with some kind of user-registration.<br><br>nsis could then download a file from the web to activate itself.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Animaether</span><br><span class="post-time small text-muted">15th September 2006 16:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well if you must...<br>what you'll want to do is something silly like getting the current time<br><br></p><pre>
<code><br>System::Call '*(&amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2) i .r0'<br>System::Call 'kernel32::GetLocalTime(i) i(r0)'<br>System::Call '*$0(&amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2)i (.r1, .r1, .r1, .r1, .r2, .r3, .r4, .r5'<br></code>
</pre><br>
      $1 = date as a SystemTime object. I'd just ignore this one*<br>
      $2 = hour<br>
      $3 = minute<br>
      $4 = second<br>
      $5 = milliseconds<br>
      <br>
      those are all ints. Now do something to those ints. For example:<br>
      <pre>
<code><br>IntOp $1 $2 + $3<br>IntOp $1 $1 * $4<br>IntOp $1 $1 - $5<br></code>
</pre><br>
      $1 now contains the expected key code.<br>
      <br>
      Now pop up a custom page with two labels and an input field. The first label should just tell the user to e-mail you at <a href="mailto:whatever@whatever.what">whatever@whatever.what</a>ever with the text on the next tline. Set the text of the second label (the next line) to "$2 $3 $4 $5".<br>
      <br>
      The user e-mails you those numbers. You know that the expected key code should just be: (($2 + $3) * $4) - $5 .<br>
      You send that key code back to them, and they enter it in the field.<br>
      <br>
      Then when the user clicks Next (or you can put it on a NOTIFY event) you check that field's value and compare it to $1. If it matches, continue, if it doesn't - tell the user that they entered the wrong number.<br>
      <br>
      Now, there's some obvious caveats...<br>
      1. the user will have to keep the installer open, on that page, while waiting for the key. So if you take a while to e-mail back, and they close their installer, the next time they start it - it'll ask for a different number. (just what you wanted, right?). So instead of e-mail, consider setting up a PHP/ASP/whatever page that the user can enter the 4 numbers into that returns the code. You can then easily combine this with things like secure accounts/etc. (comm@nder21's suggestion would work as well, but takes more code to handle internet access stuff). Don't use javascript - if you do, they'll just read the source and get the code themselves.<br>
      <br>
      2. the key code generation I showed you is stupid-simple. It will deter 95% of the people who really want to bypass your installer, the other 5% will quickly figure out the math behind it. So you'll want to do something more fancy - look up on crypto stuff.<br>
      <br>
      3. the numbers matching today's date is probably something obvious, yoo - consider scrambling the numbers. Again, see crypto.<br>
      <br>
      4. as I said before - after they have installed it, they can easily redistribute the files as is. Yes, easily. I won't be a sillyhead and point to the fully legit resources available to users everywhere to find out what files are being accessed and how, what registry keys are being set, changed, etc. and how and tons more things. Suffice it to say, that anybody determined enough will find this manner of protection laughable.<br>
      <br>
      I hope this at least gives you some tips, though.<br>
      <br>
      <br>
      * if you don't want to ignore the date (to add a few digits):<br>
      <pre>
<code><br>System::Call "Kernel32::GetDateFormatA(i 0, i 0, i r0, t 'y/M/d', t .r1, i ${NSIS_MAX_STRLEN})"<br></code>
</pre><br>
      makes $1 a string of "y/M/d" (year/month/date) format, which you can then easily separate into the three by using StrCpy and StrCmp stuff.<br>
      <br>
      <br>
      alternative to getting the time (Even though that nearly guarantees a different (not random) key code every time), you can use Random:<br>
      <a href="http://nsis.sourceforge.net/Random" target="_blank">http://nsis.sourceforge.net/Random</a><br>
      You'll still have to seed Random with something though.
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>