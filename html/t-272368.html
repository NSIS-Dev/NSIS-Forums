<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="hye guys, problom with installation, please take a look!" />

  <title>hye guys, problom with installation, please take a look! - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
               <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
               <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
       <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">hye guys, problom with installation, please take a look!</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272368">hye guys, problom with installation, please take a look!</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">5th June 2007 23:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>hye guys, problom with installation, please take a look!</strong><br />
      hey guys!<br />
      i'm new to NSIS and this is my first installation made, it's working quite ok, however i do have some issues that i've failed to over-come no matter how hard i've tried!!!<br />
      ______-<br />
      - the main problem is situated in the uninstalling field:<br /></p>
      <pre>
<code>ReadRegStr$RestartInstallerHKCU</code><span style="color: #DD0000">"Software\SKs\USDownloader""RestartInstaller"
<br /></span><span style="color: #007700">${If}</span><span style="color: #0000BB">$RestartInstaller</span><span style="color: #007700">=</span><span style="color: #DD0000">"1"
<br /></span><span style="color: #0000BB">ExecShell</span><span style="color: #DD0000">"open""$EXEPATH\$EXEFILE"
<br /></span><span style="color: #007700">${EndIf}
</span>
</pre>this code i've wrote in order to read a certain key which is written to the registry in here:<br />
      <pre>
<code>WriteRegStrHKCU</code><span style="color: #DD0000">"Software\SKs\USDownloader""RestartInstaller""1"
</span>
</pre>and once read to check if it's value equals to '1' then to start the installer again!<br />
      - That doesn't do it!!!<br />
      <br />
      - my second issue is that the function files copy seems to create files which arn't already existing and even if i try to skip the function using iffileexists function it just doesn't work!<br />
      <pre>
<span style="color: #007700">${If}</span><span style="color: #0000BB">$SAVEDFILE</span><span style="color: #007700">=</span><span style="color: #0000BB">1
<br />CreateDirectory</span><span style="color: #DD0000">"$INSTDIR"
<br /></span><span style="color: #0000BB">CopyFiles</span><span style="color: #007700">/</span><span style="color: #0000BB">SILENT</span><span style="color: #007700">/</span><span style="color: #0000BB">FILESONLY</span><span style="color: #DD0000">"$TEMP\USDownloader.ini""$INSTDIR\USDownloader.ini"</span><span style="color: #0000BB">10
<br />Delete</span><span style="color: #DD0000">"$TEMP\USDownloader.ini"
<br /></span><span style="color: #0000BB">IfFileExists</span><span style="color: #DD0000">"$TEMP\USDownloader.lst"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">3
<br />CopyFiles</span><span style="color: #007700">/</span><span style="color: #0000BB">SILENT</span><span style="color: #007700">/</span><span style="color: #0000BB">FILESONLY</span><span style="color: #DD0000">"$TEMP\USDownloader.lst""$INSTDIR\USDownloader.lst"</span><span style="color: #0000BB">10
<br />Delete</span><span style="color: #DD0000">"$TEMP\USDownloader.lst"
<br /></span><span style="color: #0000BB">IfFileExists</span><span style="color: #DD0000">"$TEMP\DecryptionCheck.ini"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">3
<br />CopyFiles</span><span style="color: #007700">/</span><span style="color: #0000BB">SILENT</span><span style="color: #007700">/</span><span style="color: #0000BB">FILESONLY</span><span style="color: #DD0000">"$TEMP\DecryptionCheck.ini""$INSTDIR\DecryptionCheck.ini"</span><span style="color: #0000BB">10
<br />Delete</span><span style="color: #DD0000">"$TEMP\DecryptionCheck.ini"
<br /></span><span style="color: #0000BB">IfFileExists</span><span style="color: #DD0000">"$TEMP\Reconnect.ini"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">3
<br />CopyFiles</span><span style="color: #007700">/</span><span style="color: #0000BB">SILENT</span><span style="color: #007700">/</span><span style="color: #0000BB">FILESONLY</span><span style="color: #DD0000">"$TEMP\Reconnect.ini""$INSTDIR\Reconnect.ini"</span><span style="color: #0000BB">10
<br />Delete</span><span style="color: #DD0000">"$TEMP\Reconnect.ini"
<br /></span><span style="color: #007700">${EndIf}
</span>
</pre><br />
      if it might help here is my entire code for the installatoin: (Any suggestions will be happily heard!)<br />
      PHP Code:
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">;</span><span style="color: #0000BB">TODO</span><span style="color: #007700">:<br />
      ;</span><span style="color: #0000BB">makeitstarttheinstallerafteruninstallation</span><span style="color: #007700">!<br />
      ;--------------------------------<br />
      <br />
      !</span><span style="color: #0000BB">ifdefHAVE_UPX<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">packhdrtmp</span><span style="color: #007700">.</span><span style="color: #0000BB">dat</span><span style="color: #DD0000">"upx\upx-9tmp.dat"<br /></span> <span style="color: #007700">!endif<br />
      <br />
      !</span><span style="color: #0000BB">ifdefNOCOMPRESS<br />
      SetCompressoff<br /></span> <span style="color: #007700">!endif<br />
      <br />
      ;--------------------------------<br />
      ;Include</span><span style="color: #0000BB">ModernUI<br /></span> <span style="color: #007700">!include</span><span style="color: #DD0000">"LogicLib.nsh"<br /></span> <span style="color: #007700">!include</span><span style="color: #DD0000">"MUI.nsh"<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">General<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Name</span><span style="color: #007700">and</span><span style="color: #0000BB">file<br />
      Name</span><span style="color: #DD0000">"USDownloader"<br /></span> <span style="color: #0000BB">Caption</span><span style="color: #DD0000">"SK'sUSDownloader(v27.5)"<br /></span> <span style="color: #0000BB">OutFile</span><span style="color: #DD0000">"SK'sUSDownloader.exe"<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Style<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_DEFAULTMUI_ICON</span><span style="color: #DD0000">"${NSISDIR}\Contrib\Graphics\Icons\orange-install-nsis.ico"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_DEFAULTMUI_UNICON</span><span style="color: #DD0000">"${NSISDIR}\Contrib\Graphics\Icons\orange-uninstall-nsis.ico"<br /></span> <span style="color: #0000BB">XPStyleon<br />
      <br /></span> <span style="color: #007700">;Default</span><span style="color: #0000BB">installationfolder<br />
      InstallDir</span><span style="color: #DD0000">"$PROGRAMFILES\SK's\USDownloader"<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Getinstallationfolderfromregistry</span><span style="color: #007700">if</span><span style="color: #0000BB">available<br />
      InstallDirRegKeyHKCU</span><span style="color: #DD0000">"Software\SKs\USDownloader"""<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Vistaredirects$SMPROGRAMStoalluserswithoutthis<br />
      RequestExecutionLeveladmin<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">Variables<br />
      <br /></span> <span style="color: #007700">Var</span><span style="color: #0000BB">MUI_TEMP<br /></span> <span style="color: #007700">Var</span><span style="color: #0000BB">STARTMENU_FOLDER<br /></span> <span style="color: #007700">Var</span><span style="color: #0000BB">SAVEDFILE<br /></span> <span style="color: #007700">Var</span><span style="color: #0000BB">RestartInstaller<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;Interface</span><span style="color: #0000BB">Configuration<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_HEADERIMAGE<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_HEADERIMAGE_BITMAP</span><span style="color: #DD0000">"${NSISDIR}\Contrib\Graphics\Header\orange-nsis.bmp"</span><span style="color: #007700">;</span><span style="color: #0000BB">optional<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_ABORTWARNING<br />
      <br />
      VIProductVersion</span><span style="color: #DD0000">"1.0.0.0"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"ProductName""SK'sUSDownloader(v27.5)"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"Comments""USDownloadercompliationmadebySK,fullyautomatesdownloadfromsharesites!"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"CompanyName""ForTheGreaterGood!"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"LegalTrademarks""USDownloaderisafreewarebyDimoniusis,RecompiledbyShlomiKalfa"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"LegalCopyright""Â©ShlomiKalfa"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"FileDescription""SK'sUSDownloader(v27.5)"<br /></span> <span style="color: #0000BB">VIAddVersionKey</span><span style="color: #007700">/</span><span style="color: #0000BB">LANG</span><span style="color: #007700">=${</span><span style="color: #0000BB">LANG_ENGLISH</span><span style="color: #007700">}</span><span style="color: #DD0000">"FileVersion""27.5.2007"<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">LanguageSelectionDialogSettings<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Remembertheinstallerlanguage<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_LANGDLL_REGISTRY_ROOT</span><span style="color: #DD0000">"HKCU"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_LANGDLL_REGISTRY_KEY</span><span style="color: #DD0000">"Software\SKs\USDownloader"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_LANGDLL_REGISTRY_VALUENAME</span><span style="color: #DD0000">"InstallerLanguage"<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">Pages<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_LICENSE</span><span style="color: #DD0000">"C:\USDBCKUP\Installations\License.txt"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_DIRECTORY<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_STARTMENUPAGE_REGISTRY_ROOT</span><span style="color: #DD0000">"HKCU"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_STARTMENUPAGE_REGISTRY_KEY</span><span style="color: #DD0000">"Software\SKs\USDownloader"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_STARTMENUPAGE_REGISTRY_VALUENAME</span><span style="color: #DD0000">"StartMenuFolder"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_STARTMENUApplication</span><span style="color: #DD0000">"$STARTMENU_FOLDER"<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_INSTFILES<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_FINISHPAGE_RUN</span><span style="color: #DD0000">"$INSTDIR\USDownloader.exe"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_FINISHPAGE_NOREBOOTSUPPORT<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_FINISHPAGE_SHOWREADME<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_FINISHPAGE_SHOWREADME_TEXT</span><span style="color: #DD0000">"Setupauto-reconnector"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_FINISHPAGE_SHOWREADME_FUNCTIONStartReconnector<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_FINISH<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_CONFIRM<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_UNPAGE_INSTFILES<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">Languages<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"English"</span><span style="color: #007700">;</span><span style="color: #0000BB">firstlanguageisthe</span><span style="color: #007700">default</span><span style="color: #0000BB">language<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"French"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"German"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Spanish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"SimpChinese"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"TradChinese"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Japanese"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Korean"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Italian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Dutch"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Danish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Swedish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Norwegian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"NorwegianNynorsk"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Finnish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Greek"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Russian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Portuguese"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"PortugueseBR"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Polish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Ukrainian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Czech"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Slovak"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Croatian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Bulgarian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Hungarian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Thai"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Romanian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Latvian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Macedonian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Estonian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Turkish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Lithuanian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Catalan"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Slovenian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Serbian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"SerbianLatin"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Arabic"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Farsi"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Hebrew"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Indonesian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Mongolian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Luxembourgish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Albanian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Breton"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Belarusian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Icelandic"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Malay"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Bosnian"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Kurdish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Irish"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Uzbek"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Galician"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGE</span><span style="color: #DD0000">"Afrikaans"<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">ReserveFiles<br />
      <br /></span> <span style="color: #007700">;If</span><span style="color: #0000BB">youareusingsolidcompression</span><span style="color: #007700">,</span><span style="color: #0000BB">filesthatarerequiredbefore<br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">theactualinstallationshouldbestoredfirstinthedatablock</span><span style="color: #007700">,<br />
      ;</span><span style="color: #0000BB">becausethiswillmakeyourinstallerstartfaster</span><span style="color: #007700">.<br />
      <br />
      !</span><span style="color: #0000BB">insertmacroMUI_RESERVEFILE_LANGDLL<br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">InstallerFunctions<br />
      <br /></span> <span style="color: #007700">Function.</span><span style="color: #0000BB">onInit<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGDLL_DISPLAY<br />
      <br />
      <br />
      <br />
      System</span><span style="color: #007700">::</span><span style="color: #0000BB">Call</span><span style="color: #DD0000">'kernel32::CreateMutexA(i0,i0,t"Sk643Sk")i.r1?e'<br /></span> <span style="color: #0000BB">Pop$R0<br />
      <br />
      StrCmp$R00</span><span style="color: #007700">+</span><span style="color: #0000BB">3<br />
      MessageBoxMB_OK</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONEXCLAMATION</span><span style="color: #DD0000">"Theinstallerisalreadyrunning."<br /></span> <span style="color: #0000BB">Abort<br />
      <br />
      IfFileExists</span><span style="color: #DD0000">"$INSTDIR\Uninstall.exe"</span><span style="color: #0000BB">0ContinueInstalling<br />
      MessageBoxMB_YESNO</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONQUESTION</span><span style="color: #DD0000">"Itisrecommandedthatyou'lluninstallpreviouslyinstalledversions!Uninstallnow?"</span><span style="color: #0000BB">IDNOContinueInstalling<br />
      WriteRegStrHKCU</span><span style="color: #DD0000">"Software\SKs\USDownloader""RestartInstaller""1"<br /></span> <span style="color: #0000BB">ExecShell</span><span style="color: #DD0000">"open""$INSTDIR\Uninstall.exe"<br /></span> <span style="color: #0000BB">Abort<br />
      <br />
      ContinueInstalling</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">FunctionEnd<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">StartReconnector<br />
      ExecShell</span><span style="color: #DD0000">"open""$INSTDIR\Reconnect(1.0B).exe"<br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br /></span> <span style="color: #007700">;--------------------------------<br />
      ;</span><span style="color: #0000BB">InstallerSections<br />
      <br />
      Section</span><span style="color: #DD0000">"USDownloader"<br /></span> <span style="color: #0000BB">SetOverwriteon<br />
      SetOutPath</span><span style="color: #DD0000">"$INSTDIR"<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">ADDYOUROWNFILESHERE</span><span style="color: #007700">...<br /></span> <span style="color: #0000BB">IfFileExists</span><span style="color: #DD0000">"$INSTDIR\USDownloader.ini"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">2<br />
      MessageBoxMB_YESNO</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONQUESTION</span><span style="color: #DD0000">"WouldyouliketosavethepreviousUSDsettings?"</span><span style="color: #0000BB">IDYESDontCopy<br />
      File</span><span style="color: #DD0000">"C:\USDBCKUP\Installations\USDownloader_SK\USDownloader.ini"<br /></span> <span style="color: #0000BB">DontCopy</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">File</span><span style="color: #007700">/</span><span style="color: #0000BB">r</span><span style="color: #DD0000">"C:\USDBCKUP\Installations\USDownloader_SK\USDownloader\*.*"<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Storeinstallationfolder<br />
      WriteRegStrHKCU</span><span style="color: #DD0000">"Software\SKs\USDownloader""""$INSTDIR"<br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Storeinstallationinfo</span><span style="color: #007700">for</span><span style="color: #0000BB">windows<br />
      WriteRegStrHKLM</span><span style="color: #DD0000">"Software\Microsoft\Windows\CurrentVersion\Uninstall\SKsUSDownloader""DisplayName""SK'sUSDownloader"<br /></span> <span style="color: #0000BB">WriteRegStrHKLM</span><span style="color: #DD0000">"Software\Microsoft\Windows\CurrentVersion\Uninstall\SKsUSDownloader""UninstallString""$INSTDIR\Uninstall.exe"<br /></span> <span style="color: #0000BB">WriteRegStrHKLM</span><span style="color: #DD0000">"Software\Microsoft\Windows\CurrentVersion\Uninstall\SKsUSDownloader""InstallLocation""$INSTDIR\"<br />
      WriteRegStrHKLM"</span><span style="color: #0000BB">SoftwareMicrosoftWindowsCurrentVersionUninstallSKsUSDownloader</span><span style="color: #DD0000">""</span><span style="color: #0000BB">Publisher</span><span style="color: #DD0000">""</span><span style="color: #0000BB">SK</span><span style="color: #007700">.For</span><span style="color: #0000BB">TheGreaterGood</span><span style="color: #007700">!</span><span style="color: #DD0000">"<br />
      WriteRegDWORDHKLM"</span><span style="color: #0000BB">SoftwareMicrosoftWindowsCurrentVersionUninstallSKsUSDownloader</span><span style="color: #DD0000">""</span><span style="color: #0000BB">NoModify</span><span style="color: #DD0000">"1<br />
      WriteRegDWORDHKLM"</span><span style="color: #0000BB">SoftwareMicrosoftWindowsCurrentVersionUninstallSKsUSDownloader</span><span style="color: #DD0000">""</span><span style="color: #0000BB">NoRepair</span><span style="color: #DD0000">"1<br />
      <br />
      <br />
      !insertmacroMUI_STARTMENU_WRITE_BEGINApplication<br />
      CreateDirectory"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDER</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERRS_ServerSwitch</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRRS_ServerSwitch</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERUninstall</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRUninstall</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"<br />
      CreateDirectory"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSites</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesFXP</span><span style="color: #007700">.</span><span style="color: #0000BB">co</span><span style="color: #007700">.</span><span style="color: #0000BB">il</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">FXP</span><span style="color: #007700">.</span><span style="color: #0000BB">co</span><span style="color: #007700">.</span><span style="color: #0000BB">il</span><span style="color: #007700">-</span><span style="color: #0000BB">×§×”×™×œ×•×ª×ž×¤×•×œ×—×•×ª×ª×•×›×Ÿ</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesPhazeDDL</span><span style="color: #007700">.</span><span style="color: #0000BB">com</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">PhazeDDL</span><span style="color: #007700">.</span><span style="color: #0000BB">com</span><span style="color: #007700">-</span><span style="color: #0000BB">FullDownloads</span><span style="color: #007700">,</span><span style="color: #0000BB">Games</span><span style="color: #007700">,</span><span style="color: #0000BB">Movies</span><span style="color: #007700">&amp;</span><span style="color: #0000BB">Warez</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesDirectDl</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">DirectDl</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesDDLSpot</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">ddlSpot</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesForumW</span><span style="color: #007700">.</span><span style="color: #0000BB">org</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">ForumW</span><span style="color: #007700">.</span><span style="color: #0000BB">org</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      CreateShortCut"</span><span style="color: #0000BB">$SMPROGRAMS$STARTMENU_FOLDERDownloadSitesWarezforum</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDownloadSites</span><span style="color: #007700">!!!</span><span style="color: #0000BB">Warezforum</span><span style="color: #007700">-</span><span style="color: #0000BB">PoweredbyvBulletin</span><span style="color: #007700">.</span><span style="color: #0000BB">URL</span><span style="color: #DD0000">"<br />
      !insertmacroMUI_STARTMENU_WRITE_END<br />
      <br />
      ;Createuninstaller<br />
      WriteUninstaller"</span><span style="color: #0000BB">$INSTDIRUninstall</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"<br />
      MessageBoxMB_YESNO|MB_ICONQUESTION"</span><span style="color: #0000BB">Wouldyouliketocreateadesktopshortcut</span><span style="color: #007700">?</span><span style="color: #DD0000">"IDNODontCreate<br />
      CreateShortCut"</span><span style="color: #0000BB">$DESKTOPUSDownloader</span><span style="color: #007700">(</span><span style="color: #0000BB">bySK</span><span style="color: #007700">).</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"""""""""""""<br />
      DontCreate:<br />
      <br />
      SectionEnd<br />
      <br />
      ;--------------------------------<br />
      ;UninstallerSection<br />
      <br />
      Section"</span><span style="color: #0000BB">Uninstall</span><span style="color: #DD0000">"<br />
      <br />
      ;ADDYOUROWNFILESHERE...<br />
      MessageBoxMB_YESNO|MB_ICONQUESTION"</span><span style="color: #0000BB">YouareabouttoDELETEthefolder</span><span style="color: #007700">:</span><span style="color: #DD0000">'$INSTDIR'</span><span style="color: #007700">,</span><span style="color: #0000BB">AreYouSure</span><span style="color: #007700">?!</span><span style="color: #DD0000">"IDNOABORTOP<br />
      Delete"</span><span style="color: #0000BB">$INSTDIRUninstall</span><span style="color: #007700">.</span><span style="color: #0000BB">exe</span><span style="color: #DD0000">"<br />
      Delete"</span><span style="color: #0000BB">$DESKTOPUSDownloader</span><span style="color: #007700">(</span><span style="color: #0000BB">bySK</span><span style="color: #007700">).</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">"<br />
      <br />
      IfFileExists"</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"0+4<br />
      MessageBoxMB_YESNO|MB_ICONQUESTION"</span><span style="color: #0000BB">WouldyouliketosavethepreviousUSDsettings</span><span style="color: #007700">?</span><span style="color: #DD0000">"IDNODontSave<br />
      StrCpy$SAVEDFILE1<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      IfFileExists"</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">"0+2<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">"10<br />
      IfFileExists"</span><span style="color: #0000BB">$INSTDIRDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"0+2<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$INSTDIRDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$TEMPDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      IfFileExists"</span><span style="color: #0000BB">$INSTDIRReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"0+2<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$INSTDIRReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$TEMPReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      GotoContinueOperation<br />
      DontSave:<br />
      StrCpy$SAVEDFILE0<br />
      ContinueOperation:<br />
      <br />
      RMDir/r"</span><span style="color: #0000BB">$INSTDIR</span><span style="color: #DD0000">"<br />
      <br />
      !insertmacroMUI_STARTMENU_GETFOLDERApplication"</span><span style="color: #0000BB">$MUI_TEMP</span><span style="color: #DD0000">"<br />
      Delete"</span><span style="color: #0000BB">$SMPROGRAMS$MUI_TEMPUninstall</span><span style="color: #007700">.</span><span style="color: #0000BB">lnk</span><span style="color: #DD0000">"<br />
      RMDir/r"</span><span style="color: #0000BB">$SMPROGRAMS$MUI_TEMP</span><span style="color: #DD0000">"<br />
      ;Deleteemptystartmenuparentdiretories<br />
      StrCpy$MUI_TEMP"</span><span style="color: #0000BB">$SMPROGRAMS$MUI_TEMP</span><span style="color: #DD0000">"<br />
      startMenuDeleteLoop:<br />
      ClearErrors<br />
      RMDir/r"</span><span style="color: #0000BB">$MUI_TEMP</span><span style="color: #DD0000">"<br />
      GetFullPathName"</span><span style="color: #0000BB">$MUI_TEMP</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$MUI_TEMP</span><span style="color: #007700">..</span><span style="color: #DD0000">"<br />
      IfErrorsstartMenuDeleteLoopDone<br />
      StrCmp"</span><span style="color: #0000BB">$MUI_TEMP</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$SMPROGRAMS</span><span style="color: #DD0000">"startMenuDeleteLoopDonestartMenuDeleteLoop<br />
      startMenuDeleteLoopDone:<br />
      <br />
      ${If}$SAVEDFILE=1<br />
      CreateDirectory"</span><span style="color: #0000BB">$INSTDIR</span><span style="color: #DD0000">"<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      Delete"</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"<br />
      IfFileExists"</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">"0+3<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">"10<br />
      Delete"</span><span style="color: #0000BB">$TEMPUSDownloader</span><span style="color: #007700">.</span><span style="color: #0000BB">lst</span><span style="color: #DD0000">"<br />
      IfFileExists"</span><span style="color: #0000BB">$TEMPDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"0+3<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$TEMPDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      Delete"</span><span style="color: #0000BB">$TEMPDecryptionCheck</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"<br />
      IfFileExists"</span><span style="color: #0000BB">$TEMPReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"0+3<br />
      CopyFiles/SILENT/FILESONLY"</span><span style="color: #0000BB">$TEMPReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$INSTDIRReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"10<br />
      Delete"</span><span style="color: #0000BB">$TEMPReconnect</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"<br />
      ${EndIf}<br />
      ABORTOP:<br />
      ReadRegStr$RestartInstallerHKCU"</span><span style="color: #0000BB">SoftwareSKsUSDownloader</span><span style="color: #DD0000">""</span><span style="color: #0000BB">RestartInstaller</span><span style="color: #DD0000">"<br />
      ${If}$RestartInstaller="</span><span style="color: #0000BB">1</span><span style="color: #DD0000">"<br />
      ExecShell"</span><span style="color: #0000BB">open</span><span style="color: #DD0000">""</span><span style="color: #0000BB">$EXEPATH$EXEFILE</span><span style="color: #DD0000">"<br />
      ${EndIf}<br />
      <br />
      DeleteRegKey/ifemptyHKCU"</span><span style="color: #0000BB">SoftwareSKsUSDownloader</span><span style="color: #DD0000">"<br />
      DeleteRegKey/ifemptyHKCU"</span><span style="color: #0000BB">SoftwareSKsUSDownloader</span><span style="color: #DD0000">"<br />
      <br />
      SectionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lybra</span><br />
      <span class="post-time small text-muted">6th June 2007 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should use StrCmp or IntCmp, instead of {If}. Something to do with run-time and compile-time.<br />
      <br /></p>
      <pre>
<code><br />ReadRegStr $RestartInstaller HKCU "SoftwareSKsUSDownloader" "RestartInstaller" <br />IntCmp $RestartInstaller 1 execute dont_execute dont_execute<br /><br />execute:<br />ExecShell "open" "$EXEPATH\$EXEFILE" <br /><br />dont_execute:<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th June 2007 14:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No that is not the problem. Your ${If} is fine. It's because you are using ExecShell to execute a .exe file. You have to use Exec instead.<br />
      <br />
      As for CopyFiles, what are you doing? Are you trying to only copy files across if they don't already exist in the source or the destination folder?<br />
      Also, rather than using CopyFiles followed by Delete, you should use Rename. CopyFiles makes a copy whereas Rename does not (so it is faster and will not cause disk fragmentation).<br />
      <br />
      Edit: Also in future please attach large scripts (as a file attachment). For code snippets, use [code] and not [php] as [php] strips backstrokes.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">6th June 2007 18:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">for a matter i fact i do (:<br />
      - i want the files to be copied only if they exists in order to save the settings !!!<br />
      <br />
      - about that 'exe' issue i'll try using what you mentioned !</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th June 2007 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What happens if you don't use /FILESONLY?<br />
      <br />
      Also I wouldn't recommend using RMDir /r $INSTDIR in case the user uses a folder that contains other files for the installation or if $INSTDIR is empty (in which case everything on the root C:\ will be deleted including the operating system).<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">6th June 2007 20:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        (in which case everything on the root C:\ will be deleted including the operating system).
      </blockquote>WOW, and I've already spread it all around, with more then 300+ users... LOL !!!<br />
      - luckily there is a msg asking -&gt; are you sure you want to delete.... let's hope they'll read it (:<br />
      <br />
      - can you recommend me of any other way ?!<br />
      ;=====================================================<br />
      - by now i've changed my script almost totally, i'll upload it now!<br />
      <br />
      my issues with it:<br />
      1- can i maybe use that instead of deleting their C:\<br />
      <pre>
<code><br />RMDir /r "$INSTDIR\SomeDir\"<br /></code>
</pre><br />
      that will delete just the dir 'SomeDir' all also C:\ ?!<br />
      <br />
      2- how do i make the groupsections be always opened ?! - solved ! used /e to set them expend them...<br />
      <br />
      3- seems like the program always fails to discover if the program is already installed or not, why ?!<br />
      <br />
      ANY HELP WILL BE APPRECIATED !!!
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th June 2007 23:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In the uninstaller you should do some checks on $INSTDIR using IfFileExists, StrCmp, StrCpy etc<br />
      If $INSTDIR is coming from the registry and that registry entry is gone, then all hell could break loose.<br />
      <br />
      This should be adequate:<br /></p>
      <pre>
<code><br />StrCmp $INSTDIR "" 0 +3<br />  MessageBox MB_OK|MB_ICONSTOP "Install path missing!"<br />  Abort<br /><br /># Does path end with "\MyApp"?<br />StrCpy $R0 $INSTDIR "" -6<br />StrCmp $R0 "\MyApp" +3<br />  MessageBox MB_YESNO|MB_ICONQUESTION "..." IDYES +2<br />  Abort<br /><br />IfFileExists "$INSTDIR\*.*" +3<br />  MessageBox MB_OK|MB_ICONSTOP "Install path invalid!"<br />  Abort<br /></code>
</pre><br />
      <br />
      Fortunately, you do not have to check $INSTDIR for invalid characters as NSIS handles this itself internally for that variable specifically.<br />
      <br />
      Shouldn't this:<br />
      IfFileExists "$INSTDIR\USDownloader.exe" no_remove_uninstaller<br />
      Be:<br />
      IfFileExists $R1 no_remove_uninstaller<br />
      ?<br />
      <br />
      For question #3, where is the code to check if it is already installed? There is no built in support for this.<br />
      The best way to check if the installer has already been completed is to clear the error flag (ClearErrors) then attempt to read from the same registry entry that InstallDirRegKey uses and then use IfErrors. This assumes that you WriteRegStr in one of your install sections to create this entry.<br />
      <br />
      Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">7th June 2007 01:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hey mate, the script is further developed and everything works smoothly by now beside that issue with the versions!!!<br />
      now i'm using that:<br /></p>
      <pre>
<code><br />  ${VersionCompare} ${3} ${VERSION} $4<br />  IntCmp ${4} 1 older_version  new_version same_version<br /></code>
</pre><br />
      to differentiate between versions, and guess what, it's aint working !!!<br />
      even when i look in the registry i get the following data:<br />

      <blockquote>
        1.0.0.2
      </blockquote>and in the program i wrote:<br />

      <blockquote>
        "1.0.0.1"
      </blockquote>it's still telling me that i've got an older installation on of it!!!!<br />
      <br />
      - i've added those things you've suggested for the uninstallation even though i think the problem is already solved by this kind of script:<br />
      <pre>
<code><br />RMDir /r "$INSTDIR\Icons"<br /></code>
</pre><br />
      <br />
      reffering into directories only and deleting the main dir with the following loop:<br />
      <pre>
<code><br />  FindFirst $0 $1 "$INSTDIR\*.*"<br />       loop:<br />  StrCmp $1 "" done<br />  Delete "$INSTDIR\$1"<br />  FindNext $0 $1<br />  Goto loop<br />  done:<br /></code>
</pre><br />
      <br />
      - PLEASE HELP (:<br />
      (how do i fix the version issue ?!)<br />
      <br />
      -
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">7th June 2007 01:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry for not edditing, i just didn't found the way to get to the uploading part without opening a new reply !</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th June 2007 11:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">${VersionCompare} ${3} ${VERSION} $4<br />
      IntCmp ${4} 1 older_version new_version same_version<br />
      <br />
      -&gt;<br />
      <br />
      ${VersionCompare} $3 ${VERSION} $4<br />
      IntCmp $4 1 older_version new_version same_version<br />
      <br />
      Don't you check your compiler window for warnings?<br />
      ${} is a compile time constant.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shlomikalfa</span><br />
      <span class="post-time small text-muted">7th June 2007 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i always do !<br />
      - there where no warnings !!!<br />
      <br />
      THANKS FOR THE HELP MATE !!!!<br />
      - EVERYTHING SEEMS TO BE IN ORDER, THANKS !!!!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">7th June 2007 19:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No problem!<br />
      I'm surprised there were no warnings regarding that.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
