<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Spanning on multiple CDs" />

  <title>Spanning on multiple CDs - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Spanning on multiple CDs</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183529">Spanning on multiple CDs</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">xiceburnx</span><br />
      <span class="post-time small text-muted">16th June 2004 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Spanning on multiple CDs</strong><br />
      I searched for this topic and found a thread about spanning archives over 1.44mb floppy disks, but that's useless - though I think the same principle applies.<br />
      <br />
      I have a distribution which is over 3 gigs and I want to compress it and distribute it on CD-ROM. How would I do this with NSIS? I don't want to zip it using Winzip and make it a self-extracting archive that runs the setup file after, that just seems cheesy and unprofessional. Is there a way to do this fully within NSIS?<br />
      <br />
      Come to think of it, I've never seen any mention of features such as this in any of the NSIS documentation that I've read. Is the concept behind NSIS just for small installers that can be transferred over the internet? Because if not, the most common sense application would be to install programs from CDs.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">16th June 2004 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See the NSIS Archive for decompression plug-ins that can be called from the installer.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">xiceburnx</span><br />
      <span class="post-time small text-muted">16th June 2004 20:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll check those out. Thanks!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shea</span><br />
      <span class="post-time small text-muted">17th June 2004 04:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">A lor of people have asked this and everytime I always think to myself for a couple minutes about how this could be done.<br />
      <br />
      Maybe if you made a bunch of installers (1 for every CD) that use COPYFILES instead of compiling them into an installer. Then you make an installer that includes those 'installers'. You tell the main installer to extract all the installers for the CDs to a TEMP directory. Then it will run the first one. They can install it and move on. Then you can make a custom page that asks you to insert the next CD and it will call that CDs installer. Repeat for every installer for every CD you need to make. If that was unclear (which it probably was) ask me and I'll take more time to explain.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">xiceburnx</span><br />
      <span class="post-time small text-muted">17th June 2004 04:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wow yeah... That does seem kind of complicated hehe... I checked out some of the plugins that do extraction but the one I grabbed didn't have the program to archive and compress, only to extract. I'll try the other plugin tomorrow (it apparently comes with the archiver).<br />
      <br />
      If I do this however, would I just have the installer extract everything to a temp directory and then install from there?<br />
      <br />
      And does this plugin support spanned archives? I didn't see any mention of it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JamesF1</span><br />
      <span class="post-time small text-muted">17th June 2004 20:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Alternatively, you could just make several silent installers, and call them individually.<br />
      <br />
      [first post]</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">stnchris</span><br />
      <span class="post-time small text-muted">18th June 2004 02:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm doing this now for a large installation (60+ GB uncompressed... compressed and split into volumes it spans 6 DVDs).<br />
      <br />
      I'm using some python scripts (it's actually an SCons build), to collect a list of all the source files into chunks of 1-20 files that are passed through tar/gzip to create a .tgz file for each chunk.<br />
      <br />
      Once everything is compressed the build process splits the .tgz files across multiple volumes. The build script creates a 'vol&lt;volume#&gt;' file in the directory of what will become the root directory of each DVD.<br />
      <br />
      As it splits the files across the volumes, the build script is also generating NSIS include scripts with entries for each .tgz file.<br />
      <br />
      The generated NSIS script checks that the correct volume is inserted in the drive (checking for the vol&lt;volume#&gt; file). Then copies the .tgz file from the DVD to $INSTDIR, untar/ungzips the files from the .tgz, then deletes the local copy of the .tgz file.<br />
      <br />
      On the first volume, setup.exe bootstraps the install by copying the real install script to $TEMP and then running the real install with a command-line parameter that gives it the $EXEDIR that setup.exe ran from. setup.exe also detects if it is being run from the network rather than DVD, if so it gives the install another cmdline parameter that tells it to go up the directory structure for the secondary volumes rather than prompting the user to insert the new volumes.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zimsms</span><br />
      <span class="post-time small text-muted">18th June 2004 13:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I read somewhere that using the .CAB format was an easy way of doing this. If I remember correctly you cab the files and place your installer on the final disk, then when you launch your installer you get the install location and component info and only uncab the required files to the location you want them in......by referencing the cab on the same disc as the installer it will ask you to insert the appropriate disc.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JamesF1</span><br />
      <span class="post-time small text-muted">18th June 2004 19:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I would have thought the installer would be on the first disc...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Shea</span><br />
      <span class="post-time small text-muted">19th June 2004 23:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have an idea!<br />
      <br />
      You make two installers, one to extract the other one to TEMP directory and one to install.<br />
      <br />
      The first installer should include:<br />
      <br />
      SilentInstall "silent"<br />
      Section ""<br />
      SetOutPath "$TEMP"<br />
      File "%Installer Name%.exe"<br />
      ExecShell OPEN "$TEMP\%Installer Name%.exe" SW_SHOWNORMAL<br />
      WriteRegStr "HKLM" "Software\%Software Name%" "CD Dir" "$EXEDIR"<br />
      SectionEnd<br />
      <br />
      <br />
      The second installer that actually 'installs' should include:<br />
      <br />
      InstallDirRegKey "HKLM\Software\%Software Name%\CD Dir"<br />
      CheckCD:<br />
      IfFileExists "$INSTDIR\CD1.id" CD1<br />
      MB_OK "Please insert CD 1 to start installation."<br />
      Goto CheckCD<br />
      <br />
      CD1:<br />
      Section "%Section Name%"<br />
      CopyFile "$INSTDIR\File1.exe"<br />
      CopyFile "$INSTDIR\File2.dll"<br />
      Etc, etc, etc, etc.<br />
      IfFileExists "$INSTDIR\CD2.id" CD2<br />
      MB_OK "Please insert CD 2 to continue installation."<br />
      Goto CheckCD<br />
      SectionEnd<br />
      <br />
      CD2:<br />
      Section "%Section Name%"<br />
      CopyFile "$INSTDIR\File1.exe"<br />
      CopyFile "$INSTDIR\File2.dll"<br />
      Etc, etc, etc, etc.<br />
      IfFileExists "$INSTDIR\CD3.id" CD3<br />
      MB_OK "Please insert CD 3 to continue installation."<br />
      Goto CheckCD<br />
      SectionEnd<br />
      <br />
      CD3:<br />
      Continue on with this for however many CDs you have<br />
      <br />
      Let me know if it works or not...</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
