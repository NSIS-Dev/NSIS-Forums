<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="File Association - Icon problem"><title>File Association - Icon problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">File Association - Icon problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=238100">File Association - Icon problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Madpenny</span><br><span class="post-time small text-muted">15th February 2006 14:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>File Association - Icon problem</strong><br></p><blockquote><i>Originally posted by Comperio</i><br><a href="http://nsis.sourceforge.net/wiki/File_Association" target="_blank">http://nsis.sourceforge.net/wiki/File_Association</a></blockquote>i've used this examle to assign icons to my files, but i have problem. explorer does not show my icons. it shows default system icons instead. does theese icons have to meet some special needs?? the wired thing is that, when i enter folder options in the explorer and browse file types, my files are shown with orrect icons.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KenA</span><br><span class="post-time small text-muted">15th February 2006 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi, have you tried to hit "F5" when in Explorer ? Maybe all is needed is just a refresh.<br><br>KenA</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">madpenny</span><br><span class="post-time small text-muted">15th February 2006 14:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by KenA</i><br><b>Hi, have you tried to hit "F5" when in Explorer ? Maybe all is needed is just a refresh.<br><br>KenA</b></blockquote>well yes, i did. this does not help. althouh when i run my application and when browse with it for files to open my icons are displayed... what's more, theese icons are not the ones i specified inside the installer (WriteRegStr HKCR "myapp\DefaultIcon" "" "$INSTDIR\myapp.exe,3") providing apropriate icon index.<br><br>it looks like there is something wrong with my icons. does anyone know if the icons need to be in some exact format (size, colors)?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">KenA</span><br><span class="post-time small text-muted">15th February 2006 15:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ah. I don't know if it helps, but you can find some info about icon's format in Widnows here <a href="http://www.rw-designer.com/windows-xp-icon" target="_blank">here</a>.<br><br>KenA</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">madpenny</span><br><span class="post-time small text-muted">15th February 2006 16:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by KenA</i><br><b>Ah. I don't know if it helps, but you can find some info about icon's format in Widnows here <a href="http://www.rw-designer.com/windows-xp-icon" target="_blank">here</a>.<br><br>KenA</b></blockquote>thanks, but this is not what i needed.<br>something more technical on embeding icons in applications would be helpful. now i'm digging through msdn.com but can't find anything useful.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">15th February 2006 22:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Little off topic:<br>I'm not sure where you got the link "Originally posted by Comperio" message in your original post, but near as I can tell, I've not been involved at all in this discussion. (???)<br><br>Back to your issue:<br>Before pulling your hair out with troubleshooting NSIS, it may be worthwhile to take a step back and make sure that you can assign the icon properly in Windows by manually editing your file types. (You don't say what version of Windows, but assuming Windows XP, you can to to TOOLS and FOLDER OPTIONS, click on the FILE TYPES tab to get a list of all known extension. Simply pick the extension you need to edit and click on the 'advanced' button. From there, you can change the icon.) You could also create a manual shortcut from within Explorer and assign the icon there.<br><br>If the icons work properly in Windows, then you know there is nothing wrong with your EXE's icons.<br><br>Also: <a href="http://nsis.sourceforge.net/RfshDktp_plug-in" target="_blank">this plugin</a> may help refresh explorer after changing the icon in your installer.<br><br>And a few links from MS:<br><a href="http://support.microsoft.com/kb/q132668/" target="_blank">http://support.microsoft.com/kb/q132668/</a><br><br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnwxp/html/winxpicons.asp" target="_blank">http://msdn.microsoft.com/library/de...winxpicons.asp</a><br><br>and finally an interesting forum article from MSDN:<br><a href="http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=170920&amp;SiteID=1" target="_blank">http://forums.microsoft.com/MSDN/Sho...70920&amp;SiteID=1</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">3D_me</span><br><span class="post-time small text-muted">16th February 2006 12:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm having the same problem.. I've searched the internet for a long time, but I didn't find a solution until now... I hope this thread is going to enlight my 'problem'.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">halutotale</span><br><span class="post-time small text-muted">20th February 2006 11:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm having the same kind of problem. On one computer the icon apears correctly, and on another I've got the default windows exe icon. After having done several trials and check everything, it seams that it does this as soon as the intall file is bigger than 200 Mb like (i.e. with the same install script, the icons appears when the install file is not too big). Don't know if it comes from windows (probably) or from NSIS.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">21st February 2006 19:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">halutotale, the two problems aren't related. Your problem is a known issue. Windows sometimes skips icons of files that large. Search the forum for more information on this.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">tamzak</span><br><span class="post-time small text-muted">21st February 2006 23:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm having the same problem...<br><br>/me on win xp 64</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">23rd February 2006 17:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">To get around the problem described in the first post, use this code after creating the association:</p><pre>
<code>!define SHCNE_ASSOCCHANGED 0x8000000<br>!define SHCNF_IDLIST 0<br>System::Call 'Shell32::SHChangeNotify(i ${SHCNE_ASSOCCHANGED}, i ${SHCNF_IDLIST}, i 0, i 0)'</code>
</pre>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>