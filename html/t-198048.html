<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="question about nsisdl::download"><title>question about nsisdl::download - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">question about nsisdl::download</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=198048">question about nsisdl::download</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">routing</span><br><span class="post-time small text-muted">1st November 2004 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>question about nsisdl::download</strong><br>I used nsisdl::download (see below) in my script.<br><br>nsisdl::download /TRANSLATE "$(DESC_DOWNLOADING)" "$(DESC_CONNECTING)" \<br>"$(DESC_SECOND)" "$(DESC_MINUTE)" "$(DESC_HOUR)" "$(DESC_PLURAL)" \<br>"$(DESC_PROGRESS)" "$(DESC_REMAINING)" \<br>/TIMEOUT=30000 "${URL_DOTNET_1033}" "$PLUGINSDIR\dotnetfx.exe"<br><br>But there is nothing on screen. I'm wondering why.<br>I need a window to show progress info.<br><br><br>I appreciate your help very much.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">razor_x</span><br><span class="post-time small text-muted">1st November 2004 17:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">try it without defines and supply a valid url<br><br>you may be surprised that there is a status window :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">routing</span><br><span class="post-time small text-muted">1st November 2004 17:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I tried<br>nsisdl::download "${URL_DOTNET_1033}" "$PLUGINSDIR\dotnetfx.exe"<br><br>Nothing appeared.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">1st November 2004 17:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You should be using curly brackets for the defines! { not (<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">routing</span><br><span class="post-time small text-muted">1st November 2004 17:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi Stu,<br>Thanks for your info.<br>I changed, but still nothing.<br><br>nsisdl::download /TRANSLATE "${DESC_DOWNLOADING}" "${DESC_CONNECTING}" \<br>"${DESC_SECOND}" "${DESC_MINUTE}" "${DESC_HOUR}" "${DESC_PLURAL}" \<br>"${DESC_PROGRESS}" "${DESC_REMAINING}" \<br>/TIMEOUT=30000 "${URL_DOTNET_1033}" "$PLUGINSDIR\dotnetfx.exe"</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">1st November 2004 18:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please attach your script.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">routing</span><br><span class="post-time small text-muted">1st November 2004 19:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you very much, Stu for your help.<br>When I put the nsisdl::download /TRANSLATE into .onInit,<br>there is no progress bar. When I put it into Section -AdditionalIcons, the progrss bar came out. Is it normal?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">1st November 2004 21:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ah well you never mentioned that :p<br><br>Although it doesn't say in the readme, NSISdl's dialogue will only be shown if you call NSISdl from a Section. This is because NSISdl duplicates the progess bar (msctls_progress32) and label (static) controls from the InstFiles page for its progress bar and message (% done).<br><br>All I can suggest is that if you are going to use it outside the InstFiles page, you show a Banner displaying a message.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">3rd November 2004 11:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Long-long ago I wrote http client for my program (Win95 compatibility). And I remember 3 situations with file length:<br><br>1. CONTENT-LENGTH: presents in http header. Found in NSISdl code - it generates error if not finds this (optional) header<br>'error = "Server did not specify content length.";'<br>May be this is warning only ..<br><br>2. length not defined at all, so program can try to read it till end. May be this also works in NSISdl.<br><br>3. (my question) TRANSFER-ENCODING: chunked . VC editor could not find "chunk" in NSISdl sources. It looks like plug-in not checks this http header. At least program must remove chunk headers (== chunk length) in the data stream, otherwise content will be corrupted. I could not find this is in code, so can anybody say me that chunked replys work with NSISdl?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">3rd November 2004 15:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by routing</i><br>When I put the nsisdl::download /TRANSLATE into .onInit,<br>there is no progress bar. When I put it into Section -AdditionalIcons, the progrss bar came out. Is it normal?</blockquote>Sometimes this helps :)<br><br>System::Call "comctl32::InitCommonControls()"</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">3rd November 2004 20:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>Sometimes this helps :)<br><br>System::Call "comctl32::InitCommonControls()"</blockquote>Function .onInit doesn't have the GUI initialized yet, so it won't work.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">4th November 2004 06:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by deguix</i><br>Function .onInit doesn't have the GUI initialized yet, so it won't work.</blockquote>This is initialization of common controls itself :) (i.e. progress bar init). Installer calls this or ...Ex() function later, on it's own GUI init - without this WIN32 apps cannot create list and tree views, progress and status bars, tabs and others. /NOUNLOAD key may also require in this plugin call.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">4th November 2004 18:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">InitCommonControls is called before .onInit is called. But as deguix said, the NSIS dialog is not yet created when .onInit is called. NSISdl uses the NSIS dialog as its parent.<br><br>TRANSFER-ENCODING: chunked is a feature of HTTP/1.1. NSISdl uses HTTP/1.0.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>