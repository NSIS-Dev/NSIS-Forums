<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Different user get different install options" />

  <title>Different user get different install options - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Different user get different install options</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=360718">Different user get different install options</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">citystars</span><br />
      <span class="post-time small text-muted">6th May 2013 12:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Different user get different install options</strong><br />
      Hi,<br />
      Sorry i'm completly new to nsis and i want to make an installer that gives different useres different install options so that they can maybe enter a user name and a password and then get installoptions specific to their user name.I've already tried it with user pass but their i couldnt figure it out how i can seperate installoptions to a signle account.<br />
      greets<br />
      citytstars</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">6th May 2013 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) In the user/pass custom page's LEAVE function, set a variable $installtype depending on what user/pass is entered.<br />
      2) In each following page's PRE function, do this:<br />
      ${If} $installtype != "some value"<br />
      abort<br />
      ${EndIf}<br />
      <br />
      That should be all.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">citystars</span><br />
      <span class="post-time small text-muted">7th May 2013 10:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i dont know where to define the user name now i'm using the userpass plugin<br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #0000BB">Name</span><span style="color: #DD0000">"PassDialogUserPass"<br /></span> <span style="color: #0000BB">OutFile</span><span style="color: #DD0000">"PassDialog-UserPass.exe"<br /></span> <span style="color: #0000BB">RequestExecutionLeveluser<br /></span> <span style="color: #FF8000">##Includeheaders<br /></span> <span style="color: #007700">!include</span><span style="color: #0000BB">MUI</span><span style="color: #007700">.</span><span style="color: #0000BB">nsh<br /></span> <span style="color: #007700">!include</span><span style="color: #0000BB">LogicLib</span><span style="color: #007700">.</span><span style="color: #0000BB">nsh<br /></span> <span style="color: #FF8000">##Pages<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_WELCOME<br />
      PageCustomUserPassPageShowUserPassPageLeave<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_SHOWComponentsPageShow<br /></span> <span style="color: #FF8000">##!insertmacroMUI_PAGE_COMPONENTS<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_INSTFILES<br />
      <br /></span> <span style="color: #FF8000">##Passwordis<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineUsername1</span><span style="color: #DD0000">"Jeff"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">definePassword1</span><span style="color: #DD0000">"blah"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineUsername2</span><span style="color: #DD0000">"stealth"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">definePassword2</span><span style="color: #DD0000">"zero"<br />
      <br /></span> <span style="color: #FF8000">##ControlID's<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineIDC_USERNAME1215<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineIDC_PASSWORD1214<br />
      <br /></span> <span style="color: #FF8000">##Languages<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGEEnglish<br />
      <br /></span> <span style="color: #FF8000">##Displaystheusernameandpassworddialog<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">UserPassPageShow<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_HEADER_TEXT</span><span style="color: #DD0000">"EnterUsername&amp;&amp;Password""Enteryourusernameandpasswordtocontinue."<br />
      <br /></span> <span style="color: #0000BB">PassDialog</span><span style="color: #007700">::</span><span style="color: #0000BB">InitDialog</span><span style="color: #007700">/</span><span style="color: #0000BB">NOUNLOADUserPass<br />
      Pop$R0</span><span style="color: #FF8000">#PageHWND<br />
      <br /></span> <span style="color: #0000BB">GetDlgItem$R1$R0</span><span style="color: #007700">${</span><span style="color: #0000BB">IDC_USERNAME</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">SetCtlColors$R10xFF00000xFFFFFF<br />
      GetDlgItem$R1$R0</span><span style="color: #007700">${</span><span style="color: #0000BB">IDC_PASSWORD</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">SetCtlColors$R10x0000FF0xFFFFFF<br />
      <br />
      PassDialog</span><span style="color: #007700">::</span><span style="color: #0000BB">Show<br />
      <br />
      FunctionEnd<br />
      <br /></span> <span style="color: #FF8000">##Validateusernameandpassword<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">UserPassPageLeave<br />
      <br />
      <br /></span> <span style="color: #FF8000">##Poppassword&amp;usernamefromstack<br /></span> <span style="color: #0000BB">Pop$R0<br />
      Pop$R1<br />
      Pop$R2<br />
      Pop$R3<br />
      <br /></span> <span style="color: #FF8000">##Abitofvalidation<br /></span> <span style="color: #0000BB">StrCmp$R0</span><span style="color: #DD0000">'${Username1}'</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">2<br />
      StrCmp$R1</span><span style="color: #DD0000">'${Password1}'</span><span style="color: #0000BB">GoodBad<br />
      StrCmp$R2</span><span style="color: #DD0000">'${Username2}'</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">2<br />
      StrCmp$R3</span><span style="color: #DD0000">'${Password2}'</span><span style="color: #0000BB">GoodBad<br />
      <br />
      Bad</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">MessageBoxMB_OK</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONEXCLAMATION</span><span style="color: #DD0000">"Theenteredusernameorpasswordisincorrect!"<br /></span> <span style="color: #0000BB">Abort<br />
      <br />
      Good</span><span style="color: #007700">:<br />
      <br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br /></span> <span style="color: #FF8000">/*FunctionComponentsPageShow<br />
      <br />
      ##DisabletheBackbutton<br />
      GetDlgItem$R0$HWNDPARENT3<br />
      EnableWindow$R00<br />
      <br />
      FunctionEnd<br />
      */<br /></span> <span style="color: #0000BB">Section</span><span style="color: #DD0000">'Asection'<br /></span> <span style="color: #0000BB">SectionEnd<br />
      <br />
      abort<br /></span></span> <!-- php buffer end -->
      <hr />
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">citystars</span><br />
      <span class="post-time small text-muted">7th May 2013 16:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">now i mange to get a choice between 2 user but its not hidden so that user 2 can easily install what only user 1 should be able to install. and the other way around. PLease help me one more time :D<br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #0000BB">Name</span><span style="color: #DD0000">"PassDialogUserPass"<br /></span> <span style="color: #0000BB">OutFile</span><span style="color: #DD0000">"PassDialog-UserPass.exe"<br /></span> <span style="color: #0000BB">RequestExecutionLeveluser<br /></span> <span style="color: #FF8000">##Includeheaders<br /></span> <span style="color: #007700">!include</span><span style="color: #0000BB">MUI</span><span style="color: #007700">.</span><span style="color: #0000BB">nsh<br /></span> <span style="color: #007700">!include</span><span style="color: #0000BB">LogicLib</span><span style="color: #007700">.</span><span style="color: #0000BB">nsh<br /></span> <span style="color: #FF8000">##Pages<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_WELCOME<br />
      PageCustomUserPassPageShowUserPassPageLeave<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineMUI_PAGE_CUSTOMFUNCTION_SHOWComponentsPageShow<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_COMPONENTS<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_PAGE_INSTFILES<br /></span> <span style="color: #007700">var</span><span style="color: #0000BB">installtype<br />
      <br />
      InstType</span><span style="color: #DD0000">"User1"<br /></span> <span style="color: #0000BB">InstType</span><span style="color: #DD0000">"User2"<br />
      <br /></span> <span style="color: #FF8000">##Passwordis<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineUsername1</span><span style="color: #DD0000">"Jeff"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">definePassword1</span><span style="color: #DD0000">"blah"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineUsername2</span><span style="color: #DD0000">"stealth"<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">definePassword2</span><span style="color: #DD0000">"zero"<br />
      <br /></span> <span style="color: #FF8000">##ControlID's<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineIDC_USERNAME1215<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineIDC_PASSWORD1214<br />
      <br /></span> <span style="color: #FF8000">##Languages<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_LANGUAGEEnglish<br />
      <br />
      <br /></span> <span style="color: #FF8000">##Displaystheusernameandpassworddialog<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">UserPassPageShow<br />
      <br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">insertmacroMUI_HEADER_TEXT</span><span style="color: #DD0000">"EnterUsername&amp;&amp;Password""Enteryourusernameandpasswordtocontinue."<br />
      <br /></span> <span style="color: #0000BB">PassDialog</span><span style="color: #007700">::</span><span style="color: #0000BB">InitDialog</span><span style="color: #007700">/</span><span style="color: #0000BB">NOUNLOADUserPass<br />
      Pop$R0</span><span style="color: #FF8000">#PageHWND<br />
      <br /></span> <span style="color: #0000BB">GetDlgItem$R1$R0</span><span style="color: #007700">${</span><span style="color: #0000BB">IDC_USERNAME</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">SetCtlColors$R10xFF00000xFFFFFF<br />
      GetDlgItem$R1$R0</span><span style="color: #007700">${</span><span style="color: #0000BB">IDC_PASSWORD</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">SetCtlColors$R10x0000FF0xFFFFFF<br />
      <br />
      PassDialog</span><span style="color: #007700">::</span><span style="color: #0000BB">Show<br />
      <br />
      FunctionEnd<br />
      <br /></span> <span style="color: #FF8000">##Validateusernameandpassword<br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">UserPassPageLeave<br />
      <br /></span> <span style="color: #FF8000">##Poppassword&amp;usernamefromstack<br /></span> <span style="color: #0000BB">Pop$R0<br />
      Pop$R1<br />
      <br /></span> <span style="color: #FF8000">##Abitofvalidation<br /></span> <span style="color: #0000BB">StrCmp$R0</span><span style="color: #DD0000">'${Username1}'</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">4<br />
      StrCmp$R1</span><span style="color: #DD0000">'${Password1}'</span><span style="color: #0000BB">0Bad<br />
      SetCurInstType0<br />
      GOTOGood<br />
      StrCmp$R0</span><span style="color: #DD0000">'${Username2}'</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">4<br />
      StrCmp$R1</span><span style="color: #DD0000">'${Password2}'</span><span style="color: #0000BB">0Bad<br />
      SetCurInstType1<br />
      GOTOGood<br />
      <br />
      Bad</span><span style="color: #007700">:<br /></span> <span style="color: #0000BB">MessageBoxMB_OK</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONEXCLAMATION</span><span style="color: #DD0000">"Theenteredusernameorpasswordisincorrect!"<br /></span> <span style="color: #0000BB">Abort<br />
      <br />
      Good</span><span style="color: #007700">:<br />
      <br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br />
      <br />
      <br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">ComponentsPageShow<br />
      <br /></span> <span style="color: #007700">${If}</span><span style="color: #0000BB">$installtype</span><span style="color: #007700">==</span><span style="color: #DD0000">"0"<br />
      <br /></span> <span style="color: #007700">${EndIf}<br />
      <br />
      <br /></span> <span style="color: #FF8000">##DisabletheBackbutton<br /></span> <span style="color: #0000BB">GetDlgItem$R0$HWNDPARENT3<br />
      EnableWindow$R00<br />
      <br />
      FunctionEnd<br />
      <br />
      Section</span><span style="color: #DD0000">'Asection'<br /></span> <span style="color: #0000BB">SectionIn1<br />
      SectionEnd<br />
      <br />
      Section</span><span style="color: #DD0000">'Bsection'<br /></span> <span style="color: #0000BB">SectionIn2<br />
      SectionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">citystars</span><br />
      <span class="post-time small text-muted">13th May 2013 08:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">any ideas?</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
