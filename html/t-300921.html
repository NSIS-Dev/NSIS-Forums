<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Mass directory and file creation"><title>Mass directory and file creation - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Mass directory and file creation</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=300921">Mass directory and file creation</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jeromechong</span><br><span class="post-time small text-muted">11th December 2008 10:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Mass directory and file creation</strong><br>Is there anywhere where I can have a whole folder (with many sub folders and files) copied to a specified location at the target system?<br><br>I am doing this as I want to create an installer for my web application that runs on Tomcat. I am figuring out how to get Tomcat installed using my own customized installer.<br><br>I have the following line in my nsi file that gets all the files and sub folders in "apache-tomcat-5.5.27" to be compiled into the installer:<br>File /r apache-tomcat-5.5.27\*.*<br><br>I noticed that if at the target path, when the folder structures are created, the files will be extracted correctly into the respective folder. But I do not want to have have many CreateDirectory command just to create the whole folder structure before the files can be extracted and populated correctly.<br><br>I have tried zip2exe as well, meaning that from my installer, I ExecWait the generated apache-tomcat-5.5.27.exe file. This is not a very elegant way of doing things. Is it possible to have it execute in silent mode?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">11th December 2008 20:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">File /r will create the directory structure for you and SetOutPath will create the directory where you want the files to be extracted. There's no need to ever call CreateDirectory in your case.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jeromechong</span><br><span class="post-time small text-muted">17th December 2008 03:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It works now with the current codes:<br><br>SetOutPath $INSTDIR<br>CreateDirectory "$INSTDIR\apache-tomcat-5.5.27"<br>DetailPrint "Copying the Tomcat zip files"<br>SetOutPath "$INSTDIR\apache-tomcat-5.5.27"<br>File resources\tomcat.ico<br>File /nonfatal /r apache-tomcat-5.5.27\*.*<br><br>I still have to create the folder first before extracting the files from the apache-tomcat-5.5.27 folder, else it would be all extracted to the root of $INSTDIR (meaning not in the apache-tomcat-5.5.27 folder).<br><br>Thanks kichik!</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>