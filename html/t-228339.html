<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Request MUI example with multiple install directories for 'family' of apps" />

  <title>Request MUI example with multiple install directories for 'family' of apps - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Request MUI example with multiple install directories for 'family' of apps</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228339">Request MUI example with multiple install directories for 'family' of apps</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">13th October 2005 16:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Request MUI example with multiple install directories for 'family' of apps</strong><br />
      I've seen a number of posts about using multiple installation directories. It hasn't jelled in my mind, and I think a "best practices" example using the Modern-UI would be VERY helpful.<br />
      <br />
      I've looked at MUI InstallOptions.nsi and think I can maybe figure out something, but that would perhaps be reinventing the wheel, and the MUI author (or other expert) would seem the best person to provide something like a template to clone from.<br />
      <br />
      The application I'm working on is part of a "family" of freeware apps. Each app would be in its own directory and use something like a FAMILY_PATH registry variable or environment variable to find resources that are used in common "family wide" by multiple applications.<br />
      <br />
      I want to allow the end-user to provide the installation directory for that specific executable, and a separate resource path. The default might be something like:<br />
      <br />
      C:\Program Files<br />
      C:\Program Files\Family<br />
      C:\Program Files\Family\Resources<br />
      C:\Program Files\Family\BasicApp<br />
      <br />
      Another person might use a simiar nsis script to install<br />
      C:\Program Files\Family\AdvancedApp<br />
      It could detect that Family\Resources were already installed and proceed accordingly.<br />
      <br />
      Each application might be available "bare bones" or with a "StarterKit" with a basic resource. The apps aren't usable until there is at least one resource installed (there are hundreds of resources). A concern is having redundant resources with the directory structure ending up like:<br />
      <br />
      C:\Program Files\BasicApp\Resources<br />
      C:\Program Files\AdvancedApp\Resources<br />
      <br />
      A great example might handle reading and possibly writing the actual FAMILY_PATH environment variable with something like:<br />
      WriteEnvStr.nsh<br />
      (perhaps using a separate component page?)<br />
      <br />
      The uninstall would seem to be tricky ... to detect if another "family application" is installed and use that information to control whether the resources could/should be removed.<br />
      <br />
      Does something like this already exist? I've seen previous examples, but my impression is that many are obsolete with nsis version 2.0 and the MUI.<br />
      <br />
      Such an example would be greatly appreciated.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">14th October 2005 13:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">okay im no expert but I think you should be able to just have the apps pull resources from */family path/resources/ and then when you install just have $instdir be */family path/ and install the resources needed for that program and just overwrite any ones that are already there.<br />
      <br />
      I'm assuming that you want your dir tree to end up looking like this<br />
      <br />
      */family path/<br />
      */family path/app1/<br />
      */family path/app2/<br />
      */family path/app3/<br />
      */family path/resources/<br />
      <br />
      where you dont want the user to be able to change the dir after family path.<br />
      <br />
      The only problem might be over writing newer resources but im pretty sure that there is a way to check for that.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">14th October 2005 19:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Almost ... there is an environment variable (something like <i>FAMILY_PATH</i>) that an associated but separate <i>InstallManager.exe</i> uses to download resources.<br />
      <br />
      To be accepted to be part of this <i>family of applications</i>, a <i>candidate app</i> is required to use a <i>FAMILY_API</i> that has a C++ SwMgr object that <i>sniffs around</i> in the application path and then the FAMILY_PATH to detect which resources are available.<br />
      <br />
      Part of my concern is that I'm a rather junior member of this aforementioned <i>family of applications</i>, and trying to help out with converting the current installer from InstallShield to NSIS.<br />
      <br />
      Also, I'm about ready to submit a possibly controversial <i>candidate app</i> to the <i>family</i>, and want to minimize the potential for the installer causing problems for other apps that share the resources. (almost sounds like the mafia :-) My impression is that there is a lot that can go wrong in this scenario (especially uninstalls), and I'm not at all an expert with nsis.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
