<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="SectionFlags Q"><title>SectionFlags Q - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">SectionFlags Q</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=124727">SectionFlags Q</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">11th February 2003 21:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>SectionFlags Q</strong><br>Trying this code:<br><br></p><pre>
<code><br>Function BuscarArch<br>Pop $9<br>ifFileExists $SYSDIR\$9 NoEsta<br>MessageBox MB_OK|MB_ICONEXCLAMATION "Can't find $9, it will be downloaded."<br>SectionSetFlags down0 5<br>NoEsta:<br>FunctionEnd<br><br>Function .onInit<br>Push ${MSVBVM60}.dll<br>Call BuscarArch<br>FunctionEnd<br><br>Section "GetWEBFile" down0<br>...<br>SectionEnd<br></code>
</pre><br>
      <br>
      It suppost to, if the file doesn't exists, autoselect the section,<br>
      but is not working, any ideas?<br>
      <br>
      Thanks :D
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">12th February 2003 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As down0 can only be used after it is defined you should put that function after the section. It should also be ${down0} in SectionSetFlags instead of down0.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">12th February 2003 19:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Works fine... :D</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">12th February 2003 19:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">works fine, I know:<br>
      SectionSetFlags ${var} flag<br>
      <br>
      where flag:<br>
      1.- Enabled<br>
      2.- subsection<br>
      3.- subsection end<br>
      4.- bold or not<br>
      5.- section is read-only<br>
      6.- subsection automatically expanded<br>
      <br>
      is there a flag for autoselect the section?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">13th February 2003 09:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Not exactly. The numbers you mentioned are the serial numbers of the bits in the flags integer. The right numbers are 1, 2, 4, 8, 16, 32.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">13th February 2003 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yeap, that was my problem, thanks dude :thumbsup:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br>
      <span class="post-time small text-muted">21st February 2003 05:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is it possible to set flags for hidden sections?<br>
      ---<br>
      Thanks</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">21st February 2003 09:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br>
      <span class="post-time small text-muted">21st February 2003 15:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK, this is what my situation is:<br>
      I have a hidden section (name starting with "-") that I initially need to be disabled. I try to do this in the .onInit like this:<br>
      <br>
      SectionGetFlags ${Hidden} $0<br>
      IntOp $0 $0 &amp; ${SECTION_OFF} ;0xFFFFFFFE<br>
      SectionSetFlags ${Hidden} $0<br>
      <br>
      Later, depending upon user input, I may turn it on like this:<br>
      <br>
      SectionGetFlags ${Hidden} $0<br>
      IntOp $0 $0 | ${SF_SELECTED} ;1<br>
      SectionSetFlags ${Hidden} $0<br>
      <br>
      However, the install page seems to ignore this flag altogether and always executes the section whether it is off or not.<br>
      Any suggestions?<br>
      ---<br>
      Thanks</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br>
      <span class="post-time small text-muted">23rd February 2003 05:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">*bump*<br>
      <br>
      Any suggestions?<br>
      ---<br>
      Thanks</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">23rd February 2003 16:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Download the latest CVS and read the new one-section.nsi<br>
      <br>
      you now may include in the script a macro like this:<br>
      <br></p>
      <pre>
<code><br>!insertmacro UnselectSection ${Hidden}<br>!insertmacro SelectSection ${Hidden}<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">23rd February 2003 16:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you have installation types (InstType) then when you get to the component selection page the sections, including hidden sections, will be selected according to the installation type. To get around this you'll have to set the selected state of the hidden section in every call to .onSelChange.<br>
      <br>
      If this is not the case then ensure you are using the latest version of NSIS, and if it doesn't work with that either attach the script.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>