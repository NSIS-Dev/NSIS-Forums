<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Simple Installer - Just want to provide an option." />

  <title>Simple Installer - Just want to provide an option. - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Simple Installer - Just want to provide an option.</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=346451">Simple Installer - Just want to provide an option.</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mysousa</span><br />
      <span class="post-time small text-muted">19th July 2012 00:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Simple Installer - Just want to provide an option.</strong><br />
      Hello. I am new and have poured through the docs trying to understand this software. Please help me achieve a simple goal.<br />
      <br />
      I want:<br />
      page 1 - Welcome, blah blah<br />
      page 2 - Please choose A or B<br />
      page 3 - install<br />
      If chose A install file A<br />
      If chose B install file B<br />
      <br />
      How do I set up this option.<br />
      <br />
      I am this far.<br /></p>
      <pre>
<code>; Install templates for printing.<br /><br />!define PRODUCT_NAME "Template Installer"<br />!define PRODUCT_VERSION "1.0"<br />!define PRODUCT_PUBLISHER "MCID"<br />!define PRODUCT_WEB_SITE "http://www.mycompany.com"<br /><br />;--------------------------------<br /><br />Name "Template Installer"<br /><br />; Output executable<br />OutFile "template_installer.exe"<br /><br />; Request application privileges<br />RequestExecutionLevel user<br /><br />;--------------------------------<br /><br />; Pages<br /><br />Page instfiles<br /><br />;--------------------------------<br /><br />; The stuff to install<br />Section "" ;No components page, name is not important<br /><br />  ; Set context to All Users<br />  SetShellVarContext all<br /><br />  ; Set output path to the installation directory.<br />  SetOutPath "$AppData\IDsPlus\Design Files\"<br />  <br />  ; Files to put<br />  File globals.gdx<br />  <br />SectionEnd ; end the section<br /></code>
</pre><br />
      This works, it writes the file where I want it. I cannot figure out how to set up an options page.<br />
      <br />
      I have also done this using HM NIS Edit:<br />
      <pre>
<code>; Ini file generated by the HM NIS Edit IO designer.<br />[Settings]<br />NumFields=2<br /><br />[Field 1]<br />Type=RadioButton<br />Text="Install for direct-to-card printer"<br />Left=21<br />Right=350<br />Top=28<br />Bottom=40<br /><br />[Field 2]<br />Type=RadioButton<br />Text="Install for retransfer printer"<br />Left=21<br />Right=352<br />Top=43<br />Bottom=52<br /></code>
</pre><br />
      I have no idea how to incorporate this or if I am barking up the wrong tree.<br />
      <br />
      Please help.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mysousa</span><br />
      <span class="post-time small text-muted">19th July 2012 04:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>[Solved]</strong><br />
      Okay, I got it. Boy, this stuff is difficult when foreign. I had come to think, over the past few weeks, this would be insurmountable. I got it. For anybody curious, here was the solution.<br />
      <br />
      team_credential_template_installer.nsddef<br /></p>
      <pre>
<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;!--<br />This file was created by NSISDialogDesigner 0.9.16.0<br />http://coolsoft.altervista.org/nsisdialogdesigner<br />Do not edit manually!<br />--&gt;<br />&lt;Dialog Name="team_credential_template_installer" Title="Team Credential Template Installer" Subtitle="Install template files for printing credentials."&gt;<br />  &lt;Label Name="Text" Location="23, 15" Size="398, 34" Text="Please choose the correct templates to install based on your printer type." TabIndex="0" /&gt;<br />  &lt;RadioButton Name="CR80" Location="19, 98" Size="402, 40" Text="Direct-to-Card***xD;***xA;(Datacard CP80 Plus, EDISecure DCP350, Fargo DTC1000, etc)" TabIndex="1" onClick="fnc_install_CR80" /&gt;<br />  &lt;RadioButton Name="OverCR80" Location="19, 52" Size="402, 40" Text="Retransfer***xD;***xA;(EDISecure XID 8300 or similar)" Checked="True" TabIndex="2" onClick="fnc_install_overCR80" /&gt;<br />&lt;/Dialog&gt;</code>
</pre><br />
      <br />
      team_credential_template_installer.nsdinc<br />
      <pre>
<code>; ========================================================<br />; This file was generated by NSISDialogDesigner 0.9.16.0<br />; http://coolsoft.altervista.org/nsisdialogdesigner<br />; ========================================================<br /><br />; handle variables<br />Var hCtl_team_credential_template_installer<br />Var hCtl_team_credential_template_installer_Text<br />Var hCtl_team_credential_template_installer_CR80<br />Var hCtl_team_credential_template_installer_OverCR80<br /><br /><br />; dialog create function<br />Function fnc_team_credential_template_installer_Create<br />  <br />  ; === team_credential_template_installer (type: Dialog) ===<br />  nsDialogs::Create 1018<br />  Pop $hCtl_team_credential_template_installer<br />  ${If} $hCtl_team_credential_template_installer == error<br />    Abort<br />  ${EndIf}<br />  !insertmacro MUI_HEADER_TEXT "Team Credential Template Installer" "Install template files for printing credentials."<br />  <br />  ; === Text (type: Label) ===<br />  ${NSD_CreateLabel} 15u 8u 261u 19u "Please choose the correct templates to install based on your printer type."<br />  Pop $hCtl_team_credential_template_installer_Text<br />  <br />  ; === CR80 (type: RadioButton) ===<br />  ${NSD_CreateRadioButton} 12u 55u 264u 23u "Direct-to-Card$\r$\n(Datacard CP80 Plus, EDISecure DCP350, Fargo DTC1000, etc)"<br />  Pop $hCtl_team_credential_template_installer_CR80<br />  ${NSD_AddStyle} $hCtl_team_credential_template_installer_CR80 ${WS_GROUP}<br />  ${NSD_OnClick} $hCtl_team_credential_template_installer_CR80 fnc_install_CR80<br />  <br />  ; === OverCR80 (type: RadioButton) ===<br />  ${NSD_CreateRadioButton} 12u 29u 264u 23u "Retransfer$\r$\n(EDISecure XID 8300 or similar)"<br />  Pop $hCtl_team_credential_template_installer_OverCR80<br />  ${NSD_OnClick} $hCtl_team_credential_template_installer_OverCR80 fnc_install_overCR80<br />  ${NSD_Check} $hCtl_team_credential_template_installer_OverCR80<br />  <br />FunctionEnd<br /><br /><br />; dialog show function<br />Function fnc_team_credential_template_installer_Show<br />  Call fnc_team_credential_template_installer_Create<br />  nsDialogs::Show $hCtl_team_credential_template_installer<br />FunctionEnd<br /></code>
</pre><br />
      <br />
      and finally, team_credential_template_installer.nsi<br />
      <pre>
<code>; Install templates for printing.<br /><br />!define PRODUCT_NAME "team Credential Template Installer"<br />!define PRODUCT_VERSION "1.0"<br />!define PRODUCT_PUBLISHER "Midwest Card and ID Solutions"<br />!define PRODUCT_WEB_SITE "http://www.midwestcard.com"<br /><br />Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"<br /><br />; Output executable<br />OutFile "team_credential_template_installer.exe"<br /><br />; Request application privileges<br />RequestExecutionLevel user<br /><br />;--------------------------------<br /><br />; MUI 1.67 compatible ------<br />!include "MUI.nsh"<br /><br />; includes<br />!include nsdialogs.nsh<br />!include "team_credential_template_installer.nsdinc"<br />!include LogicLib.nsh<br /><br />; MUI Settings<br />!define MUI_ABORTWARNING<br />!define MUI_ICON "MCID_vector_based_logo.ico"<br /><br />; Welcome page<br />!insertmacro MUI_PAGE_WELCOME<br />; License page<br />!insertmacro MUI_PAGE_LICENSE 'license_info.txt'<br />; Custom Page<br />Page custom fnc_team_credential_template_installer_Show<br />; Instfiles page<br />!insertmacro MUI_PAGE_INSTFILES<br />; Finish page<br />!insertmacro MUI_PAGE_FINISH<br /><br />; Language files<br />!insertmacro MUI_LANGUAGE "English"<br /><br />; Reserve files<br />!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br /><br />; MUI end ------<br /><br />;--------------------------------<br /><br />Var install_CR80<br />Var install_overCR80<br /><br />Function fnc_install_CR80<br />  StrCpy $install_CR80 "1"<br />FunctionEnd<br /><br />Function fnc_install_overCR80<br />  StrCpy $install_overCR80 "1"<br />FunctionEnd<br /><br />; The stuff to install<br />Section "Template Installation"<br /><br />  ; default value based on most printers in area<br />  StrCpy $install_overCR80 "1"<br /><br />  ; Set context to All Users<br />  SetShellVarContext all<br /><br />  ; Set output path to the installation directory for ID Centre.<br />  SetOutPath "$DOCUMENTS\Datacard\ID Software\Projects\TraxPersonnel\"<br />  <br />  ${if} $install_CR80 == "1"<br />    ; MessageBox MB_OK "CR80 $install_CR80"<br />    ; Files to put<br />    File /r temp_CR80\TraxPersonnel\*.*<br />  ${elseif} $install_overCR80 == "1"<br />    ; MessageBox MB_OK "overCR80 $install_overCR80"<br />    ; Files to put<br />    File /r temp_overCR80\TraxPersonnel\*.*<br />  ${endif}<br /><br />  ; Set output path to the installation directory for ID Designer.<br />  SetOutPath "$AppData\company\IDsPlus\Design Files\"<br /><br />  ; Files to put<br />  File /r temp\*.*<br />  <br />SectionEnd ; end the section<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">19th July 2012 06:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you're using nsDialogs anyway, you should use MUI2 instead of MUI. You can then also remove the MUI_RESERVEFILE_INSTALLOPTIONS macro.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th July 2012 11:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes just for clarity MUI2 uses nsDialogs instead of InstallOptions for its welcome and finish pages. Your new dialog is built using nsDialogs and therefore you are adding additional overhead by using MUI1 (InstallOptions). Change !include MUI.nsh to !include MUI2.nsh and remove !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
