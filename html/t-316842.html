<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="NSIS Ansi+Unicode hybrid" />

  <title>NSIS Ansi+Unicode hybrid - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">NSIS Ansi+Unicode hybrid</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316842">NSIS Ansi+Unicode hybrid</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">6th February 2010 15:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>NSIS Ansi+Unicode hybrid</strong><br />
      I have been playing with the idea of having both A and U NSIS installed in the same directory (Sharing examples,includes etc)<br />
      <br />
      Currently, only simple scripts work. It does this by using hacked versions of makensis that look for their stubs and plugins in separate sub directories. The main makensis.exe has been replaced by a small loader that tries to figure out if the .nsi has a BOM (It also supports /ANSI or /UNICODE as the first parameter on the command line)<br />
      <br />
      Grab the <a href="http://stashbox.org/785486/NSIS%20Unofficial%20setup%20%282.46A%2C2.45.1U%29.exe" target="_blank">experimental installer</a> if you want to play with it (Do NOT overwrite you normal NSIS install, you also probably want to uncheck startmenu and shell integration during install)<br />
      <br />
      Current issues include:</p>

      <ul>
        <li>ReserveFile calls fail for plugins</li>

        <li>Only ANSI language files are installed and I'm not sure if the unicode compiler is able to pull out the codepage from the .nlf and do proper conversion to unicode, it seems to prefer a BOM (So unicode is pretty much broken when it comes to languages that are not ASCII)</li>
      </ul><br />
      If the official distribution is ever going to support this, we would need two new defines that MUI and other things can use: NSIS_PLUGINSDIR and NSIS_LANGDIR (Defines would be set by the compiler at runtime) (It would be possible for my loader to set these, but there is no support anywhere for them so I would have to patch MUI also, might do that in the future if there is any demand for it)<br />
      <br />
      NB: This configuration is in no way supported by anyone and should only be used to play around and experiment ;)
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
