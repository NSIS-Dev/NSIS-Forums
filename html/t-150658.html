<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Updater" />

  <title>Updater - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Updater</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150658">Updater</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">27th September 2003 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Updater</strong><br />
      Ok i need to know how to make a program that would connect to a site and check if there are any downloads available on the site and return to the user a list of downloads that are available then the user could download them.<br />
      <br />
      I have made installers with NSIS but i am probably in the novice stage so if anyone can tell me how to do it or even if its possible i would greatly appreciate it. Thanx:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th September 2003 23:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use the NSISdl plug-in to download and the InstallOptios plug-in to display the list of downloads.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">27th September 2003 23:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok thanx but can u please give me an example on how to do it<br />
      <br />
      <br />
      Thanx again.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th September 2003 23:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Writing this whole system will take quite some time. Please read the documentation yourself and if you have any problems with specific features, post a question.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">28th September 2003 01:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok i have made a downloader but everytime i get to the install part it connects then it gets a download error is there anyway i can find out what kind of error it is?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">28th September 2003 03:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">there's a readme for that plugin, it says:<br />
      <br />
      <br />
      NSISdl::download /TIMEOUT=30000 <a href="http://www.domain.com/file" target="_blank">http://www.domain.com/file</a> localfile.exe<br />
      <br />
      The return value is pushed to the stack:<br />
      <br />
      "cancel" if cancelled<br />
      "success" if success<br />
      otherwise, an error string describing the error</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">28th September 2003 05:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry but i already figured out my problem but thanx anyway.<br />
      <br />
      Now can anybody tell me how to write a line to an .ini file like say that i want to add<br />
      <br />
      ;Hello<br />
      <br />
      on line 5<br />
      <br />
      how would i go about doing it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th September 2003 12:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why would you want to write a comment to an INI file? Use WriteINIStr and ReadINIStr, it's much easier. If you want to write lines that are not in the INI format use FileOpen, FileWrite, FileRead and FileClose.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">28th September 2003 13:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>D-Day Updater</strong><br />
      I have written an updater program in NSIS for our D-Day: Normandy computer game.<br />
      It's finished now, after releasing the final changes yesterday (build v1.00b4)<br />
      It downloads a list of community maps from our Internet server(s) to the users' PC, and then checks which map names on the downloaded list exist on his/her's hard drive.<br />
      If the maps, or downloaded zips do not exist, then it adds the zips to a list for download.<br />
      <br />
      The full program can be downloaded here (1.13mb):<br />
      <a href="http://www.planetquake.com/ddc/gbr-release" target="_blank">http://www.planetquake.com/ddc/gbr-release</a><br />
      <br />
      Main source:<br />
      <a href="http://myweb.tiscali.co.uk/imker/ddayupdater/ddayupdater.nsi" target="_blank">http://myweb.tiscali.co.uk/imker/dda...dayupdater.nsi</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">29th September 2003 00:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok i can write a line to an ini file using WriteINIStr but is there anyway to write something just like<br />
      <br />
      blahblah instead of<br />
      <br />
      [whatever]<br />
      text=blahblah</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">29th September 2003 02:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Also is there a way that i can scan an online folder and return to the user a list of files that are in that folder.<br />
      <br />
      Thanx alot guys for all your help my updater is starting to look better and better.:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">29th September 2003 04:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">for writing normal text in a ini, you need the FileOpen/FileWrite/FileClose combo that kichik told you.<br />
      <br />
      To find files you need the FindFirst/FindNext/FindClose combo.<br />
      <br />
      Maybe difficult to use at first, but once you wrote one you can copy it for the rest of your live ;)<br />
      <br />
      mmm... I found no examples for this combos in nsis archives, may I wrote them?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th September 2003 10:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can't scan the list of files on a server unless the server gives you a method to do it. It would be a lot simpler to just include an online file that contains the file the user can download.<br />
      <br />
      n0On3, there are some examples in the Archive. But if you think something is missing, a basic example, a more descriptive explanation or anything else, go ahead and add it. The more the merrier :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">29th September 2003 22:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes please write it so u can help many noobish people like me :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">30th September 2003 01:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Isnt there anyway i can get rid of the setion_name using WriteINIStr<br />
      Because im using it like this<br />
      <br />
      WriteINIStr "$INSTDIR\plugins.ini" "i need to get rid of this" "blah.amx ;" "description"<br />
      <br />
      And it looks like this<br />
      <br />
      [i need to get rid of this]<br />
      blah.amx ;=description<br />
      <br />
      See its perfect except the part i need to get rid of i dont even need to get rid of it but is there a way i can put a ; or // in front of it</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">30th September 2003 08:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">if you do:<br />
      <br />
      FileOpen $4 "whateverfile.txt" a<br />
      FileSeek $4 0 END<br />
      FileWrite $4 "blahblah"<br />
      FileClose $4<br />
      <br />
      you'll have that blahblah at the end of the file. I am not sure about the '0' though.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">30th September 2003 09:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I wrote an example here:<br />
      <br />
      <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=429&amp;instances=0" target="_blank">http://nsis.sourceforge.net/archive/...29&amp;instances=0</a><br />
      <br />
      tell me what you think, and what to change ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">30th September 2003 19:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please could you move it to the <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=311&amp;instances=0,11" target="_blank">Text File Manipulation</a> subdir so that it can be found more easily.<br />
      <br />
      Edit: Soorry, never mind it's in examples anyway :)<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">30th September 2003 23:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">:) Thank u it worked perfectly thank u a 1000 times and great post it was very helpful.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">1st October 2003 00:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, I am glad it helped you :)<br />
      <br />
      And yes, I put it in the examples section because that code is not something to use, but just to see how they work together.<br />
      <br />
      I am still not sure about the "FileSeek $4 0 END" is it correct?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">1st October 2003 11:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The 0 is fine. Will set the file pointer at the end.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">2nd October 2003 23:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Now how can i do this find a line that starts with gamedll and replace it with a new line. Also is there anyway i can write "" in a file?<br />
      <br />
      Thanx again in advance</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">2nd October 2003 23:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Also one more thing sorry i had to post twice but it slipped my mind<br />
      <br />
      how can i read a string from an ini and if that string exists to stop a file from appearing in the components list?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">2nd October 2003 23:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How can i write quotes ("") to a text file</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd October 2003 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To compare only the first part of the string to another stirng use StrCpy with a limit first. StrCpy allows you to copy just a certain number of chars from the string. Specify the length of the string you want to compare to and compare the result.<br />
      <br />
      To write quotes to a text file, or use them anywhere else, simply quote the string with other types of quotes (' for example). See <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.1" target="_blank">Section 4.1</a> for more information.<br />
      <br />
      To read from an INI file use ReadINIStr.<br />
      <br />
      If you want to hide a section from the components page simply set its name to "" using SectionSetText.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">7th October 2003 00:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OOps sorry i messed up my post</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">7th October 2003 00:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok here is my script so far i have it to write the string to a file named installed.ini but how can i make it to where it will read the installed.ini file next time around and if the current version is the same as in the ini for that file not to show up in the components list. i only have the WriteINIStr in the first section but i will add it to the others once u guys help with this part and i think i could get the rest of it own my own. Thanx once again for all the help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">7th October 2003 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you please repeat that? I didn't understand what you wanted to ask.<br />
      <br />
      I have seen usage of FileOpen, FileRead, FileWrite and FileClose in your script for INIs in your script. If you're already using an INI use WriteINIStr and ReadINIStr instead of messing with File*. It's so much simpler...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">9th October 2003 03:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I just need u to tell me how to read the string from an ini version is the same for the component not to show up on the components list<br />
      <br />
      [AMX]<br />
      version=0.9.6<br />
      <br />
      Im sorry this is kinda of hard for me to explain heres an example<br />
      <br />
      if<br />
      <br />
      [AMX]<br />
      version=0.9.5<br />
      <br />
      and there is an installer for amx version 0.9.5 i dont want it to show up in the components list<br />
      <br />
      I hope it was clear enough</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th October 2003 11:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To skip the component list simply call Abort from the component's page pre function. To skip according to the version number use something like:<br />
      <br />
      ReadINIStr $0 file.ini section name<br />
      StrCmp $0 "0.9.6" 0 +2<br />
      Abort</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">10th October 2003 04:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok i dont know how to set the function up as a component pre function i have tried using Function .onGUIInit but it says there is already a function named that so what do i do and also i dont want the installer to abort i just dont want that section to appear so i used<br />
      <br />
      ReadINIStr $0 "$INSTDIR\addons\downloaded\installed.ini" "Metamod" "Version"<br />
      StrCmp $0 "1.16.2" 0 +2<br />
      SectionSetText "SEC1" ""<br />
      <br />
      And i dunno if its right because i dunno how to use it. So if anyone has any advice for my noobish self i would appreciate it. And thanx a lot Kichik u have helped me with almost all of my problems and u rock.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th October 2003 13:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See the following page for more information about page callbacks:<br />
      <br />
      <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3</a><br />
      <br />
      If you aren't using the latest CVS version find the same section on your local documentation. The one online is only for the latest CVS version.<br />
      <br />
      After that, read the MUI readme to find how to set pre function using the MUI (the normal method won't work as you expect with the MUI).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">11th October 2003 01:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok i added the function and now it works but how can i make the subsection dissapear.<br />
      <br />
      also how can i make all check boxes off by default i know i have seen it before but where i tried searching and i couldnt find it. Sorry</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">11th October 2003 07:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">And i mean by that is that i want to make the subsections not show in the components section so what do i use<br />
      <br />
      +Section<br />
      --subsection<br />
      --subsection<br />
      <br />
      i want to make those subsections dissappear</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">11th October 2003 13:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can hide a section by setting an empty name.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">11th October 2003 23:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried that and it didnt work i used<br />
      <br />
      SectionSetText "SEC1" ""<br />
      <br />
      and when i did that nothing happened also how would i check more than one ini prior to the components section i think i got it i just did this but im not sure if its right...<br />
      <br /></p>
      <pre>
<span style="color: #007700">Function</span><span style="color: #DD0000">"check"
<br /></span><span style="color: #0000BB">ReadINIStr</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"$INSTDIR\addons\downloaded\installed.ini""Metamod""Version"
<br /></span><span style="color: #0000BB">StrCmp</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"1.16.2"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">2
<br />SectionSetText</span><span style="color: #DD0000">"SEC2"""
<br /><br /></span><span style="color: #0000BB">ReadINIStr</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"$INSTDIR\addons\downloaded\installed.ini""AMX""Version"
<br /></span><span style="color: #0000BB">StrCmp</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">"0.9.6j"</span><span style="color: #0000BB">0</span><span style="color: #007700">+</span><span style="color: #0000BB">2
<br />SectionSetText</span><span style="color: #DD0000">"SECA2"""
<br /></span><span style="color: #0000BB">FunctionEnd
<br /></span>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th October 2003 10:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">He means;<br />
      <br />
      Section "Section Name" SecID<br />
      SectionEnd<br />
      <br />
      Then use;<br />
      <br />
      SectionSetText ${SecID} ""<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">13th October 2003 03:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Alright thanx it worked perfectly</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirtbiker0</span><br />
      <span class="post-time small text-muted">18th October 2003 23:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So are u guys absolutely sure there is no way to find a list of files that are available not even using a mySQL database or somethin like that?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">19th October 2003 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        You can't scan the list of files on a server unless the server gives you a method to do it.
      </blockquote>I didn't say it's impossible, I said the server needs to supply such a method. For example, it's very much possible to let the server create an INI file and send that to you as the response. This can be done with PHP, Perl, JSP, ASP, you name it.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
