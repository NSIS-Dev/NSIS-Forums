<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Serials and txt files"><title>Serials and txt files - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Serials and txt files</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=209680">Serials and txt files</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br><span class="post-time small text-muted">6th March 2005 18:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Serials and txt files</strong><br>Hey, first of all I love the program and that is why I wanted to ask something.<br><br>I have a list of about 9999 serials in xxxx-xxxxxx-xxxx form and I would like to be able to make a page where a user can enter in a serial and a Username and if the serial is a good one and is in the .txt that is some where in the installer or in the actual code, it will save the username and serial to the registry in HKLM/Software/Digital Matrix/registration and continue with the installation, if it is a bad one and does not match a key in the .txt, I want it to say something like "you have entered a serial that is not valid" and when the click ok it will dump them back into windows.<br><br>Thx, if you need any more info just ask</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Shea</span><br><span class="post-time small text-muted">6th March 2005 23:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That would not be a very secure way of registering your product.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br><span class="post-time small text-muted">6th March 2005 23:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">it is pre regestration, the encryption algos and everything comes in after the program is first run and needs to be activated</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br><span class="post-time small text-muted">6th March 2005 23:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">either way that is how the developer wants it and I want to do it this way and have the database of serials inside of the installer since otherwise I don't get payed</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">7th March 2005 02:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well as long as you have each serial on its own line within your txt file (with no white space before or after the serial), you could use the below function written by Afrow UK. Just make a loop and keep incramenting the line nuumber till you get a match...something like this should do (I have not tested this but it should give you the idea):<br><br><br></p><pre>
<code><br>StrCpy $5 xxx ;set this var to user's entered serial<br>StrCpy $6 0<br><br>Loop:<br>IntOp $6 $6 + 1<br>StrCmp $6 10000 Invalid ;1 more than the # serials in file<br>Push $6 ;line number to read from <br>Push "$INSTDIR\file.txt" ;text file to read <br>Call ReadFileLine <br>Pop $0 ;output string (read from file.txt) <br>StrCmp $0 $5 End<br>Goto Loop<br><br>Invalid:<br>Abort "Your serial is invalid"<br><br>End:<br>MessageBox MB_OK "Your serial is good"<br><br><br>Function ReadFileLine<br>Exch $0 ;file<br>Exch<br>Exch $1 ;line number<br>Push $2<br>Push $3<br><br>  FileOpen $2 $0 r<br> StrCpy $3 0<br><br>Loop:<br> IntOp $3 $3 + 1<br>  ClearErrors<br>  FileRead $2 $0<br>  IfErrors +2<br> StrCmp $3 $1 0 loop<br>  FileClose $2<br><br>Pop $3<br>Pop $2<br>Pop $1<br>Exch $0<br>FunctionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br>
      <span class="post-time small text-muted">7th March 2005 03:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">what section should everything go in?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br>
      <span class="post-time small text-muted">7th March 2005 03:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">simply taking one of the basic example scripts and plugging the code in where it is supposed to go will work very nicely</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dragon_Z</span><br>
      <span class="post-time small text-muted">8th March 2005 19:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">we decieded to not have a cheack inside the installer, what i need now is to be able to take the username and serial that a person enters on install and save it to the registry with the time of install, from there the developer will do the activation, how do I make these kind of fields?</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>