<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Answering to &quot;Password:&quot; prompt in console"><title>Answering to "Password:" prompt in console - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Answering to "Password:" prompt in console</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235605">Answering to "Password:" prompt in console</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">viachi</span><br><span class="post-time small text-muted">16th January 2006 13:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Answering to "Password:" prompt in console</strong><br>Hello,<br>I am trying to import a dump in PostgreSQL. For that i am using:<br><br>C:\&gt;ExecWait "C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql -U postgres MyDB -f D:\dumps\db.dmp -p 5433"<br><br>Then it shows password prompt, which i am trying to handle with:<br><br>C:\&gt;FindWindow $R0 windowtitle "C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe"<br><br>And sending the pass to the console:<br><br>C:\&gt;SendMessage $R0 ${WM_COMMAND} "STR:postgres" 0<br><br>Everything is in command line, without any GUI.<br>I tried also to pass the password in first command, but it appears extra parameter, and ignores it or some of the other.<br>Thanks for any help.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th January 2006 15:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Isn't there a command-line switch for the password?<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">16th January 2006 16:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">For console apps <a href="http://nsis.sourceforge.net/ExecDos_plug-in" target="_blank">ExecDos</a> may help if your program not require terminal emulation.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">viachi</span><br><span class="post-time small text-muted">17th January 2006 11:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thnk you, Takhir,<br>it seems ExecDos can do the job, but i guess i don't do something wright, becouse the result is the same: showing a console with "Password: _" . This is my line, if you see something wrong:<br><br>ExecDos::exec /NOUNLOAD /ASYNC "/BRAND=Executing console application" /TIMEOUT=5000 "C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe" "postgres"</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">17th January 2006 11:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><pre>
<code>ExecDos::exec "/BRAND=Executing console application" /TIMEOUT=5000 "C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe" "postgres$\n"</code>
</pre><br>is better ( \n at the end of password and simple sync execution for test), but if ExecDos not hides psql.exe console window (end you can see console output "Password:") this may be a problem.. We already had problems with MySQL utilities :(</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">viachi</span><br><span class="post-time small text-muted">17th January 2006 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Nope. The same.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">viachi</span><br><span class="post-time small text-muted">17th January 2006 15:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Actually i think the problem is another - i can't handle the console window. It is ok with the Installer window, or the NSIS Compilator window, but not with console. The title is:<br><br>C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe<br><br>If I change the .exe file it still doesn't work.<br>What could be a problem...?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kike_velez</span><br><span class="post-time small text-muted">18th January 2006 12:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hello<br><br>to do that with Telnet I do this:<br><br>ExecShell "" "telnet" "-f temp.txt $CataIP" SW_HIDE<br><br>FindWindow $R0 "" "Telnet $CataIP"<br><br>;Send password<br>Push $R0<br>Push "$Password"<br>Call SendChars<br><br>;send Enter Key<br>SendMessage $R0 ${WM_CHAR} 13 0<br><br><br>with<br><br><br>; SendChars:<br>; Send a stream of WM_CHAR messages to a window to simulate user input<br>; Usage:<br>; Push &lt;window-handle&gt;<br>; Push &lt;message&gt;<br>; Call SendChars<br><br>Function SendChars<br>Exch $R0 ; Get string<br>Exch<br>Exch $R1 ; Get hwnd<br>Push $R2<br>Push $R3<br>StrCpy $R2 0 ; Char index<br>loop:<br>StrCpy $R3 $R0 1 $R2 ; Get next char<br>StrCmp $R3 "" done<br>Push $R3<br>Call CharToAscii ; Convert it to ASCII<br>Pop $R3<br>SendMessage $R1 258 $R3 0 ; Send a WM_CHAR message<br>IntOp $R2 $R2 + 1<br>Goto loop<br>done:<br>Pop $R3<br>Pop $R2<br>Pop $R1<br>Pop $R0<br>FunctionEnd<br><br>; CharToAscii:<br>; Convert a character to it's ascii code<br>; Usage:<br>; Push &lt;character&gt;<br>; Call CharToAscii<br>; Pop &lt;ascii-code&gt;<br><br>Function CharToAscii<br>Exch $R0 ; Get character<br>Push $R1<br>Push $R2<br>StrCpy $R1 255 ; ASCII code test counter<br>loop:<br>IntFmt $R2 "%c" $R1 ; Convert current test counter to it's char<br>StrCmp $R2 $R0 done ; Have we found it yet? (note - not case sensitive)<br>IntOp $R1 $R1 - 1 ; Next code<br>IntCmp $R1 0 "" "" loop<br>done:<br>Pop $R2<br>Exch<br>Pop $R0<br>Exch $R1<br>FunctionEnd<br><br><br>Best Regards</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>