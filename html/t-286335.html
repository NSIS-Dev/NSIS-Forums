<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Section text unchanged (MUI/.onInit)" />

  <title>Section text unchanged (MUI/.onInit) - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Section text unchanged (MUI/.onInit)</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286335">Section text unchanged (MUI/.onInit)</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">robbynaze</span><br />
      <span class="post-time small text-muted">5th February 2008 16:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Section text unchanged (MUI/.onInit)</strong><br />
      Hi all, i would need a little help for a problem i could not find a response despite search<br />
      <br />
      briefly, im trying to change Section title dynamically (calling function in .oninit) in MUI interface, using this syntax:<br />
      <br />
      <i>SectionSetText ${_section_X} "$(XTitle)"</i><br />
      <br />
      where XTitle is define in langstring external file as:<br />
      <i>LangString XTitle ${LANG_GERMAN} "XGerman"<br />
      LangString XTitle ${LANG_FRENCH} "XFrench"</i><br />
      <br />
      Actually i've defined all sections titles that way, and their title is changing correctly with selected language except the one that i am trying to change dynamically at runtime<br />
      <br />
      Sections are all defined that way<br />
      <i>Section "$(XTitle)" _section_X</i><br />
      <br />
      &gt; is there an order in .onInit to respect for calling my function and !insertmacro MUI_LANGDLL_DISPLAY (if concerned ?)<br />
      <br />
      In fact, the section text is always the last language in alphabetic order of language selection box (in my example, it is always XFrench, even when i choose German)<br />
      <br />
      Thx for tips !</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">5th February 2008 17:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Languages are not initialised until after .onInit. Do language strings not work in section names?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">robbynaze</span><br />
      <span class="post-time small text-muted">6th February 2008 08:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">They do work in section names for 'static' sections<br />
      To be more explicit, this an example<br />
      <br />
      In langstring.nsh i declare:<i><font color="blue"><br />
      LangString XTitle ${LANG_GERMAN} "XGerman"<br />
      LangString XTitle ${LANG_FRENCH} "XFrench"<br />
      LangString YTitle ${LANG_GERMAN} "YGerman"<br />
      LangString YTitle ${LANG_FRENCH} "YFrench"</font></i><br />
      <br />
      In main script file i have: <i><font color="blue"><br />
      ; Languages<br />
      !insertmacro MUI_LANGUAGE "German"<br />
      !insertmacro MUI_LANGUAGE "French"<br />
      <br />
      ; Language translations<br />
      !insertmacro MUI_RESERVEFILE_LANGDLL<br />
      !include ".\langstrings.nsh"<br />
      <br />
      ....<br />
      <br />
      Section "$(XTitle)" _section_X<br />
      ...<br />
      <br />
      Section "$(YTitle)" _section_Y<br />
      ...<br />
      <br />
      Function .onInit<br />
      !insertmacro MUI_LANGDLL_DISPLAY<br />
      ;SectionSetText ${_section_X} "$(XTitle) XXXXX"<br />
      FunctionEnd</font><br />
      <br />
      <br />
      --&gt; Ytitle is correctly translated, i have "YGerman" or "YFrench" when i choose German or French<br />
      <br />
      --&gt; <font color="darkred">XTitle is ALWAYS "XFrench XXXXX" whenever i choose German or French !<br /></font></i><br />
      <br />
      if any idea ...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">robbynaze</span><br />
      <span class="post-time small text-muted">6th February 2008 13:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thx 4 answer Afro, you right<br />
      <br />
      LangString:<br />
      "If you change the language in the .onInit function, note that language strings in .onInit will still use the detected language based on the user's default Windows language, because the language is initialized after .onInit."<br />
      <br />
      Need to find a solution now :P</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">6th February 2008 14:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Anywhere before you show the components page will be fine. .onGUIInit is a start (MUI_CUSTOMFUNCTION_GUIINIT for Modern UI).<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
