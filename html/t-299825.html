<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS Ant and Eclipse"><title>NSIS Ant and Eclipse - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS Ant and Eclipse</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=299825">NSIS Ant and Eclipse</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">curmudgeon69</span><br><span class="post-time small text-muted">12th November 2008 13:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS Ant and Eclipse</strong><br>I realize this may not be the proper place to post a question about the NSIS Ant Task but that project appears to be dead so I thought I would ask here to see if any one else has had this problem and/or knows how to resolve it.<br><br>I use the NSIS Ant Task to run NSIS from my ant script. Everything used to work fine in eclipse 3.3.2 but when I upgraded to eclipse 3.4.1 I had problems with the NSIS part of the ant script. Everything starts fine. I can see logging messages from NSIS where it is going through the !define statements then starts the !include statements but after the log message to !include MUI.nsh there is a line to !include System.nsh and then it just hangs. I've tried letting it run for several minutes but it never comes back.<br><br>Any help would be greatly appreciated.<br><br>Thanks,<br>Scott<br><br>Here is the output when running ant:<br></p><pre>
<code><br>     [nsis] MakeNSIS v2.40 - Copyright 1995-2008 Contributors<br>     [nsis] See the file COPYING for license details.<br>     [nsis] Credits can be found in the Users Manual.<br>     [nsis] Command line defined: "CLIENT_VERSION=5.1"<br>     [nsis] Command line defined: "CLIENT_BUILD=b"<br>     [nsis] Command line defined: "IRFANVIEW_VERSION=3.95"<br>     [nsis] Command line defined: "JRE_VERSION=1.6.0_07"<br>     [nsis] Command line defined: "OUTDIR=C:/java/eclipse/workspace/ASBS/deployable-jars/install/war"<br>     [nsis] Command line defined: "OUTFILE=asbs-install.exe"<br>     [nsis] Command line defined: "DOWNLOAD_SERVER=http://xyz:8080/asbs-install"<br>     [nsis] Command line defined: "ENVIRONMENT=xyz"<br>     [nsis] Processing config: <br>     [nsis] Processing plugin dlls: "C:\Program Files\NSIS\Plugins\*.dll"<br>     [nsis]  - AdvSplash::show<br>     [nsis]  - Banner::destroy<br>     [nsis]  - Banner::getWindow<br>     [nsis]  - Banner::show<br>     [nsis]  - BgImage::AddImage<br>     [nsis]  - BgImage::AddText<br>     [nsis]  - BgImage::Clear<br>     [nsis]  - BgImage::Destroy<br>     [nsis]  - BgImage::Redraw<br>     [nsis]  - BgImage::SetBg<br>     [nsis]  - BgImage::SetReturn<br>     [nsis]  - BgImage::Sound<br>     [nsis]  - Dialer::AttemptConnect<br>     [nsis]  - Dialer::AutodialHangup<br>     [nsis]  - Dialer::AutodialOnline<br>     [nsis]  - Dialer::AutodialUnattended<br>     [nsis]  - Dialer::GetConnectedState<br>     [nsis]  - InstallOptions::dialog<br>     [nsis]  - InstallOptions::initDialog<br>     [nsis]  - InstallOptions::show<br>     [nsis]  - LangDLL::LangDialog<br>     [nsis]  - Math::Script<br>     [nsis]  - NSISArray::ArrayCount<br>     [nsis]  - NSISArray::ArrayExists<br>     [nsis]  - NSISArray::Clear<br>     [nsis]  - NSISArray::Concat<br>     [nsis]  - NSISArray::Copy<br>     [nsis]  - NSISArray::Cut<br>     [nsis]  - NSISArray::Debug<br>     [nsis]  - NSISArray::Delete<br>     [nsis]  - NSISArray::ErrorStyle<br>     [nsis]  - NSISArray::Exists<br>     [nsis]  - NSISArray::ExistsI<br>     [nsis]  - NSISArray::FreeUnusedMem<br>     [nsis]  - NSISArray::Join<br>     [nsis]  - NSISArray::New<br>     [nsis]  - NSISArray::Pop<br>     [nsis]  - NSISArray::Push<br>     [nsis]  - NSISArray::Put<br>     [nsis]  - NSISArray::ReDim<br>     [nsis]  - NSISArray::Read<br>     [nsis]  - NSISArray::ReadToStack<br>     [nsis]  - NSISArray::Reverse<br>     [nsis]  - NSISArray::Search<br>     [nsis]  - NSISArray::SearchI<br>     [nsis]  - NSISArray::SetAutoReDim<br>     [nsis]  - NSISArray::SetSize<br>     [nsis]  - NSISArray::Shift<br>     [nsis]  - NSISArray::SizeOf<br>     [nsis]  - NSISArray::Sort<br>     [nsis]  - NSISArray::Splice<br>     [nsis]  - NSISArray::Subtract<br>     [nsis]  - NSISArray::Swap<br>     [nsis]  - NSISArray::Unload<br>     [nsis]  - NSISArray::Unshift<br>     [nsis]  - NSISArray::Write<br>     [nsis]  - NSISArray::WriteList<br>     [nsis]  - NSISArray::WriteListC<br>     [nsis]  - NSISdl::download<br>     [nsis]  - NSISdl::download_quiet<br>     [nsis]  - Splash::show<br>     [nsis]  - StartMenu::Init<br>     [nsis]  - StartMenu::Select<br>     [nsis]  - StartMenu::Show<br>     [nsis]  - System::Alloc<br>     [nsis]  - System::Call<br>     [nsis]  - System::Copy<br>     [nsis]  - System::Free<br>     [nsis]  - System::Get<br>     [nsis]  - System::Int64Op<br>     [nsis]  - System::Store<br>     [nsis]  - TypeLib::GetLibVersion<br>     [nsis]  - TypeLib::Register<br>     [nsis]  - TypeLib::UnRegister<br>     [nsis]  - UserInfo::GetAccountType<br>     [nsis]  - UserInfo::GetName<br>     [nsis]  - UserInfo::GetOriginalAccountType<br>     [nsis]  - VPatch::GetFileCRC32<br>     [nsis]  - VPatch::GetFileMD5<br>     [nsis]  - VPatch::vpatchfile<br>     [nsis]  - ZipDLL::extractall<br>     [nsis]  - ZipDLL::extractfile<br>     [nsis]  - inetc::get<br>     [nsis]  - inetc::head<br>     [nsis]  - inetc::post<br>     [nsis]  - inetc::put<br>     [nsis]  - nsDialogs::Create<br>     [nsis]  - nsDialogs::CreateControl<br>     [nsis]  - nsDialogs::CreateItem<br>     [nsis]  - nsDialogs::GetUserData<br>     [nsis]  - nsDialogs::OnBack<br>     [nsis]  - nsDialogs::OnChange<br>     [nsis]  - nsDialogs::OnClick<br>     [nsis]  - nsDialogs::OnNotify<br>     [nsis]  - nsDialogs::SelectFileDialog<br>     [nsis]  - nsDialogs::SelectFolderDialog<br>     [nsis]  - nsDialogs::SetRTL<br>     [nsis]  - nsDialogs::SetUserData<br>     [nsis]  - nsDialogs::Show<br>     [nsis]  - nsExec::Exec<br>     [nsis]  - nsExec::ExecToLog<br>     [nsis]  - nsExec::ExecToStack<br>     [nsis] !define: "MUI_INSERT_NSISCONF"=""<br>     [nsis] Changing directory to: "C:\java\eclipse\workspace\ASBS\build\install\files"<br>     [nsis] Processing script file: "C:\java\eclipse\workspace\ASBS\build\install\files\asbs.nsi"<br>     [nsis] !define: "DOWNLOAD_SERVER_NAME"="http://xyz:8080/asbs-install"<br>     [nsis] !define: "OUTDIR_NAME"="C:/java/eclipse/workspace/ASBS/deployable-jars/install/war"<br>     [nsis] !define: "OUTFILE_NAME"="asbs-install.exe"<br>     [nsis] !define: "LOGICLIB_SECTIONCMP"=""<br>     [nsis] !define: "INSTALLER_VERSION"="1.0.2.0"<br>     [nsis] !define: "APP_NAME_LONG"="Selection Board System"<br>     [nsis] !define: "APP_NAME_SHORT"="SBS"<br>     [nsis] !define: "ARCHIVE_NAME"="Archive Viewer"<br>     [nsis] !define: "COPYRIGHT_YEAR"="2008"<br>     [nsis] !define: "APP_ROOT_REG_KEY"="Software\$(^Name)\ahrc00wkg2360"<br>     [nsis] !define: "INSTALL_DIR_REG_KEY"="Install Directory"<br>     [nsis] !define: "APPDATA_DIR_REG_KEY"="Application Data Directory"<br>     [nsis] !define: "USER_TYPE_REG_KEY"="User Type"<br>     [nsis] !define: "START_MENU_FOLDER_REG_KEY"="Start Menu Folder"<br>     [nsis] !define: "CLASSPATH_REG_KEY"="Classpath"<br>     [nsis] !define: "COMPONENTS_REG_KEY"="Components"<br>     [nsis] !define: "CLIENT_COMP_REG_KEY"="Client"<br>     [nsis] !define: "IRFANVIEW_COMP_REG_KEY"="IrfanView"<br>     [nsis] !define: "JRE_COMP_REG_KEY"="JRE"<br>     [nsis] !define: "VERSION_REG_KEY"="Version"<br>     [nsis] !define: "BUILD_REG_KEY"="Build"<br>     [nsis] !define: "TEMP_DOWNLOAD_DIRECTORY"="$TEMP\asbs_install"<br>     [nsis] !define: "INSTALL_PROPS_FILENAME"="install.properties"<br>     [nsis] !define: "CLIENT_JAR_FILENAME"="lib\asbs-client.jar"<br>     [nsis] !define: "INSTALL_TYPE_FULL"="full"<br>     [nsis] !define: "INSTALL_TYPE_UPGRADE"="upgrade"<br>     [nsis] !define: "INSTALL_USER_SCRUBBER"="Scrubber"<br>     [nsis] !define: "INSTALL_USER_VOTER"="Voter"<br>     [nsis] !define: "INSTALL_USER_INI"="InstallUser.ini"<br>     [nsis] !define: "ARCHIVE_VIEWER_INI"="ArchiveViewer.ini"<br>     [nsis] !define: "INSTALL_READY_INI"="InstallReady.ini"<br>     [nsis] !define: "SETTINGS_FILENAME"="settings.ini"<br>     [nsis] !define: "CONFIG_PROPS_FILENAME"="config.properties"<br>     [nsis] !define: "RELEASE_NOTES_FILENAME"="Release Notes.doc"<br>     [nsis] !define: "APP_ICO_FILENAME"="UncleSam.ico"<br>     [nsis] !define: "APP_EXE_FILENAME"="asbs.cmd"<br>     [nsis] !define: "ARCHIVE_ICO_FILENAME"="ArchiveViewer.ico"<br>     [nsis] !define: "ARCHIVE_EXE_FILENAME"="archive.cmd"<br>     [nsis] !define: "UNINSTALLER_FILENAME"="Uninstall.exe"<br>     [nsis] SetCompressor: /FINAL /SOLID lzma<br>     [nsis] !include: "C:\Program Files\NSIS\Include\MUI.nsh"<br>     [nsis] !include: "C:\Program Files\NSIS\Contrib\Modern UI\System.nsh"<br></code>
</pre><br>
      <br>
      Here is the .nsi script:<br>
      <pre>
<code><br>; asbs.nsi<br>;<br>; This script creates an installer for the Selection Board System.<br>;<br>; Command Line Flags (specified via /D command line switch):<br>; CLIENT_VERSION    - required - The version of ASBS to be installed.<br>; CLIENT_BUILD      - required - The build of ASBS to be installed.<br>; IRFANVIEW_VERSION - required - The version of IrfanView to be installed.<br>; JRE_VERSION       - required - The version of Java Runtime Environment to be<br>;                                installed.<br>; DOWNLOAD_SERVER   - required - The name and port of the server which will host<br>;                                the files to be downloaded by this installer.<br>; ENVIRONMENT       - required - The application environment (e.g., dev,<br>;                                stl-dev, qa, prod, stl-prod).<br>; OUTDIR            - optional - The directory where the installer executable<br>;                                will be saved (e.g., C:\temp, ..\install).<br>;                                Default: same directory as this file<br>; OUTFILE           - optional - The name of the installer executable created by<br>;                                this script. The default value should always be<br>;                                used except for debugging purposes.<br>;                                Default: asbs_install.exe<br><br><br>;-------------------------------------------------------------------------------<br>;Configuration<br><br>  !ifndef CLIENT_VERSION<br>    !error "CLIENT_VERSION flag must be specified."<br>  !endif<br>  !ifndef CLIENT_BUILD<br>    !error "CLIENT_BUILD flag must be specified."<br>  !endif<br>  !ifndef IRFANVIEW_VERSION<br>    !error "IRFANVIEW_VERSION flag must be specified."<br>  !endif<br>  !ifndef JRE_VERSION<br>    !error "JRE_VERSION flag must be specified."<br>  !endif<br>  !ifndef DOWNLOAD_SERVER<br>    !error "DOWNLOAD_SERVER flag must be specified."<br>  !else<br>    !define DOWNLOAD_SERVER_NAME "${DOWNLOAD_SERVER}"<br>  !endif<br>  !ifndef ENVIRONMENT<br>    !error "ENVIRONMENT flag must be specified."<br>  !endif<br><br>  !ifdef OUTDIR<br>    !if "${OUTDIR}" == ""<br>      !define OUTDIR_NAME "."<br>    !else<br>      !define OUTDIR_NAME "${OUTDIR}"<br>    !endif<br>  !else<br>    !define OUTDIR_NAME "."<br>  !endif<br><br>  !ifdef OUTFILE<br>    !if "${OUTFILE}" == ""<br>      !define OUTFILE_NAME "asbs-install.exe"<br>    !else<br>      !define OUTFILE_NAME "${OUTFILE}"<br>    !endif<br>  !else<br>    !define OUTFILE_NAME "asbs-install.exe"<br>  !endif<br><br>  !define LOGICLIB_SECTIONCMP<br>  !define INSTALLER_VERSION "1.0.2.0"<br>  !define APP_NAME_LONG "Selection Board System"<br>  !define APP_NAME_SHORT "ASBS"<br>  !define ARCHIVE_NAME "Archive Viewer"<br>  !define /date COPYRIGHT_YEAR "%Y"<br>  !define APP_ROOT_REG_KEY "Software\$(^Name)\${ENVIRONMENT}"<br>  !define INSTALL_DIR_REG_KEY "Install Directory"<br>  !define APPDATA_DIR_REG_KEY "Application Data Directory"<br>  !define USER_TYPE_REG_KEY "User Type"<br>  !define START_MENU_FOLDER_REG_KEY "Start Menu Folder"<br>  !define CLASSPATH_REG_KEY "Classpath"<br>  !define COMPONENTS_REG_KEY "Components"<br>  !define CLIENT_COMP_REG_KEY "Client"<br>  !define IRFANVIEW_COMP_REG_KEY "IrfanView"<br>  !define JRE_COMP_REG_KEY "JRE"<br>  !define VERSION_REG_KEY "Version"<br>  !define BUILD_REG_KEY "Build"<br>  !define TEMP_DOWNLOAD_DIRECTORY "$TEMP\asbs_install"<br>  !define INSTALL_PROPS_FILENAME "install.properties"<br>  !define CLIENT_JAR_FILENAME "lib\asbs-client.jar"<br>  !define INSTALL_TYPE_FULL "full"<br>  !define INSTALL_TYPE_UPGRADE "upgrade"<br>  !define INSTALL_USER_SCRUBBER "Scrubber"<br>  !define INSTALL_USER_VOTER "Voter"<br>  !define INSTALL_USER_INI "InstallUser.ini"<br>  !define ARCHIVE_VIEWER_INI "ArchiveViewer.ini"<br>  !define INSTALL_READY_INI "InstallReady.ini"<br>  !define SETTINGS_FILENAME "settings.ini"<br>  !define CONFIG_PROPS_FILENAME "config.properties"<br>  !define RELEASE_NOTES_FILENAME "Release Notes.doc"<br>  !define APP_ICO_FILENAME "UncleSam.ico"<br>  !define APP_EXE_FILENAME "asbs.cmd"<br>  !define ARCHIVE_ICO_FILENAME "ArchiveViewer.ico"<br>  !define ARCHIVE_EXE_FILENAME "archive.cmd"<br>  !define UNINSTALLER_FILENAME "Uninstall.exe"<br><br>  !macro AddConfirmItem item list delim<br>    ${If} ${list} == ""<br>      StrCpy ${list} "${item}"<br>    ${Else}<br>      StrCpy ${list} "${list}${delim}${item}"<br>    ${EndIf}<br>  !macroend<br><br>  !macro CheckStartMenu<br>    ; check to see if shortcuts were created during a previous install<br>    ReadRegStr $R0 "HKLM" "${APP_ROOT_REG_KEY}" "${START_MENU_FOLDER_REG_KEY}"<br>    ${If} ${Errors}<br>      StrCpy $SKIP_STARTMENU ${FALSE}   ; do not skip start menu page<br>    ${Else}<br>      StrCpy $SKIP_STARTMENU ${TRUE}    ; skip start menu page<br>      StrCpy $STARTMENU_FOLDER $R0<br>    ${EndIf}<br>  !macroend<br><br>  SetCompressor /SOLID /FINAL lzma<br><br>;--------------------------------<br>;Includes<br><br>  !include MUI.nsh<br>  !include WinMessages.nsh<br>  !include Sections.nsh<br>  !include LogicLib.nsh<br>  !include StrFunc.nsh<br>  !include ZipDLL.nsh<br>  !include TextFunc.nsh<br>  !include FileFunc.nsh<br>  !include NSISArray.nsh<br>  ${StrLoc}<br>  !insertmacro ConfigRead<br>  !insertmacro Locate<br><br>;--------------------------------<br>;Variables<br><br>  Var SECTION_DESC_CLIENT<br>  Var SECTION_DESC_IRFANVIEW<br>  Var SECTION_DESC_JRE<br>  Var CLIENT_ZIP_FILENAME<br>  Var IRFANVIEW_ZIP_FILENAME<br>  Var JRE_ZIP_FILENAME<br>  Var INSTALLED_CLIENT_VER<br>  Var INSTALLED_CLIENT_BUILD<br>  Var INSTALLED_IRFANVIEW_VER<br>  Var INSTALLED_JRE_VER<br>  Var DO_INSTALL_CLIENT<br>  Var DO_INSTALL_IRFANVIEW<br>  Var DO_INSTALL_JRE<br>  Var INSTALL_TYPE<br>  Var STARTMENU_FOLDER<br>  Var SKIP_STARTMENU<br>  Var INSTALL_USER<br>  Var INSTALL_ARCHIVE_VIEWER<br>  Var CHECK_INSTALL_ARCHIVE_VIEWER<br>  Var RETRIEVED_HEADERS<br>  Var INSTALL_DIR_PREEXISTS<br>  Var APP_DATA_DIR_PREEXISTS<br>  Var APP_DATA_DIRECTORY<br>  Var LOGS_DIRECTORY<br>  Var SETTINGS_DIRECTORY<br>  ${Array} "LogsArray" 7 50<br>  ${ArrayFunc} WriteListC<br>  ${ArrayFunc} SizeOf<br>  ${ArrayFunc} Read<br><br>;--------------------------------<br>;Configuration<br>  ;Names<br>  Name "${APP_NAME_SHORT}"<br>  Caption "$(^Name) ${CLIENT_VERSION} Setup"<br>  OutFile "${OUTDIR_NAME}\${OUTFILE_NAME}"<br><br>  SetDateSave on<br>  SetDatablockOptimize on<br>  CRCCheck force<br>  SilentInstall normal<br>  BGGradient off<br>  InstallColors /windows<br>  XPStyle on<br>  AllowSkipFiles off<br>  AutoCloseWindow false<br>  ShowInstDetails hide<br>  BrandingText "Human Resources"<br><br>  ;Default installation folder<br>  InstallDir "$PROGRAMFILES\$(^Name)"<br><br>  ;Get installation folder from registry if available<br>  InstallDirRegKey "HKLM" "${APP_ROOT_REG_KEY}" "${INSTALL_DIR_REG_KEY}"<br><br>  ;Interface Settings<br>  !define MUI_CUSTOMFUNCTION_Abort myUserAbort<br>  !define MUI_ICON "setup.ico"<br>  !define MUI_UNICON "uninstall.ico"<br>  !define MUI_HEADERIMAGE<br>  !define MUI_HEADERIMAGE_BITMAP ".\UncleSamHeader.bmp"<br>  !define MUI_HEADERIMAGE_UNBITMAP "${NSISDIR}\Contrib\Graphics\Header\win.bmp"<br>  !define MUI_COMPONENTSPAGE_CHECKBITMAP "${NSISDIR}\Contrib\Graphics\Checks\modern.bmp"<br>  !define MUI_COMPONENTSPAGE_SMALLDESC<br>  !define MUI_UNWELCOMEFINISHPAGE_BITMAP "${NSISDIR}\Contrib\Graphics\Wizard\win.bmp"<br>  !define MUI_ABORTWARNING<br><br>;--------------------------------<br>;Pages<br><br>  !define MUI_WELCOMEPAGE_TITLE "Welcome to the $(^Name) ${CLIENT_VERSION} Setup Wizard"<br>  !define MUI_WELCOMEPAGE_TEXT "This wizard will guide you through the installation of $(^Name) (${APP_NAME_LONG}) ${CLIENT_VERSION}.\r\n\r\n$_CLICK"<br>  !define MUI_COMPONENTSPAGE_TEXT_TOP "The following components will be installed for $(^Name). $_CLICK"<br>  !define MUI_COMPONENTSPAGE_TEXT_COMPLIST "Components to be installed:"<br>  !define MUI_FINISHPAGE_TITLE "$(^Name) ${CLIENT_VERSION} Setup Complete"<br>  !define MUI_FINISHPAGE_TEXT "${APP_NAME_LONG} ${CLIENT_VERSION} has been installed successfully.\r\n\r\n$_CLICK"<br>  !define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\${RELEASE_NOTES_FILENAME}"<br>  !define MUI_FINISHPAGE_SHOWREADME_TEXT "Show Release Notes"<br>  !define MUI_FINISHPAGE_RUN_FUNCTION FinishPageRun<br>  !define MUI_FINISHPAGE_RUN<br><br>  !define MUI_PAGE_CUSTOMFUNCTION_PRE PreWelcomePage<br>  !define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveWelcomePage<br>  !insertmacro MUI_PAGE_WELCOME<br>  Page custom CreateInstallTypePage LeaveInstallTypePage<br>  !define MUI_PAGE_CUSTOMFUNCTION_PRE PreComponentsPage<br>  !define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowComponentsPage<br>  !insertmacro MUI_PAGE_COMPONENTS<br>  !define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowDirectoryPage<br>  !define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveDirectoryPage<br>  DirText "" "" "" "Select the folder in which to install $(^Name) (note: you must have rights to the selected folder):"<br>  !insertmacro MUI_PAGE_DIRECTORY<br>  Page custom CreateArchiveViewerPage LeaveArchiveViewerPage<br>  !define MUI_STARTMENUPAGE_DEFAULTFOLDER "${APP_NAME_LONG}"<br>  !define MUI_STARTMENUPAGE_REGISTRY_ROOT "HKLM" <br>  !define MUI_STARTMENUPAGE_REGISTRY_KEY "${APP_ROOT_REG_KEY}" <br>  !define MUI_STARTMENUPAGE_REGISTRY_VALUENAME "${START_MENU_FOLDER_REG_KEY}"<br>  !define MUI_PAGE_CUSTOMFUNCTION_PRE PreStartMenuPage<br>  !insertmacro MUI_PAGE_STARTMENU Application $STARTMENU_FOLDER<br>  Page custom CreateInstallReadyPage<br>  !insertmacro MUI_PAGE_INSTFILES<br>  !define MUI_FINISHPAGE_NOAUTOCLOSE<br>  !define MUI_PAGE_CUSTOMFUNCTION_PRE PreFinishPage<br>  !define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowFinishPage<br>  !define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveFinishPage<br>  !insertmacro MUI_PAGE_FINISH<br><br>  !insertmacro MUI_UNPAGE_WELCOME<br>  !insertmacro MUI_UNPAGE_CONFIRM<br>  !insertmacro MUI_UNPAGE_INSTFILES<br>  !define MUI_UNFINISHPAGE_NOAUTOCLOSE<br>  !define MUI_PAGE_CUSTOMFUNCTION_PRE un.PreFinishPage<br>  !insertmacro MUI_UNPAGE_FINISH<br>  <br>;--------------------------------<br>;Languages<br> <br>  !insertmacro MUI_LANGUAGE "English"<br><br>;--------------------------------<br>;Version Information<br><br>  VIProductVersion "${INSTALLER_VERSION}"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "ProductName" "${APP_NAME_SHORT}"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "Comments" "Install ${APP_NAME_LONG}"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "CompanyName" "Human Resources"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "LegalCopyright" "Â© ${COPYRIGHT_YEAR} XYZ"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "OriginalFilename" "${OUTFILE_NAME}"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "FileDescription" "${APP_NAME_SHORT} Installer"<br>  VIAddVersionKey /LANG=${LANG_ENGLISH} "FileVersion" "${CLIENT_VERSION}${CLIENT_BUILD}"<br><br>;--------------------------------<br>;Installer Sections<br><br>Section "-Initialization"<br>  ${If} ${FileExists} $APP_DATA_DIRECTORY<br>    StrCpy $APP_DATA_DIR_PREEXISTS ${TRUE}<br>  ${Else}<br>    StrCpy $APP_DATA_DIR_PREEXISTS ${FALSE}<br>    CreateDirectory $APP_DATA_DIRECTORY ; create the application data folder<br>  ${EndIf}<br>  ${Unless} ${FileExists} $LOGS_DIRECTORY<br>    CreateDirectory $LOGS_DIRECTORY<br>  ${EndUnless}<br>  ${Unless} ${FileExists} $SETTINGS_DIRECTORY<br>    CreateDirectory $SETTINGS_DIRECTORY<br>  ${EndUnless}<br><br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>    ClearErrors<br>    ${If} ${FileExists} $INSTDIR<br>      StrCpy $INSTALL_DIR_PREEXISTS ${TRUE}<br>    ${Else}<br>      StrCpy $INSTALL_DIR_PREEXISTS ${FALSE}<br>      CreateDirectory $INSTDIR ; create the folder where ASBS will be installed<br>    ${EndIf}<br>    ${If} ${Errors}<br>      MessageBox MB_OK|MB_ICONEXCLAMATION \<br>        "Could not create installation directory. Verify you have the proper permissions on your PC.$\r$\nInstallation will be aborted." \<br>        /SD IDOK<br>      Call AbortInstall<br>    ${EndIf}<br>  ${EndIf}<br>SectionEnd<br><br>SectionGroup /e "${APP_NAME_LONG}" SecASBS<br>  Section "$(^Name) Client Software" SecClient<br>    SectionIn RO<br><br>    ${If} $DO_INSTALL_CLIENT == ${TRUE}<br>      inetc::get /TIMEOUT 30000 \<br>        "${DOWNLOAD_SERVER_NAME}/files/$CLIENT_ZIP_FILENAME" \<br>        "${TEMP_DOWNLOAD_DIRECTORY}\$CLIENT_ZIP_FILENAME"<br>      Pop $0<br>      ${If} $0 != "OK"<br>        MessageBox MB_OK|MB_ICONEXCLAMATION \<br>          "Unable to download client files from server '${DOWNLOAD_SERVER_NAME}'.$\r$\nInstallation will be aborted.$\r$\n$\r$\nError: $0" \<br>          /SD IDOK<br>        Call AbortInstall<br>      ${EndIf}<br>      SetDetailsPrint both<br>      DetailPrint "Client download complete"<br>      SetDetailsPrint listonly<br>      ClearErrors<br>      !insertmacro ZIPDLL_EXTRACT "${TEMP_DOWNLOAD_DIRECTORY}\$CLIENT_ZIP_FILENAME" "$INSTDIR" "&lt;ALL&gt;"<br>      ${If} ${Errors}<br>        MessageBox MB_OK|MB_ICONEXCLAMATION \<br>          "Error occurred extracting $CLIENT_ZIP_FILENAME.$\r$\nInstallation will be aborted." \<br>          /SD IDOK<br>        Abort<br>      ${EndIf}<br>      ${If} $INSTALL_ARCHIVE_VIEWER == ${FALSE}<br>        Delete "$INSTDIR\${ARCHIVE_EXE_FILENAME}"<br>        Delete "$INSTDIR\${ARCHIVE_ICO_FILENAME}"<br>      ${EndIf}<br>      ${If} $INSTALL_USER == ${INSTALL_USER_SCRUBBER}<br>        Delete "$INSTDIR\lib\${CONFIG_PROPS_FILENAME}"<br>        Rename /REBOOTOK "$INSTDIR\lib\scrubber_${CONFIG_PROPS_FILENAME}" "$INSTDIR\lib\${CONFIG_PROPS_FILENAME}"<br>        Delete /REBOOTOK "$INSTDIR\lib\voter_${CONFIG_PROPS_FILENAME}"<br>      ${ElseIf} $INSTALL_USER == ${INSTALL_USER_VOTER}<br>        Delete "$INSTDIR\lib\${CONFIG_PROPS_FILENAME}"<br>        Rename /REBOOTOK "$INSTDIR\lib\voter_${CONFIG_PROPS_FILENAME}" "$INSTDIR\lib\${CONFIG_PROPS_FILENAME}"<br>        Delete /REBOOTOK "$INSTDIR\lib\scrubber_${CONFIG_PROPS_FILENAME}"<br>      ${EndIf}<br>      SetDetailsPrint both<br>      DetailPrint "Client installation complete"<br>      SetDetailsPrint listonly<br>    ${EndIf}<br>  SectionEnd<br><br>  Section "IrfanView Software" SecIrfanView<br>    SectionIn RO<br><br>    ${If} $DO_INSTALL_IRFANVIEW == ${TRUE}<br>      inetc::get /TIMEOUT 30000 \<br>        "${DOWNLOAD_SERVER_NAME}/files/$IRFANVIEW_ZIP_FILENAME" \<br>        "${TEMP_DOWNLOAD_DIRECTORY}\$IRFANVIEW_ZIP_FILENAME"<br>      Pop $0<br>      ${If} $0 != "OK"<br>        MessageBox MB_OK|MB_ICONEXCLAMATION \<br>          "Unable to download IrfanView files from server '${DOWNLOAD_SERVER_NAME}'.$\r$\nInstallation will be aborted.$\r$\n$\r$\nError: $0" \<br>          /SD IDOK<br>        Call AbortInstall<br>      ${EndIf}<br>      SetDetailsPrint both<br>      DetailPrint "IrfanView download complete"<br>      SetDetailsPrint listonly<br>      ClearErrors<br>      !insertmacro ZIPDLL_EXTRACT "${TEMP_DOWNLOAD_DIRECTORY}\$IRFANVIEW_ZIP_FILENAME" "$INSTDIR" "&lt;ALL&gt;"<br>      ${If} ${Errors}<br>        MessageBox MB_OK|MB_ICONEXCLAMATION \<br>          "Error occurred extracting $IRFANVIEW_ZIP_FILENAME.$\r$\nInstallation will be aborted." \<br>          /SD IDOK<br>        Abort<br>      ${EndIf}<br>      SetDetailsPrint both<br>      DetailPrint "IrfanView installation complete"<br>      SetDetailsPrint listonly<br>    ${EndIf}<br>  SectionEnd<br>SectionGroupEnd<br><br>Section "Java Runtime Environment" SecJRE<br>  SectionIn RO<br><br>  ${If} $DO_INSTALL_JRE == ${TRUE}<br>    SetDetailsPrint both<br>    DetailPrint "Removing previous JRE"<br>    SetDetailsPrint listonly<br>    RMDir /r $INSTDIR/jre<br>    ClearErrors<br>    SetDetailsPrint both<br>    DetailPrint "Downloading JRE"<br>    SetDetailsPrint listonly<br>    inetc::get /TIMEOUT 30000 \<br>      "${DOWNLOAD_SERVER_NAME}/files/$JRE_ZIP_FILENAME" \<br>      "${TEMP_DOWNLOAD_DIRECTORY}\$JRE_ZIP_FILENAME"<br>    Pop $0<br>    ${If} $0 != "OK"<br>      MessageBox MB_OK|MB_ICONEXCLAMATION \<br>        "Unable to download Java Runtime Environment files from server '${DOWNLOAD_SERVER_NAME}'.$\r$\nInstallation will be aborted.$\r$\n$\r$\nError: $0" \<br>        /SD IDOK<br>      Call AbortInstall<br>    ${EndIf}<br>    SetDetailsPrint both<br>    DetailPrint "JRE download complete"<br>    SetDetailsPrint listonly<br>    ClearErrors<br>    !insertmacro ZIPDLL_EXTRACT "${TEMP_DOWNLOAD_DIRECTORY}\$JRE_ZIP_FILENAME" "$INSTDIR" "&lt;ALL&gt;"<br>    ${If} ${Errors}<br>      MessageBox MB_OK|MB_ICONEXCLAMATION \<br>        "Error occurred extracting $JRE_ZIP_FILENAME.$\r$\nInstallation will be aborted." \<br>        /SD IDOK<br>      Abort<br>    ${EndIf}<br>    SetDetailsPrint both<br>    DetailPrint "JRE installation complete"<br>    SetDetailsPrint listonly<br>  ${EndIf}<br>SectionEnd<br><br>Section "-Finalization"<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_UPGRADE}"<br>    SetDetailsPrint textonly<br>    DetailPrint "Removing old files..."<br>    SetDetailsPrint listonly<br>    Delete /REBOOTOK $APP_DATA_DIRECTORY\.keystore<br>    Delete /REBOOTOK $INSTDIR\ASBS_RELEASE_NOTES.RTF<br>    Delete /REBOOTOK $INSTDIR\lib\commons-collections-3.2.jar<br>    Delete /REBOOTOK $INSTDIR\lib\commons-io-1.1.jar<br>    Delete /REBOOTOK $INSTDIR\lib\commons-lang-2.1.jar<br>    Delete /REBOOTOK $INSTDIR\lib\l2fprod-common-directorychooser.jar<br>    Delete /REBOOTOK $INSTDIR\lib\jcalendar.jar<br>    Delete /REBOOTOK $INSTDIR\lib\jcommon-1.0.0.jar<br>    Delete /REBOOTOK $INSTDIR\lib\jcommon-1.0.10.jar<br>    Delete /REBOOTOK $INSTDIR\lib\jfreechart-1.0.0.jar<br>    Delete /REBOOTOK $INSTDIR\lib\jfreechart-1.0.6.jar<br>    Delete /REBOOTOK $INSTDIR\lib\ojdbc14[10.2.0.3].jar<br>    Delete /REBOOTOK $INSTDIR\lib\ojdbc14_10g[10.1.0.5.0].jar<br>    Delete /REBOOTOK $INSTDIR\lib\oracle-thin[10g-1.4].jar<br>    Delete /REBOOTOK $INSTDIR\lib\swinglabs.jar<br>  ${EndIf}<br><br>  SetDetailsPrint textonly<br>  DetailPrint "Updating registry..."<br>  SetDetailsPrint listonly<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>    ; write general application values<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}" "${INSTALL_DIR_REG_KEY}" "$INSTDIR"<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}" "${APPDATA_DIR_REG_KEY}" "$APP_DATA_DIRECTORY"<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}" "${USER_TYPE_REG_KEY}" "$INSTALL_USER"<br>  ${EndIf}<br><br>  ; write specific component values<br>  ${If} $DO_INSTALL_CLIENT == ${TRUE}<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${CLIENT_COMP_REG_KEY}" "${VERSION_REG_KEY}" "${CLIENT_VERSION}"<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${CLIENT_COMP_REG_KEY}" "${BUILD_REG_KEY}" "${CLIENT_BUILD}"<br>  ${EndIf}<br>  ${If} $DO_INSTALL_IRFANVIEW == ${TRUE}<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${IRFANVIEW_COMP_REG_KEY}" "${VERSION_REG_KEY}" "${IRFANVIEW_VERSION}"<br>  ${EndIf}<br>  ${If} $DO_INSTALL_JRE == ${TRUE}<br>    WriteRegStr HKLM "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${JRE_COMP_REG_KEY}" "${VERSION_REG_KEY}" "${JRE_VERSION}"<br>  ${EndIf}<br><br>  ; write uninstall strings<br>  StrCpy $R0 "$(^Name) (${APP_NAME_LONG})"<br>  ${If} ${ENVIRONMENT} != "prod"<br>    StrCpy $R0 "$R0 - ${ENVIRONMENT}"<br>  ${EndIf}<br>  WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)-${ENVIRONMENT}" "DisplayName" "$R0"<br>  WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)-${ENVIRONMENT}" "UninstallString" '"$INSTDIR\${UNINSTALLER_FILENAME}"'<br><br>  SetDetailsPrint textonly<br>  DetailPrint "Creating uninstaller..."<br>  SetDetailsPrint listonly<br><br>  SetOutPath $INSTDIR<br>  WriteUninstaller "${UNINSTALLER_FILENAME}"<br><br>  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br>    SetDetailsPrint textonly<br>    DetailPrint "Creating application shortcuts..."<br>    SetDetailsPrint listonly<br><br>    ;Create shortcuts<br>    SetOutPath "$INSTDIR"<br>    SetShellVarContext all<br>    CreateDirectory "$SMPROGRAMS\$STARTMENU_FOLDER"<br>    CreateShortCut "$SMPROGRAMS\$STARTMENU_FOLDER\$(^Name).lnk" "$INSTDIR\${APP_EXE_FILENAME}" "" "$INSTDIR\${APP_ICO_FILENAME}" "" "" "" "${APP_NAME_LONG}"<br>    ${If} $INSTALL_ARCHIVE_VIEWER == ${TRUE}<br>      CreateShortCut "$SMPROGRAMS\$STARTMENU_FOLDER\${ARCHIVE_NAME}.lnk" "$INSTDIR\${ARCHIVE_EXE_FILENAME}" "" "$INSTDIR\${ARCHIVE_ICO_FILENAME}" "" "" "" "$(^Name) ${ARCHIVE_NAME}"<br>    ${EndIf}<br>    CreateShortCut "$SMPROGRAMS\$STARTMENU_FOLDER\Release Notes.lnk" "$INSTDIR\${RELEASE_NOTES_FILENAME}" "" "" "" "" "" "$(^Name) Release Notes"<br>    CreateShortCut "$SMPROGRAMS\$STARTMENU_FOLDER\Uninstall $(^Name).lnk" "$INSTDIR\${UNINSTALLER_FILENAME}" "" "" "" "" "" "Remove $(^Name) Application"<br>    SetShellVarContext current<br>  !insertmacro MUI_STARTMENU_WRITE_END<br><br>  ; set files to not have readonly attribute, otherwise errors will occur during upgrade<br>  ${Locate} "$INSTDIR" "/L=FD /M=*.*" "LocateCallback"<br>  ${If} ${Errors}<br>    MessageBox MB_OK|MB_ICONEXCLAMATION \<br>      "Error occurred trying to set file attributes.$\r$\nInstallation will be aborted." \<br>      /SD IDOK<br>    Abort<br>  ${EndIf}<br><br>  SetDetailsPrint textonly<br>SectionEnd<br><br>;--------------------------------<br>;Functions<br><br>Function LocateCallback<br>  ; set file to not have any attributes (readonly, etc.)<br>  SetFileAttributes $R9 FILE_ATTRIBUTE_NORMAL<br>  Push $0<br>FunctionEnd<br><br>Function CleanUp<br>  ; delete temporary directory used to store downloaded files<br>  RMDir /r /REBOOTOK ${TEMP_DOWNLOAD_DIRECTORY}<br><br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_UPGRADE}"<br>    ; delete this installer on upgrades<br>    Delete /REBOOTOK $EXEDIR\${OUTFILE_NAME}<br>  ${EndIf}<br>FunctionEnd<br><br>Function AbortCleanUp<br>  ${If} $INSTALL_TYPE == ${INSTALL_TYPE_FULL}<br>    ; a full installation was aborted so check for folders to delete<br>    ${If} $APP_DATA_DIR_PREEXISTS == "${FALSE}"<br>      ; delete application data folder<br>      RMDir /r /REBOOTOK "$APP_DATA_DIRECTORY"<br>    ${EndIf}<br>    ${If} $INSTALL_DIR_PREEXISTS == "${FALSE}"<br>      ; delete install folder<br>      RMDir /r /REBOOTOK $INSTDIR<br>    ${EndIf}<br>  ${EndIf}<br><br>  Call CleanUp<br>FunctionEnd<br><br>Function AbortInstall<br>  Call AbortCleanUp<br>  Quit<br>FunctionEnd<br><br>Function .onInstFailed<br>  Call AbortInstall<br>FunctionEnd<br><br>Function myUserAbort<br>  Call AbortCleanUp<br>FunctionEnd<br><br>Function .onInit<br>  InitPluginsDir<br>  File /oname=$PLUGINSDIR\install.bmp ".\UncleSamInstall.bmp"<br>  File /oname=$PLUGINSDIR\upgrade.bmp ".\UncleSamUpgrade.bmp"<br><br>  StrCpy $APP_DATA_DIRECTORY "$APPDATA\${APP_NAME_SHORT}\${ENVIRONMENT}"<br>  StrCpy $LOGS_DIRECTORY "$APP_DATA_DIRECTORY\logs"<br>  StrCpy $SETTINGS_DIRECTORY "$APP_DATA_DIRECTORY\settings"<br>  ${If} ${ENVIRONMENT} != "prod"<br>    StrCpy $INSTDIR "$INSTDIR-${ENVIRONMENT}"<br>  ${EndIf}<br><br>  ; create temporary directory to store downloaded files<br>  CreateDirectory ${TEMP_DOWNLOAD_DIRECTORY}<br>  StrCpy $RETRIEVED_HEADERS ${FALSE}<br><br>  StrCpy $DO_INSTALL_CLIENT ${TRUE}<br>  StrCpy $DO_INSTALL_IRFANVIEW ${TRUE}<br>  StrCpy $DO_INSTALL_JRE ${TRUE}<br>  StrCpy $INSTALL_ARCHIVE_VIEWER ${TRUE}<br>  ${If} ${FileExists} $INSTDIR\${ARCHIVE_EXE_FILENAME}<br>    StrCpy $CHECK_INSTALL_ARCHIVE_VIEWER ${FALSE}<br>  ${Else}<br>    StrCpy $CHECK_INSTALL_ARCHIVE_VIEWER ${TRUE}<br>  ${EndIf}<br><br>  ; determine if need to perform full install or upgrade<br>  ReadRegStr $R0 "HKLM" "${APP_ROOT_REG_KEY}" "${INSTALL_DIR_REG_KEY}"<br>  ${If} ${Errors}<br>    ; registry key does not exist so need to perform a full install<br>    StrCpy $INSTALL_TYPE ${INSTALL_TYPE_FULL}<br>  ${Else}<br>    ; registry key exists so need to perform an upgrade<br>    StrCpy $INSTALL_TYPE ${INSTALL_TYPE_UPGRADE}<br>    ReadRegStr $INSTALL_USER "HKLM" "${APP_ROOT_REG_KEY}" "${USER_TYPE_REG_KEY}"<br>    ReadRegStr $INSTALLED_CLIENT_VER "HKLM" "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${CLIENT_COMP_REG_KEY}" "${VERSION_REG_KEY}"<br>    ReadRegStr $INSTALLED_CLIENT_BUILD "HKLM" "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${CLIENT_COMP_REG_KEY}" "${BUILD_REG_KEY}"<br>    ReadRegStr $INSTALLED_IRFANVIEW_VER "HKLM" "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${IRFANVIEW_COMP_REG_KEY}" "${VERSION_REG_KEY}"<br>    ReadRegStr $INSTALLED_JRE_VER "HKLM" "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}\${JRE_COMP_REG_KEY}" "${VERSION_REG_KEY}"<br><br>    ${If} $INSTALLED_CLIENT_VER == "${CLIENT_VERSION}"<br>    ${AndIf} $INSTALLED_CLIENT_BUILD == "${CLIENT_BUILD}"<br>      StrCpy $DO_INSTALL_CLIENT ${FALSE}       ; client versions are equal<br>    ${EndIf}<br><br>    ${If} $INSTALLED_IRFANVIEW_VER == "${IRFANVIEW_VERSION}"<br>      StrCpy $DO_INSTALL_IRFANVIEW ${FALSE}    ; IrfanView versions are equal<br>    ${EndIf}<br><br>    ${If} $INSTALLED_JRE_VER == "${JRE_VERSION}"<br>      StrCpy $DO_INSTALL_JRE ${FALSE}          ; JRE versions are equal<br>    ${EndIf}<br><br>    !insertmacro CheckStartMenu<br>  ${EndIf}<br><br>  ; load custom pages<br>  !insertmacro MUI_INSTALLOPTIONS_EXTRACT "${INSTALL_USER_INI}"<br>  !insertmacro MUI_INSTALLOPTIONS_EXTRACT "${ARCHIVE_VIEWER_INI}"<br>  !insertmacro MUI_INSTALLOPTIONS_EXTRACT "${INSTALL_READY_INI}"<br><br>  ; disable ASBS section group<br>  !insertmacro SetSectionFlag ${SecASBS} ${SF_RO}<br><br>  StrCpy $R0 "is up-to-date and will not be upgraded"<br>  ${If} $DO_INSTALL_CLIENT == ${TRUE}<br>    StrCpy $SECTION_DESC_CLIENT "$(^Name) core files"<br>  ${Else}<br>    SectionGetText ${SecClient} $0<br>    StrCpy $SECTION_DESC_CLIENT "$0 $R0"<br>  ${EndIf}<br>  ${If} $DO_INSTALL_IRFANVIEW == ${TRUE}<br>    StrCpy $SECTION_DESC_IRFANVIEW "IrfanView application for image manipulation"<br>  ${Else}<br>    SectionGetText ${SecIrfanView} $0<br>    StrCpy $SECTION_DESC_IRFANVIEW "$0 $R0"<br>  ${EndIf}<br>  ${If} $DO_INSTALL_JRE == ${TRUE}<br>    StrCpy $SECTION_DESC_JRE "Java Runtime Environment used to launch $(^Name)"<br>  ${Else}<br>    SectionGetText ${SecJRE} $0<br>    StrCpy $SECTION_DESC_JRE "$0 $R0"<br>  ${EndIf}<br>FunctionEnd<br><br>Function .onGUIEnd<br>  Call CleanUp<br>FunctionEnd<br><br>Function PreWelcomePage<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>    ; this is a full install<br>    StrCpy $R0 "$PLUGINSDIR\install.bmp"<br>  ${ElseIf} $INSTALL_TYPE == "${INSTALL_TYPE_UPGRADE}"<br>    ; this is an upgrade<br>    StrCpy $R0 "$PLUGINSDIR\upgrade.bmp"<br>  ${EndIf}<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "Field 1" "Text" "$R0"<br><br>  ${If} $DO_INSTALL_CLIENT == ${FALSE}<br>  ${AndIf} $DO_INSTALL_IRFANVIEW == ${FALSE}<br>  ${AndIf} $DO_INSTALL_JRE == ${FALSE}<br>    ; exit install if no newer versions found<br>    !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "Field 3" "Text" \<br>      "The current installation of $(^Name) is completely up-to-date.\r\n\r\nClick $(^CancelBtn) to exit."<br>    GetDlgItem $0 $HWNDPARENT 1    ; gets the Next button<br>    EnableWindow $0 0              ; disables the Next button<br>  ${EndIf}<br>FunctionEnd<br><br>Function LeaveWelcomePage<br>  ${If} $RETRIEVED_HEADERS == ${FALSE}<br>    inetc::get /NOCANCEL /TIMEOUT 30000 \<br>      /CAPTION "$(^Name) ${CLIENT_VERSION} Setup" \<br>      /BANNER "Downloading installation properties from server.$\r$\n$\r$\nPlease Wait..." \<br>      ${DOWNLOAD_SERVER_NAME}/files/${INSTALL_PROPS_FILENAME} \<br>      ${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME} /END<br>    Pop $0<br>    ${If} $0 != "OK"<br>      MessageBox MB_OK|MB_ICONEXCLAMATION \<br>        "Unable to download installation properties file from server '${DOWNLOAD_SERVER_NAME}'.$\r$\nInstallation will be aborted.$\r$\n$\r$\nError: $0" \<br>        /SD IDOK<br>      Call AbortInstall<br>    ${EndIf}<br><br>    ${If} $DO_INSTALL_CLIENT == ${TRUE}<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "CLIENT_COMPRESSED_FILENAME=" $CLIENT_ZIP_FILENAME<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "CLIENT_SIZE_UNCOMPRESSED=" $R1<br>      ; set section size in kilobytes<br>      IntOp $R1 $R1 / 1024<br>      SectionSetSize SecClient $R1<br>    ${EndIf}<br><br>    ${If} $DO_INSTALL_IRFANVIEW == ${TRUE}<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "IRFANVIEW_COMPRESSED_FILENAME=" $IRFANVIEW_ZIP_FILENAME<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "IRFANVIEW_SIZE_UNCOMPRESSED=" $R2<br>      ; set section size in kilobytes<br>      IntOp $R2 $R2 / 1024<br>      SectionSetSize SecIrfanView $R2<br>    ${EndIf}<br><br>    ${If} $DO_INSTALL_JRE == ${TRUE}<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "JRE_COMPRESSED_FILENAME=" $JRE_ZIP_FILENAME<br>      ${ConfigRead} "${TEMP_DOWNLOAD_DIRECTORY}\${INSTALL_PROPS_FILENAME}" "JRE_SIZE_UNCOMPRESSED=" $R3<br>      ; set section size in kilobytes<br>      IntOp $R3 $R3 / 1024<br>      SectionSetSize SecJRE $R3<br>    ${EndIf}<br><br>    StrCpy $RETRIEVED_HEADERS ${TRUE}<br>  ${EndIf}<br>FunctionEnd<br><br>Function CreateInstallTypePage<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>    !insertmacro MUI_HEADER_TEXT "Choose Installation Type" "Choose the type of installation."<br>    !insertmacro MUI_INSTALLOPTIONS_WRITE "${INSTALL_USER_INI}" "Field 1" "Text" "Select the type of installation to be performed. This should be based on the type user who will be running $(^Name) once installed. Click Next to continue."<br>    !insertmacro MUI_INSTALLOPTIONS_DISPLAY "${INSTALL_USER_INI}"<br>  ${EndIf}<br>FunctionEnd<br><br>Function LeaveInstallTypePage<br>  ReadINIStr $R0 "$PLUGINSDIR\${INSTALL_USER_INI}" "Field 3" "State"  ; scrubber<br>  ReadINIStr $R1 "$PLUGINSDIR\${INSTALL_USER_INI}" "Field 4" "State"  ; voter<br>  ${If} $R0 = ${TRUE}<br>    StrCpy $INSTALL_USER ${INSTALL_USER_SCRUBBER}<br>  ${ElseIf} $R1 = ${TRUE}<br>    StrCpy $INSTALL_USER ${INSTALL_USER_VOTER}<br>  ${EndIf}<br>FunctionEnd<br><br>Function PreComponentsPage<br>  ; uncheck sections which will not be installed<br>  ${If} $DO_INSTALL_CLIENT == ${FALSE}<br>    !insertmacro UnselectSection ${SecClient}<br>  ${EndIf}<br>  ${If} $DO_INSTALL_IRFANVIEW == ${FALSE}<br>    !insertmacro UnselectSection ${SecIrfanView}<br>  ${EndIf}<br>  ${If} $DO_INSTALL_JRE == ${FALSE}<br>    !insertmacro UnselectSection ${SecJRE}<br>  ${EndIf}<br>FunctionEnd<br><br>Function ShowComponentsPage<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>    !insertmacro MUI_HEADER_TEXT "Components" "$(^Name) features to be installed."<br>  ${ElseIf} $INSTALL_TYPE == "${INSTALL_TYPE_UPGRADE}"<br>    !insertmacro MUI_HEADER_TEXT "Components" "$(^Name) features to be updated."<br>  ${EndIf}<br>FunctionEnd<br><br>Function ShowDirectoryPage<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_UPGRADE}"<br>    !insertmacro MUI_HEADER_TEXT "Install Location" "Current location of $(^Name)."<br>  ${EndIf}<br><br>  FindWindow $R1 "#32770" "" $HWNDPARENT<br>  ReadRegStr $R0 "HKLM" "${APP_ROOT_REG_KEY}" "${INSTALL_DIR_REG_KEY}"<br>  ${If} ${Errors}<br>    ; enable page so user can specify a destination folder<br>    GetDlgItem $R2 $R1 1019 # Dir box<br>    EnableWindow $R2 1<br>    GetDlgItem $R2 $R1 1001 # Browse button<br>    EnableWindow $R2 1<br>  ${Else}<br>    ; ASBS already installed so disbale page and install into same folder<br>    GetDlgItem $R2 $R1 1006 # Dir box<br>    SendMessage $R2 ${WM_SETTEXT} 1 "STR:Setup will install $(^Name) in the following folder.  $_CLICK"<br>    GetDlgItem $R2 $R1 1019 # Dir box<br>    EnableWindow $R2 0<br>    GetDlgItem $R2 $R1 1001 # Browse button<br>    EnableWindow $R2 0<br>  ${EndIf}<br>FunctionEnd<br><br>Function LeaveDirectoryPage<br>  ${If} $INSTALL_TYPE == "${INSTALL_TYPE_FULL}"<br>  ${AndIf} ${FileExists} $INSTDIR<br>    MessageBox MB_YESNO|MB_ICONQUESTION \<br>      "The selected folder already exists. Are you sure you want to install $(^Name) in$\r$\n$INSTDIR?" \<br>      /SD IDNO IDYES proceed IDNO stop<br>    stop:<br>      Abort<br>    proceed:<br>  ${EndIf}<br>FunctionEnd<br><br>Function CreateArchiveViewerPage<br>  ${If} $CHECK_INSTALL_ARCHIVE_VIEWER = ${TRUE}<br>    !insertmacro MUI_HEADER_TEXT "${ARCHIVE_NAME}" "Install ${ARCHIVE_NAME}."<br>    !insertmacro MUI_INSTALLOPTIONS_WRITE "${ARCHIVE_VIEWER_INI}" "Field 1" "Text" "Select whether or not to install the ${ARCHIVE_NAME}. Click Next to continue."<br>    !insertmacro MUI_INSTALLOPTIONS_WRITE "${ARCHIVE_VIEWER_INI}" "Field 2" "Text" "Install ${ARCHIVE_NAME}?"<br>    !insertmacro MUI_INSTALLOPTIONS_DISPLAY "${ARCHIVE_VIEWER_INI}"<br>  ${EndIf}<br>FunctionEnd<br><br>Function LeaveArchiveViewerPage<br>  ReadINIStr $R0 "$PLUGINSDIR\${ARCHIVE_VIEWER_INI}" "Field 3" "State"  ; no<br>  ReadINIStr $R1 "$PLUGINSDIR\${ARCHIVE_VIEWER_INI}" "Field 4" "State"  ; yes<br>  ${If} $R0 = ${TRUE}<br>    StrCpy $INSTALL_ARCHIVE_VIEWER ${FALSE}<br>  ${ElseIf} $R1 = ${TRUE}<br>    StrCpy $INSTALL_ARCHIVE_VIEWER ${TRUE}<br>  ${EndIf}<br>FunctionEnd<br><br>Function PreStartMenuPage<br>  ${If} $SKIP_STARTMENU = ${TRUE}<br>    Abort<br>  ${EndIf}<br><br>  ${If} ${ENVIRONMENT} != "prod"<br>    StrCpy $STARTMENU_FOLDER "${APP_NAME_LONG} (${ENVIRONMENT})"<br>  ${EndIf}<br>FunctionEnd<br><br>Function CreateInstallReadyPage<br>  !insertmacro MUI_HEADER_TEXT "Install Confirmation" "The installation wizard is ready to install."<br>  Var /GLOBAL ConfirmList<br>  Var /GLOBAL DELIMITER<br>  StrCpy $ConfirmList ""<br>  StrCpy $DELIMITER "\r\n"<br><br>  !insertmacro AddConfirmItem "User type: $INSTALL_USER" $ConfirmList $DELIMITER<br>  ${If} ${SectionIsSelected} ${SecClient}<br>    SectionGetText ${SecClient} $0<br>    !insertmacro AddConfirmItem "Install $0" $ConfirmList $DELIMITER<br>  ${EndIf}<br>  ${If} $CHECK_INSTALL_ARCHIVE_VIEWER = ${TRUE}<br>    ${Switch} $INSTALL_ARCHIVE_VIEWER<br>      ${Case} ${FALSE}<br>        !insertmacro AddConfirmItem "Do not install ${ARCHIVE_NAME}" $ConfirmList $DELIMITER<br>        ${Break}<br>      ${Case} ${TRUE}<br>        !insertmacro AddConfirmItem "Install ${ARCHIVE_NAME}" $ConfirmList $DELIMITER<br>    ${EndSwitch}<br>  ${EndIf}<br>  ${If} ${SectionIsSelected} ${SecIrfanView}<br>    SectionGetText ${SecIrfanView} $0<br>    !insertmacro AddConfirmItem "Install $0" $ConfirmList $DELIMITER<br>  ${EndIf}<br>  ${If} ${SectionIsSelected} ${SecJRE}<br>    SectionGetText ${SecJRE} $0<br>    !insertmacro AddConfirmItem "Install $0" $ConfirmList $DELIMITER<br>  ${EndIf}<br>  !insertmacro AddConfirmItem "Destination: $INSTDIR" $ConfirmList $DELIMITER<br>  ${StrLoc} $0 "$STARTMENU_FOLDER" "&gt;" "&gt;"<br>  ${If} $0 == 0<br>    !insertmacro AddConfirmItem "Do not create shortcuts" $ConfirmList $DELIMITER<br>  ${Else}<br>    !insertmacro AddConfirmItem "Start menu folder: $STARTMENU_FOLDER" $ConfirmList $DELIMITER<br>  ${EndIf}<br><br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "${INSTALL_READY_INI}" "Field 2" "State" "$ConfirmList"  <br>  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "${INSTALL_READY_INI}"<br>  Pop $R0 # HWND<br>  GetDlgItem $R1 $R0 1201<br>  SetCtlColors $R1 0x000000 0xFFFFFF<br>  !insertmacro MUI_INSTALLOPTIONS_SHOW<br>FunctionEnd<br><br>Function PreFinishPage<br>  GetDlgItem $R0 $HWNDPARENT 1<br>  SendMessage $R0 ${WM_SETTEXT} "" "STR:Finish"<br><br>  ; add checkbox to allow user to specify whether to create desktop shortcut<br>  !define CREATE_DESKTOP_SHORTCUT_FIELD "Field 7"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "Settings" "NumFields" "7"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Text" "Create Desktop Shortcut"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Type" "CheckBox"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Left" "120"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Right" "315"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Top" "130"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "Bottom" "140"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "State" "1"<br>FunctionEnd<br><br>Function ShowFinishPage<br>  GetDlgItem $MUI_TEMP1 $MUI_HWND 1206 ; ID for Create Desktop Shortcut checkbox<br>  SetCtlColors $MUI_TEMP1 "" "${MUI_BGCOLOR}"<br><br>  GetDlgItem $0 $HWNDPARENT 2    ; gets the Cancel button<br>  EnableWindow $0 0              ; disables the Cancel button<br>FunctionEnd<br><br>Function LeaveFinishPage<br>  !insertmacro MUI_INSTALLOPTIONS_READ $MUI_TEMP1 "ioSpecial.ini" "${CREATE_DESKTOP_SHORTCUT_FIELD}" "State"<br>  ${If} $MUI_TEMP1 = ${TRUE}<br>    ; create desktop shortcut(s)<br>    SetShellVarContext all<br>    StrCpy $R0 "$(^Name)"<br>    ${If} ${ENVIRONMENT} != "prod"<br>      StrCpy $R0 "$R0 (${ENVIRONMENT})"<br>    ${EndIf}<br>    CreateShortCut "$DESKTOP\$R0.lnk" "$INSTDIR\${APP_EXE_FILENAME}" "" "$INSTDIR\${APP_ICO_FILENAME}" "" "" "" "${APP_NAME_LONG}"<br>    SetShellVarContext current<br>  ${EndIf}<br>FunctionEnd<br><br>Function FinishPageRun<br>  ; check if user selected checkbox to launch application on finish<br>  !insertmacro MUI_INSTALLOPTIONS_READ $R0 "ioSpecial.ini" "Field 4" "State"<br>  ${If} $R0 = ${TRUE}<br>    Exec "${APP_EXE_FILENAME}"<br>  ${EndIf}<br>FunctionEnd<br><br>;--------------------------------<br>;Descriptions<br><br>  ;Assign language strings to sections<br>  !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecASBS} "Main application"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecClient} "$SECTION_DESC_CLIENT"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecIrfanView} "$SECTION_DESC_IRFANVIEW"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecJRE} "$SECTION_DESC_JRE"<br>  !insertmacro MUI_FUNCTION_DESCRIPTION_END<br>  !insertmacro MUI_UNFUNCTION_DESCRIPTION_BEGIN<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecASBS} "Main application"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecClient} "$SECTION_DESC_CLIENT"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecIrfanView} "$SECTION_DESC_IRFANVIEW"<br>    !insertmacro MUI_DESCRIPTION_TEXT ${SecJRE} "$SECTION_DESC_JRE"<br>  !insertmacro MUI_UNFUNCTION_DESCRIPTION_END<br><br>;--------------------------------<br>; Uninstaller<br><br>Section "Uninstall"<br>  ReadRegStr $R0 "HKLM" "${APP_ROOT_REG_KEY}" "${INSTALL_DIR_REG_KEY}"<br>  ${If} ${Errors}<br>    MessageBox MB_OK|MB_ICONEXCLAMATION \<br>      "Registry setting not found (HKLM\${APP_ROOT_REG_KEY}\${INSTALL_DIR_REG_KEY}).$\r$\nUninstallation will be aborted." \<br>      /SD IDOK<br>    Quit<br>  ${EndIf}<br>  ReadRegStr $APP_DATA_DIRECTORY "HKLM" "${APP_ROOT_REG_KEY}" "${APPDATA_DIR_REG_KEY}"<br>  ${If} ${Errors}<br>    MessageBox MB_OK|MB_ICONEXCLAMATION \<br>      "Registry setting not found (HKLM\${APP_ROOT_REG_KEY}\${APPDATA_DIR_REG_KEY}).$\r$\nUninstallation will be aborted." \<br>      /SD IDOK<br>    Quit<br>  ${EndIf}<br><br>  ; remove registry entries<br>  SetDetailsPrint both<br>  DetailPrint "Removing Registry Keys..."<br>  SetDetailsPrint listonly<br>  DeleteRegKey /ifempty HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)-${ENVIRONMENT}"<br>  DeleteRegKey HKLM "${APP_ROOT_REG_KEY}\${COMPONENTS_REG_KEY}"<br>  DeleteRegKey /ifempty HKLM "${APP_ROOT_REG_KEY}"<br><br>  ; remove shortcuts<br>  SetDetailsPrint both<br>  DetailPrint "Removing Shortcuts..."<br>  SetDetailsPrint listonly<br>  SetShellVarContext all<br>  RMDir /r /REBOOTOK "$SMPROGRAMS\$STARTMENU_FOLDER"<br>  StrCpy $R1 "$(^Name)"<br>  ${If} ${ENVIRONMENT} != "prod"<br>    StrCpy $R1 "$R1 (${ENVIRONMENT})"<br>  ${EndIf}<br>  Delete /REBOOTOK "$DESKTOP\$R1.lnk"<br>  SetShellVarContext current<br><br>  ; remove files<br>  SetDetailsPrint both<br>  DetailPrint "Removing $(^Name) Core Files..."<br>  SetDetailsPrint listonly<br>  RMDir /r /REBOOTOK "$R0\lib"<br>  Delete /REBOOTOK "$R0\*"<br>  SetDetailsPrint both<br>  DetailPrint "Removing IrfanView Application..."<br>  SetDetailsPrint listonly<br>  RMDir /r /REBOOTOK "$R0\IrfanView"<br>  SetDetailsPrint both<br>  DetailPrint "Removing Java Runtime Environment..."<br>  SetDetailsPrint listonly<br>  RMDir /r /REBOOTOK "$R0\jre"<br>  RMDir /r /REBOOTOK "$R0"<br>  SetDetailsPrint both<br>  DetailPrint "Removing Application Data..."<br>  SetDetailsPrint listonly<br>  RMDir /r /REBOOTOK "$APP_DATA_DIRECTORY"<br><br>  SetDetailsPrint textonly<br><br>SectionEnd<br><br>Function un.onInit<br>  !insertmacro CheckStartMenu<br>FunctionEnd<br><br>Function un.PreFinishPage<br>  GetDlgItem $R0 $HWNDPARENT 1<br>  SendMessage $R0 ${WM_SETTEXT} "" "STR:Finish"<br>FunctionEnd<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red27</span><br>
      <span class="post-time small text-muted">13th September 2009 18:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have exactly the same problem....<br>
      <br>
      Using NSISAnt1.2 and Eclipse 3.4, the NSIS Ant Task fires off the makensis command (and the installer is created successfully - you can see the makensis exe working under task manager, then finishing) but control never returns to Ant, so the target cannot complete.<br>
      <br>
      Any suggestions?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jairainbow</span><br>
      <span class="post-time small text-muted">2nd November 2009 05:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i am new to this nsis ant.can you please post the sample ant script to compile the nsis.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>