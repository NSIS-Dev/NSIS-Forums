<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="nsisunz plugin and file dates" />

  <title>nsisunz plugin and file dates - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">nsisunz plugin and file dates</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265917">nsisunz plugin and file dates</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sebarnolds</span><br />
      <span class="post-time small text-muted">16th February 2007 09:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>nsisunz plugin and file dates</strong><br />
      Hi.<br />
      <br />
      It seems the nsisunz plugin doesn't restore file dates when extracting them. They all contains the extraction date. Does anybody have the same problem ? Any idea ?<br />
      <br />
      Sebastien</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">16th February 2007 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><b>4.8.2.7 SetDateSave</b> This command sets the file date/time saving flag which is used by the File command to determine whether or not to save the last write date and time of the file, so that it can be restored on installation. Valid flags are 'on' and 'off'. 'on' is the default.<br />
      <br />
      It sounds like your script contains the statement <font color="red">SetDateSave off</font>. Remove that statement and see what happens.<br />
      <br />
      If the plugin is doing it, and you don't have a SetDateSave statement, maybe you need to look for options in that plugin, or change to another unzip plugin?<br />
      <br />
      Don</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sebarnolds</span><br />
      <span class="post-time small text-muted">16th February 2007 14:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi and thanks for your answer.<br />
      <br />
      In fact, my script does not include that statement and it should not have any effect to have it or not. In fact, I don't call the File command in my script but I call the following :<br />
      nsisunz::Unzip "file.zip" "c:\dest_dir"<br />
      <br />
      It extract the content of a zip file and put it in the "c:\dest_dir" directory. When it extracts the content of the zip archive it sets the date of these files to the extraction date/time and not to the original date/time.<br />
      <br />
      Sebastien</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">17th February 2007 11:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think I can help you. I tried to look at the nsisunz plugin code, but the download links are broken. I think the plugin is writing the file and not setting the stored date, but I'm only guessing.<br />
      <br />
      Don</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sebarnolds</span><br />
      <span class="post-time small text-muted">19th February 2007 08:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah, thanks anyway for looking at it. I just wanted to warn people and maybe reach the author of the plugin.<br />
      <br />
      I didn't have time to look to modify the plugin so I searched for other alternatives. In the zlib distribution, there is a small utility called "minizip" which produces 2 executables "minizip.exe" and "miniunz.exe". I use the later to extract my zip files with the correct date. nsisunz is a bit easier but it is only a matter of copying the exe to a temp place, extracting the zip and deleting the exe.<br />
      <br />
      Sebastien</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">19th February 2007 14:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        it is only a matter of copying the exe to a temp place, extracting the zip and deleting the exe
      </blockquote>The $PLUGINSDIR is a good temp directory that gets deleted (along with its contents) when the installer finishes.<br />
      <br />
      Don
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">daveb</span><br />
      <span class="post-time small text-muted">9th February 2009 13:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is this filedate issue resolvable by using either<br />
      <br />
      nsis7z<br />
      <a href="http://forums.winamp.com/showthread.php?postid=2471397" target="_blank">http://forums.winamp.com/showthread.php?postid=2471397</a><br />
      <br />
      or<br />
      <br />
      ZipDLL<br />
      <a href="http://nsis.sourceforge.net/ZipDLL" target="_blank">http://nsis.sourceforge.net/ZipDLL</a><br />
      <br />
      ?<br />
      Not sure if 7z handles regular zips and not sure if either of above preserve filedates correctly?<br />
      <br />
      Note also, filedate issue when unpacking NSIS in multiple timezones... see separate discussion at<br />
      <a href="https://sourceforge.net/tracker/index.php?func=detail&amp;aid=2581469&amp;group_id=22049&amp;atid=373085" target="_blank">https://sourceforge.net/tracker/inde...49&amp;atid=373085</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">daveb</span><br />
      <span class="post-time small text-muted">10th February 2009 02:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Further... just tried ZipDLL and it works fine, preserves dates. Just grab the dll, add to plugins folder, and call the extractall method.<br />
      <br />
      Here's a little sample download and unpack...<br />
      <br />
      InitPluginsDir<br />
      NSISdl::download ftp://ftp.somewhere.com/myfile.zip "$PLUGINSDIR\myfile.zip"<br />
      ZipDLL::extractall "$PLUGINSDIR\myfile.zip" "$INSTDIR"<br />
      <br />
      If myfile.zip has subfolders inside the zip, they all unpack correctly to a little tree at wherever (eg above to $INSTDIR)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
