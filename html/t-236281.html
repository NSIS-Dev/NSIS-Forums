<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CopyFiles IfErrors" />

  <title>CopyFiles IfErrors - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">CopyFiles IfErrors</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236281">CopyFiles IfErrors</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nlpaufr</span><br />
      <span class="post-time small text-muted">24th January 2006 13:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CopyFiles IfErrors</strong><br />
      Hello!<br />
      <br />
      Can somebody please help me?<br />
      I'm trying to find out why my CopyFiles statement generates an error in the logging:<br />
      <br />
      CopyFiles "E:\sattmate\target\Patches\Patch_2\Backup\FILES\GLOBAL\transport_handler.txt"-&gt;"E:\sattmate\user\nlpaufr"<br />
      Call: 2164<br />
      detailprint: File E:\sattmate\user\nlpaufr\transport_handler.txt could not be installed<br />
      <br />
      My code is:<br />
      ExpandEnvStrings $MY_TEMP ${TO_FOLDER_NAME}<br />
      ClearErrors<br />
      CopyFiles /FILESONLY /SILENT $TARGET_FOLDER_PATCH\${FROM_FOLDER_NAME}\${FILE_NAME} "$MY_TEMP"<br />
      IfErrors 0 +2<br />
      !InsertMacro Logging "File $MY_TEMP\${FILE_NAME} could not be installed"<br />
      <br />
      <br />
      I've been searching the NSIS forum for help on this, but I can't seem to find a thread that explains why my IfErrors statement doesn't do what I expect.<br />
      By the way, how do I find out what the actual error is? I found a thread about kernel32.dll but I don't understand how that is supposed to work. The results I get are numbers, not texts...<br />
      <br />
      Many thanks,<br />
      <br />
      Pauline</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nlpaufr</span><br />
      <span class="post-time small text-muted">24th January 2006 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I actually found out what the problem was myself!<br />
      The !InsertMacro statement just below the IfErrors is what made it all go wrong. The jump from the Iferrors jumps into the Logging macro statements, instead of to the statements after the Logging Macro.:tinfoil:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br />
      <span class="post-time small text-muted">24th January 2006 14:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yep, u need to use absolute jumps with labels rather than relative jumps.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nlpaufr</span><br />
      <span class="post-time small text-muted">24th January 2006 14:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I changed the IfErrors statement to<br />
      <br />
      ${If} ${Errors}<br />
      !InsertMacro Logging "File $MY_TEMP\${FILE_NAME} could not be installed"<br />
      ${EndIf}</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
