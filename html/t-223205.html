<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Ask user for username and password and write to variable ?" />

  <title>Ask user for username and password and write to variable ? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Ask user for username and password and write to variable ?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223205">Ask user for username and password and write to variable ?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">0001001</span><br />
      <span class="post-time small text-muted">2nd August 2005 19:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Ask user for username and password and write to variable ?</strong><br />
      Hi,<br />
      <br />
      I need to ask the user for a username and a password and write that to two variables.<br />
      I need to do that because I need a customized shortcut to my software.<br />
      <br />
      So how can I ask the user for a username and a password and save that in a variable?<br />
      <br />
      Thanks in advance</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">0001001</span><br />
      <span class="post-time small text-muted">3rd August 2005 01:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've found out that a custom page would fit my needs, but I have some trouble making one.<br />
      <br />
      Thats my ini file I've created:<br /></p>
      <pre>
<span style="color: #007700">***91;</span><span style="color: #0000BB">Settings</span><span style="color: #007700">***93;
<br /></span><span style="color: #0000BB">NumFields</span><span style="color: #007700">=</span><span style="color: #0000BB">2
<br /><br /></span><span style="color: #007700">***91;</span><span style="color: #0000BB">Field1</span><span style="color: #007700">***93;
<br /></span><span style="color: #0000BB">Type</span><span style="color: #007700">=</span><span style="color: #0000BB">Text
<br />State</span><span style="color: #007700">=</span><span style="color: #0000BB">Text
<br />Left</span><span style="color: #007700">=</span><span style="color: #0000BB">173
<br />Right</span><span style="color: #007700">=</span><span style="color: #0000BB">296
<br />Top</span><span style="color: #007700">=</span><span style="color: #0000BB">45
<br />Bottom</span><span style="color: #007700">=</span><span style="color: #0000BB">58
<br /><br /></span><span style="color: #007700">***91;</span><span style="color: #0000BB">Field2</span><span style="color: #007700">***93;
<br /></span><span style="color: #0000BB">Type</span><span style="color: #007700">=</span><span style="color: #0000BB">Text
<br />State</span><span style="color: #007700">=</span><span style="color: #0000BB">Text
<br />Left</span><span style="color: #007700">=</span><span style="color: #0000BB">173
<br />Right</span><span style="color: #007700">=</span><span style="color: #0000BB">296
<br />Top</span><span style="color: #007700">=</span><span style="color: #0000BB">62
<br />Bottom</span><span style="color: #007700">=</span><span style="color: #0000BB">75
<br /></span>

<!-- php buffer end -->
                
                
                
</pre>
      <hr />
      <pre>
        
But I don't have any clue how to create an custom page.<br />Can someone please help me creating a custom page, which reads the user input from the two textfields.<br /><br />thanks in advance
                
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br />
      <span class="post-time small text-muted">3rd August 2005 06:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You seem to have a good start. But, I'd make Field #2 of type=Password. (and take remove the "state" statement--you probably want them blank.)<br />
      <br />
      If you don't have it yet, I'd suggest downloading <a href="http://hmne.sourceforge.net/" target="_blank">HM NIS Edit</a> . It will make creating installoptions pages much easier.<br />
      <br />
      The installoptions docs and examples included with NSIS should give you plenty of info about how to display the page and read the values.<br />
      <br />
      Joel (aka Lobo Lunar) has a DiaglogsEx plugin that might also off another option. But, it's in the form of a dialog, though, not a custom page. (Just depends on your taste.)<br />
      <br />
      It's on the wiki, which I can't get to at the moment, but maybe you can if you're curious...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">0001001</span><br />
      <span class="post-time small text-muted">3rd August 2005 08:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i will give it a try. thanks a lot</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd August 2005 12:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I wonder if it would be worth writing a plugin for this which can display different types of pages from username and password to say serial code boxes.<br />
      <br />
      Some may argue a custom page will work fine, but it has no password security (the password or serial will be stored in the INI file).<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br />
      <span class="post-time small text-muted">3rd August 2005 17:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Interesting thought...<br />
      I guess it depends on how secure you need to be. But overall, I think this sounds like an excellenet idea.<br />
      <br />
      Would it be possible for the plugin to integrate with the existing InstallOptions format? This would give the best of both worlds--the designer could still customize their page with the existing installoptions plus could keep things secure. (might require some more brainstorming....)<br />
      <br />
      edit:<br />
      Just some more food for thought:<br />
      If there was just some way to grab the input string of the password while the user was typing, then you could either save the results in a variable or write them to the INI file in an encrypted form. (The 'encryption' could be done on the fly by a function in the install. It could be something very simple like outputting the characters in hex or more advanced like rearranging the ASCII codes for each character.)<br />
      <br />
      <br />
      The InstallOptionsEx plugin I noticed has something that would almost work: There is a speical notify for text and password boxes (ONTEXTCHANGE) that is supposed to trigger an event when</p>

      <blockquote>
        when the user changes the state of the text on the control (i.e. when writing) before the change appears on screen.
      </blockquote>.<br />
      <br />
      Anyway, like I said, just some things to think about...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">0001001</span><br />
      <span class="post-time small text-muted">4th August 2005 01:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Comperio</i><br />
        <b>You seem to have a good start. But, I'd make Field #2 of type=Password. (and take remove the "state" statement--you probably want them blank.)<br />
        <br />
        If you don't have it yet, I'd suggest downloading <a href="http://hmne.sourceforge.net/" target="_blank">HM NIS Edit</a> . It will make creating installoptions pages much easier.<br />
        <br />
        The installoptions docs and examples included with NSIS should give you plenty of info about how to display the page and read the values.<br />
        <br />
        Joel (aka Lobo Lunar) has a DiaglogsEx plugin that might also off another option. But, it's in the form of a dialog, though, not a custom page. (Just depends on your taste.)<br />
        <br />
        It's on the wiki, which I can't get to at the moment, but maybe you can if you're curious...</b>
      </blockquote>I've tried and tried and tried but it just doesn't work.<br />
      I don't need a user/pwd authentification I just need two textfields were the user enters his information and that info is stored in two variables.<br />
      So DialogsEx isn't the right thing for me. I've taken a look at the examples too but I can't find anything there that would fit my needs.<br />
      Can someone please give me a hint how to create a custom page based on my ini file.<br />
      thanks in advance
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">4th August 2005 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's quite simple:<br /></p>
      <pre>
<code><br />[Settings]<br />NumFields=2<br /><br />[Field 1]<br />Type=Text<br />Left=173<br />Right=296<br />Top=45<br />Bottom=58<br /><br />[Field 2]<br />Type=Password<br />Left=173<br />Right=296<br />Top=62<br />Bottom=75<br /></code>
</pre><br />
      <br />
      You might also want to put some labels on there too.<br />
      <br />
      You need to read the values in the page's Leave function with MUI_INSTALLOPTIONS_READ. There's an InstallOptions example in the Examples\Modern UI folder.<br />
      <br />
      -Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">0001001</span><br />
      <span class="post-time small text-muted">4th August 2005 13:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've solved problem already:<br />
      <br />
      <br />
      <br />
      Here's the code I use(Taken from some examples):<br />
      <br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!</span><span style="color: #0000BB">defineTEMP1$R0</span><span style="color: #007700">;</span><span style="color: #0000BB">Tempvariable<br /></span> <span style="color: #007700">!</span><span style="color: #0000BB">defineTEMP2$R1</span><span style="color: #007700">;</span><span style="color: #0000BB">Tempvariable<br /></span> <span style="color: #007700">.<br />
      .<br />
      .<br />
      !</span><span style="color: #0000BB">insertmacroMUI_PAGE_WELCOME<br />
      <br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Thingsthatneedtobeextractedonstartup</span><span style="color: #007700">(</span><span style="color: #0000BB">keeptheselinesbeforeanyFilecommand</span><span style="color: #007700">!)<br />
      ;</span><span style="color: #0000BB">Onlyuseful</span><span style="color: #007700">for</span><span style="color: #0000BB">BZIP2compression<br /></span> <span style="color: #007700">;Use</span><span style="color: #0000BB">ReserveFile</span><span style="color: #007700">for</span><span style="color: #0000BB">yourownInstallOptionsINIfilestoo</span><span style="color: #007700">!<br />
      <br /></span> <span style="color: #0000BB">ReserveFile</span><span style="color: #DD0000">"${NSISDIR}\Plugins\InstallOptions.dll"<br /></span> <span style="color: #0000BB">ReserveFile</span><span style="color: #DD0000">"test.ini"<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">Orderofpages<br />
      PagecustomSetCustomValidateCustom</span><span style="color: #DD0000">":TestingInstallOptions"</span><span style="color: #007700">;</span><span style="color: #0000BB">Custompage</span><span style="color: #007700">.</span><span style="color: #0000BB">InstallOptionsgetscalledinSetCustom</span><span style="color: #007700">.<br />
      <br />
      <br />
      <br />
      <br />
      Function.</span><span style="color: #0000BB">onInit<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">ExtractInstallOptionsfiles<br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">$PLUGINSDIRwillautomaticallyberemovedwhentheinstallercloses<br />
      <br />
      InitPluginsDir<br />
      File</span><span style="color: #007700">/</span><span style="color: #0000BB">oname</span><span style="color: #007700">=</span><span style="color: #0000BB">$PLUGINSDIRtest</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #DD0000">"test.ini"<br />
      <br /></span> <span style="color: #0000BB">FunctionEnd<br />
      <br /></span> <span style="color: #007700">Function</span><span style="color: #0000BB">SetCustom<br />
      <br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">DisplaytheInstallOptionsdialog<br />
      <br />
      Push</span><span style="color: #007700">${</span><span style="color: #0000BB">TEMP1</span><span style="color: #007700">}<br />
      <br /></span> <span style="color: #0000BB">InstallOptions</span><span style="color: #007700">::</span><span style="color: #0000BB">dialog</span><span style="color: #DD0000">"$PLUGINSDIR\test.ini"<br /></span> <span style="color: #0000BB">Pop</span><span style="color: #007700">${</span><span style="color: #0000BB">TEMP1</span><span style="color: #007700">}<br />
      <br /></span> <span style="color: #0000BB">Pop</span><span style="color: #007700">${</span><span style="color: #0000BB">TEMP1</span><span style="color: #007700">}<br /></span> <span style="color: #0000BB">FunctionEnd<br /></span> <span style="color: #007700">.<br />
      .<br />
      .<br /></span> <span style="color: #0000BB">Section</span><span style="color: #DD0000">"Software"<br /></span> <span style="color: #007700">;</span><span style="color: #0000BB">GetInstallOptionsdialoguserinput<br />
      <br />
      ReadINIStr</span><span style="color: #007700">${</span><span style="color: #0000BB">TEMP1</span><span style="color: #007700">}</span><span style="color: #DD0000">"$PLUGINSDIR\test.ini""Field1""State"<br /></span> <span style="color: #0000BB">ReadINIStr</span><span style="color: #007700">${</span><span style="color: #0000BB">TEMP2</span><span style="color: #007700">}</span><span style="color: #DD0000">"$PLUGINSDIR\test.ini""Field2""State"<br /></span> <span style="color: #007700">.<br />
      .<br />
      .</span><br />
      <br /></span>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thomas1982</span><br />
      <span class="post-time small text-muted">22nd August 2005 15:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      I'm sorry; I am an NSIS newbie an I want to create a custom page in which the user is being asked several values, e.g. username etc.<br />
      I can generate this custom page easily, using an ini-file called customPage.ini. But at the moment I try to read out the values the user entered I fail. And since I am failing for ~4 hours now, I ask you to explain to me how I can do this. I have studied the examples at the NSIS homepage, I have read (almost) the whole forum, and I have tried to understand and reuse the code example posted above - but failed.<br />
      If somebody could explain the last example or write a few lines of code which tell me what is to be done, I would be very thankful!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Thomas1982</span><br />
      <span class="post-time small text-muted">22nd August 2005 16:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Alright, I got it. Finally *sigh*</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
