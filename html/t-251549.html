<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="License / EULA text from external file?"><title>License / EULA text from external file? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">License / EULA text from external file?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251549">License / EULA text from external file?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">MatthewHarmon</span><br><span class="post-time small text-muted">20th July 2006 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>License / EULA text from external file?</strong><br>Hi all...<br><br>Is there a way to have the license/EULA text be taken from the root of my distribution CD instead of baked right into the installer?<br><br>I'm using the modern UI, but can modify the macros if need be.<br><br>Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joel</span><br><span class="post-time small text-muted">20th July 2006 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">And why not use, in compilation time, that license file?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MatthewHarmon</span><br><span class="post-time small text-muted">20th July 2006 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Because my publisher won't let me! They want to be able to make changes to the license without needing to make a new installer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">20th July 2006 16:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=231547" target="_blank">http://forums.winamp.com/showthread....hreadid=231547</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">20th July 2006 17:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can use either one of these:<br><br><a href="http://nsis.sourceforge.net/External_License_file" target="_blank">http://nsis.sourceforge.net/External_License_file</a><br><a href="http://nsis.sourceforge.net/ExLicensePage_plug-in" target="_blank">http://nsis.sourceforge.net/ExLicensePage_plug-in</a><br><a href="http://nsis.sourceforge.net/NonObligatoricPages" target="_blank">http://nsis.sourceforge.net/NonObligatoricPages</a><br><a href="http://nsis.sourceforge.net/ExDlg_plug-in" target="_blank">http://nsis.sourceforge.net/ExDlg_plug-in</a><br><a href="http://nsis.sourceforge.net/CustomLicense_plug-in" target="_blank">http://nsis.sourceforge.net/CustomLicense_plug-in</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MatthewHarmon</span><br><span class="post-time small text-muted">20th July 2006 17:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks... I found that first method and it seems to work for me. Also seems to be the "safest".</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">20th July 2006 19:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Now I see that code may be shorter and msvcrt free :)</p><pre>
<code><br>!define FILE_SHARE_READ 1<br>!define GENERIC_READ 0x80000000<br>!define OPEN_EXISTING 3<br>!define FILE_BEGIN 0<br>!define FILE_END 2<br><br>Function addLicense<br><br>   System::Call 'kernel32::CreateFile(t "$EXEDIR\${LIC_NAME}", i ${GENERIC_READ}, i ${FILE_SHARE_READ}, i 0, i ${OPEN_EXISTING}, i 0, i 0) i .r0'<br>   IfErrors exit<br>   System::Call 'kernel32::SetFilePointer(i r0, i 0, i 0, i ${FILE_END}) i .r1'<br>   IntOp $1 $1 + 1 ; for terminating zero<br>   System::Call 'kernel32::SetFilePointer(i r0, i 0, i 0, i ${FILE_BEGIN})'<br>   System::Alloc $1<br>   Pop $2<br>   System::Call 'kernel32::ReadFile(i r0, i r2, i r1, *i .r3, i 0)'<br>   System::Call 'kernel32::CloseHandle(i r0)'<br>   FindWindow $0 "#32770" "" $HWNDPARENT<br>   GetDlgItem $0 $0 1000<br>   SendMessage $0 ${WM_SETTEXT} $0 $2<br>   System::Free $2<br>exit:<br><br>FunctionEnd</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MatthewHarmon</span><br>
      <span class="post-time small text-muted">21st July 2006 16:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So, I assume calling the 'kernel32::' routines are "safer" than calling out to the .dll. That is, calling 'kernel32' routines are guaranteed to work?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br>
      <span class="post-time small text-muted">21st July 2006 17:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No. 'system' plug-in adds .dll for module to load if extension was ommited, and this is not safety question. kernel32.dll calls should work on all systems beginnig Win95. msvcrt.dll appeared in Win95 second edition (?) or with any service pack (or any IE installed), but 100% waranty of msvcrt is beginning Win98 only.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">vbguy</span><br>
      <span class="post-time small text-muted">24th July 2006 03:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Takhir, for some reason your code bails out early (it jumps to the exit) which means there is an error when loading the text file. But when I remove the IfErrors line, the file loads fine.<br>
      <br>
      Is there some way to see what error the kernel is throwing? Just for safety reasons if nothing else.<br>
      <br>
      Thanks,<br>
      <br>
      VBGuy</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takhir</span><br>
      <span class="post-time small text-muted">24th July 2006 07:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Looks like error flag was set before function call, just add ClearErrors (Manual 4.9.4.3) as a first function line.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>