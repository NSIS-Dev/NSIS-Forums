<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="LangString and SimpChinese"><title>LangString and SimpChinese - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">LangString and SimpChinese</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=357274">LangString and SimpChinese</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Bernmeister</span><br><span class="post-time small text-muted">13th March 2013 13:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>LangString and SimpChinese</strong><br>I have a (MUI2) NSI script for an installer which pops up a MessageBox in the main install section. I have the MUI_LANGUAGE macros for English and SimpChinese and have also defined LangStrings for the message label in the MessageBox (one each for English and SimpChinese).<br><br><br>The SimpChinese LangString text is in Chinese - the actual characters are visible/readable in the NSI file (which is saved in UTF8).<br><br>When I run the installer on English Windows, all is well. When I run the installer on Chinese Windows, not so. Despite choosing Simplified Chinese in the language chooser dialog (Simplified Chinese is selected by default), the label in the MessageBox is not the Chinese text I specified in the script - it is garbled/corrupted. The OK button is in Chinese however.<br><br>If I build the same script with Unicode NSIS from <a href="http://www.scratchpaper.com" target="_blank">www.scratchpaper.com</a>, the label is in correct Chinese.<br><br>My question: Should NSIS be able to show the label correctly or am I getting the "expected" result (and my only option is to use Unicode NSIS)?<br><br><br><br>Thanks in advance,<br><br>Bernmeister.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">13th March 2013 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">With NSIS (Official ANSI) &lt;= 2.46 you should not use UTF8 source files.<br><br>The actual raw byte values in the file need to be correct so you have to change the encoding/codepage in your text editor and then input the text. If you need to support many different languages you need to be careful so your editor does not mess up the other languages, or use one .nsh per language for LangStrings.<br><br>As a final note, ANSI installers will only show the correct text if the codepage for non-unicode programs in the control panel is set correctly...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Bernmeister</span><br><span class="post-time small text-muted">14th March 2013 01:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks Anders.<br><br>I did originally try all the encoding types (in Notepad) and got the same result as UTF8.<br><br>If I understand what you're saying, I'd need to run Notepad on a computer which runs the language which I want to add...which is impractical for me (given I want to build on Linux as much as possible).<br><br>I guess I'll use scratchpaper for now and look forward to the release of NSIS 3, assuming it will have Unicode goodness...and there will be a Linux build too!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">14th March 2013 01:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">...or just use a better editor, Notepad2 etc that can save in a specific encoding.<br><br>On *nix you can probably use iconv on the command line to change from utf8 to the correct codepage.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>