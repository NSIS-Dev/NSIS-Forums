<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Feature Request" />

  <title>Feature Request - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Feature Request</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=199711">Feature Request</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Erpo</span><br />
      <span class="post-time small text-muted">20th November 2004 00:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Feature Request</strong><br />
      Hello. This is my first post on this forum and I'm requesting a feature for NSIS. I've looked around on the forum, asked in the IRC channel, and read the documentation and I haven't found a feature that does what I need.<br />
      <br />
      <br />
      This is my situation:<br />
      I have a number of little freeware utilities that I've collected over the years and that I use all the time, but it's a pain reinstalling them when I reinstall Windows or if I want to install the utilities on a friend's computer.<br />
      <br />
      I've created an installer using NSIS that will put all of them on my system with shortcuts where I want them with just a few clicks, and I'm very happy with it.<br />
      <br />
      <br />
      This is my problem:<br />
      Every so often, I'll find a new utility that I want to add to the group. This means that I have to keep my .nsi file around, along with the directory structure I use to build the installer (each utility's program files in a separate folder) so I can rebuild the installer if necessary.<br />
      <br />
      This is wasteful because it requires me to keep three copies of all of my utilities around (the ones in the directory hierarchy I use to build the installer, the installer executable itself, and the installed programs).<br />
      <br />
      I would like to see a command line switch added to installer executables that would restore the directory structure used to build the installer along with the .nsi file.<br />
      <br />
      <br />
      For example:<br />
      There's a directory called utilInstaller, and it contains several directories (UtilA, UtilB, UtilC, UtilD) along with myUtils.nsi. I build my utilities installer using the nsi file, and when it's done there's a Setup.exe in the utilInstaller directory.<br />
      <br />
      I save Setup.exe, but delete everything else. I use Setup.exe several times to install the utilities on my computer and friends' computers.<br />
      <br />
      I find a new utility called Foo2 that I want to add to the installer package. I create a new directory called Utils somewhere and copy Setup.exe into it. I run Setup.exe /EXTRACT and when it's done executing, Utils contains UtilA, UtilB, UtilC, UtilD, and myUtils.nsi. I create a new folder inside Utils, UtilE, and copy all of Foo2's files to it. I modify myUtils.nsi to have a new Section for Foo2. I compile myUtils.nsi, and get a new Setup.exe with UtilE added. I delete everything except Setup.exe.<br />
      <br />
      <br />
      Thanks for reading. :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">20th November 2004 09:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well what I'd do is include the whole bunch using<br />
      SetOutPath $INSTDIR<br />
      File /r "C:\Program Files\My Apps"<br />
      <br />
      Now, rather than having to keep copies in the My Apps folder all the time, you can just run your last NSIS installer to place them back.<br />
      When you add another program, just install/extract it to the My Apps folder, recompile your nsi script and there you go!<br />
      <br />
      If you have to create shortcuts though, that'd be another matter. You'd have to add individual code to your nsi script no matter what.<br />
      <br />
      Edit: And you should also put the CreateShortcut's in another Section so that you can choose (on Components page) whether or not you wish to create them. You won't want to create them if you are just re-creating the My Apps folder.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Erpo</span><br />
      <span class="post-time small text-muted">21st November 2004 07:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        Well what I'd do is include the whole bunch using<br />
        SetOutPath $INSTDIR<br />
        File /r "C:\Program Files\My Apps"
      </blockquote>There are a couple reasons I don't want to do that.<br />
      <br />
      The first is that some some of these programs aren't normally "installed"; you just unzip them to a folder and run. A lot of programs like this tend to create ini and other post-first-run files in whatever directory they inhabit, so repacking them would include those unnecessary, possibly machine specific files in the installer.<br />
      <br />
      The second is that it means I would have to back up my nsi file too, and I want to avoid depending on more than one file if at all possible.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">21st November 2004 12:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can include your NSIS script and the other source files in your installer but only extract them when you run the installer using something like "setup /source" (instead of the normal "setup" command).<br />
      <br />
      This idea was discussed in a thread a long time ago:<br />
      <a href="http://forums.winamp.com/showthread.php?postid=433585#post433585" target="_blank">http://forums.winamp.com/showthread....585#post433585</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Erpo</span><br />
      <span class="post-time small text-muted">23rd November 2004 09:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, pengyou! That did exactly what I needed.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
