<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Partial selection &amp; instdir autodetect"><title>Partial selection &amp; instdir autodetect - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Partial selection &amp; instdir autodetect</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129673">Partial selection &amp; instdir autodetect</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br><span class="post-time small text-muted">25th March 2003 03:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Partial selection &amp; instdir autodetect</strong><br>Bwahahahah, more newbie questions...<br>I'm working on another installer, but there's an odd "bug". When a subsection has one section disabled and readonly and another section enabled, the subsection can appear either partially enabled or fully enabled; i.e. here:<br>Subsection<br>-Off (readonly)<br>-On<br>the subsection can appear either fully enabled or partially enabled. Now, this wouldn't really be a problem, except for that I want the subsection to be disabled after the user clicks on it when it's components are enabled. (That and it looks rather odd.) My question is, what flag defines partial selection?<br><br>Also, how do I autodetect the Winamp install directory? I want to be able to detect Winamp 2.x's or, if 2.x isn't there, Winamp 3's install directory, on different Windows platforms (which, as far as I can tell, changes the location of the registry keys).<br><br>I searched the forum on this and nothing came up, so sorry if any of it's been brought up before. Attached is the</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">25th March 2003 21:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please post that bug report in SF.<br><br>You should implement the logic to $INSTDIR in .onInit using ReadRegStr, StrCmp and friends.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br><span class="post-time small text-muted">25th March 2003 22:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">umm...that's the problem...i dunno how (what keys to read etc.)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th March 2003 13:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try their uninstall key, maybe you can find some useful information there.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br><span class="post-time small text-muted">26th March 2003 19:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yes, i know, but it's location changes with the windows version, doesn't it?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">26th March 2003 19:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Nope, it's always HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall. You can also use HKCU but that's another story.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br><span class="post-time small text-muted">27th March 2003 05:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">mm...i bet i've been checking hkcu.<br>so when i read hklm\software\microsoft\windows\currentversion\uninstall\winamp\uninstallstring, do i get "blablabla\winamp\uninstallwa.exe" or just "blablabla\winamp\"?<br><br>as for the "bug", IS there any flag that defines a partial selection?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">27th March 2003 12:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You'll get the uninstaller path, possibly quoted with parameters so you should parse it.<br><br>There is no such flag, it's auto processed and as you can see it's auto processed the wrong way so a bug report is in place ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">virtlink</span><br><span class="post-time small text-muted">28th March 2003 13:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">KiCHiK: NSIS is supposed to be a Winamp Plugin installer. How do you want to do that when you don't know where Winamp is? Weird! :weird:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">YtseJam</span><br><span class="post-time small text-muted">28th March 2003 13:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">NSIS is an all-around installer, not just for Winamp plugins. Just thought I'd point that out...<br><br>When making an installer for a Winamp plugin, I suppose the author of the script will have to insert some function that will auto-search for the Winamp dir, no?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">virtlink</span><br><span class="post-time small text-muted">28th March 2003 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That's what bothers me:<br></p><blockquote><i>Originally the second line of the documentation of NSIS</i><br><b>NSIS exists largely because of the need to distribute Winamp.</b></blockquote><blockquote><i>Originally the fifth paragraph of the documentation of NSIS</i><br><b>Another thing we needed was a good way to distribute Winamp plug-ins.</b></blockquote>And now you're telling me that NSIS doesn't even know where Winamp is? That's weird, very weird for an installer that only exists because of Winamp. I know, nant, that NSIS is primairly ment to install somewhat about everything, but... you know.:blah:</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th April 2003 13:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Changes in latest CVS version:<br><br></p><blockquote>Rewrote a lot of the components tree code:<br><b>- Added SF_PSELECTED for partially selected sub-sections</b><br>- SF_EXPAND now refreshes the components tree<br><b>- Fixed problems with sub-sections with RO sections as children</b><br>- (-1) sent to .onMouseOverSection when mouse over nothing<br>- RO sections can now be in InstTypes too (default to old behavior)<br>- Optimized code</blockquote></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>