<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Test failure on debian sparc (big endian)"><title>Test failure on debian sparc (big endian) - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Test failure on debian sparc (big endian)</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236706">Test failure on debian sparc (big endian)</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">30th January 2006 06:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Test failure on debian sparc (big endian)</strong><br><a href="http://experimental.ftbfs.de/fetch.php?&amp;pkg=nsis&amp;ver=2.14-2&amp;arch=sparc&amp;stamp=1138450073&amp;file=log&amp;as=raw" target="_blank">http://experimental.ftbfs.de/fetch.p...ile=log&amp;as=raw</a></p><blockquote>g++ -o build/release/tests/endian.o -c Source/Tests/endian.cpp<br>Source/Tests/endian.cpp:36:47: warning: no newline at end of file<br>g++ -o build/release/tests/mmap.o -c Source/Tests/mmap.cpp<br>g++ -o build/release/tests/specmatch.o -c Source/Tests/specmatch.cpp<br>g++ -o build/release/tests/textrunner.o -c Source/Tests/textrunner.cpp<br>Source/Tests/textrunner.cpp:22:2: warning: no newline at end of file<br>g++ -o build/release/tests/required/dirreader.o -c Source/dirreader.cpp<br>g++ -o build/release/tests/required/growbuf.o -c Source/growbuf.cpp<br>g++ -o build/release/tests/required/mmap.o -c Source/mmap.cpp<br>g++ -o build/release/tests/test build/release/tests/endian.o build/release/tests/mmap.o build/release/tests/specmatch.o build/release/tests/textrunner.o build/release/tests/required/dirreader.o build/release/tests/required/growbuf.o build/release/tests/required/mmap.o -ldl -lcppunit<br>/build/buildd/nsis-2.14/build/release/tests/test<br>..F..<br><br>endian.cpp:31:Assertion<br>Test name: EndianTest::testFixEndian<br>equality assertion failed<br>- Expected: 2018915346<br>- Actual : 305419896<br><br>Failures !!!<br>Run: 4 Failure total: 1 Failures: 1 Errors: 0</blockquote>...<blockquote>Install file: "Source/exehead/uninst.ico" as ".test/Stubs/uninst"<br>Install file: "build/release/stub_zlib/stub_zlib.exe" as ".test/Stubs/zlib"<br>Install file: "build/release/stub_zlib_solid/stub_zlib.exe" as ".test/Stubs/zlib_solid"<br>Install file: "Source/Tests/preprocessor.nsi" as ".test/Tests/preprocessor.nsi"<br>Install file: "license.txt" as ".test/license.txt"<br>Install file: "build/release/makensis/makensis" as ".test/makensis"<br>Install file: "nsisconf.nsh" as ".test/nsisconf.nsh"<br>test_scripts(["test-scripts.log"], [".test"])<br>.test/makensis .test/Examples/FileFunc.nsi<br>Error initalizing CEXEBuild: invalid default uninstall icon<br>scons: *** [.test/Examples/FileFunc] Error 1<br>.test/makensis .test/Examples/FileFuncTest.nsi<br>Error initalizing CEXEBuild: invalid default uninstall icon<br>scons: *** [.test/Examples/FileFuncTest] Error 1<br>.test/makensis .test/Examples/Library.nsi<br>Error initalizing CEXEBuild: invalid default uninstall icon<br>scons: *** [.test/Examples/Library] Error 1</blockquote>...<br><br>The first error is caused because -D__BIG_ENDIAN__ isn't passed to the compiler when compiling the tests. I'm not sure how to share results of the existing endianness test with the sconscript that builds and runs the tests.<br><br>The second error is fairly weird, I guess it is caused by not byte-swapping results from fread in generate_uninstall_icon_data?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">31st January 2006 18:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The first can be solved by possibly adding test_env in the configuration scripts (SCons/config) and setting -D__BIG_ENDIAN__ to it, just like makensis_env.<br><br>The second is simply makensis not being endianity friendly.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">1st February 2006 06:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Committed a fix for the former problem, will try and get access to a big endian debian machine for the latter. I notice that there is a patch for partial big-endian support, any reason that isn't applied yet?<br><br><a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1156354&amp;group_id=22049&amp;atid=373087" target="_blank">http://sourceforge.net/tracker/index...49&amp;atid=373087</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">1st February 2006 12:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yep, this patch will not fix it all. I just takes a lot of work to get it working.<br><br>I could do it on my Apple, but sadly there are so may other higher priority Opensource tasks I want to solve first.<br><br>So feel free to pick it up but be prepared for a heavy adventure...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">2nd February 2006 01:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What do you have installed on your apple? Perhaps I could get user level access to it if you install mingw/scons?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">onad</span><br><span class="post-time small text-muted">2nd February 2006 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes, I do have mingw, scons, pyton installed, and many other developemnt tools, but the machine is in and off regular basis.<br><br>Better buy a secondhand sparcstation will not cost more then $50, e.g. 270 Mhz UltraSparc IIi even with 20" screen.<br><br>( Which I gladly pay for you if you will invest time getting endian problems solved and native NSIS build on Solaris, Linux, BSD based OS possible. )</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pabs</span><br><span class="post-time small text-muted">3rd February 2006 02:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hmm, shipping to Perth might cost more than the box itself.<br><br>Anyways, I would be more than happy to receive a sparc box in exchange for porting NSIS to big endian machines. I can only do it where mingw is available though - I don't want to have to go futzing around with trying to make a cross-compiler - Linux and FreeBSD have that, dunno about Solaris.<br><br>As an aside, I don't really care for Sun's attitude toward FOSS, and I'm not too enthusiastic about OpenSolaris hype and licencing, so I might just give Solaris a miss. Zealotry here I come!! :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">3rd February 2006 11:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That patch only fixes one problem in Plugins.cpp. There are many many more. The ones that don't cause a crash will create invalid installers. All of the installer structures are written as is from memory to file.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>