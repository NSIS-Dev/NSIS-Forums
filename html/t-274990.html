<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="${NSISDIR} problem" />

  <title>${NSISDIR} problem - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">${NSISDIR} problem</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274990">${NSISDIR} problem</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">27th July 2007 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>${NSISDIR} problem</strong><br />
      &nbsp; Hello,<br />
      <br />
      I have installed NSIS on D:\Program Files\NSIS but when I use ${NSISDIR} it is C:\Program Files\NSIS.<br />
      <br />
      Is ${NSISDIR} saved in the registry?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">27th July 2007 15:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you use the NSIS installer it will be set correctly. My NSISDIR is set to D:\...<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">30th July 2007 09:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://www.aemik.de/bilder/nsisbug.JPG" target="_blank">http://www.aemik.de/bilder/nsisbug.JPG</a><br />
      <br />
      Now I have installed NSIS on a new labtop (OS: XP Prof. English).<br />
      I have choosen the directory D:\Program Files\NSIS. You can see it on the picture.<br />
      <br />
      Afterwarths I have started a small program to check the ${NSISDIR} variable<br />
      <br /></p>
      <pre>
<code>
Name "NSISDIR Test"
<br />&gt;OutFile "NSISDIR Test.exe"
<br /><br />&gt;Section
<br />MessageBox MB_ICONINFORMATION</code>|MB_OK "NSIS Verzeichnis Variable: ${NSISDIR}"
<br />&gt;Sectionend 
<br />&gt;

</pre>On the pciture you can see that the NSISDIR variable is wrong.<br />
      <br />
      I had this problem on two pcs now. Please help me...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">30th July 2007 10:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You do realise ${NSISDIR} is not a variable. It's a constant. The {} denote that. Variable names do not have {}.<br />
      <br />
      ${NSISDIR} is set to the NSIS directory path on compile time. If you build your installer under C:\Programme\NSIS then NSISDIR will always be that no matter where you run the installer from. Hence why it's called a <b>constant</b>.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">30th July 2007 11:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok, it is a constant.<br />
      But that is not the main problem.<br />
      <br />
      the NSIS directory path on compile time is already wrong.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">30th July 2007 12:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What is the value stored in<br />
      HKLM "Software\NSIS" ""<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">30th July 2007 13:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">D:\Program Files\NSIS<br />
      <br />
      ${NSISDIR} = C:\Programme\NSIS</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">30th July 2007 13:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">And you definitely recompiled that installer on the same machine?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">30th July 2007 14:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes, for sure...<br />
      <br />
      my colleague told me that problem, so I have installed NSIS on my new labtop on D:\ and there was the same.<br />
      <br />
      Did you try to reproduce this failure?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">30th July 2007 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">${NSISDIR} is not taken from the registry and it's not a real constant either. It's taken from wherever you ran makensis.exe. If it runs from C:\Program Files\NSIS, it'll set ${NSISDIR} to C:\Program Files\NSIS.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">30th July 2007 16:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">My bad :)<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">31st July 2007 10:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Aha okay...<br />
      <br />
      when i compile the nsi file with C:\Program Files\NSIS\makensis.exe the ${NSISDIR} constant in my installer is always "C:\Program Files\NSIS\".<br />
      <br />
      How can I get the right NSISDIR of each PC when somebody starts the installer? Can I read the RegStr???</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">31st July 2007 12:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As Stu mentioned above the value is stored in registry,<br />
      use ReadRegStr $0 HKLM "Software\NSIS" ""</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">aemik</span><br />
      <span class="post-time small text-muted">31st July 2007 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I think I have it. Thank you very much...</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>