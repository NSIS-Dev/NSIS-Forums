<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problem compiling script with uninstall section." />

  <title>Problem compiling script with uninstall section. - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problem compiling script with uninstall section.</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143414">Problem compiling script with uninstall section.</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mhollander</span><br />
      <span class="post-time small text-muted">24th July 2003 13:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problem compiling script with uninstall section.</strong><br />
      Hi,<br />
      <br />
      I have been battling with this script for the past 2 hours and am getting nowhere fast. I have tried the documentation, checked the sample files, checked the archives and I still cannot see what I am doing wrong.<br />
      <br />
      When I compile this script I get the following error.<br />
      Processed 1 file, writing output:<br />
      Adding plug-ins initializing function... Done!<br />
      Error: resolving pre-page function "un.mui.ConfirmPre" in uninstall pages<br />
      Note: uninstall functions must begin with "un.", and install functions must not<br />
      Error - aborting creation process<br />
      <br />
      Could someone please look at it and tell me what I have done wrong.<br />
      <br />
      I know the script is huge, please help me with the uninstall issue.<br />
      :hang:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br />
      <span class="post-time small text-muted">24th July 2003 14:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Do the example scripts with uninstall functions compile on you system or is this related to the script?<br />
      <br />
      Vytautas</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mhollander</span><br />
      <span class="post-time small text-muted">24th July 2003 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It appears to be related to my scrip as the samples do work.<br />
      BTW. It is Version 2.0B4 of the NSIS software</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br />
      <span class="post-time small text-muted">24th July 2003 15:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yes I did get the same error when I tried to compile your script, I will try to figure something out although I can't promise anything, not tonight anyway.<br />
      <br />
      Vytautas<br />
      <br />
      PS. You were not joking when you said it was a <b>huge</b> script:D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mhollander</span><br />
      <span class="post-time small text-muted">24th July 2003 15:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thats what happens when one's installers do not know how to <b><font color="red">RTFM</font></b> ;) <b><font color="darkblue"><font color="red">R</font>ead <font color="red">T</font>he <font color="red">F</font>ine <font color="red">M</font>anual.</font></b><br />
      <br />
      And we poor developers have to spoon feed them.:igor:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Vytautas</span><br />
      <span class="post-time small text-muted">24th July 2003 15:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I do agree. I once had the same problem with the uninstaller, after a while I descided to leave it out since in that program it was not essencial. However now is the time to revisit and hopefully solve this problem.<br />
      <br />
      Vytautas</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mhollander</span><br />
      <span class="post-time small text-muted">24th July 2003 15:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have simplified the script and still get the same error. :hang:<br />
      <br />
      <font face="courier new"><font color="darkblue"><br />
      !include "MUI.nsh"<br />
      <br />
      ;------------------------------------<br />
      ; Add Defines Here<br />
      ;------------------------------------<br />
      <br />
      !define MUI_PRODUCT "ZXFusion"<br />
      !define MUI_VERSION "4.0"<br />
      !define MUI_ICON "COMMON\ICONS\INST.ICO"<br />
      !define MUI_UNICON "COMMON\ICONS\UNINST.ICO"<br />
      !define MUI_CHECKBITMAP "COMMON\GRAPHICS\Checks_Sajal_Nails.bmp"<br />
      !define MUI_BRANDINGTEXT "Atcom Computer Services (c) 2000-2003 "<br />
      !define MUI_UI "${NSISDIR}\Contrib\UIs\default.exe"<br />
      <br />
      <br />
      <br />
      <br />
      <br />
      !define MUI_WELCOMEPAGE<br />
      !define MUI_SPECIALBITMAP "COMMON\GRAPHICS\zxflogorot.bmp"<br />
      <br />
      !define MUI_CUSTOMPAGECOMMANDS<br />
      <br />
      !define MUI_COMPONENTSPAGE<br />
      !define MUI_COMPONENTSPAGE_NODESC<br />
      !define MUI_HEADERBITMAP "COMMON\GRAPHICS\zxflogo.BMP"<br />
      <br />
      !define MUI_DIRECTORYPAGE<br />
      <br />
      !define MUI_FINISHPAGE<br />
      !define MUI_FINISHPAGE_NOREBOOTSUPPORT<br />
      <br />
      !define MUI_CONFIRM<br />
      <br />
      !define MUI_ABORTWARNING<br />
      <br />
      <br />
      ;-------------------------------------<br />
      ; Macro Insertions Here<br />
      ;-------------------------------------<br />
      <br />
      !insertmacro MUI_LANGUAGE "English"<br />
      !insertmacro MUI_PAGE_WELCOME<br />
      !insertmacro MUI_PAGE_COMPONENTS<br />
      !insertmacro MUI_PAGE_DIRECTORY<br />
      !insertmacro MUI_PAGE_INSTFILES<br />
      <br />
      !insertmacro MUI_UNPAGE_CONFIRM<br />
      !insertmacro MUI_UNPAGE_INSTFILES<br />
      <br />
      !insertmacro MUI_PAGE_FINISH<br />
      <br />
      ;-------------------------------------<br />
      ; Config Section<br />
      ;-------------------------------------<br />
      Outfile "Test.exe"<br />
      ShowInstDetails "nevershow"<br />
      ShowUninstDetails "nevershow"<br />
      CRCCheck on<br />
      XPStyle On<br />
      <br />
      Section "Test" TEST<br />
      SetOutPath $INSTDIR<br />
      WriteUninstaller "Unwise.exe"<br />
      SectionEnd<br />
      <br />
      function .oninit<br />
      Messagebox MB_OK "Start"<br />
      StrCpy $INSTDIR "C:\@PROGRAM\ZXFUSION\INSTALL40"<br />
      functionend<br />
      <br />
      Section "Uninstall"<br />
      MessageBox MB_OK "UnInstall"<br />
      SectionEnd<br />
      <br /></font></font></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">24th July 2003 18:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The simplified script does not follow the rules given in the current MUI ReadMe.<br />
      <br />
      The latest MUI no longer uses Page "defines" such as<br />
      <br />
      !define MUI_WELCOMEPAGE<br />
      !define MUI_DIRECTORYPAGE<br />
      etc<br />
      <br />
      All you need now are the "!insertmacro" commands such as<br />
      <br />
      !insertmacro MUI_PAGE_WELCOME<br />
      !insertmacro MUI_PAGE_DIRECTORY<br />
      etc<br />
      <br />
      If you move the<br />
      <br />
      !insertmacro MUI_LANGUAGE "English"<br />
      <br />
      line further down the script, say after all of the "!insertmacro MUI_PAGE..." lines, the simplified script compiles without the error you complained about in your first post.<br />
      <br />
      If you read the MUI ReadMe you will find that it gives step-by-step instructions for creating scripts. Step 1 is the !include "MUI.nsh" command, Step 3 covers the new PAGE !insertmacro commands but it is not until Step 6 that the MUI_LANGUAGE commands are discussed.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
