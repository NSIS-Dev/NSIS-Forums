<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Multilanguage" />

  <title>Multilanguage - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Multilanguage</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=232236">Multilanguage</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">30th November 2005 11:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Multilanguage</strong><br />
      Hi,<br />
      <br />
      I want make a multilanguage installer.<br />
      I've inserted this string in the script:<br />
      !insertmacro MUI_LANGUAGE "English"<br />
      !insertmacro MUI_LANGUAGE "French"<br />
      !insertmacro MUI_LANGUAGE "German"<br />
      !insertmacro MUI_LANGUAGE "Italian"<br />
      !insertmacro MUI_LANGUAGE "Spanish"<br />
      But the Uninstaller start (automatically) in Italian.<br />
      Why?<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">glory_man</span><br />
      <span class="post-time small text-muted">30th November 2005 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is there next line in your un.onInit function<br /></p>
      <pre>
<code><br />!insertmacro MUI_UNGETLANGUAGE<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">30th November 2005 13:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is my un.onInit function:<br />
      <br />
      Function un.onInit<br />
      !insertmacro MUI_UNGETLANGUAGE<br />
      MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 "Sei sicuro di voler completamente rimuovere $(^Name) e tutti i suoi componenti?" IDYES +2<br />
      Abort<br />
      FunctionEnd<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">glory_man</span><br />
      <span class="post-time small text-muted">30th November 2005 14:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Uninstaller start in Italian even if another language was selected during install?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">30th November 2005 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry,<br />
      <br />
      but if I select "english" during the installation..the uninstallation start in "italian".<br />
      Why?<br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">glory_man</span><br />
      <span class="post-time small text-muted">30th November 2005 14:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What information store in registry under your</p>
      <pre>
<code>"MUI_LANGDLL_REGISTRY_ROOT\MUI_LANGDLL_REGISTRY_KEY\MUI_LANGDLL_REGISTRY_VALUENAME"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">30th November 2005 15:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br />
      <br />
      in which registry?<br />
      <br />
      In Windows Registry, I don't find any MUI_LANGDLL_REGISTRY_ROOT\...<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">30th November 2005 16:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm found the registry..<br />
      the code are:<br />
      ITA -&gt; 1040<br />
      ENG -&gt; 1033<br />
      FRA -&gt; 1036<br />
      DEU -&gt; 1031<br />
      ESP -&gt; 1034<br />
      <br />
      thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">glory_man</span><br />
      <span class="post-time small text-muted">30th November 2005 16:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">From MUI doumentation:<br /></p>

      <blockquote>
        To remember to users preference, you can define a registry key.<br />
        Note: These defines should be set before inserting the installation page macro.<br />
        <br />
        MUI_LANGDLL_REGISTRY_ROOT root<br />
        MUI_LANGDLL_REGISTRY_KEY key<br />
        MUI_LANGDLL_REGISTRY_VALUENAME value_name<br />
        The registry key to store the language. The users preference will be remembered. You can also use it for the uninstaller to display the right language. Don't forget to remove this key in the uninstaller.
      </blockquote>You need to define this values to store language selection in windows registry.<br />
      <br />
      ADD:<br />
      So, instead MUI_LANGDLL_REGISTRY_ROOT, etc. use it's values you define.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">lorenzop</span><br />
      <span class="post-time small text-muted">2nd December 2005 16:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks,<br />
      <br />
      but now I've another problem.<br />
      I need to customize that MessageBox (see the code):<br />
      LangString msgRimozione1 ${LANG_ITALIAN} "Sei sicuro di voler completamente rimuovere"<br />
      LangString msgRimozione1 ${LANG_ENGLISH} "Are you sure of wanting completely to remove"<br />
      LangString msgRimozione1 ${LANG_FRENCH} "Êtes vous sûr de vouloir complètement enlever"<br />
      LangString msgRimozione1 ${LANG_GERMAN} "Sind Sie sicher von entfernen vollständig wünschen"<br />
      LangString msgRimozione1 ${LANG_SPANISH} "¿Usted seguro desear completo para quitar"<br />
      <br />
      LangString msgRimozione2 ${LANG_ITALIAN} "e tutti i suoi componenti?"<br />
      LangString msgRimozione2 ${LANG_ENGLISH} "and all its members?"<br />
      LangString msgRimozione2 ${LANG_FRENCH} "et tous ses membres?"<br />
      LangString msgRimozione2 ${LANG_GERMAN} "und alle seine Mitglieder?"<br />
      LangString msgRimozione2 ${LANG_SPANISH} "y todos sus miembros?"<br />
      <br />
      Function un.onInit<br />
      !insertmacro MUI_UNGETLANGUAGE<br />
      MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 "$(msgRimozione1) $(^Name) $(msgRimozione2)" IDYES +2;<br />
      Abort<br />
      FunctionEnd<br />
      <br />
      But when start the uninstaller, the messege doesn't switch with the language.<br />
      <br />
      Thanks,<br />
      Lorenzo.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">glory_man</span><br />
      <span class="post-time small text-muted">5th December 2005 13:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I know this problem. <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=147907&amp;highlight=onInit+messagebox" target="_blank">Here</a> and <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=109913&amp;highlight=messagebox+onInit" target="_blank">here</a> discussion.<br />
      You need to use $LANGUAGE variable in un.onInit function and define language string here.<br /></p>
      <pre>
<code><br />!include "LogicLib.nsh"<br />...<br />var mess<br />Function un.onInit<br />...<br />${Switch} $LANGUAGE<br />${Case} ${LANG_ENGLISH}<br />   StrCpy $mess "English message"<br />${Break}<br />${Case} ${LANG_RUSSIAN}<br />   StrCpy $mess "Russian message"<br />${Break}<br />${Case} ${LANG_ITALIAN}<br />   StrCpy $mess "Italian message"<br />${Break}<br />${EndSwitch}<br /><br />MessageBox MB_OK "$mess"<br />FunctionEnd<br /></code>
</pre>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
