<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="NSIS in the news..." />

  <title>NSIS in the news... - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">NSIS in the news...</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283231">NSIS in the news...</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fredtheman</span><br />
      <span class="post-time small text-muted">15th December 2007 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>NSIS in the news...</strong><br />
      Read this on /.<br />
      <br /></p>

      <blockquote>
        Shortly after releasing EVE Online: Trinity at 22:04 GMT on Wednesday, 5 December, we started receiving reports that the Classic to Premium graphics content upgrade was causing problems to players by deleting the file C:\boot.ini, which is a Windows system startup file.[...]<br />
        <br />
        It might appear from the installer log that we made the mistake of explicitly deleting \boot.ini instead of just boot.ini. The former would delete the file from the root of the current drive whereas the latter would only delete from the current working directory. It is not quite so; the mistake was to assume that the file would be deleted from the current working directory without giving the full path. In fact, this is the code in the installer script that caused the problems:<br />
        <br />
        Section "EVE-ONLINE"<br />
        SetOutPath "$INSTDIR"<br />
        <br />
        Delete "boot.ini"<br />
        Delete "manifest.dat"<br />
        <br />
        File "boot.ini"<br />
        File "manifest.dat"<br />
        File "resDX9*.stuff"<br />
        SectionEnd<br />
        <br />
        The assumption was that by setting SetOutPath "$INSTDIR" then all commands that followed would use that working directory.<br />
        <br />
        The File commands use the output path that has been set. The documentation for the Delete function says the file _should_ be specified with a full path but in fact it _must_ be specified with a full path, like so:<br />
        <br />
        Delete "$INSTDIR\boot.ini"<br />
        Delete "$INSTDIR\manifest.dat"<br />
        <br />
        Otherwise, it is assumed that the file should be deleted from the root.
      </blockquote>Oops :)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th December 2007 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That code of theirs was actually supposed to work. I've fixed the bug behind this that caused it to delete boot.ini from the root instead of the working directory.<br />
      <br />
      <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1851273&amp;group_id=22049&amp;atid=373085" target="_blank">http://sourceforge.net/tracker/index...49&amp;atid=373085</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th December 2007 16:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">And for the sake of a complete discussion, CCP's blog post:<br />
      <br />
      <a href="http://myeve.eve-online.com/devblog.asp?a=blog&amp;bid=526" target="_blank">http://myeve.eve-online.com/devblog.asp?a=blog&amp;bid=526</a><br />
      <br />
      EVE user comments:<br />
      <br />
      <a href="http://myeve.eve-online.com/ingameboard.asp?a=topic&amp;threadID=658000" target="_blank">http://myeve.eve-online.com/ingamebo...hreadID=658000</a><br />
      <br />
      Slashdot article:<br />
      <br />
      <a href="http://it.slashdot.org/it/07/12/15/0256255.shtml" target="_blank">http://it.slashdot.org/it/07/12/15/0256255.shtml</a><br />
      <br />
      I really liked the last comment on the article:</p>

      <blockquote>
        Having mixed, inconsistent addressing modes is a major design screw-up. And having a default of the "delete" command to delete somewere else than is intuitive, is <b>completely unacceptable</b> and the people responsible for it should be <b>fired</b> and striped of their qualification. <b>These people are not engineers, but incompetent hacks.</b><br />
        <br />
        The right way to do it is that you can have inconsitencies, if a) there is a very good reason for it (here, there was none) and b) you make sure people notice. This can be done by making the command look different, e.g. "<b>DeleteWithAbsolutePathOrRoot</b>" or doing additional checking, like the delete command refusing to work if it is not given an absolute path. Of course documentation must also be correct, but the real screw-up is the command that looks just like the "file" command but works differently in an obviously potentially destructive fashion.
      </blockquote>So I guess there'd be no paycheck next month...
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fredtheman</span><br />
      <span class="post-time small text-muted">15th December 2007 16:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        That code of theirs was actually supposed to work.
      </blockquote>So until today's fix, unless given an absolute path, Delete() will silently delete files from the root directory? I guess the documentation should have stressed this.<br />
      <br />
      But then, they should have noticed this during testing.<br />
      <br />
      You're fired ;)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th December 2007 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nope, that's not what happened. If Delete was given a path relative to the working directory ("blah.txt" but not "..\blah.txt" or ".\blah.txt" or "$INSTDIR\blah.txt"), it'd look for files in the working directory, but try deleting them from the root directory. This happened because filename was erroneously prefixed with a backslash. More accurately, the directory from which the files were deleted was suffixed with a backslash even though it was an empty string. The log was updated accordingly, saying it deleted "\blah.txt".</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
