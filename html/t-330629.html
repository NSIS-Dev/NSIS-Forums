<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="unknown variable/constant warning"><title>unknown variable/constant warning - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">unknown variable/constant warning</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330629">unknown variable/constant warning</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">camato10</span><br><span class="post-time small text-muted">16th May 2011 15:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>unknown variable/constant warning</strong><br>Any help on why I am getting this warning would be really appreciated. I am basically doing a silent install of apache and php then I want to move the folders/files from Apache to another folder.<br><br>My Code:<br>##====================================================================<br>##Section Start<br>##====================================================================<br>Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"<br>OutFile "Setup.exe"<br>InstallDir "$PROGRAMFILES\AmegaWeb2"<br>ShowInstDetails show<br>!include 'FileFunc.nsh'<br>!insertmacro Locateunkno<br>!include "${NSISDIR}\Include\MoveFolder.nsh"<br><br>Section "Apache" SEC01<br>SetOutPath "$INSTDIR\AmegaWeb2"<br>MessageBox MB_YESNO "Are you sure you want to install Apache Web Server and PHP" /SD IDYES IDNO endApache<br>#File "${NSISDIR}\Amega\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi"<br>ExecWait '"msiexec" /I "$INSTDIR\AmegaWeb2\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi" /passive ALLUSERS=1 SERVERADMIN=admin@localhost SERVERNAME=localhost SERVERDOMAIN=localhost SERVERPORT=80'<br>endApache:<br><br>##===========================================================<br>##Move Apache2.2 folder into AmegaWeb<br>##==========================================================<br>Var /GLOBAL switch_overwrite<br>StrCpy $switch_overwrite 0<br>!insertmacro MoveFolder "$INSTDIR\Apache Software Foundation\Apache2.2\" "$INSTDIR\AmegaWeb2\" "*.*"<br>##CopyFiles /SILENT /FILESONLY "$INSTDIR\Apache Software Foundation\Apache2.2\" "$INSTDIR\AmegaWeb2\"<br><br>##=================================================================<br>##PHP Install<br>##=================================================================<br># File "${NSISDIR}\Amega\php-5.3.6-nts-Win32-VC9-x86.msi"<br>ExecWait '"msiexec" /i "$INSTDIR\AmegaWeb2\php-5.3.6-nts-Win32-VC9-x86.msi"/q INSTALLDIR=c:\PHP2 ADDLOCAL=cgi,ext_php_mysqli'<br>#endPHP:<br>SectionEnd<br><br>Output from<br>Command line:<br>"C:\Program Files (x86)\NSIS\makensis.exe" /NOTIFYHWND 262744 "C:\Program Files (x86)\NSIS\Amega\amegatest.nsi"<br><br>MakeNSIS v2.46 - Copyright 1995-2009 Contributors<br>See the file COPYING for license details.<br>Credits can be found in the Users Manual.<br><br>Processing config:<br>Processing plugin dlls: "C:\Program Files (x86)\NSIS\Plugins\*.dll"<br>- AdvSplash::show<br>- Banner::destroy<br>- Banner::getWindow<br>- Banner::show<br>- BgImage::AddImage<br>- BgImage::AddText<br>- BgImage::Clear<br>- BgImage::Destroy<br>- BgImage::Redraw<br>- BgImage::SetBg<br>- BgImage::SetReturn<br>- BgImage::Sound<br>- Dialer::AttemptConnect<br>- Dialer::AutodialHangup<br>- Dialer::AutodialOnline<br>- Dialer::AutodialUnattended<br>- Dialer::GetConnectedState<br>- InstallOptions::dialog<br>- InstallOptions::initDialog<br>- InstallOptions::show<br>- LangDLL::LangDialog<br>- Math::Script<br>- NSISdl::download<br>- NSISdl::download_quiet<br>- Splash::show<br>- StartMenu::Init<br>- StartMenu::Select<br>- StartMenu::Show<br>- System::Alloc<br>- System::Call<br>- System::Copy<br>- System::Free<br>- System::Get<br>- System::Int64Op<br>- System::Store<br>- TypeLib::GetLibVersion<br>- TypeLib::Register<br>- TypeLib::UnRegister<br>- UserInfo::GetAccountType<br>- UserInfo::GetName<br>- UserInfo::GetOriginalAccountType<br>- VPatch::GetFileCRC32<br>- VPatch::GetFileMD5<br>- VPatch::vpatchfile<br>- nsDialogs::Create<br>- nsDialogs::CreateControl<br>- nsDialogs::CreateItem<br>- nsDialogs::CreateTimer<br>- nsDialogs::GetUserData<br>- nsDialogs::KillTimer<br>- nsDialogs::OnBack<br>- nsDialogs::OnChange<br>- nsDialogs::OnClick<br>- nsDialogs::OnNotify<br>- nsDialogs::SelectFileDialog<br>- nsDialogs::SelectFolderDialog<br>- nsDialogs::SetRTL<br>- nsDialogs::SetUserData<br>- nsDialogs::Show<br>- nsExec::Exec<br>- nsExec::ExecToLog<br>- nsExec::ExecToStack<br><br>!define: "MUI_INSERT_NSISCONF"=""<br><br>Changing directory to: "C:\Program Files (x86)\NSIS\Amega"<br><br>Processing script file: "C:\Program Files (x86)\NSIS\Amega\amegatest.nsi"<br>!define: "PRODUCT_NAME"="AmegaWeb"<br>!define: "PRODUCT_VERSION"="3.5"<br>!define: "PRODUCT_PUBLISHER"="Amega Scientific Corp."<br>!define: "PRODUCT_WEB_SITE"="http://www.amegascientific.com"<br>!include: "C:\Program Files (x86)\NSIS\Include\MUI.nsh"<br>!include: "C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh"<br>NSIS Modern User Interface version 1.8 - Copyright 2002-2009 Joost Verburg (C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh:8)<br>!define: "MUI_INCLUDED"=""<br>!define: "MUI_SYSVERSION"="1.8"<br>!define: "MUI_VERBOSE"="3"<br>!include: closed: "C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh"<br>!include: closed: "C:\Program Files (x86)\NSIS\Include\MUI.nsh"<br>!define: "MUI_ABORTWARNING"=""<br>!define: "MUI_ICON"="C:\Program Files (x86)\NSIS\Amega\ASbutton.ico"<br>!insertmacro: MUI_PAGE_DIRECTORY<br>!insertmacro: end of MUI_PAGE_DIRECTORY<br>!insertmacro: MUI_PAGE_INSTFILES<br>!insertmacro: end of MUI_PAGE_INSTFILES<br>!insertmacro: MUI_PAGE_FINISH<br>!insertmacro: end of MUI_PAGE_FINISH<br>!insertmacro: MUI_LANGUAGE<br>!insertmacro: end of MUI_LANGUAGE<br>Name: "AmegaWeb 3.5"<br>OutFile: "Setup.exe"<br>InstallDir: "$PROGRAMFILES\AmegaWeb2"<br>ShowInstDetails: show<br>!include: "C:\Program Files (x86)\NSIS\Include\FileFunc.nsh"<br>!define: "FILEFUNC_INCLUDED"=""<br>!include: "C:\Program Files (x86)\NSIS\Include\Util.nsh"<br>!include: closed: "C:\Program Files (x86)\NSIS\Include\Util.nsh"<br>!define: "Locate"="!insertmacro LocateCall"<br>!define: "un.Locate"="!insertmacro LocateCall"<br>!define: "GetSize"="!insertmacro GetSizeCall"<br>!define: "un.GetSize"="!insertmacro GetSizeCall"<br>!define: "DriveSpace"="!insertmacro DriveSpaceCall"<br>!define: "un.DriveSpace"="!insertmacro DriveSpaceCall"<br>!define: "GetDrives"="!insertmacro GetDrivesCall"<br>!define: "un.GetDrives"="!insertmacro GetDrivesCall"<br>!define: "GetTime"="!insertmacro GetTimeCall"<br>!define: "un.GetTime"="!insertmacro GetTimeCall"<br>!define: "GetFileAttributes"="!insertmacro GetFileAttributesCall"<br>!define: "un.GetFileAttributes"="!insertmacro GetFileAttributesCall"<br>!define: "GetFileVersion"="!insertmacro GetFileVersionCall"<br>!define: "un.GetFileVersion"="!insertmacro GetFileVersionCall"<br>!define: "GetExeName"="!insertmacro GetExeNameCall"<br>!define: "un.GetExeName"="!insertmacro GetExeNameCall"<br>!define: "GetExePath"="!insertmacro GetExePathCall"<br>!define: "un.GetExePath"="!insertmacro GetExePathCall"<br>!define: "GetParameters"="!insertmacro GetParametersCall"<br>!define: "un.GetParameters"="!insertmacro GetParametersCall"<br>!define: "GetOptions"="!insertmacro GetOptionsCall"<br>!define: "un.GetOptions"="!insertmacro GetOptionsCall"<br>!define: "GetOptionsS"="!insertmacro GetOptionsSCall"<br>!define: "un.GetOptionsS"="!insertmacro GetOptionsSCall"<br>!define: "GetRoot"="!insertmacro GetRootCall"<br>!define: "un.GetRoot"="!insertmacro GetRootCall"<br>!define: "GetParent"="!insertmacro GetParentCall"<br>!define: "un.GetParent"="!insertmacro GetParentCall"<br>!define: "GetFileName"="!insertmacro GetFileNameCall"<br>!define: "un.GetFileName"="!insertmacro GetFileNameCall"<br>!define: "GetBaseName"="!insertmacro GetBaseNameCall"<br>!define: "un.GetBaseName"="!insertmacro GetBaseNameCall"<br>!define: "GetFileExt"="!insertmacro GetFileExtCall"<br>!define: "un.GetFileExt"="!insertmacro GetFileExtCall"<br>!define: "BannerTrimPath"="!insertmacro BannerTrimPathCall"<br>!define: "un.BannerTrimPath"="!insertmacro BannerTrimPathCall"<br>!define: "DirState"="!insertmacro DirStateCall"<br>!define: "un.DirState"="!insertmacro DirStateCall"<br>!define: "RefreshShellIcons"="!insertmacro RefreshShellIconsCall"<br>!define: "un.RefreshShellIcons"="!insertmacro RefreshShellIconsCall"<br>!include: closed: "C:\Program Files (x86)\NSIS\Include\FileFunc.nsh"<br>!insertmacro: Locate<br>!insertmacro: end of Locate<br>!include: "C:\Program Files (x86)\NSIS\Include\MoveFolder.nsh"<br>Function: ".MoveFolder_Locate_createDir"<br>!insertmacro: _If<br>!insertmacro: end of _If<br>Push: $R2<br>StrLen $R2 "$R0"<br>StrCpy $R2 "$R9" () ($R2)<br>CreateDirectory: "$R1$R2"<br>Pop: $R2<br>!insertmacro: _EndIf<br>!insertmacro: end of _EndIf<br>Push: $R1<br>FunctionEnd<br>Function: ".MoveFolder_Locate_moveFile"<br>Push: $R2<br>StrLen $R2 "$R0"<br>StrCpy $R2 "$R9" () ($R2)<br>StrCpy $R2 "$R1$R2" () ()<br>IfFileExists: "$R2" ? +3 : 0<br>Rename: $R9-&gt;$R2<br>Goto: done<br>!insertmacro: _If<br>warning: unknown variable/constant "switch_overwrite" detected, ignoring (macro:_==:1)<br>!insertmacro: end of _If<br>Delete: "$R2"<br>Rename: $R9-&gt;$R2<br>Delete: "$R9"<br>Goto: done<br>!insertmacro: _EndIf<br>!insertmacro: end of _EndIf<br>Push: $0<br>Push: $1<br>Push: $2<br>Push: $3<br>GetFileTime: $R9-&gt;$0,$1<br>GetFileTime: $R2-&gt;$2,$3<br>IntCmp $0:$2 equal=0, &lt; older, &gt; newer<br>IntCmp $1:$3 equal=older, &lt; older, &gt; newer<br>Delete: "$R9"<br>Goto: time_check_done<br>Delete: "$R2"<br>Rename: $R9-&gt;$R2<br>Delete: "$R9"<br>Pop: $3<br>Pop: $2<br>Pop: $1<br>Pop: $0<br>Pop: $R2<br>Push: $R1<br>FunctionEnd<br>Function: ".MoveFolder_Locate_deleteDir"<br>!insertmacro: _If<br>!insertmacro: end of _If<br>RMDir: "$R9"<br>IntOp: $R2=$R2+1<br>!insertmacro: _EndIf<br>!insertmacro: end of _EndIf<br>Push: $R1<br>FunctionEnd<br>!include: closed: "C:\Program Files (x86)\NSIS\Include\MoveFolder.nsh"<br>Section: "Apache" -&gt;(SEC01)<br>SetOutPath: "$INSTDIR\AmegaWeb2"<br>MessageBox: 4: "Are you sure you want to install Apache Web Server and PHP" (on IDNO goto endApache)<br>ExecWait: ""msiexec" /I "$INSTDIR\AmegaWeb2\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi" /passive ALLUSERS=1 SERVERADMIN=admin@localhost SERVERNAME=localhost SERVERDOMAIN=localhost SERVERPORT=80" (-&gt;)<br>Var: "switch_overwrite"<br>StrCpy $switch_overwrite "1" () ()<br>!insertmacro: MoveFolder<br>!define: "MOVEFOLDER_JUMP"="55.2"<br>Push: $R0<br>Push: $R1<br>StrCpy $R0 "$INSTDIR\Apache Software Foundation\Apache2.2\" () ()<br>StrCpy $R1 "$INSTDIR\AmegaWeb2\" () ()<br>Push: $0<br>StrCpy $0 "$R0" (1) (-1)<br>StrCmp "$0" "\" equal=0, nonequal=+2<br>StrCpy $R0 "$R0" (-1) ()<br>StrCpy $0 "$R1" (1) (-1)<br>StrCmp "$0" "\" equal=0, nonequal=+2<br>StrCpy $R1 "$R1" (-1) ()<br>Pop: $0<br>CreateDirectory: "$R1"<br>DetailPrint: "Moving files: $R0\*.* to $R1\"<br>Push: $R6<br>Push: $R7<br>Push: $R8<br>Push: $R9<br>!insertmacro: LocateCall<br>!insertmacro: end of LocateCall<br>!insertmacro: LocateCall<br>!insertmacro: end of LocateCall<br>Push: $R2<br>StrCpy $R2 "0" () ()<br>!insertmacro: LocateCall<br>!insertmacro: end of LocateCall<br>StrCmp "$R2" "0" equal=0, nonequal=deldir_loop_55.2<br>Pop: $R2<br>Push: $R2<br>StrCpy $R2 "0" () ()<br>!insertmacro: LocateCall<br>!insertmacro: end of LocateCall<br>StrCmp "$R2" "0" equal=0, nonequal=delnewdir_loop_55.2<br>Pop: $R2<br>Pop: $R9<br>Pop: $R8<br>Pop: $R7<br>Pop: $R6<br>RMDir: "$R0"<br>Pop: $R1<br>Pop: $R0<br>!undef: "MOVEFOLDER_JUMP"<br>!insertmacro: end of MoveFolder<br>ExecWait: ""msiexec" /i "$INSTDIR\AmegaWeb2\php-5.3.6-nts-Win32-VC9-x86.msi"/q INSTALLDIR=c:\PHP2 ADDLOCAL=cgi,ext_php_mysqli" (-&gt;)<br>SectionEnd<br><br>Processed 1 file, writing output:<br>Adding plug-ins initializing function... Done!<br>Processing pages... Done!<br>Removing unused resources... Done!<br>Generating language tables... Done!<br><br>Output: "C:\Program Files (x86)\NSIS\Amega\Setup.exe"<br>Install: 4 pages (256 bytes), 1 section (1048 bytes), 575 instructions (16100 bytes), 195 strings (2783 bytes), 1 language table (294 bytes).<br>Datablock optimizer saved 8009 bytes (~9.4%).<br><br>Using zlib compression.<br><br>EXE header size: 60416 / 35840 bytes<br>Install code: 4173 / 20857 bytes<br>Install data: 16216 / 67685 bytes<br>CRC (0x8143ADB9): 4 / 4 bytes<br><br>Total size: 80809 / 124386 bytes (64.9%)<br><br>1 warning:<br>unknown variable/constant "switch_overwrite" detected, ignoring (macro:_==:1)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th May 2011 16:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Please attach large amounts of code in future. You need to move your Var declaration before the !include MoveFolder.nsh.<br><br>Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>