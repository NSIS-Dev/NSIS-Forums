<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Checking for updates on the Internet / Changing Buttons" />

  <title>Checking for updates on the Internet / Changing Buttons - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Checking for updates on the Internet / Changing Buttons</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=288636">Checking for updates on the Internet / Changing Buttons</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DEbln001</span><br />
      <span class="post-time small text-muted">17th March 2008 15:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Checking for updates on the Internet / Changing Buttons</strong><br />
      &nbsp; Hello everybody i have two request.<br />
      <br />
      I wrote an installer that figures out which software packages are installed and which are needed and after validatition downloading the needed packages inside the sections and executing them.<br />
      <br />
      <br />
      First request is the following: Because of the fact that the versions of the installed packages are changing from time to time. I made a single controllfile where i can manage required/supported versions in a single stringchain define without changing the the nsi script file. after compiling, the installer has a new version number. my installer itself is looking on any start, if there is a newer version of the installer on the internet and on positive return he downloads the new installer version execute the new installer with nsExec::Exec "$EXEDIR\&lt;newinstaller&gt;" and quits the "old" Installer with "Quit". For example:<br />
      <br />
      <br /></p>
      <pre>
<code>
#direct
<br />#Versionsupdate ohne Proxy
<br />&gt;inetc::get /noproxy /caption "Installer update" /banner "Installer Update" /nocancel "${INSTALLER_BASEURL}/$R1"  "$EXEDIR\$R1" /end
<br />Pop $R0
<br />StrCmp $R0"OK" +3
<br />MessageBox MB_OK "Failure xyz"
<br />&gt;Abort
<br /><br />nsExec</code>::Exec "$EXEDIR\$R1"
<br />&gt;Quit 
<br />&gt;

</pre>That works good, except that the old installer dosnt quit and instead freezes in and crashes and only can be closed by the task manager. Is there any "trick" to close the "old" installer and open the "new" one?<br />
      <br />
      <br />
      My second request deals with the buttons in sections. I have several sections which are showen when they are needed. Is there any possibility to change the text of the installbutton to "next" or something instead of "install". Also the cancelbutton is disabled in all sections, how can i activate it?<br />
      <br />
      Thank you in advance for your efforts.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">17th March 2008 19:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use Exec not nsExec. nsExec is only for console applications.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DEbln001</span><br />
      <span class="post-time small text-muted">18th March 2008 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, its working fine now.<br />
      <br />
      Is it possible to change Text of the "install" Button within SectionsPage and make the "cancel" Button active?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">18th March 2008 14:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To change next button text:<br />
      <br />
      GetDlgItem $R0 $HWNDPARENT 1<br />
      SendMessage $R0 ${WM_SETTEXT} `` `STR:Install`<br />
      <br />
      This requires !include WinMessages.nsh if you get compiler warnings.<br />
      <br />
      Also search the forum for "enable cancel button".<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DEbln001</span><br />
      <span class="post-time small text-muted">9th April 2008 13:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, that worked well.<br />
      I found a second way to change the text of the next button by just adding<br />
      <br />
      InstallButtonText "$(LANG_CUSTOMINSTALLBUTTONTEXT)"<br />
      <br />
      It changes the "next button" for all section pages (i have more than one section)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>