<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS ExecWait dosen't wait when installing the setup file via chrome browser"><title>NSIS ExecWait dosen't wait when installing the setup file via chrome browser - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS ExecWait dosen't wait when installing the setup file via chrome browser</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=353527">NSIS ExecWait dosen't wait when installing the setup file via chrome browser</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">gordengram</span><br><span class="post-time small text-muted">18th December 2012 13:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS ExecWait dosen't wait when installing the setup file via chrome browser</strong><br>When downloading the .exe installation file (NSIS installation) and opening it via chrome in order to execute it the ExecWait dosen't work.<br><br>I'm running a batch file which kill browsers processes inside of the installation, because I opened the exe file via the chrome (Download Manager) the ExecWait think that the execute has ended and therefore dosen't wait for the next ExecWait calls that coming after the line which call to execute the batch file. It think that chrome was the parent process so it quitting the installation.<br><br>Is there a way to let the ExecWait know that although I killed the chrome browser (or any other browsers) process to continue the installation? and waiting for only the .exe files that I execute via the NSIS script?<br><br>P.S - When installing the .exe file out of the browser (download manager) it works fine.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">gordengram</span><br><span class="post-time small text-muted">18th December 2012 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Edit (i have included codes):</strong><br>EDIT (I HAVE INCLUDED CODES):<br><br>NSIS code:<br>#-----------------------------------<br># define the name of the installer<br>outfile "setup.exe"<br>Name "Example"<br><br>installDir $LOCALAPPDATA\Test<br><br># default section<br>section<br><br>setOutPath $INSTDIR<br>File install.exe<br>File test.exe<br><br>ExecWait $INSTDIR\install.exe<br>Delete $INSTDIR\install.exe<br>ExecWait $INSTDIR\test.exe<br>Delete $INSTDIR\test.exe<br><br>sectionEnd<br><br><br>#-----------------<br><br><br>and inside of the install.exe (its a .bat file the I compile to an .exe file) this code:<br><br>@echo off<br>taskkill /F /IM chrome.exe /T<br>If you download the setup.exe via chrome and executing it from the bottom bar (download manager) it will execute install.exe (closing chrome.exe) but will skip this lines:<br><br>Delete $INSTDIR\install.exe<br>ExecWait $INSTDIR\test.exe<br>Delete $INSTDIR\test.exe</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">18th December 2012 19:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ExecWait <b>always</b> waits for the child process it started but it does not wait for grandchildren...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br><span class="post-time small text-muted">22nd December 2012 08:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">you should use the nsprocess plugin or nsis to kill or obey tasks.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>