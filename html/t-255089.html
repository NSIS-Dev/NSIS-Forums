<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="variable size on install page" />

  <title>variable size on install page - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">variable size on install page</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255089">variable size on install page</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">flatface</span><br />
      <span class="post-time small text-muted">8th September 2006 10:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>variable size on install page</strong><br />
      Hi, This website is a godsend and I have searched on this topic and found many useful links and ideas but I need a little help tying it all together.<br />
      <br />
      I need to install:<br />
      1. .net 2 if not present (240MB required by .net installer)<br />
      2. files to $APPDATA (10MB)<br />
      3. files to $INSTDIR (350MB) installing from zips<br />
      <br />
      So if a user needs .net installed when they hit the install page I can use SetSectionSize to set the size to 240+10+350.<br />
      but if the user then chooses another drive for the install I would need 350 on that drive and 250 free on the C:<br />
      <br />
      I could after do a disk check for the available 250 on C: and give a warning but is there a cleaner way to do it?<br />
      <br />
      many thanks in advance...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">8th September 2006 17:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could have the .NET test done before the directory page shows, e.g. in .onInit.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">flatface</span><br />
      <span class="post-time small text-muted">9th September 2006 09:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have that been checked in the .onInit but if .NET is needed the example still applies - how do I indicate on the install page that space is needed on the C: drive regardless of what drive they choose as the install location?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th September 2006 10:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You said it yourself, you use SetSectionSize to set the correct section size. The directory page will use that section size to determine how much space is needed for the installation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">flatface</span><br />
      <span class="post-time small text-muted">9th September 2006 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry if I am not being clear, thank you for trying to help kichik.<br />
      <br />
      I can indeed setSectionSize to be 240+10+350 on the install page but if they have no space on their C: drive and choose say their D: to install to - they will not have enough space on the C: to install .NET.<br />
      <br />
      I would like an install page like:<br />
      <br />
      space required - 600MB<br />
      <br />
      and then if they choose a different location (D:)<br />
      <br />
      space required - C: 250MB<br />
      D: 350MB<br />
      <br />
      so that it still lets them know they have insuficient space for the install.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th September 2006 14:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In that case, you'll have to implement a custom test. You can use <a href="http://nsis.sourceforge.net/CheckSpaceFree" target="_blank">CheckSpaceFree</a> for that. I'd put the test on the leave function of the directory page along with a little text change in that page to note about the additional required space.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">flatface</span><br />
      <span class="post-time small text-muted">9th September 2006 16:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The ideal place to put it would be after the browse button returns the location of the install - then you could update the install sizes. I dont know if that is possible.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th September 2006 16:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It's possible. Use .onVerifyInstDir, it's called whenever the installation directory changes, including changes by the browse button.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">flatface</span><br />
      <span class="post-time small text-muted">10th September 2006 11:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">brilliant! exactly what i was looking for. cheers</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
