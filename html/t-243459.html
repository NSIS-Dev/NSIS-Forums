<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A proper tutorial for password protect?" />

  <title>A proper tutorial for password protect? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">A proper tutorial for password protect?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=243459">A proper tutorial for password protect?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 18:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>A proper tutorial for password protect?</strong><br />
      Hi pros,<br />
      <br />
      I been searching out but then as I am a noob to this, I am unable to understand how to create a password custom page, the resource in here do not have sufficient tutorials on creating it.<br />
      <br />
      Can anyone create a detail tutorial on Password Custom Page in ModernUI.nsi script or something which can be easily set just by changing the password filled in the example, so that when user starts to load the installer it will prompt for a correct password before proceeding<br />
      <br />
      And More tutorials how you really configure the InstallOptions and .ini files to react with the password custom page.<br />
      <br />
      thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">14th April 2006 18:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sf.net/File:PassDialog.zip" target="_blank">http://nsis.sf.net/File:PassDialog.zip</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">this is one excellent tutorial thanks alot I understand alot from this one.<br />
      <br />
      Thanks alot man Afrow UK your the man, if only there was a better navigation to this resource everyone could have done it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi, Afrow UK<br />
      <br />
      More questions regarding UserPass.nsi<br />
      <br />
      How do I add more username and password ?<br />
      <br />
      Which files should I be editing ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">14th April 2006 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Depends how you want to store the usernames and passwords.<br />
      In UserPass.nsi the username and password are hardcoded into the installer with two !defines. If you want more usernames and passwords, add more defines and change the code that compares the inputted usernames and passwords.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 20:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I edited the UserPass.nsi a bit but one problem , when I tried the first set , Jeff , blah it did not work, but when I tried the second set , stealth , zero it work.<br />
      <br />
      Could you tell me which part I am wrong in this script<br /></p>

      <blockquote>
        ## Include headers<br />
        !include MUI.nsh<br />
        <br />
        ## Pages<br />
        !insertmacro MUI_PAGE_WELCOME<br />
        Page Custom passwordPage passwordPageLeave<br />
        !define MUI_PAGE_CUSTOMFUNCTION_SHOW showComponents<br />
        !insertmacro MUI_PAGE_COMPONENTS<br />
        !insertmacro MUI_PAGE_INSTFILES<br />
        <br />
        ## Password is<br />
        !define Password "blah"<br />
        !define Username "Jeff"<br />
        !define Password1 "zero"<br />
        !define Username1 "stealth"<br />
        <br />
        ## Control ID's<br />
        !define IDC_USERNAME 1210<br />
        !define IDC_PASSWORD 1211<br />
        !define IDC_USERNAME1 1216<br />
        !define IDC_PASSWORD1 1217<br />
        <br />
        <br />
        ## Languages<br />
        !insertmacro MUI_LANGUAGE English<br />
        <br />
        ## Displays the password dialog<br />
        Function passwordPage<br />
        <br />
        !insertmacro MUI_HEADER_TEXT "Enter Username &amp;&amp; Password" "Enter your username and password to continue."<br />
        <br />
        PassDialog::InitDialog /NOUNLOAD UserPass<br />
        Pop $R0 # Page HWND<br />
        <br />
        GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
        SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
        GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
        SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
        <br />
        PassDialog::Show<br />
        <br />
        FunctionEnd<br />
        <br />
        ## Validate password<br />
        Function passwordPageLeave<br />
        <br />
        ## Pop password &amp; username from stack<br />
        Pop $R0<br />
        Pop $R1<br />
        POP $R2<br />
        POP $R3<br />
        <br />
        ## A bit of validation<br />
        StrCmp $R0 '${Username}' +4 +2<br />
        StrCmp $R1 '${Password}' +3<br />
        StrCmp $R2 '${Username1}' +4 +2<br />
        StrCmp $R3 '${Password1}' +3<br />
        <br />
        MessageBox MB_OK|MB_ICONEXCLAMATION "The username is '${Username}' and the password is '${Password}', fool!"<br />
        Abort<br />
        <br />
        ## Display the password<br />
        MessageBox MB_OK|MB_ICONINFORMATION "The username and password is correct: $R0, $R1!"<br />
        <br />
        FunctionEnd<br />
        <br />
        Function showComponents<br />
        <br />
        ## Disable the Back button<br />
        GetDlgItem $R0 $HWNDPARENT 3<br />
        EnableWindow $R0 0<br />
        <br />
        FunctionEnd<br />
        <br />
        ## Just a dummy section<br />
        Section 'A section'<br />
        SectionEnd
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">14th April 2006 20:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br />## Password is<br />!define Username1 "Jeff"<br />!define Password1 "blah"<br />!define Username2 "stealth"<br />!define Password2 "zero"<br /><br />...<br /><br />## Validate password<br />Function passwordPageLeave<br /><br />## Pop password &amp; username from stack<br />Pop $R0<br />Pop $R1<br /><br />## A bit of validation<br />StrCmp $R0 '${Username1}' 0 +2<br />StrCmp $R1 '${Password1}' Good Bad<br />StrCmp $R2 '${Username2}' 0 +2<br />StrCmp $R3 '${Password2}' Good Bad<br /><br />Bad:<br />MessageBox MB_OK|MB_ICONEXCLAMATION "The entered username or password is incorrect!"<br />Abort<br /><br />Good:<br /><br />FunctionEnd<br /></code>
</pre><br />
      <br />
      -Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 20:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">hey thanks but something is wrong again, when I enter the first set , Jeff , blah I am able to access the sections but when I enter the second set , stealth,zero it was incorrect and cannot access<br />
      <br />
      ## Include headers<br />
      !include MUI.nsh<br />
      <br />
      ## Pages<br />
      !insertmacro MUI_PAGE_WELCOME<br />
      Page Custom passwordPage passwordPageLeave<br />
      !define MUI_PAGE_CUSTOMFUNCTION_SHOW showComponents<br />
      !insertmacro MUI_PAGE_COMPONENTS<br />
      !insertmacro MUI_PAGE_INSTFILES<br />
      <br /></p>

      <blockquote>
        ## Password is<br />
        !define Username1 "Jeff"<br />
        !define Password1 "blah"<br />
        !define Username2 "stealth"<br />
        !define Password2 "zero"<br />
        <br />
        ## Control ID's<br />
        !define IDC_USERNAME 1210<br />
        !define IDC_PASSWORD 1211<br />
        <br />
        <br />
        ## Languages<br />
        !insertmacro MUI_LANGUAGE English<br />
        <br />
        ## Displays the password dialog<br />
        Function passwordPage<br />
        <br />
        !insertmacro MUI_HEADER_TEXT "Enter Username &amp;&amp; Password" "Enter your username and password to continue."<br />
        <br />
        PassDialog::InitDialog /NOUNLOAD UserPass<br />
        Pop $R0 # Page HWND<br />
        <br />
        GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
        SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
        GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
        SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
        <br />
        PassDialog::Show<br />
        <br />
        FunctionEnd<br />
        <br />
        ## Validate password<br />
        Function passwordPageLeave<br />
        <br />
        ## Pop password &amp; username from stack<br />
        Pop $R0<br />
        Pop $R1<br />
        <br />
        <br />
        ## A bit of validation<br />
        StrCmp $R0 '${Username1}' 0 +2<br />
        StrCmp $R1 '${Password1}' Good Bad<br />
        StrCmp $R2 '${Username2}' 0 +2<br />
        StrCmp $R3 '${Password2}' Good Bad<br />
        <br />
        <br />
        Bad:<br />
        MessageBox MB_OK|MB_ICONEXCLAMATION "The entered username or password is incorrect!"<br />
        Abort<br />
        <br />
        Good:<br />
        <br />
        FunctionEnd<br />
        <br />
        <br />
        Function showComponents<br />
        <br />
        ## Disable the Back button<br />
        GetDlgItem $R0 $HWNDPARENT 3<br />
        EnableWindow $R0 0<br />
        <br />
        FunctionEnd<br />
        <br />
        ## Just a dummy section<br />
        Section 'A section'<br />
        SectionEnd
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">14th April 2006 21:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">solved<br />
      <br />
      StrCmp $R2 '${Username2}' 0 +2<br />
      StrCmp $R3 '${Password2}' Good Bad<br />
      <br />
      should be replaced as<br />
      <br />
      StrCmp $R0 '${Username2}' 0 +2<br />
      StrCmp $R1 '${Password2}' Good Bad</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">14th April 2006 22:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry yes it should be. I used the code from your last post as a base.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rxs2k5</span><br />
      <span class="post-time small text-muted">17th April 2006 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi there Afrow UK<br />
      <br />
      Just wondering,<br />
      <br />
      Is there a way to allow<br />
      <br />
      !define Username1 "Jeff"<br />
      !define Password1 "blah"<br />
      !define Username2 "stealth"<br />
      !define Password2 "zero"<br />
      <br />
      to be in store somewhere or<br />
      <br />
      ## A bit of validation<br />
      StrCmp $R0 '${Username1}' 0 +2<br />
      StrCmp $R1 '${Password1}' Good Bad<br />
      StrCmp $R0 '${Username2}' 0 +2<br />
      StrCmp $R1 '${Password2}' Good Bad<br />
      <br />
      to be store somewhere instead of being added to the script itself ???<br />
      <br />
      <br />
      Means It will still be read when the user type in the username and password, but I wish to add something like a database. If I had many many more clients, I will be able to add into it instead of using it again and again on different installers.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
