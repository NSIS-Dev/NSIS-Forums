<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Brandingimage" />

  <title>Brandingimage - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Brandingimage</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=102435">Brandingimage</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tolwyn</span><br />
      <span class="post-time small text-muted">29th August 2002 07:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Brandingimage</strong><br />
      OK.<br />
      <br />
      Working my way through this scripting stuff. Been able to do just about everything I need, but I'm confused about Brandingimage.<br />
      <br />
      I have a 400x60 bmp image.<br />
      In my script, I have:<br />
      <br />
      AddBrandingImage top 400|60<br />
      <br />
      Section "MISC"<br />
      SetBrandingImage "$OUTDIR\brandingimage.bmp"<br />
      SectionEnd<br />
      <br />
      Since it seems BrandingImage needs to be in its own section. I've also included the brandingimage.bmp as part of a File command.<br />
      <br />
      Also, what format can the image be?<br />
      16 colors?<br />
      256 colors?<br />
      24 bit?<br />
      PNG? Ooo. with Alpha Transparency? Heheheh.<br />
      <br />
      Any help/examples would be hot.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th August 2002 11:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The | sign means or. Not both, height or width. The branding image must be a bitmap. It can use any color palette though. Have a look at gfx.nsi for an example of usage.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tolwyn</span><br />
      <span class="post-time small text-muted">29th August 2002 19:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I did look through the gfx example; however, I still can't get it to work. It's difficult to integrate two examples into one. I'm also using Joost's modernUI.exe script as well.<br />
      <br />
      I'm still having issues getting a graphic to show up.<br />
      <br />
      What section does the BMP need to be in?<br />
      Why is it necessary to include it in the FILE section?<br />
      <br />
      I'm getting there... but might need some more assistance.<br />
      <br />
      I'd say I'm intermediate, but not "pro" super pimp yet.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th August 2002 19:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The only place you can't set a branding image is .onInit because there is no dialog yet when it executes. All you have to do is extract the bitmap (using File), and then setting it to the branding control.<br />
      <br />
      GetTempFileName $0<br />
      File /oname=$0 mybitmap.bmp<br />
      SetBrandingImage $0<br />
      Delete $0<br />
      <br />
      That's it. Put it in .onNextPage for example. gfx.nsi shows you how to do add more than one easily.<br />
      <br />
      You have to use File because you must put the bitmap on the user machine. SetBrandingImage doesn't add it to the installer for you.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tolwyn</span><br />
      <span class="post-time small text-muted">29th August 2002 22:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See, here's where my ignorance and education come in.<br />
      I promise I *have* read the HTML stuff. And I am making good progress...<br />
      <br />
      But how do I get the BMP file to extract BEFORE the setup takes place?<br />
      The gfx.nsi calls another file with macros and stuff, and it's hard to follow.<br />
      <br />
      I understand that the BMP has to be on the target machine FIRST. And deleting it may be premature because you might want it to be deleted in the Uninstallation section..</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br />
      <span class="post-time small text-muted">29th August 2002 22:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I *think* that the .onNextPage callback function will get called just before the first page is shown (and many other times of course but for the purpose right now we don't care about that) but *after* the dialog has been created... so in .onNextPage have a File command to unpack the bitmap and then the commands to use the bitmap as your branding imagery. You then just need to put these commands in an if block so they only get executed the first time .onNextPage is called.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th August 2002 22:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't have to get it there before the setup starts, just before the setup calls SetBrandingImage, and you tell it when to call it. The setup doesn't relay on the branding image, it just uses it. The branding image is dynamic.<br />
      <br />
      If you want it for the uninstaller too, just extract it there too.<br />
      <br />
      The branding header file tells you less, but makes you write less too. All you have to do with it is insert !BI_INIT where you want to initialize, BI_NEXT when you want to move to the next image, and BI_PREV when you want to move back to the previous one. You also have to define you images list starting with BI_LIST and then just add all your images with BI_LIST_ADD and finish with BI_LIST_END. It will extract all the images for you.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tolwyn</span><br />
      <span class="post-time small text-muted">29th August 2002 23:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok. I'm starting to get it...<br />
      Do I need to call any other file (branding.?) to use those shortcuts?<br />
      Right now, I'm creating function on.NextPage and function un.on.Nextpage or whatever...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th August 2002 23:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You just need to include branding.nsh, just like in the example. Just add !include "${NSISDIR}\Examples\branding.nsi" to your script.<br />
      <br />
      If you wish to use it in the uninstaller, define BI_UNINSTALL and include it again. Just make sure all of the usage of the newly defined uninstall macros is in the uninstaller, just like in gfx.nsi.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">29th August 2002 23:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Tolwyn</i><br />
        <b>Ok. I'm starting to get it...<br />
        Do I need to call any other file (branding.?) to use those shortcuts?<br />
        Right now, I'm creating function on.NextPage and function un.on.Nextpage or whatever...</b>
      </blockquote>You need to include branding.nsh (have a look at gfx.nsi).<br />
      <br />
      [edit]kichik, you are just too fast :D[/edit]
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
