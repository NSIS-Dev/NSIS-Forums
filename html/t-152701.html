<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Custom Page question"><title>Custom Page question - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Custom Page question</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152701">Custom Page question</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">aeshkar</span><br><span class="post-time small text-muted">15th October 2003 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Custom Page question</strong><br>Hi,<br><br>I'm trying to skip showing a custom page if a certain file exists. I'm using the following code:<br><br><br>!define MUI_PAGE_CUSTOMFUNCTION_PRE "UserIDandPWPre"<br>Page custom UserIDandPW<br><br><br>Funtion UserIDandPWPre<br>IfFileExists "somepath\somefile.txt" skipPage showPage<br>skipPage:<br>Abort<br>showPage:<br>FunctionEnd<br><br>I expected the UserIDandPWPre function to run before the page is shown<br>and skip it if the file exists. Instead it shows the page, and only executes on the next button click. In other words, it behaves like a<br>MUI_PAGE_CUSTOMFUNCTION_LEAVE function. I verified this with a MessageBox in the function.<br><br>Any ideas?<br><br>Thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">15th October 2003 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I don't think MUI can support a PRE function for custom pages, because you can't actually have PRE functions for custom pages without MUI already.<br><br>You should do this instead:<br><br>; Custom page function<br>Funtion UserIDandPW<br>IfFileExists "somepath\somefile.txt" 0 skippage<br>InstallOptions::Dialog "myfile.ini"<br>skippage:<br>FunctionEnd<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aeshkar</span><br><span class="post-time small text-muted">15th October 2003 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That worked. Thanks. Someone should document the fact that Custom Pages cannot have PRE,SHOW and LEAVE functions. Its not clear at all, unless I missed something. It would be a nice feature to add to be consistant with the other pages.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">15th October 2003 17:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You simply need to look at the Page command;<br><br>These are the syntaxes:<br>Page custom &lt;show_function&gt; &lt;leave_function&gt; &lt;title&gt;<br><br>Page &lt;other&gt; &lt;pre_function&gt; &lt;show_function&gt; &lt;leave_function&gt;<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">aeshkar</span><br><span class="post-time small text-muted">15th October 2003 17:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">As you can probably tell, I'm new at NSIS. Thanks again.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th October 2003 18:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You are right however, if there is no mension of the fact that Custom pages do not have a PRE function in the documentation, then one could/should be added.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">16th October 2003 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The documentation is right:<br><br>custom [creator_function] [leave_function] [caption]<br>OR<br>(license|components|directory|instfiles|uninstConfirm) [pre_function] [show_function] [leave_function]<br><br>Normal pages have a pre/show/leave function. Custom pages have a creator/leave function.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">deguix</span><br><span class="post-time small text-muted">16th October 2003 20:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">But the PRE function is before using the Install Options Plugin.<br><br>You can do about the same thing as the normal PRE function pages using "Call PREFunction" (PREFunction is the PRE Function Name) before using Install Options Plugin in your custom page function.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>