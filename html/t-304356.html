<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Regarding Patch Fixes"><title>Regarding Patch Fixes - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Regarding Patch Fixes</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=304356">Regarding Patch Fixes</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">subthka</span><br><span class="post-time small text-muted">19th March 2009 05:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Regarding Patch Fixes</strong><br>Hi Everyone<br><br>I am trying for an installer that need to make patch fixes.<br>Actually I tried the plugin VPatch and followed all the necessary steps that I checked in the forum however still it was little bit hard for making that.<br><br>Please find the attachment for the installer<br><br>My problem is already i did installer(main setup for my application).Now i need to check the existing version that i installed and need to make the patch fixing for that.<br><br>The thing what i did is in one section i read the registry value and kept it in register and used as<br>SetOutPath registryvalue<br><br>Before installing i need to check the version that is intalled and get the path of installation and need to proceed for the patch fixing....<br><br>please help me...<br><br>advance thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AaronLS</span><br><span class="post-time small text-muted">22nd March 2009 02:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If I understand correctly, it sounds like one thing you need is to be able to determine if a previous version is installed?<br><br>I would design your update to write the version to a registry value. In the logic of the update, check to see if the registry key for the version exists. If it doesn't exist, but your install path registry does exist, then you know it is an older version that is installed. If the version number registry key does exist, then just compare the existing value against the version of your updated installer to determine if the update should be installed.<br><br><br>I haven't really done patches quite the way you're asking for I think. The way I do patches is I just update my files and original installer, then recompile my original install. Essentially it will overwrite everything. In some places, such as configuration files, I use something like:<br>${IfNot} ${FileExists} "blah.ini"<br>;install file<br><br>That way I don't overwrite existing settings.<br><br>The reason for this is with true patches, you might have a patch to go from version 1.0 to version 1.1. You will also have one for 1.1 to 1.2. What if someone has version 1.0, and they want 1.2. Are you going to make them install 2 different patches? It will get worse as you release more patches.<br><br>So I just design my full install to overwrite everything from a previous version, so it also acts like a patch, and will work for updating any version. The logic gets a little complex, but it's easier to maintain than dealing with tons of patches. On the down side, this means updates require a full download.<br><br>If i have a hotfix, like a bug with one component and need to get someone a fix just for that, I will compile my installer with just that component. My install has about a dozen sections, and have it setup where I can compile the install with just one of those sections, so that only that component is updated when they install.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>