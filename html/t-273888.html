<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Vista: Set Access to Full Control after install"><title>Vista: Set Access to Full Control after install - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Vista: Set Access to Full Control after install</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273888">Vista: Set Access to Full Control after install</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">paraLogic</span><br><span class="post-time small text-muted">5th July 2007 03:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Vista: Set Access to Full Control after install</strong><br>After looking through a lot of posts here about UAC and so forth, I'm not able to find the answer for this. Apologies if it's been discussed before.<br><br>I'd like to know if it's possible to set ALL installed files to Full Control for "user" level.<br><br>I have an install script using the Required Level set to admin, because we do HKLM writes and so forth. The problem is, after the install finishes ALL files are set to Read/Execute only to the user level. This makes it so our update software doesn't work (invalid rights).<br><br>Rather than force the user to "Run as Admin", I'm curious if it's possible to set all the files to Full Control for "user" level, maybe at the end of the install. Even if it takes some sort of system call?<br><br>I've installed a few other programs with UAC on, that don't seem to be aware of Vista (much like ours originally), and their files are not read/execute only. So I'm wondering if it's an NSIS thing?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">paraLogic</span><br><span class="post-time small text-muted">5th July 2007 04:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I guess I found a solution, maybe not the best, but I added :<br><br>ExecWait 'icacls "$INSTDIR" /grant BUILTIN\Users:F /T /Q'<br><br>To the end of the install section. Probably bad practice, eh?<br><br>Anyway to suppress the command prompt pop up?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th July 2007 06:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Very bad practice. You're allowing every user to modify executables all other users are running as well. That's a security breach. What you really should do is run the update mechanism as admin. If it happens when the program starts, have it pop-up UAC when the update itself runs. If it's a service running in the background, make it a real service, running under SYSTEM.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">paraLogic</span><br><span class="post-time small text-muted">5th July 2007 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by kichik</i><br><b>Very bad practice. You're allowing every user to modify executables all other users are running as well. That's a security breach. What you really should do is run the update mechanism as admin. If it happens when the program starts, have it pop-up UAC when the update itself runs. If it's a service running in the background, make it a real service, running under SYSTEM.</b></blockquote>We were doing the update as admin except the way our update works right now is that it runs first every time the app is launched. This forces a Allow/Deny prompt every time the app is opened. Our employer doesn't like that idea very much at all :P<br><br>We've been trying to rewrite the update procedure for over 1.5 years now, but we're never given enough dev time to do it. Maybe I can convince them now, since it is a security breach as you say.<br><br>Thanks for the tip.</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>