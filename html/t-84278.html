<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Variable request and code help"><title>Variable request and code help - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Variable request and code help</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=84278">Variable request and code help</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">bballer182</span><br><span class="post-time small text-muted">10th April 2002 05:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Variable request and code help</strong><br>I don't know what i'll do if there isn't another release of NSIS soon i'm just dying to get a new one. No just kinding i could live without, but there is one thing that would nice is to have $WINAMP and $WINAMP3 variables. I would do it my self and add it to the source and create my own but i don't know how to compile all of the source.<br><br>What i'm trying to do is convert the installer in my sig for WA3 Iconpack into an NSIS install. I have code here that you can look at</p><pre>
<code><font color="blue"><br>CRCCheck off<br>Name "WA3 Icons"<br>Caption 'WA3 Icons "Setup"'<br>BrandingText "Biff's custom install ver. 1.96"<br>MiscButtonText "&lt; Go Back" "Next Step &gt;" "I'm scared" "Close"<br>InstallButtonText "Do It"<br>DetailsButtonText "Show Me"<br>BGGradient 0000EE 00EE00  EE0000<br>InstProgressFlags smooth colored<br>InstallColors 50EE05 000000<br>OutFile "WA3_Icons.exe"<br>ComponentText "This Will Install Icons For WA3 Beta x"<br>EnabledBitmap "jarsonic-checked.bmp"<br>DisabledBitmap "jarsonic-unchecked.bmp"<br>DirText "It is perfered that you choose a place were the <br>files will stay safe!" "" "Look for it"<br>AutoCloseWindow false<br><br>Section <br>SetOutPath $INSTDIR<br>file "Installstuff\WA3Icons\file.ico"<br>file "Installstuff\WA3Icons\avs.ico"<br>file "Installstuff\WA3Icons\wal.ico"<br>file "Installstuff\WA3Icons\wac.ico"<br>SectionEnd<br><br>Section<br>WriteRegStr HKCR .mp1 "" Winamp3.poop<br>WriteRegStr HKCR .mp2 "" Winamp3.poop<br>WriteRegStr HKCR .mp3 "" Winamp3.poop<br>WriteRegStr HKCR .mpa "" Winamp3.poop<br>WriteRegStr HKCR Winamp3.poop "" "Winamp3 audio file"<br>WriteRegStr HKCR Winamp3.poop\DefaultIcon "" $INSTDIR\file.ico<br>WriteRegStr HKCR Winamp3.poop\shell "" Play<br>WriteRegStr HKCR Winamp3.poop\shell\Enqueue "" "&amp;Enqueue in Winamp"<br>WriteRegStr HKCR Winamp3.poop\shell\Enqueue\command\ "" '"<font color="red">$WINAMP3</font>\Studio.exe" /ADD "%1"'<br>SectionEnd<br></font></code>
</pre><br>
      So you can see how it would help because no matter where they wanted to put the icons i would still have a direct of getting to studio.exe no matter where they have WA3 installed.<br>
      <br>
      Not even close to being done with all of the reg keys.<br>
      But what i was looking for was a way to force the install to the WA3 dir instead of letting the user choose it and mess something up. Or there is always the option of buring it somewhere where they won't know where it went. I would much rather let them know where it is and give them fair warning what will happen if they mess.<br>
      <br>
      Oh and "poop" is a temp name of the key so far i still have a long ways to go. And i'm doing this to cut down on the size of the original<br>
      install made by mc^^^^<br>
      <br>
      any help or sugggestions would be greatly appriciated.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Schultz</span><br>
      <span class="post-time small text-muted">10th April 2002 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you can try and use the GetWinampInstPath function in the functions.htm file that is included with NSIS but you just have to modify the registry strip to search for<br>
      ReadRegStr $0 HKLM \<br>
      "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3" \<br>
      "UninstallString"<br>
      instead of<br>
      ReadRegStr $0 HKLM \<br>
      "Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp" \<br>
      "UninstallString"</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br>
      <span class="post-time small text-muted">10th April 2002 12:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">and also change the search for winamp.exe into a search for studio.exe as i described in the e-mail I've send to you, since the browser didn't allow me to post anything this morning...<br>
      <br>
      Greetz,<br>
      Hendri.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Smile2Me</span><br>
      <span class="post-time small text-muted">10th April 2002 13:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So here's the complete script...<br>
      <br>
      Good luck, hope this answers all questions,<br>
      greetz, Hendri.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bballer182</span><br>
      <span class="post-time small text-muted">10th April 2002 23:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">that was stupid of me i should have researched it a little more bofore bothering you guys. But thatnx for the help Smile2Me:winamp: :up:<br>
      <br>
      BTW i didn't get the e-mail you said you send so i tried to send on to my self and it didn't work and my e-mail address is correct.:eek:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bballer182</span><br>
      <span class="post-time small text-muted">11th April 2002 01:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK i'm all done and i have the source here for any one who wants to look.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>