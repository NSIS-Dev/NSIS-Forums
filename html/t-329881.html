<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Large string robust solutions" />

  <title>Large string robust solutions - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Large string robust solutions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329881">Large string robust solutions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">elliottslaughter</span><br />
      <span class="post-time small text-muted">21st April 2011 08:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Large string robust solutions</strong><br />
      I recently ran into the 1024 character string size limit, detailed here (among other places):<br />
      <br />
      <a href="http://nsis.sourceforge.net/Talk:Environmental_Variables:_append,_prepend,_and_remove_entries" target="_blank">http://nsis.sourceforge.net/Talk:Env...remove_entries</a><br />
      <a href="http://nsis.sourceforge.net/Special_Builds" target="_blank">http://nsis.sourceforge.net/Special_Builds</a><br />
      <br />
      While I know of the special build above (for 8192 length strings), this does not entirely satisfy my needs. For example, in an open source project, an unsuspecting developer might try to build my installer with a normal copy of NSIS and run into the 1024 limit. Also, it may theoretically be possible for environment variables longer than 8192 characters to exist (according to <a href="http://support.microsoft.com/?kbid=830473" target="_blank">http://support.microsoft.com/?kbid=830473</a> , the limit is around 32k, although cmd in current versions of Windows will ignore variables longer than 8k).<br />
      <br />
      Is there a way to robustly handle the case where I don't necessarily know that NSIS was specially configured to handle 8192? E.g. can I either check at installer build time that we are using a large strings NSIS, or can I get the string length limit in NSIS dynamically and check it against the environment variable length.<br />
      <br />
      If these have been answered elsewhere, links would be appreciated. (My searches have revealed only the special builds and discussions above, with no mentions of robust solutions.)<br />
      <br />
      Thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">21st April 2011 11:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Check ${NSIS_MAX_STRLEN} with !if and throw an !error.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">elliottslaughter</span><br />
      <span class="post-time small text-muted">25th April 2011 04:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, works great!</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
