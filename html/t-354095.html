<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MUI macros not working anymore in my script"><title>MUI macros not working anymore in my script - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MUI macros not working anymore in my script</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=354095">MUI macros not working anymore in my script</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">3rd January 2013 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MUI macros not working anymore in my script</strong><br>i've been away from nsis from months, in fact i haven't even touched my old windows machine lately. however, i found myself in the position that i needed to update an old script of mine, but all of a sudden it produces errors that didn't happen before.<br><br></p><pre>
<code>!insertmacro: MUI_PAGE_LICENSE<br>Error in macro MUI_INTERFACE on macroline 54<br>Error in macro MUI_PAGE_INIT on macroline 3<br>Error in macro MUI_PAGE_LICENSE on macroline 5</code>
</pre><br>
      <br>
      it took me a while to figure out, that for unknown reasons, the nsis projected which is sitting in a dropbox folder, suffered from synchronization problems. my custom ui, basically a modified MUI_nodesc, was 0kb in size. i changed the ui in the script to MUI_nodesc, but the problem persists. any ideas what could be the problem, all other resources by my script are intact. nothing was changed on the license page or the license itself since i last compiled my project successfully.<br>
      <br>
      edit: interestingly, the standard MUI compiles the script
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">T.Slappy</span><br>
      <span class="post-time small text-muted">3rd January 2013 19:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1) Why colon after !insertmacro ???<br>
      2) MUI_PAGE_LICENSE requires license file (parameter)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">3rd January 2013 20:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by T.Slappy</small><br>
        1) Why colon after !insertmacro ???
      </blockquote>ah, that was copied from the makensis window, it's not my actual code<br>
      <br>

      <blockquote>
        2) MUI_PAGE_LICENSE requires license file (parameter)
      </blockquote>my actual code goes like this (and as i said, it worked for years!)<br>
      <br>
      <pre>
<code>!define MUI_COMPONENTSPAGE_CHECKBITMAP "ui\yi-${LOWERCASE}.bmp"<br>!define MUI_ICON "ui\yi-${LOWERCASE}.ico"<br>!define MUI_UI "ui\nodesc.exe"<br>!define MUI_LICENSEPAGE<br>!define MUI_LICENSEPAGE_BGCOLOR "FFFFFF"<br>!define MUI_INSTFILESPAGE_COLORS "000000 FFFFFF"<br>!define MUI_INSTFILESPAGE_PROGRESSBAR "colored smooth"<br>!define MUI_BGCOLOR "0x1b1b1b"<br>...<br>!define MUI_LICENSEPAGE_TEXT_BOTTOM "$(LabelLicense)"<br>!define MUI_LICENSEPAGE_CHECKBOX<br>!insertmacro MUI_PAGE_LICENSE "license.txt"</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br>
      <span class="post-time small text-muted">3rd January 2013 21:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">"!define MUI_LICENSEPAGE" is supposed to do what?<br>
      <br>
      Anyway, I know the ChangeUI command does not output errors in all cases so make sure those UI exe files are not corrupt...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">4th January 2013 10:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Anders</small><br>
        "!define MUI_LICENSEPAGE" is supposed to do what?
      </blockquote>frankly, i don't know (or remember). it has been there since march 2009 and it never produced a problem in the 20 versions that came out since. anyway, commenting that line doesn't change a thing as i still get the same error from the compiler.<br>
      <br>
      reinstalled nsis to make sure MUI_nodesc isn't corrupted. no success. did the same in a clean vm. no success.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">4th January 2013 11:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">well, nevermind. i simply copied my gui modifications to <i>modern.exe</i> (at the cost of extra 2kb). i don't know what's wrong all of a sudden with <i>modern_nodesc.exe</i>, everybody knows nothing in nsis changed in over 4 years.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">T.Slappy</span><br>
      <span class="post-time small text-muted">4th January 2013 21:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Heh, one more time :) - Correct syntax is:<br>
      <b>!insertmacro MUI_PAGE_LICENSE "License.rtf"</b><br>
      <br>
      You used !define MUI_LICENSEPAGE (without parameter) which is definitely wrong for MUI2 (I think it is for MUI1).<br>
      <br>
      You cannot use MUI stuff in MUI2 script - either include MUI.nsh (and do not use MUI2 stuff) or update whole script to MUI2 ( so rewrite most of MUI1 commands).</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">6th January 2013 07:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">MUI1 and MUI2 use exactly the same commands. Only the internal implementation is different (IO vs nsDialogs), and MUI2 adds some variables for nsDialogs-based welcome/finish page customization.<br>
      <br>
      The MUI_LICENSEPAGE define was never used by MUI, as far as I know. It probably never did anything.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br>
      <span class="post-time small text-muted">8th January 2013 21:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by T.Slappy</small><br>
        <b>!insertmacro MUI_PAGE_LICENSE "License.rtf"</b>
      </blockquote>take a good look, that's exactly what i've been using in the last line. apparently and for unknown reason, there was a define that does nothing - and it had nothing to do with nsis no longer compiling my script.
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>