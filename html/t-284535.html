<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Selective compression"><title>Selective compression - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Selective compression</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=284535">Selective compression</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">MrBlunden</span><br><span class="post-time small text-muted">7th January 2008 10:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Selective compression</strong><br>There are some strings in my installation script that I need to be uncompressed, because I replace them dynmically, after the installer exists as an EXE. An example for such a string is "ChangeMe".<br><br>I tried to use "SetCompress off" before writing "ChangeMe" and "SetCompress auto" afterwards. So now my installer doesn't contain the "ChangeMe" strings when I'm opening them with a text viewer.<br><br>If I use SetCompress off once and turn compression off completely, the "ChangeMe" strings can be seen with a text viewer.<br><br>Any ideas how to accomplish this?<br><br>Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MrBlunden</span><br><span class="post-time small text-muted">7th January 2008 13:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry I was too tired when I phrased the previous post. Let me try again:<br><br>I want to use compression on my installer, but some parts I want to leave uncompressed. I know this is theoratically possible using "SetCompress off".<br><br>If I use SetCompress off once on the top of the script, and the installer is uncompressed entirely, strings such as "ChangeMe" are visible if you view the installer EXE with a text viewer.<br><br>So I want to compress all the parts that don't have "ChangeMe" inside them, and leave the ones that do uncompressed.<br><br>I'm trying to put "SetCompress off" before and "SetCompress auto" after lines that contain "ChangeMe", but then I'm not able to see "ChangeMe" with a text viewer in the installer EXE.<br><br>Any ideas why?<br><br>Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">7th January 2008 13:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">SetCompressor does not work on a line by line basis. It either turns compression on or it doesn't. Whatever last value you used for SetCompressor will be applied to the whole installer.<br><br>Maybe this is what you're after:<br><a href="http://nsis.sourceforge.net/ReadCustomerData" target="_blank">http://nsis.sourceforge.net/ReadCustomerData</a><br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">7th January 2008 22:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Afrow suggested the best solution for what you're probably looking for. There's also <a href="http://www.get-jabber.com/blog/index.php/2007/12/21/the-inner-workings-of-wwwget-jabbercom/" target="_blank">this</a>.<br><br>As for SetCompress, if it's set to off at the end of the script, the headers won't get compressed. It's the headers that contain the file names which I suppose you refer to when you say "ChangeMe". Any files added between SetCompress off and SetCompress auto will not have their content compressed. Their name, however, depends on the value used for the last SetCompress as explained.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">7th January 2008 22:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry I read that as SetCompressor, my bad :)<br><br>Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>