<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Another NSIS Self-Extractor"><title>Another NSIS Self-Extractor - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Another NSIS Self-Extractor</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213807">Another NSIS Self-Extractor</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Aaron's rod</span><br><span class="post-time small text-muted">21st April 2005 22:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Another NSIS Self-Extractor</strong><br>Hi! I'm new here.<br><br>Correct if I am wrong, but I'm going to break now Afrow UK's NSIS Self-Extractor monopoly. :)<br><br>So I made new NSIS Self-Extractor kit. It's based on sdbarker_tiny UI what I modified with Resource Hacker and I used Afrow UK's NSIS Self-Extractor as example (Afrow UK's define and macro system is mind blowing). This SE isn't even nearly exhaustive as Afrow UK's, but it does the job.<br><br>I probably should rename this SE kit to NSIS Self-Extractor lite or something to make a difference Afrow's SE kit, hmm maybe later.<br><br>I am not so great scripter/coder so if you know better way to do something or something is just wrong in my scripts please tell it to me.<br><br><br><font color="darkblue">So take a look.</font><br><br><a href="http://koti.mbnet.fi/ckv/images/ckvse2.png" target="_blank">http://koti.mbnet.fi/ckv/images/ckvse2.png</a><br><br><a href="http://koti.mbnet.fi/ckv/images/ckvse1.png" target="_blank">Supports also license page</a><br><a href="http://koti.mbnet.fi/ckv/images/ckvse3.png" target="_blank">Install (Extract) files page</a><br><br><font size="3"><b><a href="http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip" target="_blank">Download</a></b></font></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st April 2005 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Nice and simple :)<br><br>If you could change the name, I'd be grateful in case people do not realise they are two different kits.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Aaron's rod</span><br><span class="post-time small text-muted">26th April 2005 20:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>New version</strong><br><font size="3"><b><font color="orange">Update</font></b></font><br><br>Changes:</p><ul><li>UI improvements (checkbox &amp; radiobuttons license page)</li><li>Back button is now properly disabled</li><li>File replace prompt and checkbox to disable it</li><li>Open readme file function</li><li>Name changed to ckv Self-Extractor</li></ul><br>Some notes.<br>You cant use Open dir and replace prompt checkbox at the same time. If you use open dir function you cant use file replace prompt (will be fixed at next release).<br><br><font color="red">Note:</font><br>Heres my macro for file replacing. This works, but now I have to use two parameters (directory and file) to get it work right. Is there any better way to do this?<br><br>Also I am using +offset in the in MessageBox function there are no mention in the NSIS documentation that this would work (seem to work with me :) ). Is it valid? If it is someone should add mention of it in the NSIS documents.<br><br><pre>
<code><br>!insertmacro EXTRACT_FILE "" "license.txt"<br><br>!macro EXTRACT_FILE DIR FILE<br><br>  !ifdef USE_REPLACE<br>    StrCmp $checkb_val "0" 0 +5<br>    IfFileExists "$OUTDIR\${FILE}" 0 +4<br>      MessageBox MB_YESNOCANCEL "File...?" IDYES +3 IDCANCEL +5<br>      DetailPrint "Skipped by user: ${FILE}"<br>      Goto +2<br>      File "${DIR}${FILE}"<br>      Goto +2<br>      Abort<br>  !else<br>    File "${DIR}${FILE}"<br>  !endif<br><br>!macroend<br></code>
</pre><br>
      <font size="3"><b><a href="http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip" target="_blank">Download</a></b></font> ckv Self-Extractor + example<br>
      or load the attachment file
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">26th April 2005 21:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've used two params in my version.<br>
      <br>
      Relative jumps can be used on any flow-control instructions (including MessageBox).<br>
      However, relative jumps do not work for compile-time instructions (such as File). You need to use labels to jump over compile-time instructions properly.<br>
      If you use a relative jump (say Goto +2) before a compile-time instruction, you'll find that it jumps over everything including the next run-time instruction, which is usually not what one wants.<br>
      <br>
      To use labels in macro's that are going to be included many times, see this page:<br>
      <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=675&amp;instances=0,44" target="_blank">http://nsis.sourceforge.net/archive/...instances=0,44</a><br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Aaron's rod</span><br>
      <span class="post-time small text-muted">27th April 2005 10:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Stu. :)<br>
      But would this mean that even if you press <b>no</b> in the file overwrite prompt the file will be still overwritten? Or am i just confused? Because I am sure it don't overwrite files if you press no and it seems to work just like it should work.<br>
      <br>
      I did little search with google on NSIS documents.<br>
      <a href="http://2004.cusec.ca/doc/DocSrc/Section4.4.html#4.4" target="_blank">old NSIS document (2004): Relative Jumps</a><br>
      There was this note.<br>
      <i>"Note: relative jumps don't work with Exch, File..."</i><br>
      <br>
      <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.4" target="_blank">Current NSIS document: Relative Jumps</a><br>
      That note is gone.<br>
      <br>
      So maybe it's fixed. Maybe in 2.02<br>
      <a href="http://sourceforge.net/project/shownotes.php?release_id=277274" target="_blank">NSIS Changelog 2.02</a><br>
      <i>"Made relative jumps work with instructions that add multiple entries"</i><br>
      :confused:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">27th April 2005 13:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ah yes, you're right there :)<br>
      I'm an old school NSIS so I often miss new things :(<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Aaron's rod</span><br>
      <span class="post-time small text-muted">2nd May 2005 16:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: New version</strong><br>
      <font size="3"><b><font color="orange">Update</font></b></font><br>
      <br>
      Changes:</p>

      <ul>
        <li>UI improvements and two new UI's (tiny and simple)</li>

        <li>File overwrite prompt macro uses labels</li>

        <li>Can use open dir and overwrite prompt at the same time :D</li>
      </ul>Screens:<br>
      <a href="http://koti.mbnet.fi/ckv/images/ckvse5.png" target="_blank">Tiny UI is smaller than default UI (suprise)</a><br>
      <a href="http://koti.mbnet.fi/ckv/images/ckvse6.png" target="_blank">Simple UI is even smaller</a><br>
      <br>
      <font size="3"><b><a href="http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip" target="_blank">Download</a></b></font>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>