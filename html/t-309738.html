<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="system tray application icon issue" />

  <title>system tray application icon issue - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">system tray application icon issue</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=309738">system tray application icon issue</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">shahil</span><br />
      <span class="post-time small text-muted">10th August 2009 10:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>system tray application icon issue</strong><br />
      1 - my appication is running<br />
      2 - i install an upgrade<br />
      3 - it asks me to quit the application to continue upgrade<br />
      4 - on clickin yes, it quits the application but the icon of the application in the system tray still remains. it disappears only on move over on that image.<br />
      <br />
      i have tried using both the below mentioned commands individually and seperately.<br />
      <br />
      -&gt;nsExec::Exec '"$INSTDIR\Modules\${EXE_NAME}" /quit'<br />
      -&gt;KillProcDLL::KillProc "${EXE_NAME}"<br />
      <br />
      <br />
      any help is highly apprecited.<br />
      thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">10th August 2009 15:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just killing a process will never remove the tray icon, but since this is your application you have full control. The easy option is to find your apps main window based on the window class and then just send it WM_CLOSE (or if you need a "harder" exit, you could handle a specific WM_APP message and just remove the tray icon and call ExitProcess)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
