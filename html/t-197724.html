<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Dialog" />

  <title>Dialog - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Dialog</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197724">Dialog</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ookami</span><br />
      <span class="post-time small text-muted">28th October 2004 21:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Dialog</strong><br />
      I'm translating some old WISE installers to NSIS. I want to show a dialog from within an install section, e.g. asking a user if they want to allow the setup to manipulate certain files that are outside of the installed application's main directory, and then return to the installation progress display. In WISE, this works as expected just by popping up the dialog.<br />
      <br />
      I've got the display part working just fine in NSIS with InstallOptions calls, but the next\back\cancel buttons (and even the Windows minimize\maximize\close buttons) are all disabled. Consequently the installer simply freezes when I display the dialog, and I have to kill it through the task manager.<br />
      <br />
      Is what I'm trying to do even possible with NSIS, or is it something that is in the works (if it isn't already, it should be)?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">28th October 2004 23:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        asking a user if they want to allow the setup to manipulate certain files that are outside of the installed application's main directory, and then return to the installation progress display
      </blockquote>Are these questions have a YES or NO (or similar) as awnsers?<br />
      <br />
      If so, did you try <b>MessageBox</b> instruction from NSIS?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ookami</span><br />
      <span class="post-time small text-muted">29th October 2004 14:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried message boxes. Unfortunately, the text is too large, making the pop-up come out too wide and ugly, and the user input capabilities and limited to yes\no type button clicking. Thanks for the suggestion, but I'll pass.<br />
      <br />
      What I want to do is display simple ini-based dialogs that allow you to capture user input in multiple ways. I've worked around it for now by changing the flow of my setups so the dialogs pop up before the instfiles pages start, and I just save the user's selections for the appropriate sections. But this changes makes the scripts difficult to read. I was just looking for a way to simplify things.<br />
      <br />
      I also tried using GetDlgItem and EnableWindow to turn the "Next" button back on. It worked, but when I clicked "Next", the entire setup application just crashed and closed with no error and without actually going to the next page.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">29th October 2004 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">InstallOptions to create customized dialogs. Read the docs about them.<br />
      <br />
      They are easy...<br />
      What are you using modern or classic UI?<br />
      You can use pre, show or leave to add your dialog...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ookami</span><br />
      <span class="post-time small text-muted">29th October 2004 16:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Again my friend I've already tried it. Reading the docs was the easy part (I work in the software industry, and we have customers that don't read the docs before asking questions, so I know how frustrating it is). The problem is with actually using InstallOptions from within a page that is already being displayed. It doesn't change/maintain state properly.<br />
      <br />
      When I display a dialog using InstallOptions from within a section DURING the instfiles page (ie, display a dialog using InstallOptions::display between a "Section" and it's matching "SectionEnd") I have multiple problems. The back\next\cancel buttons are disabled, as well as the Windows (maximize\minimize\close) buttons in the top right, thus the setup freezes and can no longer move forward and must be killed through TaskManager. But if I use GetDlgItem and EnableWindow to force the "next" button to be operational, clicking it causes the setup application to crash with no warning.<br />
      <br />
      It just makes sense to pop up complicated dialogs at certain times to give the user a robust interface with which to decide what to do. For example, if an install section is supposed to copy files into a directory for another application and it can't find that application's root directory (missing registry keys, etc) and you want to show a directory browsing dialog. You can argue that it makes more sense to show these dialogs before the instfiles page starts up, but in some cases (hopefully a large percentage of the time in the previous example) you'll skip the page, which means you'll skip the page (again, hopefully a large percentage of the time in the previous example) that shows the "Next" button as "Install". Putting the dialogs after the install sections just means that your progress bar no longer accurately reflects what you're doing because you'll be copying and installing files after the progress bar says you're done.<br />
      <br />
      I'll admit that I could be severely abusing the concepts of NSIS, but I still think it should be possible to display a dialog, not just a messagebox, from within an install section. I would like to see the issue addressed since other people can benefit from a more robust installer. But like I said, for now I have a work around however illogical the page order may seem to me.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">29th October 2004 18:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">InstallOptions is designed to work with the Page command, not inside sections. The idea is that you collect all required information before the installation begins and don't stop to ask questions once the installation begins. This also makes it much easier to support silent installation.<br />
      <br />
      But, if you really want to show an InstallOptions page in a section, a modification of InstallOptions that allows it is available. I'm pretty sure someone wrote one once and posted it on the forum, but I can't find it right now. I'll let you know if I find it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ookami</span><br />
      <span class="post-time small text-muted">29th October 2004 19:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Like I said, I may be abusing the concepts of NSIS.<br />
      <br />
      It does make it easier to support silent installers, but some developers may not be looking for that. The main reasion behind the project I'm working on (translating WISE to NSIS) is to make our installers prettier (take that as a compliment). But silent doesn't really help that, does it? ;)<br />
      <br />
      I say more support for more functionality, but I also know that in the end it's all left up to the whim of what you've got time for. I think I'll just stick with what I've got for now, and maybe if revisit the issue if I ever to need to modify the installers again.<br />
      <br />
      Thanks for your help, and keep up the good work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">29th October 2004 22:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use InstallOptionsEx (link on my signature). It has a control called "ProgressBar" which you can use until I or kichik can verify it. It's on beta, so I'll be not responsible for problems.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
