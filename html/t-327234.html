<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to change cursor when it is over the definite control?"><title>How to change cursor when it is over the definite control? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to change cursor when it is over the definite control?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327234">How to change cursor when it is over the definite control?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">oldfriend</span><br><span class="post-time small text-muted">13th February 2011 00:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to change cursor when it is over the definite control?</strong><br>&nbsp; Actually this is my question.<br><br>I have an image on my custom page and it is clickable (works like a link) but nobody knows it works like thine because cursor is not changed from ARROW to HAND.<br><br>Any thoughts how to fix this?<br><br>P.S. I know about <a href="http://sourceforge.net/tracker/?func=detail&amp;aid=2129316&amp;group_id=22049&amp;atid=373088" target="_blank">http://sourceforge.net/tracker/?func...49&amp;atid=373088</a> but anyway maybe ...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oldfriend</span><br><span class="post-time small text-muted">13th February 2011 05:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Using GetWindowRect and GetCursorPos I almost did what I wanted. But once again a problem))<br><br>Seems the only plug-in which could change cursor - SetCursor - doesn't change pointer over the custom control. Damn ...<br><br>Any thoughts?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oldfriend</span><br><span class="post-time small text-muted">13th February 2011 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Seems I'm talking to myself but anyway ...<br><br>It is possible to load own cursor using LoadImage and SetSystemCursor, but hope you agree it would be stupidly as user may have his own pointers scheme.<br><br>New question)) Does anyone know <b>how to load exactly system cursor using SetSystemCursor function?</b></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jedantamobgd</span><br><span class="post-time small text-muted">13th February 2011 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>:)</strong><br>&nbsp; :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">13th February 2011 22:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://nsis.sourceforge.net/SetCursor_Script_Header" target="_blank">http://nsis.sourceforge.net/SetCursor_Script_Header</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oldfriend</span><br><span class="post-time small text-muted">13th February 2011 23:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you, jpderuiter.<br><br>The only question: why this macros changes cursor everywhere but not above custom control (image)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">13th February 2011 23:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The simple answer is, how should it know that that is what you want? In other words, to do what you want requires more code. Unfortunately, something like this is not doable from NSIS code. You will need to write a plug-in to do it or modify nsDialogs (or InstallOptions). nsDialogs and InstallOptions already change the cursor for links so it would be very similar to that.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oldfriend</span><br><span class="post-time small text-muted">13th February 2011 23:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Actually there is nothing special in my code. Almost everything was given from this forum.<br>There is an image which should work like a link. It is dome.<br><br>The only problem is cursor changing. For this purpose logically I have to know rectangle of the image and change cursor pointer when it is out of it's area. It is done too (checked). Unfortunately, exactly above the image SetSystemCursor magically doesn't work :(<br><br></p><pre>
<code>
OnClick
<br>   ExecShell "open" "http://google.com"
<br>&gt;FunctionEnd
<br><br>&gt;Function nsImgLink
<br>   Push$0
<br>   Push$1
<br><br>   nsDialogs</code>::Create 1018
<br>   Pop$0
<br><br>  ${NSD_CreateBitmap} 0 0 100% 100% ""
<br>  Pop $0
<br>  ${NSD_SetImage} $0 $PLUGINSDIRimagefinish.bmp $1
<br>   Push$1
<br><br>  ${NSD_OnClick} $0 OnClick
<br>  var /Global ImageHWND
<br><br>   StrCpy $ImageHWND$0
<br><br>   GetDlgItem $R0 $HWNDPARENT 2
<br>   SendMessage $R0${WM_SETTEXT} `` `STR:&amp;Install&gt;&gt;`
<br><br>   System::Call "User32::SetFocus(i) i ($R0) .r0"
<br>  SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $R0 1
<br>  ${NSD_CreateTimer} OnTimer 500
<br><br>   nsDialogs::Show
<br><br>   Pop$1
<br>  ${NSD_FreeImage} $1
<br><br>   Pop$1
<br>   Pop$0
<br>FunctionEnd
<br><br>&gt;Function Process
<br>    System::Alloc 56
<br>    Pop$0
<br>    System::Call "*$0(i 56)"
<br>   System::Call "User32::GetWindowInfo(i $ImageHWND,i r0) i .r1"
<br><br>    ## rcWindow
<br>       IntOp $R0 $0 + 4
<br>        System::Call "*$R0(i .r1,i .r2,i .r3,i .r4)"
<br><br>    ## rcClient
<br>       IntOp $R0 $0 + 20
<br>        System::Call "*$R0(i .r5,i .r6,i .r7,i .r8)"
<br>       System::Free $0
<br><br>    Pop $hwnd
<br>    System::Call "*(i, i, i, i) i .r1"
<br>   System::Call "User32::GetWindowRect(i, i) i ($ImageHWND, r1) .r2"
<br>   System::Call "*$1(i, i, i, i) i (.r2, .r3, .r4, .r5)"
<br><br>&gt;;   Get mouse cursors position on screen
<br>    System::Call "*(l, l) i .r6"
<br>   System::Call "User32::GetCursorPos(i) i (r6) .r7"
<br>   System::Call "*$6(i, i) i (.r7, .r8)"
<br><br>&gt;;   Derive mouse cursor position relative to control
<br>    IntOp$0 $7 - $2
<br>    IntOp$1 $8 - $3
<br><br>    ${If} $0 &gt;= 0
<br>          ${If} $0 &lt; 450
<br>               ${If} $1 &gt;= 0
<br>                     ${If} $1 &lt; 225
<br>                           ${SetSystemCursor} OCR_HAND
<br>                      ${Else}
<br>                            ${SetSystemCursor} OCR_NORMAL
<br>                      ${EndIf}
<br>                ${Else}
<br>                      ${SetSystemCursor} OCR_NORMAL
<br>                ${EndIf}
<br>           ${Else}
<br>                  ${SetSystemCursor} OCR_NORMAL
<br>           ${EndIf}
<br>     ${Else}
<br>           ${SetSystemCursor} OCR_NORMAL
<br>     ${EndIf}
<br>&gt;FunctionEnd
<br><br>&gt;Function OnTimer
<br>         call Process
<br>FunctionEnd 
<br>&gt;

</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">oldfriend</span><br>
      <span class="post-time small text-muted">14th February 2011 00:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">seems I did it :)<br>
      <br>
      SetSystemCursor works with the parent window only and the is no way to point what window I need cursor to be changed on. So in the SetCursor.nsh manually had to change handle from the parent window to handle of my image.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>