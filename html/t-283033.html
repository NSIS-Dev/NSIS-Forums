<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="AccessControl: Change Inheritance without copying inherited permissions" />

  <title>AccessControl: Change Inheritance without copying inherited permissions - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">AccessControl: Change Inheritance without copying inherited permissions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283033">AccessControl: Change Inheritance without copying inherited permissions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CoBrad</span><br />
      <span class="post-time small text-muted">11th December 2007 14:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>AccessControl: Change Inheritance without copying inherited permissions</strong><br />
      I'm working on an installer which needs to have specific permissions set on a directory. This works well using the "DisableFileInheritance" function, except for one specific thing in my case.<br />
      <br />
      The DisableFileInheritance function seems to use the newer "SetNamedSecurityInfo" function, and the behavior of this is that, when disabling inheritance, it automatically makes copies of the permissions that were being inherited. My desired behavior is to not do this, and to only end up with the properties that have been specified on that directory.<br />
      <br />
      Has anyone run into this and come up with a solution?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th December 2007 17:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Won't calling AccessControl::ClearOnFile on the directory do the trick?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CoBrad</span><br />
      <span class="post-time small text-muted">12th December 2007 18:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">D'OH! I didn't even see those new API's that were added. Guess the wiki wasn't completely up to date.<br />
      <br />
      Anyway, thanks for the pointer. Looks like that'll work if I do:<br />
      <br />
      DisableFileInheritance &lt;dir&gt; // This will copy the currently inherited permissions, making them non-inherited.<br />
      ClearOnFile &lt;Administrators group&gt; &lt;dir&gt; // This will remove all non-inherited permissions and replace it with just these permissions<br />
      // Add other permissions that I want.<br />
      <br />
      A little bit of a roundabout way to do it, but it ends up working just fine.<br />
      <br />
      Thanks again for the tip!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th December 2007 19:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, I actually took those from the Wiki page. Where is it not up-to-date?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th December 2007 19:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeh that page does need updating. It's missing the functions from under the Functions heading.<br />
      <br />
      CoBrad, that is the way to do it!<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
