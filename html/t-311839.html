<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Passing a parameter to the .nsi file"><title>Passing a parameter to the .nsi file - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Passing a parameter to the .nsi file</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=311839">Passing a parameter to the .nsi file</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 09:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Passing a parameter to the .exe file</strong><br>Hello,<br><br>I developped an NSIS installer who works.<br><br>But now I would like to modify its reaction when it is called with different parameters.<br><br>For exemple "my_intaller.exe /P parameter" (where /P significate that the parameter exists and parameter is its value) will allow the installer to know that it has a page to show that it doesn't show if the parameter doesn't exist.<br><br>I really don't know how to control if this parameter exists or not and how to read its value(s) (there can be many), could you please help me, it is very important and urgent.<br><br>Thank you very much.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th September 2009 10:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Have you tried googling for 'parameter NSIS'?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 10:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sure I did it, but I can't find a suitable answer to my case, I don't know how to read if there is a parameter and it's value. I found solutions to compile a new .exe with parameters but it is not that I want to do.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 11:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found this kind of answer but I don't understand what is the variable $CMDLINE and how it is passed and to read it. The description of this Funtion says "This function gets all parameters given to the installer on the command-line."<br><br><br>; GetParameters<br>; input, none<br>; output, top of stack (replaces, with e.g. whatever)<br>; modifies no other variables.<br><br>Function GetParameters<br><br>Push $R0<br>Push $R1<br>Push $R2<br>Push $R3<br><br>StrCpy $R2 1<br>StrLen $R3 $CMDLINE<br><br>;Check for quote or space<br>StrCpy $R0 $CMDLINE $R2<br>StrCmp $R0 '"' 0 +3<br>StrCpy $R1 '"'<br>Goto loop<br>StrCpy $R1 " "<br><br>loop:<br>IntOp $R2 $R2 + 1<br>StrCpy $R0 $CMDLINE 1 $R2<br>StrCmp $R0 $R1 get<br>StrCmp $R2 $R3 get<br>Goto loop<br><br>get:<br>IntOp $R2 $R2 + 1<br>StrCpy $R0 $CMDLINE 1 $R2<br>StrCmp $R0 " " get<br>StrCpy $R0 $CMDLINE "" $R2<br><br>Pop $R3<br>Pop $R2<br>Pop $R1<br>Exch $R0<br><br>FunctionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 11:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Is it possible to show the license page just when there is a parameter add to the .exe file ?<br><br>Someone could tell me how to do, because the '!insertmacro MUI_PAGE_LICENSE "license.rtf"' line can't be add in a function and the function "${If} ..." has to be include in a function, how to do ???</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 12:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found this post who seems to convain perfectly to my problem<br><br>forums.winamp.com/showthread.php?postid=2211896<br><br>but I don't uderstand how to modify the third part named parseParameters function to adapt it to my case. For exemple I need to show the license page IF there is a parameter and only in this case.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">9th September 2009 13:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use the license page Pre function to call 'abort' unless the parameter was supplied. Abort in a pre function will skip the page.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">9th September 2009 15:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use GetParameters and GetOptions from the manual.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Icks92</span><br><span class="post-time small text-muted">9th September 2009 15:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What is the Pre Function ?<br><br>I have now :<br><br>!insertmacro MUI_PAGE_WELCOME<br>!insertmacro GetParameters<br>!insertmacro GetOptions<br>!include "pages\licenseshow.nsh"<br><br>... in my .nsi file but the license page appears before the welcome one.<br><br>Does someone have a explanation ?</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>