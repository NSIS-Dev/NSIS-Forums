<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Help on making an installer"><title>Help on making an installer - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Help on making an installer</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274449">Help on making an installer</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">HaydenDevlin</span><br><span class="post-time small text-muted">16th July 2007 11:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Help on making an installer</strong><br>Hello,<br><br>I posted a week or so ago some inquisitions into what I can do with NSIS, but I didn't know the extent of what I need to do, but now I do and I would like to know if anyone know if NSIS is the best way to do it, and can offer me some advice on how to create my installer and uninstaller.<br><br>I need to make an installer that will install my game correctly, which is the easy bit. The uninstaller needs to delete everything, which is again pretty simple. But the complexity of my situation is that program is going to have periodic updates and add-ons made for it, all of which will need to be stored into the current game install, and the uninstaller must be able to allow the user to delete different ad-ons as they wish, without deleting any files that may stop the program functioning. i.e. the ad-ons will contain code that already exists within the working game so that the add-on itself is a working unit, but the subsequent uninstall of that add-on must only delete the files that are not used by the rest of the program. An example to highlight what I am trying to say is this; add-ons are likely to be new levels for the program (which is a game), these levels will use common components that all levels of the game use (and hence are part of the main install) and will also be part of the add-on (so that it is a functioning unit in itself). When the add-on is installed these components that already exist from the main install can either be overwritten or not, but when the add-on is uninstalled they must not be deleted or the game will no longer work.<br><br>The current idea is to attach GUID's to files on install and log what GUID's belong to what installs, and segragate them accordingly, but I am clueless as to how to do this using NSIS. Does anyone know how to do this kind of thing, or if it is possible in NSIS (or anyother installer software), or am I going to have to create an installer/uninstaller from scratch? If anyone has had to do this kind of thing before I would really appreciate some tips and advice as to how to do it!<br><br>Thanks in advance,<br><br>Hayden Devlin</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th July 2007 11:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have written updating software in NSIS. The way I would go about this is to have an INI file containing a list of updates and their corresponding files. The INI entries would have to be created at run time after the update download has completed. What you could do (what I did) is to extract the update to a temporary folder first and loop through the extracted files to see which of them already exists. If not, then add that file to the INI file for deletion.<br><br>You can use the INI file to build a list of add-ons to uninstall then also. You could use the EmbeddedLists plugin to do this.<br><br>The only complication I found with this system is if a file is shared by two or more add-ons as you have pointed out. The first add-on to install this file will have it marked for deletion because it did not already exist. However, the second file will not mark it for deletion because it was already installed and therefore assumes it is part of the game. Now, what happens when the user uninstalles the first add-on... the second add-on will cease to function correctly. My solution was for each file to be uninstalled, they'd be looked for in other add-on INI entries first (like a dependency check).<br><br>Hope that helps.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">HaydenDevlin</span><br><span class="post-time small text-muted">16th July 2007 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Did you do all that from NSIS or did you use a programming language like C++ to do the file reading and writing and import it like a plugin or something?<br><br>Cheers,<br><br>Hayden Devlin</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>