<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="MBCS patches"><title>MBCS patches - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">MBCS patches</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=94006">MBCS patches</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Sangpil Yoon</span><br><span class="post-time small text-muted">10th July 2002 06:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>MBCS patches</strong><br>I found out that if I use Korean characters in the Name property and doesn't specify the Caption, or if I use Korean chars in the InstallDir, the installer messes up the display.<br>Here are the patches. I want these to be accepted so that I won't have to apply the same patches every time new version is released. :)<br><br>diff -r -C2 src1/build.cpp src2/build.cpp<br>*** src1/build.cpp Wed Jul 10 12:16:52 2002<br>--- src2/build.cpp Thu Jul 4 11:47:46 2002<br>***************<br>*** 1268,1272 ****<br>char buf[1024];<br>wsprintf(buf,"%s Setup",build_strlist.get()+build_header.common.name_ptr);<br>! build_header.common.caption_ptr=add_string_main(buf,0);<br>}<br><br>--- 1268,1272 ----<br>char buf[1024];<br>wsprintf(buf,"%s Setup",build_strlist.get()+build_header.common.name_ptr);<br>! build_header.common.caption_ptr=add_string_main(buf);<br>}<br><br>diff -r -C2 src1/exehead/Ui.c src2/exehead/Ui.c<br>*** src1/exehead/Ui.c Wed Jul 10 12:17:55 2002<br>--- src2/exehead/Ui.c Thu Jul 4 18:10:19 2002<br>***************<br>*** 511,514 ****<br>--- 511,515 ----<br>const char *post_str;<br>const char *p;<br>+ char proc_str[NSIS_MAX_STRLEN];<br>IMalloc *m;<br>SHGetPathFromIDList( idlist, name );<br>***************<br>*** 519,523 ****<br>m-&gt;lpVtbl-&gt;Release(m);<br>}<br>! post_str=GetStringFromStringTab(g_inst_header-&gt;install_directory_ptr);<br><br>p=scanendslash(post_str);<br>--- 520,525 ----<br>m-&gt;lpVtbl-&gt;Release(m);<br>}<br>! process_string_fromtab(proc_str, g_inst_header-&gt;install_directory_ptr);<br>! post_str = proc_str;<br><br>p=scanendslash(post_str);</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">10th July 2002 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why do you need to change:<br><br></p><pre>
<code>build_header.common.caption_ptr=add_string_main(buf,0);</code>
</pre><br><br>to<br><br><pre>
<code>build_header.common.caption_ptr=add_string_main(buf);</code>
</pre></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">veekee</span><br><span class="post-time small text-muted">10th July 2002 18:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">as Sangpil Yoon, when using some french special caracters like ç é è à, these are just skiped in the title bar (using Name or Compiling makensis using french strings) !<br>I hope this will be corrected in the news release :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">10th July 2002 19:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">-</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">10th July 2002 20:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Nevermind my previous post. I see why that is not working.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">veekee</span><br><span class="post-time small text-muted">10th July 2002 20:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I this could be corrected, this would be a great thing for me :)<br>thanks a lot about that :up:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rainwater</span><br><span class="post-time small text-muted">10th July 2002 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Try my updated version of NSIS 2.0a1 <a href="http://www.robertrainwater.com/nsis/nsis20a1.exe" target="_blank">here</a>. Let me know if this fixes the problems.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">veekee</span><br><span class="post-time small text-muted">10th July 2002 20:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">corrected in the title bar, but another bug has appear in the select directory caption !<br>When using<br>Name "Yahoo! 5 é fr"<br><br>This displays "Select the directory to install Yahoo! 5 ÿé fr in :"<br>:D hey hey, still some work, but thing are better ;)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>