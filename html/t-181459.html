<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="confusion with variables..."><title>confusion with variables... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">confusion with variables...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=181459">confusion with variables...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">28th May 2004 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>confusion with variables...</strong><br>Hi all!<br><br>I am a bit confused with the following function included in the InstallOptions docu:<br><br>Function ValidateCustom<br><br>ReadINIStr $R0 "$PLUGINSDIR\test.ini" "Field 1" "State"<br>StrCmp $0 "" 0 +3<br>MessageBox MB_ICONEXCLAMATION|MB_OK "Please enter your name."<br>Abort<br><br>FunctionEnd<br><br>Isn't the value stored in $R0? so then why do you compare $0? thanxs!<br><br>cheers,<br>alej</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th May 2004 14:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Both should be either $0 or $R0. $0 and $R0 are not the same variable.<br><br>Fixed, thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">28th May 2004 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok i was getting a bit confused....another thing regarding this example, what does it mean the following from the 'return value' paragraph?<br><br>Usually, you don't need to check this value, but you still have to remove it from the stack (have a look at the example above).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th May 2004 14:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The return value is the value InstallOptions pushes on the stack. It's usually "success" but can be "back", "cancel" or "error" IIRC.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">28th May 2004 14:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">yep this i get but we need to manually remove it from the stack every time??</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">28th May 2004 15:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That refers to the usage of Pop which gets the top item on the stack and removes it. As mentioned in the documentation, the example shows it. The examples outside of the documentation show this too.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">28th May 2004 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">aha, ok thought there was something special to be done with the return value. thanxs!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">1st June 2004 14:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">upsss, $R0 will still be valid out of the function?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">1st June 2004 16:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yes.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">1st June 2004 16:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">but i try to use it and instead of the value i get 'success'.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">1st June 2004 16:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Then you stored the return value from the stack in $R0 too.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">1st June 2004 17:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">and how do i know that?<br><br>here is my code:<br><br>Function SetParams ;FunctionName defined with Page command<br><br>InitPluginsDir<br>File /oname=$PLUGINSDIR\params.ini params.ini<br><br>;Display the Install Options dialog<br><br>Push $R0<br><br>InstallOptions::dialog $PLUGINSDIR\params.ini<br>Pop $R0<br><br>FunctionEnd<br><br>Function ValidateParams<br><br>ReadINIStr $R0 "$PLUGINSDIR\params.ini" "Field 2" "State"<br>MessageBox MB_ICONEXCLAMATION|MB_OK $R0<br>StrCmp $R0 "" 0 +3<br>MessageBox MB_ICONEXCLAMATION|MB_OK "Please enter an address."<br>Abort<br><br>FunctionEnd</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">1st June 2004 17:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you remove Push $R0 and replace Pop $R0 with Pop $R1 it will work fine.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">almoes</span><br><span class="post-time small text-muted">1st June 2004 17:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">ok now i understand! :-S</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>