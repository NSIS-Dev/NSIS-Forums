<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Component Manager"><title>Component Manager - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Component Manager</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=231365">Component Manager</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">dandaman32</span><br><span class="post-time small text-muted">18th November 2005 23:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Component Manager</strong><br>I have created a new way to automatically handle repair, adding/removing components, and removal (uninstall) through dynamic script generation. I call it <a href="http://xpui.sf.net/compmgr" target="_blank">Component Manager</a>, and I have already released the first beta.<br><br>Component Manager (CM for short :P ) replaces the Section, SectionEnd, File, CopyFiles, and SetOutPath commands in NSIS with its own modifications, allowing for a list of files, directories, componens, and (soon) shortcuts to be created without using an MSI-style database system. CM is kind of big (180-200KB for the runtime incl. the ExperienceUI) but it makes larger programs with a lot of optional components (like Winamp) easy to repair, modify, and remove, plus the installer is much more efficient. If you've used Winamp recently, you'll notice that it deletes ALL AVS scenes, MilkDrop scenes, etc. when you uninstall it. It leaves plugins and skins (last I checked) but not much else. With CM, a list of files is created while the script is compiled, meaning that each file is logged, but at compile time, and that means only, like, 2 lines of code for each file instead of a huge database in the Registry.<br><br>CM's only in beta, so it might (and probably does) have bugs. One bug in particular is it works great with the ExperienceUI, somewhat with the Modern UI, and hardly at all with the UltraModern UI. I haven't tried it with the InstallSpider UI yet.<br><br>Behind the scenes, is uses &lt;Program Files&gt;\Common Files\NSIS Installation Data\ComponentDatabase.ini to keep track of which components are installed. You can't change this filename yet, but I want to make it possible to write to either an INI or a registry key.<br><br>Links:<br><a href="http://nsis.sf.net/Component_Manager" target="_blank">Wiki Page</a><br><a href="http://xpui.sf.net/compmgr" target="_blank">Website</a><br><a href="http://xpui.sf.net/compmgr/?sec=downloads" target="_blank">Downloads</a><br><a href="http://xpui.sf.net/forum/?c=2" target="_blank">Support forum</a><br><br>-dandaman32</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">19th November 2005 10:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This looks very nice!<br>I'll try it some day if I ever need to create a big installer.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dandaman32</span><br><span class="post-time small text-muted">21st November 2005 04:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Forgot to note in documentation:<br>${File} command does NOT take wildcards - will try to implement in the future.<br><br>-dandaman32</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">21st November 2005 15:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">To implement wildcards with my Self-Extractor I had to use an external executable.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JCD29</span><br><span class="post-time small text-muted">21st November 2005 22:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I don't understand<br>I don't manage compiling the example based on your CM...is it normal ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dandaman32</span><br><span class="post-time small text-muted">22nd November 2005 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'm not sure what you mean by "compiling the example based on my CM"...could you provide more details please?<br><br>-dandaman32</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">bhaelochon</span><br><span class="post-time small text-muted">22nd November 2005 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">He can't compile the example based on your <b>C</b>omponent <b>M</b>anager. ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dandaman32</span><br><span class="post-time small text-muted">22nd November 2005 16:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Afrow UK</i><br><b>To implement wildcards with my Self-Extractor I had to use an external executable.</b></blockquote>How so? The NSIS 2.11 !tempfile, !appendfile, and !delfile commands would probably be best, but CM includes support for &lt;=2.10 with an external file-writing utility. It's very limited (files must be under 8kb, and lines must be under 1kb) but it works.<br><br><blockquote>He can't compile the example based on your <b>C</b>omponent <b>M</b>anager ;)</blockquote>I see..."based on"? If you're getting compile errors, JCD29, what error are you getting? I tried installing CM on a fresh copy of NSIS, and it worked fine. I didn't put a check for this in the installer, but CM requires Windows XP or some files won't copy. If you really want to know, these files are:<br><br>&lt;Program Files&gt;\Windows NT\Accessories\Wordpad.exe<br>&lt;Program Files&gt;\Windows NT\Accessories\Mswrd6.wpc<br>&lt;Program Files&gt;\Windows NT\Accessories\Mswrd8.wpc<br>&lt;Program Files&gt;\Windows NT\Accessories\write.wpc<br>&lt;Windows&gt;\Notepad.exe<br><br>All of these files go to &lt;NSIS&gt;\Examples\ComponentManager\Data.<br><br>If you aren't using Windows XP (or maybe Win2000) these files will be in &lt;Program Files&gt;\Accessories - I think, it's been a year and a half since I upgraded to Windows XP from Windows ME.<br><br>I copy them around your machine because they're too big to include in the installer, plus I don't want to help pirate Windows components.<br><br>-dandaman32</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>