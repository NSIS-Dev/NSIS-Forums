<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="ini file and nsi file problem"><title>ini file and nsi file problem - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">ini file and nsi file problem</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302771">ini file and nsi file problem</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">4th February 2009 10:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>ini file and nsi file problem</strong><br>here i attached my INI file and NSI file.<br>in korea, it's hard to find an example or sample of NSI script. and i know i'm a quiet slow learner. but i'm working hard.<br><br>===== my folder structre: ==========<br>1280WTF<br>1680WTF<br>1680bifWTF<br>data<br>etc<br>Fonts<br>Interface<br>Raid<br><br>now i have 2 questions.<br>Q1. how can i choose 1 of 3 WTF folders?<br>i really don't know how so i tried to copy every folders first. and then if i choose one by clicking radiobutton, the installer should rename it to "WFT" and erage other 2 WFT folders. but it doesn't work.<br>when i choose 1280WFT, i want it to extract 1280WFT, data, etc, Fonts, Interface and Raid. with check box, it works but i want to make it with radiobutton because i want to show the users resolution image.<br><br>Q2. when i use<br>" File /oname=$PLUGINSDIR\AccountInf.ini "AccountInf.ini"<br>" File /oname=$PLUGINSDIR\AccountInf1.ini "AccountInf1.ini"<br>background color of INI file doesn't match.<br><br><a href="http://wow.somegate.com/upload/joe1202_1233743714_back.jpg" target="_blank">http://wow.somegate.com/upload/joe12...43714_back.jpg</a><br><br>i want this color looks natural<br>please, give me some hints, i'm ready to study and learn!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">4th February 2009 15:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">For question 1, I'd just use the custom page to set your own variables. Then, deal with the folders during the actual install (from within the sections). You may have to come up with your own logic in the page's leave function.<br><br>For question #2 (the screen background), have a look at the UMUI thread here: <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=284480&amp;highlight=UMUI+installoptions" target="_blank">http://forums.winamp.com/showthread....installoptions</a><br><br>There's a post that reads like this:</p><blockquote>If you want your page will be automatically skinned you have to use the INSTALLOPTIONS_DISPLAY or INSTALLOPTIONS_DISPLAY_RETURN macros.<br>The init dialog doesn't do this because if you set your own color into your pre function thes will be erase by the INSTALLOPTIONS_SHOW, INSTALLOPTIONS_SHOW_RETURN macros.</blockquote>You should probably also read the UMUI documentation to see if there are any other special needs. (Personally, I've never used UMUI, so I don't have a whole lot of hands-on experience.)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">4th February 2009 21:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">thank you Comperio. Q2 has solved.<br>now i'm trying to write a page funtion for chooseing forder which to install<br>your advises are always always helpful to begginers like me!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">5th February 2009 03:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">can someone give me a hint about usage of radiobutton?<br>i don't have any knowledge about programming and<br><br>i tried write my script like ============================<br>Function MonitorLeave<br>; At this point the user has either pressed Next or one of our custom buttons<br>; We find out which by reading from the INI file<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Settings" "State"<br>${Unless} $0 = 0<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 4" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 7" "HWND"<br>ShowWindow $1 $0<br>StrCmp $0 4 normal1280<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 5" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 8" "HWND"<br>StrCmp $0 5 widenormal<br>ShowWindow $1 $0<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 6" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 9" "HWND"<br>StrCmp $0 6 widebig<br>ShowWindow $1 $0<br>abort<br><br>normal1280:<br>!insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION "$PLUGINSDIR\AccountInf.ini" "Field 4" "State"<br>SendMessage $INI_RESOLUTION ${WM_SETTEXT} 0 "STR:"<br><br>widenormal:<br>!insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION "$PLUGINSDIR\AccountInf.ini" "Field 5" "State"<br>SendMessage $INI_RESOLUTION ${WM_SETTEXT} 0 "STR:"<br><br>widebig:<br>!insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION "$PLUGINSDIR\AccountInf.ini" "Field 6" "State"<br>SendMessage $INI_RESOLUTION ${WM_SETTEXT} 0 "STR:"<br><br>StrCmp $INI_RESOLUTION 4 copy1280<br>StrCmp $INI_RESOLUTION 5 copy1680<br>StrCmp $INI_RESOLUTION 6 copy1680big<br><br>copy1280:<br>File /a /r "F:\boddalheeUI\1280WTF"<br>Rename "$INSTDIR\1280WTF" "$INSTDIR\WFT"<br>Goto end<br>copy1680:<br>File /a /r "F:\boddalheeUI\1680WTF"<br>Rename "$INSTDIR\1680WTF" "$INSTDIR\WFT"<br>Goto end<br>copy1680big:<br>File /a /r "F:\boddalheeUI\1680bigWTF"<br>Rename "$INSTDIR\1680bigWTF" "$INSTDIR\WFT"<br>end:<br>${EndUnless}<br>FunctionEnd<br>=========================================================<br>but it doesn't work at all.<br>i want it like this way. when user click the first radiobutton(1280:Field 4), run 1280copy.<br>i think i still don't understand how to get a value of user input in INI.<br>lots of $ code make me crazy @.@</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Comperio</span><br><span class="post-time small text-muted">5th February 2009 05:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>i don't have any knowledge about programming and ...<br>...<br>i think i still don't understand how to get a value of user input in INI.</blockquote>My suggestion at this point would be for you to start by learning basic scripts before you start messing with advanced stuff like custom pages and interface skins like UMUI.<br><br>There's a ton of information and documentation available to you in the NSIS installation directory and on the Wiki. (There's a whole section dedicated to <a href="http://nsis.sourceforge.net/Category:Tutorials" target="_blank">tutorials</a>. You can also find information by searching this forum.<br><br>For your current problem, you probably should do the file copy stuff from inside a section. (See <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=229735" target="_blank">this forum thread</a>.)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">5th February 2009 06:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i alreay read all the examples and docs in my NSIS folder and i have read that thread many times. i saw may $1 $2 $3 $4 $R0 things like these.<br>what matter is, i still don't know where to find information about using $ stuffs. but i'm keep working on it. i hope i will find a way soon :)<br>Thanks always Comperio!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">5th February 2009 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i checked <a href="http://nsis.sourceforge.net/Adding_custom_installer_pages#InstallOptions_Code_Snippet_.232" target="_blank">this</a> and <a href="http://www.nullsoft.com/free/nsis/makensis.htm#StrCmp" target="_blank">this page</a><br><br>and i wrote like ===============================<br><br>Function MonitorLeave<br>; At this point the user has either pressed Next or one of our custom buttons<br>; We find out which by reading from the INI file<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Settings" "State"<br>${Unless} $0 = 0<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 4" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 7" "HWND"<br>ShowWindow $1 $0<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 5" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 8" "HWND"<br>ShowWindow $1 $0<br>ReadINIStr $0 "$PLUGINSDIR\AccountInf.ini" "Field 6" "State"<br>ReadINIStr $1 "$PLUGINSDIR\AccountInf.ini" "Field 9" "HWND"<br>ShowWindow $1 $0<br>abort<br><br>end:<br>${EndUnless}<br>FunctionEnd<br>and in the section ==================================<br><br>ReadINIStr $R0 "$INSTDIR\Account.ini" "Field 4" "State"<br>StrCmp $R0 1 0 +4<br>File /a /r "F:\boddalheeUI\1280WTF"<br>Rename "$INSTDIR\1280WTF" "$INSTDIR\WTF"<br>Goto done<br><br>ReadINIStr $R0 "$INSTDIR\Account.ini" "Field 5" "State"<br>StrCmp $R0 1 0 +4<br>File /a /r "F:\boddalheeUI\1680WTF"<br>Rename "$INSTDIR\1680WTF" "$INSTDIR\WTF"<br>Goto done<br><br>ReadINIStr $R0 "A$INSTDIR\ccount.ini" "Field 6" "State"<br>StrCmp $R0 1 0 done<br>File /a /r "F:\boddalheeUI\1680bigWTF"<br>Rename "$INSTDIR\1680bigWTF" "$INSTDIR\WTF"<br>done:<br><br>=====================================<br>but when i test its install file, only one works<br>other two options don't work.<br>all the other parts work well. but still don't get wht the other 2 options don't work. can someone explane for me?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">joe1202</span><br><span class="post-time small text-muted">6th February 2009 03:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i think i found a way and everything works prett well.<br>thanks to everybody replied!!</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>