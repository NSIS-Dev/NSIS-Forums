<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="HTTP GET request"><title>HTTP GET request - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">HTTP GET request</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=373643">HTTP GET request</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">13th November 2013 15:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>HTTP GET request</strong><br>Hi all,<br>I've a problem in order to perform an HTTP GET request by nsis..<br>I should perform this request with a parameter, that will be a json. Now, I've made the json with the correct values, but I don't know how can I perform the GET request.. any ideas?!?<br><br>Thanks so much! :up:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">14th November 2013 08:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This is not really a NSIS question.<br><br>How you pass the data will depend on the server but in general you should probably use POST if you are sending JSON to the server...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">14th November 2013 08:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ok, but there is a syntax to do a POST or a GET with NSIS?!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">14th November 2013 08:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://nsis.sourceforge.net/Inetc_plug-in" target="_blank">http://nsis.sourceforge.net/Inetc_plug-in</a><br><br>For JSON post:<br><a href="http://www.json.org/JSONRequest.html" target="_blank">http://www.json.org/JSONRequest.html</a><br><br>Not sure how to set Content-Type as application/jsonrequest with this plugin though...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">14th November 2013 11:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><small>Originally posted by jpderuiter</small><br>Not sure how to set Content-Type as application/jsonrequest with this plugin though...</blockquote>/HEADERS probably...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">14th November 2013 13:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The /HEADER parameter is not available for post (at least not mentioned on the wiki page).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">14th November 2013 15:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So.. I'm confused.. Now I'm going to try with this plugin... waiting for updates!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">14th November 2013 15:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I would assume that /HEADER works with post but to find out for sure you would either have to just test or take a look at the source code...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">15th November 2013 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It's an hardest world, NSIS world... :(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">15th November 2013 11:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I just checked in the source code, /HEADER parameter is available for post, so you could try that.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">15th November 2013 13:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks! I'm going to try...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br><span class="post-time small text-muted">18th November 2013 12:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So.. I've problems again..<br>I'm trying to use post:<br></p><pre>
<code><br>inetc::post /header \<br>                 "Host 127.0.0.1:4488 \<br>                  Accept-Charset ISO-8859-1,utf-8;q=0.7,*;q=0.7 \<br>                  Content-Type application/json; charset=UTF-8" \<br>                /file c:\Temp\test.json \<br>                "http://127.0.0.1:4488/"<br></code>
</pre><br>
      and I've trapped the return error with:<br>
      <pre>
<code><br>        Pop $1 # return value = exit code, "OK" if OK<br>        MessageBox MB_OK "Status: $1"<br></code>
</pre><br>
      and it returns: "Connection Error".<br>
      <br>
      I would like to exclude that the post syntax is uncorrect, could you confirm it?
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br>
      <span class="post-time small text-muted">19th November 2013 06:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think you should add the Host header, the plugin/WinINet will probably add it. You probably also need to add $\r$\n for each header.<br>
      <br>
      Do you get connection error if you don't use /header?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br>
      <span class="post-time small text-muted">21st November 2013 10:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Without /header I obtain "parts error"...<br>
      So in this moment I'm trying with :<br>
      <br></p>
      <pre>
<code>inetc::post /header "Content-Type:application/json" "$jSonTree" "http://127.0.0.1:4488" "$output" /end</code>
</pre><br>
      <br>
      but it doesn't work correctly.. what do you mean with $\r$\n ??<br>
      <br>
      Thanks!
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br>
      <span class="post-time small text-muted">21st November 2013 11:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, I want to say that I obtain File Open Error<br>
      but which file???</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br>
      <span class="post-time small text-muted">21st November 2013 16:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok with this call:<br></p>
      <pre>
<code>inetc::post /header "Content-Type:application/json" "$jSonTree" "http://127.0.0.1:4488" /end</code>
</pre><br>
      it works and after do that, the return value of the post is "OK", but... if I try to analyze the traffic on 4488 port.. nothing!<br>
      <br>
      the inetc::post works?? Someone else using this method?!<br>
      I've tried to simulate my call with wget, using a file containing my json:<br>
      <br>
      <pre>
<code>C:\Utilities\GnuWin32\bin\wget.exe -v --header=Content-Type:application/json --post-file C:\Temp\test.json http://127.0.0.1:4488</code>
</pre><br>
      <br>
      and it works!<br>
      <br>
      Any ideas?! :igor::stare::eek:
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br>
      <span class="post-time small text-muted">21st November 2013 17:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could try Wireshark...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br>
      <span class="post-time small text-muted">22nd November 2013 08:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah, I've already thought this.. and traffic doesn't pass from localhost:4488... :-(<br>
      I don't know... :( any ideas?<br>
      I've seen in the source code that post calls directly the get fuction... now i'm trying to use directly get.. but... I don't know if it is a good idea...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br>
      <span class="post-time small text-muted">22nd November 2013 08:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could try a different server, I believe there are some online services that allow you to test this kind of stuff by responding with the headers and post data in their returned page, or just run the server on a different machine...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Re DeL SiLeNziO</span><br>
      <span class="post-time small text-muted">22nd November 2013 09:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">but with wget works with this server...<br>
      I'm going to search a test server...<br>
      <br>
      thanks for the patience!</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>