<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CVS snapshot + Win98SE + RadioButtons = crash" />

  <title>CVS snapshot + Win98SE + RadioButtons = crash - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">CVS snapshot + Win98SE + RadioButtons = crash</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=144168">CVS snapshot + Win98SE + RadioButtons = crash</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">30th July 2003 22:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CVS snapshot + Win98SE + RadioButtons = crash</strong><br />
      After updating to this morning's CVS snapshot and rebuilding my installer, I now get a crash when trying to display a custom page which has radio buttons. I'm using Win98SE and the 30 July 07:44 snapshot. Tried using a simpler example and still get the crash.<br />
      <br />
      DEMO caused an invalid page fault in<br />
      module INSTALLOPTIONS.DLL at 0187:00a925f2.<br />
      Registers:<br />
      EAX=00000000 CS=0187 EIP=00a925f2 EFLGS=00010246<br />
      EBX=0000000d SS=018f ESP=0065f0b4 EBP=bfc05836<br />
      ECX=00430480 DS=018f ESI=00000006 FS=8227<br />
      EDX=00a92392 ES=018f EDI=00000da4 GS=0000<br />
      Bytes at CS:EIP:<br />
      80 38 31 75 0c 6a 00 6a 01 68 f1 00 00 00 57 ff<br />
      Stack dump:<br />
      00a929c2 00426000 0065fb10 0040aad0 00530e88 00000000 00000000 0000005a 0000002d 00000066 00000087 00000073 0000000b 0000000a 0000019a 000000dd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">3rd August 2003 16:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">After upgrading to the latest CVS snapshot (3 Aug 2003, 13:44 GMT) I found no change - custom pages with radio buttons still cause installer to crash.<br />
      <br />
      When I examined the files in the snapshot I found that the problem appears to have been introduced when InstallOptions.dll was updated from 1.62 to 1.63.<br />
      <br />
      If I use the latest CVS snapshot my installer crashes whenever it tries to display a custom page containing radio buttons. This snapshot uses CVS version 1.63 of InstallOptions.dll. If I overwrite this DLL with CVS version 1.62 (from an earlier CVS snapshot) and recompile, my installer does not crash and the radio buttons work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd August 2003 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't have any strcmp/intcmp['s in your custom page by any chance?<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">3rd August 2003 19:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, in fact it just calls InstallOptions::dialog to display the page, and the custom page INI file just has a single groupbox enclosing 3 radio buttons.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd August 2003 20:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Maybe you could try moving the radio buttons around (change field numbers)<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">3rd August 2003 21:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Have tried that - even with completely different field numbers it crashes. But if I use InstallOptions.dll v1.62 (and change nothing else - same script, same INI file) then there are no crashes.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd August 2003 21:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have a Win98SE machine on the network.<br />
      Send me your ini and nsi file.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">3rd August 2003 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Plesae try latest CVS version.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">4th August 2003 00:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I am using the latest CVS snapshot (3 August, 19:44 GMT - this is the most up-to-date version available at the present time).<br />
      <br />
      It seems that v1.63 of InstallOptions.dll handles radio buttons differently from earlier versions of the DLL.<br />
      <br />
      In my script I had a group of 3 radio buttons with one preset using "State=1". This worked OK with older versions of the DLL but with v1.63 the installer crashes on my Win98SE system.<br />
      <br />
      When v1.63 is used, however, all three radio buttons require an initial state. Adding "State=0" to the two other radio buttons appears to solve this problem.<br />
      <br />
      Unfortunately v1.63 of InstallOptions.dll is still causing problems in my installer. It now crashes at different times, apparently at random, so I have had to switch back to v1.62 to get a stable installer.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th August 2003 00:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1.64 is the latest CVS version. See the <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=139427" target="_blank">CVS Issues</a> sticky post for more information. The snapshot probably haven't updated yet... As can be seen in the chancelog I have uploadead a new version of InstallOptions.dll after the snapshot time.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">4th August 2003 00:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm aware of the CVS problems, that is why I was careful to quote the time and date of the snapshot and the version number of the DLL.<br />
      <br />
      At the moment the NSIS Update feature is not working reliably, so I've been checking the Changelog to see if it is worth downloading another snapshot.<br />
      <br />
      Version 1.64 should be in the next snapshot so I'll try again later today.<br />
      <br />
      It must be a bit frustrating for developers to fix something and still find users complaining about the bug - lets hope SourceForge fix the CVS problems this month ;)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ramon18</span><br />
      <span class="post-time small text-muted">4th August 2003 10:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi pengyou,<br />
      <br />
      The version 1.64 you're talking is the version of InstallOptions.dll or InstallOptions.cpp?<br />
      <br />
      I think the problem(s) start with "LINK" control on win98, and we develop in win2k/xp, so the tests made by users on win98 are very important for us.<br />
      <br />
      Maybe I should build InstallOptions.dll without "LINK" ctrl for you test if the latest version of CVS don't work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th August 2003 11:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ramon, it was pszState being null. 1.64 should fix this. As pengyou said:<br />
      <br /></p>

      <blockquote>
        Adding "State=0" to the two other radio buttons appears to solve this problem.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pengyou</span><br />
      <span class="post-time small text-muted">4th August 2003 11:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Downloaded the current CVS snapshot (4 August, 07:44 GMT) and recompiled my script. My installer no longer crashes so InstallOptions.dll v1.64 has solved my problems.<br />
      <br />
      Thanks for fixing it!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ramon18</span><br />
      <span class="post-time small text-muted">4th August 2003 16:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">good</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
