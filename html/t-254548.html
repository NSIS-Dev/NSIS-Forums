<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to ask for a reboot after uninstall?"><title>How to ask for a reboot after uninstall? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to ask for a reboot after uninstall?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=254548">How to ask for a reboot after uninstall?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">pedroac</span><br><span class="post-time small text-muted">1st September 2006 03:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to ask for a reboot after uninstall?</strong><br>Hi<br><br>I want to ask user for a reboot after uninstallation, and I am using:<br>!define MUI_FINISHPAGE_TEXT_REBOOT "AAA"<br>!define MUI_FINISHPAGE_TEXT_REBOOTNOW "BBB"<br>!define MUI_FINISHPAGE_TEXT_REBOOTLATER "CCC"<br><br>!insertmacro MUI_UNPAGE_FINISH<br><br>Is there anything else I need to include in my script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">freebendy</span><br><span class="post-time small text-muted">1st September 2006 04:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">use the "reboot" Instruction! i think that you should use "reboot" in the function the button call!<br>i am a begginer:)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pedroac</span><br><span class="post-time small text-muted">1st September 2006 05:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">All I wanna do is present this dialog:<br><a href="http://nsis.sourceforge.net/Docs/Modern%20UI/images/screen2.png" target="_blank">http://nsis.sourceforge.net/Docs/Mod...es/screen2.png</a><br><br>How do I do?<br>I've searched the documentation and found nothing about it..</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">freebendy</span><br><span class="post-time small text-muted">1st September 2006 06:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Are U using the .ini to make this finish page?<br>if you are,you can define a callback fuction which the installation will call when leaving the page.<br>with the code:<br>!insertmacro MUI_INSTALLOPTIONS_READ $INI_VALUE "*.ini" "Field 2" "State"<br>${If} $INI_VALUE = 1<br>reboot<br>${EndIf}<br><br>in the function!<br>try it and look is it OK?<br>my English is poor!!I hope U can understand!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">1st September 2006 09:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There's no need to edit the INI or to use Reboot manually. Simply set the reboot flag before the finish page shows. You can do that with SetRebootFlag or any of the /REBOOTOK enabled instructions.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pedroac</span><br><span class="post-time small text-muted">1st September 2006 11:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Following kichick's advice, I am now using<br>SetRebootFlag true<br>in un.onInit and it works just fine!<br><br>Thanks a lot</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">freebendy</span><br><span class="post-time small text-muted">14th September 2006 02:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I make a test!<br>use :<br>!define MUI_FINISHPAGE_TEXT_REBOOT "AAA"<br>!define MUI_FINISHPAGE_TEXT_REBOOTNOW "BBB"<br>!define MUI_FINISHPAGE_TEXT_REBOOTLATER "CCC"<br>!define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\AddressBook\LICENSE.txt" ;è®¾ç½®å®‰è£…å®ŒæˆåŽæç¤ºçš„æ“ä½œ<br><br>!insertmacro MUI_PAGE_FINISH<br><br><br>but there isn't any radiobotton as <a href="http://nsis.sourceforge.net/Docs/Mo...ges/screen2.png" target="_blank">http://nsis.sourceforge.net/Docs/Mo...ges/screen2.png</a><br>show? why ?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">freebendy</span><br><span class="post-time small text-muted">14th September 2006 02:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">and if i want to ask a reboot after installation!where i should<br>lay the "setrebootflag true"?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th September 2006 11:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If there aren't any buttons, it's because the reboot flag isn't set. To set it in the installation, you can use SetRebootFlag in .onInit or any section or function the installer executes.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>