<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Compressed NT-2k-XP subdirectory for large data file" />

  <title>Compressed NT-2k-XP subdirectory for large data file - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Compressed NT-2k-XP subdirectory for large data file</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=193571">Compressed NT-2k-XP subdirectory for large data file</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ldajunk</span><br />
      <span class="post-time small text-muted">14th September 2004 22:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Compressed NT-2k-XP subdirectory for large data file</strong><br />
      My freeware app has a "niche" of obsolete, <i>dinosaur</i> equipment:</p>

      <ul>
        <li>486 or Pentium-233</li>

        <li>WinNt or Win9x</li>

        <li>8 - 16 mb dram</li>

        <li>slow hard drive</li>
      </ul>To get started, the current logic reads in a 4.1 mb plain text file. This can take quite a long time (10 seconds or even longer) to load/launch on the obsolete equipment described above.<br />
      <br />
      I wanted to run some texts if a computer with WinNt/Win2000 would get started faster if the 4.1 mb text file was stored in a NTFS compressed subdirectory.<br />
      <br />
      My quesiton: can a NSIS script detect which o/s the computer is using, and whether the destination drive was formated with NTFS? If so, can the script cause a compressed subdirectory to be created for the data file(s) to be stored?<br />
      <br />
      C:\Program Files\MyApp &lt;-- not compressed<br />
      C:\Program Files\MyApp\Data &lt;-- compressed
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th September 2004 12:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">According to MSDN:</p>

      <blockquote>
        To set a file's compression state, use the DeviceIoControl function with the FSCTL_SET_COMPRESSION operation.
      </blockquote>I think it will just fail if the file system doesn't support it, but if you want to check the Windows version you can do so using one of the functions in the Archive or GetWindowsVersion in the documentation.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
