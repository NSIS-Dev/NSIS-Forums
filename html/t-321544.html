<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="MUI_PAGE_COMPONENTS - hide SectionGroup" />

  <title>MUI_PAGE_COMPONENTS - hide SectionGroup - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">MUI_PAGE_COMPONENTS - hide SectionGroup</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321544">MUI_PAGE_COMPONENTS - hide SectionGroup</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">10th August 2010 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>MUI_PAGE_COMPONENTS - hide SectionGroup</strong><br />
      Hi,<br />
      <br />
      I have read all the tips here in the forum concerning my problem, but couldn't solve it yet.<br />
      <br />
      I have 2 SectionGroups. The first one should be completely hidden depending on some values checked/ defined in the .onInit function.<br />
      <br />
      But no matter what I try I did not get the SectionGroup hidden - it is always shown (the Sections inside are hidden as they should).<br />
      <br />
      I have read (and understood) about clearing the hidden SF_SECGRPEND flag.<br />
      <br />
      Do I overlook something?<br /></p>
      <pre>
<code>SectionGroup</code><span style="color: #007700">/</span><span style="color: #0000BB">e</span><span style="color: #DD0000">"ResetConfigSectionGroup"</span><span style="color: #0000BB">SecGrpResetConfig
<br />Section</span><span style="color: #DD0000">"DeleteConfigFileSection"</span><span style="color: #0000BB">SecDeleteConfigFile
<br /><br />SectionEnd
<br /><br /></span><span style="color: #007700">;</span><span style="color: #0000BB">DeletechartDB</span><span style="color: #007700">(</span><span style="color: #0000BB">CHRTLIST</span><span style="color: #007700">.</span><span style="color: #0000BB">DAT</span><span style="color: #007700">)
<br /></span><span style="color: #0000BB">Section</span><span style="color: #DD0000">"DeleteChartDBSection"</span><span style="color: #0000BB">SecDeleteChartDB
<br /><br />SectionEnd
<br /><br /></span><span style="color: #007700">;</span><span style="color: #0000BB">DeleteSENCdirectory
<br />Section</span><span style="color: #DD0000">"DeleteSENCSection"</span><span style="color: #0000BB">SecDeleteSENC
<br /><br />SectionEnd
<br />SectionGroupEnd
<br /><br /></span><span style="color: #007700">;</span><span style="color: #0000BB">ShortcutSection
<br />SectionGroup</span><span style="color: #007700">/</span><span style="color: #0000BB">e</span><span style="color: #DD0000">"ShortcutsSectionGroup"</span><span style="color: #0000BB">SecGrpShortcuts
<br />Section</span><span style="color: #DD0000">"StartmenuShortcutSection"</span><span style="color: #0000BB">SecShortcutStartmenu
<br /></span><span style="color: #007700">;</span><span style="color: #0000BB">StartMenu
<br />SectionEnd
<br /><br />Section</span><span style="color: #DD0000">"DesktopShortcutSection"</span><span style="color: #0000BB">SecShortcutDesktop
<br /></span><span style="color: #007700">;</span><span style="color: #0000BB">Desktop
<br />SectionEnd
<br />SectionGroupEnd
<br /><br /></span><span style="color: #007700">Function.</span><span style="color: #0000BB">onInit
<br /></span><span style="color: #007700">${If}</span><span style="color: #0000BB">$CONFIG_EXISTS</span><span style="color: #007700">!=</span><span style="color: #0000BB">1
<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">OrIf</span><span style="color: #007700">}</span><span style="color: #0000BB">$CONFIG_EMPTY</span><span style="color: #007700">==</span><span style="color: #0000BB">1
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteConfigFile</span><span style="color: #007700">}${</span><span style="color: #0000BB">SF_SELECTED</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">SectionSetText</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteConfigFile</span><span style="color: #007700">}</span><span style="color: #DD0000">""
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteChartDB</span><span style="color: #007700">}${</span><span style="color: #0000BB">SF_SELECTED</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">SectionSetText</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteChartDB</span><span style="color: #007700">}</span><span style="color: #DD0000">""
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteSENC</span><span style="color: #007700">}${</span><span style="color: #0000BB">SF_SELECTED</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">SectionSetText</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteSENC</span><span style="color: #007700">}</span><span style="color: #DD0000">""
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}${</span><span style="color: #0000BB">SF_SECGRP</span><span style="color: #007700">}
<br />!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}${</span><span style="color: #0000BB">SF_SELECTED</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">SectionSetFlags</span><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}</span><span style="color: #0000BB">0
<br />SectionSetText</span><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}</span><span style="color: #DD0000">""
<br /></span><span style="color: #0000BB">IntOp</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #007700">${</span><span style="color: #0000BB">SecDeleteSENC</span><span style="color: #007700">}+</span><span style="color: #0000BB">1
<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacroClearSectionFlag</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #007700">${</span><span style="color: #0000BB">SF_SECGRPEND</span><span style="color: #007700">}
<br /></span><span style="color: #0000BB">SectionSetText</span><span style="color: #007700">$</span><span style="color: #0000BB">0</span><span style="color: #DD0000">""
<br /></span><span style="color: #007700">;</span><span style="color: #0000BB">MessageBoxMB_OK</span><span style="color: #007700">|</span><span style="color: #0000BB">MB_ICONEXCLAMATION</span><span style="color: #DD0000">"MacroS0:$0"</span><span style="color: #007700">;</span><span style="color: #FF8000">#DEBUG
<br /></span><span style="color: #007700">${EndIf}
<br /></span><span style="color: #0000BB">FunctionEnd
<br /></span>

<!-- php buffer end -->
                
                
                
</pre>
      <hr />
      <pre>
        
I am using version 2.46 - Unicode with the ModernUI2 and therefor MUI_PAGE_COMPONENTS.<br /><br />Any help is very much appreciated! :)<br /><br />Thanks,<br />Gunther
                
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">11th August 2010 07:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Have you tried to rename them to ""? That will hide a normal section.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">11th August 2010 07:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by MSG</small><br />
        Have you tried to rename them to ""? That will hide a normal section.
      </blockquote>You mean the line<br />
      PHP Code:
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #0000BB">SectionSetText</span><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}</span><span style="color: #DD0000">""</span> in the .onInit function?<br />
      If so, the answer is yes.<br />
      <br />
      As I am using a multilanguage version I have also tried to use an empty LangString for each language:<br /></span>
      <pre>
<code>SectionSetText</code><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}$(</span><span style="color: #0000BB">EmptyString</span><span style="color: #007700">)
</span>
</pre>No change in result - the SectionGroup still shows up on the Components page (with the string of the choosen language), which leads me to the assumption that somethings goes wrong with emptying the SectionText. But I have no idea where or why, yet.<br />
      <br />
      Gunther<br />
      <br />
      Addition 1:<br />
      Tried the exact same code for my second SectionGroup (which never has to be hidden) and guess what? It disappears without any problem.<br />
      <br />
      So there might be a bug that a SectionGroup does not disappear if it is the first one in the row of Sections(Groups)?<br />
      <br />
      I'll do some further tests to figure out the differences between my two SectionGroups and hopefully find the reason why one disappears correctly and the other do not.<br />
      <br />
      So if anyone has an idea or had have the same problem, tips and possible solutions/ workarounds are still very much appreciated.<br />
      <br />
      Thanks!
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">11th August 2010 08:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Netsurfer24</small><br />
        You mean the line<br />
        <pre>
<code>SectionSetText</code><span style="color: #007700">${</span><span style="color: #0000BB">SecGrpResetConfig</span><span style="color: #007700">}</span><span style="color: #DD0000">""
</span>
</pre>in the .onInit function?<br />
        If so, the answer is yes.
      </blockquote>Oops, my bad.<br />
      <br />
      If you add a hidden, empty section on top, does it still refuse to hide the group?<br />
      <br />
      How about just reversing the order of the two groups?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">11th August 2010 08:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problem solved</strong><br />
      Hi,<br /></p>

      <blockquote>
        <small>Originally posted by MSG</small><br />
        Oops, my bad.<br />
        <br />
        If you add a hidden, empty section on top, does it still refuse to hide the group?<br />
        <br />
        How about just reversing the order of the two groups?
      </blockquote>no, not your fault - my fault.<br />
      <br />
      I have overlooked a line at the end of my .onInit function which sets the text for the SectionGroup. :rolleyes:<br />
      <br />
      So after hiding the Group the name was set again to something else than an empty string.<br />
      <br />
      Now everything works as expected! :up:<br />
      <br />
      No bug or any other 'weird' circumstances - just a dumb coder ...!<br />
      <br />
      For the archive: The code in the first posting is correct.<br />
      <br />
      @MSG: Thanks for your help.<br />
      Sorry for the unnecessary question.<br />
      <br />
      Thanks,<br />
      Gunther
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Netsurfer24</span><br />
      <span class="post-time small text-muted">13th August 2010 12:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to dynamically display a hidden SectionGroup</strong><br />
      Hi,<br />
      <br />
      it's me again ...! Now that I have managed to dynamically hide sections and sectiongroups I have some difficulties to show it up again.<br />
      <br />
      I want to change its state (shown|hidden) in the .onSelChange function.<br />
      <br />
      What has to be done to show it again?</p>

      <ol style="list-style-type: decimal">
        <li>SectionSetText ... for all Sections and the SectionGroup</li>

        <li>SectionSetFlags ... ???</li>
      </ol>Anything else?<br />
      <br />
      And how about the Section Flags which I have cleared when hiding the Section Group?<br />
      Which ones do I have to set again?<br />
      <br />
      Does the order play a role?<br />
      <br />
      Thanks,<br />
      Gunther<br />
      <br />
      Update 1:<br />
      I am one step further - my code seems to be OK. The problem is that the components page (or just the components list) needs to be refreshed/ updated. If I use the back button and return to the page my sectiongroup is hidden or shown correctly.<br />
      Anyone who can tell me how to refresh/ update the page or list?
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
