<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="File, SetOutPath question.."><title>File, SetOutPath question.. - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">File, SetOutPath question..</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292604">File, SetOutPath question..</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">joe131</span><br><span class="post-time small text-muted">2nd June 2008 02:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>File, SetOutPath question..</strong><br>Hi All,<br><br>I'm trying to write an install that will just "update"<br>certain files, and I'm really confused.<br><br>I've tried to look at some code examples from the web,<br>Google Code Search,<br>that use SetOutPath and File, but when I try what looks<br>like should work, I keep getting errors for File.<br><br>For my "Source files" I want to get individual files from different directories.<br><br>Like:<br><br>C:\Foo\bar\bin\xxx.exe<br>C:\Foo\bar\bin\yyy.dll<br>C:\Foo\Webserver\lib\xyz.jar<br><br>And since the user can choose a different install<br>directory path, than my original source directory,<br>exactly how should I extract the files into the<br>user's directory?<br><br>(from Foo\ back it will be the same)<br><br>They will probably have something like:<br><br>C:\Program Files\XYZ Corp\Foo\bar\bin<br>C:\Program Files\XYZ Corp\Foo\Webserver\lib<br><br>I tried to use "File /oname=..." but I keep getting errors..<br><br>What's the best way to do it?<br><br>I'd rather not try to use anything with "File /r".<br><br><br>Thanks!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">2nd June 2008 02:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><pre>
<code>; set the output directory first<br>SetOutPath "C:\Program Files\XYZ Corp\Foo\bar\bin"<br><br>; now let's extract some files to that directory<br>File "C:\Foo\bar\bin\xxx.exe"<br>File "C:\Foo\bar\bin\yyy.dll"<br>File "C:\Foo\Webserver\lib\xyz.jar"</code>
</pre><br>
      <br>
      This will include the named files in your installer. The paths after the "File" commands are the paths on your local computer, evaluated at the moment the installer is compiled! Those files will be extracted to the "C:\Program Files\XYZ Corp\Foo\bar\bin" folder on the user's computer. The path after the "SetOutPath" will be evaluated at the moment the user runs the installer.<br>
      <br>
      <br>
      But usually you should do it like this:<br>
      <br>
      <pre>
<code>SetOutPath "$PROGRAMFILES\XYZ Corp\Foo\bar\bin"</code>
</pre><br>
      <br>
      Not every user has a "C:\Program Files" folder! For example on German Windows it will be "C:\Programme". And you even can't know on which drive Windows is installed. Using the "$PROGRAMFILES" variable will detect the location of the user's "Program Files" folder at the moment the installer is run...
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joe131</span><br>
      <span class="post-time small text-muted">2nd June 2008 03:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I already have that to "load" my source files into<br>
      the installer.<br>
      <br>
      I have this, to extract it, and it keeps giving me errors:<br>
      <br>
      SetOutPath "${InstallDir}\Webserver\bin"<br>
      File "/oname=${InstallDir}\Webserver\bin\xyz.dll xyz.dll<br>
      <br>
      and I tried adding the same "path" to the file on the "end"<br>
      and I still get errors.<br>
      <br>
      What's the proper way to do it?<br>
      <br>
      Thanks!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">2nd June 2008 04:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">See compiler's log, should claim about ${InstallDir} which probably you should change to $INSTDIR.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">joe131</span><br>
      <span class="post-time small text-muted">2nd June 2008 08:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, this is driving me nuts!<br>
      <br>
      The files are loaded into the installer:<br>
      (from the compile)<br>
      <br>
      Section: "-"<br>
      SetOutPath: "$INSTDIR"<br>
      File: "WMISrv.dll" 98304 bytes<br>
      File: "ADSrv.dll" 217088 bytes<br>
      SectionEnd<br>
      <br>
      <br>
      I have the users install path in $Install_Directory<br>
      and I'm trying:<br>
      <br>
      SetOutPath "$Install_Directory\Webserver\bin"<br>
      File ...<br>
      <br>
      I've tried several things for "File" and the<br>
      compiler keeps complaining:<br>
      <br>
      SetOutPath: "$Install_Directory\Webserver\bin"<br>
      File: "ADSrv.dll" -&gt; no files found.<br>
      <br>
      What the heck do I need to do to extract the file<br>
      into the user's directory???<br>
      <br>
      I even tried:<br>
      SetOutPath "$INSTDIR\Webserver\bin"<br>
      and I keep getting the same error..</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">2nd June 2008 08:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SetOutPath is a run-time instruction which changes the current working directory when installer runs.<br>
      <br>
      File is a compile-time instruction which tells the compiler to compress the file e.g. local_path\my_file.ext, hence when you type File ADSrv.dll the file must be located whithin the same directory where the compiling script is located. Otherwise you must give the path to the file on the local machine.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>