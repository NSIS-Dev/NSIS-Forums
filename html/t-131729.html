<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="File not extracted to pluginsdir everytime?"><title>File not extracted to pluginsdir everytime? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">File not extracted to pluginsdir everytime?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=131729">File not extracted to pluginsdir everytime?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">14th April 2003 19:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>File not extracted to pluginsdir everytime?</strong><br>I have a text file which I extract to the plugins dir when my installer starts up in the .onInit function as show here,<br><br>File "/oname=$PLUGINSDIR\ReleaseNotes.txt" "MyReleaseNotes.txt"<br><br>I have a custom page at the end of my installer in which the user can select to view this text file or not. However sometimes the text file does not open. I get an error message telling me the text file does not exist.<br><br>Interstingly enough, I have another similar call in .onInit that DOES work everytime. It's a bitmap which I display on the same final custom page.<br><br>File "/oname=$PLUGINSDIR\StartFinishImage.bmp" "MyBitmap.bmp"<br><br>The only difference between the two files is there type and name but the syntax shold still be the same shouldn't it? Any suggestions, I figure I'm just forgetting to do something?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th April 2003 07:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Have you initialized the plugins directory using InitPluginsDir or by calling a plug-in function? $PLUGINSDIR is empty until you use InitPluginsDir or a plug-in function.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 17:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>InitPluginsDir</strong><br>Yes I've got "InitPluginsDir" right before I extract the files to $PLUGINSDIR. I've also tried extracting the file to the current users temp directory. I'm reading the files that I'm packaging for the installer off of a network drive. I was wondering if that might be causing problems but I can't see how.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">15th April 2003 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That should make no difference.<br><br>Are you using the latest development version (get the CVS files using NSIS Update)?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 18:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Just got the latest version. No difference. The one thing I have noticed is that when I run my installer on the machine that I build the installer on most of the time the ReleaseNotes.txt file will be displayed.<br><br>When I go to run it on another machine most of the time it is not displayed although there is the rare occasion where it is displayed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">15th April 2003 18:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Can you please attach the script? If you can't, can you please make a smaller example script?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 18:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Here's the script. I did cut alot of stuff out because it is quote large so if a function, variable constant definition is missing please ignore that.<br><br>I've included the function's I use where ReleaseNotes.txt is inovlved. I unpack the file to the pluginsdir in .onInit and use it in the FinshPage custom page function. Anything you guys might be able to suggest would be greatly appreciated.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">15th April 2003 19:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The header bitmap and the Welcome/Finish page is also files the Modern UI extracts to the plugins directory.<br><br>Maybe they do exist but the other code is the problem.<br><br>Replace<br><br>Exec "notepad.exe $PLUGINSDIR\ReleaseNotes.txt"<br><br>by<br><br>ExecShell "open" "$PLUGINSDIR\ReleaseNotes.txt"<br><br>Maybe that helps.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 20:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Using ExecShell didn't seem to make a difference. I'm pretty sure there is something wrong elsewhere though. If I check the acutal contents of the plugins directory the release notes file is there but for some reason when I try to open it from the installer it says it can't find it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">15th April 2003 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If the header bitmap etc. work fine, there is nothing wrong with the Plugins directory.<br><br>Please check the contents of the plugins directory after launching the installer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 21:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The pluginsdir directory looks alright. The bitmap that I use on my final custom dialog is there and so is the release notes file I want to view but any attemps to view it using notepad/wordpad fail. I'll get a message saying the file cannot be found and yet if I attempt to load the file from a command prompt window say as,<br><br>"wordpad &lt;plugins directory&gt;\ReleaseNotes.txt" it works. Very odd.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">15th April 2003 21:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So even ExecShell "open" "$PLUGINSDIR\ReleaseNotes.txt" does not work?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">15th April 2003 21:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Correction, it does work but it depends on where I make the "Execshell" call.<br><br>If I call "Execshell" to open the release notes file prior to the "FinshPage" function for my custom dialog it is displayed. If I make the "Execshell" call after the following two lines in my "FinishPage" function<br><br>!insertmacro MUI_HEADER_TEXT "Installation complete Page"<br>"Please Select items you wish to run<br>after installation is complete"<br><br>!insertmacro MUI_INSTALLOPTIONS_DISPLAY "FinishDialog.ini"<br><br>it doesn't work. As if access to the relase notes file is restricted after this final dialog is displayed. If I make the call to "Execshell" before these two lines it does work.<br><br>On a hunch I tried switching the "FinishDialog" so it appears as my second last dialog in the installer. This works as well. I can access my release notes file everytime by running "ExecShell".<br><br>There appears to be some problem after the installer displays my last dialog. At this point the plugins directory doesn't seem to be accessible. At what point does the plugins directory get deleted? Is it after .onInstSuccess?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">iceman_k</span><br><span class="post-time small text-muted">16th April 2003 05:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It is deleted after .onInstSuccess.<br>At least that's how it appears in the source code.<br>Question- why are you putting your release notes in the plugins directory instead of in the installation directory. Isn't the latter the logical location?<br>It's possible that its a timing issue, i.e., the time it takes for the installer to exit is faster than the time it takes for notepad to pop up with the text file.<br>Try putting in a sleep for a couple of seconds and see what that does.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">16th April 2003 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">So you are calling it when your installers quits? In that case, I think the installer is faster than the text editor :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">16th April 2003 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You are right iceman_k, $PLUGINSDIR is deleted when the installer exits, and like Joost said the installer is faster than your text editor. Sleep won't help much here, you can never know how long it'll take the text editor to start up. The best way would be copying the file to a place where it won't get deleted.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">16th April 2003 13:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I think the Release Notes are also useful for the user at a later time. So why not put 'em in your installation folder?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">rsegal</span><br><span class="post-time small text-muted">16th April 2003 18:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for the the suggestions everyone.<br><br>I did extract the file to a different location so there wouldn't be any trouble with it getting deleted from the plugins directory.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>