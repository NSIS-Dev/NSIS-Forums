<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="File save" />

  <title>File save - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">File save</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174216">File save</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">26th March 2004 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>File save</strong><br />
      I would like to know how we can make to look if the files which we want to extract are already present in a file. And if yes, then it is copied and stuck in a file back up.<br />
      <br />
      Thank you :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">26th March 2004 17:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use IfFileExists.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">26th March 2004 17:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'am sorry but I don't know any syntax... I'am a noob and I must learn with examples :) lol. Can you say me just the syntax? Thanks you<br />
      <br />
      <br />
      <br />
      <br />
      <br />
      P.S Is my English good :D?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">26th March 2004 18:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can find the syntax of this command in the users manual.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">26th March 2004 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I found:<br />
      <br />
      file_to_check_for jump_if_present [jump_otherwise]<br />
      <br />
      and I read the explication but it don't better help me... I replace that: file_to_check_for jump_if_present by my file's name? but what is it [jump_otherwise] ?<br />
      <br />
      edit: I found too:<br />
      [/SILENT] [/FILESONLY] filespec_on_destsys destination_path [size_of_files_in_kb]<br />
      and<br />
      path_to_create<br />
      <br />
      I don't know where I must put it and what Replace...<br />
      Thank ou :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">26th March 2004 20:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>IfFileExists "$INSTDIR\myfile.exe" 0 notexist<br /><br />  ;Backup the file here<br /><br />notexist:</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">27th March 2004 13:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">For example:<br />
      <br />
      IfFileExists "$INSTDIR\logo.bmp" 0 notexist<br />
      <br />
      "$INSTDIR\SavesMdl\logo.bmp"<br />
      <br />
      notexist:<br />
      <br />
      I am not sure that "$INSTDIR\SavesMdl\logo.bmp" is good...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th March 2004 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That looks like a valid path.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">27th March 2004 17:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry but I don't understand... :/ Can you write me an example? That looks like a valid path and you don't know what I have to do?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">27th March 2004 18:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">&gt;&gt; "$INSTDIR\SavesMdl\logo.bmp"<br />
      <br />
      this is only parameter, where is the function ???</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">27th March 2004 20:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use CopyFiles for the backup.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">28th March 2004 10:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So:<br />
      <br /></p>
      <pre>
<code><br />IfFileExists "$INSTDIR\logo.bmp" 0 notexist<br />[/SILENT] [/FILESONLY] "logo.bmp" "$INSTDIR\SavesMdl\logo.bmp" [100]<br />notexist:</code>
</pre>?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">28th March 2004 11:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, you should use the CopyFiles command with the syntax as described in the manual, not copy the syntax description.<br /></p>
      <pre>
<code>CopyFiles /SILENT "$INSTDIR\SavesMdl\logo.bmp" "$INSTDIR\SavesMdl\logo-backup.bmp"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">28th March 2004 12:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok thx I begin to understand :) But for what I replace that: filespec_on_destsys? I saw, you had twice the same thing and I don't understand that. And what is /FILEONLY then?<br />
      My new code:<br /></p>
      <pre>
<code><br />SetOutPath "$INSTDIR"<br />  SetOverwrite on<br />     File "logo.bmp"<br />     IfFileExists "$INSTDIR\logo.bmp" 0 notexist<br />CreateDirectory "$INSTDIR\SavesMdl\"<br />CopyFiles /SILENT "$INSTDIR\SavesMdl\logo.bmp" "$INSTDIR\SavesMdl\logo-backup.bmp"<br />notexist:<br /></code>
</pre><br />
      But even if the file exists not it created a save, moreover which does not work. It is written during the install "Copy failed "... What is the problem?<br />
      thx
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">28th March 2004 14:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">filespec_on_destsys is the source for the file copy. /FILEONLY is a flag that is useful if you want to copy a whole folder but not the folders inside that folder.<br />
      <br />
      You didn't say that it was the backup directory for the file. Try:<br />
      <br /></p>
      <pre>
<code>SetOutPath "$INSTDIR"<br /><br />IfFileExists "$INSTDIR\logo.bmp" 0 notexist<br /><br />  CreateDirectory "$INSTDIR\SavesMdl"<br />  CopyFiles /SILENT "$INSTDIR\logo.bmp" "$INSTDIR\SavesMdl\logo.bmp"<br /><br />notexist:<br /><br />File "logo.bmp"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">28th March 2004 16:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you very much that works! But I would like to know if it is possible actually an IfFileExists generally, not file by file, simply " if A file exists to copy IT... "<br />
      Thank you very much :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">28th March 2004 17:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you want to do the same thing for many files, create a macro or function.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">28th March 2004 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry but I don't see what do you want to say...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">28th March 2004 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Please read the manual for information about function and macros. This forum is not a script writing service.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">28th March 2004 18:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes lol I know but I think a look not on the good page... I read here: <a href="http://nsis.sourceforge.net/Docs/" target="_blank">http://nsis.sourceforge.net/Docs/</a><br />
      That's good?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">28th March 2004 19:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That is indeed the users manual. A macro can be used to insert certain commands multiple times, with different parameters.<br />
      <br />
      Example:<br /></p>
      <pre>
<code>!macro FILEWITHBACKUP FILE<br /><br />  IfFileExists "$INSTDIR\${FILE}" 0 notexist<br /><br />    CreateDirectory "$INSTDIR\SavesMdl"<br />    CopyFiles /SILENT "$INSTDIR\${FILE}" "$INSTDIR\SavesMdl\${FILE}"<br /><br />  notexist:<br /><br />  File "${FILE}"<br /><br />!macroend</code>
</pre><br />
      <pre>
<code>!insertmacro FILEWITHBACKUP "logo.bmp"</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anduriel</span><br />
      <span class="post-time small text-muted">29th March 2004 19:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
      <br />
      <br />
      IfFileExists: <font color="red">$"INSTDIR\maps\cs_deagle5.bsp?</font> 0: CopyFiles notexist: silent ) $"INSTDIR\maps\cs_deagle5.bsp - &gt; " <font color="green">$INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp</font> ", size=0KB File: <font color="chocolate">"maps\cs_deagle5.bsp"</font> - &gt; no File found.<br />
      <br />
      <br />
      <font color="red">Here</font> it looks if the file exists, that it is good.<br />
      <font color="green">Here</font> is where it going to copy it, but it resumes the same road, what distorts everything!<br />
      <font color="chocolate">Here</font> it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP " map\cs_deagle.bsp...<br />
      <br />
      Thx</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
