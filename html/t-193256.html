<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Picture on custom MUI"><title>Picture on custom MUI - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Picture on custom MUI</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=193256">Picture on custom MUI</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">backslashdot</span><br><span class="post-time small text-muted">11th September 2004 23:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Picture on custom MUI</strong><br>First let me start by saying that I am very new to this. I use VB, C++, HTML, and VBS, so I am not completely code retarded... just confused at the moment.<br><br>I have gone through the different help pages, both NSIS and MUI. There is something vital that I am missing. I am trying to place an image into a custom page. This is not unlike the example in the GFX.NSI. However, I am overwhelmed, at the moment, with what appears to be all of todo involved with simply placing an image on the side. Am I correct in assuming that the image along the left side is the branding image? I have yet came across a diagram describing exactly what/where these things will appear on the page (understanding, of course, that some can be moved around). I have no problem 'playing' with the different settings, but I cannot get anything, other than the HEADER image, to appear, so that I can play with it. I get bounced at compile time with any number o messages that do not indicate, to me, what I did wrong. For that matter, the message could just say, "nope, try again".<br><br>I'm stumped. Therefore I am risking a flogging for something that seems to be easy to everyone else. Also, is there a 'cheat sheet' of what elements should appear in Sections and which should appear in Functions? Eventually, I am to train some monkeys lower on the ladder than myself, so I was hoping there was a 'rule of thumb'.<br><br>Thanks all!<br><br>TM</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">12th September 2004 13:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can put the same elements in both Functions and Sections.<br><br>As for adding a branding image:<br><br>I used one in an installer a few years ago. The code might have changed now, but here's the general idea...<br><br># goes at top of script (compile time)<br>AddBrandingImage left 150 0<br><br># put in pre function for custom page<br>File "/oname=$PLUGINSDIR\image.bmp" "local_image.bmp"<br>SetBrandingImage "$PLUGINSDIR\image.bmp"<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">backslashdot</span><br><span class="post-time small text-muted">13th September 2004 14:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am creating an NSI file that is not only supposed to work, but serve as a functional example for others and for a quick reference for myself. I am trying to use the basic functions all in one app. Here is what I have, and following is the error that I get.<br><br>The following is my TEMPLATE.INI file:<br>--------------------------------------<br>; Ini file generated by the HM NIS Edit IO designer.<br>[Settings]<br>NumFields=1<br><br>[Field 1]<br>Type=Bitmap<br>Flags=RESIZETOFIT<br>Left=18<br>Right=126<br>Top=14<br>Bottom=110<br>--------------------------------------<br><br>I have renamed my image to "image.bmp" and placed it into the c:\Program Files\NSIS\Plugins\ directory and into the \Contrib\Graphics\ directory to cover some bases. I will clean up later as soon as I find out what is wrong.<br><br>The following is my NSI code:<br>--------------------------------------<br>!include "MUI.nsh"<br>Name "Demo"<br>OutFile "NSIS_Demo.exe"<br>BrandingText "Branding Test"<br>AddBrandingImage left 150 0<br><br>!define MUI_WELCOMEPAGE_TITLE "MUI_WELCOMEPAGE_TITLE"<br>!define MUI_WELCOMEPAGE_TEXT "MUI_WELCOMEPAGE_TEXT"<br><br>!insertmacro MUI_PAGE_WELCOME<br>Page custom Template<br>!insertmacro MUI_PAGE_INSTFILES<br>!insertmacro MUI_PAGE_FINISH<br><br>ReserveFile "Template.ini"<br><br>!insertmacro MUI_LANGUAGE "English"<br><br>Section "Section Title" SectionName<br>;Section code here<br>SectionEnd<br><br>LangString TEXT_IO_TITLE ${LANG_ENGLISH} "Langstring Title"<br>LangString TEXT_IO_SUBTITLE ${LANG_ENGLISH} "Langstring Subtitle"<br><br>Function .onInit<br>!insertmacro MUI_INSTALLOPTIONS_EXTRACT "Template.ini"<br>FunctionEnd<br><br>Function Template<br>!insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE)"<br>!insertmacro MUI_INSTALLOPTIONS_DISPLAY "Template.ini"<br>File "/oname=$PLUGINSDIR\image.bmp" "c:\Program Files\NSIS\Contrib\Graphics\image.bmp"<br>SetBrandingImage "$PLUGINSDIR\image.bmp"<br>FunctionEnd<br>--------------------------------------<br>ERROR<br>--------------------------------------<br>SetBrandingImage:<br>Error: no branding image found in chosen UI!<br><br>Can someone help with this? I do ont understand why it cannot see the image on the UI? Is there a labelling that I'm missing?<br><br>Thanks all!<br>TM</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th September 2004 17:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">The MUI changes the UI and therefore removes the branding image. If you put the AddBrandingImage command after the page macros, it should work.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">backslashdot</span><br><span class="post-time small text-muted">13th September 2004 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">OK... that worked... kind of.<br><br>I now have a space reserved on the side for what looks to be where the image is to be displayed, just no image. When I select &lt;NEXT&gt;, the same 'gap' is present with no image. Now... if I select &lt;BACK&gt;, the image is now there. Selecting &lt;NEXT&gt; will, likewise, now show the image.<br><br>Any idea?<br><br>Thanks,<br>TM</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th September 2004 21:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well, you are setting the image after the InstallOptions call returns, which is when the second page is destroyed.<br><br>Reading your original post again, it seems that branding image is not what you are looking for. You said you wanted to show a picture just in the custom page, not on all pages. For this, you have to define a image field (Type=Bitmap) and set the text value to the path of the image (Text=$PLUGINSDIR\image.bmp). Note that since $PLUGINSDIR is never the same, you should dynamically write this value (before you call MUI_INSTALLOPTIONS_DISPLAY).</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>