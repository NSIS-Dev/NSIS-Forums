<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="show progress of a file, instead of overall status?!"><title>show progress of a file, instead of overall status?! - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">show progress of a file, instead of overall status?!</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235465">show progress of a file, instead of overall status?!</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">nco2k</span><br><span class="post-time small text-muted">14th January 2006 15:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>show progress of a file, instead of overall status?!</strong><br>hi everybody,<br><br>i have a installer which contains two files, a small exe and a ~300mb (already packed) archive-file.<br><br>now the problem is, the archive-file is very big and needs some time to extract, so in that time, the progressbar of the installer, wont go on until the archive-file has been fully extracted. it looks ugly when the progress goes to about 5-10% and wont change for a very long time, then suddenly jump to 100%, after the archive-file has been extracted. the exe is small and dont need much time to extract.<br><br>if i change the installation order, so that the exe extracts first and after that the archive-file, the progressbar goes to about 90-95% and then wont move until the archive-file has been extracted. this would look even more ugly.<br><br>now my question... is there a possibility to show the current extraction status of my archive-file in the progressbar, instead of the overall installation progress??<br><br>sorry for my bad english, i hope you guys understand what i mean. thanks for any help!<br><br>p.s.: i am using the Modern UI and have SetCompress off becuase my archive-file is already compressed and it would only slow things down.<br><br>c ya,<br>nco2k</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">14th January 2006 17:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">AFAI know progress bar position is script line related (this is why it looks crazy in script loops). You can use fixed banner during file extraction (included to distribution). You can also test NSIS ReserveFile, but this may be useless in your situation. It is possible to write a new plug-in (or update one of existing banner plug-ins <a href="http://nsis.sourceforge.net/Category:Plugins" target="_blank">http://nsis.sourceforge.net/Category:Plugins</a> ), but this require some tests of file system behaviour, main quiestion is correctness of file size requests during file write.<br>BTW multi-file distribution is not a bad idea sometimes :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nco2k</span><br><span class="post-time small text-muted">15th January 2006 17:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">well i would love to do that, but my c/c++ skills are zero. :)<br><br>probably i will ask Afrow UK. maybe he has the time and the will to make such a plugin, which shows the status of the current file 0-100% (for each file) instead of the overall-progress.<br><br>it would be pretty cool, if he (or someone else) could make such a plugin. :)<br><br>c ya,<br>nco2k</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">15th January 2006 17:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">This would be very hard to do and may not even be possible to do during run-time via a plugin. The actual NSIS source code would have to be modified in some way, and I'm not going there I'm afraid! Compiler plugins are another option but unfortunately they have not been implemented yet.<br><br>Edit: Actually I have an idea of how to implement this after a little thought. I'll probably work on it during the week.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nco2k</span><br><span class="post-time small text-muted">15th January 2006 18:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">i agree, if the nsis source has to be modified, then its better not to mess with it.<br><br>but how does the EBanner plugin (<a href="http://nsis.sourceforge.net/EBanner_plug-in" target="_blank">http://nsis.sourceforge.net/EBanner_plug-in</a>) modify/change the progressbar state ?!<br><br>c ya,<br>nco2k</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">15th January 2006 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've edited my post above.<br><br>-Stu :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">15th January 2006 18:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Changing the progress bar value is easy. It's determining how much of a file has been decompressed, and how much the progress bar should move in that time which is the problem.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">16th January 2006 07:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">EBanner displays image on the installation dialog field, it not touches progress bar. This is very similar to NSIS SetBrandingImage (with png support :) ). IMHO <a href="http://nsis.sourceforge.net/Marquee_text_scroll" target="_blank">Marquee</a> is better for your purpose. You can add second timer (first one used for text redraw), check resulting file size on it's message/event and update progress bar position on the dialog using TBM_SETPOS (it's easy to get progress bar ID). I am not sure in all these mixed threadings, but probably this should work.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">16th January 2006 23:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I worked on the plugin today and after a good few hours I've got it working nicely, and it's very easy to use (for the NSIS coder that is).<br><br>Needs more testing though and I need to make a small readme.<br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nco2k</span><br><span class="post-time small text-muted">17th January 2006 22:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">wow great, im looking forward to it. ;)<br><br>c ya,<br>nco2k</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">17th January 2006 23:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=235740" target="_blank">http://forums.winamp.com/showthread....hreadid=235740</a><br><br>-Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Takhir</span><br><span class="post-time small text-muted">18th January 2006 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I also had a free minute and did some tests with target file size tracking (instead of LVN catching Afrow UK used). Result is <a href="http://nsis.sourceforge.net/File:Fsp.zip" target="_blank">FileSizeProgress</a> plug-in.<br>In 'SetCompress off' installer mode plug-in adds requested percentage to the "Extract:..." line, but this require file name and total file size options defined (/fn=, /fs=, see included samples). Some automation for file size may be done using !system command (samples for file version extraction at the compile time were discussed many times).<br>In 'SetCompress on' mode plug-in can work without file definition, this case plug-in takes value from text line above progress bar.<br>Progress bar range is from it's current position to predefined final position (/pbf=), default is 100 (progress bar maximum). Last parameter is timer interval (/int=).</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="../js/highlight.pack.js" async></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>