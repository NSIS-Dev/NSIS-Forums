<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Multiple defines problem" />

  <title>Multiple defines problem - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Multiple defines problem</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308103">Multiple defines problem</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rixor</span><br />
      <span class="post-time small text-muted">8th July 2009 23:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Multiple defines problem</strong><br />
      I have a couple of installer scripts (actually, 4) that share a lot of common features, functions and settings, and as such, I created a common include file to contain all said commonailites. I don't know if its relevant or not, but I used to have each installer script have everything within it, which was a pain to maintain, but at least it worked.<br />
      <br />
      The problem: During compilation, when parsing the common header file, the compiler is complaining about a couple of multiply defined symbols, but there is no where that these symbols are defined before hand. Perhaps there is some implications that I am unaware of when splitting up an installer over multiple files.<br />
      <br />
      Anyways, here is the code:<br />
      <br />
      Common header file: <a href="http://pastebin.com/m1ceacc50" target="_blank">http://pastebin.com/m1ceacc50</a><br />
      One of the 4 scripts: <a href="http://pastebin.com/m36a79415" target="_blank">http://pastebin.com/m36a79415</a><br />
      <br />
      The compiler first complains when it reaches line 35 of the common header file. It says that MUI_WELCOMEFINISHPAGE_BITMAP is already defined. If I comment out that line or put !ifndef !endif around it, it then complains about MUI_UNWELCOMEFINISHPAGE_BITMAP, and then MUI_ICON, and MUI_UNICON, and a few others beyond that.<br />
      <br />
      I can't figure this out. It's probably something really stupid, but sometimes you need a fresh pair of eyes to see it.<br />
      <br />
      Thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rixor</span><br />
      <span class="post-time small text-muted">9th July 2009 20:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Has no one seen this before? Even if I check the log and look for the !define statement of the apparently already defined symbol, I only find the one instance that it errors on. If the symbol was defined before, should it not show up in the log?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">9th July 2009 22:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Try switching to MUI2.nsh<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rixor</span><br />
      <span class="post-time small text-muted">9th July 2009 22:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the advice, Afrow, I just tried it. It managed to not error on MUI_WELCOMEFINISHPAGE_BITMAP and MUI_UNWELCOMEFINISHPAGE_BITMAP, but it did on MUI_ICON. So it may a little bit of a difference, but didn't quite fix the problem. Curious!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rixor</span><br />
      <span class="post-time small text-muted">9th July 2009 23:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I should mention i am using the latest NSIS with the latest UNICODE branch (downloaded and installed today).<br />
      <br />
      Also, I tried putting !undef in front of all the macros that have the problem. The installer completes, but the welcome page is blank. This is when using MUI2.nsh.<br />
      <br />
      With MUI.nsh, the installer gets to the end, but stops with this error:<br />
      <br /></p>

      <blockquote>
        Processed 1 file, writing output: Adding plug-ins initializing function... Done! Error: resolving uninstall function "un.Nsis2Io" in function "un.mui.WelcomePre_92.7.5.9" Note: uninstall functions must begin with "un.", and install functions must not Error - aborting creation process
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rixor</span><br />
      <span class="post-time small text-muted">10th July 2009 01:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I managed to get almost everything to work, simply by placing the section (not installer section, but rather code section, separated by large comment blocks) titled "setup" after my page definitions. The only problem now is that my header image won't load. It always did with MUI, but MUI2 doesn't seem to want to load it.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
