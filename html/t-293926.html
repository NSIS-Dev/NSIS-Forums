<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Detect Virtual Machine"><title>Detect Virtual Machine - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Detect Virtual Machine</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293926">Detect Virtual Machine</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">meaningoflights</span><br><span class="post-time small text-muted">3rd July 2008 03:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Detect Virtual Machine</strong><br>Hi,<br><br>I'm looking to prevent my program from being installed on Virtual PCs and am trying to find a way to determine if the machine is virtual?<br><br>If anyone has any clues that would be much appreciated.<br><br>Cheers</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">meaningoflights</span><br><span class="post-time small text-muted">3rd July 2008 04:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">looks like it will be easy to do in the program:<br><br>hXXp://www.codeproject.com/KB/system/VmDetect.aspx</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">3rd July 2008 10:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Why does everyone want to prevent their users from doing stuff? Anyway, the whole point of a virtual machine is to trick the OS and its apps to think they are running on hardware...so, you might be able to put some checks in there, but not for everything out there (Not just VPC and VMWare, you also have Parallels,QEMU, VirtualBox and Bochs and several others, and lets not forget about WINE)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">pospec</span><br><span class="post-time small text-muted">3rd July 2008 11:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Maybe for reason that the program can be unstable on virtual machines? :confused:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">3rd July 2008 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It may be better to give them a warning somewhere that the software is not supported on virtual machines. That would also save some work.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">3rd July 2008 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If the Virtual Machine Monitor (VMM) aka Hypervisor is implemented properly, then neither the Guest-OS itself nor any program running on the Guest-OS will be able to detect that it's running on a Virtual Machine. That's the whole point about virtualization! Well, the x86 architecture (IA-32) cannot be virtualized that easy, so software solutions (VMWare, VirtualBox. etc.) have some limitations, which <i>might</i> allow the Guest-OS to detect that it's running in a VM. But new hardware-extensions to x86, like <i>Intel VT-x</i>, will allow proper virtualization. And then there should be no chance to detect a VM. So better give up about that idea and do it like suggested by Afrow...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">meaningoflights</span><br><span class="post-time small text-muted">4th July 2008 04:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi all,<br><br>Gold star to Afrow UK.<br><br>Andres, I agree 100% except when your trying to secure your software from vm copies thats when you want to prevent your users from doing stuff. The real problem for me is that I'm faced with customers without web access, its complicated..<br><br>I bet you red-gate will trawl thru this forum and see this - and go img wtf - lets make a virtual pc detection component!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Anders</span><br><span class="post-time small text-muted">4th July 2008 12:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">How is a copy running in a VM any different from running on a normal box? What about the people using linux or osX and use VM's for win32 apps, are you just gonna screw them over, even tho they have a perfectly valid reason to use a VM</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">LoRd_MuldeR</span><br><span class="post-time small text-muted">4th July 2008 13:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote><i>Originally posted by Anders</i><br><b>How is a copy running in a VM any different from running on a normal box?</b></blockquote>There is no difference. At least there <i>should</i> be no difference ;)<br><br>And it's <i>impossible</i> for a program to detect that it's running inside a VM, unless you exploit a bug in the VMM/Hypervisor...<br><br><pre>
<code>Equivalence <br>    A program running under the VMM should exhibit a behavior essentially<br>    identical to that demonstrated when running on an equivalent machine directly.<br>Resource control <br>    The VMM must be in complete control of the virtualized resources.<br>Efficiency <br>    A statistically dominant fraction of machine instructions must be<br>    executed without VMM intervention. </code>
</pre><br>
      <br>
      For further info, refer to:<br>
      <a href="http://en.wikipedia.org/wiki/Popek_and_Goldberg_virtualization_requirements" target="_blank">http://en.wikipedia.org/wiki/Popek_a...n_requirements</a>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>