<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Next Button or something else?" />

  <title>Next Button or something else? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Next Button or something else?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187553">Next Button or something else?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">monidon</span><br />
      <span class="post-time small text-muted">23rd July 2004 17:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Next Button or something else?</strong><br />
      Hello,<br />
      I am having problem with the behaviour of the custom dialog box I have created. This dialog box displays 'Next' button disabled until you click on CheckBox. Selecting Check box make the 'Next' button enabled. Which works perfectly fine until you click on 'Next'. Once you click 'Next' and again if I come back to the same page by clicking 'Back' then Clicking checkbox take me to the<br />
      previous screen Where it should just enable or disable the Next button. Following is the code..Can someone help me to sort the problem. Thanks, Monika<br />
      <br />
      Function .onInit<br />
      !insertmacro MUI_INSTALLOPTIONS_EXTRACT "Warning.ini"<br />
      FunctionEnd<br />
      <br />
      Function WarningPage<br />
      !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUESTATE "Warning.ini" "Field 2" "State"<br />
      <br />
      ;Before Displaying the page retain the settings to display next button enabled/disabled accordingly.<br />
      <br />
      GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />
      EnableWindow $NEXTWINDOW 0<br />
      <br />
      StrCmp $CHK_CONTINUESTATE "1" +3<br />
      EnableWindow $NEXTWINDOW 0<br />
      Goto +2<br />
      EnableWindow $NEXTWINDOW 1<br />
      <br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "Warning.ini" "Field 1" "Text" $(WARNING_MAIN_TEXT)<br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "Warning.ini" "Field 2" "Text" $(WARNING_CONTINUE)<br />
      <br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "Warning.ini"<br />
      <br />
      FunctionEnd<br />
      <br />
      Function WarningPage_Leave<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUE "Warning.ini" "Settings" "State"<br />
      <br />
      <br />
      StrCmp $CHK_CONTINUE 0 ClickNextBtn<br />
      StrCmp $CHK_CONTINUE 2 NextBtnState<br />
      <br />
      <br />
      NextBtnState:<br />
      !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUESTATE "Warning.ini" "Field 2" "State"<br />
      <br />
      GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />
      <br />
      StrCmp $CHK_CONTINUESTATE "1" +3<br />
      EnableWindow $NEXTWINDOW 0<br />
      Goto +2<br />
      EnableWindow $NEXTWINDOW 1<br />
      <br />
      Abort<br />
      <br />
      <br />
      ClickNextBtn:<br />
      <br />
      <br />
      FunctionEnd</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">23rd July 2004 20:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You cannot disable the Next button with InstallOptions unfortunately. However, what you can do is stop the user from leaving the dialogue.<br />
      <br />
      E.g.<br /></p>
      <pre>
<code><br />Function CustomDialogue<br />Push $R0<br />Top:<br />InstallOptions::dialog "dlg.ini"<br /> Pop $R0<br /> StrCmp $R0 next 0 +3<br />  ReadINIStr $R0 "dlg.ini" "Field 1" "State"<br />  StrCmp $R0 0 Top ;if checkbox unchecked, go back<br />Pop $R0<br />FunctionEnd</code>
</pre><br />
      <br />
      -Stu
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">24th July 2004 03:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">monidon:<br />
      Attach a reduced, but compilable version of your script.<br />
      Then it will be easier to help you.<br />
      <br />
      Afrow:<br />
      The code that monidon has included:<br /></p>
      <pre>
<code><br />GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />EnableWindow $NEXTWINDOW 0<br /></code>
</pre><br />
      actually does disable the "Next" button.<br />
      Try it and see.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">monidon</span><br />
      <span class="post-time small text-muted">26th July 2004 12:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for your replies.<br />
      What Iceman_K saying is right, I can enable disable Next button with the code I posted. Only problem I am facing is that when I check the checkbox which makes the Next button enabled, I go to next page and come back to change my settings by clicking the checkbox again takes me to previous page. Where it should just disable the button again.<br />
      Can't understand why this is happening.<br />
      Any help would be appriciated.<br />
      Thanks,<br />
      Monika</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">26th July 2004 13:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Again: attach a compilable version of your script demonstrating the problem.<br />
      Maybe then someone will be able to help you.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">monidon</span><br />
      <span class="post-time small text-muted">26th July 2004 14:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Now I have attached sample NSIS script which I wrote to demonstrate what is happening. Please have a look..can download and try running it to see its behaviour. YOu will need DynamicDlg2.ini file as well. Which includes the following fields<br />
      ************************************************<br />
      [Settings]<br />
      NumFields=3<br />
      <br />
      [Field 1]<br />
      Type=Groupbox<br />
      Text="This is a group box..."<br />
      Left=0<br />
      Right=-1<br />
      Top=0<br />
      Bottom=-4<br />
      <br />
      [Field 2]<br />
      Type=Checkbox<br />
      Text=Enable/Disable Next<br />
      Flags=NOTIFY<br />
      State=0<br />
      Left=10<br />
      Right=100<br />
      Top=17<br />
      Bottom=25<br />
      <br />
      [Field 3]<br />
      Type=Label<br />
      Text=This is just an example script<br />
      Left=9<br />
      Right=436<br />
      Top=84<br />
      Bottom=102<br />
      *******************************************<br />
      <br />
      Thanks and any help will be appriciated.<br />
      Monika</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">iceman_k</span><br />
      <span class="post-time small text-muted">26th July 2004 18:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't know what to tell you.... it works perfectly for me.<br />
      Are you sure you have all the latest CVS updates?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">monidon</span><br />
      <span class="post-time small text-muted">27th July 2004 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello Iceman_K,<br />
      What you were saying is right. Updating latest CVS files made my program run perfectly fine. But I can't really use this update for building our product release as the code is not tested and it won't be good idea to use updated CVS files for building release product.<br />
      <br />
      But thanks a lot for your help. It did helped me and now atleast I know that there is a solution. So I will wait until NSIS release next version with this bug fix.<br />
      <br />
      Thanks once again,<br />
      Monika</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">27th July 2004 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That will probably be some time.<br />
      I myself would rather use the CVS version than the 'stable' release. It's been often that the last 'stable' release has had more bugs than the CVS because the CVS has had the bug fixes implemented.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
