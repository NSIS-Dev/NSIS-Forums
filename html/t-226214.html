<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Change Background Color of Text Box on Custom Page"><title>Change Background Color of Text Box on Custom Page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Change Background Color of Text Box on Custom Page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=226214">Change Background Color of Text Box on Custom Page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Jnuw</span><br><span class="post-time small text-muted">16th September 2005 23:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Change Background Color of Text Box on Custom Page</strong><br>Hello all.<br><br>I have scoured the forums, and help files, and tried to decipher the IoColors.zip example, but am still confused. Basically what I have is a custom page (ResultsPage) that contains a text box (Type=Text in the ResultsPage.ini). I have the text box set with: Flags=MULTILINE|VSCROLL|READONLY, as I'm using it to display a large amount of text. I want to keep in READONLY but don't like the gray background it produces.<br><br>So... I just need a hand setting the background of this custom control (Type=Text) back to white as if it was not READONLY. Below is the code for the display of the ResultsPage, and the corresponding INI. Can someone please show me the commands I need? Thanks so much all!<br><br>Jnuw<br><br></p><pre>
<code><br>Function SetFinishPage<br>  ;Next 4 lines removes next and back buttons<br>  GetDlgItem $0 $HWNDPARENT 3<br>  ShowWindow $0 0<br>  GetDlgItem $0 $HWNDPARENT 1<br>  ShowWindow $0 0<br>  <br>  StrCmp $NumMissing 0 0 +2<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ResultsPage.ini" "Field 5" "Flags" "DISABLED"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ResultsPage.ini" "Field 2" "State" "$Output"<br>  !insertmacro MUI_INSTALLOPTIONS_WRITE "ResultsPage.ini" "Settings" "Title" "${PRODUCT_NAME}"<br>  !insertmacro MUI_HEADER_TEXT "Results" "Please review the results below."<br>  !insertmacro MUI_INSTALLOPTIONS_DISPLAY "ResultsPage.ini"<br>FunctionEnd<br></code>
</pre><br>
      <br>
      ResultsPage.ini<br>
      <pre>
<code><br>[Settings]<br>NumFields=5<br>Title=<br>CancelShow=1<br>CancelButtonText=Exit<br><br><br>[Field 1]<br>Type=GroupBox<br>Left=0<br>Right=-1<br>Top=0<br>Bottom=-1<br>Text=""<br><br>[Field 2]<br>Type=Text<br>Left=10<br>Right=-10<br>Top=10<br>Bottom=120<br>State="Error..."<br>Flags=MULTILINE|VSCROLL|READONLY<br><br>[Field 3]<br>Type=Link<br>Left=10<br>Right=139<br>Top=126<br>Bottom=136<br>State=http://www.blabla.com/<br>Text=Click to open Website.<br><br>[Field 4]<br>Type=Button<br>Flags=NOTIFY<br>Text=&amp;Print Results<br>Left=240<br>Right=-10<br>Top=123         <br>Bottom=137<br><br>[Field 5]<br>Type=Button<br>Flags=NOTIFY<br>Text=&amp;Download Missing Updates<br>Left=140<br>Right=235<br>Top=123         <br>Bottom=137<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">17th September 2005 10:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">!insertmacro MUI_INSTALLOPTIONS_INITDIALOG "ResultsPage.ini"<br>
      Pop $R0 # HWND<br>
      GetDlgItem $R1 $R0 1201 ; 1200 + Field # - 1<br>
      SetCtlColors $R1 000000 FFFFFF<br>
      !insertmacro MUI_INSTALLOPTIONS_SHOW<br>
      <br>
      Instead of MUI_INSTALLOPTIONS_DISPLAY<br>
      <br>
      -Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jnuw</span><br>
      <span class="post-time small text-muted">18th September 2005 15:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks again Stu, that did the trick perfectly. I really appreciate your help!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takeshi</span><br>
      <span class="post-time small text-muted">22nd January 2007 09:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Afrow UK</i><br>
        <b>!insertmacro MUI_INSTALLOPTIONS_INITDIALOG "ResultsPage.ini"<br>
        Pop $R0 # HWND<br>
        GetDlgItem $R1 $R0 1201 ; 1200 + Field # - 1<br>
        SetCtlColors $R1 000000 FFFFFF<br>
        !insertmacro MUI_INSTALLOPTIONS_SHOW<br>
        <br>
        Instead of MUI_INSTALLOPTIONS_DISPLAY<br>
        <br>
        -Stu</b>
      </blockquote>hello guys<br>
      i have tried using this code for my custom pages<br>
      to change the color of the text box to white color, but what happened is like the one u can see in the attachment.<br>
      anyone have idea, how to modify my code, so that only the text box background color is changed, and i dont want that grey background color (the one in the red square)<br>
      this is my .ini code<br>
      <br>
      [Settings]<br>
      NumFields=5<br>
      <br>
      [Field 1]<br>
      Type=Label<br>
      Text=Please enter your name and the name of the company for which you work.<br>
      Left=0<br>
      Right=262<br>
      Top=0<br>
      Bottom=8<br>
      <br>
      [Field 2]<br>
      Type=Label<br>
      Text=User Name:<br>
      Left=0<br>
      Right=269<br>
      Top=25<br>
      Bottom=34<br>
      <br>
      [Field 3]<br>
      Type=Text<br>
      Left=0<br>
      Right=272<br>
      Top=37<br>
      Bottom=51<br>
      <br>
      [Field 4]<br>
      Type=Label<br>
      Text=Company Name<br>
      Left=0<br>
      Right=273<br>
      Top=64<br>
      Bottom=72<br>
      <br>
      [Field 5]<br>
      Type=Text<br>
      Left=0<br>
      Right=275<br>
      Top=74<br>
      Bottom=88<br>
      <br>
      and this the coding in the function<br>
      <br>
      Function Create_Pg_UserInfo<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "userinfo.ini"<br>
      <br>
      ${if} $OLD == "$(^Name)"<br>
      Abort<br>
      ${endif}<br>
      <br>
      ReadRegStr $0 ${PRODUCT_UNINST_ROOT_KEY} "SOFTWARE\Microsoft\Windows NT\CurrentVersion" "RegisteredOwner"<br>
      !insertmacro MUI_INSTALLOPTIONS_WRITE "userinfo.ini" "Field 3" "State" "$0"<br>
      <br>
      ReadRegStr $0 ${PRODUCT_UNINST_ROOT_KEY} "SOFTWARE\Microsoft\Windows NT\CurrentVersion" "RegisteredOrganization"<br>
      !insertmacro MUI_INSTALLOPTIONS_WRITE "userinfo.ini" "Field 5" "State" "$0"<br>
      <br>
      Pop $R0 # HWND<br>
      GetDlgItem $R1 $R0 1202 ; 1200 + Field # - 1<br>
      SetCtlColors $R1 "000000" "FFFFFF"<br>
      <br>
      !insertmacro MUI_HEADER_TEXT "Customer Information" "Please enter your information"<br>
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "userinfo.ini"<br>
      !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br>
      FunctionEnd<br>
      <br>
      thank you guys for always helping me
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">22nd January 2007 10:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Now InstallOptions writes the HWND of every control to ini, so,<br>
      Instead of GetDlgItem $R1 $R0 1202 ; 1200 + Field # - 1<br>
      Use</p>
      <pre>
<code> ReadINIStr "$R1" "$PLUGINSDIR\userinfo.ini" "field 3" "HWND"<br>SetCtlColors "$R1" "000000" "FFFFFF"</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takeshi</span><br>
      <span class="post-time small text-muted">22nd January 2007 10:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Red Wine, do i need to include this:<br>
      !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "userinfo.ini" ?<br>
      i have tried using the code above,<br>
      <br>
      ReadRegStr $0 ${PRODUCT_UNINST_ROOT_KEY} "SOFTWARE\Microsoft\Windows NT\CurrentVersion" "RegisteredOwner"<br>
      !insertmacro MUI_INSTALLOPTIONS_WRITE "userinfo.ini" "Field 3" "State" "$0"<br>
      <br>
      ReadRegStr $0 ${PRODUCT_UNINST_ROOT_KEY} "SOFTWARE\Microsoft\Windows NT\CurrentVersion" "RegisteredOrganization"<br>
      !insertmacro MUI_INSTALLOPTIONS_WRITE "userinfo.ini" "Field 5" "State" "$0"<br>
      ; !insertmacro MUI_INSTALLOPTIONS_INITDIALOG "userinfo.ini"<br>
      Pop $R0 # HWND<br>
      ReadINIStr "$R1" "userinfo.ini" "field 3" "HWND"<br>
      SetCtlColors "$R1" "000000" "FFFFFF"<br>
      !insertmacro MUI_HEADER_TEXT "Customer Information" "Please enter your information"<br>
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "userinfo.ini"<br>
      !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br>
      <br>
      without the initdialog, i cant get the result at all, the box doesnt turn to white background color, and if i use with the initdialog, the result is the same as the attachment..<br>
      did i put the code at the wrong place?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">22nd January 2007 11:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Yeah! you already discovered this!<br>
      1st init the dialog, set ctl colors and then show the dialog.<br>
      You certainly know how to do it :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takeshi</span><br>
      <span class="post-time small text-muted">23rd January 2007 02:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I thought I had attached an attachment during my 1st post..but I didnt...<br>
      Im sorry Red Wine, I still cannot solve my prob..<br>
      please see the attachment<br>
      i want to remove that grey background color</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">23rd January 2007 04:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code>..............<br>..............<br>Push $1 <br> InstallOptions::InitDialog /NOUNLOAD "$PLUGINSDIR\userinfo.ini"<br> Pop $1<br>    FindWindow $1 "#32770" "" $HWNDPARENT<br>    SetCtlColors $1 '' '0x000000'<br> InstallOptions::Show "$PLUGINSDIR\userinfo.ini"<br> Pop $1<br> <br> Pop $1<br> Pop $1<br>FunctionEnd</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takeshi</span><br>
      <span class="post-time small text-muted">23rd January 2007 06:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Anyway, what is the different between :<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_INITDIALOG<br>
      &amp;<br>
      INSTALLOPTIONS::InitDialog<br>
      <br>
      and<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY<br>
      &amp;<br>
      !insertmacro MUI_INSTALLOPTIONS_SHOW<br>
      &amp;<br>
      INSTALLOPTIONS::SHOW</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">23rd January 2007 06:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The MUI macro system is designed for your convenience<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_INITDIALOG == INSTALLOPTIONS::InitDialog /NOUNLOAD<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_SHOW ==<br>
      INSTALLOPTIONS::SHOW<br>
      <br>
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY ==<br>
      INSTALLOPTIONS::DISPLAY</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Takeshi</span><br>
      <span class="post-time small text-muted">23rd January 2007 07:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok Red Wine. thanx a lot for your help!</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>