<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="A Preselect page in setup"><title>A Preselect page in setup - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">A Preselect page in setup</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274799">A Preselect page in setup</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Dark^Listner</span><br><span class="post-time small text-muted">23rd July 2007 13:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>A Preselect page in setup</strong><br>Hello<br>IÂ´m looking for a possibility to get a second components page in my installer. The user should have to decide first between two mainthemes of the installation. I have for each of them a componets page. For example: when setup starts you can decide if you want to install "game 1" or "game 2". then you can choose the options. It is unpossible to make 2 setup runtimes because they would have t large, to i canÂ´t put the on one cd.<br><br>If there is a possiblity and if you understand my little bit worst english, could anyone post the code for it.<br><br>Thank you very much<br><br>Dark^Listner</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">23rd July 2007 13:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Create a custom page using InstallOptions to begin with.<br>Based on the user's selection on there, you can decide which sections should be hidden from the single components page (so effectively you have two components pages, but it is in fact one with a selected list of items to install).<br><br>To hide a section, set its text to "" with SectionSetText.<br><br>As for displaying which game is being installed on those pages, set Name to a variable like so:<br><br></p><pre>
<code>Var $NAME<br>Name $NAME<br><br>Function .onInit<br>  StrCpy $NAME "My Installer Name"<br>FunctionEnd</code>
</pre><br>
      <br>
      When you change the value of $NAME, it shall be reflected on the installer pages.<br>
      <br>
      Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dark^Listner</span><br>
      <span class="post-time small text-muted">23rd July 2007 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, but i donÂ´t understand one thing. :-)<br>
      normaly all options on the componets page are activate, so it is a problem to hide these option, because the user canÂ´t see them so he also canÂ´t disactivate them. so if have to disable all options first. right? but i donÂ´t know how?<br>
      <br>
      thx for your answers<br>
      <br>
      <br>
      ------------------------------------<br>
      is it possible to post the whole code foor a custome page which to radiobuttons and th command to hide or display the components, because my problems starts in making a new page<br>
      thank you</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd July 2007 14:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Before displaying the components page, you select and hide the sections that you do not want to have installed using !insertmacro SelectSection (from Sections.nsh) and SectionSetText "".<br>
      <br>
      Your code might look something like this:<br></p>
      <pre>
<code><br>!include LogicLib.nsh<br>!include Sections.nsh<br><br>!define MUI_PAGE_CUSTOMFUNCTION_PRE ComponentsPagePre<br>!insertmacro MUI_PAGE_COMPONENTS<br><br>Section "" GAME1_1<br>...<br>SectionEnd<br><br>Section "" GAME1_2<br>...<br>SectionEnd<br><br>Section "" GAME2_1<br>...<br>SectionEnd<br><br>Section "" GAME2_2<br>...<br>SectionEnd<br><br>Function ComponentsPagePre<br><br>  # Which game to install?<br>  !insertmacro MUI_INSTALLOPTIONS_READ $R0 "my ini file.ini" "Field 1" "State"<br><br>  # Install game 1.<br>  ${If} $R0 == 1<br><br>    # Show and select all game 1 components.<br>    !insertmacro SelectSection ${GAME1_1}<br>    !insertmacro SelectSection ${GAME1_2}<br>    SectionSetText ${GAME1_1} "Game 1 Section 1"<br>    SectionSetText ${GAME1_2} "Game 1 Section 2"<br><br>    # Hide and unselect all game 2 components.<br>    !insertmacro UnselectSection ${GAME2_1}<br>    !insertmacro UnselectSection ${GAME2_2}<br>    SectionSetText ${GAME2_1} ""<br>    SectionSetText ${GAME2_2} ""<br><br>  # Install game 2.<br>  ${Else}<br><br>    # Show and select all game 2 components.<br>    !insertmacro SelectSection ${GAME2_1}<br>    !insertmacro SelectSection ${GAME2_2}<br>    SectionSetText ${GAME2_1} "Game 2 Section 1"<br>    SectionSetText ${GAME2_2} "Game 2 Section 2"<br><br>    # Hide and unselect all game 1 components.<br>    !insertmacro UnselectSection ${GAME1_1}<br>    !insertmacro UnselectSection ${GAME1_2}<br>    SectionSetText ${GAME1_1} ""<br>    SectionSetText ${GAME1_2} ""<br><br>  ${EndIf}<br><br>FunctionEnd<br></code>
</pre><br>
      <br>
      Stu
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd July 2007 14:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There are dozens of InstallOptions examples. A good base INI file with two radio buttons you can use is Examples\makensis.ini<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dark^Listner</span><br>
      <span class="post-time small text-muted">23rd July 2007 14:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">THank you very much Afrow UK<br>
      it loks good, but it doensnÂ´d work because there is an error in "!insertmacro MUI_PAGE_COMPONENTS" nsis canÂ´t find a file. I donÂ´t know where what to to with a -ini file<br>
      maybe should do like !include precmop.ini?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">23rd July 2007 18:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">!include MUI.nsh<br>
      <br>
      This is for a Modern UI installer.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Dark^Listner</span><br>
      <span class="post-time small text-muted">23rd July 2007 19:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry, now i can compile the script but the command !define<br>
      !insertmacro MUI_PAGE_COMPONENTS makes that i have two componets pages, but it isnÂ´t possible to get my .ini page allthough they are included in the script<br>
      <br>
      <br>
      EDIT: Now it works thx you so much</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>