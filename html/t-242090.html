<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="extract program version from .h file"><title>extract program version from .h file - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">extract program version from .h file</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242090">extract program version from .h file</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">wstokes</span><br><span class="post-time small text-muted">29th March 2006 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>extract program version from .h file</strong><br>I'd like to further automate the release process for my Open Source app. Currently the applications version # is defined in three places:<br>-a .h file<br>-the .nsi NSIS script<br>-a Mac OS X plist file<br><br>I can automatically generate a proper Mac OS X Disk image using a bash script which extracts the version from the .h file like so:<br><br>VERSION=`cat ../src/${appName}/${appname}.h | awk "/${APPNAME}_VERSION/ {print \\$3}" | sed s/\"//g`<br><br>where appName=Reveal and appname and APPNAME are generated like so:<br><br>APPNAME=`echo ${appName} | awk '{print toupper($0)}'`<br>appname=`echo ${appName} | awk '{print tolower($0)}'`<br><br>A copy of the .h can be seen here:<br><a href="http://svn.sourceforge.net/viewcvs.cgi/albumshaper/trunk/clay/src/Reveal/reveal.h?view=markup&amp;rev=824" target="_blank">http://svn.sourceforge.net/viewcvs.c...markup&amp;rev=824</a><br><br>Currently my NSIS .nsi script defines the version like so:<br><br>!define APPNAME "Reveal"<br>!define APPNAME_LOWER "reveal"<br>!define APPVERSION "1.0"<br><br>Is it possible to automatically determine the application version using the .h file like I do under Bash on OSX using NSIS? It would be really nice to get my installer script working great so I don't have to modify it every time I release a new version!<br><br>I looked at the FileOpen and FileRead commands but don't these need to be run within a Function that is inherantly run at installtime? What I'm needing is somethign that is exectued at script compile time so I can appropriately name the generated installer and also properly display the version when running the installer as well. Since the installer is not installing a copy of the source figuring out how to do this at compile time is essential...<br><br>-Will</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">29th March 2006 16:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well unfortunately the Wiki is currently down, but this page will show you (when Wiki is back up) how to use NSIS run time instructions at compile time on the compiling system:<br><br><a href="http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time" target="_blank">http://nsis.sourceforge.net/Invoking...n_compile-time</a><br><br>-Stu</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>