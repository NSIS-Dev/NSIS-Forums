<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Detect clcik on NEXT button"><title>Detect clcik on NEXT button - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Detect clcik on NEXT button</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255735">Detect clcik on NEXT button</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">lorenzop</span><br><span class="post-time small text-muted">18th September 2006 13:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Detect clcik on NEXT button</strong><br>I've created a custom page.<br><br>Only if the user click on NEXT button (of custom page), my installer musts execute some operations:<br><br>.....<br>!insertmacro MUI_INSTALLOPTIONS_READ $SelectedDrive "SceltaFlash.ini" "Field 1" "State"<br>StrCpy $SelectedDrive $SelectedDrive 3<br>.....<br><br>otherwise no.<br><br>Thanks, best regards.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">lorenzop</span><br><span class="post-time small text-muted">18th September 2006 14:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I've tried to use a LeaveFunction in my custom page.<br>The problem is:<br>if the user click on NEXT button, I must control a value. If this value is OK, I must go to the next page; if this value isn't OK, I Must return on my cutom page.<br><br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">saschagottfried</span><br><span class="post-time small text-muted">18th September 2006 15:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">see InstallOptions help - file:///C:/Programme/NSIS/Docs/InstallOptions/Readme.html<br><br>you have to use Section Settings - Field State as shown in the Readme HTML file. Value 0 means next button was pressed. Use Abort function in a page callback function to return to a page.<br><br>Code:<br>!insertmacro MUI_INSTALLOPTIONS_READ $0 "passwordpage.ini" "Settings" "State"<br><br>StrCmp $0 0 next_button return_to_page ; Next button clicked<br>return_to_page:<br>abort<br>next_button:<br>do your stuff...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sunlight112</span><br><span class="post-time small text-muted">26th October 2006 04:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have the same problem with lorenzop and I do these code which saschagottfried show but I run the other program.<br>My code here<br>ReadINIStr $0 $INI "Settings" "State"<br>StrCmp $0 0 ReadMe End<br>ReadMe:<br>ExecWait "nodpad.exe"<br>End:<br>Abort<br>It is run but if I want to run on button NEXT by a file read me.txt. It does not run<br>ReadINIStr $0 $INI "Settings" "State"<br>StrCmp $0 0 ReadMe End<br>ReadMe:<br>SetOutPath $PLUGINSDIR<br>File "c:\readme.txt"<br>ExecWait "$PLUGINSDIR\readme.txt"<br>End:<br>Abort<br>Also I use<br>ExeWait "readme.txt"<br>But I do not run!<br>Please help me!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">saschagottfried</span><br><span class="post-time small text-muted">26th October 2006 12:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, I can't understand anything, after reading your messages twice.<br><br>Please descibe what you try to do with words. Afterwards provide enough of your code, so I can recognize something. You really should read your own messages, before you expect someone to understand this.<br><br>If you take some time for that, I will take my time to give you an answer.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sunlight112</span><br><span class="post-time small text-muted">26th October 2006 12:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I am sorry for my word,<br>I mean I do the same way which you show lorenzop except lorenzop click NEXT to run application, I change NEXT button to become VIEW README.<br>But when I put it in my code, it does not work. I also want to test my code is wrong or true. So, I change file to become nodpad.exe to detect it.At that time, it run well.<br>The first code used for file ReadMe.TXT which I want to show.<br><font color="blue">ReadINIStr $0 $INI "Settings" "State"<br>StrCmp $0 0 ReadMe End<br>ReadMe:<br>SetOutPath $PLUGINSDIR<br>File "c:\readme.txt"<br>ExecWait "$PLUGINSDIR\readme.txt"<br>End:<br>Abort<br>Also I use<br>ExeWait "readme.txt"<br></font><br>The second code expressed file nodpad.exe which I want to test.<br>[COLOR]<br>ReadINIStr $0 $INI "Settings" "State"<br>StrCmp $0 0 ReadMe End<br>ReadMe:<br>ExecWait "nodpad.exe"<br>End:<br>Abort<br>[/COLOR]<br>In case I use <b>nodpad.exe</b> , I click VIEW README, nodpad is executed but I click <font color="red">CLOSE</font> both main application and nodpad is closed.Although I use <b>Abort</b> to return page.<br>Once again sorry,<br>Thank alot for your help,</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">saschagottfried</span><br><span class="post-time small text-muted">26th October 2006 12:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Your problem is that you want to add features to things that you have not understood in basic yet. "Abort" only returns to the page when used in a LEAVE function. Lorenzop did this. You did not even recognized this.<br><br>Do not misuse things like NEXT button. There are other features like MUI_FINISHPAGE_RUN to display a readme file after setup was successful.<br><br>My advice. Look in MUI help for page - chapter 3. This provides enough to customize some features during the install process.<br><br>And you have to understand the concept of callback functions for pages. Study examples in C:\Programme\NSIS\Examples\Modern UI<br>Here you can learn basic installer setup that use MUI and the use of Pre,Show,Leave Functions.<br><br>In the end you will even save time, because you do not have to visit the forum afterwards. Good luck!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">sunlight112</span><br><span class="post-time small text-muted">27th October 2006 03:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank saschagottfried for your advice,<br>I put my code in Leave Function and I know Abort only return the page and used in Leave Function.<br>Perhaps, I post my question is wrong position. However, I see the problem which Lorenzop saw the same way which I want.I also know attribute NEXT,BACK,CANCEL but my purpose is different.<br>Instead of NEXT button is used by Lorenzop, I change it to become VIEW README button.Because my purpose want to create a menu which allow user run all application on this.<br>So, I change this to allow them to see information.<br>This is express my idea:<br>------------------<br>| Button 1 |<br>------------------<br>| Button 2 |<br>------------------<br>|ViewReadMe| Exit|<br>------------------<br>I think you can understandd my purpose and can you give me your help to solve this problem with Button "VIEW README" which I express on above.<br>Thank in advance,</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>