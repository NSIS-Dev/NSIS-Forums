<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="nsis debian gnu/linux package?" />

  <title>nsis debian gnu/linux package? - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">nsis debian gnu/linux package?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=210020">nsis debian gnu/linux package?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">10th March 2005 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>nsis debian gnu/linux package?</strong><br />
      Hi, I've been preparing a package for the Debian GNU/Linux distribution. I was wondering if people think it would be a useful thing to never have to leave the comfort of your debian system, even when you want to build windows installers for free software.<br />
      <br />
      Also, a question or two about this:<br />
      1. The .dll files in the Plugins directory are produced from the source code in the Contrib directory.<br />
      2. Is there anything in the Contrib directory that the makensis program needs at runtime? I guess that the .c/.dsp/.dsw files don't need distributing though.<br />
      3. Has anyone written a Makefile for the dlls in the Plugins dir?<br />
      <br />
      The current modifications include:<br />
      <br />
      1. loading nsisconf.nsh from /etc/nsisconf.nsh and ~/.nsisconf.nsh instead of the same dir as the executable<br />
      2. Move the exe to /usr/bin<br />
      3. Install docs and examples in /usr/share/doc/nsis<br />
      4. Install the Plugins/Include/Contrib dirs in /usr/share/nsis<br />
      <br />
      Any comments on this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">10th March 2005 18:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nothing from the Contrib folder is used to build makensis itself.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">11th March 2005 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I realise this, I was more thinking in terms of graphics and other kinds of things that people use often in their NSI scripts because they are accustomed to it being there.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th March 2005 10:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">grep all the .nsi and .nsh files for ${NSISDIR}. There are more than a few usages of it, but most are referring the Include or Contrib folders.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">12th March 2005 02:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the tip. Seems no-one is interested, but I'm gonna do it anyway, because I hate Windows, but I still need to make Windows installers.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th March 2005 10:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you can make a package that installs in a standard directory structure on Linux, I'll be interested in including the changes.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">13th March 2005 20:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, excellent. I'm in the process of auditing the source tarball looking for how each dll/exe is built and writing Makefiles for that. After that, I'll request a sponsor for uploading to debian and clean up the modifications I made for submission to the project.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">14th March 2005 05:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't know C++ very well, but debian's mingw g++ gives the following:<br />
      <br />
      pabs@chianamo:~/devel/debian/nsis-2.05/Contrib$ make -C BgImage/<br />
      make: Entering directory `/home/pabs/devel/debian/nsis-2.05/Contrib/BgImage'<br />
      i586-mingw32msvc-g++ -Wall -Os -shared -s -mwindows -o ../../Plugins/BgImage.dll BgImage.cpp -lwinmm<br />
      In file included from BgImage.cpp:3:<br />
      ../ExDLL/exdll.h:76: error: declaration of `exec_flags*&lt;anonymous struct&gt;::exec_flags'<br />
      ../ExDLL/exdll.h:73: error: changes meaning of `exec_flags' from `typedef struct exec_flags exec_flags'<br />
      <br />
      For this construct (from exdll.h):<br />
      <br />
      typedef struct {<br />
      int autoclose;<br />
      ...<br />
      } exec_flags;<br />
      <br />
      typedef struct {<br />
      exec_flags *exec_flags;<br />
      ...<br />
      } extra_parameters;<br />
      <br />
      Is there a recommended way to fix this so the BgImage plugin (and others that use C++) can go into the debian install? That construct works fine in the AdvSplash/Banner plugins (both written in C).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrSlump</span><br />
      <span class="post-time small text-muted">14th March 2005 09:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'd sure love to have it<br />
      <br />
      We have one client that uses NSIS and wants to migrate his webserver to linux, and we have just installed a debian system, so it would be just in place :)))</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">14th March 2005 10:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Excellent. Which, if any, plugins, include files or graphics do you use from the NSIDIR?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">14th March 2005 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Plugin building status report:<br />
      <br />
      I can build the following plugins fine (with/without modifications) - these are all C plugins:<br />
      <br />
      Plugins/advsplash.dll<br />
      <br />
      Plugins/Banner.dll<br />
      <br />
      Plugins/Dialer.dll<br />
      <br />
      Plugins/LangDLL.dll<br />
      <br />
      Plugins/nsExec.dll<br />
      <br />
      Plugins/UserInfo.dll<br />
      <br />
      Plugins/splash.dll<br />
      <br />
      Plugins/StartMenu.dll<br />
      <br />
      Plugins/VPatch.dll<br />
      <br />
      These all have the problem with the exdll.h file that I posted above (all C++):<br />
      <br />
      Plugins/InstallOptions.dll<br />
      <br />
      Plugins/TypeLib.dll<br />
      <br />
      Plugins/Math.dll<br />
      <br />
      Plugins/BgImage.dll<br />
      <br />
      Plugins/nsisdl.dll<br />
      <br />
      <br />
      This one has a similar error in one of its own files (also C++):<br />
      <br />
      Plugins/System.dll<br />
      <br />
      <br />
      Now onto binaries placed in Contrib in the source tarball.<br />
      <br />
      How should I contribute the Contrib changes? These are Makefiles, case changes and minor edits so far. diff against the unpacked source tarball? A zip of the modified Contrib directory?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrSlump</span><br />
      <span class="post-time small text-muted">14th March 2005 16:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Could you put the debian dir you made anywhere?<br />
      <br />
      I'd like to download it and start tweaking with it :)<br />
      <br />
      thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th March 2005 18:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As I'm already writing a SCons build system, I will not include any contributed Makefiles. Case changes will also be rejected as CVS doesn't support renames and I'd like to keep the change log easy to follow. Other patches can be submitted as CVS diffs in the <a href="http://sourceforge.net/tracker/?atid=373087&amp;group_id=22049&amp;func=browse" target="_blank">patches tracker</a>.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">15th March 2005 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Latest deb, orig.tar.gz, .diff.gz, build log etc will be available at <a href="http://bonedaddy.net/pabs3/debian/" target="_blank">http://bonedaddy.net/pabs3/debian/</a> until this gets into debian, or if I can't find a sponsor, I'll start uploading to mentors.debian.net I think.<br />
      <br />
      I got this file building: Contrib/Library/LibraryLocal/LibraryLocal.exe<br />
      <br />
      Unfortunately, not really sure where other binaries in Contrib are built from. Any ideas? I speak of these:<br />
      Contrib/UIs/modern_nodesc.exe<br />
      Contrib/UIs/default.exe<br />
      Contrib/UIs/modern_smalldesc.exe<br />
      Contrib/UIs/sdbarker_tiny.exe<br />
      Contrib/UIs/modern_headerbmp.exe<br />
      Contrib/UIs/modern_headerbmpr.exe<br />
      Contrib/UIs/modern.exe<br />
      Contrib/System/Resource.dll<br />
      Contrib/Library/RegTool/RegTool.bin<br />
      Contrib/NSIS Update/UI.exe<br />
      Contrib/NSIS Update/ExtractDLL.dll</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">15th March 2005 19:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Contrib\UIs\default.exe is built from Contrib\UIs\UI Holder. All of the other executables are modified versions of default.exe. Resource Hacker was used to modify them. Contrib\System\Resource.dll is not built from Source, it's just a DLL with some icons. Contrib\Library\RegTool\RegTool.bin is built from RegTool.nsi. The source code for Contrib\NSIS Update\ExtractDLL.dll is available on the <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=58&amp;instances=0,32" target="_blank">Archive</a>.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">16th March 2005 08:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the info re binaries. Where do the icons for Contrib\System\Resource.dll come from? Any info on the modifications to default.exe?<br />
      <br />
      The case changes I spoke of are inside .c files, where some of the C sources are including files that don't exist if you have a case sensitive file system. I'll submit the patches (minus makefiles) to the tracker later today.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrSlump</span><br />
      <span class="post-time small text-muted">16th March 2005 10:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I've already built a .deb :)<br />
      <br />
      Thanks for the work.<br />
      <br />
      btw, you should to put g++ as build-depend.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">16th March 2005 13:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, it builds fine inside a pbuilder without adding g++ to the Build-Depends. Do you have build-essential installed?<br />
      <br />
      Also, I sent an update that fixes the problem I was having with ExDLL above, which means several more DLLs are now built.<br />
      <br />
      Here's my TODO before the RFS:<br />
      <br />
      <br />
      Include the current directory in the search path for nsisconf.nsh and for files referenced by the Plugins code and elsewhere so that RegTool.bin can be created at build time.<br />
      <br />
      Install stuff referenced from the example files etc into /usr/share/nsis/Contrib<br />
      <br />
      Place copyrights from Contrib into debian/copyright</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">21st March 2005 02:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, I've uploaded to mentors.debian.net and am going to file an RFS later today.<br />
      <br />
      <a href="http://mentors.debian.net/debian/pool/main/n/nsis/" target="_blank">http://mentors.debian.net/debian/pool/main/n/nsis/</a><br />
      <a href="http://bonedaddy.net/pabs3/debian" target="_blank">http://bonedaddy.net/pabs3/debian</a><br />
      <a href="http://bonedaddy.net/pabs3/debian/nsis_2.05-1_i386.deb" target="_blank">http://bonedaddy.net/pabs3/debian/nsis_2.05-1_i386.deb</a><br />
      <a href="http://bonedaddy.net/pabs3/debian/nsis_2.05-1_i386.build" target="_blank">http://bonedaddy.net/pabs3/debian/ns...5-1_i386.build</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">30th March 2005 12:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Found a sponsor and packaged 2.06. It may even get into sarge!!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">31st March 2005 09:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">2.06 has been uploaded, and is in the new queue:<br />
      <a href="http://ftp-master.debian.org/new.html" target="_blank">http://ftp-master.debian.org/new.html</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">pabs</span><br />
      <span class="post-time small text-muted">8th April 2005 09:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nsis has been accepted into debian!<br />
      <br />
      <a href="http://packages.qa.debian.org/n/nsis.html" target="_blank">http://packages.qa.debian.org/n/nsis.html</a><br />
      <br />
      If sarge freezes in more than 10 days time, it may even make it into sarge on some platforms.<br />
      <br />
      Unfortunately the mipsel and sparc builds failed due to problems in halibut (a segfault and a bus error), so it would be good if halibut in nsis was updated to the latest upstream release when nsis is next released.<br />
      <br />
      <a href="http://buildd.debian.org/build.php?pkg=nsis" target="_blank">http://buildd.debian.org/build.php?pkg=nsis</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DrSlump</span><br />
      <span class="post-time small text-muted">5th May 2005 10:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>NSIS into sarge</strong><br />
      Sarge got frozen!<br />
      but nsis got into!<br />
      <br />
      congrats pabs</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
