<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="inetc::get" />

  <title>inetc::get - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">inetc::get</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320615">inetc::get</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zirnevis</span><br />
      <span class="post-time small text-muted">8th July 2010 06:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>inetc::get</strong><br />
      Hi Guys,<br />
      <br />
      I'm writing a small installation / registration that will actually register the user using http forms, however, in the first starting step I want to start downloading the main package which is around 20MB and install this in the last step as soon as the file is available.<br />
      <br />
      however inetc::get is being runned as modal and it doesn't allow the rest of the code to run.<br />
      <br />
      1. how to let the rest of the script run while inetc::get is downloading?<br />
      <br />
      2. how to get the download status from inetc and display in the banner area so user know that there is a main packaging coming at what speed?<br />
      <br />
      <br />
      Cheers</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th July 2010 10:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The plug-in does not have asynchronous support and even if it were added where would you display the banner? Are your steps custom pages or is all this going on on the instfiles page?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zirnevis</span><br />
      <span class="post-time small text-muted">8th July 2010 10:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I can put the process anywhere,<br />
      even if we can't place it in banner, it is still okay,<br />
      the only important thing is that the download runs in the backgroun upon<br />
      launch.<br />
      <br />
      I'm using Pages for the registration process.<br />
      <br />
      Cheers</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th July 2010 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can request the feature be added (Takhir is the author) but for now you could use wget.exe to do the download. You can use ExecDos::Exec with the /ASYNC flag and then ExecDos::Wait just before you have to run the downloaded file.<br />
      <br />
      <a href="http://nsis.sourceforge.net/ExecDos_plug-in" target="_blank">http://nsis.sourceforge.net/ExecDos_plug-in</a><br />
      <a href="http://gnuwin32.sourceforge.net/packages/wget.htm" target="_blank">http://gnuwin32.sourceforge.net/packages/wget.htm</a><br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zirnevis</span><br />
      <span class="post-time small text-muted">9th July 2010 17:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">wget is already too large :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">9th July 2010 19:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">439KB is too large? What about after it's compressed in the installer? (I'm not going to check the file size then). Make sure you use /solid lzma.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">9th July 2010 22:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I wonder how large a separate NSIS installer with inetc with a single purpose (download data from a given location (provided on the command line, perhaps)) would be - could certainly execute that in the background (you'd still get no feedback on progress, though).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">10th July 2010 10:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That'd just be wasting more space and at the end of the day you'd still have to extract wget.exe to run it. I don't see the problem with wget's size but another option is to use a VBS to do it (search Google).<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">10th July 2010 13:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br />
        That'd just be wasting more space and at the end of the day you'd still have to extract wget.exe to run it.
      </blockquote>o_O<br />
      <br />
      Either I missed something, or maybe you misunderstood :)<br />
      <br />
      I wasn't suggesting a separate installer that calls wget.exe - I was suggesting a separate installer that calls inetc; replacing wget.exe altogether.<br />
      The overhead from that would be the size of a bare installer (31.8k - not counting the size of inetc as that's what he's already using; including inetc.dll: 40.9k) + some code space if he made it command line-driven, rather than hardcoded URIs and conditions.<br />
      That would still be less than including wget with any compression (/solid lzma gives 152.6k)<br />
      <br />

      <blockquote>
        <small>Originally posted by Afrow UK</small><br />
        I don't see the problem with wget's size
      </blockquote>neither do I - but if for whatever reason it is a concern, the inetc-in-separate-installer route should work, no?<br />
      ( as would the VBS route, which would probably be even smaller, yes )
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">10th July 2010 13:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ah sorry yes I misunderstood, or rather I didn't think of that :)<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zirnevis</span><br />
      <span class="post-time small text-muted">12th July 2010 09:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi guys,<br />
      <br />
      Thanks for the response,<br />
      I managed to do it by making another installer and using inetload then calling it with exedos /async<br />
      <br />
      to run it in the background. the only thing i need to do is to check the installer file size and make a timer in main installer to check the downloaded size and compare with original size to draw a process bar.<br />
      <br />
      I'm not sure how to check file size a file over web?<br />
      <br />
      any idea?<br />
      <br />
      Regards</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">12th July 2010 10:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should use inetc rather than inetload (inetc supersedes it). inetc has a ::head function which you can use to get the headers for your file. The headers will contain the file size if the server provides it.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
