<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="SectionGetFlags unexpected behaviour..."><title>SectionGetFlags unexpected behaviour... - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">SectionGetFlags unexpected behaviour...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=193885">SectionGetFlags unexpected behaviour...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">massimom</span><br><span class="post-time small text-muted">17th September 2004 16:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>SectionGetFlags unexpected behaviour...</strong><br>Hello guys,<br>It's a few days I am using nsis, but I manage to build a nice installer.<br><br>I have just one strange behaveiour using SectionGetFlags.<br><br>Below there is a snip of my nsi file (see the attach for the whole file).<br><br>I have four pages:<br>- the second one is the components one, which shows two sections. The user can select/deselect as he/she likes.<br><br>- the 3rd page is a custom page which recall CustomPageA function where I query section flags using SectionGetFlags.<br><br>Well, it gives the rigth result only if I query the first section !!!<br><br>It means it does not matter if I write<br>SectionGetFlags SecDocuBench $1<br>or<br>SectionGetFlags SecZeon $1<br><br>it always gives me the flag status of SecZeon (the first one)<br><br>I am getting crazy with it !<br><br>could some kindly have a look to my file and help me in finding my mistake ?<br><br>Many thanks,<br>MassimoM<br><br>;--------------------------------<br>;Pages<br><br>!insertmacro MUI_PAGE_WELCOME<br><br>!insertmacro MUI_PAGE_COMPONENTS<br><br>Page custom CustomPageA<br><br>!insertmacro MUI_PAGE_INSTFILES<br><br><br><br>;--------------------------------<br>;Installer Sections<br><br>Section "Zeon" SecZeon<br><br>;Some staff here<br>SectionEnd<br><br><br>Section "DocuBench" SecDocuBench<br><br>;Some staff here<br>SectionEnd<br><br><br>;--------------------------------<br>;Installer Functions<br><br>Function CustomPageA<br><br>SectionGetFlags SecDocuBench $1<br>MessageBox MB_OK $1<br><br>strcmp $1 "1" +2 0<br>return</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">17th September 2004 16:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You forgot the curly brackets. It should be SectionGetFlags ${SecDocuBench}. SecDocuBench is the name of a define which is defined when in the `<br>Section "DocuBench" SecDocuBench` line.<br><br>When converting the parameter to an integer which is the index of the section the text string "SecDocuBench" is processed as zero because it has no valid numbers in it. However, ${SecDocuBench} is processed as the value of the define named SecDocuBench. This value is the right index, not just zero.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">massimom</span><br><span class="post-time small text-muted">20th September 2004 10:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>SectionGetFlags unexpected behaviour</strong><br>Many thanks for your reply and the explanation you gave (it was probably a trivial question for the ng reader...).<br><br>your suggestion works fine :-))<br><br>MassimoM</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>