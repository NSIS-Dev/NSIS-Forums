<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="getting makensis options within nsi-script" />

  <title>getting makensis options within nsi-script - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">getting makensis options within nsi-script</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272138">getting makensis options within nsi-script</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SunToo</span><br />
      <span class="post-time small text-muted">1st June 2007 10:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>getting makensis options within nsi-script</strong><br />
      Hi,<br />
      if I want to get the used makensis options within the nsi-script that is currently compiled I could use an additional define /D that contains this makensis command line. E.g.:<br />
      <br />
      <i>makensis.exe /DDef1 /DDef2 /DCL="/DDef1 /DDef2" myscript.nsi</i><br />
      <br />
      But if the command line changes I have to ensure that this additional define is adapted too.<br />
      <br />
      Is there another way to get the makensis command line within the script?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">1st June 2007 23:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">$CMDLINE</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SunToo</span><br />
      <span class="post-time small text-muted">4th June 2007 09:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks demiller9, but $CMDLINE contains the command line of the installer application. What I need is the command line of makensis.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">4th June 2007 13:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What do you use the CL define for in your script?<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SunToo</span><br />
      <span class="post-time small text-muted">19th June 2007 07:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi Afrow UK,<br />
      sorry for the late response. I hadn't much time last weeks.<br />
      <br />
      The reason to get the makensis command line is the following:<br />
      I had to implement an installer that just should install/uninstall some files. The definition of these files should be done with wildcards which is not a problem. But to uninstall only that files that actually has been installed wildcards cannot be used.<br />
      <br />
      As recommended in another thread of this forum I created a auxiliary exe (just a second nsi-script) that creates a text file with the list of all files to install/uninstall from the list containing wildcards. But the file list containing wildcards depends on defines like DEBUG that control which files to install. The same defines are used by the installer itself. So the auxiliary exe has to be compiled with the same makensis command line parameters (i.e. /D et cetera) like the installer itself. Than it will be called to create the text file and after that the installer is compiled using this created file.<br />
      <br />
      Sure, I can use a batch file to perform this steps but I wanted to hide this process. I wanted to compile the auxiliary exe from within the installer during compilation by means of !system using the same command line parameters (at least the /D parameters). Another !system call is than used to run the auxiliary exe ...<br />
      <br />
      Hope it's not too confusing ;-)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th June 2007 10:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I see. You could post a feature request on the NSIS SourceForge page.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th June 2007 10:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">However, really you should pass those defines yourself. You won't be referencing defines in your script that haven't had their names hard-coded in...<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">SunToo</span><br />
      <span class="post-time small text-muted">19th June 2007 10:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Unknown defines could be ignored. But actually only hard-coded defines are passed. The problem is that I have to pass them twice.<br />
      <br />
      But it's only a minor problem overall. I was only interested whether there is a NSIS feature that I doesn't know.<br />
      Thanks for your help.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
