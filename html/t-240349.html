<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="How to disable the &quot;Make new folder&quot;" />

  <title>How to disable the "Make new folder" - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">How to disable the "Make new folder"</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240349">How to disable the "Make new folder"</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br />
      <span class="post-time small text-muted">9th March 2006 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to disable the "Make new folder"</strong><br />
      Hello<br />
      <br />
      Can any one tell me how to disable the "Make new folder" button on directory browse dialog.<br />
      <br />
      I am using Moden UI.<br />
      <br />
      Also in my installer I use folder browse dialog to select a folder on the system by user and I check for a particluar file.Is there any option to keep the folder browser dialog util the user selects a valid Folder(cotaining the required file).(he can close the dialog using cancel button if required)<br />
      <br />
      Can any one show me the code how to do this using Modern UI?<br />
      <br />
      I am creating acustom page using moden UI in this case.<br />
      <br />
      Best Regards<br />
      <br />
      Joseph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">9th March 2006 11:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To disable it, you have to change the source code, add the BIF_NONEWFOLDERBUTTON flag and recompile NSIS. There was a <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=238655&amp;highlight=new+folder" target="_blank">recent thread</a> about this in InstallOptions.<br />
      <br />
      Without a custom page, use the .onVerifyInstDir callback function to keep the user on the browse dialog until the selected directory is valid. With a custom page, it's not possible, maybe with InstallOptionsEx.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br />
      <span class="post-time small text-muted">9th March 2006 14:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Here's a suggestion that might work, if you were up to coding it:<br />
      <br />
      The <a href="http://nsis.sourceforge.net/Dialog****plug-in" target="_blank">DialogsEX</a> plugin has a 'Classic Folder Box" that doesn't include a 'create new folder' dialog that you might be able to use.<br />
      <br />
      However, since this plugin isn't a 'page' (it's actually a pop-up folder browser), you'd have to make your own custom page using a text box and a button. Using the page's leave function, you could look for a button click and display the folder browse screen. Use SendMessage to update the text box with the return value of the folder box. You could also let the user type directly into the text box and then check in the page's leave function to see that the folder name they type actually exists.<br />
      <br />
      I know, it's probably easier to just hack the source code, (which may be what you'll do anyway), but I thought I'd at least offer an alternative.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br />
      <span class="post-time small text-muted">9th March 2006 15:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi all thank you for your quick reply,<br />
      <br />
      Hi kichik<br />
      I got the new Installoptions.dll from the other thread.Why this option can be part of standard source and can be enabled by seting some paramets?<br />
      <br />
      Hi Comperio,<br />
      <br />
      I tried the link you pointed.But it only goes to your site.But no file was available for download<br />
      <br />
      <a href="http://plugins.joelito.net/descargas.php?file=dialogsex.zip" target="_blank">http://plugins.joelito.net/descargas...=dialogsex.zip</a><br />
      <br />
      best regards<br />
      <br />
      Joseph</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">9th March 2006 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can also try the DirPage plugin:<br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=220950&amp;highlight=dirpage" target="_blank">http://forums.winamp.com/showthread....hlight=dirpage</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Eroger</span><br />
      <span class="post-time small text-muted">26th March 2013 09:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Do these answers still stand? I would like to do exactly the same (in fact just greying out the "Make New Folder" button should be OK) in MUI2.<br />
      <br />
      At the moment the thread Kichik refers to in the second post uses InstallOptions which I'd rather not use as it is now described as deprecated, and it seems an overkill: MUI_PAGE_DIRECTORY is so straightforward to use! <a href="http://nsis.sourceforge.net/Dirpage_plug-in" target="_blank">DirPage</a> is not ideal (see developers comment section on that page) and I wonder how to call DialogEx when pressing the Browse button instead of the default Browse dialog.<br />
      <br />
      What would the solution of recompiling the source code (with a greyed out "Make New Folder") consist of?<br />
      <br />
      Thank you,<br />
      <br />
      Eric</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">26th March 2013 16:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why do you want to add pointless restrictions?<br />
      <br />
      The user could just create a new folder in explorer or run your installer as setup.exe /S /D=c:\whatever\they\want</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Eroger</span><br />
      <span class="post-time small text-muted">26th March 2013 17:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>How to disable "Make new folder"</strong><br />
      Thank you for your reply Anders.<br />
      <br />
      I understand that what I'm trying to do is not what the installer was exactly created for, however in my case (very controlled environment) the user cannot set where he wants to install my software.<br />
      <br />
      I'm using the <b>Directory</b> page/<b>Browse to folder</b> dialog only to look for the folder where the user has copied files that are required in a very specific upgrade type.<br />
      <br />
      In that context I would wish not to give the user the ability to make a new folder as this is not useful in this case.<br />
      <br />
      It's not a major problem, but surprisingly everything else can be changed to make the Directory page used not to set the output folder (which is what the control was created for), but as some kind of user input.<br />
      <br />
      As I'm not the only who's asked something along those lines, I thought that this is a case that might happen again in the future.<br />
      <br />
      Great work on that page and control by the way, it has literally saved me hours (if not days) and the solution was there in only 4 lines of additional NSIS code!<br />
      <br />
      Many thanks!<br />
      <br />
      Eric</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
