<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CheckedListBox in NSIS" />

  <title>CheckedListBox in NSIS - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">CheckedListBox in NSIS</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=299003">CheckedListBox in NSIS</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">22nd October 2008 13:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>CheckedListBox in NSIS</strong><br />
      Hello, guys. I wanted to place a CheckedListBox on one of the installer pages. Since there is no macro for this purpose, I tried to use the Windows API. I made the following command:<br />
      <br />
      System::Call "user32::CreateWindow(i WC_LISTVIEW, t 'blub', i WS_CHILD | i LVS_REPORT | i LVS_EDITLABELS | i WS_VISIBLE, i 0, i 0, i 50, i 15, i $HWNDPARENT, i (HMENU)ID_LISTVIEW, i hInst, *i 0) i .s"<br />
      <br />
      That corresponds to <a href="http://msdn.microsoft.com/en-us/library/ms632679" target="_blank">http://msdn.microsoft.com/en-us/library/ms632679</a>(VS.85).aspx specification of the CreateWindow command. But the control element does not appear on my installer page:(( What could be wrong???<br />
      <br />
      BR<br />
      Ewgenij</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">22nd October 2008 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">WC_LISTVIEW is not the correct class name. I'm also not sure if you can OR things like you do, ex "i 1 | i 2", I think you need "i 1|2". Also, all the WS_ and LVS_ bits must be defines ${WS_VISIBLE} with the correct value, not just the text you get from MSDN. Once you get passed this you will find out that listview's use structs to add/edit items, so its just not a simple SendMessage call to add items</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">22nd October 2008 14:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm, OK. Can I create a listview with the<br />
      <br />
      nsDialogs::CreateControl /NOUNLOAD class style extended_style x y width height text<br />
      <br />
      command? But which values should I enter for class, style and extended_style?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">22nd October 2008 16:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To be honest, I just want to create a list box with checking option, which I can fill then dependent on the actual program configuration. What is the best way to achieve that?<br />
      <br />
      BR<br />
      Ewgenij</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">22nd October 2008 22:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">listview class is SysListView32, for the styles, you can normally just google "define NAME_OF_STYLE", or look it up in a .h file if you have the windows sdk installed</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">27th October 2008 09:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hello! So I inserted the following command into my page create function:<br />
      <br />
      nsDialogs::CreateControl /NOUNLOAD 'SysListView32' 0 0x00000004 100u 50u 50u 20u "blub"<br />
      <br />
      But nothing appears on the page :cry: What is wrong??</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">27th October 2008 09:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I also tried<br />
      <br />
      nsDialogs::CreateControl /NOUNLOAD 'SysListView32' 0x08000000L 0x00000004 100u 50u 50u 20u "blub"<br />
      <br />
      0x08000000L - WS_VISIBLE<br />
      0x00000004 - LVS_EX_CHECKBOXES<br />
      <br />
      But it did not work too.<br />
      :igor:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">NounouRs</span><br />
      <span class="post-time small text-muted">27th October 2008 15:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why making so complicated just to add some check boxes ?<br />
      Is there no macro defined in the basic macros of NSIS ?<br />
      It's not rare to need that, so what...<br />
      <br />
      I've found this help (that doesn't help me because I don't fully understand) that uses only MUI macro and ini files...<br />
      http://nsis.sourceforge.net/Custom_Finish_Page</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br />
      <span class="post-time small text-muted">27th October 2008 15:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ewgenijkkg: you at least need WS_CHILD+WS_VISIABLE</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ZmAn3</span><br />
      <span class="post-time small text-muted">27th October 2008 16:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nsDialogs::CreateControl /NOUNLOAD 'SysListView32' ${DEFAULT_STYLES} 100u 50u 50u 20u "blub"<br />
      works fine not sure how your gonna handle all the sysListviews messages thou</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">28th October 2008 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by NounouRs</i><br />
        <b>Why making so complicated just to add some check boxes ?<br />
        Is there no macro defined in the basic macros of NSIS ?</b>
      </blockquote>No, there isn't:(( At least, I did not find any.<br />
      <br />

      <blockquote>
        I've found this help (that doesn't help me because I don't fully understand) that uses only MUI macro and ini files
      </blockquote>And where do you see checkboxes there?<br />
      <br />
      BR<br />
      Ewgenij
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">28th October 2008 16:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by ZmAn3</i><br />
        <b>nsDialogs::CreateControl /NOUNLOAD 'SysListView32' ${DEFAULT_STYLES} 100u 50u 50u 20u "blub"<br />
        works fine not sure how your gonna handle all the sysListviews messages thou</b>
      </blockquote>Sorry, I have never programmed with Win32-API before. So I do not know a lot about it. You think, it will be impossible to implement the checkedlistbox in NSIs? And to work with it?<br />
      <br />
      BR<br />
      Ewgenij
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ZmAn3</span><br />
      <span class="post-time small text-muted">28th October 2008 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">well id use the embedded lists plugin or if you always had a set number of checkboxes id totally just fake it you could make a white static control in nsdialogs with a border and place check boxes in there or if you look at nsdialogs.nsh he has macros for creating listboxes not sure what youd have to do to support check boxes in those thou</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">NounouRs</span><br />
      <span class="post-time small text-muted">28th October 2008 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">An exctract of my code, using Modern UI :<br />
      <br />
      !define MUI_FINISHPAGE_SHOWREADME<br />
      !define MUI_FINISHPAGE_SHOWREADME_TEXT $R7 #"Read Pdf"<br />
      !define MUI_FINISHPAGE_SHOWREADME_FUNCTION openPdf<br />
      !insertmacro MUI_PAGE_FINISH<br />
      <br />
      This add a new checkbox at the last page (MUI_PAGE_FINISH) where there is already 1 checkbox for "launching application"<br />
      <br />
      it is the simpliest I've found</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">28th October 2008 16:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by ZmAn3</i><br />
        <b>well id use the embedded lists plugin or if you always had a set number of checkboxes id totally just fake it you could make a white static control in nsdialogs with a border and place check boxes in there or if you look at nsdialogs.nsh he has macros for creating listboxes not sure what youd have to do to support check boxes in those thou</b>
      </blockquote>I wish I had a static number of the items, but the number is dynamic :( What lists-plugin do you mean?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ZmAn3</span><br />
      <span class="post-time small text-muted">28th October 2008 17:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sourceforge.net/EmbeddedLists_plug-in" target="_blank">http://nsis.sourceforge.net/EmbeddedLists_plug-in</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">ZmAn3</span><br />
      <span class="post-time small text-muted">29th October 2008 00:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i have another question for you do they get to select more then one item?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">29th October 2008 11:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by ZmAn3</i><br />
        <b><a href="http://nsis.sourceforge.net/EmbeddedLists_plug-in" target="_blank">http://nsis.sourceforge.net/EmbeddedLists_plug-in</a></b>
      </blockquote>Hey!!! That is exactly what I need! Thanks a lot. So, I do not need the whole Win32 API stuff. However, the plugin is based on Ini-Files, and you read in the new releases of NSIS that this approach is deprecated. Therefore it is better to use nsDialogs-Plugin instead of InstallOptions. So why is there no macro for checkedlistboxes?<br />
      <br />
      BR<br />
      Ewgenij
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Ewgenijkkg</span><br />
      <span class="post-time small text-muted">29th October 2008 11:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by ZmAn3</i><br />
        <b>i have another question for you do they get to select more then one item?</b>
      </blockquote>Yes, in the most cases:)
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
