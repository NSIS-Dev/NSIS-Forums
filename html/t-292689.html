<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="ReadMe on Custom page"><title>ReadMe on Custom page - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">ReadMe on Custom page</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292689">ReadMe on Custom page</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">didava</span><br><span class="post-time small text-muted">4th June 2008 00:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>ReadMe on Custom page</strong><br>I am trying to study InstallOptions. I see some things which I can not do.<br>If somebody used to pass them,please help me!!!!<br>In my custom page,I have button View Readme.<br><br></p><pre>
<code><br>#==========================================<br>#DEFINES<br>#==========================================<br><br>        !define NAME "Control"<br>        !define MUI_ICON "Control.ico"<br>        !define MUI_INSTFILESPAGE_PROGRESSBAR smooth<br>        !define MUI_HEADERIMAGE<br>        !define MUI_HEADERIMAGE_BITMAP "header.bmp"<br>        !define MUI_UI_HEADERIMAGE "headerbmp.exe"<br><br>#==========================================<br>#INSTALLER INFORMATION<br>#==========================================<br><br>        Name "${NAME}"<br>        OutFile "Control.exe"<br><br>        SetCompressor /SOLID lzma<br>        #SetCompress off<br>        SetCompressorDictSize 32<br><br><br>#==========================================<br>#INTERFACE SETTINGS<br>#==========================================<br><br>        Caption "${NAME}"<br>        BrandingText "2004-2008"<br>        XPStyle On<br>        ShowInstDetails show<br><br>#==========================================<br>#VARIABLES<br>#==========================================<br><br>        Var UpdatedFileCount<br>        Var FileSize<br><br>#==========================================<br>#INCLUDES<br>#==========================================<br><br>        !include "MUI.nsh"<br>        !include "FileFunc.nsh"<br>        !addplugindir "misc\plugins"<br>        !insertmacro RefreshShellIcons<br>        !insertmacro GetFileVersion<br><br>#==========================================<br>#PAGES<br>#==========================================<br><br>        Page custom Control<br>        !define MUI_INSTFILESPAGE_FINISHHEADER_TEXT <br>        !insertmacro MUI_PAGE_INSTFILES<br><br>#==========================================<br>#RESERVE FILES<br>#==========================================<br><br>        ReserveFile "mypageen.ini"<br><br>#==========================================<br>#INSTALLER SECTIONS<br>#==========================================<br><br>        Section "Desktop"<br>        SectionEnd<br><br>#==========================================<br>#INSTALLER FUNCTIONS<br>#==========================================<br><br>        Function .onInit<br><br>        !insertmacro MUI_INSTALLOPTIONS_EXTRACT "mypageen.ini"<br>        ReadINIStr $0 "$PLUGINSDIR\mypageen.ini" "Settings" "State"<br><br>        FunctionEnd<br><br>        Function Control<br><br>        SetOutPath "$PLUGINSDIR"<br>        !insertmacro MUI_INSTALLOPTIONS_DISPLAY "mypageen.ini"<br><br>        StrCmp $0 0  ReadMe<br>        Abort<br>             ReadMe:<br>             SetOutPath $PLUGINSDIR<br>             File "c:\test\readme.txt"<br>             ExecWait "readme.txt"<br>             Abort<br><br>             or run file "googletoolbar.exe"<br><br><br>        FunctionEnd<br></code>
</pre><br>
      <br>
      mypageen.ini<br>
      <br>
      <pre>
<code><br>; Ini file generated by the HM NIS Edit IO designer.<br>[Settings]<br>NumFields=1<br><br>[Field 1]<br>Type=Button<br>Text=ReadMe<br>Left=2<br>Right=52<br>Top=4<br>Bottom=1<br></code>
</pre><br>
      <br>
      It does not work.<br>
      <br>
      If Someone know please help me!<br>
      <br>
      Thank alot.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">4th June 2008 00:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">So, those things that you can't do, would be.....</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">4th June 2008 01:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You may do it easily with nsdialogs, ex:<br></p>
      <pre>
<code>outfile test.exe<br><br>!include MUI2.nsh<br>!include nsdialogs.nsh<br><br>page custom  nsDialogsPage<br>!insertmacro MUI_PAGE_INSTFILES<br><br>!insertmacro MUI_LANGUAGE "English"<br><br><br>Function nsDialogsPage<br><br>    nsDialogs::Create /NOUNLOAD 1018<br>        Pop $0<br><br>    ${IfThen} $0 == error ${|} Abort ${|}<br><br>    ${NSD_CreateGroupBox} 0u 13u 85% 45% "If you dare click the button"<br>        Pop $R0<br><br>    ${NSD_CreateButton}  140 40u 20% 12u "Read Me!"<br>        Pop $R0<br><br>    ${NSD_OnClick} $R0 ShowReadme<br><br>    nsDialogs::Show<br><br>FunctionEnd<br><br><br>Function ShowReadme<br><br>    ExecShell open `${NSISDIR}\Docs\nsdialogs\Readme.html`<br><br>FunctionEnd<br><br><br>section<br><br>sectionend</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">didava</span><br>
      <span class="post-time small text-muted">4th June 2008 13:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks Red Wine,<br>
      <br>
      Now I can do it well. However, I have one more question.<br>
      In my case, user click on BUTTON 1 to run my application,the other buttons is disable.After finishing process, I want to disable button 1 and enable button 1 to install the second application.<br>
      My code here:<br>
      <br></p>
      <pre>
<code><br><br><br>Function .onInit<br><br>        InitPluginsDir<br>        File /oname=$PLUGINSDIR\test.ini test.ini<br>        WriteINIStr "$PLUGINSDIR\test.ini" "Field 2" "Flags" "DISABLED|NOTIFY"<br><br>FunctionEnd<br><br><br>Function ShowCustom<br>  InstallOptions::initDialog /NOUNLOAD "$INI"<br>  Pop $0<br>  InstallOptions::show<br>  Pop $0<br>FunctionEnd<br><br><br>Function LeaveCustom1<br>        ReadINIStr $0 $INI "Settings" "State"<br>        StrCmp $0 1 Button1<br>        StrCmp $0 2 Button2<br>        StrCmp $0 0  ReadMe<br>        Abort<br>      Button1:<br>         SetOutPath $PLUGINSDIR<br>         File "prog\wmp11.exe"<br>         Exec "$PLUGINSDIR\wmp11.exe"<br><br>         WriteINIStr $INI "Field 1" "Flags" "DISABLED"<br>         WriteINIStr $INI "Field 2" "Flags" ""<br><br>        Button2:<br>         File "prog\yms9.exe"<br>         Exec "$PLUGINSDIR\yms9.exe"<br><br>         WriteINIStr $INI "Field 2" "Flags" "DISABLED"<br>         WriteINIStr $INI "Field 3" "Flags" ""<br><br>        ReadMe:<br>             SetOutPath $PLUGINSDIR<br>             File "prog\readme.txt"<br>             ExecWait "readme.txt"<br>             Abort<br>FunctionEnd<br></code>
</pre><br>
      <br>
      question:<br>
      I do not know how to change state button from disable to enable and otherwise when I has already shown custom page.<br>
      In my code, ReadMe part also does not execute file readme.<br>
      click Button1 wmp11 not run file.<br>
      Your help is very useful for me,<br>
      Thank a lot.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br>
      <span class="post-time small text-muted">4th June 2008 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I wish I could figure what exactly you're trying to do with this page...<br>
      You have assigned the readme execution with the next &gt; button, is this what you want?<br>
      You can't use ExecWait "readme.txt", change it to ExecShell open "readme.txt".<br>
      <br>
      I'll suggest again use nsDialogs, it's much easier.<br></p>
      <pre>
<code>outfile test.exe<br><br>!include MUI2.nsh<br>!include nsdialogs.nsh<br><br>page custom  nsDialogsPage<br>!insertmacro MUI_PAGE_INSTFILES<br><br>!insertmacro MUI_LANGUAGE "English"<br><br><br>Function nsDialogsPage<br><br>    nsDialogs::Create /NOUNLOAD 1018<br>        Pop $0<br><br>    ${IfThen} $0 == error ${|} Abort ${|}<br><br>    ${NSD_CreateGroupBox} 0u 13u 85% 45% "If you dare click the button"<br>        Pop $R0<br><br>    ${NSD_CreateButton}  140 25u 20% 12u "Button1"<br>        Pop $R0<br><br>    ${NSD_OnClick} $R0 ExecWmp11<br><br>    ${NSD_CreateButton}  140 41u 20% 12u "Button2"<br>        Pop $R1<br>        EnableWindow $R1 0<br><br>    ${NSD_OnClick} $R1 ExecYms9<br><br>    ${NSD_CreateButton}  140 57u 20% 12u "Read Me!"<br>        Pop $R2<br><br>    ${NSD_OnClick} $R2 ShowReadme<br><br>    nsDialogs::Show<br><br>FunctionEnd<br><br>Function ExecWmp11<br><br>    File /oname=$PLUGINSDIR\wmp11.exe "prog\wmp11.exe"<br>    ExecWait `$PLUGINSDIR\wmp11.exe` $R9<br>    <br>    EnableWindow $R0 0<br>    EnableWindow $R1 1<br><br>FunctionEnd<br><br>Function ExecYms9<br><br>    File /oname=$PLUGINSDIR\yms9.exe "prog\yms9.exe"<br>    ExecWait `$PLUGINSDIR\yms9.exe` $R9<br><br>    EnableWindow $R1 0<br><br>FunctionEnd<br><br>Function ShowReadme<br><br>    File /oname=$PLUGINSDIR\readme.txt "prog\readme.txt"<br>    ExecShell open `$PLUGINSDIR\readme.txt`<br><br>FunctionEnd<br><br><br>section<br><br>sectionend</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">didava</span><br>
      <span class="post-time small text-muted">4th June 2008 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank Red Wine very much,<br>
      Now I can run my application well.<br>
      Thanks again.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>