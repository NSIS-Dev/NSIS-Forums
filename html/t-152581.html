<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="bug with MUI + multilanguage in 1.66" />

  <title>bug with MUI + multilanguage in 1.66 - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">bug with MUI + multilanguage in 1.66</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152581">bug with MUI + multilanguage in 1.66</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 09:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>bug with MUI + multilanguage in 1.66</strong><br />
      &nbsp; i've loaded the last nightly build and I have the following problem with my script witch is using MUI and multilanguage.<br />
      <br />
      After the selection of the language it shows the screens corectly BUT not the options page and if i put a messagebox with a string in it $(LANG_TEST) it apears always in one of the languages.<br />
      <br />
      This was working in older versions.<br />
      <br />
      PS. Did I mention:<br />
      - i've made tests only for updated languages (1.66 and V6)<br />
      - I've found a problem that could be related to this: if you try to define strings for languages not defined at the begening it doesn't snow any error (ok for me), BUT it's overwriting the first language translation with the translation of the undefined language. (this is very bad!!!) You can discover this problem evem with the multilanguage MUI example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 09:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm desperate, I need to release my kit and now I'm stuck with this stupid bug. The most simple way to test it's presence is putting a message box after the language selection macro. You'll see that it uses the system default language instead of the selected one. (also the interface is using the selected language but not the $(variable)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th October 2003 13:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you please attach screenshots &amp; scripts? I don't really understand your problems.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 13:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">here it's the test file.<br />
      Run it and select last language (German). It will show you english translated text instead of german even if the dialogs are corectly snown. For the other two it wokrs. The problem can be easely reproduced. I've made this special for you from the defaulte example.<br />
      <br />
      I don't think you'll need screenshots :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th October 2003 13:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's because the langauge has not yet been set in .onInit (.onInit is used to modify the langauge). Put your messagebox in a custom GUIINIT function (see Modern UI Readme) and it will work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 14:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, but I don't understand how the *new systems* works because for be It would be logically that after the closing of the language selector dialog I'll have access to the translated texts. In my real installer I have a lot of operations in the .oninit function and many of them requires to use translated texts.<br />
      <br />
      This is now:<br /></p>
      <pre>
<code>
onInit
<br /> !insertmacro MUI_LANGDLL_DISPLAY
<br />  MessageBox MB_OK "$LANGUAGE $(DESC_SecDummy)"
<br />&gt;FunctionEnd 
<br />&gt;
</code>
</pre>How should this look in 1.66 and later ? If you try the $LANGUAGE is containing the right language BUT the other variable is not working.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th October 2003 14:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It has always been this way, use GUIINIT to have access to the strings.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 14:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, thy wat works, BUT please can you update the Examples\Modern UI\MultiLanguage.nsi file! It's old and it doen't work as it should.<br />
      It contains a bad example.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">14th October 2003 15:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">MultiLanguage.nsi is a good example. The only thing is that some language files have not been updated yet, that's why it doesn't compile.<br />
      <br />
      We'll wait a little longer before we release beta 4. If these languages still have not been updated yet by then, they will be removed.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sealite</span><br />
      <span class="post-time small text-muted">14th October 2003 15:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can you please include a comment about this problem in the example. Like this:<br />
      ; Do not use language demendent strings in .onininit use ....instead. Or even an example, so others will know what to do and will not make my mistake.<br />
      <br />
      Thanks,</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>