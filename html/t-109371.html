<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="installation to several directories"><title>installation to several directories - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">installation to several directories</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=109371">installation to several directories</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">snarum</span><br><span class="post-time small text-muted">11th October 2002 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>installation to several directories</strong><br>&nbsp; I have an appication that needs several directories to be chosen by the user/installer. Is this possible to do with nsis? Or is it limited to only one target folder?<br><br>Regards,<br><br>Snorre</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">11th October 2002 13:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=109352" target="_blank">http://forums.winamp.com/showthread....hreadid=109352</a><br><br></p><blockquote>Use InstallOptions. InstallOptions gives you the ability to create custom pages during installation. It can also get input for you such as another directory.<br><br>If you want to show one custom page right after the other use MultIni4 or the new macros in the modern UI (avaiable in the latest CVS version).</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">snarum</span><br><span class="post-time small text-muted">11th October 2002 22:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Exelent. The InstallOptions.dll worked fine for me. Now I've got a few followups that you might know the answer to:<br><br>1) Is it possible to set the default value of the installOptions elements from the main script or the ini file?<br>2) Is it possible to remove the standard output dir page?<br>3) Can you refer to a page where the MultIni4 function is described? cant find anything about it.<br><br>Thank you for your help.<br><br>Regards,<br><br>Snorre</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">11th October 2002 23:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) Yes, because NSIS have INI files handing capabilities you can write to the INI file and change certain fields such as State and Text and thus dynamically editing the custom page. For more info about fields in the INI file consult the IO readme file (Install Options.html).<br>2) Yes, just don't use DirText in your script.<br>3) Well,<br></p><blockquote>The best documentation in this case is the script files themselves. They are well documented and unless you are the curious type in order to use their technique you don't need to actually read most of their script, you just have to use it and that thankfully is simplicity itself ;-)</blockquote>The script files contain some comments that might help. Most of them are in CustomPages.nsh in the ZIP file.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">12th October 2002 13:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If you are using the Modern UI, you can use the InstallOptions macro's. Have a look at Examples\Modern UI\InstallOptions.nsi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">snarum</span><br><span class="post-time small text-muted">13th October 2002 09:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you very much for your help guys. My install script is now almost done, in beautify Modern UI :) The only thing I did'nt seem to be able to do was to move the installoption.dll to another folder than the Plugins folder. I want to be able to store everything that I need to build a distribution in my CVS tree so that I dont have to install NSIS on all computers I work on. I managed to move all other included files (language files, system) but when i move the installoption.dll makensis complains that there is no function installOptions::dialog. Any solutions to this? It's no big issue, just got curious as to why I cant move this file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th October 2002 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Use PluginDir to give NSIS another folder to search for plug-ins.<br><br></p><pre>
<code>
PluginDir "C:\\MyProj\\plugins"
<br>&gt;Section
<br>   ; ...
<br>  InstallOptions::dialog ; bla bla
<br>   ; ...
<br>&gt;SectionEnd 
<br>&gt;
</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hermanator</span><br>
      <span class="post-time small text-muted">29th April 2003 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is there a way to change the "..." to "Browse" on a dirrequest install options field?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br>
      <span class="post-time small text-muted">29th April 2003 16:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't know, maybe using the "Text=" value</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">29th April 2003 16:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, you can't. But a lot have changed in the past half a year :)<br>
      You can use two Page dir commands, the first of them with a leave callback function that will copy $INSTDIR into another variable so you'll have one directory in that variable and one in $INSTDIR.<br>
      <br>
      For example:<br>
      <br></p>
      <pre>
<code>Page directory "" setTexts getInstDir<br>Page directory<br><br>Function setTexts<br>  FindWindow $0 "#32770" "" $HWNDPARENT<br>  GetDlgItem $1 $0 1006<br>  SendMessage $1 ${WM_SETTEXT} 0 \<br>  "STR:Another text for the first directory page instead of DirText"<br>FunctionEnd<br><br>Function getInstDir<br>  StrCpy $R9 $INSTDIR<br>FunctionEnd</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hermanator</span><br>
      <span class="post-time small text-muted">29th April 2003 17:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can I call the second dir page dynamically, from within a section?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">29th April 2003 17:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">No, and you can do that with InstallOptions pages (unless you're using 1.98 or 2.0a*). But you can skip the page from the pre-function using Abort.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hermanator</span><br>
      <span class="post-time small text-muted">29th April 2003 18:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I am trying to do this now with InstallOptions.. If I try to show a custom page from my second section (once the first section's files have already been installed), clicking next on the custom page will pass the path I need in that section succesfully, and the remaining files are installed correctly, but the custom page remains (instead of the finish page being displayed):<br>
      <br>
      InstallOptions::show $PLUGINSDIR\customPage.ini<br>
      Pop $R0<br>
      MessageBox MB_OK "The user choose: $R0" IDOK<br>
      <br>
      I'm using v2.0b4 cvs. What am I doing wrong?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">29th April 2003 18:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Missed the not :(<br>
      <br>
      You can NOT do this with InstallOptions pages - you can't show InstallOptions pages inside a section.</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>