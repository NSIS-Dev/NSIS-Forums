<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Migration to NSIS2 &amp; MUI - Questions and Suggestions"><title>Migration to NSIS2 &amp; MUI - Questions and Suggestions - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Migration to NSIS2 &amp; MUI - Questions and Suggestions</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=116706">Migration to NSIS2 &amp; MUI - Questions and Suggestions</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">5th December 2002 08:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Migration to NSIS2 &amp; MUI - Questions and Suggestions</strong><br>Hello,<br><br>I've been following NSIS since 1.2 and now trying to port my installers to the latest NSIS2 with ModernUI which is quite fancy. However, I quickly ran into the following problems and suggestions:<br><br>1. Display an options to install software for one/all users- could this be integrated ie. into the component selection page?<br>In previous NSIS I've use an .onNextPage to pop up a dialog box to ask. I've tried to implement this in the event for the directory selection page- but the callback function is already defined by MUI, do I need to put my message box into the system.nsh?<br><br>2. If finish page is used, it's no longer possible to verifiy the installation details (bacl button is disabled)- intended or my mistake?<br><br>3. Would it be possible to get a component selection page that does not contain the description pane? If no descriptions are specified, it currently stays empty instead of vanishing.<br><br>4. The Polish.nsh file seems to be missing MUI_TEXT_STARTMENU_WINDOWTITLE.<br><br>5. Not MUI-related: can I still have required sections that *are* displayed, but where the checkmark cannot be removed (as the first section previously was)<br><br>I hope I'm making sense and you guys can shed some light this...<br><br>Cheers,<br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th December 2002 10:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">1) In b0 there is no callback function that is called after you move from a page and before that page is destroyed. You will have to use an InstallOptions page which will actually look better than a message box IMHO.<br><br>2) The back button is disabled on purpose. If you want the install details to stay until the user click the next button define MUI_FINISHPAGE_NOAUTOCLOSE before you inlude the Modern UI system.nsh. I will make sure it goes into the docs too...<br><br>3) You will have to make your own UI for that. It's actually very easy. Just download <a href="http://www.users.on.net/johnson/resourcehacker/" target="_blank">Resource Hacker</a>, open up modern.exe or modern2.exe with it and edit whatever you want. Save as, lets say modern-nodesc.exe and then define MUI_UI as the path to it before you include System.nsh. That one is in the MUI readme.<br><br>4) Our Polish translator hasn't sent a new translation yet... :(<br><br>5) Use SectionIn RO.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">matini</span><br><span class="post-time small text-muted">5th December 2002 11:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>ModernUI without description</strong><br>Well, I always keep a copy of the modified Modern2.exe for my<br>installers that needn't descriptions. Here it is:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">5th December 2002 14:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Kichik, thank you for the advice. Only one comment for now:<br><br>1) Would be OK, but can this be achived on an existing page (ie. the shortcuts page)? I agree with not using messages boxes (therefore the final page is very good), but then again you don't want to increase the number of unnessesary clicks.<br><br>Cheers,<br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">5th December 2002 15:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">For the shortcuts page you will have to write your own Page commands (define MUI_CUSTOMPAGECOMMANDS) call StartMenu yourself and add a MessageBox after its call.<br><br>You need to click on a message box or no enter to skip it too ;)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">RIV@NVX</span><br><span class="post-time small text-muted">5th December 2002 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Will that AndiG's UI be included with next version of NSIS?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">5th December 2002 16:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I'll make a modern3.exe without description.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">10th December 2002 15:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Joost,<br>thank you for modern3,<br><br>kichik,<br>I'm still not entirely sure- I understand it's not possible to add a checkbox to any existing page, right? They need to be clicked, too, but only if you disagree with the standard...<br><br>Do you think an "Install for All Users" checkbox (optional) would be a good enhancement for NSIS, status automatically determining the where to install (reg keys, as you can do now wit scripting) and able to be queried via scripting language?<br><br>Cheers,<br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">11th December 2002 08:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Not sure this makes sense, but I'm not really happy with MUI_FINISHPAGE_NOAUTOCLOSE.<br>My preferred behaviour would be that I get to the finish page automatically and can still go back to the installer progress page (Back button on final not disabled). Saves one click and the interested users can still go back.<br>Makes sense?<br><br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">11th December 2002 15:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"></p><blockquote>Do you think an "Install for All Users" checkbox (optional) would be a good enhancement for NSIS, status automatically determining the where to install (reg keys, as you can do now wit scripting) and able to be queried via scripting language?</blockquote>It's not that hard to do it right now, I don't think there should be an option for another page that does only it. All you need to do is create an InstallOptions page that asks the user where he wants it. Then according to it use SetShellVarContext and you are set. SetShellVarContext will make sure all of the NSIS variables ($PROGRAMFILES, $STARTMENU etc.) will point to the right place. For the registry keys you will have to use a variable to store either HKLM or HKCU and use it in every registry function.<br><br><blockquote>Makes sense?</blockquote>I will think about it.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">11th December 2002 15:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">kichik,<br><br>not another page (installoptions), but rather incorporate it into one of the existing pages :)<br><br>Cheers,<br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">11th December 2002 15:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Which page were you thinking about?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">AndiG</span><br><span class="post-time small text-muted">14th December 2002 09:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Mhhm. Not entirely sure- maybe the Shortcusts page? I'm wondering though- how do other installers handle this?<br><br>Cheers,<br>Andi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th December 2002 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Most of the installers I have seen have a seperate page for it, I think.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>