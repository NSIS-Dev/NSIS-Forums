<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="$PLUGINSDIR stays behind" />

  <title>$PLUGINSDIR stays behind - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">$PLUGINSDIR stays behind</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=229965">$PLUGINSDIR stays behind</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">scully13</span><br />
      <span class="post-time small text-muted">2nd November 2005 17:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>$PLUGINSDIR stays behind</strong><br />
      &nbsp; I noticed while working on my installer that the $PLUGINSDIR stays around after I exit. The folder is empty and if I delete it manually it goes away immediately. I then noticed that it only occurs if $OUTDIR is set to my $PLUGINSDIR. Is this something I'm doing wrong? I've attached an example using basic.nsi to show the problem. Look at the code in .onInit. If you leave it the way it is the $PLUGINSDIR will not get deleted. If you comment the last line in it will get deleted. Also, don't run all the way through the installer. Just get the first dialog and then exit the installer.<br />
      <br /></p>
      <pre>
<code>
onInit
<br />  InitPluginsDir
<br />  SetOutPath $PLUGINSDIR
<br /> ;SetOutPath $TEMP
<br />FunctionEnd 
<br />&gt;
</code>
</pre>I'm using NSIS 2.10. During the Init I copy some files that are needed into the plugins directory. If I complete the install everything is fine because the $OUTDIR gets changed when installing the program. As a workaround I could just change the $OUTDIR to something else but thought I'd ask.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comm@nder21</span><br />
      <span class="post-time small text-muted">2nd November 2005 18:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">the un/installer cannot remove $OUTDIR.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">2nd November 2005 18:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Best thing to do is to change the OutPath to $TEMP.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">scully13</span><br />
      <span class="post-time small text-muted">2nd November 2005 19:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the help. I will set the $OUTDIR to $TEMP.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>