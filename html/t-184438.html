<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Exclude files/directories in File command" />

  <title>Exclude files/directories in File command - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Exclude files/directories in File command</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=184438">Exclude files/directories in File command</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">e-novative</span><br />
      <span class="post-time small text-muted">24th June 2004 20:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Exclude files/directories in File command</strong><br />
      I know this has been discussed before, I just would like to know if there are any plans to add file exclusion to the file command (maybe) by adding another switch?<br />
      <br />
      It would be cool for CVS (or, in my case, subversion) users. Also, Windows tends to create system files like thumbs.db in some directories. I find it annoying to package and deploy these files.<br />
      <br />
      Kind regards,<br />
      <br />
      Steve</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">24th June 2004 20:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Plans? Of course. Time? No. Patches by users? Of course not...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">24th June 2004 22:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I made a program to do this as I ran into the exact same problem you're describing "e-novative". The lengthy discussion of creating such a program can be found here.<br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=150770" target="_blank">http://forums.winamp.com/showthread....hreadid=150770</a><br />
      <br />
      I believe there is a link somewhere in that discussion to the program. I really should have kichik or another admin make it available in the archives. I'm just lazy I suppose.<br />
      <br />
      I've also been working on a custom tool which has this ability soon to be made available on SourceForge. I will post more details as that project progresses.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">e-novative</span><br />
      <span class="post-time small text-muted">25th June 2004 11:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Some problems with exclusion</strong><br />
      Rob,<br />
      <br />
      thanks for your help. I am trying to use your solution, but I seem to do something wrong. I replaced<br />
      <br />
      File /r "..\environment\*.*"<br />
      <br />
      by<br />
      <br />
      !insertmacro FOLDER_LIST_RECURSIVE "..\environment\*.*" ".svn"<br />
      <br />
      to get rid of the .svn subdirectories (created by Subversion, a CVS-kind-of-thing). The removal does work as expected, also the recursion, but all files in those directories having subdirectories are missing.<br />
      <br />
      Any idea what is wrong?<br />
      <br />
      Steve</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">25th June 2004 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm quite familiar with Subversion, we use it at my workplace. Used CVS before that. That was really the main force behind creating this program.<br />
      <br />
      I believe you need to have the full path name for the folder<br />
      you want to include. So instead of having this...<br /></p>
      <pre>
<span style="color: #007700">!</span><span style="color: #0000BB">insertmacroFOLDER_LIST_RECURSIVE</span><span style="color: #DD0000">"..\\environment\\*.*"".svn"
</span>
</pre>have something like this,<br />
      <pre>
<span style="color: #007700">!</span><span style="color: #0000BB">insertmacroFOLDER_LIST_RECURSIVE</span><span style="color: #DD0000">"c:\\environment\\*.*"".svn\\"
</span>
</pre>I assume you have a different path to the environment folder but you get the idea. Folders that you want to ignore should also have a "\" character suffixed to them. Although you said it worked for you without a slash so maybe I'm wrong.<br />
      <br />
      Anyways that should work for you. Let me know the results.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">e-novative</span><br />
      <span class="post-time small text-muted">29th June 2004 10:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Rob,<br />
      <br />
      thanks again for the help. I still do not quite get the desired results. Basically, the .svn subdirectories are excluded as desired, but I have non-excluded files missing on the target system.<br />
      <br />
      This is what I am using:<br />
      <br />
      !insertmacro FOLDER_LIST_RECURSIVE "C:\Dokumente und Einstellungen\Steve\Desktop\wamp\environment\*.*" ".svn\"<br />
      <br />
      Now, the environment directory contains various subdirectories, which contain files and/or subdirectories.<br />
      <br />
      I copy the environment dir to my installation dir using SetOutPath "$INSTDIR". Here's what happens: Subdirectories of environment that only contain files are okay; but for subdirectories of environment that contain files and subdirectories, the subdirectories (with the files in them) show up correctly, but the files in environment/subdirectory are missing<br />
      <br />
      Needless to say that these files do not match the .svn exclusion rule. I suspect there might be a bug in the folderlist.exe that somehow skips the _files_ at the first subdirectory level but does process the _directories_ in there? Can someone confirm this or am I just plain stupid and doing something terribly wrong?<br />
      <br />
      By the way, the behaviour seems the same when I use relative paths. Is there a way to get the current direcory at NSIS compile time, something like ${__DIR__}? If there is not, it might be a good idea to add this to make absolute path construction at compile time easier.<br />
      <br />
      Kind regards,<br />
      <br />
      Stefan</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">29th June 2004 16:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Stefan I'm hoping you just download an older version of FolderList, so here's the latest verison I have. I tried it and it works great for me. Hopefully it'll work for you as well.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">e-novative</span><br />
      <span class="post-time small text-muted">29th June 2004 22:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Excluding .svn directories</strong><br />
      Rob, you're the man. If you ever come to Munich, drop me a note, and I'll buy you a beer. Seriously.<br />
      <br />
      I did not use the latest version of FolderList.exe since the one you posted did not work for me right away: msvcp71.dll and msvcr71.dll were missing on my system (the older versions of FolderList obviously did not require them). I guess they come with .net or some MS IDE's/compilers, but you can find and download them somewhere if you kindly ask Google.<br />
      <br />
      I put them im the same directory as FolderList.exe, and since then things work perfectly.<br />
      <br />
      Thanks again for all the help, Rob!<br />
      <br />
      Steve</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">e-novative</span><br />
      <span class="post-time small text-muted">29th June 2004 23:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just another short note: relative paths also work for me. This simplifies your life quite a bit ...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">29th June 2004 23:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        msvcp71.dll and msvcr71.dll were missing on my system (the older versions of FolderList obviously did not require them). I guess they come with .net or some MS IDE's/compilers, but you can find and download them somewhere if you kindly ask Google.
      </blockquote>Yes the original version was created under Visual Studio 6, my latest version was created under Visual Studio .NET, I wasn't aware those DLL's weren't included with all Windows distributions. That's good to know, thanks.<br />
      <br />

      <blockquote>
        Rob, you're the man. If you ever come to Munich, drop me a note, and I'll buy you a beer. Seriously.
      </blockquote>Yeh sounds good to me. Isn't it against the law to turn down free beer? If you found FolderList useful you may find the new tool I created useful as well. You can find details on it here...<br />
      <br />
      <a href="https://sourceforge.net/projects/installgen" target="_blank">https://sourceforge.net/projects/installgen</a><br />
      <br />
      I'm constantly working on upgrading it but it is presently in a useable state. I will post updates to the tool on the NSIS forum as I make them here...<br />
      <br />
      <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=185006" target="_blank">http://forums.winamp.com/showthread....hreadid=185006</a>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br />
      <span class="post-time small text-muted">30th June 2004 15:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by e-novative</i><br />
        <b>Just another short note: relative paths also work for me. This simplifies your life quite a bit ...</b>
      </blockquote>Indeed it does, thanks for the feedback.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
