<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Installer" />

  <title>Installer - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Installer</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=63982">Installer</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">runik</span><br />
      <span class="post-time small text-muted">28th October 2001 03:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Installer</strong><br />
      I'm just curious about something.<br />
      <br />
      Is there anyway to execute another program<br />
      and wait for it to finish, before you can<br />
      close the installer? Say I have test.exe<br />
      that is being installed, and once it's been<br />
      installed, I want to run it in the background<br />
      and wait for it to finish before you can close the installer.<br />
      <br />
      Is there any possible way you can do that?<br />
      <br />
      Thanks,<br />
      <br />
      runik</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">justin</span><br />
      <span class="post-time small text-muted">28th October 2001 04:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Use ExecWait</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">runik</span><br />
      <span class="post-time small text-muted">28th October 2001 04:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, thanks.<br />
      <br />
      One more thing. With the uninstall, is there anyway to delete everything that is in the folder without having to put<br />
      <br /></p>
      <pre>
<code><br />Delete "$INSTDIR\myapp.exe"<br />Delete "$INSTDIR\myapp.ini"<br /></code>
</pre><br />
      ect..<br />
      <br />
      The reason I ask, is because my application downloads files off the web and they change all the time. So before I release it I don't now what files the program will have to download for future updates.<br />
      <br />
      I hope I made that clear, to where you can understand what I'm wanting to do.<br />
      <br />
      Thanks again,<br />
      <br />
      runik
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Schultz</span><br />
      <span class="post-time small text-muted">28th October 2001 05:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">you mean you want to delete the files in the $INSTDIR and then remove the dir after wards? you can just use RMDir /r $INSTDIR and it will recursivly delete everything inside the dir and then delete $INSTDIR</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">locnar42</span><br />
      <span class="post-time small text-muted">28th October 2001 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">As Schultz pointed out, you can use RMDir /r.<br />
      Additionally, with the new NSIS you can use the FindFirst, FindNext routines to search a directory structure for each file. This would come in handy if you have some way of determining which files are yours and which you want to delete, or if there are specific files which you want to leave behind.<br />
      Otherwise, just use RMDir and make sure that whatever directory you delete doesn't have other files in it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">justin</span><br />
      <span class="post-time small text-muted">28th October 2001 09:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Delete $INSTDIR\*.* deletes all files ;)<br />
      <br />
      -Justin</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">prodangle</span><br />
      <span class="post-time small text-muted">28th October 2001 12:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Schultz</i><br />
        <b>you mean you want to delete the files in the $INSTDIR and then remove the dir after wards? you can just use RMDir /r $INSTDIR and it will recursivly delete everything inside the dir and then delete $INSTDIR</b>
      </blockquote>Only problem here is if some user is stupid enough to install your program to just "C:\program files\", or even "c:\", which does happen :) . I'd reccomend doing it the slow way for safety's sake
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">prodangle</span><br />
      <span class="post-time small text-muted">28th October 2001 12:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Sorry, I just read the reasons for your question properly there :). Maybe downloading some sort of uninstall.ini and reading the filenames to delete from it would be a better idea</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Schultz</span><br />
      <span class="post-time small text-muted">28th October 2001 12:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by prodangle</i><br />
        <b><br />
        <br />
        Only problem here is if some user is stupid enough to install your program to just "C:\program files\", or even "c:\", which does happen :) . I'd reccomend doing it the slow way for safety's sake</b>
      </blockquote>Very good point.. i never thought about that.. and yes there are alot of stupid users out there sometimes.. i think i will update my scripts now to reflect this.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">runik</span><br />
      <span class="post-time small text-muted">28th October 2001 15:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks for the help guys. And thanks prodangle for pointing that out. That could get ugly if they installed to system folder or something.<br />
      <br />
      <br />
      thanks agian,<br />
      <br />
      runik</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DuaneJeffers</span><br />
      <span class="post-time small text-muted">28th October 2001 19:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Well, you could do it this way. Every update or install package you create a new uninstall.exe, replacing the old one. So, try it like this:<br />
      <br />
      I have my program installer:<br /></p>
      <pre>
<code><br />Name MyApp<br />OutFile myapp.exe<br />;insert installer info here<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />UninstallExeName uninstall.exe<br />;Do a regular uninstall, just uninstalling the installed components<br /></code>
</pre><br />
      <br />
      Now for packages that DON'T come with the program installer:<br />
      <pre>
<code><br />Name MyAppPlugins1<br />OutFile package1.exe<br />;install the components<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />;<br />Section -post<br />;in the post section, delete the current uninstall.exe<br />Delete /r $INSTDIR\uninstall.exe<br />;If you need some post installation stuff, do it here<br />SectionEnd<br /><br />;Now, Recreate the uninstall.exe<br />UninstallExeName uninstall.exe<br />; now search for the files from other possible packages using<br />; IfFileExists<br />IfFileExists $INSTDIR\Plug-ins\package2.dll 0 Nopackage2<br />Delete /r $INSTDIR\Plug-ins\package2.dll<br />Nopackage2:<br />; Continue to do this for other packages and also delete the actual <br />; program files as well. <br /></code>
</pre><br />
      This can also be used for Updating.<br />
      <br />
      The only problem with this is that once a new package is introduced, you have to update the other older packages to delete it if, lets say, a user installs a Package 7, then installs a package 2 AFTER the 7th package.<br />
      <br />
      But this will work.<br />
      <br />
      -Duane
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">runik</span><br />
      <span class="post-time small text-muted">28th October 2001 21:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hey, thanks man. I'll give it a try.<br />
      <br />
      runik</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
