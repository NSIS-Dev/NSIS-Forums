<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Automatic generation of Detele items in Uninstall section"><title>Automatic generation of Detele items in Uninstall section - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Automatic generation of Detele items in Uninstall section</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=178773">Automatic generation of Detele items in Uninstall section</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">mfreed</span><br><span class="post-time small text-muted">3rd May 2004 05:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Automatic generation of Detele items in Uninstall section</strong><br>I am using "File /r path_to_application/*.*" to install all files for my application. Is it possible to somehow get NSIS to keep track of this list of files, and automatically generate the Uninstall section with "Delete" commands for each file?<br><br>From my reading and searches, it appears that there are only two ways to remove the application. The first is to manually enter "Delete" commands for each file, which is too tedious when the application is large and the list of files changes often. The second is to use an "RMDir /r "$INSTDIR"" statement, which I don't like because it will remove any other files that the user put into the installation directory.<br><br>Is there any way to accomplish this automatic uninstallation?<br><br>By the way, I am new to NSIS (looks VERY cool so far!), so hopefully I didn't miss something obvious. I couldn't find the answer in any of my searches.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br><span class="post-time small text-muted">3rd May 2004 08:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You can create a macro so you only have to enter all filenames once or let the installer create a log-file with all filenames and delete these files when uninstalling.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">evilO</span><br><span class="post-time small text-muted">3rd May 2004 08:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi mfreed and welcome to the forums :)<br><br>Well, if you want to do that I'm afraid you'll have to write a couple of functions...<br><br>Actually there are several ways to achieve that.<br><br>You can for instance write a wrapper (macro) for the 'File' command that would write the files/directories into an Ini file. Then write a function for the uninstaller that loops through the files/directories read from the Ini file to remove them.<br><br>The 'problem' with this method is that if your application is big and has a lot of files/directories, it takes a little time during installation to write all the entries in the file.<br><br>In this case, an alternative could be to write the files/directories in the Ini file using an NSIS function *BEFORE* the compilation of your script. Then put this file in your installer (File myIniFile.ini), and at runtime just write the installation directory in the Ini file. This would save some time, but it's only worth it if your application is really big...<br><br>You can also check this thread but only half of it is relevant to your problem:<br><br><a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=146048" target="_blank">http://forums.winamp.com/showthread....hreadid=146048</a><br><br>evilO/Olive</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">evilO</span><br><span class="post-time small text-muted">3rd May 2004 09:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Ooops, didn't see you answered Joost :p</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">mfreed</span><br><span class="post-time small text-muted">3rd May 2004 15:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for the suggestions evilO and Joost!<br><br>The only thing I am still missing is how I get NSIS to give me the list of files that it is including when I use a "File /r *.*" command. Or are you suggesting that I write my own recursive file inclusion macro, so that I can get each filename individually?<br><br>I think I am now at the point where I might make a separate (C++) executable that I run before I run NSIS, which recursively goes through the files and builds up a .NSI file.<br><br>Might be a good feature suggestion to have a "AutoGenerateUninstall on" command that tells NSIS to record everything that it does on the install side of things, and then builds an Uninstall section that reverses the process. Just a thought.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>