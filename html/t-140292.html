<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="unchecked subsection as default" />

  <title>unchecked subsection as default - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">unchecked subsection as default</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140292">unchecked subsection as default</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">27th June 2003 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>unchecked subsection as default</strong><br />
      Hi there and hello<br />
      <br />
      Is it possible to have an subsection unchecked as default<br />
      <br />
      eg.<br />
      <br />
      section<br />
      - [x] subsection 1<br />
      - [_] subsection 2<br />
      <br />
      Additional:<br />
      Is it possible to change the [x] for subsection 2 depending on existing values (e.g feature was installed before (or not))<br />
      <br />
      example:<br />
      on first installation subs2 is nailed, user deselected it - and on upgrade (or 2nd installation) subs2 is not nailed.<br />
      <br />
      thx</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">27th June 2003 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">sorry - from help<br />
      <br />
      &gt;&gt; If the Switch /o is specified than the Section is unselected by default.<br />
      <br />
      but my second question is still unanswered. is it possible?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">27th June 2003 17:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I found a macro in a NSH<br />
      <br /></p>
      <pre>
<code>; Set one or more BITS in SECTION's flags.<br />!macro SetSectionFlag SECTION BITS<br />        Push $R0<br />        SectionGetFlags "${SECTION}" $R0<br />        IntOp $R0 $R0 | "${BITS}"<br />        SectionSetFlags "${SECTION}" $R0<br />        Pop $R0<br />!macroend<br /><br />; Clear one or more BITS in SECTION's flags.<br />!macro ClearSectionFlag SECTION BITS<br />        Push $R0<br />        Push $R1<br />        SectionGetFlags "${SECTION}" $R0<br />        IntOp $R1 "${BITS}" ~<br />        IntOp $R0 $R0 &amp; $R1<br />        SectionSetFlags "${SECTION}" $R0<br />        Pop $R1<br />        Pop $R0<br />!macroend<br /></code>
</pre><br />
      <br />
      Maybe<br />
      <br />
      !insertmacro SetSectionFlag<br />
      <br />
      but SECTION and BITS? how? pls tell me<br />
      <br />
      can i include the text containing the macro like this without copying the macro itself to my nsi-script or is it included automatically?<br />
      <br />
      !include "${NSISDIR}\include\sections.nsh"
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">n0On3</span><br />
      <span class="post-time small text-muted">30th June 2003 02:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Brummelchen</i> sorry - from help<br />
        <br />
        &gt;&gt; If the Switch /o is specified than the Section is unselected by default.
      </blockquote>where did you get this?

      <blockquote>
        4.6.1.2 Section<br />
        <br />
        [/e] [section_name] [section index output]<br />
        <br />
        Begins and opens a new section. If section_name is empty, omitted, or begins with a -, then it is a required section and the user will not see it, nor have the option of disabling it. If the section name is 'Uninstall', then it is a special Uninstall Section. If section index output is specified, the parameter will be !defined with the section index (that can be used for SectionSetText etc). If the section name begins with a !, the section will be displayed as bold. If /e is present, the sub sections of the section will be expanded by default.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">30th June 2003 03:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS Help Chapter 4 CVS from the last 3 days or before !<br />
      <br />
      Section flags have to be changed if the concerning file was installed on a previos setup - normal it is unchecked due to a Web-Setup.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th July 2003 12:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't need ClearSectionFlag, you can use UnselectSection from the same file. Just so you'd know next time, the flags (BITS) are listed on the top of Sections.nsh (SF_*), and SECTION is the section id as always.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">4th July 2003 14:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">@kichik<br />
      <br />
      man ur great :)<br /></p>
      <pre>
<code><br />  !insertmacro MUI_PAGE_WELCOME<br />  !insertmacro MUI_PAGE_LICENSE<br />  Page custom find_xyz ; this is a normal function call<br /><br />  !insertmacro MUI_PAGE_COMPONENTS<br /><br />...<br /><br />Function find_xyz<br />  IfFileExists $INSTDIR\xyz\xyz.exe 0 noabsfsec<br />  absfsec:<br />  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 <br />"A previous version of '${MUI_PRODUCT} xyz' was found.<br />$\nWould you like to install the latest version?" <br />IDNO noabsfsec<br />   SectionSetFlags ${SecInfo2} 1<br />  noabsfsec:<br />FunctionEnd<br /></code>
</pre><br />
      <br />
      BTW is this the correct syntax?<br />
      <br />
      SectionSetFlags ${SecInfo2} 1 &lt;-- "1" or do i have to use other flags? (0x01)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th July 2003 14:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">1 is the same as SF_SELECTED. There is absolutely no difference. Why would you use SectionSetFlags though? What's wrong with SelectSection?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th July 2003 14:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hmm... It's not the macro. SetSectionFlags 1 to select the section should be enough but if you choose to add other flags such as bold or read only it will remove them. You should use the SelectSection macro from Sections.nsh.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">4th July 2003 14:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">@kichik<br />
      <br />
      SF_SELECTED is synonym for "0x01" ?<br />
      <br />
      &gt; What's wrong with SelectSection?<br />
      <br />
      You mean that<br />
      !insertmacro SelectSection $1<br />
      may the easier way?<br />
      <br />
      if that does set flag SF_SELECTED without changing other flags (bold aso.) that would help me.<br />
      <br />
      This is my first time into deep nsis :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th July 2003 14:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">${SF_SELECTED} is defined as 1 (or 0x01, same thing). It's the exact same thing, but SF_SELECTED's meaning is far more easier to understand than 1 ;)<br />
      <br />
      Saving other flags is the exact reason to use the macro (or just its content).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">4th July 2003 15:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">&gt; ${SF_SELECTED} is defined as 1<br />
      <br />
      This works<br />
      IntOp $0 $0 | 1<br />
      <br />
      this not<br />
      IntOp $0 $0 | ${SF_SELECTED}<br />
      <br />
      I modified the routine:<br />
      <br />
      ;set SectionFlags to "found"<br />
      Push $0<br />
      SectionGetFlags ${SecInfo2} $0<br />
      IntOp $0 $0 | 1<br />
      SectionSetFlags ${SecInfo2} $0<br />
      Pop $0<br />
      <br />
      I dont know how to work with<br />
      !insertmacro SelectSection $1<br />
      <br />
      it causes errors while compiling.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">4th July 2003 17:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have to include Sections.nsh for SF_SELECTED and the macros to be defined.<br />
      <br />
      You've used $1 in the macro instead of the section. It should look like this:<br />
      <br />
      !insertmacro SelectSection ${SecInfo2}<br />
      <br />
      What errors do you get? If it tells you the macro wasn't found then you should add "!include Sections.nsh" to your script.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Brummelchen</span><br />
      <span class="post-time small text-muted">4th July 2003 18:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">@kichik<br />
      <br />
      &gt; add "!include Sections.nsh" to your script.<br />
      <br />
      i forgot that - now it works perfectly. THX</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
