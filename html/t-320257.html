<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Copy compiled .exe at/after compile time" />

  <title>Copy compiled .exe at/after compile time - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Copy compiled .exe at/after compile time</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320257">Copy compiled .exe at/after compile time</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Plainjay</span><br />
      <span class="post-time small text-muted">26th June 2010 00:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Copy compiled .exe at/after compile time</strong><br />
      I'm looking for a way to add the .exe I'm compiling to a folder and build an ISO image off that folder during the compile process (sort of a one-stop process for building everything). It sounds like I'd need to call another batch file or executable to copy the compiled program and do the rest of the processing. How do you call a program and tell the compiler to keep running without waiting for the called program to finish?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Plainjay</span><br />
      <span class="post-time small text-muted">26th June 2010 00:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Perhaps I should create an .exe to call the compile process and then run the commands I need, after it finishes compiling?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br />
      <span class="post-time small text-muted">26th June 2010 08:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think there's any practical difference between creating an exe or a batch file.<br />
      <br />
      Anyway, I'm not at all sure if you can access the compiled .exe before the compiler is 100% finished. But if you can, there is a post in these forums explaining how to call a vbs script during compilation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th June 2010 10:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need to use a batch file.<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Plainjay</span><br />
      <span class="post-time small text-muted">26th June 2010 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I suppose it's like trying to pull a rug out from under you while you're standing on it. I still find it strange that you couldn't call a file or program to run in parallel while letting the main exe to continue.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">26th June 2010 16:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">If you want to add support, go for it :)<br />
      <br />
      Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">demiller9</span><br />
      <span class="post-time small text-muted">26th June 2010 17:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Plainjay</small><br />
        I still find it strange that you couldn't call a file or program to run in parallel while letting the main exe to continue.
      </blockquote>You can. I do that in several of my scripts. A number of my scripts call other programs to produce md5 hashes of the installer, or create an iso file with the installer and other files.<br />
      The last few lines of one of my nsi's look like this:
      <pre>
<code># create the iso file and its md5<br />!define ISOFile "${LanguageSuffix}_${VersionMajor}${VersionMinor}_OPSManual"<br />!system 'start wscript.exe "${BUILDDIR}\MakeIso.vbs" "${SRCDIR}" "${ISOFile}" ${INSTALLER_NAME}'<br /></code>
</pre><br />
      The MakeIso vbscript starts while makensis.exe is still running, and in fact has not yet written the setup.exe. The vbscript waits for makensis to exit, then does its work with the setup.exe
      <pre>
<code>Sub WaitForMakeNSIS()<br />        Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\cimv2")<br />        <br />        Do<br />                Set colProcesses = objWmiService.ExecQuery("SELECT * FROM Win32_Process WHERE Name='MakeNSIS.exe'" )<br />                ProcessIsActive = cBool(colProcesses.Count &gt; 0)<br />                If ProcessIsActive Then Wscript.Sleep 250<br />        Loop While ProcessIsActive<br />End Sub</code>
</pre>I've left out most of the vbscript, and didn't show my !defines, but this should be enough for you to duplicate it.<br />
      <br />
      Don
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Plainjay</span><br />
      <span class="post-time small text-muted">26th June 2010 18:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's the kind of thing I was looking for, thanks! Still considering making an exe to do compiling and building of the various ISO's' however, master compiler essentially. Looking for a way to send a /switch to the .exe with variable info (to change the what the .exe does at the time it's run depending on the variable given). I'm sure that's written somewhere in the documentation.. and I'm missing it.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Plainjay</span><br />
      <span class="post-time small text-muted">26th June 2010 19:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Nevermind I'll use a GUI to select the file, was considering using the /D switch on execute to determine which program was going to be compiled but in this case a GUI is the way to go for my company.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
