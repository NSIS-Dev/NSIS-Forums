<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Newbie needs help with MordernUI" />

  <title>Newbie needs help with MordernUI - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Newbie needs help with MordernUI</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=132418">Newbie needs help with MordernUI</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 05:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Newbie needs help with MordernUI</strong><br />
      &nbsp; Hi, i've read all the docs, read all the relevant post and looked at the examples but i'm still stuck :confused:<br />
      I'm using "Installer sections" as below<br /></p>

      <blockquote>
        ;Installer Sections<br />
        InstType "Full"<br />
        InstType "Singular"<br />
        Section "Full Theme" section_1<br />
        SectionIn 1<br />
        SetOutPath "$INSTDIR"<br />
        FILE "D:\LongHorn2\Home\LHv2Theme.CAB"<br />
        SectionEnd<br />
        Section "Home Screen" section_2<br />
        SectionIn 2<br />
        SetOutPath "$INSTDIR"<br />
        FILE "D:\LongHorn2\Home\LHv2Home.CAB"<br />
        SectionEnd<br />
        Section "System Theme" section_3<br />
        SectionIn 2<br />
        SetOutPath "$INSTDIR"<br />
        FILE "D:\LongHorn2\Home\LHv2System.CAB"<br />
        SectionEnd<br />
        Section "WMP Skin" section_4<br />
        SectionIn 2<br />
        SetOutPath "$INSTDIR"<br />
        FILE "D:\LongHorn2\Home\LHv2WMPSkin.CAB"<br />
        SectionEnd<br />
        Installer Sections
      </blockquote>But i want to so that if InstType "full" is selected (section_1) none of the others are available and if any of SectionIn 2 are selected section_1 is not available (but any number of SectionIn 2 can be selected)<br />
      <br />
      Also i do not want Custom to be in the drop down menu.<br />
      <br />
      I've looked at the one-section.nsi example but cannot see how this applies to the ModernUI :hang:<br />
      <br />
      Please help a Newbie in distress, i need to get this finished ASAP.<br />
      <br />
      TIA<br />
      Richie M
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">deguix</span><br />
      <span class="post-time small text-muted">20th April 2003 09:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Re: Newbie needs help with MordernUI</strong><br />
      &nbsp;</p>

      <blockquote>
        <b>Also i do not want Custom to be in the drop down menu.</b>
      </blockquote>Use:<br />
      <br />
      InstType /NOCUSTOM
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">20th April 2003 10:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">This is propably not a Modern UI problem, but an NSIS instruction interpretation problem.<br />
      <br />
      Quote from the documentation:<br /></p>

      <blockquote>
        <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.6.1.4" target="_blank"><font size="3">4.6.1.4 SectionIn</font></a><br />
        <pre>
<code>insttype_index [insttype_index] [RO]</code>
</pre><br />
        This command specifies which install types (see InstType) the current section defaults to the enabled state in. Multiple SectionIn commands can be specified (they are combined). If you specify RO as a parameter, then the section will be read-only, meaning the user won't be able to change its state.
      </blockquote>In other words, the installation types specified at <font face="courier new">SectionIn</font> are just selected/deselected and not enabled/disabled. You have to change a section's enabled-state by using <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13.1" target="_blank">SectionSetFlags</a>. You can find an example in the <a href="http://nsis.sourceforge.net/Examples/one-section.nsi" target="_blank"><font face="courier new">one-section.nsi</font></a> file in your examples directory.<br />
      <br />
      And to hide the 'Custom' option, use the <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.22" target="_blank"><font face="courier new">InstType</font></a> instruction:<br />
      <pre>
<code>
InstType /NOCUSTOM 
<br />&gt;
</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, but how do i apply the code in one-section.nsi, that seems to be for the "basic" UI not ModernUI?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br />
      <span class="post-time small text-muted">20th April 2003 12:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use the same code, there is no difference in script code between the Classic UI and the Modern UI.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks, i'll give it a go :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, i'm getting there; i changed to second InstType to be</p>
      <pre>
<code>
InstType /COMPONENTSONLYONCUSTOM 
<br />&gt;
</code>
</pre>(small note; there is a bug with this, if you hover the mouse over where the selection would be it still shows the description even tho they are hidden :( )<br />
      When I select Custom, "section_1" is still shown even tho its assigned to "SectionIn 1".<br />
      Is there no way to hide this if Custom is selected?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th April 2003 17:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have fixed the hidden bug, Joost will upload the source in a couple of seconds since my source has some other changes that are not fully tested yet in it.<br />
      <br />
      What I suggest you do is set the custom string to whatever Singualr using:<br />
      InstType /CUSTOMSTRING=Singular<br />
      <br />
      Then, according to the one-section.nsi example make it so when the user selects one of the 3 other sections unselect the first section (you can use macros from Sections.nsh too to make it simpler), and set it to Read-Only using the ${SF_RO} flag (defined in Sections.nsh [use !include Sections.nsh to include it]) and use the one-section.nsi code to make sure the user selects only one of the 3 other sections.<br />
      <br />
      It's not possible to hide sections from .onSelChange. You can set a section's name (SectionSetText) to nothing ("") and then it won't show in any other place but .onSelChange.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">virtlink</span><br />
      <span class="post-time small text-muted">20th April 2003 17:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Using a combination of InstType /COMPONENTSONLYONCUSTOM and InstType /NOCUSTOM will make the 'Component selection box' invisible for the whole installer. Since the user then can't select which sections he/she wants to install, you don't need to enable/disable the sections. You just use the SectionIn ionstruction.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th April 2003 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just read your post again:<br />
      <br /></p>

      <blockquote>
        But i want to so that if InstType "full" is selected (section_1) none of the others are available and if any of SectionIn 2 are selected section_1 is not available (but any number of SectionIn 2 can be selected)
      </blockquote>You don't need one-section.nsi at all. Just set section1 to read-only (SectionIn RO) and change it's state according to the others. For example:<br />
      <br />
      <pre>
<code>Function .onSelChange<br />SectionGetFlags ${sec2} $0<br />IntOp $0 $0 &amp; ${SF_SELECTED}<br />StrCmp $0 ${SF_SELECTED} selected<br />SectionGetFlags ${sec3} $0<br />IntOp $0 $0 &amp; ${SF_SELECTED}<br />StrCmp $0 ${SF_SELECTED} selected<br />SectionGetFlags ${sec4} $0<br />IntOp $0 $0 &amp; ${SF_SELECTED}<br />StrCmp $0 ${SF_SELECTED} selected<br /><br /># non of 2,3,4 are selected, select 1<br />SectionGetFlags ${sec1} $0<br />IntOp $0 $0 | ${SF_SELECTED}<br />SectionSetFlags ${sec1} $0<br />goto done<br /><br /># one of 2,3,4 are selected<br />SectionGetFlags ${sec1} $0<br />IntOp $0 $0 &amp; ${SECTION_OFF}<br />SectionSetFlags ${sec1} $0<br />done:<br />FunctionEnd</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you so much, i'll try that &amp; let you know :)<br />
      (i did say one-section.nsi wasn't helping :P )</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 17:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">:D Thanks Kichik, got it working ;)<br />
      I stayed with; InstType /COMPONENTSONLYONCUSTOM as my second type.<br />
      <br />
      Changed section_1 to be; Section "" section_1<br />
      <br />
      And then used your code, once i figured out you missed out "selected:" :p<br />
      <br />
      All i need now is to go to the VCS and get that bug-fix :D<br />
      <br />
      Thank you very much guys</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 18:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Kichik, how do i get a compiled version of the new Ui.c ?<br />
      Or don't i need it.<br />
      <br />
      Sorry for being such a Newbie :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">20th April 2003 18:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You need a compiler for that. Joost have uploaded a compiled verison to CVS so you can use it instead of compiling yourself.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Richie M</span><br />
      <span class="post-time small text-muted">20th April 2003 19:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you, you deserve a pay-rise :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jacob Metro</span><br />
      <span class="post-time small text-muted">20th April 2003 22:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I love it virtlink using "INSTtype /COMPONENTSONLYONCUSTOM" and "INSTtype /NOCUSTOM" does have its uses.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>