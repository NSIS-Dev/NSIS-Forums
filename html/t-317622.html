<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Directing NSIS deteilprint to log file"><title>Directing NSIS deteilprint to log file - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Directing NSIS deteilprint to log file</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317622">Directing NSIS deteilprint to log file</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">10th March 2010 10:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Directing NSIS deteilprint to log file</strong><br>I'm using LogEx to log installation activities to a log file<br>Is it possible to make all NSIS DetailPrint write to the log file as well?<br><br>For example:<br>1. Instruction <b>File a.txt</b> writes to DetailPrint<br><br><b>Extract: a.txt... 100%</b><br><br>2. delete instruction does the same...<br><br>Tx<br><br>Jammusi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">10th March 2010 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><a href="http://forums.winamp.com/showthread.php?postid=2344868" target="_blank">http://forums.winamp.com/showthread.php?postid=2344868</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">10th March 2010 16:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks - but this is not what i need.<br>I am already using LogEx plugin<br><br>What I want is that NSIS instructions (like delete , extract) will also write to that log file - as they will write to the DetailPrint window in the installfiles page</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">10th March 2010 17:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Sorry, missed that.<br><a href="http://forums.winamp.com/showthread.php?postid=2540163" target="_blank">http://forums.winamp.com/showthread.php?postid=2540163</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">10th March 2010 18:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">no worries mate<br><br>The Dump_to_log_file is not good enough as we need silent mode for our application<br><br>LogEx - Unless i miss something is not good as well<br><br>As for the special build feature - I checked that and it seems to be OK, but i still need to think about that a bit more.<br>I want to choose the log name and so I can keep the log history - to follow the application version history.<br><br>In addition - our setup is actually running in two phases. When the setup is being executed - it does some activities and than reboot the machine.<br>After rebooting the process continues and the log file is being <b>appended</b><br><br>Currently i achieve both requirements with the LogEx which is being initialized while setup (1. file name 2. appending to the log file that was created before rebooting)<br>Also it work with silent mode.<br><br>Can i do that with the LogSet?<br><br><br>tx</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">11th March 2010 09:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I have no experience with the Logging Special Build, but I don't think so, or you will have to make your own special build of NSIS.<br>To work around this, you could rename the logging file after the first install, and append the new logging file created after reboot to this file.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">11th March 2010 10:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Renaming the file and creating new file might be a sufficient workaround - only I think it is not applicable.<br><br>The reason is that the second part of the setup is not a manual operation - but rather being performed automatically by using Windows RunOnce mechanism.<br>Before rebooting I add the setup to the Windows registry RunOnce - so it will executed by Windows right after the machine reboots.<br><br>This means that I can not rename the file as when the setup runs it was already been overridden<br><br>What do you think?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">11th March 2010 10:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">What I meant:<br>- Run install with log to $INSTDIR\install.log<br>- Before reboot -&gt; Rename $INSTDIR\install.log to e.g. $INSTDIR\Logging.txt<br>- Reboot<br>- Run second part of installer with log to $INSTDIR\install.log<br>- append install.log to Logging.txt</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">11th March 2010 11:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Now i got you ....but still no can do ;)<br><br>The reboot takes place from within the first part of the setup.<br><br>The first step actually prepare the surface to the second part and reboots the machine.<br>Meaning - the "first" install.log can not rename as it is still being used by the setup.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">11th March 2010 11:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">There is no need to rename install.log. As long as both installs run from the same folder they will both append to the same install.log file.<br><br>Personally I just stick to using the NSIS logging build and do away with other logging methods. However if you really want to append the logs you'll have to launch another executable at the end of the last installer to do the merge after a set time.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">11th March 2010 14:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Stu,<br><br>If I understand correctly what you say - using the NSIS logging build will append to the same log, so there is no need to do this using another application. That is because the after reboot setup is actually the same executable that knows its state.<br><br>This is good enough for me (assuming it works with silent mode - I still need to verify that). I guess I can workaround - the other requirements this way or another.<br><br>I'll check and keep you posted<br><br>Jammusi</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jammusi</span><br><span class="post-time small text-muted">14th March 2010 14:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br>I checked that - and it's really being appended - but here is another problem I didn't think about<br><br>The setup / uninstall processes also activates an external utility to perform some tasks.<br><br>Using the LogEx, and by transferring the log file full name, this utility is also able to write to the log file.<br><br><b>But</b> when using the log file created by the <u>LogSet</u> - it canâ€™t write to the file as the file is locked.<br><br>Can the locking be bypassed somehow?<br><br>Tx<br><br>Jammusi</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>