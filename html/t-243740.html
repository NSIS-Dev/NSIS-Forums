<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Problems with MUI custom dialog" />

  <title>Problems with MUI custom dialog - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Problems with MUI custom dialog</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=243740">Problems with MUI custom dialog</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tbednarz</span><br />
      <span class="post-time small text-muted">17th April 2006 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Problems with MUI custom dialog</strong><br />
      I have two problems with custom dialogs using MUI:<br />
      <br />
      1) If I enable the back button, how do I jump to a previous custom dialog? I tried call CustDialog1 where CustDialog1 is the function to process the previous dialog (see code below). This shows the dialog but when clicking on one of its standard buttons (back, next, cancel) it terminates the installer<br />
      <br />
      2) I use the following code to process a custom dialog:<br />
      <br />
      Function CustDialog2<br />
      ${If} $IsNewSubscriber = 0<br />
      ; call !insertmacro MUI_HEADER_TEXT<br />
      ; call !insertmacro MUI_INSTALLOPTIONS_WRITE to write multilanguage Field and validation messages<br />
      ......<br />
      ; -- Show page<br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "SubscriptionKey.ini"<br />
      ; -- Read data<br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY_RETURN "SubscriptionKey.ini"<br />
      Pop $R0<br />
      ${if} $R0 == "cancel"<br />
      Quit<br />
      ${EndIf}<br />
      ${if} $R0 == "back"<br />
      call CustDialog1<br />
      ${EndIf}<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_READ $SubscriberLicense "SubscriptionKey.ini" "Field 3" "State"<br />
      <br />
      Loop:<br />
      <br />
      ;.... do some processing here<br />
      <br />
      ${EndIf}<br />
      FunctionEnd<br />
      <br />
      Since I added 'Pop $R0' to find out which button was pressed users need to click the NEXT button TWICE to get one step forward. Any idea why and what the problem is????<br />
      <br />
      Many thanks for your help.<br />
      <br />
      Tom</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">17th April 2006 17:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You should be reading data from the INI file in the Leave function. You don't need to manage the Cancel or Back buttons at all. NSIS will do that for you.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">tbednarz</span><br />
      <span class="post-time small text-muted">17th April 2006 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Many thanks for the quick reply. However I fear I do not quite understand:<br />
      <br />
      Do I need to define a pre and leave function for every custom dialog I create?<br />
      <br />
      In which order are they processed? Is there any documentation about it? My main job is to write complex software, installation programms I only write very rarely and therefore I do not understand how these things really work.<br />
      <br />
      So it would help me a lot, if you could point me to articles on that topic.<br />
      <br />
      Many thanks<br />
      Tom</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">17th April 2006 21:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Page Custom ShowFunc LeaveFunc<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
