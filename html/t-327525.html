<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to make a Personalized Installer"><title>How to make a Personalized Installer - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css" type="text/css"></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to make a Personalized Installer</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327525">How to make a Personalized Installer</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 09:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to make a Personalized Installer</strong><br>Hello all,<br><br>Here is my dilemma, I need to create an installer that is personalized per each user downloading it. The website has tens of thousands of users, when a user login they can download a software installer but the installer should have some unique data for the user. So basically i need to personalize a generic installer per each user.<br><br>I can go the naive way and just create tens of thousands of copies of the installer, each with a different user ID and then have the installer when it is run connect to the server send the user id and get the rest of the specific user data. Obviously this solution seems very wasteful.<br><br>I can do it in real time in PHP by implementing the download code in PHP, have PHP dump the installer and then some user id data at the end. This is more generic but it means high load on the server and not being able to enjoy the efficiencies of a simple file server to the installers.<br><br>Another solution would be to encode the user id in the filename and then have the installer decode it from the filename and use it. This is very easy to do but it seems like a very fragile solution.<br><br>Any other ideas? Anyone had to cope with the same problem before?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Highcoder</span><br><span class="post-time small text-muted">18th February 2011 10:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>re</strong><br>The best way to do this ist to compile the installer script on demand and pass the user id during compiletime. If your serve is a windows machine it should be easy.<br><br>I don´t know details how to do it but this way is i whould do it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 10:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah I forgot this one, but is pretty much the same as having a PHP code dump the EXE and append some ID to it, I guess it is cleaner and safer to recompile. The problem is the same though or maybe even worse this this is not a scalable solution it's ok if you have a low traffic site but if you have high traffic keep compiling is not practical. Also our production server is obviously not Windows ;-) which poses another challenge to recompile on an Apache/LAMP configuration - I guess you could set up another Windows server just for compilations and have ti communicate with the main Apache web server but again, not scalable...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Highcoder</span><br><span class="post-time small text-muted">18th February 2011 10:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thats right but if you want a unique installer you have to manipulate it´s base. You can compile it, you can use your PHP variant, recource hacker tools to "inject" ID´s etc...<br><br>But there is no solution that needs no serverpower...<br><br>The variant of encoding ID in filename is the only lightweight variant for your purpose because renaming is resource friendly.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 12:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah renaming is easy and light but is also very fragile not the most reliable way to go :-)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">18th February 2011 12:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">An alternative is to have the installer dial home to get the user id. You could let the user enter its login on a custom page or popup, or try to abuse a browser cookie...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 12:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah trying to avoid asking the user to enter his info again :-)<br><br>As for browser cookies, any experience doing that? my gut feeling would be that this would not be a super reliable solution.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">18th February 2011 13:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It'd be a hackjob, probably. There's currently another thread going on about cookie usage with the inetc plugin, maybe check that.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">18th February 2011 13:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Just output the generic copy using a PHP and write an additional couple of characters containing the user id afterwards.<br><br><a href="http://nsis.sourceforge.net/ReadCustomerData" target="_blank">http://nsis.sourceforge.net/ReadCustomerData</a><br><br>Maybe a little bit overkill. One 'magic' character is enough.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">18th February 2011 14:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">He already mentioned that solution, and noted that it'd be a problematic load on the server to use a php downloader.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 14:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, maybe some PHP loader with caching, create the file on the fly and cache it for a while for subsequent downloads. arrrrrrr, I guess there is no easy way to escape this.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">18th February 2011 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">If the installer is large then make a small downloader and append the user id to that.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">zivha</span><br><span class="post-time small text-muted">18th February 2011 14:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah good idea, it's about 650KB probably not worth it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">18th February 2011 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Well if it's that small it should be quite doable to just use php...</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>