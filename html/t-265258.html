<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="displaying a bitmap via InstallOptions" />

  <title>displaying a bitmap via InstallOptions - NSIS Forums</title>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script>
  <!-- Bootstrap core CSS -->

  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">displaying a bitmap via InstallOptions</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265258">displaying a bitmap via InstallOptions</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">6th February 2007 20:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>displaying a bitmap via InstallOptions</strong><br />
      What I'm trying to accomplish is to have a bitmap beside the radio button. I've browsed through the forums and tried the various suggestions but they don't seem to work for me.<br />
      <br />
      Function .onInit<br />
      <br />
      ;Extract InstallOptions INI files<br />
      InitPluginsDir<br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Type" "Bitmap"<br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Text" "image.bmp"<br />
      File /oname=$PLUGINSDIR\image.bmp "c:\image.bmp"<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_EXTRACT "ioB.ini"<br />
      <br />
      FunctionEnd<br />
      <br />
      Function ChooseCamera<br />
      ; WriteIniStr $PLUGINSDIR\io.ini "[Field 5]" Text $PLUGINSDIR\pgr.bmp<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "ioB.ini"<br />
      FunctionEnd<br />
      <br />
      Nothing gets written to the ioB.ini file from either the MUI_INSTALLOPTIONS_WRITE or the WriteIniStr. I can't seem to get it to write. Can someone enlighten me? Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th February 2007 20:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You are writing to the INI file before you extract it using MUI_INSTALLOPTIONS_WRITE. That means the extraction will overwrite whatever you wrote. The Text you specify also doesn't contain the full path as required.<br />
      <br />
      With WriteIniStr, you wrote to the wrong INI file and again the wrong path. It should be $PLUGINSDIR\image.bmp and not $PLUGINSDIR\pgr.bmp.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">6th February 2007 21:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ahh sorry typos, with your corrections it would be:<br />
      <br />
      Function .onInit<br />
      <br />
      ;Extract InstallOptions INI files<br />
      InitPluginsDir<br />
      File /oname=$PLUGINSDIR\image.bmp "c:\image.bmp"<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_EXTRACT "ioB.ini"<br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Type" "Bitmap"<br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Text" "image.bmp"<br />
      <br />
      FunctionEnd<br />
      <br />
      Function ChooseCamera<br />
      ; WriteIniStr $PLUGINSDIR\ioB.ini "[Field 5]" Text $PLUGINSDIR\image.bmp<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_DISPLAY "ioB.ini"<br />
      FunctionEnd<br />
      <br />
      Sadly, both methods still do not work. Am I missign something?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th February 2007 21:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Still missing full path in MUI_INSTALLOPTIONS_WRITE. The WriteINIStr is also incorrect because you've used "[Field 5]" instead of just "Field 5".</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">6th February 2007 21:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ya sorry it's suppose to be "Field 5", i was trying things.<br />
      I added the full path to the bmp in MUI_INSTALLOPTIONS_WRITE so it is now:<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Text" "c:\image.bmp"<br />
      <br />
      but still nothing is being written. I would imagine that even if I got it wrong, something should still have been written to ioB.ini.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th February 2007 21:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's not the full path on the user's computer. That's the full path on your computer. Just as with WriteINIStr, it should be $PLUGINSDIR\image.bmp.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Red Wine</span><br />
      <span class="post-time small text-muted">6th February 2007 21:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What about "The position on the dialog where this control appears. All sizes should be set in dialog units." Left, Right, Top, Bottom, all required.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">6th February 2007 22:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok I've modified again with<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Text" $PLUGINSDIR\Image.bmp<br />
      <br />
      and<br />
      <br />
      !insertmacro MUI_INSTALLOPTIONS_WRITE "ioB.ini" "Field 5" "Text" "$PLUGINSDIR\Image.bmp"<br />
      <br />
      still nothing. Nothing being displayed and nothing is being written to the ioB.ini file.<br />
      <br />
      I've attached my file for everyone to look at. There's probably some ofther unrelated errors in there lol, but my main concern is trying to display the bitmap.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">6th February 2007 22:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">My ioB.ini file looks like this (sorry couldn't attach it)<br />
      <br />
      [Settings]<br />
      NumFields=5<br />
      <br />
      [Field 1]<br />
      Type=RadioButton<br />
      Text=Camera1<br />
      Left=10<br />
      Right=-1<br />
      Top=0<br />
      Bottom=10<br />
      <br />
      [Field 2]<br />
      Type=RadioButton<br />
      Text=Camera2<br />
      Left=0<br />
      Right=-1<br />
      Top=10<br />
      Bottom=40<br />
      <br />
      [Field 3]<br />
      Type=RadioButton<br />
      Text=Camera3<br />
      Left=0<br />
      Right=-1<br />
      Top=40<br />
      Bottom=70<br />
      <br />
      [Field 4]<br />
      Type=RadioButton<br />
      Text=Camera4<br />
      Left=0<br />
      Right=-1<br />
      Top=70<br />
      Bottom=100<br />
      <br />
      [Field 5]<br />
      Type=Bitmap<br />
      Left=50<br />
      Right=-1<br />
      Top=0<br />
      Bottom=10</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th February 2007 22:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Attach ioB.ini as well.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">6th February 2007 22:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The image is overlapping all of the other controls. Try using Top=100 for the image. You should use a GUI editor like HM NIS's and EclipseNSIS's to edit IntsallOptions dialogs. It's much easier that way.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">7th February 2007 14:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tried it at 100, still nothing. I'm still concerned that my nothing is being written to my ioB.ini file. Even if the numbers, paths, or file names are wrong, it should still have been written to the ioB.ini file. Unless I'm misinterpreting what either Write command does. I will look at the 2 GUI editors, but I'm afraid they won't solve the write issue.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Backland</span><br />
      <span class="post-time small text-muted">7th February 2007 15:13 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Just open the ioB.ini file in $PLUGSINSDIR with a call to ExecShell after you finish writing to it, then you should see what it looks like right before you pass it to IO.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Fuzzybunny</span><br />
      <span class="post-time small text-muted">7th February 2007 15:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok so for reasons unknown to me, after i tried the HM NIS editor for the ioB.ini file, my bmp showed up. The only difference that i see is that it did this:<br />
      <br />
      [Field 5]<br />
      Type=Bitmap<br />
      Text=Bitmap<br />
      <br />
      where before I used the Text parameter for the path of the Bitmap as per documention. Thanks for the help everyone. Can someone explain to me as to why Text should be Bitmap and not the path?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">8th February 2007 20:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It shouldn't. It should be the path to the image when InstallOptions loads. Something else must be different.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
