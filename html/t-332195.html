<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to detect if a Text field is filled"><title>How to detect if a Text field is filled - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">How to detect if a Text field is filled</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332195">How to detect if a Text field is filled</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Doursin</span><br><span class="post-time small text-muted">6th July 2011 16:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>How to detect if a Text field is filled</strong><br>Hello,<br><br>I would like to enable Next button only if every text field is filled:<br><br></p><blockquote><br>Function Veto1<br><br>!insertmacro MUI_HEADER_TEXT "Information" $(InfoUser)<br><br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br><br>nsDialogs::Create 1018<br>Pop $Dialog<br><br>${If} $Dialog == error<br>Abort<br><br>${EndIf}<br><br>${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br>Pop $Label<br><br>${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br>Pop $Text<br>${NSD_SetTextLimit} $Text 25<br>${NSD_setFocus} $Text<br><br>${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br>Pop $Label3<br><br>${NSD_CreateText} 0 35u 100u 12u $C_Service<br>Pop $Text3<br>${NSD_SetTextLimit} $Text3 40<br><br>${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br>Pop $Label4<br><br>${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br>Pop $Text4<br>${NSD_SetTextLimit} $Text4 55<br><br>${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br>Pop $Label1<br><br>${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br>Pop $Text1<br>${NSD_SetTextLimit} $Text1 80<br><br>${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br>Pop $Label2<br><br>${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br>Pop $Text2<br>${NSD_SetTextLimit} $Text2 80<br><br>nsDialogs::Show<br><br><br>FunctionEnd<br><br>Function Veto1Leave<br><br>StrCmp $Text "" -1 0<br>StrCmp $Text1 "" -2 0<br>StrCmp $Text3 "" -3 0<br>StrCmp $Text4 "" -4 0<br>EnableWindow $0 1<br><br>${NSD_GetText} $Text $C_Clinique<br>${NSD_GetText} $Text1 $C_Adresse1<br>${NSD_GetText} $Text2 $C_Adresse2<br>${NSD_GetText} $Text3 $C_Service<br>${NSD_GetText} $Text4 $C_NomVets<br><br><br>FunctionEnd<br></blockquote>Do I have to make an .INI file or am I on the good way to do it ?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">6th July 2011 17:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">First, disable the Next button before you nsDialogs::Show. Then add OnChange macros for every text field, which all refer to the same function. Make this function check the contents of all fields (gettext macro), and then depending on their contents:<br>${If} $Field1 != ""<br>${AndIf} $Field2 != ""<br>...<br>${AndIf} $FieldLast != ""<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 1<br>${Else}<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br>${EndIf}<br><br>That's all.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jpderuiter</span><br><span class="post-time small text-muted">6th July 2011 22:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">And of course you first need to call NSD_GetText and then check its value</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">7th July 2011 06:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, that's what I said. :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Doursin</span><br><span class="post-time small text-muted">8th July 2011 11:45 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks you !<br>It works well.<br>I let the new script below :<br><br></p><blockquote><br>Function Veto1<br><br>!insertmacro MUI_HEADER_TEXT "Information" $(InfoUser)<br><br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br><br>nsDialogs::Create 1018<br>Pop $Dialog<br><br>${If} $Dialog == error<br>Abort<br><br>${EndIf}<br><br>${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br>Pop $Label<br><br>${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br>Pop $Text<br>${NSD_SetTextLimit} $Text 25<br>${NSD_setFocus} $Text<br>${NSD_OnChange} $Text Fd_Filled<br><br>${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br>Pop $Label3<br><br>${NSD_CreateText} 0 35u 100u 12u $C_Service<br>Pop $Text3<br>${NSD_SetTextLimit} $Text3 40<br>${NSD_OnChange} $Text3 Fd_Filled<br><br><br>${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br>Pop $Label4<br><br>${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br>Pop $Text4<br>${NSD_SetTextLimit} $Text4 55<br>${NSD_OnChange} $Text4 Fd_Filled<br><br>${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br>Pop $Label1<br><br>${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br>Pop $Text1<br>${NSD_SetTextLimit} $Text1 80<br>${NSD_OnChange} $Text1 Fd_Filled<br><br>${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br>Pop $Label2<br><br>${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br>Pop $Text2<br>${NSD_SetTextLimit} $Text2 80<br>${NSD_OnChange} $Text2 Fd_Filled<br><br>nsDialogs::Show<br><br>FunctionEnd<br><br>Function Fd_Filled<br><br>${NSD_GetText} $Text $C_Clinique<br>${NSD_GetText} $Text1 $C_Adresse1<br>${NSD_GetText} $Text2 $C_Adresse2<br>${NSD_GetText} $Text3 $C_Service<br>${NSD_GetText} $Text4 $C_NomVets<br><br>${If} $C_Clinique == ""<br>${OrIf} $C_Adresse1 == ""<br>${OrIf} $C_Adresse2 == ""<br>${OrIf} $C_Service == ""<br>${OrIf} $C_NomVets == ""<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br>${Else}<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 1<br>${EndIf}<br><br>FunctionEnd</blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Doursin</span><br><span class="post-time small text-muted">8th July 2011 11:48 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you for reply !<br>I let my new script below :<br></p><blockquote><br>Function Veto1<br><br>!insertmacro MUI_HEADER_TEXT "Information" $(InfoUser)<br><br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br><br>nsDialogs::Create 1018<br>Pop $Dialog<br><br>${If} $Dialog == error<br>Abort<br><br>${EndIf}<br><br>${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br>Pop $Label<br><br>${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br>Pop $Text<br>${NSD_SetTextLimit} $Text 25<br>${NSD_setFocus} $Text<br>${NSD_OnChange} $Text Fd_Filled<br><br>${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br>Pop $Label3<br><br>${NSD_CreateText} 0 35u 100u 12u $C_Service<br>Pop $Text3<br>${NSD_SetTextLimit} $Text3 40<br>${NSD_OnChange} $Text3 Fd_Filled<br><br><br>${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br>Pop $Label4<br><br>${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br>Pop $Text4<br>${NSD_SetTextLimit} $Text4 55<br>${NSD_OnChange} $Text4 Fd_Filled<br><br>${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br>Pop $Label1<br><br>${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br>Pop $Text1<br>${NSD_SetTextLimit} $Text1 80<br>${NSD_OnChange} $Text1 Fd_Filled<br><br>${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br>Pop $Label2<br><br>${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br>Pop $Text2<br>${NSD_SetTextLimit} $Text2 80<br>${NSD_OnChange} $Text2 Fd_Filled<br><br>nsDialogs::Show<br><br><br>FunctionEnd<br><br>Function Fd_Filled<br><br>${NSD_GetText} $Text $C_Clinique<br>${NSD_GetText} $Text1 $C_Adresse1<br>${NSD_GetText} $Text2 $C_Adresse2<br>${NSD_GetText} $Text3 $C_Service<br>${NSD_GetText} $Text4 $C_NomVets<br><br>${If} $C_Clinique == ""<br>${OrIf} $C_Adresse1 == ""<br>${OrIf} $C_Adresse2 == ""<br>${OrIf} $C_Service == ""<br>${OrIf} $C_NomVets == ""<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 0<br>${Else}<br>GetDlgItem $0 $HWNDPARENT 1<br>EnableWindow $0 1<br>${EndIf}<br><br>FunctionEnd<br></blockquote></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">8th July 2011 12:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">As already mentioned you need to set up OnChange events for each text box. There's no point disabling the buttons on page leave because that's too late! Personally I just throw an error message in page leave.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Doursin</span><br><span class="post-time small text-muted">11th July 2011 09:35 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">About OnChange events, Didn't I make ? Did I missunderstand ?<br>I didn't copy the page leave because I removed the StrCmp lines but it's clearer in my mind now.<br><br>Thanks Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MSG</span><br><span class="post-time small text-muted">11th July 2011 15:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Yeah, you did it correctly.<br><br>(Although, I just realized you might need to do a 'call Fd_Filled' before you nsDialogs::Show, so that the Next button will not be disabled when the user goes Back from a later page.)</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p></div></div><script src="../js/highlight.pack.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>