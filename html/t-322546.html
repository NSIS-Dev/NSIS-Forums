<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="What does SetRegView do on a 32-bit system?"><title>What does SetRegView do on a 32-bit system? - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">What does SetRegView do on a 32-bit system?</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322546">What does SetRegView do on a 32-bit system?</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">nsnb</span><br><span class="post-time small text-muted">20th September 2010 01:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>What does SetRegView do on a 32-bit system?</strong><br>I know what SetRegView does on a 64-bit system - it is well documented: <a href="http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.7" target="_blank">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.7</a><br><br>But what does it do on a 32-bit system? Is it a NOOP?<br><br>or does it produce unpredictable results and mandates a clause like<br></p><pre>
<code>${If} ${RunningX64}   <br> SetRegView 32<br>${EndIf}</code>
</pre><br>
      <br>
      Also, does SetRegView affect any (or all) of the functions in the Registry plug-in? <a href="http://nsis.sourceforge.net/Registry_plug-in" target="_blank">http://nsis.sourceforge.net/Registry_plug-in</a><br>
      <br>
      Thanks.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">manasi1128</span><br>
      <span class="post-time small text-muted">20th September 2010 08:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I hav used setregview for 64 bit compatible installer.....<br>
      n dere is no need for using SetRegView 32 on 32 bit system.......it is only applicable for 64 bit systems.<br>
      setregview 32 directs ur registry entries to 32 bit registry(i.e wow6432node...(not sure of the exact word.)) on a 64 bit system while setregview 64 directs ur entries to 64 bit registries.... as u might be aware dat dere are 2 branches of registries on 64 bit system...one for 64 bit and one for 32 bit....<br>
      <br>
      ${If} ${RunningX64}<br>
      SetRegView 32 --------------&gt;change this to setregview 64 if u r making an installer for<br>
      64 bit<br>
      ${EndIf}</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th September 2010 09:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It won't do anything on a 32-bit system.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br>
      <span class="post-time small text-muted">20th September 2010 16:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by manasi1128</small><br>
        there is no need for using SetRegView 32 on 32 bit system...
      </blockquote>I know that, but I am writing a <b>single</b> script for both 32-bit and 64-bit systems and I would like to consult the gurus whether an '${If} ${RunningX64}' is necessary.<br>
      <br>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br>
        It won't do anything on a 32-bit system.
      </blockquote>Thanks, so I understand this is by design (just like a macro that evaluates to whitespace when a condition is not met). Do I understand correctly?<br>
      <br>
      Also, do you happen to know whether it affects any of the functions in Registry plug-in? <a href="http://nsis.sourceforge.net/Registry_plug-in" target="_blank">http://nsis.sourceforge.net/Registry_plug-in</a><br>
      <br>
      Empirically, I know what it does on my system but it's good to get the formal intended behavior by the developers/gurus (and could be helpful for others visiting the forum).<br>
      <br>
      Cheers. :)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th September 2010 17:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">SetRegView simply adds or removes the KEY_WOW64_64KEY flag to the desired SAM access to be used when NSIS calls the RegCreateKeyEx, RegOpenKeyEx etc API's. As this flag was added on XP x64 it will simply be ignored on older OS's or 32-bit OS's. For NSIS plug-ins, the extra_parameters-&gt;g_exec_flags-&gt;alter_reg_view field will be set to KEY_WOW64_64KEY if the calling script used SetRegView 64. The plug-in would need to use this field accordingly. I do not know if the Registry plug-in does this, but if not it needs to be modified to do so.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br>
      <span class="post-time small text-muted">20th September 2010 18:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Afrow UK</small><br>
        SetRegView simply adds or removes the KEY_WOW64_64KEY flag to the desired SAM access to be used when NSIS calls the RegCreateKeyEx, RegOpenKeyEx etc API's. As this flag was added on XP x64 it will simply be ignored on older OS's or 32-bit OS's. For NSIS plug-ins, the extra_parameters-&gt;g_exec_flags-&gt;alter_reg_view field will be set to KEY_WOW64_64KEY if the calling script used SetRegView 64. The plug-in would need to use this field accordingly. I do not know if the Registry plug-in does this, but if not it needs to be modified to do so.
      </blockquote>This is incredible information. Thanks so much!<br>
      <br>
      I happened to be enhancing the Registry plug-in <a href="http://forums.winamp.com/showpost.php?p=2484404&amp;postcount=7" target="_blank">back then</a>, so I can tell you that it doesn't access <b>extra_parameters-&gt;g_exec_flags-&gt;alter_reg_view</b> in any way. Still, for some reason, the Registry plug-in seems to be working fine for me on both 64-bit and 32-bit systems (without any modification).
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th September 2010 19:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It will work, sure, but I'm pretty sure registry access will always be redirected from e.g. HKEY_LOCAL_MACHINE\SOFTWARE to HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node unless KEY_WOW64_64KEY is used.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>