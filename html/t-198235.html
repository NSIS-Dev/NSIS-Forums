<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Comparing Version numbers" />

  <title>Comparing Version numbers - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Comparing Version numbers</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=198235">Comparing Version numbers</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">3rd November 2004 16:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Comparing Version numbers</strong><br />
      I want to compare two version numbers (e.g. 1.5 compared to 1.5.1). Easiest way to do that would seem to be to simply strip out the .s (giving 15 vs 151) then compare the two as integers.<br />
      <br />
      How do I strip out the .s?<br />
      <br />
      Thanks!<br />
      <br />
      Rob</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">3rd November 2004 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Bearing in mind the two numbers have to be the same length before I can do that, of course...:) 16 vs 151 (1.6 vs 1.5.1) is not a planned alternative :)<br />
      <br />
      In fact if any other solutions spring to mind they'd be helpfully received, thanks!<br />
      <br />
      Rob</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">3rd November 2004 16:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=34" target="_blank">http://nsis.sourceforge.net/archive/nsisweb.php?page=34</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">3rd November 2004 16:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Lifesaver thanks. Sorry I didn't look hard enough I'm bloomin knackered today!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">8th November 2004 10:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Also, I've just found that it thinks that version 6 is a lower version than version 6.0. That's not the most helpful behaviour in the world, and unfortunately I don't have the scripting skill to change it myself...can anyone help?<br />
      <br />
      Cheers<br />
      <br />
      -rob-</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th November 2004 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The code looks bad, and I know of a better way to do version comparisons which would definately always work.<br />
      <br />
      Let me write you a function, will take maybe an hour at most.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">8th November 2004 18:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok, here it is. I've tested it a lot and it works perfectly.<br />
      <br />
      <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=643" target="_blank">http://nsis.sourceforge.net/archive/...b.php?page=643</a><br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">9th November 2004 09:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fantastic, thanks! I'll try it out now.<br />
      <br />
      -rob-<br />
      <br />
      P.S. wow I'm mentioned in the archive I'm famous! :D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">23rd November 2004 10:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">P.S. guys just so's you know, if you want to detect the Java version number you have to:<br />
      a) Look under HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion<br />
      b) Take that previous value, look under the subkey of the same name and append to said value the value of "MicroVersion" under that subkey.<br />
      <br />
      E.g. HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion is "1.4"<br />
      <br />
      So look for HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion\1.4\MicroVersion, say that is 1.<br />
      <br />
      So the actual version of the current Java install is 1.4.1, NOT 1.4!<br />
      <br />
      Just thought that might help someone at some point...:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">23rd November 2004 10:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">And that behaviour is documented here: <a href="http://java.sun.com/j2se/1.3/runtime_win32.html" target="_blank">http://java.sun.com/j2se/1.3/runtime_win32.html</a>.<br />
      <br />
      This info also applies to the JDK, so someone might wanna update the "Detecting the JDK version" archive docs (<a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=162&amp;instances=0,110" target="_blank">http://nsis.sourceforge.net/archive/...nstances=0,110</a>.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">23rd November 2004 11:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Equally, <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=543&amp;instances=0,110" target="_blank">http://nsis.sourceforge.net/archive/...nstances=0,110</a> seems to be incorrect.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">23rd November 2004 19:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">JDK is not the same as JRE. The first Archive page does what it says it does. I haven't looked at the second one.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">24th November 2004 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I agree that JDK isn't the same as JRE, hence my mentioning them separately. The archive page says that it will set $1 to the current version, which it does not currently do properly.<br />
      <br />
      Sorry for any inconvenience caused by me pointing this stuff out, thought it might help.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">24th November 2004 12:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Updated JDK detection attached.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">24th November 2004 12:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I can update the Runtime one as well (which currently kinda does it right but in a slightly roundabout way) using the proper version number comparison (so 1.4 = 1.4.0 etc), if you like.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">25th November 2004 17:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I don't think it's a good idea to append the minor version of the JRE to the JDK. As for the second example, you can create your own Archive page that uses the registry to get the version. Everyone can create an Archive page.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">26th November 2004 08:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">OK, that sounds cool, I'll make an archive page if/when I get some time.<br />
      <br />
      Also I am of course talking about the JDK Microversion Registry entry, not the JRE Microversion.<br />
      <br />
      E.g. on this machine HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Development Kit\CurrentVersion is 1.4, and HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Development Kit\1.4\Microversion is 2.<br />
      <br />
      So the JDK version is 1.4.2. Incidentally the JRE version on here is 1.5.0.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">26th November 2004 09:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The script you've attached reads the minor version from the JRE and the rest from the JDK.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">RobGrant</span><br />
      <span class="post-time small text-muted">26th November 2004 10:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Fair play, didn't notice that cos I adapted it from another script. The overall point I was making was not that specifically my script should be used but that the archive page should be changed...</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
