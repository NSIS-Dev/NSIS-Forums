<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="${NSD_CreateNumber} with up/down arrows (aka &quot;spin control&quot;) possible?" />

  <title>${NSD_CreateNumber} with up/down arrows (aka "spin control") possible? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">${NSD_CreateNumber} with up/down arrows (aka "spin control") possible?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318485">${NSD_CreateNumber} with up/down arrows (aka "spin control") possible?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">18th April 2010 17:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>${NSD_CreateNumber} with up/down arrows (aka "spin control") possible?</strong><br />
      I have been trying to find some information on what's known in MFC as "spin control" but I couldn't find any.<br />
      <br />
      Is there a different name for it, or this simply is not supported yet in nsDialogs?<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Wizou</span><br />
      <span class="post-time small text-muted">18th April 2010 17:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Not yet supported.<br />
      Here is what I come up with to add support:<br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_WRAP0x0001<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_SETBUDDYINT0x0002<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ALIGNRIGHT0x0004<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ALIGNLEFT0x0008<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_AUTOBUDDY0x0010<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ARROWKEYS0x0020<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_HORZ0x0040<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_NOTHOUSANDS0x0080<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_HOTTRACK0x0100<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">define__NSD_UpDown_CLASSmsctls_updown32<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">define__NSD_UpDown_STYLE</span><span style="color: #007700">${</span><span style="color: #0000BB">DEFAULT_STYLES</span><span style="color: #007700">}|${</span><span style="color: #0000BB">UDS_ARROWKEYS</span><span style="color: #007700">}|${</span><span style="color: #0000BB">UDS_AUTOBUDDY</span><span style="color: #007700">}<br />
      !</span><span style="color: #0000BB">define__NSD_UpDown_EXSTYLE0<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacro__NSD_DefineControlUpDown<br /></span></span> <!-- php buffer end -->
      <hr />
      then try creating a UpDown control with nsDialogs just after your edit field<br />
      <br />
      Note: I didn't test this.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">18th April 2010 19:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wizou's ${NSD_CreateUpDown} code works fine. Just keep in mind that NSD_OnClick and _OnChange will do nothing for the UpDown control, so set _OnChange up on its buddy control (typically a ${NSD_CreateText}) instead.<br />
      <br />
      You may also want to set up some sane range (the default is inverted, for one) and a default value:<br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">!</span><span style="color: #0000BB">defineUDM_SETRANGE0x0465<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDM_SETPOS320x0471<br />
      <br /></span><span style="color: #007700">***91;...***93;<br />
      ${</span><span style="color: #0000BB">NSD_CreateText</span><span style="color: #007700">}</span><span style="color: #0000BB">005016</span><span style="color: #DD0000">"0"<br /></span><span style="color: #0000BB">Pop$UpDownBuddy<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateUpDown</span><span style="color: #007700">}</span><span style="color: #0000BB">5004816</span><span style="color: #DD0000">""<br /></span><span style="color: #0000BB">Pop$UpDown<br />
      SendMessage$UpDown</span><span style="color: #007700">${</span><span style="color: #0000BB">UDM_SETRANGE</span><span style="color: #007700">}</span><span style="color: #0000BB">0100</span><span style="color: #007700">;</span><span style="color: #0000BB">minmax<br />
      SendMessage$UpDown</span><span style="color: #007700">${</span><span style="color: #0000BB">UDM_SETPOS32</span><span style="color: #007700">}</span><span style="color: #0000BB">050</span><span style="color: #007700">;</span><span style="color: #0000BB">0value<br />
      <br /></span><span style="color: #007700">;</span><span style="color: #0000BB">SettinguptheOnChangecallbackheretopreventUpDownfromtriggeringitoncreation<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_OnChange</span><span style="color: #007700">}</span><span style="color: #0000BB">$UpDownBuddycustom</span><span style="color: #007700">.</span><span style="color: #0000BB">updownbuddy</span><span style="color: #007700">.</span><span style="color: #0000BB">onchange<br /></span></span> <!-- php buffer end -->
      <hr />
      If you do use a Buddy control, you might also have to do some sanity checking yourself. E.g. you can enter a value in the Text control that is outside of the UpDown control's range.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">26th September 2010 14:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Wizou and Animaether, thanks for your replies. I tried implementing your code. It displays very well, but when I click the up/down arrows, nothing changes in the buddy. Any idea what could be missing?<br />
      <br />
      Here is my code:<br />
      <br />
      PHP Code:</p>
      <hr />
      <code style="white-space:nowrap"><!-- php buffer start --></code><span style="color: #000000"><span style="color: #007700">Var</span><span style="color: #0000BB">hUpDown<br /></span><span style="color: #007700">Var</span><span style="color: #0000BB">hUpDownBuddy<br /></span><span style="color: #007700">Var</span><span style="color: #0000BB">varUpDownToMM<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDM_SETRANGE0x0465<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDM_SETPOS320x0471<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDM_GETPOS320x0472<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_WRAP0x0001<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_SETBUDDYINT0x0002<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ALIGNRIGHT0x0004<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ALIGNLEFT0x0008<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_AUTOBUDDY0x0010<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_ARROWKEYS0x0020<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_HORZ0x0040<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_NOTHOUSANDS0x0080<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">defineUDS_HOTTRACK0x0100<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">define__NSD_UpDown_CLASSmsctls_updown32<br /></span><span style="color: #007700">!</span><span style="color: #0000BB">define__NSD_UpDown_STYLE</span><span style="color: #007700">${</span><span style="color: #0000BB">DEFAULT_STYLES</span><span style="color: #007700">}|${</span><span style="color: #0000BB">UDS_ARROWKEYS</span><span style="color: #007700">}|${</span><span style="color: #0000BB">UDS_AUTOBUDDY</span><span style="color: #007700">}<br />
      !</span><span style="color: #0000BB">define__NSD_UpDown_EXSTYLE0<br />
      <br /></span><span style="color: #007700">!</span><span style="color: #0000BB">insertmacro__NSD_DefineControlUpDown<br />
      <br /></span><span style="color: #007700">Function</span><span style="color: #0000BB">custom</span><span style="color: #007700">.</span><span style="color: #0000BB">updownbuddy</span><span style="color: #007700">.</span><span style="color: #0000BB">onchange<br />
      SendMessage$hUpDown</span><span style="color: #007700">${</span><span style="color: #0000BB">UDM_GETPOS32</span><span style="color: #007700">}</span><span style="color: #0000BB">00$varUpDownToMM<br />
      FunctionEnd<br />
      <br /></span><span style="color: #007700">Function</span><span style="color: #0000BB">Test<br /></span><span style="color: #007700">***91;...***93;<br />
      ${</span><span style="color: #0000BB">NSD_CreateLabel</span><span style="color: #007700">}</span><span style="color: #0000BB">274u16u12u</span><span style="color: #DD0000">"testtext:"<br /></span><span style="color: #0000BB">Pop$hStaticLabel<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateNumber</span><span style="color: #007700">}</span><span style="color: #0000BB">26u72u24u12u</span><span style="color: #DD0000">"2"<br /></span><span style="color: #0000BB">Pop$hUpDownBuddy<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_CreateUpDown</span><span style="color: #007700">}</span><span style="color: #0000BB">50u72u24u12u</span><span style="color: #DD0000">""<br /></span><span style="color: #0000BB">Pop$hUpDown<br />
      SendMessage$hUpDown</span><span style="color: #007700">${</span><span style="color: #0000BB">UDM_SETRANGE</span><span style="color: #007700">}</span><span style="color: #0000BB">023</span><span style="color: #007700">;</span><span style="color: #0000BB">minmax<br />
      SendMessage$hUpDown</span><span style="color: #007700">${</span><span style="color: #0000BB">UDM_SETPOS32</span><span style="color: #007700">}</span><span style="color: #0000BB">050</span><span style="color: #007700">;</span><span style="color: #0000BB">0value<br />
      <br /></span><span style="color: #007700">;</span><span style="color: #0000BB">SettinguptheOnChangecallbackheretopreventUpDownfromtriggeringitoncreation<br /></span><span style="color: #007700">${</span><span style="color: #0000BB">NSD_OnChange</span><span style="color: #007700">}</span><span style="color: #0000BB">$hUpDownBuddycustom</span><span style="color: #007700">.</span><span style="color: #0000BB">updownbuddy</span><span style="color: #007700">.</span><span style="color: #0000BB">onchange<br />
      <br /></span><span style="color: #007700">***91;...***93;<br /></span><span style="color: #0000BB">FunctionEnd<br /></span></span> <!-- php buffer end -->
      <hr />
      Isn't the associated buddy supposed to change automatically upon clicking an up/down arrow? (otherwise it wouldn't have been called a buddy, right?)<br />
      <br />
      There is something I am missing here but I don't know what it is. Any idea?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">26th September 2010 14:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have forgotten to include ${UDS_SETBUDDYINT} in your updown control's style.<br />
      <br /></p>

      <blockquote>
        <b>UDS_SETBUDDYINT</b><br />
        <br />
        Causes the up-down control to set the text of the buddy window (using the WM_SETTEXT message) when the position changes. The text consists of the position formatted as a decimal or hexadecimal string.
      </blockquote>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">26th September 2010 15:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Animaether</small><br />
        You have forgotten to include ${UDS_SETBUDDYINT} in your updown control's style.
      </blockquote>You were right on the money. Thank you Animaether.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">27th September 2010 19:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have added a section to the nsDialogs FAQ, where you can also grab the correct method of handling UpDown control interaction:<br />
      <a href="http://nsis.sourceforge.net/mediawiki/index.php?title=NsDialogs_FAQ&amp;action=submit#How_to_detect_UpDown_control_interaction" target="_blank">http://nsis.sourceforge.net/mediawik...ol_interaction</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">nsnb</span><br />
      <span class="post-time small text-muted">27th September 2010 19:43 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <small>Originally posted by Animaether</small><br />
        I have added a section to the nsDialogs FAQ, where you can also grab the correct method of handling UpDown control interaction:<br />
        <a href="http://nsis.sourceforge.net/mediawiki/index.php?title=NsDialogs_FAQ&amp;action=submit#How_to_detect_UpDown_control_interaction" target="_blank">http://nsis.sourceforge.net/mediawik...ol_interaction</a>
      </blockquote>Animaether, you rock! Thank you very much.<br />
      <br />
      Now, it would be nice to have the same for the Date and Time Picker :)<br />
      <br />
      <a href="http://msdn.microsoft.com/en-us/library/bb761727%28v=VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/libr...=VS.85%29.aspx</a>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">27th September 2010 20:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'll leave that as an exercise for the reader ;)<br />
      ( and another thread )</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">27th September 2010 22:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">silly wiki link goes to an edit page.. figures.<br />
      <br />
      here's a regular link: <a href="http://nsis.sourceforge.net/mediawiki/index.php?title=NsDialogs_FAQ#How_to_detect_UpDown_control_interaction" target="_blank">http://nsis.sourceforge.net/mediawik...ol_interaction</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br />
      <span class="post-time small text-muted">1st October 2010 19:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nsnb - what did you need that DateTime control for?<br />
      <br />
      I'm miraculously finding myself with a project where I might end up using it ( you must have jynxed me ;) ).. so I've got all of the important bits going.. but plan on finishing it up into a user-friendly and global variables-eating header file as the bugger is fairly extensive in messages/notifications bits.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
