<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Control script with arguments"><title>Control script with arguments - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Control script with arguments</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286886">Control script with arguments</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Ema</span><br><span class="post-time small text-muted">14th February 2008 17:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Control script with arguments</strong><br>Hi all,<br>Don't know if this is feasible,<br>I'd like to change the setup executable generation acording to some input variable.<br><br>Let's say when launching the setup generation<br>makensis.exe myscript.nsi myPar<br><br>if myPar is equal to ADD_WELCOME<br>I would like to generate the setup adding the following line:<br><br>!define MUI_FINISHPAGE_SHOWREADME "http://www.test.com"<br>!define MUI_FINISHPAGE_SHOWREADME_TEXT "Welcome"<br><br>Hope I wasn't too confusing.<br>Thanks for any help</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br><span class="post-time small text-muted">14th February 2008 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">have a look at the /D switch for makensis<br><br><a href="http://nsis.sourceforge.net/Docs/Chapter3.html#3.1.1" target="_blank">http://nsis.sourceforge.net/Docs/Chapter3.html#3.1.1</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Ema</span><br><span class="post-time small text-muted">14th February 2008 17:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thanks for answering<br><br>From the docs it's no t clear to me how to use it, it seems it's used only to set the $INSTDIR.<br><br>installer.exe /D=C:\Program Files\NSIS<br><br>And then I don't know if I can use to comment/uncomment lines in NSIS<br><br>something like<br><br>if !isdefined(Myvar)<br>{<br>!define MUI_FINISHPAGE_SHOWREADME "http://www.test.com"<br>!define MUI_FINISHPAGE_SHOWREADME_TEXT "Welcome"<br>}<br><br>Thanks again</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th February 2008 17:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">You're looking at the wrong "/D". Yathosho was referring to section 3.1 and not section 3.2. The first section describes command line arguments passed to the compiler while the second describes those passed to the installer itself.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Ema</span><br><span class="post-time small text-muted">14th February 2008 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">sorry, next time I'll read more carefully<br><br>still I don't know how to then use this inside the script to select or unselect lines of code, like the welcome page.<br><br>thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Ema</span><br><span class="post-time small text-muted">14th February 2008 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">I found it!<br><br>!ifdef</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">14th February 2008 17:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">It defines constants in the script. If you execute:</p><pre>
<code>makensis /DMYVAR myscript.nsi</code>
</pre>you'll have MYVAR defined in the context of your script and you could then use:<pre>
<code>!ifdef MYVAR<br># something<br>!endif</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jozechu</span><br>
      <span class="post-time small text-muted">21st April 2008 16:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was also confused between compiler defines and installer defines.<br>
      <br>
      But, I've tried a lot of combinations to define a variable from command line but it never make my script works ...<br>
      <br>
      myinstaller /DMYVAR=bla<br>
      <br>
      <br>
      !ifdef MYVAR<br>
      !define BASE_DIR "${MYVAR}"<br>
      !else<br>
      !define BASE_DIR "C:\default"<br>
      !endif<br>
      <br>
      I'm missing something?</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>