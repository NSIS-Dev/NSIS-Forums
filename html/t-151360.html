<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="NSIS Logic Library"><title>NSIS Logic Library - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">NSIS Logic Library</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=151360">NSIS Logic Library</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">3rd October 2003 15:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>NSIS Logic Library</strong><br>&nbsp; Hey, Here is another library to simplify the creation of your installs. This is the result of the previous post entitled "Select Statements". Thanks to eccles I have been able to completely rewrite it with improved functionality and speed.<br><br>Here is a list of the available statements:<br><br>if..elseif..else..endif<br>ifthen..|..|<br>ifcmd..||..|<br>select..case..case2..case3..case4..case5..case_else..endselect<br>for..exitfor..next<br>foreach..exitfor..next<br>do..exitdo..loop<br>dountil..exitdo..loop<br>do..exitdo..loopuntil<br>while..exitwhile..endwhile<br><br>Have a look at the provided example.nsi for working examples of the library. Once I get some feed back on possible changes or improvements then I will post it in the archive.<br><br>Don</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">eccles</span><br><span class="post-time small text-muted">3rd October 2003 19:37 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hey Don, check your private messages...!<br><br>Dave.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dselkirk</span><br><span class="post-time small text-muted">5th October 2003 23:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Version 2.1 adds break and continue labels to repeat type statements. Useful for functions like MessageBox, here is an example:<br><br></p><pre>
<code><br>  ${do}<br>    MessageBox MB_YESNO "Stop loop?" IDYES ${_break} ID_NO ${_continue}<br>  ${loop}<br></code>
</pre><br>
      <br>
      Thanks to eccles for the idea.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">7th October 2003 01:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Damn, that's so cool! :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">7th October 2003 13:56 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Don, I've made a couple of changes for your perusal.</p>

      <ul>
        <li>Simplified IfThen by utilising If and EndIf</li>

        <li>Maybe something similar could be done with IfCmd but I've not investigated this yet</li>

        <li>Simplified For by utilising ForEach</li>

        <li>Fixed ForEach missing the final iteration</li>

        <li>Fixed a couple of Break/Continue bugs</li>
      </ul>You've added some code to the If {ElseIf} [Else] EndIf code (ElseIf labels) that I don't understand - I'm not sure that they are needed?<br>
      <br>
      Anyway, looking good! Should help newcommers to NSIS no end :)<br>
      <br>
      --<br>
      Dave.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dselkirk</span><br>
      <span class="post-time small text-muted">7th October 2003 14:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Good work on the consolidation and fixes. I especially love your solution for the operation comparison in the foreach statement. Very nice. What were the issues with the break and continue labels? For the if..then statments I had to add some extra lines to handle just an if..else..endif statements. When I had something like the foloowing:<br></p>
      <pre>
<code><br>${if} 1 = 5<br>  MessageBox MB_OK "test1"<br>${else}<br>  MessageBox MB_OK "test2"<br>${endif}<br></code>
</pre><br>
      Both messages would appear. It wasn't moving to the end. Here it is again with the updated file header.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">7th October 2003 16:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by dselkirk</i><br>
        I especially love your solution for the operation comparison in the foreach statement.
      </blockquote>Heh, you have to jump through some hoops sometimes to get NSIS to do what you want, but it's not often impossible.<br>

      <blockquote>
        What were the issues with the break and continue labels?
      </blockquote>Either For or ForEach was not setting them (I forget which) and a couple of places were pushing them instead of popping them (IIRC...).<br>

      <blockquote>
        <pre>
<code><br>${if} 1 = 5<br>  MessageBox MB_OK "test1"<br>${else}<br>  MessageBox MB_OK "test2"<br>${endif}<br></code>
</pre><br>
        Both messages would appear.
      </blockquote>Ah, OK fair enough. :)<br>
      <br>
      --<br>
      Dave.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fraefel</span><br>
      <span class="post-time small text-muted">7th October 2003 21:15 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi eccles &amp; dselkirk!<br>
      <br>
      You are amazing - very nice job done !<br>
      This is going to save quite some lines of script...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">11th December 2003 00:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS LogicLib Version 2.3</p>

      <ul>
        <li>Much reworking and refactoring of things to help reduce duplication, etc. E.g. all loop varieties now go through a common set of macros.</li>

        <li>Added built-in support for the rest of NSIS's built-in conditional tests (Abort, Errors, FileExists, RebootFlag, Silent).</li>

        <li>Added ability to use any NSIS conditional command in a normal If type statement (no longer restricted to the specialised IfCmd statement).</li>

        <li>Optimised the code produced by If (fewer Goto's).</li>

        <li>Added statement similar to If that works in reverse: "Unless" executes the code in the contained block if the condition is false. If, Unless, ElseIf, ElseUnless, EndIf and EndUnless can be used freely in any combination.</li>

        <li>Fixed bug where using Continue in a Do..LoopUntil loop went to the top of the loop and not the loop condition.</li>

        <li>Added DoWhile..Loop and Do..LoopWhile loop varieties (the existing While..EndWhile loop is still available and is identical to DoWhile..Loop).</li>

        <li>Optimised the code produced by Select (fewer Goto's).</li>

        <li>Renamed Case_Else to CaseElse (nothing else has an underscore so why should that one). The old name is still available too though (if you must).</li>

        <li>CaseElse can also be called Default (for the C-minded).</li>
      </ul>More changes are in the pipeline and LogicLib should be included in the standard NSIS distribution by the next NSIS release.<br>
      <br>
      Enjoy!<br>
      <br>
      --<br>
      Dave.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">13th December 2003 16:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS LogicLib Version 2.4</p>

      <ul>
        <li>Added Switch..Case*/Default..EndSwitch: similar to Select but behaves just like the C version. I.e.:<br>
        - Each Case is more like a label than a block so execution "falls through" unless you use Break.<br>
        - CaseElse (or Default) does not have to be the final case.<br>
        - Case*/Default can appear anywhere inside the Switch (e.g. inside an If inside the Switch).<br>
        (With thanks to kichik for the idea and proof-of-concept model).</li>

        <li>Added unsigned integer comparisons U&lt;, U&gt;=, U&gt; and U&lt;=.</li>

        <li>Added 64-bit integer comparisons L=, L&lt;&gt;, L&lt;, L&gt;=, L&gt; and L&lt;= (these use System.dll).</li>

        <li>Added case-sensitive string tests S== and S!= (these use System.dll).</li>

        <li>Added string comparisons (not case sensitive) S&lt;, S&gt;=, S&gt; and S&lt;= (these use System.dll).</li>

        <li>Added section flag tests (SectionIsSelected, etc.) (to use these your script must include sections.nsh).</li>
      </ul>All of the new features can be seen in action in the example script.<br>
      <br>
      --<br>
      Dave.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">13th December 2003 17:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I love it! :D :up:</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CodeSquid</span><br>
      <span class="post-time small text-muted">14th December 2003 11:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Great stuff! Truly amazing! What dou you come up with next? A NSIS compiler written in NSIS? :D<br>
      <br>
      There's only one thing which should be improved:<br>
      Get rid of the ${} around the commands.<br>
      For example by adding a DeclareCommand function to NSIS or something similar. <b>DeclareCommand ${If} If</b> would make the If command available which then works like any of the built-in commands.<br>
      Or another way: Add support for function parameters and get rid of call.<br>
      <br>
      And last but not least: Implicit inclusion of LogicLib.nsh to every script ;)<br>
      <br>
      Keep up the good work!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">14th December 2003 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">These things will become possible when NSIS supports compiler plug-ins.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">CodeSquid</span><br>
      <span class="post-time small text-muted">14th December 2003 13:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Compiler plugins? Whoah, any ETA?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joost Verburg</span><br>
      <span class="post-time small text-muted">14th December 2003 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">NSIS 2.1 :)<br>
      <br>
      NSIS 2.0 has to be finished first.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">14th December 2003 16:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks all for the thanks :D Thanks must also go out to Don (dselkirk) for planting the seed (and the code up to version 2.1 ;)).<br>
      <br>
      LogicLib has now been added to CVS and is included in the nightly snapshots and forthcoming NSIS releases.<br>
      <br>
      I am open to ideas for other improvements and logic tests to encapsulate (such as the section flag tests added in the latest version).</p>

      <blockquote>
        And last but not least: Implicit inclusion of LogicLib.nsh to every script ;)
      </blockquote>nsisconf.nsh :p<br>
      <br>
      --<br>
      Dave.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eccles</span><br>
      <span class="post-time small text-muted">23rd August 2004 14:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">New in CVS: LogicLib v2.5</p>

      <ul>
        <li>AndIf, AndUnless, OrIf, OrUnless added. These can be placed after If, Unless, ElseIf and ElseUnless to add any number of extra conditions. Order of precedence is strictly left-to-right though (or rather, top to bottom).</li>

        <li>Warnings of "unused variable _LOGICLIB_TEMP" are now avoided. When using the features that make use of this variable you will need to add a !define above !include LogicLib.nsh to let LogicLib know in advance. If you forget, a compiler error message will explain what is needed.</li>
      </ul>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">rsegal</span><br>
      <span class="post-time small text-muted">24th August 2004 03:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">eccles this logic library is amazing. I've converted some of my scripts to use it and have been able to eliminate huge chunks of script because of it. Thanks alot man!</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">24th November 2005 01:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">small question... can you not use LogicLib inside of macros with passed variables ?<br>
      e.g.<br>
      <br></p>
      <pre>
!macro someMacro someVar
<br> ${If} ${someVar} == 0
<br>    # do something
<br>  ${EndIf}
<br>!macroend 
<br>&gt;

</pre>Tells me: !insertmacro: macro "_If" requires 4 parameter(s), passed 3!
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">24th November 2005 04:19 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nevermind... it's fine..<br>
      <br>
      The problem is that I'm passing the macro an empty string:<br></p>
      <pre>
<code>
"" 
</code>
</pre>And that throws the error. Apparently because once inside the macro, "" becomes &lt;null&gt;. Weird.<br>
      <br>
      Work-arounds?<br>
      <pre>
!macro someMacro someVar
<br>&gt;${If} "${someVar}" == "0"
<br>  # do something
<br>&gt;${ElseIf} "${someVar}" == ""
<br>  # do something else
<br>&gt;${EndIf}
<br>!macroend 
<br>&gt;

</pre>That would kill any integer checks, though.<br>
      <br>
      <pre>
<code>
"''" 
</code>
</pre>Seems to work - is that the proper way to go about this ?<br>
      <br>
      I'm a bit confused as to why an empty string becomes null if passed to a macro, though. In the latter bit, my string consisting of two quotation marks essentially becomes an empty string? :)
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">24th November 2005 13:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Quoting in the ${If} line is the correct way to get around this. Why would it kill any integer checks?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">24th November 2005 15:55 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">because I'm making the gross assumption that you can't compare a string to an int :x<br>
      <br>
      Thanks for the pointer :)</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">24th November 2005 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">But an integer is a string in NSIS. Commands that require integers automatically convert the string to an integer.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mamilo</span><br>
      <span class="post-time small text-muted">29th November 2006 11:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi,<br>
      i have a question how to use If in the new Logiclib.<br>
      ${If} ${SectionIsSelected} ${CSEC}<br>
      !insertmacro UnSelectSection ${ESEC}<br>
      ${EndIf}<br>
      <br>
      i get an error: "macro "If" requires 3 parameter(s), passed 2!"<br>
      I don't understand</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bholliger</span><br>
      <span class="post-time small text-muted">29th November 2006 21:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi mamilo!<br>
      <br>
      Did you write this code below the<br>
      Section Sec01 CSEC<br>
      declaration?<br>
      <br>
      Cheers<br>
      <br>
      Bruno</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br>
      <span class="post-time small text-muted">1st December 2006 15:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Shouldn't it be this?<br></p>
      <pre>
<code><br>${If} ${CSEC} = ${SectionIsSelected}<br>!insertmacro UnSelectSection ${ESEC}<br>${EndIf}<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">bholliger</span><br>
      <span class="post-time small text-muted">1st December 2006 22:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I think the code is correct.<br>
      <br>
      <a href="http://nsis.sourceforge.net/LogicLib#Expressions" target="_blank">http://nsis.sourceforge.net/LogicLib#Expressions</a><br>
      <br>
      But I believe the define has not yet been created by the compiler and therefore the constant is empty. Put the code below the section declaration.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">phunkydizco</span><br>
      <span class="post-time small text-muted">20th November 2008 14:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">How do I use the OrUnless Statement correctly? I want to do something when one of two sections is selected. Here is my code that doesn't work:<br></p>
      <pre>
<code>SectionGetFlags ${SEC02} $R0<br>Intop $R1 $R0 | 1<br>SectionGetFlags ${SEC03} $R2<br>Intop $R3 $R2 | 1<br>${Unless} $R0 &lt;&gt; $R1 ${OrUnless} $R2 &lt;&gt; $R3<br>  Do Something<br>${EndUnless}<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Anders</span><br>
      <span class="post-time small text-muted">20th November 2008 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">only one "if" statement per line</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">phunkydizco</span><br>
      <span class="post-time small text-muted">20th November 2008 14:50 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Is this correct?<br></p>
      <pre>
<code>SectionGetFlags ${SEC02} $R0<br>Intop $R1 $R0 | 1<br>SectionGetFlags ${SEC03} $R2<br>Intop $R3 $R2 | 1<br>${Unless} $R0 &lt;&gt; $R1<br>${OrUnless} $R2 &lt;&gt; $R3<br>  Do Something<br>${EndUnless}<br></code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th November 2008 17:40 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can just use the ${If} ${SectionIsSelected} ... ${OrIf} ${SectionIsSelected} ...<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Animaether</span><br>
      <span class="post-time small text-muted">20th November 2008 18:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">besides what Afrow said - yes, that'd be correct :)<br>
      'd still go with what Afrow said, though :D</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">phunkydizco</span><br>
      <span class="post-time small text-muted">20th November 2008 18:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Afrow UK</i><br>
        <b>You can just use the ${If} ${SectionIsSelected} ... ${OrIf} ${SectionIsSelected} ...<br>
        <br>
        Stu</b>
      </blockquote>That is not a good idea. Because with your code I have to copy my "Do Something" code twice.<br>
      <br>
      ${Unless} $R0 &lt;&gt; $R1<br>
      ${OrUnless} $R2 &lt;&gt; $R3<br>
      Do Something<br>
      ${EndUnless}<br>
      <br>
      This seems to work and is very short.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th November 2008 19:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Why?<br>
      <br>
      ${If} ${SectionIsSelected} ${SEC02}<br>
      ${OrIf} ${SectionIsSelected} ${SEC03}<br>
      ...<br>
      ${EndIf}<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">phunkydizco</span><br>
      <span class="post-time small text-muted">20th November 2008 19:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">That's right I didn't see that. But my code is also ok?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">20th November 2008 23:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">It may work but the proper logic is to check if ${SF_SELECTED} (1) is set:<br>
      <br>
      SectionGetFlags ${SEC02} $R0<br>
      IntOp $R0 $R0 &amp; ${SF_SELECTED}<br>
      ${If} $R0 != 0<br>
      ...<br>
      <br>
      This is what ${If} ${SectionIsSelected} ${SEC02} would be doing internally.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">phunkydizco</span><br>
      <span class="post-time small text-muted">21st November 2008 07:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What does this line?<br>
      <br>
      IntOp $R0 $R0 &amp; ${SF_SELECTED}</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">o___O</span><br>
      <span class="post-time small text-muted">8th March 2011 08:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There's a replacement macro for ${FileExists} in the Wiki, but it doesn't work with ${IfNot} or ${Unless}.<br>
      <br>
      <a href="http://nsis.sourceforge.net/LogicLib" target="_blank">http://nsis.sourceforge.net/LogicLib</a><br>
      <br></p>

      <blockquote>
        FileExists<br>
        <br>
        The ${FileExists} condition included in LogicLib will evaluate to true if what exists is actually a directory. I suggest you add the following macros to your script (right after including LogicLib.nsh):<br>
        !macro _FileExists2 _a _b _t _f<br>
        StrCmp `${_b}` `` `${_f}` 0<br>
        IfFileExists `${_b}` `0` `${_f}` ;returns true if this is a directory<br>
        IfFileExists `${_b}\*.*` `${_f}` `${_t}` ;so if it is a directory, jump to false<br>
        !macroend<br>
        !undef FileExists<br>
        !define FileExists `"" FileExists2`<br>
        !macro _DirExists _a _b _t _f<br>
        StrCmp `${_b}` `` `${_f}` 0<br>
        IfFileExists `${_b}\*.*` `${_t}` `${_f}`<br>
        !macroend<br>
        !define DirExists `"" DirExists`<br>
        <br>
        Then you can use ${If} ${FileExists} and ${If} ${DirExists}.
      </blockquote>In my script if I use:<br>
      <br>
      ${If} ${FileExists} &lt;path&gt; and it exists, it will perform.<br>
      <br>
      However, if I use:<br>
      <br>
      ${IfNot} ${FileExists} &lt;path&gt; and the file doesn't exist, it won't perform.<br>
      <br>
      I deleted the FileExists2 macro code from my script and returned to the one included in LogicLib.nsh and it works correctly again.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">MSG</span><br>
      <span class="post-time small text-muted">8th March 2011 08:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">There's no need for a new macro. You can simply use ${If} ${FileExists} $YourFile ${AndIfNot} ${FileExists} "$YourFile\*.*" .</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">o___O</span><br>
      <span class="post-time small text-muted">8th March 2011 11:16 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I know that but the code in the LogicLib Wiki (which is the official entry for LogicLib and makes the recommendation, actually - and links to this thread) doesn't work. It's weird that it doesn't work actually, FileExists2 is nearly identical to the old one, it looks like it should work the same except for returning false on directories.<br>
      <br>
      Original:<br></p>
      <pre>
!macro _FileExists _a _b _t _f
<br>        IfFileExists`${_b}` `${_t}` `${_f}`
<br>!macroend
<br>&gt;!define FileExists `"" FileExists` 
</pre>FileExists2 (slightly edited version)<br>
      <pre>
!macro _FileExists2 _a _b _t _f
<br>    IfFileExists`${_b}` `0` `${_f}` ;continues if something exists, returns false if not
<br>    IfFileExists`${_b}\*.*` `${_f}` `${_t}` ;so if it is a directory, jump to false - else return true
<br>&gt;!macroend
<br>&gt;!define FileExists2 `"" FileExists2` 
</pre><br>
      Wonder why it doesn't work?
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>