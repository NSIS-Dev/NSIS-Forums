<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Processor, Memory, OS, Graphics Info?" />

  <title>Processor, Memory, OS, Graphics Info? - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Processor, Memory, OS, Graphics Info?</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135914">Processor, Memory, OS, Graphics Info?</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Psychedelic</span><br />
      <span class="post-time small text-muted">19th May 2003 19:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Processor, Memory, OS, Graphics Info?</strong><br />
      &nbsp; Hi,<br />
      I am trying to create an installer that checks to see if the current hardware meets minimum system requirements.<br />
      In order to do this I need to check the speed of the processor, total physical RAM, operating system version and also preferably info about the graphics card such as graphics memory.<br />
      <br />
      I have searched the forums and the documentation but i haven't found a function that will give me this information.<br />
      <br />
      Does anyone have any idea how i might accomplish this?<br />
      <br />
      Thanks<br />
      Psych</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Joel</span><br />
      <span class="post-time small text-muted">19th May 2003 21:02 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You have plugin call "system.dll" in ${NSISDIR}\Plugins".<br />
      Check this <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=135&amp;instances=0,32" target="_blank">web archive</a> to see more examples.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Psychedelic</span><br />
      <span class="post-time small text-muted">19th May 2003 21:59 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok so I looked at the examples at the link you showed me. I'm a beginer as far as programming in win32 is concerned so is there somewhere i can look to find the relevant functions that i need to call?<br />
      I need to know the:<br />
      Processor Type: (AMD/INTEL)<br />
      Process Speed: MHz<br />
      RAM: MB<br />
      OS: NT/98/ME/2000/XP<br />
      <br />
      and preferably<br />
      Video Memory: MB<br />
      <br />
      Thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th May 2003 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can get the full Windows version - look <a href="http://nsis.sourceforge.net/Docs/AppendixB.html#b.5" target="_blank">here</a><br />
      No-one has written a plug-in to determin how much video card memory a pc has, but somone is currently writing one - look at this post <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=133768" target="_blank">here</a><br />
      As far as I can see, the plugin is really only 5% done!<br />
      <br />
      I'm not sure how to get the processor, mhz, and ram, but I'm sure Kichik could write you something which uses the system plugin.<br />
      <br />
      There is a way to detext the version of Directx nstalled, and to update it in this topic: <a href="http://forums.winamp.com/showthread.php?s=&amp;threadid=134762" target="_blank">here</a><br />
      <br />
      Hope some of them help!<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br />
      <span class="post-time small text-muted">19th May 2003 22:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You could also search for a windows specific value in the registry, incase you find where windows may put some useful values.<br />
      <br />
      -Stu</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sunjammer</span><br />
      <span class="post-time small text-muted">19th May 2003 22:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Check out the cpudesc plugin <a href="http://nsis.sourceforge.net/archive/viewpage.php?pageid=249" target="_blank">here</a>, that can get you the cpu information you require.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Psychedelic</span><br />
      <span class="post-time small text-muted">21st May 2003 22:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Ok so I have the OS and the RAM now. I noticed a script that would read an entry of the registy but only of type REG_MULTI_SZ. The system MHz is of type REG_DWORD.<br />
      I've tried to modify the file but with no success. Does anyone know how i might acccess this information?<br />
      <br />
      Thanks<br />
      <br />
      The file that I was trying to work off of is located in the plugin's folder in the System Plugins Examples.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">22nd May 2003 16:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You don't need a special script to read from REG_DWORD, just use ReadRegDWORD. Make sure that value is always true, on Windows 98 too. I think I have heard about this value somewhere and if I remember correctly it doesn't hold the right value on Windows 98 and is off by a little on other systems.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">22nd May 2003 17:32 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To find out the CPU speed you can use a variant of this program:<br />
      <a href="http://www.codeproject.com/system/cputest.asp#xx372884xx" target="_blank">http://www.codeproject.com/system/cp...asp#xx372884xx</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Psychedelic</span><br />
      <span class="post-time small text-muted">22nd May 2003 17:58 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks!<br />
      That worked.<br />
      All i needed was:<br />
      ReadRegDWORD $0 HKLM "HARDWARE\DESCRIPTION\System\CentralProcessor\0\" "~MHz"<br />
      MessageBox MB_OK "Processor Speed: $0MHz"<br />
      <br />
      I've tested it on NT4, 2000 &amp; XP so far and it works.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">22nd May 2003 18:05 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have just checked it on Windows 98 and it doesn't work. The key isn't there.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">30th May 2003 19:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Latest CPUDesc gets CPU speed too:<br />
      <a href="http://nsis.sourceforge.net/archive/nsisweb.php?page=288&amp;instances=0,32" target="_blank">http://nsis.sourceforge.net/archive/...instances=0,32</a><br />
      <br />
      The page hasn't updated yet but the download has.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">28th August 2006 10:39 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I was trying out this plugin to get the cpu speed. It is a modification of the Examples\System\System.nsi code<br />
      <br />
      With an AMD64-3700 (single CPU) with 2.4 clock speed, I'm getting a mhz result of 1283. The results from the NCPU and RAM are correct. Am I doing something wrong? (Note that I have the cpu running at full-speed, without the energy saving AMD Cool'n'Quiet in effect.)<br />
      <br /></p>
      <pre>
; This is just an example of cpudesc Plugin
<br />&gt;; To have this work, cpudesc.dll should be in 'plugin' subdirectory
<br />&gt;; As of 2006-Aug-27, here is a link to cpudesc:
<br />; ***91;url***93;http://nsis.sourceforge.net/mediawiki/images/8/87/Cpudesc.zip***91;/url***93;
<br />&gt;; 
<br />; (c) l_d_allan (modified from system.nsi by brainsucker)
<br /><br />&gt;Name "CheckMhz Plugin Example"
<br />&gt;OutFile "CheckMhz.exe"
<br />&gt;SetPluginUnload  alwaysoff
<br /><br />Section "ThisNameIsIgnoredSoWhyBother?"
<br />  SetOutPath $TEMP
<br /><br /> ; ----- Sample 3a ----- Direct proc definition -----
<br />  ;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999
<br /> ;01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
<br /> ;INTELP=d AMD=add PPRO=b MMX=d SSE=b SSE2=b 3DNOW=d ARCH=dd LEVEL=dd NCPU=dd MHZ=ddddd RAM=dddd
<br /><br /> ; Direct specification demo
<br />  cpudesc::tell
<br />  Pop$0
<br /> 
<br />  StrCpy$1 $0 2, 73         ;pull out two characters after NCPU=
<br /> IntFmt $4 "%u" $1          ; and turn it into a number in $4
<br />  StrCpy$1 $0 5, 80         ;pull out five characters after MHZ=
<br /> IntFmt $2 "%u" $1          ; and turn it into a number in $2
<br />  StrCpy$1 $0 4, 90         ;pull out four characters after RAM=
<br /> IntFmt $3 "%u" $1          ; and turn it into a number in $3
<br />  MessageBox MB_OKCANCEL "NCPU: '$4'  Mhz: '$2'  Ram (megs): '$3'"
<br /><br /> ; last plugin call must not have /NOUNLOAD so NSIS will be able to delete the temporary DLL
<br />  SetPluginUnload manual
<br /> ; do nothing
<br />  System::Free 0
<br /><br />SectionEnd 
<br />&gt;

</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th August 2006 12:03 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The leading zeros cause NSIS to think it's an octal number. You can add another leading number and later remove it.</p>
      <pre>
<code>StrCpy $1 $0 5 80<br />IntOp $2 1$1 - 100000</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">l_d_allan</span><br />
      <span class="post-time small text-muted">28th August 2006 12:47 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thanks ... you're good!<br />
      <br />
      Like so?<br /></p>
      <pre>
<code>
  cpudesc::tell
<br />  Pop$0
<br /> 
<br />  StrCpy$1 $0 2, 73         ;pull out two characters
<br />                            ; (that may have leading
<br />                            ; zero) after NCPU=
<br /> StrCpy $1 1$1              ;$1 now has leading 1 in
<br />                            ; front of 0 to keep from 
<br />                            ; being octal
<br />  IntOp $2 $1 - 100         ;remove leading one
<br />  
<br />  StrCpy$1 $0 5, 80         ;pull out five characters 
<br />                            ; that may have leading 0
<br />                            ; after MHZ=
<br /> StrCpy $1 1$1              ;$1 now has leading 1 in
<br />                            ; front of 0 to keep from
<br />                            ; being octal
<br />  IntOp $3 $1 - 100000      ;remove leading one
<br /><br />  StrCpy$1 $0 4, 90         ;pull out four characters 
<br />                            ; after RAM=
<br /> StrCpy $1 1$1              ;$1 now has leading 1 in 
<br />                            ; front of 0 to keep from 
<br />                            ; being octal
<br />  IntOp $4 $1 - 10000       ;remove leading one
<br /><br />  MessageBox MB_OKCANCEL "NCPU: '$2'  Mhz: '$3'  Ram (megs): '$4'" 
</code>
</pre>Perhaps it would be appropriate to modify the cpudesc.c code. I took a look at it, and there is this line:<br />
      <br />
      wsprintf( ostr, "INTELP=%1d AMD=%c%2.2d PPRO=%1d MMX=%1d SSE=%1d SSE2=%1d 3DNOW=%1d ARCH=%2.2d LEVEL=%2.2d NCPU=%2.2d MHZ=%5.5d RAM=%4.4d",<br />
      intelpentium, amdlet, amd, pprocompat, hasmmx, hassse, hassse2, has3dnow, arch, level, ncpu, mhz, ram );<br />
      <br />
      I'm not familiar with the %5.5d format, but perhaps it should be %5d to maintain spacing. The existing code seems to be equivalent to %05d to put a leading zero (or maybe cpudesc.dll is "out of sync" with cpudesc.c?)<br />
      <br />
      But that might mess up StrCpy $1 $0 5, 80?<br />
      <br />
      I suppose the same "padding" with leading 1 applies to NCPU and RAM ... if you had less than 1 gig of memory?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">28th August 2006 13:11 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Using %-5d in the plug-in should do the trick as the padding will go on the right. But changing that would break backwards compatibility with scripts using StrCmp.<br />
      <br />
      The same padding applies to RAM, but doesn't bother NCPU because it's only two digits.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>