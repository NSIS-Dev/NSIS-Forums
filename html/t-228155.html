<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Changing the language on the fly." />

  <title>Changing the language on the fly. - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Changing the language on the fly.</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228155">Changing the language on the fly.</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">11th October 2005 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Changing the language on the fly.</strong><br />
      I am trying to make a mutli language installer using the modern UI however I want to have the language selection box on the welcome page.<br />
      <br />
      Now I managed to get a drop down box on the Welcome page that will allow them to select a language but I get an error if i try doing !insertmacro MUI_LANGUAGE "$Lang" or any combination that I can think of.<br />
      <br />
      Does anyone know how to do this? It doesn't even need to change the welcome page through that would be nice if it could.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th October 2005 14:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can't do that. The language can only be selected in .onInit. If you really want, you can wrap the real installer in an installer that shows this welcome page and passes the selection to the wrapped installer.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">11th October 2005 17:44 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">well if I was to use !insertmacro MUI_LANGDLL_DISPLAY to display the choose a language option before the welcome page is there anyway to get what language they choose. I need that because I set the language that my program is in.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">11th October 2005 17:51 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">$LANGUAGE contains the selected language id.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">11th October 2005 18:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">thanks</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">onad</span><br />
      <span class="post-time small text-muted">12th October 2005 10:49 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Hi mscoville, I hope kichik will not get mad ;) since I post the moreinfo plugin as a possible solution to your problem again.<br />
      If you would be contend that the OS GUI language, that is the part that people need to understand before being able to use a OS GUI anyway.<br />
      Just embed the languagus you want to support, get the OS GUI languageID and set this language. It's is best just to read the Moreinfo plugin documentation on the Wiki and try it, can save you a lot of time.<br />
      <br />
      I wish you success and thank you for using NSIS as an installer solution.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">12th October 2005 15:57 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">okay I tried doing it using the MUI_LANGDLL_DISPLAY and $LANGUAGE contains a number so where can I find the language codes or is there any way to convert this back to the language that was choosen. I'd rather just be able to convert it back into the language without having to know the number for each language so that I only have to edit it in one place when we add more languages.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br />
      <span class="post-time small text-muted">12th October 2005 16:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You can use LogicLib to create a switch and the LANG_* defines:</p>
      <pre>
<code>!include LogicLib.nsh<br /># ...<br />${Switch} $LANGUAGE<br />  ${Case} ${LANG_ENGLISH}<br />    MessageBox MB_OK "English"<br />    ${Break}<br />  ${Case} ${LANG_FRENCH}<br />    MessageBox MB_OK "French"<br />    ${Break}<br />${EndSwitch}</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">12th October 2005 16:20 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">okay well I found a list of the codes would still like to know if there is any easy way without doing a comparsion to convert the code into the name of the language.<br />
      <br />
      ie 1033 is english and I would like the installer to know that when they choose english to use it later in my setting.<br />
      <br />
      looking at the page for moreinfo says<br />
      <br /></p>

      <blockquote>
        Several CD/DVD methods and properties return locale identifier (LCID) values that identify which languages are available on the soundtracks or subtitles. To make use of this information, your application will need to extract the primary language ID from the returned LCID. To do this, perform a bitwise AND operation on the value of iLCID and $3FF. (The primary language ID is contained in the least significant 10 bits of the LCID.) The following code snippet shows how to do this.<br />
        <pre>
<code><br />iPrimaryLang = iLCID &amp; $3FF;<br /></code>
</pre><br />
        To obtain an human-readable string from the primary language ID, call GetLangFromLangID as shown in this example:<br />
        <pre>
<code><br />sLanguage = DVD.GetLangFromLangID(iPrimaryLang);</code>
</pre>
      </blockquote>
      <pre>
<code> <br /></code>
</pre><br />
      but I'm getting an error on iPrimaryLang<br />
      <pre>
<code><br />Invalid command: iPrimaryLang<br />Error in script </code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">mscoville</span><br />
      <span class="post-time small text-muted">12th October 2005 16:22 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by kichik</i><br />
        <b>You can use LogicLib to create a switch and the LANG_* defines:</b>
        <pre>
<b><code>!include LogicLib.nsh<br /># ...<br />${Switch} $LANGUAGE<br />  ${Case} ${LANG_ENGLISH}<br />    MessageBox MB_OK "English"<br />    ${Break}<br />  ${Case} ${LANG_FRENCH}<br />    MessageBox MB_OK "French"<br />    ${Break}<br />${EndSwitch}</code></b>
</pre>
      </blockquote>thanks will try that.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
