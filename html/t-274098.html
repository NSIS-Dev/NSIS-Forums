<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Using an Install List file"><title>Using an Install List file - NSIS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-8','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"><link rel="preload" href="../css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"><link rel="stylesheet" href="../css/style.css"></noscript><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body><div class="container"><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-65.html">NSIS Discussion</a></li><li class="active">Using an Install List file</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274098">Using an Install List file</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">9th July 2007 12:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Using an Install List file</strong><br>Hello<br><br>I would like to create an Installer for my app. There are hundreds of files. so I like to do it in the following way. I list all files and folders in a text file. I want to read it from NSIS script in a loop and then install the files. This helps me to add new files and folders only to the List files (a text file).<br><br>while not end of file<br>{<br>Read Lines in text file<br>Install files<br>}<br><br>Structure of list file<br><br><br>1---&gt; Index of List of destination directories to be created<br>2---&gt; Index of files to be copied<br><br>2, Filename, SRC_FOLDER, DEST_FOLDER,RegisterFile<br><br><br>1 Register File<br>0 Do not Registerfile<br><br>Sample structure of file<br><br>1, 1, destFolder1,0<br>1, 2, destFolder2,1<br><br>2, 1, Test1.dll, source, destination, true<br>2, 2, Test2.dll, source, destination, flase<br><br><br>Can you show me some sample code which does the same.<br><br>How can I read a file using loop since the end of file is encountered?<br><br>regards<br>Josabraham</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">9th July 2007 12:29 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">That could be done if you create a small program (easy to do it with nsis) which reads the text file and creates a proper header which is included in your main script.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">9th July 2007 13:25 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Hi,<br><br>How can I do the extarction of comma separated strings from the line which I can read from the file?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Red Wine</span><br><span class="post-time small text-muted">9th July 2007 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Check out the included StrFunc, TextFunc and WordFunc</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">10th July 2007 12:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>Is it possible to create arrays and structures in NSIS?</strong><br>Hi Thank you for the reply<br><br>Is it possible to create arrays and structures in NSIS?<br><br>Regards<br><br>Josabraham</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br><span class="post-time small text-muted">10th July 2007 12:46 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Arrays are possible with the NSISArray plugin.<br><br>Stu</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">10th July 2007 13:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">Thank you</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">13th July 2007 07:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>String Concatenation</strong><br>Hello I try to concatenate the strings in the following way.But it does n't work?<br><br>What is wrong with this?<br>==================================================<br>strcpy $FinalName $DestFolder<br>strcpy $FinalName $FileName<br>Messagebox MB_ICONINFORMATION|MB_OK $FinalName<br>==================================================<br><br>best regards<br><br>josabraham</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th July 2007 09:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">StrCpy copies a string into a variable. It does not concatenate a string to a variable. Copy the string you want to appear in the variable directly instead of using StrCpy twice.</p><pre>
<code>StrCpy $FinalName $DestFolder\$FileName</code>
</pre></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">josabraham</span><br><span class="post-time small text-muted">13th July 2007 10:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content"><strong>File name from a variable</strong><br>Thank you,<br><br>Now I have file name with full path in the variable $Final name.<br><br>Is it possible to specify file name as below.This gives error<br><br>=========================<br>File $FinalName<br>=========================<br><br>best regards<br><br>josabraham</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">kichik</span><br><span class="post-time small text-muted">13th July 2007 10:36 <abbr title="Coordinated Universal Time">UTC</abbr></span></p><p class="post-content">No, of course you can't do that. You can't have the script, which runs on the user machine, determine which files go into the installer. Think about it, the compiler would need to run the script, predict the details of the user computer and compress files according to that.<br><br>What you're looking for is !define.</p><pre>
<code>!define DestFolder something<br>!define FileName blah.dat<br>!define FinalName "${DestFolder}\${FileName}"<br><br>File "${FinalName}"</code>
</pre>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">13th July 2007 11:04 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">To put it into perspective, variables are for run time use whereas constants are for compile time.<br>
      If you need to do run time stuff on compile time, then see this page:<br>
      <a href="http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time" target="_blank">http://nsis.sourceforge.net/Invoking...n_compile-time</a><br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br>
      <span class="post-time small text-muted">13th July 2007 11:33 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>file names from list file</strong><br>
      Hello thank you for the reply,<br>
      <br>
      I get filenames from a text file.I open the file.There are parts in the list fie.<br>
      <br>
      1 it list all directories there.<br>
      <br>
      1,0,MainDir1<br>
      1,1,MainDir1\subDir1<br>
      1,2,MainDir2<br>
      <br>
      2 item list the files<br>
      <br>
      2,0,Filename,index of srcDir, index of destDir, reg = true or false<br>
      <br>
      99; end of list file<br>
      <br>
      So I read the file and build the output path suitably<br>
      <br>
      So all the file names are coming from the list text file.So filenames are available only at run time.<br>
      <br>
      So the script is not aware of the names of the files or destination or source directories.So I cannot declare the names as constants.<br>
      <br>
      This type of design is possible using NSIS?</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kichik</span><br>
      <span class="post-time small text-muted">13th July 2007 11:38 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">In this case, you need two runtimes. One that reads the list file and one that actually installs it. Make a program or an installer that creates a script according to the list file and compile that script to generate the real installer. Afrow's link demonstrates how this can be done in one step.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br>
      <span class="post-time small text-muted">13th July 2007 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you<br>
      <br>
      regards<br>
      <br>
      Josabraham</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">josabraham</span><br>
      <span class="post-time small text-muted">18th July 2007 11:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Compiling only changed files</strong><br>
      Hello,<br>
      <br>
      My project is consist of more than 2500 files to be processed.So compiling the output for every minor change takes long time.<br>
      <br>
      Is there any way to create the output with out processing the whole files.Meaning by including only changed files(Like in Visual C++ IDE)<br>
      <br>
      best regards<br>
      <br>
      josabraham</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Afrow UK</span><br>
      <span class="post-time small text-muted">18th July 2007 15:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Have it not run the executable itself so that you have to run it manually, and/or only have it ran if the list file does not exist.<br>
      <br>
      The only real solution is to get the number of files in the folder or the size of the folder and compare it to the number of files or size that was gained the last time.<br>
      <br>
      Stu</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script type="text/javascript" src="../js/highlight.pack.js" async>
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]></script></body></html>