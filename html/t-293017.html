<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Mulitple installation." />

  <title>Mulitple installation. - NSIS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-65.html">NSIS Discussion</a></li>

      <li class="active">Mulitple installation.</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293017">Mulitple installation.</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kdeslauriers</span><br />
      <span class="post-time small text-muted">11th June 2008 20:26 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Mulitple installation.</strong><br />
      I need to install multiple instances of an application using NSIS. I have a custom page that obtains information about the install (ie. instance name that defines that install). The instance name obtained form the screen will be appended to the generic default installation folder (using STRCPY $INSTDIR "$INSTDIR\$instanceName" ).<br />
      <br />
      My question is that I want to define values using !define based on the instance name.<br />
      <br />
      Am I able to modify the value (i.e. REGKEY for that instance) that I previously defined prior to the !insertmacro sequence once I have the instance name from the custom page? If not, is there a work around?<br />
      <br />
      Thanks.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Comperio</span><br />
      <span class="post-time small text-muted">12th June 2008 02:24 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I'm not quit sure I understand. :confused:<br />
      <br />
      !define is used at compile time, which means you can't !define something at runtime based on user input.<br />
      <br />
      But you could set one or more variables or turn on/off different sections at runtime to control how each instance is installed.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">kdeslauriers</span><br />
      <span class="post-time small text-muted">12th June 2008 15:10 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank you. I am new to NSIS and after reading the documentation more closely I realised they were compile time constants. I was able to work around it by modifying a few variables with STRCPY.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">VisualCSharp</span><br />
      <span class="post-time small text-muted">6th November 2008 17:41 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I have the exact same requirement. I need our support staff to be able to install a test installation and a production installation of the same package on the same server.<br />
      <br />
      What variables did you modify? The three things I have figured out that need to be changed are:<br />
      <br />
      PRODUCT_UNINST_KEY<br />
      MUI_STARTMENUPAGE_DEFAULTFOLDER<br />
      InstallDir<br />
      <br />
      I am currently unable to make any of these dynamic, i.e., specified by the user selecting from a radio button list. Two of them are constant !defines and InstallDir can't be executed from within a Function.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">VisualCSharp</span><br />
      <span class="post-time small text-muted">11th November 2008 15:00 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">What I ended up doing to "solve" this problem was injecting tokens into my installer script that my NAnt script replaces at time of continuous integration.<br />
      <br />
      Something like this:<br />
      <br />
      !define PRODUCT_NAME "My Product %ENVIRONMENT%"<br />
      <br />
      where %ENVIRONMENT% is replaced with Test and Prod. The drawback to doing this is I have to effectively build the installer twice. This can be a very time-consuming process for bigger installers.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/nsis-dev/NSIS-Forums/">GitHub</a></p>
    </div>
  </div><script src="../js/highlight.pack.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
  hljs.initHighlightingOnLoad();
  //]]>
  </script>
</body>
</html>
