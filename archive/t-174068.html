<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_DIRECTORY crash on NT 4SP6a?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_DIRECTORY crash on NT 4SP6a? NSIS Discussion" />
	
	<title> MUI_DIRECTORY crash on NT 4SP6a? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_DIRECTORY crash on NT 4SP6a?</div>
<hr />
<div class="pda"><a href="t-174068.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174068">MUI_DIRECTORY crash on NT 4SP6a?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">25th March 2004, 14:01</div></div><div class="posttext">Hello Everyone!,<br />
<br />
I'm having an issue that only occurs on Windows NT4. When I run the Basic example that is included with NSIS it reproduces the problem. The problem is when I click the next button on the components screen to go to the directory screen I get an access violation error and the installer aborts. <br />
<br />
What is causing this behaviour? If I remark the call to insert the directory page, the issue doesn't occur, but I'd like my end-user to be able to define the install dir.<br />
<br />
NSIS 2.0 (from CVS 2004/03/24 4pm EST)<br />
NT 4 SP 6a <br />
<br />
<br />
Any help would be appreciated.<br />
<br />
Cheers,<br />
<br />
ZIMSMS</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th March 2004, 15:25</div></div><div class="posttext">Please try the stable 2.0 release.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">25th March 2004, 15:29</div></div><div class="posttext">Joost, <br />
<br />
I can't use the stable one, because of the browse install bug you fixed for me. This was fine in the stable release, it's in the 'special one'.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th March 2004, 15:42</div></div><div class="posttext">So it's a problem with the development version? Can you help us finding out when the problem was introduced?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">25th March 2004, 15:48</div></div><div class="posttext">I have one compiled on March 2 which works before the browse fix, and one on the 11th that doesn't. So it looks like it was introduced on the 2nd because that's when I built with the changes you gave me for the browse installation bug. I also have one built on the second a few hours after the other that doesn't work but has the browse fix, so that has to be it. I hope that helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2004, 16:40</div></div><div class="posttext">What's the exact error mesasge shown?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">26th March 2004, 16:55</div></div><div class="posttext">Here's an image of the error.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2004, 17:02</div></div><div class="posttext">What's the error without Dr. Watson? Can you get a stack trace (WinDbg.exe, VC, etc.)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">26th March 2004, 18:21</div></div><div class="posttext">I apologize, but there is no development environment on our nt4 box. However, here is the dr watson log. I made sure it was empty before creating the crash. I used basic.exe (basic.nsi) to do this.<br />
<br />
<br />
[attached below]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">26th March 2004, 18:24</div></div><div class="posttext">Looks like GetDiskFreeSpaceExW, isn't supported on NT4 using unicows.dll?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2004, 18:32</div></div><div class="posttext">No, GetDiskFreeSpaceExW is supported on NT4. The problem is probably wrong documentation in MSDN. It looks like GetDiskFreeSpaceExW doesn't check if one of its parameters is NULL like MSDN says it should.<br />
<br />
Please attach large files/logs next time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">26th March 2004, 18:40</div></div><div class="posttext">Kichik,<br />
<br />
Sorry, I tried to attach it as a file, but it was too big. I guess I could have compressed it, my apologies. When should this be fixed?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th April 2004, 20:12</div></div><div class="posttext">Fixed in latest CVS version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mrtech</div><div class="date">29th April 2004, 20:34</div></div><div class="posttext">Tried the latest dev build, but I'm still seeing this crash on NT systems, any help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">29th April 2004, 20:43</div></div><div class="posttext">Even though you have the latest CVS, it is not in the included binaries. You will need to rebuild.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mrtech</div><div class="date">29th April 2004, 21:20</div></div><div class="posttext">??, the latest Dev Snaphost is 4/29 the patch was checked in 4/24.  I've downloaded the dev snapshot, installed it, rebuilt my installer and tested with no success.<br />
<br />
What am I doing wrong here?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">29th April 2004, 23:08</div></div><div class="posttext">&quot;Even though you have the latest CVS, it is not in the included binaries. You will need to rebuild.&quot;<br />
<br />
This refers to rebuilding the NSIS compiler (makensis.exe), not rebuilding your script.<br />
<br />
If you cannot rebuild the NSIS compiler, you'll need to wait until a new binary version of it is available.<br />
<br />
You can check the Changelog (http://nsis.sourceforge.net/development/changelog/) to see if a new NSIS compiler (makensis.exe) is available.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>