<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Messing With Your Heads, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Messing With Your Heads NSIS Discussion" />
	
	<title> Messing With Your Heads [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Messing With Your Heads</div>
<hr />
<div class="pda"><a href="t-320178.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320178">Messing With Your Heads</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">23rd June 2010, 18:25</div></div><div class="posttext">This is just something fun in the compiler I discovered.  It will make the newbs flee :cry: and the veterans will simply whack me with a rolled up newspaper and sternly say &quot;NO! BAD!&quot; :mad:<br />
<br />
Compile this:<br />
!define `War&quot;=&quot;What is it good for?&quot;$\n!define: &quot;Result` Nothing!<br />
!error `Result = ${War&quot;=&quot;What is it good for?&quot;$\n!define: &quot;Result}`<br />
<br />
And you will see this in the compiler output:<br />
Processing script file: &quot;C:\NOBAD.nsi&quot;<br />
!define: &quot;War&quot;=&quot;What is it good for?&quot;<br />
!define: &quot;Result&quot;=&quot;Nothing!&quot;<br />
!error: Result = Nothing!<br />
<br />
What dose this mean?<br />
Basically you can make a define be just about ANY VALUE as long as it is is defined in one line and is wrapped in string delimiter.<br />
<br />
Example:<br />
!define `${__DATE__}1234567890-=~!@#$%^&amp;*()_+qwertyuiop[]\{}|asdfghjkl:&quot;;'zxcvbnm,./&lt;&gt;? $\n$\t$\r` 21<br />
!define /math &quot;The Meaning of Life the Universe, Everything!&quot; ${${__DATE__}1234567890-=~!@#$%^&amp;*()_+qwertyuiop[]\{}|asdfghjkl:&quot;;'zxcvbnm,./&lt;&gt;? $\n$\t$\r} * 2<br />
!error `Result = ${The Meaning of Life the Universe, Everything!}`<br />
<br />
Results:<br />
!define: &quot;6/23/20101234567890-=~!@#$%^&amp;*()_+qwertyuiop[]\{}|asdfghjkl:&quot;;'zxcvbnm,./&lt;&gt;? <br />
	<br />
&quot;=&quot;21&quot;<br />
!define: &quot;The Meaning of Life the Universe, Everything!&quot;=&quot;42&quot;<br />
!error: Result = 42<br />
<br />
:igor: Messes with your head doesn't it? :confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">23rd June 2010, 19:08</div></div><div class="posttext">:igor: Messes with your head doesn't it? :confused:<br />
<br />
Err... No it doesn't? It's doing exactly what it should. Of course you can make a define be just about any value. That's the whole point. It's just the preprocessor doing a straight text-replace.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">23rd June 2010, 19:21</div></div><div class="posttext">I know it's working as intended..  I'm just impressed how well it's doing it  :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gringoloco023</div><div class="date">23rd June 2010, 20:16</div></div><div class="posttext">Actually, according to the manual the following:<br />
<br />
$\r $\n $\t $$<br />
<br />
Are listed under variables, but as I found out the hardway before, they are predefines.<br />
<br />
Like:<br />
  StrCmp $R2 $\t 0 +3<br />
ends up being<br />
 StrCmp $R2 0 +3<br />
<br />
It does get people confused</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">24th June 2010, 14:28</div></div><div class="posttext">$\r $\n $\t $$<br />
..., they are predefines.<br />
<br />
If that was 100% true, the following would work.<br />
!echo One$\r$\n!echo Two<br />
<br />
However, It fails with an error when compiling...<br />
!echo expects 1 parameters, got 2.<br />
<br />
Odly though this will compile...<br />
!define Test `One`$\r$\n!echo Two<br />
!echo ${Test}<br />
but the second !echo is lost in Limbo somewhere.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gringoloco023</div><div class="date">24th June 2010, 14:48</div></div><div class="posttext">I gave this some quick additional test and strangely enough it only seems to happen for $\t !<br />
<br />
StrCpy $R2 $\t<br />
<br />
Error: StrCpy expects 2-4 parameters, got 1.<br />
<br />
While<br />
StrCpy $R2 '$\t'<br />
Compiles fine !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">24th June 2010, 15:21</div></div><div class="posttext">You can also do some interesting things with comment blocks...<br />
<br />
!define Result1 /* Inline comments don't effect anything */ &quot;I am assigned to Result1!&quot;<br />
!define Result2 /* That is...<br />
    ...until you add a line break */ &quot;Errors here!&quot;<br />
<br />
!define: &quot;Result1&quot;=&quot;I am assigned to Result1!&quot;<br />
!define: &quot;Result2&quot;=&quot;&quot;<br />
Invalid command: Errors here!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th June 2010, 10:43</div></div><div class="posttext">My personal favorite is:!define a blah<br />
DetailPrint ${a}<br />
DetailPrint $${a}<br />
StrCpy $0 $$<br />
DetailPrint $0{a}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gringoloco023</div><div class="date">29th June 2010, 16:04</div></div><div class="posttext">besides all the fun,<br />
<br />
I really consider the way how NSIS handles $\t, to be a BUG.<br />
And maybe consider relocating $\t,$\r,$\n,$$, from constant variables to pre-defines, in the NSIS manual !<br />
<br />
regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">6th July 2010, 18:49</div></div><div class="posttext">I really consider the way how NSIS handles $\t, to be a BUG.<br />
And maybe consider relocating $\t,$\r,$\n,$$, from constant variables to pre-defines, in the NSIS manual !<br />
<br />
I agree, the $\t dose appear to be a bug.  However, I do not agree that they should be converted to pre-defines as it would cause a few problems.<br />
<br />
Predefines are part of the precompiler.  Thus, the compiler would have to deal with multi-line string values / statements as the $\n and $\r meta sequences are replaced.  At the moment it can't. (Although I wish it it did at times)<br />
<br />
StrCpy $0 &quot;Hello$\nWorld!&quot;<br />
Would become...<br />
StrCpy $0 &quot;Hello<br />
World!&quot;<br />
<br />
See the problem?<br />
<br />
It would be awesome though to have a few new predefines to play with so I could create some more complex precompiler macros.<br />
<br />
<br />
 ${\n}<br />
 ${\r}<br />
 ${\t}</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>