<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" variable on function .oninit, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  variable on function .oninit NSIS Discussion" />
	
	<title> variable on function .oninit [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  variable on function .oninit</div>
<hr />
<div class="pda"><a href="t-105486.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=105486">variable on function .oninit</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">david33470</div><div class="date">16th September 2002, 12:25</div></div><div class="posttext">Hello<br />
I have a problem with a script, on the .oninit function<br />
I do the following:<br />
	Function .onInit<br />
	StrCpy $2 “name of section 4”<br />
        SectionSetText 4 &quot;$2&quot;<br />
        StrCpy $2 “name of section 5”<br />
        SectionSetText 5 &quot;$2&quot;<br />
        StrCpy $2 “name of section 6”<br />
        SectionSetText 6 &quot;$2&quot;<br />
<br />
FunctionEnd<br />
But all my section (4, 5, 6) have the name: name of section 6. I don’t understand why the variable $2 takes the last attributed value. Perhaps on the function .oninit, first the variables are calculated and then the sectionSetText are done??? I don’t know where I can do those commands, because it is to give a name to the section and this is the first executed function!!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th September 2002, 13:09</div></div><div class="posttext">The sections' names are processed just before they are shown. Therefore, setting the names in .onNextPage/.onPrevPage (which are called before the page shows up, before the names are processed) might be the best solution. You won't be able to use the same variable just as before, but at least you won't have to keep a lot of variables unused until then.<br />
<br />
I assume your example is just to show the problem, but just to be sure, you don't have to copy the string to a variable and then into the section name you can just use SectionSetName 1 &quot;text&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">david33470</div><div class="date">16th September 2002, 13:29</div></div><div class="posttext">tank you!<br />
I know that i have not to copy the string before do a sectionSetText but I have put strcpy in the exemple to simplify the problem but in fact i get the name of each section with a DLL function and i pop the value on $2 variable.<br />
But in the script i use approximatively 10 variable for other thing (that i keep in all the script)and i have more than 16 section and subsection to named like the exemple so i can't use a different variable for each section!!!<br />
I don't realy understand why i have to put this lines on the function .onNextPage???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th September 2002, 13:40</div></div><div class="posttext">I was just suggesting you will put those in .onNextPage so you will be able to use the variables else where in the script. When .onNextPage is called for the components page, push all of your variables, get the names, put them in seperate variables and set the sections names. After you have passed the components page, pop all of your variables and continue as usual. This is the best solution I can offer for you. I will try to somehow work around this for the next version of NSIS, sections names should not (IMHO) be depended on variables.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>