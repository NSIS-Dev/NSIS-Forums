<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Answering to &quot;Password:&quot; prompt in console, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Answering to &quot;Password:&quot; prompt in console NSIS Discussion" />
	
	<title> Answering to &quot;Password:&quot; prompt in console [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Answering to &quot;Password:&quot; prompt in console</div>
<hr />
<div class="pda"><a href="t-235605.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235605">Answering to &quot;Password:&quot; prompt in console</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">viachi</div><div class="date">16th January 2006, 13:59</div></div><div class="posttext">Hello,<br />
I am trying to import a dump in PostgreSQL. For that i am using:<br />
<br />
C:\&gt;ExecWait &quot;C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql    -U postgres MyDB -f D:\dumps\db.dmp -p 5433&quot;<br />
<br />
Then it shows password prompt, which i am trying to handle with:<br />
<br />
C:\&gt;FindWindow $R0 windowtitle &quot;C:\Program                                                  Files\PostgreSQL\8.0.0-beta5\bin\psql.exe&quot;         <br />
<br />
And sending the pass to the console:<br />
<br />
C:\&gt;SendMessage $R0 ${WM_COMMAND} &quot;STR:postgres&quot; 0<br />
<br />
Everything is in command line, without any GUI.<br />
I tried also to pass the password in first command, but it appears extra parameter, and ignores it or some of the other.<br />
Thanks for any help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th January 2006, 15:12</div></div><div class="posttext">Isn't there a command-line switch for the password?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">16th January 2006, 16:07</div></div><div class="posttext">For console apps ExecDos (http://nsis.sourceforge.net/ExecDos_plug-in) may help if your program not require terminal emulation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viachi</div><div class="date">17th January 2006, 11:19</div></div><div class="posttext">Thnk you, Takhir,<br />
it seems ExecDos can do the job, but i guess i don't do something wright, becouse the result is the same: showing a console with &quot;Password: _&quot; . This is my line, if you see something wrong:<br />
<br />
ExecDos::exec /NOUNLOAD /ASYNC &quot;/BRAND=Executing console application&quot; /TIMEOUT=5000 &quot;C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe&quot;  &quot;postgres&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th January 2006, 11:29</div></div><div class="posttext">ExecDos::exec &quot;/BRAND=Executing console application&quot; /TIMEOUT=5000 &quot;C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe&quot; &quot;postgres$\n&quot;<br />
is better ( \n at the end of password and simple sync execution for test), but if ExecDos not hides psql.exe console window (end you can see console output &quot;Password:&quot;) this may be a problem.. We already had problems with MySQL utilities :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viachi</div><div class="date">17th January 2006, 12:47</div></div><div class="posttext">Nope. The same.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viachi</div><div class="date">17th January 2006, 15:02</div></div><div class="posttext">Actually i think the problem is another - i can't handle the console window. It is ok with the Installer window, or the NSIS Compilator window, but not with console. The title is:<br />
<br />
C:\Program Files\PostgreSQL\8.0.0-beta5\bin\psql.exe<br />
<br />
If I change the .exe file it still doesn't work.<br />
What could be a problem...?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kike_velez</div><div class="date">18th January 2006, 12:17</div></div><div class="posttext">Hello <br />
<br />
to do that with Telnet I do this:<br />
<br />
 ExecShell &quot;&quot; &quot;telnet&quot; &quot;-f temp.txt $CataIP&quot; SW_HIDE<br />
<br />
 FindWindow $R0 &quot;&quot; &quot;Telnet $CataIP&quot;<br />
<br />
 ;Send password <br />
 Push $R0<br />
 Push &quot;$Password&quot;<br />
 Call SendChars<br />
<br />
 ;send Enter Key<br />
 SendMessage $R0 ${WM_CHAR} 13 0 <br />
<br />
<br />
with <br />
<br />
<br />
; SendChars:<br />
;   Send a stream of WM_CHAR messages to a window to simulate user input<br />
; Usage:<br />
;   Push &lt;window-handle&gt;<br />
;   Push &lt;message&gt;<br />
;   Call SendChars<br />
<br />
Function SendChars<br />
  Exch $R0 ; Get string<br />
  Exch<br />
  Exch $R1 ; Get hwnd<br />
  Push $R2<br />
  Push $R3<br />
  StrCpy $R2 0 ; Char index<br />
loop:<br />
  StrCpy $R3 $R0 1 $R2 ; Get next char<br />
  StrCmp $R3 &quot;&quot; done<br />
  Push $R3<br />
  Call CharToAscii ; Convert it to ASCII<br />
  Pop $R3<br />
  SendMessage $R1 258 $R3 0 ; Send a WM_CHAR message<br />
  IntOp $R2 $R2 + 1<br />
  Goto loop<br />
done:<br />
  Pop $R3<br />
  Pop $R2<br />
  Pop $R1<br />
  Pop $R0<br />
FunctionEnd<br />
<br />
; CharToAscii:<br />
;   Convert a character to it's ascii code<br />
; Usage:<br />
;   Push &lt;character&gt;<br />
;   Call CharToAscii<br />
;   Pop &lt;ascii-code&gt;<br />
<br />
Function CharToAscii<br />
  Exch $R0 ; Get character<br />
  Push $R1<br />
  Push $R2<br />
  StrCpy $R1 255 ; ASCII code test counter<br />
loop:<br />
  IntFmt $R2 &quot;%c&quot; $R1 ; Convert current test counter to it's char<br />
  StrCmp $R2 $R0 done ; Have we found it yet? (note - not case sensitive)<br />
  IntOp $R1 $R1 - 1 ; Next code<br />
  IntCmp $R1 0 &quot;&quot; &quot;&quot; loop<br />
done:<br />
  Pop $R2<br />
  Exch<br />
  Pop $R0<br />
  Exch $R1<br />
FunctionEnd<br />
<br />
<br />
Best Regards</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>