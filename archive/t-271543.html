<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" IP Address verification doesnt work, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  IP Address verification doesnt work NSIS Discussion" />
	
	<title> IP Address verification doesnt work [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  IP Address verification doesnt work</div>
<hr />
<div class="pda"><a href="t-271543.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271543">IP Address verification doesnt work</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Veerugadde</div><div class="date">21st May 2007, 21:09</div></div><div class="posttext">Hello all<br />
<br />
    I modified the ValidationIP function in such way that to check for the given address is within our IP address range. But the code seems to be not working and always showing the same result.<br />
<br />
   Could you please help me out with verification of the validationIP.nsh file.<br />
<br />
Here is the code:<br />
<br />
!include LogicLib.nsh<br />
!include WordFunc.nsh<br />
!insertmacro WordFind<br />
!insertmacro StrFilter<br />
!insertmacro WordFind2X<br />
<br />
<br />
Function ValidateIP<br />
<br />
  Exch $0<br />
  Push $1<br />
  Push $2<br />
<br />
  ${StrFilter} $0 1 &quot;.&quot; &quot;&quot; $1<br />
  ${If} $0 != $1<br />
    # invalid charcaters used<br />
    #   example: a127.0.0.1<br />
    Goto error<br />
  ${EndIf}<br />
<br />
  ${WordFind} $0 . &quot;#&quot; $1<br />
  ${If} $1 != 4<br />
    # wrong number of numbers<br />
    #   example: 127.0.0.<br />
    Goto error<br />
  ${EndIf}<br />
<br />
  ${WordFind} $0 . &quot;*&quot; $1<br />
  ${If} $1 != 3<br />
    # wrong number of dots<br />
    #   example: 127.0.0.1.<br />
    Goto error<br />
  ${EndIf}<br />
# Extracts the first part of Ip address 192.168.xx.x (192) and checks for the number.<br />
 ${WordFind} $0 &quot;.&quot; &quot;+1{&quot; $1<br />
    ${If} $1 &lt; 255<br />
    ${OrIf} $1 &gt; 0<br />
<br />
      IntCmp $1 192 +3<br />
<br />
    ${Else}<br />
      # invalid number<br />
      #   example: 500.0.0.1<br />
      Goto error<br />
    ${EndIf}<br />
# Extracts the Second part of Ip address 192.168.xx.x (18) and checks for the number.<br />
<br />
  ${WordFind2X} $0 &quot;.&quot; &quot;.&quot; &quot;+2&quot; $1<br />
       ${If} $1 &lt; 255<br />
       ${OrIf} $1 &gt; 0<br />
<br />
        IntCmp $1 18 +3<br />
<br />
       ${Else}<br />
      # invalid number<br />
      #   example: 500.0.0.1<br />
         Goto error<br />
      ${EndIf}<br />
<br />
# Extracts the third part of Ip address 192.168.xx.x (xx) and checks for the number.<br />
  ${WordFind2X} $0 &quot;.&quot; &quot;.&quot; &quot;+3&quot; $1<br />
       ${If} $1 &gt; 255<br />
       ${OrIf} $1 &lt; 0<br />
      # invalid number<br />
      #   example: 500.0.0.1<br />
         Goto error<br />
       ${EndIf}<br />
<br />
# Extracts the fourth part of Ip address 192.168.xx.x (x) and checks for the number.<br />
  ${WordFind2X} $0 &quot;.&quot; &quot;.&quot; &quot;+4&quot; $1<br />
       ${If} $1 &gt; 255<br />
       ${OrIf} $1 &lt; 0<br />
      # invalid number<br />
      #   example: 500.0.0.1<br />
         Goto error<br />
       ${EndIf}<br />
<br />
<br />
  Pop $2<br />
  Pop $1<br />
  Pop $0<br />
<br />
  ClearErrors<br />
<br />
  Return<br />
<br />
  error:<br />
<br />
    Pop $2<br />
    Pop $1<br />
    Pop $0<br />
<br />
    SetErrors<br />
<br />
FunctionEnd<br />
<br />
<br />
I called this function for verfication through .nsi file where its invoking always &quot;IP is OK&quot;<br />
<br />
Please help me out.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">21st May 2007, 21:48</div></div><div class="posttext">IntCmp $1 18 +3<br />
<br />
you can't use relative jumps inside ${If} etc. logic statements.<br />
<br />
use absolute jumps instead (with labels)<br />
<br />
or better, abandon the IntCmp/StrCmp things and use ${If} etc. more straighforward!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Veerugadde</div><div class="date">22nd May 2007, 16:24</div></div><div class="posttext">Hello<br />
<br />
         i made a silly mistakes in the code and rectified all those and shame on myself:o <br />
<br />
thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>