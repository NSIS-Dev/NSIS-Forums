<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" only one and must one section selected., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  only one and must one section selected. NSIS Discussion" />
	
	<title> only one and must one section selected. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  only one and must one section selected.</div>
<hr />
<div class="pda"><a href="t-192059.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=192059">only one and must one section selected.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">1st September 2004, 03:14</div></div><div class="posttext">I need help with the Components Page Sections. I have 4 Sections in a subsection and each one is unique, but only and must 1 Section can installed, I don't want two or more Sections are installed. <br />
I made the code reference to &quot;one-section.nsi&quot; an example in the nsis directory. but it doesnot work well, because the user can selected two sections. and there is a small bug with it in the SubSection, if in the installer you click on that sud section(e.g. color) it highlight all the section but one.<br />
<br />
If there is and you know it, just let me know.<br />
Thanks.<br />
<br />
;&quot;only&quot; and &quot;must&quot; one section is selected.<br />
;----------------------<br />
<br />
;--------------------------------<br />
;Include Modern UI<br />
!include &quot;MUI.nsh&quot;<br />
;--------------------------------<br />
<br />
; Section define/macro header file<br />
; See this header file for more info<br />
<br />
!include &quot;Sections.nsh&quot;<br />
<br />
;--------------------------------<br />
;General<br />
<br />
;Name and file<br />
!define APPNAME &quot;istest&quot;<br />
!define APPNAMEANDVERSION &quot;v1.0&quot;<br />
Name &quot;${APPNAMEANDVERSION}&quot;<br />
OutFile &quot;istest.exe&quot;<br />
<br />
;Default installation folder<br />
InstallDir &quot;$DESKTOP\istest&quot; <br />
InstallDirRegKey HKLM &quot;Software\${APPNAME}&quot; &quot;&quot;<br />
;--------------------------------<br />
<br />
;--------------------------------<br />
;Interface Configuration<br />
<br />
<br />
!define MUI_COMPONENTSPAGE_SMALLDESC<br />
!define MUI_COMPONENTSPAGE_TEXT_COMPLIST &quot;&quot;<br />
!define MUI_COMPONENTSPAGE_TEXT_INSTTYPE &quot;&quot;<br />
;--------------------------------<br />
;Pages<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
;--------------------------------<br />
;Languages<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
;Set Section properties<br />
SetOverwrite on<br />
<br />
ShowInstDetails &quot;show&quot;<br />
;--------------------------------<br />
<br />
Section !Required<br />
  SectionIn RO<br />
SectionEnd<br />
<br />
SubSection /e &quot;color&quot; &quot;subs&quot;<br />
<br />
Section /o &quot;red&quot; sec1<br />
SectionEnd<br />
;--------------------------------<br />
Section /o &quot;blue&quot; sec2<br />
SectionEnd<br />
;--------------------------------<br />
Section /o &quot;green&quot; sec3<br />
SectionEnd<br />
;--------------------------------<br />
Section &quot;gray&quot; sec4<br />
SectionEnd<br />
SubSectionEnd<br />
;-------------------------------------------------------<br />
<br />
;Problem!!!!<br />
;the following code from &quot;star&quot; to &quot;end&quot; is to make one section &quot;must&quot; and &quot;only&quot; be selected,but it does not work well.<br />
;--------------------------------start<br />
<br />
; Functions<br />
<br />
; $1 stores the status<br />
<br />
Function .onInit<br />
<br />
  StrCpy $1 ${sec1}<br />
<br />
FunctionEnd<br />
;--------------------------------<br />
Function .onSelChange<br />
<br />
  !insertmacro StartRadioButtons $1<br />
    !insertmacro RadioButton ${sec1}<br />
    !insertmacro RadioButton ${sec2}<br />
    !insertmacro RadioButton ${sec3}<br />
    !insertmacro RadioButton ${sec4}<br />
  !insertmacro EndRadioButtons<br />
<br />
FunctionEnd<br />
;--------------------------------end</div></div><hr />


<div class="post"><div class="posttop"><div class="username">razor_x</div><div class="date">1st September 2004, 16:01</div></div><div class="posttext">place this in the include folder.And call it in .OnSelChange....<br />
<br />
!include &quot;setsections.nsh&quot;<br />
<br />
<br />
your code here.....<br />
<br />
<br />
Function .OnSelChange<br />
call setsections<br />
FunctionEnd<br />
<br />
try this...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">1st September 2004, 17:14</div></div><div class="posttext">Thanks for your help!<br />
when I try, it seems have some problem. Maybe I don't how to use setsections.nsh and make the code. I hope razor_x can give me a full code base on onlyonesec.nsi.<br />
Thanks again!<br />
the following is the message when MakeNSIS.exe runing<br />
----------<br />
16 warnings:<br />
  unknown variable/constant &quot;{SEC1}&quot; detected, ignoring (setsections.nsh:4)<br />
  unknown variable/constant &quot;{SEC2}&quot; detected, ignoring (setsections.nsh:6)<br />
  unknown variable/constant &quot;{SEC3}&quot; detected, ignoring (setsections.nsh:8)<br />
  unknown variable/constant &quot;{SEC4}&quot; detected, ignoring (setsections.nsh:10)<br />
  unknown variable/constant &quot;{SEC1}&quot; detected, ignoring (setsections.nsh:14)<br />
  unknown variable/constant &quot;{SEC2}&quot; detected, ignoring (setsections.nsh:15)<br />
  unknown variable/constant &quot;{SEC3}&quot; detected, ignoring (setsections.nsh:16)<br />
  unknown variable/constant &quot;{SEC4}&quot; detected, ignoring (setsections.nsh:17)<br />
  unknown variable/constant &quot;{SEC1}&quot; detected, ignoring (macro:RadioButton:2)<br />
  unknown variable/constant &quot;{SEC1}&quot; detected, ignoring (macro:RadioButton:5)<br />
  unknown variable/constant &quot;{SEC2}&quot; detected, ignoring (macro:RadioButton:2)<br />
  unknown variable/constant &quot;{SEC2}&quot; detected, ignoring (macro:RadioButton:5)<br />
  unknown variable/constant &quot;{SEC3}&quot; detected, ignoring (macro:RadioButton:2)<br />
  unknown variable/constant &quot;{SEC3}&quot; detected, ignoring (macro:RadioButton:5)<br />
  unknown variable/constant &quot;{SEC4}&quot; detected, ignoring (macro:RadioButton:2)<br />
  unknown variable/constant &quot;{SEC4}&quot; detected, ignoring (macro:RadioButton:5)<br />
------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">razor_x</div><div class="date">1st September 2004, 18:07</div></div><div class="posttext">you need to give each of your sections a section index and modify setsection.nsh accordingly...<br />
<br />
the vars are case sensitive...SEC01 is not the same as sec01....I always use capitals for my vars so my example was like that but you may have to adjust them.<br />
<br />
change them in the setsection.nsh or the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">2nd September 2004, 08:20</div></div><div class="posttext">I did the same thing as you say, I modify the scritp base on razor_x's code, I have tried lots of times, but I still could not find the right answer! <br />
Can anyone help me and give me the full Script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">2nd September 2004, 11:52</div></div><div class="posttext">The &quot;!include setsections.nsh&quot; line is in the wrong place.<br />
<br />
Put it after the SubSectionEnd line and the script will work.<br />
<br />
setsections.nsh uses ${SEC1} to ${SEC4} which are defined in the &quot;Section&quot; lines, so setsections.nsh must appear after all of the &quot;Section&quot; lines (otherwise ${SEC1} to ${SEC4} will be undefined).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">2nd September 2004, 13:02</div></div><div class="posttext">OH!GREAT! Thanks to pengyou and razor_x!<br />
I almost succeed! but there is still a small bug. <br />
After compile the script, I run &quot;Test Installer&quot;,and click on &quot;green&quot; first, &quot;green&quot; and &quot;gray&quot; are both checked. then click on &quot;blue&quot;, &quot;blue&quot; and &quot;green&quot; are both checked,and so on. That is NOT I want. I want &quot;only&quot; and &quot;must&quot; one section is checked. Mybe something worong with setsections.nsh. who can modify it? <br />
thanks!<br />
<br />
the follow are the all files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">2nd September 2004, 13:59</div></div><div class="posttext">To get your radiobutton macros to work properly, you need to set $1 to match the section which is initially selected.<br />
<br />
In your code, the &quot;gray&quot; section is the default selection so you need to add something like this:<br />
Function .onInit<br />
<br />
  StrCpy $1 ${SEC4}<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">2nd September 2004, 14:21</div></div><div class="posttext">It is ok!<br />
I don't know how to showe my appreciation of your help, just say Thanks is not enough!<br />
THANKS,THANKS A LOT!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>