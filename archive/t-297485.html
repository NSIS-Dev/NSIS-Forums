<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" problem installing font using register font, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  problem installing font using register font NSIS Discussion" />
	
	<title> problem installing font using register font [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  problem installing font using register font</div>
<hr />
<div class="pda"><a href="t-297485.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297485">problem installing font using register font</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">minosha1212</div><div class="date">16th September 2008, 22:01</div></div><div class="posttext">Hi all,<br />
<br />
I'm having an issue with registering a font using the register font plugin.  I've included both FontName.nsh and FontRegAdv.nsh and am trying to register a few .otf fonts using InstallTTF macro.  <br />
<br />
Here is the code snippet<br />
<br />
====================================================<br />
  ; install fonts<br />
  SetOutPath $FONTS<br />
  StrCpy $FONT_DIR $FONTS<br />
<br />
  !insertmacro InstallTTF &quot;${SUPPORTDIR}\Fonts\Frutiger-Black.otf&quot;<br />
  !insertmacro InstallTTF &quot;${SUPPORTDIR}\Fonts\Frutiger-BlackCn.otf&quot;<br />
  !insertmacro InstallTTF &quot;${SUPPORTDIR}\Fonts\Frutiger-BlackItalic.otf&quot;<br />
<br />
  SendMessage ${HWND_BROADCAST} ${WM_FONTCHANGE} 0 0 /TIMEOUT=5000<br />
====================================================<br />
<br />
Everything compiles okay, but when I run the installer, when it gets to InstallTTF, I get a 'Wrong Font Version' error for each font I'm trying to install, followed with an 'invalid handle 32' error after that.  I see the fonts in the windows fonts folder, but they're not registered.  <br />
<br />
I'm wondering if this has to do with me using .otf files and not .ttf fonts, or if it's something else that I'm doing wrong.<br />
<br />
Thanks for the assistance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2008, 06:19</div></div><div class="posttext">I'd guess the fontname plug-in doesn't support OpenType fonts and only TrueType fonts. Maybe it could use a little work up.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">minosha1212</div><div class="date">17th September 2008, 17:18</div></div><div class="posttext">Originally posted by kichik <br />
I'd guess the fontname plug-in doesn't support OpenType fonts and only TrueType fonts. Maybe it could use a little work up.  <br />
<br />
Yeah that is what I guessed as well.  <br />
<br />
I'll try another route then.  Thanks for the assistance. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">minosha1212</div><div class="date">17th September 2008, 17:38</div></div><div class="posttext">So I gave the fonts.dll plugin you wrote a long time ago a shot (I dug it up out of this forum).  That seemed to have done the trick.  So I think I'll stick with that route. <br />
<br />
Thanks again :p.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">7th October 2008, 23:38</div></div><div class="posttext">Originally posted by minosha1212 <br />
So I gave the fonts.dll plugin you wrote a long time ago a shot (I dug it up out of this forum).  That seemed to have done the trick.  So I think I'll stick with that route. <br />
<br />
Thanks again :p.  <br />
<br />
I am tackling the same problem, I was going to use InstallFONFont instead and see if that would work, but it requires two parameters.  When I look at the script here, I don't see what the second parameter is needed for, because it looks like it is never used:<br />
http://nsis.sourceforge.net/Register_Fonts</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">7th October 2008, 23:52</div></div><div class="posttext">This seems to work.  I don't know what is expected for font name, but I just used the filename minus the extension.  If anyone sees a potential side effect of this let me know.  I tried reading the code for InstallFONFont, but like I said, it looks like the second parameter is never used.<br />
<br />
!insertmacro InstallFONFont '${FontsSourcePath}\Common\Special\Fonts\texgyreheros-bold.otf' texgyreheros-bold</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>