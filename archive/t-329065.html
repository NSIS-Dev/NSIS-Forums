<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Identifying multiple uninstallers, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Identifying multiple uninstallers NSIS Discussion" />
	
	<title> Identifying multiple uninstallers [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Identifying multiple uninstallers</div>
<hr />
<div class="pda"><a href="t-329065.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329065">Identifying multiple uninstallers</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sproket</div><div class="date">29th March 2011, 16:39</div></div><div class="posttext">I have looked through several threads and have yet to find the answer to the following.<br />
<br />
I have multiple instances of a program and each has its own install directory with its own copy of the uninstaller.  The installer has a field called &quot;instance name&quot; which is recorded in the registry like this:<br />
<br />
HKLM &quot;SOFTWARE\@vendor.name@\@product.name@ @product.version@\installs\$instance&quot;<br />
<br />
which works fine. This key contains the root path of the install. <br />
<br />
I would like to uninstall the instance of the program that corresponds to the uninstaller that is executed but the Uninstall section does not retain the variable &quot;$instance&quot; that the user entered at install time.<br />
<br />
Any ideas? <br />
<br />
TIA :confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th March 2011, 18:12</div></div><div class="posttext">You need to save $instance in the registry or in a file. Variables don't get magically saved into the output uninstaller executable (although that would be cool). You could in theory write the uninstaller executable and then append the value of $instance on the end and then read it byte by byte in the uninstaller but I've not tried that. In theory it's doable as it's a common method of providing copies of an installer executable tailored to a particular user without rebuilding it. If there is some other way of getting the current instance (e.g. if it's a version number then read it from a DLL or EXE file in the current directory) then use that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sproket</div><div class="date">29th March 2011, 20:22</div></div><div class="posttext">Thanks. That's what I thought. I would be nice if the uninstaller kept the variables.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">30th March 2011, 09:01</div></div><div class="posttext">Appending bytes to uninstall.exe is easy and works fine. Just make sure to add some form of error checking, because the appended bytes are not included in the uninstaller's crc check.<br />
<br />
Edit: http://forums.winamp.com/showthread.php?t=321792#13  has an example.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>