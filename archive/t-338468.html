<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Conditional Compilation !define, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Conditional Compilation !define NSIS Discussion" />
	
	<title> Conditional Compilation !define [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Conditional Compilation !define</div>
<hr />
<div class="pda"><a href="t-338468.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=338468">Conditional Compilation !define</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Wurstteppich</div><div class="date">29th November 2011, 17:35</div></div><div class="posttext">Hi,<br />
<br />
currently we have a software project, which calls the installer compilation after the compilation of the main product. Since we also have customer specific distributions, we use<br />
<br />
<br />
 /D during compile time to set &quot;changing&quot; definitions, which changes with each built, like product version number<br />
 a settings.nsh, where we set not changing definitions, but specific to this distribution, like branded application names<br />
 a settings_pre.nsh, which containts definitions, which will be common in all distributions, but which should be able to be changable<br />
<br />
<br />
The .nsh files are loaded in the main .nsh script at the beginning in the following order:<br />
<br />
!include &quot;settings_pre.nsh&quot;<br />
!include &quot;settings.nsh&quot;<br />
!include &quot;variables.nsh&quot;<br />
<br />
<br />
!define APPNAME &quot;App Name&quot;<br />
!define APPBINARYNAME &quot;App Binary Name&quot;<br />
!define APPCONFIGNAME &quot;App Config Name&quot;<br />
...<br />
...<br />
<br />
<br />
The settings.nsh looks like that, but setting the common definitions, however APPCONFIGNAME for example is also in it and should be overwritten in the later loaded settings.nsh, if it exists there.<br />
<br />
<br />
My specific problem is the &quot;already defined&quot; error, if a definition was already set, but maybe changed during compiling the installer or in the settings.nsh.<br />
<br />
Therefore the following questions arise:<br />
<br />
1) Do the /D commands during compile time overwrite !define in the script?<br />
2) How can I accomplish that definitions &quot;maybe&quot; loaded by the settings.nsh overwrite definitions in the settings_pre.nsh (you could call it &quot;standard definition file&quot;)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">29th November 2011, 19:53</div></div><div class="posttext">!ifdef foo<br />
  !undef foo<br />
!endif<br />
!define foo bar<br />
<br />
or you could create a macro for those lines<br />
!macro redefine a b<br />
  !ifdef ${a}<br />
    !undef ${a}<br />
  !endif<br />
  !define ${a} `${b}`<br />
!macroend<br />
!define redefine &quot;!insertmacro redefine&quot;<br />
<br />
and call it like this${redefine} foo &quot;bar and a half&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>