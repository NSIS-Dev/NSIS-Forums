<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Nsis 2.25 - compilation problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Nsis 2.25 - compilation problem NSIS Discussion" />
	
	<title> Nsis 2.25 - compilation problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Nsis 2.25 - compilation problem</div>
<hr />
<div class="pda"><a href="t-268726.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=268726">Nsis 2.25 - compilation problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 00:42</div></div><div class="posttext">Hello<br />
New version of Nsis (2.25) have been released. I have a problem with compilation nsis menu. <br />
Could anybody tell me what I have to do to compile nsis 2.25 sources with scons? <br />
I type scons in cmd and I get error:<br />
...<br />
*** error: WXWIN must be set to build NSIS Menu!<br />
scons: *** [build\release\NSIS Menu\NSIS] Error 1<br />
scons: building terminated because of errors.<br />
C:\Program Files\NSIS\src&gt;<br />
 <br />
WXWIN must be set to build NSIS Menu! -&gt; what is that mean?<br />
What I have to do? <br />
I have installed in my system wxWidgets-2.8.0.<br />
Thanks for any help<br />
regards<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 10:29</div></div><div class="posttext">OK. I have added system environment variable:<br />
WXWIN E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0<br />
<br />
Then I run bat file wxbuild.bat from this folder:<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx<br />
<br />
After this I should compile NSIS with no errors... but I got this error message:<br />
<br />
<br />
C:\Program Files\NSIS\src&gt;scons<br />
scons: Reading SConscript files ...<br />
Delete(&quot;nsis-01-Apr-2007.cvs&quot;)<br />
Delete(&quot;.instdist&quot;)<br />
Delete(&quot;.test&quot;)<br />
Using Microsoft tools configuration<br />
Checking for memset requirement... (cached) yes<br />
Checking for C library gdi32... (cached) yes<br />
Checking for C library user32... (cached) yes<br />
Checking for C library pthread... (cached) no<br />
Checking for C library stdc++... (cached) no<br />
Checking for C library iconv... (cached) no<br />
Checking for C library version... (cached) yes<br />
Checking for C library dl... (cached) no<br />
Checking for C library gdi32... (cached) yes<br />
Checking for C library iconv... (cached) no<br />
Checking for C library pthread... (cached) no<br />
Checking for C library user32... (cached) yes<br />
Checking for C++ library cppunit... (cached) no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
link /nologo /opt:nowin98 /map &quot;/OUT:build\release\NSIS Menu\NSIS.exe&quot; &quot;/LIBPATH:E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\lib\vc_lib<br />
nsis&quot; advapi32.lib comctl32.lib gdi32.lib shell32.lib user32.lib wxbase28.lib wxmsw28_core.lib wxmsw28_html.lib &quot;build\release\NSIS Menu\nsismenu<br />
\nsismenu.obj&quot; &quot;build\release\NSIS Menu\nsismenu\nslinks.obj&quot; &quot;build\release\NSIS Menu\nsismenu-rc.res&quot;<br />
LINK : fatal error LNK1181: cannot open input file 'wxbase28.lib'<br />
scons: *** [build\release\NSIS Menu\NSIS.exe] Error 1181<br />
scons: building terminated because of errors.<br />
C:\Program Files\NSIS\src&gt;<br />
<br />
What I have to do yet, to compile nsis sources correctly...<br />
regards<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st April 2007, 18:09</div></div><div class="posttext">Does that library exist in E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\lib\vc_libnsis? If not, wxbuild.bat failed for some reason.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 19:23</div></div><div class="posttext">Originally posted by kichik <br />
Does that library exist in E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\lib\vc_libnsis? If not, wxbuild.bat failed for some reason.  <br />
<br />
No. This library doesn't exist. The wxbase28.lib doesn't exist on my system - I have scanned all my disk.<br />
May I install new wxWidgets? There is a new version (wxMSW-2.8.3-Setup.exe)...<br />
<br />
Any idea to correct this?<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st April 2007, 19:29</div></div><div class="posttext">I'm using 2.8.0. Run wxbuild.bat again and watch closely for errors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 19:43</div></div><div class="posttext">Originally posted by kichik <br />
I'm using 2.8.0. Run wxbuild.bat again and watch closely for errors.  <br />
<br />
<br />
This is my wxbuild.bat file:<br />
<br />
<br />
if not exist &quot;%WXWIN%\build\msw\makefile.vc&quot; goto error<br />
set OLDCD=%CD%<br />
cd /D &quot;%WXWIN%\build\msw&quot;<br />
copy /y &quot;%WXWIN%\include\wx\msw\setup.h&quot; &quot;%OLDCD%\old_setup.h&quot;<br />
copy /y &quot;%OLDCD%\setup.h&quot; &quot;%WXWIN%\include\wx\msw\setup.h&quot;<br />
rd /S ..\..\lib\vc_libnsis<br />
rd /S vc_mswnsis<br />
nmake -f makefile.vc CFG=nsis BUILD=release RUNTIME_LIBS=dynamic SHARED=0 UNICODE=0 WXUNIV=0 USE_OPENGL=0 USE_ODBC=0 USE_HTML=1 USE_XRC=0 <br />
copy /y &quot;%OLDCD%\old_setup.h&quot; &quot;%WXWIN%\include\wx\msw\setup.h&quot;<br />
cd /D &quot;%OLDCD%&quot;<br />
goto done<br />
:error<br />
echo WXWIN is not properly set<br />
:done<br />
 <br />
<br />
I run this bat file using windows cmd:<br />
Two times I type T (it means Yes) on script question.<br />
This is the results:<br />
<br />
<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;wxbuild.bat<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;if not exist &quot;E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw\makef<br />
ile.vc&quot; goto error<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;set OLDCD=C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;cd /D &quot;E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&quot;<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;copy /y &quot;E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\inc<br />
lude\wx\msw\setup.h&quot; &quot;C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx\old_setup.h&quot;<br />
Liczba skopiowanych plikÃ³w:         1.<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;copy /y &quot;C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx\setup.h&quot; &quot;<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\include\wx\msw\setup.h&quot;<br />
Liczba skopiowanych plikÃ³w:         1.<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;rd /S ..\..\lib\vc_libnsis<br />
..\..\lib\vc_libnsis, Czy na pewno (T/N)? T<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;rd /S vc_mswnsis<br />
vc_mswnsis, Czy na pewno (T/N)? T<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;nmake -f makefile.vc CFG=nsis BUILD=release RUNTIME_LIBS=dynamic S<br />
HARED=0 UNICODE=0 WXUNIV=0 USE_OPENGL=0 USE_ODBC=0 USE_HTML=1 USE_XRC=0<br />
<br />
Microsoft (R) Program Maintenance Utility   Version 7.00.8882<br />
Copyright (C) Microsoft Corp 1988-2000. All rights reserved.<br />
<br />
        if not exist vc_mswnsis mkdir vc_mswnsis<br />
        if not exist ..\..\lib\vc_libnsis mkdir ..\..\lib\vc_libnsis<br />
        if not exist ..\..\lib\vc_libnsis\msw mkdir ..\..\lib\vc_libnsis\msw<br />
        if not exist ..\..\lib\vc_libnsis\msw\wx mkdir ..\..\lib\vc_libnsis\msw\wx<br />
        if not exist ..\..\lib\vc_libnsis\msw\wx\setup.h copy ..\..\include\wx\msw\setup.h ..\..\lib\vc_libnsis\msw\wx\setup.h<br />
Liczba skopiowanych plikÃ³w:         1.<br />
        if not exist ..\..\lib\vc_libnsis\msw\wx\msw mkdir ..\..\lib\vc_libnsis\msw\wx\msw<br />
        cl /EP /nologo &quot;..\..\include\wx\msw\genrcdefs.h&quot; &gt; &quot;..\..\lib\vc_libnsis\msw\wx\msw\rcdefs.h&quot;<br />
Nazwa 'cl' nie jest rozpoznawana jako polecenie wewnÄ™trzne lub zewnÄ™trzne,<br />
program wykonywalny lub plik wsadowy.<br />
NMAKE : fatal error U1077: 'cl' : return code '0x1'<br />
Stop.<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;copy /y &quot;C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx\old_setup.<br />
h&quot; &quot;E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\include\wx\msw\setup.h&quot;<br />
Liczba skopiowanych plikÃ³w:         1.<br />
<br />
E:\Programy\Microsoft Visual Studio 8\wxWidgets-2.8.0\build\msw&gt;cd /D &quot;C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&quot;<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;goto done<br />
<br />
C:\Program Files\NSIS\src\Contrib\NSIS Menu\wx&gt;<br />
<br />
<br />
There is some error, but don't know what does it mean...<br />
-pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st April 2007, 19:45</div></div><div class="posttext">Looks like it can't find cl.exe. Make sure it's properly set in the PATH.Nazwa 'cl' nie jest rozpoznawana jako polecenie wewnÄ™trzne lub zewnÄ™trzne, program wykonywalny lub plik wsadowy.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 19:58</div></div><div class="posttext">Yes. I have added this line to environment variable.<br />
<br />
Properly means like that:?<br />
<br />
<br />
CL  E:\Programy\Microsoft Visual Studio 8\VC\bin<br />
<br />
It must be here? Or somwhere else?<br />
It doesn't work...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st April 2007, 20:02</div></div><div class="posttext">It's probably be easier to open the build environment from the start menu group of Visual Studio.<br />
<br />
Either that, or build NSIS without NSIS Menu. Just run:scons SKIPUTILS=&quot;NSIS Menu&quot;The NSIS Menu doesn't really change according to scons settings.<br />
<br />
Coming to think of it, you don't pass any settings to scons. Why rebuild from source at all?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 20:12</div></div><div class="posttext">Building NSIS without NSIS Menu works, but why compiling everything doesn't work at my computer, and at Your for example works?<br />
I want to have possibility to compile everything...<br />
<br />
<br />
Anyway, Thanks for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st April 2007, 20:19</div></div><div class="posttext">It doesn't work for you because you haven't set PATH correctly for Visual C and nmake can't find cl. Try opening the build environment from the start menu group of Visual Studio and run wxbuild.bat from there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">1st April 2007, 20:43</div></div><div class="posttext">Originally posted by kichik <br />
It doesn't work for you because you haven't set PATH correctly for Visual C and nmake can't find cl. Try opening the build environment from the start menu group of Visual Studio and run wxbuild.bat from there.  <br />
<br />
Yuppii!!!!!<br />
It works! Thanks for your time and help! <br />
I hope that soon I will finish translating nsis on polish language and compiling it. But it is many, many work...<br />
<br />
Ps: My PATH environment variable was broken (I suppose).<br />
<br />
Best regards<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd April 2007, 05:34</div></div><div class="posttext">I also can't compile nsis 2.25, my problem is the nsis menu, everything compiles fine except the nsis menu exe.<br />
here is the error i get:<br />
<br />
&quot;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\bin\Win64\li<br />
nk.exe&quot; /nologo /opt:nowin98 /map &quot;/OUT:build\release\NSIS Menu\NSIS.exe&quot; /LIBPA<br />
TH:C:\wxWidgets-2.8.0\lib\vc_libnsis advapi32.lib comctl32.lib gdi32.lib shell32<br />
.lib user32.lib wxbase28.lib wxmsw28_core.lib wxmsw28_html.lib &quot;build\release\NS<br />
IS Menu\nsismenu\nsismenu.obj&quot; &quot;build\release\NSIS Menu\nsismenu\nslinks.obj&quot; &quot;b<br />
uild\release\NSIS Menu\nsismenu-rc.res&quot;<br />
LINK : fatal error LNK1104: cannot open file 'msvcprt.lib'<br />
scons: *** [build\release\NSIS Menu\NSIS.exe] Error 1104<br />
scons: building terminated because of errors.<br />
D:\Scripts NSIS\NSIS-20070401&gt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd April 2007, 11:14</div></div><div class="posttext">Looks like you're missing a critical part of the compiler. Do you have msvcprt.lib in your compiler LIB path?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd April 2007, 17:16</div></div><div class="posttext">i tried to add C:\platform\lib/amd64 to the LIB variable but i still get the same error.<br />
I'm using Vista 64, Toolit 3003 and platform SDK R2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd April 2007, 20:52</div></div><div class="posttext">And the command line? Did you use MSTOOLKIT=yes?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd April 2007, 21:29</div></div><div class="posttext">Hmm... Where did msvcprt.lib come from? It's not part of the VC Toolkit or the Platform SDK. Seems like you've used nmake from a different set of build tools than the one used for building NSIS.<br />
<br />
Delete vc_libnsis and vc_mswnsis from wxWidgets and build again using the VC Toolkit.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>