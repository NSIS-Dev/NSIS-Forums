<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ioSpecial.ini - a button vanishes and appears on mouse hover, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ioSpecial.ini - a button vanishes and appears on mouse hover NSIS Discussion" />
	
	<title> ioSpecial.ini - a button vanishes and appears on mouse hover [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ioSpecial.ini - a button vanishes and appears on mouse hover</div>
<hr />
<div class="pda"><a href="t-259989.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=259989">ioSpecial.ini - a button vanishes and appears on mouse hover</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dePalma</div><div class="date">20th November 2006, 14:53</div></div><div class="posttext">Hi all!<br />
I've got a problem to work one thing in NSIS. I searched through the forum archive, but didn't find a solution.<br />
I try to tweak the uninstall welcome page this way:<br />
!define MUI_UNWELCOMEFINISHPAGE_INI &quot;MyIoSpecial.ini&quot;<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE un.MyPagePre<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW un.MyPageShow<br />
!insertmacro MUI_UNPAGE_WELCOME<br />
And put proper tweaks in MyIoSpecial.ini (it differs from standard ioSpecial.ini with the section [Field 4] and number of fields):<br />
[Settings]<br />
Rect=1044<br />
NumFields=4<br />
<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=109<br />
Top=0<br />
Bottom=193<br />
Flags=RESIZETOFIT<br />
<br />
[Field 2]<br />
Type=Label<br />
Left=120<br />
Right=315<br />
Top=10<br />
Bottom=59<br />
<br />
[Field 3]<br />
Type=Label<br />
Left=120<br />
Right=315<br />
Top=67<br />
Bottom=132<br />
<br />
[Field 4]<br />
Type=Button<br />
Left=120<br />
Top=148<br />
Right=194<br />
Bottom=163<br />
Text=Button1<br />
<br />
Then I implement the declared functions:<br />
Function un.MyPagePre<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Settings&quot; &quot;NumFields&quot; &quot;4&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;State&quot; &quot;$INSTDIR\Action.exe&quot;<br />
FunctionEnd<br />
<br />
Function un.MyPageShow<br />
FunctionEnd<br />
<br />
And I get a strange behaviour (similiar to the one described in here (http://forums.winamp.com/showthread.php?postid=1576516#post1576516)). Initially no button is displayed, but when I hover the mouse over the space where the button is supposed to be it appears, but when I change the focus to any other window and then back to my installer, the button vanishes again, but will appear after another hover. What might be the problem?<br />
I'm using NSIS 2.21.<br />
<br />
Have you got any ideas? 'Cause I'm stuck. Google doesn't say anything.<br />
Thanks,<br />
Wojtek</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th November 2006, 18:06</div></div><div class="posttext">It's covered up by a Label control which needs to be reduced in size.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dePalma</div><div class="date">21st November 2006, 07:51</div></div><div class="posttext">It's covered up by a Label control which needs to be reduced in size.<br />
 <br />
<br />
Ok, it's strange. Maybe I don't understand the NSIS correctly. I viewed the generated ioSpecial.ini in $PLUGINSDIR and you were right - it tweaked the labels settings and the label in fact covered the button. But why? Now I'm just asking out of curiosity.<br />
<br />
I fixed it by forcing the size of the label:<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 3&quot; &quot;Bottom&quot; &quot;132&quot;<br />
I forgot to thank you Stu, so: Thank you :)<br />
Wojtek</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dePalma</div><div class="date">21st November 2006, 07:59</div></div><div class="posttext">I've got another quick question regarding a button: Is it possible to set State argument in ini to open an exe with a parameter? I know it uses ShellExecute. So how to pass parameters to the executable? I couldn't find any info in InstallOptions readme.<br />
<br />
<br />
Wojtek</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st November 2006, 18:33</div></div><div class="posttext">The MUI automatically adjusts ioSpecial.ini for specific settings. Take $PLUGINSDIR\ioSpecial.ini when running and use that as a reference instead of Contrib\Modern UI\ioSpecial.ini.<br />
<br />
As for the button, you can use the NOTIFY flag and then execute whichever code you wish, including Exec or ExecWait.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dePalma</div><div class="date">22nd November 2006, 08:07</div></div><div class="posttext">As for the button, you can use the NOTIFY flag and then execute whichever code you wish, including Exec or ExecWait.  <br />
<br />
Hi!<br />
I know about this feature, but I didn't know how to use it when redefining uninstall welcome page. Now I realized I should put the callback code for NOTIFY flag in Leave function defined like this:<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE un.MyPageLeave<br />
Function un.MyPageLeave<br />
    ReadINIStr $0 &quot;$PLUGINSDIR\ioSpecial.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
    StrCmp $0 4 buttonAtField4Clicked end<br />
    buttonAtField4Clicked:<br />
    Exec &quot;$INSTDIR\someexe.exe 'someparams'&quot;<br />
    Abort ;needed to properly return to the page and not to continue to next page<br />
    end:<br />
FunctionEnd <br />
I provided the answer, because maybe somebody else will use it.<br />
<br />
It works great! Thanks!<br />
Wojtek</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>