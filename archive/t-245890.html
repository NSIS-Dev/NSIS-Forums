<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Math plugin help, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Math plugin help NSIS Discussion" />
	
	<title> Math plugin help [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Math plugin help</div>
<hr />
<div class="pda"><a href="t-245890.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245890">Math plugin help</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">10th May 2006, 19:54</div></div><div class="posttext">Hello all.<br />
<br />
Well I made a little nsis script to read all txt files in a folder, inspecting them based on some criteria.  This works just fine.  The inspection process takes place in a function, and therefore the progress bar does not accurately display the true progress of the script.<br />
<br />
What I would like to do is use Stu's RealProgress plug-in to manually set the progress bar.  My strategy (feel free to offer up an alternative) is to get then number of files in the folder, say 250, then divide by 100, giving me 2.5 in this case.<br />
<br />
Then after checking each file, I do this:<br />
<br />
(after 1 file checked)<br />
$NumFilesChecked/2.5 = .4 --&gt; rounded = $CurrentProgress<br />
RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br />
<br />
(after 2 files checked)<br />
$NumFilesChecked/2.5 = .8 --&gt; rounded = $CurrentProgress<br />
RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br />
<br />
(after 3 files checked)<br />
$NumFilesChecked/2.5 = 1.2 --&gt; rounded = $CurrentProgress<br />
RealProgress::SetProgress /NOUNLOAD $CurrentProgress<br />
<br />
Ok, so you get it right.  If this is an acceptable strategy for manually setting the RealProgress bar, I just need the syntax for using the Math Plug-in to do decimal division, and rounding (separately).<br />
<br />
I have searched like crazy, but just can't seem to understand the math::script usage, can you help me?  Thanks all for looking.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th May 2006, 20:03</div></div><div class="posttext">$CurrentFile / $TotalFiles * 100<br />
<br />
Progress bar value should be out of 100, i.e. a percentage figure with no decimal point.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">10th May 2006, 22:56</div></div><div class="posttext">Hi Stu, your right, that makes more sense.  But I'm still going to need the math plugin for that right, otherwise with IntOp I'll lose the decimals: (IntOp $0 2 / 250 ) equals 0, when it really is .008 right?<br />
<br />
Can I get the syntax for the math plug in to do that division, multiplication, and rounding?  Or am I still missing something?  Thanks so much for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">11th May 2006, 01:03</div></div><div class="posttext">I would question whether or not the decimal numbers really matter with a progress bar.  As long as you are relatively close, it will still give the end user a relative idea of how far into a process your install really is.<br />
<br />
If you still decide you need to do floating point operations, you might take a look at the this floating op (http://nsis.sourceforge.net/FloatOP_plug-in) plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">11th May 2006, 19:32</div></div><div class="posttext">Thanks guys, got it to work!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>