<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Exclude files/directories in File command, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Exclude files/directories in File command NSIS Discussion" />
	
	<title> Exclude files/directories in File command [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Exclude files/directories in File command</div>
<hr />
<div class="pda"><a href="t-184438.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=184438">Exclude files/directories in File command</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">24th June 2004, 20:13</div></div><div class="posttext">I know this has been discussed before, I just would like to know if there are any plans to add file exclusion to the file command (maybe) by adding another switch?<br />
<br />
It would be cool for CVS (or, in my case, subversion) users. Also, Windows tends to create system files like thumbs.db in some directories. I find it annoying to package and deploy these files.<br />
<br />
Kind regards,<br />
<br />
Steve</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th June 2004, 20:16</div></div><div class="posttext">Plans? Of course. Time? No. Patches by users? Of course not...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">24th June 2004, 22:16</div></div><div class="posttext">I made a program to do this as I ran into the exact same problem you're describing &quot;e-novative&quot;.  The lengthy discussion of creating such a program can be found here.  <br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=150770 <br />
<br />
I believe there is a link somewhere in that discussion to the program.  I really should have kichik or another admin make it available in the archives. I'm just lazy I suppose.<br />
<br />
I've also been working on a custom tool which has this ability soon to be made available on SourceForge.  I will post more details as that project progresses.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">25th June 2004, 11:12</div></div><div class="posttext">Rob,<br />
<br />
thanks for your help. I am trying to use your solution, but I seem to do something wrong. I replaced<br />
<br />
File /r &quot;..\environment\*.*&quot;<br />
<br />
by<br />
<br />
!insertmacro FOLDER_LIST_RECURSIVE &quot;..\environment\*.*&quot; &quot;.svn&quot;<br />
<br />
to get rid of the .svn subdirectories (created by Subversion, a CVS-kind-of-thing). The removal does work as expected, also the recursion, but all files in those directories having subdirectories are missing.<br />
<br />
Any idea what is wrong?<br />
<br />
Steve</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">25th June 2004, 15:48</div></div><div class="posttext">I'm quite familiar with Subversion, we use it at my workplace.  Used CVS before that.  That was really the main force behind creating this program.<br />
<br />
I believe you need to have the full path name for the folder<br />
you want to include.  So instead of having this...<br />
<br />
!insertmacro FOLDER_LIST_RECURSIVE &quot;..\\environment\\*.*&quot; &quot;.svn&quot;<br />
<br />
have something like this,<br />
<br />
!insertmacro FOLDER_LIST_RECURSIVE &quot;c:\\environment\\*.*&quot; &quot;.svn\\&quot;<br />
<br />
I assume you have a different path to the environment folder but you get the idea.  Folders that you want to ignore should also have a &quot;\&quot; character suffixed to them.  Although you said it worked for you without a slash so maybe I'm wrong.<br />
<br />
Anyways that should work for you.  Let me know the results.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">29th June 2004, 10:17</div></div><div class="posttext">Rob,<br />
<br />
thanks again for the help. I still do not quite get the desired results. Basically, the .svn subdirectories are excluded as desired, but I have non-excluded files missing on the target system.<br />
<br />
This is what I am using:<br />
<br />
  !insertmacro FOLDER_LIST_RECURSIVE &quot;C:\Dokumente und Einstellungen\Steve\Desktop\wamp\environment\*.*&quot; &quot;.svn\&quot;<br />
<br />
Now, the environment directory contains various subdirectories, which contain files and/or subdirectories.<br />
<br />
I copy the environment dir to my installation dir using  SetOutPath &quot;$INSTDIR&quot;. Here's what happens: Subdirectories of environment that only contain files are okay; but for subdirectories of environment that contain files and subdirectories, the subdirectories (with the files in them) show up correctly, but the files in environment/subdirectory are missing<br />
<br />
Needless to say that these files do not match the .svn exclusion rule. I suspect there might be a bug in the folderlist.exe that somehow skips the _files_ at the first subdirectory level but does process the _directories_ in there? Can someone confirm this or am I just plain stupid and doing something terribly wrong?<br />
<br />
By the way, the behaviour seems the same when I use relative paths. Is there a way to get the current direcory at NSIS compile time, something like ${__DIR__}? If there is not, it might be a good idea to add this to make absolute path construction at compile time easier.<br />
<br />
Kind regards,<br />
<br />
Stefan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">29th June 2004, 16:57</div></div><div class="posttext">Stefan I'm hoping you just download an older version of FolderList, so here's the latest verison I have.  I tried it and it works great for me.  Hopefully it'll work for you as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">29th June 2004, 22:11</div></div><div class="posttext">Rob, you're the man. If you ever come to Munich, drop me a note, and I'll buy you a beer. Seriously.<br />
<br />
I did not use the latest version of FolderList.exe since the one you posted did not work for me right away: msvcp71.dll and msvcr71.dll were missing on my system (the older versions of FolderList obviously did not require them). I guess they come with .net or some MS IDE's/compilers, but you can find and download them somewhere if you kindly ask Google.<br />
<br />
I put them im the same directory as FolderList.exe, and since then things work perfectly.<br />
<br />
Thanks again for all the help, Rob!<br />
<br />
Steve</div></div><hr />


<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">29th June 2004, 23:10</div></div><div class="posttext">Just another short note: relative paths also work for me. This simplifies your life quite a bit ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">29th June 2004, 23:11</div></div><div class="posttext">msvcp71.dll and msvcr71.dll were missing on my system (the older versions of FolderList obviously did not require them). I guess they come with .net or some MS IDE's/compilers, but you can find and download them somewhere if you kindly ask Google.<br />
<br />
Yes the original version was created under Visual Studio 6, my latest version was created under Visual Studio .NET, I wasn't aware those DLL's weren't included with all Windows distributions.  That's good to know, thanks.<br />
<br />
<br />
Rob, you're the man. If you ever come to Munich, drop me a note, and I'll buy you a beer. Seriously.<br />
<br />
<br />
Yeh sounds good to me.  Isn't it against the law to turn down free beer?  If you found FolderList useful you may find the new tool I created useful as well.  You can find details on it here...<br />
<br />
https://sourceforge.net/projects/installgen<br />
<br />
I'm constantly working on upgrading it but it is presently in a useable state.  I will post updates to the tool on the NSIS forum as I make them here...<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=185006</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">30th June 2004, 15:19</div></div><div class="posttext">Originally posted by e-novative <br />
Just another short note: relative paths also work for me. This simplifies your life quite a bit ...  <br />
<br />
Indeed it does, thanks for the feedback.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>