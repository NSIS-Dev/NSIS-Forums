<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Large Header/Welcome Bitmap, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Large Header/Welcome Bitmap NSIS Discussion" />
	
	<title> Large Header/Welcome Bitmap [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Large Header/Welcome Bitmap</div>
<hr />
<div class="pda"><a href="t-331112.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=331112">Large Header/Welcome Bitmap</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">31st May 2011, 11:45</div></div><div class="posttext">Hey guys,<br />
<br />
i got a problem with MUI2.<br />
I want to show one header image and one welcome image.<br />
This is no problem. I use<br />
!define MUI_HEADERIMAGE_BITMAP<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP<br />
<br />
But my image is larger then the area and i want that the image is in the background of the text. <br />
I dont want a big background, only a transparent large bitmap for the header and welcome page.<br />
<br />
Hope you can help me<br />
<br />
Kind regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">31st May 2011, 14:53</div></div><div class="posttext">At the moment I have changed Welcome.nsh<br />
;Image control<br />
    ${NSD_CreateBitmap} 0u 0u 199u 193u &quot;&quot;<br />
    Pop $mui.WelcomePage.Image<br />
It works. But my problem is to bring the image in the background and the text to the front.<br />
<br />
would be nice, if anyone has an idea :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">31st May 2011, 15:35</div></div><div class="posttext">Create the bmp control first, then the text after that. Z-order is determined by order of creation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">1st June 2011, 08:41</div></div><div class="posttext">THX :)<br />
And how can i do this?<br />
<br />
I have to change the order of Welcome.nsh or in my NSI script? Sorry dont know :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st June 2011, 09:06</div></div><div class="posttext">Well you said you changed the welcome page nsh file, so I'm assuming you inserted the bmp control creation in welcome.nsh. In that case you can just move it up a couple of lines so that it's created before the labels etc are created.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">1st June 2011, 09:20</div></div><div class="posttext">The image controler is already above the text or i am a little stupid : P<br />
<br />
 !insertmacro MUI_PAGE_FUNCTION_CUSTOM PRE  <br />
<br />
    ;Create dialog<br />
    nsDialogs::Create 1044<br />
    Pop $mui.WelcomePage<br />
    nsDialogs::SetRTL $(^RTL)<br />
    SetCtlColors $mui.WelcomePage &quot;&quot; &quot;${MUI_BGCOLOR}&quot;    <br />
<br />
  	;Image control<br />
    ${NSD_CreateBitmap} 0u 0u 199u 193u &quot;&quot;<br />
    Pop $mui.WelcomePage.Image<br />
    !ifndef MUI_${MUI_PAGE_UNINSTALLER_PREFIX}WELCOMEFINISHPAGE_BITMAP_NOSTRETCH<br />
      ${NSD_SetStretchedImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br />
    !else<br />
      ${NSD_SetImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br />
    !endif<br />
	<br />
    <br />
<br />
    ;Positiong of controls<br />
<br />
    ;Title    <br />
    !ifndef MUI_WELCOMEPAGE_TITLE_3LINES<br />
      !define MUI_WELCOMEPAGE_TITLE_HEIGHT 28<br />
    !else<br />
      !define MUI_WELCOMEPAGE_TITLE_HEIGHT 38<br />
    !endif<br />
    <br />
<br />
	<br />
    ;Text<br />
    ;17 = 10 (top margin) + 7 (distance between texts)<br />
    !define /math MUI_WELCOMEPAGE_TEXT_TOP 17 + ${MUI_WELCOMEPAGE_TITLE_HEIGHT}<br />
<br />
	<br />
	<br />
    ;Title<br />
    ${NSD_CreateLabel} 120u 10u 195u ${MUI_WELCOMEPAGE_TITLE_HEIGHT}u &quot;${MUI_WELCOMEPAGE_TITLE}&quot;<br />
    Pop $mui.WelcomePage.Title<br />
    SetCtlColors $mui.WelcomePage.Title &quot;&quot; &quot;${MUI_BGCOLOR}&quot;    <br />
    CreateFont $mui.WelcomePage.Title.Font &quot;$(^Font)&quot; &quot;12&quot; &quot;700&quot;<br />
    SendMessage $mui.WelcomePage.Title ${WM_SETFONT} $mui.WelcomePage.Title.Font 0<br />
<br />
    ;Welcome text<br />
    ${NSD_CreateLabel} 120u ${MUI_WELCOMEPAGE_TEXT_TOP}u 195u 130u &quot;${MUI_WELCOMEPAGE_TEXT}&quot;<br />
    Pop $mui.WelcomePage.Text<br />
    SetCtlColors $mui.WelcomePage.Text &quot;&quot; &quot;${MUI_BGCOLOR}&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">1st June 2011, 10:28</div></div><div class="posttext">Thx, solved this problem<br />
<br />
;Title <br />
   ${NSD_CreateLabel} 120u 10u 195u ${MUI_WELCOMEPAGE_TITLE_HEIGHT}u &quot;${MUI_WELCOMEPAGE_TITLE}&quot;<br />
    Pop $mui.WelcomePage.Title<br />
	SetCtlColors $mui.WelcomePage.Title &quot;&quot; &quot;transparent&quot;<br />
	;SetCtlColors $mui.WelcomePage.Title &quot;&quot; &quot;${MUI_BGCOLOR}&quot;    <br />
    CreateFont $mui.WelcomePage.Title.Font &quot;$(^Font)&quot; &quot;12&quot; &quot;700&quot;<br />
    SendMessage $mui.WelcomePage.Title ${WM_SETFONT} $mui.WelcomePage.Title.Font 0   <br />
<br />
<br />
    ;Welcome text<br />
    ${NSD_CreateLabel} 120u ${MUI_WELCOMEPAGE_TEXT_TOP}u 195u 130u &quot;${MUI_WELCOMEPAGE_TEXT}&quot;<br />
	Pop $mui.WelcomePage.Text<br />
	SetCtlColors $mui.WelcomePage.Text &quot;&quot; &quot;transparent&quot;<br />
    ;SetCtlColors $mui.WelcomePage.Text &quot;&quot; &quot;${MUI_BGCOLOR}&quot;<br />
<br />
	<br />
;Image control<br />
    ${NSD_CreateBitmap} 0u 0u 199u 193u &quot;&quot;<br />
    Pop $mui.WelcomePage.Image<br />
    !ifndef MUI_${MUI_PAGE_UNINSTALLER_PREFIX}WELCOMEFINISHPAGE_BITMAP_NOSTRETCH<br />
      ${NSD_SetStretchedImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br />
    !else<br />
      ${NSD_SetImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br />
    !endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">3rd June 2011, 09:11</div></div><div class="posttext">i got another problem!<br />
<br />
Header image and welcome image works fine. But my finish page is not working right.<br />
<br />
All text is in the front of the image with transparent background. Only the readme checkbox and readme text has an background and transparent doesn t work.<br />
<br />
 ;Title text<br />
        ${NSD_CreateLabel} 120u 10u 195u ${MUI_FINISHPAGE_TITLE_HEIGHT}u &quot;${MUI_FINISHPAGE_TITLE}&quot;<br />
        Pop $mui.FinishPage.Title<br />
        SetCtlColors $mui.FinishPage.Title &quot;&quot; &quot;transparent&quot;<br />
        CreateFont $mui.FinishPage.Title.Font &quot;$(^Font)&quot; &quot;12&quot; &quot;700&quot;<br />
        SendMessage $mui.FinishPage.Title ${WM_SETFONT} $mui.FinishPage.Title.Font 0<br />
<br />
        ;Finish text<br />
        !ifndef MUI_FINISHPAGE_RUN &amp; MUI_FINISHPAGE_SHOWREADME<br />
          ${NSD_CreateLabel} 120u ${MUI_FINISHPAGE_TEXT_TOP}u 195u ${MUI_FINISHPAGE_TEXT_HEIGHT}u &quot;${MUI_FINISHPAGE_TEXT}&quot;<br />
        !else<br />
          ${NSD_CreateLabel} 120u ${MUI_FINISHPAGE_TEXT_TOP}u 195u ${MUI_FINISHPAGE_TEXT_HEIGHT_BUTTONS}u &quot;${MUI_FINISHPAGE_TEXT}&quot;<br />
        !endif<br />
        Pop $mui.FinishPage.Text<br />
        SetCtlColors $mui.FinishPage.Text &quot;&quot; &quot;transparent&quot;<br />
    <br />
        ;Checkboxes<br />
        !ifdef MUI_FINISHPAGE_RUN<br />
          ${NSD_CreateCheckbox} 120u ${MUI_FINISHPAGE_RUN_TOP}u 195u 10u &quot;${MUI_FINISHPAGE_RUN_TEXT}&quot;<br />
          Pop $mui.FinishPage.Run<br />
          SetCtlColors $mui.FinishPage.Run &quot;&quot; &quot;transparent&quot;<br />
          !ifndef MUI_FINISHPAGE_RUN_NOTCHECKED<br />
            SendMessage $mui.FinishPage.Run ${BM_SETCHECK} ${BST_CHECKED} 0<br />
          !endif<br />
          ${NSD_SetFocus} $mui.FinishPage.Run<br />
        !endif<br />
        !ifdef MUI_FINISHPAGE_SHOWREADME<br />
          ${NSD_CreateCheckbox} 120u ${MUI_FINISHPAGE_SHOWREADME_TOP}u 195u 10u &quot;${MUI_FINISHPAGE_SHOWREADME_TEXT}&quot;<br />
          Pop $mui.FinishPage.ShowReadme<br />
           SetCtlColors $mui.FinishPage.ShowReadme &quot;&quot; &quot;transparent&quot;<br />
          !ifndef MUI_FINISHPAGE_SHOWREADME_NOTCHECKED<br />
            SendMessage $mui.FinishPage.ShowReadme ${BM_SETCHECK} ${BST_CHECKED} 0<br />
          !endif<br />
          !ifndef MUI_FINISHPAGE_RUN<br />
            ${NSD_SetFocus} $mui.FinishPage.ShowReadme<br />
         !endif<br />
        !endif<br />
<br />
.......<br />
<br />
 ;Image control<br />
    ${NSD_CreateBitmap} 0u 0u 331u 193u &quot;&quot;<br />
    Pop $mui.FinishPage.Image<br />
    !ifndef MUI_${MUI_PAGE_UNINSTALLER_PREFIX}WELCOMEFINISHPAGE_BITMAP_NOSTRETCH<br />
      ${NSD_SetStretchedImage} $mui.FinishPage.Image $PLUGINSDIR\modern-wizard.bmp $mui.FinishPage.Image.Bitmap<br />
    !else<br />
      ${NSD_SetImage} $mui.FinishPage.Image $PLUGINSDIR\modern-wizard.bmp $mui.FinishPage.Image.Bitmap<br />
    !endif<br />
	<br />
    ;Show page<br />
    Call ${MUI_PAGE_UNINSTALLER_FUNCPREFIX}muiPageLoadFullWindow<br />
    !insertmacro MUI_PAGE_FUNCTION_CUSTOM SHOW<br />
    nsDialogs::Show<br />
    Call ${MUI_PAGE_UNINSTALLER_FUNCPREFIX}muiPageUnloadFullWindow</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FlasH_10</div><div class="date">3rd June 2011, 11:08</div></div><div class="posttext">OK solved this problem too, but there is the next problem now.<br />
I have changed the Finish.nsh<br />
!ifdef MUI_FINISHPAGE_SHOWREADME<br />
          ;${NSD_CreateCheckbox} 120u ${MUI_FINISHPAGE_SHOWREADME_TOP}u 195u 10u &quot;${MUI_FINISHPAGE_SHOWREADME_TEXT}&quot;<br />
		  ${NSD_CreateCheckbox} 120u  ${MUI_FINISHPAGE_SHOWREADME_TOP}u 9u 9u &quot;&quot;<br />
		  Pop $0<br />
		  ${NSD_CreateLabel} 132u ${MUI_FINISHPAGE_SHOWREADME_TOP}u 195u 10u &quot;${MUI_FINISHPAGE_SHOWREADME_TEXT}&quot;<br />
          Pop $mui.FinishPage.ShowReadme<br />
          SetCtlColors $mui.FinishPage.ShowReadme &quot;&quot; &quot;${MUI_BGCOLOR}&quot;<br />
          !ifndef MUI_FINISHPAGE_SHOWREADME_NOTCHECKED<br />
            SendMessage $mui.FinishPage.ShowReadme ${BM_SETCHECK} ${BST_CHECKED} 0<br />
          !endif<br />
          !ifndef MUI_FINISHPAGE_RUN<br />
            ${NSD_SetFocus} $mui.FinishPage.ShowReadme<br />
          !endif<br />
        !endif<br />
<br />
But now, my checkbox doesn t work. If i have checked the checkbox, the readme file doesn t open. -.-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">3rd June 2011, 15:04</div></div><div class="posttext">You pop the checkbox's HWND to $0. I'm pretty sure MUI2 always pops it to a varaible, which it would then use later on to check the state.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>