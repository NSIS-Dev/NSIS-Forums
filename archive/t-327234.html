<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to change cursor when it is over the definite control?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to change cursor when it is over the definite control? NSIS Discussion" />
	
	<title> How to change cursor when it is over the definite control? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to change cursor when it is over the definite control?</div>
<hr />
<div class="pda"><a href="t-327234.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327234">How to change cursor when it is over the definite control?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">13th February 2011, 00:18</div></div><div class="posttext">Actually this is my question.<br />
<br />
I have an image on my custom page and it is clickable (works like a link) but nobody knows it works like thine because cursor is not changed from ARROW to HAND. <br />
<br />
Any thoughts how to fix this?<br />
<br />
P.S. I know about  http://sourceforge.net/tracker/?func=detail&amp;aid=2129316&amp;group_id=22049&amp;atid=373088 but anyway maybe ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">13th February 2011, 05:22</div></div><div class="posttext">Using GetWindowRect and GetCursorPos I almost did what I wanted. But once again a problem)) <br />
<br />
Seems the only plug-in which could change cursor - SetCursor - doesn't change pointer over the custom control. Damn ... <br />
<br />
Any thoughts?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">13th February 2011, 14:26</div></div><div class="posttext">Seems I'm talking to myself but anyway ... <br />
<br />
It is possible to load own cursor using LoadImage and SetSystemCursor, but hope you agree it would be stupidly as user may have his own pointers scheme.<br />
<br />
New question)) Does anyone know how to load exactly system cursor using SetSystemCursor function?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jedantamobgd</div><div class="date">13th February 2011, 17:45</div></div><div class="posttext">:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">13th February 2011, 22:22</div></div><div class="posttext">http://nsis.sourceforge.net/SetCursor_Script_Header</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">13th February 2011, 23:05</div></div><div class="posttext">Thank you, jpderuiter. <br />
<br />
The only question: why this macros changes cursor everywhere but not above custom control (image)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th February 2011, 23:19</div></div><div class="posttext">The simple answer is, how should it know that that is what you want? In other words, to do what you want requires more code. Unfortunately, something like this is not doable from NSIS code. You will need to write a plug-in to do it or modify nsDialogs (or InstallOptions). nsDialogs and InstallOptions already change the cursor for links so it would be very similar to that.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">13th February 2011, 23:50</div></div><div class="posttext">Actually there is nothing special in my code. Almost everything was given from this forum.<br />
There is an image which should work like a link. It is dome. <br />
<br />
The only problem is cursor changing. For this purpose logically I have to know rectangle of the image and change cursor pointer when it is out of it's area. It is done too (checked). Unfortunately, exactly above the image SetSystemCursor magically doesn't work  :( <br />
<br />
Function OnClick<br />
   ExecShell &quot;open&quot; &quot;http://google.com&quot;<br />
FunctionEnd<br />
<br />
Function nsImgLink<br />
   Push $0<br />
   Push $1<br />
<br />
   nsDialogs::Create 1018<br />
   Pop $0<br />
<br />
   ${NSD_CreateBitmap} 0 0 100% 100% &quot;&quot;<br />
   Pop $0<br />
   ${NSD_SetImage} $0 $PLUGINSDIR\imagefinish.bmp $1<br />
   Push $1<br />
<br />
   ${NSD_OnClick} $0 OnClick<br />
   var /Global ImageHWND<br />
<br />
   StrCpy $ImageHWND $0<br />
<br />
   GetDlgItem $R0 $HWNDPARENT 2<br />
   SendMessage $R0 ${WM_SETTEXT} `` `STR:&amp;Install&gt;&gt;`<br />
<br />
    System::Call &quot;User32::SetFocus(i) i ($R0) .r0&quot;<br />
   SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $R0 1<br />
   ${NSD_CreateTimer} OnTimer 500<br />
<br />
   nsDialogs::Show<br />
<br />
   Pop $1<br />
   ${NSD_FreeImage} $1<br />
<br />
   Pop $1<br />
   Pop $0<br />
FunctionEnd<br />
<br />
Function Process<br />
    System::Alloc 56<br />
    Pop $0<br />
    System::Call &quot;*$0(i 56)&quot;<br />
    System::Call &quot;User32::GetWindowInfo(i $ImageHWND,i r0) i .r1&quot;<br />
<br />
    ## rcWindow<br />
        IntOp $R0 $0 + 4<br />
        System::Call &quot;*$R0(i .r1,i .r2,i .r3,i .r4)&quot;<br />
<br />
    ## rcClient<br />
        IntOp $R0 $0 + 20<br />
        System::Call &quot;*$R0(i .r5,i .r6,i .r7,i .r8)&quot;<br />
        System::Free $0<br />
<br />
    Pop $hwnd<br />
    System::Call &quot;*(i, i, i, i) i .r1&quot;<br />
    System::Call &quot;User32::GetWindowRect(i, i) i ($ImageHWND, r1) .r2&quot;<br />
    System::Call &quot;*$1(i, i, i, i) i (.r2, .r3, .r4, .r5)&quot;<br />
<br />
;   Get mouse cursor's position on screen<br />
    System::Call &quot;*(l, l) i .r6&quot;<br />
    System::Call &quot;User32::GetCursorPos(i) i (r6) .r7&quot;<br />
    System::Call &quot;*$6(i, i) i (.r7, .r8)&quot;<br />
<br />
;   Derive mouse cursor position relative to control<br />
    IntOp $0 $7 - $2<br />
    IntOp $1 $8 - $3<br />
<br />
     ${If} $0 &gt;= 0<br />
           ${If} $0 &lt; 450<br />
                ${If} $1 &gt;= 0<br />
                      ${If} $1 &lt; 225<br />
                            ${SetSystemCursor} OCR_HAND<br />
                      ${Else}<br />
                            ${SetSystemCursor} OCR_NORMAL<br />
                      ${EndIf}<br />
                ${Else}<br />
                      ${SetSystemCursor} OCR_NORMAL<br />
                ${EndIf}<br />
           ${Else}<br />
                  ${SetSystemCursor} OCR_NORMAL<br />
           ${EndIf}<br />
     ${Else}<br />
           ${SetSystemCursor} OCR_NORMAL<br />
     ${EndIf}<br />
FunctionEnd<br />
<br />
Function OnTimer<br />
         call Process<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">14th February 2011, 00:02</div></div><div class="posttext">seems I did it :) <br />
<br />
SetSystemCursor works with the parent window only and the is no way to point what window I need cursor to be changed on. So in the SetCursor.nsh manually had to change handle from the parent window to handle of my image.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>