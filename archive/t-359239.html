<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Shifting the default text position in NSIS installer pages, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Shifting the default text position in NSIS installer pages NSIS Discussion" />
	
	<title> Shifting the default text position in NSIS installer pages [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Shifting the default text position in NSIS installer pages</div>
<hr />
<div class="pda"><a href="t-359239.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=359239">Shifting the default text position in NSIS installer pages</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">12th April 2013, 06:55</div></div><div class="posttext">I am using a background image for my installer pages, I have set all the other controls transparent. <br />
There is a logo in the background image , which is overlapping with text on installer pages like the text on welcome page, license page etc.<br />
<br />
So is it possible that I can shift the position of this text from default to the one suitable for me, so that my background logo remains visible? Please Help. <br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th April 2013, 07:54</div></div><div class="posttext">For all pages except the welcome and finish pages, I would recommend you modify the UI itself using Resource Hacker. The UI is Contrib\Graphics\UIs\modern.exe - copy to your script directory. You can apply it using !define MUI_UI modern_new.exe. You can just delete a load of controls that you are currently hiding. Be careful though... deleting some controls will result in a compile error so check your script still compiles when you do. For those that you cannot delete, I give them a size of 0, 0 and position them outside the dialog.<br />
<br />
As for the welcome and finish pages, you must either resize the controls at run time using the System plug-in and SetWindowPos or you could make a copy of the MUI source code and modify that instead. In either case it's quite messy.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">12th April 2013, 08:14</div></div><div class="posttext">What control contains the text ? I used resource hacker but couldn't actually move the text position.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th April 2013, 08:16</div></div><div class="posttext">You haven't said which text you are trying to resize so my guess is as good as yours. If you modify it in Resource Hacker make sure you click Compile before saving.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">12th April 2013, 08:29</div></div><div class="posttext">I am trying to reposition text on Welcome page, Install directory page and Finish Page.<br />
And I am compiling and then saving in resource hacker. But couldnt find the right controls I guess.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th April 2013, 08:51</div></div><div class="posttext">As I said the welcome and finish pages need to be repositioned by modifying the Modern UI source code or by moving them at run time using the SetWindowPos API. The welcome and finish pages are not standard dialogs - they are created at run time using the nsDialogs plug-in. The directory page is dialog 103 (the main text control is #1006).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">12th April 2013, 11:42</div></div><div class="posttext">Ok..Thanks Stu. I was able to reposition the text on $instdir page using resource hacker.<br />
But , I am still confused about welcome/finish page.. Even if I use SetWindowPos API as you suggested, I still need to know the Handle of the control that contains the text, isnt it ? Or am I missing something here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th April 2013, 12:36</div></div><div class="posttext">I'm working on a small plug-in which will make control resizing easier. It will be ready in an hour.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">12th April 2013, 12:59</div></div><div class="posttext">Wow. Thats great. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th April 2013, 14:36</div></div><div class="posttext">Sorry I ran out of time and I want to make sure it works for RTL languages.<br />
<br />
For the welcome/finish page control handles, check Contrib\Modern UI 2\Pages\*. There are variables defined for each control.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th April 2013, 18:07</div></div><div class="posttext">Finished the plug-in:<br />
http://nsis.sourceforge.net/NsResize_plug-in<br />
<br />
You can use the nsResize::Add function to increase the size of controls using the same units as nsDialogs (pixels, dialog units or percent). I've also added an example script which increases the size of the entire NSIS installer and uninstaller UI along with all wizard pages without any hacking of the UI with Resource Hacker.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">15th April 2013, 07:18</div></div><div class="posttext">Hey Stu.. Many thanks for this plugin.<br />
<br />
But I am not able to use it properly.<br />
For example, I am trying to resize the text on Directory page so I am doing this:<br />
<br />
nsResize::Set 1006 25 150 460 190<br />
<br />
But the text remain unchanged on installer directory page.<br />
<br />
Can you pls give me an example for resizing controls?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2013, 11:02</div></div><div class="posttext">It wants a window handle rather than an id. Also I would use dialog units over pixels and I would use Add rather than Set if you just want to make a control bigger.<br />
<br />
For example:FindWindow $R0 `#32770` `` $HWNDPARENT<br />
GetDlgItem $R0 $R0 1006<br />
nsResize::Add $R0 0 0 0 20uThis will make the control 20 dialog units higher.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">15th April 2013, 13:12</div></div><div class="posttext">Ok. Great. It worked!!!  Thanks.<br />
<br />
And regarding the text on welcome page I checked Contrib\Modern UI 2\Pages\welcome.nsh as you suggested, the MUI_WELCOMEPAGE_TEXT is defined for text control but when I used it to resize, nothing happened. <br />
<br />
FindWindow $R0 `#32770` `` $HWNDPARENT<br />
GetDlgItem $R0 $R0 MUI_WELCOMEPAGE_TEXT<br />
nsResize::Set $R0 0 200 50u 50u</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2013, 14:18</div></div><div class="posttext">That is just a compile time define for the label text. The handle is stored in $mui.WelcomePage.Text:nsResize::Set $mui.WelcomePage.Text 0 200u 50u 50uStu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">15th April 2013, 14:39</div></div><div class="posttext">Well I tried this too earlier..but Nsis is not recognizing it, text size is not changing and this warning is showing up : <br />
<br />
unknown variable/constant &quot;mui.WelcomePage.Text&quot; detected.<br />
<br />
Has it worked for you ?<br />
(Sorry for bugging you this much. )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2013, 15:10</div></div><div class="posttext">You must be using MUI1. Switch to MUI2.nsh.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">16th April 2013, 07:32</div></div><div class="posttext">You're right. I was using MUI1.nsh. Now I switched to MUI2.nsh , found out that it doesnt support MUI_HWND so modified the code according to MUI2 , and finally it Worked. Thanks a lot Stu.<br />
Similarly it worked for Finish page. (Wow)<br />
But I dont why , there are coming these same warnings, as below:<br />
<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:4)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:5)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText.Info&quot; detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:6)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_BEGIN:6)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_TEXT:6)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_TEXT:7)<br />
  unknown variable/constant &quot;mui.ComponentsPage.DescriptionText&quot; detected, ignoring (macro:MUI_DESCRIPTION_TEXT:8)<br />
<br />
<br />
<br />
Though there is no MUI_DESCRIPTION_* in my code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th April 2013, 23:06</div></div><div class="posttext">Do you have MUI_FUNCTION_DESCRIPTION_BEGIN but with no MUI_PAGE_COMPONENTS?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">18th April 2013, 14:05</div></div><div class="posttext">Yeah.. removed it and all is working fine now. A big thanks to you for all the help. :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>