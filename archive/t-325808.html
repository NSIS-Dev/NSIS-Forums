<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" modern UI not refreshing when using progress bar, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  modern UI not refreshing when using progress bar NSIS Discussion" />
	
	<title> modern UI not refreshing when using progress bar [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  modern UI not refreshing when using progress bar</div>
<hr />
<div class="pda"><a href="t-325808.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=325808">modern UI not refreshing when using progress bar</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zivha</div><div class="date">11th January 2011, 06:44</div></div><div class="posttext">Hello,<br />
<br />
  I am using modern UI for my installer. I have a dialog page that is downloading some files, the way I implemented it is by embedding inetc plugin in the dialog. So I do something like:<br />
<br />
Function DownloadPage<br />
  nsDialogs::Create 1018<br />
  Pop $DownloadDialog<br />
  .<br />
  .<br />
  .<br />
  // create some labels and text<br />
  ${NSD_CreateTimer} StartDownload 1<br />
  nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function StartDownload<br />
  ${NSD_KillTimer} StartDownload<br />
<br />
  inetc::get /nocancel /caption &quot;caption text&quot;  $AppUrl /END<br />
  Pop $0<br />
FunctionEnd<br />
<br />
<br />
So basically I create a dialog, display it and then use a timer to overlay the inetc progress bar on top of the dialog. The problem is that during the download the dialog underneath does not receive refresh messages so for example if another window hides it and is then removed, the dialog is not refreshed and the text and graphics disappear (only the progress bar is constantly refreshed).<br />
<br />
Any ideas how to solve it? I thought of adding another time to keep refreshing the dialog but no idea how to do it. Maybe my solution is just not correct but I can not find any other cleaner way to embed a dialog into a dialog there is no way to &quot;Create&quot; the inetc object and insert it to the dialog in a clean way.<br />
<br />
Ideas???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">11th January 2011, 07:33</div></div><div class="posttext">Cant help you based just off what your saying but I would like a copy of your script or a stripped down version for future referance of embedding the plugin if you dont mind:)<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zivha</div><div class="date">11th January 2011, 07:45</div></div><div class="posttext">This is pretty much the relevant part of the script, just created a custom dialog called DownloadPage, the function for DownloadPage is listed above just add whatever elements to it and then use the timer to call another function to initiate the inetc right after the dialog::show is run. <br />
<br />
Not sure it is a good method to copy as you can see there is a problem with it that hopefully can be resolved :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">11th January 2011, 09:10</div></div><div class="posttext">what about using<br />
ShowWindow $yourcontrol ${SW_HIDE}<br />
    ShowWindow $yourcontrol ${SW_SHOW}<br />
<br />
for each custom control in a timer ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zivha</div><div class="date">11th January 2011, 13:11</div></div><div class="posttext">Does not work, first it creates flicker but the real problem is that it still not working, I believe the control does not know it needs to repaint its content, or maybe the problem is different. One of the controls is a bitmap once it is covered with another window and then revealed the bitmap is partially grey and does not get repainted.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zivha</div><div class="date">13th January 2011, 07:44</div></div><div class="posttext">Actually I take it back, the Dialog is refresh I had another error on my dialog (some resource panel with no content was on top of some controls, could not see it but found it after reviewing the resource files again) - so everything actually works fine with this solution.<br />
<br />
Can close the thread :-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>