<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Restricting scripts to particular versions of NSIS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Restricting scripts to particular versions of NSIS NSIS Discussion" />
	
	<title> Restricting scripts to particular versions of NSIS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Restricting scripts to particular versions of NSIS</div>
<hr />
<div class="pda"><a href="t-129067.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129067">Restricting scripts to particular versions of NSIS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">20th March 2003, 00:15</div></div><div class="posttext">After running NSIS Update tonight I found that I had to change my custom page commands to take into account the new leave-page function parameter. For example:<br />
<br />
Page custom Intro &quot; - Introduction&quot;<br />
<br />
had to be changed to<br />
<br />
Page custom Intro &quot;&quot; &quot; - Introduction&quot;<br />
<br />
If I give the modified script to another NSIS user, it will only work if they have also run NSIS Update to update their copy of NSIS.<br />
<br />
Is there a way to make my script detect the version of NSIS in use and issue an error message if an old version of NSIS is being used?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th March 2003, 11:35</div></div><div class="posttext">There is no easy way to do it but if you really want then you can create a little installer or a program that compares the given input to the output of makensis.exe /version and call that program using !system. If you write it as a small silent installer then you'll need to call Abort or Quit to change the return value of the installer to 1. If the installer finishes without any errors or calls to Abort or Quit it will return 0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">20th March 2003, 14:19</div></div><div class="posttext">I would suggest making a small program to compile the script for you. If the NSIS version is compatible just define a variable to the script.. IE:<br />
<br />
<br />
!ifndef NSISOK<br />
   ;Set the definitions and such that are causing you problems with <br />
   ;the newer version.<br />
!else<br />
   ;Place the definitions that you are using here.<br />
!endif<br />
<br />
<br />
In the program, when calling MakeNSIS.exe just use the /DNSISOK=&quot;1&quot; in the command line. This is what I've been using for my script to check if it is the test installer or the actual distributable version. Thank Joost for this suggestion, he's the one that brought it to my attention :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">20th March 2003, 14:45</div></div><div class="posttext">Thanks for the ideas, I will try something  based upon your suggestions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">20th March 2003, 20:19</div></div><div class="posttext">I'll be cool if Nsis have version numbers within.<br />
So that can we use it with GetDllVersion.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">21st March 2003, 18:01</div></div><div class="posttext">What do you think of an NSIS instruction, like:<br />
ForNSISVersion 2.0b2<br />
If this is specified, this script can only be compiled with that version. Using<br />
ForNSISVersion 2<br />
would make the script compilable by all version 2 NSIS compilers, and<br />
ForNSISVersion 2.0b2+<br />
would make the script only compilable for NSIS 2.0b2 and higher.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">21st March 2003, 19:22</div></div><div class="posttext">Originally posted by Dark Boy <br />
I'll be cool if Nsis have version numbers within.<br />
So that can we use it with GetDllVersion.  <br />
It should be checked on compile time, the normal commands won't work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd March 2003, 12:43</div></div><div class="posttext">virtlink, I don't see how that could help with CVS version which are the real problem here. For normal version you can just put a comment that this script only works on version *, but for CVS it's impossible.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>