<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Executing an executable file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Executing an executable file NSIS Discussion" />
	
	<title> Executing an executable file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Executing an executable file</div>
<hr />
<div class="pda"><a href="t-354425.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=354425">Executing an executable file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Niharika1588</div><div class="date">11th January 2013, 16:15</div></div><div class="posttext">I want to run the executable file, automatically when the installation is going on. So I used Exec and ExecWait but both are not working. Could some one help me in figuring out this??<br />
<br />
It doesn't show any error, but doesn't the files to folder &quot;c&quot;. <br />
<br />
FYI : The executable file is working fine, I tested it and the executable file is placed in the same folder as this file, so it isn't giving any error information like &quot;File open failed/no such file&quot;.<br />
<br />
  Section &quot;deploy_0.zip&quot; <br />
SetOutPath &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\c&quot;<br />
<br />
;File sji.exe      //If I am uncommenting this, it is jus copying this file to the folder &quot;c&quot; that's it.<br />
ExecWait  ' &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\sji.exe&quot; ' <br />
WriteUninstaller &quot;C:\Users\Niharika\Downloads\Desktop\Uninstall.exe&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">11th January 2013, 21:01</div></div><div class="posttext">Sure, command File sji.exe does nothing but extract &quot;sji.exe&quot; (to the current $OUTDIR).<br />
<br />
Also command ExecWait '&quot;C:\Users\Niharika\Downloads\Desktop\Tryng\sji.exe&quot;' is highly prone to fail! Hardcoded path &quot;C:\Users\Niharika\Downloads\Desktop&quot; will not exist on user's computer with probability of 99.9% ;)<br />
<br />
Try this:<br />
InitPluginsDir<br />
File &quot;oname=$PLUGINSDIR\sji.exe&quot; &quot;sji.exe&quot;<br />
ExecWait '&quot;$PLUGINSDIR\sji.exe&quot;'<br />
<br />
<br />
This will extract &quot;sij.exe&quot; to a unique sub-folder (will be auto-generated) inside %TEMP% and run it from there. Will also be cleaned-up when the installer exits.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Niharika1588</div><div class="date">12th January 2013, 00:23</div></div><div class="posttext">I tried the below code : <br />
<br />
Section &quot;deploy.zip&quot; <br />
InitPluginsDir<br />
SetOutPath &quot;C:\Users\Niharika\Downloads\Desktop\&quot;<br />
File &quot;oname =${PLUGINSDIR}\sji.exe&quot; &quot;sji.exe&quot;<br />
ExecWait '&quot;${PLUGINSDIR}\sji.exe&quot;'<br />
SectionEnd<br />
<br />
But I get the following error :<br />
<br />
File: &quot;oname =${PLUGINSDIR}\sji.exe&quot; -&gt; no files found.<br />
Usage: File [/nonfatal] [/a] ([/r] [/x filespec [...]] filespec [...] |<br />
   /oname=outfile one_file_only)<br />
Error in script &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\wrk\AnalyzingBasic (2).nsi&quot; on line 27 -- aborting creation process<br />
<br />
<br />
But I have sji.exe in the same folder where I have this script, so is it that the code is nt being copied to temp folder??<br />
And one more question is what exactly does PLUGINSDIR mean? And the TEMP folder you mentioned does it exist or a virtual one??<br />
<br />
Sorry for asking so many questions, but I am newbie for NSIS Script :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PoRtAbLe_StEaLtH</div><div class="date">13th January 2013, 06:23</div></div><div class="posttext">I tried the below code : <br />
<br />
Section &quot;deploy.zip&quot; <br />
InitPluginsDir<br />
SetOutPath &quot;C:\Users\Niharika\Downloads\Desktop\&quot;<br />
File &quot;oname =${PLUGINSDIR}\sji.exe&quot; &quot;sji.exe&quot;<br />
ExecWait '&quot;${PLUGINSDIR}\sji.exe&quot;'<br />
SectionEnd<br />
<br />
But I get the following error :<br />
<br />
File: &quot;oname =${PLUGINSDIR}\sji.exe&quot; -&gt; no files found.<br />
Usage: File [/nonfatal] [/a] ([/r] [/x filespec [...]] filespec [...] |<br />
   /oname=outfile one_file_only)<br />
Error in script &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\wrk\AnalyzingBasic (2).nsi&quot; on line 27 -- aborting creation process<br />
<br />
<br />
But I have sji.exe in the same folder where I have this script, so is it that the code is nt being copied to temp folder??<br />
And one more question is what exactly does PLUGINSDIR mean? And the TEMP folder you mentioned does it exist or a virtual one??<br />
<br />
Sorry for asking so many questions, but I am newbie for NSIS Script :(<br />
<br />
File: &quot;oname =${PLUGINSDIR}\sji.exe&quot;<br />
<br />
should be:<br />
InitPluginsDir<br />
File /oname=$PLUGINSDIR\sji.exe &quot;sji.exe&quot;<br />
ExecWait $PLUGINSDIR\sji.exe<br />
<br />
put sji.exe in same folder as script<br />
when you call it.. NSIS will copy sji.exe to TEMP dir (Trash directory)<br />
and execute.. then clean up as Mulder said.<br />
<br />
$PLUGINSDIR is an internal variable.. so you don't have to define it.<br />
<br />
if you wanted to copy sji.exe to desktop..<br />
InitPluginsDir<br />
File /oname=$PLUGINSDIR\sji.exe &quot;sji.exe&quot;<br />
CopyFiles /Silent `$PLUGINSDIR\sji.exe` `$DESKTOP`</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">13th January 2013, 13:15</div></div><div class="posttext">[PHP]should be:<br />
InitPluginsDir<br />
File /oname=$PLUGINSDIR\sji.exe &quot;sji.exe&quot;<br />
ExecWait $PLUGINSDIR\sji.exe<br />
<br />
Oups, forgot the /oname in my example :stare:<br />
<br />
if you wanted to copy sji.exe to desktop..<br />
InitPluginsDir<br />
File /oname=$PLUGINSDIR\sji.exe &quot;sji.exe&quot;<br />
CopyFiles /Silent `$PLUGINSDIR\sji.exe` `$DESKTOP`<br />
<br />
In that case, however, it would be more convenient to extract it to Desktop right away:<br />
File &quot;/oname=$DESKTOP\sji.exe&quot; &quot;sji.exe&quot;<br />
<br />
Or:<br />
SetOutPath &quot;$DESKTOP&quot;<br />
File &quot;sji.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Niharika1588</div><div class="date">13th January 2013, 19:32</div></div><div class="posttext">Thank you for the replies both of you.<br />
<br />
I tried with /oname also earlier, but didn't work.<br />
<br />
Now why do I need to use the copyFiles option, I don't want to just copy the executable files.<br />
<br />
The need the executable file to be executed automatically, because it's like nested executable files. <br />
<br />
The below command is working :<br />
<br />
ZipDLL::extractall &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\wrk\client_9_6_0_0.zip&quot; &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\c&quot;<br />
<br />
Here we are passing the zip file and using this command it is extracting the zip files to &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\c&quot; folder which is what I want exactly.<br />
<br />
Previously, what I had done is sji.exe will have all the files in the zip, once extracted it should copy to the folder.<br />
<br />
Thanks a lot guys for the help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">14th January 2013, 01:26</div></div><div class="posttext">Thank you for the replies both of you.<br />
<br />
I tried with /oname also earlier, but didn't work.<br />
<br />
What exactly did not work?<br />
<br />
Now why do I need to use the copyFiles option, I don't want to just copy the executable files<br />
<br />
You do NOT need CopyFiles, if you just want to extract (and run) files!<br />
<br />
The need the executable file to be executed automatically, because it's like nested executable files.<br />
<br />
Then do it as suggested before!<br />
InitPluginsDir<br />
File &quot;/oname=$PLUGINSDIR\NestedInstaller.exe&quot; &quot;NestedInstaller.exe&quot;<br />
ExecWait '&quot;$PLUGINSDIR\NestedInstaller.exe&quot;'<br />
Be aware: If the NestedInstaller.exe installer actually extracts+runs yet another EXE file, the ExecWait would wait for the NestedInstaller.exe but not for the child process that NestedInstaller.exe has created.<br />
<br />
The below command is working :<br />
<br />
ZipDLL::extractall &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\wrk\client_9_6_0_0.zip&quot; &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\c&quot;<br />
<br />
Here we are passing the zip file and using this command it is extracting the zip files to &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\c&quot; folder which is what I want exactly.<br />
<br />
Previously, what I had done is sji.exe will have all the files in the zip, once extracted it should copy to the folder.<br />
<br />
Thanks a lot guys for the help.<br />
<br />
So do I get this right? You now package a ZIP file in your NSIS installer? If so, you would have to (1) make your installer extract the ZIP file and (2) extract the actual files from the previously extracted ZIP file using ZipDLL.<br />
<br />
BUT: Is there really a good reason why you package a ZIP file (it means you actually have two layers of compression!) instead of just packing the &quot;client&quot; files in your NSIS installer ???<br />
<br />
You can do:<br />
;Set path where to extract the &quot;client&quot; files<br />
SetOutPath &quot;$DESKTOP\Client&quot;<br />
<br />
;Now extract those files<br />
File /r &quot;client\*.*&quot;<br />
This code assumes that the &quot;client&quot; files are located in the sub-folder &quot;client&quot; within the folder where your .nsi file located when the installer is built. With that code there will be no ZIP file needed.<br />
<br />
Also: Get rid of those hardcoded paths like &quot;C:\Users\Niharika\Downloads\Desktop\Tryng\wrk&quot; from your installer! On the users computer &quot;C:\Users\Niharika&quot; won't exist and your installer will fail horribly !!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Niharika1588</div><div class="date">14th January 2013, 16:17</div></div><div class="posttext">The reason why I package a ZIP file in the installer is due to the flow of work in our organization. To be precise that's what exactly my boss wants me to do.<br />
<br />
I couldn't modify it, since it's how the flow works.<br />
<br />
Thanks for the information. It helped me a lot, but I have one more question.<br />
<br />
For eg, if I want to copy a file I use :<br />
<br />
File Client_9.zip.<br />
<br />
What if the user wants to enter the Client_9.zip  as an input, from some textbox that we provide to the user??<br />
<br />
Is there a way to provide how we can implement this??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">14th January 2013, 18:12</div></div><div class="posttext">The reason why I package a ZIP file in the installer is due to the flow of work in our organization. To be precise that's what exactly my boss wants me to do.<br />
<br />
I couldn't modify it, since it's how the flow works.<br />
<br />
You can extract the ZIP file right at the moment when your installer is being built and then only include the files extracted from the ZIP file.<br />
<br />
This could even be automated using the !system built-time command...<br />
<br />
Thanks for the information. It helped me a lot, but I have one more question.<br />
<br />
For eg, if I want to copy a file I use :<br />
<br />
File Client_9.zip.<br />
<br />
This does not &quot;copy&quot; anything! It extracts the file &quot;Client_9.zip&quot;, from the installer, into the current $OUTDIR. And it's also what causes the file &quot;Client_9.zip&quot; to be included in your installer.<br />
<br />
What if the user wants to enter the Client_9.zip  as an input, from some textbox that we provide to the user??<br />
<br />
Is there a way to provide how we can implement this??<br />
<br />
What exactly is the user supposed to provide from a text box ??? :confused:<br />
<br />
(1) Target path of the directory to where &quot;Client_9.zip&quot; shall be extracted?<br />
(2) File name to which &quot;Client_9.zip&quot; shall be extracted, in current $OUTDIR?<br />
(3) Source path from where the file &quot;Client_9.zip&quot; shall be copied to somewhere else?<br />
(4) Something else?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Niharika1588</div><div class="date">14th January 2013, 19:36</div></div><div class="posttext">Sorry for the inappropriate questions.<br />
<br />
I thought about it later and came to know that it isn't possible. I missed the most silly think that to extract the file it must be present in  the executable file and adding all the files increases its size.<br />
<br />
Anyhave, glad to meet you. Thanks for the help!!<br />
<br />
Have a great day!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>