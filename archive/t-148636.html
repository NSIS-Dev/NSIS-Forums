<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File /a option doesn't work as expected, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File /a option doesn't work as expected NSIS Discussion" />
	
	<title> File /a option doesn't work as expected [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File /a option doesn't work as expected</div>
<hr />
<div class="pda"><a href="t-148636.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148636">File /a option doesn't work as expected</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Kypec</div><div class="date">9th September 2003, 09:38</div></div><div class="posttext">I need to preserve the original file attributes<br />
which are actually set to READ-ONLY and nothing else.<br />
All my script and source files are stored on network drive.<br />
When I compile and run the installer which contains the<br />
section below then I never get the file on target system<br />
with READ-ONLY attribute set, it has only ARCHIVE bit set<br />
although this bit is cleared on source file.<br />
<br />
 !define revX rev64 ;latest revision of firmware<br />
  Section &quot;sy-MIG&quot; SubPREC_SYMIG_FW<br />
   SetOutPath &quot;$INSTDIR\Firmware\sy-MIG\${revX}&quot;<br />
   File /a &quot;SYNERGY\Firmware\sy-MIG\${revX}\ps240_64.bin&quot; ;sy-MIG<br />
  SectionEnd<br />
<br />
Is this a bug or not?<br />
I'm using NSIS 2.0b4 CVS from Sep-06-2003<br />
<br />
Thanks anybody for any reply :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th September 2003, 13:58</div></div><div class="posttext">Works fine for me. Try the latest CVS version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kypec</div><div class="date">10th September 2003, 08:27</div></div><div class="posttext">Well, today I have re-tested it with<br />
dev.snapshot from Wed, 10 Sep 2003, 01:44:17 GMT.<br />
Unfortunately, it still doesn't work for me :( <br />
Please try to test my attached script and let me know<br />
the results. Thanks a lot<br />
<br />
P.S. I'm using Win98SE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th September 2003, 12:56</div></div><div class="posttext">Always worked for me on both XP and 98. Though it sometimes took its time with it. Are you sure explorer didn't just take time to update? If you are, I can send you a debug version which will help pin-point the problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kypec</div><div class="date">10th September 2003, 13:12</div></div><div class="posttext">I'm absolutely sure that it's not the Explorer's issue.<br />
btw I'm not using it at all (my favorite file manager is Servant<br />
Salamander - http://www.altap.cz)<br />
Please send me that debug version, maybe it will help ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th September 2003, 13:22</div></div><div class="posttext">OK. Download DebugView (http://www.sysinternals.com/ntw2k/freeware/debugview.shtml), run it, download makensis-attrib-debug.zip (http://kichik.dyndns.org/makensis-attrib-debug.zip), use it to compile your script, run your installer and attach DebugView's log here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kypec</div><div class="date">10th September 2003, 14:09</div></div><div class="posttext">OK -&gt; I did want you wanted me to do and after scanning<br />
that log files I realized where my problem really is:<br />
as I understand from that log files the /a option works so<br />
that it prevents the attributes of the file which ALREADY<br />
EXISTS ON TARGET SYSTEM therefore new installation always fails<br />
please see &quot;new.log&quot; &amp; &quot;new_salamand.log&quot;<br />
whereas the second installation always succeeds<br />
please see &quot;second.log&quot; &amp; &quot;second_salamand.log&quot;<br />
(_salamand means that I ran my installer from the Servant Salamander<br />
which is also in beta stage now -&gt; so it also outputs some debug<br />
information)<br />
<br />
Anyway, what I wanted and meant that /a option does is this:<br />
I have a file which is to be included in my installer during<br />
NSIS script -&gt; installer EXE compilation process. This file has its file attributes set to whatever I want and EXACTLY the same attributes<br />
should have set the file which will be extracted during installation process on target PC, no matter whether it already exists there or not.<br />
<br />
thanks for your help kichik,<br />
I hope that you understand now what was my point for this topic :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th September 2003, 14:34</div></div><div class="posttext">Nope, /a is supposed to do what you thought it should do. Looking at your log files I realized where the problem is (though the language made it a bit hard ;)). SetOutPath sets the current directory, but does so before creating the directory. I didn't see it in my logs because I already had the directory created.<br />
<br />
This only bothered File /a since a few days ago because earlier NSIS automatically prefixed the path with $OUTDIR, but this caused /a to fail if used with /oname.<br />
<br />
Uploaded a fixed version to latest CVS, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kypec</div><div class="date">10th September 2003, 14:46</div></div><div class="posttext">Great! your help is truly appreciated<br />
and I'm glad you succeeded in this little bug hunt :)<br />
<br />
Kypec</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>