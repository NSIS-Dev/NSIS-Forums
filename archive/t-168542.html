<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Adding Reg Keys From .reg File?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Adding Reg Keys From .reg File? NSIS Discussion" />
	
	<title> Adding Reg Keys From .reg File? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Adding Reg Keys From .reg File?</div>
<hr />
<div class="pda"><a href="t-168542.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=168542">Adding Reg Keys From .reg File?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">8th February 2004, 06:07</div></div><div class="posttext">Is it possible to have NSIS download a .reg file from a server and then add the keys in it to the registry?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th February 2004, 10:44</div></div><div class="posttext">EDIT: See this Archive page Reg2Nsis - convert registry info into NSIS commands (http://nsis.sourceforge.net/archive/viewpage.php?pageid=296)<br />
<br />
But I never used it. And it's big (164 kb).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">8th February 2004, 11:18</div></div><div class="posttext">I dont know that register part but what I do know is <br />
how to donwload a file : <br />
;----------------------------------------------------------<br />
<br />
EXAMPLE :<br />
file = bla.exe<br />
directory = $PROGRAMFILES<br />
; the name and directory you want<br />
StrCpy $2 &quot;$PROGRAMFILES\bla.extension&quot;<br />
; the url (dont set &quot; between the url)<br />
NSISdl::download URL://....... $2<br />
Pop $0<br />
; if you want to open the file <br />
ExecWait &quot;$PROGRAMFILES\bla.exe&quot;<br />
<br />
;----------------------------------------------------------<br />
<br />
NOTE : MUST BE IN A SECTION</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">8th February 2004, 11:48</div></div><div class="posttext">You could also use the ExecShell command to import the registry file, however you will get an extra dialogs asking if you want to import the specified file and saying that the import was sucessfull.  Unless there is an option to make regedit run in silent mode?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">8th February 2004, 11:52</div></div><div class="posttext">It's not a good idea to rely on external applications like regedit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">8th February 2004, 11:58</div></div><div class="posttext">I know that is the case in general, but I do not see any harm in relying on regedit, it is available in all windows version.<br />
<br />
Especially since, from my understanding of the original question, the info in the .reg file is not available at the compile time and thus cannot be converted into an NSIS script.  Therefore you have two options.  One is to rely on an external program, regedit, or two to get your NSIS script to manually phrase the downloaded .reg file and then run equivalent NSIS commands.<br />
<br />
Personally I think that the first option would be more efficient and less error prone.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th February 2004, 14:46</div></div><div class="posttext">.reg files are like .ini files... so have a way to do that with functions. Am I right? (the difference is that .reg files have a starting word to indentify if it's a .reg file)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">8th February 2004, 16:52</div></div><div class="posttext">There is a Batch file command to import reg keys silently, but then you get the batch dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">8th February 2004, 19:51</div></div><div class="posttext">Originally posted by deguix <br />
EDIT: See this Archive page Reg2Nsis - convert registry info into NSIS commands (http://nsis.sourceforge.net/archive/viewpage.php?pageid=296)<br />
<br />
But I never used it. And it's big (164 kb).  <br />
That's neat! Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">9th February 2004, 02:43</div></div><div class="posttext">There is a Batch file command to import reg keys silently, but then you get the batch dialog.<br />
<br />
But in this case have the nsExec plugin to just get the output.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">9th February 2004, 14:05</div></div><div class="posttext">Ok I have an idea:<br />
<br />
Have nsDl download the reg file from the net into the Temp folder<br />
Make a batch file with the lines regedit.exe /s C:\Windows\Temp\TheRegFile.reg which tells the batch not to show the Are you sure dialog.<br />
Then we have nsExec execute the batch without the dialog and everything goes well.<br />
<br />
Do you think that would work?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>