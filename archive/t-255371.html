<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Built an installer, some questions remain, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Built an installer, some questions remain NSIS Discussion" />
	
	<title> Built an installer, some questions remain [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Built an installer, some questions remain</div>
<hr />
<div class="pda"><a href="t-255371.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255371">Built an installer, some questions remain</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ChrisHibbert</div><div class="date">12th September 2006, 23:07</div></div><div class="posttext">I'm an experienced (25 years) software engineer, but most of my development and deployements have been unix or linux based.  I'm currently developing an open source java-based system.  I have previously tested that the system runs under Windows.  Some people requested a Windows installer rather than the zip file I had previously used to package for Windows.  I looked around, and NSIS seemed the best system to use to build an installer.  It works reasonably well.  I was able to build a decent installer without asking any questions.<br />
<br />
I used the Modern UI.  It seemed easier to configure than the other approaches I tried.  The installer is visible at http://svn.sourceforge.net/viewvc/*checkout*/zocalo/trunk/build/installer.nsi?revision=375<br />
<br />
Some comments and observations first, then some questions:<br />
<br />
My code is released as open-source, so I didn't force people to &quot;accept&quot; the license.  This was easy to do.<br />
<br />
I wanted to display some instructions before prompting for configuration information, and the best approach I could find was to re-use the MUI_PAGE_LICENSE macro from Modern UI.  (If you look in the installer.nsi file above, you'll see that I've copied and edited that macro.)  This allows me to insert a file that the user can scroll through.  I needed to change the header and top text (since my new page wasn't a license), and the standard macro didn't seem to allow this.  Is there a better way to do this?<br />
<br />
After displaying the instructions, I prompt for configuration parameters, verify the values, and substitute the values into a config file.  ConfigRead and ConfigWrite worked quite well for this.  (I verify that two parameters are numeric, and insist that the password that is entered isn't the default one that ships with the system.)  Feel free to adapt this example for others to use if it looks like my approach was reasonable.<br />
<br />
<br />
There are a few issues that it would be nice to clean up if anyone can suggest changes I might make.<br />
<br />
QUESTION 1: I made a 150x57 BMP files from a .png file for the header image.  It displays pretty nicely using the previewer, but NSIS does something ugly with it.  Any suggestions?<br />
<br />
The BMP I feed to NSIS is http://svn.sourceforge.net/viewvc/*checkout*/zocalo/trunk/webpages/images/logo.zocalo.BMP The result looks like the attached image.<br />
<br />
QUESTION 2: I used dialogs::InputBox, but couldn't figure out how to wrap long lines (\r\n didn't work).  If my lines are longer than a certain length, parts are hidden under the buttons.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisHibbert</div><div class="date">12th September 2006, 23:14</div></div><div class="posttext">Hmmm.   Well, that bmp isn't 150x57, it's a little bigger, since that was the best display I could generate.  I don't see a 150x57 copy of the image now, but it had worse jaggies.  any advice on optimising display of a BMP as header image?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">13th September 2006, 00:35</div></div><div class="posttext">any advice on optimising display of a BMP as header image?I have found that using the 150 x 57 pixel size recommended in the MUI Readme gives the best results. Here is how I made the header image used in the attached screenshot. (I used the free IrfanView program but other graphics programs have similar capabilities)<br />
<br />
(1) Open a copy of the original 200 x 64 pixel logo<br />
<br />
(2) Reduce the image width to 150 pixels while maintaining the aspect ratio.<br />
<br />
(3) The resized image was 150 x 48 pixels (i.e. it is not high enough)<br />
<br />
(4) Resize the canvas by adding a white border with left size width 0 pixels, right size width 0 pixels, top size width 4 pixels, bottom size width 5 pixels.<br />
<br />
(5) The resized image is now 150 x 57 (the recommended size) so it was saved.<br />
<br />
The attached screenshot shows part of a MUI license page created using the 150 x 57 version of the logo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">13th September 2006, 13:29</div></div><div class="posttext">Originally posted by pengyou <br />
(3) The resized image was 150 x 48 pixels (i.e. it is not high enough)<br />
And 5 minutes with MS paint you can fill the 9 pixel gap to  the match with the background. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisHibbert</div><div class="date">13th September 2006, 19:36</div></div><div class="posttext">Sorry I botched the question about the icon.  I started with this (150x57) image.  (continued in next comment)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisHibbert</div><div class="date">13th September 2006, 19:38</div></div><div class="posttext">When I ran NSIS, the image displayed, looked like this image.  Notice the jaggies?  Why doesn't the image display better?  I'll try the 150x57 images that were offered, but I know how to build my own. (I cropped and added a white vertical border in order to get to 150x57.)<br />
<br />
Thanks for any help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisHibbert</div><div class="date">13th September 2006, 20:00</div></div><div class="posttext">Bizarre!  I tried the image trueparuex offered, and it worked fine.  It's 150x57, just like the one I posted a little while ago as  logo.zocalo-c.bmp.  His is about a third the size of mine.  Anyone know what I did wrong in editing the bitmap?  Why does his produce a better installer logo than mine, when they're both 150x57, and look the same to my eye?  For now, I'll use trueparuex's image.  Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>