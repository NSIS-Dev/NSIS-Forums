<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Searching through a file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Searching through a file NSIS Discussion" />
	
	<title> Searching through a file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Searching through a file</div>
<hr />
<div class="pda"><a href="t-136627.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136627">Searching through a file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2003, 22:54</div></div><div class="posttext">I'm getting a path (e.g. pics\temp.pcx) out of 1 line within a file (models\temp.md2).<br />
However, the file is not pure text, so FileRead only gets to the second line and produces an error.<br />
Is there a way to convert this file to pure text?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 23:04</div></div><div class="posttext">FileReadByte doesn't care if the input is text or not, so you can use it to process the file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2003, 23:35</div></div><div class="posttext">It's just outputting a load of numbers.<br />
I need to get a line out of the file and search for &quot;.pcx&quot; in it<br />
<br />
I just need to get hold of a line of text from it now...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 23:40</div></div><div class="posttext">Use:<br />
<br />
IntFmt $0 &quot;%c&quot; $1<br />
<br />
where $1 is the output of FileReadByte and you'll get the character read in $0. It's up to you to find out how to skip the non text part of the file, FileReadByte will read anything.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2003, 23:44</div></div><div class="posttext">I shall look<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 23:46</div></div><div class="posttext">heh, ok :)<br />
<br />
Then the byte read is a character that can not be displayed on screen, maybe 0. As I've said, it's up to you to tell where the text you want begins. Use FileReadByte to skip the parts you don't want, or can't read.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2003, 23:54</div></div><div class="posttext">Ok, so I have tried to collect up 20 characters, and then search for .pcx in that:<br />
<br />
loop_read:<br />
 ClearErrors<br />
 FileReadByte $R2 $R3<br />
 IfErrors error<br />
 IntFmt $R3 &quot;%c&quot; $R3<br />
  IntOp $R5 $R5 + 1<br />
 StrCpy $R4 $R4$R3<br />
  StrCmp $R5 20 0 loop_read<br />
<br />
But $R4 comes out as only about 4 characters long.<br />
<br />
What have I done wrong?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2003, 23:55</div></div><div class="posttext">Ok, It's not outputting spaces. At least I am getting part of the &quot;.pc&quot; in it!<br />
<br />
-Stu :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th May 2003, 01:01</div></div><div class="posttext">Here's what I made..<br />
<br />
edited by kichik, attached below.<br />
<br />
Works great on both md2 and sp2 files :)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th May 2003, 15:08</div></div><div class="posttext">Please attach large scripts.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>