<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Need help with Localization - modifying and adding strings, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Need help with Localization - modifying and adding strings NSIS Discussion" />
	
	<title> Need help with Localization - modifying and adding strings [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Need help with Localization - modifying and adding strings</div>
<hr />
<div class="pda"><a href="t-371383.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=371383">Need help with Localization - modifying and adding strings</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">darryllrohr</div><div class="date">20th September 2013, 16:32</div></div><div class="posttext">hey guys,<br />
<br />
i am using the modern ui for my installer:<br />
  !include &quot;MUI2.nsh&quot;<br />
<br />
i am including the various languages. for example:<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
  !insertmacro MUI_LANGUAGE &quot;French&quot;<br />
<br />
on init, i am including:<br />
  !insertmacro MUI_RESERVEFILE_LANGDLL<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
from what i can gather, the modern ui loads the Localization.nsh file:<br />
  C:\Program Files (x86)\NSIS\Contrib\Modern UI 2\Localization.nsh<br />
<br />
and the Localization.nsh file loads the various translations files. for example:<br />
  C:\Program Files (x86)\NSIS\Contrib\Language files\English.nsh<br />
<br />
so, i would expect that if i modify one of the strings in the English.nsh file and rebuild my installer, i should see the changes.  however, this behavior is not the case.  the string is not modified.<br />
<br />
also, i am trying to add a new string in the English.nsh file.  for example:<br />
  ${LangFileString} MY_TEST_STRING &quot;test string&quot;<br />
<br />
and i try to use it within the installer with the following syntax:<br />
  $(MY_TEST_STRING)<br />
<br />
however, that does nto work either.<br />
<br />
so my questions are: how do i add new strings and modify the existing strings using the modern ui 2?<br />
also, looking at the russian language files, all the strings are garbage.  how can i get the propper translations?<br />
<br />
thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">21st September 2013, 02:25</div></div><div class="posttext">LangString MY_TEST_STRING ${LANG_ENGLISH} &quot;test string&quot;<br />
LangString MY_TEST_STRING ${LANG_FRENCH} &quot;chaîne de test&quot;<br />
<br />
Why the string in English.nsh does not change, although modified by you, is rather odd. Are you sure that you modified the right string?<br />
<br />
Originally posted by darryllrohr<br />
also, looking at the russian language files, all the strings are garbage<br />
<br />
Do you mean the Russian is a poor translation? You could redo the translated strings, for instance, hiring a translator? If the Russian translation really is garbage, which only a Russian-speaker could judge, you might be able to submit an alternate Russian.nsh<br />
<br />
http://forums.winamp.com/showthread.php?t=302144<br />
<br />
Hopefully not at the risk of starting a blood feud.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">darryllrohr</div><div class="date">24th September 2013, 18:44</div></div><div class="posttext">LangString MY_TEST_STRING ${LANG_ENGLISH} &quot;test string&quot;<br />
LangString MY_TEST_STRING ${LANG_FRENCH} &quot;chaîne de test&quot;<br />
<br />
Why the string in English.nsh does not change, although modified by you, is rather odd. Are you sure that you modified the right string?<br />
<br />
Do you mean the Russian is a poor translation? You could redo the translated strings, for instance, hiring a translator? If the Russian translation really is garbage, which only a Russian-speaker could judge, you might be able to submit an alternate Russian.nsh<br />
<br />
http://forums.winamp.com/showthread.php?t=302144<br />
<br />
Hopefully not at the risk of starting a blood feud.<br />
<br />
no, the russian strings are literally garbage:<br />
!ifdef MUI_WELCOMEPAGE<br />
  ${LangFileString} MUI_TEXT_WELCOME_INFO_TITLE &quot;Âàñ ïðèâåòñòâóåò ìàñòåð óñòàíîâêè $(^NameDA)&quot;<br />
  ${LangFileString} MUI_TEXT_WELCOME_INFO_TEXT &quot;Ýòà ïðîãðàììà óñòàíîâèò $(^NameDA) íà âàø êîìïüþòåð.$\r$\n$\r$\nÏåðåä íà÷àëîì óñòàíîâêè ðåêîìåíäóåòñÿ çàêðûòü âñå ðàáîòàþùèå ïðèëîæåíèÿ. Ýòî ïîçâîëèò ïðîãðàììå óñòàíîâêè îáíîâèòü ñèñòåìíûå ôàéëû áåç ïåðåçàãðóçêè êîìïüþòåðà.$\r$\n$\r$\n$_CLICK&quot;<br />
!endif<br />
<br />
i did try this as well:<br />
LangString MY_TEST_STRING ${LANG_ENGLISH} &quot;test string&quot;<br />
but ${LANG_ENGLISH} never evaluted to anything.  it was essentially null.<br />
<br />
the only language files that i could find are here:<br />
C:\Program Files (x86)\NSIS\Contrib\Language files<br />
i modified a few english strings and they didnt change in my installer.  <br />
is there any other place that the languages are defined?<br />
i tried modifying MUI_TEXT_WELCOME_INFO_TITLE and MUI_TEXT_WELCOME_INFO_TEXT. i even tried adding a new string and tried to referrence it, but it did not work either.<br />
<br />
any suggestions?<br />
<br />
thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">25th September 2013, 20:26</div></div><div class="posttext">:( All I can say is that it seems like something basic.<br />
<br />
Originally posted by darryllrohr<br />
no, the russian strings are literally garbage:<br />
If the Russian strings appear as &quot;garbage&quot;, the problem is most likely that you are opening/viewing the Russian.nsh file in ansi mode. Nsis 3.0a1 nsh files are encoded as UTF-8. Windows Notepad should automatically display UTF-8. Are you using NSIS 3.0a1?<br />
<br />
Have you tried opening other languages, such as Macedonian? The characters there are Cyrillic. If the problem is consistent, you'd see Macedonian as &quot;garbage&quot; too.<br />
<br />
Originally posted by darryllrohr<br />
but ${LANG_ENGLISH} never evaluted to anything. it was essentially null.<br />
<br />
Could you try:<br />
MessageBox MB_USERICON|MB_OK &quot;${MY_TEST_STRING}&quot; /SD IDOK<br />
<br />
I can't see anything wrong with your code:<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Do you include mui2 in your installer?<br />
<br />
!include &quot;MUI2.nsh&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">25th September 2013, 22:21</div></div><div class="posttext">You are creating an ansi installer. Âàñ ïðèâåòñòâóåò ìàñòåð óñòàíîâêè is from the 2.46 (ansi) Russian.nsh. The characters will be converted according to the user's codepage. On a Russian system they ought to render in Cyrillic letters. It's my fault for not noticing before. I'm very sorry. :tinfoil:<br />
<br />
Note: With multilingual installers, unicode has some advantages, notably, the user could install the Russian version on any system. The characters would always be recognizable: Вас приветствует мастер установки. The Russian.nsh strings in utf-8 would not be garbage.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>