<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" No Window Icon Decoration on Install Pages, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  No Window Icon Decoration on Install Pages NSIS Discussion" />
	
	<title> No Window Icon Decoration on Install Pages [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  No Window Icon Decoration on Install Pages</div>
<hr />
<div class="pda"><a href="t-286832.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286832">No Window Icon Decoration on Install Pages</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">13th February 2008, 21:08</div></div><div class="posttext">Is there any way to not display the icon/decoration on the upper left of the installer window pages *without* effecting the icon used for the actual installer and uninstaller?<br />
<br />
From what I've gathered these are one in the same.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th February 2008, 11:09</div></div><div class="posttext">If you are not using the Modern UI, WindowIcon is what you're looking for. If you are using the Modern UI, you can use an empty picture instead. Have a look at MUI_HEADERIMAGE and MUI_HEADERIMAGE_BITMAP.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">15th February 2008, 14:01</div></div><div class="posttext">I'm using the headerimage to decorate the actual window masthead area. That's not my issue.<br />
<br />
The issue is the icon decoration in the upper left of the window (not the headerimage-- the icon, see &quot;II&quot; in crude ascii art below) always appears to be a scaled down version of the installer/uninstaller icon.<br />
<br />
+------- - - - -<br />
| II - Title bar description...<br />
+------- - - - - <br />
|<br />
| HEADERIMAGE<br />
|<br />
<br />
I want to NOT display the icon during the install, but obviously still want an icon assigned to the installer/uninstaller.<br />
<br />
Make sense?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th February 2008, 14:22</div></div><div class="posttext">In that case, you have two options. Either cause Windows to display a different icon in Explorer by adding another icon resource, or cause NSIS to display another icon by setting a different one to the window.<br />
<br />
To add another icon resource, execute Resource Hacker using !packhdr as demonstrated in the Wiki (http://nsis.sourceforge.net/Add_extra_icons_to_an_installer). Make sure you give the new icon an identifier lower than 100 so it'd come first and Explorer will use it instead of the usual icon.<br />
<br />
To make NSIS use another icon, use LoadImage to load another image and then call SetClassLong to set the new icon.StrCpy $0 &quot;new image handle here&quot;<br />
!define GCL_HICON -14<br />
System::Call user32::SetClassLong(i$HWNDPARENT,i${GCL_HICON},i$0)The loaded image can be another resource added in the same method described above, or an icon extracted and loaded using different parameters passed to LoadImage. In either case, a code that should get you started is in the example linked above.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">18th February 2008, 01:00</div></div><div class="posttext">Thank you for the awesome advice.<br />
<br />
I did review the Wiki page before posting this, however.<br />
<br />
What I am trying to do is *remove* the icon from the installer window without effecting the installer/uninstaller program icon.<br />
<br />
I can certainly use the above outlined technique and use a &quot;blank&quot; icon, but our creative team is really looking to not have that empty space, and I'm trying to be as accommodating as possible.<br />
<br />
So any advice on actually removing the installer window icon decoration?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">18th February 2008, 03:49</div></div><div class="posttext">I'm not sure I understand what you are asking for, you say you want to remove the icon, but don't want an empty space?I can certainly use the above outlined technique and use a &quot;blank&quot; icon, but our creative team is really looking to not have that empty space <br />
The icon can be removed by removing the WS_SYSMENU style from the dialog window. If you do that, the icon goes away, along with the three controls on the right side of the title bar: minimize, maximize, and close. The program title will shift left when you do this. Is that the empty space you didn't want?<br />
!define MUI_CUSTOMFUNCTION_GUIINIT ClrSysMenu<br />
Function ClrSysMenu<br />
!define WS_SYSMENU 0x80000<br />
  StrCpy $0 $HWNDPARENT<br />
  System::Call 'user32::GetWindowLong(i r0,i -16)i.r1'<br />
  IntOp $2 ${WS_SYSMENU} ~<br />
  IntOp $1 $1 &amp; $2<br />
  System::Call 'user32::SetWindowLong(i r0,i -16,i r1)'<br />
FunctionEnd<br />
 Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">18th February 2008, 20:23</div></div><div class="posttext">This should do it! Thanks-- I'll try soon.<br />
<br />
The &quot;whitespace&quot; I was referring to would be the space that shows up if I use a blank icon.<br />
<br />
Removing all the decorations should be a good solution.<br />
<br />
Once it works I'll try to put up a wiki page!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>