<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Function Replace Text help......, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Function Replace Text help...... NSIS Discussion" />
	
	<title> Function Replace Text help...... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Function Replace Text help......</div>
<hr />
<div class="pda"><a href="t-167410.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=167410">Function Replace Text help......</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">30th January 2004, 23:36</div></div><div class="posttext">i have spent like 5 hours now trying to figure this out<br />
but to no avail<br />
<br />
I need to Replace text at line number BLAH<br />
<br />
and i found afrows function to work but there was a problem<br />
i don't need to add extra lines and such i need to replace exactly where it is<br />
so what do i need to change in this script ?<br />
<br />
Function WriteToFileLine<br />
Exch $0 ;file<br />
Exch<br />
Exch $1 ;line number<br />
Exch 2<br />
Exch $2 ;string to write<br />
Exch 2<br />
Push $3<br />
Push $4<br />
Push $5<br />
Push $6<br />
Push $7<br />
<br />
 GetTempFileName $7<br />
 FileOpen $4 $0 r<br />
 FileOpen $5 $7 w<br />
 StrCpy $3 0<br />
<br />
Loop:<br />
ClearErrors<br />
FileRead $4 $6<br />
IfErrors Exit<br />
 IntOp $3 $3 + 1<br />
 StrCmp $3 $1 0 +3<br />
FileWrite $5 &quot;$2$\r$\n$6&quot;<br />
Goto Loop<br />
FileWrite $5 $6<br />
Goto Loop<br />
Exit:<br />
<br />
 FileClose $5<br />
 FileClose $4<br />
<br />
SetDetailsPrint none<br />
Delete $0<br />
Rename $7 $0<br />
SetDetailsPrint both<br />
<br />
Pop $7<br />
Pop $6<br />
Pop $5<br />
Pop $4<br />
Pop $3<br />
Pop $2<br />
Pop $1<br />
Pop $0<br />
FunctionEnd<br />
:hang:  I have tried differn't things with the text<br />
but have come across whiping the file out or doing wierd things to it :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">31st January 2004, 00:12</div></div><div class="posttext">afrow has a function for this in the archive (http://nsis.sourceforge.net/archive/nsisweb.php?page=343&amp;instances=0)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">31st January 2004, 00:14</div></div><div class="posttext">yes that is the function from the archive<br />
but it moves down the text being replaced by a line<br />
it shifts a line.<br />
<br />
I don't know this language as well as i would like to<br />
<br />
but it's somthing in the funtion that's not replacing<br />
the text where it is at and instead is putting the text there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">31st January 2004, 01:54</div></div><div class="posttext">tried removing the the $\r$\n$6 part ? didn't take a look at the entire function, but that was my first intension.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">31st January 2004, 06:42</div></div><div class="posttext">thanx it worked<br />
<br />
but this is wht really worked and returned then line below it to normal<br />
<br />
FileWrite $5 &quot;$2$\r$\n&quot;<br />
<br />
That was like a needle in  haystack for me after coding for 9 hours straight.<br />
ty:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">31st January 2004, 07:08</div></div><div class="posttext">Is there a  Forward to back slash convertor<br />
<br />
like say you have <br />
&lt;Directory &quot;C:\Program Files\PrositeXL/www/phpwebsite_en/&quot;&gt;<br />
and need to go through the entire file<br />
to replace throught the entire file<br />
rather then reading the file writing to it over and over again<br />
But to read the file and write to it every where it finds the \ making it go /<br />
<br />
I have tried 5 differn't Functions actually written<br />
to do just this action but have not found a 1 to work yet<br />
Does anyone have a Function they know that works or a link<br />
to some code that actually works and does this ?<br />
<br />
I notice that several scripts don't work but at 1 time they might have ?<br />
<br />
 that's kind of wierd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">31st January 2004, 09:47</div></div><div class="posttext">Is there a script out there that replaces<br />
text based on the text type found on that line ?<br />
I'm hoping I won't have to code this from scratch:igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">31st January 2004, 12:28</div></div><div class="posttext">search for ReplaceInFile on the archive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainmanp7</div><div class="date">31st January 2004, 19:54</div></div><div class="posttext">here is what i'm having to do because the source code in the<br />
Archive does not work except sme examples concerning this<br />
<br />
Push &quot;&lt;Directory $\&quot;$INSTDIR/www/phpwebsite_en/$\&quot;&gt;&quot; ;replace with <br />
Push 1118 ;line to replace on <br />
Push &quot;$INSTDIR\Apache\conf\httpd.conf&quot; ;file to replace in <br />
Call WriteToFileLine <br />
<br />
Push &quot;\&quot; ;text in line to replace <br />
Push &quot;/&quot; ;replace with <br />
Push 1118 ;line to replace on <br />
Push &quot;$INSTDIR\Apache\conf\httpd.conf&quot; ;file to replace in <br />
Call ReplaceOnLine <br />
<br />
Push &quot;&quot; ;text in line to replace <br />
Push &quot;&quot; ;replace with <br />
Push 1118 ;line to replace on <br />
Push &quot;$INSTDIR\Apache\conf\httpd.conf&quot; ;file to replace in <br />
Call ReplaceOnLine <br />
<br />
I have to do this 28 times 3 and that is causing me to<br />
Open and close the same file 84 Times........<br />
<br />
Belive me you can actually watch the installer<br />
change every section with the human eyeball 84 times looks<br />
like 45 times this go's on for about 9 seconds<br />
watching \ go to / then it finishes real fast<br />
<br />
Here is why this is happening to me<br />
the first code replaces the inline<br />
then the \ to / pushes a correct 1 Down a line<br />
<br />
then the 3rd thing Deletes the top line allowing the 2n line<br />
to become the first......<br />
<br />
To me that's real crappy programming.<br />
<br />
to me i'm already busting 2018 lines as it is right now<br />
that section is taking up a good couple hundred<br />
just to get what i want :( done that could be done in 1<br />
line replacing on the line and at the edn of all the replacing have it sarch and replace a number of those instances. thus shortening up the time execution of the whole thing :)<br />
<br />
any ideas ?<br />
want to see the code ? mabey you could show me a better way ?<br />
<br />
Well i can show the file right now because it's only 25% done there are still like 45 more sections i need to add<br />
and  8 other programs to install bigger then the rest<br />
<br />
:igor:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>