<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Insllaoptions plugin - .ini file background, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Insllaoptions plugin - .ini file background NSIS Discussion" />
	
	<title> Insllaoptions plugin - .ini file background [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Insllaoptions plugin - .ini file background</div>
<hr />
<div class="pda"><a href="t-274644.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274644">Insllaoptions plugin - .ini file background</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">20th July 2007, 06:21</div></div><div class="posttext">Hello Friends,<br />
I am new to this forum. I have a request it may be small to you all..(:-)<br />
<br />
I am using Insllaoptions plugin in my Installer script and using a .ini file to accept some user inputs. I have added a skin with some color i.e. Blue and I would like to add the same color to the .ini file background. other wise the complete setup is in one color i.e. Blue and my Install Options page is coming in two colors i.e. ini file in Windows standard Gui color sourrounded with Blue color.<br />
<br />
Please do the needful.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th July 2007, 06:40</div></div><div class="posttext">It is described in InstallOptions documentation under Fonds and Colors.<br />
To change the parent dialog background use $HWNDPARENT e.g.<br />
FindWindow $1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
SetCtlColors $1 '' '0x0000FF'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th July 2007, 12:23</div></div><div class="posttext">That will not work. You need to Pop $Var between INITDIALOG and SHOW to get the handle of the InstallOptions window:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;ioFile.ini&quot;<br />
Pop $R0<br />
SetCtlColors $R0 0x000000 0xFF0000<br />
!insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
Your code will get the handle for any other child windows however.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th July 2007, 20:35</div></div><div class="posttext">Strange... Both following functions do exactly the same job.<br />
Am I missing something here?<br />
InstallOptions::InitDialog /NOUNLOAD &quot;$PLUGINSDIR\Custom.ini&quot;<br />
pop $0<br />
SetCtlColors $0 '' '0x0000FF'<br />
InstallOptions::show<br />
InstallOptions::InitDialog /NOUNLOAD &quot;$PLUGINSDIR\Custom.ini&quot;<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
SetCtlColors $0 '' '0x0000FF'<br />
InstallOptions::show</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 20:41</div></div><div class="posttext">Yes. You missing the case where the custom page is not the first page or that it comes right after another custom page. In some cases, the old dialog might still be active until InstallOptions::show is called and then FindWindow will get the old dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th July 2007, 20:55</div></div><div class="posttext">That's true, I've made the test with the custom page being the 1st and only one.<br />
Thanks boss :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">22nd July 2007, 10:45</div></div><div class="posttext">Thanks Friends..<br />
I tried with these options..failed..Here with sending my exact problem with screen shot..plz verify and do the needful.<br />
<br />
<br />
    InstallOptions::dialog &quot;$PLUGINSDIR\dbpaths.ini&quot;<br />
;;;;;;;;;;;;;ammu added --4m forum;;;;;;;;;;;;;;;;;;;;;;;;<br />
  FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  SetCtlColors $0 '' '0x0000FF'<br />
  InstallOptions::show<br />
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;<br />
  Pop ${TEMP1}<br />
  StrCmp ${TEMP1} &quot;success&quot; 0 continue<br />
  continue: Pop ${TEMP1}<br />
  Return<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd July 2007, 10:53</div></div><div class="posttext">Look at Red Wine's post (http://forums.winamp.com/showthread.php?postid=2212915#post2212915) again.<br />
<br />
You need to put it between InitDialog and Show.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">22nd July 2007, 10:58</div></div><div class="posttext">Here is my issue screen shot..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd July 2007, 11:05</div></div><div class="posttext">Did you not read our discussion?<br />
<br />
InstallOptions::InitDialog /NOUNLOAD &quot;$PLUGINSDIR\dbpaths.ini&quot;<br />
Pop $R0<br />
SetCtlColors $R0 0x000000 0x0000FF<br />
InstallOptions::Show<br />
<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">22nd July 2007, 11:20</div></div><div class="posttext">Stu - Did you not read our discussion?<br />
Ameer - I am sorry friend.. I haven't seen your comment while attacthing the screen shot my browse got some problem and I failed to see your message. <br />
I tried with your option.<br />
Now I am able to get the color in ini dialog. I still have one problem for labels..I'll try.<br />
<br />
Thanks for your help and sorry for not seeing reply properly<br />
<br />
Ammu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd July 2007, 11:40</div></div><div class="posttext">Ah right :)<br />
For the controls inside the dialog, you should set their backgrounds individually in the same place:<br />
<br />
<br />
InstallOptions::InitDialog /NOUNLOAD &quot;$PLUGINSDIR\dbpaths.ini&quot;<br />
<br />
Pop $R0<br />
SetCtlColors $R0 0x000000 0x0000FF<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\dbpaths.ini&quot; &quot;Field 1&quot; &quot;HWND&quot;<br />
SetCtlColors $R0 0x000000 0x0000FF<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\dbpaths.ini&quot; &quot;Field 2&quot; &quot;HWND&quot;<br />
SetCtlColors $R0 0x000000 0x0000FF<br />
# etc<br />
<br />
InstallOptions::Show<br />
<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">22nd July 2007, 12:12</div></div><div class="posttext">WOW....Got it..<br />
<br />
I got the color for all my fields. Thank you very much Stu.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Trexian</div><div class="date">23rd July 2007, 20:41</div></div><div class="posttext">Ok, I am very likely an idiot (people have suspected as much for a long time). :)<br />
<br />
I, too, am playing with getting images and colors into the background of the various installer windows.<br />
<br />
I am familiar with the basic NSIS instructions, but have studiously avoided things like functions.  But, it appears that time has finally come. :)<br />
<br />
In reviewing this thread and the &quot;Bitmaps in the Background&quot; thread, I've tried this code:<br />
<br />
<br />
Function SetCustom<br />
<br />
InstallOptions::initDialog /NOUNLOAD $PLUGINSDIR\testimgs.ini<br />
<br />
Pop $R0<br />
SetCtlColors $R0 0xFFFFF 0xFF0000<br />
<br />
InstallOptions::Show<br />
<br />
<br />
FunctionEnd<br />
<br />
<br />
I've included the mui.nsh also (if that is important).<br />
<br />
I successfully get the custom page (only field is to display a bitmap), but the colors are... well... the default.  Which are lovely, in a generic way, but not what I'm after.  (Which will hopefully end up with something like what the guy in that Bitmap thread had.)<br />
<br />
Anyway, I've searched the forums, searched the internet, searched the documentation, but have not been able to piece it together.  I'm trying to start simple, but even that is failing me. :)<br />
<br />
Any help would be much appreciated.<br />
<br />
T</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2007, 23:45</div></div><div class="posttext">The only thing wrong there is 0xFFFFF is missing an F (it's 0xRRGGBB). Not sure if that will fix it though.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Trexian</div><div class="date">24th July 2007, 02:25</div></div><div class="posttext">*blush*<br />
<br />
Thanks... math (hex or decimal) is not my forte. :)<br />
<br />
Alas, you're right - it didn't fix my problem.  Here's an interesting point, though: when I have alot of processes running, for a split second, the screen looks like it is black and red (such as one might expect with the FFFFFF/FF0000, but it is immediately replaced with the &quot;regular&quot; look.<br />
<br />
(I also changed it so I re-initialize plugins directory within the custom page function.  Figured it couldn't hurt anything, but it didn't help.)<br />
<br />
Thanks muchly.<br />
<br />
:thumbs:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th July 2007, 10:38</div></div><div class="posttext">Just checking you are calling the plugin like so:<br />
Page Custom SetCustom<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Trexian</div><div class="date">24th July 2007, 14:02</div></div><div class="posttext">Sorta-<br />
<br />
Page custom SetCustom &quot;&quot; &quot;: Testing InstallOptions&quot; ;Custom page. InstallOptions gets called in SetCustom.<br />
<br />
I copied that from someplace, I think.<br />
<br />
But, I think I'm going to tackle this from a different direction.<br />
<br />
Even if I use a custom page, I'm limited to the same size of the basic window as MUI, right?  (Ideally, I'd like to make the window size better, but even if that is possible, I don't think I'm ready for that yet.) ;)<br />
<br />
Is it possible to use MUI to put a bitmap as the skin of the  installer, and change the colors of the controls?  I've looked at wansis, but it doesn't look like it actually can put a bitmap in the background as a skin; that it skins just the elements.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>