<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" need some help, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  need some help NSIS Discussion" />
	
	<title> need some help [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  need some help</div>
<hr />
<div class="pda"><a href="t-273154.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273154">need some help</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">20th June 2007, 19:43</div></div><div class="posttext">Could you help me with a script?<br />
i want to have an install file , not autorun .<br />
A titel , and some place to write and a destination folder.<br />
(with a browse buton , cancel and install.)<br />
after he installed all the files i want him to open a file that was just installed .<br />
if the program runs, nothing should happens to the install file , but if the program closes ,<br />
the programm should be removed and again a screen appears ...<br />
(with again a title , some place to write , and a finish button .)<br />
<br />
first menu :<br />
http://img123.imageshack.us/img123/6449/firstmenuuh2.th.jpg (http://img123.imageshack.us/my.php?image=firstmenuuh2.jpg)<br />
second menu :<br />
http://img146.imageshack.us/img146/2969/secondmenurz8.th.jpg (http://img146.imageshack.us/my.php?image=secondmenurz8.jpg)<br />
third menu :<br />
http://img19.imageshack.us/img19/1262/thirdmenujm1.th.jpg (http://img19.imageshack.us/my.php?image=thirdmenujm1.jpg)<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th June 2007, 22:27</div></div><div class="posttext">I'm confused as what you want. What is wrong with the installer that you already have? Or are those screenshots of another installer?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">21st June 2007, 12:07</div></div><div class="posttext">well , i used them from a nsis example : library ,<br />
but i can't figure out how i could make him to open a file and afterwards remove it .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st June 2007, 12:35</div></div><div class="posttext">Use ExecWait to open an executable and wait for it to close and then Delete to delete the file.<br />
<br />
You may also want to use Modern UI (Examples\Modern UI) which has Welcome and Finish pages.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">21st June 2007, 15:10</div></div><div class="posttext">can u make a installer file that can't be copied?<br />
<br />
and uninstalles a file and itself?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st June 2007, 18:21</div></div><div class="posttext">You cannot prevent a user copying your installer.<br />
To delete oneself you have to execute (Exec) another program (which you can write in NSIS) that deletes the calling installer and then quits.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">23rd June 2007, 16:00</div></div><div class="posttext">so it can't uninstal itself?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">23rd June 2007, 18:48</div></div><div class="posttext">ok , i've got this so far :<br />
now i only need the install file to be deleted , how should i do this ?(and is there a way to edit the layout?)<br />
<br />
<br />
<br />
Name &quot;hello&quot; <br />
<br />
OutFile &quot;hello.exe&quot; <br />
<br />
InstallDir &quot;$PROGRAMFILES\hi\hello&quot; <br />
<br />
Page directory <br />
<br />
Page instfiles <br />
<br />
Section &quot;&quot; <br />
<br />
  SetOutPath $INSTDIR <br />
<br />
  File &quot;C:\hi\files\1.txt&quot;<br />
  File &quot;C:\hi\files\2.txt&quot;<br />
  File &quot;C:\hi\files\3.txt&quot;<br />
  File &quot;C:\hi\files\4.txt&quot;<br />
  File &quot;C:\hi\files\5.txt&quot;<br />
  File &quot;C:\hi\files\6.txt&quot;<br />
  File &quot;C:\hi\files\7.txt&quot;<br />
  File &quot;C:\hi\files\8.txt&quot;<br />
  File &quot;C:\hi\files\9.exe&quot;<br />
<br />
ExecWait '&quot;$INSTDIR\9.exe&quot; _?=$INSTDIR'<br />
<br />
Delete $INSTDIR\9.exe<br />
<br />
SetAutoClose true<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd June 2007, 18:59</div></div><div class="posttext">Name Delete<br />
OutFile delete_hello.exe<br />
SilentInstall silent<br />
<br />
Function .onInit<br />
  Sleep 1000<br />
  ReadRegStr $R0 HKLM &quot;Software\hello&quot; &quot;InstallerLocation&quot;<br />
  Delete &quot;$R0\hello.exe&quot;<br />
  Abort<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
<br />
File &quot;/oname=$PLUGINSDIR\delete_hello.exe&quot; &quot;delete_hello.exe&quot;<br />
WriteRegStr HKLM &quot;Software\hello&quot; &quot;InstallerLocation&quot; &quot;$EXEDIR&quot;<br />
Exec &quot;$PLUGINSIR\delete_hello.exe&quot;<br />
Quit<br />
<br />
<br />
First code snippet is code to be built as a separate executable. The second code snippet must go in your installer.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">24th June 2007, 14:57</div></div><div class="posttext">but than i have the delete_hello<br />
that has to be removed to!<br />
<br />
And does it has to be :<br />
<br />
Name &quot;hello&quot; <br />
<br />
OutFile &quot;hello.exe&quot; <br />
<br />
InstallDir &quot;$PROGRAMFILES\hi\hello&quot; <br />
<br />
Page directory <br />
<br />
Page instfiles <br />
<br />
Section &quot;&quot; <br />
<br />
SetOutPath $INSTDIR <br />
<br />
File &quot;C:\hi\files\1.txt&quot;<br />
File &quot;C:\hi\files\2.txt&quot;<br />
File &quot;C:\hi\files\3.txt&quot;<br />
File &quot;C:\hi\files\4.txt&quot;<br />
File &quot;C:\hi\files\5.txt&quot;<br />
File &quot;C:\hi\files\6.txt&quot;<br />
File &quot;C:\hi\files\7.txt&quot;<br />
File &quot;C:\hi\files\8.txt&quot;<br />
File &quot;C:\hi\files\9.exe&quot;<br />
<br />
ExecWait '&quot;$INSTDIR\9.exe&quot; _?=$INSTDIR'<br />
<br />
Delete $INSTDIR\9.exe<br />
<br />
SetAutoClose true<br />
<br />
SectionEnd<br />
<br />
File &quot;/oname=$PLUGINSIR\delete_hello.exe&quot; &quot;delete_hello.exe&quot;<br />
WriteRegStr HKLM &quot;Software\hello&quot; &quot;InstallerLocation&quot; &quot;$EXEDIR&quot;<br />
Exec &quot;$PLUGINSIR\delete_hello.exe&quot;<br />
Quit<br />
<br />
or<br />
<br />
Name &quot;hello&quot; <br />
<br />
OutFile &quot;hello.exe&quot; <br />
<br />
InstallDir &quot;$PROGRAMFILES\hi\hello&quot; <br />
<br />
Page directory <br />
<br />
Page instfiles <br />
<br />
Section &quot;&quot; <br />
<br />
SetOutPath $INSTDIR <br />
<br />
File &quot;C:\hi\files\1.txt&quot;<br />
File &quot;C:\hi\files\2.txt&quot;<br />
File &quot;C:\hi\files\3.txt&quot;<br />
File &quot;C:\hi\files\4.txt&quot;<br />
File &quot;C:\hi\files\5.txt&quot;<br />
File &quot;C:\hi\files\6.txt&quot;<br />
File &quot;C:\hi\files\7.txt&quot;<br />
File &quot;C:\hi\files\8.txt&quot;<br />
File &quot;C:\hi\files\9.exe&quot;<br />
<br />
ExecWait '&quot;$INSTDIR\9.exe&quot; _?=$INSTDIR'<br />
<br />
Delete $INSTDIR\9.exe<br />
File &quot;/oname=$PLUGINSIR\delete_hello.exe&quot; &quot;delete_hello.exe&quot;<br />
WriteRegStr HKLM &quot;Software\hello&quot; &quot;InstallerLocation&quot; &quot;$EXEDIR&quot;<br />
Exec &quot;$PLUGINSIR\delete_hello.exe&quot;<br />
Quit<br />
<br />
SetAutoClose true<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">24th June 2007, 18:02</div></div><div class="posttext">ikkeugh wrote<br />
can u make a installer file that can't be copied?<br />
and uninstalles a file and itself?but than i have the delete_hello<br />
that has to be removed to!<br />
I wonder if all this effort to delete the installer is an attempt to make an installer that can't be copied? If that is what you're doing, I'd say that you are wasting your time -- a user could always make a copy of the installer, save it off on another disk/media (CD-ROM, flash disk) and then run the installer and not care that one copy was deleted, he still has another copy.<br />
<br />
If you want to delete the installer for another reason, I suggest this method: have the installer write a short vbscript that will delete the installer and itself. (Vbscripts can delete themselves because the real exe (wscript.exe) is not deleted.) You could run the vbscript from the final callback in the installer (function .onInstSuccess).<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th June 2007, 18:29</div></div><div class="posttext">You don't need to delete the delete_hello executable because it is in $PLUGINSDIR which will be delete when the installer closes.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">24th June 2007, 19:55</div></div><div class="posttext">Stu<br />
Did you test your solution? I think the delete of $PLUGINSDIR will not work because delete_hello.exe is running and not deletable.<br />
<br />
If the installer waits (or hangs) while the delete of $PLUGINSDIR tries to do its thing it could succeed, but that would mean that delete_hello terminated (and failed to delete hello.exe).<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">24th June 2007, 21:17</div></div><div class="posttext">thanks all : that last one did it !!!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th June 2007, 22:14</div></div><div class="posttext">That's true. You should probably put RMDir /r /rebootok $EXEDIR in delete_hello.nsi just to be safe.<br />
<br />
Edit: Also, $PLUGINSIR -&gt; $PLUGINSDIR (missing D in my code).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikkeugh</div><div class="date">25th June 2007, 21:21</div></div><div class="posttext">I used the one of Don , is there any problem with that one?<br />
and is there a way to AUTOSTART the installation file after downloaded?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th June 2007, 22:55</div></div><div class="posttext">The one of Don?<br />
<br />
No you cannot do that. It would be a serious security vulnerability if programs could do that.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>