<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" create custom popup window, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  create custom popup window NSIS Discussion" />
	
	<title> create custom popup window [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  create custom popup window</div>
<hr />
<div class="pda"><a href="t-158507.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=158507">create custom popup window</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">4th December 2003, 12:06</div></div><div class="posttext">Hi, <br />
is it possible to create very basic pop up window with only edit control and ok button (for registration) using NSIS script?<br />
Or i should code own exe?<br />
<br />
Im sure i seen somewhere window manupulation functions on NSIS 2.0 docs but cant find it anymore.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">4th December 2003, 13:02</div></div><div class="posttext">Would it not be easier and look better to create a custom NSIS Page with a text box?<br />
<br />
Vytautas :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th December 2003, 13:52</div></div><div class="posttext">If you want to hide the cancel button and the back button use GetDlgItem and ShowWindow. You can find examples in Contrib\Modern UI\System.nsh. The MUI uses these kind of instructions a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">4th December 2003, 14:40</div></div><div class="posttext">Hmm good idea about make custom UI page but how to attach it?  Ideally it would be nice put register edit box tougether with directory selection page, so user fill directory edit plus register name and thats it. I go look to Moder UI macros now. Is so unusual grade from 1.98 to version 2.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">4th December 2003, 14:48</div></div><div class="posttext">Seems i found how to do it. InstallOptions.nsi is the way to go. What a powerful installer thanks alot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th December 2003, 19:05</div></div><div class="posttext">well, if you talking like those Visual Basic popup windows (AKA InputBox) you can create one, using the system plugin and check the APIs CreateWindowEx and DialogBox.<br />
Well....it's just my opinion<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">5th December 2003, 08:32</div></div><div class="posttext">I posted new post in that thread but its strangely disappeared.<br />
Okay, i created custom page but now how to do no give user leave until<br />
he fill that edit box? As i read, disable Install (next) button is not yet available.<br />
I made a function<br />
<br />
Function CustomPageC<br />
  !insertmacro MUI_HEADER_TEXT &quot;&quot; &quot;&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ioC.ini&quot;<br />
<br />
Emp:<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $INI_VALUE &quot;ioC.ini&quot; &quot;Field 1&quot; &quot;Text&quot;<br />
<br />
  StrCmp $INI_VALUE &quot;&quot; Emp Cont<br />
<br />
 Cont:<br />
  MessageBox MB_OK &quot;Ok&quot;<br />
FunctionEnd<br />
<br />
But its cause infinite loop so even exit installer doesnt help. Where i should put that coparation (but it should be before files installation start)<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">5th December 2003, 10:41</div></div><div class="posttext">You should define a leave function for that page and then use the abort command in that function if you do not want the user to proceed to the next page.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">5th December 2003, 12:06</div></div><div class="posttext">I tryed this way:<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
Page custom CustomPageC<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveCustomPageC<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
ie Leave function after Custom page,<br />
next:<br />
<br />
Function LeaveCustomPageC<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $REG_NAME &quot;ioC.ini&quot; &quot;Field 1&quot; &quot;Text&quot;<br />
  StrCmp $REG_NAME &quot;&quot; Emp Cont<br />
Emp:<br />
  Abort<br />
 Cont:<br />
  ;MessageBox MB_OK &quot;Empty.&quot;<br />
Exit:<br />
FunctionEnd<br />
<br />
Same infinite loop but appeareed after my custom page processed and AFTER files been installed (ie just before Finish dialog.<br />
<br />
What i doing wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">5th December 2003, 12:37</div></div><div class="posttext">Sorry for being stupid<br />
Read TEXT instead STATE <br />
but that CustomLeave page appear in strange place anyway.<br />
Where it should be place for 100% call before INSTFILES?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">5th December 2003, 13:34</div></div><div class="posttext">your defines are wrong.<br />
this:<br />
Page custom CustomPageC<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveCustomPageC <br />
!insertmacro MUI_PAGE_INSTFILES <br />
defines LeaveCustomPageC as leave-function for the instfiles-page.<br />
<br />
this code should work:<br />
Page custom CustomPageC LeaveCustomPageC<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
see the docs for more information about custom pages and their functions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aktion</div><div class="date">5th December 2003, 15:20</div></div><div class="posttext">Yep, made exactly that.<br />
Thanks</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>