<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" unable to cancel installation in between installation process, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  unable to cancel installation in between installation process NSIS Discussion" />
	
	<title> unable to cancel installation in between installation process [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  unable to cancel installation in between installation process</div>
<hr />
<div class="pda"><a href="t-318882.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318882">unable to cancel installation in between installation process</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dhiraj3301</div><div class="date">3rd May 2010, 10:24</div></div><div class="posttext">Hi,<br />
<br />
during installation,when i click cancel it shows pop up that &quot;Do you want to exit the setup?&quot;<br />
but installation is going on in background,when i click on yes then the installer quits,but,i want to pause the installation when the popup &quot;Do you want to exit the setup?&quot; is showed.for that i have written following code.<br />
<br />
<br />
!Define XPUI_ABORTWARNING_TEXT &quot;Do you want to exit the setup?&quot; IDYes quit<br />
<br />
Function INSTFILELEAVE<br />
  strcmp $XPUI_ABORTED 1 0 +2<br />
  quit<br />
FunctionEnd<br />
<br />
Please tell me what to do to pause installation when the popup is active.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">3rd May 2010, 10:33</div></div><div class="posttext">http://nsis.sourceforge.net/InstFiles_Cancel_-_Allowing_a_user_to_cancel_installation_during_InstFiles</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dhiraj3301</div><div class="date">3rd May 2010, 13:35</div></div><div class="posttext">this is not working properly,installation is not paused when the abort confirmation popup is opened,installation is still continue in background uptil when i have click on yes button.<br />
<br />
Please tell me how to pause the installation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">3rd May 2010, 14:13</div></div><div class="posttext">Please tell me how to pause the installation.<br />
It's explained on that page - did you actually try?<br />
<br />
<br />
OutFile &quot;test.exe&quot;<br />
<br />
!include &quot;xpui.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
ShowInstDetails show<br />
AutoCloseWIndow false<br />
<br />
Var UserIsMakingAbortDecision<br />
<br />
Function PauseIfUserIsMakingAbortDecision<br />
  ${DoWhile} $UserIsMakingAbortDecision == &quot;yes&quot;<br />
    DetailPrint &quot;Waiting for user to make decision...&quot;<br />
    Sleep 500<br />
  ${Loop}<br />
FunctionEnd<br />
!define PauseIfUserIsMakingAbortDecision `Call PauseIfUserIsMakingAbortDecision`<br />
<br />
${Page} InstFiles<br />
Section<br />
  GetDlgItem $0 $HWNDPARENT 2<br />
  EnableWindow $0 1<br />
  DetailPrint &quot;A&quot;<br />
  Sleep 1000<br />
  ${PauseIfUserIsMakingAbortDecision}<br />
  DetailPrint &quot;B&quot;<br />
  Sleep 1000<br />
  ${PauseIfUserIsMakingAbortDecision}<br />
  DetailPrint &quot;C&quot;<br />
SectionEnd<br />
<br />
Function .onUserAbort<br />
  StrCmp $NOABORTWARNING 1 AbortMe<br />
  StrCpy $UserIsMakingAbortDecision &quot;yes&quot;<br />
  MessageBox MB_YESNO|MB_ICONQUESTION &quot;Are you sure you want to cancel Setup?&quot; IDNO NoAbort<br />
  StrCpy $UserIsMakingAbortDecision &quot;no&quot;<br />
  !insertmacro XPUI_USERABORT<br />
  NoAbort:<br />
  StrCpy $UserIsMakingAbortDecision &quot;no&quot;<br />
  Abort<br />
  AbortMe:<br />
FunctionEnd<br />
<br />
!insertmacro XPUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
This is only the pausing part.  You'll want further code changes to handle things elegantly.. hence that page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dhiraj3301</div><div class="date">4th May 2010, 11:29</div></div><div class="posttext">this code works fine but i have used <br />
<br />
!Define XPUI_ABORTWARNING<br />
!Define XPUI_ABORTWARNING_TEXT &quot;Do you want to exit the setup?&quot;<br />
<br />
so,i cannot use function .OnUserAbort,please tell me is there any way to pause installation when we are using  !Define XPUI_ABORTWARNING .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">4th May 2010, 11:39</div></div><div class="posttext">tell me is there any way to pause installation when we are using  !Define XPUI_ABORTWARNING .<br />
yes-and-no...<br />
<br />
you'll have to create your own abort warning, just as in the above example and the examples on the wiki page.<br />
<br />
it is possible that you could adjust the ExperienceUI header file to add the pause variable (ExperienceUI\Contrib\XPUI.nsh, just search for .onUserAbort); you'll still have to check for that pause variable in your sections, yourself, though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th May 2010, 13:26</div></div><div class="posttext">If it is anything like MUI it should have an MUI_CUSTOMFUNCTION_ABORT or similar define.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">4th May 2010, 14:03</div></div><div class="posttext">If it is anything like MUI it should have an MUI_CUSTOMFUNCTION_ABORT or similar define.<br />
Doesn't seem to be.  The only custom functions are for GUI init, GUI end and Pre/Show/Leave for pages.  Defining XPUI_ABORTWARNING causes ExperienceUI to run its own .onUserAbort , which itself contains no code for handling additional user-based abort commands.<br />
<br />
So setting up one's own .onUserAbort, and not using XPUI_ABORTWARNING, appears to be the road to take there.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>