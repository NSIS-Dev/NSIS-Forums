<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Splash image makes installer &quot;sluggish&quot;., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Splash image makes installer &quot;sluggish&quot;. NSIS Discussion" />
	
	<title> Splash image makes installer &quot;sluggish&quot;. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Splash image makes installer &quot;sluggish&quot;.</div>
<hr />
<div class="pda"><a href="t-197394.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197394">Splash image makes installer &quot;sluggish&quot;.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">John P.</div><div class="date">25th October 2004, 17:06</div></div><div class="posttext">Hi.<br />
<br />
I thought I would add a splash image to my installer, and so I used code that I found here, and put it in .onInit:<br />
<br />
<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\splash.bmp &quot;splash.bmp&quot;<br />
  advsplash::show 4000 640 480 -1 $PLUGINSDIR\splash<br />
  Pop $0<br />
<br />
<br />
The problem is, that since I did this, upon opening the installer, a &quot;Please wait while files are extracted&quot;(or similar) messagebox pops up, and it takes maybe a minute for it to count from 0% to 100%, and then show the splash image.<br />
<br />
If I remove the splash code, the installer opens immediately.<br />
<br />
-If the splash thingy is making the installer this 'heavy', I can't say I think it's worth it.<br />
<br />
The image is pretty small(in my opinion) at 640x480, but since it's a .bmp it's at over 1MB still.<br />
<br />
I think I read somewhere that one could 'reserve' files, and that that would make the installer 'faster'. Does this apply here? Or would it only make it compile faster?<br />
I'm using LZMA compression, if that's related. <br />
<br />
It seems it has to extract the bitmap on load, and that this process takes maybe a minute.<br />
<br />
So is there any way to speed this up?<br />
<br />
Why isn't it possible to use a .jpg, btw?<br />
<br />
Thanks. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">25th October 2004, 17:21</div></div><div class="posttext">you should try reducing the palette of the image to 8bit or lower.<br />
<br />
using reservefile should speed up your installer, but make it much bigger.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th October 2004, 18:43</div></div><div class="posttext">Originally posted by John P. <br />
I think I read somewhere that one could 'reserve' files, and that that would make the installer 'faster'. Does this apply here? Or would it only make it compile faster?<br />
I'm using LZMA compression, if that's related.This applies exactly to this situation. Use ReserveFile on the top of the script, right after SetCompressor lzma. You should reserve the bitmap.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">John P.</div><div class="date">25th October 2004, 19:47</div></div><div class="posttext">Thanks for the replies, but it doesn't seem to change the fact that it takes 25 seconds to load the splash image on startup(I said a minute, but that was exaggerated - it just feels like 1 min).<br />
<br />
I don't think a simple splash image justifies delaying the installer by ~30 seconds(counting the time the splash is visible).<br />
<br />
I put SetCompressor at the top of the script like you said, just below !define VER_NAME, which is at the very top.<br />
<br />
Like this:<br />
<br />
<br />
!define VER_NAME &quot;Name of my installer.&quot;<br />
<br />
SetCompressor lzma<br />
ReserveFile &quot;splash.bmp&quot;<br />
<br />
<br />
-I'll try to make the image 'smaller' by lowering the color palette, unless there's something else I can do.<br />
<br />
-Any way to stretch the splash to cover the entire screen, by the way, like I've seen some installers do?<br />
<br />
<br />
<br />
UPDATE:<br />
<br />
I managed to take the image size down from 1,20MB to 300KB by making it 8bit, but the installer still has to spend quite a few seconds extracting it on startup...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th October 2004, 22:11</div></div><div class="posttext">Oops, forgot advsplash.dll itself. You need to reserve it too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">John P.</div><div class="date">26th October 2004, 19:13</div></div><div class="posttext">Sorry for the late reply.<br />
<br />
Just thought I'd reply to say thanks, it worked when I reserved the advsplash.dll as well.<br />
<br />
Now the installer opens right away.<br />
<br />
-If others read this thread later and have the same problem, I should add that to reserve the .dll file, I had to copy it from the NSIS plugins folder into my installer folder.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th October 2004, 19:07</div></div><div class="posttext">You don't have to move it, you can use:ReserveFile &quot;${NSISDIR}\Plugins\AdvSplash.dll&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>