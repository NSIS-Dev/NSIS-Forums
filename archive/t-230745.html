<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" GroupBox Text Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  GroupBox Text Question NSIS Discussion" />
	
	<title> GroupBox Text Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  GroupBox Text Question</div>
<hr />
<div class="pda"><a href="t-230745.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=230745">GroupBox Text Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">11th November 2005, 21:26</div></div><div class="posttext">Hello all.<br />
<br />
I have an installer where I am editing the stock Finish Page's iospecial.ini before it is diplayed in order to add some colored text.  That is working just fine.<br />
<br />
However I also added a GroupBox to the Finish Page, and it too looks good, but I noticed that the GroupBox Text (Final Update Status) is always displaying in a dark blue (see below).  I tested this on another installer that begins with a custom page, and there again, the text is blue.<br />
<br />
http://webpages.charter.net/orum/05.jpg<br />
<br />
I tried to change this using:GetDlgItem $MUI_TEMP1 $MUI_HWND 1202   ;3rd control<br />
SetCtlColors $MUI_TEMP1 &quot;000000&quot; &quot;${MUI_BGCOLOR}&quot;But no luck.  The iospecial.ini code is:[Field 3]<br />
Type=GroupBox<br />
Left=120<br />
Right=315<br />
Top=45<br />
Bottom=90<br />
Text=Final Update StatusAny ideas?  Thanks.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">11th November 2005, 21:32</div></div><div class="posttext">This is probably your XP theme doing its thing.<br />
I think that XP themes will override any colors you try to set, unless you subclass the control and override the XP theme.<br />
Did you try turning XPStyle off?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th November 2005, 21:33</div></div><div class="posttext">Modifying IntallOptions' test.nsi InstallOptions call did the trick and change the background color of the text.InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\test.ini&quot;<br />
Pop ${TEMP1}<br />
ReadINIStr ${TEMP1} &quot;$PLUGINSDIR\test.ini&quot; &quot;Field 1&quot; &quot;HWND&quot; # 2.11 feature<br />
SetCtlColors ${TEMP1} 0x00FF00 0xFF<br />
InstallOptions::showAre you sure the HWND is correct? Try hiding the window using ShowWindow. This way you can't be wrong about the window handle you got.<br />
<br />
[edit] Turning XPStyle on indeed changed my text color. That might be the problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">11th November 2005, 21:44</div></div><div class="posttext">iceman_k, yes, when I turn off XPStyle, it goes back to black, however I don't want to give up the XPStyle, but thanks for the suggestion.<br />
<br />
kichik, I believe I have the HWND correct when I added the last line of code below, the GroupBox disappeared.GetDlgItem $MUI_TEMP1 $MUI_HWND 1202  ;Set to 3rd control<br />
SetCtlColors $MUI_TEMP1 &quot;000000&quot; &quot;${MUI_BGCOLOR}&quot;<br />
ShowWindow $MUI_TEMP1 Hide<br />
I have these commands in the Finish Page SHOW function, along with the other commands to change the color of other Finish Page controls.  Am I doing something wrong?  Thanks.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th November 2005, 21:51</div></div><div class="posttext">Originally posted by Jnuw <br />
Am I doing something wrong?Nope, it seems correct. And if the control hides with ShowWindow, it most probably is. Try a transparent background, that might work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">11th November 2005, 22:01</div></div><div class="posttext">kichik, thanks for looking at this.  I tried setting the background to Transparent, and no change.  Then just to see if it was working, I did this:GetDlgItem $MUI_TEMP1 $MUI_HWND 1202  ;Set to 3rd control<br />
SetCtlColors $MUI_TEMP1 &quot;000000&quot; &quot;000000&quot;And got this:<br />
<br />
http://webpages.charter.net/orum/06.jpg<br />
<br />
So part of the command is working (backgrond), but not the font color part.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">11th November 2005, 22:14</div></div><div class="posttext">Originally posted by Jnuw <br />
iceman_k, yes, when I turn off XPStyle, it goes back to black, however I don't want to give up the XPStyle, but thanks for the suggestion. <br />
<br />
Like I said before, as long as you have XPStyle on, I don't think you can do anything about the Groupbox text color.<br />
One hack would be to place a label on top of the Groupbox which lies on top of the Groupbox label. Then set the label text color.<br />
If you are hellbent on using XPStyle then consider creating a plugin which subclasses the Groupbox control.<br />
The VisualStylesXP (http://www.codeproject.com/w2k/xpvisualstyle.asp?df=100&amp;forumid=3066&amp;exp=0&amp;select=674316)  wrapper might be of help there.<br />
(I am using it in EclipseNSIS to circumvent a bug in the Microsoft implementation of WM_PRINT for certain XP themed controls).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">14th November 2005, 21:43</div></div><div class="posttext">Originally posted by Jnuw <br />
GetDlgItem $MUI_TEMP1 $MUI_HWND 1202  ;Set to 3rd control<br />
SetCtlColors $MUI_TEMP1 &quot;000000&quot; &quot;000000&quot;And got this:<br />
<br />
http://webpages.charter.net/orum/06.jpg<br />
<br />
So part of the command is working (background), but not the font color part. <br />
<br />
Since the above command is not working for me, I took your suggestion iceman, and put a label control directly on top of the groupbox label.  It works/looks good on my PC.<br />
<br />
My question is this, will have any display or stability problems on my customers' PCs, with varying operating systems and/or video cards?  I just want to double check that I'm not taking any risks or making a buggy installer by intentionally programming a label control on top of another control.  Thanks all for your help.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">14th November 2005, 22:02</div></div><div class="posttext">Is there a particular reason why you want the groupbox color in black?<br />
Why don't you leave it as it is?<br />
That way the installer UI look &amp; feel will be consistent with the end-user's desktop look &amp; feel.<br />
IMHO, that is better than forcing it to be black.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">14th November 2005, 22:18</div></div><div class="posttext">Hi iceman_k, I know I'm being picky, however because I am using multiple colors (see below) within the groupbox, I feel that the blue text clashes with the rest of the colored text, and also draws some attention away from the inner text as well.  Again, I know I am being picky, but as along as there are no issues putting the a control on top of another, I would like the text to be black.  Sorry to be a pain, and thanks again for your help.<br />
<br />
http://webpages.charter.net/orum/FinishScreen.JPG<br />
 <br />
Versus<br />
<br />
http://webpages.charter.net/orum/FinishScreen2.JPG <br />
I know, it is subtle, but I think it looks better with the black. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">14th November 2005, 23:35</div></div><div class="posttext">Just to make sure that no underlying text is shown for the GroupBox, set its Text value to blank.<br />
I don't anticipate any issues on other versions of Windows O/S or different video cards.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">14th November 2005, 23:54</div></div><div class="posttext">Will do, and thanks again for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>