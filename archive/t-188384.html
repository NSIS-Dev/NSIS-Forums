<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Newbie: Needs Help With Component Sections 1 over 4, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Newbie: Needs Help With Component Sections 1 over 4 NSIS Discussion" />
	
	<title> Newbie: Needs Help With Component Sections 1 over 4 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Newbie: Needs Help With Component Sections 1 over 4</div>
<hr />
<div class="pda"><a href="t-188384.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=188384">Newbie: Needs Help With Component Sections 1 over 4</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">PCEnhancer</div><div class="date">31st July 2004, 03:42</div></div><div class="posttext">Newbie: This it my first week 1/2 using Nullsoft and i have hit a brickwall<br />
I need help with the Components Page Sections. I have 4 Sections each one is unique, but only 1 Section can installed, if two or more Sections are installed the last on that was writen to the haard drive is used. But that one may not be the one that is needed. So basically I need the Sections to swich off with only one Section or none being selected in the Components Page of my installer.<br />
<br />
<br />
One way i know of to do this is like this. (But it only covers 2 Sections.) And I need it to cover 4 Sections. Please Help<br />
<br />
;-----------------------<br />
Function .onSelChange<br />
  Push $0<br />
<br />
  StrCmp $R9 ${sec1}<br />
  <br />
    SectionGetFlags ${sec1} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec1}<br />
      SectionGetFlags ${sec2} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec2} $0<br />
<br />
    Goto done<br />
<br />
  check_sec1:<br />
<br />
    SectionGetFlags ${sec2} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec2}<br />
      SectionGetFlags ${sec1} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec1} $0<br />
done:<br />
FunctionEnd<br />
;-----------------------<br />
<br />
An summery of what I have tryed to do so far is hopefully at the bottum of the page in .nsi format [Note] The .nsi file was Compiled with Venis IX.<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
Here is Summery.nsi<br />
;----------------------<br />
<br />
;AUTHOR:PCEnhancer<br />
;REQUIRES:Windows 2000/XP<br />
BrandingText &quot;Cool v1.2&quot;<br />
;--------------------------------<br />
;Include Modern UI<br />
!include &quot;MUI.nsh&quot;<br />
;--------------------------------<br />
;General<br />
<br />
;Name and file<br />
!define APPNAME &quot;Cool&quot;<br />
!define APPNAMEANDVERSION &quot;Cool v1.2&quot;<br />
Name &quot;${APPNAMEANDVERSION}&quot;<br />
OutFile &quot;Cool Need Help.exe&quot;<br />
<br />
;Default installation folder<br />
InstallDir &quot;$DESKTOP\Cool&quot; <br />
InstallDirRegKey HKLM &quot;Software\${APPNAME}&quot; &quot;&quot;<br />
;--------------------------------<br />
;Variables<br />
<br />
  Var MUI_TEMP<br />
;--------------------------------<br />
;Interface Configuration<br />
<br />
!define MUI_BGCOLOR 000000<br />
!define MUI_COMPONENTSPAGE_SMALLDESC<br />
!define MUI_COMPONENTSPAGE_TEXT_COMPLIST &quot;&quot;<br />
!define  MUI_COMPONENTSPAGE_TEXT_INSTTYPE &quot;&quot;<br />
;--------------------------------<br />
;Pages<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
;!insertmacro MUI_PAGE_INSTFILES<br />
;--------------------------------<br />
;Languages<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
;Set Section properties<br />
SetOverwrite on<br />
<br />
ShowInstDetails &quot;show&quot;<br />
;--------------------------------<br />
SubSection /e &quot;Install Cool Cursors [ACTIVE]&quot; &quot;Hello&quot;<br />
	<br />
Section &quot;Install Cursors as [ACTIVE]&quot; sec1<br />
SectionEnd<br />
;--------------------------------<br />
Section &quot;Install Cursors Burnt as [ACTIVE]&quot; sec2<br />
;Wright Data &quot;Cool Cursors&quot; to Registry<br />
SectionEnd<br />
;--------------------------------<br />
Section &quot;Install Cursors Solid as [ACTIVE]&quot; sec3<br />
;Wright Data &quot;Cool Cursors&quot; to Registry<br />
SectionEnd<br />
;--------------------------------<br />
Section &quot;Install Cursors Burnt Solid as [ACTIVE]&quot; sec4<br />
SectionEnd<br />
SubSectionEnd<br />
;-------------------------------------------------------<br />
<br />
<br />
;HERE IS THE PROBLEM!!!!!!!!<br />
;--------------------------------------<br />
Function .onInit<br />
  System::Call 'kernel32::CreateMutexA(i 0, i 0, t &quot;myMutex&quot;) i .r1 ?e' <br />
<br />
  Pop $R0 <br />
<br />
  StrCmp $R0 0 +3 <br />
    MessageBox MB_OK &quot;The installer is already running.&quot; <br />
    Abort<br />
	;------------------------<br />
	Push $0<br />
<br />
  StrCpy $R9 ${sec1} ; Gotta remember which section we are at now...<br />
  SectionGetFlags ${sec1} $0<br />
  IntOp $0 $0 | ${SF_SELECTED}<br />
  SectionSetFlags ${sec1} $0<br />
<br />
  SectionGetFlags ${sec2} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec2} $0<br />
<br />
  SectionGetFlags ${sec3} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec3} $0<br />
<br />
  SectionGetFlags ${sec4} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec4} $0<br />
<br />
  Pop $0<br />
FunctionEnd<br />
<br />
;I Need Help With This Right Here.<br />
;-------------------------------------------<br />
Function .onSelChange<br />
  Push $0<br />
<br />
  StrCmp $R9 ${sec1} check_sec1<br />
  <br />
    SectionGetFlags ${sec1} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec1}<br />
      SectionGetFlags ${sec2} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec2} $0<br />
<br />
    Goto done<br />
<br />
  check_sec1:<br />
<br />
    SectionGetFlags ${sec2} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec2}<br />
      SectionGetFlags ${sec1} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec1} $0<br />
<br />
  Goto done<br />
	;done:<br />
;-------------------------------------------<br />
  Pop $0<br />
	<br />
	  Push $0<br />
<br />
  StrCmp $R9 ${sec3} check_sec3<br />
  <br />
    SectionGetFlags ${sec3} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec3}<br />
      SectionGetFlags ${sec4} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec4} $0<br />
<br />
    Goto done<br />
<br />
  check_sec3:<br />
<br />
    SectionGetFlags ${sec4} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done done<br />
      StrCpy $R9 ${sec4}<br />
      SectionGetFlags ${sec3} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${sec3} $0<br />
<br />
  done:<br />
<br />
  Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mumuri</div><div class="date">31st July 2004, 09:39</div></div><div class="posttext">Hello<br />
<br />
 i ve got the same problems a few weeks ago,<br />
<br />
as fas as i remember, i only add this<br />
Function .onSelChange<br />
<br />
<br />
  !insertmacro StartRadioButtons $1<br />
    !insertmacro RadioButton ${SecStandard}<br />
    !insertmacro RadioButton ${SecLocal}<br />
    !insertmacro RadioButton ${SecWeb}<br />
  !insertmacro EndRadioButtons<br />
   <br />
FunctionEnd<br />
SecStandard;SecLocal,SecWeb are the name of your section<br />
<br />
and you have to add this at the begining of your script<br />
!include &quot;Sections.nsh&quot;<br />
<br />
I 'm not sure of this, but it should work.<br />
If it doesn't work try to look on the example directory of your nsis folder, there is an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PCEnhancer</div><div class="date">31st July 2004, 10:44</div></div><div class="posttext">Thanks for your Reply. You were right about there an example in the nsis directory. I found &quot;one-section.nsi&quot; and altered it to this and now it works ok, there is a small bug with it in the SubSection, if in the installer you click on that sud section it highlight all the section but one. But hay it works so far. Thanks<br />
<br />
<br />
Function .onInit<br />
<br />
Push $0<br />
<br />
 StrCpy $1 ${sec9}<br />
  SectionGetFlags ${sec9} $0<br />
  IntOp $0 $0 | ${SF_SELECTED}<br />
  SectionSetFlags ${sec9} $0<br />
<br />
  SectionGetFlags ${sec10} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec10} $0<br />
<br />
  SectionGetFlags ${sec11} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec11} $0<br />
<br />
  SectionGetFlags ${sec12} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${sec12} $0<br />
<br />
  Pop $0<br />
<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
<br />
  !insertmacro StartRadioButtons $1<br />
    !insertmacro RadioButton ${sec1}<br />
    !insertmacro RadioButton ${sec2}<br />
    !insertmacro RadioButton ${sec3}<br />
		!insertmacro RadioButton ${sec4}<br />
  !insertmacro EndRadioButtons<br />
	<br />
FunctionEnd<br />
<br />
<br />
Replaces!!!<br />
;-----------<br />
<br />
 Push $0<br />
<br />
StrCpy $R9 ${sec1} ; Gotta remember which section we are at now...<br />
SectionGetFlags ${sec1} $0<br />
IntOp $0 $0 | ${SF_SELECTED}<br />
SectionSetFlags ${sec1} $0<br />
<br />
SectionGetFlags ${sec2} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec2} $0<br />
<br />
SectionGetFlags ${sec3} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec3} $0<br />
<br />
SectionGetFlags ${sec4} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec4} $0<br />
<br />
Pop $0<br />
FunctionEnd<br />
<br />
;I Need Help With This Right Here.<br />
;-------------------------------------------<br />
Function .onSelChange<br />
Push $0<br />
<br />
StrCmp $R9 ${sec1} check_sec1<br />
<br />
SectionGetFlags ${sec1} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
IntCmp $0 ${SF_SELECTED} 0 done done<br />
StrCpy $R9 ${sec1}<br />
SectionGetFlags ${sec2} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec2} $0<br />
<br />
Goto done<br />
<br />
check_sec1:<br />
<br />
SectionGetFlags ${sec2} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
IntCmp $0 ${SF_SELECTED} 0 done done<br />
StrCpy $R9 ${sec2}<br />
SectionGetFlags ${sec1} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec1} $0<br />
<br />
Goto done<br />
;done:<br />
;-------------------------------------------<br />
Pop $0<br />
<br />
Push $0<br />
<br />
StrCmp $R9 ${sec3} check_sec3<br />
<br />
SectionGetFlags ${sec3} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
IntCmp $0 ${SF_SELECTED} 0 done done<br />
StrCpy $R9 ${sec3}<br />
SectionGetFlags ${sec4} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec4} $0<br />
<br />
Goto done<br />
<br />
check_sec3:<br />
<br />
SectionGetFlags ${sec4} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
IntCmp $0 ${SF_SELECTED} 0 done done<br />
StrCpy $R9 ${sec4}<br />
SectionGetFlags ${sec3} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec3} $0<br />
<br />
done:<br />
<br />
Pop $0<br />
FunctionEnd<br />
<br />
And it Works, Thanks Again.:)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>