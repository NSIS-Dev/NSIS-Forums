<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Correct sub-folders for &quot;current user&quot;-mode, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Correct sub-folders for &quot;current user&quot;-mode NSIS Discussion" />
	
	<title> Correct sub-folders for &quot;current user&quot;-mode [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Correct sub-folders for &quot;current user&quot;-mode</div>
<hr />
<div class="pda"><a href="t-313840.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313840">Correct sub-folders for &quot;current user&quot;-mode</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">15th October 2009, 06:28</div></div><div class="posttext">Hi,<br />
Sorry if this problem was already discussed, but I couldn't find the answer.<br />
I use MultiUser.nsh in my script and I have the following define:<br />
!define MULTIUSER_INSTALLMODE_DEFAULT_CURRENTUSER<br />
The dialog for selection of the mode is not shown, so the installation is fixed to &quot;current user&quot;. <br />
The shortcuts and writing to the Windows registry is OK, but the installer places my application on a wrong subfolder. I mean that Program Files (x86) on Vista and 7 is virtual, so the installer must place the application in the sub-folder User\... (specific for the user). I expected that if the correct mode is selected, then the variables like $PROGRAMFILES, $INSTDIR, $COMMONFILES will have the correct content, but it is not so. Can you give me an advice what to do to install my application in the correct subfolder for the current user only?<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">15th October 2009, 12:43</div></div><div class="posttext">Originally posted by TrifonovS <br />
I expected that if the correct mode is selected, then the variables like $PROGRAMFILES, $INSTDIR, $COMMONFILES will have the correct content, but it is not so. <br />
Actually it is. It's not NSIS's fault that a normal user doesn't have write priviledges to $PROGRAMFILES. Use LocalAppData as installation folder, instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">16th October 2009, 06:55</div></div><div class="posttext">Thanks! It works now. I use $PROGRAMFILES or $LOCALAPPDATA, depending on the selected installation mode.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>