<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Read, edit a single line in a file?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Read, edit a single line in a file? NSIS Discussion" />
	
	<title> Read, edit a single line in a file? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Read, edit a single line in a file?</div>
<hr />
<div class="pda"><a href="t-95719.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=95719">Read, edit a single line in a file?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Morphie</div><div class="date">25th July 2002, 20:31</div></div><div class="posttext">Is it possible for NSIS to edit a single line in a file? Like overwrite line 2 of runmefirst.bat with &quot;move ..\setup\*.* .\setup32&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th July 2002, 20:56</div></div><div class="posttext">You will have to read the file using FileRead line by line and write to another temporary file, using FileWrite. When you reach the desired line write the line you want to replace it instead of the line read. After you write your line, continue reading and writing like before. Then just replace the old file with the temporary file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Morphie</div><div class="date">25th July 2002, 23:29</div></div><div class="posttext">That... is confusing. :weird: Could you give me an example?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th July 2002, 12:49</div></div><div class="posttext">FileOpen $0 &quot;file.txt&quot; r<br />
GetTempFileName $R0<br />
FileOpen $1 $R0 w<br />
loop:<br />
   FileRead $0 $2<br />
   IfErrors done<br />
   StrCmp $2 &quot;line to replace$\r$\n&quot; 0 +3<br />
      FileWrite $1 &quot;replacement of line$\r$\n&quot;<br />
      Goto loop<br />
   FileWrite $1 $2<br />
   Goto loop<br />
<br />
done:<br />
   FileClose $0<br />
   FileClose $1<br />
   Delete &quot;file.txt&quot;<br />
   CopyFiles /SILENT $R0 &quot;file.txt&quot;<br />
   Delete $R0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Morphie</div><div class="date">26th July 2002, 18:23</div></div><div class="posttext">THAT one helps! Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>