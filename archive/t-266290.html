<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" activate greyed buttons at final screen, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  activate greyed buttons at final screen NSIS Discussion" />
	
	<title> activate greyed buttons at final screen [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  activate greyed buttons at final screen</div>
<hr />
<div class="pda"><a href="t-266290.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266290">activate greyed buttons at final screen</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">21st February 2007, 14:32</div></div><div class="posttext">There are three buttons at the final screen (Exit, Options, Close), two of them greyed (Exit and Options), how could I activate them and write a function for them?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st February 2007, 17:03</div></div><div class="posttext">I wonder, are you referring to NSIS installer?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st February 2007, 17:14</div></div><div class="posttext">http://nsis.sourceforge.net/ButtonEvent_plug-in<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">21st February 2007, 21:42</div></div><div class="posttext">lol, yes I am talking about NSIS :)<br />
<br />
Afrow UK, let's see if you can help me a bit, because the example in that plugin is too complex for me.<br />
<br />
3 is the control id of the greyed button &quot;Options&quot;, I put this code as a function that loads the page where the button is:<br />
 Function MyGUIInit<br />
  # Create event handler for our parent window button.<br />
  ButtonEvent::AddEventHandler /NOUNLOAD 3<br />
 FunctionEnd<br />
<br />
and then I put this other code as a function when the page is left.<br />
 Function ComponentsLeave<br />
  # Find out if one of our buttons was just pressed.<br />
  ButtonEvent::WhichButtonID /NOUNLOAD<br />
   Pop $R0 # Control ID of button user pressed.<br />
and that's all, then the greyed button should do what the function ComponentsLeave says, did I understood correctly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st February 2007, 23:56</div></div><div class="posttext">I found a bit of old text in the readme about the /PARENT parameter which is no longer needed... if you want to grab the Zip again at http://nsis.sf.net/File:ButtonEvent.zip<br />
<br />
Yes that code is correct, but I wouldn't recommend using the back button though (because it belongs to the installer), but try it anyway it should still work.<br />
<br />
$R0 in your leave function will be 3 if your button is pressed or -1 otherwise. A simple StrCmp (or ${If}) will allow you to execute NSIS code accordingly.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">25th February 2007, 17:36</div></div><div class="posttext">this is the code I used with the previous functions:<br />
<br />
Page InstFiles &quot;EnterInstall&quot; &quot;&quot; &quot;ExitFunction&quot; <br />
<br />
the problem is that the ExitFunction is loaded before the user can even click on a button.<br />
<br />
Remember that I am trying to activate the buttons on the final page of the installer, which I couldn't find a page name for it, and hence I used &quot;InstFiles&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">13th January 2011, 16:21</div></div><div class="posttext">ok, after almost four years, I attempt to do it again :P<br />
<br />
is it possible to make clickable the button which in this screenshot is called &quot;enrera&quot;?<br />
<br />
http://www.flickr.com/photos/mai9/5184179946/<br />
<br />
because I am not sure if what the plugin ButtonEvent is made for this purpose.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th January 2011, 17:44</div></div><div class="posttext">Why are you calling ExitFunction on page leave? Try not calling it.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">18th January 2011, 17:57</div></div><div class="posttext">I was trying to use it because on Feb 22 you said:<br />
<br />
$R0 in your leave function will be 3 if your button is pressed or -1 otherwise. A simple StrCmp (or ${If}) will allow you to execute NSIS code accordingly.<br />
<br />
<br />
I have one other question, if I want to use the button called &quot;enrera&quot; in the screenshot, do I have to reshack edit the UI?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th January 2011, 18:05</div></div><div class="posttext">Ah I see. You could try using ButtonEvent on both. Why do you need to edit the UI? If the button is already there you just need to enable it and show it (if it is hidden).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">18th January 2011, 18:23</div></div><div class="posttext">Ah I see. You could try using ButtonEvent on both. Why do you need to edit the UI? If the button is already there you just need to enable it and show it (if it is hidden).<br />
<br />
Ok, great, no need to edit the UI. I read it in the readme and I was wondering if I should still have to edit it.<br />
<br />
Next.<br />
<br />
What does it mean to &quot;use ButtonEvent on both&quot; which both? I don't understand what &quot;both&quot; are you refering to. Also, how to use ButtonEvent on them? Do you mean both buttons? The close button and the one I am interested?<br />
<br />
I am using the default UI. So, what I have is this page with the leave function and the grey button I want to use.<br />
<br />
Page InstFiles &quot;EnterInstall&quot; &quot;&quot; &quot;ExitFunction&quot; <br />
<br />
I am trying to read the examples, but I get lost easily.<br />
<br />
So, what I have to do is activate the grey button and put the ButtonEvent code somewhere so I can compare $R0 on the leave function and if it's 3 then use the code I want for that button.<br />
<br />
Now, if you can help me a little bit further... thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th January 2011, 00:14</div></div><div class="posttext">Yes try on both buttons. I understand what you are trying to do by using a leave function but you don't have to do it that way. You can just use callbacks on each button instead via ButtonEvent.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">19th January 2011, 01:06</div></div><div class="posttext">how can I use a callback on the grey button? I still don't know how to make that button active.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th January 2011, 11:14</div></div><div class="posttext">Get the correct control id and use that (it will be 1, 2 or 3). To make it active use EnableWindow and if necessary ShowWindow.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">21st January 2011, 13:48</div></div><div class="posttext">Ok, I am finally seeing the light :)<br />
<br />
<br />
<br />
I made this function to see which button is pressed at the end:<br />
<br />
Function `.onInstSuccess`<br />
  ButtonEvent::WhichButtonId<br />
  Pop $R0<br />
  MessageBox MB_OK &quot;$R0&quot;<br />
FunctionEnd<br />
<br />
<br />
But I can't get the &quot;back&quot; button to be active when the installer has finished. This code makes it active while installing, but it turns grey again when it's finished.<br />
<br />
<br />
Function `obrir`<br />
  GetDlgItem $0 $HWNDPARENT 3<br />
  EnableWindow $0 1<br />
FunctionEnd<br />
<br />
<br />
This function is called in the instfiles page:<br />
<br />
Page InstFiles `` `obrir` ``</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st January 2011, 16:40</div></div><div class="posttext">I have tried and all I can suggest is you add another button (i.e. ID of 4) over the top of the Back button with Resource Hacker and only show it on the InstFiles page. For the previous and next pages you will need to hide the button again (add a Show functions for both).<br />
<br />
I.e.Page Components HideMyBackButton<br />
Page InstFiles ShowMyBackButton<br />
Page SomeOtherPage HideMyBackButton<br />
<br />
Function HideMyBackButton<br />
  GetDlgItem $0 $HWNDPARENT 4<br />
  ShowWindow $0 ${SW_HIDE} ; WinMessages.nsh<br />
FunctionEnd<br />
<br />
Function ShowMyBackButton<br />
  GetDlgItem $0 $HWNDPARENT 4<br />
  ShowWindow $0 ${SW_SHOW} ; WinMessages.nsh<br />
FunctionEndStu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">24th January 2011, 00:06</div></div><div class="posttext">ok, thanks for trying. I'll see what I can do.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">25th January 2011, 23:25</div></div><div class="posttext">I have tried and all I can suggest is you add another button (i.e. ID of 4) over the top of the Back button with Resource Hacker and only show it on the InstFiles page. For the previous and next pages you will need to hide the button again (add a Show functions for both).<br />
<br />
I.e.[code]Page Components HideMyBackButton<br />
Page InstFiles ShowMyBackButton<br />
Page SomeOtherPage HideMyBackButton<br />
<br />
<br />
Correct me if I am wrong, but with this code the &quot;MyBackButton&quot; is showed at the beginning of the install, not at the end (when the close button activates)<br />
<br />
I am not using &quot;SomeOtherPage&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th January 2011, 17:50</div></div><div class="posttext">If you need that behaviour then you will have to enable the button in your last section (or add another section at the end specially). As for adding in the last page, well that was just for an example.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">29th January 2011, 12:41</div></div><div class="posttext">ok thanks. I see how this goes.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>