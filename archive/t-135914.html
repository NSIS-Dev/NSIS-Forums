<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Processor, Memory, OS, Graphics Info?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Processor, Memory, OS, Graphics Info? NSIS Discussion" />
	
	<title> Processor, Memory, OS, Graphics Info? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Processor, Memory, OS, Graphics Info?</div>
<hr />
<div class="pda"><a href="t-135914.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135914">Processor, Memory, OS, Graphics Info?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Psychedelic</div><div class="date">19th May 2003, 19:57</div></div><div class="posttext">Hi,<br />
I am trying to create an installer that checks to see if the current hardware meets minimum system requirements.<br />
In order to do this I need to check the speed of the processor, total physical RAM, operating system version and also preferably info about the graphics card such as graphics memory.<br />
<br />
I have searched the forums and the documentation but i haven't found a function that will give me this information.<br />
<br />
Does anyone have any idea how i might accomplish this?<br />
<br />
Thanks<br />
Psych</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">19th May 2003, 21:02</div></div><div class="posttext">You have plugin call &quot;system.dll&quot; in ${NSISDIR}\Plugins&quot;.<br />
Check this web archive (http://nsis.sourceforge.net/archive/nsisweb.php?page=135&amp;instances=0,32) to see more examples.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Psychedelic</div><div class="date">19th May 2003, 21:59</div></div><div class="posttext">Ok so I looked at the examples at the link you showed me. I'm a beginer as far as programming in win32 is concerned so is there somewhere i can look to find the relevant functions that i need to call?<br />
I need to know the:<br />
Processor Type: (AMD/INTEL)<br />
Process Speed:  MHz<br />
RAM:  MB<br />
OS: NT/98/ME/2000/XP<br />
<br />
and preferably<br />
Video Memory:  MB<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th May 2003, 22:10</div></div><div class="posttext">You can get the full Windows version - look here (http://nsis.sourceforge.net/Docs/AppendixB.html#b.5)<br />
No-one has written a plug-in to determin how much video card memory a pc has, but somone is currently writing one - look at this post here (http://forums.winamp.com/showthread.php?s=&amp;threadid=133768)<br />
As far as I can see, the plugin is really only 5% done!<br />
<br />
I'm not sure how to get the processor, mhz, and ram, but I'm sure Kichik could write you something which uses the system plugin.<br />
<br />
There is a way to detext the version of Directx nstalled, and to update it in this topic: here (http://forums.winamp.com/showthread.php?s=&amp;threadid=134762)<br />
<br />
Hope some of them help!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th May 2003, 22:11</div></div><div class="posttext">You could also search for a windows specific value in the registry, incase you find where windows may put some useful values.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">19th May 2003, 22:51</div></div><div class="posttext">Check out the cpudesc plugin here (http://nsis.sourceforge.net/archive/viewpage.php?pageid=249), that can get you the cpu information you require.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Psychedelic</div><div class="date">21st May 2003, 22:17</div></div><div class="posttext">Ok so I have the OS and the RAM now. I noticed a script that would read an entry of the registy but only of type REG_MULTI_SZ. The system MHz is of type REG_DWORD.<br />
I've tried to modify the file but with no success. Does anyone know how i might acccess this information?<br />
<br />
Thanks<br />
<br />
The file that I was trying to work off of is located in the plugin's folder in the System Plugins Examples.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd May 2003, 16:39</div></div><div class="posttext">You don't need a special script to read from REG_DWORD, just use ReadRegDWORD. Make sure that value is always true, on Windows 98 too. I think I have heard about this value somewhere and if I remember correctly it doesn't hold the right value on Windows 98 and is off by a little on other systems.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd May 2003, 17:32</div></div><div class="posttext">To find out the CPU speed you can use a variant of this program:<br />
http://www.codeproject.com/system/cputest.asp#xx372884xx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Psychedelic</div><div class="date">22nd May 2003, 17:58</div></div><div class="posttext">Thanks!<br />
That worked.<br />
All i needed was:<br />
ReadRegDWORD $0 HKLM &quot;HARDWARE\DESCRIPTION\System\CentralProcessor\0\&quot; &quot;~MHz&quot;<br />
 MessageBox MB_OK &quot;Processor Speed: $0MHz&quot;<br />
<br />
I've tested it on NT4, 2000 &amp; XP so far and it works.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd May 2003, 18:05</div></div><div class="posttext">I have just checked it on Windows 98 and it doesn't work. The key isn't there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th May 2003, 19:51</div></div><div class="posttext">Latest CPUDesc gets CPU speed too:<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=288&amp;instances=0,32<br />
<br />
The page hasn't updated yet but the download has.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">28th August 2006, 10:39</div></div><div class="posttext">I was trying out this plugin to get the cpu speed. It is a modification of the Examples\System\System.nsi code<br />
<br />
With an AMD64-3700 (single CPU) with 2.4 clock speed, I'm getting a mhz result of 1283. The results from the NCPU and RAM are correct. Am I doing something wrong? (Note that I have the cpu running at full-speed, without the energy saving AMD Cool'n'Quiet in effect.)<br />
<br />
<br />
; This is just an example of cpudesc Plugin<br />
; To have this work, cpudesc.dll should be in 'plugin' subdirectory<br />
; As of 2006-Aug-27, here is a link to cpudesc:<br />
; http://nsis.sourceforge.net/mediawiki/images/8/87/Cpudesc.zip<br />
; <br />
; (c) l_d_allan (modified from system.nsi by brainsucker)<br />
<br />
Name &quot;CheckMhz Plugin Example&quot;<br />
OutFile &quot;CheckMhz.exe&quot;<br />
SetPluginUnload  alwaysoff<br />
<br />
Section &quot;ThisNameIsIgnoredSoWhyBother?&quot;<br />
  SetOutPath $TEMP<br />
<br />
  ; ----- Sample 3a ----- Direct proc definition -----<br />
  ;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999<br />
  ;01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890<br />
  ;INTELP=d AMD=add PPRO=b MMX=d SSE=b SSE2=b 3DNOW=d ARCH=dd LEVEL=dd NCPU=dd MHZ=ddddd RAM=dddd<br />
<br />
  ; Direct specification demo<br />
  cpudesc::tell<br />
  Pop $0<br />
 <br />
  StrCpy $1 $0 2, 73         ;pull out two characters after NCPU=<br />
  IntFmt $4 &quot;%u&quot; $1          ; and turn it into a number in $4<br />
  StrCpy $1 $0 5, 80         ;pull out five characters after MHZ=<br />
  IntFmt $2 &quot;%u&quot; $1          ; and turn it into a number in $2<br />
  StrCpy $1 $0 4, 90         ;pull out four characters after RAM=<br />
  IntFmt $3 &quot;%u&quot; $1          ; and turn it into a number in $3<br />
  MessageBox MB_OKCANCEL &quot;NCPU: '$4'  Mhz: '$2'  Ram (megs): '$3'&quot;<br />
<br />
  ; last plugin call must not have /NOUNLOAD so NSIS will be able to delete the temporary DLL<br />
  SetPluginUnload manual<br />
  ; do nothing<br />
  System::Free 0<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2006, 12:03</div></div><div class="posttext">The leading zeros cause NSIS to think it's an octal number. You can add another leading number and later remove it.StrCpy $1 $0 5 80<br />
IntOp $2 1$1 - 100000</div></div><hr />


<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">28th August 2006, 12:47</div></div><div class="posttext">Thanks ... you're good!<br />
<br />
Like so?<br />
<br />
  cpudesc::tell<br />
  Pop $0<br />
 <br />
  StrCpy $1 $0 2, 73         ;pull out two characters<br />
                             ; (that may have leading<br />
                             ; zero) after NCPU=<br />
  StrCpy $1 1$1              ;$1 now has leading 1 in<br />
                             ; front of 0 to keep from <br />
                             ; being octal<br />
  IntOp  $2 $1 - 100         ;remove leading one<br />
  <br />
  StrCpy $1 $0 5, 80         ;pull out five characters <br />
                             ; that may have leading 0<br />
                             ; after MHZ=<br />
  StrCpy $1 1$1              ;$1 now has leading 1 in<br />
                             ; front of 0 to keep from<br />
                             ; being octal<br />
  IntOp  $3 $1 - 100000      ;remove leading one<br />
<br />
  StrCpy $1 $0 4, 90         ;pull out four characters <br />
                             ; after RAM=<br />
  StrCpy $1 1$1              ;$1 now has leading 1 in <br />
                             ; front of 0 to keep from <br />
                             ; being octal<br />
  IntOp  $4 $1 - 10000       ;remove leading one<br />
<br />
  MessageBox MB_OKCANCEL &quot;NCPU: '$2'  Mhz: '$3'  Ram (megs): '$4'&quot;<br />
 <br />
<br />
Perhaps it would be appropriate to modify the cpudesc.c code. I took a look at it, and there is this line:<br />
<br />
wsprintf( ostr, &quot;INTELP=%1d AMD=%c%2.2d PPRO=%1d MMX=%1d SSE=%1d SSE2=%1d 3DNOW=%1d ARCH=%2.2d LEVEL=%2.2d NCPU=%2.2d MHZ=%5.5d RAM=%4.4d&quot;,<br />
   intelpentium, amdlet, amd, pprocompat, hasmmx, hassse, hassse2, has3dnow, arch, level, ncpu, mhz, ram );<br />
<br />
I'm not familiar with the %5.5d format, but perhaps it should be %5d to maintain spacing. The existing code seems to be equivalent to %05d to put a leading zero (or maybe cpudesc.dll is &quot;out of sync&quot; with cpudesc.c?)<br />
<br />
But that might mess up StrCpy $1 $0 5, 80?<br />
<br />
I suppose the same &quot;padding&quot; with leading 1 applies to NCPU and RAM ... if you had less than 1 gig of memory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2006, 13:11</div></div><div class="posttext">Using %-5d in the plug-in should do the trick as the padding will go on the right. But changing that would break backwards compatibility with scripts using StrCmp.<br />
<br />
The same padding applies to RAM, but doesn't bother NCPU because it's only two digits.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>