<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Section/Component Screen,Strange Indexed Display Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Section/Component Screen,Strange Indexed Display Problem NSIS Discussion" />
	
	<title> Section/Component Screen,Strange Indexed Display Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Section/Component Screen,Strange Indexed Display Problem</div>
<hr />
<div class="pda"><a href="t-292323.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292323">Section/Component Screen,Strange Indexed Display Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">26th May 2008, 18:33</div></div><div class="posttext">Including a .jpg of the issue at hand.  The comonents screen is inserting a line at the top of the section list equating to the count of the number of sections I have minus one. )   That line [10]-  doesn't exist in my code....<br />
http://www.jericho-media.com/images/SectionsIndexProblem.jpg<br />
<br />
If I comment out every reference in the code to section g1oB, then this view is shown: ( Note the decrement of the errant row... ) <br />
<br />
http://www.jericho-media.com/images/SectionsIndexProblem2.jpg<br />
<br />
<br />
If you look closely, you'll find that the top section is (incorrectly displayed as an index), ( currently equaling the number of sections I'm defining less one. ( zero indexed - I presume ) Has anyone had this happen to them before?<br />
<br />
Source of issue:  My strange requirements make me want to use the components screen twice.  Recording differenct selections and handling them seperately later.  Ultimately, there will be zero relevant code in the actual sections, but neverthe less, I want to use the component page interface twice..... thus..... I do the following:<br />
<br />
<br />
ComponentText &quot;Blah blah&quot; &quot;Again Blah&quot; &quot;  &quot;<br />
Page components  setupComponents  &quot;&quot;  components_leave<br />
<br />
ComponentText &quot;Blah de balh balh&quot; &quot;MoreBlah&quot; &quot;  &quot;<br />
Page components  setupComponents2 &quot;&quot;   components_leave2<br />
<br />
Please note that the two setupComponents functions differ slightly as to the display... if I REMOVE all mention of the second call to the components page, ( and only use the components screen once....) the system behaves normally.... but if I reference it twice this strange index issue happens... ( And on the first call to the page, not the second. ) ... and then I get odd indexing behavior, and the second page doesn't display properly either.<br />
<br />
Furthermore if I set it up to call the setupComponents functions as the show functions instead of the pre functions then it displays like this:<br />
http://www.jericho-media.com/images/SectionsIndexProblem3.jpg<br />
<br />
<br />
I have a series of sections which I am turning on and off in my pre-display call like so:<br />
<br />
<br />
<br />
;The only thing I do in my function call other than change the text names of hte sections to empty strings.. is to disable the NEXT button until a callback is made to the .onSelChange<br />
<br />
Function setupComponents<br />
<br />
     Var /GLOBAL NextButton<br />
     ; Disable the next button until selection is made.<br />
     GetDlgItem $NextButton $HWNDPARENT 1<br />
     EnableWindow $NextButton &quot;0&quot;<br />
<br />
   RunPlatforms:<br />
        SectionSetText  ${g1o1} &quot;&quot; ; These we dont' show...<br />
        SectionSetText  ${g1o2} &quot;&quot;<br />
        SectionSetText  ${g1o3} &quot;&quot;<br />
        SectionSetText  ${g1o4} &quot;&quot;<br />
        SectionSetText  ${g1o5} &quot;&quot;<br />
        SectionSetText  ${g1o6} &quot;&quot;<br />
        ; Hide the platform options.<br />
        SectionSetText UnselectSection ${g1o7} ; these<br />
        SectionSetText UnselectSection ${g1o8} ; we<br />
        SectionSetText UnselectSection ${g1o9} ; do.<br />
        SectionSetText UnselectSection ${g1oA}<br />
        SectionSetText UnselectSection ${g1oB}<br />
FunctionEnd<br />
<br />
<br />
// The sections are defined as so:<br />
<br />
<br />
Section /o &quot;New Install&quot; g1o1<br />
SectionEnd<br />
<br />
Section /o &quot;Install Fresh (Discard local configuration.)&quot; g1o2<br />
SectionEnd<br />
<br />
Section  /o &quot;Upgrade (Retain existing settings.)&quot; g1o3<br />
SectionEnd<br />
<br />
Section /o &quot;Archive Utility&quot; g1o4<br />
SectionEnd<br />
<br />
Section /o  &quot;Restore Utility&quot; g1o5<br />
SectionEnd<br />
<br />
Section  /o &quot;Uninstaller&quot; g1o6<br />
SectionEnd<br />
<br />
Section /o &quot;Imail Declude Install&quot; g1o7<br />
SectionEnd<br />
<br />
Section /o &quot;SmarterMail Declude Install&quot; g1o8<br />
SectionEnd<br />
<br />
Section /o &quot;Alligate Declude Install&quot; g1o9<br />
SectionEnd<br />
<br />
Section /o &quot;Imail MXGuard Install&quot; g1oA<br />
SectionEnd<br />
<br />
Section /o &quot;Default SNF Install&quot; g1oB<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">26th May 2008, 22:05</div></div><div class="posttext">I have solved the issue:<br />
<br />
<br />
Ok, so for the record: Because this question was asked many times previously, but not in a way people understood it.... and the manual was descriptively silent on how to include multiple Component Pages ( or any other pages for that matter. )<br />
<br />
In order to call a standard ( not custom page ) multiple times, it seems you need to encapsulate it in a PageEx call.  For example:  In order to have two fixed component type pages.... you need to put this in your page order:<br />
<br />
PageEx components<br />
  ComponentText &quot;Welcome. Please select from the available utilities.&quot; &quot; &quot; &quot; &quot;<br />
  PageCallbacks   setupPlatforms showPlatforms components_leave2<br />
PageExEnd<br />
<br />
PageEx components<br />
  ComponentText &quot;Welcome Please select from the available utilities.&quot; &quot; &quot; &quot; &quot;<br />
  PageCallbacks setupComponents2  &quot;&quot; components_leave2<br />
PageExEnd<br />
 <br />
<br />
Don't forget that as you use SectionSetText SectionName &quot;&quot;   to hide sections from each components page... i.e.<br />
On the first component page.... you hide the sections you ask about in section 2. And then on Section two you hide the page 1 components.... if you go back.. from page 2 to page 1 nothing will show because you've cleared them all.... so unless you create a resetSectionTexts function and call it from/in your Pre functions.... and then reclear the ones you don't want to show up.... you scratch your head for a week, going huh?<br />
i.e.<br />
 <br />
Function resetSectionTexts<br />
  SectionSetText SectionName &quot;OriginalTextHere&quot;<br />
  .... as many as you have sections...<br />
FunctionEnd<br />
<br />
Keywords:<br />
Multiple Component Pages<br />
Calling Section Page Twice<br />
Component Page Twice<br />
Two Component Pages<br />
Two Section Pages<br />
Use of PageEx<br />
Calling a Page Twice</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">26th May 2008, 22:12</div></div><div class="posttext">Gee....Thats such a perfectly written issue and solution completely documented.  I'd like to thank you for coming back and including a detailed solution to the problem and properly keywording it for future NSIS head-scratchers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">26th May 2008, 22:14</div></div><div class="posttext">Why, thank me.  Me is to kind.<br />
lol.<br />
;-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>