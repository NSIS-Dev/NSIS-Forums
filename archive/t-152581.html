<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" bug with MUI + multilanguage in 1.66, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  bug with MUI + multilanguage in 1.66 NSIS Discussion" />
	
	<title> bug with MUI + multilanguage in 1.66 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  bug with MUI + multilanguage in 1.66</div>
<hr />
<div class="pda"><a href="t-152581.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152581">bug with MUI + multilanguage in 1.66</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 09:15</div></div><div class="posttext">i've loaded the last nightly build and  I have the following problem with my script witch is using MUI and multilanguage.<br />
<br />
After the selection of the language it shows the screens corectly BUT not the options page and if i put a messagebox with a string in it $(LANG_TEST) it apears always in one of the languages.<br />
<br />
This was working in older versions.<br />
<br />
PS. Did I mention:<br />
- i've made tests only for updated languages (1.66 and V6)<br />
- I've found a problem that could be related to this: if you try to define strings for languages not defined at the begening it doesn't snow any error (ok for me), BUT it's overwriting the first language translation with the translation of the undefined language. (this is very bad!!!) You can discover this problem evem with the multilanguage MUI example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 09:38</div></div><div class="posttext">I'm desperate, I need to release my kit and now I'm stuck with this stupid bug. The most simple way to test it's presence is putting a message box after the language selection macro. You'll see that it uses the system default language instead of the selected one. (also the interface is using the selected language but not the $(variable)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th October 2003, 13:46</div></div><div class="posttext">Can you please attach screenshots &amp; scripts? I don't really understand your problems.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 13:55</div></div><div class="posttext">here it's the test file.<br />
Run it and select last language (German). It will show you english translated text instead of german even if the dialogs are corectly snown. For the other two it wokrs. The problem can be easely reproduced. I've made this special for you from the defaulte example.<br />
<br />
I don't think you'll need screenshots :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th October 2003, 13:57</div></div><div class="posttext">That's because the langauge has not yet been set in .onInit (.onInit is used to modify the langauge). Put your messagebox in a custom GUIINIT function (see Modern UI Readme) and it will work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 14:12</div></div><div class="posttext">Sorry, but I don't understand how the *new systems* works because for be It would be logically that after the closing of the language selector dialog I'll have access to the translated texts. In my real installer I have a lot of operations in the .oninit function and many of them requires to use translated texts.<br />
<br />
This is now:<br />
<br />
Function .onInit<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
  MessageBox MB_OK &quot;$LANGUAGE $(DESC_SecDummy)&quot;<br />
FunctionEnd<br />
 <br />
<br />
How should this look in 1.66 and later ? If you try the $LANGUAGE is containing the right language BUT the other variable is not working.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th October 2003, 14:23</div></div><div class="posttext">It has always been this way, use GUIINIT to have access to the strings.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 14:44</div></div><div class="posttext">Ok, thy wat works, BUT please can you update the Examples\Modern UI\MultiLanguage.nsi file! It's old and it doen't work as it should. <br />
It contains a bad example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th October 2003, 15:35</div></div><div class="posttext">MultiLanguage.nsi is a good example. The only thing is that some language files have not been updated yet, that's why it doesn't compile.<br />
<br />
We'll wait a little longer before we release beta 4. If these languages still have not been updated yet by then, they will be removed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">14th October 2003, 15:41</div></div><div class="posttext">Can you please include a comment about this problem in the example. Like this:<br />
; Do not use language demendent strings in .onininit use ....instead. Or even an example, so others will know what to do and will not make my mistake. <br />
<br />
Thanks,</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>