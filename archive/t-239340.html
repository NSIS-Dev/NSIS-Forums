<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Execute script after reboot automatically, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Execute script after reboot automatically NSIS Discussion" />
	
	<title> Execute script after reboot automatically [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Execute script after reboot automatically</div>
<hr />
<div class="pda"><a href="t-239340.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=239340">Execute script after reboot automatically</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Oxyyy</div><div class="date">27th February 2006, 14:26</div></div><div class="posttext">Hi,<br />
<br />
I have to execute a part of the installation after a reboot. That means, some files are installed, the system is rebooted and after the reboot the installation process has to be continued.<br />
<br />
So my question is: how can I define a NSIS-script that is executed after rebooting?<br />
<br />
Oxyyy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">27th February 2006, 15:50</div></div><div class="posttext">You can add your installer in RunOnce key of regestry. Execute your installer with parameter which can tell you about  computer's restart.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th February 2006, 16:00</div></div><div class="posttext">Or even write a registry key to tell your installer that the PC was just rebooted (remember to remove it afterwards!)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Oxyyy</div><div class="date">27th February 2006, 19:38</div></div><div class="posttext">Originally posted by glory_man <br />
You can add your installer in RunOnce key of regestry. Execute your installer with parameter which can tell you about  computer's restart.  <br />
<br />
That sounds good but thereI have the problem that the installer can be located somewhere on a network drive that is no longer available after restarting. So it would be necessary to copy the installer itself to e.g. TMP. But is this possible?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th February 2006, 19:57</div></div><div class="posttext">Try CopyFiles on itself. If this doesn't work (I doubt it will) then you need to write another installer to do it. This other installer will contain the following:<br />
<br />
OutFile &quot;CopyInstaller.exe&quot;<br />
<br />
Function .onInit<br />
 Sleep 1000 #Need to wait a bit until installer closes.<br />
 Call GetParameters<br />
  Pop $R0<br />
 CopyFiles $R0 &quot;$TEMP\setupfile.exe&quot;<br />
 Abort<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
So you should include this file as any other file, extract it to $TEMP and execute it from there with &quot;$INSTDIR&quot; as the parameter. Ideally the installer should Exec it and then Quit immediately. Also you need the GetParameters function in the script (which you can grab in the docs under Useful Scripts).<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>