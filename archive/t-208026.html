<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Localization of installer., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Localization of installer. NSIS Discussion" />
	
	<title> Localization of installer. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Localization of installer.</div>
<hr />
<div class="pda"><a href="t-208026.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=208026">Localization of installer.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">17th February 2005, 04:39</div></div><div class="posttext">I'm trying to provide translations for messags inside my installer.  So far I've had good sucess mostly, but somehow I'm not referencing these correctly or something.<br />
<br />
Installer: http://wiki.worldwindcentral.com/World_Wind_Eta_Full_b1<br />
<br />
And my translations (which I put in a Global.nsh file included in the installer.)<br />
<br />
http://wiki.worldwindcentral.com/Installer_Translations<br />
<br />
problem is when I save this file as ASCII, I lose the polish chars, and when I save as UTF-8 it crashes NSIS.<br />
<br />
Any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 18:48</div></div><div class="posttext">Using Python (http://www.python.org/), you can use:f = codecs.open(&quot;utf.txt&quot;, &quot;r&quot;, &quot;utf-8&quot;)<br />
t = f.read()<br />
f.close()<br />
t = t.lstrip(unicode(codecs.BOM_UTF8,&quot;utf-8&quot;))<br />
f = open(&quot;1250.txt&quot;, w)<br />
f.write(t.encode(&quot;CP1250&quot;))<br />
f.close()It's surely possible with many other tools too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 20:02</div></div><div class="posttext">Can you please include an example that crashes makensis? I can not reproduce this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">18th February 2005, 02:15</div></div><div class="posttext">If I encode in anything but ASCII the file does not compile.  It causes an error in line one.  If I save it as ASCII it seems to work, however I'm having a problem with the fact that it's always using the English translations (all other languages are ignored.) <br />
<br />
Sigh..  I'm also having problems with the line <br />
<br />
StrCpy $1 &quot;.NET 1.1&quot;$(Requirement1)<br />
<br />
It's empty every time :(<br />
<br />
This hasn't been my week.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th February 2005, 09:11</div></div><div class="posttext">Not being able to compile a script is not crashing.<br />
<br />
Your StrCpy line has the quotes misplaced. Put the ending quote after the language string. The way you wrote it, $(Requirement1) specifies the maximum number of characters to copy from &quot;.NET 1.1&quot; into $1. Since it's a string with no numbers, it'll be translated to 0 and you'll always get an empty string.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">18th February 2005, 15:44</div></div><div class="posttext">Ahh..  I had worked around the problem with two strCpy's<br />
<br />
strCpy $0 &quot;.NET 1.1&quot;<br />
strCpy $1 $0$(Requirement1)<br />
<br />
I think your solution is more elegant though, I was unaware you could reference strings inside strings.<br />
<br />
Now the only problem I'm having is that the english is getting used regardless.  :(  For a test I feed all the defined strings into messagebox's and change the language, but no love.<br />
<br />
I'll update the wiki to the latest Installer I'm using.  Perhaps someone here can figure it out..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th February 2005, 15:53</div></div><div class="posttext">That's because, eventhough $LANGUAGE is changed in .onInit, it only takes affect after .onInit. You can put the message itself in .onGUIInit. I'd even do the check before asking the user for a language. No sense in letting the user down after the hard work of selecting the language :)<br />
<br />
One problem with .onGUIInit is that it won't be called in silent mode. So you have to check for silent mode in .onInit and abort if it's on.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">19th February 2005, 02:43</div></div><div class="posttext">Thank you kichik, your explanation and another thread about the same problem got it all solved.  I now have multiple languages :)  Just not quite sure what any of them say. hehe</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>