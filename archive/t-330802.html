<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Negative UDM_SETRANGE when using ${NSD_CreateUpDown}?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Negative UDM_SETRANGE when using ${NSD_CreateUpDown}? NSIS Discussion" />
	
	<title> Negative UDM_SETRANGE when using ${NSD_CreateUpDown}? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Negative UDM_SETRANGE when using ${NSD_CreateUpDown}?</div>
<hr />
<div class="pda"><a href="t-330802.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330802">Negative UDM_SETRANGE when using ${NSD_CreateUpDown}?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">22nd May 2011, 18:42</div></div><div class="posttext">For some reason, I am unable to make the UpDown control (AKA Spin control) display negative numbers.<br />
<br />
I am using <br />
<br />
  SendMessage $hUpDownOne ${UDM_SETRANGE} -7 6 ; min max<br />
  SendMessage $hUpDownOne ${UDM_SETPOS32} -2 $varUpDownOne<br />
<br />
The documentation for UDM_SETRANGE (http://msdn.microsoft.com/en-us/library/bb759963%28v=vs.85%29.aspx) says it accepts a short (which is signed by definition).<br />
<br />
Can an UpDown control spin to negative values?<br />
<br />
If so, what am I missing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd May 2011, 18:56</div></div><div class="posttext">wParam is not used, lParam contains both the min and max values packed with MAKELPARAM, IIRC if you !include &quot;WinCore.nsh&quot; you should get the nsis macro version of it</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">22nd May 2011, 19:11</div></div><div class="posttext">Anders thanks for the quick reply. I am afraid I don't understand what &quot;WinCore.nsh&quot; has to do with this. ${NSD_CreateUpDown} and UDM_SETRANGE are working perfectly for me with positive numbers. It's only the negative numbers that don't work. Why?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd May 2011, 19:27</div></div><div class="posttext">I just told you why, both min and max are packed into LPARAM and since max is in the LOWORD it works correctly without packing for positive numbers: MAKELPARAM(666,0) == 666<br />
<br />
!include wincore.nsh <br />
${MAKELPARAM} $0 $0 666 -2<br />
MessageBox mb_ok $0<br />
<br />
If you don't want to deal with the packing, use UDM_SETRANGE32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">22nd May 2011, 19:52</div></div><div class="posttext">use UDM_SETRANGE32<br />
That was exactly my problem. I was using UDM_SETRANGE with UDM_SETPOS32... This isn't my best day... But thanks to your help, it's working with negative numbers now.<br />
<br />
Thanks again!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>