<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" progressbar manipulation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  progressbar manipulation NSIS Discussion" />
	
	<title> progressbar manipulation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  progressbar manipulation</div>
<hr />
<div class="pda"><a href="t-174689.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174689">progressbar manipulation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TheChewy</div><div class="date">30th March 2004, 07:11</div></div><div class="posttext">Is it possible to manipulate the progressbar to increase / decrease the space for a certain section of the de-, installer progress?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">30th March 2004, 09:38</div></div><div class="posttext">:up:<br />
<br />
It is possible. But you need to do this inside a function (but this function can be called from a section), because when you put this code in a section, it doesn't work (NSIS sets the progress indicator bar position value everytime when passing by a command):<br />
<br />
!define PBM_SETPOS 0x0402<br />
# !define PBM_DELTAPOS 0x0403<br />
<br />
# Use PBM_DELTAPOS if you want to increment,<br />
# not to set, the value.<br />
<br />
Section<br />
<br />
# Other things<br />
<br />
FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $R0 $R0 1004<br />
<br />
Call ChangeProgressIndicatorBarPosition<br />
<br />
# Other things<br />
<br />
SectionEnd<br />
<br />
Function ChangeProgressIndicatorBarPosition<br />
<br />
StrCpy $0 50 # Set indicator bar in position &quot;50%&quot;<br />
<br />
IntOp $0 $0 * 300<br />
<br />
SendMessage $R0 ${PBM_SETPOS} $0 &quot;&quot;<br />
<br />
# If you want to see the show above, put a<br />
# MessageBox command after the command above,<br />
# so it doesn't disappear, until you click OK.<br />
<br />
# OR if you want to increment, not to set, the new<br />
# position, you can use ${PBM_DELTAPOS}.<br />
<br />
# SendMessage $R0 ${PBM_DELTAPOS} $0 &quot;&quot;<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">1st April 2004, 08:37</div></div><div class="posttext">is there any way to display the progress bar like the &quot;xp-progress bar&quot;? <br />
i read some threads but i wasn't able to find out exactly if it's possible...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st April 2004, 11:07</div></div><div class="posttext">It will use the XP-style progress bar when you are using Windows XP.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">1st April 2004, 13:18</div></div><div class="posttext">If you are not using MUI then make sure you have XPStyle on at the start of your script (MUI includes this automatically), but, of course, only when installing on XP will this have an effect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">5th April 2004, 07:41</div></div><div class="posttext">and is there any way to make something like this [attached file]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th April 2004, 08:02</div></div><div class="posttext">Yes, create a UI file with a custom dialog and use window messages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">5th April 2004, 08:51</div></div><div class="posttext">is there a manual &quot;how to create a UI file with a custom dialog and window messages for dummys&quot;? :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th April 2004, 14:27</div></div><div class="posttext">No. Get a resource editor to modify the UI file and search MSDN for information about window messages to use.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">5th April 2004, 14:37</div></div><div class="posttext">ok.<br />
one more question...<br />
do you know a simple resource editor? <br />
and which file is the ui file <br />
[i'm a total greenhorn]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th April 2004, 14:47</div></div><div class="posttext">See the Modern UI Readme.<br />
<br />
Custom pages &gt; Customize standard dialogs</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">5th April 2004, 16:25</div></div><div class="posttext">ok I was able to make 5 checkboxes in the modern.exe [for me this is no mean feat :D ]<br />
now the next step is to set the caption of the checkbox.<br />
[name of section 1 is caption of checkbox 1, ...]<br />
I rumaged many sites, but I'm still planless... [I know I'm a little nerving] :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th April 2004, 17:19</div></div><div class="posttext">Use the WM_SETTEXT message with a string.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">6th April 2004, 08:39</div></div><div class="posttext">first i tried it with a sample from the archive:<br />
	GetDlgItem $R0 $HWNDPARENT 3<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: pOiSoN&quot;<br />
	MessageBox MB_OK &quot;HWNDPARENT: $HWNDPARENT&quot;<br />
	MessageBox MB_OK &quot;R0: $R0&quot;<br />
 <br />
and this worked.<br />
<br />
then i opened the ressource hacker and I assigned the checkbox the id 3333. <br />
	GetDlgItem $R0 $HWNDPARENT &quot;#3333&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: pOiSoN&quot;<br />
	MessageBox MB_OK &quot;HWNDPARENT: $HWNDPARENT&quot;<br />
	MessageBox MB_OK &quot;R0: $R0&quot;<br />
 <br />
<br />
but it doesn't work.<br />
<br />
do you know whats my failure?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">6th April 2004, 11:05</div></div><div class="posttext">It's clear why that's happening because you did put &quot;#3333&quot;, not the correct &quot;3333&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th April 2004, 14:25</div></div><div class="posttext">If it's on the inner dialog you'll have to use the handle of that dialog. See users manual section 4.9.14.6.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">6th April 2004, 15:33</div></div><div class="posttext">ok thank you very very much joost<br />
respect to you patience ;-)<br />
<br />
this is the working code [only 3 lines, i can't take it ~gg~]<br />
<br />
	<br />
Var window<br />
<br />
Section &quot;Hauptgruppe&quot; SEC01FindWindow $window &quot;#32770&quot; &quot;&quot; <br />
<br />
FindWindow $window &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
GetDlgItem $R0 $window &quot;3333&quot;<br />
SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: textofthecheckbox&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">6th April 2004, 15:53</div></div><div class="posttext">hi again :rolleyes:<br />
i opened the <br />
List of common Windows Messages<br />
By KiCHiK file<br />
<br />
with which option am I able to change the status of the checkbox [checked/unchecked]?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th April 2004, 17:06</div></div><div class="posttext">It's not in that list. See MSDN or http://forums.winamp.com/showthread.php?s=&amp;threadid=175303</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">13th April 2004, 09:22</div></div><div class="posttext">so, now everything works...<br />
<br />
i have 5 checkboxes and i am able to &quot;check&quot; or &quot;uncheck&quot; them... great :p <br />
i don't know if its necessary to post my code. shall i?Â¿</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">13th April 2004, 12:09</div></div><div class="posttext">Yes, it's always useful for others.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">13th April 2004, 12:32</div></div><div class="posttext">ok it's not really elaborate...<br />
<br />
first i made 5 checkboxes [with a resource editor: &quot;Resource Hacker&quot;][into the modern.exe]<br />
then i gave them the ids &quot;3333&quot;, &quot;3334&quot;, &quot;3335&quot;, &quot;3336&quot; &amp; &quot;3337&quot;.<br />
<br />
so, now i had to set the captions...<br />
first you have to set a variable [in my code it is $InstallWindow]<br />
<br />
	<br />
Var InstallWindow<br />
<br />
Section &quot;createWindow&quot; SEC01<br />
;1st<br />
	FindWindow $InstallWindow &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
	GetDlgItem $R0 $InstallWindow &quot;3333&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: Caption1&quot;<br />
;2nd<br />
	GetDlgItem $R0 $InstallWindow &quot;3334&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: Text2&quot;<br />
;3rd<br />
	GetDlgItem $R0 $InstallWindow &quot;3335&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: Text3&quot;<br />
;4th<br />
	GetDlgItem $R0 $InstallWindow &quot;3336&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: Text4&quot;<br />
;5th<br />
	GetDlgItem $R0 $InstallWindow &quot;3337&quot;<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR: Text5&quot;<br />
SectionEnd<br />
<br />
<br />
<br />
So now i can check/uncheck any box with <br />
<br />
<br />
GetDlgItem $R0 $InstallWindow &quot;3333&quot;<br />
SendMessage $R0 ${BM_SETCHECK} ${BST_CHECKED} &quot;&quot;<br />
<br />
GetDlgItem $R0 $InstallWindow &quot;3335&quot;<br />
SendMessage $R0 ${BM_SETCHECK} ${BST_UNCHECKED} &quot;&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Bennyyy</div><div class="date">13th April 2004, 14:01</div></div><div class="posttext">hi<br />
<br />
can someone give me a working example script, please?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">13th April 2004, 15:27</div></div><div class="posttext">gerne...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Bennyyy</div><div class="date">13th April 2004, 15:35</div></div><div class="posttext">danke sehr! :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">14th April 2004, 09:21</div></div><div class="posttext">so now I have a little problem [its not really important...]<br />
<br />
i had the captions of the ckeckboxes in a languages.nsh<br />
[<br />
LangString CUSTOM_INSTFILES_CHECKBOX_FIRST${LANG_GERMAN} &quot;Ein MÃ¤nnlein steht im Walde ganz still und stumm, Es hat von lauter Purpur ein MÃ¤ntlein um. Sagt, wer mag das MÃ¤nnlein sein, Das da steht im Wald allein. Mit dem purpurroten MÃ¤ntelein. &quot;<br />
]<br />
<br />
i read somewhere here that i have to include this language file at the bottom... <br />
no problem...until i tried to uninstall this...<br />
<br />
i think that the language.nsh isn't include...<br />
what can i do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 09:56</div></div><div class="posttext">Use an uninstaller langauge string (.un prefix) for the uninstaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">14th April 2004, 10:16</div></div><div class="posttext">oh, thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">15th April 2004, 14:16</div></div><div class="posttext">and it goes on...<br />
<br />
is there a way to make the caption of a checkbox bold?<br />
i looked in the winmessages.nsh, but havent found what i need...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">15th April 2004, 16:17</div></div><div class="posttext">WM_SETFONT / CreateFont</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">16th April 2004, 07:12</div></div><div class="posttext">ok in my example this is...<br />
<br />
	CreateFont $2 &quot;Tahoma&quot; 10 700<br />
	SendMessage $R0 ${WM_SETFONT} $2 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">16th April 2004, 07:24</div></div><div class="posttext">but i am not able to make the first caption &quot;bold&quot; then the second......<br />
<br />
if i use WM_SETFONT 2 times only the last executes</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">16th April 2004, 08:48</div></div><div class="posttext">ok now i use &quot;createfont&quot; 5 times... it works [obviously you can't use one font for more than one caption]</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>