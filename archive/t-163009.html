<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" LMZA feature eta?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  LMZA feature eta? NSIS Discussion" />
	
	<title> LMZA feature eta? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  LMZA feature eta?</div>
<hr />
<div class="pda"><a href="t-163009.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=163009">LMZA feature eta?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">3rd January 2004, 09:32</div></div><div class="posttext">Hi, I am really dying for the ability to compress each file individually into the archive rather than compile the archive and THEN compress. <br />
Solid compression requires a temp space large enough for all the decompressed files and for some of us that isnt an option.<br />
<br />
It was mentioned to be an easy and planned addition, any chance of it being done soon please? I'd really appreciate it.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd January 2004, 11:28</div></div><div class="posttext">The option is already there. Change it in config.h and recompile.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">3rd January 2004, 11:51</div></div><div class="posttext">Do you mean recompile NSIS or recompile the project?<br />
I cant recompile NSIS because, frankly I dont know how.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd January 2004, 12:29</div></div><div class="posttext">I haven't tested these mak files with the free MS compiler so I'd be glad if someone can.<br />
<br />
Follow the instructions in the appendix regarding the free Microsoft compiler:<br />
<br />
http://nsis.sourceforge.net/Docs/AppendixC.html#C.1<br />
<br />
This page might help too:<br />
<br />
http://www.winprog.org/tutorial/msvc.html<br />
<br />
Download and extract maks.zip into the Source folder, open a command window, cd to the Source folder and type:nmake /f makenssi.makBTW,It was mentioned to be an easy and planned addition, any chance of it being done soon please? I'd really appreciate it.I don't recall saying easy ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">4th January 2004, 10:24</div></div><div class="posttext">I spent several hours trying to make it work.<br />
It doesnt. The error is in the ' cd &quot;.\exehead&quot; ' line(s)and nothing I did would make it work. I had to run it like this :<br />
<br />
c:\program files\microsoft.net\sdk\v1.1\bin\&gt; nmake /f &quot;c:\program files\nsis\source\makenssi.mak&quot;<br />
<br />
From any other path even with the path envirinment variable set to both dirs it errored out with something about my f: No idea how my f: got involved - it's never had anything installed to it.<br />
<br />
I am more than happy to help you test this but I've spent a long time, I'm frustrated and all I want is something you can do in minutes. Please, just give it to me and I'll help you test this method as much as you like afterward.<br />
<br />
:S</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th January 2004, 11:12</div></div><div class="posttext">Can you post the exact error messages? Did you install the Platform SDK?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">4th January 2004, 11:19</div></div><div class="posttext">-----<br />
C:\Program Files\Microsoft.NET\SDK\v1.1\Bin&gt;nmake.exe /f &quot;c:\Program Files\NSIS\<br />
Source\makenssi.mak&quot;<br />
<br />
Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
Copyright (C) Microsoft Corporation.  All rights reserved.<br />
<br />
No configuration specified. Defaulting to makenssi - Win32 Release.<br />
Warning: cannot find &quot;makenssi.dep&quot;<br />
        cd &quot;.\exehead&quot;<br />
NMAKE : fatal error U1077: 'cd' : return code '0x1'<br />
Stop.<br />
<br />
C:\Program Files\Microsoft.NET\SDK\v1.1\Bin&gt;<br />
-----<br />
<br />
-----<br />
C:\Program Files\NSIS\Source&gt;&quot;c:\Program Files\Microsoft.NET\SDK\v1.1\Bin\nmake.<br />
exe&quot; /f makenssi.mak<br />
<br />
Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
Copyright (C) Microsoft Corporation.  All rights reserved.<br />
<br />
No configuration specified. Defaulting to makenssi - Win32 Release.<br />
        cd &quot;.\exehead&quot;<br />
        nmake /                   /F &quot;.\exehead-lzma.mak&quot; CFG=&quot;exehead_lzma - Wi<br />
n32 Release&quot;<br />
<br />
Microsoft (R) Program Maintenance Utility Version 7.10.3077<br />
Copyright (C) Microsoft Corporation.  All rights reserved.<br />
<br />
        if not exist &quot;.\Release-lzma/&quot; mkdir &quot;.\Release-lzma&quot;<br />
NMAKE : fatal error U1073: don't know how to make '&quot;f:\microsoft visual studio\m<br />
icrosoft sdk\include\basetsd.h&quot;'<br />
Stop.<br />
NMAKE : fatal error U1077: '&quot;c:\Program Files\Microsoft.NET\SDK\v1.1\Bin\nmake.e<br />
xe&quot;' : return code '0x2'<br />
Stop.<br />
-----<br />
<br />
The makenssi.dep is in the &quot;c:\Program Files\NSIS\<br />
Source\' dir and I've checked my registry for EVERY reference to f: and there's nothing even slightly close to that path.<br />
<br />
<br />
SDK's :<br />
<br />
Common Setup Files <br />
<br />
Debugging Tools for Windows <br />
<br />
Core SDK (Windows Server 2003) <br />
    <br />
Build environment  <br />
<br />
Register environment variables <br />
<br />
Windows Installer SDK (Version 2.0)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th January 2004, 11:40</div></div><div class="posttext">&quot;f:\microsoft visual studio\microsoft sdk&quot; is where PSDK is installed on my computer. Genius VC decided I want the make files to work only on my computer for some reason... Try the attached make files instead, no f: in them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">5th January 2004, 00:22</div></div><div class="posttext">I've installed every sdk I can find and none of them have cl.exe and a dll that it needs. I sourced both of them from vs6 and now the file it wants is 'excpt.h'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">5th January 2004, 12:42</div></div><div class="posttext">ok, I got sick of that so I installed vb6.<br />
Im having problems understanding that macro to register the dlls - I just plain dont get it.<br />
<br />
This is the error I get :<br />
<br />
C:\Program Files\NSIS\Source\exehead\util.c(490) : error C2065: 'CSIDL_FLAG_CREATE' : undeclared identifier<br />
C:\Program Files\NSIS\Source\exehead\util.c(506) : error C2065: 'CSIDL_PROGRAM_FILES_COMMON' : undeclared identifier<br />
C:\Program Files\NSIS\Source\exehead\util.c(510) : error C2065: 'CSIDL_PROGRAM_FILES' : undeclared identifier<br />
C:\Program Files\NSIS\Source\exehead\util.c(516) : error C2065: 'CSIDL_SYSTEM' : undeclared identifier<br />
C:\Program Files\NSIS\Source\exehead\util.c(520) : error C2065: 'CSIDL_WINDOWS' : undeclared identifier<br />
Generating Code...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th January 2004, 13:06</div></div><div class="posttext">Get makensis_no_solid.zip (http://prdownloads.sourceforge.net/nsis/makensis_no_solid.zip?download) of RC2.<br />
<br />
cl.exe comes with .NET SDK.<br />
<br />
Tell VC to use the PSDK header files to avoid compile errors about CSIDL_*.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">5th January 2004, 13:39</div></div><div class="posttext">Thanks, but its broken.<br />
neither bzip2 or lzma work but it works flawlessly with zlib.<br />
<br />
This is the entire thing. All it needs is to be unzipped to c: and rightclicked.<br />
http://myne.customer.netspace.net.au/Dev.zip<br />
<br />
I do appreciate your help on this and I feel bad that I cant even figure it out :S<br />
<br />
error :<br />
!insertmacro: MUI_PAGE_WELCOME<br />
Error: add_db_data() - compress() failed - -1<br />
Error in macro MUI_INSTALLOPTIONS_INITDIALOG on macroline 5<br />
Error in macro MUI_FUNCTION_WELCOMEPAGE on macroline 43<br />
Error in macro MUI_PAGE_WELCOME on macroline 23<br />
Error in script &quot;F:\Dev\DC 7.NSI&quot; on line 170 -- aborting creation process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th January 2004, 14:23</div></div><div class="posttext">Fixed, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">5th January 2004, 14:29</div></div><div class="posttext">Thanks, it seems to hang on generating uninstaller now :/<br />
(lzma) bzip works fine</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">5th January 2004, 15:35</div></div><div class="posttext">Oh, Bzip doesnt work. Upon attempting to install it generates a &quot;Error decompressing data, corrupted installer?&quot; ok box and quits.<br />
<br />
Btw, in my case the size difference between solid and non solid bzip was less than 1mb. My installer was 501mb in both cases. Thankyou for your continuing help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">myne</div><div class="date">6th January 2004, 02:16</div></div><div class="posttext">I'd like to thank Kichik for his help and, when all else failed debugging for several hours. It works brilliantly. What more could you want from a dev?<br />
<br />
A previous installer that had to be released at 540mb with zlib compiled down to 440mb with lzma and doesnt need any temp space. That is the same size as solid compression. :D<br />
<br />
Thankyou thankyou thankyou.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">7th January 2004, 16:46</div></div><div class="posttext">i'm using latest cvs, updated few minutes ago (yes, it works again :D).<br />
but i'm missing documentation how to enable lzma-compression.<br />
4.8.2.4 SetCompressor<br />
zlib|bzip2<br />
This command sets the compression algorithm used to compress files/data in the installer. Options are ZLib or BZip2. ...<br />
<br />
will this work:<br />
SetCompressor lzma<br />
and will i also have to reserver files like i have to for bzip2?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">7th January 2004, 16:57</div></div><div class="posttext">Yes that will work, the documentation will be updated.<br />
<br />
If you are using solid compression (by default, solid compression is enabled for BZip2 and LZMA), it's important that files which are being extracted in init- or page functions function are located before other files in the data block, because this will make your installer faster.<br />
<br />
If there are File commands in your sections or functions above the init- or page functions, you can reserve files.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>