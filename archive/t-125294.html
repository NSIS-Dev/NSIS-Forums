<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Extending $0 - $9 and $R0 - $R9, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Extending $0 - $9 and $R0 - $R9 NSIS Discussion" />
	
	<title> Extending $0 - $9 and $R0 - $R9 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Extending $0 - $9 and $R0 - $R9</div>
<hr />
<div class="pda"><a href="t-125294.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=125294">Extending $0 - $9 and $R0 - $R9</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th February 2003, 20:50</div></div><div class="posttext">I have simply run out of all the $x and $Rx functions in my script, and am wondering if you can make up new ones that can be used in StrCpy, ReadINIstr etc<br />
<br />
I know you can...<br />
!define TEMP1 &quot;$0&quot;<br />
StrCmp ${TEMP1} $0 &quot;&quot; +2<br />
...but that uses up $0<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th February 2003, 21:26</div></div><div class="posttext">Defining TEMP1 as $0 is nothing more but telling the compiler to replace every ${TEMP1} it sees with $0, it doesn't create a new variable.<br />
<br />
The best way to clear up some variables for usage is to push them to the stack and when you are finished with them pop them back. For example:<br />
<br />
Push $0<br />
Push $1<br />
# use $1 and $0 here...<br />
Pop $1<br />
Pop $0<br />
# $0 and $1 are same as before the push now<br />
<br />
Another way you might want to try is to read data from INI files or the registry only when you need it and not to keep it ready from the beginning. This also applies to section selections (use SectionGetFlags instead of setting a variable to 1 when the section executes).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th February 2003, 22:25</div></div><div class="posttext">Thanks<br />
<br />
I'll have a look into where I can push and pop them around!<br />
Here is the script...<br />
<br />
http://myweb.tiscali.co.uk/afrowuk/map-compiler.nsi<br />
<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">17th February 2003, 01:27</div></div><div class="posttext">Well, for functions, its always best to Push all the variables on the stack that you are going to use.  Then when the function is over, pop them back in (making sure you use the right order).  Then you will still have every variable available outside of the function since that function takes care of any previous variables that were used.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">21st March 2003, 22:58</div></div><div class="posttext">Hi,<br />
<br />
I guess I am a little slow at this pushing and popping idea.<br />
<br />
Can someone explain a little more on when to use PUSH and when to use POP?<br />
<br />
Do I Pop or Push a variable when I wish to know the value of that variable? <br />
<br />
Thanks.<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">22nd March 2003, 11:20</div></div><div class="posttext">Push adds a value to the stack, Pop removes one and sets the variable.<br />
<br />
For example, the value of $0 is 123.<br />
<br />
Now you are going to call the function bla:<br />
Function bla<br />
<br />
  Push $0 ;123 added to the stack<br />
<br />
    ...the function can use $0...<br />
<br />
  Pop $0 ;Remove 123 from the stack and set $0 back to 123<br />
<br />
FunctionEnd<br />
After calling the funtion, the variables contain the same value as before.<br />
<br />
<br />
Note the order when using multiple variables (last-in first-out):<br />
<br />
Function bla<br />
<br />
  Push $0<br />
  Push $1<br />
<br />
     ...code...<br />
<br />
  Pop $1<br />
  Pop $0<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd March 2003, 14:38</div></div><div class="posttext">And how can we, for example, since $9 is for the Startmenu, use it once and then &quot;empty&quot; the value so startmenu use it.<br />
In my case I use $9 for my name in the script; but I copy the value:<br />
<br />
StrCpy $9 &quot;${MUI_PRODUCT}&quot;<br />
<br />
So the startmenu recognize.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">23rd March 2003, 11:23</div></div><div class="posttext">The first option is to define MUI_STARTMENUPAGE_VARIABLE with another variable ($8 for example), so another variable will be used.<br />
<br />
If you have to use all 20 variables, you can also Push/Pop it if you want to use the variable temporary.<br />
<br />
Push ${MUI_STARTMENUPAGE_VARIABLE}<br />
  ...code...<br />
Pop ${MUI_STARTMENUPAGE_VARIABLE}<br />
Why are you using a variable for the name? The name is always the same, so you can use a define.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">23rd March 2003, 15:02</div></div><div class="posttext">!define MyName &quot;Dude&quot;<br />
<br />
<br />
I already have done that :D<br />
But checking my script, I forgot that<br />
I'm using the System plugin to detect RAM and &quot;stole&quot; $9.<br />
Yeah! I'll &quot;Pop it&quot; :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mlm</div><div class="date">22nd April 2003, 04:42</div></div><div class="posttext">Is there a way to clear the stack and start over?<br />
<br />
mlm(aka digitalda)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">22nd April 2003, 10:41</div></div><div class="posttext">Here is an article about the stack: http://nsis.sourceforge.net/archive/nsisweb.php?page=252&amp;instances=0.<br />
<br />
Try this code (may contain errors, couldn't test it) to clear the stack:<br />
<br />
LoopAgain:<br />
Pop $R9<br />
IfErrors Done LoopAgain<br />
Done:<br />
<br />
This will use the $R9 variable.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>