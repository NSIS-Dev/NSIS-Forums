<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" TRIM function from the documentation., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  TRIM function from the documentation. NSIS Discussion" />
	
	<title> TRIM function from the documentation. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  TRIM function from the documentation.</div>
<hr />
<div class="pda"><a href="t-149427.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149427">TRIM function from the documentation.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TelePlus</div><div class="date">16th September 2003, 17:39</div></div><div class="posttext">In the documentation that comes with NSIS can be found a function called TrimNewLines.  Has anyone ever passed that function a string that doesn't contain a trailing CRLF (or any variant thereof)?  The results that I've experienced indicate that given a string with no trailing CR or LF characters, the function will quite happily return a null string.<br />
<br />
Maybe it's the way I'm invoking it, but I don't think so.  In the following, the function's renamed TrimCRLF and my string is in R1:<br />
<br />
push $R1<br />
call TrimCRLF<br />
pop $R1<br />
<br />
That's all that I'm doing to use it.  Attached is the old code and revised code that seems to fix the problem.  The problem seems to be that if CR or LF are not found, it decides to return a string of MaxLen 0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th September 2003, 17:50</div></div><div class="posttext">The same as this:<br />
Function TrimNewlines<br />
  Exch $R0<br />
  Push $R1<br />
  Push $R2<br />
    StrCpy $R1 0<br />
    loop:<br />
      IntOp $R1 $R1 - 1<br />
      StrCpy $R2 $R0 1 $R1<br />
      StrCmp $R2 &quot;$\r&quot; loop<br />
      StrCmp $R2 &quot;$\n&quot; loop<br />
  IntOp $R1 $R1 + 1<br />
  StrCmp $R1 0 +2<br />
  StrCpy $R0 $R0 $R1<br />
  Pop $R2<br />
  Pop $R1<br />
Exch $R0<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th September 2003, 18:16</div></div><div class="posttext">Thanks, but this has already been fixed in the latest CVS version.<br />
<br />
For more information about the latest CVS version see this page (http://nsis.sourceforge.net/site/Development.4.0.html). Note that your script might require some changes when updating to the latest CVS version.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>