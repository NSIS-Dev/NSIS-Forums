<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Reading registry from HKLM for any user, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Reading registry from HKLM for any user NSIS Discussion" />
	
	<title> Reading registry from HKLM for any user [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Reading registry from HKLM for any user</div>
<hr />
<div class="pda"><a href="t-357148.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=357148">Reading registry from HKLM for any user</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">winman2004</div><div class="date">11th March 2013, 15:32</div></div><div class="posttext">I am developing a software which has demo for limited days of 30 days.So my s/w on installation writes a registry to HKLM which is used by me to handle the demo version. Now the problem is in windows 7  and 8 user(without admin permission) cannot access HKLM.so my code in s/w fails to check registry in HKLM. In NSIS website i saw about access control plugin.Can it be used in my case so that in all users i can read registry from HKLM? (Note:My s/w is 32 bit)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2013, 17:55</div></div><div class="posttext">You should be able to read from HKLM with no problems. Only writing will be an issue if you do not have administrator privileges. Are you sure it's not reading from the wrong key (e.g. being redirected to Wow6432Node on 64-bit Windows)?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">winman2004</div><div class="date">12th March 2013, 14:11</div></div><div class="posttext">Yes.Sorry for confusing question. I also want to write to that registry in HKLM for users also. Can i do it by using access control plugin? Or is there any option by which user can write to a particular registry in HKLM?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">12th March 2013, 14:34</div></div><div class="posttext">Yes, you can grant all or specific users write access to a key in HKLM, using the accesscontrol plugin. This is however not the way you should do it. If an application is designed to be run by users, it should store its info in userlevel storage (registry or harddisk). This is how Windows is designed to work. If you're doing it differently, you're doing it wrong.<br />
<br />
Possible solution:<br />
Upon installation (admin level), write default settings to HKLM.<br />
Upon running the application, make your application copy the defaults to HKCU. Then use that registry hive from that point on.<br />
Upon uninstallation, either enumerate all HKU hives (using enumusersreg.nsh) to remove stray HKCU entries, or leave them behind.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">winman2004</div><div class="date">12th March 2013, 15:35</div></div><div class="posttext">My software has limited demo version for 30 days. And also there are some other conditions as some fetures can be used only 100 times etc. So in this case for the user also i want to update the registry of demo(a single registry) of my software in HKLM every time he uses it. I think doing this is not wrong. Also if i write this registry in HKCU separately then user can use my software with different users in his PC so he may cross the limit of using certain features of s/w. So i need to write it in HKLM.( I also know that the user may delete or change the registry and user has got full control of the s/w , but it is a different issue.).So i need to write registry to a HKLM (only a single registry which tracks demo limitation). Can i do it in NSIS using access control plugin or is there any other good methods to do the same?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">12th March 2013, 17:51</div></div><div class="posttext">It is wrong to give all users write access to protected registry hives or protected folders. It is up to you to decide whether you're willing to break the rules, but your software IS badly written if it needs HKLM access for all users. There are plenty of other ways to accomplish what you want. You should probably be writing to a world-writable file in allusers appdata.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>