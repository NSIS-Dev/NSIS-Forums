<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Cancel button of custom page malfunction, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Cancel button of custom page malfunction NSIS Discussion" />
	
	<title> Cancel button of custom page malfunction [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Cancel button of custom page malfunction</div>
<hr />
<div class="pda"><a href="t-276890.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=276890">Cancel button of custom page malfunction</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fifth8118</div><div class="date">4th September 2007, 05:39</div></div><div class="posttext">Hi,<br />
I have a cutom page using the CANCEL button to go to the next page, and using the NEXT button do <br />
some extra evaluations in the function before leave. The problem is that if the function before leave <br />
includes &quot;Abort&quot;, the CANCEL button will not go next page, if not, it's fine. Following is the code, if you mask the Abort in the testPageLeave, the problem disappearred.Can anybody help me to solve this problem? Thanks!<br />
<br />
<br />
#------------------------------------------------<br />
#test.nsi<br />
!include &quot;MUI.nsh&quot;<br />
<br />
!define MUI_CUSTOMFUNCTION_ABORT .myuserabort<br />
<br />
Function .onInit<br />
   InitPluginsDir<br />
   File /oname=$PLUGINSDIR\test.ini &quot;test.ini&quot;<br />
FunctionEnd<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
Page custom testPageShow testPageLeave<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
OutFile &quot;test.exe&quot;<br />
<br />
Section &quot;MainSection&quot; SEC01<br />
SectionEnd<br />
<br />
Function testPageShow<br />
   Push $R0<br />
   InstallOptions::dialog &quot;$PLUGINSDIR\test.ini&quot;<br />
   Pop $R0<br />
   Pop $R0<br />
FunctionEnd<br />
<br />
Function testPageLeave<br />
    Abort<br />
FunctionEnd<br />
<br />
Function .myuserabort<br />
   SendMessage $HWNDPARENT &quot;0x408&quot; &quot;1&quot; &quot;&quot;<br />
   Abort<br />
FunctionEnd<br />
<br />
#----------------<br />
#test.ini<br />
[Settings]<br />
NumFields=1<br />
<br />
[Field 1]<br />
Type=Label<br />
Text=test<br />
Left=10<br />
Right=28<br />
Top=20<br />
Bottom=40</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2007, 00:35</div></div><div class="posttext">NSIS processes the Cancel button and not InstallOptions. You can't use the Cancel button for anything else but aborting.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fifth8118</div><div class="date">5th September 2007, 14:36</div></div><div class="posttext">But if I jump 2 pages like:<br />
SendMessage $HWNDPARENT &quot;0x408&quot; &quot;2&quot; &quot;&quot;<br />
in Function .myuserabort, it works. Or if I mask the &quot;Abort&quot; in Function testPageLeave, then the CANCEL button can go to the next page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th September 2007, 03:46</div></div><div class="posttext">The destruction process of the installer has already initialized once the Cancel button is pressed. Any problem that occurs after you force it to do something else can be caused by this.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>