<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Nature of Reboot, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Nature of Reboot NSIS Discussion" />
	
	<title> Nature of Reboot [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Nature of Reboot</div>
<hr />
<div class="pda"><a href="t-287866.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287866">Nature of Reboot</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">anonymo</div><div class="date">2nd March 2008, 00:17</div></div><div class="posttext">To update the app, the user clicks on the installer. If a version is already installed, it calls the uninstaller and then installs the current version.<br />
<br />
The uninstaller removes some stuff with the /REBOOTOK flag.<br />
<br />
How can I have the uninstaller pass a value to the installer telling it if a reboot is necessary? <br />
<br />
If a reboot is necessary, the installer shows a message telling the user &quot;a reboot is necessary before proceeding with installation&quot;.<br />
<br />
If the message is in the uninstaller and the user doesn't choose to restart, the uninstaller has no way of making the installer that called it abort, correct?<br />
<br />
Perhaps I'm misunderstanding the nature of reboot. Reboot does not make the installation/uninstallation stop in its tracks and wait for the computer to reboot before proceeding?<br />
<br />
In that case the code would just continue to execute while the computer is trying to reboot, which is why you need to put an Abort or Quit or whatnot after the Reboot?<br />
<br />
Why can't the installer/uninstaller make a note of where it is, Reboot, and then continue what it was doing on reboot?<br />
<br />
Excuse my ignorance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">M. Ratz</div><div class="date">3rd March 2008, 09:39</div></div><div class="posttext">Hi anonymo<br />
<br />
I had the same problem first. I now write with my installer an entry to <br />
<br />
HKLM &quot;Software\microsoft\Windows\Currentversion\Run&quot;<br />
<br />
and then give the user a Messagebox, telling him that the computer is now rebooted. After rebooting the first action of the installer is to delete the run-entry.<br />
<br />
With WinXP it has no problems but with Vista u must have a look on UAC, because UAC blocks autostart-programs so the user has to allow the blocked autostart program.<br />
<br />
good luck<br />
M. Ratz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd March 2008, 10:22</div></div><div class="posttext">Originally posted by M. Ratz <br />
<br />
With WinXP it has no problems but with Vista u must have a look on UAC, because UAC blocks autostart-programs so the user has to allow the blocked autostart program.<br />
 <br />
<br />
Do not assume that you can write to HKLM on any NT system!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">M. Ratz</div><div class="date">3rd March 2008, 10:27</div></div><div class="posttext">@ Anders<br />
<br />
Of course you are right. In my installer I require admin-rights so that I can write to HKLM. <br />
<br />
my fault sry</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>