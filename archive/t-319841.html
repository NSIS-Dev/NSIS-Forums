<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS Exec uninstaller, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS Exec uninstaller NSIS Discussion" />
	
	<title> NSIS Exec uninstaller [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS Exec uninstaller</div>
<hr />
<div class="pda"><a href="t-319841.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=319841">NSIS Exec uninstaller</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">allausk</div><div class="date">10th June 2010, 21:30</div></div><div class="posttext">I have a simple installer and uninstaller which will write log to a text file<br />
When the installer run, it will check the install file existence. If it exists, it will run the uninstaller. The installer and uninstaller run perfect. However, auto uninstall will not write to the log file. The uninstaller will write to log file if involked alone. Please find my code below. <br />
<br />
Thanks for any help!<br />
<br />
${If} ${FileExists} `$INSTDIR\PSS.jar`<br />
MessageBox MB_YESNO &quot;PSS.jar already exists$\r$\nDo you want to uninstall that?&quot; IDYES AutoUninstall<br />
<br />
${Else}<br />
<br />
MessageBox MB_OK &quot;No previous version found. Continue with installer&quot;<br />
<br />
Install:<br />
;Set the output path to the installation directory $InstallDir<br />
SetOutPath $INSTDIR<br />
<br />
; Put files to be copied in this section<br />
File PSS.jar<br />
<br />
WriteUninstaller $INSTDIR\UninstallPSS.exe<br />
<br />
FileOpen  $4 c:\log\PX.log a<br />
FileSeek  $4 0 END<br />
FileWrite $4 &quot;PSS.jar V1.2 installed$\r$\n&quot;<br />
FileClose $4<br />
<br />
${EndIf}<br />
<br />
Goto End<br />
<br />
AutoUninstall:<br />
ExecShell &quot;&quot; &quot;UninstallPSS.exe&quot;<br />
Goto Install<br />
<br />
End:<br />
<br />
SectionEnd<br />
<br />
; Uninstall <br />
Section &quot;Uninstall&quot;<br />
<br />
Delete $INSTDIR\PSS.jar<br />
Delete $INSTDIR\UninstallPSS.exe<br />
FileOpen  $4 C:\log\PX.log a<br />
FileSeek  $4 0 END<br />
FileWrite $4 &quot;PSS.jar V1.2 uninstalled$\r$\n&quot;<br />
FileClose $4<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">allausk</div><div class="date">10th June 2010, 22:07</div></div><div class="posttext">I did not specify the path of the uninstaller on my code and the uninstall is not running at all.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>