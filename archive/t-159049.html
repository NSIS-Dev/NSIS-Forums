<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problems with MUI ..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problems with MUI ... NSIS Discussion" />
	
	<title> Problems with MUI ... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problems with MUI ...</div>
<hr />
<div class="pda"><a href="t-159049.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=159049">Problems with MUI ...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Cdzitu</div><div class="date">9th December 2003, 02:17</div></div><div class="posttext">Hi, i'm designing a pack for CS. And most of it is already done. But now, i've got into some problems. My installer was free of bugs and now, when i try to compile it, i first get some warnings and when it reaches the part of the icon of the installer, it stops the compilation with the error i'll post below (i'll post the entire compilation log).<br />
<br />
------------<br />
rocessing script file: &quot;C:\1_dc\pack\installer\scripts\installer.nsi&quot;<br />
!include: &quot;MUI.nsh&quot;<br />
!include: &quot;C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh&quot;<br />
NSIS Modern User Interface version 1.67 - © 2002-2003 Joost Verburg (C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh:11)<br />
!include: closed: &quot;C:\ARQUIVOS DE PROGRAMAS\NSIS\Contrib\Modern UI\System.nsh&quot;<br />
!include: closed: &quot;C:\ARQUIVOS DE PROGRAMAS\NSIS\Include\MUI.nsh&quot;<br />
!define: &quot;MUI_PRODUCT&quot;=&quot;Jackal Counter-Strike Pack&quot;<br />
!define: &quot;MUI_VERSION&quot;=&quot;v1.0 RC2&quot;<br />
!insertmacro: MUI_LANGUAGE<br />
warning: !warning: The MUI_PRODUCT and MUI_VERSION defines have been removed. Use a normal Name command now.<br />
 (macro:MUI_INSERT:3)<br />
!insertmacro: end of MUI_LANGUAGE<br />
Function: &quot;.onInit&quot;<br />
InitPluginsDir<br />
File: &quot;splash.bmp&quot;-&gt;&quot;$PLUGINSDIR\splash.bmp&quot; [compress] 14854/274806 bytes<br />
File: &quot;splash.wav&quot;-&gt;&quot;$PLUGINSDIR\splash.wav&quot; [compress] 19651/31674 bytes<br />
File: &quot;advsplash.dll&quot;-&gt;&quot;$PLUGINSDIR\advsplash.dll&quot; [compress] 2665/5120 bytes<br />
Plugin Command: show 1000 600 400 0xFF00FF $PLUGINSDIR\splash<br />
Pop: $0<br />
MessageBox: 4: &quot;Isso irá instalar o Jackal Counter-Strike Pack v1.0 RC2. Deseja prosseguir?&quot; (on IDYES goto NoAbort)<br />
Abort: &quot;&quot;<br />
MessageBox: 0: &quot;Antes será feita uma cópia de segurança de seus arquivos para futura desinstalação.&quot;<br />
FunctionEnd<br />
XPStyle: on<br />
CRCCheck: force<br />
overwrite = 0, last_overwrite = 0<br />
SetOverwrite: on<br />
OutFile: &quot;jcp10.exe&quot;<br />
LicenseData: &quot;C:\1_dc\pack\hl\cstrike\licenca.txt&quot;<br />
InstallRegKey: &quot;HKCU\Software\JCP\&quot;<br />
warning: InstallDirRegKey: specified multiple times, wasting space (C:\1_dc\pack\installer\scripts\installer.nsi:34)<br />
InstallRegKey: &quot;HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall\JCP\UninstallString&quot;<br />
warning: InstallDirRegKey: specified multiple times, wasting space (C:\1_dc\pack\installer\scripts\installer.nsi:35)<br />
InstallRegKey: &quot;HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall\JCP\DisplayName&quot;<br />
Function: &quot;GetHLPath&quot;<br />
ReadRegStr $1 HKLM\Software\Valve\Half-Life\InstallPath<br />
FunctionEnd<br />
Function: &quot;.onVerifyInstDir&quot;<br />
Call &quot;GetHLPath&quot;<br />
Pop: $1<br />
IfFileExists: &quot;$1\hl.exe&quot; ? PathGood : <br />
Abort: &quot;&quot;<br />
FunctionEnd<br />
!define: &quot;MUI_WELCOMEPAGE&quot;=&quot;&quot;<br />
!define: &quot;MUI_LICENSEPAGE&quot;=&quot;&quot;<br />
!define: &quot;MUI_COMPONENTSPAGE&quot;=&quot;&quot;<br />
!define: &quot;MUI_COMPONENTSPAGE_SMALLDESC&quot;=&quot;&quot;<br />
!define: &quot;MUI_FINISHPAGE&quot;=&quot;&quot;<br />
!define: &quot;MUI_FINISHPAGE_SHOWREADME&quot;=&quot;$1\cstrike\leia-me.txt&quot;<br />
!define: &quot;MUI_FINISHPAGE_NOTCHECKED&quot;=&quot;&quot;<br />
!define: &quot;MUI_FINISHPAGE_NOAUTOCLOSE&quot;=&quot;&quot;<br />
!define: &quot;MUI_UNINSTALLER&quot;=&quot;&quot;<br />
!define: &quot;MUI_ABORTWARNING&quot;=&quot;&quot;<br />
!define: &quot;MUI_BRANDINGTEXT&quot;=&quot;Jackal Counter-Strike Pack v1.0 RC2 distribuído pelo NSIS v2.0b4&quot;<br />
!define: &quot;MUI_FONT&quot;=&quot;Tahoma&quot;<br />
!define: &quot;MUI_FONTSIZE&quot;=&quot;8&quot;<br />
!define: &quot;MUI_FONT_HEADER&quot;=&quot;Tahoma&quot;<br />
!define: &quot;MUI_FONTSIZE_HEADER&quot;=&quot;8&quot;<br />
!define: &quot;MUI_FONT_TITLE&quot;=&quot;Tahoma&quot;<br />
!define: &quot;MUI_FONTSIZE_TITLE&quot;=&quot;8&quot;<br />
!define: &quot;MUI_INSTALLCOLORS&quot;=&quot;/WINDOWS&quot;<br />
!define: &quot;MUI_PROGRESSBAR&quot;=&quot;SMOOTH&quot;<br />
!define: &quot;MUI_ICON&quot; already defined!<br />
Error in script &quot;C:\1_dc\pack\installer\scripts\installer.nsi&quot; on line 73 -- aborting creation process<br />
------------<br />
<br />
Sorry about the huge post and my full of mistakes english ;)<br />
<br />
But i would apreciate if some of you can  help me, thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">9th December 2003, 02:23</div></div><div class="posttext">Have you recently updated NSIS?  If so then its because MUI has changed some of its commands.  See MUI Readme file for info and if you still can't figgure it out attach your script and I'll take a look at it.<br />
<br />
Vytautas ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cdzitu</div><div class="date">9th December 2003, 04:40</div></div><div class="posttext">Actually, i wrote my script in v2.0b3 and updated to CVS. Then, when it bugged, i installed v2.0b4 ... Should it make any difference?! If yes, where could i find the installer of NSIS v2.0b3 so that i don't need to rewrite the script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">9th December 2003, 05:40</div></div><div class="posttext">Yes there are quite a few differences between b3 and b4/b5 versions of nsis.  As for a link to b3 I think you might be able to get it from the SourceForge CVS, kichik will know for sure.  Although the changes should not be too hard to implement and some of the new feature should be worth the upgrade of the scripts.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th December 2003, 13:13</div></div><div class="posttext">All previous NSIS 2 versions are available at:<br />
<br />
http://sourceforge.net/project/showfiles.php?group_id=22049<br />
<br />
All previous NSIS 1 versions are available at:<br />
<br />
http://www.nullsoft.com/free/nsis/version-history.html<br />
<br />
But it is recommened that you update your script and use NSIS 2.0b4.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mæster</div><div class="date">4th January 2004, 10:05</div></div><div class="posttext">@Cdzitu:<br />
Had the same problem with the icon. The solution is to place the icon-definition before! any page-definitions:<br />
example:<br />
<br />
!define MUI_ICON &quot;MyIcon.ico&quot;<br />
...<br />
!insertmacro MUI_PAGE_WELCOME  <br />
...<br />
<br />
Regards,<br />
Mæster.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th January 2004, 10:54</div></div><div class="posttext">There are more old things in your script<br />
<br />
You have to add new page macros and use normal Name and BrandingText commands. These font settings are also not there anymore, the Modern UI always uses the system font now. All interface settings should be set before the pages.<br />
<br />
I definately recommend you to upgrade your script. Using old development versions is not a good idea.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">4th January 2004, 15:23</div></div><div class="posttext">InstallRegKey is wrong!!!<br />
it has to be InstallDirRegKey<br />
and u defined it few times. like the compiler sais, it only can be defined one time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cpp1977</div><div class="date">6th April 2004, 13:44</div></div><div class="posttext">Originally posted by Mæster <br />
@Cdzitu:<br />
Had the same problem with the icon. The solution is to place the icon-definition before! any page-definitions:<br />
example:<br />
<br />
!define MUI_ICON &quot;MyIcon.ico&quot;<br />
...<br />
!insertmacro MUI_PAGE_WELCOME  <br />
...<br />
<br />
Regards,<br />
Mæster.  <br />
<br />
I also had the same error when I had the MUI_ICON line AFTER these 2<br />
-------------------------------------------------<br />
!define MUI_ABORTWARNING<br />
!insertmacro mui_language &quot;English&quot;<br />
-------------------------------------------------<br />
<br />
once I moved before, it all worked<br />
<br />
<br />
p.s.  how do I get the exact version of nsi I'm using, my help/about says only 2.0<br />
nothing about r1 or r2 whatever...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">6th April 2004, 13:56</div></div><div class="posttext">and for the Icon ... you need to define 2. I tried one but it will give a error at the end <br />
<br />
<br />
!define MUI_ICON &quot;C:\icon.ico&quot;<br />
!define MUI_UNICON &quot;C:\icon.ico&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cpp1977</div><div class="date">6th April 2004, 14:16</div></div><div class="posttext">Originally posted by VegetaSan <br />
and for the Icon ... you need to define 2. I tried one but it will give a error at the end <br />
<br />
<br />
!define MUI_ICON &quot;C:\icon.ico&quot;<br />
!define MUI_UNICON &quot;C:\icon.ico&quot;<br />
  <br />
<br />
actually i have just the 1 and not the uninstall one and I get no errors.  I also have no uninstall parts in my install either</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>