<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" UpgradeDLL vs makensis on linux, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  UpgradeDLL vs makensis on linux NSIS Discussion" />
	
	<title> UpgradeDLL vs makensis on linux [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  UpgradeDLL vs makensis on linux</div>
<hr />
<div class="pda"><a href="t-193147.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=193147">UpgradeDLL vs makensis on linux</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">code101</div><div class="date">11th September 2004, 00:32</div></div><div class="posttext">I'm building installers on the fly for my users using php and makensis on linux.  This works great.  I just added a shell extension to the mix, and I'm using the UpgradeDLL script to install it.  This works fine on my Win32 machines, but does not work under linux.  Specifically, I get this:<br />
<br />
Error: GetDLLVersionLocal is disabled for non Win32 platforms. <br />
<br />
Is there anything I can do about that?<br />
<br />
Thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th September 2004, 10:46</div></div><div class="posttext">Your options are using Wine or helping to implement GetDLLVersionLocal for non Win32 platforms.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th September 2004, 12:26</div></div><div class="posttext">Implemented in latest CVS version. I've only tested it on Windows so please test it and let me know if it works (snapshot updated).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">w31rd0</div><div class="date">27th October 2004, 13:07</div></div><div class="posttext">It does work on Linux but sometimes fails with smth. like &quot;GetDLLVersionLocal: error reading version info from &quot;tk83.dll&quot;: Unicode conversion failed&quot;. I've tested it with 'tcl83.dll' and 'tk83.dll' DLLs (Python's TCL/TK libs) so it works with 'tcl83.dll' but fails with 'tk83.dll'.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th October 2004, 19:15</div></div><div class="posttext">Can you compile a debug version and tell me which line in ResourceEditor.cpp generates that exception?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">w31rd0</div><div class="date">29th October 2004, 08:08</div></div><div class="posttext">There're just two lines which raise runtime_error('Unicode conversion failed') - 442 and 446. It seems that the 446 raises an exception when there're some global iconv problems, so I'd have a look at 442 (I checked it out, it is 442 indeed).<br />
For the moment I replaced 424 from<br />
<br />
if (rdToScan-&gt;Entries[i].NameString.NameIsString) {<br />
<br />
to<br />
<br />
if (0)<br />
<br />
(always set the name to entry's id) so it works for me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th October 2004, 13:35</div></div><div class="posttext">I'll try to find out why it fails converting strings from tcl83.dll, but I think the solution will be keeping the strings in Unicode. The conversion in CResourceEditor is useless and lossy anyway.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">w31rd0</div><div class="date">29th October 2004, 16:02</div></div><div class="posttext">Thanx a lot!<br />
But most likely you won't find it out, because it fails with 'tk83.dll', not with 'tcl83.dll' :))<br />
BTW about the new (in 2.01) 'Library.nsh': it looks fancy and more handy than UpgradeDll. Will it ever be implemented in Linux version as well?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th December 2004, 16:21</div></div><div class="posttext">I've fixed the problem in the latest CVS version. The lossy conversion, however, is still there. I have opened a bug report (http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1083492&amp;group_id=22049&amp;atid=373085) about it for easier tracking.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>