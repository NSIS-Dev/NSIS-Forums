<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstall in onInit w/o reboot page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstall in onInit w/o reboot page NSIS Discussion" />
	
	<title> Uninstall in onInit w/o reboot page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstall in onInit w/o reboot page</div>
<hr />
<div class="pda"><a href="t-257681.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257681">Uninstall in onInit w/o reboot page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">broadware</div><div class="date">16th October 2006, 20:11</div></div><div class="posttext">In the .onInit function I uninstall the previous version before installing the next via (http://nsis.sourceforge.net/Auto-uninstall_old_before_installing_new):<br />
<br />
  ExecWait '$R0 _?=$INSTDIR' ;Do not copy the uninstaller to a temp file<br />
<br />
but a dialog appears with two radio buttons, one to reboot now (default), the other: Manually reboot later.<br />
<br />
I would like to skip this page or have the default set to 'manullly reboot later.'<br />
<br />
Removing _?=$INSTDIR suppress the reboot page, but then installer does not wait for the uninstaller to complete before executing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th October 2006, 20:34</div></div><div class="posttext">Copy the uninstaller to the temporary directory and execute it from there. If you don't, it won't be able to delete itself and its containing directory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">broadware</div><div class="date">16th October 2006, 21:23</div></div><div class="posttext">Are you saying I should change the statement to:<br />
<br />
ExecWait '$R0' <br />
<br />
If I do that, the uninstaller executes in a window on top of the installer window, instead of the installer window waiting until the uninstaller window is finsihed before appearing.<br />
<br />
The Reboot window has disappered, which is great, but I would like the uninstallation window to disapper before the installation window appears.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">broadware</div><div class="date">17th October 2006, 00:57</div></div><div class="posttext">This is what he means:<br />
<br />
ExecWait '$R0 _?=$TEMPBASEDIR' ;copy the uninstaller to a temp file -- no reboot page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th October 2006, 10:12</div></div><div class="posttext">Both are not what I mean. I mean you should copy the uninstaller to the temporary directory yourself before executing it. This way it'll be able to delete &quot;itself&quot; from the real installation directory.CopyFiles $INSTDIR\uninstaller.exe $TEMP<br />
ExecWait '&quot;$TEMP\uninstaller.exe&quot; _?=$INSTDIR'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">17th October 2006, 14:33</div></div><div class="posttext">Broadware-<br />
Does it bother your users that it automatically uninstalls the app when the installer starts? I often start an installer just to see what version it is (or even to see what app it is) because one 'setup.exe' looks like another setup.exe. Maybe you could have the uninstaller run later in the process (like after the user has clicked on 'Install').</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>