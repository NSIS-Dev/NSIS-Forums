<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Files fail to write?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Files fail to write? NSIS Discussion" />
	
	<title> Files fail to write? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Files fail to write?</div>
<hr />
<div class="pda"><a href="t-207213.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=207213">Files fail to write?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">8th February 2005, 07:43</div></div><div class="posttext">This link explains the problem: <br />
http://worldwind.arc.nasa.gov/forums/index.php?showtopic=1225&amp;hl=<br />
<br />
Question is.. is this a problem on the user end (IE out of hard drive space / not able to write?)  Or could this be a corrupt file in the installer?<br />
<br />
If anyone has any suggestions / fixes I'd be much obliged.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th February 2005, 21:22</div></div><div class="posttext">That error is shown if WriteFile (http://msdn.microsoft.com/library/en-us/fileio/base/writefile.asp) fails. WriteFile should rarely fail. Is the file it fails for empty after it fails or does it contain some content? Can you please attach the NSIS script (can't get from CVS, SF is having problems at the moment)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">12th February 2005, 07:08</div></div><div class="posttext">http://wiki.worldwindcentral.com/World_Wind_Eta_Full_b1<br />
<br />
Hit edit to see the script formatted normally.<br />
<br />
Feel free to make changes.  Also be aware that changes will be made over the next few days, we are releasing a new version next week hopefully :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th February 2005, 11:09</div></div><div class="posttext">Nothing special in the script. What about the file that fails to extract?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">12th February 2005, 18:28</div></div><div class="posttext">I think the problem is the number of files.  The program installs &gt; 4000 files.<br />
<br />
I had thought maybe it simply tries to write them too fast.<br />
<br />
The file itself is a .dds image file.   There are ~ 3000 such files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th February 2005, 18:38</div></div><div class="posttext">Do the files that failed extracting contain some content or are they empty?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">13th February 2005, 01:17</div></div><div class="posttext">Hmm.. some of the .wwp files might be empty.  However the .dds files 'should' all be 128kb in size.<br />
<br />
Is there a way I can catch the error and try again / recover?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th February 2005, 04:31</div></div><div class="posttext">I mean on the user's computer, after it fails. For example, if the error shows: &quot;Extract: error writing to file 0024_0066.dds&quot;, is the file named 0024_0066.dds empty for the user who got this error or does it contain some data?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">13th February 2005, 05:10</div></div><div class="posttext">That I don't know.  It has never happened to me or the devs :(<br />
<br />
It looks like this is a 1 in a 1000 error.  However we've released 600,000 copies :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th February 2005, 20:01</div></div><div class="posttext">Would you be able to find any WriteFile calls in fileform.c, add GetLastError in their fail check code and print its return value? That should provide enough details to explain what happens here. Let me know if you can't and I'll create a special version with these changes on the weekend.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Llynix</div><div class="date">16th February 2005, 01:19</div></div><div class="posttext">If you could create a special version of NSIS that does this it would be helpful.  If you could make it so that the error was nice and pretty for users..  I could include this special installer with the next release.. and hopefully we can catch it.<br />
<br />
Our release date for the next one is the 21st.. so we are in a big rush right now :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 19:58</div></div><div class="posttext">http://stashbox.org/uploads/1108669162/makensis_extract_err_dbg.zip<br />
<br />
Built using the latest CVS version. See the change log (http://nsis.sourceforge.net/development/changelog/) for changes made since 2.05. A patch with the change made to add the logging is in the zip and is also attached.<br />
<br />
Use DebugView (http://www.sysinternals.com/ntw2k/freeware/debugview.shtml) while installing to see the error message.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>