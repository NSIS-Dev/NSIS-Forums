<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" [ask] Password, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  [ask] Password NSIS Discussion" />
	
	<title> [ask] Password [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  [ask] Password</div>
<hr />
<div class="pda"><a href="t-255417.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255417">[ask] Password</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JHN</div><div class="date">13th September 2006, 14:14</div></div><div class="posttext">Hello,<br />
<br />
I want to make installer so when everytime people wants to install it, its asking password. And if posibble every time the password was diffrent, or changed random. is it posibble?<br />
<br />
thanks<br />
<br />
Jay</div></div><hr />


<div class="post"><div class="posttop"><div class="username">The Glimmerman</div><div class="date">13th September 2006, 18:03</div></div><div class="posttext">I think it's possible.<br />
But no one will and can use your installer i think.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">13th September 2006, 18:30</div></div><div class="posttext">Maybe the installer is a game? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th September 2006, 18:24</div></div><div class="posttext">it's certainly possible, but you'll have to be more precise as to what your goals are, really.  If it's some manner of copy protection, then I'd not even bother with it.. once somebody has the product actually installed, who needs the installer? they can always re-distribute the actual files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JHN</div><div class="date">15th September 2006, 13:46</div></div><div class="posttext">my goal is i want to create installer for my program that only selected people that can install it, thats why i want to use password to protect it, so everyone can download it. but they need to email me asking for the password before they can install it, and the password has to changed everytime someone install it. I hope someone can give me a clue how to made it posibble with NSIS. thanks a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">15th September 2006, 14:21</div></div><div class="posttext">well, if you want it to work that way, you cant hardcode the password into the installer...<br />
<br />
as Animaether said, once you give the password to a person, they dont need your installer anymore to distribute its files</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JHN</div><div class="date">15th September 2006, 14:39</div></div><div class="posttext">maybe i didn't make it clear, i want the password changed periodic or every time someone install it. I think not everyone can extract and gather all the files in installer, especially there's registry entry. So i am hoping someone can help me and give me a clue how i can build an installer with password, and the password change periodic or every time some one install it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">15th September 2006, 14:47</div></div><div class="posttext">So... everytime someone uses your installer, you want the the copy of the installer on your website to change its password somehow... ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">15th September 2006, 16:11</div></div><div class="posttext">i'd solve this problem with some kind of user-registration.<br />
<br />
nsis could then download  a file from the web to activate itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">15th September 2006, 16:43</div></div><div class="posttext">well if you must...<br />
what you'll want to do is something silly like getting the current time<br />
<br />
<br />
System::Call '*(&amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2) i .r0'<br />
System::Call 'kernel32::GetLocalTime(i) i(r0)'<br />
System::Call '*$0(&amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2, &amp;i2)i (.r1, .r1, .r1, .r1, .r2, .r3, .r4, .r5'<br />
<br />
$1 = date as a SystemTime object.  I'd just ignore this one*<br />
$2 = hour<br />
$3 = minute<br />
$4 = second<br />
$5 = milliseconds<br />
<br />
those are all ints.  Now do something to those ints.  For example:<br />
<br />
IntOp $1 $2 + $3<br />
IntOp $1 $1 * $4<br />
IntOp $1 $1 - $5<br />
<br />
$1 now contains the expected key code.<br />
<br />
Now pop up a custom page with two labels and an input field.  The first label should just tell the user to e-mail you at whatever@whatever.whatever with the text on the next tline.  Set the text of the second label (the next line) to &quot;$2 $3 $4 $5&quot;.<br />
<br />
The user e-mails you those numbers.  You know that the expected key code should just be: (($2 + $3) * $4) - $5 .<br />
You send that key code back to them, and they enter it in the field.<br />
<br />
Then when the user clicks Next (or you can put it on a NOTIFY event) you check that field's value and compare it to $1.  If it matches, continue, if it doesn't - tell the user that they entered the wrong number.<br />
<br />
Now, there's some obvious caveats...<br />
1. the user will have to keep the installer open, on that page, while waiting for the key.  So if you take a while to e-mail back, and they close their installer, the next time they start it - it'll ask for a different number. (just what you wanted, right?).  So instead of e-mail, consider setting up a PHP/ASP/whatever page that the user can enter the 4 numbers into that returns the code.  You can then easily combine this with things like secure accounts/etc. (comm@nder21's suggestion would work as well, but takes more code to handle internet access stuff).  Don't use javascript - if you do, they'll just read the source and get the code themselves.<br />
<br />
2. the key code generation I showed you is stupid-simple.  It will deter 95% of the people who really want to bypass your installer, the other 5% will quickly figure out the math behind it.  So you'll want to do something more fancy - look up on crypto stuff.<br />
<br />
3. the numbers matching today's date is probably something obvious, yoo - consider scrambling the numbers.  Again, see crypto.<br />
<br />
4. as I said before - after they have installed it, they can easily redistribute the files as is.  Yes, easily.  I won't be a sillyhead and point to the fully legit resources available to users everywhere to find out what files are being accessed and how, what registry keys are being set, changed, etc. and how and tons more things.  Suffice it to say, that anybody determined enough will find this manner of protection laughable.<br />
<br />
I hope this at least gives you some tips, though.<br />
<br />
<br />
* if you don't want to ignore the date (to add a few digits):<br />
<br />
System::Call &quot;Kernel32::GetDateFormatA(i 0, i 0, i r0, t 'y/M/d', t .r1, i ${NSIS_MAX_STRLEN})&quot;<br />
<br />
makes $1 a string of &quot;y/M/d&quot; (year/month/date) format, which you can then easily separate into the three by using StrCpy and StrCmp stuff.<br />
<br />
<br />
alternative to getting the time (Even though that nearly guarantees a different (not random) key code every time), you can use Random:<br />
http://nsis.sourceforge.net/Random<br />
You'll still have to seed Random with something though.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>