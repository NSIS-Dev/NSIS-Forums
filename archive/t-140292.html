<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" unchecked subsection as default, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  unchecked subsection as default NSIS Discussion" />
	
	<title> unchecked subsection as default [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  unchecked subsection as default</div>
<hr />
<div class="pda"><a href="t-140292.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140292">unchecked subsection as default</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th June 2003, 12:47</div></div><div class="posttext">Hi there and hello<br />
<br />
Is it possible to have an subsection unchecked as default<br />
<br />
eg.<br />
<br />
section<br />
- [x] subsection 1<br />
- [_] subsection 2<br />
<br />
Additional:<br />
Is it possible to change the [x] for subsection 2 depending on existing values (e.g feature was installed before (or not))<br />
<br />
example:<br />
on first installation subs2 is nailed, user deselected it - and on upgrade (or 2nd installation) subs2 is not nailed.<br />
<br />
thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th June 2003, 16:53</div></div><div class="posttext">sorry - from help<br />
<br />
&gt;&gt; If the Switch /o is specified than the Section is unselected by default.<br />
<br />
but my second question is still unanswered. is it possible?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th June 2003, 17:12</div></div><div class="posttext">I found a macro in a NSH<br />
<br />
; Set one or more BITS in SECTION's flags.<br />
!macro SetSectionFlag SECTION BITS<br />
	Push $R0<br />
	SectionGetFlags &quot;${SECTION}&quot; $R0<br />
	IntOp $R0 $R0 | &quot;${BITS}&quot;<br />
	SectionSetFlags &quot;${SECTION}&quot; $R0<br />
	Pop $R0<br />
!macroend<br />
<br />
; Clear one or more BITS in SECTION's flags.<br />
!macro ClearSectionFlag SECTION BITS<br />
	Push $R0<br />
	Push $R1<br />
	SectionGetFlags &quot;${SECTION}&quot; $R0<br />
	IntOp $R1 &quot;${BITS}&quot; ~<br />
	IntOp $R0 $R0 &amp; $R1<br />
	SectionSetFlags &quot;${SECTION}&quot; $R0<br />
	Pop $R1<br />
	Pop $R0<br />
!macroend<br />
<br />
<br />
Maybe<br />
<br />
!insertmacro SetSectionFlag <br />
<br />
but SECTION and BITS? how? pls tell me<br />
<br />
can i include the text containing the macro like this without copying the macro itself to my nsi-script or is it included automatically?<br />
<br />
!include &quot;${NSISDIR}\include\sections.nsh&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">30th June 2003, 02:09</div></div><div class="posttext">Originally posted by Brummelchen sorry - from help<br />
<br />
&gt;&gt; If the Switch /o is specified than the Section is unselected by default.<br />
 <br />
<br />
where did you get this?4.6.1.2 Section<br />
<br />
[/e] [section_name] [section index output]<br />
<br />
Begins and opens a new section. If section_name is empty, omitted, or begins with a -, then it is a required section and the user will not see it, nor have the option of disabling it. If the section name is 'Uninstall', then it is a special Uninstall Section. If section index output is specified, the parameter will be !defined with the section index (that can be used for SectionSetText etc). If the section name begins with a !, the section will be displayed as bold. If /e is present, the sub sections of the section will be expanded by default.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">30th June 2003, 03:32</div></div><div class="posttext">NSIS Help Chapter 4 CVS from the last 3 days or before !<br />
<br />
Section flags have to be changed if the concerning file was installed on a previos setup - normal it is unchecked due to a Web-Setup.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 12:43</div></div><div class="posttext">You don't need ClearSectionFlag, you can use UnselectSection from the same file. Just so you'd know next time, the flags (BITS) are listed on the top of Sections.nsh (SF_*), and SECTION is the section id as always.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">4th July 2003, 14:18</div></div><div class="posttext">@kichik<br />
<br />
man ur great :)<br />
<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_LICENSE<br />
  Page custom find_xyz ; this is a normal function call<br />
<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
<br />
...<br />
<br />
Function find_xyz<br />
  IfFileExists $INSTDIR\xyz\xyz.exe 0 noabsfsec<br />
  absfsec:<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 <br />
&quot;A previous version of '${MUI_PRODUCT} xyz' was found.<br />
$\nWould you like to install the latest version?&quot; <br />
IDNO noabsfsec<br />
   SectionSetFlags ${SecInfo2} 1<br />
  noabsfsec:<br />
FunctionEnd<br />
<br />
<br />
BTW is this the correct syntax?<br />
<br />
SectionSetFlags ${SecInfo2} 1 &lt;-- &quot;1&quot; or  do i have to use other flags? (0x01)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 14:26</div></div><div class="posttext">1 is the same as SF_SELECTED. There is absolutely no difference. Why would you use SectionSetFlags though? What's wrong with SelectSection?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 14:28</div></div><div class="posttext">Hmm... It's not the macro. SetSectionFlags 1 to select the section should be enough but if you choose to add other flags such as bold or read only it will remove them. You should use the SelectSection macro from Sections.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">4th July 2003, 14:33</div></div><div class="posttext">@kichik<br />
<br />
SF_SELECTED is synonym for &quot;0x01&quot; ?<br />
<br />
&gt; What's wrong with SelectSection?<br />
<br />
You mean that<br />
!insertmacro SelectSection $1<br />
may the easier way?<br />
<br />
if that does set flag SF_SELECTED without changing other flags (bold aso.) that would help me.<br />
<br />
This is my first time into deep nsis :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 14:41</div></div><div class="posttext">${SF_SELECTED} is defined as 1 (or 0x01, same thing). It's the exact same thing, but SF_SELECTED's meaning is far more easier to understand than 1 ;)<br />
<br />
Saving other flags is the exact reason to use the macro (or just its content).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">4th July 2003, 15:01</div></div><div class="posttext">&gt; ${SF_SELECTED} is defined as 1<br />
<br />
This works<br />
IntOp $0 $0 | 1<br />
<br />
this not<br />
IntOp $0 $0 | ${SF_SELECTED}<br />
<br />
I modified the routine:<br />
<br />
    ;set SectionFlags to &quot;found&quot;<br />
    Push $0<br />
    SectionGetFlags ${SecInfo2} $0<br />
    IntOp $0 $0 | 1<br />
    SectionSetFlags ${SecInfo2} $0<br />
    Pop $0<br />
<br />
I dont know how to work with<br />
!insertmacro SelectSection $1<br />
<br />
it causes errors while compiling.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 17:26</div></div><div class="posttext">You have to include Sections.nsh for SF_SELECTED and the macros to be defined.<br />
<br />
You've used $1 in the macro instead of the section. It should look like this:<br />
<br />
!insertmacro SelectSection ${SecInfo2}<br />
<br />
What errors do you get? If it tells you the macro wasn't found then you should add &quot;!include Sections.nsh&quot; to your script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">4th July 2003, 18:30</div></div><div class="posttext">@kichik<br />
<br />
&gt; add &quot;!include Sections.nsh&quot; to your script.<br />
<br />
i forgot that - now it works perfectly. THX</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>