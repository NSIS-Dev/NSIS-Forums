<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Doing more than one thing at once - threading., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Doing more than one thing at once - threading. NSIS Discussion" />
	
	<title> Doing more than one thing at once - threading. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Doing more than one thing at once - threading.</div>
<hr />
<div class="pda"><a href="t-262958.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=262958">Doing more than one thing at once - threading.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Hello1024</div><div class="date">3rd January 2007, 21:35</div></div><div class="posttext">I'm new to NSIS, and after struggling a bit with the scripting language, I've now figured out how to do all the things I need to do except one:<br />
<br />
I want the installer to be able to do multiple things at once (effectively multi threading), and I want each &quot;thread&quot; to be able to check the progress of the other things going on at the same time.<br />
<br />
An example is if I want to download a file (bandwidth intensive), extract a compressed file (CPU intensive), and copy a large file (HD intensive) all at the same time, so the installer completes faster.<br />
<br />
So say for my script (this is sudocode):<br />
<br />
NSISdl::startDownload(&quot;http://abc.com/myfile&quot;)<br />
Copyfile::Start &quot;filea.iso&quot; &quot;fileb.iso&quot;<br />
Zip::StartExtract &quot;bigzip.zip&quot; &quot;*.*&quot;<br />
<br />
loop:<br />
progress=(NSISdl::progress)+(CopyFile::progress)+(Zip::progress) / 3<br />
if (NSISdl::done)&amp;&amp;(CopyFile::done)&amp;&amp;(Zip::done) goto done<br />
delay 1000<br />
goto loop<br />
<br />
done:<br />
msgbox(&quot;everythings done&quot;)<br />
 <br />
<br />
Is that possible, preferably without too many modiications to sll the c++ modules?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th January 2007, 00:08</div></div><div class="posttext">I'm afraid not. The only way to run NSIS code simultaneously is to have each thread as a separate executable and execute each of them silently with Exec. The easiest way to check when they are all done would be to check registry entries every few seconds (Sleep) in a loop.<br />
<br />
Something like this:Exec &quot;$PLUGINSDIR\thread1.exe&quot;<br />
Exec &quot;$PLUGINSDIR\thread2.exe&quot;<br />
Exec &quot;$PLUGINSDIR\thread3.exe&quot;<br />
Loop:<br />
  ReadRegStr $R1 &quot;Software\MyApp\Install\Thread1&quot; &quot;&quot;<br />
  ReadRegStr $R2 &quot;Software\MyApp\Install\Thread2&quot; &quot;&quot;<br />
  ReadRegStr $R3 &quot;Software\MyApp\Install\Thread3&quot; &quot;&quot;<br />
  Sleep 5000<br />
StrCmp $R1 0 Loop<br />
StrCmp $R2 0 Loop<br />
StrCmp $R3 0 Loop<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Hello1024</div><div class="date">4th January 2007, 10:22</div></div><div class="posttext">Is there any way to make those seperate &quot;Thread&quot; exeutables with NSIS, and then have them silent executables without a ui?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">4th January 2007, 11:31</div></div><div class="posttext">You can write a plug-in, for example Marquee (http://nsis.sourceforge.net/Marquee_plug-in) does the threads trick. Plug-ins can work without gui.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th January 2007, 13:44</div></div><div class="posttext">Yes, just put SilentInstall Silent in those scripts.<br />
You won't be able to execute separate NSIS code with plugins however, only C/C++ code.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>