<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Skip instfiles page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Skip instfiles page NSIS Discussion" />
	
	<title> Skip instfiles page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Skip instfiles page</div>
<hr />
<div class="pda"><a href="t-180562.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=180562">Skip instfiles page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">happilybottled</div><div class="date">19th May 2004, 23:17</div></div><div class="posttext">I am writing an installer that needs to have 2 instfiles pages, one of which may be skipped.  My problem is that I cannot get the installer to skip an instfiles page - if I put an 'Abort' in the pre-function then the page comes up blank but it is not skipped.<br />
<br />
I know that this is usually done by showing a components page and allowing the user to pick what components they want to install, but for marketing/licensing reasons I need to do it this way.<br />
<br />
The flow of the installer needs to be like:<br />
<br />
Page custom PageWantProductA<br />
Page instfiles PreProductA PageProductA LeaveProductA<br />
Page custom PageProductAInstallationResults<br />
Page license<br />
Page directory<br />
Page instfiles PreProductB PageProductB LeaveProductB<br />
<br />
Function PageWantProductA<br />
; A page that asks the user if they want<br />
; product A installed<br />
FunctionEnd<br />
<br />
Function PreProductA<br />
; If the user wants product A, then unselect all <br />
;  sections except those for Product A<br />
; If the user does not want product B, then skip<br />
;  this page<br />
FunctionEnd<br />
<br />
Function PageProductA<br />
FunctionEnd<br />
<br />
Function LeaveProductA<br />
; unselect the product A sections, and select<br />
;  the product B sections<br />
FunctionEnd<br />
<br />
Function PageProductAInstallationResults<br />
; tell the user Product A was installed sucessfully<br />
;  (or if it failed)<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">20th May 2004, 02:38</div></div><div class="posttext">What I think you should do is to create an invisible custom page after the instfiles page and try to use abort command again on instfiles pre-function. Say after if this works or not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">happilybottled</div><div class="date">20th May 2004, 16:24</div></div><div class="posttext">OK, I don't know exactly what you mean by an invisible page, so I don't know how to try it.  I do have some custom pages that should sometimes get skipped, and these pages are behaving exactly as I expect.<br />
<br />
If I put the 'Abort' in the pre function, then I see a blank page rather than having the page skipped.  I then have to click next.  Neither the 'show' nor the 'leave' functions ever get called in this case, and after I click next I go to the next page I expect to see.<br />
<br />
If I try putting the 'Abort' in the show function, then the leave function gets called immediately but I still have to click next to get to the next page.  The install page that I see in this case says 'Completed' and when I click on details all it says is 'Completed' (nothing is actually installed) and the progress bar has made no progress (it appears as just a white strip).<br />
<br />
In either of these cases I've tried putting in custom pages before and after the install page, and I've tried skipping those pages and showing those pages - these custom pages always behave as expected and never have any effect on this observed behavior of the install page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">21st May 2004, 01:20</div></div><div class="posttext">An invisible custom page is a page which doesn't appear on the screen. Use &quot;Page custom CustFunc&quot; after instfiles page and create &quot;Function CustFunc&quot; with no commands inside (CustFunc is the name of the function you want), and add to instfiles pre-function the command Abort. Try and say if it does work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">roy204</div><div class="date">21st May 2004, 13:03</div></div><div class="posttext">Hi there,<br />
<br />
I work with &quot;happilybottled&quot; and tried your suggestion of an invisible custom page this morning but it didn't fix it. The new page doesn't show (that's expected) but also does not change the logic (I'm not sure how it could) of other pages.<br />
<br />
All in all, we are unable to skip the instfiles page using Abort in the pre_function, nor stay into it using Abort in the leave_function although it works with every other page type (license, components, etc...).<br />
<br />
Could this be a bug in NSIS or is there a workaround?<br />
<br />
Thanks again for any help, much appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">21st May 2004, 22:55</div></div><div class="posttext">You can use &quot;SetAutoClose true&quot; and &quot;SetAutoClose false&quot; inside your sections to control whether or not the first instfiles page appears.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">happilybottled</div><div class="date">24th May 2004, 16:54</div></div><div class="posttext">Thank you pengyou!  It looks like I can get the behavior I want by combining SetAutoClose and Abort.  (If I don't use Abort then the 'Next &gt;' button does work correctly, but the '&lt; Back' button on the next page still ends up getting me to the install page I was trying to skip.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>