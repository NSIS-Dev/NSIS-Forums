<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI + Languages + Override default text, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI + Languages + Override default text NSIS Discussion" />
	
	<title> MUI + Languages + Override default text [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI + Languages + Override default text</div>
<hr />
<div class="pda"><a href="t-174192.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174192">MUI + Languages + Override default text</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Misha v.3</div><div class="date">26th March 2004, 13:34</div></div><div class="posttext">i try use simple code:<br />
<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
Name &quot;LangTest&quot;<br />
OutFile &quot;LangTest.exe&quot;<br />
<br />
LangString WELCOME_TEXT ${LANG_RUSSIAN} &quot;RUSSIAN&quot;<br />
LangString WELCOME_TEXT ${LANG_ENGLISH} &quot;ENGLISH&quot;<br />
 <br />
!define MUI_WELCOMEPAGE_TEXT &quot;$(WELCOME_TEXT)&quot;<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Russian&quot;<br />
<br />
Section &quot;&quot;<br />
SectionEnd<br />
<br />
Function .onInit<br />
	!insertmacro MUI_LANGDLL_DISPLAY<br />
FunctionEnd<br />
<br />
<br />
and when i select 'Russian' there are no any text on welcome page.<br />
<br />
i try search in forum and find that i must use !insertmacro MUI_LANGUAGE &quot;English&quot; before use ${LANG_RUSSIAN}. but if i move !insertmacro MUI_LANGUAGE &quot;English&quot; on top i get many errors.<br />
<br />
also i find information about using <br />
!insertmacro MUI_LANGUAGEFILE_STRING MUI_WELCOMEPAGE_TEXT &quot;...&quot; instead of !define MUI_WELCOMEPAGE_TEXT but in my versions MUI (i try 1.69 and 1.70) this macro is undefied.<br />
<br />
i don't want edit languages files and system.nsh because i need override only some string.<br />
<br />
where is my mistake?<br />
<br />
P.S. i read faq/doc and i try search answers this forum.<br />
P.P.S. changing texts in Sections work fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th March 2004, 14:32</div></div><div class="posttext">Move:<br />
<br />
LangString WELCOME_TEXT ${LANG_RUSSIAN} &quot;RUSSIAN&quot;<br />
LangString WELCOME_TEXT ${LANG_ENGLISH} &quot;ENGLISH&quot; <br />
<br />
to the bottom.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Misha v.3</div><div class="date">26th March 2004, 15:29</div></div><div class="posttext">incredable. it's work. i can't understand: definition WELCOME_TEXT after use... %-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th March 2004, 17:09</div></div><div class="posttext">Language string names are always unique, the place of the definition doesn't make any difference.<br />
<br />
It should be below the language macro in this case because ${LANG_ENGLISH}, the Enlish language ID (1033) is set when the language file is loaded.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">31st March 2004, 08:24</div></div><div class="posttext">i have a little prob...<br />
i tried this first with Misha v.3s code, and it worked...<br />
but i'm not able to get it started in mine<br />
<br />
<br />
; defines<br />
	!define PRODUCT_NAME &quot;ITS Client&quot;<br />
	!define PRODUCT_VERSION &quot;1.0&quot;<br />
	!define PRODUCT_PUBLISHER &quot;bit media&quot;<br />
	!define PRODUCT_WEB_SITE &quot;http://www.bitmedia.cc&quot;<br />
<br />
;--------------------------------<br />
<br />
; MUI Settings<br />
	!define MUI_ABORTWARNING<br />
	!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Icon.ico&quot;<br />
	!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Icon_Un.ico&quot;<br />
	!define MUI_HEADERIMAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Header.bmp&quot;<br />
	!define MUI_HEADERIMAGE_UNBITMAP &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Header_Un.bmp&quot;<br />
	!define MUI_WELCOMEFINISHPAGE_BITMAP  &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Modern_lessorange.bmp&quot;<br />
	!define MUI_UNWELCOMEFINISHPAGE_BITMAP  &quot;${NSISDIR}\Contrib\Graphics\monki-modern_theme\Modern_Un_lessorange.bmp&quot;<br />
	!define LVM_GETITEMCOUNT 0x1004<br />
	!define LVM_GETITEMTEXT 0x102D<br />
<br />
;--------------------------------<br />
<br />
; include<br />
	;!include &quot;MUI.nsh&quot;<br />
	!include &quot;${NSISDIR}\Include\MUI.nsh&quot;<br />
	!include &quot;${NSISDIR}\Include\bit_functions.nsh&quot;<br />
	!include &quot;${NSISDIR}\Include\iptest.nsh&quot;<br />
	!include ITSClient.nsh<br />
	<br />
;--------------------------------<br />
<br />
; global variables<br />
<br />
Var UpdateDir<br />
            # if KindOfInst == 0;       Normal Installation<br />
            # if KindOfInst == 1;       Update<br />
Var KindofInst<br />
Var Ip<br />
<br />
;--------------------------------<br />
<br />
;initialwerte setzen<br />
	Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
	OutFile &quot;ITSClientSetup.exe&quot;<br />
	InstallDir &quot;$PROGRAMFILES\ITS_Client&quot;<br />
<br />
;--------------------------------<br />
<br />
;NSIS Schalter setzen<br />
	ShowInstDetails hide<br />
	ShowUnInstDetails hide<br />
<br />
;--------------------------------<br />
<br />
;Language Selection Dialog Settings<br />
	;Remember the installer language<br />
	!define MUI_LANGDLL_REGISTRY_ROOT &quot;HKCU&quot; <br />
	!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\Modern UI ITSClient&quot; <br />
	!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;Installer Language&quot;<br />
<br />
;--------------------------------<br />
<br />
;Installer Functions<br />
Function .onInit<br />
	!insertmacro MUI_LANGDLL_DISPLAY<br />
	!insertmacro wincheck<br />
	!insertmacro checkifupdate<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
<br />
;welcome page<br />
	!insertmacro MUI_PAGE_WELCOME<br />
	<br />
;--------------------------------<br />
;Languages<br />
	!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
	;!insertmacro MUI_LANGUAGE &quot;Italian&quot;<br />
	!insertmacro MUI_LANGUAGE &quot;German&quot;<br />
<br />
;--------------------------------<br />
<br />
;NSIS pages<br />
	!insertmacro MUI_PAGE_LICENSE &quot;License.txt&quot;<br />
	!insertmacro MUI_PAGE_DIRECTORY<br />
	!insertmacro MUI_PAGE_INSTFILES<br />
	!insertmacro MUI_PAGE_FINISH<br />
	!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
<br />
<br />
Section &quot;Hauptgruppe&quot; SEC01<br />
	DetailPrint &quot;---- Detail ----&quot;<br />
	SetOverwrite ifnewer<br />
	Call IsDotNETInstalled<br />
	Pop $R3<br />
	StrCmp $R3 0 +3<br />
	DetailPrint &quot;Found .NET Framework!&quot;<br />
	Goto +2<br />
	MessageBox MB_OKCANCEL &quot;Can't find .NET, please install!&quot;<br />
	${If} $KindofInst == 1        <br />
            !insertmacro update<br />
        ${Endif}<br />
        !insertmacro copyfiles<br />
	!insertmacro regdlls<br />
	!insertmacro writesettingsfile<br />
        ${If} $KindofInst == 1<br />
            MessageBox MB_OK &quot;kindofinst 1, settings.xml copied&quot;<br />
            DetailPrint &quot;from: $Updatedir backup\config\settings.xml&quot;<br />
            !insertmacro FileCopy &quot;$Updatedir backup\config\settings.xml&quot; &quot;$INSTDIR\config&quot;<br />
        ${Endif}<br />
	ExecWait '&quot;$INSTDIR\confEdit\confedit.exe&quot; /file:..\config\settings.xml /conf:..\config\config.xml /d a,c'<br />
	Push &quot;$INSTDIR\Logfile_ITSClient.txt&quot;<br />
	Call DumpLog<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
Section -AdditionalIcons<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
Section -Post<br />
	WriteUninstaller &quot;$INSTDIR\uninst.exe&quot;<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
Function .onInstSuccess<br />
    RMDir /r &quot;$Updatedir backup&quot;<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
Function un.onUninstSuccess<br />
  HideWindow<br />
  MessageBox MB_ICONINFORMATION|MB_OK &quot;$(^Name) wurde erfolgreich deinstalliert.&quot;<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
<br />
Function un.onInit<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;MÃ¶chten Sie $(^Name) und alle seinen Komponenten deinstallieren?&quot; IDYES +2<br />
  Abort<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
<br />
Section Uninstall<br />
	RMDir /r &quot;$INSTDIR&quot;<br />
	RMDir /r &quot;$SMPROGRAMS\ITS Client&quot;<br />
	DeleteRegKey HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Run\RunCL&quot;<br />
	SetAutoClose true<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
;Langstrings<br />
<br />
LangString WELCOME_TEXT ${LANG_GERMAN} &quot;GERMAN&quot; <br />
LangString WELCOME_TEXT ${LANG_ITALIAN} &quot;ITALIAN&quot; <br />
LangString WELCOME_TEXT ${LANG_ENGLISH} &quot;ENGLISH&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">31st March 2004, 09:39</div></div><div class="posttext">There should be a MUI_WELCOMEPAGE_TEXT setting.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">31st March 2004, 09:50</div></div><div class="posttext">no i don't get the box in which i can choose between the languages</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">31st March 2004, 10:05</div></div><div class="posttext">There is a probably already a language setting in the registry, you didn't define MUI_LANGDLL_ALWAYSSHOW.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">31st March 2004, 11:12</div></div><div class="posttext">oh i found the problem...<br />
.onInit have to be on the bottom of the document.<br />
at least after the welcome pages, i haven't tried...<br />
<br />
but thx for the quickie info</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>