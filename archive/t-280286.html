<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSD_CreateDirRequest does not work, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSD_CreateDirRequest does not work NSIS Discussion" />
	
	<title> NSD_CreateDirRequest does not work [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSD_CreateDirRequest does not work</div>
<hr />
<div class="pda"><a href="t-280286.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=280286">NSD_CreateDirRequest does not work</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">29th October 2007, 20:47</div></div><div class="posttext">Hello! I already searched for anything that could help me to solve this, but found no solution. From the nsDialogs example I could not create a DirRequest. Actually, it creates an edit box, but with no browse button.<br />
<br />
What could be wrong? Here is the code:<br />
<br />
!include LogicLib.nsh<br />
!include nsDialogs.nsh<br />
<br />
Name nsDialogs<br />
OutFile nsDialogs.exe<br />
<br />
XPStyle on<br />
<br />
Var Dialog<br />
Var MyDir<br />
<br />
Page custom nsDialogsPage<br />
Page instfiles<br />
<br />
Function nsDialogsPage<br />
<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $Dialog<br />
<br />
	${If} $Dialog == error<br />
		Abort<br />
	${EndIf}<br />
<br />
	${NSD_CreateDirRequest} 0 0 100% 12u &quot;Choose a directory&quot;<br />
	Pop $MyDir<br />
<br />
	nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Section<br />
<br />
	DetailPrint &quot;hello world&quot;<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th October 2007, 21:57</div></div><div class="posttext">You have to separately create the button and add an OnClick callback function to it. In Include\nsDialogs.nsh find OnDirBrowseButton for an example usage.<br />
<br />
If possible, make an example code out of it and I'll add it as a nsDialgs example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">29th October 2007, 22:49</div></div><div class="posttext">Interesting. Before I post the question I was just making what you told me to do. :-)<br />
<br />
I searched in nsDialogs.nsg (hoping to find any clues) and found a DirRequest function that seems to create properly what I wanted. What I can't understand is why there is a CreateDirRequest if it does not create one and what is the difference to a simple input text box.<br />
<br />
Thanks for the reply.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">30th October 2007, 18:44</div></div><div class="posttext">I have created a simple function that creates a DirRequest and accept a suffix to be automatically appended to the end of the  path choosed. This is handy to indicate to the user the final path of installation (my application has many componentes that are installed at different paths). The function has one little limitation: is does not work with width and X coordinate, but this can be easily changed if someone is interested.<br />
<br />
Some parts of my code is based on nsDialogs.nsh, including writing to an ini file. Is there a way to make this file temporary, i.e., be automatically deleted at the end of the installation?<br />
<br />
I am attaching the function so you can send me any ideias and use it (if it is good for you). <br />
<br />
Thanks!  :up:<br />
<br />
Edit: I found a little bug, in the last push of MyCreateDirRequest, isn't $0 to be pushed, but $R0. By the way, what is the difference between $R* and $*?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">13th February 2009, 00:26</div></div><div class="posttext">just to drag this back up...<br />
<br />
the difference between $N and $RN is just the R..<br />
You have $0, $1, $2, $3, $4, $5, $6, $7, $8, $9 - 10 'temporary' variables that you can always assign stuff to.  But some people were quickly hitting the 10 limit so $10, through $19 were added.  These last 10 you can also access as $R0 through $R9.<br />
So there's no functional difference.. they're just more temp variables.<br />
<br />
as for DirRequest and FileRequest - yes, they're the same as a Text control.  The BrowseButton is also the same as a regular Button control.<br />
<br />
Not sure why they were added with these names, maybe different default styles were planned for them at some point, maybe early tests showed people thought controls were 'missing' if they didn't encounter these names (although subsequent confusion over the lack of a browse button if creating a dir/filerequest control may be even worse, imho)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">8th February 2010, 22:57</div></div><div class="posttext">Grrr, the documentation needs updating, I just wasted ages on this exact problem.<br />
<br />
&quot;nsDialogs doesn't use INI files, so it's way faster than InstallOptions.&quot;<br />
<br />
Wrong, it's a total pain in the ass...  Sorry....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">10th February 2010, 13:10</div></div><div class="posttext">having worked with nsDialogs for some time now - I can honestly say it is -much- more flexible and it runs faster... however, creating content with it is slower.  <br />
<br />
This is mostly due to a lack of an IDE taking advantage of nsDialogs, though.<br />
<br />
I certainly much prefer it to having an external .ini file which specifies whether or not a control reacts to anything, and then having a single function that handles any such actions and having to check whether it's the one you care about or not, etc.<br />
<br />
But, to each their own, and InstallOptionsEx served me quite well before I made the jump to nsDialogs (InstallOptionsEx adds tons of functionality not in the original InstallOptions/InstallOptions2) - so if you prefer the ini route, try that :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>