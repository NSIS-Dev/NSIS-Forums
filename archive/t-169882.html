<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Here are 2 useful date functions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Here are 2 useful date functions NSIS Discussion" />
	
	<title> Here are 2 useful date functions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Here are 2 useful date functions</div>
<hr />
<div class="pda"><a href="t-169882.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=169882">Here are 2 useful date functions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fabiochelly</div><div class="date">18th February 2004, 10:59</div></div><div class="posttext">I created 2 date functions: IsLeapYear and DaysInMonth:<br />
<br />
To use it:<br />
Push &quot;year&quot;<br />
Call IsLeapYear<br />
Pop $0 ;returns 0 or 1<br />
<br />
Push &quot;month&quot;<br />
Push &quot;year&quot;<br />
Call DaysInMonth<br />
Pop $0 ; returns 28, 29, 30 or 31 <br />
<br />
Function IsLeapYear<br />
<br />
  Pop $0<br />
  IntOp $1 $0 % 4<br />
  IntCmp $1 0 test2 ;si divisible par 4, on passe au test 2 (début de siècle)<br />
  Goto ko ;sinon, retourne FAUX<br />
  test2:<br />
    IntOp $1 $0 % 100<br />
    IntCmp $1 0 test3<br />
    Goto ok<br />
  test3:<br />
    ;l'année est un siècle rond<br />
    ;on vérifie si ce siècle est impair<br />
    IntOp $1 $0 % 200<br />
    IntCmp $1 0 ok<br />
    Goto ko<br />
  ok:<br />
    Push 1<br />
    Goto end<br />
  ko:<br />
    Push 0<br />
  end:<br />
FunctionEndFunction DaysInMonth<br />
  Pop $0 ;annee<br />
  Pop $1 ;mois<br />
<br />
  IntCmp $1 1 m31<br />
  IntCmp $1 2 m28<br />
  IntCmp $1 3 m31<br />
  IntCmp $1 4 m30<br />
  IntCmp $1 5 m31<br />
  IntCmp $1 6 m30<br />
  IntCmp $1 7 m31<br />
  IntCmp $1 8 m31<br />
  IntCmp $1 9 m30<br />
  IntCmp $1 10 m31<br />
  IntCmp $1 11 m30<br />
  IntCmp $1 12 m31<br />
<br />
  m31:<br />
    Push 31<br />
    Goto end<br />
  m30:<br />
    Push 30<br />
    Goto end<br />
  m28:<br />
    Push $0<br />
    Call IsLeapYear<br />
    Pop $0<br />
    IntCmp $0 1 m29<br />
      Push 28<br />
      Goto end<br />
    m29:<br />
     Push 29<br />
  end:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">18th February 2004, 11:04</div></div><div class="posttext">Maybe you based &quot;Bissext&quot; year from one of my functions, the correct name is &quot;Leap&quot; year.<br />
<br />
And second, you can know if a year is a leap year using the simple calculation:<br />
<br />
Year % 4<br />
<br />
If the rest is 0, it is a leap year.<br />
<br />
I should fix those two in my function but I didn't have time to do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fabiochelly</div><div class="date">18th February 2004, 11:08</div></div><div class="posttext">Leap and not Bissext : corrected<br />
<br />
No: Year / 4 is not enough : years 1700, 1900, 2100, 2300 (each 200 years) are not leap.<br />
<br />
Effectively, I called it Bissext because I first tried to use your Seconds2Date function which doesn't work for me (see my other thread of this day)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">18th February 2004, 11:21</div></div><div class="posttext">Yes, all of them are leap years. Why did Atlanta celebrated the 100th Olimpiada in 1996?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">18th February 2004, 14:01</div></div><div class="posttext">Fabiochelly is correct.<br />
<br />
Every year divisible by 4 is a leap year.<br />
<br />
However, every year divisible by 100 is not a leap year.<br />
However, every year divisible by 400 is a leap year after all.<br />
<br />
So, 1700, 1800, 1900, 2100, and 2200 are not leap years. But 1600, 2000, and 2400 are leap years.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fabiochelly</div><div class="date">18th February 2004, 14:02</div></div><div class="posttext">see http://www.galactic-guide.com/articles/6R87.html<br />
<br />
The explanation here:<br />
http://www.multicians.org/jhs-clock.html<br />
<br />
or here:<br />
http://www.timeanddate.com/date/leapyear.html<br />
<br />
In fact:<br />
1. Every year divisible by 4 is a leap year.<br />
2. But every year divisible by 100 is NOT a leap year<br />
3. Unless the year is also divisible by 400, then it is still a leap year.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">18th February 2004, 14:27</div></div><div class="posttext">Bah, I have to fix my function anyways...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>