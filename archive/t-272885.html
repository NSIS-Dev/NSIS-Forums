<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallOption - custom page with skin selection, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallOption - custom page with skin selection NSIS Discussion" />
	
	<title> InstallOption - custom page with skin selection [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallOption - custom page with skin selection</div>
<hr />
<div class="pda"><a href="t-272885.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272885">InstallOption - custom page with skin selection</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">15th June 2007, 20:57</div></div><div class="posttext">Hello<br />
This is my problem. I want to do something like in Winamp installer - Interface and Skin Selection (on custom page we got 3 radiobuttons (modern, classic and Other) - the Other radiobutton is related to droplist)).<br />
The Modern radiobutton is checked by default.<br />
<br />
1. How to load to droplist all skins that are located in Winamp skin directory? I use function:<br />
 <br />
Function GetSkins<br />
  ;Exch $5<br />
  FindFirst $2 $1 &quot;$INSTDIR\\Skins\\*.*&quot;<br />
<br />
  StrCpy $9 &quot;&quot;<br />
  StrCmp $2 &quot;&quot; error<br />
  again:<br />
  StrCmp $1 &quot;&quot; done<br />
  StrCmp $9 &quot;&quot; 0 append<br />
  StrCpy $9 $1<br />
  Goto readnext<br />
  append:<br />
  StrCpy $9 &quot;$9|$1&quot;<br />
  readnext:<br />
  FindNext $2 $1<br />
  Goto again<br />
  done:<br />
  FindClose $2<br />
  ; now write to the ini file<br />
  WriteINIStr &quot;$PLUGINSDIR\\skorki.ini&quot; &quot;Field 7&quot; &quot;ListItems&quot; $9<br />
<br />
  DetailPrint $9<br />
  goto finished<br />
  error:<br />
  ; hmmm<br />
  finished:<br />
FunctionEnd<br />
<br />
<br />
This function works good, but this displayed all files and folders - I need to display only *.wsz, *.wal and folders, not for example something.txt.<br />
The second issue is that this function returns something like this:<br />
ListItems=.|..|Modern Skin|Classic Skin|<br />
How to remove this .|.. ?<br />
<br />
2 problem<br />
How to do, that when I click Classic radiobutton the state of it will be saved to my ini file (I don't know why, but it doesn't work - it is saved but just after clicking Next button and close the page - I want to change its state immediately after click on it).<br />
<br />
Or when I click Other radiobutton the state of the droplist will be saved...<br />
(Later, I can use this state saved in ini file to write suitable skin on disk.)<br />
<br />
I hope you know what I mean. <br />
Thanks for any help.<br />
-Pepe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th June 2007, 23:49</div></div><div class="posttext">Probably IOex could do that,<br />
<br />
http://nsis.sourceforge.net/InstallOption****plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">16th June 2007, 00:22</div></div><div class="posttext">Originally posted by Red Wine <br />
Probably IOex could do that,<br />
<br />
http://nsis.sourceforge.net/InstallOption****plug-in  <br />
<br />
Hmm, It is not I am thinking about... thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th June 2007, 12:11</div></div><div class="posttext">Function GetFiles<br />
Exch $R0<br />
Push $R1<br />
Push $R2<br />
<br />
  ClearErrors<br />
  FindFirst $R1 $R2 $R0<br />
  StrCpy $R0 &quot;&quot;<br />
  IfErrors done<br />
<br />
    StrCpy $R0 $R0|$R2<br />
<br />
    ClearErrors<br />
    FindNext $R1 $R2<br />
    IfErrors 0 -3<br />
<br />
    StrCpy $R0 $R0 &quot;&quot; 1<br />
<br />
  done:<br />
  FindClose $R1<br />
Pop $R2<br />
Pop $R1<br />
Exch $R0<br />
FunctionEnd<br />
<br />
Function GetFolders<br />
Exch $R0<br />
Push $R1<br />
Push $R2<br />
Push $R3<br />
<br />
  StrCpy $R3 $R0<br />
  ClearErrors<br />
  FindFirst $R1 $R2 $R3\*.*<br />
  StrCpy $R0 &quot;&quot;<br />
  IfErrors done<br />
<br />
    StrCmp $R2 . next<br />
    StrCmp $R2 .. next<br />
    IfFileExists $R3\$R2\*.* 0 next<br />
    StrCpy $R0 $R0|$R2<br />
<br />
    next:<br />
    ClearErrors<br />
    FindNext $R1 $R2<br />
    IfErrors 0 -6<br />
<br />
    StrCpy $R0 $R0 &quot;&quot; 1<br />
<br />
  done:<br />
  FindClose $R1<br />
Pop $R3<br />
Pop $R2<br />
Pop $R1<br />
Exch $R0<br />
FunctionEnd<br />
<br />
...<br />
<br />
Push $INSTDIR\*.wsz<br />
Call GetFiles<br />
Pop $R1<br />
<br />
Push $INSTDIR\*.wal<br />
Call GetFiles<br />
Pop $R0<br />
StrCpy $R1 $R1|$R0<br />
<br />
Push $INSTDIR<br />
Call GetFolders<br />
Pop $R0<br />
StrCpy $R1 $R1|$R0<br />
<br />
<br />
States are only saved when the user clicks next. You should read the values in the page leave function.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">16th June 2007, 14:11</div></div><div class="posttext">Stu, thanks.<br />
It works very well, as I want.<br />
<br />
A little question, if you don't mind ;)<br />
<br />
As I wrote, I got three radiobuttons on page. One of this radiobutton must be connected with dropdown list. So, how to activate dropdown list after clicking on radiobutton and display one of the founded folder (by default the dropdown list is disabled (State=DISABLED)).<br />
I want to do it just like in Winamp installer (Interface and Skin Selection).<br />
<br />
Regards!<br />
-PaweÅ‚</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th June 2007, 14:21</div></div><div class="posttext">Use the NOTIFY flag on the radio buttons. It will cause the leave function to be called, where you must check Settings&gt;State for the field number in question (call Abort to go back to the page after manipulating the controls).<br />
See the testnotify.nsi InstallOptions example.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">niwrad777</div><div class="date">22nd June 2007, 03:25</div></div><div class="posttext">Hello<br />
This is a code example similar the script Winamp ES (incomplete).<br />
<br />
Download Code (http://www.gigasize.com/get.php/-1100067465/winampexample_nsi.zip)<br />
<br />
http://www.gigasize.com/get.php/-1100067465/winampexample_nsi.zip<br />
<br />
Niwradâ„¢</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">22nd June 2007, 19:39</div></div><div class="posttext">Thank You Niwrad<br />
I did it (thanks Afrow UK), but Your code can be usefull.<br />
Best regards<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">niwrad777</div><div class="date">29th June 2007, 00:53</div></div><div class="posttext">:winamp: Forgive I did not find out here they have the file.<br />
<br />
-----------------------------------------------------------<br />
Pawel I wait for an answer on the union of the patches in a single graphical interface</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">30th June 2007, 00:15</div></div><div class="posttext">Originally posted by niwrad777 <br />
<br />
-----------------------------------------------------------<br />
Pawel I wait for an answer on the union of the patches in a single graphical interface  <br />
<br />
What do You mean? Did You write to me with some questions?<br />
-Pawel</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>