<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" If &quot;X&quot; string is already in Registry then abort, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  If &quot;X&quot; string is already in Registry then abort NSIS Discussion" />
	
	<title> If &quot;X&quot; string is already in Registry then abort [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  If &quot;X&quot; string is already in Registry then abort</div>
<hr />
<div class="pda"><a href="t-83894.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=83894">If &quot;X&quot; string is already in Registry then abort</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mixo</div><div class="date">7th April 2002, 03:29</div></div><div class="posttext">Yep - another pesky newbie question<br />
<br />
Can anyone please provide full script necessary to check if a pre-written Registry entry exists [ from Freeware Trial installtion ], which will then abort the installation, and offer user to purchase Full Version of my program. [ I wish to allow users to only install my Freeware Trial program Once ]<br />
<br />
I believe this message box will work OK, but I don't know how to script to check if my pre-written Freeware RegStr already exists.<br />
++++++++++++++++<br />
<br />
Function .onInit<br />
<br />
  ???<br />
 <br />
MessageBox MB_YESNO|MB_ICONQUESTION \<br />
             &quot;Our records show you have already downloaded and tried our Freeware Version once. Would you like to purchase Full version now ?&quot; \<br />
             IDNO NoReadme<br />
  ExecShell open 'http://myUrl/software/purchase.htm' <br />
  NoReadme:<br />
  hideWindow <br />
  abort<br />
FunctionEnd<br />
<br />
+++++++++++++++++<br />
<br />
Many thanks [ to NSIS too ]<br />
Mixo</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">7th April 2002, 05:29</div></div><div class="posttext">You just take one of the standard registry read functions and then check for the value to read it out from the registry.  Like this:<br />
<br />
ReadRegStr $R0 HKEY_LOCAL_MACHINE &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\${PROGNAME}&quot; &quot;UninstallString&quot;<br />
<br />
If PROGNAME is !define'd as the name you write to the registry,  that has the path to the uninstaller.  That's basically right out of one of the sample scripts.  If you write out a DWORD or Binary value,  just change the keyword to the appropriate version.<br />
<br />
However,  is this really going to work?  I don't think it would take too long to figure out that's all you have to do to continue using the Trial version,  even if you are really good at obfuscating the key.  You really need to apply a combination of registry key(s) and some installed file(s) to more effectively prevent people from continuing to use your trial version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mixo</div><div class="date">8th April 2002, 14:24</div></div><div class="posttext">[QUOTE]Originally posted by Pomflain <br />
<br />
Thanks for your prompt reply.<br />
<br />
I agree using that using a well known {PROGNAME} &quot;uninstallString&quot;<br />
would be fairly easy for a more advanced user to locate and delete.<br />
<br />
Perhaps utilizing SetDateSave may be a viable alternative<br />
to check on a prior installation of Trial Version, but being a nsi Newbie, have no idea how to code such a check.<br />
<br />
Thanks again for your time and suggestion<br />
Mixo<br />
Down Under</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">8th April 2002, 23:00</div></div><div class="posttext">Originally posted by mixo <br />
[QUOTE]Originally posted by Pomflain <br />
<br />
Thanks for your prompt reply.<br />
<br />
I agree using that using a well known {PROGNAME} &quot;uninstallString&quot;<br />
would be fairly easy for a more advanced user to locate and delete.<br />
<br />
<br />
No,  I didn't mean to use that,  just meant as an example of how to read from the registry.<br />
<br />
Also,  I think you are misunderstanding how SetDateSave works.  SetDateSave preserves the date/timestamp on the compiling system when it is turned on.  Otherwise (assuming here,  I always leave it set to on) it would set the date to the time the installer was run and extracted the files on the installing system.<br />
<br />
Unless you mean to check the date on the files to see if it matches what you are expecting with SetDateSave on,  but even then all they would have to do is compress the files and not preserve the date and then extract them again.  I think you'll need to do some kind of combination of the two.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>