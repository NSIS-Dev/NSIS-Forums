<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Customize installation page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Customize installation page NSIS Discussion" />
	
	<title> Customize installation page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Customize installation page</div>
<hr />
<div class="pda"><a href="t-257826.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257826">Customize installation page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">hbatista</div><div class="date">18th October 2006, 18:21</div></div><div class="posttext">Hi! I'm trying to display an image and label above the progress bar.<br />
I've added 2 controls to modern.exe dialog 106 with resource hacker.<br />
The resources look like this (the last 2 are what I've added):<br />
106 DIALOGEX 0, 0, 300, 140<br />
STYLE DS_FIXEDSYS | DS_CONTROL | WS_CHILD<br />
CAPTION &quot;&quot;<br />
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US<br />
FONT 8, &quot;MS Shell Dlg&quot;<br />
{<br />
   CONTROL &quot;&quot;, 1027, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE, 0, 79, 60, 14 <br />
   CONTROL &quot;&quot;, 1004, &quot;msctls_progress32&quot;, WS_CHILD | WS_VISIBLE | WS_BORDER, 0, 63, 300, 11 <br />
   CONTROL &quot;&quot;, 1006, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 0, 52, 300, 10 <br />
   CONTROL &quot;&quot;, 1016, &quot;SysListView32&quot;, LVS_REPORT | LVS_SINGLESEL | LVS_NOCOLUMNHEADER | WS_CHILD | WS_BORDER | WS_TABSTOP, 0, 79, 300, 56 <br />
   CONTROL &quot;&quot;, 1090, STATIC, SS_BITMAP | WS_CHILD | WS_VISIBLE | WS_GROUP, 2, 2, 51, 44 <br />
   CONTROL &quot;&quot;, 1091, STATIC, SS_LEFT | WS_CHILD | WS_VISIBLE | WS_GROUP, 58, 3, 239, 44 <br />
}<br />
<br />
<br />
Then in a Section I'm using<br />
SetBrandingImage /IMGID=1090 $PLUGINSDIR\myimage.bmp <br />
to change it, but it doesn't work! No image is displayed...<br />
The image was decompressed and is there because I can see it in custom pages.<br />
<br />
Any idea what's wrong? Also, how can I change the text of the label I created?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goldy1064</div><div class="date">18th October 2006, 19:42</div></div><div class="posttext">Have you tried quoting the filename?<br />
<br />
SetBrandingImage /IMGID=1090 &quot;$PLUGINSDIR\myimage.bmp&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">18th October 2006, 20:23</div></div><div class="posttext">Not sure, but you can only add images with SetBrandingImage to the dialog 105.<br />
<br />
And to change the text of the label...<br />
!include &quot;WinMessages.nsh&quot;<br />
<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $1 $0 1091<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:Your text&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hbatista</div><div class="date">18th October 2006, 22:26</div></div><div class="posttext">I hadn't understood that restriction about SetBrandingImage!<br />
That bit of code to change the label text works fine, thanks!<br />
<br />
To change the bitmap I went to some of those system calls too:<br />
<br />
<br />
function SetMainImage<br />
 Pop $R2<br />
 FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
 <br />
 System::Call '${sysLoadImage} (0, &quot;$R2&quot;, ${IMAGE_BITMAP}, 0, 0, ${LR_CREATEDIBSECTION}|${LR_LOADFROMFILE}) .r6'<br />
<br />
 GetDlgItem $R3 $R0 1090<br />
 SendMessage $R3 ${STM_SETIMAGE} ${IMAGE_BITMAP} $6<br />
functionEnd<br />
<br />
<br />
<br />
 push &quot;$PLUGINSDIR\mypic.bmp&quot;<br />
 call SetMainImage<br />
<br />
<br />
(this was based on what's in http://nsis.sourceforge.net/ModernUI_Mod_to_Display_Images_while_installing_files<br />
 and in some other forum posts)<br />
<br />
Although it's working ok now, if someone has a more elegant way of doing it please post...<br />
<br />
Thanks a lot!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>