<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" RMDir not working as expected, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  RMDir not working as expected NSIS Discussion" />
	
	<title> RMDir not working as expected [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  RMDir not working as expected</div>
<hr />
<div class="pda"><a href="t-111861.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=111861">RMDir not working as expected</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">28th October 2002, 20:47</div></div><div class="posttext">I did some searches to try to find an answer to a problem that I was having, but no luck.  <br />
<br />
I want to conditionally delete an installtion directory if and only if it's empty.  IfFileExists does not work well for me, because .. and . are returned and the directories are not deleted, although empty.<br />
<br />
I saw a tip saying to just use RMDir, and it will delete if the directory is empty.  However, on my version (1.98) it is deleting everything in SUBDIRECTORIES and the directory itself.<br />
<br />
How do I get out of this mess?  Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th October 2002, 22:27</div></div><div class="posttext">Are you sure you are using RMDir and not RMDir /r ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">29th October 2002, 13:45</div></div><div class="posttext">Yes, that's what threw me.  I have some occurences of other included files with RMDirs.  I'm going to double check that there are no /r switches, btu I don't think there are.  <br />
<br />
If I'm the only one that's noticed this, it must be user error.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">29th October 2002, 18:53</div></div><div class="posttext">Yup.  My Bad.  An include file was doing it.  I will be very careful with /r in the future.  <br />
<br />
As a side note, it would be an excellent idea to document the behavior of the RMDir command (/ifempty is the default).  Besides it was not immediately apparent that the &quot;recursive&quot; terminology meant that unempty folders (especially root) would be deleted.  <br />
<br />
Here's the Windows RMDir help, which states this behavior.  You command is analogous, but the docs don't mention the file deletions.<br />
<br />
RMDIR [/S] [/Q] [drive:]path<br />
RD [/S] [/Q] [drive:]path<br />
<br />
    /S      Removes all directories and files in the specified directory<br />
            in addition to the directory itself.  Used to remove a directory<br />
            tree.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">29th October 2002, 19:52</div></div><div class="posttext">Done :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">29th October 2002, 21:12</div></div><div class="posttext">Thanks for all your help! :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>