<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Very Basic Question About FileRead, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Very Basic Question About FileRead NSIS Discussion" />
	
	<title> Very Basic Question About FileRead [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Very Basic Question About FileRead</div>
<hr />
<div class="pda"><a href="t-321171.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321171">Very Basic Question About FileRead</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mariocatch</div><div class="date">26th July 2010, 18:51</div></div><div class="posttext">Hey All,<br />
<br />
Very basic issue I'm running into. FileRead is not getting the contents of a file for me... or I'm not understanding why at least.<br />
<br />
I'm trying the following:<br />
<br />
FileOpen $MySettingsFile &quot;DESKTOP\MyFile.txt&quot;<br />
FileRead $MySettingsFile $MySettings<br />
DetailPrint $MySettings<br />
FileClose $MySettingsFile<br />
<br />
The above does not display the contents of my file to the Detail window. I've tried everything I could think of and followed some tutorials.<br />
<br />
Any advice would be welcome<br />
-mariocatch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">26th July 2010, 19:14</div></div><div class="posttext">first: is that the exact code?  if so - are you missing the $ in $DESKTOP?<br />
second: that should only read the first line in the file, not the entire file.  if you want to read the entire file, you have to use FileRead/DetailPrint until an error occurs.. then close the file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mariocatch</div><div class="date">26th July 2010, 19:25</div></div><div class="posttext">Hi Animaether,<br />
<br />
Thanks for the reply.<br />
<br />
Yes you're right, $Desktop\FileName is what it should be.<br />
<br />
Also, I'm am a .NET Developer, so the concept of loops/etc are trivial, however the syntax required to do so in NSIS is not clicking with me. Mind showing me a quick example of a loop that reads in a file and prints it out?<br />
<br />
The end goal I'm trying to do here is to reflect a settings file<br />
ie:<br />
Setting1=SomeValue<br />
Setting2=SomeValue<br />
Setting3=SomeValue<br />
<br />
And display that in the Installer. Then When they leave the page, I want to save those settings back out to the file. I'll probably just end up displaying the contents to the installer page, then, writing over the file afterwards with the saved settings.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">26th July 2010, 19:40</div></div><div class="posttext">Not sure what exactly you have in mind, but as for looping - LogicLib is your friend.<br />
<br />
Something like this:<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
outfile &quot;$%temp%\test.exe&quot;<br />
<br />
var MySettingsFile<br />
var MySettings<br />
<br />
ShowInstDetails show<br />
<br />
Section<br />
  ClearErrors<br />
  FileOpen $MySettingsFile &quot;$WINDIR\win.ini&quot; &quot;r&quot;<br />
  ${If} ${Errors}<br />
    DetailPrint &quot;Could not open file '$WINDIR\win.ini'&quot;<br />
  ${Else}<br />
    ${Do}<br />
      FileRead $MySettingsFile $MySettings<br />
      ${If} ${Errors}<br />
        ${ExitDo}<br />
      ${Else}<br />
        DetailPrint &quot;$MySettings&quot;<br />
      ${EndIf}<br />
    ${Loop}<br />
  ${EndIf}<br />
SectionEnd<br />
<br />
<br />
Note that LogicLib can have conditionals on the loop as well - so it could be made to loop until an error occurs.  However, as part of the loop is printing the message, I've decided to inline that logic instead - so that no DetailPrint occurs if the FileRead produces an error.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>