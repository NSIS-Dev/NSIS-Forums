<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Request : Tutorial on InstallOptions 2 using HM NIS Edit, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Request : Tutorial on InstallOptions 2 using HM NIS Edit NSIS Discussion" />
	
	<title> Request : Tutorial on InstallOptions 2 using HM NIS Edit [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Request : Tutorial on InstallOptions 2 using HM NIS Edit</div>
<hr />
<div class="pda"><a href="t-179216.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=179216">Request : Tutorial on InstallOptions 2 using HM NIS Edit</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">7th May 2004, 06:42</div></div><div class="posttext">As most if not all of you know that HM NIS Edit comes with an InstallOptions dialog designer, will if some on could make a tutorial on how to get this to work that would be cool.<br />
<br />
I am going for something like this : http://www.gnyso-strike.com/host/dygear/Images/NSIS/NSISIO2_1.jpg<br />
<br />
http://www.gnyso-strike.com/host/dygear/Images/NSIS/NSISIO2_2.jpg<br />
<br />
and would output this :<br />
<br />
amx_admin &quot;&quot; &quot;&quot; &quot;abcdefghijklmnopqrstu&quot; &quot;ce&quot;<br />
<br />
How the hell did he do all of this, thats what i need to know, and i am hoping for a tutorial on the subject.<br />
Its not installing anything, its just adding a line to the file, Could some one show me code on all of this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">7th May 2004, 14:08</div></div><div class="posttext">Talk to the developer. Although, as you say is only the designer...<br />
you'll have to use the hand-code to make it work, as you can see the IO DOCs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ranametal</div><div class="date">7th May 2004, 17:50</div></div><div class="posttext">You can download a tutorial in MS-Word format here (http://forums.winamp.com/attachment.php?s=&amp;postid=1103601) from this forum thread  (http://forums.winamp.com/showthread.php?s=&amp;threadid=150727)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">7th May 2004, 21:49</div></div><div class="posttext">1st thanks for replying all of you.<br />
<br />
2nd ranametal, that helpe soo much meny thanks.<br />
<br />
3rd Lobo Lunar, i know the guy quite well, but he is WAY more advaned then me, so when we talk its like &quot; ok do this Pop $R1 &quot;.<br />
And i am like &quot; WTF? &quot;.<br />
So he helps to a certain extent but hes just to good for me now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">7th May 2004, 23:02</div></div><div class="posttext">Ok, followed that guide and i am stuck!<br />
<br />
this is my code unedited.<br />
; Script generated by the HM NIS Edit Script Wizard.<br />
<br />
; HM NIS Edit Wizard helper defines<br />
!define PRODUCT_NAME &quot;Admin&quot;<br />
!define PRODUCT_VERSION &quot;.0a&quot;<br />
!define PRODUCT_PUBLISHER &quot;AmxModX, Dygear.&quot;<br />
!define PRODUCT_WEB_SITE &quot;http://www.amxmodx.org&quot;<br />
!define PRODUCT_STARTMENU_REGVAL &quot;NSIS:StartMenuDir&quot;<br />
<br />
SetCompressor lzma<br />
<br />
; MUI 1.67 compatible ------<br />
!include &quot;MUI.nsh&quot;<br />
<br />
; MUI Settings<br />
!define MUI_ABORTWARNING<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-install-colorful.ico&quot;<br />
<br />
; Language Selection Dialog Settings<br />
!define MUI_LANGDLL_REGISTRY_ROOT &quot;${PRODUCT_UNINST_ROOT_KEY}&quot;<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;${PRODUCT_UNINST_KEY}&quot;<br />
!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;NSIS:Language&quot;<br />
<br />
; Welcome page<br />
!insertmacro MUI_PAGE_WELCOME<br />
; License page<br />
!insertmacro MUI_PAGE_LICENSE &quot;..\License\gpl.txt&quot;<br />
; Directory page<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
; Start menu page<br />
var ICONS_GROUP<br />
!define MUI_STARTMENUPAGE_NODISABLE<br />
!define MUI_STARTMENUPAGE_DEFAULTFOLDER &quot;Admin&quot;<br />
!define MUI_STARTMENUPAGE_REGISTRY_ROOT &quot;${PRODUCT_UNINST_ROOT_KEY}&quot;<br />
!define MUI_STARTMENUPAGE_REGISTRY_KEY &quot;${PRODUCT_UNINST_KEY}&quot;<br />
!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME &quot;${PRODUCT_STARTMENU_REGVAL}&quot;<br />
!insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />
; Instfiles page<br />
!insertmacro MUI_PAGE_INSTFILES<br />
; Finish page<br />
!define MUI_FINISHPAGE_SHOWREADME &quot;$INSTDIR\gpl.txt&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
; Language files<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;French&quot;<br />
!insertmacro MUI_LANGUAGE &quot;German&quot;<br />
<br />
; Reserve files<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
; MUI end ------<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;Admin.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\AmxModX Tools&quot;<br />
ShowInstDetails show<br />
<br />
Function .onInit<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
FunctionEnd<br />
<br />
Section &quot;MainSection&quot; SEC01<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  SetOverwrite ifnewer<br />
  File &quot;..\License\gpl.txt&quot;<br />
  CreateDirectory &quot;$SMPROGRAMS\$ICONS_GROUP&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\$ICONS_GROUP\gpl.lnk&quot; &quot;$INSTDIR\gpl.txt&quot;<br />
SectionEnd<br />
<br />
Section -AdditionalIcons<br />
  WriteIniStr &quot;$INSTDIR\${PRODUCT_NAME}.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;${PRODUCT_WEB_SITE}&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\$ICONS_GROUP\Website.lnk&quot; &quot;$INSTDIR\${PRODUCT_NAME}.url&quot;<br />
SectionEnd<br />
<br />
Section -Post<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;${PRODUCT_STARTMENU_REGVAL}&quot; &quot;$ICONS_GROUP&quot;<br />
SectionEnd<br />
<br />
It says to do this ...<br />
<br />
Now you should note the Field numbers of the data entry controls. We are interested in <br />
<br />
Username (Text – Field 2)<br />
Password (Password – Field 4)<br />
<br />
[Field 2]<br />
Type=Text<br />
Left=150<br />
Right=300<br />
Top=20<br />
Bottom=35<br />
<br />
[Field 4]<br />
Type=Password<br />
Left=150<br />
Right=300<br />
Top=40<br />
Bottom=56<br />
<br />
<br />
<br />
This example is using the Modern User Interface.<br />
<br />
In you .onInit callback function, specify the INI filename and its alias. This is because I keep my INI files, graphics, etc in a sub-directory.<br />
<br />
      !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;assets\UserPass.ini&quot; &quot;UserPass&quot;<br />
<br />
<br />
In your NSI script where you set up the page order:<br />
<br />
   LangString USERPASS_TITLE ${LANG_ENGLISH} &quot;Enter your Username and Password.&quot;<br />
   LangString USERPASS_SUBTITLE ${LANG_ENGLISH} &quot; &quot;<br />
   Page custom UsernamePasswordPage<br />
<br />
<br />
The custom page function:<br />
<br />
# CUSTOM PAGE.<br />
# =========================================================================<br />
# Get the Username and Password.<br />
Function UsernamePasswordPage<br />
<br />
   !insertmacro MUI_HEADER_TEXT &quot;$(USERPASS_TITLE)&quot; &quot;$(USERPASS_SUBTITLE)&quot;<br />
   <br />
   # Display the page.<br />
   !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;UserPass&quot;<br />
<br />
   # Get the user entered values.<br />
   !insertmacro MUI_INSTALLOPTIONS_READ $Username &quot;UserPass&quot; &quot;Field 2&quot; &quot;State&quot;<br />
   !insertmacro MUI_INSTALLOPTIONS_READ $Password &quot;UserPass&quot; &quot;Field 4&quot; &quot;State&quot;<br />
<br />
FunctionEnd<br />
<br />
<br />
<br />
The VARs $Username and $Password will contain the user entered values.<br />
<br />
Thats all well and good, but how might i get this to work ?<br />
<br />
*Note* Dygear = UberNoobie at NSIS<br />
as you can see i did not even make the NSIS file myself. :confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">7th May 2004, 23:49</div></div><div class="posttext">Try this:<br />
<br />
/* Installer Defines */<br />
<br />
!define PRODUCT_NAME &quot;Admin&quot;<br />
!define PRODUCT_VERSION &quot;.0a&quot;<br />
!define PRODUCT_PUBLISHER &quot;AmxModX, Dygear.&quot;<br />
!define PRODUCT_WEB_SITE &quot;http://www.amxmodx.org&quot;<br />
!define PRODUCT_STARTMENU_REGVAL &quot;NSIS:StartMenuDir&quot;<br />
<br />
/* Default Installer Configuration */<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;Admin.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\\AmxModX Tools&quot;<br />
ShowInstDetails show<br />
<br />
SetCompressor lzma<br />
<br />
/* Include Modern UI 1.70 */<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
  /* MUI Settings */<br />
  !define MUI_ABORTWARNING<br />
  !define MUI_ICON &quot;${NSISDIR}\\Contrib\\Graphics\\Icons\\modern-install-colorful.ico&quot;<br />
<br />
  /* Language Selection Dialog Settings */<br />
  !define MUI_LANGDLL_REGISTRY_ROOT &quot;${PRODUCT_UNINST_ROOT_KEY}&quot;<br />
  !define MUI_LANGDLL_REGISTRY_KEY &quot;${PRODUCT_UNINST_KEY}&quot;<br />
  !define MUI_LANGDLL_REGISTRY_VALUENAME &quot;NSIS:Language&quot;<br />
<br />
  /* Page Configurations */<br />
<br />
    Page custom UsernamePasswordPage<br />
    !insertmacro MUI_PAGE_WELCOME<br />
    !insertmacro MUI_PAGE_LICENSE &quot;..\\License\\gpl.txt&quot;<br />
    !insertmacro MUI_PAGE_DIRECTORY<br />
    <br />
    var ICONS_GROUP<br />
      !define MUI_STARTMENUPAGE_NODISABLE<br />
      !define MUI_STARTMENUPAGE_DEFAULTFOLDER &quot;Admin&quot;<br />
      !define MUI_STARTMENUPAGE_REGISTRY_ROOT &quot;${PRODUCT_UNINST_ROOT_KEY}&quot;<br />
      !define MUI_STARTMENUPAGE_REGISTRY_KEY &quot;${PRODUCT_UNINST_KEY}&quot;<br />
      !define MUI_STARTMENUPAGE_REGISTRY_VALUENAME &quot;${PRODUCT_STARTMENU_REGVAL}&quot;<br />
    !insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />
    <br />
    !insertmacro MUI_PAGE_INSTFILES<br />
<br />
      !define MUI_FINISHPAGE_SHOWREADME &quot;$INSTDIR\\gpl.txt&quot;<br />
    !insertmacro MUI_PAGE_FINISH<br />
<br />
  /* Language files */<br />
<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
  !insertmacro MUI_LANGUAGE &quot;French&quot;<br />
  !insertmacro MUI_LANGUAGE &quot;German&quot;<br />
<br />
  /* Reserve files */<br />
<br />
  !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
  ReserveFile &quot;..\\Assets\\UserPass.ini&quot;<br />
<br />
  /* Language strings */<br />
<br />
    /* Username and Password page */<br />
  <br />
    LangString USERPASS_TITLE ${LANG_ENGLISH} &quot;Enter your Username and Password.&quot;<br />
    LangString USERPASS_SUBTITLE ${LANG_ENGLISH} &quot; &quot;<br />
<br />
/* Special Functions */<br />
<br />
  /* .onInit */<br />
<br />
  Function .onInit<br />
    !insertmacro MUI_LANGDLL_DISPLAY<br />
    !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;assets\\UserPass.ini&quot; &quot;UserPass.ini&quot;<br />
  FunctionEnd<br />
<br />
/* Custom Page */<br />
<br />
  /* Username and Password page */<br />
  Function UsernamePasswordPage<br />
<br />
    !insertmacro MUI_HEADER_TEXT &quot;$(USERPASS_TITLE)&quot; &quot;$(USERPASS_SUBTITLE)&quot;<br />
<br />
    # Display the page.<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;UserPass.ini&quot;<br />
<br />
    # Get the user entered values.<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $Username &quot;UserPass&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $Password &quot;UserPass&quot; &quot;Field 4&quot; &quot;State&quot;<br />
<br />
  FunctionEnd<br />
<br />
/* Sections */<br />
<br />
  /* MainSection */<br />
<br />
  Section &quot;MainSection&quot; SEC01<br />
    SetOutPath &quot;$INSTDIR&quot;<br />
    SetOverwrite ifnewer<br />
    File &quot;..\\License\\gpl.txt&quot;<br />
    CreateDirectory &quot;$SMPROGRAMS\\$ICONS_GROUP&quot;<br />
    CreateShortCut &quot;$SMPROGRAMS\\$ICONS_GROUP\\gpl.lnk&quot; &quot;$INSTDIR\\gpl.txt&quot;<br />
  SectionEnd<br />
<br />
  /* Hidden Sections */<br />
<br />
    /* AdditionalIcons */<br />
<br />
    Section -AdditionalIcons<br />
      WriteIniStr &quot;$INSTDIR\\${PRODUCT_NAME}.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;${PRODUCT_WEB_SITE}&quot;<br />
      CreateShortCut &quot;$SMPROGRAMS\\$ICONS_GROUP\\Website.lnk&quot; &quot;$INSTDIR\\${PRODUCT_NAME}.url&quot;<br />
    SectionEnd<br />
<br />
    /* Post */<br />
<br />
    Section -Post<br />
      WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;${PRODUCT_STARTMENU_REGVAL}&quot; &quot;$ICONS_GROUP&quot;<br />
    SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">8th May 2004, 06:18</div></div><div class="posttext">Did not work, look at this, see if you can compile it.<br />
<br />
Do i need some extra dlls?<br />
All i have is the stock NSIS 2.0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">9th May 2004, 03:08</div></div><div class="posttext">Now I tested it and changed it to work. You only need to add the LangStrings for French and German and to add a funcionality of the User and Password page.<br />
<br />
You have to put the script in a subfolder of a folder containing the Assets and License subfolders.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">17th June 2004, 06:27</div></div><div class="posttext">Thanks</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>