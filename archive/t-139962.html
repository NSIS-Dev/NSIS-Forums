<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Inserting a page into the uninstaller, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Inserting a page into the uninstaller NSIS Discussion" />
	
	<title> Inserting a page into the uninstaller [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Inserting a page into the uninstaller</div>
<hr />
<div class="pda"><a href="t-139962.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=139962">Inserting a page into the uninstaller</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">noescom</div><div class="date">24th June 2003, 14:10</div></div><div class="posttext">I'm trying to add an option page to the NSIS uninstaller. I'm able to display the page, but i somehow can't show any controls on it. What i have (the test.ini resides in the same directory as the UnInstall.exe):<br />
<br />
;--------------------------------<br />
;Modern UI Configuration<br />
<br />
  !define MUI_UNCUSTOMPAGECOMMANDS<br />
  !define MUI_UNINSTALLER<br />
  !define MUI_UNCONFIRMPAGE<br />
<br />
;--------------------------------<br />
;Uinstaller Custom Pages<br />
<br />
  !insertmacro MUI_UNPAGECOMMAND_CONFIRM<br />
  UninstPage custom un.UnInstallOptions<br />
  !insertmacro MUI_UNPAGECOMMAND_INSTFILES<br />
<br />
;--------------------------------<br />
;Uninstaller Options Callback<br />
<br />
  Function un.UnInstallOptions<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;test.ini&quot;<br />
  FunctionEnd<br />
<br />
;--------------------------------<br />
;Uninstaller Section<br />
<br />
Section &quot;Uninstall&quot;<br />
  Delete &quot;$INSTDIR\Uninstall.exe&quot;<br />
<br />
  RMDir &quot;$INSTDIR&quot;<br />
SectionEnd<br />
<br />
Any clues what i'm doing wrong?<br />
<br />
Floris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th June 2003, 14:22</div></div><div class="posttext">1) Can you attach the INI file?<br />
<br />
1) To make custom pages a little easier, upgrade to Modern UI 1.65 (latest development version) and use the new page macro's: http://forums.winamp.com/showthread.php?s=&amp;threadid=136615</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noescom</div><div class="date">24th June 2003, 14:42</div></div><div class="posttext">Here's the test.ini (renamed to .txt to allow uploading). I'll checkout the new MUI version. Thnx.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th June 2003, 15:27</div></div><div class="posttext">You forgot to extract the INI file in un.onInit (using the MUI_INSTALLOPTIONS_EXTRACT macro).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noescom</div><div class="date">24th June 2003, 15:36</div></div><div class="posttext">Thanks. The following did the trick.<br />
<br />
  Function un.onInit<br />
    !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;test.ini&quot;<br />
  FunctionEnd  <br />
<br />
Because EXTRACT is in the macro name, i assumed the macro extracts (e.g. unzips) the test.ini file from the uninstaller. So this is not the case. Instead it seems to convert the contents of test.ini into some internal data structure. And you don't need to distribute test.ini as i assumed.<br />
<br />
Thanks for the help and keep up the good work!<br />
<br />
Floris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th June 2003, 16:24</div></div><div class="posttext">It does extract the INI file to the plug-ins directory, a temporary directory where the INI files and plug-ins are stored.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>