<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI Example, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI Example NSIS Discussion" />
	
	<title> MUI Example [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI Example</div>
<hr />
<div class="pda"><a href="t-260955.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260955">MUI Example</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">3rd December 2006, 02:02</div></div><div class="posttext">I have never built an interface before. I want to build a screen to control an INI. The screen should have places where users can input the variable data like port numbers, IP addresses, and other preferences, and also have check marks for true/false data. It only needs to be this one window, everything else can be invisible. Is there a good stand-alone example of this anywhere?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">3rd December 2006, 04:01</div></div><div class="posttext">Hi torpark!<br />
<br />
There are a lot of examples. Have a look at NSIS Examples folder.<br />
<br />
Creating a dialog can be done with Eclipse [1] or HM NIS Edit [2].<br />
<br />
You can find out how to include and validate a dialog in the Modern UI Readme [3]. By the way, there's an excellent function to validate ip addresses. [4]<br />
<br />
[1] http://eclipsensis.sourceforge.net/<br />
[2] http://hmne.sourceforge.net/<br />
[3] http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html#customPages<br />
[4] http://nsis.sourceforge.net/Validate_IP_function<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">3rd December 2006, 04:19</div></div><div class="posttext">So I create the dialog with Eclipse, and validate and include it. What, uh, do you think I would do with an IP validator. or are you referring to the Torpark program I wrote?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">3rd December 2006, 04:22</div></div><div class="posttext">Erm, you wrote that you would like to ask an ip address from users. To be sure that the ip is correct, I'd validate the input.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">3rd December 2006, 06:21</div></div><div class="posttext">I am collecting the IP as a string. It would be great to have the &quot;.&quot; separators though. Okay, I wrote the UI, now I need to figure out how to install brains and functionality behind it, and get it to write the settings to a .ini file. INI File Attached.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">3rd December 2006, 06:51</div></div><div class="posttext">Hi torpark!<br />
<br />
I made a short sample script based on the Modern UI InstallOptions example.<br />
<br />
It shows how to validate the IP and makes sure, that the port number is in a certain range.<br />
<br />
You can easily extend the script to your needs. <br />
<br />
I'd suggest changing the taborder for the controls. Keyboard users jump with tab to the next control, which should therefore follow each other in a certain order.<br />
<br />
I usually create a define for every (used) control in the ini file. If you happen to change the order or insert a control you only have to change the defines and you don't need to change something in the code.<br />
<br />
Hope this helps...<br />
<br />
Have a nice day!<br />
<br />
Cheers<br />
<br />
Bruno<br />
<br />
edit: You'll find more information for the logiclib in the wiki<br />
http://nsis.sourceforge.net/LogicLib</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">3rd December 2006, 14:54</div></div><div class="posttext">that IP address validator doesn't work too well. It doesn't recognize when values are over 255. I'll keep playing with it to figure out how to push and pull data into those controls.<br />
<br />
edit Actually, my fault, I changed a field. It works great. Now how to push and pull data...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">3rd December 2006, 16:04</div></div><div class="posttext">Okay. I figured out how to pull the data, using mui_installoption_read. I imagine &quot;write&quot; works the same way. So now another question, How do I make some settings greyed out? For example, I want to add a check mark for &quot;requires proxy&quot;, so that in the case that requires proxy state = 1, all the fields in group &quot;proxy settings&quot; become active. Else, they are inactive and not required to be checked. Ideas or examples on that? latest updates attached.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">5th December 2006, 05:21</div></div><div class="posttext">duped in other thread.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">5th December 2006, 05:30</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=261025</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">5th December 2006, 05:37</div></div><div class="posttext">Bruno,<br />
<br />
That worked like a charm. Just one last question. For the &quot;Save&quot; button, where do I put the commands it will execute? Do I have to create a new page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">5th December 2006, 05:46</div></div><div class="posttext">Hi torpark!<br />
<br />
You're welcome! :-)<br />
<br />
Put the code instead of the line<br />
<br />
; TODO: save values to ini file/registry...<br />
<br />
<br />
This code is executed if there's no notify event.<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">5th December 2006, 06:07</div></div><div class="posttext">Awesome. I just put it at the end of the leavepage area. Thanks very much Bruno.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torpark</div><div class="date">5th December 2006, 16:32</div></div><div class="posttext">Bruno,<br />
<br />
I duplicated the changestate macro. However, I am having a pretty obvious problem.<br />
<br />
The natural state is for the control item to be unchecked. When it is checked, it is then supposed to change the state of the controlgroup 2. Instead, on the first check, it does nothing. On unchecking it, it THEN changes the state.<br />
<br />
If &quot;Disable Tor Management&quot; is checked, all the settings in the tor box should be greyed out.<br />
<br />
Why is it acting like this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">5th December 2006, 21:03</div></div><div class="posttext">Hi torpark!<br />
<br />
The current code just sets the state according to a control. Therefore we have to introduce some logic to change the state. Enabled -&gt; disabled, disabled -&gt; enabled.<br />
<br />
<br />
        ${Case} &quot;${UIDISABLETOR}&quot;<br />
                !insertmacro MUI_INSTALLOPTIONS_READ $tmpstate2 &quot;tcw.ini&quot; &quot;${UIDISABLETOR}&quot; &quot;State&quot;<br />
                ${If} $tmpstate2 == &quot;1&quot;<br />
                   StrCpy $tmpstate2 &quot;0&quot;<br />
                ${Else}<br />
                   StrCpy $tmpstate2 &quot;1&quot;<br />
                ${EndIf}<br />
                !insertmacro CHANGEGROUPSTATE2 $tmpstate2<br />
                Abort<br />
<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>