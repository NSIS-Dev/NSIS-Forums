<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Passing variable name to File, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Passing variable name to File NSIS Discussion" />
	
	<title> Passing variable name to File [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Passing variable name to File</div>
<hr />
<div class="pda"><a href="t-297696.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297696">Passing variable name to File</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tinytone</div><div class="date">22nd September 2008, 02:52</div></div><div class="posttext">I'm trying to pass a string to a function and have files added to the install package based on that string. For example,<br />
<br />
<br />
Push &quot;MyFileName.txt&quot;<br />
Call MyFunction<br />
<br />
<br />
Function MyFunction<br />
<br />
Exch $0  <br />
<br />
File $0   ; Add the file named &quot;MyFileName.txt&quot; to the install package<br />
...<br />
Do some other things<br />
...<br />
<br />
FunctionEnd<br />
<br />
<br />
The install build croaks on the &quot;File $0&quot; line saying that file $0 is not found. I'm assuming that File doesn't replace the $0 with the string that I passed through the stack.<br />
<br />
Is there any way to get File to work in this fashion? Or, do I have to hardcode all of the filenames for File?<br />
<br />
Thanks.<br />
-Tony</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd September 2008, 03:02</div></div><div class="posttext">um, functions are used at run time on the end users computer, how would you expect your file to get there?<br />
<br />
macros run at compile time...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tinytone</div><div class="date">22nd September 2008, 03:50</div></div><div class="posttext">Originally posted by Anders <br />
um, functions are used at run time on the end users computer, how would you expect your file to get there?<br />
<br />
macros run at compile time...  <br />
<br />
Ok, but the point still remains that the File command doesn't seem to allow variables to be passed.<br />
<br />
For example, let's do it without a function.<br />
<br />
<br />
Var MyFileName<br />
<br />
StrCpy $MyFileName &quot;MyFileName.txt&quot;<br />
<br />
File $MyFileName<br />
<br />
<br />
<br />
Why can't something like this work?<br />
<br />
-Tony</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd September 2008, 04:02</div></div><div class="posttext">StrCpy is also runtime, the stuff starting with ! is compile time. File is special, its &quot;both&quot; runtime and compiletime</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tinytone</div><div class="date">22nd September 2008, 04:12</div></div><div class="posttext">Ok. The macro method worked for it. Thanks for the suggestion:<br />
<br />
<br />
!macro MyMacro FILE_NAME<br />
<br />
  File &quot;${FILE_NAME}&quot;   <br />
  ...<br />
Do other things<br />
...<br />
  <br />
!macroend<br />
<br />
<br />
then <br />
<br />
<br />
   !insertmacro MyMacro &quot;myfilename.txt&quot;<br />
<br />
<br />
<br />
-Tony</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>