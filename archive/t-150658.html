<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Updater, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Updater NSIS Discussion" />
	
	<title> Updater [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Updater</div>
<hr />
<div class="pda"><a href="t-150658.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150658">Updater</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">27th September 2003, 22:49</div></div><div class="posttext">Ok i need to know how to make a program that would connect to a site and check if there are any downloads available on the site and return to the user a list of downloads that are available then the user could download them.<br />
<br />
I have made installers with NSIS but i am probably in the novice stage so if anyone can tell me how to do it or even if its possible i would greatly appreciate it. Thanx:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th September 2003, 23:35</div></div><div class="posttext">You can use the NSISdl plug-in to download and the InstallOptios plug-in to display the list of downloads.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">27th September 2003, 23:42</div></div><div class="posttext">Ok thanx but can u please give me an example on how to do it <br />
<br />
<br />
Thanx again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th September 2003, 23:50</div></div><div class="posttext">Writing this whole system will take quite some time. Please read the documentation yourself and if you have any problems with specific features, post a question.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">28th September 2003, 01:16</div></div><div class="posttext">Ok i have made a downloader but everytime i get to the install part it connects then it gets a download error is there anyway i can find out what kind of error it is?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">28th September 2003, 03:59</div></div><div class="posttext">there's a readme for that plugin, it says:<br />
<br />
<br />
NSISdl::download /TIMEOUT=30000 http://www.domain.com/file localfile.exe<br />
<br />
The return value is pushed to the stack:<br />
<br />
  &quot;cancel&quot; if cancelled<br />
  &quot;success&quot; if success<br />
  otherwise, an error string describing the error</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">28th September 2003, 05:10</div></div><div class="posttext">Sorry but i already figured out my problem but thanx anyway.<br />
<br />
Now can anybody tell me how to write a line to an .ini file like say that i want to add<br />
<br />
;Hello <br />
<br />
on line 5 <br />
<br />
how would i go about doing it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th September 2003, 12:27</div></div><div class="posttext">Why would you want to write a comment to an INI file? Use WriteINIStr and ReadINIStr, it's much easier. If you want to write lines that are not in the INI format use FileOpen, FileWrite, FileRead and FileClose.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th September 2003, 13:46</div></div><div class="posttext">I have written an updater program in NSIS for our D-Day: Normandy computer game.<br />
It's finished now, after releasing the final changes yesterday (build v1.00b4)<br />
It downloads a list of community maps from our Internet server(s) to the users' PC, and then checks which map names on the downloaded list exist on his/her's hard drive.<br />
If the maps, or downloaded zips do not exist, then it adds the zips to a list for download.<br />
<br />
The full program can be downloaded here (1.13mb):<br />
http://www.planetquake.com/ddc/gbr-release<br />
<br />
Main source:<br />
http://myweb.tiscali.co.uk/imker/ddayupdater/ddayupdater.nsi<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">29th September 2003, 00:33</div></div><div class="posttext">ok i can write a line to an ini file using WriteINIStr but is there anyway to write something just like <br />
<br />
blahblah instead of<br />
<br />
[whatever]<br />
text=blahblah</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">29th September 2003, 02:19</div></div><div class="posttext">Also is there a way that i can scan an online folder and return to the user a list of files that are in that folder.<br />
<br />
Thanx alot guys for all your help my updater is starting to look better and better.:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">29th September 2003, 04:04</div></div><div class="posttext">for writing normal text in a ini, you need the FileOpen/FileWrite/FileClose combo that kichik told you.<br />
<br />
To find files you need the FindFirst/FindNext/FindClose combo.<br />
<br />
Maybe difficult to use at first, but once you wrote one you can copy it for the rest of your live ;)<br />
<br />
mmm... I found no examples for this combos in nsis archives, may I wrote them?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2003, 10:50</div></div><div class="posttext">You can't scan the list of files on a server unless the server gives you a method to do it. It would be a lot simpler to just include an online file that contains the file the user can download.<br />
<br />
n0On3, there are some examples in the Archive. But if you think something is missing, a basic example, a more descriptive explanation or anything else, go ahead and add it. The more the merrier :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">29th September 2003, 22:59</div></div><div class="posttext">Yes please write it so u can help many noobish people like me :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">30th September 2003, 01:45</div></div><div class="posttext">Isnt there anyway i can get rid of the setion_name using WriteINIStr<br />
Because im using it like this<br />
<br />
WriteINIStr &quot;$INSTDIR\plugins.ini&quot; &quot;i need to get rid of this&quot; &quot;blah.amx     ;&quot; &quot;description&quot;<br />
<br />
And it looks like this<br />
<br />
[i need to get rid of this]<br />
blah.amx    ;=description <br />
<br />
See its perfect except the part i need to get rid of i dont even need to get rid of it but is there a way i can put a ; or // in front of it</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">30th September 2003, 08:37</div></div><div class="posttext">if you do:<br />
<br />
FileOpen $4 &quot;whateverfile.txt&quot; a<br />
FileSeek $4 0 END<br />
FileWrite $4 &quot;blahblah&quot;<br />
FileClose $4<br />
<br />
you'll have that blahblah at the end of the file. I am not sure about the '0' though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">30th September 2003, 09:09</div></div><div class="posttext">I wrote an example here:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=429&amp;instances=0<br />
<br />
tell me what you think, and what to change ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th September 2003, 19:30</div></div><div class="posttext">Please could you move it to the Text File Manipulation (http://nsis.sourceforge.net/archive/nsisweb.php?page=311&amp;instances=0,11) subdir so that it can be found more easily.<br />
<br />
Edit: Soorry, never mind it's in examples anyway :)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">30th September 2003, 23:11</div></div><div class="posttext">:) Thank u it worked perfectly thank u a 1000 times and great post it was very helpful.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">1st October 2003, 00:58</div></div><div class="posttext">Thanks, I am glad it helped you :)<br />
<br />
And yes, I put it in the examples section because that code is not something to use, but just to see how they work together.<br />
<br />
I am still not sure about the &quot;FileSeek $4 0 END&quot; is it correct?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st October 2003, 11:24</div></div><div class="posttext">The 0 is fine. Will set the file pointer at the end.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">2nd October 2003, 23:21</div></div><div class="posttext">Now how can i do this find a line that starts with gamedll and replace it with a new line. Also is there anyway i can write &quot;&quot; in a file?<br />
<br />
Thanx again in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">2nd October 2003, 23:24</div></div><div class="posttext">Also one more thing sorry i had to post twice but it slipped my mind<br />
<br />
how can i read a string from an ini and if that string exists to stop a file from appearing in the components list?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">2nd October 2003, 23:47</div></div><div class="posttext">How can i write quotes (&quot;&quot;) to a text file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd October 2003, 13:21</div></div><div class="posttext">To compare only the first part of the string to another stirng use StrCpy with a limit first. StrCpy allows you to copy just a certain number of chars from the string. Specify the length of the string you want to compare to and compare the result.<br />
<br />
To write quotes to a text file, or use them anywhere else, simply quote the string with other types of quotes (' for example). See Section 4.1 (http://nsis.sourceforge.net/Docs/Chapter4.html#4.1) for more information.<br />
<br />
To read from an INI file use ReadINIStr.<br />
<br />
If you want to hide a section from the components page simply set its name to &quot;&quot; using SectionSetText.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">7th October 2003, 00:14</div></div><div class="posttext">OOps sorry i messed up my post</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">7th October 2003, 00:20</div></div><div class="posttext">Ok here is my script so far i have it to write the string to a file named installed.ini but how can i make it to where it will read the installed.ini file next time around and if the current version is the same as in the ini for that file not to show up in the components list. i only have the WriteINIStr in the first section but i will add it to the others once u guys help with this part and i think i could get the rest of it own my own. Thanx once again for all the help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th October 2003, 13:30</div></div><div class="posttext">Can you please repeat that? I didn't understand what you wanted to ask.<br />
<br />
I have seen usage of FileOpen, FileRead, FileWrite and FileClose in your script for INIs in your script. If you're already using an INI use WriteINIStr and ReadINIStr instead of messing with File*. It's so much simpler...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">9th October 2003, 03:50</div></div><div class="posttext">I just need u to tell me how to read the string from an ini version is the same for the component not to show up on the components list<br />
<br />
[AMX]<br />
version=0.9.6<br />
<br />
Im sorry this is kinda of hard for me to explain heres an example<br />
<br />
if <br />
<br />
[AMX]<br />
version=0.9.5<br />
<br />
and there is an installer for amx version 0.9.5 i dont want it to show up in the components list<br />
<br />
I hope it was clear enough</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th October 2003, 11:59</div></div><div class="posttext">To skip the component list simply call Abort from the component's page pre function. To skip according to the version number use something like:<br />
<br />
ReadINIStr $0 file.ini section name<br />
StrCmp $0 &quot;0.9.6&quot; 0 +2<br />
Abort</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">10th October 2003, 04:28</div></div><div class="posttext">Ok i dont know how to set the function up as a component pre function i have tried using Function .onGUIInit but it says there is already a function named that so what do i do and also i dont want the installer to abort i just dont want that section to appear so i used<br />
<br />
ReadINIStr $0 &quot;$INSTDIR\addons\downloaded\installed.ini&quot; &quot;Metamod&quot; &quot;Version&quot;<br />
StrCmp $0 &quot;1.16.2&quot; 0 +2<br />
SectionSetText &quot;SEC1&quot; &quot;&quot;<br />
<br />
And i dunno if its right because i dunno how to use it. So if anyone has any advice for my noobish self i would appreciate it. And thanx a lot Kichik u have helped me with almost all of my problems and u rock.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th October 2003, 13:33</div></div><div class="posttext">See the following page for more information about page callbacks:<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3<br />
<br />
If you aren't using the latest CVS version find the same section on your local documentation. The one online is only for the latest CVS version.<br />
<br />
After that, read the MUI readme to find how to set pre function using the MUI (the normal method won't work as you expect with the MUI).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">11th October 2003, 01:05</div></div><div class="posttext">Ok i added the function and now it works but how can i make the subsection dissapear.<br />
<br />
also how can i make all check boxes off by default i know i have seen it before but where i tried searching and i couldnt find it. Sorry</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">11th October 2003, 07:24</div></div><div class="posttext">And i mean by that is that i want to make the subsections not show in the components section so what do i use<br />
<br />
+Section<br />
--subsection<br />
--subsection<br />
<br />
i want to make those subsections dissappear</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th October 2003, 13:16</div></div><div class="posttext">You can hide a section by setting an empty name.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">11th October 2003, 23:56</div></div><div class="posttext">I tried that and it didnt work i used<br />
<br />
SectionSetText &quot;SEC1&quot; &quot;&quot;<br />
<br />
and when i did that nothing happened also how would i check more than one ini prior to the components section i think i got it i just did this but im not sure if its right...<br />
<br />
Function &quot;check&quot;<br />
         ReadINIStr $0 &quot;$INSTDIR\addons\downloaded\installed.ini&quot; &quot;Metamod&quot; &quot;Version&quot;<br />
         StrCmp $0 &quot;1.16.2&quot; 0 +2<br />
         SectionSetText &quot;SEC2&quot; &quot;&quot;<br />
         <br />
         ReadINIStr $0 &quot;$INSTDIR\addons\downloaded\installed.ini&quot; &quot;AMX&quot; &quot;Version&quot;<br />
         StrCmp $0 &quot;0.9.6j&quot; 0 +2<br />
         SectionSetText &quot;SECA2&quot; &quot;&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th October 2003, 10:22</div></div><div class="posttext">He means;<br />
<br />
Section &quot;Section Name&quot; SecID<br />
SectionEnd<br />
<br />
Then use;<br />
<br />
SectionSetText ${SecID} &quot;&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">13th October 2003, 03:09</div></div><div class="posttext">Alright thanx it worked perfectly</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirtbiker0</div><div class="date">18th October 2003, 23:44</div></div><div class="posttext">So are u guys absolutely sure there is no way to find a list of files that are available not even using a mySQL database or somethin like that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th October 2003, 13:37</div></div><div class="posttext">You can't scan the list of files on a server unless the server gives you a method to do it.<br />
<br />
I didn't say it's impossible, I said the server needs to supply such a method. For example, it's very much possible to let the server create an INI file and send that to you as the response. This can be done with PHP, Perl, JSP, ASP, you name it.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>