<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A bug?   Naaaa, just a n00b problem: IfFileExists fails., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A bug?   Naaaa, just a n00b problem: IfFileExists fails. NSIS Discussion" />
	
	<title> A bug?   Naaaa, just a n00b problem: IfFileExists fails. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A bug?   Naaaa, just a n00b problem: IfFileExists fails.</div>
<hr />
<div class="pda"><a href="t-213837.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213837">A bug?   Naaaa, just a n00b problem: IfFileExists fails.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Lymc</div><div class="date">22nd April 2005, 05:02</div></div><div class="posttext">I'm checking on the existance of a common Windows dll before installing it if it's not there:<br />
<br />
	IfFileExists &quot;$SYSDIR\msvcr70.dll&quot; +1<br />
		File &quot;e:\src\archive\msvcr70.dll&quot;<br />
<br />
I get an error while trying to open the (existing) file for writing, indicating that the if failed (or rather, succeeded when it should have failed).  Does anyone know why?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd April 2005, 05:35</div></div><div class="posttext">It sounds like if the file exists, you want to skip the File command, if so, you need:<br />
<br />
IfFileExists &quot;$SYSDIR\msvcr70.dll&quot; +2<br />
File &quot;e:\src\archive\msvcr70.dll&quot;<br />
<br />
From the documentation:<br />
<br />
4.4 Relative Jumps<br />
Unlike labels, relative jumps are, as the name suggests, relative to the place they are called from. You can use relative jumps wherever you can use labels. Relative jumps are marked by numbers. +1 jumps to the next instruction (the default advancement), +2 will skip one instruction and go to the second instruction from the current instruction, -2 will jump two instructions backward, and +10 will skip 9 instructions, jumping to the tenth instruction from the current instruction.<br />
<br />
An instruction is every command that is executed at run-time, when the installer is running. MessageBox, Goto, GetDLLVersion, FileRead, SetShellVarContext are all instructions. AddSize, Section, SectionGroup, SectionEnd, SetOverwrite (and everything under Compiler Flags), Name, SetFont, LangString, are not instructions because they are executed at compile time.<br />
<br />
Examples:<br />
<br />
 Goto +2<br />
   MessageBox MB_OK &quot;You will never ever see this message box&quot;<br />
 MessageBox MB_OK &quot;The last message was skipped, this one should be shown&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lymc</div><div class="date">22nd April 2005, 07:38</div></div><div class="posttext">Nevermind....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lymc</div><div class="date">22nd April 2005, 07:41</div></div><div class="posttext">Ah, nuts, you're right.  I opened your response and didn't see the top line, where you are explaining that I got the number wrong, counting skipped lines instead of just lines.  I wrote a long explanation of how those lines seemed to be right to me, and they were, only they weren't mine, they were yours.  I thought you were quoting me in the lines, and I made perfect sense to myself, which I often do.  Thanks for your help, I appreciate it.<br />
<br />
And it won't happen again.   :hang:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd April 2005, 14:49</div></div><div class="posttext">No problem, glad i could help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>