<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" enable/disable &quot;Next&quot; button with checkbox, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  enable/disable &quot;Next&quot; button with checkbox NSIS Discussion" />
	
	<title> enable/disable &quot;Next&quot; button with checkbox [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  enable/disable &quot;Next&quot; button with checkbox</div>
<hr />
<div class="pda"><a href="t-264697.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264697">enable/disable &quot;Next&quot; button with checkbox</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Marcus1807</div><div class="date">30th January 2007, 18:31</div></div><div class="posttext">Hello, <br />
<br />
I've written some code to disable and enable the &quot;Next&quot; Button on a custom page:<br />
<br />
; Welcome page<br />
!insertmacro MUI_PAGE_WELCOME<br />
;Custum Function<br />
Page custom showCheckSummary leaveCheckSummary<br />
; License page<br />
!define MUI_LICENSEPAGE_CHECKBOX<br />
!insertmacro MUI_PAGE_LICENSE &quot;Prototype.txt&quot;<br />
; Directory page<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
; Instfiles page<br />
!insertmacro MUI_PAGE_INSTFILES<br />
; Finish page<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
; Uninstaller pages<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
; Language files<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;German&quot;<br />
<br />
; MUI end ------<br />
<br />
Name &quot;${PRODUCT_NAME}&quot;<br />
OutFile &quot;Setup_ADEPAut.exe&quot;<br />
<br />
VAR INI_VALUE<br />
VAR ERROR_MESSAGE<br />
VAR hwnd<br />
<br />
Function showCheckSummary<br />
 !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;checkSummary.ini&quot; &quot;FIELD 3&quot; &quot;State&quot; &quot;0&quot;<br />
  GetDlgItem $hwnd $HWNDPARENT 1 ;AUSKOMMENTIEREN WENN FUNCTION MIT MSGBOX<br />
  EnableWindow $hwnd 0           ;AUSKOMMENTIEREN WENN FUNCTION MIT MSGBOX<br />
  ;Write values into Textfield<br />
 !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;checkSummary.ini&quot; &quot;FIELD 2&quot; &quot;State&quot; &quot;$ERROR_MESSAGE&quot;<br />
 !insertmacro MUI_HEADER_TEXT &quot;Summary&quot; &quot;&quot;<br />
 !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;checkSummary.ini&quot;<br />
 <br />
 ;!insertmacro MUI_INSTALLOPTIONS_READ $INI_VALUE &quot;checkSummary.ini&quot; &quot;FIELD 3&quot; &quot;STATE&quot;<br />
 ;strcmp $INI_VALUE 1<br />
 <br />
FunctionEnd<br />
<br />
<br />
Function leaveCheckSummary<br />
 !insertmacro MUI_INSTALLOPTIONS_READ $INI_VALUE &quot;checkSummary.ini&quot; &quot;FIELD 3&quot; &quot;STATE&quot;<br />
  StrCmp $INI_VALUE 3 clicked notClicked<br />
  notClicked:<br />
   GetDlgItem $hwnd $HWNDPARENT 1 <br />
   EnableWindow $hwnd 0<br />
   Abort ; Return to the page<br />
  clicked:<br />
   GetDlgItem $hwnd $HWNDPARENT 1<br />
   EnableWindow $hwnd 1<br />
FunctionEnd<br />
    <br />
<br />
<br />
Function .onInit<br />
<br />
  ; Extract InstallOptions files<br />
  ; $PLUGINSDIR will automatically be removed when the installer closes<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\test.ini &quot;checkSummary.ini&quot;<br />
<br />
 strcpy $9 &quot;false&quot;<br />
<br />
 !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
 ;Check Version-Number<br />
 call CheckADVersion<br />
 <br />
 ;Read InstallDir<br />
 call GetInstallDir<br />
 StrCpy $INSTDIR &quot;$R0&quot;<br />
 StrCpy $INSTDIR &quot;$INSTDIR...&quot;<br />
 <br />
 ;Check Version-Number<br />
 call CheckVersion<br />
<br />
 ;CheckWindow<br />
 strcmp $9 &quot;true&quot; equal notEqual<br />
 equal:<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;checkSummary.ini&quot;<br />
 notEqual:<br />
FunctionEnd<br />
 <br />
<br />
and here is my checkSummary.ini-File:<br />
<br />
<br />
[Settings]<br />
NumFields=3<br />
State=0<br />
<br />
[Field 1]<br />
Type=label<br />
Text=Following Errors were found: <br />
Left=0<br />
Right=-1<br />
Top=0<br />
Bottom=10<br />
<br />
[Field 2]<br />
Type=text<br />
Left=0<br />
Right=-1<br />
Top=20<br />
Bottom=100<br />
flags=MULTILINE|VSCROLL|READONLY<br />
State=&quot;TEST&quot;<br />
<br />
[FIELD 3]<br />
Type=CheckBox<br />
NOtify=<br />
TEXT= Ignore<br />
FLAGS=NOtify<br />
State=0<br />
Left=0<br />
Right=-1 <br />
Top=110 <br />
Bottom=120 <br />
<br />
<br />
The Next-Button is correctly disabled. But when I do a click in the checkbox, the button is not enabled. <br />
<br />
Where is the errror?<br />
<br />
Any ideas?<br />
<br />
Thank you very much...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">30th January 2007, 18:42</div></div><div class="posttext">You need to capture the checkbox with notify flag and re-enable the button when checkbox is checked.<br />
<br />
See following example for details,<br />
<br />
http://nsis.sourceforge.net/InstallOptions_The_Usage_of_NOTIFY_Flag</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>