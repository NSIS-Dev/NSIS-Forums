<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Exe losing icon in program files folder, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Exe losing icon in program files folder NSIS Discussion" />
	
	<title> Exe losing icon in program files folder [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Exe losing icon in program files folder</div>
<hr />
<div class="pda"><a href="t-346741.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=346741">Exe losing icon in program files folder</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Cedes</div><div class="date">2nd August 2012, 13:12</div></div><div class="posttext">Hey there! Newcomer reporting in. :)<br />
<br />
I'm making my very first NSIS installer and have come across a frustrating problem I can't seem to overcome.<br />
<br />
After installing the data, the installed application's executable's icon is lost. The icon still seems to be there if I look at the properties or try to remove the file, but isn't displayed otherwise. This also expands to the start menu link, and the possible desktop shortcut.<br />
<br />
Here is a very trimmed down look at the .nsi (every file, including the application executable, is in data folder):<br />
<br />
!include MUI2.nsh<br />
...<br />
!define AppName &quot;Freeze Engine&quot;<br />
!define AppExecutable &quot;Freeze Engine.exe&quot;<br />
!define AppUninstall &quot;Uninstall Freeze Engine.exe&quot;<br />
!define ResourceDir &quot;data&quot;<br />
InstallDir &quot;$PROGRAMFILES\${AppName}&quot;<br />
Var StartMenuFolder<br />
!define SMExecutableLink &quot;${AppName}.lnk&quot;<br />
!define SMUninstallLink &quot;Uninstall ${AppName}.lnk&quot;<br />
...<br />
Section &quot;Install&quot;<br />
SetShellVarContext all<br />
SetOutPath $INSTDIR<br />
File /r ${ResourceDir}\*.*<br />
writeUninstaller &quot;$INSTDIR\${AppUninstall}&quot;<br />
  <br />
!insertmacro MUI_STARTMENU_WRITE_BEGIN AppName<br />
CreateDirectory &quot;$SMPROGRAMS\$StartMenuFolder&quot;    CreateShortCut &quot;$SMPROGRAMS\$StartMenuFolder\${SMExecutableLink}&quot; &quot;$INSTDIR\${AppExecutable}&quot; \<br />
&quot;&quot; &quot;$INSTDIR\${AppExecutable}&quot; 0<br />
CreateShortCut &quot;$SMPROGRAMS\$StartMenuFolder\${SMUninstallLink}&quot; &quot;$INSTDIR\${AppUninstall}&quot; \<br />
&quot;&quot; &quot;$INSTDIR\${AppUninstall}&quot; 0<br />
<br />
!insertmacro MUI_STARTMENU_WRITE_END  <br />
<br />
SectionEnd<br />
<br />
<br />
This seems to only happen if I install in the default directory C:\Program Files (x86)\... , installing somewhere else seems to work fine. The uninstaller has no problem regardless of install location (icon added with MUI_UNICON).<br />
<br />
While searching, I came across http://forums.winamp.com/showthread.php?t=327806 which seems somewhat similar, but appears to be limited to shortcuts.<br />
<br />
Would any friendly person be able to tell what I'm doing wrong? :hang:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd August 2012, 15:30</div></div><div class="posttext">Try removing the last 3 arguments of CreateShortCut - you don't need to specify the icon path or index if it is in the target executable.<br />
<br />
How big is the target executable?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cedes</div><div class="date">15th August 2012, 15:14</div></div><div class="posttext">Hey, and rather belated thanks for your answer! The target executable is only around 1MB - I was aware of really large exes having some problems.<br />
<br />
Anyway, after resetting my computer, all the icons started working just as they were meant to. Maybe it was some windows temp info updating lazily or something?<br />
<br />
Thanks for your answer in any case. :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>