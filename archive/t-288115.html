<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to create my own plugin for NSIS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to create my own plugin for NSIS NSIS Discussion" />
	
	<title> How to create my own plugin for NSIS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to create my own plugin for NSIS</div>
<hr />
<div class="pda"><a href="t-288115.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=288115">How to create my own plugin for NSIS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">7th March 2008, 19:03</div></div><div class="posttext">Hello,<br />
I wanna ask you how to create own plugin for NSIS. I want to write it in Delphi. I found an example in NSIS\src\Contrib\ExDLL folder, but unfortunately I don't understand it well (it doeasnt do what I want, as I understand only shows messagebox with user variable).<br />
<br />
Maybe I will write what I want to do. I want to create a plugin that will show (on a custom page), a page with Treeview, with checkboxes. If I check some node it will write info about it to ini file.<br />
<br />
How can I display in custom page a standard window with treeview component, using delphi plugin? <br />
Please, if someone of you use delphi, give me some advice.<br />
Regards,<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th March 2008, 20:16</div></div><div class="posttext">You can use EmbeddedLists plug-in (http://nsis.sf.net/EmbeddedLists_plug-in) for tree views.<br />
Writing to the log on the other hand is something you need to do on page leave.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">7th March 2008, 20:37</div></div><div class="posttext">Originally posted by Afrow UK <br />
You can use EmbeddedLists plug-in (http://nsis.sf.net/EmbeddedLists_plug-in) for tree views.<br />
Writing to the log on the other hand is something you need to do on page leave.<br />
<br />
Stu  <br />
<br />
Hello Stu,<br />
I have tested your embeddedlists plugin. But, I want to create something that we can see on MUI_PAGE_COMPONENTS -<br />
the combobox and treeview. On this treeview I have to show items with checkboxes - to do system files associations - if user select (select checkbox) some node, it will be written to ini file and then parsed.<br />
<br />
As I understand it is impossible to do with your plugin, because I can display only treeview - I want some more (info text, treeview, combobox).<br />
Am I wrong?<br />
Regards, <br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th March 2008, 21:03</div></div><div class="posttext">That's right, it only shows a tree view. Another option is to try InstallOptionsEx. nsDialogs will also allow you work but you'd need to do a bit of work using SendMessage in your NSIS script. Otherwise, writing your own plug-in is the way forward.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">10th March 2008, 21:14</div></div><div class="posttext">OK, I am using InstallOptionsEx. But I have problems with treeview items.<br />
<br />
I am creating treview on custom page using this code in ini file:<br />
<br />
<br />
[Field 4]<br />
Type=TreeView<br />
Left=10<br />
Right=-10<br />
Top=37<br />
Bottom=-9<br />
Flags=CHECKBOXES  -&gt; show checkboxys on treeview<br />
StateImageList=simple.bmp  -&gt; bitmap for checkboxes<br />
ListItems=ParentItem_1{ChildItem_1{ChildItem_1_1|ChildItem_1_2}|ChildItem_2{ChildItem_2_1|ChildItem_2_2}}ParentItem_2{ChildItem_1{ChildItem_1_1|ChildItem_1_2}|ChildItem_2{ChildItem_2_1|ChildItem_2_2}}<br />
State=4{4{1|0}|4{0|1}}4{4{1|1}|4{0|0}}<br />
 <br />
<br />
Using this I want to have this tree:<br />
<br />
ParentItem_1            -&gt; no checkbox (4)             <br />
   ChildItem_1          -&gt; no checkbox (4)<br />
       ChildItem_1_1    -&gt; selected checkbox (1)<br />
       ChildItem_1_2    -&gt; unselected checkbox (0)<br />
   ChildItem_2          -&gt; no checkbox (4)<br />
       ChildItem_2_1    -&gt; unselected checkbox (0)<br />
       ChildItem_2_2    -&gt; selected checkbox (1)<br />
ParentItem_2            -&gt; no checkbox (4) <br />
   ChildItem_1          -&gt; no checkbox (4)<br />
       ChildItem_1_1    -&gt; selected checkbox (1)<br />
       ChildItem_1_2    -&gt; selected checkbox (1)<br />
   ChildItem_2          -&gt; no checkbox (4)<br />
       ChildItem_2_1    -&gt; unselected checkbox (0)<br />
       ChildItem_2_2    -&gt; unselected checkbox (0)<br />
<br />
<br />
It is a tree view with 3 levels. I got problems with checkboxys. It doeasn't work correctly for me. Am I writing correctly the definition ListItems=... ?<br />
<br />
In help I see this information:<br />
<br />
{ - Starts a new tree level. The item to the left of this character is the parent item.<br />
| - Separates an item from another.<br />
} - Ends a tree level.<br />
<br />
Example:<br />
  ListItems=MyParentItem{MyChildItem1|MyChildItem2}<br />
  State=MyParentItem{MyChildItem2}<br />
<br />
If CHECKBOXES is specified, it specifies the state of all items checkboxes with state flags (not item names). In this case, you have to follow the exact same structure of the items as on ListItems INI value name. Example:<br />
  ListItems=MyParentItem{MyChildItem1|MyChildItem2}<br />
  State=0{11|4}<br />
Item state flags have to be joined with &quot;bitwise OR&quot; before writing to the INI file. Example:<br />
  11 = 0x0B = Checked + Read-Only + Bold.<br />
<br />
Then put it like this in the State INI value:<br />
  State=0{11|4}<br />
<br />
<br />
<br />
Please, can someone of you check my Listitems line and write correctly 3 levels treeview with checkboxys (only on 3 level)?<br />
The second problem is how to detect that user selected for example 3 node and checked checkbox? <br />
<br />
Thanks for any help.<br />
-Pawel</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>