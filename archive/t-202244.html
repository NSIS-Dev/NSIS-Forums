<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Header image   in Modern UI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Header image   in Modern UI NSIS Discussion" />
	
	<title> Header image   in Modern UI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Header image   in Modern UI</div>
<hr />
<div class="pda"><a href="t-202244.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202244">Header image   in Modern UI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">khawkins123</div><div class="date">16th December 2004, 16:34</div></div><div class="posttext">I am using the Modern UI with the following entries in my .nsi script. <br />
<br />
!define MUI_ICON &quot;Messenger.ico&quot;<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;STPMessengerTitleSmall.bmp&quot;<br />
<br />
The icon displays fine but I can't get get the header image to display.  Am I missing something?   <br />
<br />
Also the following colors command seems to have no effect:<br />
<br />
!define MUI_INSTFILESPAGE_COLORS &quot;F0F0F0 000000&quot; <br />
<br />
Any help would be appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">16th December 2004, 16:47</div></div><div class="posttext">works just fine for me. could you plz attach your script, or an example, where it doesn't work?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">khawkins123</div><div class="date">16th December 2004, 16:54</div></div><div class="posttext">; main.nsi<br />
; Main installer script for use with NSIS Installer<br />
;--------------------------------<br />
<br />
;--------------------------------<br />
; Let's use the &quot;Modern&quot; UI style<br />
!include &quot;MUI.nsh&quot;<br />
;--------------------------------<br />
<br />
!define VERSION &quot;3.2.0&quot;<br />
!define MUI_ICON &quot;Messenger.ico&quot;<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;MessengerTitleSmall.bmp&quot;<br />
<br />
LangString MUI_TEXT_WELCOME_INFO_TEXT ${LANG_ENGLISH} &quot;Welcome to Messenger Install&quot;<br />
LangString MUI_TEXT_WELCOME_INFO_TITLE ${LANG_ENGLISH} &quot;Messenger Install&quot;<br />
LangString MUI_TEXT_INSTALLING_TITLE ${LANG_ENGLISH} &quot;Installing Messenger&quot;<br />
<br />
<br />
; The name of the installer<br />
Name &quot;Messenger version ${VERSION}&quot;<br />
<br />
; The file to write<br />
OutFile &quot;InstallMessenger_v${VERSION}.exe&quot;<br />
<br />
; The default installation directory<br />
InstallDir $PROGRAMFILES\Messenger${VERSION}<br />
<br />
;--------------------------------<br />
; Pages<br />
;--------------------------------<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
<br />
; The stuff to install<br />
Section &quot;&quot; ;No components page, name is not important<br />
<br />
  ; Set output path to the installation directory.<br />
  SetOutPath $INSTDIR<br />
  <br />
  ; Put files there<br />
  File /r ..\FilesToInstall\*.*<br />
  <br />
SectionEnd ; end the section</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th December 2004, 20:54</div></div><div class="posttext">1. The header bitmap must be extracted to a temporary location using File/ReserveFile.<br />
2. You must specify the full path to the bitmap.<br />
<br />
E.g.<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;$PLUGINSDIR\MessengerTitleSmall.bmp&quot;<br />
Function .onInit<br />
 InitPluginsDir<br />
 ReserveFile &quot;/oname=$PLUGINSDIR\MessengerTitleSmall.bmp&quot; &quot;MessengerTitleSmall.bmp&quot;<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">khawkins123</div><div class="date">17th December 2004, 20:15</div></div><div class="posttext">Thanks for the reply.  After making the .onInit Entry change now a welcome page which wasn't displaying before is coming up.  I still don't see the bitmap. The page is completely blank.   NSIS seems very tempermental.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th December 2004, 21:25</div></div><div class="posttext">Sorry,<br />
ReserveFile &quot;/oname=$PLUGINSDIR\MessengerTitleSmall.bmp&quot; &quot;MessengerTitleSmall.bmp&quot;<br />
...won't work.<br />
<br />
You'd need to use:<br />
SetOutPath $PLUGINSDIR<br />
ReserveFile &quot;MessengerTitleSmall.bmp&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th December 2004, 21:29</div></div><div class="posttext">Ok, I think the problem is being caused because you are using LangString's when you aren't including any seperate languages. If you are only using English then you don't need to use LangString's. If you do, MUI just seems to fall to pieces (I have found).<br />
<br />
Just use plain !defines rather than LangString's.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">17th December 2004, 22:26</div></div><div class="posttext">If you do, MUI just seems to fall to pieces (I have found).I have no trouble using language strings in my English-only MUI-based installers.<br />
<br />
Did you remember to include the!insertmacro MUI_LANGUAGE &quot;English&quot;line in your script ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th December 2004, 23:09</div></div><div class="posttext">Originally posted by pengyou <br />
I have no trouble using language strings in my English-only MUI-based installers.<br />
<br />
Did you remember to include the!insertmacro MUI_LANGUAGE &quot;English&quot;line in your script ? <br />
<br />
That's the reason that I said that LangStrings are pointless in his script because he isn't including the English language!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">18th December 2004, 00:30</div></div><div class="posttext">That's the reason that I said that LangStrings are pointless in his script because he isn't including the English language!The script might only use English at the moment but perhaps there are plans to add more languages in the future? Adding the MUI_LANGUAGE line is an easier change than getting rid of all the language strings in the script.<br />
<br />
Surely there is no harm in using language strings even if the script only uses one language, provided the necessary MUI_LANGUAGE line is used? Some of my installers start out as English-only and end up supporting several languages and I have found it easier to use language strings right from the start.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th December 2004, 11:57</div></div><div class="posttext">You need to include the English language:<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
This must be put in after you insert the Page macro's and before you insert any LangStrings.<br />
<br />
I think the reason that your installer isn't working properly is because you are currently using LangStrings specifying ${LANG_ENGLISH} when you do not have ${LANG_ENGLISH} set (using the MUI_LANGUAGE macro).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">19th December 2004, 22:03</div></div><div class="posttext">There is absolutely no need to add that .onInit code in this topic. For a MUI header image you only need:<br />
<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;STPMessengerTitleSmall.bmp&quot;<br />
<br />
But an installer always needs a language, if you are only using Ennglish, you have to include the MUI_LANGUAGE macro for English.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bgosalci</div><div class="date">21st December 2004, 11:55</div></div><div class="posttext">Hi, I have a similar problem, I am successfully displaying my bitmaps in the header using the command !define MUI_HEADERIMAGE_BITMAP but when trying to change the header image of my uninstaller the same header image as the one set by !define MUI_HEADERIMAGE_BITMAP is shown. <br />
<br />
How would I set the uninstaller header image. I am using<br />
 !define MUI_UNHEADERIMAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Header\orange-uninstall.bmp&quot; but it does not work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 12:14</div></div><div class="posttext">Use !define MUI_HEADERIMAGE_UNBITMAP &quot;$PLUGINSDIR\file.bmp&quot;<br />
Also remeber it's the path to the Bitmap file on the user's computer, not yours!!!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">22nd December 2004, 15:47</div></div><div class="posttext">That's not true, the MUI will extract the file to the users system automatically.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sirchris</div><div class="date">22nd December 2004, 22:14</div></div><div class="posttext">This doesnt work for me either<br />
<br />
  !define MUI_HEADERIMAGE<br />
  !define MUI_HEADERIMAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Header\nsis.bmp&quot;<br />
<br />
I get no header image  without the mui_headerimage_bitmap line i'll get the default</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">23rd December 2004, 12:45</div></div><div class="posttext">Did you include the language macro? Try to modify a basic example script to see whether the problem is related to your script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sirchris</div><div class="date">23rd December 2004, 13:15</div></div><div class="posttext">!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
  <br />
;--------------------------------<br />
;Interface Configuration<br />
<br />
  !define MUI_HEADERIMAGE<br />
  !define MUI_HEADERIMAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Header\nsis.bmp&quot;<br />
  !define MUI_ABORTWARNING<br />
<br />
;--------------------------------<br />
;Pages<br />
<br />
  !insertmacro MUI_PAGE_LICENSE &quot;${NSISDIR}\Contrib\Modern UI\License.txt&quot;<br />
<br />
I was just modifying the basic script . I added the headerimage_bitmap line and moved the language line to the top</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd December 2004, 13:17</div></div><div class="posttext">Please see the MUI readme. It shows you how to make a script in steps. You always insert the MUI_LANGUAGE macro after all interface configuration and MUI_PAGE macro's.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sirchris</div><div class="date">23rd December 2004, 15:33</div></div><div class="posttext">I did have that there.  The only reason I moved it was I was getting an error, which seems to be gone now interestingly enough. maybe it ws something else.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>