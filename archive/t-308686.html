<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Only allowing 1 component per install?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Only allowing 1 component per install? NSIS Discussion" />
	
	<title> Only allowing 1 component per install? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Only allowing 1 component per install?</div>
<hr />
<div class="pda"><a href="t-308686.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308686">Only allowing 1 component per install?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ryanpager</div><div class="date">21st July 2009, 15:32</div></div><div class="posttext">Is there a way to disable the ability to chose more than 1 component everytime someone wants to do the install.<br />
<br />
Reason being, as this is acting as a 4 in 1 installer, and they should only be able to install 1 at a time.<br />
<br />
Thanks,<br />
Ryan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">21st July 2009, 17:19</div></div><div class="posttext">You can use .onSelChange (Manual chapter 4.7.2.1.8).<br />
This function is called when the user changes the selection.<br />
Then find out which component is selected with SectionGetFlags  (Manual chapter 4.9.13.2).<br />
(You have to remember what component was selected previously).<br />
Then use SectionSetFlags to select this component only.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st July 2009, 17:54</div></div><div class="posttext">Check out Examples\one-section.nsi<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ryanpager</div><div class="date">21st July 2009, 20:11</div></div><div class="posttext">This is what I have so far, its working for the most part. The only problem I am having, is that I need the default to be all &quot;off/unselected&quot; rather than all selected from the start.<br />
<br />
Ideas? Here is my code<br />
<br />
Function .onInit<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
  StrCpy $1 ${SEC01} ; Group 1 - Option 1 is selected by default<br />
  StrCpy $2 ${SEC02}<br />
  StrCpy $3 ${SEC03}<br />
  StrCpy $4 ${SEC04}<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
  <br />
  !insertmacro StartRadioButtons $1<br />
  !insertmacro RadioButton ${SEC01}<br />
  !insertmacro RadioButton ${SEC02}<br />
  !insertmacro RadioButton ${SEC03}<br />
  !insertmacro RadioButton ${SEC04}<br />
  !insertmacro EndRadioButtons<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">21st July 2009, 20:28</div></div><div class="posttext">OK, I didn't know about these macro's.<br />
Makes it easier ;-)<br />
<br />
Well, obviously you have to make all sections unselected by default, by adding the /o flag for each section:; Sections<br />
<br />
Section /o &quot;Option 1&quot; SEC01<br />
SectionEnd<br />
<br />
Section /o &quot;Option 2&quot; SEC02<br />
SectionEnd<br />
<br />
Section /o &quot;Option 3&quot; SEC03<br />
SectionEnd<br />
<br />
Section /o &quot;Option 4&quot; SEC04<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
; Functions<br />
<br />
Function .onInit<br />
!insertmacro MUI_LANGDLL_DISPLAY<br />
StrCpy $1 ${SEC01} ; Group 1 - Option 1 is selected by default<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
<br />
!insertmacro StartRadioButtons $1<br />
!insertmacro RadioButton ${SEC01}<br />
!insertmacro RadioButton ${SEC02}<br />
!insertmacro RadioButton ${SEC03}<br />
!insertmacro RadioButton ${SEC04}<br />
!insertmacro EndRadioButtons<br />
<br />
FunctionEndBTW, you only need to have ${SEC01} copied to $1 in onInit.<br />
This is where the previous selected section is stored.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ryanpager</div><div class="date">21st July 2009, 20:53</div></div><div class="posttext">Got it, all I needed to do was add the /o!<br />
<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st July 2009, 23:45</div></div><div class="posttext">One problem there is once the user has clicked one of the components he's forced to install one of them. You may want to add an additional empty section in the group that the user can select.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>