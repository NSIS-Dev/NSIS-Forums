<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Destination Folder, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Destination Folder NSIS Discussion" />
	
	<title> Destination Folder [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Destination Folder</div>
<hr />
<div class="pda"><a href="t-328820.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=328820">Destination Folder</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">23rd March 2011, 18:09</div></div><div class="posttext">I have enabled MUI_PAGE_DIRECTORY to allow the Destination folder to be set, however my problem is I want to only allow the Drive letter of the directory to change not the folder name.<br />
<br />
How can this be done?<br />
<br />
thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th March 2011, 07:31</div></div><div class="posttext">A very dirty solution would be to StrCpy $INSTDIR $INSTDIR 2 , but that's guaranteed to go wrong at some point: If the user enters a network path, for example. You could create a custom page with for example a dropdown select box, and populate that by enumerating all results from kernel32::GetLogicalDrives. See here (http://nsis.sourceforge.net/DVD_functions) for an example implementation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">24th March 2011, 21:39</div></div><div class="posttext">So I shouldn't be using the MUI_PAGE_DIRECTORY at all then?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">25th March 2011, 06:56</div></div><div class="posttext">If you're going to create a custom page then yes, you wouldn't use the directory page. If you want to use the directory page anyhow, you're probably interested in the GetRoot macro in filefunc.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">25th March 2011, 08:33</div></div><div class="posttext">Create custom page using nsDialogs like this:<br />
http://www.unsigned-softworks.sk/en/images/gallery/technical/technical_2.jpg<br />
<br />
But do not create a Browse button as me and set EditBox for ReadOnly<br />
User can select drive in box below path which changes the first letter only, not the whole path.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">25th March 2011, 13:16</div></div><div class="posttext">Any code examples?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">25th March 2011, 14:33</div></div><div class="posttext">There are eight example scripts in the ListView Header zip file which can be found here:<br />
http://nsis.sourceforge.net/Header_file_for_Listview<br />
<br />
Here is a screenshot from a very slightly modified version of the example.nsi script in that zip file:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">25th March 2011, 14:43</div></div><div class="posttext">Yeah I think that one you attached pengyou is what I am looking for minus the browse button.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">25th March 2011, 14:46</div></div><div class="posttext">You can remove the browse button quite easily - just delete some lines from the example script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">25th March 2011, 14:50</div></div><div class="posttext">Thanks, exactly what I was looking for, great help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">25th March 2011, 17:08</div></div><div class="posttext">Examples have been update again just now, please download the latest ones.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">25th March 2011, 18:35</div></div><div class="posttext">Hey I got rid of the Browse Button, but how do you make the directory read only?<br />
How can you restrict the drive types? ie. no usb etc.<br />
Is there a easy way to grab the amount of free space value for the selected drive?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NSISNUB</div><div class="date">26th March 2011, 19:04</div></div><div class="posttext">Hey I got rid of the Browse Button, but how do you make the directory read only?<br />
How can you restrict the drive types? ie. no usb etc.<br />
Is there a easy way to grab the amount of free space value for the selected drive?<br />
<br />
Got it all working.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>