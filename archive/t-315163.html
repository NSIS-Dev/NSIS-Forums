<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Reading command line parameter at runtime, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Reading command line parameter at runtime NSIS Discussion" />
	
	<title> Reading command line parameter at runtime [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Reading command line parameter at runtime</div>
<hr />
<div class="pda"><a href="t-315163.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=315163">Reading command line parameter at runtime</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pgrasland</div><div class="date">7th December 2009, 15:33</div></div><div class="posttext">Hello,<br />
<br />
I'm trying to use NSIS to do 2 functions with a single installer.<br />
<br />
1) Install my program, and stop<br />
2) Update my program, and launch it with a parameter.<br />
<br />
I was hoping to do something like that :<br />
<br />
setup.exe, without arguments, will install my program and stop<br />
setup.exe parameter, will update (reinstall) my program and launch &quot;program.exe parameter&quot; at the end of the installation.<br />
<br />
I don't know how to check a condition in order to launch / don't launch my program, and I don't know how to read a parameter and launch a program with this parameter as argument.<br />
<br />
How NSIS can do this ?<br />
<br />
Thanks for your help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th December 2009, 15:35</div></div><div class="posttext">Why don't you try searching the forums for 'command line parameters'?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">7th December 2009, 16:09</div></div><div class="posttext">and search NSIS documentation for 'command line parameters'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgrasland</div><div class="date">7th December 2009, 16:47</div></div><div class="posttext">Sorry, I didn't understand how GetParameters / GetOptions worked.<br />
<br />
Now, I can see how to detect if it's an update or an install, but how can I pass the parameter value to the program ?<br />
<br />
Actually, I'm launching a program with the following lines :<br />
<br />
; Finish page<br />
!define MUI_FINISHPAGE_RUN &quot;$INSTDIR\MyApp.exe&quot;<br />
!define MUI_FINISHPAGE_RUN_PARAMETERS &quot;test&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
I don't know how to use a variable as parameter.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">7th December 2009, 17:04</div></div><div class="posttext">Var myvar<br />
<br />
!define MUI_FINISHPAGE_RUN_PARAMETERS &quot;$myvar&quot;<br />
<br />
StrCpy myvar &quot;value&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdt2oo7</div><div class="date">8th December 2009, 07:16</div></div><div class="posttext">Hi Wizou,<br />
<br />
I am also having trouble using variable at runtime. Seem like it has to be a static variable in order for it to work. Below is what I am trying to do, but $Country have to be pre-defined.<br />
Is there anyway it can be variable like how I want it?<br />
<br />
Thanks!<br />
<br />
===<br />
<br />
  Var Country<br />
<br />
; License page<br />
  !define MUI_LICENSEPAGE_CHECKBOX<br />
  !insertmacro MUI_PAGE_LICENSE &quot;..\doc\${Country}\license.rtf&quot;<br />
<br />
Function CountrySelectionLeave<br />
   ${NSD_LB_GetSelection} $ListBox $0<br />
   StrCpy $Country $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">8th December 2009, 07:58</div></div><div class="posttext">!insertmacro MUI_PAGE_LICENSE &quot;..\doc\${Country}\license.rtf&quot;<br />
(...)<br />
   StrCpy $Country $0 <br />
Either it is a variable $Country, or it is a define ${Country}. It's one or the other, you can't have it both ways.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">8th December 2009, 08:32</div></div><div class="posttext">@jdt2oo7: You can't select the license text file at runtime (except through multilanguage) because NSIS has to know about those files at compile-time in order to compress them inside the installer.<br />
Your problem is more about the display of a text determined at runtime, and I see you have already opened a different forum thread for that.<br />
<br />
Be careful with the various way of using $ in NSIS :<br />
<br />
${xxx} refers to a !define xxx (constant at compile-time)<br />
$(xxx) refers to a LangString xxx (translation)<br />
$xxx refers to a Var xxx (variable)<br />
$%xxx% refers to a Windows/DOS environment variable (defined at compile-time)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdt2oo7</div><div class="date">8th December 2009, 22:09</div></div><div class="posttext">Thanks for your responses, MSG and Wizou!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>