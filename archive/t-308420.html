<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" keep the language user choose, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  keep the language user choose NSIS Discussion" />
	
	<title> keep the language user choose [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  keep the language user choose</div>
<hr />
<div class="pda"><a href="t-308420.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308420">keep the language user choose</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">skuallpa</div><div class="date">16th July 2009, 13:33</div></div><div class="posttext">Hello,<br />
<br />
I am making an installer in several languages<br />
<br />
So I use <br />
;Languages     <br />
!insertmacro MUI_LANGUAGE &quot;English&quot; ;first language is the default language   <br />
!insertmacro MUI_LANGUAGE &quot;French&quot;   <br />
!insertmacro MUI_LANGUAGE &quot;German&quot;   <br />
!insertmacro MUI_LANGUAGE &quot;Spanish&quot; <br />
<br />
I want to write a key in the register in function of the choice of the language. How can I do that? I mean, how can I do<br />
<br />
if(user selected french)<br />
  WriteRegStr HKLM &quot;Software\MySoft&quot; &quot;Language&quot; &quot;FR&quot;<br />
else if(user selected spanish)<br />
  WriteRegStr HKLM &quot;Software\MySoft&quot; &quot;Language&quot; &quot;ES&quot;<br />
...<br />
<br />
Thanks in advance for your help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">16th July 2009, 14:20</div></div><div class="posttext">Search the documentation for &quot;Settings for registry storage of selected language&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skuallpa</div><div class="date">16th July 2009, 14:37</div></div><div class="posttext">Thanks jpderuiter for your answer!<br />
<br />
<br />
Function .onInit<br />
<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
FunctionEnd<br />
<br />
<br />
Just a question for the implementation. In the doc, it is written<br />
<br />
 To remember the user's preference, you can define a registry key. These defines should be set before inserting the installation page macro.  <br />
MUI_LANGDLL_REGISTRY_ROOT root <br />
MUI_LANGDLL_REGISTRY_KEY key <br />
MUI_LANGDLL_REGISTRY_VALUENAME value_name <br />
<br />
The registry key to store the language. The users preference will be remembered. You can also use it for the uninstaller to display the right language. Don't forget to remove this key in the uninstaller.<br />
<br />
I am a little confused. How should I defines this key<br />
<br />
MUI_LANGDLL_REGISTRY_ROOT = HKLM <br />
MUI_LANGDLL_REGISTRY_KEY = Language<br />
MUI_LANGDLL_REGISTRY_VALUENAME = FR ?<br />
<br />
and then write WriteRegStr MUI_LANGDLL_REGISTRY_ROOT MUI_LANGDLL_REGISTRY_KEY MUI_LANGDLL_REGISTRY_VALUENAME?<br />
<br />
Can you give me a little example?<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">16th July 2009, 15:08</div></div><div class="posttext">All you need to do is to define the three values.<br />
No need for WriteRegStr.<br />
See the MUI MultiLanguage example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skuallpa</div><div class="date">16th July 2009, 15:23</div></div><div class="posttext">Thanks again jpderuiter<br />
<br />
I have done some tests<br />
<br />
<br />
!define MUI_LANGDLL_REGISTRY_ROOT HKLM<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\MySoft&quot;<br />
!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;InstallerLanguage&quot;<br />
<br />
After the installation I have well the value written in the register (I had selected French for installation)<br />
<br />
http://img23.imageshack.us/img23/5137/registerl.jpg<br />
<br />
But I have read in an other post that we can used the $LANGUAGE in order to know the language that the user has choosen.<br />
<br />
So I have tried to write <br />
<br />
WriteRegStr HKLM &quot;Software\MySoft&quot; &quot;Language&quot; &quot;${LANGUAGE}&quot; <br />
<br />
But here is the result<br />
http://img16.imageshack.us/img16/264/register2l.jpg<br />
<br />
Why is the value $LANGUAGE ant not FR ?<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skuallpa</div><div class="date">16th July 2009, 15:31</div></div><div class="posttext">I have corrected the second point by replacing<br />
<br />
WriteRegStr HKLM &quot;Software\MySoft&quot; &quot;Language&quot; &quot;${LANGUAGE}&quot; <br />
<br />
by <br />
<br />
WriteRegStr HKLM &quot;Software\MySoft&quot; &quot;Language&quot; &quot;$LANGUAGE&quot; <br />
<br />
But is there a way to write for example FR instead of 1036 (for french)?. I mean, is it possible to write the tag of the language instead of the code of the language?<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">16th July 2009, 16:32</div></div><div class="posttext">You can't with MUI as it is.<br />
You'll have to modify the MUI plugin to do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skuallpa</div><div class="date">17th July 2009, 06:50</div></div><div class="posttext">Ok thanks for your reply. This is what I have finally done<br />
<br />
<br />
${If} $LANGUAGE == 1031<br />
   WriteRegStr HKLM &quot;Software\KeyLemon&quot; &quot;Language&quot; &quot;DE&quot;<br />
${ElseIf} $LANGUAGE == 1033<br />
   WriteRegStr HKLM &quot;Software\KeyLemon&quot; &quot;Language&quot; &quot;EN&quot;<br />
${ElseIf} $LANGUAGE == 1034<br />
   WriteRegStr HKLM &quot;Software\KeyLemon&quot; &quot;Language&quot; &quot;ES&quot;<br />
${ElseIf} $LANGUAGE == 1036<br />
   WriteRegStr HKLM &quot;Software\KeyLemon&quot; &quot;Language&quot; &quot;FR&quot;<br />
${Else}<br />
   WriteRegStr HKLM &quot;Software\KeyLemon&quot; &quot;Language&quot; &quot;EN&quot;<br />
${EndIf} <br />
<br />
<br />
I get the language code here: http://www.science.co.il/language/Locale-Codes.asp?s=country<br />
<br />
I just need a precision. I have seen that there is a full of different code for french or spain language for example<br />
<br />
For example <br />
<br />
French (France)	        1036<br />
French (Cameroon)	11276<br />
French (Congo, DRC)	9228<br />
French (Cote d'Ivoire)	12300<br />
French (Mali)	13324	340c<br />
French (Morocco)	14348<br />
French (Senegal)	10252<br />
French (West Indies)	7180<br />
<br />
<br />
If the user choose french for installation. Can I be sure that the returned language code is 1036 or it could be another one?<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">17th July 2009, 08:21</div></div><div class="posttext">Yes, if the user chooses french, the language code will be 1036.<br />
It is defined in the French.nlf file in the Contrib\Language files folder of NSIS.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>