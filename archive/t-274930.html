<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Newbie help - changing install drive in MUI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Newbie help - changing install drive in MUI NSIS Discussion" />
	
	<title> Newbie help - changing install drive in MUI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Newbie help - changing install drive in MUI</div>
<hr />
<div class="pda"><a href="t-274930.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274930">Newbie help - changing install drive in MUI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mjfirley</div><div class="date">25th July 2007, 20:01</div></div><div class="posttext">Hi, <br />
<br />
OK, this is probably SO old hat to the experienced folks but I can't seem to find a direct answer so here goes:<br />
<br />
I have an install script that works a treat.  I use MUI_PAGE_DIRECTORY to allow the user to specify where the installer will write its files.  I'm using this so they can direct the output to a drive other than C:<br />
<br />
The bad thing is that the way I currently have it written, the user can rename the directory (which I don't want) as well as select a different drive (which I do want).  <br />
<br />
So far as I can see, I seem to have two ways out of this:<br />
<br />
1. Truncate the install directory name to C:, then append via StrCopy the full path name at a later point in the code.  But then I need to understand how to change the wording on the default panel.<br />
<br />
2. Find a sample custom dialog if it's available.  <br />
<br />
<br />
Thoughts and (positive) suggestions would be appreciated. <br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">25th July 2007, 21:53</div></div><div class="posttext">This changes the default label and text.Function DirectoryPageShow<br />
  FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $1 $0 1006<br />
  SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:The installation requires you to select a drive.&quot;<br />
  GetDlgItem $1 $0 1020<br />
  SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:Target Drive&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th July 2007, 22:25</div></div><div class="posttext">The easiest way is to set the directory text box to read-only so the user can only browse for a folder:<br />
http://forums.winamp.com/showthread.php?threadid=272851<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mjfirley</div><div class="date">2nd August 2007, 15:31</div></div><div class="posttext">What I have is an installer that calls an MUI page: <br />
$INSTDIR = &quot;MandatoryName&quot; <br />
<br />
!insertmacro MUI_PAGE_DIRECTORY   <br />
;  Use the above option to give user a choice as to where <br />
;  the install is located<br />
<br />
Right now, that produces a dialog that asks the user to select an install directory and defaults to:<br />
<br />
C:\MandatoryName <br />
<br />
What I want to do instead is to allow the MUI_PAGE_DIRECTORY to specify not the directory, but the drive so that the dialog essentially becomes: <br />
<br />
+----------------------------------+<br />
| Select a drive to install to     + <br />
|   +---+                          +<br />
|   |C: |                          +<br />
|   +---+                          +<br />
|              Continue   Cancel   + <br />
+----------------------------------+<br />
<br />
Now I know it's possible to write a dialog but since all my other pages are MUI format, I was hoping to find a way to control MUI_PAGE_DIRECTORY.  <br />
<br />
I've done a fair amount with programming NSIS, but I confess that I'm a procedural language junkie (read &quot;old guy&quot;) so the dialog management is a bit mysterious.<br />
<br />
Do you have a suggestion on how to fix this or a place where I can get better MUI documentation and learn more?<br />
<br />
Thanks,<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd August 2007, 15:47</div></div><div class="posttext">Nope, for what you want it would be much better to do a custom page with a list box containing the drives (use GetDrives).<br />
Someone has already done this on the forum once or twice.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">2nd August 2007, 16:55</div></div><div class="posttext">Originally posted by Afrow UK <br />
Nope, for what you want it would be much better to do a custom page with a list box containing the drives (use GetDrives).<br />
Someone has already done this on the forum once or twice.<br />
<br />
Stu <br />
<br />
Someone might be me ;) here's the link,<br />
<br />
http://nsis.sourceforge.net/Adding_DropList_with_available_drives_instead_of_directory_page</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>