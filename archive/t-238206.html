<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Hidden shares on UNC paths, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Hidden shares on UNC paths NSIS Discussion" />
	
	<title> Hidden shares on UNC paths [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Hidden shares on UNC paths</div>
<hr />
<div class="pda"><a href="t-238206.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=238206">Hidden shares on UNC paths</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">simham_uk</div><div class="date">16th February 2006, 17:13</div></div><div class="posttext">Hi all<br />
<br />
Its been a while since I've been around here...I hope everyone is as helpful as ever!<br />
<br />
I'm trying to use strCpy to copy a UNC path with a hidden share but it seems to have trouble parsing the dollar sign in the path.  I've tried double dollars to escape it but that makes things worse!<br />
<br />
This is very similar to what I've been playing with:<br />
<br />
Section &quot;&quot;<br />
  Var /GLOBAL uncpath<br />
  StrCpy $uncpath &quot;\\filesrv01\myfolder$\inifile.ini&quot;<br />
  ReadINIStr $R1 $uncpath MYSECTION myatt<br />
  MessageBox MB_OK &quot;Value of R1 is '$R1'&quot;<br />
SectionEnd<br />
<br />
<br />
Any ideas on how to make this work successfully or do I have to avoid hidden shares?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">16th February 2006, 17:36</div></div><div class="posttext">Section &quot;&quot;<br />
  Var /GLOBAL uncpath<br />
  StrCpy $uncpath &quot;\\filesrv01\myfolder$$\inifile.ini&quot;<br />
  MessageBox MB_OK &quot;Value of $$uncpath is '$uncpath'&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">simham_uk</div><div class="date">16th February 2006, 18:30</div></div><div class="posttext">Originally posted by Instructor <br />
Section &quot;&quot;<br />
  Var /GLOBAL uncpath<br />
  StrCpy $uncpath &quot;\\filesrv01\myfolder$$\inifile.ini&quot;<br />
  MessageBox MB_OK &quot;Value of $$uncpath is '$uncpath'&quot;<br />
SectionEnd <br />
<br />
This is also what I tried but it fails...I dont care about the message box just the ini value but using that string in StrCpy ends up in error wiht the first char removed from the inifile.ini, looking at the output from the compile.<br />
<br />
Any further suggestions?<br />
<br />
Is this supposed to work?<br />
<br />
BTW, I'm using the latest build downloaded from SF today, 2.14?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">16th February 2006, 20:27</div></div><div class="posttext">hmm... Your sample worked fine for me.  What version of NSIS are you using?  I've got 2.14.<br />
<br />
My sample script:<br />
<br />
name &quot;test backslash&quot;<br />
outfile &quot;Test Backslash.exe&quot;<br />
var mypath<br />
Section<br />
Sectionend<br />
<br />
function .oninit<br />
   Setsilent silent<br />
   strcpy $mypath &quot;\\filesrv01\myfolder$$\inifile.ini&quot;<br />
   messagebox MB_OK &quot;$$mypath = $mypath&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">simham_uk</div><div class="date">17th February 2006, 10:13</div></div><div class="posttext">Originally posted by Comperio <br />
hmm... Your sample worked fine for me.  What version of NSIS are you using?  I've got 2.14.<br />
<br />
My sample script:<br />
<br />
name &quot;test backslash&quot;<br />
outfile &quot;Test Backslash.exe&quot;<br />
var mypath<br />
Section<br />
Sectionend<br />
<br />
function .oninit<br />
   Setsilent silent<br />
   strcpy $mypath &quot;\\filesrv01\myfolder$$\inifile.ini&quot;<br />
   messagebox MB_OK &quot;$$mypath = $mypath&quot;<br />
FunctionEnd<br />
 <br />
<br />
Yeah that works for me too.  The problem seems to be that my inifile.ini actually begins with a &quot;t&quot;...so much for sanitising my examples.  So the path is actually:<br />
<br />
\\filesrv01\myfolder$$\tinifile.ini<br />
<br />
Which generates an error (ignored) during compile.<br />
<br />
My solution was to rename the inifile but I'm curious to know how to fix this issue when the inifile does begin with &quot;t&quot;.<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhaelochon</div><div class="date">17th February 2006, 14:47</div></div><div class="posttext">Might be a bug. It acts like it's interpreting the &quot;$\t&quot; as a tab character (reference (http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.4)) regardless of the escaped the dollar sign.<br />
<br />
On the other hand, it could be a design decision.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">18th February 2006, 02:19</div></div><div class="posttext">Bug?  Maybe..<br />
<br />
But, here's a workaround (or a solution, depending on how you look it!)  <br />
<br />
<br />
name &quot;test backslash&quot;<br />
outfile &quot;Test Backslash.exe&quot;<br />
var mypath<br />
var dol <br />
Section<br />
Sectionend<br />
<br />
function .oninit<br />
   Setsilent silent<br />
   strcpy $dol &quot;$$&quot;<br />
   strcpy $mypath &quot;\\filesrv01\myfolder$dol\tnifile.ini&quot;<br />
   messagebox MB_OK &quot;$$mypath = $mypath&quot;<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>