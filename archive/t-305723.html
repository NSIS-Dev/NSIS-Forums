<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" localized MUI_WELCOMEFINISHPAGE_BITMAP, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  localized MUI_WELCOMEFINISHPAGE_BITMAP NSIS Discussion" />
	
	<title> localized MUI_WELCOMEFINISHPAGE_BITMAP [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  localized MUI_WELCOMEFINISHPAGE_BITMAP</div>
<hr />
<div class="pda"><a href="t-305723.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=305723">localized MUI_WELCOMEFINISHPAGE_BITMAP</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mythicwave</div><div class="date">25th April 2009, 19:17</div></div><div class="posttext">I'm writing a multi-language installer with MUI2 and everything is working except that I'm having problems getting a localized banner graphic to work.  I'm using a string called $LangCode to determine which directory to pull localized resources from.  When I use something like:<br />
<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;c:\srcDir\$(LangCode)\banner.bmp&quot;<br />
<br />
I'm getting a compile error about banner.bmp not being found. I'm using a language dialog to select the language.  So my question is how do I get the welcome / finish pages to show a localized graphic without writing separate exes for each language?<br />
<br />
Thanks,<br />
<br />
Brian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th April 2009, 19:43</div></div><div class="posttext">That won't work. How can the compiler compress a file at compile time that is under a path that you determine at run time?<br />
<br />
You need to extract a different bitmap depending on the language before the welcome page is displayed. Define your own MUI_PAGE_CUSTOMFUNCTION_SHOW and in that function you can set the new bitmap with this code:<br />
<br />
${NSD_SetImage} $mui.WelcomePage.Image $PLUGINSDIR\modern-wizard.bmp $mui.WelcomePage.Image.Bitmap<br />
<br />
Just extract the localized bitmap as $PLUGINSDIR\modern-wizard.bmp first. To extract a bitmap depending on the language, use a ${Switch} or ${If} ... ${ElseIf} with $LANGUAGE.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mythicwave</div><div class="date">25th April 2009, 20:41</div></div><div class="posttext">Thanks for the help, but I think I'm missing a few steps here.  I'm pretty new to NSIS and although I have a complex installer working, I'm still slow. I'm not sure how to define the custom function MUI_PAGE_CUSTOMFUNCTION_SHOW.  Can you give me a little more detail?  Also, which function do I use to extract a bitmap?<br />
<br />
On a related note, I can use runtime variables in !define statements at compile time, right?  For example, this seems to work:<br />
<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\MyCompany\$(AppName)&quot;<br />
<br />
Where $(AppName) is determined by the language selection.<br />
<br />
-- Brian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mythicwave</div><div class="date">26th April 2009, 00:27</div></div><div class="posttext">Hi,<br />
<br />
It looks like I finally got this working after struggling all day.  But I'm using CopyFiles to copy the modern-wizard.bmp file to $PLUGINSDIR inside of my custom SHOW function.  This works but doesn't seem exactly right.  I think I should be using the File command to extract it.  Where would I put the File command so that it extracts the file before the first call to SHOW?<br />
<br />
Thanks,<br />
<br />
Brian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2009, 22:56</div></div><div class="posttext">Just use the File instruction with the /oname= switch like so:<br />
<br />
${Switch} $LANGUAGE<br />
${Case} ${LANG_ENGLISH}<br />
  File /oname=$PLUGINSDIR\modern-wizard.bmp english.bmp<br />
  ${Break}<br />
${Case} ${LANG_FRENCH}<br />
...<br />
${Default}<br />
...<br />
${EndSwitch}<br />
<br />
Edit: You may also want to use ReserveFile on those bitmaps so they are extracted quickly.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>