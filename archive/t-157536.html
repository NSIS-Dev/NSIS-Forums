<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to read the content of a variable?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to read the content of a variable? NSIS Discussion" />
	
	<title> How to read the content of a variable? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to read the content of a variable?</div>
<hr />
<div class="pda"><a href="t-157536.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=157536">How to read the content of a variable?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dleclair</div><div class="date">25th November 2003, 10:41</div></div><div class="posttext">Hi.<br />
<br />
I actually do not really understand what i'm coding, i think...<br />
<br />
I want to get the path to reach the Common File directory... i'm using the following code to get it (i think this the right command at least):<br />
<br />
ReadRegStr $9 HKLM Software\Microsoft\Windows\CurrentVersion, CommonFilesDir <br />
<br />
then i just want to use the value stored in the variable named '$9'. Also i thought this could be done this way, but it seems i'm wrong...<br />
<br />
!insertmacro UpgradeDLL $9\designer\MSDERUN.DLL &quot;$9\designer\MSDERUN.DLL&quot; <br />
<br />
So my question is how can i read the value stored in variable $9 to use it anywhere in my script?<br />
<br />
Really sorry for such idiot question but i can't find the answer in the documentation and anywhere in the forum... even if i got some tips but no more...<br />
<br />
by the way i have to confess that the variable section is not treated well enough in the documentation to understand it well... but it's just my opinion anyway... cause'  just need to put more effort in it??!!:cry: <br />
<br />
Thanks <br />
<br />
dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th November 2003, 15:39</div></div><div class="posttext">You are mixing up compile-time and run-time. A variable can be used for run-time settings (like the destination of the DLL). Of course you can't use it for compile-time settings, like the location of the DLL on your system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zarged</div><div class="date">25th November 2003, 16:01</div></div><div class="posttext">The sytax is not quite correct, the following should help:<br />
<br />
Using NSIS 2.0b4<br />
<br />
ReadRegDWORD $9 HKLM &quot;Software\Microsoft\Windows\CurrentVersion&quot; &quot;CommonFilesDir&quot;<br />
<br />
!insertmacro UpgradeDLL &quot;MSDERUN.DLL&quot; &quot;$9\designer\MSDERUN.DLL&quot; &quot;$SYSDIR&quot;<br />
<br />
<br />
$0-9 tend to be used as Global variable, ie: can be used in other sections/functions.<br />
$R0-R9 tend to be used a temporary variable for the section/function.<br />
To use $9 else where, just put it in the command you are using, for example:<br />
<br />
<br />
StrCpy $1 &quot;sheep&quot; ;puts the word &quot;sheep&quot; into $1 variable<br />
<br />
StrCpy $2 &quot;3&quot; ;puts the number &quot;3&quot; into $2 variable  <br />
<br />
DetailPrint &quot;I have $3 $1&quot; ;will display &quot;I have 3 sheep&quot; in details window<br />
<br />
<br />
Alternatively you can use your own global or temporary variables, for example:<br />
<br />
<br />
!define GV_Animal &quot;sheep&quot; ;puts the word &quot;sheep&quot; into global variable<br />
<br />
Var &quot;MyVariable ;Declare own variable<br />
StrCpy &quot;$MyVariable&quot; &quot;3&quot; ;puts the number &quot;3&quot; into own variable  <br />
<br />
DetailPrint &quot;I have $MyVariable ${GV_Animal}&quot; ;will display &quot;I have 3 sheep&quot; in details window</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th November 2003, 16:41</div></div><div class="posttext">The last example is not correct. Defined symbols are no variables, they will be replaced on compile time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">25th November 2003, 17:32</div></div><div class="posttext">what a nice confusion we have... :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zarged</div><div class="date">25th November 2003, 17:35</div></div><div class="posttext">In the manual you can use !define to create a global value used by any part of the script, ie:<br />
<br />
<br />
!define VERSION &quot;V.1.0&quot;<br />
Name &quot;Test Program ${VERSION}&quot;<br />
<br />
This code sets the name of the installer to &quot;Test Program V.1.0&quot;<br />
<br />
<br />
At any point in the script you can retrieve it with ${Version}.<br />
<br />
I thought it would only change if you did define at compile time?<br />
<br />
Is there an alternative to setting a global value which can be used in the script at any point while compiling without the danager of it being replaced?<br />
<br />
Or am I at the wrong end of the stick again? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th November 2003, 18:06</div></div><div class="posttext">No, you're right. Only the name is wrong:<br />
<br />
!define GV_Animal &quot;sheep&quot; ;puts the word &quot;sheep&quot; into global variable<br />
<br />
It's a defined symbol that will be replaced on compile-time. It's not a variable you can change.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zarged</div><div class="date">25th November 2003, 23:00</div></div><div class="posttext">I see what you mean now, sorry for not being clearer. :) <br />
<br />
I have lots of code snippets I use for !includes and didn't relish the idea of having to through them and change the !defines.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>