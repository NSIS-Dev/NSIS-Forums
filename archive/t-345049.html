<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionIsSelected not working ... Or is it me, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionIsSelected not working ... Or is it me NSIS Discussion" />
	
	<title> SectionIsSelected not working ... Or is it me [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionIsSelected not working ... Or is it me</div>
<hr />
<div class="pda"><a href="t-345049.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=345049">SectionIsSelected not working ... Or is it me</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Squirre1</div><div class="date">22nd May 2012, 16:49</div></div><div class="posttext">I have a Pre-Install Processing section that contains the following lines:<br />
<br />
    ${If} ${SectionIsSelected} 'Main'<br />
      !insertmacro logme ${INSTLOG} &quot;Extracting Files for x86 Installation ... Please be Patient&quot; b<br />
      SetOutPath $INSTDIR\${APP_NAME}\32bit<br />
      File /r /x &quot;*.svn&quot; /x &quot;*${APP_NAME}*.*&quot; &quot;${INSTALL_SOURCE}\${APP_NAME}\32bit\*.*&quot;<br />
      SetOutPath $INSTDIR\${APP_NAME}<br />
    ${EndIf}<br />
<br />
    ${If} ${SectionIsSelected} 'Secondary'<br />
      !insertmacro logme ${INSTLOG} &quot;Extracting Files for x64 Installation ... Please be Patient&quot; b<br />
      SetOutPath $INSTDIR\${APP_NAME}\64bit<br />
      File /r /x &quot;*.svn&quot; /x &quot;*${APP_NAME}*.*&quot; &quot;${INSTALL_SOURCE}\${APP_NAME}\64bit\*.*&quot;<br />
      SetOutPath $INSTDIR\${APP_NAME}<br />
    ${EndIf}<br />
<br />
It does not appear to be functioning. And don't let the if line throw you on context, I have tried each of the following:<br />
${If} ${SectionIsSelected} 'Main'<br />
${If} ${SectionIsSelected} Main<br />
${If} ${SectionIsSelected} ${Main}<br />
${If} ${SectionIsSelected} '${Main}'<br />
<br />
Am I missing something on how the context should be... Section Main and Secondary function exactly as they should, this is the only part not working... It is almost like it never checks if the SF_SELECTED is set..<br />
<br />
Thanks,<br />
<br />
Squirre1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd May 2012, 18:01</div></div><div class="posttext">Just like SectionGetFlags etc. you give it the zero-based section index, which is optionally defined as a compile time constant if you specify one as the last parameter for Section.<br />
<br />
Look at the LogicLib.nsi example script.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">22nd May 2012, 18:13</div></div><div class="posttext">Expanding upon the previous answer -<br />
Your code is checking section 0 (because Main and 'Main' are strings without any other numeric equivalent). ${Main} is a 'defined' constant which (could be) set as the section index if you used statements likeSection /o &quot;The Main&quot; Main<br />
SectionEnd<br />
Section /o &quot;Another OS&quot; Secondary<br />
SectionEnd<br />
...<br />
Function blah<br />
${If} ${SectionIsSelected} ${Main}<br />
. You have to be careful that the Section statement occurs before (ie, is compiled before) the Pre-Install processing code that tries to use the defined constant, otherwise the test will again be testing section 0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Squirre1</div><div class="date">22nd May 2012, 18:45</div></div><div class="posttext">I had a long reply typed up and was just getting ready to submit when i caught the last part of your port demiller...<br />
<br />
In Layman's terms:<br />
Since I am trying to inquire on the status of ${Main}, it is referencing it prior to ${Main} being defined. At compile time it does not know how to reference it. Just as long as a I do the SectionIsSelected AFTER Section &quot;&quot; Main, it would not be an issue.. Since it is compiling in a linear fashion.<br />
<br />
That is what I am gathering... If that is the case I got ya.. Thanks...<br />
<br />
And yes Afrow, that is exactly what you said, just not so much as a Layman... LOL Thanks to you too... :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">marcins</div><div class="date">29th October 2013, 10:49</div></div><div class="posttext">great! it's working as it should!<br />
thank you!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>