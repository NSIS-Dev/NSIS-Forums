<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Detect directory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Detect directory NSIS Discussion" />
	
	<title> Detect directory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Detect directory</div>
<hr />
<div class="pda"><a href="t-151027.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=151027">Detect directory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">esky</div><div class="date">1st October 2003, 07:23</div></div><div class="posttext">Hey, I was wondering how I can go about having NSIS detect a persons installation directory for certain software... i.e. automatically find a person's winamp folder...<br />
<br />
also would be useful if you could make the installer refust to install till the person points it to the folder containing a specific file...<br />
<br />
anyway, thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st October 2003, 11:23</div></div><div class="posttext">The example named waplugin.nsi in your local Examples folder contains everything you've asked for. InstallDirRegKey to get the installation directory, .onVerifyInstDir to make sure the user chose the right directory and some more things related to Winamp.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">esky</div><div class="date">1st October 2003, 17:39</div></div><div class="posttext">i looked at the waplugin example, but it's really far more than what I'm looking for... and thus very confusing..<br />
<br />
here's the code I have right now:<br />
<br />
<br />
; The name of the installer<br />
Name &quot;deviantOne v1.3&quot;<br />
<br />
; The file to write<br />
OutFile &quot;devone13.exe&quot;<br />
<br />
; The default installation directory<br />
InstallDir C:\Sierra\Steam<br />
<br />
; The text to prompt the user to enter a directory<br />
ComponentText &quot;This will install deviantOne for Counter-Strike. [ DeviantOne.com ]&quot;&quot;Choose a preset:&quot;<br />
<br />
; Installation types<br />
InstType &quot;Full&quot;<br />
InstType &quot;Normal&quot;<br />
InstType &quot;Minimum&quot;<br />
DirText &quot;Enter your ROOT Steam directory:&quot;&quot;NOTE: Do not install into the 'cstrike' folder.&quot;<br />
<br />
; The stuff to install...<br />
<br />
;... took out a whole bunch of the stuff im copying to make this brief<br />
<br />
; eof <br />
<br />
<br />
I wanna find a way to detect the correct InstallDir by default...<br />
<br />
the registry key that holds the info is in HKEY_CURRENT_USER\Software\Valve\Steam and it's the string ModInstallPath with a value (for me) of c:\games\steam\steamapps\ncesky@hotmail.com\half-life<br />
<br />
However I need to cut off the half-life part and replace it with counter-strike\cstrike<br />
<br />
The other alternative is to use the string, in the same folder, SteamExe of value c:/games/steam/steam.exe and not allow the installer to go on till the person points to a dir containing a certain file...<br />
<br />
Anyway I'd appreciate if someone can write some examples of how I can go about this...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st October 2003, 17:49</div></div><div class="posttext">See http://forums.winamp.com/showthread.php?s=&amp;threadid=150997 for information on how to chop the path down.<br />
<br />
Use InstallDirRegKey to store the installer dir.<br />
This will be used to set and retrieve the key between different installations.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st October 2003, 18:33</div></div><div class="posttext">InstallDirRegKey only reads a key, you have to write it yourself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st October 2003, 18:34</div></div><div class="posttext">I learn something new everyday :)<br />
<br />
Thanks!<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>