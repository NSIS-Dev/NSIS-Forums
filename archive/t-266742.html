<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Registered all the files of a directory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Registered all the files of a directory NSIS Discussion" />
	
	<title> Registered all the files of a directory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Registered all the files of a directory</div>
<hr />
<div class="pda"><a href="t-266742.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266742">Registered all the files of a directory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">27th February 2007, 21:01</div></div><div class="posttext">Hello,<br />
<br />
I want to registered all the files (dll) of a directory automaticaly.<br />
<br />
Something likes<br />
<br />
!insertmacro InstallLib DLL 0 REBOOT_PROTECTED &quot;dossier\*.DLL&quot; &quot;$SYSDIR\*.DLL&quot; &quot;$SYSDIR&quot; <br />
Maybe with loop.<br />
<br />
I have try :<br />
FindFirst $0 $1 $folder1\*.dll<br />
loop:<br />
  StrCmp $1 &quot;&quot; done<br />
  !insertmacro InstallLib DLL 0 REBOOT_PROTECTED &quot;folder1\$1.DLL&quot; &quot;$SYSDIR\$1.DLL&quot; &quot;$SYSDIR&quot;<br />
  FindNext $0 $1<br />
  Goto loop<br />
done:<br />
<br />
But the compilation say : &quot;folder1\$1.DLL&quot; doesn't exist.<br />
<br />
Tanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 21:04</div></div><div class="posttext">It must compress the file and find it and therefore you can't do that at runtime. Use the following:<br />
<br />
http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">27th February 2007, 21:14</div></div><div class="posttext">Originally posted by kichik <br />
It must compress the file and find it and therefore you can't do that at runtime. Use the following:<br />
<br />
http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time  <br />
Sorry, but I don't understand how I must use this solution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">28th February 2007, 08:12</div></div><div class="posttext">Nobody ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2007, 08:27</div></div><div class="posttext">It's quite simple, you can't use runtime commands and variables in compile time.<br />
kichik's suggestion is to create a header following the method described in the link.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">28th February 2007, 13:24</div></div><div class="posttext">I don't understand how to use runtime commands and variables in compile time for my problem. :(<br />
Maybe somebody can show me another example who help me to understand.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">28th February 2007, 22:16</div></div><div class="posttext">Nobody to help me ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st March 2007, 19:19</div></div><div class="posttext">Your problem is using runtime commands and variables in compile time. The compiler tries to pack folder1\$1.dll but that only has meaning when the user actually runs the installer on his computer. $1 is a runtime variable and its value is calculated when the user launches the installer.<br />
<br />
The Wiki page I linked to shows how to use a script to create a file that the compiler can eat. What it actually does is running another installer that'd generate the script for your real installer.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>