<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Any way to specify the lifetime of the installer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Any way to specify the lifetime of the installer NSIS Discussion" />
	
	<title> Any way to specify the lifetime of the installer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Any way to specify the lifetime of the installer</div>
<hr />
<div class="pda"><a href="t-129108.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129108">Any way to specify the lifetime of the installer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cybereka</div><div class="date">20th March 2003, 05:50</div></div><div class="posttext">Hai all,<br />
I am using NSIS to create the installer for my code. I am trying to make something like trial version. Is there any way to keep track of installation date and checking for expire date and to close the application once it reaches the expiry date. Can someone guid me..........please.<br />
Many Thanks......<br />
With Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">20th March 2003, 08:08</div></div><div class="posttext">Current Date and Time Convertion to Seconds and Vice-Versa  (http://nsis.sourceforge.net/archive/nsisweb.php?page=164) should do the trick (but is not to easy!). NSISdt dll required to work.<br />
<br />
Use the first in your installation folder (DatetoSeconds Function), and save it to somewhere. To calculate if are passed 30 days:<br />
<br />
Read the seconds that you're saved before<br />
IntOp $0 $1 - $2 ;$1=the number detected now, $2=the number detected at first time. <br />
IntCmp $0 2592000 0 End<br />
The code<br />
End:<br />
<br />
An example:<br />
<br />
<br />
;detect the current date&amp;time in seconds - $1 = current time in seconds<br />
ReadINIDWORD $2 HKLM &quot;Software\Program Name&quot; &quot;30days&quot;<br />
IntOp $0 $1 - $2<br />
IntCmp $0 2592000 0 End<br />
MessageBox MB_OK &quot;The time to use this program is expired!&quot;<br />
End:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cybereka</div><div class="date">20th March 2003, 11:53</div></div><div class="posttext">But i couldn't open the page Current Date and Time Convertion to Seconds and Vice-Versa. So how can i take the date from nsis script is there any function available for that or i should do that with the help of someother code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">20th March 2003, 13:58</div></div><div class="posttext">Whatever you do I wouldn't suggest putting the registry value inside of your program's key. That's the first place someone would look to bypass your trial period. Also, I would make a change in your program to ensure that if the key isn't there and your program hasn't been registered to quit your program immediately. Otherwise people would just delete the key to keep using it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">20th March 2003, 14:04</div></div><div class="posttext">Here's the first part of the example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">20th March 2003, 14:05</div></div><div class="posttext">And... here's the 2nd part.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">20th March 2003, 14:07</div></div><div class="posttext">Bah, it didn't let me attach it. Let's try that again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">21st March 2003, 07:58</div></div><div class="posttext">Originally posted by cybereka <br />
But i couldn't open the page Current Date and Time Convertion to Seconds and Vice-Versa. So how can i take the date from nsis script is there any function available for that or i should do that with the help of someother code.  <br />
<br />
Use the link in my signature now.<br />
<br />
Originally posted by viper0179 <br />
Whatever you do I wouldn't suggest putting the registry value inside of your program's key. That's the first place someone would look to bypass your trial period. Also, I would make a change in your program to ensure that if the key isn't there and your program hasn't been registered to quit your program immediately. Otherwise people would just delete the key to keep using it.<br />
<br />
Is only a example, the registry is a grand explicity way to read from external of the program. The more safest way is to write in a file (not a INI file).<br />
<br />
I've fixed the code that I posted:<br />
<br />
<br />
;detect the current date&amp;time in seconds - $1 = current time in seconds<br />
;Read the old time from somewhere - $2 = old time in seconds<br />
IntOp $0 $1 - $2<br />
IntCmp $0 2592000 0 0 End<br />
MessageBox MB_OK &quot;The time to use this program is expired!&quot;<br />
;use a definitive code to disable the use of the program forever<br />
End:<br />
<br />
<br />
You can detect if the user changed the time to before the installation time and execute the program to get additional time (after the IntOp of the code above):<br />
<br />
<br />
IntCmp $0 0 0 End 0<br />
MessageBox MB_OK &quot;You cannot use anymore this program!&quot;<br />
;use a definitive code to disable the use of the program forever<br />
End:<br />
<br />
<br />
Ever use a definitive code to disable the code when is detected that passed the 30-days and this above. Because if the user change the time to between 30-days after expiring, don't run the installation again!<br />
<br />
The file &quot;part 1&quot; is Current Date to Seconds function, &quot;part 2&quot; is Seconds to Date function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st March 2003, 11:46</div></div><div class="posttext">deguix, the two last links in your signature don't work.<br />
Almost all of your pages are so large that for some reason they are truncated. Could you please trim them down a bit so everything will show until we figure out what's wrong and how to fix it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd March 2003, 18:13</div></div><div class="posttext">Fixed... one thing that I did wrong is deleting accidentally the basic example of the Current Time &amp; Date Convertion To Seconds and Vice-Versa page! (And I don't have it in my computer because the hard disk is ever full, so I'd deleted!)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd March 2003, 20:54</div></div><div class="posttext">good arhives deguix :up: . They simplify many task</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd March 2003, 21:12</div></div><div class="posttext">And more one: Advanced Search in String (http://nsis.sourceforge.net/archive/nsisweb.php?page=197)!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd March 2003, 21:19</div></div><div class="posttext">wao !<br />
Think about this: Nsis as another Language app to create Win32 app,<br />
and not only to create Installers. <br />
Nsis has many instructions to do that...<br />
Cool idea, doesn't? :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd March 2003, 21:23</div></div><div class="posttext">I agree! I made two or three programs with NSIS! A great utility, isn't it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd March 2003, 21:26</div></div><div class="posttext">yeah, and no need Runtime :D! What kind of apps did you make? I'm make an app to insert in<br />
every folder the instruction to call the command prompt(MS-DOS box)<br />
and begin from that folder.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd March 2003, 21:34</div></div><div class="posttext">An editor that can edit players, tribes, AIs, and other little things for a estrategy game called Civ Evolution (http://www.c-evo.org) (you can see this at forums, the editor is called Registry Changer 2). A terrain changer (that isn't published). And a files updater from the game site files page (that isn't published).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>