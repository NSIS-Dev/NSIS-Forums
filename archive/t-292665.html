<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" file not completly written, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  file not completly written NSIS Discussion" />
	
	<title> file not completly written [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  file not completly written</div>
<hr />
<div class="pda"><a href="t-292665.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292665">file not completly written</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 10:28</div></div><div class="posttext">ac.jnlp is my configfile with 53 lines, i read a tamplat of them, replace some placeholder and writ them to a specific directory.<br />
<br />
<br />
   Var /global ac.jnlp_template<br />
    Var /global fp_ac.jnlp<br />
    ClearErrors<br />
    FileOpen $fp_ac.jnlp '${copiedfiles_Path}\Templates\html\diag\\jnlp\ac\ac.jnlp' r<br />
    IfErrors ac.jnlp_done<br />
    FileRead $fp_ac.jnlp $2<br />
    Detailprint $2<br />
    IfErrors ac.jnlp_eof<br />
    StrCpy $ac.jnlp_template '$ac.jnlp_template$2'<br />
    Goto -4<br />
    ac.jnlp_eof:<br />
    FileClose $fp_ac.jnlp<br />
    Var /global fp_ac.jnlp_patched<br />
    Var /global ac.jnlp_patched<br />
    ${StrRep} $ac.jnlp_patched &quot;$ac.jnlp_template&quot; &quot;$Server&quot; &quot;$Servername&quot; #Ersetzen des Platzhalters $Server mit dem Inhalt der Variablen $Server<br />
    SetOutPath '$INSTDIR\html\diag\jnlp\AC'<br />
    ClearErrors<br />
    FileOpen $fp_ac.jnlp_patched 'ac.jnlp' w<br />
    IfErrors ac.jnlp_patched_done<br />
    FileWrite $fp_ac.jnlp_patched $ac.jnlp_patched<br />
    Messagebox MB_OK &quot;$ac.jnlp_patched&quot;<br />
    FileClose $fp_ac.jnlp_patched<br />
    Goto +4<br />
    ac.jnlp_patched_done:<br />
    DetailPrint 'Konnte ac.cfg nicht Ã¶ffnen.(schreiben)'<br />
    Goto +2<br />
    ac.jnlp_done:<br />
    DetailPrint 'Konnte ac.cfg nicht Ã¶ffnen.(lesen)'<br />
<br />
<br />
ok the detailprint show me, that my file is completely read.<br />
<br />
but if i write the string to the file, he only writes 29 lines. This is a Problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 10:53</div></div><div class="posttext">in a second test he writes only 31 lines with fewer text per line. in my opinion is the space of a Variable to small.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 11:00</div></div><div class="posttext">or the length of the string is too small</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">3rd June 2008, 11:03</div></div><div class="posttext">NSIS variables are limited to 1024 characters. You can download NSIS special build with 8192 max string length, but that isn't really a solution.<br />
<br />
What you should do is to read and write the file in 1024 blocks. It needs a little planning, but it can be done.<br />
<br />
PaR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 11:12</div></div><div class="posttext">oh thats a good info, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 11:59</div></div><div class="posttext">ok i chaned it but now i have an &quot;ungÃ¼ltiger Befehlscode&quot;-Error<br />
<br />
<br />
  Var /global fp_alarmconfigurator.cfg<br />
    Var /global fp_alarmconfigurator.cfg_patched<br />
    Var /global alarmconfigurator.cfg_template<br />
    Var /global alarmconfigurator.cfg_patched<br />
    /* Datei einlesen und schreiben*/<br />
    ClearErrors<br />
    FileOpen $fp_alarmconfigurator.cfg '${copiedfiles_Path}\Templates\html\diag\jnlp\AlarmConfigurator\alarmconfigurator.cfg' r<br />
    IfErrors alarmconfigurator.cfg_done<br />
    Messagebox MB_OK &quot;Ã¶ffnen lesen ging&quot;<br />
    ClearErrors<br />
    SetOutPath '$INSTDIR\html\diag\jnlp\AlarmConfigurator'<br />
    FileOpen $fp_alarmconfigurator.cfg_patched 'alarmconfigurator.cfg' w<br />
    IfErrors alarmconfigurator.cfg_patched_done<br />
    Messagebox MB_OK &quot;Ã¶ffnen schreiben ging&quot;<br />
    ClearErrors<br />
    Messagebox MB_OK &quot;vor dem zeile lesen&quot;<br />
    FileRead $fp_alarmconfigurator.cfg $1<br />
    Messagebox MB_OK &quot;zeilen lesen ging \r\n Wert: $1&quot;<br />
    IfErrors alarmconfigurator.cfg_eof<br />
    StrCpy $alarmconfigurator.cfg_template '$1'<br />
<br />
    ${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_template&quot; &quot;$ServerDB&quot; &quot;$ProduktivDB_Hostname&quot;<br />
    #${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;&quot; &quot;$ProduktivDB_TNSname&quot;<br />
    ${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;$DB&quot; &quot;$ProduktivDB_DBSID&quot;<br />
    #${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;&quot; &quot;$ProduktivDB_Listenerport&quot;<br />
    ${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;$User&quot; &quot;$ProduktivDB_Mainuser&quot;<br />
    #${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;&quot; &quot;$ProduktivDB_MainuserPasswort&quot;<br />
    ${StrRep} $alarmconfigurator.cfg_patched &quot;$alarmconfigurator.cfg_patched&quot; &quot;$Server&quot; &quot;$Servername&quot;<br />
    <br />
    FileWrite $fp_alarmconfigurator.cfg_patched $alarmconfigurator.cfg_patched<br />
    iferrors 0 +2<br />
    Messagebox MB_OK &quot;Fehler beim schreiben&quot;<br />
    <br />
    Messagebox MB_OK &quot;zeile schreiben ging \r\n Wert: $alarmconfigurator.cfg_patched&quot;<br />
    Goto -13<br />
    alarmconfigurator.cfg_eof:<br />
    <br />
    FileClose $fp_alarmconfigurator.cfg_patched<br />
    FileClose $fp_alarmconfigurator.cfg<br />
   <br />
    Goto +4<br />
    alarmconfigurator.cfg_patched_done:<br />
    DetailPrint 'Konnte alarmconfigurator.cfg_template nicht Ã¶ffnen.(schreiben)'<br />
    Goto +2<br />
    alarmconfigurator.cfg_done:<br />
    DetailPrint 'Konnte alarmconfigurator.cfg_template nicht Ã¶ffnen.(lesen)'<br />
<br />
<br />
the first line is writen into the File, but then where he must jump 13 Lines back, there comes the  Error<br />
<br />
I dont know why</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">3rd June 2008, 12:05</div></div><div class="posttext">Use jump to label instead of relative jump. ${StrRep} is a macro so there is actually a lot more lines than 13.<br />
<br />
PaR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 12:10</div></div><div class="posttext">oh ... ok</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssam</div><div class="date">3rd June 2008, 12:44</div></div><div class="posttext">thanks this helps</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>