<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" DirRequest, I can't get dir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  DirRequest, I can't get dir NSIS Discussion" />
	
	<title> DirRequest, I can't get dir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  DirRequest, I can't get dir</div>
<hr />
<div class="pda"><a href="t-285214.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=285214">DirRequest, I can't get dir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Coolblu77</div><div class="date">18th January 2008, 17:06</div></div><div class="posttext">I've made an Install Options file that's basically a few labels and a DirRequest.<br />
<br />
After the user has pressed Next, I want to get a string of the dir that they chose.<br />
<br />
I'm not sure which entry name I'm supposed to be checking, so I've been trying to get something from State or Text, but seem  to be getting nothing back.<br />
<br />
Also I've tried using insertmacro and ReadINIStr but neither work.<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $ChosenDir1 &quot;$PLUGINSDIR\ChooseInstallDir.ini&quot; &quot;Field 3&quot; &quot;State&quot;;  <br />
  ReadINIStr $ChosenDir2 &quot;$PLUGINSDIR\ChooseInstallDir.ini&quot; &quot;Field 3&quot; &quot;Text&quot;<br />
<br />
  MessageBox MB_OK &quot;Values are = $ChosenDir1 and $ChosenDir2&quot;<br />
<br />
This message box just gives me &quot;Values are =  and  &quot;<br />
<br />
Any ideas of what I'm doing wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">18th January 2008, 17:32</div></div><div class="posttext">MUI_INSTALLOPTIONS_READ does not need the full path IIRC<br />
<br />
where are you reading, you probably have to do the reading in the leave callback<br />
<br />
if you put a messagebox in the leave function, you can inspect the .ini in you temp folder to make sure you are reading the right value and that you have the correct field id</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Coolblu77</div><div class="date">21st January 2008, 09:54</div></div><div class="posttext">Thanks for the reply Anders.<br />
<br />
I was already trying to read the value in the Leave function.<br />
<br />
I think you're right about MUI_INSTALLOPTIONS_READ, it doesn't seem to get the path.<br />
<br />
But I've got ReadINIStr working now, thanks to your idea of using a MessageBox to display the filename.<br />
It turned out I was using the wrong field number and the wrong filename (got 2 very similar ones).<br />
Also it was the State that needed reading.<br />
<br />
Thanks for helping me to find my stupid mistakes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st January 2008, 10:45</div></div><div class="posttext">MUI_INSTALLOPTIONS_READ requires a path relative to $PLUGINSDIR.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>