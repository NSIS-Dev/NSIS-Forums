<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How set condition of the controls?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How set condition of the controls? NSIS Discussion" />
	
	<title> How set condition of the controls? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How set condition of the controls?</div>
<hr />
<div class="pda"><a href="t-166861.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=166861">How set condition of the controls?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">anonym</div><div class="date">27th January 2004, 08:14</div></div><div class="posttext">There is a page custom with one CheckBox and two labels, two password fields.<br />
If CheckBox checked then labels and fields enable, if unchekced - disable.<br />
<br />
All works perfectly, but when I press Next button and then return on my page (press Back button) - conditions of the controls don't save, program get it from the .ini file everytime on show page custom.<br />
<br />
I change .ini file in leave fuction, but it don't work:<br />
<br />
Function LeaveCustomB<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $0 &quot;${PAGE_PASSWORD}&quot; &quot;${SECTION_SETTINGS}&quot; &quot;State&quot;<br />
  StrCmp $0 0 validate                                       ; Next button<br />
  StrCmp $0 ${ID_FLD_PROTECTION_MODE} gotoProtection         ;<br />
  Abort<br />
<br />
gotoProtection:<br />
  ; [Get Password protection mode]<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP} &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_PROTECTION_MODE}&quot; &quot;State&quot;<br />
<br />
  ; [Get HWND current page of installation]<br />
  FindWindow $hwnd &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
<br />
  ; [Enable/Disable Password label]<br />
  GetDlgItem ${TEMP_2} $hwnd ${ITEM_LBL_PASSWORD}<br />
  EnableWindow ${TEMP_2} ${TEMP}<br />
<br />
  ; [Enable/Disable Password field]<br />
  GetDlgItem ${TEMP_2} $hwnd ${ITEM_PASSWORD}<br />
  EnableWindow ${TEMP_2} ${TEMP}<br />
  IntCmp ${TEMP} 0 gotoNextCtl<br />
    ; [Set focus on specified control]<br />
    ;SendMessage $hwnd ${WM_NEXTDLGCTL} ${TEMP} 1<br />
    SendMessage $hwnd ${WM_NEXTDLGCTL} 0 0 ; Set focus on next control (Password field)<br />
<br />
gotoNextCtl:<br />
  ; [Enable/Disable Confirmation Password label]<br />
  GetDlgItem ${TEMP_2} $hwnd ${ITEM_LBL_CONFIRMATION_PASSWORD}<br />
  EnableWindow ${TEMP_2} ${TEMP}<br />
<br />
  ; [Enable/Disable Confirmation Password field]<br />
  GetDlgItem ${TEMP_2} $hwnd ${ITEM_CONFIRMATION_PASSWORD}<br />
  EnableWindow ${TEMP_2} ${TEMP}<br />
<br />
;;;;;;;;;;;;;;;;;;<br />
  IntCmp ${TEMP} 0 gotoNotEnable<br />
    ; [Enable labels and fields password and confirmation password]<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${LBL_PASSWORD}&quot; &quot;Flags&quot; &quot;&quot;<br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP} &quot;${PAGE_PASSWORD}&quot; &quot;${LBL_PASSWORD}&quot; &quot;Flags&quot;<br />
MessageBox MB_OK ${TEMP}<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_PASSWORD}&quot; &quot;Flags&quot; &quot;&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${LBL_CONFIRMATION_PASSWORD}&quot; &quot;Flags&quot; &quot;&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_CONFIRMATION_PASSWORD}&quot; &quot;Flags&quot; &quot;&quot;<br />
<br />
gotoNotEnable:<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${LBL_PASSWORD}&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_PASSWORD}&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${LBL_CONFIRMATION_PASSWORD}&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_CONFIRMATION_PASSWORD}&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
<br />
;;;;;;;;;;;;;;;;;;<br />
<br />
  Abort<br />
<br />
validate:<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP} &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_PASSWORD}&quot; &quot;State&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP_2} &quot;${PAGE_PASSWORD}&quot; &quot;${FLD_CONFIRMATION_PASSWORD}&quot; &quot;State&quot;<br />
<br />
  StrCmp ${TEMP} ${TEMP_2} done<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;Please, check password.&quot;<br />
  Abort<br />
<br />
done:<br />
FunctionEnd<br />
<br />
How I can do it?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th January 2004, 16:33</div></div><div class="posttext">I can't find anything wrong. Maybe if you can attach a complete example which can be compiled it'll be easier to spot.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>