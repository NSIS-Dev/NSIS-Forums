<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS dialog problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS dialog problem NSIS Discussion" />
	
	<title> NSIS dialog problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS dialog problem</div>
<hr />
<div class="pda"><a href="t-136708.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136708">NSIS dialog problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">weebib</div><div class="date">26th May 2003, 19:49</div></div><div class="posttext">Hello to all,<br />
<br />
I just completed my first install with NSIS.  It is almost working.  I still have a small problem though.<br />
<br />
My program is a Java program so I have to verify/install the correct version of the JRE.  To that effect, I have created a custom page which calls the function SetCustomJRE. After various verifications (is there a JRE installed, if not is there a JDK installed, if so is the version number compatible...), the installer eventually prompts the user with the custom page, thus displaying the problem message. The user just has to press Next to install a JRE.  (So to answer future questions, there has been at least one window displayed at that time.)<br />
<br />
Once the next button is pressed, I launch the download process of the correct JRE (sun's package j2re-1_4_1_02-windows-i586-i.exe).<br />
<br />
What happens is that the download succeeds but no window appears. As I am still testing, I put the corresponding file on a web server within my local area network. Still, the file is 10MB so it really takes a few seconds during which the user does know what is going on.<br />
<br />
Any help welcome,<br />
Thanks in advance,<br />
<br />
Weebib</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th May 2003, 20:01</div></div><div class="posttext">Welcome to the forum.<br />
<br />
NSISdl is not designed to run from within custom page's creator functions. It can only be used in sections unless used in silent mode (NSISdl::download_quiet).<br />
<br />
You'd have to move the download code into a section and leave some information in parameters for that section so it can know what to download.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">weebib</div><div class="date">26th May 2003, 20:16</div></div><div class="posttext">Thank you for your quick answer.<br />
<br />
I was actually afraid you'd say that.<br />
<br />
So let me see if I get it right :<br />
- I need to create a section in which I will place the download code<br />
- When I have determined that a download is necessary I put a flag in a global variable such as $9 for instance.<br />
- In my SetCustomJRE, I test the value of $9 and run the download if necessary.<br />
<br />
My only trouble is to know when this section will be called. How can I ensure it will run before the License page for example, or at least run before the actual installation of my program since the success of the JRE installation is necessary.<br />
<br />
Thanks in advance,<br />
Weebib</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th May 2003, 20:26</div></div><div class="posttext">You have two options:<br />
<br />
1) Create another installer that will show the custom page, download JRE and install it. Call this installer from .onInit of the main installer.<br />
<br />
2) Put two instfiles pages, and add a hidden section (Section &quot;&quot; or Section &quot;-namedoesntmatter&quot;). In the pre function of the first instfiles page disable every section but the hidden JRE section and then it will be the only one that will execute, and in the pre function of the components page disable that hidden section and re-enable all of the others. If you don't have a components page do it in the pre function of the second instfiles page or any other script block that is executed before the second instilfes page starts executing sections.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th May 2003, 20:44</div></div><div class="posttext">On second thought, it would be better to set the sections back to normal on the leave function of the first instfiles so if you have pages before the components page/second instfiles the user's selection won't be overridden.<br />
<br />
Example attached.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>