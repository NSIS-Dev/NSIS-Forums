<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionGroup and StrCmp, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionGroup and StrCmp NSIS Discussion" />
	
	<title> SectionGroup and StrCmp [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionGroup and StrCmp</div>
<hr />
<div class="pda"><a href="t-213549.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213549">SectionGroup and StrCmp</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">klipco</div><div class="date">19th April 2005, 01:27</div></div><div class="posttext">I'm working on an installer that will install different files depending on the OS the installer is running on.  With the &quot;Examples&quot; section I'm having a hard time figuring out a way to work.  <br />
<br />
With the paired down script below I get the compiler error &quot;StrCmp not valid outside section or function&quot; which is understandable (I guess) but I'm not sure how to work around it. <br />
<br />
If &quot;Examples&quot; is selected, running under NT/2000/XP/2003, contents of &quot;C&quot; and &quot;VB&quot; are installed, if running on 9x/ME only a text file is installed.  I'm looking for a better way to get the behavior I want.  ANy ideas?<br />
<br />
My Sections/SectionGroups goes as follows:<br />
<br />
- Device<br />
  |<br />
  - DLLs<br />
  |<br />
  - Drivers<br />
  |<br />
  - Examples<br />
    |<br />
    - C<br />
    |<br />
    - VB <br />
<br />
-- script example --<br />
<br />
SectionGroup /e &quot;DEVICE&quot;<br />
<br />
SetOverwrite try<br />
<br />
Section &quot;Dlls&quot;<br />
  SetOutPath &quot;$INSTDIR\Device\Dlls&quot;<br />
  File &quot;..\Foo1.dll&quot;<br />
  File &quot;..\Foo2.dll&quot;<br />
  File &quot;..\Foo3.dll&quot;<br />
SectionEnd<br />
<br />
Section &quot;Drivers&quot;<br />
  SetOutPath &quot;$INSTDIR\Device\Drivers&quot;<br />
  File &quot;..\Foo1.sys&quot;<br />
  File &quot;..\Foo2.sys&quot;<br />
  File &quot;..\Foo1.vxd&quot;<br />
SectionEnd<br />
<br />
SectionGroup &quot;Examples&quot;<br />
<br />
  ; &quot;strOS&quot; is either &quot;9X&quot; or &quot;NT&quot;, this is done in .ioInit<br />
  StrCmp $strOS &quot;9X&quot; 0 NT_EXAMPLES<br />
<br />
  SetOutPath &quot;$INSTDIR\Device\Example&quot;<br />
  File &quot;..\9x.Examples.txt&quot;<br />
  Goto EXAMPLES_END<br />
<br />
NT_EXAMPLES:<br />
<br />
Section &quot;C&quot;<br />
  ; examples for NT/2000/XP	<br />
  SetOutPath &quot;$INSTDIR\Device\Example\C\Bus&quot;<br />
  File &quot;..\example.c&quot;<br />
  File &quot;..\Device.h&quot;<br />
  File &quot;..\Device.lib&quot;<br />
SectionEnd<br />
<br />
Section &quot;VB6&quot;<br />
  ; examples for NT/2000/XP<br />
  SetOutPath &quot;$INSTDIR\Device\Example\VB\Bus&quot;<br />
  File &quot;..\Example.FRM&quot;<br />
  File &quot;..\Example.VBP&quot;<br />
  File &quot;..\Example.VBW&quot;<br />
  File &quot;..\Readme.txt&quot;<br />
  File &quot;..\Device.BAS&quot;<br />
SectionEnd<br />
<br />
EXAMPLES_END:<br />
<br />
SectionGroupEnd  ;  End of Examples group<br />
SectionGroupEnd  ;  End of Device group</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">19th April 2005, 12:00</div></div><div class="posttext">You can convert SectionGroup &quot;Examples&quot; into simple Section.<br />
Section &quot;Examples&quot;<br />
<br />
; &quot;strOS&quot; is either &quot;9X&quot; or &quot;NT&quot;, this is done in .ioInit<br />
StrCmp $strOS &quot;9X&quot; 0 NT_EXAMPLES<br />
<br />
SetOutPath &quot;$INSTDIR\Device\Example&quot;<br />
File &quot;..\9x.Examples.txt&quot;<br />
Goto EXAMPLES_END<br />
<br />
NT_EXAMPLES:<br />
<br />
; examples for NT/2000/XP<br />
SetOutPath &quot;$INSTDIR\Device\Example\C\Bus&quot;<br />
File &quot;..\example.c&quot;<br />
File &quot;..\Device.h&quot;<br />
File &quot;..\Device.lib&quot;<br />
<br />
SetOutPath &quot;$INSTDIR\Device\Example\VB\Bus&quot;<br />
File &quot;..\Example.FRM&quot;<br />
File &quot;..\Example.VBP&quot;<br />
File &quot;..\Example.VBW&quot;<br />
File &quot;..\Readme.txt&quot;<br />
File &quot;..\Device.BAS&quot;<br />
<br />
EXAMPLES_END:<br />
<br />
SectionEnd ; End of Examples section</div></div><hr />


<div class="post"><div class="posttop"><div class="username">klipco</div><div class="date">19th April 2005, 19:00</div></div><div class="posttext">I hate it when the answer is in front of me.  Thanks glory_man.  I like the idea of making it a Section, I don't know why I was stuck at SectionGroup.  For my application it's not going to kill the user if both C and VB examples are installed.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>