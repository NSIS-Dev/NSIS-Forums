<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" About ${StrCase}, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  About ${StrCase} NSIS Discussion" />
	
	<title> About ${StrCase} [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  About ${StrCase}</div>
<hr />
<div class="pda"><a href="t-247651.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=247651">About ${StrCase}</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">habin</div><div class="date">2nd June 2006, 02:25</div></div><div class="posttext">why the code couldn't compile?<br />
<br />
<br />
Section Test<br />
    ${StrCase} $R0 &quot;hello,world&quot; U<br />
    DetailPrint $R0<br />
SectionEnd:rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">habin</div><div class="date">2nd June 2006, 02:28</div></div><div class="posttext">I had include UsefulLib.nsh<br />
<br />
<br />
the prompt is &quot;macro INSERT_FUNC_StrCase need 2 param,but got 4!&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd June 2006, 10:32</div></div><div class="posttext">What's UsefulLib.nsh? I can only find two pages about it using Google and they're both in a language I can't read.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">habin</div><div class="date">3rd June 2006, 09:24</div></div><div class="posttext">Ah,Chinese words.<br />
<br />
###############################################################<br />
# Fun: StrCase (from StrFunc.nsh)<br />
###############################################################<br />
!insertmacro DEFINE_FUNC StrCase<br />
<br />
!macro CALL_FUNC_StrCase NAME UNFIX ResultVar String Type<br />
	Push `${String}`<br />
	Push `${Type}`<br />
	Call ${UNFIX}${NAME}<br />
	Pop ${ResultVar}<br />
!macroend<br />
<br />
!macro INSERT_FUNC_StrCase NAME UNFIX<br />
	Function `${UNFIX}${NAME}`<br />
		;After this point:<br />
		; ------------------------------------------<br />
		;  $0 = String (input)<br />
		;  $1 = Type (input)<br />
		;  $2 = StrLength (temp)<br />
		;  $3 = StartChar (temp)<br />
		;  $4 = EndChar (temp)<br />
		;  $5 = ResultStr (temp)<br />
		;  $6 = CurrentChar (temp)<br />
		;  $7 = LastChar (temp)<br />
		;  $8 = Temp (temp)<br />
		<br />
		  ;Get input from user<br />
		  Exch $1<br />
		  Exch<br />
		  Exch $0<br />
		  Exch<br />
		  Push $2<br />
		  Push $3<br />
		  Push $4<br />
		  Push $5<br />
		  Push $6<br />
		  Push $7<br />
		  Push $8<br />
		<br />
		  ;Initialize variables<br />
		  StrCpy $2 &quot;&quot;<br />
		  StrCpy $3 &quot;&quot;<br />
		  StrCpy $4 &quot;&quot;<br />
		  StrCpy $5 &quot;&quot;<br />
		  StrCpy $6 &quot;&quot;<br />
		  StrCpy $7 &quot;&quot;<br />
		  StrCpy $8 &quot;&quot;<br />
		  <br />
		  SetPluginUnload alwaysoff<br />
		<br />
		  ;Upper and lower cases are simple to use<br />
		  ${If} $1 == &quot;U&quot;<br />
		<br />
			;Upper Case System:<br />
			;------------------<br />
			; Convert all characters to upper case.<br />
		<br />
			System::Call &quot;User32::CharUpper(t r0 r5)i&quot;<br />
			Goto StrCase_End<br />
		  ${ElseIf} $1 == &quot;L&quot;<br />
		<br />
			;Lower Case System:<br />
			;------------------<br />
			; Convert all characters to lower case.<br />
		<br />
			System::Call &quot;User32::CharLower(t r0 r5)i&quot;<br />
			Goto StrCase_End<br />
		  ${EndIf}<br />
		<br />
		  ;For the rest of cases:<br />
		  ;Get &quot;String&quot; length<br />
		  StrLen $2 $0<br />
		<br />
		  ;Make a loop until the end of &quot;String&quot;<br />
		  ${For} $3 0 $2<br />
			;Add 1 to &quot;EndChar&quot; counter also<br />
			IntOp $4 $3 + 1<br />
		<br />
			# Step 1: Detect one character at a time<br />
		<br />
			;Remove characters before &quot;StartChar&quot; except when<br />
			;&quot;StartChar&quot; is the first character of &quot;String&quot;<br />
			${If} $3 &lt;&gt; 0<br />
			  StrCpy $6 $0 `` $3<br />
			${EndIf}<br />
		<br />
			;Remove characters after &quot;EndChar&quot; except when<br />
			;&quot;EndChar&quot; is the last character of &quot;String&quot;<br />
			${If} $4 &lt;&gt; $2<br />
			  ${If} $3 = 0<br />
				StrCpy $6 $0 1<br />
			  ${Else}<br />
				StrCpy $6 $6 1<br />
			  ${EndIf}<br />
			${EndIf}<br />
		<br />
			# Step 2: Convert to the advanced case user chose:<br />
		<br />
			${If} $1 == &quot;T&quot;<br />
		<br />
			  ;Title Case System:<br />
			  ;------------------<br />
			  ; Convert all characters after a non-alphabetic character to upper case.<br />
			  ; Else convert to lower case.<br />
		<br />
			  ;Use &quot;IsCharAlpha&quot; for the job<br />
			  System::Call &quot;*(&amp;t1 r7) i .r8&quot;<br />
			  System::Call &quot;*$8(&amp;i1 .r7)&quot;<br />
			  System::Free $8<br />
			  System::Call &quot;user32::IsCharAlpha(i r7) i .r8&quot;<br />
			  <br />
			  ;Verify &quot;IsCharAlpha&quot; result and convert the character<br />
			  ${If} $8 = 0<br />
				System::Call &quot;User32::CharUpper(t r6 r6)i&quot;<br />
			  ${Else}<br />
				System::Call &quot;User32::CharLower(t r6 r6)i&quot;<br />
			  ${EndIf}<br />
			${ElseIf} $1 == &quot;S&quot;<br />
		<br />
			  ;Sentence Case System:<br />
			  ;------------------<br />
			  ; Convert all characters after a &quot;.&quot;, &quot;!&quot; or &quot;?&quot; character to upper case.<br />
			  ; Else convert to lower case. Spaces or tabs after these marks are ignored.<br />
		<br />
			  ;Detect current characters and ignore if necessary<br />
			  ${If} $6 == &quot; &quot;<br />
			  ${OrIf} $6 == &quot;$\t&quot;<br />
				Goto IgnoreLetter<br />
			  ${EndIf}<br />
		<br />
			  ;Detect last characters and convert<br />
			  ${If} $7 == &quot;.&quot;<br />
			  ${OrIf} $7 == &quot;!&quot;<br />
			  ${OrIf} $7 == &quot;?&quot;<br />
			  ${OrIf} $7 == &quot;&quot;<br />
				System::Call &quot;User32::CharUpper(t r6 r6)i&quot;<br />
			  ${Else}<br />
				System::Call &quot;User32::CharLower(t r6 r6)i&quot;<br />
			  ${EndIf}<br />
			${ElseIf} $1 == &quot;&lt;&gt;&quot;<br />
		<br />
			  ;Switch Case System:<br />
			  ;------------------<br />
			  ; Switch all characters cases to their inverse case.<br />
		<br />
			  ;Use &quot;IsCharUpper&quot; for the job<br />
			  System::Call &quot;*(&amp;t1 r6) i .r8&quot;<br />
			  System::Call &quot;*$8(&amp;i1 .r7)&quot;<br />
			  System::Free $8<br />
			  System::Call &quot;user32::IsCharUpper(i r7) i .r8&quot;<br />
			  <br />
			  ;Verify &quot;IsCharUpper&quot; result and convert the character<br />
			  ${If} $8 = 0<br />
				System::Call &quot;User32::CharUpper(t r6 r6)i&quot;<br />
			  ${Else}<br />
				System::Call &quot;User32::CharLower(t r6 r6)i&quot;<br />
			  ${EndIf}<br />
			${EndIf}<br />
		<br />
			;Write the character to &quot;LastChar&quot;<br />
			StrCpy $7 $6<br />
		<br />
			IgnoreLetter:<br />
			;Add this character to &quot;ResultStr&quot;<br />
			StrCpy $5 `$5$6`<br />
		  ${Next}<br />
		<br />
		  StrCase_End:<br />
		<br />
		;After this point:<br />
		; ------------------------------------------<br />
		;  $0 = OutVar (output)<br />
		<br />
		  ; Copy &quot;ResultStr&quot; to &quot;OutVar&quot;<br />
		  StrCpy $0 $5<br />
		  <br />
		  SetPluginUnload manual<br />
		  ;Return output to user<br />
		  Pop $8<br />
		  Pop $7<br />
		  Pop $6<br />
		  Pop $5<br />
		  Pop $4<br />
		  Pop $3<br />
		  Pop $2<br />
		  Pop $1<br />
		  Exch $0<br />
	FunctionEnd	<br />
	!insertmacro DEFINE_CALL `${NAME}` `${UNFIX}`<br />
!macroend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd June 2006, 10:20</div></div><div class="posttext">Have you taken the function from StrFunc.nsh?<br />
You really should use it directly.<br />
<br />
Make sure you have ${StrCase} at the top of the script after !include StrFunc.nsh<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">habin</div><div class="date">3rd June 2006, 10:49</div></div><div class="posttext">Yeah,I have done,but it apears param error.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd June 2006, 11:00</div></div><div class="posttext">See Examples\StrFunc.nsi<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>