<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" remove every occurance of &quot;file&quot; in a directory?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  remove every occurance of &quot;file&quot; in a directory? NSIS Discussion" />
	
	<title> remove every occurance of &quot;file&quot; in a directory? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  remove every occurance of &quot;file&quot; in a directory?</div>
<hr />
<div class="pda"><a href="t-242991.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242991">remove every occurance of &quot;file&quot; in a directory?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">empezar</div><div class="date">9th April 2006, 01:36</div></div><div class="posttext">recursively removing a file named &quot;empty_directory&quot; that is exactly 0 bytes in size...<br />
<br />
how do i do this?<br />
<br />
e.g.<br />
dir1\<br />
dir1\dir2\empty_directory<br />
dir1\dir3\<br />
dir1\dir4\empty_directory<br />
<br />
I want all of these &quot;empty_directory&quot; files removed with as few commands as possible! :)<br />
<br />
oh and need i mention i have no idea where these files actually are so removing them &quot;manually&quot; is not an option</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">9th April 2006, 04:30</div></div><div class="posttext">Check out NSIS User Manual, Appendix E: Useful Headers, E.1.2 Locate</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">9th April 2006, 09:35</div></div><div class="posttext">Such a thing you're looking for, can be done easily with locate. I believe that if you wait for a while, it's most likely that Instructor will post here a working example showing how to perform the whole thing.<br />
<br />
Edit: <br />
This thread (http://forums.winamp.com/showthread.php?threadid=241624)  has working examples.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">9th April 2006, 13:44</div></div><div class="posttext">OK, this should do the job.<br />
# works for files in the same HDD where your application has been installed.<br />
# assumes that application's path is in registry to grab it from there.<br />
# recursively  find / remove all files with specified name &amp; zero byte<br />
<br />
!define MY_APP_LOCATION &quot;Software\Microsoft\Windows\CurrentVersion\App Paths\MyApp.exe&quot;<br />
<br />
Name &quot;Find and Delete&quot;<br />
OutFile &quot;Find_Delete.exe&quot;<br />
ShowInstDetails show<br />
<br />
!include &quot;FileFunc.nsh&quot;<br />
<br />
!insertmacro GetRoot<br />
!insertmacro Locate<br />
<br />
var APP_PATH<br />
<br />
Function LocateCallBack<br />
	StrCpy $R0 $R9<br />
	StrCpy $0 StopLocate<br />
	Push $0<br />
FunctionEnd<br />
<br />
Section -<br />
        ReadRegStr $1 HKLM &quot;${MY_APP_LOCATION}&quot; ''<br />
        StrCmp $1 '' +1 +2<br />
        messagebox mb_ok &quot;$$1 application's location not found&quot; IDOK _end<br />
	${GetRoot} &quot;$1&quot; &quot;$APP_PATH&quot;<br />
    _loop_until:<br />
	${Locate} &quot;$APP_PATH&quot; &quot;/L=F /M=dummy.txt /S=0:0B&quot; &quot;LocateCallBack&quot;<br />
	IfErrors +1 +2<br />
	MessageBox MB_OK 'Error!' IDOK _end<br />
	messagebox mb_ok '$R0'<br />
	StrCmp $R0 '' +1 +2<br />
        MessageBox MB_OK &quot;File(s) Not found&quot; IDOK _end<br />
	Delete $R0<br />
	StrCpy $R0 ''<br />
	goto _loop_until<br />
     _end:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">4th May 2006, 10:18</div></div><div class="posttext">Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro Locate<br />
<br />
Section<br />
	${Locate} &quot;C:\dir1&quot; &quot;/L=F /M=empty_directory /S=0:0B&quot; &quot;LocateCallback&quot;<br />
<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK &quot;Error&quot;<br />
SectionEnd<br />
<br />
Function LocateCallback<br />
	Delete $R9<br />
<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>