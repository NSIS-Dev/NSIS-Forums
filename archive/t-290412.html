<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Need to help(Read/write txt-file and definition of a path)?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Need to help(Read/write txt-file and definition of a path)? NSIS Discussion" />
	
	<title> Need to help(Read/write txt-file and definition of a path)? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Need to help(Read/write txt-file and definition of a path)?</div>
<hr />
<div class="pda"><a href="t-290412.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=290412">Need to help(Read/write txt-file and definition of a path)?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">and84</div><div class="date">17th April 2008, 16:07</div></div><div class="posttext">Hello all!<br />
I not so well understand in NSIS, help please :) <br />
I am sorry, if it was already discussed. Searched at a forum but the decision of a problem has not seen :( <br />
<br />
From seen here, has made:<br />
<br />
!include &quot;Locate.nsh&quot;<br />
Name &quot;ListFile&quot;<br />
OutFile &quot;ListFile.exe&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Section &quot;&quot; <br />
	FileOpen $2 $EXEDIR\ListFile.txt w<br />
        ${locate::Open} &quot;$EXEDIR&quot; &quot;&quot; $R0<br />
	loop:<br />
	${locate::Find} $R0 $R1 $R2 $R3 $R4 $R5 $R6<br />
	StrCmp $R1 '' close<br />
	CRCCheck::GenCRC &quot;$R1&quot;<br />
        Pop $R7<br />
	StrCmp $R4 '' 0 +2<br />
	goto +2<br />
	FileWrite $2 'File: $R3$\r$\nPath: $R2\$R3$\r$\nCRC: $R7$\r$\n'<br />
	goto loop<br />
	close:<br />
	${locate::Close} $R0<br />
	${locate::Unload}<br />
	FileClose $2<br />
	Exec '&quot;notepad.exe&quot; &quot;$EXEDIR\ListFile.txt&quot;'<br />
SectionEnd<br />
<br />
As a result I receive the list of files written down in txt-file with indication CRC and path to file.<br />
<br />
In txt-file:<br />
File: 129196134213_0.dat<br />
Path: D:\RunDir\Dir1\129196134213_0.dat<br />
CRC: 1605411789<br />
File: other.ifr<br />
Path: D:\RunDir\Dir1\Dir3\other.ifr<br />
CRC: 2902805570 <br />
<br />
<br />
Interests:<br />
1) As it is possible to read through data from file? (a CRC/name of file)<br />
2) As it is possible to make so, that the path to file would enter the name in txt-file<br />
\Dir1 \196147198_0.dat<br />
Without the indication of a directory from where has been started install a file.<br />
If it is not difficult on an example.<br />
<br />
Excuse for my English.<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">and84</div><div class="date">18th April 2008, 09:22</div></div><div class="posttext">StrLen $3 &quot;$EXEDIR&quot; <br />
StrCpy $R8 &quot;$R2&quot; &quot;&quot; $3<br />
 :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>