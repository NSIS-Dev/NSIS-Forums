<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 2 Part Q. 1. Line Jump Bug in 2.0.5? 2. How to Concatenate Several Lines of Code?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  2 Part Q. 1. Line Jump Bug in 2.0.5? 2. How to Concatenate Several Lines of Code? NSIS Discussion" />
	
	<title> 2 Part Q. 1. Line Jump Bug in 2.0.5? 2. How to Concatenate Several Lines of Code? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  2 Part Q. 1. Line Jump Bug in 2.0.5? 2. How to Concatenate Several Lines of Code?</div>
<hr />
<div class="pda"><a href="t-208811.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=208811">2 Part Q. 1. Line Jump Bug in 2.0.5? 2. How to Concatenate Several Lines of Code?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">25th February 2005, 13:16</div></div><div class="posttext">I've come across something wierd. A numbered line jump doesn't behave like it should. I've noticed this a few times so heres a small example. The following works.!insertmacro FileSearch 'C:\test.txt' 'Value o'<br />
  StrCmp $1 No 0 replace<br />
   !insertmacro WriteEnd 'C:\test.txt' 'Value x'<br />
   Goto end<br />
   replace:<br />
!insertmacro ReplaceBefore 'Value o' '%RBPH%' 'C:\test.txt'<br />
!insertmacro ReplaceLineStr 'C:\test.txt' '%RBPH%' 'Value x'<br />
        end:The following code slightly modified to jump based on a numerical value does not:!insertmacro FileSearch 'C:\test.txt' 'Value o'<br />
  StrCmp $1 No 0 +3<br />
   !insertmacro WriteEnd 'C:\test.txt' 'Value x'<br />
   Goto end<br />
!insertmacro ReplaceBefore 'Value o' '%RBPH%' 'C:\test.txt'<br />
!insertmacro ReplaceLineStr 'C:\test.txt' '%RBPH%' 'Value x'<br />
        end:$1 returns Yes or No. This isn't the end of the world but I've tried raising and lowering the jump number and regardless, the last two of three lines are always skipped. Is this a bug or am I doing something wrong?<br />
<br />
My 2nd question is, it is possible to break up long lines of code into several lines by simply adding a \ at the end. OK. What is the opposite of this so to compress several lines of short code into one line? is this an option? Just curious.<br />
<br />
Thank you for your time!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th February 2005, 13:37</div></div><div class="posttext">For an answer to your first question, see this thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=197711&amp;highlight=jump+bug).<br />
<br />
To &quot;compress&quot; several lines into one, use macros.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">25th February 2005, 14:01</div></div><div class="posttext">Thanks Kichik!<br />
<br />
In relpy to your response<br />
<br />
1. Thanks for that link. I am happy it's no bug.<br />
2. I had a funny feeling you were going to say that.<br />
<br />
3. I have a new question regarding question number 2.<br />
<br />
I've turned the working code into a macro!macro FWOR In Find Temp Replace <br />
!insertmacro FileSearch '${In}' '${Find}'<br />
  StrCmp $1 No 0 replace<br />
   !insertmacro WriteEnd '${In}' '${Replace}'<br />
   Goto end<br />
   replace:<br />
!insertmacro ReplaceBefore '${Find}' '${Temp}' '${In}'<br />
!insertmacro ReplaceLineStr '${In}' '${Temp}' '${Replace}'<br />
        end:<br />
!macroendHeres my question. How do I escape the labels? Because if I simply use the following !insertmacro once in a section it works:!macro FWOR 'C:\test.txt' 'Value o' '%RBPH%' 'Value x'Yet if I do this!macro FWOR 'C:\test.txt' 'Value o' '%RBPH%' 'Value x'<br />
!macro FWOR 'C:\test.txt' 'Value o' '%RBPH%' 'Value x'I am confronted with a compile time error:Error: label &quot;replace:&quot; already declared in section/functionI've seen other scripts able to call the same label several times, yet I am trying to figure it out to no avail. Can you share a trick?<br />
<br />
Thank you Kichik!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th February 2005, 14:03</div></div><div class="posttext">See Afrow UK's  Tutorial: Using labels in macro's (http://nsis.sourceforge.net/archive/viewpage.php?pageid=552).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">25th February 2005, 14:35</div></div><div class="posttext">Thank you again Kichik... I browse his pages on the regular looking for goodies and I can't believe I missed it. It works like a charm. Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>