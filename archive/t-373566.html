<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Create a JSON variable in an NSIS script, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Create a JSON variable in an NSIS script NSIS Discussion" />
	
	<title> Create a JSON variable in an NSIS script [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Create a JSON variable in an NSIS script</div>
<hr />
<div class="pda"><a href="t-373566.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=373566">Create a JSON variable in an NSIS script</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Re DeL SiLeNziO</div><div class="date">8th November 2013, 10:42</div></div><div class="posttext">Hi all,<br />
I'm a new user of this forum and I'm a newbie of NSIS installer and JSON.<br />
Unfortunately, I've to make an NSIS script that, taking values from a form in the installer, will create a JSON, in order to make an http request.<br />
<br />
The question is, it is possible to create a json variable in nsis? All threads I've seen, talking about a json file for input, but in this case, I should have a json variable for output.<br />
It is possible? I took a look to nsJSON plugin, but I don't know if it is the right plugin..<br />
<br />
Thanks!<br />
Re DeL SiLeNziO</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">8th November 2013, 10:54</div></div><div class="posttext">http://forums.winamp.com/showthread.php?t=345802</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Re DeL SiLeNziO</div><div class="date">8th November 2013, 13:49</div></div><div class="posttext">mmm ok, I've already read this thread but I need some explaination...<br />
<br />
the example of thread says:<br />
<br />
nsJSON::Set `more_stuff` `PSCHED_009_NAME` /value `QoS Packet Scheduler`<br />
<br />
in this case, where is the variable containing my data?<br />
How can I do an http call?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Re DeL SiLeNziO</div><div class="date">8th November 2013, 16:59</div></div><div class="posttext">I tried to use nsJSON but, when compile I obtain: <br />
Invalid command: nsJSON::Set<br />
<br />
this is my code:<br />
<br />
...<br />
!include MUI2.nsh<br />
....<br />
Page custom nsDialogsPage<br />
...<br />
Function nsDialogsPage<br />
	SetOutPath &quot;$INSTDIR\bin&quot;<br />
        File &quot;..\bin\nsJSON.dll&quot;<br />
<br />
	nsDialogs::Create 1018<br />
	Pop $Dialog<br />
	${If} $Dialog == error<br />
		Abort<br />
	${EndIf}<br />
<br />
	${NSD_CreateLabel} 0 0 100% 12u &quot;Registering a new AIC&quot;<br />
	Pop $Title<br />
<br />
	${NSD_CreateLabel} 0 20 20 12u &quot;AIC:&quot;<br />
	Pop $LabelAIC<br />
	${NSD_CreateText} 40 20 80 12u &quot;&quot;<br />
	Pop $TextAIC<br />
<br />
	${NSD_GetText} $TextAIC $prova<br />
<br />
	nsJSON::Set /value `{}`<br />
	nsJSON::Set `aic` /value `&quot;$prova&quot;`<br />
        nsJSON::Serialize /format /file c:\Temp\test.json<br />
        DetailPrint `Generate: c:\Temp\test.json`<br />
<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
<br />
<br />
Should I include anything else?!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">8th November 2013, 22:04</div></div><div class="posttext">Invalid command probably means it cannot find the plugin, use !addplugindir...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Re DeL SiLeNziO</div><div class="date">11th November 2013, 11:16</div></div><div class="posttext">Invalid command probably means it cannot find the plugin, use !addplugindir...<br />
<br />
Ok!! Thanks! With addplugindir works!<br />
In order to take the value of my ${NSD_CreateText} I used NSD_GetText:<br />
<br />
...<br />
Var a<br />
...<br />
${NSD_CreateText} 40 20 80 12u &quot;&quot;<br />
Pop $txt<br />
<br />
${NSD_GetText} $txt $a<br />
<br />
nsJSON::Set /value `{}`<br />
nsJSON::Set `VARTEXT` /value `&quot;$a&quot;`<br />
nsJSON::Serialize /format /file c:\Temp\test.json<br />
DetailPrint `Generate: c:\Temp\test.json`<br />
<br />
<br />
but, even if I write some text in the field my var $a is empty and my json result is:<br />
<br />
<br />
{<br />
	&quot;VARTEXT&quot;: &quot;&quot;<br />
}<br />
<br />
<br />
Where is the error?! :( :cry:<br />
<br />
thanks so much!!!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Re DeL SiLeNziO</div><div class="date">13th November 2013, 13:22</div></div><div class="posttext">Ok, solved! My mistake... :(</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>