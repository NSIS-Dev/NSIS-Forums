<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Debug versions?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Debug versions? NSIS Discussion" />
	
	<title> Debug versions? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Debug versions?</div>
<hr />
<div class="pda"><a href="t-62716.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=62716">Debug versions?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tony@tgtsoft.co</div><div class="date">16th October 2001, 01:22</div></div><div class="posttext">Question about the source below.  If you aren't into the source read-on.<br />
<br />
Ok, I need an install with some customized functions.  So I called them from my exe with ShellExecute, and was I though I was finshed.  No problems yet.<br />
<br />
My boss doesn't like the idea of &quot;another&quot; exe, so he insisted that I add some keywords execute my functions.  Blah, blah.  So I added them, and still no problem.<br />
<br />
Now I want to debug my code and then the problems start.<br />
<br />
First off the stuff wouldn't build at all until I took out <br />
/entrypoint:&quot;WinMain&quot;, and increased the compilier stack size with /Zm500.<br />
<br />
Now that I got it to build, I couldn't execute the debug version of my install because VSS thad it didn't have the symbols.  I assumed that it was because stuff (headers, data, and other stuff) is tacked on the end of the .exe.  So I put that carp into a seperate file, and have exehead look on the seperate file, instead on the end of itself.<br />
<br />
So with a bit of hacking I can now debug the install.  <br />
<br />
Now I want to do the same with the uninstall, but before I wonder/wander into the code again, I wanted to see if others have ventured this deep into the code.<br />
<br />
Is this a lost cause?<br />
Is there an easier way?<br />
<br />
The easier question is how do I create an uninstall file with a debug exehead.  I see that they are almost the same, but not quite.  What functions should I start looking at.<br />
<br />
Tony Stratton</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pjw62</div><div class="date">16th October 2001, 19:20</div></div><div class="posttext">You could just debug your code in a seperate exe file if that is appropriate (e.g. you dont need to use some function of NSIS). I think you may be mistaken about the uninstall exe header though, it is the same except it has the uninstall icon.. run a file comparer and I think you will find (as I did)..<br />
changes occur in the range 862Ch through 88FEh, which incidentally falls in the primary icon reosurce.<br />
Failing that just browse through the source to see what happens (try searching for NSIS_CONFIG_UNINSTALL_SUPPORT, the main uninstaller generation is in ui.c, begins line 822, allocs mem for exe header, reads from orig. installer exe after getting pointer to string for name of exe in string table, if the there is an uninstall icon specified then expand and copy to specified offset in new exe uninstall file etc etc etc) ..</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>