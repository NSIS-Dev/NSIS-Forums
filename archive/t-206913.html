<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_PAGE_CUSTOMFUNCTION_PRE not working, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_PAGE_CUSTOMFUNCTION_PRE not working NSIS Discussion" />
	
	<title> MUI_PAGE_CUSTOMFUNCTION_PRE not working [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_PAGE_CUSTOMFUNCTION_PRE not working</div>
<hr />
<div class="pda"><a href="t-206913.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=206913">MUI_PAGE_CUSTOMFUNCTION_PRE not working</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mikensis</div><div class="date">5th February 2005, 03:13</div></div><div class="posttext">hello i am haveing trouble getting this to work properly here is some of my code:<br />
<br />
;--------------------------------------------------------------------<br />
 !insertmacro MUI_PAGE_LICENSE &quot;${NSISDIR}\Examples\TKLBXLicense.rtf&quot;<br />
   Page custom CustomPageA<br />
  !define MUI_PAGE_CUSTOMFUNCTION_PRE skipDirectory<br />
  !insertmacro MUI_PAGE_DIRECTORY <br />
  !insertmacro MUI_PAGE_INSTFILES<br />
<br />
Var INI_VALUE<br />
;--------------------------------<br />
<br />
 ReserveFile &quot;choose.ini&quot;<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ $INI_VALUE &quot;choose.ini&quot; &quot;Field 3&quot; &quot;State&quot;<br />
  <br />
  StrCmp $INI_VALUE &quot;1&quot; 0 TKLINST<br />
<br />
   Call skipDirectory <br />
   Call PreInstall<br />
   Call AddFiles<br />
   <br />
  TKLINST:<br />
<br />
 Call AddFiles<br />
;---------------<br />
;----FUNCTIONS--<br />
Function CustomPageA<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;choose.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
;--------------------------------------------------<br />
<br />
Function skipDirectory<br />
<br />
  Abort<br />
<br />
FunctionEnd<br />
;--------------------------------------------------------------------<br />
<br />
<br />
Basically what the installer does is create a custom page that asks if they want to update an existing  installation or have a fresh install.  If they select the radiobutton in &quot;field 3&quot; on customPage i want to skip the directory page and just install the update, not working proprly....Doesnt show directory page either way, and just aborts the whole installation from there<br />
<br />
    any help would be appreciated<br />
<br />
   mike</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th February 2005, 13:10</div></div><div class="posttext">You can't use run-time commands such as Call, StrCmp etc outside Functions or Sections. If you want to jump over the Directory page, use:<br />
<br />
StrCmp $INI_VALUE &quot;1&quot; 0 +2<br />
Abort<br />
<br />
in your skipDirectory page.<br />
<br />
You should put all the run-time code above your CustomPageA function in a new Function CustomPageB and use that as a Leave function of your Custom page:<br />
Page custom CustomPageA CustomPageB<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>