<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Silent Installer Return, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Silent Installer Return NSIS Discussion" />
	
	<title> Silent Installer Return [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Silent Installer Return</div>
<hr />
<div class="pda"><a href="t-317778.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317778">Silent Installer Return</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">16th March 2010, 23:10</div></div><div class="posttext">Is there a way to make a silent install block until completed and return a value?  For example, I want to silently run my install from the command line (batch file) and return 0 for success and 1 or more to represent a failure.<br />
<br />
Is this possible?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th March 2010, 23:32</div></div><div class="posttext">Whether your installer 'blocks' until completed depends on your batch file method.  By default, it should wait for your installer to exit.<br />
( There are some batch utilities that let you run a program and continue with the batch process even while that program is still running - you'd have to look into their documentation on how to stop this ).<br />
<br />
To set a return value, see the SetErrorLevel instruction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th March 2010, 23:48</div></div><div class="posttext">Use start /wait<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">4th May 2010, 23:05</div></div><div class="posttext">I'm calling the uninstaller.exe silently from another installer, both generated from nsis.  I call the uninstaller.exe using ExecWait, but ExecWait doesn't block (or rather I don't think the uninstaller blocks).  <br />
<br />
To verify this I added a sleep command for 1 minute.  Then on the installer I wrapped the Exec wait call with message boxes and they happen one right after the other, with no 1 minute delay.  I verified the uninstaller indeed blocks for one minute even silently by calling it from the command line.  The files it is uninstalling get removed after about a minute.<br />
<br />
So, again, can you explain how to make a silent uninstaller block until it completes executing?  Are there some make nsis flags I have to pass, or perhaps a directive at the top of my script?<br />
<br />
<br />
<br />
Thanks,<br />
Zach</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">4th May 2010, 23:07</div></div><div class="posttext">Eh, I don't mean the uninstaller blocks, I mean there is a 1 minute delay after calling the uninstaller before the side effects (files removed) happen.  <br />
<br />
The uninstaller has the 1 minute delay before performing actions, but the installer's &quot;ExecWait&quot; which calls upon this uninstaller doesn't wait for this 1 minute delay, meaning the execwait isn't blocking until completion of the uninstaller.  <br />
<br />
I need this for an upgrade sequence I'm writing.  Basically, I install version 1.0.0, then I want to run installer for 1.0.1 which will run the uninstaller of 1.0.0 with flags passed to leave the data intact, followed by installing the 1.0.1 files.<br />
<br />
Can you help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">4th May 2010, 23:14</div></div><div class="posttext">I also read from the NSIS.chm (D.1 Error Levels):<br />
Note that uninstallers copy themselves to the temporary directory and execute from there so the original uninstaller can be deleted. This means the error level the uninstaller sets is not available to the executing process, unless it simulates this copy process and executes the copied uninstaller.<br />
<br />
So, the uninstaller may not be blocking because it is being copied and then executed as a spawned process executing from another location.  Can I, myself, call this extraction and manage it so that I can achieve the blocking behavior?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2010, 09:49</div></div><div class="posttext">http://nsis.sourceforge.net/When_I_use_ExecWait_uninstaller.exe_it_doesn%27t_wait_for_the_uninstaller<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">5th May 2010, 14:35</div></div><div class="posttext">You sir, are the shiznit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zilatica</div><div class="date">5th May 2010, 22:35</div></div><div class="posttext">So, one last quick question.  Is there a way to do the same thing with the installer.exe?  The /D=&quot;path&quot; for installer doesn't do it and neither does the _?=&quot;path&quot;<br />
<br />
Basically, you know of a page that you can point me to that will tell me how to make the ExecWait block for the installer?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2010, 23:25</div></div><div class="posttext">It does block unless the installer you are launching has been scripted to do otherwise (i.e. launch another process). It is only the uninstaller that does this by default (by copying itself to a temp folder and re-executing itself from there).<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>