<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Select and execute files from a directory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Select and execute files from a directory NSIS Discussion" />
	
	<title> Select and execute files from a directory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Select and execute files from a directory</div>
<hr />
<div class="pda"><a href="t-321005.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321005">Select and execute files from a directory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Avvoltoio</div><div class="date">21st July 2010, 13:36</div></div><div class="posttext">Hi<br />
<br />
I want to do an installer, but i don't know a good solution for some problem. I want to make an installer which get the executable files from a directory next to the installer, what is named &quot;Plugins&quot;, and i want it to show that plugins in the components page, the names on the components page would be the executable file names.<br />
<br />
My problems: i don't know how to read the file list of a directory, but if it is not possible, i can generate a ini file what the installer will read for the files, so this is not a big deal.<br />
<br />
Main problem: on the components page i only can show the section names, and i would enerate sections only when i compile the script, not in runtime.<br />
If there is no solution for this, can i make a custom page what is very similar to component page?<br />
<br />
Thanks every help, and sorry for my bad English.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st July 2010, 13:49</div></div><div class="posttext">You can enumerate the plugins using FindFirst, FindNext and FindClose. You cannot dynamically add sections in NSIS so you will need to create a custom page with your executable list using nsDialogs.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">21st July 2010, 14:03</div></div><div class="posttext">As far as I know sections are defined at compile time, so I don't think there's a way to populate the Components Page's sections list depending on what 'plugins' exist next to the installer.  That is assuming of course that you want to do this at runtime.  One workaround you can use is create 50 hidden (and disabled) sections, and during runtime enumerate all plugin filenames and rename and un-hide one section for every plugin.<br />
<br />
You could also create a fake components page using nsDialogs, and add one fake section for every plugin, but I doubt if that's going to be easier.<br />
<br />
<br />
If you want to populate the list at compile time you can use a vbs script or something to enumerate all plugin filenames and use them to write to an nsh file which you can then !include. There's a post somewhere in these forums that explains how to execute a vbs script during installer compilation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Avvoltoio</div><div class="date">22nd July 2010, 09:57</div></div><div class="posttext">Thanks for the replies :)<br />
Now i can continue make the installer whith this help :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>