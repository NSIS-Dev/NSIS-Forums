<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" AccessControl plug-in causes crash, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  AccessControl plug-in causes crash NSIS Discussion" />
	
	<title> AccessControl plug-in causes crash [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  AccessControl plug-in causes crash</div>
<hr />
<div class="pda"><a href="t-323281.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323281">AccessControl plug-in causes crash</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">20th October 2010, 12:58</div></div><div class="posttext">Hi,<br />
<br />
after I added the following line to my Install section<br />
AccessControlW::GrantOnFile &quot;$APPDATA\@CPACK_NSIS_PACKAGE_NAME_LC@&quot; &quot;(BU)&quot; &quot;FullAccess&quot;<br />
the installer crashes reproducibly.<br />
<br />
I read the wiki page (http://nsis.sourceforge.net/AccessControl_plug-in), googled and searched the forum but I couldn't find any reason.<br />
<br />
Is there something &quot;special&quot; I have to pay attention to?<br />
<br />
I am on a Windows 7 Ultimate 32Bit system.<br />
<br />
Thanks for any help,<br />
Gunther</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">20th October 2010, 14:46</div></div><div class="posttext">Just to be clear, we are talking about unicode nsis?<br />
<br />
I'm guessing the unicode version of AccessControl has some bugs</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">20th October 2010, 15:34</div></div><div class="posttext">Anders,<br />
Just to be clear, we are talking about unicode nsis?<br />
Yes, we do (I am sure you recognized the 'W' and it was no mistake of mine ;))<br />
I'm guessing the unicode version of AccessControl has some bugs<br />
Oh, oh ..., that's no good. :cry:<br />
I badly need this functionality ... :(<br />
<br />
Do you know any other way how to set &quot;FullAccess&quot; rights for all users on a directory (that's &quot;all&quot; I need)?<br />
<br />
Gunther</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">21st October 2010, 10:48</div></div><div class="posttext">OK, now it seems to work without causing the installer to crash.<br />
<br />
Like after any file system command/ operation I added a Sleep command. And additionally I changed the permissions setting from &quot;FullAccess&quot; only to &quot;GenericRead + GenericExecute + GenericWrite + Delete + FullAccess&quot;.<br />
<br />
I cannot say exactly why it now seems to work, but it does.<br />
<br />
It is the second time I noticed that NSIS is not working as expected if there is a file system command/ operation immediately followed by another command that bears upon the previous one (first time it was the RMDir command).<br />
<br />
So maybe this is a general &quot;NSIS design&quot; problem. And I guess that the file system operating speed differs from system to system. IMHO there should be a &quot;mechanism&quot; in NSIS that asures that the script is not continuing before the file system operation is completed (or raise an error if it couldn't be processed).<br />
<br />
As a programmer it is quite impossible to take things into account that depends on the respective user system.<br />
<br />
Currently one's code could be totally correct but does not work as expected =&gt; NSIS problem.<br />
<br />
Or am I wrong, overlook something etc.?<br />
<br />
Gunther</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rbamforth</div><div class="date">5th October 2011, 15:06</div></div><div class="posttext">I know this is a year old but just in case anyone comes across this problem...<br />
<br />
The real cause of this problem is that you can't use (BU) in Windows 7, you have to use the SID &quot;(S-1-5-32-545)&quot; instead. See http://nsis.sourceforge.net/Talk:AccessControl_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">5th October 2011, 15:36</div></div><div class="posttext">OK, I'm not understanding the correction. (I do appreciate you posting a followup solution, but don't understand it).<br />
<br />
Are you saying that using the SID &quot;S-1-5-32-545&quot; instead of &quot;(BU)&quot; cures a problem that Netsurfer24 thought needed a Sleep to fix? Can you explain how that works?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">3rd November 2011, 11:11</div></div><div class="posttext">Im using AccessControl, TextReplace plugins. Getting crash on a particular machine running Windows 7 Home 64bits. Its happening on the TextReplace line. And AccessControl is set to Everyone and FullAccess. <br />
<br />
Any clues ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">3rd November 2011, 13:54</div></div><div class="posttext">Please supply a minimal script that reproduces the error.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd November 2011, 14:45</div></div><div class="posttext">It may be UAC. Even with full access on an ACL you may still not be able to write to some files depending on their location.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">4th November 2011, 07:14</div></div><div class="posttext">Actually its huge a script. What I suspects is that just after extracting some files I put the ReplaceText plugin code to replace text. So may be before file existence installer code tries to edit it. <br />
<br />
Now I moved the ReplaceText code after all files get extracted and so far no crash on that machine. <br />
<br />
And Im sure that this ReplaceText was the root for the crash cause every time installing it was getting crash on that section where ReplaceText was done.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>