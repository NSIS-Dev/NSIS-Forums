<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_FINISHPAGE_RUN Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_FINISHPAGE_RUN Problem NSIS Discussion" />
	
	<title> MUI_FINISHPAGE_RUN Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_FINISHPAGE_RUN Problem</div>
<hr />
<div class="pda"><a href="t-115867.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=115867">MUI_FINISHPAGE_RUN Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">28th November 2002, 02:11</div></div><div class="posttext">I have an installer where the finish page run progam needs to have a parameter to run correctly.  I have tried all of the combinations of ' and &quot; and $\&quot; and none of them work correctly.  I can run the same command from an Exec command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th November 2002, 09:54</div></div><div class="posttext">The Modern UI already puts quotes around the whole string, to prevent problems on Win9x.<br />
<br />
Try:<br />
<br />
<br />
!define MUI_FINISHPAGE_RUN &quot;Program.exe$\&quot; $\&quot;Parameter&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">28th November 2002, 11:24</div></div><div class="posttext">The problem is that does some strnage things.  It actually changed the parameter filename.  Here is what the makeNSISW shows:<br />
<br />
!define: &quot;MUI_FINISHPAGE_RUN&quot;=&quot;$INSTDIR\program.exe&quot; &quot;$INSTDIR\parameter.ysf8&quot;<br />
<br />
The final 8 is not what I have in the script.  If I add a space after the ysf then the filename ends up being right, but it still does not work.  In either case the My Computer comes up and not the application.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th November 2002, 15:27</div></div><div class="posttext">Because you can also use Language Strings, the Modern UI copies the value to a variable and adds quotes.<br />
<br />
Did you try my code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">28th November 2002, 15:34</div></div><div class="posttext">Yep.  the posting is the result that the makeNSISW window shows when I used your code.  Here is the code that I used:<br />
<br />
!define MUI_FINISHPAGE_RUN &quot;$INSTDIR\program.exe$\&quot; $\&quot;$INSTDIR\${SHORTNAME}.ysf&quot;<br />
All it does is bring up explorer at the My Computer level.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th November 2002, 15:41</div></div><div class="posttext">I think I found the bug. Wait a sec, I'll upload a new version.<br />
<br />
edit: Ok, done. Note that you also have download the latest NSIS source and recompile NSIS, because of another related bug :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">28th November 2002, 16:19</div></div><div class="posttext">Well I tried it out and it is still not working.  I put a MessageBox in teh system script file to see what it was trying to execute and it showed an empty string.  I have to get going now, but I hope that we can figure this out soon.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th November 2002, 16:45</div></div><div class="posttext">It's working. I double checked it. Use the latest version from CVS. You will have to recompile makensis because there are some other stuff in progress so I couldn't upload a copmiled version.<br />
<br />
Hmm... Well, at least my part of the bug ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">28th November 2002, 19:15</div></div><div class="posttext">Thanks.  I will give it a shot when I get back home.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">29th November 2002, 12:49</div></div><div class="posttext">Well I made 1 change to the system.nsh file to get it to work now.  <br />
<br />
StrCpy ${MUI_TEMP1} '${MUI_FINISHPAGE_RUN}'<br />
<br />
Using the single quotes there instead of the double quotes fixed my issue.  Plus the other one that you fixed to have it not put extra characters in help alot too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">29th November 2002, 16:56</div></div><div class="posttext">That means that you are using double quotes in your string. You should escape 'em all using $\&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">30th November 2002, 03:40</div></div><div class="posttext">This is my exact string... no edits.<br />
<br />
!define MUI_FINISHPAGE_RUN &quot;$INSTDIR\clockdown.exe$\&quot; $\&quot;$INSTDIR\${SHORTNAME}.ysf&quot;<br />
<br />
<br />
This does not work unless I make the system change.  As you can see they are escapes.  I think that the fact that the string goes thru a StrCpy and then the Exec might have something to do with it.  It works now, so I am not too worried.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th December 2002, 12:20</div></div><div class="posttext">When parsing the defines, the compiler already converts the escapes. I think that should be changed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">6th December 2002, 15:05</div></div><div class="posttext">Glad to hear why its doing it.  I love the look and feel of the modern UI.  I keep releasing new products about every week or two with it.  With over 85K downloads in the last 7 months, there have been no complaints of NSIS at all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th December 2002, 15:43</div></div><div class="posttext">An updated version of the Modern UI with an additional define for parameters will be uploaded soon.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th December 2002, 16:54</div></div><div class="posttext">Done :D Please check it, because beta 0 will be realeased today :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">6th December 2002, 18:30</div></div><div class="posttext">When is the release?  I might not be able to get to it until about 7-8pm EST.  If I need to check sooner I can, just need to know.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th December 2002, 18:43</div></div><div class="posttext">It will be released in about an hour. But it's ok, I've tested it :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">6th December 2002, 18:52</div></div><div class="posttext">Ok.  Thanks for all the work Joost.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YsFred4</div><div class="date">7th December 2002, 02:53</div></div><div class="posttext">It works great now.  Thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>