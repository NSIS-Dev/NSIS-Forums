<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Am I doing this correctly???, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Am I doing this correctly??? NSIS Discussion" />
	
	<title> Am I doing this correctly??? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Am I doing this correctly???</div>
<hr />
<div class="pda"><a href="t-93136.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=93136">Am I doing this correctly???</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">japheth</div><div class="date">2nd July 2002, 04:07</div></div><div class="posttext">Alright, I've been experimenting with the IfFileExists instruction, and I'm hoping this is right:<br />
<br />
<br />
;called when the install was successful<br />
Function .onInstSuccess<br />
CreateDirectory &quot;$INSTDIR\baldurdashbackup&quot;<br />
IfFileExists &quot;$INSTDIR\baldurdash\abazigal\abazigal.tp2&quot; 0 abaz<br />
ExecWait &quot;$INSTDIR\baldurdash.exe --yes baldurdash/abazigal/abazigal.tp2&quot;<br />
abaz:<br />
IfFileExists &quot;$INSTDIR\baldurdash\balthazar\balthazar.tp2&quot; 0 balth<br />
ExecWait &quot;$INSTDIR\baldurdash.exe baldurdash/balthazar/balthazar.tp2&quot;<br />
balth:<br />
IfFileExists &quot;$INSTDIR\baldurdash\bhaalspawn\bhaalspawn.tp2&quot; 0 bhaal<br />
ExecWait &quot;$INSTDIR\baldurdash.exe baldurdash/bhaalspawn/bhaalspawn.tp2&quot;<br />
bhaal:<br />
IfFileExists &quot;$INSTDIR\baldurdash\romance\romance.tp2&quot; 0 romance<br />
ExecWait &quot;$INSTDIR\baldurdash.exe baldurdash/romance/romance.tp2&quot;<br />
romance:<br />
MessageBox MB_OK &quot;Installation complete.&quot;<br />
FunctionEnd<br />
<br />
<br />
Am I using those labels correctly?  So, the 0 tells it to proceed to the next instruction if the file exsits, and the internal label tells it to goto that label if it doesn't exist correct?<br />
<br />
I looked at some examples, and some people were using it like this:<br />
<br />
<br />
IfFileExists &quot;$INSTDIR\blah.tmp&quot; 0 3<br />
<br />
<br />
What exactly does that 0 3 mean?  I tried compiling my script with just numbers as labels, and it spat out some stuff about not being able to use 0-9 or - as labels.  However, if I put 0 and an internal label it has no problems.<br />
<br />
Oh yeah, it's also not executing that exe correctly for some reason.  It runs it, however, the exe doesn't compile the script correctly like it's supposed to.  I've tested the exe outside of the installer with the exact same command line instruction, in the exact same directory and it works fine.<br />
<br />
Thanks for any help in advance ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">2nd July 2002, 07:24</div></div><div class="posttext">I should have read the doc before, but i'll try to remember it ;) !<br />
Well, 3 must mean that &quot;jump 3 lines&quot; ! So 0 is interpreted as a jump 0 line (continue) ! -3 is allowed too ;) !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">2nd July 2002, 07:35</div></div><div class="posttext">A jump can be relative to the current location in the script. In that case use as jump parameter: +q or -q where q is the number of commands from the current command. Eg. +1 would lead to the next instruction, -1 to the previous instruction. So do not forget the sign in the jump and do for example:IfFileExists &quot;c:\winnt\*.*&quot; 0 +3<br />
MessageBox MB_OK &quot;Yes&quot;<br />
Goto Exit<br />
MessageBox MB_OK &quot;No&quot;<br />
Exit:to test if this dir exists. Notice that this is not the best thing to d when still developing a script since you will need to adapt all jumps if you add commands to the script. Use labels to jump to a fix location in the script to overcome this problem (just like you did in your script).<br />
BTW, this is in the NSIS Docs.<br />
<br />
Running the exe? Not compiling correctly?<br />
Do you mean &quot;$INSTDIR\baldurdash.exe&quot; should be some compiler? Use a MessageBox to check the commandline before executing. Maybe something is wrong there and the compiler file cannot find the script file. Try to find out using MessageBoxes (the only way to debug the NSIS code, btw).<br />
<br />
-Hendri.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>