<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem calling DLL function using System plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem calling DLL function using System plugin NSIS Discussion" />
	
	<title> Problem calling DLL function using System plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem calling DLL function using System plugin</div>
<hr />
<div class="pda"><a href="t-158556.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=158556">Problem calling DLL function using System plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">4th December 2003, 20:43</div></div><div class="posttext">So I have a function in the following format,<br />
<br />
int MyFunc(LPCTSTR param1, LPCTSTR param2)<br />
<br />
That I want to call using the System plugin.  Seems simple enough right?  This is how I'm calling the function<br />
<br />
System::Call 'MyDLL::MyFunc (t &quot;Hello&quot;, t &quot;Goodbye&quot;) i r2'<br />
<br />
However when I print out the contents of $2 all I get is a blank string when it should be an integer equal or greater than 0.  Is there any way I can check whether the DLL is acutally getting called by the script?  I think I've got the syntax right but I've never used the System DLL before so I'm not sure.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th December 2003, 21:17</div></div><div class="posttext">You forgot a dot before r2. It should be:<br />
<br />
System::Call 'MyDLL::MyFunc (t &quot;Hello&quot;, t &quot;Goodbye&quot;) i .r2'<br />
<br />
The dot means the return value doesn't need an input. Each parameter specification, including the return value consists of type, input and output. If you want to skip input or output you put a dot. If it's the output, you can also not put anything there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">4th December 2003, 21:58</div></div><div class="posttext">Ok so I added in the dot, now my function returns &quot;error&quot; as it's return value.  Is this something the System plugin will return or is that returned by the function I'm calling.<br />
<br />
Also does the DLL I'm calling need to be in a specific folder for it to be called. Say the Windows system directory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">4th December 2003, 22:12</div></div><div class="posttext">Problem averted.  Everything worked once I switched the call to<br />
<br />
System::Call '$SYSDIR\MyDLL::MyFunc (t &quot;Hello&quot;, t &quot;Goodbye&quot;) i .r2' <br />
<br />
As the DLL I want to call is in the windows system directory.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>