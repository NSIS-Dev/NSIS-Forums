<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How would I Remove an UnInstaller Section from Component list if a File Exist, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How would I Remove an UnInstaller Section from Component list if a File Exist NSIS Discussion" />
	
	<title> How would I Remove an UnInstaller Section from Component list if a File Exist [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How would I Remove an UnInstaller Section from Component list if a File Exist</div>
<hr />
<div class="pda"><a href="t-215395.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215395">How would I Remove an UnInstaller Section from Component list if a File Exist</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">8th May 2005, 19:36</div></div><div class="posttext">How would I Remove an UnInstaller Component from the list<br />
if a File Exist on the install System.<br />
<br />
Here is a Sample bit of Code to Show me With....<br />
<br />
<br />
<br />
;--------------------------------<br />
;--------------------------------<br />
; Uninstaller Pages<br />
;--------------------------------<br />
<br />
  !insertmacro MUI_UNPAGE_COMPONENTS<br />
  !insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
or Non MUI<br />
<br />
<br />
UninstPage components<br />
UninstPage instfiles<br />
<br />
<br />
;--------------------------------<br />
;--------------------------------<br />
; Uninstaller<br />
;--------------------------------<br />
<br />
Section &quot;-Un.UninstallHiddenRequiredFiles&quot;<br />
  Delete &quot;$INSTDIR\Uninst.exe&quot;<br />
  Delete &quot;$Desktop\Uninstaller.lnk&quot;<br />
SectionEnd<br />
<br />
Section &quot;Un.Compoment1&quot;<br />
#MYCODE<br />
SectionEnd<br />
<br />
Section &quot;Un.Compoment2&quot;<br />
#MYCODE<br />
SectionEnd<br />
<br />
Section &quot;Un.Compoment3&quot;<br />
#MYCODE<br />
SectionEnd<br />
<br />
<br />
<br />
I have a Component Page for Installation too. So If one of the Installation Sections was left off, What I want to do is Use the IfFileExists on a file that would have been installed. how do I incorporate that so a Component doesn't make the list to try and<br />
uninstall?<br />
<br />
That way Only What the User Installed Shows as an Option to Uninstall.<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hooklee</div><div class="date">9th May 2005, 10:21</div></div><div class="posttext">You can do so in un.onInit function, by invoking SectionSetFlags and SectionSetText commands. You should declare section index for each involved section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">9th May 2005, 18:57</div></div><div class="posttext">Thanks hooklee.<br />
<br />
I am trying to Understand what you mean. Best I can ask is<br />
to Show me with Code. I took my Time And Wrote this. Please<br />
Just add to it what is needed. This is what Will Teach me<br />
best.<br />
<br />
You need to Create two .txt Files in the Same Directory<br />
that you Compile it in. Name them:<br />
<br />
Readme_01.txt<br />
Readme_02.txt<br />
<br />
<br />
Thanks !!<br />
<br />
If anyone can Help that would really get this Script I am<br />
Writing be Finished !!!!<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">9th May 2005, 19:12</div></div><div class="posttext">Here is the Script !!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hooklee</div><div class="date">9th May 2005, 20:16</div></div><div class="posttext">Section &quot;Un.UnInstall Readme 01&quot; Section3<br />
Delete &quot;$INSTDIR\Readme_01.txt&quot;<br />
SectionEnd<br />
<br />
Section &quot;Un.UnInstall Readme 02&quot; Section4<br />
Delete &quot;$INSTDIR\Readme_02.txt&quot;<br />
SectionEnd<br />
<br />
Section &quot;-Un.Remove_What_is_Left&quot;<br />
     Delete &quot;$Desktop\Uninstaller.lnk&quot;<br />
     Delete &quot;$INSTDIR\Uninstaller.exe&quot;<br />
     RMDir &quot;$INSTDIR&quot;<br />
SectionEnd<br />
<br />
Function un.onInit<br />
     IfFileExists $INSTDIR\Readme_01.txt +3<br />
     SectionSetFlags ${Section3} 0<br />
     SectionSetText ${Section3} &quot;&quot;<br />
<br />
     IfFileExists $INSTDIR\Readme_02.txt +3<br />
     SectionSetFlags ${Section4} 0<br />
     SectionSetText ${Section4} &quot;&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">9th May 2005, 20:29</div></div><div class="posttext">Thanks Again Hooklee, This is Helping for sure.<br />
<br />
A few things that Happen with that Code. When I install<br />
Readme_01.txt It wants to only Give the option to Uninstall<br />
Readme_02.txt !!!!<br />
<br />
<br />
Also if I choose to Install Both it Doesn't Show Either in<br />
the Uninstaller Page.<br />
<br />
Altho I'm Sure a Simple Switch in something will Clear both<br />
things up...<br />
<br />
I will Mess around with it and post Back if I Get it to<br />
Work as I intended...<br />
<br />
And thanks because this is Definitely Working along the<br />
Way I wanted.... What would Coding be without Bugs along<br />
the way Anyway ????<br />
<br />
Thanks !!!<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">9th May 2005, 21:30</div></div><div class="posttext">Ok Here is what Fixed it...<br />
<br />
<br />
<br />
Function un.onInit<br />
     IfFileExists $INSTDIR\Readme_01.txt 0 +3<br />
     SectionSetFlags ${Section3} 0<br />
     SectionSetText ${Section4} &quot;&quot;<br />
<br />
     IfFileExists $INSTDIR\Readme_02.txt 0 +3<br />
     SectionSetFlags ${Section4} 0<br />
     SectionSetText ${Section3} &quot;&quot;<br />
FunctionEnd<br />
<br />
<br />
However I needed this for Three Components so I started<br />
building from that Example and Ended up with a Few probs<br />
Along the way..<br />
<br />
I will Keep at it, And if you or anyone else can still<br />
think of something please let me know !!!!<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">9th May 2005, 21:58</div></div><div class="posttext">Here is an update on that Code and what I have found<br />
it Does... Which you will see the Reasons it will<br />
Trouble More Components along the way.<br />
<br />
<br />
This Disables it with the 0 at the End.<br />
<br />
     SectionSetFlags ${SectionANY} 0<br />
<br />
Also you can Still Select it if the Next line of Code is<br />
not there.<br />
<br />
So you can still Select it and choose to uninstall it or<br />
not... It just shows up as not checked. kinda like the <br />
code /o Which does the same thing. which is why I'm sure<br />
you put The Next Line there. Thinking if it is Disabled <br />
then Why See it so they won't be able to Select it again<br />
Perhaps. <br />
<br />
<br />
<br />
     SectionSetText ${SectionANY} &quot;&quot;<br />
<br />
<br />
<br />
Ok so If the FIle is there This will Not Uninstall<br />
(SectionAny) nor Does it Show up as a Choice to Uninstall<br />
on the Component page.<br />
<br />
<br />
Function un.onInit<br />
IfFileExists $INSTDIR\Readme.txt 0 +3<br />
SectionSetFlags ${SectionANY} 0<br />
SectionSetText ${SectionANY} &quot;&quot;<br />
FunctionEnd<br />
<br />
<br />
<br />
Ok so If the FIle is there This will Uninstall<br />
(SectionAny) and Does Not Show up as a Choice as an Option<br />
on the Component page.<br />
<br />
<br />
Function un.onInit<br />
IfFileExists $INSTDIR\Readme.txt 0 +3<br />
SectionSetText ${SectionANY} &quot;&quot;<br />
FunctionEnd<br />
<br />
<br />
<br />
<br />
<br />
Anyway it Works with two Sections but Three it Can't<br />
Hide the other two and Not Still Work Correct because<br />
the other two have to Verify whether it's there and<br />
Would just X each other out.<br />
<br />
I am still Looking for a Good way to go about this....<br />
<br />
Thanks for Any Help.... Also thanks Hooklee atleast this<br />
works so far with just two Sections... Thats a Plus...<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hooklee</div><div class="date">10th May 2005, 05:37</div></div><div class="posttext">Originally posted by MichaelFlya <br />
Thanks Again Hooklee, This is Helping for sure.<br />
<br />
A few things that Happen with that Code. When I install<br />
Readme_01.txt It wants to only Give the option to Uninstall<br />
Readme_02.txt !!!!<br />
<br />
<br />
Also if I choose to Install Both it Doesn't Show Either in<br />
the Uninstaller Page.<br />
<br />
Altho I'm Sure a Simple Switch in something will Clear both<br />
things up...<br />
<br />
I will Mess around with it and post Back if I Get it to<br />
Work as I intended...<br />
<br />
And thanks because this is Definitely Working along the<br />
Way I wanted.... What would Coding be without Bugs along<br />
the way Anyway ????<br />
<br />
Thanks !!!<br />
<br />
-MichaelFlya-  <br />
<br />
I have tested my code. It works very well.<br />
<br />
You SHOULD use &quot;IfFileExists $INSTDIR\Readme_01.txt +3&quot;, not &quot;IfFileExists $INSTDIR\Readme_01.txt 0 +3&quot;. I am puzzled why you have problems with the fommer command but get it to work with the latter command.<br />
<br />
&quot;IfFileExists $INSTDIR\Readme_01.txt 0 +3&quot; means hide and unselect the section when the file exists! It is not what you want.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hooklee</div><div class="date">10th May 2005, 05:56</div></div><div class="posttext">Anyway it Works with two Sections but Three it Can't<br />
Hide the other two and Not Still Work Correct because<br />
the other two have to Verify whether it's there and<br />
Would just X each other out.<br />
<br />
-MichaelFlya- [/B] <br />
<br />
I cannot understand what happended for you and what do you want :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">10th May 2005, 06:39</div></div><div class="posttext">Hooklee .......<br />
<br />
That Works !!!!!! You had it Right the First Time I guess.<br />
Thanks for pointing that bit of Code out ...<br />
<br />
Actually at this point I have no Idea How that 0 Got in<br />
there if you didn't Originally put it there, But Yep After<br />
I removed it .... My Installer then ran just Perfectly fine,<br />
Just the Way I wanted it to. My Mistake Caused a Fork<br />
in the Code .... ehh I mean Road ... :)<br />
 <br />
... Don't Worry If anything I Did Learn more with that 0 <br />
There than without it ... That is more Important than<br />
anything ....<br />
<br />
So I got to Words for you .............<br />
<br />
Thank You !!!!<br />
<br />
:up: :up: :up: :up: :up: :up: :up: :up: :up: :up: <br />
<br />
-MichaelFlya-</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>