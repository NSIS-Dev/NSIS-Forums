<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialogs not displaying text field state?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialogs not displaying text field state? NSIS Discussion" />
	
	<title> nsDialogs not displaying text field state? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialogs not displaying text field state?</div>
<hr />
<div class="pda"><a href="t-307200.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307200">nsDialogs not displaying text field state?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mnasato</div><div class="date">8th June 2009, 19:37</div></div><div class="posttext">Hi, I'm using NSIS for the first time, v2.45.<br />
<br />
I've build a simple custom page with a few configuration options, using nsDialogs and InstallOptions. All is fine, except that Text Fields are not displaying the State values set in my .ini file, they're always empty.<br />
<br />
In fact, the same problem occurs with the NSIS examples: compiling and running Examples\nsDialogs\InstallOptions.nsi the text field is empty. However compiling and running Examples\InstallOptions\test.nsi - that references the same test.ini file - displays the same text field displays &quot;Multiline edit...&quot;.<br />
<br />
Does anybody else have the same issue?<br />
<br />
Thanks<br />
<br />
Mirko</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mnasato</div><div class="date">8th June 2009, 20:03</div></div><div class="posttext">As a workaround, setting Text rather than State seems to do the trick, i.e.<br />
<br />
[Field 1]<br />
Type=Text<br />
Text=&quot;Initial Value&quot;<br />
<br />
instead of<br />
<br />
[Field 1]<br />
Type=Text<br />
State=&quot;Initial Value&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">8th June 2009, 20:11</div></div><div class="posttext">&quot;using nsDialogs and InstallOptions&quot;<br />
you might want to ponder what you're doing there :)  nsDialogs is intended as a complete replacement for InstallOptions, so you wouldn't typically use them side-by-side at all; it's 'convenient' to use the INI, perhaps, but you're best off moving to nsDialogs entirely.<br />
<br />
Anyway, looks like CreateDialogFromINI in nsDialogs.nsh doesn't read the State value from Text fields in ini files.  If you really want to continue to use this hybrid approach, open nsDialogs.ini and change the Case for Text to a __NSD_ControlCaseEx call, and add a new Function '${UNINSTALLER_FUNCPREFIX}Text' function that uses $R9 for the text field.<br />
( I think )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mnasato</div><div class="date">8th June 2009, 20:42</div></div><div class="posttext">Originally posted by Animaether <br />
&quot;using nsDialogs and InstallOptions&quot;<br />
you might want to ponder what you're doing there :)<br />
<br />
I was just following this nsDialogs\InstallOptions.nsi example really, to try and get this custom page done as quickly as possible. :)<br />
<br />
Originally posted by Animaether <br />
nsDialogs is intended as a complete replacement for InstallOptions, so you wouldn't typically use them side-by-side at all; it's 'convenient' to use the INI, perhaps, but you're best off moving to nsDialogs entirely.<br />
<br />
Good to know, thanks. The INI file is quite handy though, along with ReadINIStr and WriteINIStr.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">installer32</div><div class="date">22nd June 2009, 09:48</div></div><div class="posttext">There is additional problem of checkboxes - their state is not read from ini file State key. I modified nsDialogs CreateDialogFromINI to read the State and (if it's not empty) call NSD_SetState. <br />
nsDialogs.nsh is attached for version 2.45.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>