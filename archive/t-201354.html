<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Using StrCmp - Is it the best option?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Using StrCmp - Is it the best option? NSIS Discussion" />
	
	<title> Using StrCmp - Is it the best option? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Using StrCmp - Is it the best option?</div>
<hr />
<div class="pda"><a href="t-201354.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=201354">Using StrCmp - Is it the best option?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">GFORCE100</div><div class="date">7th December 2004, 01:07</div></div><div class="posttext">Hello people,<br />
<br />
How does one use StrCmp? The example in the NSIS manual doesn't see really explanotory:<br />
<br />
StrCmp $0 &quot;a string&quot; 0 +3<br />
  DetailPrint '$$0 == &quot;a string&quot;'<br />
  Goto +2<br />
  DeteailPrint '$$0 != &quot;a string&quot;'<br />
<br />
<br />
I don't get what is 0 +3 and why Goto +2?  Is there no switch statement in NSIS? As am I determining the version of the OS I will probably have about 5 options (Win95..98...Me...NT4....2000...XP...2003 etc). <br />
<br />
StrCmp seems messy in this context? Is there a more professional clear view method?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flyakite</div><div class="date">7th December 2004, 01:44</div></div><div class="posttext">Did you even read: 4.9.4.19 StrCmp?<br />
<br />
This is what it says right below it:<br />
<br />
str1 str2 jump_if_equal [jump_if_not_equal]<br />
<br />
Compares (case insensitively) str1 to str2. If str1 and str2 are equal, Gotos jump_if_equal, otherwise Gotos jump_if_not_equal.<br />
<br />
So obviously...<br />
<br />
StrCmp $0 &quot;a string&quot; 0 +3<br />
<br />
Compares the value stored in $0 to the string &quot;a string&quot;.  If they are equal it continues, if not it jumps 3 instructions.<br />
<br />
It's pretty self explanitory</div></div><hr />


<div class="post"><div class="posttop"><div class="username">GFORCE100</div><div class="date">7th December 2004, 02:30</div></div><div class="posttext">Originally posted by flyakite <br />
Did you even read: 4.9.4.19 StrCmp?<br />
<br />
This is what it says right below it:<br />
<br />
str1 str2 jump_if_equal [jump_if_not_equal]<br />
<br />
Compares (case insensitively) str1 to str2. If str1 and str2 are equal, Gotos jump_if_equal, otherwise Gotos jump_if_not_equal.<br />
<br />
So obviously...<br />
<br />
StrCmp $0 &quot;a string&quot; 0 +3<br />
<br />
Compares the value stored in $0 to the string &quot;a string&quot;.  If they are equal it continues, if not it jumps 3 instructions.<br />
<br />
It's pretty self explanitory  <br />
<br />
Right...........but it doesn't make for a tidy way in comparing more than two strings does it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">7th December 2004, 08:55</div></div><div class="posttext">Most string comparison implementations don't. This is what I used when I wanted to compare OS names:<br />
<br />
<br />
1) Define a $MIN_WIN_VER to be 2000 or XP or whatever.<br />
2) Have the OS name in variable $0.<br />
Then this code:<br />
<br />
<br />
  StrCmp $0 '' unhappyEnding           ; If nothing<br />
  StrCmp $0 '2003' happyEnding                                                       ; If 2003<br />
  StrCmp $MIN_WIN_VER '2003' unhappyEnding                                           ; If minimum is 2003<br />
  StrCmp $0 'XP' happyEnding                                                         ; If XP<br />
  StrCmp $MIN_WIN_VER 'XP' unhappyEnding                                             ; If minimum is XP<br />
  StrCmp $0 '2000' happyEnding                                                       ; If 2000<br />
  StrCmp $MIN_WIN_VER '2000' unhappyEnding                                           ; If minimum is 2000<br />
  StrCmp $0 'NT 4' happyEnding                                                       ; If NT 4<br />
  StrCmp $MIN_WIN_VER 'NT 4' unhappyEnding                                           ; If minimum is NT 4<br />
  StrCmp $0 'NT 3' happyEnding                                                       ; If NT 3<br />
  StrCmp $MIN_WIN_VER 'NT 3' unhappyEnding                                           ; If minimum is NT 3<br />
  StrCmp $0 'ME' happyEnding                                                         ; If Windows ME<br />
  StrCmp $MIN_WIN_VER 'ME' unhappyEnding                                             ; If minimum was Windows ME<br />
  StrCmp $0 '98' happyEnding                                                         ; If Windows 98<br />
  StrCmp $MIN_WIN_VER '98' unhappyEnding                                             ; If minimum was Windows 98<br />
  StrCmp $0 '95' happyEnding                                                         ; If Windows 95<br />
<br />
unhappyending:<br />
; DOH OS didn't match.<br />
Goto whatever<br />
<br />
happyending:<br />
; YAY OS matched!<br />
<br />
<br />
The current version 'falls' through the possibilities until either it reaches a version too low (alter the order of OSs if you want to change the compatibility order) or it matches a version.<br />
<br />
Hope this helps<br />
<br />
-rob-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">7th December 2004, 22:58</div></div><div class="posttext">For a more structured approach see examples\logiclib.nsi</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>