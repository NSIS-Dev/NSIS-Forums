<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Sections, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Sections NSIS Discussion" />
	
	<title> Sections [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Sections</div>
<hr />
<div class="pda"><a href="t-187012.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187012">Sections</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">18th July 2004, 22:44</div></div><div class="posttext">Sorry, but I can't understand how I can do this.<br />
I want write Half-Life installer.<br />
I have sections:<br />
HL - always installed<br />
CSTRIKE - may be installed or not<br />
NiceBot - install if CSTRIKE selected<br />
ZBot    - install of CSTRIKE selected.<br />
NiceBot and ZBot must be radio button, because they can't be installed together.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">18th July 2004, 23:44</div></div><div class="posttext">No need the raio buttons, NSIS uses checkboxes, well... you can make your own custom page with InstallOptions.<br />
<br />
I recommend that you read the example one-section.nsi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">19th July 2004, 13:44</div></div><div class="posttext">Yes, I read this example, but I don't understand, how I can do my thing... sorry... Can you write code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th July 2004, 13:56</div></div><div class="posttext">It's not as simple to just 'write the code'.<br />
You need to create a custom InstallOptions dialogue with radio-buttons.<br />
<br />
See NSIS\Contrib\InstallOptions<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">19th July 2004, 14:33</div></div><div class="posttext">Yes, I read this example, but I don't understand, how I can do my thing... sorry... Can you write code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">19th July 2004, 14:46</div></div><div class="posttext">Originally posted by Afrow UK <br />
It's not as simple to just 'write the code'.<br />
You need to create a custom InstallOptions dialogue with radio-buttons.<br />
<br />
See NSIS\Contrib\InstallOptions<br />
<br />
-Stu  <br />
Standart select component not be usefull?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ppppppp</div><div class="date">24th July 2004, 01:53</div></div><div class="posttext">I hope NSIS can make section more easy, just like innosetup. Only set parameter,evry thing is OK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">27th July 2004, 09:16</div></div><div class="posttext">I create ini-file: 2 checkbox, 2 radiobutton.<br />
How I can on fly enabled/disabled if second checkbox checked/unchecked?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">27th July 2004, 14:56</div></div><div class="posttext">Originally posted by ppppppp <br />
I hope NSIS can make section more easy, just like innosetup. Only set parameter,evry thing is OK.  <br />
How more easy can be just doing this:<br />
<br />
Section &quot;Hello&quot;<br />
;<br />
SectionEnd<br />
<br />
Section &quot;Hola&quot;<br />
;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">27th July 2004, 22:56</div></div><div class="posttext">[Settings]<br />
NumFields=7<br />
Title=Install Components<br />
<br />
[Field 1]<br />
Type=GroupBox<br />
Left=120<br />
Top=0<br />
Right=255<br />
Bottom=55<br />
Text=Êîìïîíåíòû (Addons)<br />
<br />
[Field 2]<br />
Type=GroupBox<br />
Left=120<br />
Top=60<br />
Right=255<br />
Bottom=100<br />
Text=Áîòû (Bots)<br />
Flags=DISABLED<br />
<br />
[Field 3]<br />
Type=Checkbox<br />
Left=125<br />
Top=15<br />
Right=250<br />
Bottom=25<br />
Text=Install Counter-Strike<br />
State=1<br />
<br />
[Field 4]<br />
Type=Checkbox<br />
Left=125<br />
Top=35<br />
Right=250<br />
Bottom=45<br />
Text=Install bots for CS<br />
State=0<br />
<br />
[Field 5]<br />
Type=RadioButton<br />
Left=125<br />
Top=70<br />
Right=250<br />
Bottom=80<br />
Text=NiceBot<br />
State=0<br />
Flags=DISABLED<br />
<br />
[Field 6]<br />
Type=RadioButton<br />
Left=125<br />
Top=85<br />
Right=250<br />
Bottom=95<br />
Text=ZBot<br />
State=0<br />
Flags=DISABLED<br />
<br />
[Field 7]<br />
Type=Bitmap<br />
Text=spforce.bmp<br />
Top=1<br />
Left=1<br />
Right=80<br />
Bottom=120<br />
<br />
How I can on checkin [field 4] enable/disable [FIELD 2]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2004, 23:08</div></div><div class="posttext">InstallOptionsEx might be able to do this (if it can't then it would be nice if it could!)<br />
<br />
As far as I know (or remember) for normal InstallOptions, you can't have selecting one checkbox unselect another.<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">27th July 2004, 23:27</div></div><div class="posttext">Originally posted by Afrow UK <br />
InstallOptionsEx might be able to do this (if it can't then it would be nice if it could!)<br />
<br />
As far as I know (or remember) for normal InstallOptions, you can't have selecting one checkbox unselect another.<br />
<br />
<br />
-Stu  <br />
No, InstallOptionEx check input on PageLeave too...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2004, 00:51</div></div><div class="posttext">Well in that case, unless deguix plans on changing IOEx to support live dialogue manipulation then I'm afraid there's nothing you can do except do it the old fassioned way.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">28th July 2004, 01:38</div></div><div class="posttext">This part of InstallOptions is already very well planned by kichik and eccles (and others who contributed). Most parts of InstallOptions are preserved or expended in InstallOptionsEx. But yes, new things arrived to the plugin. One of the things expanded is the NOTIFY flag which is enough to your objective in this case.<br />
<br />
The NOTIFY flag makes a control to return its value to the INI file, and to return the focus to the script code.<br />
<br />
To make a selection of a checkbox, you can send BM_SETCHECK message to the checkbox to be selected/deselected.<br />
<br />
To know more about the NOTIFY flag, see InstallOptions or InstallOptionEx readme.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">28th July 2004, 05:56</div></div><div class="posttext">Originally posted by deguix <br />
This part of InstallOptions is already very well planned by kichik and eccles (and others who contributed). Most parts of InstallOptions are preserved or expended in InstallOptionsEx. But yes, new things arrived to the plugin. One of the things expanded is the NOTIFY flag which is enough to your objective in this case.<br />
<br />
The NOTIFY flag makes a control to return its value to the INI file, and to return the focus to the script code.<br />
<br />
To make a selection of a checkbox, you can send BM_SETCHECK message to the checkbox to be selected/deselected.<br />
<br />
To know more about the NOTIFY flag, see InstallOptions or InstallOptionEx readme.  Where I must send message? In which function or other?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">28th July 2004, 11:28</div></div><div class="posttext">Lobo Lunar suggested earlier in this thread that one-section.nsi could be adapted to suit KirillKr's requirements.<br />
<br />
Here are two variants based upon one-section.nsi:<br />
<br />
CSdemo-A.nsi supports three options:<br />
 <br />
(1) Install HL<br />
(2) Install HL + CSTRIKE + NiceBot<br />
(3) Install HL + CSTRIKE + ZBot<br />
<br />
CSdemo-B.nsi supports four options:<br />
<br />
(1) Install HL<br />
(2) Install HL + CSTRIKE<br />
(3) Install HL + CSTRIKE + NiceBot<br />
(4) Install HL + CSTRIKE + ZBot</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">28th July 2004, 12:13</div></div><div class="posttext">If he still wants the InstallOptions way, here is a code example totally tested by me:<br />
<br />
Page custom ShowFunction LeaveFunction<br />
<br />
!define BM_GETCHECK 0x00F0<br />
!define BM_SETCHECK 0x00F1<br />
<br />
!define BST_UNCHECKED 0<br />
!define BST_CHECKED 1<br />
<br />
Var hwnd<br />
Var Result<br />
Var notifySel<br />
<br />
Function ShowFunction<br />
<br />
  InstallOptions::initDialog /NOUNLOAD &quot;.\test.ini&quot;<br />
  Pop $hwnd<br />
  InstallOptions::show <br />
  Pop $Result<br />
<br />
FunctionEnd<br />
<br />
Function LeaveFunction<br />
<br />
  ReadINIStr $notifySel &quot;.\test.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
<br />
  StrCmp $notifySel 0 Validate  ; Next button<br />
  StrCmp $notifySel 4 Start4  ; Field 4<br />
  Abort ; Return to the page<br />
<br />
  Start4:<br />
<br />
    GetDlgItem $0 $hwnd 1203<br />
    SendMessage $0 ${BM_GETCHECK} &quot;&quot; &quot;&quot; $1<br />
<br />
    StrCmp $1 ${BST_CHECKED} 0 EndChecked<br />
<br />
      GetDlgItem $0 $hwnd 1201<br />
      EnableWindow $0 1<br />
<br />
      GetDlgItem $0 $hwnd 1204<br />
      EnableWindow $0 1<br />
      SendMessage $0 ${BM_GETCHECK} &quot;&quot; &quot;&quot; $1<br />
<br />
      GetDlgItem $0 $hwnd 1205<br />
      EnableWindow $0 1<br />
      SendMessage $0 ${BM_GETCHECK} &quot;&quot; &quot;&quot; $2<br />
<br />
      StrCmp $1 ${BST_UNCHECKED} 0 EndCheckIfEmpty<br />
        StrCmp $2 ${BST_UNCHECKED} 0 EndCheckIfEmpty<br />
        <br />
          GetDlgItem $0 $hwnd 1204<br />
          SendMessage $0 ${BM_SETCHECK} ${BST_CHECKED} &quot;&quot;<br />
        <br />
      EndCheckIfEmpty:<br />
<br />
    Goto EndNotChecked<br />
<br />
    EndChecked:<br />
    <br />
    GetDlgItem $0 $hwnd 1201<br />
    EnableWindow $0 0<br />
<br />
    GetDlgItem $0 $hwnd 1204<br />
    EnableWindow $0 0<br />
<br />
    GetDlgItem $0 $hwnd 1205<br />
    EnableWindow $0 0<br />
    <br />
    EndNotChecked:<br />
<br />
    Abort<br />
<br />
  Validate:<br />
<br />
FunctionEnd<br />
<br />
(But as you know, you have to change somethings to be compatible with your script)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">31st July 2004, 08:34</div></div><div class="posttext">Great thanks.<br />
pengyou Your code working.<br />
deguix I can't remade your code for me...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>