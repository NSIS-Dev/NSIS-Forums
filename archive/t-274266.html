<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Code Design Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Code Design Question NSIS Discussion" />
	
	<title> Code Design Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Code Design Question</div>
<hr />
<div class="pda"><a href="t-274266.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274266">Code Design Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">EmL</div><div class="date">12th July 2007, 17:14</div></div><div class="posttext">Hi there, <br />
<br />
i started 1 year ago with nsis to install 2 different appz with 2 different scripts. Now i have to deal with more than these 2 appz, so my wish is to rationalize some things.<br />
<br />
I can code a little of e.g. vb or c++ etc., but shure nothing quite good cause thats not the major part of my work. But maybe you can bring me in the right direction, so i can read the rest in the docs:<br />
<br />
Some parts of the 2 installations share exactly the same code - for each in every script. My plan was to put the doubled code outside as a NSI File and call it with the !include commando.<br />
<br />
First time this was OK, but now i checked, that variables defined as global in the new NSI file are not known in the main script if i run the script in a other section (.oninit) than where i need the variable? Maybe i understand the word &quot;global&quot; in a wrong context???<br />
<br />
For example: The external NSI should check if a dedicated app is install and detect things like version etc. (its the same to do for all appz). Inside the 2 different main scripts i want to do individual things depending of the detection routines in the external script.<br />
<br />
At the moment i deal not with macros, cause i dont really understand the advantage/difference or how i call them correctly. But maybe macros could be my solution?<br />
<br />
Bye</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th July 2007, 17:21</div></div><div class="posttext">Using !include is effectively like inserting one text file into another, so you've got to remember that when you use it.<br />
<br />
You could specify your global variables in the top of your header script but put everything else in macros. Then, when you want to include those macros you use !insertmacro anywhere in your script after the !include.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EmL</div><div class="date">13th July 2007, 09:50</div></div><div class="posttext">Thx Afrow UK for your reply. For all newbies out there ... i found a good explanation how to use Macros or Functions:<br />
<br />
http://nsis.sourceforge.net/Macro_vs_Function<br />
<br />
I think i change all of my external things into Macros which i call in the main script as you suggest ...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>