<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" unable to set a working &quot;InstallDir&quot; parameter, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  unable to set a working &quot;InstallDir&quot; parameter NSIS Discussion" />
	
	<title> unable to set a working &quot;InstallDir&quot; parameter [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  unable to set a working &quot;InstallDir&quot; parameter</div>
<hr />
<div class="pda"><a href="t-269621.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269621">unable to set a working &quot;InstallDir&quot; parameter</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Timberg</div><div class="date">16th April 2007, 07:04</div></div><div class="posttext">In general the script works great. I have just found out that for some reason beyond my (somewhat non-existant) NSIS skills, the installation DOES NOT use InstallDir which I've set.<br />
<br />
I would like the installer to extract the files (by default) to InstallDir &quot;$PROGRAMFILES\Project of doom&quot;, yet.. this isnt the case. <br />
<br />
While running the installation, the setup suggests that the files should be extracted to <br />
<br />
&quot;C:\DOCUME~1\User\LOCALS~1\Temp\nst43.tmp\&quot;<br />
<br />
Why is that? I've added a shortened version of my code aswell. SO if you are able to help, drop a line.<br />
<br />
Ktnxbye .)<br />
<br />
Edit1: I've also found out that deleting &quot;InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;&quot; from the installer.. will fix the problem, but I'm quite sure that &quot;InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;&quot; is required for something :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">16th April 2007, 07:30</div></div><div class="posttext">You've defined as PRODUCT_DIR_REGKEY the 7za.exe which extracted in $PLUGINSDIR and probably you add this path to the registry hence the suggestion &quot;C:\DOCUME~1\User\LOCALS~1\Temp\nst43.tmp\&quot;<br />
Change this to point the $INSTDIR instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Timberg</div><div class="date">16th April 2007, 07:46</div></div><div class="posttext">Thanks for the reply.<br />
AFter some experimenting I found that changing <br />
InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;<br />
to <br />
InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;$PROGRAMFILES\PROJECT OF DOOM&quot;<br />
DId the trick.<br />
<br />
Thanks again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">16th April 2007, 07:49</div></div><div class="posttext">Also changing the corresponding lines of your script with the following should be ok,<br />
; remove the line below<br />
;!define PRODUCT_DIR_REGKEY &quot;Software\Microsoft\Windows\CurrentVersion\App Paths\7za.exe&quot;<br />
; unchanged<br />
!define PRODUCT_UNINST_KEY &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}&quot;<br />
; unchanged<br />
!define PRODUCT_UNINST_ROOT_KEY &quot;HKLM&quot;<br />
<br />
<br />
; replace<br />
InstallDirRegKey ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;InstallDir&quot;<br />
<br />
<br />
Section -Post<br />
;add<br />
WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;InstallDir&quot; &quot;$INSTDIR&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>