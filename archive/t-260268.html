<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Doesn't call plugin., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Doesn't call plugin. NSIS Discussion" />
	
	<title> Doesn't call plugin. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Doesn't call plugin.</div>
<hr />
<div class="pda"><a href="t-260268.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260268">Doesn't call plugin.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">24th November 2006, 08:44</div></div><div class="posttext">Hi,<br />
<br />
I've made a plugin and I've saved it in &quot;C:\Program Files\NSIS\Plugins&quot; (in attach there's the source code).<br />
<br />
In my NSI I call the function &quot;GetDrive&quot; (ePass1k::GetDrive), but every so often my installer doesn't call the function. I don't see the file debug.txt. If I change PC the installer works fine.<br />
<br />
Have you any suggestions?<br />
<br />
Thanks,<br />
Lorenzo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">24th November 2006, 09:50</div></div><div class="posttext">You can try to use simple DllMain entry point. Might be CRT libs problem. And last VS use msvcr80.dll (and mfc80), available in VS redist folder, this is why I (and other plug-in-writers :) ) removed all crt dependencies from the code. Or build your plug-in in VS 6.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">24th November 2006, 09:57</div></div><div class="posttext">Can you help me to rewrite my DLL without use mfc80.<br />
How to can I remove crt dependencies?<br />
<br />
Thanks,<br />
Lorenzo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">24th November 2006, 13:29</div></div><div class="posttext">Use lstrcpy (kernel.dll) instead of strcpy (vcrt), the same with other functions. You can see what to replace using DependencyWalker (not sure VS 2005 has it). Also you can use /nodefaultlibs or exclude msvcr80.lib only in your project. Build final release in VS 6 - it uses mfc4 or use static linking. Sorry, I have not time for long explanations :(</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>