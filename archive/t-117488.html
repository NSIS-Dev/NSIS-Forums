<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Suggestions (long), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Suggestions (long) NSIS Discussion" />
	
	<title> Suggestions (long) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Suggestions (long)</div>
<hr />
<div class="pda"><a href="t-117488.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=117488">Suggestions (long)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">11th December 2002, 09:41</div></div><div class="posttext">I have some question and oppinions regarding version 2 b0<br />
and whether there is any plan of introducing some of these features in a (near) future version :)<br />
<br />
1. Is there a way of conditionally creating a shortcut depending on the instalation or not of a section ?<br />
I already found a workaround to this by testing the existence of some files/directories in the target directory<br />
but I was wondering if there is a cleaner way of doing it.<br />
<br />
What I'm actually thinking is to have some sort of instalation information file, that keeps the state <br />
of the instalation as long as the application is installed. <br />
<br />
Think if you need to install a file only if a section is selected by the user, but also to the fact that<br />
when you uninstall you should delete the file (or perform some other operation on that file).<br />
<br />
It will be useful to be able to know at uninstall time what sections the user chose so that you perform<br />
an action conditionally. I know there is a workaround here also, by writing values to the registry, but<br />
I was wondering how difficult will be to keep an ini file containing the full installation process:<br />
type of the instalation the user chose, the files that were copied, etc.; and this file should be easily<br />
access by some functions of NSIS. You shouldn't even have to tell which file to save these settings to,<br />
it should use a default one in the same dir as the uninstall executable.<br />
<br />
<br />
2. Will there be any support for if/else conditional statements ? I know you can do it with labels <br />
but for a larger script the script code becomes unclear (I know I'm picky)<br />
and if you were to do this, some sort of boolean expresion have to be implemented, I mean<br />
IfFileExists should change to a boolean command like ( if (FileExists..... )<br />
but that's probably for version 3.0 :)<br />
<br />
<br />
3. Can you add the $USERHOME variable that will represent the user's folder ? I know about the &quot;Shell Folders&quot;<br />
registry key but this one is not in there and some applications may need to store information in that folder.<br />
I personally needed that and had to do a small app in C++ that gets it and writes it in an INI file<br />
and then let the script use it. It's a big hassle to do this easy task as you can imagine, <br />
but i did it for lack of a better method. Shouldn't be to difficult to add even in version 2.0 (*hint, hint*)<br />
<br />
<br />
4. Will the string functions expand ? One way of getting the user home dir can be to do some string<br />
operations on other shell folder paths but the string functions of NSIS are more than limited.<br />
I mean you only have StrCpy and StrLen so far. Some regular expression would be nice ;)<br />
<br />
<br />
5. Is there a way of performing an action if a section is NOT installed ?<br />
if not can you extend the syntax of the script to accept something similar to:<br />
	<br />
	Section &quot;Blah blah&quot;<br />
		; commands to execute when the section is selected<br />
	SectionNot<br />
		; commands to execute when the section is NOT selected<br />
	SectionEnd<br />
<br />
if SectionNot is missing than it behaves just as now<br />
<br />
<br />
6. Can you revert the way Section and SubSection work ? I mean it seems more natural to me to write<br />
	<br />
	Section &quot;Papa&quot;<br />
		SubSection &quot;Kiddy 1&quot;<br />
		SubSectionEnd<br />
		<br />
		SubSection &quot;Kiddy 2&quot;<br />
		SubSectionEnd<br />
		<br />
	SectionEnd<br />
<br />
rather than<br />
	<br />
	SubSection &quot;Papa&quot;<br />
		Section &quot;Kiddy 1&quot;<br />
		SectionEnd<br />
		<br />
		Section &quot;Kiddy 2&quot;<br />
		SectionEnd<br />
		<br />
	SubSectionEnd<br />
<br />
I mean a section has sub sections not the other way around.<br />
<br />
<br />
7. Is there a way to display a tiny window center in front of the install window (like InstallShield does<br />
when it has some components to register, etc. generally when the delay is not due to the install program)<br />
that has no decorations (just a gray little window with a centered text, no titlebar, no nothing)<br />
<br />
if not, can you put it ? :)<br />
<br />
<br />
8. Can you expand the documentation to describe in more details how one can create his own skin,<br />
I mean some details about modern.exe format, even if it will be only for C++ programmers.<br />
Can you for example use non rectangular windows, or transparent ones ?<br />
<br />
<br />
9. Can you expand the file functions ? I'm reffering to the posibility to modify an existing file<br />
without having to rewrite it all.<br />
Some line base functions (for text files) that can replace only a specified line would really make a difference.<br />
<br />
<br />
That's about it, sorry if it seems i want to much from a free product but only want to make it better.<br />
I've use it in several projects and I find it invaluable. I'm planning to start myself some of these things<br />
when I finish my current project.<br />
<br />
Awaiting for your oppinions.<br />
<br />
Cheers,<br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th December 2002, 15:20</div></div><div class="posttext">1. Just put it in the section... If you want to create it in another section use SectionGetFlags to know if the section is selected.<br />
<br />
Nothing is stopping you from writing an INI file using INI file manipulation functions (file:///C:/Program%20Files/NSIS/Docs/Chapter3.html#3.7.2) and reading it in the uninstaller.<br />
<br />
2. NSIS 3 ;)<br />
<br />
3. What's USERHOME? And how do you get it without the registry?<br />
<br />
Instead of writing a program that writes to an INI file you should have written a plug-in to just push to the NSIS stack... Have a look at Contrib\ExDLL for an example.<br />
<br />
4. There is nothing you can't do with StrCpy (that takes more than 2 parmaters) and StrLen.<br />
<br />
5. Again, SectionGetFlags should do the trick.<br />
<br />
6. http://sourceforge.net/tracker/index.php?func=detail&amp;aid=624789&amp;group_id=22049&amp;atid=373088<br />
<br />
It's being considered.<br />
<br />
7. Use Banner.dll.<br />
<br />
8. NSIS is not skinable. You can only use normal Windows controls with the new ChangeUI.<br />
<br />
9. Just open it with &quot;a&quot; mode which stands for append.<br />
Have a look at this example: http://www.clantpa.co.uk/nsis/wiki/index.php/FileRead (also mentioned in the FAQ)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th December 2002, 16:09</div></div><div class="posttext">I think USERHOME is a Windows NT environment variable, so you don't need to write a plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">11th December 2002, 18:59</div></div><div class="posttext">Thx for the answers guys,<br />
<br />
USERHOME is the home folder of the user, like the user directory in Unix/Linux OSes, in 2000 it's &lt;SYSDRIVE&gt;\Documents and Settings\&lt;username&gt; and yes Joost is right there is an env variable called USERPROFILE, i can't believe i missed it :confused: <br />
<br />
<br />
kichik I'll try some of your suggestions thanx,<br />
<br />
some of my comments on what you said:<br />
<br />
4. I think that there are quite a few things that can't be covered by StrCpy, for example how do you split a string by the last occurence of a char ('\' most probably for paths) ? StrCpy can copy substring to variables but how do you find the index of the char ?<br />
<br />
8. ok, but can I create a different executable that has the exact same resources with the same settings (IDs and everything) but with different positions for the controls ? will that work only by modifing or creating a new modern.exe ?<br />
<br />
9. thx for the link (please no RTFM ;) or FAQ in this case )<br />
can you tell me if NSIS's file functions handle UTF(unicode) files correctly ?<br />
<br />
<br />
<br />
<br />
Keep up the good work :up: ,<br />
it's much appreciated<br />
<br />
Btw, do you plan do implement a patch maker that will integrate somehow with NSIS, or at least share the same interface and script language ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th December 2002, 19:11</div></div><div class="posttext">You can do everything you want with loops and StrCpy. Have a look in the useful function section in the documentation for a few examples.<br />
<br />
To create another UI just copy default.exe open it up with Resource Hacker or another resource editor and start editing.<br />
<br />
NSIS use Windows ReadFileA so it can't read Unicode files.<br />
<br />
Patching won't be implemented inside NSIS. You can use VPatch (http://www.tibed.net/h_vpatch.php).<br />
<br />
Keep up the good work  , <br />
it's much appreciated <br />
<br />
Thanks :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>