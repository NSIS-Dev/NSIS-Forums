<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Why don't my radio buttons work?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Why don't my radio buttons work? NSIS Discussion" />
	
	<title> Why don't my radio buttons work? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Why don't my radio buttons work?</div>
<hr />
<div class="pda"><a href="t-292054.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292054">Why don't my radio buttons work?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tmxk</div><div class="date">20th May 2008, 14:32</div></div><div class="posttext">Hi all,<br />
<br />
I have 2 radio buttons in a page, I don't know why the states of the 2 radio buttons are set to 1 or 0 at the same time, which are checked in 'pageLeave' function, even if only 1 button is selected. Here is the function for the page. Please help. Thanks in advance.<br />
<br />
<br />
unction OptionServerClient<br />
<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $Dialog<br />
<br />
	${If} $Dialog == error<br />
		Abort<br />
	${EndIf}<br />
<br />
        ${NSD_CreateGroupBox}    0u 13u 85% 45% &quot;Please select one of the following installation options:&quot;<br />
        Pop $0<br />
<br />
        !define NSD_ADD_STYLE ${WS_GROUP}<br />
<br />
	${NSD_CreateRadioButton} 10 25u 40% 12u &quot;&amp;Server&quot;<br />
	Pop $RadioButtonServer<br />
        ${NSD_AddStyle} $RadioButtonServer ${WS_GROUP}<br />
<br />
	MessageBox MB_OK &quot;$$RadioButtonServer_State=$RadioButtonServer_State $$RadioButtonClient_State=$RadioButtonClient_State$\n&quot;<br />
<br />
        ${If} $RadioButtonClient_State != 1<br />
              SendMessage $RadioButtonServer ${BM_SETCHECK} ${BST_CHECKED} 0<br />
        ${EndIf}<br />
        <br />
	${NSD_CreateRadioButton} 10 45u 40% 12u &quot;&amp;Client&quot;<br />
	Pop $RadioButtonClient<br />
        ${NSD_AddStyle} $RadioButtonClient ${WS_GROUP}<br />
;        ${NSD_SetState} $RadioButtonClient ${BST_UNCHECKED}<br />
<br />
	# alternative for the above ${If}:<br />
	#${NSD_SetState} $Checkbox_State<br />
<br />
	nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Function OptionServerClientPageLeave<br />
<br />
	${NSD_GetState} $RadioButtonServer $RadioButtonServer_State<br />
	${NSD_GetState} $RadioButtonServer $RadioButtonClient_State<br />
	MessageBox MB_OK &quot;$RadioButtonServer_State - $RadioButtonClient_State$\n&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th May 2008, 16:03</div></div><div class="posttext">nsDialogs::Create /NOUNLOAD 1018<br />
    Pop $Dialog<br />
<br />
    ${If} $Dialog == error<br />
        Abort<br />
    ${EndIf}<br />
<br />
        ${NSD_CreateGroupBox}    0u 13u 85% 45% &quot;Please select one of the following installation options:&quot;<br />
        Pop $0<br />
<br />
        !define NSD_ADD_STYLE ${WS_GROUP}<br />
<br />
    ${NSD_CreateRadioButton} 10 25u 40% 12u &quot;&amp;Server&quot;<br />
    Pop $RadioButtonServer<br />
        ${NSD_AddStyle} $RadioButtonServer ${WS_GROUP}<br />
<br />
    MessageBox MB_OK &quot;$$RadioButtonServer_State=$RadioButtonServer_State $$RadioButtonClient_State=$RadioButtonClient_State$\n&quot;<br />
<br />
        ${If} $RadioButtonClient_State != 1<br />
              SendMessage $RadioButtonServer ${BM_SETCHECK} ${BST_CHECKED} 0<br />
        ${EndIf}<br />
        <br />
    ${NSD_CreateRadioButton} 10 45u 40% 12u &quot;&amp;Client&quot;<br />
    Pop $RadioButtonClient<br />
;        ${NSD_AddStyle} $RadioButtonClient ${WS_GROUP}<br />
;        ${NSD_SetState} $RadioButtonClient ${BST_UNCHECKED}<br />
<br />
    # alternative for the above ${If}:<br />
    #${NSD_SetState} $Checkbox_State<br />
<br />
    nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Function OptionServerClientPageLeave<br />
<br />
    ${NSD_GetState} $RadioButtonServer $RadioButtonServer_State<br />
    ${NSD_GetState} $RadioButtonServer $RadioButtonClient_State<br />
    MessageBox MB_OK &quot;$RadioButtonServer_State - $RadioButtonClient_State$\n&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tmxk</div><div class="date">20th May 2008, 17:45</div></div><div class="posttext">Hi Red Wine,<br />
Did you forget to post something else? It seems to be the same as mine. Anyway, Thanks for your reply.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th May 2008, 17:51</div></div><div class="posttext">It's not the same, you haven't look closely in the code. <br />
I just added a comment in ${NSD_AddStyle} $RadioButtonClient ${WS_GROUP}.<br />
<br />
Anyway the code is a bit messed. Also if this not the 1st page of the sequence, you should preserve its state in case the back button is pressed.<br />
<br />
Here is my scenario:<br />
Function OptionServerClient<br />
<br />
    nsDialogs::Create /NOUNLOAD 1018<br />
        Pop $0<br />
<br />
    ${IfThen} $0 == error ${|} Abort ${|}<br />
<br />
    ${NSD_CreateGroupBox}    0u 13u 85% 45% &quot;Please select one of the following installation options:&quot;<br />
        Pop $0<br />
<br />
    ${NSD_CreateRadioButton} 10 25u 40% 12u &quot;&amp;Server&quot;<br />
        Pop $R0<br />
<br />
    ${NSD_CreateRadioButton} 10 45u 40% 12u &quot;&amp;Client&quot;<br />
        Pop $R1<br />
<br />
    ${NSD_AddStyle} $R0 ${WS_GROUP}<br />
<br />
    ${If} $R4 != ${BST_CHECKED}<br />
	 ${NSD_SetState} $R0 ${BST_CHECKED}<br />
    ${Else}<br />
	 ${NSD_SetState} $R1 $R4<br />
    ${EndIf}<br />
<br />
    ${NSD_OnBack} OptionServerClientPageLeave<br />
<br />
    nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
<br />
Function OptionServerClientPageLeave<br />
<br />
    ${NSD_GetState} $R0 $R3<br />
    ${NSD_GetState} $R1 $R4<br />
    MessageBox MB_OK &quot;$$R0=$R3 -- $$R1=$R4&quot;<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tmxk</div><div class="date">21st May 2008, 13:04</div></div><div class="posttext">Hi Red Wine,<br />
It works very well with NSIS 2.37.<br />
Thank you very much.<br />
<br />
Jue</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>