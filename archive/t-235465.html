<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" show progress of a file, instead of overall status?!, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  show progress of a file, instead of overall status?! NSIS Discussion" />
	
	<title> show progress of a file, instead of overall status?! [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  show progress of a file, instead of overall status?!</div>
<hr />
<div class="pda"><a href="t-235465.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235465">show progress of a file, instead of overall status?!</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nco2k</div><div class="date">14th January 2006, 15:54</div></div><div class="posttext">hi everybody,<br />
<br />
i have a installer which contains two files, a small exe and a ~300mb (already packed) archive-file.<br />
<br />
now the problem is, the archive-file is very big and needs some time to extract, so in that time, the progressbar of the installer, wont go on until the archive-file has been fully extracted. it looks ugly when the progress goes to about 5-10% and wont change for a very long time, then suddenly jump to 100%, after the archive-file has been extracted. the exe is small and dont need much time to extract.<br />
<br />
if i change the installation order, so that the exe extracts first and after that the archive-file, the progressbar goes to about 90-95% and then wont move until the archive-file has been extracted. this would look even more ugly.<br />
<br />
now my question... is there a possibility to show the current extraction status of my archive-file in the progressbar, instead of the overall installation progress??<br />
<br />
sorry for my bad english, i hope you guys understand what i mean. thanks for any help!<br />
<br />
p.s.: i am using the Modern UI and have SetCompress off becuase my archive-file is already compressed and it would only slow things down.<br />
<br />
c ya,<br />
nco2k</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th January 2006, 17:48</div></div><div class="posttext">AFAI know progress bar position is script line related (this is why it looks crazy in script loops). You can use fixed banner during file extraction (included to distribution). You can also test NSIS ReserveFile, but this may be useless in your situation. It is possible to write a new plug-in (or update one of existing banner plug-ins http://nsis.sourceforge.net/Category:Plugins ), but this require some tests of file system behaviour, main quiestion is correctness of file size requests  during file write.<br />
BTW multi-file distribution is not a bad idea sometimes :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nco2k</div><div class="date">15th January 2006, 17:49</div></div><div class="posttext">well i would love to do that, but my c/c++ skills are zero. :)<br />
<br />
probably i will ask Afrow UK. maybe he has the time and the will to make such a plugin, which shows the status of the current file 0-100% (for each file) instead of the overall-progress.<br />
<br />
it would be pretty cool, if he (or someone else) could make such a plugin. :)<br />
<br />
c ya,<br />
nco2k</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th January 2006, 17:52</div></div><div class="posttext">This would be very hard to do and may not even be possible to do during run-time via a plugin. The actual NSIS source code would have to be modified in some way, and I'm not going there I'm afraid! Compiler plugins are another option but unfortunately they have not been implemented yet.<br />
<br />
Edit: Actually I have an idea of how to implement this after a little thought. I'll probably work on it during the week.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nco2k</div><div class="date">15th January 2006, 18:00</div></div><div class="posttext">i agree, if the nsis source has to be modified, then its better not to mess with it.<br />
<br />
but how does the EBanner plugin (http://nsis.sourceforge.net/EBanner_plug-in) modify/change the progressbar state ?!<br />
<br />
c ya,<br />
nco2k</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th January 2006, 18:11</div></div><div class="posttext">I've edited my post above.<br />
<br />
-Stu :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th January 2006, 18:12</div></div><div class="posttext">Changing the progress bar value is easy. It's determining how much of a file has been decompressed, and how much the progress bar should move in that time which is the problem.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">16th January 2006, 07:31</div></div><div class="posttext">EBanner displays image on the installation dialog field, it not touches progress bar. This is very similar to NSIS SetBrandingImage (with png support :) ). IMHO Marquee (http://nsis.sourceforge.net/Marquee_text_scroll) is better for your purpose. You can add second timer (first one used for text redraw), check resulting file size on it's message/event and update progress bar position on the dialog using TBM_SETPOS (it's easy to get progress bar ID). I am not sure in all these mixed threadings, but probably this should work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th January 2006, 23:15</div></div><div class="posttext">I worked on the plugin today and after a good few hours I've got it working nicely, and it's very easy to use (for the NSIS coder that is).<br />
<br />
Needs more testing though and I need to make a small readme.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nco2k</div><div class="date">17th January 2006, 22:38</div></div><div class="posttext">wow great, im looking forward to it. ;)<br />
<br />
c ya,<br />
nco2k</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th January 2006, 23:37</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=235740<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">18th January 2006, 16:12</div></div><div class="posttext">I also had a free minute and did some tests with target file size tracking (instead of LVN catching Afrow UK used). Result is FileSizeProgress (http://nsis.sourceforge.net/File:Fsp.zip) plug-in. <br />
In 'SetCompress off' installer mode plug-in adds requested percentage to the &quot;Extract:...&quot; line, but this require file name and total file size options defined (/fn=, /fs=, see included samples). Some automation for file size may be done using !system command (samples for file version extraction at the compile time were discussed many times).<br />
In 'SetCompress on' mode plug-in can work without file definition, this case plug-in takes value from text line above progress bar.<br />
Progress bar range is from it's current position to predefined final position (/pbf=), default is 100 (progress bar maximum). Last parameter is timer interval (/int=).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>