<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" inetc::post &quot;issue&quot;, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  inetc::post &quot;issue&quot; NSIS Discussion" />
	
	<title> inetc::post &quot;issue&quot; [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  inetc::post &quot;issue&quot;</div>
<hr />
<div class="pda"><a href="t-328018.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=328018">inetc::post &quot;issue&quot;</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Kazegarou</div><div class="date">2nd March 2011, 14:38</div></div><div class="posttext">Hello guys.<br />
<br />
I've been trying to use the inetc plug-in to send a xml file content via POST to a webpage...<br />
This xml file is created via NSIS as well using plain FileOpen / FileWrite commands.<br />
<br />
I noticed that I get 500 - Internal server error when I'm trying to send it. It troubled me for a long while, since I was able to send plain text before just fine...<br />
<br />
Then I finally pointed it out: something bad happens when I'm sending &quot;&lt;&quot; (less than) and &quot;&gt;&quot; (greater than) characters via POST.<br />
<br />
I don't know if any of you guys ever had this issue (and I searched the forums for a good while before posting this), but do you know a better way to avoid it other than creating a XML with &quot;=lt;&quot; and &quot;=gt;&quot; to replace the &quot;&lt;&quot; and &quot;&gt;&quot; characters? <br />
<br />
Yeah, &quot;&amp;&quot; also gave me the same issue. &quot;&amp;lt;&quot; and &quot;&amp;gt;&quot; didn't work either.<br />
<br />
Since I'm already posting, I might just ask something else:<br />
<br />
FileRead only reads each line at a time from a file, in order to send in the whole file content, I'm concatenating each line I read in a loop on a variable.<br />
<br />
I noticed the /FILE option while using inetc:: post. How do you use it? Do you put the file path &quot;TEXT2POST&quot; parameter? <br />
<br />
As in:<br />
inetc::post &quot;C:\Users\Blah\Desktop\test.txt&quot; /FILE /SILENT &quot;http://localhost/PostReceiver.aspx&quot; &quot;$DOCUMENTS\post_reply.htm&quot; /END<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">2nd March 2011, 18:45</div></div><div class="posttext">Yes, following line sends file to server and puts reply to htm file<br />
inetc::post &quot;$EXEDIR\inetc.cpp&quot; /file &quot;http://localhost/post_file.php&quot; &quot;$EXEDIR\post_file.htm&quot;It looks like NSI script sample was lost, but post_file.php included to package (server part of sample).<br />
And yes, we send header &quot;Content-Type: application/x-www-form-urlencoded&quot; to server, so it expects encoded string. But with /file sample right now I could send and return CPP file with a lot of &amp;, &lt; and &gt;. I don't have  clear understanding what headers to use in particular case (string, string with special chars, form, binary file), but &quot;urlencoded&quot; header was there from the very beginning. May be you will can overwrite 'Content-type' with /header option - it sets additional header after regulat POST header was added. If you have info - please send me and I'll test variants...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kazegarou</div><div class="date">2nd March 2011, 21:25</div></div><div class="posttext">Hi, Takhir. Thanks for replying :D<br />
<br />
I used the /FILE option with my modified xml (without &lt;, &gt; and &amp;) and inet:: post worked just fine...<br />
<br />
But when I tried sending it without modifying it, there's no response at all. I verified the header contents and saw that the Content-Type is set to application/x-www-form-urlencoded just fine. <br />
<br />
Yet, there was no response at all. It just gives me that blasted 500 error.<br />
<br />
I'm attaching the original xml file I'm trying to post, if it helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">3rd March 2011, 06:59</div></div><div class="posttext">I wrote earlier that this /file option was added 'by request' and is not 'canonical' implementation. Another word it is kind of patch. It was tested with PHP script handling http input and this way it worked correct for the moment. I tested your file with post_file.php script on the server and could see file content in server reply (no modifications). Inetc sends file with http POST request 'as it is'. I remember, that when I tested this feature, POST was rejected by server without any other content-type header except application/x-www-form-urlencoded. May be I am wrong...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kazegarou</div><div class="date">3rd March 2011, 13:48</div></div><div class="posttext">Well, can you attach this post_file.php you wrote? I'd like to compare it to the page I'm using as test.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd March 2011, 14:52</div></div><div class="posttext">500 error could mean you have some unhandled exception in your script. Check your phperrors.log file.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">3rd March 2011, 17:42</div></div><div class="posttext">PHP file attached. It is also included to Inetc.zip package http://nsis.sourceforge.net/File:Inetc.zip</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>