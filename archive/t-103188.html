<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" WriteINIStr Question?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  WriteINIStr Question? NSIS Discussion" />
	
	<title> WriteINIStr Question? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  WriteINIStr Question?</div>
<hr />
<div class="pda"><a href="t-103188.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=103188">WriteINIStr Question?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Sailo</div><div class="date">2nd September 2002, 17:16</div></div><div class="posttext">More of an irritation than a problem really.  Basically i have an INI file stored on the network and i'm just using nsis to write a whole host of settings into this file gathered from terminals around the network.<br />
<br />
The irritation is that the last terminal which used my installer there always seems to be a space after the equals sign.<br />
<br />
As per the example below the last section written was ANDREW.  However if i ran the install prog again to right section JAMES for example the spaces would all be under the JAMES section and disappear from the ANDREW section.<br />
<br />
[JAMES]<br />
Description=James PC Upstairs<br />
IP Address=192.168.1.57<br />
Visible=Yes<br />
<br />
[HARRY]<br />
Description=Harry's PC Upstairs<br />
IP Address=192.168.1.59<br />
Visible=Yes<br />
<br />
[ANDREW]<br />
Description= Andrew's PC Downstairs<br />
IP Address= 192.168.1.51<br />
Visible= Yes<br />
<br />
Any ideas guys?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd September 2002, 18:55</div></div><div class="posttext">WriteINIStr only calls to the Windows API function WritePrivateProfileString, and the compiler doesn't add any spaces. Can we see the script please?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sailo</div><div class="date">3rd September 2002, 14:41</div></div><div class="posttext">It would appear that if you write a value into an INI file with a space before it <br />
i.e &quot;TEST= Poop&quot; then the next time nsis writes into that INI file it strips the space out leaving &quot;TEST=Poop&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd September 2002, 16:59</div></div><div class="posttext">Like I said, NSIS only calls WritePrivateProfileString, so if WritePrivateProfileString is making this, I think it the reading function can handle it and it shouldn't pose any problems.<br />
<br />
It would help if you post your script... If you don't want to post it i public, you can just PM it to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sailo</div><div class="date">3rd September 2002, 17:46</div></div><div class="posttext">; The file to write<br />
OutFile &quot;test.exe&quot;<br />
<br />
Name &quot;INI Test&quot;<br />
<br />
!define CLIENTNAME $6<br />
!define SECTIONNAME &quot;CLIENTNAME=${CLIENTNAME}&quot;<br />
<br />
Section<br />
<br />
; Getting Clientname From Registry<br />
<br />
  ReadRegStr ${CLIENTNAME} HKLM &quot;System\CurrentControlSet\Control\ComputerName\ComputerName&quot; ComputerName<br />
<br />
  WriteINIStr C:\test.ini ${SECTIONNAME} &quot;1&quot; &quot; Something 1&quot;<br />
  WriteINIStr C:\test.ini ${SECTIONNAME} &quot;2&quot; &quot; Something 2&quot;<br />
  WriteINIStr C:\test.ini ${SECTIONNAME} &quot;2&quot; &quot; Something 3&quot;<br />
; It happens because the space is here........^<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd September 2002, 17:59</div></div><div class="posttext">Hmm... Why did you put those spaces? I thought you didn't want spaces....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">3rd September 2002, 18:07</div></div><div class="posttext">The spaces will be removed when you go to read the profile string.  So it is really pointless to try to preserve any spaces.<br />
<br />
If you really need to, then you may want to use a custom ini file reader that will do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">25th February 2006, 15:58</div></div><div class="posttext">I'm trying to do some minor formatting in an INI file and noticed this doesn't honor the spaces:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE a.ini &quot;Field 1&quot; &quot;Text&quot; &quot;   foo&quot;<br />
<br />
but this does:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE a.ini &quot;Field 1&quot; &quot;Text&quot; &quot;\r\n   foo&quot;<br />
<br />
I can't figure out a way to get the spaces without adding a new line first. Using \t works, but I'd prefer a shorter indention. Anyone know how to do this?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th February 2006, 16:02</div></div><div class="posttext">Use quotes.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>