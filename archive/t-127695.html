<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Showing a custom page if..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Showing a custom page if... NSIS Discussion" />
	
	<title> Showing a custom page if... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Showing a custom page if...</div>
<hr />
<div class="pda"><a href="t-127695.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=127695">Showing a custom page if...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 11:23</div></div><div class="posttext">IfFileExists &quot;$TEMP\map-compiler.ini&quot; WriteSettingsNo<br />
	WriteINIStr &quot;$TEMP\map-compiler.ini&quot; &quot;Settings&quot; &quot;Show&quot; &quot;Yes&quot;<br />
	WriteSettingsNo:<br />
<br />
	ReadINIStr $1 &quot;$TEMP\map-compiler.ini&quot; &quot;Settings&quot; &quot;Show&quot;<br />
	StrCmp $1 Yes ViewSettingsYes ViewSettingsNo<br />
	ViewSettingsYes:<br />
	Page Custom SetCustom2 &quot; - Change required settings&quot;<br />
	ViewSettingsNo:<br />
<br />
  ReadINIstr $2 &quot;$TEMP\map-compiler_settings.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
  StrCmp $2 1 DialogYes DialogNo<br />
   DialogYes:<br />
	Page Custom SetCustom2 &quot; - Change required settings&quot;<br />
   DialogNo:<br />
<br />
<br />
I have tried puttin this code everywhere, but it won't work.<br />
I'd like the custom page to show before the MUI Welcome page only if the user has aloowed it before.<br />
On first load of the program, the user will be allowed to toggle 'Show settings dialog'. If it is off (0) then it won't be shown again.<br />
<br />
Why isn't the custom page showing?<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th March 2003, 11:28</div></div><div class="posttext">Page is not a runtime command. The fact that it can be used in sections and functions has been fixed in the latest CVS version. You'll need to condition the call to InstsallOptions, because you can't condition Page.<br />
<br />
For example:<br />
Function ShowPage<br />
  StrCmp $1 No skip<br />
    InstallOptions::dialog $TEMP\dialog.ini<br />
    Pop $2<br />
  skip:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 13:00</div></div><div class="posttext">I see.<br />
I'd have the function and now have...<br />
<br />
ReadINIStr $1 &quot;$TEMP\map-compiler.ini&quot; &quot;Settings&quot; &quot;Show&quot;<br />
	StrCmp $1 Yes ViewSettingsYes ViewSettingsNo<br />
	ViewSettingsYes:<br />
	Call ShowPage<br />
	ViewSettingsNo:<br />
<br />
<br />
Yeah?<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 14:39</div></div><div class="posttext">I don't know where to put this piece of code. It needs to go in a function, but the only function before the welcome page is ${PRE}<br />
Putting it in there works, but it really doesn't work good.<br />
Clicking next goes to the welcome page, but the back button doesn't appear.<br />
Also, clicking next once brings up the custom IO page again.<br />
<br />
I think I will have to do this..<br />
<br />
<br />
Function .onInit<br />
WriteINIStr &quot;$TEMP\map-compiler_settings_show.ini&quot; &quot; &quot; &quot; &quot; &quot; &quot;<br />
FunctionEnd<br />
<br />
Function ShowPage<br />
	IfFileExists &quot;$TEMP\map-comiler_settings_show.ini&quot; 0 +2<br />
	InstallOptions::dialog &quot;$TEMP\map-compiler_settings.ini&quot;<br />
FunctionEnd<br />
<br />
Function .onInstSuccess<br />
	Delete &quot;$TEMP\map-compiler_settings_show.ini&quot;<br />
FunctionEnd<br />
<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 14:47</div></div><div class="posttext">Ok, well the Next and Back buttons still screwed...<br />
<br />
Custom Page<br />
Next &gt;<br />
<br />
Welcome Page<br />
Next &gt;<br />
No &lt; Back button<br />
<br />
InstFiles Page<br />
&lt; Back, Next&gt;<br />
&lt; Back goes to Custom Page not Welcome Page<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 14:56</div></div><div class="posttext">Never mind. I have changed it to a perminant page, since once the page was turned off, the user couldn't turn it back on.<br />
It doesn't matter too much that the user has to go through one more page really!<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th March 2003, 18:42</div></div><div class="posttext">If you use Modern UI, and custom pages, you have to use:<br />
<br />
!define MUI_PAGECOMMAND_[PAGE_NAME]<br />
<br />
In your case, you used the:<br />
<br />
!define MUI_WELCOMEPAGE<br />
<br />
So, you should use:<br />
<br />
!define MUI_PAGECOMMANDS_WELCOME</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 19:22</div></div><div class="posttext">That would remove the welcome page and replace it with my custom page would it not?<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th March 2003, 19:27</div></div><div class="posttext">Only replace the !define MUI_WELCOMEPAGE by !define MUI_PAGECOMMANDS_WELCOME. Nothing else. This will should help you.<br />
<br />
Whoops, is MUI_PAGECOMMAND_WELCOME, sorry!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th March 2003, 00:36</div></div><div class="posttext">You need both !define MUI_WELCOMEPAGE and !insertmaco MUI_PAGECOMMAND_WELCOME. Insert the macro on the right place between the other page commands.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>