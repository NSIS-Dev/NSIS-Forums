<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialog page re-use, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialog page re-use NSIS Discussion" />
	
	<title> nsDialog page re-use [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialog page re-use</div>
<hr />
<div class="pda"><a href="t-325507.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=325507">nsDialog page re-use</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MrMR</div><div class="date">4th January 2011, 11:49</div></div><div class="posttext">Hi,<br />
<br />
I am wondering the best way to achieve this...<br />
<br />
I have to collect data from the installer multiple times based on a user input integer.  <br />
<br />
As far as I am aware I can't add pages in dynamically I have to add a bunch in and then skip them (please correct me if I am wrong :) )<br />
<br />
I know I can add the same page multiple times by simply calling <br />
<br />
Page custom pageName<br />
<br />
multiple times.  The problem arises when I need to collect the data from the page to process it on installation.  Is there a simple way to customise the variable names to make them unique without defining the pages multiple times?<br />
<br />
All help appreciated!<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">4th January 2011, 15:10</div></div><div class="posttext">I am not sure whether you mean this, but you can have a try:<br />
<br />
You can define a symbol with some &quot;prefix&quot; or string in it like here:<br />
!define MUI_${MUI_PAGE_UNINSTALLER_PREFIX}WELCOMEFINISHPAGE_GUINIT<br />
<br />
where<br />
  !define MUI_PAGE_UNINSTALLER_PREFIX &quot;UN&quot;<br />
<br />
So you can call functions like this:<br />
<br />
    Function ${MUI_PAGE_UNINSTALLER_FUNCPREFIX}mui.FinishPage.GUIInit<br />
    <br />
      !ifdef MUI_${MUI_PAGE_UNINSTALLER_PREFIX}PAGE_FUNCTION_GUIINIT<br />
        Call &quot;${MUI_${MUI_PAGE_UNINSTALLER_PREFIX}PAGE_FUNCTION_GUIINIT}&quot;<br />
      !endif<br />
<br />
Hope it helps...<br />
<br />
I found this in MUI2.nsh related files, maybe you could check them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blh83</div><div class="date">4th January 2011, 16:31</div></div><div class="posttext">As you probably know, Variables in NSIS are global no matter where they are declared (top of file, function, or section. See: http://nsis.sourceforge.net/Docs/Chapter4.html#4.2).  If you declare them in a function, you have to place /GLOBAL in front of it to indicate this.  When you declare a custom page to use:<br />
<br />
page custom MyPage MyPageLeave  ;where MyPage is the function to define the page and MyPageLeave is called when the page is left.<br />
<br />
Then you would have two fxns somewhere in your nsi file:<br />
<br />
Function MyPage<br />
  Var /GLOBAL someVar<br />
  ;some code to define and display your page<br />
FunctionEnd<br />
<br />
Function MyPageLeave<br />
  ;maybe manipulate the user provided integer here.<br />
FunctionEnd<br />
<br />
It is possible that if you manipulate the user provided integer right away, you could do so in the MyPageLeave function and only ever need one variable for this integer.  However, if you obtain a series of integers before you do anything with them, then you likely need to create separate variables for however many instances you will need.  So if you will display the page five times and require five inputs, declare five variables (kind of ugly, I know and someone may have a better suggestion).  Also, I suggest you consider using an array for this if it fits what you are trying to do because it could be cleaner.  Hope this helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MrMR</div><div class="date">5th January 2011, 09:39</div></div><div class="posttext">Thank you.<br />
<br />
I have located the Array plugin (NSISArray) which is working well.  <br />
<br />
I have created a function for each page and another for the page leave.  Inside the functions I am calling a macro with a unique id from the calling page (function).  All the UI widgets for the common pages are created in the macro (which makes the code cleaner) and the unique id is used to index the data in the array.<br />
<br />
I am also using the integer passed in from the user to let the page decide if it should show its self (Abort) or not which makes the pages (appear to) show dynamically.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>