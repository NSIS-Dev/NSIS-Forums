<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Installation with Components Choise, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Installation with Components Choise NSIS Discussion" />
	
	<title> Installation with Components Choise [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Installation with Components Choise</div>
<hr />
<div class="pda"><a href="t-268098.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=268098">Installation with Components Choise</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">20th March 2007, 12:08</div></div><div class="posttext">Hello,<br />
<br />
In MUI_PAGE_COMPONENTS, I have <br />
<br />
SectionGroup /e &quot;Section 1&quot; SEC01<br />
<br />
	Section &quot;Section 1.1&quot; SEC011<br />
          ...<br />
	SectionEnd<br />
<br />
	Section &quot;Section 1.2&quot; SEC012<br />
          ...	<br />
	SectionEnd<br />
	<br />
	Section &quot;Section 1.2&quot; SEC013<br />
          ...	<br />
	SectionEnd<br />
	<br />
SectionGroupEnd <br />
<br />
The user can chose only one sub section (Section 1.1 or Section 1.2 or Section 1.3) or nothing.<br />
<br />
How do it ?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th March 2007, 12:23</div></div><div class="posttext">If nothing in the above sample then what the installer is going to install?<br />
Is there a hidden or read only section outside that group which is always installed?<br />
<br />
I think included example one-section.nsi could be your starting point.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">20th March 2007, 14:14</div></div><div class="posttext">Originally posted by Red Wine <br />
]If nothing in the above sample then what the installer is going to install? <br />
There is too a required section.<br />
<br />
Originally posted by Red Wine <br />
Is there a hidden or read only section outside that group which is always installed?<br />
<br />
I think included example one-section.nsi could be your starting point.  <br />
That group is not required and can be not installed.<br />
The first section install start menu for all user, the second section install start menu for current user. And if the user doesn't want start menu, none section is selected.<br />
<br />
Section &quot;Program&quot; SEC00<br />
SectionIn RO<br />
...<br />
SectionEnd <br />
<br />
SectionGroup /e &quot;Start menu&quot; SEC01<br />
<br />
	Section &quot;All user&quot; SEC011<br />
          ...<br />
	SectionEnd<br />
<br />
	Section &quot;Current user&quot; SEC012<br />
          ...	<br />
	SectionEnd<br />
	<br />
SectionGroupEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jholguin</div><div class="date">20th March 2007, 14:40</div></div><div class="posttext">In your NSIS directory, in the 'Examples' Folder there's a nsi file called one-section.nsi which does this. It seems to work by turning the items into radio buttons which by default can only have 1 per &quot;group&quot; selected.<br />
<br />
Here's the pertinent code:<br />
<br />
Section &quot;Group 1 - Option 1&quot; g1o1<br />
SectionEnd<br />
<br />
Section /o &quot;Group 1 - Option 2&quot; g1o2<br />
SectionEnd<br />
<br />
Section /o &quot;Group 1 - Option 3&quot; g1o3<br />
SectionEnd<br />
<br />
Section &quot;Group 2 - Option 1&quot; g2o1<br />
SectionEnd<br />
<br />
Section /o &quot;Group 2 - Option 2&quot; g2o2<br />
SectionEnd<br />
<br />
Section /o &quot;Group 2 - Option 3&quot; g2o3<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
; Functions<br />
<br />
; $1 stores the status of group 1<br />
; $2 stores the status of group 2<br />
<br />
Function .onInit<br />
<br />
  StrCpy $1 ${g1o1} ; Group 1 - Option 1 is selected by default<br />
  StrCpy $2 ${g2o1} ; Group 2 - Option 1 is selected by default<br />
<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
<br />
  !insertmacro StartRadioButtons $1<br />
    !insertmacro RadioButton ${g1o1}<br />
    !insertmacro RadioButton ${g1o2}<br />
    !insertmacro RadioButton ${g1o3}<br />
  !insertmacro EndRadioButtons<br />
	<br />
  !insertmacro StartRadioButtons $2<br />
    !insertmacro RadioButton ${g2o1}<br />
    !insertmacro RadioButton ${g2o2}<br />
    !insertmacro RadioButton ${g2o3}<br />
  !insertmacro EndRadioButtons<br />
	<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">20th March 2007, 14:46</div></div><div class="posttext">Originally posted by jholguin <br />
In your NSIS directory, in the 'Examples' Folder there's a nsi file called one-section.nsi which does this. It seems to work by turning the items into radio buttons which by default can only have 1 per &quot;group&quot; selected.<br />
<br />
Here's the pertinent code<br />
 <br />
I have try this code, but I can't unselect a sub section.<br />
I need the possibility to have alle sub section unselect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th March 2007, 14:57</div></div><div class="posttext">outfile 'test.exe'<br />
<br />
!include &quot;Sections.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
Insttype &quot;/CUSTOMSTRING=Please either select one option or none&quot;<br />
Insttype &quot;Option one&quot;<br />
Insttype &quot;option two&quot;<br />
<br />
page components<br />
page instfiles<br />
<br />
Section &quot;Common FIles (Required)&quot;<br />
  SectionIn RO 1 2<br />
    # common files here<br />
SectionEnd<br />
<br />
SectionGroup /e &quot;Select an option&quot; SEC_GRP<br />
<br />
Section /o &quot;option 1&quot; SEC_01<br />
  SectionIn 1<br />
    # option 1 files here<br />
SectionEnd<br />
<br />
Section /o &quot;option 2&quot; SEC_02<br />
  SectionIn 2<br />
    # option 2 files here<br />
SectionEnd<br />
<br />
SectionGroupEnd<br />
<br />
Function .onSelChange<br />
GetCurInstType $0<br />
<br />
${if} $0 == 32<br />
SectionGetFlags ${SEC_01} $1<br />
IntOp $1 $1 &amp; 1<br />
${if} $1 == 1<br />
SectionGetFlags ${SEC_02} $2<br />
IntOp $2 $2 &amp; 1<br />
${andif} $2 == 1<br />
MessageBox MB_OK &quot;Only one option is allowed&quot;<br />
!insertmacro UnselectSection ${SEC_01}<br />
!insertmacro UnselectSection ${SEC_02}<br />
${endif}<br />
${endif}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">20th March 2007, 18:27</div></div><div class="posttext">Red Wine you really are a &quot;Major Dude&quot; to (junior) forum members, great!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th March 2007, 18:57</div></div><div class="posttext">Originally posted by onad <br />
Red Wine you really are a &quot;Major Dude&quot; to (junior) forum members, great! <br />
Thanks :)<br />
I'm a kind of doorman, welcome the newbies showing 'em some passages to step inside ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pegase06</div><div class="date">22nd March 2007, 17:35</div></div><div class="posttext">I have write :<br />
<br />
outfile 'test.exe'<br />
<br />
!include &quot;Sections.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
page components<br />
page instfiles<br />
<br />
var menu1<br />
var menu2  <br />
<br />
SectionGroup /e &quot;SectionGroup &quot; SEC03<br />
<br />
	Section &quot;Section 1&quot; SEC031<br />
	;...<br />
	SectionEnd<br />
	<br />
	Section /o &quot;Section 2&quot; SEC032<br />
	;...<br />
	SectionEnd<br />
	<br />
SectionGroupEnd<br />
<br />
Function .onInit<br />
<br />
  StrCpy $menu1 1<br />
  StrCpy $menu2 0<br />
<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
<br />
<br />
    SectionGetFlags ${SEC031} $1<br />
    ${if} $1 == 1<br />
    ${AndIf} $menu1 != 1<br />
	    !insertmacro UnselectSection ${SEC032}<br />
	    StrCpy $menu1 1<br />
  	    StrCpy $menu2 0<br />
    ${endif}<br />
    <br />
    SectionGetFlags ${SEC032} $2<br />
    ${if} $2 == 1<br />
    ${AndIf} $menu2 != 1<br />
	     !insertmacro UnselectSection ${SEC031}<br />
	     StrCpy $menu1 0<br />
  	     StrCpy $menu2 1<br />
    ${endif}<br />
<br />
FunctionEnd<br />
<br />
 <br />
<br />
Works perfectly.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mesial</div><div class="date">18th August 2010, 21:42</div></div><div class="posttext">I have been struggling with this same issue for a while. Red Wine, you are a godsend for me. The code example you gave above gives the exact results I am looking for. But when I impliment it into my installer, that's when it gets complicated. I have 22 sections with some sections having over 50 choices. My goal is to allow the user to choose only one, but also the option not to choose any. Well actually, it gets complicated with the 9 install types...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mesial</div><div class="date">18th August 2010, 23:28</div></div><div class="posttext">I'll run to the library and upload a the installer to my site so you can see it action to get a better idea, for I am using my phone at the moment and I can't do things like thhat on here. I'll add a link to the script as it is too large to cut and paste here. This is the final issue that I have with this installer. People have been begging for this for over a year.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mesial</div><div class="date">24th August 2010, 09:00</div></div><div class="posttext">I have not needed to go to the library because i have gotten mine to work, too. But now i'm stumped on trying to get a section with more than two options to work properly. Let's say for example, i have four options in a section that the user can only choose one option, but can also choose none of them. Any one know how to modify pegase06's script (above)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mesial</div><div class="date">25th August 2010, 04:41</div></div><div class="posttext">it's been 9 days that i have been trying to get this to work. I have been trying this so many different ways but just cant get the thing to work. The damned thing is, this whole project relies on this &quot;choose only one or none&quot; feature. I have accomplished every other requirement for this installer and I pray that this feature is not unobtainable.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">25th August 2010, 06:12</div></div><div class="posttext">Come on, the solution is trivially simple. It's the same as the existing code, only with more ${If} ${ElseIf} {$Etc} in it.<br />
<br />
http://nsis.pastebin.com/JigzyvmM</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mesial</div><div class="date">25th August 2010, 09:28</div></div><div class="posttext">What might seem simple to you, i have been struggling with, call me stupid, call me slow, but it took me forever to figure this one out. I was just coming back to say that I have finally got it to work on multiple options, sorry to waste anyones time and I see your post. I wish i had a better internet connection than the cell phone i have been using for months... Dial-up would be like a 20meg broadband connection compared to this. I thank you for your response, i will follow your link and see how i might improve mine.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>