<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how do i enable full logging?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how do i enable full logging? NSIS Discussion" />
	
	<title> how do i enable full logging? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how do i enable full logging?</div>
<hr />
<div class="pda"><a href="t-302562.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302562">how do i enable full logging?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jweinraub</div><div class="date">29th January 2009, 18:55</div></div><div class="posttext">I am trying to do a test on if a file version is set, and that check seems to work (even if the file isn't there) but the action i want it to do, doesn't seem to work.<br />
<br />
it does on my system, but not other systems i try it on.<br />
<br />
i used the standard event viewing (but normally i turn off output in production), but cant find anything of use.<br />
<br />
the loggin from kichik doesnt seem to work for me, when it dumps, it is always blank.<br />
<br />
the code in question is:<br />
<br />
   ; Install WinPcap<br />
   GetDllVersion &quot;$SYSDIR\Packet.dll&quot; $R0 $R1  <br />
   IntOp $R2 $R0 / 0x00010000<br />
   IntOp $R3 $R0 &amp; 0x0000FFFF<br />
   IntOp $R4 $R1 / 0x00010000<br />
   IntOp $R5 $R1 &amp; 0x0000FFFF<br />
   StrCpy $0 &quot;$R2.$R3.$R4.$R5&quot;<br />
   MessageBox MB_OK $0<br />
<br />
  ; 4.0.0.1040<br />
  ${If} $0 == &quot;4.0.0.1040&quot;<br />
  MessageBox MB_OK &quot;We have Packet.dll installed.  Go_on_further&quot;<br />
  Goto go_on_further<br />
  ${Else}<br />
  SetDetailsPrint textonly<br />
  DetailPrint &quot;Installing WinPcap 4.02...&quot;<br />
  SetDetailsPrint none<br />
  MessageBox MB_OK &quot;We do not have it, we will now attempt to install&quot;<br />
  ; enable full logging here to see what is going on here.<br />
  ExecWait `&quot;$EXEDIR\WinpCap\winpcap-nmap-4.02.exe&quot; /S` $R0<br />
  ${EndIf}<br />
  ; End install WinPcap<br />
<br />
<br />
my the msgbox, i do enter the else clause, but the installer doesn't seem to run at all.<br />
<br />
any feedback is appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bohajo</div><div class="date">29th January 2009, 19:14</div></div><div class="posttext">Hello<br />
<br />
for logging I use the function <br />
DetailPrint &quot;Test log&quot;. <br />
This is printed in the log window.<br />
In the last section of the installer I use a function found in the net called DumpLog.<br />
<br />
;last section<br />
Section &quot;&quot;<br />
  ;Create a Logfile from the installation<br />
  StrCpy $0 $INSTDIR\install.log<br />
  Push $0<br />
  Call DumpLog<br />
SectionEnd<br />
<br />
<br />
The the complete content of the log window is dumped into a file in the DIR where the files will be installed.<br />
The function see below.<br />
Hope it helps.<br />
Joachim<br />
<br />
; --- Function DumpLog: write log window data to file<br />
!define LVM_GETITEMCOUNT 0x1004<br />
!define LVM_GETITEMTEXT 0x102D<br />
<br />
Function DumpLog<br />
  Exch $5<br />
  Push $0<br />
  Push $1<br />
  Push $2<br />
  Push $3<br />
  Push $4<br />
  Push $6<br />
<br />
  FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $0 $0 1016<br />
  StrCmp $0 0 error<br />
  FileOpen $5 $5 &quot;w&quot;<br />
  StrCmp $5 0 error<br />
    SendMessage $0 ${LVM_GETITEMCOUNT} 0 0 $6<br />
    System::Alloc ${NSIS_MAX_STRLEN}<br />
    Pop $3<br />
    StrCpy $2 0<br />
    System::Call &quot;*(i, i, i, i, i, i, i, i, i) i \<br />
      (0, 0, 0, 0, 0, r3, ${NSIS_MAX_STRLEN}) .r1&quot;<br />
    loop: StrCmp $2 $6 done<br />
      System::Call &quot;User32::SendMessageA(i, i, i, i) i \<br />
        ($0, ${LVM_GETITEMTEXT}, $2, r1)&quot;<br />
      System::Call &quot;*$3(&amp;t${NSIS_MAX_STRLEN} .r4)&quot;<br />
      FileWrite $5 &quot;$4$\r$\n&quot;<br />
      IntOp $2 $2 + 1<br />
      Goto loop<br />
    done:<br />
      FileClose $5<br />
      System::Free $1<br />
      System::Free $3<br />
      Goto exit<br />
  error:<br />
    MessageBox MB_OK error<br />
  exit:<br />
    Pop $6<br />
    Pop $4<br />
    Pop $3<br />
    Pop $2<br />
    Pop $1<br />
    Pop $0<br />
    Exch $5<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jweinraub</div><div class="date">29th January 2009, 19:32</div></div><div class="posttext">i tried using that function, is what i meant, and did not work.<br />
<br />
Even when I took out:<br />
<br />
ShowInstDetails NeverShow<br />
<br />
   - and -<br />
<br />
SetDetailsPrint textonly<br />
DetailPrint &quot;Installing Microsoft .NET 2.0...&quot;<br />
SetDetailsPrint none<br />
<br />
and hte autoclose, etc.<br />
where do i save this file?<br />
am i executing the 3rd party installer correctly, is this the issue?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jweinraub</div><div class="date">29th January 2009, 19:43</div></div><div class="posttext">b/c i compress the 3rd party installer with the installer, it is not a standalone, it gets included with the installer script/ the folder that is.<br />
<br />
i think the deal is, i am not putting the files in the cd, i want them to run from the standalone exe installer, but i dont want the files themselves to install into the program files folder.<br />
<br />
is this possible?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>