<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" parsing txt file problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  parsing txt file problem NSIS Discussion" />
	
	<title> parsing txt file problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  parsing txt file problem</div>
<hr />
<div class="pda"><a href="t-339316.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=339316">parsing txt file problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">13th December 2011, 13:09</div></div><div class="posttext">Please help parsing this file. greedy function did not help me.<br />
<br />
=== Logging started: 13.12.2011  13:39:00 ===<br />
Action 13:39:00: INSTALL. <br />
Action start 13:39:00: INSTALL.<br />
=== Logging started: 13.12.2011  13:39:00 ===<br />
Action start 13:39:00: INSTALL.<br />
Action start 13:39:00: FindRelatedProducts.<br />
Action ended 13:39:00: FindRelatedProducts. Return value 0.<br />
Action start 13:39:00: CA_SystemFolder_x86.3643236F_FC70_11D3_A536_0090278A1BB8.<br />
Action ended 13:39:00: CA_SystemFolder_x86.3643236F_FC70_11D3_A536_0090278A1BB8. Return value 1.<br />
Action start 13:39:00: CA_WindowsFolder_x86.3643236F_FC70_11D3_A536_0090278A1BB8.<br />
Action ended 13:39:00: CA_WindowsFolder_x86.3643236F_FC70_11D3_A536_0090278A1BB8. Return value 1.<br />
Action start 13:39:00: LaunchConditions.<br />
Action ended 13:39:00: LaunchConditions. Return value 0.<br />
Action start 13:39:00: AppSearch.<br />
Action ended 13:39:00: AppSearch. Return value 1.<br />
<br />
i want check AppSearch 1 or 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">13th December 2011, 17:11</div></div><div class="posttext">Function Example7<br />
	MessageBox MB_OK $R9<br />
	StrCpy $0 StopLineFind<br />
 <br />
	Push $0<br />
FunctionEnd<br />
<br />
Function .onInit<br />
<br />
${LineFind} &quot;C:\2.txt&quot; &quot;/NUL&quot; &quot;15:-15&quot; &quot;Example7&quot;<br />
<br />
not help (</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">13th December 2011, 17:21</div></div><div class="posttext">Of course it doesn't help. You're telling it to start looking at line 15, and stop looking at line -15 (this means: 15 lines before the end of the file). If there are only 15 lines in the file, that ends up not looking at any line at all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">14th December 2011, 08:09</div></div><div class="posttext">please write example i not understand function return one sumbul<br />
<br />
<br />
&quot;15&quot;<br />
&quot;1:-1&quot;<br />
&quot;-1:1&quot;<br />
&quot;-1:15&quot;<br />
&quot;15:-1&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">14th December 2011, 08:17</div></div><div class="posttext">There are examples in the manual: http://nsis.sourceforge.net/Docs/AppendixE.html#E.2.2<br />
<br />
The line range works like this: First number is the starting line, second number is the ending line. The function will search the file between those two lines. Obviously, if the ending line is before the starting line, no lines will be searched at all.<br />
<br />
Negative numbers simply mean: So many lines before the end of the file. So -1 is the last line, -2 is the line before that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">14th December 2011, 08:21</div></div><div class="posttext">problem in the text file function not work with this text!!!!! helps</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">14th December 2011, 08:54</div></div><div class="posttext">&quot;not work&quot; doesn't mean anything.<br />
<br />
1. What did you try?  (Hint: a small code example would help.)<br />
2. What did you expect to happen?<br />
3. What actually happened?<br />
<br />
This is the last time I'm going to explain to you how to ask a question. Next time, if you just say &quot;HELP&quot; without giving any information, I'm just going to ignore you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">14th December 2011, 09:07</div></div><div class="posttext">what? it is all my code!!! I repit: &quot;function return one simbul 'a' or 't'&quot;<br />
<br />
if i take file<br />
<br />
1.txt:<br />
<br />
111<br />
222<br />
333<br />
<br />
<br />
2.txt<br />
<br />
<br />
=== Logging started: 13.12.2011 13:39:00 ===<br />
Action 13:39:00: INSTALL. <br />
Action start 13:39:00: INSTALL.<br />
=== Logging started: 13.12.2011 13:39:00 ===<br />
<br />
${LineFind} &quot;C:\1.txt&quot; &quot;/NUL&quot; &quot;1:-1&quot; &quot;Example7&quot; -function return &quot;1111&quot; - it is means -work!!<br />
${LineFind} &quot;C:\2.txt&quot; &quot;/NUL&quot; &quot;1:-1&quot; &quot;Example7&quot; -function return &quot;a&quot; - it is means -not work!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">14th December 2011, 09:20</div></div><div class="posttext">Stop shouting please. You are the one being unclear, not I.<br />
<br />
The syntax in your last post seems ok. If it works on one file but not another, this suggests that there is a problem opening the file. I suggest you pause the installer just before the linefind command using a MessageBox. Then first manually check whether or not the file exists, and what it contains. Then allow linefind to try and read it.<br />
<br />
Also, check the error flag.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">14th December 2011, 09:45</div></div><div class="posttext">${LineFind} &quot;C:\2.txt&quot; &quot;/NUL&quot; &quot;1:-1&quot; &quot;Example7&quot;<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK &quot;Error&quot;<br />
<br />
nothing</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th December 2011, 18:18</div></div><div class="posttext">Quoted from your other thread:<br />
FileOpen $R4 &quot;e:\vc_log.txt&quot; r<br />
StrCpy $R8 0<br />
Top:<br />
FileRead $R4 $R7<br />
IntOp $R8 $R8 + 1<br />
<br />
MEssagebox MB_OK R7 ; return= a or t or 3....<br />
<br />
vc_log.txt:<br />
=== Logging started: 16.12.2011  18:17:49 ===<br />
Action 18:17:49: INSTALL. <br />
Action start 18:17:49: INSTALL.<br />
=== Logging started: 16.12.2011  18:17:49 ==<br />
(etc...)<br />
<br />
First of all, there is no MessageBox command in the code you posted. I am going to assume that this is what you meant:<br />
FileOpen $R4 &quot;e:\vc_log.txt&quot; r<br />
StrCpy $R8 0<br />
Top:<br />
FileRead $R4 $R7<br />
IntOp $R8 $R8 + 1<br />
MEssagebox MB_OK R7 ; return= a or t or 3....<br />
<br />
<br />
My reply to this is the same as before: The syntax in your last post seems ok. If it works on one file but not another, this suggests that there is a problem opening the file. I suggest you pause the installer just before the linefind command using a MessageBox. Then first manually check whether or not the file exists, and what it contains. Then allow linefind to try and read it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">16th December 2011, 21:45</div></div><div class="posttext">It sounds to me like the file is Unicode encoded, but processing thinks it will be Ansi. The high part of the first unicode char looks like a null terminator, and the single character is the entire line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">19th December 2011, 05:35</div></div><div class="posttext">Writing simple C plug-in would solve all your problems.<br />
There may be some catch in your text files [like Unicode format] which can be handled easily in C.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">19th December 2011, 08:25</div></div><div class="posttext">messagebox before opened file not helped. i think problem in unicode</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NOCaut</div><div class="date">23rd December 2011, 09:13</div></div><div class="posttext">I find problem. *.msi file return log file in unicode encoding. i take unicode file read function end all work good</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>