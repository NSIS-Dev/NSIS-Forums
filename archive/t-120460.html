<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" FileRead doesn't work with big files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  FileRead doesn't work with big files NSIS Discussion" />
	
	<title> FileRead doesn't work with big files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  FileRead doesn't work with big files</div>
<hr />
<div class="pda"><a href="t-120460.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=120460">FileRead doesn't work with big files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">michiel</div><div class="date">7th January 2003, 11:39</div></div><div class="posttext">I have a file that needs to be changed. The next file works but if you put thesame code into a bigger file it doesn't work.<br />
<br />
How come so???<br />
<br />
This below is the small file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">michiel</div><div class="date">7th January 2003, 12:02</div></div><div class="posttext">This is the big file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th January 2003, 14:59</div></div><div class="posttext">Problems found in the big script:<br />
 StrCpy $4 &quot;$INSTDIR&quot;<br />
StrCmp $4 &quot;$INSTDIR&quot; 0 +7<br />
No need to copy $INSTDIR to $4 and then compare it to $INSTDIR...<br />
 ReadRegStr $0 HKLM SOFTWAREMicrosoftWindowsCurrentVersion VersionNumber<br />
You forgot the back-slashes in this line.<br />
 GetTempFileName $R0<br />
FileOpen $8 $R1 w<br />
You get the temp file name into $R0 and then open $R1. That should expain why the big script doesn't work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">michiel</div><div class="date">7th January 2003, 15:21</div></div><div class="posttext">I have tried them all but it still doesn't work i only get a empty file if i extract more than ten files :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th January 2003, 15:41</div></div><div class="posttext">Are you sure that changing<br />
FileOpen $8 $R1 w<br />
to<br />
FileOpen $8 $R0 w<br />
doesn't help?<br />
<br />
What do you mean by extracting more than ten files? That doesn't make any sense... Does it work if you extract only 9?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">michiel</div><div class="date">7th January 2003, 16:13</div></div><div class="posttext">It works if i extract only 9 files but from 10 or more files i will only get an emty file. <br />
<br />
Maybe a bug???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th January 2003, 16:24</div></div><div class="posttext">By extracting more then 10 files do you mean putting more files in the dir you do File /r *.* from?<br />
<br />
Attach the new script please.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">michiel</div><div class="date">8th January 2003, 09:39</div></div><div class="posttext">You must first edit the file and then rename it, then extract the other files and after that you must copy the renamed file to the right position and delete the renamed file<br />
<br />
Then it works! :D<br />
<br />
But thanks anyway :)<br />
<br />
 :up:  File /r &quot;C:\Program Files\Achievo\Apache2\conf\httpd.conf&quot;<br />
<br />
FileOpen $3 &quot;$INSTDIR\httpd.conf&quot; r<br />
GetTempFileName $R0<br />
FileOpen $1 $R0 w<br />
loop:<br />
   FileRead $3 $2<br />
   IfErrors done<br />
   StrCmp $2 'LoadModule php4_module &quot;c:\Program Files\Achievo\Apache2\php\sapi\php4apache2.dll &quot;$\r$\n' 0 +3<br />
      FileWrite $1 'LoadModule php4_module &quot;$INSTDIR\Apache2\php\sapi\php4apache2.dll &quot;$\r$\n'<br />
      Goto loop<br />
   Push &quot;$INSTDIR&quot;<br />
   Push &quot;\&quot;<br />
   Push &quot;/&quot;<br />
   Call StrReplace <br />
   Pop $0 <br />
   StrCpy $5 $0<br />
   StrCmp $2 $2 0 +8<br />
   Push $2<br />
   Push &quot;C:/Program Files/Achievo&quot;<br />
   Push $5<br />
   Call StrReplace<br />
   Pop $0<br />
   FileWrite $1 $0<br />
   Goto loop	   <br />
        <br />
done:<br />
   FileClose $3<br />
   FileClose $1<br />
   Delete &quot;$INSTDIR\httpd.conf&quot;<br />
   Rename $R0 &quot;$INSTDIR\httpd.conf&quot;<br />
<br />
File /r &quot;C:\Program Files\Achievo\*.*&quot;<br />
CopyFiles &quot;$INSTDIR\httpd.conf&quot; &quot;$INSTDIR\Apache2\conf\&quot;<br />
Delete &quot;$INSTDIR\httpd.conf&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>