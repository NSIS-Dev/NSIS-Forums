<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to &quot;forget&quot; mouse clicks (and keypresses)?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to &quot;forget&quot; mouse clicks (and keypresses)? NSIS Discussion" />
	
	<title> How to &quot;forget&quot; mouse clicks (and keypresses)? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to &quot;forget&quot; mouse clicks (and keypresses)?</div>
<hr />
<div class="pda"><a href="t-313117.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313117">How to &quot;forget&quot; mouse clicks (and keypresses)?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">asathatsme</div><div class="date">28th September 2009, 17:27</div></div><div class="posttext">I'm trying to create a page with (atleast) the Next button disabled.  So far I have something like this sample:<br />
<br />
<br />
Page custom nsDialogs_MakeBackup_Create <br />
<br />
....<br />
<br />
Function nsDialogs_MakeBackup_Create<br />
<br />
nsDialogs::Create /NOUNLOAD 1018 ;1040<br />
Pop $Dialog<br />
StrCmp $Dialog error 0 +2<br />
  Abort<br />
<br />
${NSD_CreateLabel} 10u 10u 100% 10u &quot;Please, wait a minute while backup files are being compressed.&quot;<br />
Pop $1<br />
<br />
GetDlgItem $0 $HWNDPARENT 1 ; disable NEXT button<br />
EnableWindow $0 0<br />
GetDlgItem $0 $HWNDPARENT 2 ; disable CANCEL button<br />
EnableWindow $0 0<br />
GetDlgItem $0 $HWNDPARENT 3 ; disable BACK button<br />
EnableWindow $0 0<br />
<br />
ShowWindow $Dialog ${SW_SHOW}<br />
System::Call 'user32.dll::UpdateWindow(i $Dialog) i .r3'<br />
<br />
;longish process here<br />
Sleep 5000<br />
<br />
${NSD_SetText} $1 &quot;Compression has finished.&quot;<br />
<br />
FunctionEnd<br />
<br />
<br />
The idea is just to show a user that something is going on and no need to worry.  And I wanted to keep the standard NSIS page layout so banner plugins are not in my list yet. After this informational page the process should continue normally with the next page without any stops here.<br />
<br />
The problem is that if you click any of the disabled buttons they will be remembered when the next page appears.  Which is not a good thing.<br />
<br />
Are there any nifty system::calls that would take care of unwanted messages?  (I'm not very good with system::calls yet as I haven't needed them much)<br />
<br />
Thanks in advance.<br />
<br />
cheers..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">28th September 2009, 17:51</div></div><div class="posttext">You are blocking the UI thread, calling ShowWindow+UpdateWindow is cheating. What is this longish process? a nsis plugin call or running a external program?<br />
<br />
Someone(Not me I hope) could write a plugin that allows you to execute a nsis function in another thread while still processing UI messages<br />
<br />
Edit: If you are running a external program, you could probably cheat by using nsDialog timers. Have your installer generate a batch file and exec it without waiting. Something like:<br />
<br />
@echo off<br />
start &quot;&quot; /WAIT &quot;$instdir\someapp.exe&quot; param1 &quot;param 2&quot;<br />
echo. &gt; &quot;$pluginsdir\done&quot;<br />
cls<br />
<br />
<br />
and have the timer check if &quot;$pluginsdir\done&quot; exists every second or so</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">28th September 2009, 18:52</div></div><div class="posttext">The idea is just to show a user that something is going on and no need to worryI had to cope with a similar situation (i.e. avoiding problems caused by user clicking the NEXT button &quot;too soon&quot;).<br />
<br />
My solution was to hide the installer window and use the banner plugin to display some text. The banner text is updated every second or so to reassure the user and once the other process has completed the installer window gets shown again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">asathatsme</div><div class="date">28th September 2009, 19:43</div></div><div class="posttext">Anders:<br />
The longish process is atm a call to MakeCAB.<br />
<br />
nsTimers might be one solution, I'll have to keep that in my mind.  I did look at them once already if I could figure out something with them, but forgot them later.<br />
<br />
pengyou: <br />
Banners are a solution, but I decided they will be my last resource.  Unless somebody shows me a banner that looks like a normal nsis page (and follows the rules nsis uses to build them, like colours, font sizes etc).  And editable with nsDialogs commands would be a nice option too ; )<br />
<br />
Thanks for both of you for reminding me about these :) But I still hope there were some neat tricks to clear those extra messages.<br />
<br />
cheers..</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>