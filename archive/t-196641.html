<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Getting &quot;Don't place shortcuts&quot; checkbox's state, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Getting &quot;Don't place shortcuts&quot; checkbox's state NSIS Discussion" />
	
	<title> Getting &quot;Don't place shortcuts&quot; checkbox's state [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Getting &quot;Don't place shortcuts&quot; checkbox's state</div>
<hr />
<div class="pda"><a href="t-196641.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=196641">Getting &quot;Don't place shortcuts&quot; checkbox's state</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SupSuper</div><div class="date">16th October 2004, 23:00</div></div><div class="posttext">How do I get the state of the &quot;Don't place shortcuts&quot; checkbox in the MUI Startmenu page? I want to know so that my page, which allows the user to set which shortcuts he wants created, only shows up when that checkbox isn't checked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">17th October 2004, 11:59</div></div><div class="posttext">The Start Menu folder variable will be prefixed with a '&gt;' character.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AldoRay</div><div class="date">15th March 2012, 16:28</div></div><div class="posttext">Hello everybody.<br />
<br />
Bringing up a very old thread.<br />
<br />
&gt; The Start Menu folder variable will be prefixed with a '&gt;' character. <br />
<br />
How do I read out the &quot;Start Menu folder variable&quot; when I'm not anymore in the start menu dialog?<br />
<br />
I want to put a URL entry to the start menu at the very end of the installation, but only if the user didn't check the &quot;Don't place shortcuts&quot; checkbox.<br />
<br />
Any hint very much appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th March 2012, 18:01</div></div><div class="posttext">You provide the variable (MUI_PAGE_STARTMENU pageid variable)<br />
<br />
Ignoring the user is evil, why would you want to do this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AldoRay</div><div class="date">15th March 2012, 19:25</div></div><div class="posttext">Hello Anders,<br />
<br />
thank you very much for your reply.<br />
<br />
&gt; You provide the variable (MUI_PAGE_STARTMENU pageid variable)<br />
<br />
Excuse my ignorance, but I'm not yet familliar with NSIS speak. What do you mean by this?<br />
<br />
I could do<br />
!insertmacro MUI_STARTMENU_GETFOLDER Application $0<br />
<br />
but I always get &quot;MyApp&quot; and never &quot;&gt;MyApp&quot;, regardless if I checked the &quot;Don't place shortcuts&quot; checkbox or not.<br />
<br />
&gt; Ignoring the user is evil, why would you want to do this?<br />
<br />
Huh?<br />
<br />
That's exactly what I don't want to do, ignoring the user. I want to find out if he checked the box or not and ONLY create the URL shortcut, if he didn't.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th March 2012, 20:44</div></div><div class="posttext">Huh?<br />
<br />
That's exactly what I don't want to do, ignoring the user. I want to find out if he checked the box or not and ONLY create the URL shortcut, if he didn't.<br />
<br />
If the checkbox is not checked you should not add anything to the startmenu, that is the whole point of the checkbox.<br />
<br />
Using $0 is not a good idea, make your own variable with Var.<br />
<br />
MUI_STARTMENU_GETFOLDER is for the uninstaller, in the installer you can just check the variable directly.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AldoRay</div><div class="date">16th March 2012, 09:54</div></div><div class="posttext">Hi Anders,<br />
<br />
again thank you for your quick reply.<br />
<br />
If the checkbox is not checked you should not add anything to the startmenu, that is the whole point of the checkbox.<br />
<br />
This must be a misunderstanding. Again: the reason to check the checkbox variable is to NOT install the URL startmenu link in that case.<br />
<br />
Using $0 is not a good idea, make your own variable with Var.<br />
<br />
Understood.<br />
<br />
MUI_STARTMENU_GETFOLDER is for the uninstaller, in the installer you can just check the variable directly.<br />
<br />
Sorry to be so ignorant :o How would I do that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th March 2012, 12:59</div></div><div class="posttext">Yeah, a misunderstanding about the checkbox state, sorry about that.<br />
<br />
Anyway, to check the variable just copy the first character into $0 with StrCpy and then compare $0 with &quot;&gt;&quot;. The reason &gt; is used is because it is invalid in a path, so even without checking first, a call to createshortcut or writeinistr will just fail...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AldoRay</div><div class="date">16th March 2012, 14:28</div></div><div class="posttext">Yeah, a misunderstanding about the checkbox state, sorry about that.<br />
<br />
Never mind. It's me who is asking questions about basic stuff :o<br />
<br />
Anyway, to check the variable just copy the first character into $0 with StrCpy and then compare $0 with &quot;&gt;&quot;. The reason &gt; is used is because it is invalid in a path, so even without checking first, a call to createshortcut or writeinistr will just fail...<br />
<br />
That's clear to me, thank you. What is still not clear to me is what this does mean:<br />
<br />
You provide the variable (MUI_PAGE_STARTMENU pageid variable)<br />
<br />
<br />
What would I really write in my NSIS script to retreive the variable?<br />
<br />
Would I write<br />
<br />
var /GLOBAL MuiPageStartMenuFolder<br />
StrCpy $MuiPageStartMenuFolder &quot;${MUI_STARTMENUPAGE_pageid_VARIABLE}&quot; 1<br />
<br />
<br />
Hm, I guess that won't work :down:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AldoRay</div><div class="date">16th March 2012, 17:37</div></div><div class="posttext">Got it:${MUI_STARTMENUPAGE_Application_VARIABLE}<br />
<br />
Thank you Anders!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th March 2012, 22:21</div></div><div class="posttext">Why are you making this so hard? :)<br />
<br />
<br />
var /GLOBAL StartMenuFolder<br />
...<br />
!insertmacro MUI_STARTMENU_GETFOLDER Application $StartMenuFolder<br />
...<br />
StrCpy $0 $StartMenuFolder 1<br />
StrCmp $0 &quot;&gt;&quot; ...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>