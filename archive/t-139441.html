<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Verifying serial number in installer itself, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Verifying serial number in installer itself NSIS Discussion" />
	
	<title> Verifying serial number in installer itself [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Verifying serial number in installer itself</div>
<hr />
<div class="pda"><a href="t-139441.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=139441">Verifying serial number in installer itself</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">roboldham</div><div class="date">18th June 2003, 19:36</div></div><div class="posttext">Hi there<br />
<br />
This is what I need to do:<br />
<br />
Customer purchases HTML content and PDFs off website, is given a serial number that is generated from their e-mail.<br />
<br />
They then download their installer (written in NSIS of course!) and they then enter their email address and given serial number.<br />
<br />
It doesnt need to be super secure, but I want to perform a simple check that the two match up.<br />
<br />
I have some BASIC that can do it, but can it be implemented in NSIS scripting? (see below) MANY THANKS!<br />
<br />
Function Encrypt(Text As String, EncryptKey As Integer)<br />
 Dim Temp As String, RR As Integer<br />
 For RR = 1 To Len(Text)<br />
      Temp$ = Temp$ + Chr$(Asc(Mid(Text, RR, 1)) Xor EncryptKey)<br />
 Next RR<br />
 Encrypt = Temp<br />
End Function<br />
<br />
Password = Encrypt(Password, Len(Password) + 77)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">18th June 2003, 19:42</div></div><div class="posttext">Not all these functions are available, but there are similar instructions you can use to create basic encryption.<br />
<br />
For more advanced stuff, you can write a C/C++/Delphi plug-in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th June 2003, 19:46</div></div><div class="posttext">You need to firstly create an InstallOptions page (${NSISDIR}\Contrib\InstallOptions\)<br />
With that you can use ReadINIStr to get entered values from field boxes / password boxes etc like so:<br />
ReadINIStr $0 &quot;$PLUGINSDIR\IOfile.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
You can then compare your password like so:<br />
<br />
StrCmp $0 [yourpassword] correct incorrect<br />
correct:<br />
;stuff to do if password is not wrong<br />
Goto passend<br />
incorrect:<br />
;suff to do if password is wrong<br />
passend:<br />
<br />
You can get the user to re-enter their password using a messagebox:<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Password incorrect!!!$\nYou must re-enter your given password.&quot; IDOK pagetop<br />
That will jump to the pagetop label, which you put above the InstallOptions call like so:<br />
<br />
Page Custom &quot;PasswordDialog&quot; &quot;&quot; &quot; - Enter Serial Code&quot;<br />
Funcion PasswordDialog<br />
File /oname=$PLUGINSDIR\iofile.ini &quot;${NSISDIR}\myapp\iofile1.ini&quot;<br />
pagetop:<br />
<br />
InstallOptions::dialog &quot;$PLUGINSDIR\iofile.ini&quot;<br />
Pop $R0<br />
StrCmp $R0 back pagebottom ;if user presses back<br />
StrCmp $R0 cancel pagebottom ;if user presses cancel<br />
<br />
ReadINIstr $R0 &quot;$PLUGINSDIR\iofile.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
StrCmp $R0 xyz321 passok<br />
<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Serial Code is incorrect!&quot; IDOK paketop<br />
<br />
passok:<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">roboldham</div><div class="date">18th June 2003, 22:56</div></div><div class="posttext">Ok thanks guys, that gave me some pointers!<br />
<br />
I am suprised no-one had tried this out yet!<br />
<br />
Will let you know how I get on.<br />
<br />
Thanks again<br />
<br />
R</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">19th June 2003, 01:18</div></div><div class="posttext">I'll be cooller if IO can encrypt the text from passwords objects.<br />
:)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>