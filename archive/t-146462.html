<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallOptions: colored labels, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallOptions: colored labels NSIS Discussion" />
	
	<title> InstallOptions: colored labels [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallOptions: colored labels</div>
<hr />
<div class="pda"><a href="t-146462.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=146462">InstallOptions: colored labels</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gsimone</div><div class="date">20th August 2003, 22:48</div></div><div class="posttext">Hi,<br />
<br />
Here is a change to InstallOptions which allows colored text labels.<br />
<br />
I am developing a custom welcome page with white text on a relatively dark background image.  The TxtColor attribute is working fine for the links, however I need white text for some labels as well.<br />
<br />
So ... I poked around in InstallerOptions.cpp. Most of the work seems to be done. Controls store the text color in the hImage member of the field, but there is no code to change the text color for labels.  I made the following change, which seems to work for me.  <br />
Around line 754, replace the final switch case with:<br />
<br />
<br />
    case WM_CTLCOLORSTATIC:<br />
    case WM_CTLCOLOREDIT:<br />
    case WM_CTLCOLORDLG:<br />
    case WM_CTLCOLORBTN:<br />
    case WM_CTLCOLORLISTBOX:<br />
    {<br />
      BOOL brush = (BOOL)GetWindowLong((HWND)lParam, GWL_USERDATA);<br />
      if (brush)<br />
      {<br />
        UINT id = (UINT) GetWindowLong( (HWND)lParam, GWL_ID );<br />
        UINT nIdx = ::FindControlIdx( id );<br />
        if ( nIdx != -1 )<br />
        {<br />
           SetTextColor((HDC)wParam,(COLORREF)pFields[nIdx].hImage);<br />
        }<br />
        SetBkMode((HDC)wParam, TRANSPARENT);<br />
        return brush;<br />
      }<br />
    }<br />
<br />
<br />
<br />
Now I modify the label in the .ini file:<br />
<br />
<br />
[Field 1]<br />
Type=Label<br />
TxtColor=0xFFFFFF<br />
Left=202<br />
Right=322<br />
Top=152<br />
Bottom=190<br />
<br />
<br />
<br />
And make sure to set the background color for the label to transparent:<br />
<br />
  GetDlgItem $DLGITEM $HWND_WELCOME_DIALOG 1200<br />
  SetBkColor $DLGITEM transparent<br />
<br />
<br />
And it seems to work.<br />
<br />
If there is a better way to do this, or if a similar change is in the works by the developers, please let me know.<br />
<br />
Thanks,<br />
<br />
 - Guido</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">20th August 2003, 23:26</div></div><div class="posttext">Support for changing text foreground colors will be added soon (for the whole NSIS UI, not only IO).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">20th August 2003, 23:41</div></div><div class="posttext">ah, cool, have been waiting for that, especially for changing the header description foreground colors in modernui</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">21st August 2003, 19:00</div></div><div class="posttext">Yes! How soon? :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">25th August 2003, 07:22</div></div><div class="posttext">Originally posted by Joost Verburg <br />
Support for changing text foreground colors will be added soon (for the whole NSIS UI, not only IO).  <br />
Will this include MessageBoxes?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th August 2003, 10:30</div></div><div class="posttext">No. You can't change the color of messagebox texts (not supported by Windows).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">25th August 2003, 17:23</div></div><div class="posttext">:weird: :down: :weird:<br />
<br />
<br />
<br />
(I know it's not your fault)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2003, 13:43</div></div><div class="posttext">*cough* latest newstuff *cough*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">28th August 2003, 13:53</div></div><div class="posttext">mmmm....</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>