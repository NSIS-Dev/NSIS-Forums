<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Logging Install Type, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Logging Install Type NSIS Discussion" />
	
	<title> Logging Install Type [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Logging Install Type</div>
<hr />
<div class="pda"><a href="t-103134.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=103134">Logging Install Type</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">2nd September 2002, 08:43</div></div><div class="posttext">hi.<br />
<br />
quick question.<br />
i want to make a regkey or something, which will let the installer resume after a restart, and continue to install the software, depending on what seting the user specified befour<br />
eg. InstType 1, or InstType 2, etc.<br />
<br />
is there any easy way to do this???<br />
<br />
ive had an attempt, but doesnt work to well...<br />
well, not at all<br />
hehe...<br />
<br />
thanx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd September 2002, 10:11</div></div><div class="posttext">You can always log each section's state using SectionGetFlags, but if you want to log the install type (make sure there is no custom option), make a hidden section for each install type and make it write to the registry the install type.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">2nd September 2002, 10:37</div></div><div class="posttext">that was the plan.<br />
<br />
is there a number assocated with the instType or something???<br />
<br />
the program is getting the value, 1, 2 or 3.<br />
how do i get it?<br />
what variable is assigned the value?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd September 2002, 10:41</div></div><div class="posttext">Each type is numbered, starting at 1.<br />
Currently there is no easy way to get it, you will have to remember it :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">3rd September 2002, 07:13</div></div><div class="posttext">so basically, nsis doesnt hav a variable which stores this info.<br />
i hav to get each section to make a line in the registry, or something like that???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd September 2002, 11:27</div></div><div class="posttext">Yes, SectionGetFlags for each section you want to save.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">4th September 2002, 07:26</div></div><div class="posttext">ah, of corse... <br />
<br />
thanks for that.<br />
<br />
so with this i can store what InstTpye the user sets.<br />
<br />
eg.<br />
<br />
InstType &quot;Type 1&quot; <br />
InstType &quot;Type 2&quot; <br />
InstType &quot;Type 3&quot; <br />
<br />
Section &quot;Standard (Required)&quot;<br />
SectionEnd<br />
<br />
Section &quot;Section2&quot;<br />
  SectionIn 2<br />
  SectionIn 3<br />
SectionEnd<br />
<br />
Section &quot;Section3&quot;<br />
  SectionIn 1<br />
  SectionIn 2<br />
SectionEnd<br />
<br />
how would i log if the user selcts InstType 1, 2 or InstType 3?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2002, 08:09</div></div><div class="posttext">If you want to log the install type (make sure there is no custom option), make a hidden section for each install type and make it write to the registry the install type.<br />
;)<br />
<br />
For example:<br />
Section &quot;&quot;<br />
  SectionIn 1<br />
  WriteRegStr HKLM &quot;whereever\you\want\to\save&quot; &quot;insttype1&quot; &quot;selected&quot;<br />
SectionEnd<br />
<br />
The problem is that if a user uses a custom selection you won't get the wanted results.<br />
<br />
You might want to unselect every hidden section as the above one when you the user selects a custom set of sections. To do this you will have to use a lot of GetSectionFlags to make sure no set install type was selected.<br />
<br />
The best way IMHO, is to just save the sections that the user really have installed and not to look on the install types. That is of cousrse, unless you don't allow custom.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">4th September 2002, 08:16</div></div><div class="posttext">i hav added the /nocustom , so the usre cant allow do a custom selection.<br />
<br />
the problem arrise though, is that after each section is called up, on then is a regestry key created.<br />
so if for example, in section 1, a restart occers, only the section 1 entry wil be saved.<br />
this means thatupon reboot, when the program resumes, it cant detect which instType was selected.<br />
i guess i should hav mensioned this befour... sorry<br />
<br />
so, basically , i need to create a key just after the user selects the instaype and selects install. but, it seems that its not possible. or am i wrong again???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2002, 08:35</div></div><div class="posttext">It is possible, but not that simple. You will have to use the .onNextPage callback after the components are selected, and use a lot of SectionGetFlags in it to find out which InstType was selected.<br />
<br />
A small trick that could help you would be creating those hidden sections after all and make sure every hidden section is only in one InstType. Then just use SectionGetFlags on every one of those hidden sections to find out which InstType was selected. This way you have only one &quot;if&quot; for every InstType.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">4th September 2002, 08:42</div></div><div class="posttext">yeah, that was my next step...<br />
well, thanks for your help...<br />
<br />
<br />
much appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">4th September 2002, 08:56</div></div><div class="posttext">ok, ive just started to add in the hidden stuff... but<br />
<br />
it seems that any hidden section is automatically caleld upon, where its specifed or not, or so it seems from the nsis docu's<br />
<br />
or is that only for un-named sections????<br />
eg, if i do what i hav below, will it run all of then, or aonly the ones that i call???<br />
<br />
Section &quot;-hidden1&quot;<br />
  sectionin 1<br />
  do stuff<br />
make reg string<br />
SectionEnd<br />
<br />
Section &quot;-hidden2&quot;<br />
  sectionin 2<br />
  do stuff<br />
make reg string<br />
SectionEnd<br />
<br />
Section &quot;-hidden3&quot;<br />
  sectionin 3<br />
  do stuff<br />
  make reg string<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2002, 09:04</div></div><div class="posttext">Hmm... I can quite test it now because I am not at home, and I can't install NSIS here. I will answer you later unless someone answers before me ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">4th September 2002, 09:09</div></div><div class="posttext">ok, never mind, i hav found a solution..<br />
<br />
agian thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2002, 09:30</div></div><div class="posttext">Care to share?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ViperInc</div><div class="date">5th September 2002, 07:13</div></div><div class="posttext">um,<br />
<br />
i just made each section hav its own installation stuff, so i dont hav to move threw sections..<br />
then on restarts, i just chek the reg, befour the program luchnes, then the setup continues, and bypasses all the NSIS prgram front and so forth...<br />
<br />
quite happy with myself now...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dizzy007</div><div class="date">31st October 2002, 15:28</div></div><div class="posttext">I have had the same problem ..<br />
<br />
This is a &quot;workaround&quot; :<br />
-----<br />
Section &quot;Choice 1&quot;<br />
  SectionIn 1<br />
   WriteIniStr &quot;$TEMP\iniC.ini&quot; &quot;Section&quot; &quot;Choice&quot; 1<br />
SectionEnd<br />
Section &quot;Choice 2&quot;<br />
  SectionIn 2<br />
   WriteIniStr &quot;$TEMP\iniC.ini&quot; &quot;Section&quot; &quot;Choice&quot; 2<br />
SectionEnd<br />
Section &quot;Choice 3&quot;<br />
  SectionIn 3<br />
   WriteIniStr &quot;$TEMP\iniC.ini&quot; &quot;Section&quot; &quot;Choice&quot; 3<br />
SectionEnd<br />
Section &quot;Choice 4&quot;<br />
  SectionIn 4<br />
   WriteIniStr &quot;$TEMP\iniC.ini&quot; &quot;Section&quot; &quot;Choice&quot; 4<br />
SectionEnd<br />
Section &quot;Choice other&quot;<br />
  SectionIn 5<br />
   WriteIniStr &quot;$TEMP\iniC.ini&quot; &quot;Section&quot; &quot;Choice&quot; 5<br />
SectionEnd<br />
----<br />
So, i wrote the InstType section to my ini - available at every time ..<br />
<br />
:D <br />
<br />
Greets <br />
Dizzy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">31st October 2002, 15:33</div></div><div class="posttext">In the latest CVS version invisibile sections can also use SectionIn, so you can use that too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">1st November 2002, 13:42</div></div><div class="posttext">let the installer resume after a restart, and continue to install the softwareI don't know if you know this already:o, but if you write to this registry key:<br />
HKEY_LOCAL_MACHINE/Software/Microsoft/Windows/CurrentVersion/RunOnce<br />
...and you make a new key or string (I can check right now) with the name of your program and the setup-path as the value, It should be started on Windows startup, but only once.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>