<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Password protected archive, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Password protected archive NSIS Discussion" />
	
	<title> Password protected archive [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Password protected archive</div>
<hr />
<div class="pda"><a href="t-275627.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=275627">Password protected archive</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">9th August 2007, 17:04</div></div><div class="posttext">Hey all,<br />
<br />
I'm looking for a way to provide a password protected archive with an installed (zip, rar, tarball, archive format doesnt really matter).<br />
<br />
I've looked at the Nsisunz, UnTGZ and ZipDLL plugins, but none of them support encrypted archives.<br />
<br />
Any ideas would be appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">9th August 2007, 17:45</div></div><div class="posttext">Did you check the stand alone command line 7za.exe?<br />
It might support such feature.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">10th August 2007, 10:18</div></div><div class="posttext">I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th August 2007, 12:14</div></div><div class="posttext">Why? 7za.exe is the only way to enter the password to open the archive itself.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">10th August 2007, 12:29</div></div><div class="posttext">If you pass the password as a parameter to 7za.exe, someone could just use process explorer to check the full command line it was launched with. In the end, no protection is 100%, your only hope is to stop people with limited knowledge</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th August 2007, 12:59</div></div><div class="posttext">That is a problem. How about calling the dll instead then with the System plug-in?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">11th August 2007, 04:59</div></div><div class="posttext">Yea, I was referring to the command line issue. Thanks for the pointer Stu, I completely overlooked the dll option, will go over the details for the library today.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">11th August 2007, 07:33</div></div><div class="posttext">I've looked through the 7zip SDK, but there doesnt seem to be anything about using the compiled dll binary at runtime to extract an archive.<br />
<br />
Zlib looks good, but doesnt support password protection.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ClayDowling</div><div class="date">12th August 2007, 11:40</div></div><div class="posttext">Why does the archive have to be password protected?  If you're extracting the contents during the install there isn't any great benefit.<br />
<br />
If you're worried about somebody getting the contents by decompiling your installer check out the encryption plugins.  You can encrypt the archives before putting them in the installer, then decrypt them before extraction.<br />
<br />
If you'd like the decryption and extraction to occur after the software is installed OpenSSL has a lot of functions that can do this for you.  The documentation on that package is not quite as clear as you might desire, but Linux Journal has articles on how to use it, and it works the same on Linux and Windows.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">12th August 2007, 15:17</div></div><div class="posttext">Yeah, the point is to protect the files UNLESS they're extracted through the installer itself.<br />
<br />
I'll look into the crypto plugin option, DcryptDll looks good.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sag47</div><div class="date">12th August 2007, 20:45</div></div><div class="posttext">Originally posted by Backland <br />
Hey all,<br />
<br />
I'm looking for a way to provide a password protected archive with an installed (zip, rar, tarball, archive format doesnt really matter).<br />
<br />
I've looked at the Nsisunz, UnTGZ and ZipDLL plugins, but none of them support encrypted archives.<br />
<br />
Any ideas would be appreciated!  <br />
Se this thread:<br />
Click Here (http://forums.winamp.com/showthread.php?postid=2084891#post2084891)<br />
<br />
As far as cryptic details of the password protected archive; I don't know what encryption standards (AES, Twofish, Serpent) or hash algorythms (SSH1, SSH2, Whirlpool) are used in UHARC.  Depending on how mission critical your files are it may be better to get a command line encryptor from http://www.sf.net and then use NSIS to automatically decrypt it (just search for encryption or something).  You can use the same method that is used in automatically extracting UHARC archives as you can with extracting any command line based archive, whether it be encrypted, compressed, or both.  However if all you need is simple password protection and not U.S. Government standard encryption then UHARC is good for you.<br />
<br />
Here is a link to UHARC files:<br />
ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip<br />
<br />
You could also try bcrypt which uses blowfish (448-bit) encryption.  They also provide the source code so there is not limit on implementation.  Here is a link:<br />
bcrypt Homepage on Source Forge (http://sourceforge.net/project/showfiles.php?group_id=62194)<br />
<br />
Here is one more link to help you get started:<br />
Cryptography on SourceForge.net (http://sourceforge.net/softwaremap/trove_list.php?form_cat=44)<br />
<br />
If you have need for it I can suggest programs that use extremely strong encryption that are free.<br />
SAM</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sag47</div><div class="date">12th August 2007, 21:28</div></div><div class="posttext">Originally posted by Backland <br />
I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.  <br />
<br />
That is not a viable concern.  You cannot simply replace the Zza.exe file with just a simple file that does nothing but extract archives.  The same goes with all the popular compressors (RaR, UHARC, etc...)<br />
<br />
Those archives create a hash and encrypt the archive that can only be decrypted with a key (in this case the key is the password).  So if you replace a file with just a dummy file that does nothing but extract archives then it will see the archive as being corrupt or not in the format it should be and then throw an error saying something is wrong with the archive.  So basically without the password it is just a file of random data that can't be accessed until that password is cracked.  So depending on how complicated your password will be the security of your archive.<br />
SAM<br />
<br />
Edit: I believe I misunderstood your concern when I was replying.  Do you mean a dummy file that does nothing but take the arguments given to it and store them in a text file?  Because I could see where that would be a concern if you don't ask the user for the password for the archive.  In that case I could see where the use of md5deep (http://sourceforge.net/project/showfiles.php?group_id=67079)  could be used that creates a hash of your file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sag47</div><div class="date">12th August 2007, 23:44</div></div><div class="posttext">Originally posted by Backland <br />
I think thats a viable solution since 7z is redistributable, but my concern would be that it would be very easy to get the archive password by simply replacing 7za.exe with a dummy file, so some validation checks on the 7za.exe file would be needed.  <br />
<br />
I've changed the documentation to the Crypto Plug-in<br />
http://nsis.sourceforge.net/Crypto_plug-in#File_Hash<br />
<br />
Documentation now tells you how to do do a validation check on a file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sag47</div><div class="date">13th August 2007, 00:31</div></div><div class="posttext">Originally posted by sag47 <br />
Se this thread:<br />
Click Here (http://forums.winamp.com/showthread.php?postid=2084891#post2084891)<br />
<br />
As far as cryptic details of the password protected archive; I don't know what encryption standards (AES, Twofish, Serpent) or hash algorythms (SSH1, SSH2, Whirlpool) are used in UHARC.  Depending on how mission critical your files are it may be better to get a command line encryptor from http://www.sf.net and then use NSIS to automatically decrypt it (just search for encryption or something).  You can use the same method that is used in automatically extracting UHARC archives as you can with extracting any command line based archive, whether it be encrypted, compressed, or both.  However if all you need is simple password protection and not U.S. Government standard encryption then UHARC is good for you.<br />
<br />
Here is a link to UHARC files:<br />
ftp://ftp.elf.stuba.sk/pub/pc/pack/uharc06b.zip<br />
<br />
You could also try bcrypt which uses blowfish (448-bit) encryption.  They also provide the source code so there is not limit on implementation.  Here is a link:<br />
bcrypt Homepage on Source Forge (http://sourceforge.net/project/showfiles.php?group_id=62194)<br />
<br />
Here is one more link to help you get started:<br />
Cryptography on SourceForge.net (http://sourceforge.net/softwaremap/trove_list.php?form_cat=44)<br />
<br />
If you have need for it I can suggest programs that use extremely strong encryption that are free.<br />
SAM  <br />
I meant to say SHA-1 and MD5 not SSH1 and SSH2.  Hehe, I was thinking diff thoughts when typing that :rolleyes: <br />
SAM</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th August 2007, 05:31</div></div><div class="posttext">Originally posted by Backland <br />
I'll look into the crypto plugin option, DcryptDll looks good.  DcryptDll is good enough for the job, after all you know that there's not 100% protection out there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">13th August 2007, 09:30</div></div><div class="posttext">Yeah that seems like a great option... and in this case (which needs some less complex protection), the files can be stored in a passworded archive, and the installer checks the integrity of the extraction module (such as 7z.exe) with a hash as suggested by sag47.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>