<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" question about nsisdl::download, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  question about nsisdl::download NSIS Discussion" />
	
	<title> question about nsisdl::download [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  question about nsisdl::download</div>
<hr />
<div class="pda"><a href="t-198048.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=198048">question about nsisdl::download</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">routing</div><div class="date">1st November 2004, 16:53</div></div><div class="posttext">I used nsisdl::download (see below) in my script.<br />
<br />
nsisdl::download /TRANSLATE &quot;$(DESC_DOWNLOADING)&quot; &quot;$(DESC_CONNECTING)&quot; \<br />
&quot;$(DESC_SECOND)&quot; &quot;$(DESC_MINUTE)&quot; &quot;$(DESC_HOUR)&quot; &quot;$(DESC_PLURAL)&quot; \<br />
&quot;$(DESC_PROGRESS)&quot; &quot;$(DESC_REMAINING)&quot; \<br />
/TIMEOUT=30000 &quot;${URL_DOTNET_1033}&quot; &quot;$PLUGINSDIR\dotnetfx.exe&quot;<br />
<br />
But there is nothing on screen. I'm wondering why.<br />
I need a window to show progress info.<br />
<br />
<br />
I appreciate your help very much.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">razor_x</div><div class="date">1st November 2004, 17:03</div></div><div class="posttext">try it without defines and supply a valid url<br />
<br />
you may be surprised that there is a status window :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">routing</div><div class="date">1st November 2004, 17:37</div></div><div class="posttext">I tried <br />
nsisdl::download &quot;${URL_DOTNET_1033}&quot; &quot;$PLUGINSDIR\dotnetfx.exe&quot;<br />
<br />
Nothing appeared.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st November 2004, 17:39</div></div><div class="posttext">You should be using curly brackets for the defines! { not (<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">routing</div><div class="date">1st November 2004, 17:43</div></div><div class="posttext">Hi Stu,<br />
  Thanks for your info.<br />
  I changed, but still nothing.<br />
<br />
nsisdl::download /TRANSLATE &quot;${DESC_DOWNLOADING}&quot; &quot;${DESC_CONNECTING}&quot; \<br />
       &quot;${DESC_SECOND}&quot; &quot;${DESC_MINUTE}&quot; &quot;${DESC_HOUR}&quot; &quot;${DESC_PLURAL}&quot; \<br />
       &quot;${DESC_PROGRESS}&quot; &quot;${DESC_REMAINING}&quot; \<br />
       /TIMEOUT=30000 &quot;${URL_DOTNET_1033}&quot; &quot;$PLUGINSDIR\dotnetfx.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st November 2004, 18:59</div></div><div class="posttext">Please attach your script.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">routing</div><div class="date">1st November 2004, 19:34</div></div><div class="posttext">Thank you very much, Stu for your help.<br />
When I put the nsisdl::download /TRANSLATE into .onInit,<br />
there is no progress bar. When I put it into Section -AdditionalIcons, the progrss bar came out. Is it normal?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st November 2004, 21:47</div></div><div class="posttext">Ah well you never mentioned that :p<br />
<br />
Although it doesn't say in the readme, NSISdl's dialogue will only be shown if you call NSISdl from a Section. This is because NSISdl duplicates the progess bar (msctls_progress32) and label (static) controls from the InstFiles page for its progress bar and message (% done).<br />
<br />
All I can suggest is that if you are going to use it outside the InstFiles page, you show a Banner displaying a message.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">3rd November 2004, 11:52</div></div><div class="posttext">Long-long ago I wrote http client for my program (Win95 compatibility). And I remember 3 situations with file length: <br />
<br />
1. CONTENT-LENGTH: presents in http header. Found in  NSISdl code - it generates error if not finds this (optional) header <br />
 'error = &quot;Server did not specify content length.&quot;;'<br />
May be this is warning only ..<br />
<br />
2. length not defined at all, so program can try to read it till end. May be this also works in NSISdl.<br />
<br />
3. (my question) TRANSFER-ENCODING: chunked . VC editor could not find &quot;chunk&quot; in NSISdl sources. It looks like plug-in not checks this http header. At least program must remove chunk headers (== chunk length) in the data stream, otherwise content will be corrupted. I could not find this is in code, so can anybody say me that chunked replys work with NSISdl?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">3rd November 2004, 15:50</div></div><div class="posttext">Originally posted by routing <br />
When I put the nsisdl::download /TRANSLATE into .onInit,<br />
there is no progress bar. When I put it into Section -AdditionalIcons, the progrss bar came out. Is it normal?  <br />
<br />
Sometimes this helps :)<br />
<br />
    System::Call &quot;comctl32::InitCommonControls()&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">3rd November 2004, 20:14</div></div><div class="posttext">Sometimes this helps :)<br />
<br />
System::Call &quot;comctl32::InitCommonControls()&quot;Function .onInit doesn't have the GUI initialized yet, so it won't work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">4th November 2004, 06:38</div></div><div class="posttext">Originally posted by deguix <br />
Function .onInit doesn't have the GUI initialized yet, so it won't work.  <br />
<br />
This is initialization of common controls itself :) (i.e. progress bar init). Installer calls this or ...Ex() function later, on it's own GUI init - without this WIN32 apps cannot create list and tree views, progress and status bars, tabs and others. /NOUNLOAD key may also require in this plugin call.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th November 2004, 18:22</div></div><div class="posttext">InitCommonControls is called before .onInit is called. But as deguix said, the NSIS dialog is not yet created when .onInit is called. NSISdl uses the NSIS dialog as its parent.<br />
<br />
TRANSFER-ENCODING: chunked is a feature of HTTP/1.1. NSISdl uses HTTP/1.0.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>