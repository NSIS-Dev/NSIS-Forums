<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Strange Vista Issue (Not Shortcut!), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Strange Vista Issue (Not Shortcut!) NSIS Discussion" />
	
	<title> Strange Vista Issue (Not Shortcut!) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Strange Vista Issue (Not Shortcut!)</div>
<hr />
<div class="pda"><a href="t-287864.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287864">Strange Vista Issue (Not Shortcut!)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">1st March 2008, 23:37</div></div><div class="posttext">I'm seeing strange behavior:<br />
<br />
1.) Install app <br />
2.) Use App. You have to register in my app. When you are done, you get prompted for a u/p.<br />
3.) Exit App<br />
4.) Uninstall App<br />
5.) Confirm all files are removed. Check!<br />
6.) Confirm used registry settings are removed. Check!<br />
<br />
Now, if I reinstall the same app (using the same installer), and launch it, I'm not presented with my registration screens, but rather my login window. It's like my app was never uninstalled.<br />
<br />
If I change the location of my installed app (using the same installer), everything functions as expected.<br />
<br />
Help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd March 2008, 20:09</div></div><div class="posttext">You'll have to include more details. What exactly happens when a user registers? Does it write a file? Does it write to the registry?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">6th March 2008, 15:32</div></div><div class="posttext">Originally posted by kichik <br />
You'll have to include more details. What exactly happens when a user registers? Does it write a file? Does it write to the registry?  <br />
<br />
The application does not write to the registry. The installer and uninstaller does, however.<br />
<br />
The app does write to a database. I am using mysql-embedded 4.1 (libmysqld) to access the database files, which are stored on the local filesystem. And to be clear, I am *not* running a mysql server process-- everything is in-line in-memory while the app is running.<br />
<br />
The database files *are* removed during an uninstall.<br />
<br />
The symptoms are, however, as if the files are not removed-- as registration information is cached after a reinstall.<br />
<br />
I'm installing and uninstalling into &quot;C:\Program Files&quot; successfully, using &quot;RequestExecutionLevel admin&quot;.<br />
<br />
I've confirmed the files are not appearing in a search after uninstall.<br />
<br />
Thoughts?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th March 2008, 17:25</div></div><div class="posttext">I have no good idea regarding this. You should add some debug messages into your application to see exactly where it gets that information from and then we might at least have a lead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th March 2008, 17:37</div></div><div class="posttext">My first thought is that the file ended up in virtualstore, but it could also have ended up in some other protected directory that Windows doesn't search in. Who knows, maybe even winsxs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zenkick</div><div class="date">12th March 2008, 16:20</div></div><div class="posttext">Thanks MSG.<br />
<br />
The files that my program needs to write/open, are indeed copied to and used out of the virtualstore. Since my uninstaller doesn't know about that, they never get purged.<br />
<br />
Now I need to know if there is a simple way to have nsis purge the files from a default $INSTVIRTSTORE or something similar?<br />
<br />
Or is that something I have to script like MSG did:<br />
<br />
Previous Post (http://forums.winamp.com/showthread.php?s=&amp;threadid=285290&amp;highlight=virtualstore) <br />
<br />
Please advise.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th March 2008, 20:45</div></div><div class="posttext">Previous post link:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=285290&amp;highlight=virtualstore</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>