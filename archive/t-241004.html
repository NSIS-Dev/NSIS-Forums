<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" AccessControl modify rights?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  AccessControl modify rights? NSIS Discussion" />
	
	<title> AccessControl modify rights? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  AccessControl modify rights?</div>
<hr />
<div class="pda"><a href="t-241004.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=241004">AccessControl modify rights?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">16th March 2006, 10:03</div></div><div class="posttext">I'm trying to give a user NTFS Modify rights on a folder with the following, which does not do it:<br />
<br />
AccessControl::GrantOnFile &quot;$INSTDIR\cactid\&quot; &quot;Everyone&quot; &quot;GenericRead + GenericWrite + GenericExecute + AppendData&quot;<br />
<br />
<br />
That will only give Everyone: 'Read &amp; Execute', 'List folder contents', 'Read', 'Write'.  They must have the Modify rights too.  <br />
<br />
Looking through static const char * g_filePermissionNames[] in accesscontrol.c, I can see all the various names, but apparently the AppendData doesn't do what it should.<br />
<br />
I realize I could use the microsoft xcalcs tool in a seperate script, but I'd rather keep as much of the scripting inside the NSIS installer as possible.<br />
<br />
How can I accomplish this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th March 2006, 17:57</div></div><div class="posttext">If you believe there is a problem in the source code of  AccessControl, you should contact the developer. If you can't reach him and know what the problem is, you can upload a new fixed version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">16th March 2006, 19:26</div></div><div class="posttext">Hi BSOD2600!<br />
<br />
Try that:<br />
<br />
AccessControl::GrantOnFile &quot;$INSTDIR\cactid\&quot; &quot;(S-1-1-0)&quot; &quot;GenericRead + GenericWrite + GenericExecute + Delete&quot;<br />
<br />
&quot;(S-1-1-0)&quot; is Everyone's SID.<br />
<br />
Modify = Read|Write|Execute|Delete<br />
<br />
Please let me know, if it works.<br />
<br />
-Bruno.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">16th March 2006, 21:34</div></div><div class="posttext">Yup, that works, thanks.  Maybe you might want to document a few more examples on how to use your plugin...<br />
<br />
Why didn't the AppendData work?  I thought append was read|write|delete ?<br />
<br />
In the meanwhile I was waiting for a solution for the Modify problem, I switched my script over to use xcacls (i.e. xcacls  $INSTDIR\cactid /T /C /E /G Everyone:R /Y &gt; NUL).<br />
<br />
Another problem I've run across is when trying to apply permissions onto $SYSDIR\cmd.exe.  On XP, the IUSR_COMP has the DENIED permissions set for 'full access' on cmd.exe.  I tried the following, but AccessControl says its unable to write the ACL<br />
<br />
AccessControl::RevokeOnFile &quot;$SYSDIR\cmd.exe&quot; &quot;IUSR_COMPNAME&quot; &quot;FullAcces&quot;<br />
AccessControl::SetOnFile &quot;$SYSDIR\cmd.exe&quot; &quot;IUSR_COMPNAME&quot; &quot;GenericRead + GenericExecute&quot; <br />
<br />
<br />
Any idea why and what's the proper way to do it?  simply trying to use SetOnFile does not work either.  Conversly, when using xcalcs, it applies it just fine (xcacls %WINDIR%\System32\cmd.exe /T /C /E /G IUSR_COMPNAME:R /Y &gt; NUL)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">16th March 2006, 21:43</div></div><div class="posttext">Sorry, I'm not the developer of this plugin.<br />
<br />
Maybe you can find some more information here:<br />
<br />
http://taschenorakel.de/mathias/accesscontrol.de.html</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>