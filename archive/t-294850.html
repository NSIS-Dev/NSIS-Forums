<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Multilanguage header, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Multilanguage header NSIS Discussion" />
	
	<title> Multilanguage header [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Multilanguage header</div>
<hr />
<div class="pda"><a href="t-294850.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294850">Multilanguage header</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brewster333</div><div class="date">21st July 2008, 11:06</div></div><div class="posttext">Hello! I need help... I'm trying to create multilanguage setup using MUI2. I'm using defines:<br />
<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;Header.bmp&quot;<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;Wizard.bmp&quot;<br />
<br />
All works perfectly, but I need use different images for each language... Witch way I can do it (if it is possible)??? <br />
Thank you for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">21st July 2008, 12:34</div></div><div class="posttext">I believe that you can use a variable instead of the filename and fill the variable in onInit with some language string.<br />
<br />
I didn't tried it.<br />
<br />
EDIT: Ooops, it doesn't work...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brewster333</div><div class="date">21st July 2008, 13:50</div></div><div class="posttext">I trying different ways to solve this problem (image substitution in .onGUIInit, MUI_HEADERIMAGE_BITMAP redefining), but it does not woking... May be ChangeUI function help me? I am a novice in NSIS-script developing and don't know which parameters use for ChangeUI...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 14:46</div></div><div class="posttext">LanguageString!<br />
<br />
LangStr HeaderImage ${LANG_ENGLISH} &quot;Header_EN.bmp&quot;<br />
LangStr HeaderImage ${LANG_GERMAN} &quot;Header_DE.bmp&quot;<br />
LangStr WizardImage ${LANG_ENGLISH} &quot;Wizard_EN.bmp&quot;<br />
LangStr WizardImage ${LANG_GERMAN} &quot;Wizard_DE.bmp&quot;<br />
<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;$(HeaderImage)&quot;<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;$(WizardImage)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st July 2008, 15:28</div></div><div class="posttext">Neither will work because it needs to include the image file at compile time. For the header image you can extract a new image depending on $LANGUAGE and set it with SetBrandingImage. For the welcome and finish pages you should be able to extract a new bitmap file to $PLUGINSDIR overwriting the existing one in a function set with MUI_PAGE_FUNCTION_GUIINIT.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brewster333</div><div class="date">22nd July 2008, 06:21</div></div><div class="posttext">Thanks for help. Solution is simple as usual. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brewster333</div><div class="date">22nd July 2008, 08:18</div></div><div class="posttext">A new trouble. Method with using LangString is not working (as Afrow UK says). I using an image substitution in .onGUIInit. Script fragment:<br />
<br />
***<br />
!include MUI2.nsh<br />
***<br />
!define MUI_CUSTOMFUNCTION_GUIINIT GUIInit<br />
***<br />
ReserveFile &quot;HeaderEN.BMP&quot;<br />
ReserveFile &quot;WizardEN.BMP&quot;<br />
***<br />
Function GUIInit<br />
    File /oname=$PLUGINSDIR\bg.bmp bg.bmp<br />
    BgImage::SetBg /NOUNLOAD /TILED &quot;$PLUGINSDIR\bg.bmp&quot;        <br />
    BgImage::Redraw /NOUNLOAD<br />
<br />
    IntCmp $LANGUAGE ${LANG_RUSSIAN} End CopyImages CopyImages<br />
CopyImages:<br />
    File /oname=$PLUGINSDIR\modern-header.bmp HeaderEN.bmp<br />
    File /oname=$PLUGINSDIR\modern-wizard.bmp WizardEN.bmp<br />
    #MessageBox MB_OK $PLUGINSDIR<br />
End:<br />
    <br />
FunctionEnd<br />
<br />
I see that images in $PLUGINSDIR are replaced. Start and Finish pages are using new WizardEN.BMP (substituted bitmap), but header uses old bitmap... May be old header image has been cached? May be I must make it in other place (I try make it on .onInit, but in this case all images are not changed)? Where is problem? Thanks for support.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd July 2008, 12:39</div></div><div class="posttext">As I said you have to use SetBrandingImage as well:<br />
SetBrandingImage /IMGID=1046 &quot;$PLUGINSDIR\modern-header.bmp&quot;<br />
<br />
Edit: I also recommend using LogicLib:<br />
<br />
${If} $LANGUAGE == ${LANG_RUSSIAN}<br />
...<br />
${EndIf}<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brewster333</div><div class="date">22nd July 2008, 14:41</div></div><div class="posttext">SetBrandingImage solves this problem! Now I using LogicLib :)<br />
BIG thanks for support!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">1st September 2013, 02:05</div></div><div class="posttext">Greetings <br />
<br />
I've tested this <br />
<br />
Does not work <br />
<br />
Sample code to write the <br />
<br />
Thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">1st September 2013, 12:10</div></div><div class="posttext">Professors ؟؟<br />
I'm waiting ؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟؟<br />
:cry::cry::cry::cry::cry::cry::cry:<br />
<br />
Should I open a new Post</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">1st September 2013, 21:56</div></div><div class="posttext">no work?<br />
<br />
<br />
Function .onInit<br />
!insertmacro MUI_LANGDLL_DISPLAY<br />
                 ${if} $LANGUAGE == ${LANG_GERMAN}<br />
                 !define MUI_HEADERIMAGE<br />
                !define MUI_HEADERIMAGE_BITMAP &quot;$EXEDIR\GRheader.bmp&quot;<br />
                 ${ElseIf} $LANGUAGE == ${LANG_ENGLISH}<br />
                 !define MUI_HEADERIMAGE<br />
                !define MUI_HEADERIMAGE_BITMAP &quot;$EXEDIR\ENheader.bmp&quot;<br />
                 ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
<br />
Why not work؟؟</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">1st September 2013, 23:43</div></div><div class="posttext">LangString HEADER_IMAGE ${LANG_ENGLISH} &quot;misc\dialogs\modern_headerbmpen.exe&quot;<br />
               LangString HEADER_IMAGE ${LANG_GERMAN} &quot;misc\dialogs\modern_headerbmpge.exe&quot;<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
                !define MUI_HEADERIMAGE<br />
                !define MUI_HEADERIMAGE_BITMAP &quot;misc\images\header.bmp&quot;<br />
                !define MUI_UI_HEADERIMAGE &quot;$(HEADER_IMAGE)&quot;<br />
		!define MUI_ABORTWARNING<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
Error: Can't open &quot;$(HEADER_IMAGE)&quot;!<br />
Error in macro MUI_INTERFACE on macroline 57<br />
Error in macro MUI_PAGE_INIT on macroline 7<br />
Error in macro MUI_PAGE_LICENSE on macroline 5<br />
Error in script &quot;F:\new system\Setup.nsi&quot; on line 97 -- aborting creation process<br />
<br />
<br />
<br />
<br />
:cry::cry::cry::cry::cry::cry::lock:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">1st September 2013, 23:51</div></div><div class="posttext">LangString HEADER_IMAGE ${LANG_ENGLISH} &quot;misc\images\ENheader.bmp&quot;<br />
                          LangString HEADER_IMAGE ${LANG_GERMAN} &quot;misc\images\geheader.bmp&quot;<br />
<br />
<br />
                         !define MUI_HEADERIMAGE<br />
                         !define MUI_HEADERIMAGE_BITMAP &quot;$(HEADER_IMAGE)&quot;<br />
<br />
<br />
<br />
:mad::mad:<br />
I do not know<br />
<br />
Somebody could help<br />
Make an example?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">2nd September 2013, 08:45</div></div><div class="posttext">I think paths to your images are wrong.<br />
The language is not initialized on .onInit, chcek the language immediately after .onInit function finishes.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>