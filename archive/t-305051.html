<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" compile another script as compile condition, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  compile another script as compile condition NSIS Discussion" />
	
	<title> compile another script as compile condition [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  compile another script as compile condition</div>
<hr />
<div class="pda"><a href="t-305051.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=305051">compile another script as compile condition</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">7th April 2009, 01:15</div></div><div class="posttext">I have an executable generated from an NSIS script that is included in another NSIS script via the File command.  Is there any way to use conditional compilation to check for the existence of this executable and if it doesn't exist, compile it from the script, then include it using File?  Here's basically what I need, although I know this doesn't work the way it's written, this is just for illustration of the functionality I'm looking for:<br />
<br />
<br />
!ifndef filename.exe<br />
NSExec ${NSISDIR}\makensis.exe filename.nsi<br />
!endif<br />
<br />
Section SomeSection<br />
File filename.exe<br />
<br />
. . .<br />
<br />
SectionEnd<br />
<br />
<br />
I'm guessing the answer is &quot;no, just compile the first script by hand you lazy programmer&quot; :P If that's the case I'm fine with that, it would just be nice if it could be worked out this way.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th April 2009, 01:36</div></div><div class="posttext">something like !tempfile mytemp<br />
!system 'IF NOT EXIST &quot;otherinstaller.exe&quot; echo !define ItsNotThere &gt; &quot;${mytemp}&quot;'<br />
!include &quot;${mytemp}&quot;<br />
!ifdef ItsNotThere<br />
	!echo TODO...<br />
!endif<br />
!delfile &quot;${mytemp}&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">7th April 2009, 18:34</div></div><div class="posttext">So you're saying the best that can be done is to send the person compiling a prompt?  Ok, I figured it would be something like that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th April 2009, 18:55</div></div><div class="posttext">saywhatnow? Its fully automated, you just need to put the compile command there, !system '&quot;${NSISDIR}\makensis&quot; &quot;c:\otherscript.nsi&quot;' = 0 or something like that is all you need</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">7th April 2009, 22:00</div></div><div class="posttext">Oh, my mistake.  Forgot about the !system command.  Thanks, I'm gonna try it out right now :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">7th April 2009, 22:15</div></div><div class="posttext">I realized that really it would just be easier to always compile the other script fresh, so since the directory structure was permanently set (SVN repo) all I ended up having to do was<br />
<br />
<br />
!system '&quot;${NSISDIR}\makensis.exe&quot; &quot;..\folderwhereotherscriptis\otherscript.nsi&quot;' = 0<br />
<br />
<br />
Thanks a ton :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>