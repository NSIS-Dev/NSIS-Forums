<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Need to get the last bit of a string, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Need to get the last bit of a string NSIS Discussion" />
	
	<title> Need to get the last bit of a string [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Need to get the last bit of a string</div>
<hr />
<div class="pda"><a href="t-129049.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129049">Need to get the last bit of a string</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th March 2003, 21:04</div></div><div class="posttext">I have a path entered by the user which may be:<br />
<br />
C:\quake2\baseq2\maps\gbrdday1.map<br />
<br />
How can I get the gbrdday1.map bit.<br />
Note that it could be anything, not at all gbrdday1.map<br />
<br />
Basicly, the bit after the last \ is what I want.<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th March 2003, 21:09</div></div><div class="posttext">You can tweak GetParent (http://nsis.sourceforge.net/Docs/AppendixB.html#B.1) to do the trick. And if you don't want to handle the code too much you can get the length of the returned string and trim up to that point using StrCpy with a negative maxlen.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th March 2003, 21:58</div></div><div class="posttext">Here is the script:<br />
I'm not sure how to return it to Exch, Pop and Pushing the variables around, so I've left it as this.<br />
KiCHiK, please show me what the basec Pop, Push and Exch cmds should be.<br />
<br />
Usage:<br />
StrCpy $R0 C:\Geoffrey\Freddy<br />
Call GetFileName<br />
   DetailPrint $R3 # $R3 is now Freddy<br />
<br />
<br />
Function GetFileName<br />
   StrCpy $R1 -1<br />
   loop:<br />
     StrCmp $0 1 +2<br />
     IntOp $0 $0 + 1<br />
     StrCpy $R2 $R0 1 $R1<br />
     StrCmp $R2 &quot;&quot; exit<br />
     StrCmp $R2 &quot;\&quot; exit<br />
     StrCpy $R3 $R2$R3<br />
     IntOp $R1 $R1 - 1<br />
   Goto loop<br />
   exit:<br />
 FunctionEnd<br />
<br />
<br />
Thanks<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th March 2003, 22:58</div></div><div class="posttext">Haven't tested it but it should work:<br />
<br />
Function GetFileName<br />
  Exch $0 ; input string<br />
  Push $1<br />
  Push $2<br />
  StrCpy $1 0<br />
  loop:<br />
    IntOp $1 $1 - 1<br />
    StrCpy $2 $0 1 $1<br />
    StrCmp $2 &quot;&quot; exit_dec<br />
    StrCmp $2 &quot;\&quot; exit<br />
    Goto loop<br />
  exit_dec:<br />
    IntOp $1 $1 - 1<br />
  exit:<br />
    IntOp $1 $1 + 1<br />
    StrCpy $0 $0 &quot;&quot; $1<br />
    Pop $2<br />
    Pop $1<br />
    Exch $0<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>