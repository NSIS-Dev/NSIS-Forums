<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Make menu choose many set up, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Make menu choose many set up NSIS Discussion" />
	
	<title> Make menu choose many set up [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Make menu choose many set up</div>
<hr />
<div class="pda"><a href="t-257294.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257294">Make menu choose many set up</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">11th October 2006, 03:16</div></div><div class="posttext">How can I make a menu before I set up many program.<br />
Eg:  I want to set up jdk, my sql and my program. I want to request user to set up following these steps:<br />
+ JDK<br />
+ My Sql<br />
+ My product<br />
When software run, I must request user to set up JDK <br />
first. After that, I will install my sql and so on...<br />
<br />
Thank a lot,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">11th October 2006, 22:46</div></div><div class="posttext">Hi,<br />
From your description I would think that jdk and MySQL are prerequisites to run your program, so there is no reason to have a menu and ask the user to install those, just use some code in your .onInit function to check if jdk and MySQL are installed and then install your program. You can read some registry key/value or search for a specific file in each case (you can use some registry tool, like regshot (http://www.snapfiles.com/get/regshot.html), to see what keys/values are generated by jdk and MySQL).<br />
For example:Function .onInit<br />
...<br />
ClearErrors<br />
ReadRegStr $R0 HKLM &quot;Software\jdk&quot; &quot;Version&quot;<br />
IfErrors +1 +4<br />
  SetOutPath $PLUGINSDIR<br />
  File &quot;JDK_Installer.exe&quot;<br />
  nsExec::ExecToLog '&quot;$PLUGINSDIR\JDK_Installer.exe&quot; /s'<br />
ClearErrors<br />
ReadRegStr $R0 HKLM &quot;Software\MySql&quot; &quot;Version&quot;<br />
IfErrors +1 +4<br />
  SetOutPath $PLUGINSDIR<br />
  File &quot;MySQL_Installer.exe&quot;<br />
  nsExec::ExecToLog '&quot;$PLUGINSDIR\MySQL_Installer.exe&quot; /s'<br />
...<br />
FunctionEndThat is assuming that you want to include jdk and MySQL with your distribution, in the same package. The filenames and switches used in the above example are random by the way.<br />
<br />
Hope this helps<br />
<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">13th October 2006, 09:42</div></div><div class="posttext">I do it the same way you said, but I still do not work.<br />
My Code here:<br />
Function .onInit<br />
    !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
    ReadRegStr $R0 HKLM &quot;c:\programfiles\java\jdk&quot; &quot;1.5.0_08&quot;<br />
    IfErrors +1 +4<br />
    SetOutPath $PLUGINSDIR<br />
    File &quot;d:\software\jdk.exe&quot;<br />
    nsExec::ExecToLog '&quot;$PLUGINSDIR\jdk.exe&quot; /s'<br />
<br />
    ReadRegStr $R0 HKLM &quot;c:\Programfiles\my sql Software\MySql\MySqlServer&quot; &quot;5.0&quot;<br />
    IfErrors +1 +4<br />
    SetOutPath $PLUGINSDIR<br />
    File &quot;MySQL_Installer.exe&quot;<br />
    nsExec::ExecToLog '&quot;$PLUGINSDIR\MySQL_Installer.exe&quot; /s'<br />
FuncitonEnd<br />
<br />
I only add your guide in onInist function and when I run it have some errors.<br />
Can you tell me why????<br />
Thank!<br />
I am so sorry for my inconvenience because this is the first time I use NullSoft<br />
Thank alot,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">13th October 2006, 11:21</div></div><div class="posttext">I think you misread my post :( <br />
This:ReadRegStr $R0 HKLM &quot;c:\programfiles\java\jdk&quot; &quot;1.5.0_08&quot;should look like this: ReadRegStr $R0 HKLM &quot;SOME_REGISTRY_KEY&quot; &quot;SOME_REGISTRY_VALUE&quot;<br />
You should be reading a value from the registry. I do not know what value as I don't have JDK or MySQL installed, that is why I suggested that you use a freeware tool like regshot (http://www.snapfiles.com/get/regshot.html) to get a snapshot of the registry before installing each one of those and after, so that you can see what registry entries are generated. Then adjust your code so that it reads the appropriate registry entries.<br />
<br />
Also this may be wrong:nsExec::ExecToLog '&quot;$PLUGINSDIR\jdk.exe&quot; /s'I do not know what the name of your JDK install package is nor do I not know what the silent switch for that is. That was an example as I stated. <br />
<br />
The same goes for the MySQL entries (both registry and switches).<br />
<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">17th October 2006, 05:26</div></div><div class="posttext">Thank you for your reply,<br />
Your opinion is very good, your help is one of the process which I must do but I still want to create a menu to help user understand the process set up.<br />
In my opinion,A menu is the same process to set up  Visual Studio 2005 because my application need many software to support them. I want user to follow these steps to set up program because my install is very difficult.I must set up many program:<br />
 + The first, I want to set up JDK (check JDK has already set up yet).<br />
 + The second, I set up my sql 5.0 (check it again). <br />
 + The thirst,I will use tool zip2exe to pack these software which it does not have file exe to became file set up and install it in computer(for two software need to set up in my program)<br />
 + My product<br />
 So I need to create a menu for my program.If you have another opinion, can you help me!<br />
Thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">17th October 2006, 07:48</div></div><div class="posttext">Use sections or section groups and force selection based on your criteria.<br />
Use .onInit to see if one of your components is installed and disable/enable its section accordingly.<br />
Check also this (http://forums.winamp.com/showthread.php?s=&amp;threadid=257534) post.<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">17th October 2006, 08:16</div></div><div class="posttext">Thank alot, :D<br />
However, you can misread my opinion. I do not allow user to option these software which need to set up. I mean I will create a menu <br />
 + JDK<br />
 + My SQL<br />
 + My product 1<br />
 + My product 2<br />
The first screen will appear below and run JDK first.<br />
After setting up JDK, this screen will appear again and My SQL will be executed and so on. <br />
I see your section which you help me, but this section,user can check these software and if they omit JDK or My SQL, they only want to install my product.It may appear problems here.<br />
I will attach a file which screen the same VS 2005 which I want to create that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">17th October 2006, 08:58</div></div><div class="posttext">No, I did not misread your post ;) <br />
Use sections or section groups and force selection based on your criteria.<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">18th October 2006, 11:45</div></div><div class="posttext">Thank a lot, I understand what you mean.<br />
I create a component page and display the process to install my application. Firstly, I will install JDK(include check JDK is installed or not)and Set up JDK is checked.After finishing setting up JDK, the first screen will appear again and set up MY sql is check and process will continue. <br />
How can I make the first screen appear again with MY SQL is checked and set up it???<br />
Can you help me!!!<br />
Thank alot,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">19th October 2006, 11:38</div></div><div class="posttext">If anyone is unsure of what I am talking about please tell me. I sounded good in my head, but might not have translated well.<br />
Please help me!!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>