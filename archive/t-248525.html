<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS Check if directory exists, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS Check if directory exists NSIS Discussion" />
	
	<title> NSIS Check if directory exists [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS Check if directory exists</div>
<hr />
<div class="pda"><a href="t-248525.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=248525">NSIS Check if directory exists</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BashLogic</div><div class="date">12th June 2006, 13:38</div></div><div class="posttext">Greetings, <br />
<br />
the last couple of weeks, I have been fooling arround with NSIS and taken the initiative to convert all related work to it as it would be easier to have the option of starting up the single installer that would take care of all the other installations required to be done :) (various agent software and OS tweaking ..)<br />
<br />
now there are several subjects im facing some dificulties with, I hope some of you guys here could help me out.<br />
<br />
due to the different operating systems and versions that are administered, I need to be able to verify whether a directory in a given path exists so i can continue processing other tasks based on that, how and what is the best way for this to be accomplished, for example, i need to find out whether c:\admtools exists or c:\foobar exists, if it does<br />
then a variable would be flagged (myfoldervar=1)<br />
<br />
ive tried to lookup in the forum, but i didnt find any clear answer to this, <br />
<br />
hoping to hear from the pros soon, <br />
<br />
regards<br />
BL</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th June 2006, 14:38</div></div><div class="posttext">Originally posted by BashLogic <br />
ive tried to lookup in the forum, but i didnt find any clear answer to this, <br />
 <br />
<br />
Did you try looking up the NSIS Users Manual?<br />
Use the IfFileExists instruction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BashLogic</div><div class="date">12th June 2006, 16:48</div></div><div class="posttext">yes i noticed that &quot;if file exist&quot; feature, i just wanst sure whether it is the appropriate one giving it a thought whehter &quot;if directory exist&quot; method exists as well :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th June 2006, 17:37</div></div><div class="posttext">IfFileExists &quot;$INSTDIR\directory\*.*&quot; ...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th June 2006, 18:14</div></div><div class="posttext">Originally posted by BashLogic <br />
yes i noticed that &quot;if file exist&quot; feature, i just wanst sure whether it is the appropriate one giving it a thought whehter &quot;if directory exist&quot; method exists as well :)  <br />
<br />
From the NSIS Users Manual:<br />
<br />
Checks for existence of file(s) file_to_check_for (which can be a wildcard, or a directory) <br />
<br />
I think it speaks for itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kekc</div><div class="date">19th June 2009, 14:01</div></div><div class="posttext">Is there a way to know is it a file or directory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2009, 14:37</div></div><div class="posttext">Did you miss my code?<br />
<br />
Same idea but using LogicLib:<br />
${If} ${FileExists} `$INSTDIR\file\*.*`<br />
  ; file is a directory<br />
${ElseIf} ${FileExists} `$INSTDIR\file`<br />
  ; file is a file<br />
${Else}<br />
  ; file is neither a file or a directory (i.e. it doesn't exist)<br />
${EndIf}<br />
<br />
Edit: Note the order of checks is important.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kekc</div><div class="date">19th June 2009, 14:43</div></div><div class="posttext">Thanks for the answer!<br />
<br />
But I have found the winapi function:<br />
http://nsis.sourceforge.net/GetFileAttributes<br />
<br />
Good luck!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2009, 15:37</div></div><div class="posttext">Why use that when you can just use the simple logic I gave?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kekc</div><div class="date">23rd June 2009, 08:01</div></div><div class="posttext">First I thought, that empty dir will be detected as file.<br />
But then I trieed everything is OK.<br />
<br />
Thank you so much!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd June 2009, 15:08</div></div><div class="posttext">Yes people are misled by the use of *.* but it does cover empty directories because . is the current directory and .. is the parent directory (you will pick up . and .. as files when using FindFirst, FindNext etc).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">6th March 2010, 21:20</div></div><div class="posttext">But isn't possible to use a wildcard search on the folder level, is it, thus checking for the existence of multiple folders perhaps with similar names?:<br />
<br />
${If} ${FileExists} `$INSTDIR\file*\*.*`</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">7th March 2010, 00:50</div></div><div class="posttext">The NSIS User Manual describes several useful functions, including &quot;Locate&quot; which supports wildcards:<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.2<br />
<br />
Section E.1.2 of the manual also mentions the &quot;Locate&quot; plugin which supports wildcards:<br />
http://nsis.sourceforge.net/Locate_plugin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">7th March 2010, 13:04</div></div><div class="posttext">Thank you. I will take a look at it.  Some of these things are much simpler when I am doing them in a C++ context. I find myself asking basic questions when it comes to the installer.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>