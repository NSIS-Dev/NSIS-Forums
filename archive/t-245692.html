<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Reading config values in NSIS 2.07 and above?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Reading config values in NSIS 2.07 and above? NSIS Discussion" />
	
	<title> Reading config values in NSIS 2.07 and above? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Reading config values in NSIS 2.07 and above?</div>
<hr />
<div class="pda"><a href="t-245692.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245692">Reading config values in NSIS 2.07 and above?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">blue_harvester</div><div class="date">8th May 2006, 14:56</div></div><div class="posttext">I am looking to read in values from a configuration file and assign these values to a particular variable. I was having a look at the ConfigRead function here (http://nsis.sourceforge.net/ConfigRead), which can be used for NSIS 2.07 and below. However I'm using v2.16, so I was wondering is there an equivalent function for this later version, or what needs changed in the ConfigRead function to make it compatible with 2.16?<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th May 2006, 15:03</div></div><div class="posttext">That would mean that it was tested for v2.07, but that doesn't mean that it doesn't work on v2.16. Have you tried it?<br />
<br />
There have been no big changes to the NSIS base code that this function uses. There hardly ever is, so that we can upgrade NSIS and not have to worry about updating our scripts as well.<br />
<br />
That said, what does the format of this configuration file look like? This function works without section headers, but for those INI files with section headers, you can use ReadINIStr.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_harvester</div><div class="date">8th May 2006, 15:16</div></div><div class="posttext">Originally posted by Afrow UK <br />
That would mean that it has tested for v2.07, but that doesn't mean that it doesn't work on v2.16. Have you tried it?<br />
<br />
There have been no big changes to the NSIS base code that this function uses. There hardly ever is, so that we can upgrade NSIS and not have to worry about updating our scripts as well.<br />
<br />
That said, what does the format of this configuration file look like? This function works without section headers, but for those INI files with section headers, you can use ReadINIStr.<br />
<br />
-Stu  <br />
The name of the config file is 'services.properties' and the value within the file is a database username as follows:<br />
<br />
global.database.username=my_username<br />
<br />
Therefore I have the ConfigRead function within my script and I call it like this:<br />
<br />
${ConfigRead} &quot;D:\app\services.properties&quot; &quot;global.database.username=&quot; $var_FL_DB_USERNAME<br />
<br />
But when I compile the script I get the following error:<br />
<br />
Invalid command: ${ConfigRead}<br />
Error in script &quot;D:\projects\Installer\Install.nsi&quot; on line 149 -- aborting creation process<br />
<br />
Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th May 2006, 15:18</div></div><div class="posttext">Make sure you put the script code above where you call the function in your script.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">8th May 2006, 15:27</div></div><div class="posttext">ConfigRead is in TextFunc.nsh, which is in NSIS 2.16.<br />
<br />
RTFM &quot;Appendix E: Useful Headers&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_harvester</div><div class="date">8th May 2006, 15:45</div></div><div class="posttext">Originally posted by Afrow UK <br />
Make sure you put the script code above where you call the function in your script.<br />
<br />
-Stu  <br />
Brilliant Stu, that was it! Thank you so much!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>