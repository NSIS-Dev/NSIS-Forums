<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how do you install to c:\;  installoptions buttons and background, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how do you install to c:\;  installoptions buttons and background NSIS Discussion" />
	
	<title> how do you install to c:\;  installoptions buttons and background [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how do you install to c:\;  installoptions buttons and background</div>
<hr />
<div class="pda"><a href="t-256199.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=256199">how do you install to c:\;  installoptions buttons and background</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">25th September 2006, 22:23</div></div><div class="posttext">hello, i am a newbie here. i need some help in creating my web installer for my FilipinoDictionary-TTS thesis.<br />
as of now, i created it using mingw.nsi but there are a few bugs and features i want it to do.<br />
<br />
when using ultramodern ui and having an installoptions page, the background of that installoptions page, is not blue (i.e. doesn't conform with its background). it is a gray square on a blue background. how do you make it all blue? i tried putting some code from installoptions.nsi from the ultramodern ui examples to no avail. so how do you make installoptions background transparent even in ultramodern ui?<br />
<br />
next how do you activate buttons in an installoptions page? i.e. activate an exec command when a button is pressed? i tried code from testnotify.nsi in the installoptions folder to no avail also.<br />
<br />
also, is there a way to continue installation even if the installation directory chose in the directory page is c:\? i.e. enable next button on the directory page even if the chosen installation dir is c:\? <br />
<br />
the reason is i included java, servcd, mingw, no-ip's duc, ie6, windows media player 10 and my thesis applications together where there are programs under a folder  i made &quot;program files&quot;. if my application is installed in c:\ it can also install java and under &quot;program files&quot; to &quot;c:\program files&quot; so that the user can have those applications installed at their default locations in c:\. You might say to just install using their msi's but i made it so like that, so that i can have these features:<br />
<br />
1. run all of it in a cd via buttons in the installer (all executable files are beside the installer executable)<br />
2. install all or any of the applications via the installer<br />
3. install it in c:\ so all programs are installed in default locations<br />
4. download programs whose files are not already beside the installer (done already)<br />
5. use UltraModernUI to make the components' descriptions fit in the window (done) <br />
6. use UltraModernUI while having installoptions pages with the default background. Using ModernUI makes their backgrounds default but the components' descriptions don't fit there.<br />
<br />
so far i am having problems with numbers 1, 3 and 6.<br />
any help would be very appreciated.<br />
also , sorry for my english(i am filipino) and this long question.<br />
and thanks in advance<br />
attached is my installer<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">25th September 2006, 22:28</div></div><div class="posttext">correction on last post<br />
..chosen in the directory...<br />
..java and programs under &quot;program files&quot;...<br />
<br />
i have forgotten to include the php files</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2006, 15:38</div></div><div class="posttext">1. You can have a custom InstallOptions page with buttons on it. Use the NOTIFY flag with every button and execute the installer when it's clicked and the notification is activated.<br />
<br />
3.Use AllowRootInstallDir.<br />
<br />
6. You usually set colors using SetCtlColors, but UMUI probably has a macro for its custom pages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">12th October 2006, 22:26</div></div><div class="posttext">thanks, i discovered toset Flags in the .ini file to NOTIFY before when studying testnotify.nsi . AllowRootInstallDir worked but not SetCtlColors. I want to set the background of an installoptions .ini file to dark blue like that of UltraModernUI's background. can anybody help me here?. making it gray makes it out of place.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">15th October 2006, 18:58</div></div><div class="posttext">thanks for the help. i  got them all. i read the UMUI readme to change the background color of the UMUI installoptions custom page. i had to recurse the exit function of the installoptions page just to get the installer to exit from it. the buttons load other applications then quit the installer. here's some code (so people having similar problems like me can search it more easily through search engines, &quot;...&quot; means irrelevant code)<br />
<br />
showmirror.ini file<br />
<br />
;ShowMirror.ini<br />
 ; Ini file generated by the HM NIS Edit IO designer.<br />
[Settings]<br />
NumFields=7<br />
<br />
[Field 1]<br />
Type=Groupbox<br />
Text=Run from CD, Install or just download files?<br />
Left=0<br />
Right=172<br />
Top=0<br />
Bottom=9<br />
=<br />
<br />
[Field 2]<br />
Type=RadioButton<br />
Text=Install<br />
State=1<br />
Left=84<br />
Right=211<br />
Top=40<br />
Bottom=54<br />
<br />
[Field 3]<br />
Type=RadioButton<br />
Text=Download only<br />
Left=32<br />
Right=38<br />
Top=20<br />
Bottom=26<br />
<br />
[Field 4]<br />
Type=Label<br />
Text=Using mirror<br />
Left=44<br />
Right=276<br />
Top=19<br />
Bottom=28<br />
<br />
[Field 5]<br />
Type=Button<br />
Text=run OfflineFilipinoDictionaryGU from Compact Disc<br />
Left=42<br />
Right=246<br />
Top=102<br />
Bottom=116<br />
Flags=NOTIFY<br />
<br />
[Field 6]<br />
Type=Button<br />
Text=run FilipinoDictionaryWebsite from Compact Disc<br />
Left=42<br />
Right=246<br />
Top=81<br />
Bottom=94<br />
Flags=NOTIFY<br />
<br />
[Field 7]<br />
Type=Button<br />
Text=run SysAdDic from Compact Disc<br />
Left=42<br />
Right=246<br />
Top=59<br />
Bottom=73<br />
Flags=NOTIFY<br />
<br />
FilipinoDictionary.nsi file<br />
<br />
...<br />
 !include &quot;UMUI.nsh&quot;<br />
;!include &quot;MUI.nsh&quot;<br />
...<br />
AllowRootDirInstall true<br />
<br />
...<br />
Page custom DownLoadOrInstall Buttons &quot;: Download, install or run?&quot;<br />
...<br />
<br />
Function .onInit<br />
;-----------------------------------------------------------------------------------------------------------------------<br />
<br />
...<br />
installing:<br />
<br />
InitPluginsDir<br />
  GetTempFileName $mirrorINI $PLUGINSDIR<br />
  File /oname=$mirrorINI &quot;Dialogs\ShowMirror.ini&quot;<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;Dialogs\ShowMirror.ini&quot; &quot;ShowMirror.ini&quot;<br />
<br />
<br />
StrCpy $mirrorINI &quot;$PLUGINSDIR\ShowMirror.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
...<br />
<br />
var execsa<br />
var execofgu<br />
var execfdw<br />
<br />
Function Buttons<br />
  <br />
  ReadINIStr $0 $mirrorINI &quot;Settings&quot; &quot;State&quot;<br />
   <br />
<br />
  StrCmp $0 5 executeofgu  +1<br />
<br />
  StrCmp $0 6 executefdw  +1<br />
<br />
  StrCmp $0 7 executesa  end<br />
<br />
<br />
         <br />
executeofgu:<br />
         StrCmp $execofgu &quot;1&quot; end executeofgu1<br />
executefdw:<br />
         StrCmp $execfdw &quot;1&quot; end executeofgu1<br />
executesa:<br />
         StrCmp $execsa &quot;1&quot;  end executeofgu1<br />
<br />
executeofgu1:<br />
         Exec '$EXEDIR\FilipinoDictionaryWebsite.exe'<br />
         StrCpy $execofgu &quot;1&quot;<br />
executefdw2:<br />
         Exec '$EXEDIR\OfflineFilipinoDictionaryGU.exe'<br />
         StrCpy $execfdw &quot;1&quot;<br />
executesa3:<br />
         Exec '$EXEDIR\SysAdDic.exe'<br />
         StrCpy $execsa &quot;1&quot;<br />
end:<br />
         call Buttons<br />
         Quit<br />
FunctionEnd<br />
...<br />
Var HWND<br />
;Page instfiles<br />
;-----------------------------------------------------------------------------------------------------------------------<br />
Function DownloadOrInstall<br />
;-----------------------------------------------------------------------------------------------------------------------<br />
Call oninit<br />
  IntCmp $Updating 1 update +1<br />
  <br />
  WriteINIStr $mirrorINI &quot;Field 4&quot; &quot;Text&quot; &quot;Download url is $PRODUCT_WEB_SITE/offline.&quot;<br />
  FlushINI $mirrorINI<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ShowMirror.ini&quot;<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;ShowMirror.ini&quot;<br />
<br />
<br />
<br />
Pop $HWND ;HWND of dialog<br />
<br />
;Apply the Background color at the page<br />
SetCtlColors $HWND &quot;&quot; ${MUI_BGCOLOR}<br />
<br />
;Apply the right text color and background color at all the field<br />
GetDlgItem $0 $HWND 1200<br />
SetCtlColors $0 ${MUI_TEXT_COLOR} ${MUI_BGCOLOR}<br />
GetDlgItem $0 $HWND 1201<br />
SetCtlColors $0 ${MUI_TEXT_COLOR} ${MUI_BGCOLOR}<br />
GetDlgItem $0 $HWND 1202<br />
SetCtlColors $0 ${MUI_TEXT_COLOR} ${MUI_BGCOLOR}<br />
GetDlgItem $0 $HWND 1203<br />
SetCtlColors $0 ${MUI_TEXT_COLOR} ${MUI_BGCOLOR}<br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
...<br />
<br />
FunctionEnd<br />
<br />
...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>