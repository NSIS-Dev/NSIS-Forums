<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" is JAVA installed?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  is JAVA installed? NSIS Discussion" />
	
	<title> is JAVA installed? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  is JAVA installed?</div>
<hr />
<div class="pda"><a href="t-185751.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=185751">is JAVA installed?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TobWen</div><div class="date">7th July 2004, 06:03</div></div><div class="posttext">Hi there,<br />
<br />
does anybody know, how 2 check, if JAVA is installed and activated or not?<br />
Some people deactivated JAVA or some Win98-users didn't install it at all.<br />
<br />
Thanks for help<br />
Tobias</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Davion</div><div class="date">7th July 2004, 13:09</div></div><div class="posttext">I think you can check this in the registry...<br />
<br />
but I don't know where to search<br />
<br />
try to find the regkey of Java<br />
(most simple way is imho to search for the installdir of it)<br />
<br />
and then let your installer check for a value in this key...<br />
<br />
should work<br />
<br />
You may check if its activated somewhere in the regkey of the IE<br />
<br />
but M$ unfortunatly encrypts its damn keys<br />
<br />
just try it, should work as I said, maybe someone here knows where to search for it<br />
<br />
hope this helps Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobWen</div><div class="date">7th July 2004, 13:11</div></div><div class="posttext">yeah, that's the only way... I thought of it, too.<br />
Have to find my Win98se-CD and install it on my old machine.<br />
<br />
I don't know, what key it is in Win98se :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Davion</div><div class="date">7th July 2004, 13:14</div></div><div class="posttext">don't know if it's similar on other systems, but on win2k there is a folder: &quot;C:\WINNT\java\trustlib\com\ms\mtx&quot;<br />
<br />
there are a few .class files in it<br />
<br />
if this folder depends on if java is installed or not you could check for some files?<br />
<br />
just an idea...<br />
<br />
<br />
<br />
<br />
Found a better way:<br />
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Java VM<br />
<br />
I think they ARE depending on an installed Java VM :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">7th July 2004, 13:23</div></div><div class="posttext">ReadRegStr $JAVA_VER HKLM &quot;SOFTWARE\JavaSoft\Java Runtime Environment&quot;<br />
<br />
<br />
or browse the archive, there are at least five answers and examples on doing this there. for example, here's one (http://nsis.sourceforge.net/archive/viewpage.php?pageid=457).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobWen</div><div class="date">7th July 2004, 13:36</div></div><div class="posttext">thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">16th July 2004, 07:09</div></div><div class="posttext">Hi I have a question regarding the above-mentioned link to the archives. I am a newbie to programming so I hope that these questions are not redundant.<br />
<br />
From: Locate Java Runtime/JRE, ensure correct version, write CLASSPATH, PATH and JAVA_HOME to .bat file. <br />
<br />
-----------------------------------------------------------<br />
Section &quot;JRE Locate and Set Path and Classpath Section&quot;<br />
JRECheckAndEnvSection<br />
    Call LocateJVM<br />
    StrCmp &quot;&quot; $JAVA_INSTALLATION_MSG Success OpenBrowserToGetJava<br />
<br />
    Success:<br />
        Call SetEnv<br />
        Goto Done<br />
<br />
    OpenBrowserToGetJava:<br />
        Exec '&quot;explorer.exe&quot; ${GET_JAVA_URL}'<br />
        <br />
    Done:<br />
SectionEnd<br />
-----------------------------------------------------------<br />
For the above code, is the JRECheckAndEnvSection a function?<br />
<br />
and<br />
<br />
-----------------------------------------------------------<br />
Function SetEnv<br />
    Push $3<br />
    Push $4<br />
    <br />
    FileOpen $4 &quot;$INSTDIR\setEnv.cmd&quot; w<br />
    StrCpy $3 &quot;Set<br />
CLASSPATH=$JAVA_HOME\jre\lib\rt.jar;$JAVA_HOME\lib\dt.jar;%CLASSPATH%&quot;<br />
    FileWrite $4 &quot;$3&quot;<br />
-----------------------------------------------------------<br />
What is the purpose of the &quot;w&quot; on the line of:<br />
FIleOpen $4 &quot;$INSTDIR\setEnv.cmd&quot; w<br />
<br />
Thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">16th July 2004, 14:58</div></div><div class="posttext">Section &quot;JRE Locate and Set Path and Classpath Section&quot; JRECheckAndEnvSection<br />
<br />
<br />
JRECheckAndEnvSection is the name to use for the section when enabling or disabling the section via the sections.nsh selectivity functions.<br />
<br />
<br />
FIleOpen $4 &quot;$INSTDIR\setEnv.cmd&quot; w<br />
<br />
<br />
The w stands for opening the file in write mode. It could also be a for append, or r for read only.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">19th July 2004, 03:23</div></div><div class="posttext">Thanks zimsms. But when I compile the script using Make NSISW, it prompts me an error for JRECheckAndEnvSection. The error I get is Invalid Command<br />
<br />
Do I have to declare JRECheckAndEnvSection or something? Thanks once again!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th July 2004, 11:39</div></div><div class="posttext">Section &quot;JRE Locate and Set Path and Classpath Section&quot; JRECheckAndEnvSection<br />
<br />
There's no new-line in there.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">19th July 2004, 13:43</div></div><div class="posttext">Afrow UK, Thanks. I take it PHP uses wordwrap, and color where SOURCE uses neither?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">20th July 2004, 02:19</div></div><div class="posttext">Thanks! Really appreciate all your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">20th July 2004, 02:42</div></div><div class="posttext">Sorry...it's me again. I have to create an installer that will install and run Apache Tomcat server on the client's pc. I am just wondering if I am looking at the correct example from the archive. The example I am looking at is here (http://nsis.sourceforge.net/archive/viewpage.php?pageid=457)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">20th July 2004, 13:12</div></div><div class="posttext">Sorry, I haven't done anything with NSIS and Apache. But this (http://nsis.sourceforge.net/archive/viewpage.php?pageid=168) or this (http://nsis.sourceforge.net/archive/viewpage.php?pageid=428) might help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">21st July 2004, 03:39</div></div><div class="posttext">Thanks zimsms! Appreciate your help :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">23rd July 2004, 05:18</div></div><div class="posttext">Hi its me again. I have another question. I have to include in my installer a feature that will automatically update the class path and set the environment variables. I know that there are examples in the archive but I dont really understand them. I already have an example script that I think does this but I am not sure. I just want to know if I am on the right track. Here is the script. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">2nd August 2004, 09:10</div></div><div class="posttext">Hi I just wanted to know that if I had to place the script to check the java version together with my main script or place it in a new file or create a batch file for it. My script is attached below. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">12th August 2004, 05:34</div></div><div class="posttext">Hi I have another question. <br />
<br />
<br />
    FileOpen $4 &quot;$INSTDIR\setEnv.cmd&quot; w<br />
    StrCpy $3 &quot;Set CLASSPATH =<br />
$JAVA_HOME\jre\lib\rt.jar;$JAVA_HOME\lib\dt.jar;%CLASSPATH%&quot;<br />
    FileWrite $4 &quot;$3&quot;<br />
<br />
<br />
<br />
What does the rt and the dt in StrCpy $3 &quot;Set CLASSPATH =<br />
$JAVA_HOME\jre\lib\rt.jar;$JAVA_HOME\lib\dt.jar;%CLASSPATH%&quot; mean. And does this code automatically update the registry string when i run my installer. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">17th August 2004, 10:08</div></div><div class="posttext">Hey...another question. My installer will have to automatically set the class path and the environment variables while it is extracting the files. The code that i refer to is this (http://nsis.sourceforge.net/archive/nsisweb.php?page=216&amp;instances=0,11,211). Can someone please be kind enough to tell me if I am looking at the right script because my previous 3 questions have not been answered :cry:. But thats ok cause i managed to find out the answers to the previous 3 questions myself ;). And if I am not looking at the right script can someone pls inform me where i should be looking. This question has been really puzzling me. Thanks so much!<br />
<br />
PS: As i mentioned in one of my earlier questions, I only have knowledge in Java and I am a student doing my attachment and have no knowledge on assembly language. So I apologise if this question seems redundant. Thanks again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">17th August 2004, 14:10</div></div><div class="posttext">Use this (http://nsis.sourceforge.net/archive/viewpage.php?pageid=137). <br />
<br />
To append to an existing variable you will first want to read in the current value, append the new value then push that onto the stack.<br />
<br />
<br />
For Example, in this example we will append to the PATH variable.<br />
<br />
Section &quot;Append Env Var&quot;<br />
  ReadEnvStr $0 &quot;PATH&quot;<br />
  Push &quot;PATH&quot;<br />
  Push &quot;$0;c:\Example&quot;<br />
  Call WriteEnvStr<br />
SectionEnd<br />
<br />
<br />
To create a new environment variable:<br />
<br />
<br />
Section &quot;Add Env Var&quot;<br />
  Push &quot;EXAMPLEVAR&quot;<br />
  Push &quot;MyExample&quot;<br />
  Call WriteEnvStr<br />
SectionEnd<br />
<br />
<br />
<br />
Cheers!<br />
<br />
P.S. Sorry for not replying to the others, I was on vacation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">18th August 2004, 05:40</div></div><div class="posttext">Hey welcome back zimsms...hope you had a good vacation. Thanks for your help. I'll try it out and see if it works.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">19th August 2004, 06:00</div></div><div class="posttext">Hi...me again. I just want to know if I am on the right track. My installer will have to extract all the files that I am installing on its own. I am looking at the script example from this (http://forums.winamp.com/showthread.php?s=&amp;threadid=189493&amp;highlight=extract+files) forum thread. Does this script do what I think it does i.e. extract the files while the software is being installed?<br />
<br />
Thanks in advance!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">19th August 2004, 13:15</div></div><div class="posttext">No, it doesn't do what you think it does. What type of file do you need to extract (.zip, .rar. cab)? If your going to include a compressed file within your install your install will require more disk space (almost triple) in order to install. Why include a compressed file when the installer is going to compress it at compile time anyways.<br />
<br />
However, if you want to proceed with installing a compressed file you will have to do the following. (In pseudocode)<br />
<br />
; Reserve the file<br />
Reservefile blah.cab<br />
; in .oninit initialize the plugins folder<br />
; in .oninit place the file into the plugins folder<br />
setoutpath &quot;$pluginsdir&quot;<br />
file /oname=&quot;$pluginsdir\blah.cab&quot; &quot;blah.cab&quot;<br />
<br />
; Then you would need to extract the cab file using the cab.dll plugin. (You can find this and examples on doing this easily by searching the forum. If your not using a cab file then do a search on zip or compression.<br />
<br />
; continue with your install.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">20th August 2004, 09:45</div></div><div class="posttext">Thanks zimsms...I owe you big time for that tip you gave me about the installer compressing my files. I was not aware of that. I will use the default compression that the installer creates for me. Thank you once again for all your help. I really appreciate it!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">31st August 2004, 05:33</div></div><div class="posttext">Hi. I have hit another brick wall.Here's my problem. Let's say if I were to install Java and the value of Java in the registry is lesser than the one that I am installing, my installer will have to update that value. It will also have to delete that value when I run the uninstaller. I am looking at one of the archive examples but am not sure if it is the right example and does what I need my installer to do. This (http://nsis.sourceforge.net/archive/viewpage.php?pageid=91) is the script that I am looking at. I hope someone would be kind enough to tell me if I am on the right track. <br />
<br />
Thanks in advance!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">31st August 2004, 13:39</div></div><div class="posttext">You can have more than one Java runtime or SDK installed at the same time. If you don't find the one you need in the registry, you should either, a) inform the user they need a specific version of the runtime and have them install it before proceeding, or b) install that specific requirement for them.<br />
<br />
All that script does that you posted is append a specified string to the PATH environment variable. It's not really that useful in this situation unless you include the specific java runtime as part of your app and pre append the applications path to the PATH environment variable every time you start.<br />
<br />
Anyways, I hope that helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">1st September 2004, 03:22</div></div><div class="posttext">Hi zimsms..i'm sorry but I did not really understand what your exlpanation in the second paragraph meant.For your understanding, i'll tell you what my installer already does.When the installer runs, it will extract the files and inform the user of the Java version they have in their system. If this version is lesser than j2sdk1.2, the installer will launch the j2sdk installation wizard. It should also update the registry once the installation i scomplete. I also have already placed the code that I took from the archive that I posted in my previous question. I have attached my script below for your reference. I just want to know if what you told me to include in my installer is already in my script and if they're not there, what i am missing. I'm sorry to keep bothering you but i'm really confused and I really appreciate all your help.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">1st September 2004, 13:29</div></div><div class="posttext">I just want to know if what you told me to include in my installer is already in my script<br />
<br />
<br />
I looked at your script. Everything you said it was supposed to do is there, as well as, the portion I was talking about in the second paragraph.<br />
<br />
<br />
I'm sorry to keep bothering you but i'm really confused and I really appreciate all your help.<br />
<br />
<br />
Not a problem. That's why the forum exists. Besides, if I didn't have time to respond, I probably wouldn't! ;).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vun</div><div class="date">2nd September 2004, 03:00</div></div><div class="posttext">Thanks zimsms! Your help is greately appreciated :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>