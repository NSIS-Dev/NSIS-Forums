<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Plugin to extract 7-Zip 4.10 files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Plugin to extract 7-Zip 4.10 files NSIS Discussion" />
	
	<title> Plugin to extract 7-Zip 4.10 files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Plugin to extract 7-Zip 4.10 files</div>
<hr />
<div class="pda"><a href="t-201146.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=201146">Plugin to extract 7-Zip 4.10 files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mad Doggie</div><div class="date">4th December 2004, 22:53</div></div><div class="posttext">Is there a plug-in that can decompress archives created by 7-zip v4.12? I would like to use 7Zip to decrease the size of my downloadable components.<br />
<br />
Cheers!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th December 2004, 12:01</div></div><div class="posttext">You'll have to use 7-Zip's command-line 7z.exe program to decompress 7z files.<br />
<br />
You should compress it into your installer, and place it in a folder (e.g. $PLUGINSDIR) on run-time then execute it with nsExec::Exec.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mad Doggie</div><div class="date">8th December 2004, 05:49</div></div><div class="posttext">Originally posted by Afrow UK <br />
You'll have to use 7-Zip's command-line 7z.exe program to decompress 7z files. You should compress it into your installer, and place it in a folder (e.g. $PLUGINSDIR) on run-time then execute it with nsExec::Exec.<br />
<br />
Bummer. Thanks for the info - I was hoping I could use a native NSIS plug-in and get the same feedback as ZipDLL does. Oh well, I guess nothing on the horizon on this front? ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th December 2004, 13:05</div></div><div class="posttext">You can use nsExec::ExecToLog to stream the 7z output directly to the installation progress window.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">30th May 2005, 21:40</div></div><div class="posttext">7zip went final 7.20.<br />
<br />
I would appreciate a plugin using 7zip for archiving like <br />
&quot;nsexec::7zip '&quot;c:\temp\*.txt&quot; /switch' <br />
or another built-in solution...<br />
<br />
WinRAR also uses a newer 7zxa.dll instead an bigger exe 7za.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">17th June 2005, 20:28</div></div><div class="posttext">Update:<br />
<br />
I'm a making a plugin for decompressing 7z files (~60KB DLL), but I need to know if theres one already...<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saivert</div><div class="date">21st June 2005, 23:15</div></div><div class="posttext">Joel! Just go ahead and make it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PerditionC</div><div class="date">3rd July 2005, 17:24</div></div><div class="posttext">If one doesn't really need the 7z format and just wants to use the LZMA compression method, then there is also the ExtractDLLEx or untgz plugins.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">4th July 2005, 21:50</div></div><div class="posttext">Some time ago I wrote a simple plugin for uncompressing 7z files with progress reporting. It was based on the console sfx with changed console interface to some kind of nsis wrapper. It was big enough (144 kb), but due to size (32 mb to 27 mb from nsis lzma to 7z file) and time (i've used archive as merge module, which never changes) economy, that really doesn't matter for me.<br />
However I've lost one of my hdd's some weeks ago, so at present time I have no source code of that plugin, just compiled dll.<br />
<br />
	<br />
SetOutPath $INSTDIR\OCR\FRE\Bin<br />
; increase size<br />
AddSize 85000<br />
; use precompressed 7zip fre file<br />
SetCompress off<br />
DetailPrint &quot;Extracting FineReader Engine...&quot;<br />
File /a &quot;Misc\frebin.7z&quot;<br />
SetCompress auto<br />
DetailPrint &quot;Installing FineReader Engine...&quot;<br />
nsis7z::Extract &quot;frebin.7z&quot;<br />
Delete &quot;$INSTDIR\OCR\FRE\Bin\frebin.7z&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saivert</div><div class="date">5th July 2005, 14:59</div></div><div class="posttext">Since the source code for the 7-zip project is open-source there shouldn't be hard to implement this. I might have a crack at it sometime as well. But I don't know about the time. I wrote my own version of unzip plug-in for NSIS one time (based on source code for NSIS' Zip2EXE) and if 7-zip has some easy to use interface it will be doable.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oborstad</div><div class="date">7th February 2006, 20:30</div></div><div class="posttext">Any Update on this plugin?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">7th February 2006, 20:39</div></div><div class="posttext">why should it ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oborstad</div><div class="date">7th February 2006, 22:19</div></div><div class="posttext">Ah, Sorry... I mean if there was an updated copy of this plugin with the updated 7-zip files.  This plugin's 7zip files aren't up to date, and the source code's not provided (ala 7zip licence).  So I just wanted to ask if there was any update on the status of the plugin.<br />
<br />
   Owen.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">13th February 2006, 06:13</div></div><div class="posttext">write to the author pls</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">9th January 2009, 15:58</div></div><div class="posttext">Hello everyone ;)<br />
<br />
I've spent some time to rewrite (due to lost source code) Nsis7z plugin using the latest 7z (4.64), this time the source code is available, so no one should have problems using/distributing it.<br />
<br />
This plugin allows our company to create merge-modules (as 7z archives) with prepacked files used in every release, saving some space (due to better compression ratio) and time (60mb 7z archive compiles to NSIS setup in several seconds, compare that with the time required to pack 250mb of original files).<br />
<br />
This post - complete distribution with source, next - stripped with plugin and example only.<br />
<br />
Best regards, Nik.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">9th January 2009, 15:59</div></div><div class="posttext">Nsis7z (based on 7z 4.64) binary distribution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">17th January 2009, 02:34</div></div><div class="posttext">Can it extract to a different directory and without paths? To do the equivalent of this command: 7za.exe e &quot;downloadedfileusingnsisdl.7z&quot; -o&quot;$INSTDIR\some\path&quot; -y eliminating the middle-man.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">18th January 2009, 11:13</div></div><div class="posttext">first of all, thanks for this great plugin.. i was looking for this for ages!<br />
<br />
i was wondering, if it would be easy to add support to create 7z files (or make it a seperate plugin).<br />
<br />
about decompression, i'm looking for a way to create a similiar dialog like the inbuild &quot;unpacking data&quot; at the launch of (huge) installers. i guess i could use a banner plugin, but can i display the unpacking status in there? i guess the 7z would have to support this in a way?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">28th January 2009, 14:29</div></div><div class="posttext">does this plugin handle passwords? does it report if an archive is protected by password?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">26th March 2009, 14:05</div></div><div class="posttext">Hi,<br />
<br />
I've just found your plugin and its great.<br />
Question: Does it respect the SetOverWrite value?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">27th March 2009, 12:20</div></div><div class="posttext">Originally posted by dbach Question: Does it respect the SetOverWrite value?  <br />
<br />
To answer myself (;)) no, it doesnt.<br />
<br />
Bug:<br />
- Files not ending with .7z are not extracted (e.g. rename product.7z -&gt; product.001, try extraction)<br />
<br />
Featurewish:<br />
- Nsis7z should respect SetOverwrite<br />
<br />
Thanks :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">8th April 2009, 05:51</div></div><div class="posttext">I actually wrote something along these lines myself awhile back, just a header that uses 7za.exe...  It can extract and create archives of any type supported by 7-zip, as well as practically all of the command-line functionality of 7za.exe (except test archive).  If anyone is interested I'd be happy to post the header.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">8th April 2009, 08:15</div></div><div class="posttext">Originally posted by qwertymodo <br />
I actually wrote something along these lines myself awhile back, just a header that uses 7za.exe...  It can extract and create archives of any type supported by 7-zip, as well as practically all of the command-line functionality of 7za.exe (except test archive).  If anyone is interested I'd be happy to post the header.  <br />
<br />
Sure, go for it - the more the btter. Thanks a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">8th April 2009, 21:52</div></div><div class="posttext">Ok I will.  I just got into testing it more thoroughly than just what I needed when I first wrote it and there were a few weird bugs... I think I have them tracked down, so I'll post it soon.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">9th April 2009, 02:33</div></div><div class="posttext">Here's my header.  I am fairly certain that it works properly, but I wouldn't be surprised if some weirdness exists still.  Sorry for the lack of documentation, the basic function calls are outlined in the comment at the top of the file.  You'll need 7za.exe in the NSIS plugins directory to use it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">9th April 2009, 08:24</div></div><div class="posttext">Thanks a lot for this. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">qwertymodo</div><div class="date">9th April 2009, 18:11</div></div><div class="posttext">Something that I should have mentioned was that &quot;other parameters&quot; can be ANY 7-zip flags (should be at least...), so read the 7-zip documentation for things that you can put into other parameters.  Basically whatever you put there just gets appended to the end of the command-line call, so if it works in a command-line call it should work there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">webtubbies</div><div class="date">28th October 2009, 19:18</div></div><div class="posttext">Is there any documentation about nsis7z.dll returned error ? <br />
I mean <br />
- file to extract not found<br />
- error during extraction<br />
- etc...<br />
<br />
maybe someone here knows...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th November 2009, 14:49</div></div><div class="posttext">i'm really glad this plugin exists, because i prefer this over using an external program. however, this would even be better if there was a way to use (some of the) switches 7zr.exe offers. personally i'm looking for a way to extract a specific file from an archive only, right now i have to use 7zr/7za to do the task.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">3rd January 2010, 16:48</div></div><div class="posttext">hi guys, this plugin can extract rar files too???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th January 2010, 01:26</div></div><div class="posttext">Originally posted by thanatos83 <br />
hi guys, this plugin can extract rar files too??? <br />
Hi thanatos83, you need to read a little further ;)<br />
Since the plugin reads files from 7zip, let's got its site (http://www.7-zip.org/), quote from there:<br />
<br />
Supported formats:<br />
<br />
    * Packing / unpacking: 7z, ZIP, GZIP, BZIP2 and TAR<br />
    * Unpacking only: ARJ, CAB, CHM, CPIO, DEB, DMG, HFS, ISO, LZH, LZMA, MSI, NSIS, RAR, RPM, UDF, WIM, XAR and Z.<br />
<br />
<br />
How about that :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fedotawa</div><div class="date">11th May 2010, 09:12</div></div><div class="posttext">Plugin breaks non ANSI file pathname encoding (for example it switches from cyrillic 1251 to 866, this causes shortcut creation into inproper places).<br />
<br />
Here's a fix.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">1st September 2010, 01:53</div></div><div class="posttext">Hi...<br />
<br />
I need a help please with this plugin... I read the wiki about the usage of this plugin, like this:<br />
<br />
Unpack you merge module as 7z archive to somewere on users harddrive, set target dir for archive contents with SetOutPath, and call plugin.<br />
<br />
My question is:<br />
<br />
when this say merge module it is referred to standalone file 7za.exe???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2010, 06:53</div></div><div class="posttext">I think that line is trying to say &quot;unpack your 7z archive using the File command, then use SetOutPath to set the extraction output directory and call the plugin.&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">1st September 2010, 11:15</div></div><div class="posttext">OK ,so i saw that example but before from command script File you can see SetCompress off. But i think about the file command, it compress that 7z into setup.exe (so SetCompress off is not working?)<br />
<br />
This plugin first copy 7z into harddrive and then extracts the contents???<br />
<br />
I was searching for a long time a plugin that allow me to extract contents froms some 7z files with an animated bar but only i need to extract it from fixed media like DVD. So I need to make a little setup.exe...<br />
<br />
thanks.<br />
<br />
P.D.<br />
<br />
Sorry admin about duplicate post, please delete one...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">1st September 2010, 11:16</div></div><div class="posttext">OK ,so i saw that example but before from command script File you can see SetCompress off. But i think about the file command, it compress that 7z into setup.exe (so SetCompress off is not working?)<br />
<br />
This plugin first copy 7z into harddrive and then extracts the contents???<br />
<br />
I was searching for a long time a plugin that allow me to extract contents froms some 7z files with an animated bar but only i need to extract it from fixed media like DVD. So I need to make a little setup.exe...<br />
<br />
thanks.  :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2010, 12:22</div></div><div class="posttext">OK ,so i saw that example but before from command script File you can see SetCompress off. But i think about the file command, it compress that 7z into setup.exe (so SetCompress off is not working?)<br />
No, the command only makes NSIS turn off compression. Of course it still stores the file in the installer, otherwise it wouldn't be able to extract the file when the File command is called during installation. Turning off compression only helps by making the installer compilation go faster.<br />
<br />
This plugin first copy 7z into harddrive and then extracts the contents???<br />
Please don't use ??? like that, it makes you sound like you're shouting.<br />
<br />
And no. You first have to copy the 7z to the harddrive using the File command (it's actually called extracting, not copying, because you need to extract it from the installer exe.)  Or you can use a 7z file from a CD, or a downloaded one, of course.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">1st September 2010, 14:17</div></div><div class="posttext">thanks MSG and sorry for &quot;???&quot; :)<br />
<br />
I have some files in 7z format file, so my project takes about 8GB...so i need a plugin that allow me to extract these files from fixed media, like DVD...<br />
<br />
If i use de 7z standalone file for use command line, this work for me but progress bar not moving and not showing the information progress like &quot;10% - file.xx&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2010, 14:58</div></div><div class="posttext">Indeed, the standalone 7z is not designed for NSIS, so it will not output information to the NSIS log by itself. You can try using nsExec::ExecToLog, but if I recall correctly it doesn't work here because 7z doesn't just print information, it updates it as well (like the percentage counter). And that doesn't work with ExecToLog, as far as I know.<br />
<br />
But have you tried the 7z plugin? It should be able to unpack a 7z archive just fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thanatos83</div><div class="date">1st September 2010, 20:19</div></div><div class="posttext">Hi ...<br />
<br />
Yes MSG, worked fine if i use 7za.exe...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">19th February 2011, 22:40</div></div><div class="posttext">Is it possible to implement handling of password-protected archives?<br />
<br />
This would be a much more convenient solution than using Dcrypt to protect some valuable files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pizzaM4N</div><div class="date">28th June 2011, 02:47</div></div><div class="posttext">is it possible to implement an option for unpacking lzma2 compressed .7z files? If you try to unpack lzma2 files with this plugin, all the unpacked files have a size of 0KB.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">28th June 2011, 06:09</div></div><div class="posttext">As a makeshift solution you could turn your lzma2 file into a self-extracting exe. You can then use:<br />
<br />
ExecWait '&quot;Path\YourExe.exe&quot; x -o&quot;$INSTDIR&quot; -y' $0<br />
${If} $0 != &quot;0&quot;<br />
  MessageBox MB_OK &quot;File extraction failed&quot;<br />
${EndIf}<br />
<br />
You can distribute 7x sfx exes for free for commercial apps as well, as the creator mentions here: http://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/3361543</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">28th June 2011, 08:42</div></div><div class="posttext">Is it possible to implement handling of password-protected archives?<br />
<br />
This would be a much more convenient solution than using Dcrypt to protect some valuable files.<br />
<br />
the plugin does not support that and the author doesn't bother to make any comments on his plans. the best (and probably easiest) would be the option to supply any of the available commandline arguments. personally i'm looking for the -p, -i and -e switches to be supported.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">extremecarver</div><div class="date">12th April 2013, 19:03</div></div><div class="posttext">Well, I've tried out the new 921 based plugin, but it cannot extract lzma2 (it just outputs 0bit files)?<br />
<br />
Anything I'm doing wrong?<br />
Anyone got a solution right now, to internally unpack lzma2 - it's nearly two years later compared to the last post?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">extremecarver</div><div class="date">14th April 2013, 21:27</div></div><div class="posttext">As a makeshift solution you could turn your lzma2 file into a self-extracting exe. You can then use:<br />
<br />
ExecWait '&quot;Path\YourExe.exe&quot; x -o&quot;$INSTDIR&quot; -y' $0<br />
${If} $0 != &quot;0&quot;<br />
  MessageBox MB_OK &quot;File extraction failed&quot;<br />
${EndIf}<br />
<br />
You can distribute 7x sfx exes for free for commercial apps as well, as the creator mentions here: http://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/3361543<br />
<br />
Just make sure, that if you use it, you know there is a 2-4GB limit here too. SFX created by 7-zip over 4GB don't open &quot;This is not a valid Win32..&quot;... <br />
I just lost about a full day of work, not knowing this. Because I adapted lots of code to the SFX to implement them, only to find out in real use, that it won't work...<br />
<br />
So lzma2 for Nsis - yeah, but really not useful. Cause if you have a big amount of data, you cannot use sfx. And for small amounts, lzma packed with 7zip (and not stupidly slow Nsis) works okay enough. Still native lzma2 support - or at least using the plugin would be really great...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>