<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to append custom data to the uninstaller?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to append custom data to the uninstaller? NSIS Discussion" />
	
	<title> How to append custom data to the uninstaller? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to append custom data to the uninstaller?</div>
<hr />
<div class="pda"><a href="t-249431.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=249431">How to append custom data to the uninstaller?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">M-Force</div><div class="date">23rd June 2006, 14:43</div></div><div class="posttext">Hi,<br />
I want to append data to the unistaller in order to reuse the data which i defined in the installer. I want to avoid creating an ini file or using the registry for storing such data.<br />
<br />
My question now is how to do that in detail.<br />
<br />
Can somebody help me with that?<br />
<br />
M.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">23rd June 2006, 15:54</div></div><div class="posttext">you can append data to the end of the uninstaller exe after it has been created, use FileSeek<br />
 and FileWriteByte</div></div><hr />


<div class="post"><div class="posttop"><div class="username">M-Force</div><div class="date">23rd June 2006, 16:09</div></div><div class="posttext">Do you have an example how such script code is suppose to look like?  I mean how can i append data to the uninstaller file and how can i read the data back in a script? And where in the installer should i write the data?<br />
<br />
Thanks for your help.<br />
<br />
M.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">23rd June 2006, 17:09</div></div><div class="posttext">Name &quot;${__FILE__}&quot;<br />
OutFile &quot;${__FILE__}.exe&quot;<br />
ShowInstDetails show<br />
InstallDir &quot;$EXEDIR&quot;<br />
<br />
!define Uninstaller &quot;$INSTDIR\uninst_${__FILE__}.exe&quot;<br />
<br />
!include &quot;TextFunc.nsh&quot;<br />
!insertmacro un.FileReadFromEnd<br />
<br />
Var Poo<br />
;...<br />
<br />
Section &quot;&quot;<br />
;...<br />
WriteUninstaller ${Uninstaller}<br />
StrCpy $Poo &quot;Poopies=1&quot;<br />
;...<br />
FileOpen $0 ${Uninstaller} a<br />
FileSeek $0 1 END<br />
FileWrite $0 $Poo<br />
;...<br />
FileClose $0<br />
SectionEnd<br />
<br />
Section &quot;Uninstall&quot;<br />
;<br />
${un.FileReadFromEnd} ${Uninstaller} un.ReadMyStuff<br />
Delete ${Uninstaller}<br />
;<br />
SectionEnd<br />
<br />
Function un.ReadMyStuff<br />
	MessageBox MB_OK '$9'<br />
	StrCpy $0 StopFileReadFromEnd<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">M-Force</div><div class="date">23rd June 2006, 17:28</div></div><div class="posttext">Thank you very much for the code example. It helped me a lot</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>