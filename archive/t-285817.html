<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Confirmation for Download Abort, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Confirmation for Download Abort NSIS Discussion" />
	
	<title> Confirmation for Download Abort [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Confirmation for Download Abort</div>
<hr />
<div class="pda"><a href="t-285817.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=285817">Confirmation for Download Abort</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sj83</div><div class="date">28th January 2008, 15:05</div></div><div class="posttext">Hey guys!<br />
<br />
I hope one of you can help me with a little problem I have with my installer.<br />
<br />
When running the installer, it checks the users system, if a specific software that is required is installed. If it's not, a pop-up asks the user, whether he wants to download it now.<br />
For the download I use the InetLoad plug-in, and everything seems to work fine.<br />
<br />
But when the user cancels the download, I would like to have another pop-up first, that asks him, if he really wants to quit that download, and he gets to choose Yes or No.<br />
<br />
Right now I only managed to prevent him from cancelling, or give the pop-up after the download has been cancelled, telling the user that he has to try again.<br />
These solutions both are better than the default behaviour, but still not what I would like to see.<br />
<br />
Where could I find a solution or tips to solve this problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">28th January 2008, 15:48</div></div><div class="posttext">Your need at least VS6. Find &quot;case IDCANCEL:&quot; in code and add add after first &quot;break&quot;case IDCANCEL:<br />
if(nocancel) break;<br />
MessageBox(hDlg, &quot;Are u sure u want to terminate download?&quot;, szCaption, MB_YESNO);<br />
status = ST_CANCELLED;<br />
and rebuild plug-in. May be later I'll add this option, looks usefull. And Inetc (http://nsis.sourceforge.net/Inetc_plug-in) looks more stable for me (check parameters - small differences in CLI).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sj83</div><div class="date">30th January 2008, 12:08</div></div><div class="posttext">Thank you Takhir for your help!<br />
<br />
It took me a while to figure out all the compile errors I got with VS C++ 2008 Express, but finally I managed to rebuild the plug-in, with this nice little extra Messagebox popping up, when someone wants to cancel the DL.<br />
<br />
Yet I'm still a bit clueless, how I can than react onto the user input. Right now, it doesn't make a difference, what the user selects. The Download will be aborted after he answers the popup.<br />
<br />
I would greatly appreciate if you could tell me, where I can find an answer to this problem, or maybe even some code snippet.<br />
<br />
P.S.: Forgive these stupid questions, but I'm fairly new to NSIS</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">31st January 2008, 06:56</div></div><div class="posttext">Sorry, I not tested this code :) Just check value MsgBox returns (replace line):<br />
if(MessageBox(...) == IDNO) break;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sj83</div><div class="date">31st January 2008, 07:39</div></div><div class="posttext">Thank you again!<br />
<br />
Now I've got everything working the way I want it to.<br />
I really appreciate your efforts in helping me here</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>