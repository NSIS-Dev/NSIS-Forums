<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ~nsu.tmp directory in $TEMP, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ~nsu.tmp directory in $TEMP NSIS Discussion" />
	
	<title> ~nsu.tmp directory in $TEMP [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ~nsu.tmp directory in $TEMP</div>
<hr />
<div class="pda"><a href="t-265833.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265833">~nsu.tmp directory in $TEMP</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">15th February 2007, 09:06</div></div><div class="posttext">Hi.<br />
<br />
I noticed something strange about the uninstaller. When I run it, it copies itself to &quot;$TEMP\~nsu.tmp\Au_.exe&quot;, run it and exit itself. By doing so it allows the removal of the &quot;official&quot; uninstaller executable.<br />
<br />
I noticed that the &quot;$TEMP\~nsu.tmp\Au_.exe&quot; file is only removed after reboot. However the &quot;$TEMP\~nsu.tmp&quot; directory is not removed. Is it normal ? I guess it shouldn't be too annoying to stay with an empty temp directory but it would be much cleaner to delete it.<br />
<br />
Any idea / remarks about this ?<br />
<br />
Thanks,<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th February 2007, 09:16</div></div><div class="posttext">This is the way that uninstaller is programed to operate, not a big deal I guess leaving an empty dir into $TEMP.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">15th February 2007, 09:18</div></div><div class="posttext">Yeah, but it would be cleaner if the uninstaller copied itself to something like &quot;$TEMP\$name.exe&quot; instead of in a directory of his own... where $name is the result of a call to GetTempFileName. No ?<br />
<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th February 2007, 09:37</div></div><div class="posttext">I couldn't say, being open source, NSIS offers abilities to modify it in the way it suits your needs, moreover if you have added a feature yourself, you can post the source code in the patch tracker,<br />
http://sourceforge.net/tracker/?atid=373087&amp;group_id=22049&amp;func=browse</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">15th February 2007, 09:59</div></div><div class="posttext">Maybe we could have some input from NSIS developers as the case may have been thought and they could have thought of potential problems with that approach ?<br />
<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">15th February 2007, 11:53</div></div><div class="posttext">Originally posted by sebarnolds <br />
Yeah, but it would be cleaner if the uninstaller copied itself to something like &quot;$TEMP\$name.exe&quot; instead of in a directory of his own... where $name is the result of a call to GetTempFileName. No ?<br />
<br />
Sebastien  <br />
In older NSIS versions it worked just like that. I don't know why it was changed, but I bet there is a reason for it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">15th February 2007, 11:56</div></div><div class="posttext">Yes there is a reason for it. From top of my head I do not recall why, only I remember was involved back then in some scenario's that benefited having a separate directory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">15th February 2007, 12:38</div></div><div class="posttext">From the Changelog for NSIS 2.08 (released on July 23rd, 2005):<br />
<br />
Made uninstallers copy themselves into a subdirectory of the temporary directory to avoid DLLs left in the temporary directory from being loaded by the uninstaller (patch #1214319)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">15th February 2007, 13:52</div></div><div class="posttext">Hey.<br />
<br />
Yeah, thanks for your remarks.<br />
<br />
I wrote a patch to remove the directory too. The description can be found here :<br />
https://sourceforge.net/tracker/?func=detail&amp;atid=373087&amp;aid=1660626&amp;group_id=22049<br />
<br />
Hope it will be useful,<br />
Sebastien</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>