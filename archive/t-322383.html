<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Function Definition Problems, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Function Definition Problems NSIS Discussion" />
	
	<title> Function Definition Problems [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Function Definition Problems</div>
<hr />
<div class="pda"><a href="t-322383.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322383">Function Definition Problems</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">greena23</div><div class="date">13th September 2010, 11:17</div></div><div class="posttext">Hi,<br />
<br />
I am reusing an old function I used on another installer of mine. It is one I found online to check the version of a file. I runs fine in the other installer, but in the other one is gives this error -<br />
<br />
!define: &quot;GetFileVersion&quot; already defined!<br />
Error in Script &quot;(script location and name)&quot; on line 203 -- aborting creation process<br />
<br />
The code itself is:<br />
<br />
Function GetFileVersion<br />
<br />
	!define GetFileVersion `!insertmacro GetFileVersionCall`<br />
<br />
	!macro GetFileVersionCall _FILE _RESULT<br />
		Push `${_FILE}`<br />
		Call GetFileVersion<br />
		Pop ${_RESULT}<br />
	!macroend<br />
<br />
	Exch $0<br />
	Push $1<br />
.......<br />
.......<br />
<br />
I have checked and there are no other references to GetFileVersion in the code.<br />
<br />
Has anyone any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">13th September 2010, 11:21</div></div><div class="posttext">First of all, I wouldn't put define and macro declarations inside a function, it looks ugly. I'm not even sure if it's valid NSIS code, but I've never looked into that so whatever. But if the compiler says something's already defined, then it's already defined. Look in your include files, for example.<br />
<br />
Either way, get those declarations out of that function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">greena23</div><div class="date">13th September 2010, 12:14</div></div><div class="posttext">If it is helpful this is where I got the code from<br />
<br />
http://nsis.sourceforge.net/GetFileVersion</div></div><hr />


<div class="post"><div class="posttop"><div class="username">greena23</div><div class="date">13th September 2010, 13:14</div></div><div class="posttext">If this is in anyway helpful this is where I got the code for the version check.<br />
<br />
http://nsis.sourceforge.net/GetFileVersion<br />
<br />
I have search but cannot find at all where they were defined before. I did a ctrl+f aswell and nothing.<br />
<br />
Any help would be much appreciated</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">13th September 2010, 13:20</div></div><div class="posttext">Are you maybe including FileFunc.nsh?<br />
This function is defined there nowadays:<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.8</div></div><hr />


<div class="post"><div class="posttop"><div class="username">greena23</div><div class="date">13th September 2010, 15:05</div></div><div class="posttext">I was unaware it was defined in FileFunch.nsh I've removed code and it compiles now. However I have a different problem. I am taking this version no. and I am trying to compare it with a set version number. However it keeps saying my version is newer even when it isn't.<br />
<br />
I am using this code http://nsis.sourceforge.net/Comparing_Two_Version_Numbers to compare the version numbers. However I cannot understand why the it is always saying the version is newer</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th September 2010, 17:32</div></div><div class="posttext">Use VersionCompare from WordFunc.nsh<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>