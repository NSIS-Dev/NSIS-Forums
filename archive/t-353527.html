<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS ExecWait dosen't wait when installing the setup file via chrome browser, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS ExecWait dosen't wait when installing the setup file via chrome browser NSIS Discussion" />
	
	<title> NSIS ExecWait dosen't wait when installing the setup file via chrome browser [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS ExecWait dosen't wait when installing the setup file via chrome browser</div>
<hr />
<div class="pda"><a href="t-353527.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=353527">NSIS ExecWait dosen't wait when installing the setup file via chrome browser</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gordengram</div><div class="date">18th December 2012, 13:17</div></div><div class="posttext">When downloading the .exe installation file (NSIS installation) and opening it via chrome in order to execute it the ExecWait dosen't work.<br />
<br />
I'm running a batch file which kill browsers processes inside of the installation, because I opened the exe file via the chrome (Download Manager) the ExecWait think that the execute has ended and therefore dosen't wait for the next ExecWait calls that coming after the line which call to execute the batch file. It think that chrome was the parent process so it quitting the installation.<br />
<br />
Is there a way to let the ExecWait know that although I killed the chrome browser (or any other browsers) process to continue the installation? and waiting for only the .exe files that I execute via the NSIS script?<br />
<br />
P.S - When installing the .exe file out of the browser (download manager) it works fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gordengram</div><div class="date">18th December 2012, 16:16</div></div><div class="posttext">EDIT (I HAVE INCLUDED CODES):<br />
<br />
NSIS code:<br />
#-----------------------------------<br />
# define the name of the installer<br />
outfile &quot;setup.exe&quot;<br />
Name &quot;Example&quot;<br />
<br />
installDir $LOCALAPPDATA\Test<br />
<br />
# default section<br />
section<br />
<br />
setOutPath $INSTDIR<br />
File install.exe<br />
File test.exe<br />
<br />
ExecWait $INSTDIR\install.exe<br />
Delete $INSTDIR\install.exe<br />
ExecWait $INSTDIR\test.exe<br />
Delete $INSTDIR\test.exe<br />
<br />
sectionEnd<br />
<br />
<br />
#-----------------<br />
<br />
<br />
and inside of the install.exe (its a .bat file the I compile to an .exe file) this code:<br />
<br />
@echo off<br />
taskkill /F /IM chrome.exe /T<br />
If you download the setup.exe via chrome and executing it from the bottom bar (download manager) it will execute install.exe (closing chrome.exe) but will skip this lines:<br />
<br />
Delete $INSTDIR\install.exe<br />
ExecWait $INSTDIR\test.exe<br />
Delete $INSTDIR\test.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">18th December 2012, 19:03</div></div><div class="posttext">ExecWait always waits for the child process it started but it does not wait for grandchildren...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">22nd December 2012, 08:14</div></div><div class="posttext">you should use the nsprocess plugin or nsis to kill or obey tasks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>