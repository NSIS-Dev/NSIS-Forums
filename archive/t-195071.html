<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Small bug, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Small bug NSIS Discussion" />
	
	<title> Small bug [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Small bug</div>
<hr />
<div class="pda"><a href="t-195071.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=195071">Small bug</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th September 2004, 14:02</div></div><div class="posttext">I've found that if you change the text colour of a Label control, and then try and change the text within it the new text appears over the old text and doesn't actually replace it.<br />
<br />
Screenshot attached.<br />
<br />
A similar thing happens when changing the background colour of e.g. a ListBox control. The background color isn't set for the whole ListBox background, but when you select an item the background colour of that item is set to the new background colour.<br />
<br />
I have found a fix for this which is to hide the control and then show it again using ShowWindow (so basically it refreshes the control).<br />
<br />
E.g.<br />
 ShowWindow $R0 0<br />
 ShowWindow $R0 5<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2004, 14:05</div></div><div class="posttext">If you set the background to transparent and then set the text, Windows has no color to draw over the old text.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">edream</div><div class="date">14th October 2005, 00:56</div></div><div class="posttext">I'm trying to add text in ListBox in Leave page. The ListBox is not getting refreshed. If I use abort or MessageBox followed by it, then I can see the refreshed content. <br />
<br />
Is there a way I can refresh the newly added text?<br />
<br />
I tried ShowWindow {SW_HIDE} and {SW_SHOW}, but the hidden window never comes back. Here is the snippet<br />
<br />
Function tempProgressLeave<br />
<br />
  ; disable back button before showing the progress<br />
  GetDlgItem $0 $HWNDPARENT 3<br />
  EnableWindow $0 0<br />
<br />
  ; disable next button<br />
  GetDlgItem $0 $HWNDPARENT 1<br />
  EnableWindow $0 0<br />
<br />
  FindWindow $1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $0 $1 1202<br />
  StrCpy $2 0<br />
  StrCpy $vard &quot;hello world&quot;<br />
<br />
  loopd:<br />
  IntOp $2 $2 + 10 ;here the progressbar increases<br />
  ;MessageBOX MB_OK &quot;hello ${SW_SHOW} ${SW_HIDE}&quot;<br />
  ShowWindow $0 ${SW_HIDE}<br />
  SendMessage $0 ${LB_ADDSTRING} &quot;&quot; &quot;STR: $2:$vard&quot;<br />
  ShowWindow $0 ${SW_SHOW}<br />
  IntCmp $2 100 loopd  loopd<br />
   <br />
  Sleep 5000<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2005, 13:41</div></div><div class="posttext">Please attach a complete example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">edream</div><div class="date">18th October 2005, 18:22</div></div><div class="posttext">I have attached the sample script.  The script just contains welcome-install-finish page. I had to write custom install page to control the progress bar. I'm able to control the progress bar but not able to refresh the listbox. <br />
<br />
could you please take a look at the files and let me know if there is something I am missing ?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th October 2005, 19:45</div></div><div class="posttext">I don't see the code from the first post in your example. Attach an example that contains the code you've tried. Also, there are a lot of missing files. It'd be nicer, if you provide a complete minimal example that I can compile with too much hassle.<br />
<br />
BTW, to create a .lnk file, use CreateShortcut. Don't copy premade shortcuts over to the user's computer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">edream</div><div class="date">21st October 2005, 07:26</div></div><div class="posttext">The example I tried is in the zip file. I'm not sure what are the missing files. It requires only the dinst.nsi and the DInstall.ini. both files are bundled in the zip file. <br />
I copied the zip file in to the separate directory and I'm able to compile. Could you please let  me know what the problem you are facing?<br />
<br />
I'm not very clear about the createshortcut suggestion.I dont have any such code. Could you please clarify.<br />
<br />
Attaching the zip file again.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st October 2005, 09:12</div></div><div class="posttext">It also needs InstallOptionsEx plugin to be present.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">21st October 2005, 10:45</div></div><div class="posttext">To update the page you can just use this:   System::Call &quot;User32::UpdateWindow(i)i (r0)&quot;Put that line of code after trying to show back the window.<br />
<br />
This should be seen as a feature, not bug. You add an item but you have an option to update them when you really need.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st October 2005, 14:15</div></div><div class="posttext">Oops, sorry. I've opened up another script instead of yours.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">edream</div><div class="date">21st October 2005, 19:54</div></div><div class="posttext">Great! It worked with this change. <br />
<br />
System::Call &quot;User32::UpdateWindow(i)i (r0)&quot; <br />
<br />
Thanks a lot!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>