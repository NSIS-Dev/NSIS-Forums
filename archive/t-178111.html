<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Writing/Changing a config file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Writing/Changing a config file NSIS Discussion" />
	
	<title> Writing/Changing a config file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Writing/Changing a config file</div>
<hr />
<div class="pda"><a href="t-178111.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=178111">Writing/Changing a config file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">drbungle</div><div class="date">27th April 2004, 07:11</div></div><div class="posttext">Hi<br />
<br />
i want to write (if not existing) or change (if already exists) a config file for a program from within a NSIS installer. The installer should replace a string with<br />
<br />
UploadLimit=&lt;SettingMadeInTheInstaller&gt;<br />
MaxUpload=&lt;SettingMadeInTheInstaller&gt;<br />
<br />
or write those two line into a new config file if the file isnt there.<br />
<br />
My problem is now:<br />
<br />
Is it easier to make that with WriteINIStr or by opening a file like a text file (FileOpen,FileWrite,...) and replace it then ?<br />
Because if the config file already exists and the user made his settings in the program it is not a constant like MaxUpload=true for example....its user defined...<br />
<br />
Is there already an example of modifying/writing a new setting into a config file, which would fit my needs?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">27th April 2004, 08:44</div></div><div class="posttext">Hi :)<br />
<br />
Err, not sure to have understood exactly that:<br />
The installer should replace a string with<br />
<br />
UploadLimit=&lt;SettingMadeInTheInstaller&gt;<br />
MaxUpload=&lt;SettingMadeInTheInstaller&gt;<br />
and<br />
it is not a constant like MaxUpload=true for example....its user defined...<br />
<br />
1) To write values in a config file, it's easier to use the WriteIniStr instruction: one instruction instead of FileOpen, FileWrite, FileClose...<br />
<br />
<br />
WriteIniStr &quot;MyFile.ini&quot; &quot;SectionName&quot; &quot;UploadLimit&quot; &quot;$UploadLimitSetIntheInstaller&quot;<br />
<br />
<br />
WriteIniStr &quot;MyFile.ini&quot; &quot;SectionName&quot; &quot;MaxUpload&quot; &quot;$MaxUploadSetIntheInstaller&quot;<br />
<br />
<br />
2) If your want to replace a string  you could use this function:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=318<br />
<br />
<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">drbungle</div><div class="date">27th April 2004, 10:21</div></div><div class="posttext">I have no sections in my config, can i leave it at &quot;&quot; then ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th April 2004, 12:02</div></div><div class="posttext">I think Windows INI files always have sections, otherwise you'll have to read it manually.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">drbungle</div><div class="date">27th April 2004, 12:44</div></div><div class="posttext">hehe its not an ini file...we store program config in a seperate .config file located in the program dir.<br />
<br />
So it isnt possible to add strings (by using WriteINIStr) to files without sections.<br />
<br />
Would it be possible to add such an instruction,which makes that possible, to the NSIS development version ? That would be a nice feature and makes it easier to edit existing configs for programs or new, cause a lot of programs store their settings like &lt;entryname&gt;=&lt;value&gt;<br />
<br />
...just a thought...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th April 2004, 13:02</div></div><div class="posttext">WriteINIStr can only create INI file strings, which do have sections.<br />
<br />
Because most application use INI files or registry keys, it is most likely that this feature won't be added to NSIS.<br />
<br />
You can however write a NSIS function that can read/write such strings. Exampls can be found in the NSIS Archive at http://nsis.sf.net/archive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">drbungle</div><div class="date">27th April 2004, 14:04</div></div><div class="posttext">It is especially interesting for programs which work on multiple platforms (win, linux, mac,...) like our program (a java one)...because they dont use ini files or reg entries and consist of just plain &lt;name&gt;=&lt;value&gt;.<br />
<br />
However i guess its not that hard to write a function replacing the value, so its time to get to work :)<br />
<br />
Thanks for your help!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>