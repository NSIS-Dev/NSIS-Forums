<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Improper InstallDir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Improper InstallDir NSIS Discussion" />
	
	<title> Improper InstallDir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Improper InstallDir</div>
<hr />
<div class="pda"><a href="t-202610.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202610">Improper InstallDir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">20th December 2004, 22:49</div></div><div class="posttext">At first, sorry my poor english, i'm a hungarian guy :)<br />
<br />
So, there's something wrong with the InstallDir (i'm using the 2.03 version). <br />
<br />
There's my script:<br />
InstallDir &quot;$PROGRAMFILES\My Name\My Game&quot;<br />
<br />
The source directory look like this:<br />
install<br />
install/BIN<br />
install/DATA<br />
install/users<br />
etc.<br />
<br />
So, when i'm starting the setup.exe, the default location in the installer is:<br />
<br />
C:\Program Files\BIN<br />
<br />
Why???<br />
<br />
I'm tried the &quot;MyName/MyGame&quot; to (without spaces), but nothing changes. <br />
<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th December 2004, 23:56</div></div><div class="posttext">Could you attach your script please.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 00:07</div></div><div class="posttext">Originally posted by Afrow UK <br />
Could you attach your script please.<br />
<br />
-Stu  <br />
<br />
Hi,<br />
<br />
sure, here it is, thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 00:28</div></div><div class="posttext">I honestly couldn't find anything seriously wrong with the script. I cut it down to a state where it was compilable and it works fine.<br />
<br />
I did find one error though:<br />
CreateShortCut &quot;$DESKTOP\M.lnk&quot; &quot;BIN\M.exe&quot; &quot;&quot; &quot;$INSTDIR\M.ico&quot;<br />
You're missing $INSTDIR from that bit.<br />
<br />
Put this into your script and see what happens:<br />
Function .onInit<br />
 MessageBox MB_OK &quot;$INSTDIR&quot;<br />
FunctionEnd<br />
You should get something like &quot;C:\Program Files\My Name\My Game&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 00:35</div></div><div class="posttext">Originally posted by Afrow UK <br />
Put this into your script and see what happens:<br />
Function .onInit<br />
 MessageBox MB_OK &quot;$INSTDIR&quot;<br />
FunctionEnd<br />
You should get something like &quot;C:\Program Files\My Name\My Game&quot;<br />
<br />
-Stu [/B] <br />
<br />
Thanks! Done - here is the message:<br />
<br />
&quot;C:\Program Files\BIN&quot;<br />
<br />
:weird: <br />
<br />
I don't understand...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 01:14</div></div><div class="posttext">I did it!<br />
<br />
Well, last time I've made a mistake. The InstallDir was only the $programfiles. So, the installer put in the registry this entry, and the executable was c:\program files\BIN\m.exe. So, it's seems to me, the installer used the registry entry, and not that InstallDir value in the script... Strange. After I've deleted the registry key, the InstallDir path is correct.<br />
<br />
Sorry for this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">21st December 2004, 01:20</div></div><div class="posttext">Your script uses InstallDir _and_ InstallDirRegKey.<br />
<br />
This means the installer will use the path stored in the registry (if the specified string exists) to override the setting in InstallDir. This feature lets the installer remember the previous installation folder (to make it easier to re-install to the same location).<br />
<br />
If the registry entry does not exist, the installer will use the InstallDir setting.<br />
<br />
See the NSIS Users Manual:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.22</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>