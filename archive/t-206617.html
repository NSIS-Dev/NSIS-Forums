<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Change Directory if it exists, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Change Directory if it exists NSIS Discussion" />
	
	<title> Change Directory if it exists [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Change Directory if it exists</div>
<hr />
<div class="pda"><a href="t-206617.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=206617">Change Directory if it exists</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stonkers</div><div class="date">1st February 2005, 23:01</div></div><div class="posttext">I'm having problems with a !cd that needs to happen &quot;IF&quot; a certain file exists (and thus the directory exists also).  Here's my code:<br />
<br />
-------------------------------------------------<br />
  IfFileExists &quot;$INSTDIR\folder\file&quot; +1 skip1<br />
  !cd &quot;$INSTDIR\folder&quot;<br />
<br />
  skip1:<br />
  ;stuff...<br />
-------------------------------------------------<br />
<br />
I'm getting a compiler error because the directory doesn't exist.  Is there a way to do this?<br />
<br />
Thanks,<br />
Eric</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">2nd February 2005, 04:26</div></div><div class="posttext">try IfFileExists with a folder... I think they use the same API for files and folders:<br />
<br />
Name boo<br />
Caption boo<br />
OutFile boo.exe<br />
XPSTyle on<br />
ShowInstDetails show<br />
<br />
Section<br />
IfFileExists $WINDIR 0 +3<br />
StrCpy $0 &quot;Folders exists&quot;<br />
Goto Exit<br />
StrCpy $0 &quot;OMG! You don't have windir :S&quot;<br />
Exit:<br />
DetailPrint $0<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">2nd February 2005, 14:59</div></div><div class="posttext">IfFileExists &quot;$INSTDIR\folder\file&quot; +1 skip1<br />
!cd &quot;$INSTDIR\folder&quot;<br />
<br />
you mixed some things up ...<br />
<br />
&quot;!cd&quot; is a compiletime command<br />
&quot;$INSTDIR&quot; is a runtime variable<br />
&quot;IfFileExists&quot; is a runtime command</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stonkers</div><div class="date">2nd February 2005, 19:40</div></div><div class="posttext">I don't get it Comm@nder21, you put the same code as me there.  It won't compile &quot;because&quot; !cd is a compiletime command.  Is there a way to do what I'm trying to do (i.e. a way to change directories at runtime)?<br />
<br />
Thanks,<br />
Eric</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd February 2005, 20:56</div></div><div class="posttext">SetOutPath...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">2nd February 2005, 21:05</div></div><div class="posttext">i just copied your code and explained it to you.<br />
i never posted a fix :)<br />
<br />
now, here is one, if you DO WANT it to perform at RUNTIME:<br />
IfFileExists &quot;$INSTDIR\folder\*.*&quot; 0 +2 ; will jump 'over' the setoutpath command<br />
SetOutPath &quot;$INSTDIR\folder&quot; ; will set the runtime var $OUTDIR to $INSTDIR\folder, all recursive file commands use this path as root. also do execute and shortcut commands (as working dir)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stonkers</div><div class="date">2nd February 2005, 22:23</div></div><div class="posttext">Thanks Comm@nder21 and Afrow UK!  I've seen that command but knew not what it was doing.  Live long and prosper!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>