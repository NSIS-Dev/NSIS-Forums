<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Python commands from NSIS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Python commands from NSIS NSIS Discussion" />
	
	<title> Python commands from NSIS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Python commands from NSIS</div>
<hr />
<div class="pda"><a href="t-320352.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320352">Python commands from NSIS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ejik25</div><div class="date">29th June 2010, 07:42</div></div><div class="posttext">Hi,<br />
<br />
I'm trying to run a Python script from the NSIS installer, but it doesn't work.<br />
<br />
Here's my NSIS code:<br />
<br />
      ||<br />
      ||      NSIS section:<br />
      ||<br />
      ||      Section &quot;Main &quot; SEC01<br />
      ||              SetOutPath &quot;$INSTDIR\&quot;<br />
      ||              File &quot;C:\Test\ReadMe.txt&quot;<br />
      ||              File &quot;C:\Test\a.py&quot;<br />
      ||              ExecWait &quot;C:\Python25\python.exe $INSTDIR\a.py&quot;<br />
      ||      SectionEnd<br />
      ||<br />
Here's the code of a.py:<br />
<br />
      ||<br />
      ||      import os<br />
      ||      os.remove('C:\Documents and Settings\HP<br />
USER\Desktop\Example1\ReadMe.txt')<br />
      ||<br />
<br />
According to the NSIS logs, the line: &quot;ExecWait<br />
&quot;C:\Python25\python.exe $INSTDIR\a.py&quot; is executed, but the ReadMe.txt<br />
file is not deleted.<br />
I've also tried &quot;ExecWait $INSTDIR\a.py&quot;, but it didn't work either.<br />
<br />
What am I doing wrong?<br />
Also, is there a way to see the console of the python script that runs<br />
from NSIS?<br />
<br />
Please assist.<br />
Thanks in advance!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th June 2010, 09:21</div></div><div class="posttext">You need to quote $INSTDIR\a.py as it may contain spaces.<br />
But why use Python to delete a file? You can use the Delete command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ejik25</div><div class="date">29th June 2010, 09:29</div></div><div class="posttext">It's just an example to learn how to run .py files in NSIS.<br />
Actually, one of  installer tasks is install json-rpc. <br />
String for json-rpc install is: &quot;setup.py install&quot; and I can't do it with NSIS.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>