<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Possibility to define multilanguage io.ini's, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Possibility to define multilanguage io.ini's NSIS Discussion" />
	
	<title> Possibility to define multilanguage io.ini's [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Possibility to define multilanguage io.ini's</div>
<hr />
<div class="pda"><a href="t-129514.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129514">Possibility to define multilanguage io.ini's</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">23rd March 2003, 23:18</div></div><div class="posttext">Dear community -<br />
<br />
Is there a way to make io.ini output multi-lingual?<br />
<br />
I have some CutomPages which work pretty fine, but there are some &quot;Type=label&quot; with &quot;Text=...&quot;. How can this be *lingualized* too? So if languageA is choosen at installation time, languageA &quot;Text=...&quot; should be displayed. If languageB is choosen ... (and so on)<br />
<br />
Any ideas<br />
Thx <br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">23rd March 2003, 23:40</div></div><div class="posttext">Use language strings, and write the translated string to a INI file.<br />
<br />
Example:<br />
<br />
LangString Field1_Text ${LANG_ENGLISH} &quot;English text:&quot;<br />
LangString Field1_Text ${LANG_FRENCH} &quot;French text:&quot;<br />
<br />
Function &quot;Your Page Function&quot;<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;io.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;$(Field1_Text)&quot;<br />
<br />
;other things here!<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">23rd March 2003, 23:42</div></div><div class="posttext">Cool,<br />
<br />
thx deguix!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">23rd March 2003, 23:47</div></div><div class="posttext">One short question (sorry)<br />
<br />
This is the start of the section<br />
  Section....<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;ioA.ini&quot; &quot;Field 3&quot; &quot;State&quot;<br />
  StrCmp $R0 1 &quot;&quot; noOption1    ;check whether the option is selected<br />
 <br />
<br />
Where do I have to place your directives<br />
(you told before)?<br />
<br />
Or replace !insertmacro MUI_INSTALLOPTIONS_READ with !insertmacro MUI_INSTALLOPTIONS_WRITE<br />
<br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">24th March 2003, 00:20</div></div><div class="posttext">If you want to only replace the text if the option is selected, add the:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;inifile.ini&quot; &quot;Field #&quot; &quot;Text&quot; &quot;$(LanguageString)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 09:03</div></div><div class="posttext">OK I am too stup**&amp;% for that.<br />
<br />
I packed the entire state of my installer as zip (attached).<br />
<br />
When you compile it (should work with every default NSIS installation) you see on CustomPageA the description is in english (doesn't matter if german is selected or english) On CustomPageB everything appears in german, even if english is selected.<br />
The shown strings are &quot;hard coded&quot; in the ioA/B.ini, so this behaviour is what I had to expect.<br />
<br />
So far so good, but the translation should appear in the selected language (as you would expect). Where must I change my code?<br />
<br />
If possible, please be as descriptive as possible. As you already know I am a /(&amp;%*'$ยง&quot;-Programmer<br />
:( <br />
<br />
Thx Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th March 2003, 11:53</div></div><div class="posttext">* Remove '!insertmacro MUI_INTERFACE' from your script. You don't have to insert that macro (probably old alpha 7 code).<br />
<br />
* Add the language strings somewhere in your script (a good place is in the configuaration):<br />
<br />
LangString Field1_Text ${LANG_ENGLISH} &quot;English text:&quot;<br />
LangString Field1_Text ${LANG_FRENCH} &quot;French text:&quot;<br />
<br />
* Add the write macro in .onInit after extracting the IO files:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;io.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;$(Field1_Text)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 12:25</div></div><div class="posttext">Do I need the red line?<br />
[Field 2]<br />
Type=Label<br />
Text=Hello World.<br />
Left=10<br />
Right=-10<br />
Top=11<br />
Bottom=27<br />
Or must I leave it empty or delete it?<br />
<br />
<br />
---[UPDATE]-----<br />
<br />
Oh I got it....<br />
Is the macro preferred? I had the text defined both, in io.ini and as you mentioned above. The preferred was the defined with   !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioB.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;$(Field1_Text)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 12:31</div></div><div class="posttext">Jost -<br />
<br />
Major 'genius' Dude<br />
<br />
:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th March 2003, 13:34</div></div><div class="posttext">Putting the code in .onInit won't work as the final language is set only after .onInit. Put it in .onGUIInit or in custom page's creator function before calling to InstallOptions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 14:21</div></div><div class="posttext">That's right,<br />
<br />
I put it after .onInit and the only language shown is the first set.<br />
<br />
KichiK -<br />
What's the &quot;custom pages's creator function&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th March 2003, 14:23</div></div><div class="posttext">The function where you create the InstallOptions page. For example:<br />
<br />
Page custom CreatorFunction<br />
Function CreatorFunction<br />
  # show io...<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th March 2003, 14:28</div></div><div class="posttext">Using .onGuiInit is better because it will only be set once. You can remove the Text from the INI file.<br />
<br />
For the Modern UI, use:<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT SetIOText<br />
<br />
Function SetIOText<br />
<br />
  ...the write macro's...<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 14:30</div></div><div class="posttext">If you take a look at the attached file posted some posts before, ther is no such function or am I wrong?<br />
<br />
The .onGUIInit won't work for me. It says already defined, but I can't find it ...<br />
:igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th March 2003, 14:33</div></div><div class="posttext">The Modern UI defines .onGUIInit, you have to define your own custom funtion and add it, have a look at the example above :)<br />
<br />
There define should be inserted before the MUI_LANGUAGE macro's. You can put the funtion anywhere in your script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mosestycoon</div><div class="date">24th March 2003, 15:10</div></div><div class="posttext">Good god -<br />
<br />
it works, buhuuuuu!:cry: <br />
<br />
Felt like a 30 year old child:<br />
Dad, I want this matchbox car!<br />
<br />
Thx guys<br />
Chris</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>