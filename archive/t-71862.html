<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Section executes even though its not checked, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Section executes even though its not checked NSIS Discussion" />
	
	<title> Section executes even though its not checked [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Section executes even though its not checked</div>
<hr />
<div class="pda"><a href="t-71862.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=71862">Section executes even though its not checked</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MailmanHS</div><div class="date">14th January 2002, 03:01</div></div><div class="posttext">My install prog has 3 sections, one required for the program, and two for creating shortcuts.  the desktop shortcuts section seems to execute even if its unchecked, and executes twice if checked.  I'm not using any InstType groups.  I just want the three options.  Any ideas why its doing this?  I'm using NSIS 1.94.<br />
<br />
Section &quot;HiT-SQUAD Alpha 0.50 (required)&quot;<br />
  ;Install Files<br />
  SetOutPath $INSTDIR<br />
  SetCompress Auto<br />
  SetOverwrite on<br />
  File /r testbuild\*.*<br />
SectionEnd<br />
<br />
SectionDivider &quot; shortcuts &quot;<br />
<br />
Section &quot;Desktop Shortcut&quot;<br />
  CreateShortCut &quot;$DESKTOP\HiT-SQUAD.lnk&quot; &quot;$INSTDIR\Bin\SeriousSam.exe&quot; &quot;+game hit-squad&quot; &quot;$INSTDIR\mods\hit-squad\hs.ico&quot; 0<br />
SectionEnd<br />
<br />
Section &quot;Start Menu Shortcut&quot;<br />
  CreateDirectory &quot;$SMPROGRAMS\HiT-SQUAD&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\HiT-SQUAD\HiT-SQUAD.lnk&quot;   &quot;$INSTDIR\Bin\SeriousSam.exe&quot; &quot;+game hit-squad&quot; &quot;$INSTDIR\mods\hit-squad\hs.ico&quot; 0<br />
  CreateShortCut &quot;$SMPROGRAMS\HiT-SQUAD\Start Dedicated HS Server.lnk&quot;   &quot;$INSTDIR\Bin\DedicatedServer.exe&quot; &quot;DefaultHS +game hit-squad&quot; &quot;$INSTDIR\mods\hit-squad\hs.ico&quot; 0<br />
;  CreateShortCut &quot;$SMPROGRAMS\HiT-SQUAD\Uninstall.lnk&quot;   &quot;$INSTDIR\Mods\hit-squad\Uninst.exe&quot;<br />
SectionEnd<br />
<br />
edit: also, when i compile the script, it says I have 4 sections (1 required).  That should be 3 sections (1 required).<br />
<br />
edit: hrmm, it seems that if I comment out SectionDivider &quot; shortcuts &quot; that fixes it.  I'd rather not have to comment out the divider.  Any ideas why this command would screw things up?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MailmanHS</div><div class="date">14th January 2002, 21:57</div></div><div class="posttext">anyone?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">F. Heidenreich</div><div class="date">14th January 2002, 22:20</div></div><div class="posttext">I've reproduced this behaviour with this small script:Name &quot;Test&quot;<br />
OutFile &quot;Test-Setup.exe&quot;<br />
<br />
Section<br />
 MessageBox MB_OK &quot;Section 1&quot;<br />
SectionEnd<br />
<br />
SectionDivider &quot; divider &quot;<br />
<br />
Section<br />
 MessageBox MB_OK &quot;Section 2&quot;<br />
SectionEnd<br />
<br />
and I think this is a bug in NSIS.<br />
<br />
~ Florian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">F. Heidenreich</div><div class="date">15th January 2002, 07:25</div></div><div class="posttext">A better sample would beName &quot;Test&quot;<br />
OutFile &quot;Test-Setup.exe&quot;<br />
<br />
ComponentText &quot; &quot;<br />
<br />
Section &quot;Section 1&quot;<br />
 MessageBox MB_OK &quot;Section 1&quot; <br />
SectionEnd <br />
<br />
SectionDivider &quot; divider &quot;<br />
<br />
Section &quot;Section 2&quot;<br />
 MessageBox MB_OK &quot;Section 2&quot; <br />
SectionEnd<br />
<br />
Section 2 will be executed even if it's unchecked an if it's checked it will be executed twice. Leaving the divider, all worked fine.<br />
<br />
~ Florian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">15th January 2002, 19:47</div></div><div class="posttext">I changed the following if statement in script.cpp line 729:<br />
<br />
  if (secname[0]=='-')<br />
  {<br />
    if (!n)<br />
    {<br />
      ERROR_MSG(&quot;Error: SectionDivider cannot be first section\n&quot;);<br />
      return PS_ERROR;<br />
    }<br />
    build_cursection=NULL;<br />
	entry ent={EW_RET,};<br />
    cur_entries-&gt;add(&amp;ent,sizeof(entry));<br />
    build_header.common.num_entries++;<br />
  }<br />
<br />
Now all seems well. :)<br />
<br />
Robert</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">15th January 2002, 19:53</div></div><div class="posttext">Sorry, that is build.cpp not script.cpp :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MailmanHS</div><div class="date">17th January 2002, 16:31</div></div><div class="posttext">Thanks rainwater!  That worked great.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">17th January 2002, 17:38</div></div><div class="posttext">Now, if Justin could only update the release soon before people go crazy trying to figure out why the installer is not working. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">22nd January 2002, 21:43</div></div><div class="posttext">*bump*<br />
<br />
Just wanted to bump this topic to make sure it doesnt get lost.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">0mar</div><div class="date">24th January 2002, 17:16</div></div><div class="posttext">Thank goodness for these forums! :)<br />
<br />
(Not to mention the many thanks to Justin and contributors like Michael, for NSIS)<br />
<br />
I would doubtlessly have spent many (frustrating) hours wondering why my installer was messed up if not for this info.<br />
<br />
I have developed a LiteStep installer (http://ohussain.cjb.net/) using NSIS 1.67 and I would really like to upgrade to 1.94 or any newer versions that come out.<br />
<br />
I'm wondering - as long as I don't use dividers in my installer will I be fine...? That's what the posts above seem to indicate, but I'd just like to be certain before making the jump from 1.67 to 1.94. ;)<br />
<br />
Any other bugs in 1.94 I should watch out for? ;)<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">24th January 2002, 17:31</div></div><div class="posttext">Yes, its just a problem with using section dividers.  There aren't any other major bugs that I known about.  If you really want to use section dividers, I can send you a fixed version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">0mar</div><div class="date">24th January 2002, 18:32</div></div><div class="posttext">Thank you rainwater!<br />
<br />
I'm glad to hear that (as far as you know) there aren't any other major concerns with 1.94.<br />
<br />
And I gladly accept your generous offer - I would love to have your version with the build.cpp fix. :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>