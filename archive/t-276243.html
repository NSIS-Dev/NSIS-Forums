<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to detect an application is still running, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to detect an application is still running NSIS Discussion" />
	
	<title> How to detect an application is still running [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to detect an application is still running</div>
<hr />
<div class="pda"><a href="t-276243.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=276243">How to detect an application is still running</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">EJUNLIU</div><div class="date">21st August 2007, 14:26</div></div><div class="posttext">I like to know how to detect if there an application is still running. If yes, the installer can either exit or stop that application. <br />
I saw an example which stops IEFrame.dll and I try to use it to stop my own application. However, it seems not working for my application (a simple executable).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st August 2007, 14:32</div></div><div class="posttext">First you need a way to detect if your application is running, so you normally check for a mutex and/or window class/title, or you can use one of the process enum plugins. If you find a window, you can send it WM_CLOSE/WM_DESTROY or something like that. If your app doesnt have a window you pretty much have to terminate the application with one of the process plugins.<br />
<br />
http://nsis.sourceforge.net/Check_whether_your_application_is_running_during_uninstallation<br />
http://nsis.sourceforge.net/KillProcDLL_plug-in<br />
http://nsis.sourceforge.net/FindProcDLL_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EJUNLIU</div><div class="date">21st August 2007, 14:54</div></div><div class="posttext">Thank you!<br />
<br />
My code is the almost like:<br />
<br />
!define WNDCLASS &quot;WindowClassOfYourApplication&quot;<br />
!define WNDTITLE &quot;WindowTitleOfYourApplication&quot;<br />
 <br />
Function .onInit<br />
  FindWindow $0 &quot;${WNDCLASS}&quot; &quot;${WNDTITLE}&quot;<br />
  StrCmp $0 0 continueInstall<br />
    MessageBox MB_ICONSTOP|MB_OK &quot;The application is running. Close it and try again.&quot;<br />
    Abort<br />
  continueInstall:<br />
FunctionEnd<br />
<br />
However, I have no problem to close something like Notepad.exe. But my own C++ application cannot be even detected (it is visible on Task Manager and it is a simple window application, just a dialog app). Do I miss something? Something like type of application and/or ownership? I thought it is a simple problem but I can't figure out still.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st August 2007, 15:14</div></div><div class="posttext">Check classname with http://www.catch22.net/software/winspy.asp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EJUNLIU</div><div class="date">21st August 2007, 16:15</div></div><div class="posttext">Thanks!<br />
<br />
I think the problem is actually related to the class name<br />
in the command:<br />
FindWindow<br />
user_var(hwnd output) windowclass [windowtitle] [windowparent] [childafter]<br />
<br />
As my application does not have a proper &quot;windowclass&quot;,<br />
so I just use &quot;&quot;, and then provide correct &quot;windowtitle&quot;, it is working fine. If possible, someone may want to add a note to the help file so it will be easy for other people to use this function in future.<br />
<br />
Is anyone can tell me how to assign a windowclass to my application? It seems all my applications created by using Visual Studio 6/NET/2005 do not have any windowclass name.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st August 2007, 16:45</div></div><div class="posttext">Every window has a class, are you using MFC/ATL or something like that or are you calling CreateWindow/DialogBox directly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EJUNLIU</div><div class="date">21st August 2007, 17:28</div></div><div class="posttext">I am using quite simpel Visual studio to create a dialog application.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EJUNLIU</div><div class="date">21st August 2007, 18:25</div></div><div class="posttext">In fact, I notice that all dialog based applications I created are having the same windowclass as &quot;#32770 (Dialog)&quot;. It seems reasonable... but it is hard to know which application is really running. Using windowTitle is a good way if window class cannot help to differentiate 2 applications.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st August 2007, 19:34</div></div><div class="posttext">FCT plug-in can solve #32770 problem http://nsis.sourceforge.net/FCT_plug-in</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>