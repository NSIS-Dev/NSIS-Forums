<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How do I copy directories?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How do I copy directories? NSIS Discussion" />
	
	<title> How do I copy directories? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How do I copy directories?</div>
<hr />
<div class="pda"><a href="t-264743.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264743">How do I copy directories?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">beaglelander</div><div class="date">31st January 2007, 11:31</div></div><div class="posttext">Am I just being daft, or is there no easy way of copying directories and files, e.g. to backup a directory structure with all files?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st January 2007, 12:05</div></div><div class="posttext">File /r<br />
<br />
See NSIS documentation</div></div><hr />


<div class="post"><div class="posttop"><div class="username">beaglelander</div><div class="date">31st January 2007, 12:09</div></div><div class="posttext">lol ah yes!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">beaglelander</div><div class="date">31st January 2007, 13:50</div></div><div class="posttext">Maybe I'm still being stupid, but doesn't the File command define files/directories to be included in an installation?  I don't want to include the files, I simply want to copy the directories that already exist on the computer to another directory (for backup purposes).<br />
<br />
Something like this:<br />
<br />
  ; Backup existing files<br />
  IfFileExists &quot;C:\testout\*.*&quot; +1 SkipCopy<br />
    SetOutPath &quot;$temp\testout\&quot;<br />
    File /r &quot;C\testout\&quot;<br />
  SkipCopy:<br />
  <br />
  ;Install the new files<br />
  SetOutPath &quot;C:\testout\&quot;<br />
  File &quot;C:\test\thedoc.txt&quot;<br />
  File &quot;C:\test\thedoc2.txt&quot;<br />
  <br />
  ; Resotre any backed up files<br />
  IfFileExists &quot;C:\testout\*.*&quot; +1 SkipRestore<br />
    SetOutPath &quot;C\testout\&quot;<br />
    File /r &quot;$temp\testout\&quot;<br />
  SkipRestore:<br />
<br />
Now, this might look pointless, but I'm covering the scenario where our users can customize files in the testout directory, and when we release updates I don't want them to lose their customized files, therefore I backup, then restore their files, but they will still recieve any new files we add.<br />
<br />
This enables us to use the same installer for both new installs and updates.  Make sense?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st January 2007, 16:29</div></div><div class="posttext">This enables us to use the same installer for both new installs and updates. Make sense?Makes perfect sense, however you can't use on target, it's a compile time command. Anyway, regarding to the File command, try to use the File /r by this way &quot;C:\testout&quot; and by this way &quot;C:\testout\*&quot; to see the difference, also you may use it in combination with /x switch to exclude specific files/subdirs. e.g.<br />
<br />
File /r /x &quot;this_fie.ext&quot; &quot;C:\testout\*&quot;<br />
<br />
All these actions performed on system where compiling script, you can't use these to move/copy files on target system, instead you may use CopyFiles and Rename.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">beaglelander</div><div class="date">31st January 2007, 16:58</div></div><div class="posttext">Yes I'm wanting to do the transfer on the target system, so the File command isn't any use.  How do you use CopyFiles to copy a directory?  I've tried all sorts of combinations:<br />
<br />
    CopyFiles &quot;C\testout&quot; &quot;$temp\testout&quot;<br />
    CopyFiles &quot;C\testout\&quot; &quot;$temp\testout&quot;<br />
    CopyFiles &quot;C\testout\*.*&quot; &quot;$temp\testout&quot;    <br />
    CopyFiles &quot;C\testout&quot; &quot;$temp\testout\&quot;<br />
    CopyFiles &quot;C\testout\&quot; &quot;$temp\testout\&quot;<br />
    CopyFiles &quot;C\testout\*.*&quot; &quot;$temp\testout\&quot;<br />
<br />
but nothing seems to work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st January 2007, 17:26</div></div><div class="posttext">This works fine for me,<br />
OutFile 'test.exe'<br />
<br />
Section &quot;boo&quot;<br />
CreateDirectory &quot;C:\TEMP\test&quot;<br />
CopyFiles &quot;${NSISDIR}\Plugins\*.*&quot; &quot;C:\TEMP\test&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">beaglelander</div><div class="date">31st January 2007, 17:29</div></div><div class="posttext">Ahhh it'll be because I haven't created the $temp\testout\ directory!!!  &lt;slap on head&gt;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>