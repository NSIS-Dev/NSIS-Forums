<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" &quot;Other GenPat error&quot;, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  &quot;Other GenPat error&quot; NSIS Discussion" />
	
	<title> &quot;Other GenPat error&quot; [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  &quot;Other GenPat error&quot;</div>
<hr />
<div class="pda"><a href="t-287360.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287360">&quot;Other GenPat error&quot;</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">NinjaHippie</div><div class="date">22nd February 2008, 05:11</div></div><div class="posttext">There is a bug in GenPat involving repetition of the source folder name.<br />
<br />
nsisPatchGen ver1 ver2<br />
<br />
This code, run on the attached data folders produces the following error message:<br />
<br />
File Modified:            folder_diff.txt<br />
Creating patch file: patchFiles\folder_diff.txt.pat<br />
&quot;..\nsisPatchGen&quot; :  &quot;GenPat failed to start&quot;<br />
<br />
The (attached) directories ver1 and ver2 each contain a subfolder called &quot;folder_ver1&quot;. folder_ver1 contains a file called &quot;diff.txt&quot; that contains different data for each version and therefore requires a generated patch file.<br />
<br />
The problem is that the the name &quot;folder_ver1&quot; contains the name of the source root directory (&quot;ver1&quot;), and when GenPat encounters the file, it strips out the root name from the path (hence the log message &quot;Creating patch file: patchFiles\folder_diff.txt.pat&quot; should read &quot;Creating patch file: patchFiles\folder_ver1\diff.txt.pat&quot;).<br />
<br />
This only occurs if the root name is repeated at the end of a sub-folder name (so &quot;ver1_folder&quot; would work fine).<br />
<br />
I'll try and have a look at the GenPat source on Monday, but I thought I'd post up here first and see if anyone has solved the problem already.<br />
<br />
Is this the correct place to write bug reports?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NinjaHippie</div><div class="date">22nd February 2008, 07:09</div></div><div class="posttext">I've been having some trouble getting nsisPatchGen to build. More specifically, I can't seem to get QT to link in correctly.<br />
<br />
I found a download for QT4.1.4 (http://rebecca-aiml.sourceforge.net/download.htm), and I think I've added the appropriate include directories to the project, but I'm still getting missing declaration errors:<br />
<br />
error C2244: 'QMultiMap&lt;Key,T&gt;::insert' : unable to match function definition to an existing declaration</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd February 2008, 10:11</div></div><div class="posttext">Bug reports usually go in the bug tracker. But it's OK to post in the forums to gather the information first.<br />
<br />
I'm not quite sure I understand if the bug is in GenPat or nsisPatchGen. As far as I know GenPat doesn't handle paths to that degree, so it must be nsisPatchGen. You're also looking at QT, so that means you've reached this conclusion as well.<br />
<br />
I can say at least &quot;GenPat failed to start&quot; is caused by its failure to find GenPat.exe. It seems to ignore %VPATCH% mentioned in its readme and just call VPatch.exe. I saw no evidence that it looks for %VPATCH% anywhere in its source code. It just looks for it in %PATH% like every other executed program.<br />
<br />
As for &quot;Other GenPat error&quot;, that can be resolved by appending backslashes to ver1 and ver2 on the command line. It won't solve the real bug, but it's a viable workaround.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NinjaHippie</div><div class="date">22nd February 2008, 13:35</div></div><div class="posttext">Hi kichik,<br />
<br />
Thanks for the reply.<br />
<br />
Yea, on closer inspection it seems likely that the bug exists in nsisPatchGen.<br />
<br />
When I read you post for the first time I couldn't quite figure out why you were referring to a &quot;GenPat failed to start&quot; error that I've never heard of. In my hasty attempt to produce a simplified example of my problem I must have caused another. I cut and paste the &quot;failed to start&quot; error message thinking it was the &quot;Other GenPatch error&quot; I had been experiencing.<br />
<br />
Thanks for the backslashes tip, I don't know why I didn't think to try that in the first place. I'll give it a go first thing on Monday. If I have time (and if I can get nsisPatchGen to finally compile) I'll try and put a proper fix in as well.<br />
<br />
Thanks again</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viperpiper</div><div class="date">10th March 2008, 00:58</div></div><div class="posttext">Sorry - was away working somewhere with really bad internet access. I'll have a look at the bug soon.<br />
<br />
As for the build problem - what compiler are you using?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NinjaHippie</div><div class="date">10th March 2008, 02:17</div></div><div class="posttext">Hey viper,<br />
<br />
I'm using VC2005 Express Edition. The backslashes workaround is working though, and I haven't had a chance to try compiling again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">balena</div><div class="date">11th September 2008, 20:40</div></div><div class="posttext">I found the error. You are checking for errors before to wait the execution completion on PatchGenerator.cpp. Please check it out.<br />
<br />
I am attaching a diff file I made to make things to work.<br />
<br />
When you correct this BUG, please don't forget to update the nsisPatchGen project at SourceForge.<br />
<br />
Best Regards,<br />
<br />
Guilherme Balena Versiani<br />
ComunIP S/A</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>