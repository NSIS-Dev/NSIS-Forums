<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Copying some files from the installation directory to SysWow64 or system32, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Copying some files from the installation directory to SysWow64 or system32 NSIS Discussion" />
	
	<title> Copying some files from the installation directory to SysWow64 or system32 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Copying some files from the installation directory to SysWow64 or system32</div>
<hr />
<div class="pda"><a href="t-341810.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=341810">Copying some files from the installation directory to SysWow64 or system32</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">noemig</div><div class="date">6th February 2012, 20:43</div></div><div class="posttext">Hello,<br />
<br />
I am trying to copy some files from the installation directory to SysWow64 or system32, depending is the OS is 32 or 64.<br />
<br />
The code is written as :<br />
<br />
Section &quot;DLL&quot;<br />
<br />
${If} ${RunningX64}<br />
<br />
SetOutPath &quot;$WINDIR\SysWOW64&quot;<br />
DetailPrint &quot;Installer running on 64-bit host&quot;<br />
File /r &quot;DFORMD.DLL&quot;<br />
File /r &quot;DFORRT.DLL&quot;<br />
File /r &quot;Expsrv.dll&quot;<br />
File /r JETCOMP.exe<br />
<br />
${Else}<br />
<br />
SetOutPath &quot;$WINDIR\System32&quot;<br />
File /r &quot;DFORMD.DLL&quot;<br />
File /r &quot;DFORRT.DLL&quot;<br />
File /r &quot;Expsrv.dll&quot;<br />
File /r &quot;JETCOMP.exe&quot;<br />
<br />
${EndIf}<br />
<br />
<br />
SectionEnd<br />
<br />
The installer is copying the entire folder that contains those DLL from the installation directory to SYSWOW64 or System32.<br />
<br />
Can somebody give me a clue on how to solve this ?<br />
<br />
Thanks.<br />
<br />
noemig</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msroboto</div><div class="date">6th February 2012, 21:33</div></div><div class="posttext">Are you resetting the outputpath after doing this?  <br />
If not whatever files you lay down will go there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noemig</div><div class="date">6th February 2012, 22:36</div></div><div class="posttext">Yes, I am resetting the outhpath using the instruction SetOutPath . <br />
<br />
The issue that I am facing is is that instead of copying the dll from the installation directory to the indicated folder. The installer is copying the entire folder where the dll files are located to the  indicated folder ($WINDIR\SysWOW64 or $WINDIR\System32).<br />
<br />
Thanks for your reply.<br />
<br />
noemig</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">6th February 2012, 23:08</div></div><div class="posttext">Why do you use the /r switch?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noemig</div><div class="date">6th February 2012, 23:23</div></div><div class="posttext">The installer have to find the files between the folders directories.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th February 2012, 00:34</div></div><div class="posttext">Installing files in %windir% is evil, don't do it please!<br />
<br />
If you always want to install files in the 32bit system32 folder you can just pretend that x64 does not exist and just install in $sysdir and the windows filesystem redirection will take care of the rest...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noemig</div><div class="date">7th February 2012, 01:58</div></div><div class="posttext">Thank you, I will try to install them on the $sysdir. Can you give me a hint why the installer is copying the entire folder instead of the corresponding files?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th February 2012, 08:23</div></div><div class="posttext">Thank you, I will try to install them on the $sysdir. Can you give me a hint why the installer is copying the entire folder instead of the corresponding files?<br />
This is because you're using the /r switch. You can read about it here: http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.5</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noemig</div><div class="date">7th February 2012, 17:01</div></div><div class="posttext">Now I understand.  Thank you for your reply</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>