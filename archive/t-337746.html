<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" problem with uninstall.exe, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  problem with uninstall.exe NSIS Discussion" />
	
	<title> problem with uninstall.exe [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  problem with uninstall.exe</div>
<hr />
<div class="pda"><a href="t-337746.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=337746">problem with uninstall.exe</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">hanenjom</div><div class="date">18th November 2011, 15:47</div></div><div class="posttext">Hi , plesase can you help me, <br />
<br />
i have a problem with uninstaller.exe :(<br />
<br />
On unistaller, i use a file hwo contain a list of folder and directories to delete, the path of this file is $INSTDIR\unistall.txt.<br />
<br />
when I install the some kit in two diffrent path kit1 on c:\path1; and the file c:\path1\unistall.txt <br />
and kit2 on c:\path2, and the file c:\path2\unistall.txt <br />
<br />
when I wany uninstall kit1, i have on unsitalla.exe the path of the second kit, c:\path2\unistall.txt.<br />
<br />
as if it is about to overwrite the new value of $INSTDIR every time I install a kit<br />
<br />
Please help me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">18th November 2011, 16:02</div></div><div class="posttext">will you please make sure that you're posting a new thread in the correct part of the forum - is now the second time i've had to move a new thread made by you from the Winamp areas into the NSIS forum.<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hanenjom</div><div class="date">18th November 2011, 16:07</div></div><div class="posttext">@ DrO ; thx :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">18th November 2011, 19:54</div></div><div class="posttext">And please check for typos. I can't understand what your issue is.<br />
<br />
hwo - wany - unsitalla.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hanenjom</div><div class="date">21st November 2011, 08:45</div></div><div class="posttext">to uninstall the kit, I use a file &quot;unistall.txt&quot; which contains a list of files and directories to be deleted.<br />
<br />
 Section-post SEC0001<br />
    WriteRegStr HKLM &quot;$ {REGKEYS}&quot; Path $ INSTDIR<br />
 SetOutPath $ INSTDIR<br />
 WriteUninstaller $ INSTDIR \ uninstall.exe<br />
 WriteRegStr HKLM &quot;SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Uninstall \ $ (^ Name)&quot; DisplayName &quot;$ (^ Name)&quot;<br />
 WriteRegStr HKLM &quot;SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Uninstall \ $ (^ Name)&quot; DisplayIcon $ INSTDIR \ uninstall.exe<br />
 WriteRegStr HKLM &quot;SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Uninstall \ $ (^ Name)&quot; UninstallString $ INSTDIR \ uninstall.exe<br />
 WriteRegDWORD HKLM &quot;SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Uninstall \ $ (^ Name)&quot; 1 NoModify<br />
 WriteRegDWORD HKLM &quot;SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Uninstall \ $ (^ Name)&quot; NoRepair 1SectionEnd<br />
<br />
 Section &quot;Uninstall&quot;<br />
     SectionIn RO<br />
     StrCpy $ line &quot;&quot; FileOpen $ uninstall &quot;$ INSTDIR \ uninstall.txt&quot; r<br />
     read:<br />
         FileRead $ uninstall $ line<br />
         StrCmp $ line &quot;&quot; done<br />
         StrFilter $ {} $ line &quot;&quot; &quot;&quot; &quot;$ \ r $ \ n&quot; $ line<br />
         Rmdir / r &quot;$ line&quot;<br />
         Delete $ line<br />
      Goto read<br />
      done:<br />
        FileClose $ uninstall<br />
        Delete &quot;$ INSTDIR \ uninstall.txt&quot;<br />
      DetailPrint &quot;****&quot;<br />
 SectionEnd<br />
<br />
 in the normal case the uninstall worked great, but when I install the kit twice in two different ways, for exmple the first installation in c: \ path1, we will have the file c: \ path1 \ unistall. txt<br />
 and the second installation in c: \ path2 and the file c: \ path2 \ unistall.txt<br />
<br />
  when I run the uninstall kit1 I unsitall.exe on the path of the second kit, c: \ path2 \ unistall.txt.<br />
<br />
 it overwrites the first pah and he supports the new path of the second kit, the i will Have a faulty process to uninstall<br />
<br />
Please help me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">21st November 2011, 10:01</div></div><div class="posttext">Because you are storing the uninstall information in exactly the same place for both installations, of course you cannot have two uninstallation items in your Add/Remove Programs window.<br />
<br />
What you need to do is store the uninstall information in separate locations for both installations.<br />
<br />
For example, in pseudo-code:<br />
If uninstall information already exists in registry<br />
andif installpath in registry is different from our $instdir<br />
then write uninstall information to a different name. For example:  &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)1&quot;<br />
<br />
However, if you do this you need to store the new registry name in your uninstaller, otherwise it won't know what registry entries to delete. You can do this with the ReadCustomerData function.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>