<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" new banner.dll bugs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  new banner.dll bugs NSIS Discussion" />
	
	<title> new banner.dll bugs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  new banner.dll bugs</div>
<hr />
<div class="pda"><a href="t-136605.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136605">new banner.dll bugs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 20:21</div></div><div class="posttext">after i downloaded the newest cvs with the updated banner plugin the first thing i noticed after compiling that the setup startes behind the makensisw.exe compiler window (after pressing the &quot;test installer&quot; button).<br />
the more problematical thing is that i am using the banner plugin in the .onUserAbort function and when i exit the installer it crashes. i took the old banner.dll into the plugins dir and it worked again with no problems<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 20:28</div></div><div class="posttext">Never unload UI plug-ins from .onUserAbort, use .onGUIEnd. I'll have a look at that installer coming behind things.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 20:33</div></div><div class="posttext">Thx<br />
<br />
i noticed that getting behind the compiler window with the banner example too.<br />
ok, i will put these unload things in onguiend, thats more logical cause i have to call that unload-with-banner-function everytime i close it anyway<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 20:41</div></div><div class="posttext">yea, i put the function in .onguiend and that helped, thx. but the window does always run behind the compiler window and behind the 3rd party nsis editor (nisedit) i use too after i clicked the run button</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 21:37</div></div><div class="posttext">...and not only behind the compiler window, even behind the explorer window, maybe it has something to do with the enabled bzip2 compression and the appearing banner that shows a temp path to something that don't fit in this label instead of the extracting progress<br />
<br />
http://www.borgcore.de/outerspace/nsis/bannerdll.png</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 22:02</div></div><div class="posttext">Are you sure that's the bzip2 window? I can't reproduce this... Can you please attach an example script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 22:05</div></div><div class="posttext">ok, i will do that, just takes some time due i first must upgrade my script to the new modern ui version...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 22:13</div></div><div class="posttext">thats my fault, i have a banner call in oninst. now the install window cames up in front of the compiler. but with the old version that was working somehow but the banner example is affected by that change too (loaded behind window that is currently in front).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th May 2003, 22:20</div></div><div class="posttext">onInst? Do you mean .onInit?<br />
<br />
Which problem are you talking about? Does the weird cropped path has anything to do with .onInit?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">25th May 2003, 22:23</div></div><div class="posttext">arg, nevermind, solved the problem, just mixed something up<br />
thx for the help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dsvedchenko</div><div class="date">29th May 2003, 13:42</div></div><div class="posttext">My MUI installer don't work with new banner.dll too.<br />
It is very large so i reproduce bug in InstallOptions.nsi just add Banner invokation<br />
I've submitted bug, but one day gone away and i haven't heard any reaction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 13:43</div></div><div class="posttext">That's because I have nothing to say yet. The new version is not ready yet.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dsvedchenko</div><div class="date">29th May 2003, 13:48</div></div><div class="posttext">ok. sorry for trouble. but can you remove buggy version from CVS ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 13:52</div></div><div class="posttext">Well, I can bring the old version back, I guess the new one sucks more, heh :)<br />
<br />
Done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">16th June 2004, 16:35</div></div><div class="posttext">Hello folks,<br />
<br />
I am experience a hanging issue when using the banner plugin. This occurs whether I destroy the banner each time, or only destroy it once.<br />
<br />
I am running the banner plugin in a loop (called from .MyInit [override directly after .OnInit]) for a random number of times checking for running processes. Everything compiles fine and functions properly.....if I don't do the following.<br />
<br />
Install the app, while the banner is up I switch tasks to Explorer or something. The banner will then hang and I have to end the install process.<br />
<br />
Note: I am not 100% sure the banner is causing this. However if I remove the banner completely, and perform the same steps the installation continues properly in the background.<br />
<br />
My call to the banner plugin:<br />
<br />
<br />
Banner::show /NOUNLOAD /set 76 &quot;$(DESC_CHECK_PROCESS)...&quot; &quot;$R0&quot;<br />
<br />
<br />
Anyone else experiencing this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">16th June 2004, 17:08</div></div><div class="posttext">To reproduce try the following. I even tried to remove the flashing but the banner isn't treated as the same dialog when using nounload. It looks like for each banner:show call you need a new banner:destroy call. That kind of sucks. It would be nice if you could update the banner without having to do the matching calls over and over. <br />
<br />
<br />
<br />
# Look at Readme.txt for usage alongside with the Modern UI<br />
<br />
Name &quot;Banner.dll test&quot;<br />
<br />
OutFile &quot;Banner Test.exe&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Function .onInit<br />
	<br />
	again:<br />
                Banner::show /NOUNLOAD &quot;Calculating important stuff...&quot;<br />
		IntOp $0 $0 + 1<br />
		Sleep 100<br />
	Banner::destroy<br />
		StrCmp $0 20 0 again<br />
FunctionEnd<br />
<br />
Section<br />
	DetailPrint &quot;Using previous calculations to quickly calculate 1*20...&quot;<br />
	Sleep 1000<br />
	DetailPrint &quot;Eureka! It's $0!!!&quot;<br />
	DetailPrint &quot;&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">16th June 2004, 22:44</div></div><div class="posttext">It looks like for each banner:show call you need a new banner:destroy call. <br />
<br />
Yes.<br />
Because for each dialog appear, Windows send a new HWND. That's why you need to destroy the dialog when you don't need it.<br />
Otherwise you'll sucking unnecesary resources from the user.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">17th June 2004, 12:52</div></div><div class="posttext">Well that sucks. I wanted to get rid of the flashing by using the same window. It's too bad banner::Show didn't return a handle so you could set the text multiple times in a loop and when finished destroy it once.  That would be a fantastic feature upgrade. BTW, if you fail to call banner::destroy before you leave the function or section banner::show was called in your installer will gpf at runtime. It would be nice if that was trapped at compile time,; though, it is a plugin and not a base item in the ui.<br />
<br />
I posted the feature request as #974688.<br />
I reported the bug as #974691.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">8th June 2007, 10:55</div></div><div class="posttext">I have the following in my installer:<br />
<br />
Banner::show /NOUNLOAD /set 76 &quot;Installing and running service&quot; &quot;&quot;<br />
<br />
ExecWait 'net stop MyService'<br />
ExecWait '&quot;$INSTDIR\${ServiceExeName}&quot; /uninstall'<br />
ExecWait '&quot;$INSTDIR\${ServiceExeName}&quot; /install'<br />
ExecWait 'net start MyService'<br />
<br />
Service (which is my own service, ServiceExeName) is a console application able to run as a service (/uninstall and /install show console with some messages regarding to installation process). Service is installed and started OK, but the installer hangs up with banner as well. It does not respond and even does not repaint itself.<br />
<br />
Commenting banner::show works. What should I do to keep banner and not have my installer hung up?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th June 2007, 12:36</div></div><div class="posttext">It seems like you're not the only one with this problem.<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=270838&amp;highlight=banner<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>