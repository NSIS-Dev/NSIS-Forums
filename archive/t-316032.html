<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" What is it with those Splash plugins?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  What is it with those Splash plugins? NSIS Discussion" />
	
	<title> What is it with those Splash plugins? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  What is it with those Splash plugins?</div>
<hr />
<div class="pda"><a href="t-316032.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316032">What is it with those Splash plugins?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">5th January 2010, 23:39</div></div><div class="posttext">can't say i'm fully happen with any of them. i've been using AdvSplash for many years, but at some point (new NSIS or new OS), it will not display small bitmaps properly. in my example the used bitmap has only a height of 32 pixels, but the plugin will display it with a height of 38 pixels, the difference will be black (see attachment).<br />
<br />
(i don't know when the plugin started to behave like this, but on a sidenote i also wanted to mention another issue with bitmaps i came across. earlier versions of nsis had no problem using rle-compressed bitmaps, new versions will display some gibberish instead.)<br />
<br />
so, i've tried NewAdvSplash. that will display small bitmaps without a problem. however, when i use it with a splash-sound and the /BANNER option, it will always crash my installer once the splash stops showing. without the banner it works, but shows an ugly window caption for the fraction of a second. without sound it's also working perfectly. here's the code i'm using<br />
<br />
newadvsplash::play /NOUNLOAD &quot;$PLUGINSDIR\spltmp.wav&quot;<br />
newadvsplash::show /NOUNLOAD ##SPLASHTIME## 0 100 0xff00ff /BANNER &quot;$PLUGINSDIR\spltmp.bmp&quot;<br />
newadvsplash::wait ;with or without this line - crashes!<br />
newadvsplash::stop<br />
<br />
<br />
unfortunately, NewAdvSplash isn't complete documented, so it could be the fault lies in this code. the third line is completely undocumented, but it was mentioned in one of the examples. leaving that line, will still result in a crash. any help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">meaningoflights</div><div class="date">6th January 2010, 03:48</div></div><div class="posttext">I use advsplash too, does this code cause a crash on any of your PCs?<br />
<br />
<br />
!include WinVer.nsh<br />
!include x64.nsh<br />
<br />
XPStyle on<br />
<br />
;funky little splash fade in effect!<br />
Function .onInit<br />
# the plugins dir is automatically deleted when the installer exits<br />
InitPluginsDir<br />
File /oname=$PLUGINSDIR\splash.bmp &quot;c:\myprog\logo.bmp&quot;<br />
<br />
#optional<br />
#File /oname=$PLUGINSDIR\splash.wav &quot;C:\myprog\sound.wav&quot;<br />
<br />
advsplash::show 4000 600 400 -1 $PLUGINSDIR\splash<br />
<br />
Pop $0 ; $0 has '1' if the user closed the splash screen early,<br />
; '0' if everything closed normal, and '-1' if some error occured.<br />
Delete $PLUGINSDIR\splash.bmp<br />
FunctionEnd<br />
<br />
<br />
Or you may like to check other options like this:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=97048</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">6th January 2010, 07:03</div></div><div class="posttext">I don't see 'wait' entry point in newadvsplash.dll. Very strange that you could compile this. Followinng works for me:<br />
Name &quot;NewAdvSplash.dll test&quot;<br />
OutFile &quot;newadvsplash.exe&quot;<br />
!define IMG_NAME1 aist.gif<br />
!include WinMessages.nsh<br />
<br />
Function .onInit<br />
<br />
;  the plugins dir is automatically deleted when the installer exits<br />
    InitPluginsDir<br />
    SetOutPath &quot;$PLUGINSDIR&quot;<br />
<br />
    newadvsplash::play /NOUNLOAD &quot;$EXEDIR\jc.mp3&quot;<br />
    File ${IMG_NAME1}<br />
    newadvsplash::show /NOUNLOAD 3000 1000 500 -2 /BANNER &quot;$PLUGINSDIR\${IMG_NAME1}&quot;<br />
    Sleep 3000 ; not changes 4.5 sec of 'show time'. add your code instead of sleep<br />
<br />
FunctionEnd<br />
<br />
; MUI requires custom function definition<br />
Function .onGUIInit<br />
<br />
    newadvsplash::stop /wait ; waits or exits immediately if finished, remove /wait to terminate now<br />
    Delete &quot;$PLUGINSDIR\${IMG_NAME1}&quot;<br />
    SetOutPath &quot;$EXEDIR&quot;<br />
<br />
;  plug-in requires this to be called in .onGUIInit<br />
;  if you use 'show' in the .onInit function with /BANNER key.<br />
    ShowWindow $HWNDPARENT ${SW_RESTORE}<br />
<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">6th January 2010, 12:52</div></div><div class="posttext">well, it's no longer crashing now, but only because i accidently left out the stop call. whenever i add it to my onGUIinit function, the installer crashes. also, i still get to see that window caption for a very short time (might be longer on slow cpus). according to process explorer, that caption it that of a program called consent.exe.<br />
<br />
unlike my previous claim, this has nothing to do with the /BANNER option, but only happens when i use the plugin with a splash sound.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">10th January 2010, 00:03</div></div><div class="posttext">so, is it wise to leave the stop function? or what can i do to get it work without crashing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">10th January 2010, 10:38</div></div><div class="posttext">Flashing window is a sound player, even if started 'hidden' it appears for a short time.<br />
I not found any problems with crashing in correct script (see above). Please publish sample script which causes crash. newadvsplash manual http://nsis.sourceforge.net/NewAdvSplash_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">15th January 2010, 17:36</div></div><div class="posttext">try this</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">16th January 2010, 11:27</div></div><div class="posttext">Yes, s. happens with wav (not mp3!) if sound is longer, them show time. This case MCI window instead of correct termination just crashes... OK, for wav sound attached dll should be fine, and no flashing MCI windows any more (but no mp3 as well). Please let me know if any problem occure.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">17th January 2010, 00:44</div></div><div class="posttext">Originally posted by Takhir <br />
Yes, s. happens with wav (not mp3!) if sound is longer, them show time. <br />
<br />
are only certain bitrates supported? i tried a mono mp3 at 64 kbit and it behaves just like it did with a wave. anyway, with no mp3-support i can stick to the old AdvSplash and use compressed waves. thanks for your help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">21st March 2010, 18:26</div></div><div class="posttext">when you click the splash screen (to abort it), it will still wait for the remaining time set in the splash plugin</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>