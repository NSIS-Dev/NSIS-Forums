<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS Update updates every single file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS Update updates every single file NSIS Discussion" />
	
	<title> NSIS Update updates every single file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS Update updates every single file</div>
<hr />
<div class="pda"><a href="t-147605.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=147605">NSIS Update updates every single file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mikem4600</div><div class="date">30th August 2003, 14:30</div></div><div class="posttext">I had to format my hard drive due to a nasty crash, and I downloaded the latest nightly build for NSIS. But everytime I use the NSIS Update it tries to update every single file... I think it's because of the timestamps of the files or something.<br />
<br />
Any suggestions? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th August 2003, 14:46</div></div><div class="posttext">What do you mean by tries to update every single file? It should update every single file... What does the log show that bothers you?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">30th August 2003, 16:56</div></div><div class="posttext">I think mikem4600 is complaining about what happens if you use a CVS snapshot ZIP file to update your NSIS installation and then later on try to run 'NSIS Update'.<br />
<br />
Normally 'NSIS Update' will only download newer files, so a 'NSIS Update' run usually involves only a handful of files being downloaded, and this is not a time-consuming operation.<br />
<br />
However, this is not the case if you have used a CVS snapshot to update NSIS by unzipping the snapshot on top of your NSIS installation. The data in the CVS folders in the snapshot does not match the date/timestamps on the actual files, so 'NSIS Update' has to assume that everything has been locally modified, renames these files and then downloads &quot;clean&quot; copies. 'NSIS Update' will in effect download EVERY file again which can take a very long time (and your NSIS installation will double in size).<br />
<br />
Here are some examples from my system, after unzipping the 27 August (19:44 GMT) CVS snapshot:<br />
<br />
Partial DIR listing from the {NSISDIR} folder:<br />
<br />
makensis.exe     413,184 .a.. 15-08-03 12:44:06<br />
makensisw.exe     69,120 .a.. 23-08-03  0:44:06<br />
<br />
Extract from the 'Entries' file in the {NSISDIR\CVS} folder:<br />
<br />
/makensis.exe/1.221/Fri Aug 15 19:44:05 2003/-kb/<br />
/makensisw.exe/1.103/Sat Aug 23 07:44:06 2003/-kb/<br />
<br />
Since the two EXE files have timestamps which differ from those in the 'Entries' file, 'NSIS Update' will  download both files again.<br />
<br />
Suspect the problem is related to timezones - the CVS snapshot data is timezone specific, so anyone in a different timezone will see the problem I described</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th August 2003, 18:03</div></div><div class="posttext">But that shouldn't happen at all, and if it does then not more than one time. It shouldn't list all files. When extracting from the snapshot it should only list dsw and dsp files (because something is funky with the new line conversion).<br />
<br />
I think it's because the snapshot is ahead of the CVS server (because of SF known issues (http://forums.winamp.com/showthread.php?s=&amp;threadid=139427)) which will cause CVS to think that the local copy is newer. If this is the case it will no longer bother you by tomorrow or the day after it. I will still need to verify the message from CVS, but it seems the most likely.<br />
<br />
CVS seems to handle timezones, I don't think that's the problem.<br />
<br />
Actually, my test didn't show all files as updated even though I used the backup server. It must be only the .dsw and .dsp files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mikem4600</div><div class="date">30th August 2003, 18:23</div></div><div class="posttext">Originally posted by pengyou <br />
I think mikem4600 is complaining about what happens if you use a CVS snapshot ZIP file to update your NSIS installation and then later on try to run 'NSIS Update'.<br />
<br />
Normally 'NSIS Update' will only download newer files, so a 'NSIS Update' run usually involves only a handful of files being downloaded, and this is not a time-consuming operation. <br />
<br />
<br />
Yep, that's what I ment. Sorry, I wasn't clear enough... I'll try it again though. If it doesn't work then I'll just download 20b3 and let it update it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mikem4600</div><div class="date">30th August 2003, 18:29</div></div><div class="posttext">Well, it didn't work. I've attached the contains of the Log window just before it starts downloading everything and I kill the cvs95 process, as there is no way to cancel the update.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">30th August 2003, 19:30</div></div><div class="posttext">From the CVS Book: &quot;The repository always stores dates in Universal Time, but CVS on the client side usually assumes the local system time zone.&quot;<br />
<br />
A quick look at a CVS snapshot found CVS 'Entries' files with timestamps 7 or 8 hours ahead of the timestamps on the corresponding files (eg 'Entries' file has 19:44 yet matching file has 12:44).<br />
<br />
Unzipping the CVS snapshot on a computer using a different time zone from the one used on the system where the snapshot was created could cause confusion when NSIS Update is run. If NSIS Update assumes that the timestamps use the local time zone it could end up assuming that every file needs to be downloaded again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th August 2003, 21:20</div></div><div class="posttext">TortoiseCVS seems to handle times pretty well. So does cvs95.exe that NSIS Update uses. I am a few good hours away from UTC and never had time problems.<br />
<br />
Anyway, a quick solution, unless NSIS Update starts working after the 24 hour difference, would be using just one option. Either the snapshot or NSIS Update.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>