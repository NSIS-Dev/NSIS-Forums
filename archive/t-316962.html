<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallTTFFont - invalid file name, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallTTFFont - invalid file name NSIS Discussion" />
	
	<title> InstallTTFFont - invalid file name [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallTTFFont - invalid file name</div>
<hr />
<div class="pda"><a href="t-316962.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316962">InstallTTFFont - invalid file name</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Sooz24</div><div class="date">11th February 2010, 20:51</div></div><div class="posttext">Does anyone have a workaround for this problem?<br />
<br />
I want to use InstallTTFFont to include files in my install package.<br />
<br />
It works if I create a new folder D:\MyFont<br />
<br />
However, all my other install files are in a folder who's root is D:\$MyApp\<br />
<br />
The $ is being interpreted by NSIS as a special character!<br />
Have tried (but failed) copying the path to a variable $0 using strcpy.<br />
<br />
Too much work to rename $MyApp to something else...<br />
<br />
Ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">12th February 2010, 02:25</div></div><div class="posttext">use $$ to denote a $ in strings<br />
<br />
that said.. why is your app in a $foldername?  *watches red flags pop up*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sooz24</div><div class="date">13th February 2010, 09:12</div></div><div class="posttext">Unfortunately, no difference...<br />
<br />
The compiler says:<br />
<br />
Push: D:\$$Medusa\Medusa-Store\Package-Items\Fonts\COPRGTB.TTF<br />
Call &quot;GetFileName&quot;<br />
Pop: $0<br />
!insertmacro: end of GetFileNameCall<br />
!define: &quot;FontFileName&quot;=&quot;$0&quot;<br />
SetOutPath: &quot;$FONT_DIR&quot;<br />
IfFileExists: &quot;$FONT_DIR\$0&quot; ? Line129.6 : <br />
File: &quot;D:\$$Medusa\Medusa-Store\Package-Items\Fonts\COPRGTB.TTF&quot; -&gt; no files found.<br />
Usage: File [/nonfatal] [/a] ([/r] [/x filespec [...]] filespec [...] |<br />
   /oname=outfile one_file_only)<br />
Error in macro InstallTTFFont on macroline 14<br />
Error in script &quot;D:\$Medusa\Medusa-Store\Package-Items\Medusa_Fix_33112.nsi&quot; on line 129 -- aborting creation process<br />
<br />
My script is:<br />
Section &quot;Fonts&quot; SEC08<br />
<br />
  StrCpy $FONT_DIR $FONTS<br />
  SetOutPath &quot;$FONT_DIR&quot;<br />
<br />
  !insertmacro InstallTTFFont &quot;D:\$$Medusa\Medusa-Store\Package-Items\Fonts\COPRGTB.TTF&quot;<br />
  SendMessage ${HWND_BROADCAST} ${WM_FONTCHANGE}  0 0 /TIMEOUT=5000<br />
<br />
SectionEnd<br />
<br />
The script works if if I replace d:\$$ etc with D:\MyFonts<br />
<br />
(re the $ signs - it's purely to keep these files together at the top of the folder list - it's historical and goes back about 15 years!!!)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">13th February 2010, 13:02</div></div><div class="posttext">It's more hysterical, I'd say. Much better to use an _underscore than a $dollar sign...<br />
<br />
Anyway, because File is (mostly) a compiletime command, I wouldn't be surprised if the parameter should be D:\$Medusa\, with a single dollar sign. After all, at compiletime all variables are empty, so it wouldn't make much sense to interpret $Medusa as a variable...<br />
If this is the source of the problem, you'll probably need to modify the installTTFfont macro somewhat.<br />
<br />
You could also add an !echo command to the installTTFfont macro, to see what the File command actually ends up being after the precompiler (before the File command is actually processed by the compiler). Maybe the macro does some strange things with the string.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>