<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Text editing, Find and Replace: Find beginning of the line, change what goes after, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Text editing, Find and Replace: Find beginning of the line, change what goes after NSIS Discussion" />
	
	<title> Text editing, Find and Replace: Find beginning of the line, change what goes after [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Text editing, Find and Replace: Find beginning of the line, change what goes after</div>
<hr />
<div class="pda"><a href="t-329686.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329686">Text editing, Find and Replace: Find beginning of the line, change what goes after</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">erundil</div><div class="date">15th April 2011, 14:02</div></div><div class="posttext">Ok, I'll try to keep this brief.<br />
I need help.<br />
What I want to do is open a text file like this:<br />
<br />
Blah blah<br />
Blah<br />
SettingName1=abc<br />
SettingName2=xyz<br />
<br />
and then:<br />
Save a value of Setting 1 into a variable, and then let user choose an option, what should be placed instead of abc.<br />
<br />
What I need are two functions:<br />
- one that finds text in file and then saves the rest of the line into a variable<br />
- second that finds text in file and then replaces the rest of the line with a value given by parameter.<br />
<br />
Anyone knows how to achieve it?<br />
I found an odd function that does something similar, backwards, but couldn't change it to anything usefull for me (http://nsis.sourceforge.net/Replace_all_text_before_a_string_on_a_line). I don't get this stack Exch/Push thing. :/<br />
I'm not the best programmer, but someone have to make an installer for our game translations... and it came up for me. _-_</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2011, 14:10</div></div><div class="posttext">Try ConfigRead/ConfigWrite from the manual.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">erundil</div><div class="date">17th April 2011, 14:33</div></div><div class="posttext">Thanks for the tip. I'll give it a try.<br />
There is far way from 2 commands to functional script... but maybe if I spend a couple of nigths on it...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">erundil</div><div class="date">17th April 2011, 16:44</div></div><div class="posttext">Yeah, easier than I thought.<br />
<br />
Code is short and clear - I didn't even need to create separate functions.<br />
<br />
<br />
It works like this:<br />
<br />
We need to !include TextFunc.nsh. Then we read it. If we have a line:<br />
Setting1=ABC<br />
<br />
We can read &quot;ABC&quot; into a variable ($0) with this code:<br />
${ConfigRead} &quot;&lt;path to the file&gt;\filename.fileext&quot; &quot;Setting1=&quot; $0<br />
<br />
Once we have read ABC, we want to replace it with something, let's say with &quot;XYZ&quot;<br />
We create a backup of the file, and then we use this:<br />
${ConfigWrite} &quot;&lt;path to the file&gt;\filename.fileext&quot; &quot;Setting1=&quot; &quot;XYZ&quot; $0<br />
<br />
That's it. two lines of code. And to think, that I expected, that I would need a whole functions.<br />
<br />
Thank's Stu.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>