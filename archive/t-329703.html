<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS GUI unresponsive during file installation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS GUI unresponsive during file installation NSIS Discussion" />
	
	<title> NSIS GUI unresponsive during file installation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS GUI unresponsive during file installation</div>
<hr />
<div class="pda"><a href="t-329703.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329703">NSIS GUI unresponsive during file installation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jprocto</div><div class="date">16th April 2011, 02:25</div></div><div class="posttext">Hi,<br />
<br />
I'm using NSIS for my installers and I'm finding that during the installation of large files using either &quot;File&quot; or &quot;CopyFile&quot;, the GUI does not update at all so that if I open Windows Explorer and then click back on the installer, the installer does not update its GUI until that file has finished installing. Does anyone else have this problem and is there any way around it?<br />
<br />
Thanks,<br />
<br />
John.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th April 2011, 10:34</div></div><div class="posttext">Yes. Don't copy or extract files from page callbacks. That is what sections are for. You should never modify the system until the user has clicked Install. If you are then you should rethink your installer design. If you need to extract something between pages, perhaps add another InstFiles page in between (but really you should only ever need one).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jprocto</div><div class="date">16th April 2011, 11:41</div></div><div class="posttext">Yes. Don't copy or extract files from page callbacks. That is what sections are for. You should never modify the system until the user has clicked Install. If you are then you should rethink your installer design. If you need to extract something between pages, perhaps add another InstFiles page in between (but really you should only ever need one).<br />
<br />
Stu<br />
<br />
Yes, I'm afraid that the operations are already being included within a section and not within a page callback. This problem is occurring during the actual installation process.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th April 2011, 13:42</div></div><div class="posttext">If that is the case then how do you click Back? The Back button is disabled unless you have enabled it yourself. Perhaps you should attach some script that reproduces the problem. Extracting files in a section does not freeze up the UI because sections are executed in another thread. If you mean the progress bar does not move, then that's not the UI freezing up. It just doesn't move while a file is extracted; it only works on the number of instructions.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th April 2011, 14:46</div></div><div class="posttext">With clicking 'back' he means changing focus to another window and then switching back to the installer. At which point the window is not redrawn properly.<br />
<br />
Indeed some minimal script that recreates the issue would be helpful.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jprocto</div><div class="date">17th April 2011, 11:06</div></div><div class="posttext">With clicking 'back' he means changing focus to another window and then switching back to the installer. At which point the window is not redrawn properly.<br />
<br />
Indeed some minimal script that recreates the issue would be helpful.<br />
<br />
Sorry, yes that's exactly what I meant. I wasn't very clear with my original explanation. Below is the section that I am having the problem with. The actual part where people first reported this problem was the line that is now commented out:<br />
<br />
;CopyFiles /silent $EXEPATH &quot;$PROGRAMFILES\Camel Audio\Alchemy\SoundbankInstaller.exe&quot;<br />
<br />
I replaced this line with the following two lines because I thought that the problem might be caused by the executable copying itself, but this does not seem to have fixed it:<br />
<br />
SetOutPath &quot;$PROGRAMFILES\Camel Audio\Alchemy&quot;<br />
File SoundbankInstaller.exe<br />
<br />
Here is the actual section to put this into context:<br />
<br />
Section &quot;-Install Support Files&quot; SECINSTALLSUPPORT<br />
    ${If} $SkipInstallingSupportFiles == &quot;false&quot;<br />
        Call FixDataInstallPath<br />
        SetOverwrite on<br />
        SetOutPath $DataInstallDir<br />
!ifdef PLAYER_VERSION<br />
        File ..\AlchemyData\AlchemyPlayer.aky<br />
!endif<br />
        CreateDirectory $DataInstallDir<br />
        CopyFiles /silent $PluginInstallDir\*.aky $DataInstallDir<br />
        Delete $PluginInstallDir\*.aky<br />
        ;StrCpy $DataInstallDir $DataInstallDir\Alchemy<br />
        SetOutPath $DataInstallDir\Libraries<br />
        File /r /x .svn /x .DS_Store ..\AlchemyData\Libraries\*.*<br />
!ifdef FULL_VERSION<br />
        WriteRegStr HKLM &quot;${REGKEY}&quot; &quot;${FULL_VERSION_INSTALLED_REGISTRY_VALUENAME}&quot; &quot;true&quot;<br />
!endif<br />
        SetOutPath $DataInstallDir\Skins<br />
        File /r /x .svn /x .DS_Store ..\AlchemyData\Skins\*.*<br />
        ;CreateDirectory $DataInstallDir\Libraries<br />
        CreateDirectory $DataInstallDir\Presets<br />
        CreateDirectory $DataInstallDir\Presets\User<br />
        CreateDirectory $DataInstallDir\Presets\User\Sounds1<br />
        CreateDirectory $DataInstallDir\Samples<br />
        ;CreateDirectory $DataInstallDir\Skins<br />
        CreateDirectory &quot;$PROGRAMFILES\Camel Audio\Alchemy&quot;<br />
        ;CopyFiles /silent $EXEPATH &quot;$PROGRAMFILES\Camel Audio\Alchemy\SoundbankInstaller.exe&quot;<br />
        SetOutPath &quot;$PROGRAMFILES\Camel Audio\Alchemy&quot;<br />
        File SoundbankInstaller.exe<br />
        ;${unregisterExtension} &quot;.CamelSounds&quot; &quot;Camel Audio Sound Library&quot;<br />
        ${registerExtension} &quot;$PROGRAMFILES\Camel Audio\Alchemy\SoundbankInstaller.exe&quot; &quot;.CamelSounds&quot; &quot;Camel Audio Sound Library&quot;<br />
        SetShellVarContext current<br />
        FileOpen $0 $PluginInstallDir\AlchemyConfig.txt w<br />
<br />
        FileWrite $0 &quot;LibraryPath= $DataInstallDir\$\r$\n&quot;<br />
        FileWrite $0 &quot;MaxChunkSize= 1048576$\r$\n&quot;<br />
        FileWrite $0 &quot;KnobCircular= 0$\r$\n&quot;<br />
        FileWrite $0 &quot;ShowAuthor= 1&quot;<br />
        FileClose $0<br />
        ${If} $InstallingRTAS == &quot;true&quot;<br />
            FileOpen $0 ${RTAS_INSTALL_DIR}\AlchemyConfig.txt w<br />
<br />
    	    FileWrite $0 &quot;LibraryPath= $DataInstallDir\$\r$\n&quot;<br />
    	    FileWrite $0 &quot;MaxChunkSize= 1048576$\r$\n&quot;<br />
    	    FileWrite $0 &quot;KnobCircular= 0$\r$\n&quot;<br />
    	    FileWrite $0 &quot;ShowAuthor= 1&quot;<br />
    	    FileClose $0<br />
        ${EndIf}<br />
!ifdef PLAYER_VERSION_WITH_CONTENT<br />
        SetOutPath $DataInstallDir\Presets<br />
        File /r /x .svn /x .DS_Store &quot;..\..\Alchemy Player Content\Presets\*.*&quot;<br />
        SetOutPath $DataInstallDir\Samples<br />
        File /r /x .svn /x .DS_Store &quot;..\..\Alchemy Player Content\Samples\*.*&quot;<br />
!endif<br />
    ${EndIf}<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">17th April 2011, 12:34</div></div><div class="posttext">Ah, so you're copying an executable. There's a good chance your virusscanner is at fault. Try again with your virusscanner disabled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jprocto</div><div class="date">17th April 2011, 14:06</div></div><div class="posttext">Ah, so you're copying an executable. There's a good chance your virusscanner is at fault. Try again with your virusscanner disabled.<br />
<br />
Ah yes. Good thinking. Obviously I can't tell all my users to switch off their antivirus software and it probably won't be sufficient to do something like changing the extension and then switching it to &quot;exe&quot; once it is copied so I don't think there's much I can do about this.<br />
<br />
Thanks for all your help MSG and Stu :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th April 2011, 14:54</div></div><div class="posttext">Sorry I misunderstood your wording. Have you tried without /silent? I doubt it will help but perhaps if the A/V is holding things up you might at least see a copy progress pop-up dialog box. You could also try doing the copy by calling xcopy.exe.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>