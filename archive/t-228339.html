<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Request MUI example with multiple install directories for 'family' of apps, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Request MUI example with multiple install directories for 'family' of apps NSIS Discussion" />
	
	<title> Request MUI example with multiple install directories for 'family' of apps [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Request MUI example with multiple install directories for 'family' of apps</div>
<hr />
<div class="pda"><a href="t-228339.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228339">Request MUI example with multiple install directories for 'family' of apps</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">13th October 2005, 16:39</div></div><div class="posttext">I've seen a number of posts about using multiple installation directories. It hasn't jelled in my mind, and I think a &quot;best practices&quot; example using the Modern-UI would be VERY helpful.<br />
<br />
I've looked at MUI InstallOptions.nsi and think I can maybe figure out something, but that would perhaps be reinventing the wheel, and the MUI author (or other expert) would seem the best person to provide something like a template to clone from.<br />
<br />
The application I'm working on is part of a &quot;family&quot; of freeware apps. Each app would be in its own directory and use something like a FAMILY_PATH registry variable or environment variable to find resources that are used in common &quot;family wide&quot; by multiple applications.<br />
<br />
I want to allow the end-user to provide the installation directory for that specific executable, and a separate resource path. The default might be something like:<br />
<br />
C:\Program Files<br />
C:\Program Files\Family<br />
C:\Program Files\Family\Resources<br />
C:\Program Files\Family\BasicApp<br />
<br />
Another person might use a simiar nsis script to install<br />
C:\Program Files\Family\AdvancedApp<br />
It could detect that Family\Resources were already installed and proceed accordingly.<br />
<br />
Each application might be available &quot;bare bones&quot; or with a &quot;StarterKit&quot; with a basic resource. The apps aren't usable until there is at least one resource installed (there are hundreds of resources). A concern is having redundant resources with the directory structure ending up like:<br />
<br />
C:\Program Files\BasicApp\Resources<br />
C:\Program Files\AdvancedApp\Resources<br />
<br />
A great example might handle reading and possibly writing the actual FAMILY_PATH environment variable with something like:<br />
WriteEnvStr.nsh <br />
(perhaps using a separate component page?)<br />
<br />
The uninstall would seem to be tricky ... to detect if another &quot;family application&quot; is installed and use that information to control whether the resources could/should be removed.<br />
<br />
Does something like this already exist? I've seen previous examples, but my impression is that many are obsolete with nsis version 2.0 and the MUI.<br />
<br />
Such an example would be greatly appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">14th October 2005, 13:05</div></div><div class="posttext">okay im no expert but I think you should be able to just have the apps pull resources from */family path/resources/  and then when you install just have $instdir be */family path/ and install the resources needed for that program and just overwrite any ones that are already there.<br />
<br />
I'm assuming that you want your dir tree to end up looking like this<br />
<br />
*/family path/<br />
*/family path/app1/<br />
*/family path/app2/<br />
*/family path/app3/<br />
*/family path/resources/<br />
<br />
where you dont want the user to be able to change the dir after family path.   <br />
<br />
The only problem might be over writing newer resources but im pretty sure that there is a way to check for that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">14th October 2005, 19:35</div></div><div class="posttext">Almost ... there is an environment variable (something like FAMILY_PATH) that an associated but separate InstallManager.exe uses to download resources. <br />
<br />
To be accepted to be part of this family of applications, a candidate app is required to use a FAMILY_API that has a C++ SwMgr object that sniffs around in the application path and then the FAMILY_PATH to detect which resources are available.<br />
<br />
Part of my concern is that I'm a rather junior member of this aforementioned family of applications, and trying to help out with converting the current installer from InstallShield to NSIS. <br />
<br />
Also, I'm about ready to submit a possibly controversial candidate app to the family, and want to minimize the potential for the installer causing problems for other apps that share the resources. (almost sounds like the mafia :-) My impression is that there is a lot that can go wrong in this scenario (especially uninstalls), and I'm not at all an expert with nsis.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>