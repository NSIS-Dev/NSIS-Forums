<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Inetc problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Inetc problem NSIS Discussion" />
	
	<title> Inetc problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Inetc problem</div>
<hr />
<div class="pda"><a href="t-317067.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317067">Inetc problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">realpuff</div><div class="date">17th February 2010, 01:25</div></div><div class="posttext">Hi everyone,<br />
<br />
I tried to create an downloader using inetc::get but my code need to be fixed so I need your help!<br />
<br />
I have 2 download locations (links) and first one acts as main download link and the second one as backup just in case the first download link go down.<br />
<br />
Now I want my script to check link1 and if there error maybe due that user use a proxy then check link1 again with /NOPROXY and if file not found, link1 down or any error then I want to check link2. My code works but when the working link is found and the file is downloaded, this not run because I don't know how to set a condition that when link is working and file downloaded then the script to jumt to the Function .onGuiEnd instead execute the remaining code and try to download again. Here is my code:<br />
<br />
<br />
SetCompressor LZMA<br />
WindowIcon Off<br />
CRCCheck On<br />
AutoCloseWindow true<br />
ShowInstDetails nevershow<br />
ShowUnInstDetails nevershow<br />
RequestExecutionLevel highest<br />
<br />
!define NAME &quot;Downloader&quot;<br />
Name &quot;${NAME}&quot;<br />
OutFile &quot;Downloader.exe&quot;<br />
<br />
  !include &quot;MUI.nsh&quot;<br />
  !define MUI_ICON &quot;Setup.ico&quot;<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Section &quot;Downloading file&quot;<br />
    SetDetailsView hide<br />
<br />
    inetc::get /NOPROXY &quot;http://www.mydomain1.com/Setup.exe&quot; &quot;$PLUGINSDIR\Setup.exe&quot; /END<br />
    Pop $0<br />
<br />
  ${If} $0 != &quot;&quot;<br />
    inetc::get &quot;http://www.mydomain1.com/Setup.exe&quot; &quot;$PLUGINSDIR\Setup.exe&quot; /END<br />
    Pop $1<br />
<br />
  ${If} $1 != &quot;&quot;<br />
    inetc::get /NOPROXY &quot;http://www.mydomain2.com/Setup.exe&quot; &quot;$PLUGINSDIR\Setup.exe&quot; /END<br />
    Pop $2<br />
<br />
  ${If} $2 != &quot;&quot;<br />
    inetc::get &quot;http://www.mydomain2.com/Setup.exe&quot; &quot;$PLUGINSDIR\Setup.exe&quot; /END<br />
    Pop $3<br />
<br />
    ${EndIf}<br />
   ${EndIf}<br />
 ${EndIf}<br />
SectionEnd<br />
<br />
Function .onGUIEnd<br />
    SetOutPath $PLUGINSDIR<br />
    Exec &quot;Setup.exe&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th February 2010, 17:46</div></div><div class="posttext">I you'd read the inetc readme you'd know that it returns OK on success and not an empty string.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>