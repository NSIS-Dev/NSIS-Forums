<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to add a string to a variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to add a string to a variable NSIS Discussion" />
	
	<title> How to add a string to a variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to add a string to a variable</div>
<hr />
<div class="pda"><a href="t-249918.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=249918">How to add a string to a variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JoshRountree</div><div class="date">28th June 2006, 21:18</div></div><div class="posttext">Ok, I have a default directory that I want to install to. I also have a &quot;directory&quot; page, so that the default directory can be changed if need be.<br />
<br />
Regardless of whether or not the default directory is used, I would like to append &quot;\lib\extensions\&quot; to the end of the directory. I am copying an extension to an extension directory, and it's just easier if the user only has to tell me where the installation is. <br />
<br />
For instance, if the user picks &quot;C:\blah&quot; , I would like to install to &quot;C:\blah\lib\extensions\myext.jar&quot;.<br />
<br />
Here's my script<br />
<br />
<br />
; clockIt.nsi<br />
<br />
;--------------------------------<br />
<br />
; The name of the installer<br />
Name &quot;ClockIt&quot;<br />
<br />
; The file to write<br />
OutFile &quot;ClockItInstall.exe&quot;<br />
<br />
; The default installation directory<br />
InstallDir c:\bluej<br />
<br />
;--------------------------------<br />
<br />
; Pages<br />
<br />
Page directory<br />
Page instfiles<br />
<br />
;--------------------------------<br />
<br />
; The stuff to install<br />
Section &quot;&quot; ;No components page, name is not important<br />
<br />
  ; Set output path to the installation directory.<br />
  SetOutPath $INSTDIR\lib\extensions<br />
  <br />
  ; Put file there<br />
  File ClockIt.jar<br />
  <br />
SectionEnd ; end the section</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th June 2006, 22:41</div></div><div class="posttext">StrCpy $MyVar &quot;$MyVar\blah&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoshRountree</div><div class="date">28th June 2006, 23:11</div></div><div class="posttext">That failed to work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">29th June 2006, 00:45</div></div><div class="posttext">; The stuff to install<br />
Section &quot;&quot; ;No components page, name is not important<br />
<br />
  ; Set output path to the installation directory.<br />
  SetOutPath &quot;$INSTDIR\lib\extensions&quot;<br />
  <br />
  ; Put file there<br />
  File &quot;ClockIt.jar&quot;<br />
  <br />
SectionEnd ; end the section<br />
Where possible I always use quotes for path and file names.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoshRountree</div><div class="date">29th June 2006, 01:08</div></div><div class="posttext">That didn't work either...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">29th June 2006, 02:23</div></div><div class="posttext">So whats the actual problem? I have compiled the script you posted using my own files and it works just fine. You could have a look at the log window at the end of the install and see if the path is actually showing up.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoshRountree</div><div class="date">29th June 2006, 02:30</div></div><div class="posttext">It will compile, but the file only gets copied to the directory chosen, or the default directory. <br />
<br />
I need to add &quot;/lib/extensions&quot; onto either the default path, or the path chosen, and then copy my file to that directory.<br />
<br />
It's as if SetOutPath $INSTDIR\lib\extensions is not getting executed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">29th June 2006, 03:12</div></div><div class="posttext">Works for me too...<br />
<br />
According to the docs, SetOutPath expects a full pathname.     You might want to check to make sure that $INSTDIR is a full path.  (Does $INSTDIR have a trailing backslash perhaps?)<br />
<br />
Another thing you might check is whether or not SetOutPath generating errors.  You can check inserting an &quot;IfErrors&quot; command directly after your SetOutPath statement.  (Might also want to check for error after the file command.)  Something like this:<br />
<br />
IfErrors 0 +2<br />
MessageBox MB_OK &quot;Error in SetOutPath&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">29th June 2006, 03:12</div></div><div class="posttext">I don't know what is going on here :hang:, but it should work. I have uploaded an example to this post that contains the source .nsi, ClockIt.txt, and the resulting .exe. I am using NSIS 2.15 for my coding.<br />
<br />
Still works with the trailing backslash in the directory page path.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoshRountree</div><div class="date">29th June 2006, 03:39</div></div><div class="posttext">O M G<br />
<br />
I feel like such a retard. I don't know why, but when I changed the file above, it worked. Now I can't get it to not work.<br />
<br />
I have no clue what I was doing wrong, they all look identical. Could a space somewhere throw things off?<br />
<br />
<br />
Arggg, I feel stupid.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">29th June 2006, 03:53</div></div><div class="posttext">There, there, its all right now :o. Stupid little errors do creep in, and this was the simplest one yet. I don't know what you were doing wrong, but it always worked for me :D.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>