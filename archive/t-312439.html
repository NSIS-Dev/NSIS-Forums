<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Change the CWD/getting the '*.nsi' script directory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Change the CWD/getting the '*.nsi' script directory NSIS Discussion" />
	
	<title> Change the CWD/getting the '*.nsi' script directory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Change the CWD/getting the '*.nsi' script directory</div>
<hr />
<div class="pda"><a href="t-312439.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=312439">Change the CWD/getting the '*.nsi' script directory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jonny2608</div><div class="date">15th September 2009, 20:39</div></div><div class="posttext">When I compile an NSIS script from the command line I want it always to output the exe file in the current working directory - not the same directory as the *.nsi script.<br />
<br />
So if my cwd was:<br />
'C:/temp'<br />
<br />
and I say<br />
'C:/Program Files/NSIS/makensis.exe D:/MyInstaller.nsi'<br />
<br />
How can I get the 'MyInstaller.exe' to be created in 'C:/temp'?<br />
<br />
Also, if I get the cwd to be 'C:/temp' at compile time, can I still get the directory location of the *.nsi script so I can do this:<br />
ReserveFile ${NSIFilePath}/MyPerlScript.pl<br />
<br />
At the moment I have something like this:<br />
ReserveFile ./MyPerlScript.pl<br />
<br />
Which is a problem because the files I need to reserve are relative to the *.nsi script, and obviously changing the cwd would stop this from compiling. Cheers for any help on this one! ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th September 2009, 20:56</div></div><div class="posttext">hm, something like: makensis /Doutdir=%CD% yourscript.nsi<br />
<br />
then in your script:<br />
!ifndef outdir<br />
!define outdir .<br />
!endif<br />
Outfile &quot;${outdir}\foo.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jonny2608</div><div class="date">15th September 2009, 21:04</div></div><div class="posttext">Yeah I'll be honest I thought I'd have do something like that. I was passing '/NOCD' as one of the args so the *.exe was being created in the CWD but then this was messing up other parts of my script which was using files relative to the *.nsi script location.<br />
<br />
I wasn't sure if you used /NOCD if there was an easy way to know the directory location of the *.nsi script so I could have done something like:<br />
ReserveFile ${NSIFilePath}/MyPerlScript.pl<br />
<br />
If not then your solution is good enough for what I'm doing, cheers! :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th September 2009, 21:21</div></div><div class="posttext">well, its ugly, but ReserveFile &quot;${__FILE__}\..\MyPerlScript.pl&quot; might work</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>