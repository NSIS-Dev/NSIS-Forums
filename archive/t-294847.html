<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Latency period at the execution, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Latency period at the execution NSIS Discussion" />
	
	<title> Latency period at the execution [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Latency period at the execution</div>
<hr />
<div class="pda"><a href="t-294847.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294847">Latency period at the execution</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 10:40</div></div><div class="posttext">Hello,<br />
<br />
I have an important latency period between the installer execution and the first page display. So users can believe the installer is not running during this period !!!<br />
<br />
An automatic message should be displayed to inform users of the &quot;verifying package&quot; and &quot;unpacking data&quot; ??????<br />
 Yes : Why it is not displayed ??<br />
 No : How can I display these messages ??<br />
<br />
Thanks.<br />
<br />
PS: I don't use MUI.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 11:20</div></div><div class="posttext">Reserve all Plugin DLL's and all other files that are extracted during the initialization of your installer and the the &quot;latency period&quot; should be gone. Use the ReserveFile instruction at the top of your script...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 13:38</div></div><div class="posttext">Thanks LoRd_MuldeR, I thought also about this solution so I apply it and the latency period is now correct.<br />
But I don't understand why I had not the messages &quot;verifying package: ??%&quot; and &quot;unpacking data: ??%&quot; at the beginning whereas they have to be displayed automatically (when these tasks are too long) !!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 14:08</div></div><div class="posttext">I have an other problem !!!!<br />
Using the function ReserveFile, the latency period is now correct ... at the installer execution but now I have a latency period between a components page and a custom page (using nsDialogs plugin) !!!!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 14:16</div></div><div class="posttext">Are you sure the &quot;nsDialogs&quot; plugin DLL and all files required to display the page are reserved as well? You should reserve those files right after the files required for initialization. Then the delay should be gone...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 15:11</div></div><div class="posttext">I have different situations depending on reservations done.<br />
<br />
All plugins and images reserved :<br />
=&gt; latency period between the components page and a custom page<br />
<br />
All plugins reserved (no images reserved) :<br />
=&gt; latency period between the language selection and the first page (a custom page)<br />
<br />
All images reserved (no plugins reserved) <br />
Or No plugins and no images reserved<br />
=&gt; latency period at the installer execution (before the language selection)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 15:18</div></div><div class="posttext">Originally posted by Corpio <br />
All plugins and images reserved :<br />
=&gt; latency period between the components page and a custom page <br />
<br />
Obviously you forgot something or you reserved in a sub-optimal order...<br />
<br />
(...or it's already as fast as it can be)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 15:29</div></div><div class="posttext">Have you an exemple of a sub-optimal order ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 15:37</div></div><div class="posttext">ReserveFile &quot;Data\VeryLargeFile.dat&quot;<br />
ReserveFile &quot;Installer\CustomPage.ini&quot;<br />
<br />
Section<br />
  SetOutPath $INSTDIR<br />
  File &quot;Data\VeryLargeFile.dat&quot;<br />
SectionEnd<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\page.ini &quot;Installer\CustomPage.ini&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">21st July 2008, 15:45</div></div><div class="posttext">The problem here is the reservations order, the file &quot;Data\VeryLargeFile.dat&quot; has to be reserved in last !!<br />
But why ????<br />
- because we use it before the other<br />
- because it is the biggest</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">21st July 2008, 15:54</div></div><div class="posttext">Because files are added to the &quot;data block&quot; of the installer in the same order they appear in the script. The .onInit function is called on initialization of the installer, but in the script it appears last. Normally &quot;CustomPage.ini&quot; would be added last to the data block, although we want it to be at the very beginning of the data block! ReserveFile can be used to workaround that problem. But only when used in the correct place and in a correct order. The earlier you access a file at runtime, the more we want to have that file at the beginning of the data block. In my example I reserved &quot;VeryLargeFile.dat&quot; before &quot;CustomPage.ini&quot;, which is a bad idea, obviously! Of course you cannot have all files at the very beginning, but usually Plugin DLL's as well as other resources required for initialization and custom pages should be reserved. Again in the order they are accessed (extracted) at runtime! Reserving files that are only extracted in a &quot;normal&quot; section should not be reserved, normally. Also reserving &quot;big&quot; files before other files might destroy the efficiency of ReserveFile, so better limit it to &quot;small&quot; files...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Corpio</div><div class="date">22nd July 2008, 15:28</div></div><div class="posttext">Now I think I have understand how it works but I don't find a solution. I tried to reserve all files or comment a part of my code but I have always a latency period somewhere.<br />
<br />
No ReserveFile<br />
=&gt; latency period between the installer execution and the language selection<br />
<br />
ReserveFile &quot;LangDLL.dll&quot;<br />
=&gt; latency period between the language selection and the custom welcome page<br />
<br />
ReserveFile &quot;LangDLL.dll&quot;<br />
ReserveFile &quot;nsDialogs.dll&quot;<br />
ReserveFile &quot;background.bmp&quot;<br />
=&gt; latency period between the components page and a custom page with RadioButtons and a FileRequest created with nsDialogs<br />
<br />
If I comment my RadioButtons<br />
=&gt; latency period on click on the BrowseButton<br />
<br />
I use no other plugins (except in Sections), no other images, no INI files ... So I don't know what to do !!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>