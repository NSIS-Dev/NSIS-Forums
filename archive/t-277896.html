<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" crash displaying MUI destination panel, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  crash displaying MUI destination panel NSIS Discussion" />
	
	<title> crash displaying MUI destination panel [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  crash displaying MUI destination panel</div>
<hr />
<div class="pda"><a href="t-277896.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=277896">crash displaying MUI destination panel</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">25th September 2007, 14:11</div></div><div class="posttext">This panel is not often displayed for us because it has to be the first product install for the panel to be displayed.  I have a pre function that aborts the display if there are previous installed products which keys off a windows registry entry previously saved.  During testing, some people have been crashing when this panel is suppose to be displayed.  For me, I saw the crash just once and then never again.  I did capture a bit of information on the crash:<br />
<br />
7C9106AB   mov         esi,eax<br />
7C9106AD   mov         dword ptr [ebp-30h],esi<br />
7C9106B0   test        esi,esi<br />
7C9106B2   je          7C911615<br />
7C9106B8   lea         edi,[esi-8]<br />
7C9106BB   mov         al,byte ptr [ebp-24h]<br />
7C9106BE   mov         ecx,dword ptr [ebp+10h]<br />
7C9106C1   sub         al,cl<br />
7C9106C3   mov         byte ptr [edi+6],al &lt;== cashed here<br />
<br />
7C9106AB  8B F0 89 75 D0 85 F6 0F 84 5D 0F 00 00 8D 7E  â€¹Ã°â€°uÃâ€¦Ã¶.â€ž]....~<br />
7C9106BA  F8 8A 45 DC 8B 4D 10 2A C1 88 47 06 8B C7 C1  Ã¸Å_EÃœâ€¹M.*Ã.G.â€¹Ã‡Ã<br />
7C9106C9  E8 03 32 43 04 88 47 04 F6 45 0C 08 75 6D F6  Ã¨.2C..G.Ã¶E..umÃ¶<br />
7C9106D8  05 F0 02 FE 7F 02 0F 85 1F B2 02 00 8B C6 E8  .Ã°.Ã¾...â€¦.Â²..â€¹Ã†Ã¨<br />
7C9106E7  17 E7 FF FF C2 0C 00 90 90 FF FF FF FF 00 00  .Ã§Ã¿Ã¿Ã‚....Ã¿Ã¿Ã¿Ã¿..<br />
7C9106F6  00 00 C5 BB 93 7C 90 90 90 90 90 6A 0C 68 38  ..Ã…Â»â€œ|.....j.h8</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th September 2007, 19:47</div></div><div class="posttext">That code is from a DLL and not from the installer itself. From the image base, I can say it's ntdll.dll, but not much more can be said without a script that reproduces this, the version of NSIS used and preferably a stack trace.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">26th September 2007, 13:41</div></div><div class="posttext">This problem was corrected by removing the LockedList plug-in from the install.  I changed our installs to use a .oninit style rename and test of the destination product directory to determine locked files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th September 2007, 10:57</div></div><div class="posttext">The old plug-in crashes on Win 2000 I have found, and this is due to the function GetProcessImageFileName only existing on Win XP.<br />
<br />
Will have the new version ready soon.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>