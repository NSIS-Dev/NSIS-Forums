<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" confused by IfFileExists, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  confused by IfFileExists NSIS Discussion" />
	
	<title> confused by IfFileExists [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  confused by IfFileExists</div>
<hr />
<div class="pda"><a href="t-329820.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329820">confused by IfFileExists</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Safe60</div><div class="date">19th April 2011, 15:55</div></div><div class="posttext">Hi all.<br />
I'm having a strange behaviour using IfFfilextist instruction. May be I'm using a wrong syntax, but anyway here is the code :<br />
   <br />
   IfFileExists P:\spedizi\postallverG\*.MDD 0 +2<br />
       File p:\spedizi\postallverG\*.MDD<br />
  <br />
   SetOutPath &quot;$INSTDIR\..\Post&quot;<br />
<br />
The logic would be to check if some file with .mdd extension does exists in a specific directory located on a network disk. If at least one file exists, it should add all of them to the installation file. If not, it should skip the File statement and proceed with the SetOutputPath command.<br />
<br />
Strangely, in any case, the program flow execute the File statement that fails making the compilation process to abort.<br />
 <br />
In the documentation the IiFfileExist command is documented this way :<br />
<br />
file_to_check_for jump_if_present [jump_otherwise]<br />
<br />
and the sample code of the statement is <br />
IfFileExists $WINDIR\notepad.exe 0 +2<br />
  MessageBox MB_OK &quot;notepad is installed&quot;<br />
<br />
I'm almost sure that I'm missing something but I can't guess what. May that the wildcards are not allowed ? Or the problem is in the remote path of the file to be checked ?<br />
<br />
Thanks for your opinions.<br />
<br />
Sandro</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">19th April 2011, 17:01</div></div><div class="posttext">The command explains itself. The name is IfFileExist and not IfExtensionExistInThisFolder. :D<br />
You can only specify ONE FILE then it looks for THIS FILE. The command can´t search for fileextensions in specified folder...<br />
<br />
You have to code it your own. But it shouldn´t be so tricky. ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th April 2011, 19:22</div></div><div class="posttext">Not to mention IfFileExists is a run-time instruction. You can't use to to check if a file exists on the build machine.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">19th April 2011, 21:08</div></div><div class="posttext">You can only specify ONE FILE then it looks for THIS FILE. The command can´t search for fileextensions in specified folder...<br />
IfFileExists accepts wildcards without any problems.<br />
<br />
As Afrow said, IfFileExists is a runtime command, not compiletime. There are compiletime commands like !system that allow you to do some funky stuff like conditional file compilation. Or you can use a bat file to make a file list and !include that in your script. Or maybe execute a vbscript during compilation (forum search for this).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th April 2011, 22:33</div></div><div class="posttext">You can of course use wildcards with IfFileExists. As for File, you can use /nonfatal if you don't care whether the file should be included or not.<br />
<br />
Please mind the language MSG.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">20th April 2011, 05:54</div></div><div class="posttext">My bad, won't happen again. Thanks for the correction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">20th April 2011, 06:57</div></div><div class="posttext">Oh, really? Sorry. Learning never stops. <br />
And never mind MSG. What i wrote was really utter b..... :)<br />
I totally overlooked that he used it for compiletime...<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Safe60</div><div class="date">20th April 2011, 09:15</div></div><div class="posttext">Many thanks for your opinions guys. I'm just a NSIS beginner and I need to further explore the language and the environment. <br />
<br />
Sandro</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>