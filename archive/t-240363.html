<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" New and improved skinnedbutton plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  New and improved skinnedbutton plugin NSIS Discussion" />
	
	<title> New and improved skinnedbutton plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  New and improved skinnedbutton plugin</div>
<hr />
<div class="pda"><a href="t-240363.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240363">New and improved skinnedbutton plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">9th March 2006, 15:29</div></div><div class="posttext">Hi folks,<br />
<br />
after playing around with alternative UIs, I found that particularly the UltraModernUI looks pretty ugly (haha, nice pun) without properly skinned buttons. So I examined what I could find and the preliminary result is a new version of the skinnedbutton plugin. However, this is not the only component required for proper skinning at the moment. I included some basic instructions for everybody who is interested in properly skinned buttons with NSIS.<br />
<br />
Most problems with skinned buttons are caused by two lines in the NSIS source file ui.c, namely lines 98 and 553 (line numbers taken from 2.15 release version source), where a button gets set to BS_PUSHBUTTON resp. BS_DEFPUSHBUTTON which voids the flag BS_OWNERDRAW that is mandatory for skinned buttons. The obvious solution to this would be checking the button status and leaving the button alone if it has BS_OWNERDRAW set. For my tests, I hardcoded BS_OWNERDRAW here, which works nicely, it just demands a skinning plugin then :)<br />
<br />
The second change I did was editing the GUI exe, dialog 106, resource ID 1027 (&quot;Show Details&quot; button) where I replaced BS_PUSHBUTTON with BS_OWNERDRAW again.<br />
<br />
With these modification, I now have a UMUI interface with properly skinned buttons. :D<br />
<br />
And by the way, I also fixed the crash bug in the skinnedbutton.dll :)<br />
<br />
Please test the plugin and my suggestions and let me know what you think of it!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">9th March 2006, 15:31</div></div><div class="posttext">I shouldn't have clicked on the preview button :( Here is the attachment :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">9th March 2006, 18:02</div></div><div class="posttext">Fine, but... where are the examples? I could not find them inside the .rar file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">9th March 2006, 18:35</div></div><div class="posttext">Ok, I have followed the txt file and it is working fine, except for the buttons created inside custom pages (.ini), the back buttons of custom pages and message alerts like MessageBox.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">9th March 2006, 20:08</div></div><div class="posttext">Oops, forgot to package the examples :( However, they didn't change from the last version and I need to create a better version anyway :) Can you please attach a sample script so I can get an idea of what does not work? Thanks :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th March 2006, 03:36</div></div><div class="posttext">Now I can see that it is working, I have something wrong with my code... sorry.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">10th March 2006, 05:00</div></div><div class="posttext">No problem, I know the plugin is not perfect yet, Windows is all nice and okay as long as you don't take a peek inside. ;) As soon as you want some extra eye-candy, hell breaks loose :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th March 2006, 10:12</div></div><div class="posttext">Ok, I have found out the problem, if any messagebox appears before the custom page, the back button and all buttons created with .ini file become unskinned in the custom page. See your e-mail for the script and ini file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">10th March 2006, 10:45</div></div><div class="posttext">Thanks for testing, I'll have a look at that combination and see if I can fix it today. If not, you'll have to wait till monday :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th March 2006, 15:48</div></div><div class="posttext">This is happening with wansis too...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">10th March 2006, 18:29</div></div><div class="posttext">This is happening with wansis too...<br />
SkinnedButton is based on wansis, therefore they tend to share bugs. ;)<br />
<br />
@OldGrumpy: Feature request: buttons change image on mouse hover<br />
<br />
Great work :)<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">10th March 2006, 21:03</div></div><div class="posttext">Very good work!<br />
<br />
I will include your modifications to my future 1.2 version that I currently develop.<br />
<br />
If, moreover, you know how to make a color of the image of the button transparent (the pixel in top left will indicate the color has to make transparent) if the option /transparency is used.<br />
<br />
Good idea which the image change on mouse over, i don't know how to do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat45</div><div class="date">10th March 2006, 23:05</div></div><div class="posttext">Good evening,<br />
<br />
<br />
I had made some modifications on the code of SkinnedButton for the next version (based on the very last version published of wansis).<br />
<br />
OldGrumpy, if you want to correct the bugs, can you do it on this version?<br />
<br />
You found a attach file with a development version of the future 1.2 version.<br />
I saw that with the plugin 1.1b, when we did not apply the instructions to correct the problems of unskinned buttons, if we clicks on the button &quot;show detail&quot;, the next an back buttons are unskinned, this work in the version being in the file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">14th March 2006, 08:41</div></div><div class="posttext">Okay, I'll continue work with the updated 1.2dev version. Button effect on mouse hover can be done, it's just a bit of math necessary without a framework ;) Unfortunately, the current approach seems to be a bit limited because I found out that not every button can be reached with the current method. I am currently looking into a &quot;completely different&quot; approach which should deliver more reliability, more flexibility and more features. Btw, for the mouse effect, I'd need a new bitmap, modifying the color values on mouse hover is not a good idea, painting a bitmap is much faster. Could anyone lay their hands on the sample bitmaps that come with the skinnedbutton plugin and create bitmaps with three or preferrably four states?<br />
(disabled, normal, pushed, highlighted, pick your order as you like, just stay consistent :) )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">14th March 2006, 17:23</div></div><div class="posttext">@SuperPat45: <br />
<br />
What are these lines in FrameWndProc() for?<br />
<br />
static HMENU pm;<br />
static HWND tt; //Tooltip control<br />
<br />
I don't see them referenced anywhere but in a DestroyWindow(tt) call shortly after.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>