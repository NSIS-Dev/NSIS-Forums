<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Math plugin compiled with mingw32 causes an access violation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Math plugin compiled with mingw32 causes an access violation NSIS Discussion" />
	
	<title> Math plugin compiled with mingw32 causes an access violation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Math plugin compiled with mingw32 causes an access violation</div>
<hr />
<div class="pda"><a href="t-309948.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=309948">Math plugin compiled with mingw32 causes an access violation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">f0rt</div><div class="date">13th August 2009, 19:12</div></div><div class="posttext">Normally the &quot;.c&quot; file extension of a source file implies that it should be compiled with a C-Compiler. However the Math plugin is different in that respect because it actually needs a C++ compiler. The mingw32 C++ compiler is not directly<br />
invoked but rather via &quot;i586-mingw32msvc-gcc -xc++&quot; for the source files of the Math plugin.<br />
<br />
As a consequence name mangling (name decoration) occurs so that the DllMain function is no longer recognized as an entry function by the linker. This ultimately caused an access violation because the DllMain function provided by the Math plugin was not called and some values were not properly initialized. The access violation could be reproduced with the installer built from the math.nsi source (NSIS and its plugins built with mingw32): Run the installer (math.exe) and an access violation occurs just after you closed the window of the installer.<br />
<br />
A detailed description including a proposed bug fix of the issue is available at the Sourceforge tracker:<br />
sf.net/support/tracker.php?aid=2835731<br />
<br />
I wonder if it would be better reverting to pure C for the Math plugin source files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">19th August 2009, 10:20</div></div><div class="posttext">I've committed your change to SVN in r5998. Please close the bug, I don't appear to have permission to do so.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f0rt</div><div class="date">19th August 2009, 19:34</div></div><div class="posttext">Thanks for applying the patch. I closed the bug.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>