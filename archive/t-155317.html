<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Self Update, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Self Update NSIS Discussion" />
	
	<title> Self Update [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Self Update</div>
<hr />
<div class="pda"><a href="t-155317.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=155317">Self Update</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">6th November 2003, 06:10</div></div><div class="posttext">I have created a launcher application using NSIS, which first checks for updates of the program on a network share and launches the program if no updates are found.  If they are found then it updates the local system before proceding.  Every so often I have an update for the launcher itself but it cannot update itself while it is still running.  Therefore I use this code to update it.  But it only works after the computer is restarted.<br />
  MessageBox MB_OK &quot;$\&quot;Launch.exe$\&quot; Update Found: $LocalVer to $ServerVer&quot;<br />
  GetTempFileName &quot;$0&quot; &quot;$Local&quot;<br />
  CopyFiles /Silent &quot;$Server\Launch.exe&quot; &quot;$0&quot;<br />
  Rename /RebootOK &quot;$0&quot; &quot;$Local\Launch.exe&quot; Is there a way to update the launcher program and get it to automatically startup after the update is finnished and continue with the execution without the need to restart the computer.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dRaakje</div><div class="date">6th November 2003, 08:26</div></div><div class="posttext">Can't you do something similar to what the uninstaller is doing.<br />
<br />
When first started, check the directory you're running in. If it isn't the temp folder, copy yourself to the tempfolder (under a temporary name) and execute that copy and exit the first instance (all this before a GUI is shown)<br />
<br />
Alternatively, you could check to see if a certain commandline parameter is added or left to decide to copy yourself to the temp folder.<br />
<br />
Now, you can check if the launcher is up to date, and if it needs to be updated, you can just copy it over the old one in the original directory. You then exit and call the new launcher, which will do the above process all over again.<br />
<br />
Remco</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th November 2003, 12:50</div></div><div class="posttext">Check the NSIS Update source, it uses the same trick.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">7th November 2003, 03:45</div></div><div class="posttext">Thanks for your hints.  I have figgured out a nice way of doing this in my launcher program.  Just in case it can help anyone else out there I will attach the launcher program script.<br />
<br />
Vytautas</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>