<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Callback does not reload page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Callback does not reload page NSIS Discussion" />
	
	<title> Callback does not reload page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Callback does not reload page</div>
<hr />
<div class="pda"><a href="t-262624.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=262624">Callback does not reload page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">GarBear</div><div class="date">28th December 2006, 20:28</div></div><div class="posttext">The CallBack function does not reload the page and when I check or uncheck the box it moves forward as if I clicked the next button.  What am I doing wrong?<br />
1) I call my custom page.<br />
<br />
Page custom &quot;PickWebsite&quot;<br />
<br />
2) I extract and check for a state change. Field 8 has the flag NOTIFY turned set in the custom ini file.<br />
<br />
Function PickWebsite<br />
<br />
 !insertmacro XPUI_INSTALLOPTIONS_EXTRACT &quot;pick_website.ini&quot;<br />
  Call GetWebsites<br />
 !insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; &quot;Choose the website and path that your installation will reside at.&quot;<br />
 !insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
 ReadINIStr $0 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
${If} $0 == 8<br />
Call CallBack<br />
${EndIf}<br />
 <br />
FunctionEnd<br />
<br />
3) Here is my call back function that if checked or unchecked i.e. 1 or 0 it will update the fields.<br />
<br />
Function CallBack<br />
    ; get value of checkbox<br />
   !insertmacro MUI_INSTALLOPTIONS_READ $R4 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
   ; get the field triggered<br />
   !insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Settings&quot; &quot;State&quot; <br />
<br />
   ${If} $R0 == &quot;2&quot;  ; if field 8 clicked<br />
<br />
         ReadIniStr $R3 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
				 <br />
      ${If} $R4 == &quot;1&quot;<br />
			<br />
         EnableWindow $R3 1<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;&quot;<br />
					 !insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; &quot;Create a new website set the name, path and port.&quot;<br />
					 !insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
					<br />
			${EndIf}<br />
      ${If} $R4 == &quot;0&quot;<br />
			<br />
         EnableWindow $R3 0<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
					WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
					Call GetWebsites<br />
				 !insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; &quot;Choose the website and path that your installation will reside at.&quot;<br />
				 !insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
					<br />
      ${EndIf}<br />
			<br />
		abort    ; return to page<br />
   ${EndIf}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th December 2006, 20:53</div></div><div class="posttext">You may want to take a look at the following wiki article:<br />
http://nsis.sourceforge.net/InstallOptions_The_Usage_of_NOTIFY_Flag</div></div><hr />


<div class="post"><div class="posttop"><div class="username">GarBear</div><div class="date">28th December 2006, 21:38</div></div><div class="posttext">The example doesn't yet make much sense to me.  Maybe you can help my by explaining what it is I should be doing. <br />
<br />
I see three items that make very little sense to me.  What does the SendMessage do GetDlgItem?  The EnableWindow appears to be throwing back a 1 to $HWNDPARENT which if I am not mistaken is reloading the window? <br />
 						SendMessage $2 ${WM_SETTEXT} 1 'STR:$1'<br />
	GetDlgItem $R0 $HWNDPARENT 1<br />
	EnableWindow $R0 1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th December 2006, 22:10</div></div><div class="posttext">GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 1<br />
Enables the next button when the user has selected an item.<br />
<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
Disables the next button when all items are unchecked.<br />
<br />
Controls that they have NOTIFY flag, are captured when their state is changed. They are able to change the state of other controls regarding to the user selection.<br />
Controls without NOTIFY flag, are captured when the next button is pressed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">GarBear</div><div class="date">28th December 2006, 22:21</div></div><div class="posttext">Thanks. That was very helpful, but I am still unclear on how to update the ini and the window without moving on to the next window. I guess I am still not understanding how I make it do that.  It seems to work in the example you gave me earlier &quot;http://nsis.sourceforge.net/InstallOptions_The_Usage_of_NOTIFY_Flag&quot; but I still don't know why and how to make mine work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th December 2006, 22:37</div></div><div class="posttext">I have no idea about XPUI though, try this:<br />
Page custom &quot;PickWebsite&quot; &quot;Callback&quot;<br />
<br />
Function PickWebsite<br />
;Call GetWebsites<br />
!insertmacro XPUI_INSTALLOPTIONS_EXTRACT &quot;pick_website.ini&quot;<br />
!insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; \<br />
&quot;Choose the website and path that your installation will reside at.&quot;<br />
!insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
FunctionEnd<br />
<br />
Function CallBack<br />
; get value of checkbox<br />
; get the field triggered<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
<br />
${If} $R0 == &quot;8&quot; ; if field 8 clicked<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R4 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
ReadIniStr $R3 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
<br />
${AndIf} $R4 == &quot;1&quot;<br />
<br />
EnableWindow $R3 1<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;&quot;<br />
;!insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; \<br />
&quot;Create a new website set the name, path and port.&quot;<br />
;!insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
Abort<br />
;${EndIf}<br />
${ElseIf} $R4 == &quot;0&quot;<br />
<br />
EnableWindow $R3 0<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
Call GetWebsites<br />
;!insertmacro XPUI_HEADER_TEXT &quot;Webserver Configuration&quot; \<br />
&quot;Choose the website and path that your installation will reside at.&quot;<br />
;!insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;pick_website.ini&quot;<br />
Abort<br />
${EndIf}<br />
<br />
;abort ; return to page<br />
;${EndIf}<br />
FunctionEnd<br />
EDIT: Added comments to red colored code, forgot to remove it :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">GarBear</div><div class="date">28th December 2006, 23:49</div></div><div class="posttext">Ok, so here is the new function.  I check and un-check the boxes but the other fields stay the same.  At one time using push and pop statments it seemed to work but I am hoping that what ever it is I am doing wrong I will be able to resolve soon. <br />
<br />
Function CallBack<br />
	!insertmacro XPUI_INSTALLOPTIONS_READ $R5 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
	!insertmacro XPUI_INSTALLOPTIONS_READ $R4 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
	ReadIniStr $R3 &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
	${If} $R5 = &quot;8&quot;<br />
		${AndIf} $R4 = &quot;1&quot;<br />
			EnableWindow $R3 1<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;&quot;<br />
			Abort &quot;Checkbox is set&quot;<br />
		${ElseIf} $R4 = &quot;0&quot;<br />
			EnableWindow $R3 0<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			Abort &quot;Checkbox not set.&quot;<br />
		${Else}<br />
			Abort &quot;Nothing changed&quot;<br />
	${EndIf}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">GarBear</div><div class="date">29th December 2006, 00:37</div></div><div class="posttext">I descided to put in messageboxes so that I could figure out what was happening.  as it turns out you just call the ini and ask what the HWND number is, then set it as a varriable and use the EnableWindow function to enable or disable. e.g. EnableWindow $2(the Var containing the window ID) and a number 1 or 0.  Zero meaning 'Disable' and one meaning 'Enable'.  It works beautifully now.  I'll probibally just comment out my popup windows now but thats it. Woo Hoo!  So now I finally have my IIS installer working.  <br />
<br />
Function CallBack<br />
	ReadINIStr $R5 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
	ReadINIStr $R4 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
	ReadINIStr $R3 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
	ReadINIStr $2 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;HWND&quot;<br />
	ReadINIStr $3 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;HWND&quot;<br />
	ReadINIStr $4 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;HWND&quot;<br />
	ReadINIStr $5 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;HWND&quot;<br />
	ReadINIStr $6 &quot;$PLUGINSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;HWND&quot;<br />
	${If} $R5 == 8<br />
		${Switch} $R4<br />
			${Case} 1<br />
			MessageBox MB_OK &quot;Case 1 R4 = $R4&quot;<br />
			EnableWindow $2 0<br />
			EnableWindow $3 1<br />
			EnableWindow $4 0<br />
			EnableWindow $5 1<br />
			EnableWindow $6 1<br />
			;The following are just a reminder they don't do anything.<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;&quot;<br />
			<br />
			Abort &quot;Checkbox is set&quot;<br />
			${Case} 0<br />
			MessageBox MB_OK &quot;Case 0 R4 = $R4&quot;<br />
			EnableWindow $2 1<br />
			EnableWindow $3 0<br />
			EnableWindow $4 1<br />
			EnableWindow $5 0<br />
			EnableWindow $6 0<br />
			;The following are just a reminder they don't do anything.<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 6&quot; &quot;Flags&quot; &quot;&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 9&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 4&quot; &quot;Flags&quot; &quot;&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 11&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			;WriteIniStr &quot;$PLUGINGSDIR\pick_website.ini&quot; &quot;Field 14&quot; &quot;Flags&quot; &quot;DISABLED&quot;<br />
			;Abort &quot;Checkbox not set.&quot;<br />
			${Default}<br />
			;Abort &quot;Nothing changed&quot;<br />
		${EndSwitch}<br />
		MessageBox MB_OK &quot;If = $R5 &amp; R4 = $R4 &amp; R3 = $R3&quot;<br />
		Abort &quot;Did Nothing&quot;<br />
	${EndIf}<br />
	MessageBox MB_OK &quot; Nothing was called R5 = $R5&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">29th December 2006, 04:16</div></div><div class="posttext">Well done!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>