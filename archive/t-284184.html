<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallDir using $PROGRAMFILES64, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallDir using $PROGRAMFILES64 NSIS Discussion" />
	
	<title> InstallDir using $PROGRAMFILES64 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallDir using $PROGRAMFILES64</div>
<hr />
<div class="pda"><a href="t-284184.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=284184">InstallDir using $PROGRAMFILES64</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ryuthomas</div><div class="date">2nd January 2008, 03:15</div></div><div class="posttext">Hi,<br />
<br />
I have two installers for my application, 1 for 32bit and 1 for 64bit.<br />
<br />
For 64bit, I am using:<br />
InstallDir &quot;$PROGRAMFILES64\${COMPANYNAME}\${APPNAME}&quot;<br />
and put <br />
SetRegView 64<br />
in function .onInit<br />
<br />
For 32bit, I am using:<br />
InstallDir &quot;$PROGRAMFILES\${COMPANYNAME}\${APPNAME}&quot;<br />
and put <br />
SetRegView 32<br />
in function .onInit<br />
<br />
After I build my installer, I test the installation in this following order:<br />
1. Run 32bit installer<br />
2. Run 64bit installer.<br />
<br />
When I run 64bit installer, the default installation directory is:<br />
C:\Program Files (x86)\MyCompany\MyApplication<br />
<br />
If I uninstall the 32bit application and re-run the 64bit installer, and then the default directory is correct:<br />
C:\Program Files\MyCompany\MyApplication<br />
<br />
Any idea why?<br />
<br />
Cheers :)<br />
<br />
PS.<br />
If I run 64bit installer first, the default directory is correct (C:\Program Files\MyCompany\MyApplication).<br />
<br />
I also checked 32bit installer after run 64bit installer and the default directory is also right (C:\Program Files (x86)\MyCompany\MyApplication).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd January 2008, 18:37</div></div><div class="posttext">You probably have the same InstallDirRegKey in both.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ryuthomas</div><div class="date">2nd January 2008, 23:56</div></div><div class="posttext">Hi Kichik,<br />
<br />
I do have InstallDirRegKey the same on both installer:<br />
InstallDirRegKey HKLM &quot;Software\${COMPANYNAME}\${APPNAME}&quot; &quot;&quot;<br />
<br />
But, I thought when I do &quot;SetRegView 64&quot; on .onInit function, it will automatically uses 64 bit Registry.<br />
<br />
So, in this case, when I do &quot;SetRegView 32&quot; (for 32 bit installer), the registry will be put in:<br />
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\MyCompany\MyApp<br />
<br />
Whereas in for &quot;SetRegView 64&quot; (for 64 bit installer), the registry will be put in:<br />
HKEY_LOCAL_MACHINE\SOFTWARE\MyCompany\MyApp<br />
<br />
Is my assumption right?<br />
<br />
Thank for your help again.<br />
<br />
Cheers :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd January 2008, 02:22</div></div><div class="posttext">InstallDirRegKey probably reads the registry before .onInit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ryuthomas</div><div class="date">4th January 2008, 02:41</div></div><div class="posttext">Hi Andres,<br />
<br />
Is it possible to tackle this problem?<br />
<br />
Thanks :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">4th January 2008, 06:08</div></div><div class="posttext">read from the registry yourself in .onInit, don't use InstallDirRegKey</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>