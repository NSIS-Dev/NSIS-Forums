<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ExecWait with a BitRock uninstaller, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ExecWait with a BitRock uninstaller NSIS Discussion" />
	
	<title> ExecWait with a BitRock uninstaller [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ExecWait with a BitRock uninstaller</div>
<hr />
<div class="pda"><a href="t-323879.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323879">ExecWait with a BitRock uninstaller</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Keabard</div><div class="date">8th November 2010, 13:16</div></div><div class="posttext">Hi,<br />
<br />
I've read several posts on these forums about the ExecWait instruction in the &quot;Uninstall&quot; section. Unfortunately, the uninstall.exe I try to launch with ExecWait is not on this list :<br />
<br />
http://unattended.sourceforge.net/installers.php<br />
<br />
As you may have guessed, in my &quot;Uninstall&quot; section, I try to run an uninstaller made with BitRock :<br />
<br />
    ExecWait '&quot;$INSTDIR\uninstall.exe&quot; --mode unattended'<br />
<br />
The &quot;--mode unattended&quot; makes the uninstaller not prompting a &quot;Yes/No&quot; question, and pops several DOS consoles in the background that do their jobs.<br />
<br />
However, ExecWait does not wait, the next instructions are being executed while the DOS consoles do their jobs too.<br />
<br />
What could I do ? <br />
<br />
Thank you,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">8th November 2010, 13:29</div></div><div class="posttext">ExecWait ALWAYS waits for its child process.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">8th November 2010, 13:35</div></div><div class="posttext">Unfortunately if ExecWait doesn't appear to actually wait, it's usually because the program you launched, launched another process itself.  This applies to NSIS as well; http://nsis.sourceforge.net/When_I_use_ExecWait_uninstaller.exe_it_doesn%27t_wait_for_the_uninstaller<br />
<br />
As you can see from that page.. NSIS has an option in place to disable this mechanism.  I skipped the BitRock FAQ, but didn't see anything similar in there.. but you could have a look around or ask the developers.<br />
<br />
If there isn't a built-in option, and the actual author didn't include an option either, you're usually left with rather hacky solutions.  E.g. if you know what process it spawns, you could try checking for that process and only continue once that process is gone... or if you know the uninstaller removes a certain file last (having determined this by running the uninstaller and watching what it does with e.g. Process Monitor), then your uninstaller could check whether that file has been removed and only continue once it has been.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Keabard</div><div class="date">17th November 2010, 16:42</div></div><div class="posttext">thanks for your answers.<br />
<br />
Unfortunately, it seems i'm obliged to use hacky solutions. I do think i'm going to use the &quot;CheckIfFileIsDeleted&quot; one.<br />
<br />
However... how can I tell my script to stop and to continue only once a certain file/directory is deleted ? I did not manage to find this info.<br />
<br />
Thank you,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th November 2010, 19:13</div></div><div class="posttext">${DoWhile} ${FileExists} [path]<br />
  Sleep 1000<br />
${Loop}Or:${For} $R0 1 60<br />
  Sleep 1000<br />
  ${IfNot} ${FileExists} [path]<br />
    ${Break}<br />
  ${EndIf}<br />
${Next}<br />
${If} $R0 == 61<br />
; oops, timeout<br />
${EndIf}Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Keabard</div><div class="date">18th November 2010, 08:37</div></div><div class="posttext">Thank you Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>