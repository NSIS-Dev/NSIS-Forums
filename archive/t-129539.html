<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" UPX before Nsis compression, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  UPX before Nsis compression NSIS Discussion" />
	
	<title> UPX before Nsis compression [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  UPX before Nsis compression</div>
<hr />
<div class="pda"><a href="t-129539.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129539">UPX before Nsis compression</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">24th March 2003, 03:17</div></div><div class="posttext">This is a good question :D<br />
<br />
Is there a way to compress our main apps with UPX before<br />
the nsis compress it during compilation?<br />
In that way will be smaller.<br />
Thanks :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">24th March 2003, 08:26</div></div><div class="posttext">try this<br />
<br />
!system &quot;[path_to_upx]\upx.exe file(s)&quot;<br />
<br />
on top of the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th March 2003, 11:55</div></div><div class="posttext">Compress the installer header itself<br />
<br />
There is an example in the nsisconf.nsh file, you have to use !packhdr (!system won't work because it's executed before generating the file).<br />
<br />
Compress files packaged by the installer<br />
<br />
Use !system to call UPX<br />
<br />
Note<br />
<br />
UPX can give problems with older virus scanners, so you should only use it if those few KB's are really important.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">24th March 2003, 21:06</div></div><div class="posttext">Ok, done :D<br />
<br />
!system &quot;C:\path\upx.exe -9 app.exe&quot; <br />
:up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">25th March 2003, 17:05</div></div><div class="posttext">For extreme packing with UPX (may take a while) try:<br />
 --best --crp-ms=999999 --compress-icons=0 --nrv2d</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">25th March 2003, 21:36</div></div><div class="posttext">Can you write a example like *mine*:<br />
&quot;C:\path\upx.exe -9 app.exe&quot;<br />
:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">25th March 2003, 22:06</div></div><div class="posttext">Sure.. and to make it extra fun we'll use !defines.  joy.<br />
<br />
;---- Defines --------<br />
!define AppDIR &quot;C:\Progra~1\MyApp&quot;<br />
!define AppEXEName &quot;MyApp.exe&quot;<br />
!define UPXDir &quot;C:\Progra~1\UPX&quot;<br />
!define UPXEXENameAndParams &quot;upx.exe --best --crp-ms=999999 --compress-icons=0 --nrv2d&quot;<br />
;--------------------<br />
!System ${UPXDir}\${UPXEXENameAndParams} ${AppDIR}\${AppEXEName}&quot;<br />
;--------------------<br />
<br />
<br />
!System seems to be limited to 8 chars (DOS).. so don't forget to truncate the dir &amp; filenames with ~#.<br />
<br />
;--- (and without !defines :() ---<br />
!System &quot;C:\Progra~1\UPX\UPX.exe --best --crp-ms=999999 --compress-icons=0 --nrv2d C:\Progra~1\MyApp\MyApp.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">25th March 2003, 22:09</div></div><div class="posttext">Lastly, please don't compress your icons when using UPX.  Be good and use &quot;--compress-icons=0&quot; along with your command-line parameters.  :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">25th March 2003, 22:22</div></div><div class="posttext">done :D a little small :up: thanks dude</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">25th March 2003, 22:44</div></div><div class="posttext">You're mighty welcome, dude.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>