<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Still having major problems upgrading script., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Still having major problems upgrading script. NSIS Discussion" />
	
	<title> Still having major problems upgrading script. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Still having major problems upgrading script.</div>
<hr />
<div class="pda"><a href="t-152068.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152068">Still having major problems upgrading script.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">9th October 2003, 13:52</div></div><div class="posttext">Having headaches upgrading my script from 2.0b3 to CVS 2.0b4<br />
<br />
Basically I have now got it to compile (it was being VERY picky about where I put !insertmacro MUI_LANGUAGE &quot;English&quot;).<br />
<br />
Problem is now, when I run my compiled installer, I end up with 3 reboot dialogs!!! (this was a 100% working B3 script).<br />
<br />
Anyone else seen this (I used latest CVS snapshot).<br />
<br />
Here is the start &quot;chunk&quot; of my script:<br />
<br />
;//My Script<br />
<br />
SetCompressor ZLib<br />
CRCCheck On<br />
<br />
;Names<br />
!include &quot;MUI.nsh&quot;<br />
!include WinMessages.nsh<br />
!define IDOK 1<br />
name &quot;${VERSION}&quot; ;Installer name<br />
BrandingText  &quot;Some Text Here&quot;<br />
!define MUI_ICON  &quot;my.ico&quot;<br />
!define MUI_UNICON  &quot;my.ico&quot;<br />
<br />
;Pages<br />
!insertmacro MUI_PAGE_WELCOME<br />
!ifdef BROWSE<br />
    !insertmacro MUI_PAGE_DIRECTORY<br />
!endif<br />
!ifdef KEYNEEDED<br />
	Page custom KEYINSTALL  ;CustomDialog<br />
	var SrcFileLocation  <br />
	var CustomDialogKeyPress<br />
	Page custom STARTINSTALL  ;CustomDialog<br />
!endif<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
UninstPage custom un.RebootDialog  ;CustomDialog<br />
<br />
;Language<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE &quot;WelcomePageInit&quot; <br />
!insertmacro MUI_PAGE_WELCOME <br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE &quot;FinishPageInit&quot; <br />
!insertmacro MUI_PAGE_FINISH <br />
<br />
<br />
<br />
;Settings<br />
!define MUI_FINISHPAGE_NOAUTOCLOSE<br />
!define MUI_HEADERBITMAP_RIGHT<br />
!define MUI_ABORTWARNING<br />
!define MUI_HEADERBITMAP  &quot;dek.bmp&quot;<br />
!define MUI_COMPONENTSPAGE_SMALLDESC<br />
!define MUI_TEXT_WELCOME_INFO_TEXT &quot;This is some welcome text&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th October 2003, 14:03</div></div><div class="posttext">Actually, it should be finish, welcome and then finish again. It's because you have isnerted the finish page macro, welcome after it and then the finish macro again. If you only want one finish page, insert it only once.<br />
<br />
The settings should also be present above the pages' macros so the MUI will know which page that setting belongs to.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">9th October 2003, 14:11</div></div><div class="posttext">Duh..  Sorry about that.  Obvious when you mentioned it...  Annoyed I missed it...<br />
<br />
Working fine now....</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>