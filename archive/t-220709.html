<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with MUI and Custom Pages, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with MUI and Custom Pages NSIS Discussion" />
	
	<title> Problem with MUI and Custom Pages [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with MUI and Custom Pages</div>
<hr />
<div class="pda"><a href="t-220709.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=220709">Problem with MUI and Custom Pages</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Lightning20</div><div class="date">5th July 2005, 11:04</div></div><div class="posttext">Hi !<br />
<br />
I use MUI and I have a small problem with custom pages. Actually, I check some keys in the registry. If they exist, the installation carries on. If not, a custom page appears asking the user to enter some parameters.<br />
<br />
<br />
ReadRegStr &quot;$REG_VAR&quot; HKLM SOFTWARE\My app &quot;param&quot;<br />
StrCmp &quot;$REG_VAR&quot; &quot;&quot; Error ok <br />
<br />
Error: !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;custompage.ini&quot;<br />
<br />
ok: {next steps}<br />
<br />
<br />
But it doesn't work. The page appears but the buttons are disabled and I can't go to the next steps of the installation. What's wrong?<br />
<br />
Thx for help !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th July 2005, 11:23</div></div><div class="posttext">Works fine for me:<br />
Function CustomPageA<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
<br />
  MessageBox MB_YESNO|MB_ICONQUESTION &quot;Display $(TEXT_IO_TITLE)?&quot; IDNO Skip<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ioA.ini&quot;<br />
<br />
  Skip:<br />
<br />
FunctionEnd (Modified Modern UI\InstallOptions.nsi example script).<br />
<br />
What happens if you remove the code that skips over the page (so the page is always shown).<br />
<br />
Are you sure there's another page after this custom page?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lightning20</div><div class="date">5th July 2005, 13:09</div></div><div class="posttext">The regular way to insert a custom page would be like that:<br />
!insertmacro MUI_PAGE_WELCOME<br />
Page custom CustomPage<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
However if I insert the Custom page here, it will always be displayed, or i want to display it only if some reg keys doesn't exist. That's why I tried to insert it in my section instead of in the listing of pages. But it doesn't work either.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th July 2005, 13:26</div></div><div class="posttext">Look at my code above.<br />
<br />
You need to jump over the MUI_INSTALLOPTIONS_DISPLAY call in the CustomPage function.<br />
<br />
Edit:<br />
Also, look at this topic (latest topic on this forum). He's doing a similar thing.<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=220713<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lightning20</div><div class="date">5th July 2005, 15:29</div></div><div class="posttext">Ok thx, the page works now :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>