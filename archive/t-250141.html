<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS skips files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS skips files NSIS Discussion" />
	
	<title> NSIS skips files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS skips files</div>
<hr />
<div class="pda"><a href="t-250141.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250141">NSIS skips files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">aleksanteri</div><div class="date">1st July 2006, 18:47</div></div><div class="posttext">I am learning NSIS and, as a test, made an installer for the original Notepad. I also added just a readme.txt with a few lines of text :D and compied it with nsis. But I get just these messages:<br />
<br />
Skipped: NOTEPAD.EXE<br />
Skipped: readme.txt<br />
Completed <br />
<br />
Also the directory page disables the continue button :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st July 2006, 18:49</div></div><div class="posttext">Your disk is full.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aleksanteri</div><div class="date">2nd July 2006, 08:00</div></div><div class="posttext">http://kotisivu.mtv3.fi/aleksanteri2005/used_free.bmp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd July 2006, 10:20</div></div><div class="posttext">Are you trying to extract to the root C:\?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">2nd July 2006, 11:36</div></div><div class="posttext">could it be windows file protection?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">2nd July 2006, 18:50</div></div><div class="posttext">I looked at your sample script and have made a few  obervations:<br />
<br />
First, look at your FileExtract function:<br />
<br />
Function FileExtract<br />
   File /a notepad.exe<br />
   File /a readme.txt<br />
FunctionEnd<br />
<br />
Since you are have not specified the path to the files, the compiler is going to assume the files are in the same directory as your install script.  You should include the full path to the files like this:<br />
<br />
Function FileExtract<br />
   File /a &quot;C:\windows\notepad&quot;<br />
   File /a &quot;C:\pathToYourFile\readme.txt&quot;<br />
FunctionEnd<br />
<br />
<br />
Next, look at this line:<br />
<br />
Page instfiles confirm FileExtract &quot;&quot;<br />
<br />
I wonder why you use the function FileExtract as your show function.  It would be more logical to do away with the FileExtract function and instead put the commands directly in a section block.  This way, the user can see the progress of file extraction and would have a progress bar to indicate how far along your installation is.<br />
<br />
Third, look at this line:<br />
<br />
InstallDir $PROGRAMFILES/Notepad<br />
<br />
Couple suggestions here:[list=1]<br />
 Use a backslash instead of a forward slash in the path.<br />
 Include quotes around the path.  I usually do this mostly for good form. But it's also good practice to include quotes just in case you have a path with a space in the name. (ie &quot;C:\program files&quot;).<br />
[/list=1]<br />
And last, I noticed that you have set $INSTDIR to be &quot;$PROGRAMFILES\Notepad&quot; (from the command above).  But, in the extraction function, you have not set an output directory.  Insert this before your file commands:<br />
<br />
SetOutPath &quot;$INSTDIR&quot;<br />
<br />
<br />
(Alternatively, you can modify your file commands to include the /oname switch, which allows you to specify the output name/directory for each file.  The drawback is that you can't use wild cards with the /oname switch.)<br />
<br />
Edit:<br />
Almost forgot:<br />
The likely reason that your next button was disabled on your directory page was that the folder $PROGRAMFILES\notepad did not yet exist when the directory page was displayed.  You'll either need to create the directory before displaying the page or (probably better) would be to utilize the &quot;DirVerify leave&quot; option, allowing you to confirm/create the directory before allowing the user to proceed.  See the NSIS help for useage.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd July 2006, 18:54</div></div><div class="posttext">I'm sure his File instructions are fine, because if they weren't his script would not compile. However, missing SetOutPath is probably the issue.<br />
<br />
aleksanteri: Why are your File instructions in a Function?<br />
You won't see any progress bar movement unless you have them in a Section.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aleksanteri</div><div class="date">4th July 2006, 08:52</div></div><div class="posttext">Well thanks for showing my mistakes, but this is my first Nsis and I'm not that good here yet :D<br />
<br />
I thought I wouldn't need sections when I had the pages that were the progress... :weird: <br />
<br />
Now I came up a question. How do I point to pages in a section?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th July 2006, 12:47</div></div><div class="posttext">You can't. You should always show pages first where you collect information and then do the installation in Sections.<br />
If you start extracting files in between it won't become a simple uninstall if the user decides to cancel the setup before proceding to the install files page.<br />
<br />
If you want to show a custom page depending on selected components, search the forum.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">4th July 2006, 15:10</div></div><div class="posttext">Hi aleksanteri,<br />
<br />
I think it may be helpful to you to try the examples that come with NSIS, you can learn a lot from them by changing the script in the example to to a little bit other things.<br />
<br />
Welcome in the NSIS group, and good luck in your quest to the perfect installer...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aleksanteri</div><div class="date">5th July 2006, 17:12</div></div><div class="posttext">Thanks, I will take a look in the examples to see the structure. :)<br />
<br />
EDIT: The install now extracts files correctly. Thanks a lot for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>