<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Radiobuttons OnSelChange SectionGroup error, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Radiobuttons OnSelChange SectionGroup error NSIS Discussion" />
	
	<title> Radiobuttons OnSelChange SectionGroup error [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Radiobuttons OnSelChange SectionGroup error</div>
<hr />
<div class="pda"><a href="t-295686.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295686">Radiobuttons OnSelChange SectionGroup error</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">8th August 2008, 16:33</div></div><div class="posttext">Greetings.  Very strange behavior.  Context is the components screen, and I'm trapping the onClick event with OnSelChange.  That routine uses the following code to stick into $1 the value of the radiobox that was clicked.  based on that value, I do stuff controlled in a case statement.  I put a message box at the end of this code to show the output of the click and this string of macros.<br />
<br />
MOST of these radio buttons are not displayed. ( set to &quot;&quot; ) but because of the way that onSelchange reports the return value from a declared section, the number increases reguardless of if the section is displayed or not... so that if sections 0-9 are hidden, and the first checkbox on the components screen is displayed it will return 10 as the value that was clicked.  Ok.. fine... <br />
<br />
but now, I've added a sectiongroup and its all gone to crap.  If I click on the sectiongroup line or checkbox, it returns 19 (The ordinal id for the last checkbox - section: MDI_sa) and then if I click it again, it returns 18 ( the ordinal of the section labled: MDI_mm )  And then it repeats. 19, 18 ,19 ,18   It never returns 15 ( the ordinal value that would be assigned for the sectiongroup marker if it treated them the same...but if they don't treat them the same, then there is no ordinal 19 and it doesn't make sense again...) <br />
<br />
<br />
       StrCpy $1 $BaseRadioDefault<br />
          !insertmacro StartRadioButtons $1 <br />
            !insertmacro RadioButton ${g1o1} ; ordinal 0<br />
; most of these are hidden at any one time....<br />
            !insertmacro RadioButton ${g1o2} ; ordinal 1<br />
            !insertmacro RadioButton ${g1o3} ; ord 2<br />
            !insertmacro RadioButton ${g1o4} ; ord 3<br />
            !insertmacro RadioButton ${g1o5} ; ord 4<br />
            !insertmacro RadioButton ${g1o6} ; ord 5<br />
            !insertmacro RadioButton ${g1o7} ; ord 6<br />
            !insertmacro RadioButton ${g1o8} ; ord 7<br />
            !insertmacro RadioButton ${g1o9} ; ord 8<br />
            !insertmacro RadioButton ${g1oA} ; ord 9<br />
            !insertmacro RadioButton ${g1oB} ; ord 10<br />
            !insertmacro RadioButton ${g1oC} ; ord 11<br />
            !insertmacro RadioButton ${g1oA2} ; ord 12<br />
            !insertmacro RadioButton ${g1o6B} ; ord 13   <br />
            !insertmacro RadioButton ${g1o7B}  ; ord 14 <br />
            !insertmacro RadioButton ${MDI}     <br />
; This is the group section header. SHOULD Be ordinal 15<br />
            !insertmacro RadioButton ${MDI_mx} ; ord 16 <br />
; none of these are hidden<br />
            !insertmacro RadioButton ${MDI_dc} ; ord 17 <br />
; they will always display<br />
            !insertmacro RadioButton ${MDI_mm} ; ord 18 <br />
            !insertmacro RadioButton ${MDI_sa} ; ord 19?? <br />
        !insertmacro EndRadioButtons<br />
<br />
MessageBox MB_OK &quot;Clicked On: $1&quot; ; results in alternating<br />
; values of 19 and 18 when you click on the group header.<br />
<br />
<br />
<br />
I attached the pic of the way the screen displays with two normal options visible and the bottom group showing.<br />
<br />
Please, any guidance as to what I'm assuming incorrectly?<br />
<br />
<br />
Thanks<br />
_Andy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">8th August 2008, 21:36</div></div><div class="posttext">I'm not sure, but it seems as if it automatically sets $1 to be the last in the list, if there was nothing selected.... and if you click on the SectionGroup 'radiobox' it acts as if theres nothing selected.... and somehow it sets it to the last one...<br />
<br />
Then.... if a click is registered and then it doesn't find which section is claiming the Selected Flag ( because the SectionGroup doesn't claim it....???? ) it defaults to the last unselected one....???   That doesn't make a lot of sense.... but its as if the click on the SectionGroup header doesn't count as a click..... and the macro isn't designed to handle this....?...?...?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Andrew Wallo</div><div class="date">11th August 2008, 18:49</div></div><div class="posttext">Greetings everyone,<br />
<br />
I have a clear answer now to the issue that became rather cluttered on this post:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;postid=2388180#post2388180<br />
<br />
But a less cluttered framing of the question would be:<br />
<br />
What is the effect that a SectionGroup has on the Radiobutton macros..... used in this fashion:<br />
<br />
!insertmacro StartRadioButtons $1 <br />
   !insertmacro RadioButton ${1notINgroup}<br />
   !insertmacro RadioButton ${2notINgroup}<br />
   !insertmacro RadioButton ${3InGroup}<br />
   !insertmacro RadioButton ${4InGroup}<br />
   !insertmacro RadioButton ${5InGroup}<br />
!insertmacro EndRadioButtons<br />
<br />
The simple state is that if the user clicks on the section group header in teh components page.... then ALL of the untis inside it will be marked as ON... and hence 3 will be on, but 4 will trump it, and 5 will trump 4.  <br />
<br />
The only way to fix this, is to do soemthing like this:<br />
<br />
; presuming that 3InGroup,4InGroup,5InGroup is wrapped with<br />
; a section group marker titled InGroup<br />
<br />
<br />
!insertmacro StartRadioButtons $1 <br />
   !insertmacro RadioButton ${1notINgroup}<br />
   !insertmacro RadioButton ${2notINgroup}<br />
<br />
<br />
; get flags for group section <br />
SectionGetFlags ${InGroup} $TempRadioButtonFlagsVar <br />
; test against 35 which is the setting for if a user<br />
; clicked directly onto the section group header....<br />
; the flags for the group header would be 98 if they had <br />
; clicked on a sub option under the group... <br />
; See the flags in the help index under SectionGetFlags<br />
 <br />
StrCmp $TempRadioButtonFlagsVar &quot;35&quot; 0 NextRadioButton<br />
;  if we drop in then we clear the group....<br />
IntOp $TempRadioButtonFlagsVar $TempRadioButtonFlagsVar &amp; ${SECTION_OFF} <br />
SectionSetFlags ${InGroup} $TempRadioButtonFlagsVar<br />
NextRadioButton:<br />
<br />
   !insertmacro RadioButton ${3InGroup}<br />
   !insertmacro RadioButton ${4InGroup}<br />
   !insertmacro RadioButton ${5InGroup}<br />
!insertmacro EndRadioButtons</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>