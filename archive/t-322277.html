<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Reboot now, Reboot Later Processing, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Reboot now, Reboot Later Processing NSIS Discussion" />
	
	<title> Reboot now, Reboot Later Processing [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Reboot now, Reboot Later Processing</div>
<hr />
<div class="pda"><a href="t-322277.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322277">Reboot now, Reboot Later Processing</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Squirre1</div><div class="date">8th September 2010, 19:36</div></div><div class="posttext">I have some logging that I do in my: Function .onInstSuccess<br />
<br />
At the end of my installation, I do not have it do a manual reboot, I let it ask... And if the user selects the reboot later option, it does not appear to process the .onInstSuccess, that being the case, what exit function does it process, .onRebootFailed..<br />
<br />
Thanks,<br />
<br />
Squirre1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">9th September 2010, 05:02</div></div><div class="posttext">Try to use Function .onGUIEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Squirre1</div><div class="date">9th September 2010, 12:42</div></div><div class="posttext">Naaa... I dont initialize logging unless the installation is actually started, not just ran.. Sooo, .onGUIEnd is not a good option, it will attempt to log closing lines when not initialized...<br />
<br />
I just need to know the closing function that is called if someone chooses not to reboot at the end of any installation..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">9th September 2010, 13:59</div></div><div class="posttext">I'm guessing you're using MUI's built-in reboot option?  If so, there is no such callback.<br />
<br />
Go to ProgramFiles\NSIS\Contrib\Modern UI 2\Pages\Finish.nsh .  Adjust these lines...<br />
<br />
<br />
      ;Check whether the user has chosen to reboot the computer<br />
      ${if} ${RebootFlag}<br />
        SendMessage $mui.FinishPage.RebootNow ${BM_GETCHECK} 0 0 $mui.FinishPage.ReturnValue<br />
        ${if} $mui.FinishPage.ReturnValue = ${BST_CHECKED}<br />
          Reboot<br />
        ${else}<br />
          /* Your code would go here */<br />
          Return<br />
        ${endif}<br />
      ${endif}</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>