<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Error reporting/handling, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Error reporting/handling NSIS Discussion" />
	
	<title> Error reporting/handling [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Error reporting/handling</div>
<hr />
<div class="pda"><a href="t-300245.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=300245">Error reporting/handling</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">afisk</div><div class="date">23rd November 2008, 19:28</div></div><div class="posttext">I'd like to have my installer catch any errors and then do a quick post to my site with any error data it catches.<br />
<br />
Anyone know how to do this?  I just implemented it with my OSX installers.  Much easier than waiting for people to report errors and then trying to squeeze details out of 'em!<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">24th November 2008, 12:06</div></div><div class="posttext">depending on the level of errors you need, you can either go with the default callbacks (installation failed, user abort, etc.) or wrap important parts of your code in..<br />
<br />
clearErrors<br />
&lt;code&gt;<br />
ifErrors<br />
<br />
bits, where you set the error details yourself (NSIS doesn't have a variable that contains the error message - if even applicable).<br />
<br />
Then use something like inetc ( http://nsis.sourceforge.net/Inetc_plug-in ) to submit the data to your website (either GET or POST).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">afisk</div><div class="date">25th November 2008, 02:16</div></div><div class="posttext">Thanks a lot.  I noticed the inst failed callabck, but is that called on any failure?  If so, it's perfect.  The documentation's slightly confusing on this point.<br />
<br />
On ifErrors, that basically checks if the return code of the anything in the prior code block was non-zero?  It's a non-zero return code anywhere in the code block, not just the last call, right?<br />
<br />
Thanks very much.<br />
<br />
-Adam</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">25th November 2008, 02:53</div></div><div class="posttext">Originally posted by afisk <br />
Thanks a lot.  I noticed the inst failed callabck, but is that called on any failure?<br />
'fraid not - it's only called in one situation: the user hitting the Cancel button on the InstFiles page (the page where actual file installation commences).<br />
The cancel button itself is only enabled if a File couldn't be extracted, or script code (in one of the sections, for example), called Abort.<br />
<br />
So if you have, for example, a page that grabs a piece of registry information on which your installer depends, and that registry information is missing, .onInstFailed won't be called, as missing registry information isn't an installation error problem.<br />
<br />
If you have such situations to deal with, then, more than likely, you'd want to work with the ClearErrors/code/IfErrors bit as that will give you a bit more information than just &quot;the user hit cancel while installing files&quot;.<br />
<br />
Originally posted by afisk On ifErrors, that basically checks if the return code of the anything in the prior code block was non-zero?  It's a non-zero return code anywhere in the code block, not just the last call, right?<br />
Correct - it's for all of the code since the last ClearErrors.  If any call after the last ClearErrors sets the error flag, then IfErrors will be true - you won't be able to tell which call, exactly, caused the error so choose your code blocks carefully.<br />
<br />
In theory it should be possible to wrap every NSIS command with an error handler, but it would be quite a bit of work on the level of LogicLib... and reading through logiclib code makes my head hurt ;)  Perhaps a future version of NSIS will have an internal variable or stack that contains (a) userfriendly error message(s), at least for developers' use.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>