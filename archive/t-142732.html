<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Questions on InstallOptions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Questions on InstallOptions NSIS Discussion" />
	
	<title> Questions on InstallOptions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Questions on InstallOptions</div>
<hr />
<div class="pda"><a href="t-142732.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142732">Questions on InstallOptions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">19th July 2003, 02:23</div></div><div class="posttext">This is part of my script<br />
Function selectaction<br />
 selectactionstart:<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;menu01.ini&quot;<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;menu01.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; selectactionend &quot;&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;menu01.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; selectactionend &quot;&quot;<br />
<br />
  MessageBox MB_ICONINFORMATION|MB_OK &quot;You have to choose on action, otherwise 'cancel'&quot;<br />
  Goto  selectactionstart<br />
<br />
 selectactionend:<br />
FunctionEnd<br />
<br />
<br />
RadioOptions:<br />
Field 1 is &quot;Save&quot;<br />
Field 2 is &quot;Restore&quot;<br />
(default is &quot;Save&quot;)<br />
<br />
If both are stated=0 (a message box normally appears) and i press &quot;cancel&quot; i get the cancel dialog but then i get the message box.<br />
How can i determine that the cancel button was pressed and quit the installer/program?<br />
<br />
There's another question:<br />
If both are stated=0 (a message box normally appears) and i press &quot;cancel&quot; i get the cancel dialog (confirming YES), then the message box - then program ends up with no final page..<br />
<br />
<br />
page custom selectaction<br />
page custom selectsaveitems<br />
page custom selectrestoreitems<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
Function selectsaveitems<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;menu01.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; &quot;&quot; selectsaveitemsskip<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;savemail.ini&quot;<br />
 selectsaveitemsskip:<br />
FunctionEnd<br />
<br />
Function selectrestoreitems<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;menu01.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; &quot;&quot; selectrestoreitemsskip<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;restmail.ini&quot;<br />
 selectrestoreitemsskip:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">19th July 2003, 05:51</div></div><div class="posttext">If the user clicks cancel it cancels the whole installer not only the current page and therefore the finish page is not shown.<br />
<br />
If you want to disable the confirmation message when the user clicks cancel remove this line: &quot;!define MUI_ABORTWARNING&quot;.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th July 2003, 12:01</div></div><div class="posttext">If you're using a CVS version and not b3 then it would be a better idea to put the checking code in the leave function of the page. This way it will only check when the user tries to move to the next page.<br />
<br />
If you're using b3 then you should check for IO's return value. Use the MUI_INSTALLOPTIONS_DISPLAY_RETURN macro and pop the result. If it's &quot;success&quot; then the user is trying to move on to the next page and you should check the input.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">19th July 2003, 12:10</div></div><div class="posttext">@kichik - i use the latest cvs.<br />
<br />
@Vytautas<br />
<br />
<br />
the 1st problem ist to get the state of the cancel button although it is not defined in the IO<br />
<br />
the 2nd problem is that in case of the cancel button the cancel dialog appears (confirmed yes) and then the message box (which has not to appear).<br />
Then when i  choose &quot;save&quot; (or &quot;restore&quot;) and press &quot;next&quot; the program quits without any further page (or comment).<br />
<br />
<br />
BTW is it possible to call these pages as a function? And if not why not and how then?<br />
page custom selectaction<br />
page custom selectsaveitems<br />
page custom selectrestoreitems<br />
<br />
Function code pls see 1st posting.<br />
<br />
Cause: it is recommended to recourse those pages if the end has been reached.<br />
<br />
##edit again<br />
it is possible to transfer some vars to the IO?<br />
I need to display the $INSTDIR here:<br />
[Field 7]<br />
Type=DirRequest<br />
Left=10<br />
Right=300<br />
Top=95<br />
Bottom=108<br />
State=</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">19th July 2003, 16:43</div></div><div class="posttext">back to my last question<br />
<br />
is this somehow possible?<br />
[Field 7]<br />
Type=DirRequest<br />
Left=10<br />
Right=300<br />
Top=95<br />
Bottom=108<br />
State=$INSTDIR<br />
<br />
&quot;State=&quot; has to be a directory which is read out somewhere before as default.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2003, 11:45</div></div><div class="posttext">To change the INI file on runtime use the MUI_INSTALLOPTIONS_WRITE macro.<br />
<br />
If you'll use the leave function you won't need to worry what the user clicked on. The check will only be done when the user clicks next and when he clicks cancel it will not show both message boxes.<br />
<br />
What do you mean by calling the pages as a function? Recoursing them? Do you want to show them again? If so you'll have to insert more page commands. Calling the creator function yourself will not work as expected.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>