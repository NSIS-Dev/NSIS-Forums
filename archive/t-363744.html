<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Quit NSIS if REG Entry Not Present, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Quit NSIS if REG Entry Not Present NSIS Discussion" />
	
	<title> Quit NSIS if REG Entry Not Present [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Quit NSIS if REG Entry Not Present</div>
<hr />
<div class="pda"><a href="t-363744.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=363744">Quit NSIS if REG Entry Not Present</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gruntlord6</div><div class="date">14th June 2013, 11:29</div></div><div class="posttext">I am not new to NSIS, but I am not familiar with most of the advanced functions. Right now,  my installer reads the reg entry and sets it as the default install path, and shows the standard Instfiles page. What I want to be able to do, is run a check when the installer runs (oninit right?) that will check for that reg entry and display a dialogue if it is not found, and when it displays that dialogue, it should exit afterword. What is the best way to go about doing this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th June 2013, 12:20</div></div><div class="posttext">http://nsis.sourceforge.net/Abort</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gruntlord6</div><div class="date">14th June 2013, 12:28</div></div><div class="posttext">http://nsis.sourceforge.net/Abort<br />
<br />
Thanks for the help! That solves half my problem. Can you tell me how I would perform the check? I would imagine something like:<br />
Function onInit<br />
If RegKey HKLM &quot;Software\(My Application)&quot; &quot;&quot; false:<br />
MessageBox MB_OK &quot;You need (My Application) installed to use this installer.&quot;<br />
Abort<br />
FunctionEnd<br />
<br />
I hope I don't seem lazy, I would just like an example to work from.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th June 2013, 12:43</div></div><div class="posttext">Read the value from registry:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.2.12<br />
<br />
Check for errors:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.9<br />
<br />
Show Messagebox:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.15</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gruntlord6</div><div class="date">14th June 2013, 17:57</div></div><div class="posttext">Read the value from registry:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.2.12<br />
<br />
Check for errors:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.9<br />
<br />
Show Messagebox:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.15<br />
<br />
I am not to sure what exactly you are purposing. The Messagebox is indeed what I am looking for to do the text output, and that part is now taken care of. Not sure how I am supposed to utilize  IfErrors with ReadRegStr to get my result. It would really help to give an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th June 2013, 18:11</div></div><div class="posttext">The error flag will be set and $x will be set to an empty string (&quot;&quot;) if the string is not present.<br />
ReadRegStr $0 HKLM &quot;Software\(My Application)&quot; &quot;&quot;<br />
IfErrors 0 +3<br />
MessageBox MB_OK &quot;You need (My Application) installed to use this installer.&quot;<br />
Abort</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th June 2013, 23:32</div></div><div class="posttext">Call ClearErrors before ReadRegStr as well in case you later add code which sets the error flag resulting in an incorrect Abort.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gruntlord6</div><div class="date">17th June 2013, 12:35</div></div><div class="posttext">Call ClearErrors before ReadRegStr as well in case you later add code which sets the error flag resulting in an incorrect Abort.<br />
<br />
Stu<br />
<br />
Thank you both! The installer now works as expected.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>