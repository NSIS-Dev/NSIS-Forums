<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Is this bug or what?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Is this bug or what? NSIS Discussion" />
	
	<title> Is this bug or what? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Is this bug or what?</div>
<hr />
<div class="pda"><a href="t-216079.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=216079">Is this bug or what?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">playwin2</div><div class="date">15th May 2005, 16:55</div></div><div class="posttext">Hi,<br />
<br />
I am trying to disable certain elements of the Dir. selection page when the installer is not running for the 1st time. The following code does that but it also disabling the keyboard. (I mean the eneter key, and hot keys(Alt N, Alt B etc.) are not working...)<br />
<br />
; HM NIS Edit Wizard helper defines<br />
!define PRODUCT_DIR_REGKEY &quot;Software\Microsoft\Windows\CurrentVersion\App Paths\MyAPP.exe&quot;<br />
<br />
....<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW CustomDirShow<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
....<br />
<br />
InstallDir &quot;$PROGRAMFILES\MyApp&quot;<br />
InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;<br />
<br />
Var IsPresent<br />
<br />
Function .onInit<br />
;Check if product already installed...<br />
  ReadRegStr $IsPresent HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;<br />
FunctionEnd<br />
<br />
;Disable the Dir. selection if running in upgrade mode...<br />
Function CustomDirShow<br />
  StrCmp $IsPresent &quot;&quot; +6 0<br />
  FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $R1 $R0 1019 ;ID of the EDIT box in Dir. Page<br />
  EnableWindow $R1 0<br />
  GetDlgItem $R1 $R0 1001 ;ID of the Browse button in Dir. Page<br />
  EnableWindow $R1 0<br />
FunctionEnd<br />
<br />
-- so what's gone wrong here?<br />
<br />
------------<br />
NSIS:2.0.6<br />
OS:Win98SE<br />
------------<br />
<br />
Thanks,<br />
playwin2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th May 2005, 19:00</div></div><div class="posttext">Well I'm guessing the hot keys are assigned to the text field of the page, so they aren't working anymore because you've disable the text field control.<br />
<br />
Perhaps it will work if you make the text field read only instead of disabled (not sure how though).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">playwin2</div><div class="date">16th May 2005, 00:16</div></div><div class="posttext">Seems you are right.<br />
<br />
Just sending the EM_SETREADONLY msg. did the trick.<br />
<br />
GetDlgItem $R1 $R0 1019 ;ID of the EDIT box in Dir. Page<br />
SendMessage $R1 0x00CF 1 0<br />
<br />
<br />
Hmm! so we got three options now:<br />
1--&gt; Skip the entire Dir. page<br />
2--&gt; Disable components in the Dir. page ( and accept that the keyboard in sauce)<br />
3--&gt; Make the edit box of the Dir. page read-only.<br />
<br />
-- Which one do you suggest?<br />
<br />
--<br />
playwin2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">16th May 2005, 04:10</div></div><div class="posttext">I'd say option 1. What's the point of showing the dialog if you can't do anything with it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th May 2005, 13:07</div></div><div class="posttext">Well it's usually nice to show the user where they are installing to. You could have a simple messagebox instead though.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">playwin2</div><div class="date">16th May 2005, 16:11</div></div><div class="posttext">Originally posted by Afrow UK <br />
Well it's usually nice to show the user where they are installing to.<br />
 <br />
<br />
Agreed.<br />
--<br />
playwin2</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>