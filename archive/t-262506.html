<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" multi file inetc download, conditional checkbox, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  multi file inetc download, conditional checkbox NSIS Discussion" />
	
	<title> multi file inetc download, conditional checkbox [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  multi file inetc download, conditional checkbox</div>
<hr />
<div class="pda"><a href="t-262506.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=262506">multi file inetc download, conditional checkbox</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">26th December 2006, 21:23</div></div><div class="posttext">hey can anybody answer this?<br />
how can i make inetc nsis plugin download multiple files at once using only one string variable for all the url pairs? like so<br />
<br />
strcpy $urlpairs &quot;\&quot;http://w.w.w.txt\&quot;&quot;<br />
strcpy $urlpairs &quot;$urlpairs \&quot;C:\w.txt\&quot;&quot;<br />
strcpy $urlpairs &quot;$urlpairs \&quot;http://w.w.a.txt\&quot;&quot;<br />
strcpy $urlpairs &quot;$urlpairs \&quot;C:\a.txt\&quot;&quot;<br />
strcpy $urlpairs &quot;$urlpairs \&quot;http://w.w.b.txt\&quot;&quot;<br />
strcpy $urlpairs &quot;$urlpairs \&quot;C:\b.txt\&quot;&quot;<br />
inetc:get $urlpairs<br />
<br />
and how do i make conditional section checkboxes<br />
like<br />
[] FilipinoDictionary<br />
 |_[] FilipinoDictionaryWebsite<br />
 |_[] SysAdDic<br />
 |_[] OfflineFilipinoDictionaryGU<br />
 |_[] mysqldb<br />
where<br />
  when one clicks FilipinoDictionary, the other three are clicked/checked.<br />
 when one clicks/checks OfflineFilipinoDictionaryGU, it also checks mysqldb<br />
 when one clicks/checks SysAdDic, it also checks OfflineFilipinoDictionaryGU and mysqldb<br />
  when one clicks/checks FilipinoDictionaryWebsite, it also checks SysAdDic, OfflineFilipinoDictionaryGU and mysqldb<br />
<br />
<br />
this is so because <br />
FilipinoDictionaryWebsite needs files from SysAdDic, OfflineFilipinoDictionaryGU and mysqldb to work<br />
SysAdDic needs files from , OfflineFilipinoDictionaryGU and mysqldb to work<br />
OfflineFilipinoDictionaryGU needs files from  mysqldb to work<br />
<br />
please, if anybody can answer them i'll gladly appreciate it because this is for my thesis.<br />
<br />
thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th December 2006, 21:58</div></div><div class="posttext">how can i make inetc nsis plugin download multiple files at once using only one string variable for all the url pairs?<br />
Build a macro, e.g.<br />
 !macro INETC_DNLD FILE1 LOCATION1 FILE2 LOCATION2<br />
inetc::get &quot;${FILE1}&quot; &quot;${LOCATION1}&quot; &quot;${FILE2}&quot; &quot;${LOCATION2}&quot;<br />
!macroend<br />
<br />
section &quot;&quot;<br />
!insertmacro INETC_DNLD &quot;http://dl.zvuki*****6306/mp3/12.mp3&quot; &quot;$EXEDIR\12.mp3&quot; \<br />
&quot;ftp://dl.zvuki*****6306/mp3/11.mp3&quot; &quot;$EXEDIR\11.mp3&quot;<br />
sectionend<br />
<br />
<br />
and how do i make conditional section checkboxes<br />
See Sections (http://nsis.sourceforge.net/Docs/Chapter4.html#4.6) in NSIS manual.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">27th December 2006, 07:21</div></div><div class="posttext">With NSIS you don't need string variables at all ;)<br />
How it work: Installer pushes plug-in parameters (from command line) to stack and plug-in (when launched) pops them back. So following code samples are absolutely have no difference:<br />
Push /end<br />
Push &quot;$EXEDIR\22.mp3&quot;<br />
Push http://dl.zvuki*****6306/mp3/22.mp3<br />
Push &quot;$EXEDIR\12.mp3&quot;<br />
Push http://dl.zvuki*****6306/mp3/12.mp3<br />
inetc::getandinetc::get http://dl.zvuki*****6306/mp3/12.mp3 &quot;$EXEDIR\12.mp3&quot; \<br />
http://dl.zvuki*****6306/mp3/22.mp3 &quot;$EXEDIR\22.mp3&quot; /endFirst variant is even better because of string length limit (1k in common build). But be carefull - stack might be used by other parts of your code, so number of other pushes must be equal to number of pops, otherwise urls will be messed with other vars ;) One of such vars is plug-in' exit code, do not forget Pop (like in Example.nsi) after plug-in line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bjonreyes</div><div class="date">5th January 2007, 18:31</div></div><div class="posttext">i got the last one on sections<br />
here are the conditional sections<br />
(for search engines to use in searching for answers to problems similar to this)<br />
<br />
<br />
FilipinoDictioanry.nsi (mingw.nsi derivative) code portions:<br />
&lt;code&gt;#<br />
Function .onInit<br />
;-----------------------------------------------------------------------------------------------------------------------<br />
  SectionGetFlags ${SecMySQLDatabase} $secmdb<br />
  SectionGetFlags ${SecOfflineFilipinoDictionaryGU} $secofgu<br />
  SectionGetFlags ${SecSysAdDic} $secsa<br />
  SectionGetFlags ${SecFilipinoDictionaryWebsite} $secfdw<br />
  SectionSetFlags ${SecFilipinoDictionaryInstaller} ${SF_RO}<br />
; prevent multiple instances of installer<br />
	StrCpy $sized &quot;false&quot;<br />
<br />
  System::Call &quot;kernel32::CreateMutexA(i 0, i 0, t '$(^Name)') i .r0 ?e&quot;<br />
  Pop $0<br />
  StrCmp $0 0 launch<br />
  StrLen $0 &quot;$(^Name)&quot;<br />
  IntOp $0 $0 + 1<br />
<br />
loop:<br />
  FindWindow $1 '#32770' '' 0 $1<br />
  IntCmp $1 0 +4<br />
  System::Call &quot;user32::GetWindowText(i r1, t .r2, i r0) i.&quot;<br />
  StrCmp $2 &quot;$(^Name)&quot; 0 loop<br />
  System::Call &quot;user32::SetForegroundWindow(i r1) i.&quot;<br />
  System::Call &quot;user32::ShowWindow(i r1,i 9) i.&quot;<br />
  Abort<br />
launch:<br />
<br />
  call GetInitialMirrors<br />
  <br />
  StrCpy $R0 $WINDIR 1<br />
  StrCpy $INSTDIR $R0:\<br />
<br />
  ;!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;Dialogs\PickMirror.ini&quot; &quot;PickMirror.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\Dialogs\ChoosePackage.ini&quot; &quot;ChoosePackage.ini&quot;<br />
<br />
  StrCpy $Updating 0<br />
<br />
  StrCpy $ChooseMessage &quot;Choose the FilipinoDictionary components you would like to install. 'Minimal' install assumes the other components are already installed in their respective directories and installs 'FilipinoDictionary base tools' and 'MySQL FilipinoDictionary Database'. 'CD run with update' install installs only 'MySQL FilipinoDictionary Database' and shortcuts to run the 'FilipinoDictionary base tools' programs from the Compact Disc using the installed 'MySQL FilipinoDictionary Database' located at the hard disk. 'Full' installs all components. 'Custom' lets you install the components you want to install assuming the unchecked ones are already installed (don't check anything if you only want to install the shortcuts to 'FilipinoDictionary base tools' only, maybe for easy navigation of programs from the 'FilipinoDictionary base tools'.)&quot;<br />
<br />
  ReadRegStr $1 ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;InstallLocation&quot;<br />
  StrCmp $1 &quot;&quot; first_install<br />
<br />
  StrCpy $INSTDIR $1<br />
<br />
  ifFileExists $INSTDIR\installed.ini +1 first_install<br />
<br />
  StrCpy $Updating 1<br />
<br />
  StrCpy $ChooseMessage &quot;Choose the FilipinoDictionary components you would like to update.&quot;<br />
<br />
  ReadINIStr $Package $INSTDIR\installed.ini &quot;settings&quot;  &quot;installtype&quot;<br />
<br />
  InstTypeSetText 0 &quot;&quot;<br />
  InstTypeSetText 1 &quot;&quot;<br />
  InstTypeSetText 2 &quot;&quot;<br />
<br />
  goto installing<br />
<br />
first_install:<br />
;  SectionSetText ${SecSysAdDic} &quot;&quot;<br />
;  SectionSetText ${SecFilipinoDictionaryWebsite} &quot;&quot;<br />
;  SectionSetText ${SecOfflineFilipinoDictionaryGU} &quot;&quot;<br />
;  SectionSetText ${SecMySQLDatabase} &quot;&quot;<br />
<br />
installing:<br />
<br />
InitPluginsDir<br />
  GetTempFileName $mirrorINI $PLUGINSDIR<br />
  File /oname=$mirrorINI &quot;Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\Dialogs\ShowMirror.ini&quot;<br />
;MessageBox MB_YESNO|MB_ICONINFORMATION|MB_DEFBUTTON1 &quot;$mirrorINI&quot;<br />
!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\Dialogs\ShowMirror.ini&quot; &quot;ShowMirror.ini&quot;<br />
;StrCpy $mirrorINI $umuiini<br />
<br />
StrCpy $mirrorINI &quot;$PLUGINSDIR\ShowMirror.ini&quot;<br />
<br />
;MessageBox MB_YESNO|MB_ICONINFORMATION|MB_DEFBUTTON1 &quot;$mirrorINI&quot;<br />
FunctionEnd<br />
/*...omitted irrelevant code*/<br />
SectionGroup /e &quot;!FilipinoDictionary base tools&quot; SecBase<br />
 Section  FilipinoDictionaryWebsite SecFilipinoDictionaryWebsite<br />
 SectionIn 1 2 6<br />
SectionEnd<br />
<br />
 Section  SysAdDic SecSysAdDic <br />
  SectionIn 1 2 5 6<br />
SectionEnd<br />
Section  OfflineFilipinoDictionaryGU SecOfflineFilipinoDictionaryGU <br />
   SectionIn 1 2 4 5 6<br />
  SectionEnd<br />
Section mysqldatabase SecMySQLDatabase<br />
   SectionIn 1 2 3 4 5 6<br />
SectionEnd<br />
Section  &quot;FilipinoDictionaryInstaller&quot; SecFilipinoDictionaryInstaller<br />
   SectionIn 1 2 4 5 6<br />
	  StrCpy $tarball &quot;Program Files\FilipinoDictionary\FilipinoDictionaryInstaller&quot;<br />
	  push $tarball<br />
	  call DownloadFromMirror<br />
<br />
		CreateDirectory &quot;$INSTDIR\$tarball&quot;<br />
<br />
		${GetSize} &quot;$EXEDIR\$tarball&quot; &quot;/S=0B&quot; $0 $1 $2<br />
			IntOp $R3 0 + 0<br />
			IntOp $R3 0 + $0<br />
		${RecFindOpen} &quot;$EXEDIR\$tarball&quot; $R0 $R1<br />
			DetailPrint &quot;Dir: $R0: size: $R3&quot;<br />
		${RecFindFirst}<br />
			DetailPrint &quot;File: $EXEDIR\$tarball$R0\$R1 to $INSTDIR\$tarball$R0\$R1&quot;<br />
			CreateDirectory &quot;$INSTDIR\$tarball$R0\$R1&quot;<br />
			RMDir &quot;$INSTDIR\$tarball$R0\$R1&quot;<br />
			CopyFiles  &quot;$EXEDIR\$tarball$R0\$R1&quot; &quot;$INSTDIR\$tarball$R0\$R1&quot;<br />
			SetFileAttributes &quot;$INSTDIR\$tarball$R0\$R1&quot; FILE_ATTRIBUTE_NORMAL<br />
			  CopyFiles $EXEDIR\$R1 &quot;$INSTDIR\Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\$R1&quot;<br />
			  CopyFiles &quot;$EXEDIR\${PRODUCT_NAME}.nsi&quot; &quot;$INSTDIR\Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\${PRODUCT_NAME}.nsi&quot;<br />
			  CopyFiles &quot;$EXEDIR\OfflineFilipinoDictionaryGU.nsi&quot; &quot;$INSTDIR\Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\OfflineFilipinoDictionaryGU.nsi&quot;<br />
			  CopyFiles &quot;$EXEDIR\OfflineFilipinoDictionaryGU-${PRODUCT_VERSION}.exe&quot; &quot;$INSTDIR\Program Files\FilipinoDictionary\FilipinoDictionaryInstaller\OfflineFilipinoDictionaryGU-${PRODUCT_VERSION}.exe&quot;<br />
			 ;StrCmp $R1 &quot;a_file.txt&quot; Found<br />
				${RecFindNext}<br />
				;Found:<br />
				${RecFindClose}<br />
<br />
  SectionEnd<br />
 SectionGroupEnd<br />
var secmdb<br />
var secofgu<br />
var secsa<br />
var secfdw<br />
Function .onSelChange<br />
  IntOp $1 0 + 0<br />
  SectionGetFlags ${SecMySQLDatabase} $4<br />
  SectionGetFlags ${SecOfflineFilipinoDictionaryGU} $0<br />
  SectionGetFlags ${SecSysAdDic} $2<br />
  SectionGetFlags ${SecFilipinoDictionaryWebsite} $3<br />
;MessageBox MB_YESNO|MB_ICONINFORMATION|MB_DEFBUTTON1 $4$0$2$3<br />
;MessageBox MB_YESNO|MB_ICONINFORMATION|MB_DEFBUTTON1 m$secmdbo$secofgus$secsaf$secfdw<br />
  IntCmp $secmdb 	$4 +1 mdb mdb<br />
  IntCmp $secofgu 	$0 +1 ofgu ofgu<br />
  IntCmp $secsa 		$2 +1 sa sa<br />
  IntCmp $secfdw 	$3 end fdw fdw<br />
  ;SectionSetFlags ${SecSysAdDic} $1<br />
  mdb:<br />
	IntCmp $4 0  +1 end end<br />
  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} $1<br />
  SectionSetFlags ${SecSysAdDic} $1<br />
  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
		goto end<br />
  ofgu:<br />
	  IntCmp $0 ${SF_SELECTED} +1 +3 +3<br />
	  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
	  goto end<br />
	  SectionSetFlags ${SecSysAdDic} $1<br />
	  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
	goto end<br />
  sa:<br />
	  IntCmp $2 $1 +1 +3 +3<br />
	  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
		goto end<br />
	  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
	  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} ${SF_SELECTED}<br />
		goto end<br />
  fdw:<br />
		IntCmp $3 ${SF_SELECTED} +1 +4 +4<br />
	  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
	  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} ${SF_SELECTED}<br />
	  SectionSetFlags ${SecSysAdDic} ${SF_SELECTED}<br />
  <br />
/*<br />
  StrCmp &quot;$3$2$0$4&quot; &quot;0010&quot; +1 +2<br />
IntCmp $2 ${SF_SELECTED} +1 +3 +3<br />
  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} ${SF_SELECTED}<br />
    SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
IntCmp $2 $1 +1 +2 +2<br />
  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
IntCmp $3 ${SF_SELECTED} +1 +4 +4<br />
  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} ${SF_SELECTED}<br />
  SectionSetFlags ${SecSysAdDic} ${SF_SELECTED}<br />
IntCmp $2 ${SF_SELECTED} +1 +3 +3<br />
  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} ${SF_SELECTED}<br />
  ;SectionSetFlags ${SecSysAdDic} $1<br />
  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
IntCmp $0 ${SF_SELECTED} +1 +2 +2<br />
  SectionSetFlags ${SecMySQLDatabase} ${SF_SELECTED}<br />
  ;SectionSetFlags ${SecOfflineFilipinoDictionaryGU} $1<br />
  SectionSetFlags ${SecSysAdDic} $1<br />
  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
IntCmp $4 $1 +1  end end<br />
  ;SectionSetFlags ${SecMySQLDatabase} $1<br />
  SectionSetFlags ${SecOfflineFilipinoDictionaryGU} $1<br />
  SectionSetFlags ${SecSysAdDic} $1<br />
  SectionSetFlags ${SecFilipinoDictionaryWebsite} $1<br />
*/<br />
<br />
  ;SectionSetFlags ${SecOfflineFilipinoDictionaryGU} $1<br />
<br />
  <br />
 ; SectionSetFlags ${SecFilipinoDictionaryWebsite}  ${SF_SELECTED}<br />
end:<br />
  SectionGetFlags ${SecMySQLDatabase} $secmdb<br />
  SectionGetFlags ${SecOfflineFilipinoDictionaryGU} $secofgu<br />
  SectionGetFlags ${SecSysAdDic} $secsa<br />
  SectionGetFlags ${SecFilipinoDictionaryWebsite} $secfdw<br />
FunctionEnd<br />
<br />
Section &quot;ServCD&quot; SecServCD<br />
    SectionIn 2<br />
SectionEnd<br />
Section &quot;Java JRE 1.5&quot; SecJRE<br />
    SectionIn 2<br />
SectionEnd<br />
Section &quot;Tiny C Compiler&quot; SecTCC<br />
    SectionIn 2<br />
SectionEnd<br />
Section &quot;Java DynDNS client&quot; SecNIPDUC<br />
    SectionIn 2<br />
SectionEnd<br />
Section &quot;Mozilla Firefox 2&quot; SecIE6<br />
    SectionIn 2<br />
SectionEnd<br />
Section &quot;VideoLAN VLC media player 0.8.5&quot; SecWMP10<br />
    SectionIn 2<br />
SectionEnd<br />
<br />
var Updating<br />
Section -installComponents<br />
  SetAutoClose false<br />
SectionEnd<br />
/* omitted irrelevant code*/<br />
&lt;/code&gt;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>