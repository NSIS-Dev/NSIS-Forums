<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Mixing compile and runtime tests, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Mixing compile and runtime tests NSIS Discussion" />
	
	<title> Mixing compile and runtime tests [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Mixing compile and runtime tests</div>
<hr />
<div class="pda"><a href="t-313728.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313728">Mixing compile and runtime tests</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">abcdgoldfish</div><div class="date">12th October 2009, 19:53</div></div><div class="posttext">I am writing an nsh file whose behavior I would like to control based on the presence or absence of an ENV.  For example, if the ENV exists, don't display the license page.<br />
<br />
I can detect the presence or absence of the ENV at runtime, say in .onInit.  But I have been unable to figure how to use this to control the display of windows since they are compiled in before execution.  I've tried using !ifdef based on .onInit code but !ifdef uses values based on compile time.<br />
<br />
Is this even possible?  I'm suspecting not but would like to hear from someone more knowledgeable.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">12th October 2009, 20:19</div></div><div class="posttext">Use the 'pre' function of the License page to check the env variable (or one you set during .onInit) and Abort (http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.1)  the page. This will go on to the following page and the user will never see the License page.<br />
MUI_PAGE_WELCOME<br />
MUI_PAGE_CUSTOMFUNCTION_PRE License.Pre<br />
MUI_PAGE_LICENSE textfile<br />
MUI_PAGE_COMPONENTS<br />
...<br />
function License.Pre<br />
${If} $myVar = 1<br />
    Abort<br />
${EndIf}<br />
functionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">13th October 2009, 08:22</div></div><div class="posttext">abcdgoldfish, do you mean you want to check whether or not the variable has been declared? I don't think there's a command for this. You should probably add a !define VarIsDeclared to the code that declares the var, and then use !ifdef VarIsDeclared in your header file.<br />
<br />
Of course, this is only for controlling compile-time behaviour. If you want to change runtime behaviour, such as hiding the license page, then the solution above is what you should do.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>