<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A script..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A script... NSIS Discussion" />
	
	<title> A script... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A script...</div>
<hr />
<div class="pda"><a href="t-135617.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135617">A script...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th May 2003, 21:15</div></div><div class="posttext">I'm going to write a script to combine two files together into one.<br />
I just need to know the proper way to get to the end of the 1st txt file, so that I can begin writing text from the 2nd txt file onto the end.<br />
<br />
This is how far I could get, but I've no idea what to do next...<br />
<br />
FileOpen $0 $INSTDIR\temp1.txt w<br />
FileSeek $0 0 END $1<br />
FileOpen $2 $INSTDIR\temp2.txt r<br />
FileRead $2 $3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2003, 13:15</div></div><div class="posttext">Just keep writing into $0 in a loop until you can't read from $2 no more. NSIS doesn't process the input so there shouldn't be any problems with the line breaks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th May 2003, 14:56</div></div><div class="posttext">So you mean, when it gets to the end of file 1, that means it's at the end and I can then write to it.<br />
<br />
Okey!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2003, 15:02</div></div><div class="posttext">But you need to open it with append mode (a) and not write (w) because write will first delete everything in the file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th May 2003, 15:06</div></div><div class="posttext">I'll test it now.<br />
I think I have got some things completely wrong - I am assuming that FileWrite will always write to the start of the file.<br />
<br />
<br />
Function JoinFiles<br />
Exch $1<br />
Exch<br />
Exch $3<br />
Push $0<br />
Push $2<br />
FileOpen $0 $1 a<br />
FileOpen $2 $3 r<br />
loop1:<br />
  FileRead $0 $1<br />
  IfErrors doneloop1<br />
Goto loop1<br />
doneloop1:<br />
  FileWrite $0 &quot;$\n$\r$\n$\rEcho.$\n$\r$\n$\rEcho \<br />
    ==============================================\<br />
    $\n$\r$\n$\rEcho.$\n$\r$\n$\r&quot; # Optional divider<br />
loop2:<br />
  FileRead $2 $1<br />
  FileWrite $0 $1<br />
  IfErrors done<br />
Goto loop2<br />
done:<br />
Pop $2<br />
Pop $0<br />
Pop $3<br />
Pop $1<br />
FunctionEnd<br />
<br />
Edit: This seems to work fine.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2003, 15:25</div></div><div class="posttext">FileWrite will write to where the file pointer is. The file pointer starts at the begining of the file in all modes (a,r,w). To write to the end of the file you still need to seek (change the file pointer) as you've done in the first script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th May 2003, 15:42</div></div><div class="posttext">Final script:<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=298&amp;instances=0,11<br />
<br />
Works nicely :)<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>