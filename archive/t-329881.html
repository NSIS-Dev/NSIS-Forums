<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Large string robust solutions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Large string robust solutions NSIS Discussion" />
	
	<title> Large string robust solutions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Large string robust solutions</div>
<hr />
<div class="pda"><a href="t-329881.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329881">Large string robust solutions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">elliottslaughter</div><div class="date">21st April 2011, 08:34</div></div><div class="posttext">I recently ran into the 1024 character string size limit, detailed here (among other places):<br />
<br />
http://nsis.sourceforge.net/Talk:Environmental_Variables:_append,_prepend,_and_remove_entries<br />
http://nsis.sourceforge.net/Special_Builds<br />
<br />
While I know of the special build above (for 8192 length strings), this does not entirely satisfy my needs. For example, in an open source project, an unsuspecting developer might try to build my installer with a normal copy of NSIS and run into the 1024 limit. Also, it may theoretically be possible for environment variables longer than 8192 characters to exist (according to http://support.microsoft.com/?kbid=830473 , the limit is around 32k, although cmd in current versions of Windows will ignore variables longer than 8k).<br />
<br />
Is there a way to robustly handle the case where I don't necessarily know that NSIS was specially configured to handle 8192? E.g. can I either check at installer build time that we are using a large strings NSIS, or can I get the string length limit in NSIS dynamically and check it against the environment variable length.<br />
<br />
If these have been answered elsewhere, links would be appreciated. (My searches have revealed only the special builds and discussions above, with no mentions of robust solutions.)<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st April 2011, 11:11</div></div><div class="posttext">Check ${NSIS_MAX_STRLEN} with !if and throw an !error.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elliottslaughter</div><div class="date">25th April 2011, 04:43</div></div><div class="posttext">Thanks, works great!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>