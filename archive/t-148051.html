<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" multiple path manipulation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  multiple path manipulation NSIS Discussion" />
	
	<title> multiple path manipulation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  multiple path manipulation</div>
<hr />
<div class="pda"><a href="t-148051.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148051">multiple path manipulation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">3rd September 2003, 23:42</div></div><div class="posttext">hey guys anyone knows or can telll from the code of<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=216&amp;instances=0,11,211 or http://nsis.sourceforge.net/archive/nsisweb.php?page=388&amp;instances=0,11,211 <br />
<br />
what would be the corect delimiter between strings values for $PATHS (when using $PATHS intead of $INSTDIR in order to register multiple paths)<br />
<br />
i tried <br />
!define PATHS &quot;C:\folder\bin,C:\folder\lib&quot;<br />
!define PATHS &quot;C:\folder\bin;C:\folder\lib&quot;<br />
!define PATHS &quot;C:\folder\bin|C:\folder\lib&quot;<br />
!define PATHS &quot;C:\folder\bin C:\folder\lib&quot;<br />
!define PATHS &quot;'C:\folder\bin','C:\folder\lib'&quot;<br />
and none worked</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">4th September 2003, 01:47</div></div><div class="posttext">Here is a snippet from the first link you mentioned:FileOpen $1 &quot;$1\autoexec.bat&quot; a<br />
FileSeek $1 0 END<br />
GetFullPathName /SHORT $0 $0<br />
FileWrite $1 &quot;$\r$\nSET PATH=%PATH%;$0$\r$\n&quot;<br />
FileClose $1A semicolon is used as the separator in the PATH (see the FileWrite line in the snippet)<br />
<br />
The PATH in the snippet is an environment variable (the snippet is adding a line to the end of AUTOEXEC.BAT).<br />
<br />
I am not sure what you meant when you used &quot;!define PATHS whatever&quot; in your message. Are you trying to provide a selection of possible installation folders?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">4th September 2003, 08:38</div></div><div class="posttext">no man<br />
i am just trying to add paths<br />
the original scripts use $INSTDIR to add only a path ( the instalation path )<br />
i replaced that with ${PATHS} as i need to add multiple paths that are not related to the $INSTDIR<br />
<br />
the format that interests me is of the data in ${PATHS} not in autoexec.bat</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">4th September 2003, 12:37</div></div><div class="posttext">The first Archive link gives this example which adds $INSTDIR to the path:Push $INSTDIR<br />
Call AddToPathIf you want to add &quot;C:\ABC&quot; and &quot;D:\XYZ\123&quot; to the path, call AddToPath twice:Push &quot;C:\ABC&quot;<br />
Call AddToPath<br />
<br />
Push &quot;D:\XYZ\123&quot;<br />
Call AddToPathThe AddToPath function uses GetFullPathName which is why the function only works with one path at a time.<br />
<br />
Remember that on Win9X systems there is a limit to the length of the PATH (not sure what it is).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">4th September 2003, 15:01</div></div><div class="posttext">thanks man<br />
as for the win98 limitation it can be fixed with this line<br />
SHELL=command.com /e:956 /p<br />
in config.sys</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">4th September 2003, 16:40</div></div><div class="posttext">well<br />
<br />
Push &quot;C:\ABC&quot;<br />
Call AddToPath<br />
<br />
Push &quot;D:\XYZ\123&quot;<br />
Call AddToPath<br />
<br />
should work but unfortnately it does not<br />
<br />
KiCHiK  http://nsis.sourceforge.net/archive/nsisweb.php?page=216&amp;instances=0,11,211 is your code .. can you help me with this ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2003, 16:44</div></div><div class="posttext">Define not working.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">4th September 2003, 23:31</div></div><div class="posttext">well i think it works fine on winNT but on 9X:<br />
quote from autoexec.bat<br />
<br />
SET PATH=%PATH%;C:\APACHE2\BIN<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
SET PATH=%PATH%;C:\APACHE2\BIN<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
<br />
also if possible could you save me the hassle and make a version of that script for nt only ... i will add the paths to autoexec.bat another way ....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2003, 23:37</div></div><div class="posttext">Are you sure those are not left overs from previous failed attempts?<br />
<br />
To make it NT only just remove the part that writes to the autoexec.bat file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">4th September 2003, 23:54</div></div><div class="posttext">100 percent sure<br />
i even deleted autoexec and run the installer 3 times<br />
here is the new autoexec contents<br />
<br />
SET PATH=%PATH%;C:\APACHE2\BIN<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;C:\APACHE2\BIN<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;C:\APACHE2\BIN<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
SET PATH=%PATH%;<br />
<br />
<br />
<br />
this is the code i use<br />
<br />
Push &quot;C:\apache2\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\perl\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\php\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\mysql\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\opssl\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\python\bin&quot;<br />
  Call AddToPath<br />
Push &quot;C:\apache2\tcl\bin&quot;<br />
  Call AddToPath<br />
<br />
<br />
<br />
and if i just delete the line wich writes to aeutoexec.bat im still left with a lot of grabage .. checking for os .. etc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2003, 23:58</div></div><div class="posttext">As you can see, there are 7 lines a block there, and there are 3 blocks for 3 times you've ran the installer. This means the function is doing its job, writing a line for each call and doesn't fill it with garbage.<br />
<br />
Because autoexec.bat requires a short path name, AddToPath calls GetFullPathName /SHORT to get the short path name. This doesn't work when the path doesn't exist. Are you sure all of those paths exist? Since there isn't really much code there and the first call does work, this is the only explination I can think of.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mancini</div><div class="date">5th September 2003, 00:27</div></div><div class="posttext">yes silly me<br />
i was testing without full directory structure<br />
the apache\bin entry was created because that was the only dir existant<br />
<br />
however there is still a problem with removing<br />
i use<br />
<br />
Push &quot;C:\apache2\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\perl\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\php\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\mysql\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\opssl\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\python\bin&quot;<br />
  Call un.RemoveFromPath<br />
Push &quot;C:\apache2\tcl\bin&quot;<br />
  Call un.RemoveFromPath<br />
<br />
and it just leaves autoexec.bat as it was<br />
<br />
btw by garbage i meant things like the un.IsNT function and the calls to it wich would not be needed it i would made the script nt only<br />
<br />
bbtw : why is tah function defined twice ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2003, 11:44</div></div><div class="posttext">Works fine for me, existing paths or not. Does the install log show anything?<br />
<br />
I wouldn't remove IsNT if I were you... Why write to the registry on Windows 98 too?<br />
<br />
There are two versions of IsNT because you can't use installer functions in the uninstaller and vice versa.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>