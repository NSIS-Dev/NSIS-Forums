<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Couple of newbie questions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Couple of newbie questions NSIS Discussion" />
	
	<title> Couple of newbie questions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Couple of newbie questions</div>
<hr />
<div class="pda"><a href="t-92393.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=92393">Couple of newbie questions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Daab</div><div class="date">26th June 2002, 10:01</div></div><div class="posttext">Hi all, I have a couple of questions:<br />
<br />
1. When I use Exec and ExecWait - what is their default directory if I don't specify an absolute path (as far as I could see it isn't $OUTDIR)<br />
<br />
2. Is there an existing way in NSIS 1.98 to detect the computer's IP address, or can anyone think of an easy way to parse &quot;ipconfig&quot;'s output into a variable?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">26th June 2002, 17:27</div></div><div class="posttext">1) the currentdir, so $EXEDIR. The current dir becomes $OUTDIR if SetOutPath has been called.<br />
<br />
2) not available in NSIS 1.98. But you can log the output of ipconfig to file using &quot;ipconfig &gt; ip.txt&quot; and then analyse the file. Remember that the structure of this file depends on the setup of the network/internet connection and on the language of the system. So it's difficult to get the ipaddress (for internetconnection, not network connection) from this.<br />
I will write a NSISdll for it. Wait a sec...<br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">26th June 2002, 19:12</div></div><div class="posttext">Here's a dll to retrieve the IP-addresses of a computer. I just copied code from some website (and modified it to suit our needs). This code also retrieves IP-addresses of a computer on a network. I wouldn't know how to distinguish these from internet IP-addresses. But it works already. See the attachment.<br />
<br />
Good luck,<br />
-Hendri.<br />
<br />
<br />
Searching also resulted in this thread:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=74526&amp;highlight=ip also states what I discussed above. Best solution there: use ipconfig or a dll :). Good luck with the dll.<br />
-Hn3.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Daab</div><div class="date">27th June 2002, 09:01</div></div><div class="posttext">This is great, thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">27th June 2002, 09:14</div></div><div class="posttext">You're welcome :D.<br />
<br />
Greetz,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">27th June 2002, 17:21</div></div><div class="posttext">I rescripted the function a bit to allow for a better integration of the IP.dll in new scripts. Check the source. <br />
<br />
<br />
A tiny test on a stand-alone (not connected to this world) showed that the dll returned IP-address 127.0.0.1. Maybe this could be the hint from which we can conclude that there is no connection. Sincerely, I do not know that much about (assigning) IP-addresses. I know how to set up a small local network but beyond that, I cannot help. Good luck!<br />
-Hn3.<br />
<br />
<br />
Have fun, good luck, <br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th June 2002, 22:58</div></div><div class="posttext">Originally posted by Smile2Me <br />
This code also retrieves IP-addresses of a computer on a network. I wouldn't know how to distinguish these from internet IP-addresses. But it works already. See the attachment.<br />
<br />
These ranges are for local networks:<br />
<br />
10.x.x.x / 255.0.0.0<br />
172.16.x.x / 255.255.0.0 to 172.31.x.x / 255.255.0.0<br />
192.168.x.x / 255.255.255.0<br />
169.254.x.x / 255.255.0.0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">28th June 2002, 08:07</div></div><div class="posttext">Thanks a lot Joost,<br />
<br />
see the function I scripted using your information. Now the script provides two functions:<br />
GetNextIp<br />
CheckIP<br />
<br />
[Important edit]<br />
I added the rangecheck 127.x.x.x. I found additional information on this (http://home.t-online.de/home/TschiTschi/ip_adressierung.htm) (German) site about &quot;LoopBack&quot; addresses. Important: the range 169.254.x.x is not mentioned there as being a LAN range. Could you please verify that it indeed is, Joost? Thanks in advance.<br />
Untill further information, I include it in the range check, since I think I remember seeing 169.254.x.x on a network a long time ago, but I'm not sure of that.<br />
-Hn3.<br />
[/edit]<br />
<br />
See the example for more information.<br />
<br />
Have fun, good luck,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th June 2002, 20:38</div></div><div class="posttext">Originally posted by Smile2Me <br />
Thanks a lot Joost,<br />
<br />
see the function I scripted using your information. Now the script provides two functions:<br />
GetNextIp<br />
CheckIP<br />
<br />
[Important edit]<br />
I added the rangecheck 127.x.x.x. I found additional information on this (http://home.t-online.de/home/TschiTschi/ip_adressierung.htm) (German) site about &quot;LoopBack&quot; addresses. Important: the range 169.254.x.x is not mentioned there as being a LAN range. Could you please verify that it indeed is, Joost? Thanks in advance.<br />
Untill further information, I include it in the range check, since I think I remember seeing 169.254.x.x on a network a long time ago, but I'm not sure of that.<br />
-Hn3.<br />
[/edit]<br />
<br />
See the example for more information.<br />
<br />
Have fun, good luck,<br />
-Hendri. <br />
<br />
127.0.0.1 is just the localhost, so it is not really a network address. 169.254.x.x is an Automatic Private IP Address, which you get when there is no DHCP server available, for example, Windows gives these addresses when you check &quot;Obtain an IP address automatically&quot; and you have no DHCP server.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">29th June 2002, 08:54</div></div><div class="posttext">Thanks again Joost.<br />
<br />
This is the (I think) final version of the script. The function CheckIP checks for the following types of IP-addresses:<br />
1 - LoopBack IP (localhost, indicates no connection to a LAN or to the internet). 2 - Automatic Private IP Address (no DHCP server on LAN).<br />
3 - Network IP.<br />
4 - Internet IP.<br />
<br />
Have fun again with this, greetz,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">19th July 2006, 11:18</div></div><div class="posttext">Can you please add a check that parameter is not an IP address? Unfortunately, the current script issues that string 'NOT AN IP ADDRESS' is an internet-type IP.<br />
<br />
Thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>