<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Loop Help, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Loop Help NSIS Discussion" />
	
	<title> Loop Help [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Loop Help</div>
<hr />
<div class="pda"><a href="t-203255.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=203255">Loop Help</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Trestkon</div><div class="date">28th December 2004, 17:58</div></div><div class="posttext">I have some code that find a specific line in a file and and adds in several other lines directly after it.  The loop works great (someone on this forum helped me with it) but I'm wondering how I might add add some more code into the loop to add several other lines to a *different* section of the file.<br />
<br />
The code and problem is outlined here:<br />
<br />
http://www.offtopicproductions.com/temp/nsishelp.txt <br />
<br />
Thanks:-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Trestkon</div><div class="date">28th December 2004, 18:23</div></div><div class="posttext">After reading up on FileRead I've modified the code a bit and I think it's almost how I want it.  The problem seems to be (I think) that when it gets to the second loop it's already at the bottom of the file and so reads nothing and sets the error flag.  I think I just need a way to return it to the top of the file before the second loop.<br />
<br />
http://www.offtopicproductions.com/temp/nsishelp2.txt</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">28th December 2004, 18:55</div></div><div class="posttext">&quot;adds in several other lines directly after it&quot;<br />
<br />
<br />
	FileOpen $4 &quot;$INSTDIR\TNM\System\TNM.ini&quot; &quot;r&quot;<br />
	GetTempFileName $R1<br />
	FileOpen $5 $R1 &quot;w&quot;<br />
<br />
	loop:<br />
	FileRead $4 $6<br />
	IfErrors done<br />
<br />
	FileWrite $5 $6<br />
	StrCmp $6 &quot;CacheExt=.uxx$\r$\n&quot; 0 +3<br />
	FileWrite $5 &quot;...$\r$\n&quot;<br />
	FileWrite $5 &quot;...$\r$\n&quot;<br />
<br />
	StrCmp $6 &quot;EditPackages=IpServer$\r$\n&quot; 0 loop<br />
	FileWrite $5 &quot;...$\r$\n&quot;<br />
	FileWrite $5 &quot;...$\r$\n&quot;<br />
	Goto loop<br />
<br />
	done:<br />
	FileClose $4<br />
	FileClose $5</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Trestkon</div><div class="date">28th December 2004, 19:40</div></div><div class="posttext">Awesome!  Thanks a lot:D <br />
<br />
Now I better decipher exactly what everything does so I can do it myself next time:-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">28th December 2004, 19:53</div></div><div class="posttext">You are welcome.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>