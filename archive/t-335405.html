<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Hide a string in registry by XOR'ing it, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Hide a string in registry by XOR'ing it NSIS Discussion" />
	
	<title> Hide a string in registry by XOR'ing it [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Hide a string in registry by XOR'ing it</div>
<hr />
<div class="pda"><a href="t-335405.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=335405">Hide a string in registry by XOR'ing it</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">eveningnick</div><div class="date">29th September 2011, 23:56</div></div><div class="posttext">hello!<br />
Could you please advice me how to hide a string-password that i'm saving in the system registry from a NSIS installer? I don't want to store it as a plain text. So i was hoping i could encode or encrypt it<br />
I don't know how to do it in nsis. In C i'd just wrote some loop that iterates throuh the string and does something to it so i can be reversed later to its original state.<br />
There are no examples on the internet for NSIS, and the only suitable function i know in NSIS that could be used for encryption - xor - does not operate on strings (the password i need to 'hide' is a string) but only on integers.<br />
<br />
Forgive me my impudence, but could you post some example routine that takes a string as its input and outputs a transformed symbol by symbol string?<br />
<br />
Thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th September 2011, 00:18</div></div><div class="posttext">How about storing a hash of the password rather than the password itself?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eveningnick</div><div class="date">30th September 2011, 10:42</div></div><div class="posttext">Stu,<br />
<br />
Hashing sounds nice but it seems to be even more complicated than simple XORing of the string.<br />
NSIS script unfortunately isn't like a C program.<br />
<br />
My problem is that, despite knowing how to do that in C, I don't even where to start with NSIS scripting. There are no examples on this topic (all I found were related to decorating a string like adding quotation marks). <br />
<br />
There are no loops (like for(; ;) in C), and the symbols are not treated by their ascii codes in a NSIS script.<br />
<br />
If there are existing routines for hashing a string and you are aware of them, I'd be thankful if you shared. If there are none, could you at least point me on how this kind of string processing is done usually?<br />
Thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th September 2011, 11:56</div></div><div class="posttext">Search Google for &quot;NSIS hash&quot; or &quot;NSIS sha1&quot;. You can do loops in NSIS using Goto or LogicLib. Again, search.<br />
<br />
Edit: And if you know C so well then you can write a plug-in or write a DLL and call it with the System plug-in.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">30th September 2011, 12:52</div></div><div class="posttext">Stu,<br />
<br />
Hashing sounds nice but it seems to be even more complicated than simple XORing of the string.<br />
NSIS script unfortunately isn't like a C program.<br />
<br />
My problem is that, despite knowing how to do that in C, I don't even where to start with NSIS scripting. There are no examples on this topic (all I found were related to decorating a string like adding quotation marks). <br />
<br />
There are no loops (like for(; ;) in C), and the symbols are not treated by their ascii codes in a NSIS script.<br />
<br />
If there are existing routines for hashing a string and you are aware of them, I'd be thankful if you shared. If there are none, could you at least point me on how this kind of string processing is done usually?<br />
Thank you!<br />
<br />
This is big mistake! NSIS language is very similar to C! In headers [logic, win, etc] you have many functionality. Of course some stuff is very hard to achieve, but with scripts and system plug-in you can do what you want.<br />
Loops [for, while] are of course supported!<br />
Try to implement simple Caesar cipher http://en.wikipedia.org/wiki/Caesar_cipher in NSIS - it is only few lines of code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eveningnick</div><div class="date">30th September 2011, 15:13</div></div><div class="posttext">Search Google for &quot;NSIS hash&quot; or &quot;NSIS sha1&quot;. You can do loops in NSIS using Goto or LogicLib. Again, search.<br />
<br />
Edit: And if you know C so well then you can write a plug-in or write a DLL and call it with the System plug-in.<br />
<br />
Stu<br />
<br />
i've tried this one: http://nsis.sourceforge.net/Crypto_plug-in<br />
getting an error &quot;CryptAcquireContext=0x80090016&quot; on my Windows 7.<br />
Well fine, there's a note on the website &quot;it may be broken&quot;. Apparently it is :).<br />
<br />
Tried also md5dll plugin:<br />
<br />
md5dll::GetMD5String &quot;md5me&quot;<br />
Pop $0<br />
MessageBox MB_OK &quot;$0&quot;<br />
<br />
which displays only one symbol instead of 16-bytes (I was expecting 32 symbols, 2 symbols per hex code of every byte of the hash). But i get a message box with text something like &quot;c&quot;. <br />
Why does it happen? Should I convert this $0 into a string representation explicitly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">30th September 2011, 15:30</div></div><div class="posttext">NSIS doesn't need explicit conversions.<br />
<br />
I did not use the MD5 plug-in before, but maybe the first pop doesn't give you the hash? (Just guessing)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th September 2011, 16:25</div></div><div class="posttext">If you are using Unicode NSIS you need to use a Unicode build of the plug-in. Also, how about: http://nsis.sourceforge.net/NsisCrypt_plug-in<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eveningnick</div><div class="date">30th September 2011, 16:26</div></div><div class="posttext">i finally used another plugin (nsis crypto) which returns md5 hash in base 64. Nothing else worked. <br />
Thanks everyone.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eveningnick</div><div class="date">30th September 2011, 16:27</div></div><div class="posttext">If you are using Unicode NSIS you need to use a Unicode build of the plug-in. Also, how about: http://nsis.sourceforge.net/NsisCrypt_plug-in<br />
<br />
Stu<br />
Yes, that's what I used.<br />
Thx Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>