<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" path variables under linux, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  path variables under linux NSIS Discussion" />
	
	<title> path variables under linux [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  path variables under linux</div>
<hr />
<div class="pda"><a href="t-183292.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183292">path variables under linux</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gaylord</div><div class="date">14th June 2004, 13:03</div></div><div class="posttext">Hi,<br />
we have now compiled nsis under linux and use the compiler there. works fine.<br />
<br />
one problem is still there: how to specify path names in the script file? for files or/oname modifiers.<br />
<br />
anyone who can help?<br />
Gaylord</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th June 2004, 17:44</div></div><div class="posttext">Just like Windows, only with forward slashes.File dir/file.ext</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">20th June 2004, 05:05</div></div><div class="posttext">WOW, i did not know you could make installers for linux with NSIS.<br />
<br />
How does this work?<br />
<br />
I am running WIN XP (SP1) and I would love to make installers for linux.<br />
<br />
I do work for AmxModX (http://www.amxmodx.org) and they make both Linux and Windows distributions.<br />
Now if I could make an installer for Linux that would be sick.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">20th June 2004, 11:03</div></div><div class="posttext">No, you can compile Windows installers on a Linux server. You can't create Linux installers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dygear</div><div class="date">21st June 2004, 06:59</div></div><div class="posttext">Oh man, you got my hopes up!<br />
*Goes back to Wishing he had $4000 to buy Installanywhere*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Correa</div><div class="date">28th June 2004, 13:20</div></div><div class="posttext">But then you have to change a lot of files in the Modern UI and your .nsi would have to be different under windows and linux :(<br />
<br />
Could you make it so that the compiler under linux will substitute the \ by / when it needs to find a file and it can't?<br />
<br />
Also, the makefile under linux seams to be a bit broken :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">28th June 2004, 17:42</div></div><div class="posttext">Originally posted by Correa <br />
But then you have to change a lot of files in the Modern UI and your .nsi would have to be different under windows and linux :(<br />
<br />
Could you make it so that the compiler under linux will substitute the \ by / when it needs to find a file and it can't?<br />
<br />
Also, the makefile under linux seams to be a bit broken :(  <br />
<br />
read two posts above :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Correa</div><div class="date">28th June 2004, 18:16</div></div><div class="posttext">Re-read my post ;) <br />
<br />
I know it won't create a linux installer, and I don't want a linux installer, I want to compile under linux my windows installer and have to maintain a single copy of my installer file in CVS for both the hand made (Windows hosted) installations and the one that runs on a cron using xmingw to build windows executables.<br />
<br />
Again, if you compile the makensis compiler under linux and apply it, it will complain a lot about the \ under the Modern UI includes, which are a pain to change manually, not to mention you will get major cvs conflicts when updating from CVS.<br />
<br />
Please, someone consider the request.<br />
<br />
Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st July 2004, 18:45</div></div><div class="posttext">It is planned.<br />
<br />
Makefiles work fine for me. Submit a detailed bug report if you have a problem with them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">8th July 2004, 17:29</div></div><div class="posttext">I'm trying to get makensis to work on linux and create a MUI installer. This is the only page I can find on Google that appears to talk about it.<br />
<br />
I've managed to get it to compile, but I may have done it wrong. What I did was this:<br />
<br />
- got the cvs code<br />
- Changed the exehead compiler (CC in Source/exehead/Makefile) to an xmingw cross-compiler. I also changed RC to an xmingw version of windres.<br />
Without these two changes, the stuff in exehead didn't compile at all.<br />
- Left Source/Makefile alone<br />
- Ran make.<br />
<br />
All this is on a Gentoo linux machine.<br />
<br />
The compile ran (a few warnings, but that's all), and I have an executable makensis.exe, which seems to run OK.<br />
<br />
I spent a while fixing file paths in my nsis scripts, and in MUI scripts.<br />
<br />
But now I get an error on this line:<br />
ChangeUI all [NSISpath]/Contrib/UIs/modern.exe.<br />
The error is &quot;Can't find IDC_EDIT1 (1000) in the custom UI!&quot;<br />
<br />
If I remove the offending line, I get a working installer, but with no MUI screens (ie not much use because I need them).<br />
<br />
Any help appreciated.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th July 2004, 19:21</div></div><div class="posttext">fixed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">9th July 2004, 09:57</div></div><div class="posttext">Wow! That was lightning fast. I've recompiled, and it looks like it runs OK.<br />
<br />
Thanks a lot.<br />
<br />
I can't test completely right now. If I have further problems, I know where to come...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">9th July 2004, 14:38</div></div><div class="posttext">Some bad news. Everything appears to run OK, and the windows installer is created OK, but none of my custom pages work. I'm working on an installer for a java web app, and there is a page for choosing a port to run on, and a page that checks the java version. These are defined like:<br />
<br />
Page custom port portOut<br />
<br />
They appear to compile OK, but don't appear in the compiled installer, which only shows the MUI_PAGE_LICENSE, MUI_PAGE_DIRECTORY etc.<br />
<br />
The compile shows no errors, and the output includes &quot;Install: 8 pages&quot;, which is the correct number of pages, including the custom ones.<br />
<br />
Sorry to be a pain, but if there's a fix for this as quick as the last one, I'd like to get hold of it.<br />
<br />
Incidentally, while I'm here... I needed to change line 9 in Contrib/Modern UI/Language Files/English.nsh from<br />
!insertmacro MUI_LANGUAGEFILE_BEGIN &quot;ENGLISH&quot;<br />
to<br />
!insertmacro MUI_LANGUAGEFILE_BEGIN &quot;English&quot;<br />
because of case-sensitive filenames on linux.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th July 2004, 14:44</div></div><div class="posttext">Have you made sure it's not your script? Does it work on Windows? Have you tested the examples?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">9th July 2004, 15:55</div></div><div class="posttext">My script has been working on windows for a while, and the resulting executable works fine. I only tried it on linux for the first time yesterday, but it's not brand new.<br />
Obviously, I've doctored the file separators for the linux version, but apart from that it's the same.<br />
<br />
I've tried a few of the examples. primes.nsi, silent.nsi and StrFunc.nsi work fine. bigtest.nsi works after some tweaking (filename case and file separators).<br />
<br />
But these don't seem to use custom pages.<br />
<br />
The examples that use custom pages are gfx.nsi and makensis.nsi.<br />
<br />
I haven't got either of these to work, because of the number of file separator etc changes. Also, I get &quot;AddBrandingImage is disabled for non Win32 platforms.&quot; with gfx.nsi.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th July 2004, 16:00</div></div><div class="posttext">Contrib/InstallOptions/test*.nsi use custom pages and work fine for me. Have you tried those?<br />
<br />
AddBrandingImage requires Windows fonts handling for pixel to dialog units conversion and is therefore currently disabled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">12th July 2004, 11:06</div></div><div class="posttext">Thanks for your continued help on this one...<br />
<br />
I tried Contrib/InstallOptions/test.nsi, and first of all it didn't work, because I was reversing too many file separator characters. The effect was that the custom page was skipped (exactly as I've been experiencing). I got it to work by putting back some windows file separators.<br />
<br />
Now I've fixed my own script - the problem was actually that I had messed up the MUI macros when I converted them to linux file separators, so the ini files didn't behave properly.<br />
<br />
So, thanks for your help Kichik, and sorry I messed up the linux conversion. Looking forward to a version that can automatically translate file separators...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rex123</div><div class="date">14th July 2004, 15:47</div></div><div class="posttext">This isn't relevant to the above, but this is the thread I've been using, so I'll continue it...<br />
<br />
My installer makes windows shortcuts to URLs as well as files. These have been working OK, but and I found that the URL shortcuts were not working with my new linux-originated installers (giving errors like &quot;failed to create shortcut&quot; in the install screen). I managed to fix the problem by hacking exec.c. I'm not a C programmer, so it was a bit of a guess, but it seems to have worked. Here's the diff:<br />
<br />
<br />
Index: exec.c<br />
===================================================================<br />
RCS file: /cvsroot/nsis/NSIS/Source/exehead/exec.c,v<br />
retrieving revision 1.139<br />
diff -r1.139 exec.c<br />
1006c1006<br />
&lt;         GetStringFromParm(0x11);<br />
---<br />
&gt;         GetStringFromParm(0x21);</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th July 2004, 18:25</div></div><div class="posttext">Thanks, uploaded.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>