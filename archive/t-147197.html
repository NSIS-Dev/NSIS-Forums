<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" IO behavior - reset IO ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  IO behavior - reset IO ? NSIS Discussion" />
	
	<title> IO behavior - reset IO ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  IO behavior - reset IO ?</div>
<hr />
<div class="pda"><a href="t-147197.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=147197">IO behavior - reset IO ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th August 2003, 01:50</div></div><div class="posttext">hi<br />
<br />
i have a problem i can not explain<br />
<br />
i have 3 io.ini depending on the selected language<br />
<br />
this is from the english one:<br />
<br />
Type=DropList<br />
Text=Select your language<br />
Left=30<br />
Right=130<br />
Top=95<br />
Bottom=108<br />
State=English<br />
ListItems=Deutsch|English|Francais<br />
<br />
the other ones has &quot;Deutsch&quot; and &quot;Francais&quot; as default.<br />
<br />
if i press &quot;Next&quot; and language was changed i force to reload this pane with the choosen language. if nothing was changed the second pane is shown.<br />
<br />
but unfortunately IO.ini saves somehow its state although i think it must be reset on each call.<br />
<br />
so when in choose &quot;Deutsch&quot; in the english IO and change back from the german IO to &quot;English&quot; the english IO shows me &quot;Deutsch&quot; again and not the default &quot;English&quot;.<br />
<br />
so how is that possible - it might be stored in memory !?<br />
And how can reset an IO.ini?<br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2003, 13:53</div></div><div class="posttext">I am sorry, but I could quite follow. Maybe if you attach the entire thing it will be a bit more clearer.<br />
<br />
But why work hard with all this when you can simply use the LangDLL plug-in to have the user choose the language?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">28th August 2003, 14:05</div></div><div class="posttext">@kichik<br />
<br />
i can not use any languagefile from NSIS 'cause this is no regular setup - this is a program itself with very specific dialogs. i use my own panes, none of NSIS.<br />
<br />
in short:<br />
i have 3 IO.ini's - each has its default settings<br />
each IO remembers it state when re-accessed - but this not useful<br />
<br />
so i have to reset each IO when accessed.<br />
<br />
is that possible or do i have do set the default manually?<br />
<br />
<br />
BTW the code snippet<br />
<br />
Function selectaction<br />
selectactionstart:<br />
  StrCmp $R3 &quot;g&quot; &quot;&quot; start02<br />
    !insertmacro MUI_HEADER_TEXT &quot;Wilkommen&quot; &quot;Bitte w채hlen Sie den gew체nschten Vorgang$\nund klicken sie dann auf 'Weiter'.&quot;<br />
    goto start04<br />
  start02:<br />
  StrCmp $R3 &quot;f&quot; &quot;&quot; start03<br />
    !insertmacro MUI_HEADER_TEXT &quot;Welcome&quot; &quot;Please choose your desired action. Then press 'Next'.&quot;<br />
    goto start04<br />
  start03:<br />
  !insertmacro MUI_HEADER_TEXT &quot;Welcome&quot; &quot;Please choose your desired action. Then press 'Next'.&quot;<br />
<br />
  start04:<br />
  StrCmp $R4 &quot;0&quot; start04a<br />
    BgImage::Sound $PLUGINSDIR\notify1.wav<br />
<br />
  start04a:<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;$R3menu01.ini&quot;<br />
<br />
  ; read out language<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;$R3menu01.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} $R2 start05<br />
      call langchange<br />
      call soundchange<br />
      goto selectactionstart<br />
<br />
  start05:<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;$R3menu01.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; selectactionend &quot;&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;$R3menu01.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    StrCmp ${TEMP1} &quot;1&quot; selectactionend &quot;&quot;<br />
<br />
  StrCmp $R3 &quot;g&quot; &quot;&quot; +3<br />
    MessageBox MB_ICONINFORMATION|MB_OK &quot;Sie m체ssen einen Vorgang ausw채hlen.$\nAnderfalls klicken Sie bitte auf 'Abbrechen'.&quot;<br />
    Goto  selectactionstart<br />
  StrCmp $R3 &quot;f&quot; &quot;&quot; +3<br />
    MessageBox MB_ICONINFORMATION|MB_OK &quot;You have to choose an action, otherwise 'cancel'&quot;<br />
    Goto  selectactionstart<br />
  MessageBox MB_ICONINFORMATION|MB_OK &quot;You have to choose an action, otherwise 'cancel'&quot;<br />
  Goto  selectactionstart<br />
<br />
  selectactionend:<br />
  call soundchange<br />
FunctionEnd<br />
<br />
<br />
PS i am wating for 3rd-party translation in french so this part is english till now too<br />
<br />
$R3 contains index for each language<br />
script is fully functional so far</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">28th August 2003, 14:38</div></div><div class="posttext">grmpf i did it this way although it is not luckyly solved<br />
<br />
Function langchange<br />
  ;reset IO<br />
  StrCmp $R3 &quot;g&quot; &quot;&quot; langchange1<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;$R3menu01.ini&quot; &quot;Field 6&quot; &quot;State&quot; &quot;Deutsch&quot;<br />
    goto langchange3<br />
<br />
  langchange1:<br />
  StrCmp $R3 &quot;f&quot; &quot;&quot; langchange2<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;$R3menu01.ini&quot; &quot;Field 6&quot; &quot;State&quot; &quot;Francais&quot;<br />
    goto langchange3<br />
<br />
  langchange2:<br />
  StrCmp $R3 &quot;e&quot; &quot;&quot; +3<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;$R3menu01.ini&quot; &quot;Field 6&quot; &quot;State&quot; &quot;Englisch&quot;<br />
<br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2003, 14:40</div></div><div class="posttext">Even if you're not using NSIS's inner strings it's still so much easier to use NSIS's language system. Just define some LangStrings instead of this.<br />
<br />
If you don't want to then I'll still have to see the entire script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">28th August 2003, 14:51</div></div><div class="posttext">@kichik<br />
<br />
pls gimme a hint how to define additional strings - i need about 125 per language ;) (i use so much in version 1 - winbatch coded - different headers &amp; messages)<br />
Strings are now hardcoded - in version 1 this was a external languagefile easily to work on.<br />
<br />
maybe i can insert strings onInit? lang file is build like an ini file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th August 2003, 18:30</div></div><div class="posttext">Use language strings (LangString).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">28th August 2003, 19:41</div></div><div class="posttext">thx Joost - i hope i can use combinations like ${$R3message} where $R3 contains the language shortie (e/g/f).<br />
So i can define all strings seperate :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th August 2003, 19:57</div></div><div class="posttext">Example:<br />
<br />
LangString &quot;bla&quot; ${LANG_ENGLISH} &quot;some text&quot;<br />
LangString &quot;bla&quot; ${LANG_FRENCH} &quot;some french text&quot;<br />
<br />
in your script, use $(bla)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>