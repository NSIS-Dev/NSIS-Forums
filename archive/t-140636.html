<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" function .oninitEnd is never called in Win98SE, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  function .oninitEnd is never called in Win98SE NSIS Discussion" />
	
	<title> function .oninitEnd is never called in Win98SE [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  function .oninitEnd is never called in Win98SE</div>
<hr />
<div class="pda"><a href="t-140636.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140636">function .oninitEnd is never called in Win98SE</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">30th June 2003, 17:55</div></div><div class="posttext">I updated via CVS on last friday.<br />
<br />
c:\program files\nsis\contrib\bgimage\example.nsi<br />
<br />
doesn't work right here. <br />
I am running Win98SE with latest updates.<br />
<br />
This problem is that the .onGUIEnd function is never called. <br />
I put a messageBox in the function to determine this.<br />
<br />
If I move the bgimage::destroy command to the last Section then the example works. Of course, the problem with this workaround is that if the install is aborted, then the bgimage.dll is not deleted.<br />
<br />
this alternative works, but will not be called if install is cancelled...<br />
Section -Ghost  ; last section<br />
bgImage::destroy<br />
SectionEnd<br />
<br />
this is the code in Example.nsi. It does not work...<br />
Function .onGUIEnd<br />
bgImage::destroy<br />
FunctionEnd<br />
<br />
Lilla</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th July 2003, 12:59</div></div><div class="posttext">.onGUIEnd is always called. The problem is that MessageBox doesn't work because $HWNDPARENT is invalid as the window no longer exists. What made you think .onGUIEnd isn't called in the first place?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">11th July 2003, 21:28</div></div><div class="posttext">kichik, thanks for your reply and explanation about why Messagebox from .onGuiEnd function cannot be used. It makes sense. So let me try again to describe the problem.<br />
<br />
The problem is that the following example doesn't work. The install window remains on the screen (including the bgimage) when the install finishes.<br />
<br />
c:\program files\nsis\contrib\bgimage\example.nsi <br />
<br />
I am running Win98SE with latest updates. <br />
<br />
If I move the bgimage::destroy command to the last Section then the example works. Of course, the problem with this workaround is that if the install is aborted, then bgimage.dll is not deleted. <br />
<br />
this code is in Example.nsi. It does not work... <br />
Function .onGUIEnd <br />
bgImage::destroy <br />
FunctionEnd <br />
<br />
this code works, but PROBLEM is that it will not be called if install is cancelled... thus, bgImage.dll is left in the temp folder.<br />
Section -Ghost ; last section <br />
bgImage::destroy <br />
SectionEnd <br />
<br />
Lilla</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th July 2003, 13:22</div></div><div class="posttext">Try this one please. Keep the destroy call in .onGUIEnd of course.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th July 2003, 17:48</div></div><div class="posttext">Lilla?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">16th July 2003, 20:09</div></div><div class="posttext">Kichik, I tried compiling the BgImage\Example.nsi script on my Win98SE system after replacing {NSIS}\Plugins\BgImage.dll with the version you posted earlier in this thread.<br />
<br />
When I ran the example, it ended with the installer window (showing &quot;Completed&quot;) superimposed on the &quot;A Desert for Mike&quot; screen. When I clicked the &quot;Close&quot; button in the installer window, the installer window disappeared leaving &quot;A Desert for Mike&quot; filling my screen (my desktop was completely hidden).<br />
<br />
I changed the example.nsi by inserting the &quot;-Ghost&quot; section Lilla mentioned, recompiled and ran the modified example: this time I only saw &quot;A Desert for Mike&quot; for a fraction of second (and when I clicked the &quot;Close&quot; button, the installer window went away leaving my desktop in view).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th July 2003, 21:26</div></div><div class="posttext">Thanks, fixed.<br />
<br />
Just when you start thinking that checking a plug-in 10 times on three different systems will do... tsk tsk tsk :(</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>