<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Change Colors, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Change Colors NSIS Discussion" />
	
	<title> Change Colors [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Change Colors</div>
<hr />
<div class="pda"><a href="t-197854.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197854">Change Colors</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">30th October 2004, 12:16</div></div><div class="posttext">How can i change:<br />
- text color<br />
- background color<br />
- space components color<br />
<br />
in this window ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th October 2004, 15:58</div></div><div class="posttext">You need to use Resource Hacker to get the dialogue id numbers (search Google).<br />
<br />
Then use GetDlgItem, SetCtlColors etc to change the colours of those items.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">30th October 2004, 21:06</div></div><div class="posttext">Isn't an archive about this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">30th October 2004, 22:38</div></div><div class="posttext">I have a problem: the DlgItem have standard color.<br />
<br />
Why don't work ?<br />
<br />
This is only an example<br />
<br />
<br />
Var HWND<br />
Var DLGITEM<br />
<br />
Function .oninit<br />
<br />
FindWindow $HWND &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
; PROGRESSBAR<br />
GetDlgItem $DLGITEM $HWND 1004<br />
SetCtlColors $DLGITEM C4B550 3E4637<br />
; INSTFILESPAGE<br />
GetDlgItem $DLGITEM $HWND 1016<br />
SetCtlColors $DLGITEM FFFFFF 3E4637<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th October 2004, 23:57</div></div><div class="posttext">Should be e.g. 0xC4B550, or 0xFFFFFF<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 08:55</div></div><div class="posttext">tnx, but don't work :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 10:30</div></div><div class="posttext">Ok, just realised you are calling it in .onInit.<br />
.onInit is called before the dialogue is shown and thus the dialogue does not exist yet. You need to use your code in .onGUIInit or a Section (for InstFiles page) instead.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 10:57</div></div><div class="posttext">i can't use .onGUIInt because with MUI i have this error message Error: Function named &quot;.onGUIInit&quot; already exists.<br />
<br />
<br />
I use this but don't work :(<br />
<br />
why ?<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
<br />
Function myGuiInit<br />
  <br />
FindWindow $HWND &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
; PROGRESSBAR<br />
GetDlgItem $DLGITEM $HWND 1004<br />
SetCtlColors $DLGITEM 0xC4B550 0x3E4637<br />
; INSTFILESPAGE<br />
GetDlgItem $DLGITEM $HWND 1016<br />
SetCtlColors $DLGITEM 0xFFFFFF 0x3E4637 <br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 11:47</div></div><div class="posttext">I guess Modern UI already uses .onGUIInit for it's own purposes.<br />
<br />
Use this instead (from MUI readme)<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
<br />
Function myGUIInit<br />
  ...your own code...<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 12:13</div></div><div class="posttext">i use already this, but don't work :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">31st October 2004, 13:07</div></div><div class="posttext">Dude:<br />
<br />
Try that function not in .onInit.<br />
<br />
Try it on a show function in your Page.<br />
<br />
Url (http://nsis.sourceforge.net/archive/viewpage.php?pageid=154)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 14:35</div></div><div class="posttext">For your code, as you are trying to change colours on the InstFiles page, stick the code in a Section (like I said earlier), or in the page show function (like Lobo stated).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 15:30</div></div><div class="posttext">sorry, but i don't understand<br />
<br />
this is full script<br />
<br />
where is my error ?<br />
<br />
<br />
;--------------------------------<br />
;Include Modern UI<br />
<br />
  !include &quot;MUI.nsh&quot;<br />
  !include &quot;Sections.nsh&quot;<br />
<br />
;--------------------------------<br />
;General<br />
<br />
  ;Name and file<br />
  Name &quot;GCF Backup v0.1&quot;<br />
  OutFile &quot;GCFBackup.exe&quot;<br />
  <br />
  ShowInstDetails show<br />
<br />
  ;Get installation folder from registry if available<br />
  InstallDirRegKey HKLM &quot;Software\Valve\Steam&quot; &quot;InstallPath&quot;<br />
  <br />
  SetCompressor lzma<br />
  <br />
  Var HWND<br />
  Var DLGITEM<br />
  <br />
;--------------------------------<br />
;Interface Settings<br />
<br />
  !define MUI_ABORTWARNING<br />
  !define MUI_COMPONENTSPAGE_NODESC<br />
  !define MUI_LICENSEPAGE_BGCOLOR &quot;3E4637&quot;<br />
  ;!define MUI_INSTFILESPAGE_COLORS &quot;C4B550 3E4637&quot;<br />
  ;!define MUI_INSTFILESPAGE_PROGRESSBAR &quot;colored&quot;<br />
  ;C4B550 giallo<br />
  ;4C5844 verde chiaro<br />
  !define MUI_COMPONENTSPAGE_CHECKBITMAP &quot;bmp\check.bmp&quot;<br />
  !define MUI_BGCOLOR &quot;3E4637&quot;<br />
  !define MUI_ICON &quot;bmp\Icon.ico&quot;<br />
  !define MUI_WELCOMEFINISHPAGE_BITMAP &quot;bmp\welcome.bmp&quot;<br />
  ;!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
  !define MUI_CUSTOMFUNCTION_COMPONENTS_SHOW &quot;CompColor&quot;<br />
  <br />
;--------------------------------<br />
;Pages<br />
<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_LICENSE &quot;License\License.rtf&quot;<br />
  Page components &quot;CompColor&quot;<br />
  ;!insertmacro MUI_PAGE_COMPONENTS<br />
  ;!insertmacro MUI_PAGE_DIRECTORY<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  <br />
;--------------------------------<br />
;Languages<br />
 <br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
  <br />
;--------------------------------<br />
;Installer Sections<br />
<br />
Section &quot;GCF Vari&quot; SecVari<br />
ReadINIStr $R1 &quot;$EXEDIR\CFG\config.ini&quot; &quot;GCF&quot; &quot;GCF Vari&quot;<br />
nsExec::ExecToLog '&quot;$EXEDIR\7Z\7za.exe&quot; x &quot;$EXEDIR\7Z\$R1.7z&quot; -aoa -y &quot;-o$INSTDIR\SteamApps\&quot;'<br />
SectionEnd<br />
...<br />
...<br />
<br />
Function CompColor<br />
;--------------------------------<br />
; Colors<br />
  <br />
FindWindow $HWND &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
; PROGRESSBAR<br />
GetDlgItem $DLGITEM $HWND 1022<br />
SetCtlColors $DLGITEM 0x00C4B550 0x003E4637<br />
; INSTFILESPAGE<br />
GetDlgItem $DLGITEM $HWND 1032<br />
SetCtlColors $DLGITEM 0x00FFFFFF 0x003E4637 <br />
<br />
FunctionEnd<br />
<br />
Function .onInit<br />
;--------------------------------<br />
; Splash Screen<br />
<br />
SetOutPath $TEMP<br />
File /oname=spltmp.bmp &quot;bmp\splash.bmp&quot;<br />
File /oname=spltmp.wav &quot;snd\hev_logon.wav&quot;<br />
<br />
  splash::show 5500 $TEMP\spltmp<br />
<br />
  Pop $0 <br />
<br />
Delete $TEMP\spltmp.bmp<br />
Delete $TEMP\spltmp.wav<br />
<br />
;--------------------------------<br />
; Find Process: Steam<br />
<br />
FindProcDLL::FindProc &quot;steam.exe&quot;<br />
Pop $R0<br />
StrCmp $R0 &quot;605&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Code $R0: Unable to search for process&quot; \<br />
  IDABORT<br />
  Quit<br />
StrCmp $R0 &quot;606&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Code $R0: Unable to identify system type&quot; \<br />
  IDABORT<br />
  Quit<br />
StrCmp $R0 &quot;607&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Code $R0: Unsupported OS&quot; \<br />
  IDABORT<br />
  Quit<br />
StrCmp $R0 &quot;632&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Code $R0: Process name is invalid&quot; \<br />
  IDABORT<br />
  Quit<br />
StrCmp $R0 &quot;1&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Code $R0: 'Steam.exe' process was found, close it&quot; \<br />
  IDABORT<br />
  Quit<br />
  <br />
;--------------------------------<br />
; Error Check<br />
<br />
StrCmp $INSTDIR &quot;&quot; 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Steam not installed, install it before launch GCF Backup&quot; \<br />
  IDABORT<br />
  Quit<br />
IfFileExists &quot;$EXEDIR\CFG\config.ini&quot; +3 0<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Error: 'config.ini' not found&quot; \<br />
  IDABORT<br />
  Quit<br />
IfFileExists &quot;$EXEDIR\7Z\7za.exe&quot; +3 0<br />
  MessageBox MB_OK|MB_ICONSTOP \<br />
  &quot;Error: '7za.exe' not found&quot; \<br />
  IDABORT<br />
  Quit<br />
  <br />
;--------------------------------<br />
; Components Check<br />
<br />
ReadINIStr $R1 &quot;$EXEDIR\CFG\config.ini&quot; &quot;GCF&quot; &quot;GCF Vari&quot;<br />
IfFileExists &quot;$EXEDIR\7Z\$R1.7z&quot; +7<br />
  !insertmacro UnSelectSection &quot;${SecVari}&quot;<br />
  SectionSetText ${SecVari} &quot;&quot;<br />
<br />
...<br />
...<br />
  <br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 18:04</div></div><div class="posttext">Shouldn't it be<br />
!define MUI_CUSTOMFUNCTION_INSTFILES_SHOW &quot;CompColor&quot;<br />
?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 18:30</div></div><div class="posttext">yes yes, but in the script i have tested components window<br />
<br />
however, don't work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 19:07</div></div><div class="posttext">it's very impossible :(<br />
<br />
i have tried with every way</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 19:22</div></div><div class="posttext">From MUI readme:<br />
These defines should be set before inserting a page macro.<br />
<br />
MUI_PAGE_CUSTOMFUNCTION_PRE function<br />
MUI_PAGE_CUSTOMFUNCTION_SHOW function<br />
MUI_PAGE_CUSTOMFUNCTION_LEAVE function<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">31st October 2004, 19:41</div></div><div class="posttext">can you edit my script for example ?<br />
<br />
sorry and tnx for all</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2004, 21:27</div></div><div class="posttext">Here you are.<br />
(Please attach scripts in future)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RoMZERO</div><div class="date">1st November 2004, 07:54</div></div><div class="posttext">work fine :)<br />
<br />
tnx for all, you are very kind :)<br />
<br />
last question: how can i edit the script for change color of the gray space ? (look the image)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">1st November 2004, 12:50</div></div><div class="posttext">FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
<br />
Where $0 is the dialog handle to paint.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>