<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" debugging MUI_PAGE_FINISH?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  debugging MUI_PAGE_FINISH? NSIS Discussion" />
	
	<title> debugging MUI_PAGE_FINISH? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  debugging MUI_PAGE_FINISH?</div>
<hr />
<div class="pda"><a href="t-218521.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=218521">debugging MUI_PAGE_FINISH?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">10th June 2005, 10:46</div></div><div class="posttext">Hi all,<br />
<br />
Someone found a bug in the debian nsis package[1], where the MUI_PAGE_FINISH is never shown.<br />
<br />
Is anyone able to reproduce this using the windows version of nsis? I've confirmed it happens with the debian package.<br />
<br />
Does anyone know of a way to debug the function? I've tried inserting MessageBox and FileOpen/etc, but neither of these can be used inside the MUI_PAGE_FINISH macro.<br />
<br />
1. http://bugs.debian.org/312564</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th June 2005, 10:56</div></div><div class="posttext">The MUI_FUNCTION_FINISHPAGE macro is where you'd want to add your code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">12th June 2005, 08:59</div></div><div class="posttext">Ok, so I put this at the end of the PRE function:<br />
<br />
    MessageBox MB_OK &quot;${PRE}&quot;<br />
<br />
And this at the start of the LEAVE function:<br />
<br />
    MessageBox MB_OK &quot;${LEAVE}&quot;<br />
<br />
Result is that it seems that only the PRE function is called. I'm not sure what to make of this, any ideas about what might cause it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th June 2005, 13:47</div></div><div class="posttext">Go deeper. Dig into the code of the InstallOptions plug-in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">13th June 2005, 04:51</div></div><div class="posttext">Hmmm, ok, if I copy the msvc-compiled InstallOptions.dll from the source tarball to the debian package, the finish page works fine. Must be a problem with mingw-compiled versions. I'll investigate further. I not that the mingw version depends on msvcrt.dll for some functions, while the msvc version doesn't: __dllonexit, _assert, _errno, abort, fflush, free, malloc, memset. I expect this might be a problem for some other plugins too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">13th June 2005, 14:15</div></div><div class="posttext">Seems that the actual problem is that the resource is not compiled into the dll for some reason. Good news is that this will not be an issue in 2.07. Now to backport the fix.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th June 2005, 20:13</div></div><div class="posttext">Originally posted by pabs <br />
Good news is that this will not be an issue in 2.07. Now to backport the fix. Was that a problem with the Makefiles?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">14th June 2005, 06:24</div></div><div class="posttext">Yep. I used $&lt; instead of $^ in the dlls that needed to link more than one .o file together :/<br />
<br />
So, fixing the MUI problem fixed a number of other (hidden) plugin problems too.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>