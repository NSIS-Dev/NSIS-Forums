<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" DoubleClick (ListBox), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  DoubleClick (ListBox) NSIS Discussion" />
	
	<title> DoubleClick (ListBox) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  DoubleClick (ListBox)</div>
<hr />
<div class="pda"><a href="t-359944.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=359944">DoubleClick (ListBox)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nashtor</div><div class="date">23rd April 2013, 13:10</div></div><div class="posttext">Hello there!<br />
<br />
Whenever a user DoubleClicks an entry in a ListBox I am trying to call a function.<br />
Searching the documentation and this forum did not help me: found nothing concerning DoubleClicks ...<br />
I tried intercepting LBN_DBLCLK (--&gt; http://msdn.microsoft.com/en-us/library/ms997541.aspx) with NSD_OnNotify but it never fires ...<br />
(NSD_OnClick is not working for me either ...)<br />
<br />
At the moment I am using NSD_OnChange to simulate a very slow and bad 'Double'Click.<br />
<br />
Is there any way to call a function if someone doubleclicks an entry in a ListBox?<br />
(... Am I doing something stupid?)<br />
<br />
<br />
;--------------------------------<br />
;Include<br />
	<br />
	!include &quot;MUI2.nsh&quot;<br />
	!include &quot;nsDialogs.nsh&quot;<br />
<br />
<br />
;--------------------------------<br />
;General<br />
<br />
!define VERSION &quot;0.1.1&quot;<br />
<br />
Name &quot;LB DoubleClick Test&quot;<br />
<br />
OutFile &quot;LB_DoubleClick_Test.exe&quot;<br />
<br />
RequestExecutionLevel user<br />
<br />
<br />
;--------------------------------<br />
;Variables<br />
	<br />
	Var LB_test<br />
	Var CurrentString<br />
	<br />
	<br />
;--------------------------------<br />
;Pages<br />
	<br />
	Page custom nsDialogsMain<br />
	<br />
<br />
;--------------------------------<br />
;Languages<br />
	<br />
	!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
	<br />
	<br />
;--------------------------------<br />
;Descriptions<br />
<br />
	;Header<br />
	LangString &quot;^SetupCaption&quot; ${LANG_ENGLISH} &quot;$(^Name) v${VERSION}&quot;<br />
	LangString PAGEMAIN_TITLE ${LANG_ENGLISH} &quot;ListBox DoubleClick Test&quot;<br />
	LangString PAGEMAIN_SUBTITLE ${LANG_ENGLISH} &quot;Does a DoubleClick even work ?&quot;<br />
	<br />
	<br />
;--------------------------------<br />
;Makros<br />
	<br />
	;select (first, second, third ... last) item of a ListBox<br />
	!macro _NSD_LB_SelectItem CONTROL ITEM<br />
<br />
		SendMessage ${CONTROL} ${LB_SETCURSEL} ${ITEM} 0<br />
<br />
	!macroend<br />
<br />
	!define NSD_LB_SelectItem &quot;!insertmacro _NSD_LB_SelectItem&quot;<br />
<br />
<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
Section &quot;&quot;<br />
SectionEnd<br />
<br />
<br />
;--------------------------------<br />
;Installer Functions<br />
<br />
;PagesAndExitFunctions - START<br />
Function nsDialogsMain<br />
<br />
	!insertmacro MUI_HEADER_TEXT $(PAGEMAIN_TITLE) $(PAGEMAIN_SUBTITLE)<br />
	<br />
	nsDialogs::Create 1018<br />
		Pop $0<br />
<br />
	${If} $0 == error<br />
		Abort<br />
	${EndIf}<br />
	<br />
	${NSD_CreateListBox} 30% 0 40% 60% &quot;&quot;<br />
		Pop $LB_test<br />
		${NSD_OnNotify} $LB_test func_OnNotify<br />
		${NSD_OnClick} $LB_test func_OnClick<br />
		${NSD_OnChange} $LB_test func_OnChange<br />
		Call func_fillListBox<br />
	<br />
	nsDialogs::Show<br />
	<br />
FunctionEnd<br />
;PagesAndExitFunctions - END<br />
<br />
Function func_fillListBox<br />
<br />
	${NSD_LB_Clear} $LB_test $0<br />
	${NSD_LB_AddString} $LB_test &quot;testString1&quot;<br />
	${NSD_LB_AddString} $LB_test &quot;testString2&quot;<br />
	${NSD_LB_AddString} $LB_test &quot;testString3&quot;<br />
	;select first item in ListBox<br />
	${NSD_LB_SelectItem} $LB_test 0<br />
	<br />
FunctionEnd<br />
<br />
<br />
;this will never fire ...<br />
Function func_OnNotify<br />
	<br />
	${NSD_LB_GetSelection} $LB_test $CurrentString<br />
	MessageBox MB_OK &quot;$CurrentString:$\r$\nfunc_OnNotify fired ...&quot;<br />
	<br />
	; for func_OnChange:<br />
	StrCpy $CurrentString &quot;&quot;<br />
	<br />
FunctionEnd<br />
<br />
;this will never fire ...<br />
Function func_OnClick<br />
	<br />
	${NSD_LB_GetSelection} $LB_test $CurrentString<br />
	MessageBox MB_OK &quot;$CurrentString:$\r$\nfunc_OnClick fired ...&quot;<br />
	<br />
	; for func_OnChange:<br />
	StrCpy $CurrentString &quot;&quot;<br />
	<br />
FunctionEnd<br />
<br />
Function func_OnChange<br />
	<br />
	;it fires even if clicked twice(slowly) on an empty field of ListBox ...<br />
	<br />
	; just to imitate a very slow double click 1/2:<br />
	${NSD_LB_GetSelection} $LB_test $0<br />
	StrCmp &quot;$CurrentString&quot; &quot;$0&quot; +3 0<br />
		StrCpy $CurrentString $0<br />
		Abort ###<br />
		<br />
	MessageBox MB_OK &quot;$CurrentString:$\r$\nfunc_OnChange fired ...&quot;<br />
	<br />
	; just to imitate a very slow double click 2/2:<br />
	StrCpy &quot;$CurrentString&quot; &quot;&quot;<br />
	<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">23rd April 2013, 15:53</div></div><div class="posttext">nsDialogs is rather limited when it comes to which events are passed on and NSD_OnNotify is probably only for WM_NOTIFY (ListView)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nashtor</div><div class="date">24th April 2013, 11:12</div></div><div class="posttext">What a shame! Seems like I have to get used to my 'Double'Click function...<br />
Nonetheless: thank you for your really fast replay!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>