<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Copy from USB or CD (any letter of the driver), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Copy from USB or CD (any letter of the driver) NSIS Discussion" />
	
	<title> Copy from USB or CD (any letter of the driver) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Copy from USB or CD (any letter of the driver)</div>
<hr />
<div class="pda"><a href="t-341152.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=341152">Copy from USB or CD (any letter of the driver)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">John 777</div><div class="date">24th January 2012, 10:06</div></div><div class="posttext">I created an application that I must distribute with CD or USB. I need to copy files from USB or CD to C: \ &quot;foo&quot; on different computers. You know that the driver can change letter (D, E, F and so on ...): What scripts I need to use to copy from a CD or USB (any letter) to C: \ &quot;foo&quot;?<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th January 2012, 10:19</div></div><div class="posttext">The easiest solution would simply be to enumerate all drives and check for an identifying mark, such as specific path/filenames and/or volume label. You can use the DVD_GetNextDrive function from http://nsis.sourceforge.net/DVD_functions<br />
<br />
But you'll need to modify it to scan for other drive types as well. Particularly, change:<br />
      ;get type of drive<br />
      System::Call 'kernel32::GetDriveType(t &quot;$R2:\&quot;) i .r13'<br />
      StrCmp $R3 5 0 NoDriveHere<br />
        ;if type is CDROM<br />
<br />
into:<br />
      ;get type of drive<br />
      System::Call 'kernel32::GetDriveType(t &quot;$R2:\&quot;) i .r13'<br />
      StrCmp $R3 2 +2 0<br />
      StrCmp $R3 5 0 NoDriveHere<br />
        ;if type is CDROM or REMOVABLE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th January 2012, 11:20</div></div><div class="posttext">If your executable is on the CD/USB then just use $EXEDIR.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th January 2012, 11:26</div></div><div class="posttext">D'oh. Well spotted. :igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">25th January 2012, 23:13</div></div><div class="posttext">You must use $EXEDIR for thing like these, not just because it is easy but because a volume can be mounted in a directory (NT5+), ex: c:\foo\bar\myusbdrive\yoursetup.exe</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>