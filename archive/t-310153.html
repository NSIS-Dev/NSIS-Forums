<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" inetc plugin mangles URL and will not save file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  inetc plugin mangles URL and will not save file NSIS Discussion" />
	
	<title> inetc plugin mangles URL and will not save file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  inetc plugin mangles URL and will not save file</div>
<hr />
<div class="pda"><a href="t-310153.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=310153">inetc plugin mangles URL and will not save file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">17th August 2009, 03:54</div></div><div class="posttext">Hello.<br />
I am using the intec plugin to download a file on an amazon authenticated connection.<br />
I am using an URL with a sig b64 hash, expire date and a couple of qry vars. It is URLencoded.<br />
I create and pass the URL to inetc.<br />
inetc, in 2 of 3 tries, receives an Access Forbidden or Bad Signature 403, in which case, no file is downloaded.<br />
When it succeeds in getting the file, it &quot;saves&quot; an empty file.<br />
I capture this url from the installer in debug by copy/paste from messagebox just b4 the get statement and when I type it in firefox or explorer, it works every time.<br />
I am dependent upon this plugin and would much appreciate some help.<br />
Thanks.<br />
<br />
this is the simple 'get' I use:<br />
<br />
inetc::get  /CAPTION &quot;Getting package....&quot; /BANNER &quot;Downloading files.....&quot;  &quot;$3&quot; &quot;$R7&quot; /end<br />
    Pop $1 <br />
$3 is the URL and $R7 is the file to save to.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">18th August 2009, 03:35</div></div><div class="posttext">****   UPDATE  ************<br />
<br />
The inetc plugin WILL save the file; it was my err that caused that problem.<br />
<br />
However, inetc is fouling up my URL and preventing downloads by my installer. That is, the signed URL that is given to the inetc GET fails 2/3 times.<br />
I am logging these URLs and, without exception, when I type the same URL into FF or IE, it downloads the file!<br />
<br />
I really need some immediate help on this from Takhir as I am ready to launch and now have no reliable way to DL the App I am selling.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">18th August 2009, 17:54</div></div><div class="posttext">Can you give me sample URL which reproduces the situation? Do you have a direct connection to server or this is proxy/vpn/some_other specific configuration?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">18th August 2009, 20:40</div></div><div class="posttext">Thanks for responding, Takhir.<br />
I will prepare and send you an URL.<br />
These are authenticated, access-control URLs with EXPIRE times (required).<br />
<br />
<br />
I create these URLS on-demand to Amazon S3 specs.<br />
Each URL works perfectly in a browser.<br />
When passed through inetc::get, somehow the URL is corrupted about 2of 3 times, in an uneven distribution.<br />
Sometimes 4 in a row are fine then 3 bad, etc.<br />
<br />
The failures are 2 types of 403: Access Denied - in this case, this can be caused by an err in any part of the URL Qry var string from '?' to the right;<br />
Signature does not match: - this occurs when either the sig part of the qry string is bad or the request part - i.e., the part b4 the '?' of the qry string.<br />
<br />
It would seem that, depending on the URL inetc:get sees, it's processing will introduce input-dependent errors.<br />
<br />
My connection to the source is direct Inet via an URL that you can type in any FF or IE browser from any computer with Inet access.<br />
<br />
I will PM you the URL.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">19th August 2009, 08:47</div></div><div class="posttext">I downloaded a whole file 3 times and also started/cancelled  download few times, all works like a dream. Attached version displays message box with cracked URL parts - I could see path/file name and signature fields in Extra, looks OK. Did you tested download from other LAN? What about using POST request (but I am not sure this may help :( )?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">19th August 2009, 16:23</div></div><div class="posttext">Thanks a lot Takhir!<br />
But did you get a chance to test the other 3 URLS I sent by PM?<br />
There is one bad and 2 good.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">20th August 2009, 20:14</div></div><div class="posttext">Hi Takhir.<br />
Any luck with those new Urls?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st August 2009, 07:07</div></div><div class="posttext">Excuse, Ð˜oscoBilly, I now in a time trouble, but will try to find time tonight and to check up your URLs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st August 2009, 17:38</div></div><div class="posttext">I don't remember why I used URL escape sequences decoding in this client. Now looks better with your URLs. Please test.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">21st August 2009, 18:52</div></div><div class="posttext">Excellent!<br />
:D <br />
Works great!<br />
Thanks for taking the time to fix this, Takhir.<br />
<br />
Will you be posting the updated source as well?<br />
As to this problem... I'm surprised no one else has mentioned this.<br />
<br />
                             :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st August 2009, 19:39</div></div><div class="posttext">Thanks! Yes, I'll also add 'marque' progress bar style for downloads with unknown file size and put package to wiki after this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BoscoBilly</div><div class="date">21st August 2009, 19:42</div></div><div class="posttext">Terrific!<br />
Thanks again, Takhir.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark.ruys</div><div class="date">15th January 2010, 10:58</div></div><div class="posttext">Originally posted by Takhir <br />
I don't remember why I used URL escape sequences decoding in this client. Now looks better with your URLs. Please test.  <br />
<br />
Could you please post the modifications you made in the source. Or upload a Unicode compiled inet.dll. I keep getting URL Parts Error errors, even with the latest dll from nsis.sourceforge.net/Inetc_plug-in.<br />
<br />
Thanks,<br />
<br />
Mark<br />
<br />
PS. The URL the installers tries to download is www.microsoft.com/downloads/info.aspx?na=90&amp;p=&amp;SrcDisplayLang=en&amp;SrcCategoryId=&amp;SrcFamilyId=0856eacb-4362-4b0d-8edd-aab15c5e04f5&amp;u=http%3a%2f%2fdownload.microsoft.com%2fdownload%2f5%2f6%2f7%2f567758a3-759e-473e-bf8f-52154438565a%2fdotnetfx.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">15th January 2010, 16:55</div></div><div class="posttext">May be Redxii used old sources for this... I am attaching unicode dll version built from Aug 22, 2009 sources, please let me know if this is OK, I'll put it to wiki this case.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark.ruys</div><div class="date">15th January 2010, 18:34</div></div><div class="posttext">Originally posted by Takhir <br />
May be Redxii used old sources for this... I am attaching unicode dll version built from Aug 22, 2009 sources, please let me know if this is OK, I'll put it to wiki this case.  <br />
<br />
In the end I managed to get rid of the &quot;URL Parts Error&quot; error by adding &quot;/END&quot; to the inetc:get invocation (as documented, though I don't fully understand why).<br />
I used the stable dll. So I guess my problem had nothing to do with this thread.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">16th January 2010, 10:10</div></div><div class="posttext">/END required because plug-in can download few files in a single requiest. But I am not sure if this feature was ever used.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>