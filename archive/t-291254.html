<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Building a Windows installer package under FreeBSD invalid DOS header message, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Building a Windows installer package under FreeBSD invalid DOS header message NSIS Discussion" />
	
	<title> Building a Windows installer package under FreeBSD invalid DOS header message [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Building a Windows installer package under FreeBSD invalid DOS header message</div>
<hr />
<div class="pda"><a href="t-291254.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=291254">Building a Windows installer package under FreeBSD invalid DOS header message</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">4th May 2008, 02:24</div></div><div class="posttext">Hello, I am trying to build a OpenVPN gui installer under FreeBSD but keep running into this error:<br />
<br />
!define: &quot;MUI_UNFINISHPAGE_NOAUTOCLOSE&quot;=&quot;&quot;<br />
!define: &quot;MUI_COMPONENTSPAGE_TEXT_TOP&quot;=&quot;Select the components to install/upgrade.  Stop any OpenVPN or OpenVPN GUI processes or the OpenVPN service if it is running.&quot;<br />
!insertmacro: MUI_PAGE_LICENSE<br />
Error while changing UI: PE file contains invalid DOS header<br />
Error in macro MUI_INTERFACE on macroline 50<br />
Error in macro MUI_PAGE_INIT on macroline 2<br />
Error in macro MUI_PAGE_LICENSE on macroline 5<br />
Error in script &quot;openvpn-gui.nsi&quot; on line 111 -- aborting creation process<br />
<br />
Does anyone know which file this is complaining about or how to fix this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th May 2008, 06:33</div></div><div class="posttext">It's probably complaining about Contrib/UIs/modern.exe. Can you execute that application on Windows? Which version of NSIS is that? Which processor are you using?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">5th May 2008, 02:58</div></div><div class="posttext">Thanks for the reply.<br />
<br />
Using nsis-2.36 and I zipped up the Contrib/UIs from a recent NSIS Windows Installer executable and used WinSCP to copy the zip file to the FreeBSD host and used unzip to extract the files.   I am pretty sure the windows binaries will work OK on windows.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th May 2008, 19:05</div></div><div class="posttext">Processor?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">5th May 2008, 19:16</div></div><div class="posttext">Here is the relevant dmesg -a information:<br />
<br />
Copyright (c) 1992-2008 The FreeBSD Project.<br />
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994<br />
        The Regents of the University of California. All rights reserved.<br />
FreeBSD is a registered trademark of The FreeBSD Foundation.<br />
FreeBSD 7.0-RELEASE #0: Sun Feb 24 19:59:52 UTC 2008<br />
    root@logan.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC<br />
Timecounter &quot;i8254&quot; frequency 1193182 Hz quality 0<br />
CPU: AMD Opteron(tm) Processor 275 (2205.01-MHz 686-class CPU)<br />
  Origin = &quot;AuthenticAMD&quot;  Id = 0x20f12  Stepping = 2<br />
  Features=0x178bfbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CLFLUSH,MMX,FXSR,SSE,SSE2,HTT&gt;<br />
  Features2=0x1&lt;SSE3&gt;<br />
  AMD Features=0xe2500800&lt;SYSCALL,NX,MMX+,FFXSR,LM,3DNow!+,3DNow!&gt;<br />
  AMD Features2=0x2&lt;CMP&gt;<br />
  Cores per package: 2<br />
real memory  = 1073709056 (1023 MB)<br />
avail memory = 1037111296 (989 MB)<br />
ACPI APIC Table: &lt;HP     00000083&gt;<br />
FreeBSD/SMP: Multiprocessor System Detected: 2 CPUs<br />
 cpu0 (BSP): APIC ID:  0<br />
 cpu1 (AP): APIC ID:  1<br />
<br />
Appreciate all the help so far!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th May 2008, 19:20</div></div><div class="posttext">It might be complaining about the Stubs. Have you copied those from Windows as well? That check is the very first check of the EXE file and just checks the first two characters are MZ. If your processor is not big-endian, I don't see how that can go wrong unless the file is really invalid.<br />
<br />
Do you care for some debugging? Can you tell what it compares to MZ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">5th May 2008, 19:25</div></div><div class="posttext">Hmm, you might be on to something.  I could not locate any of the stubs in the source tree since soca was instructed to not build them (it errors out when building).  So this very well might be the cause of the issues.   Where can I obtain the correct Stubs to populate to /usr/local/Stubs?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th May 2008, 19:38</div></div><div class="posttext">From the zipped up version of NSIS. See the SourceForge download page. As for the location, I'm not sure that's the right one, but it depends on how you built makensis.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">5th May 2008, 19:42</div></div><div class="posttext">The zipped up version of NSIS's stubs will work okay on FreeBSD without rebuilding?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th May 2008, 20:49</div></div><div class="posttext">Sure. It's just the Windows installer stub. They are read as data files by makensis.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">geekgod</div><div class="date">6th May 2008, 00:34</div></div><div class="posttext">That appears to have fixed it.  Thanks a lot for your help!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>