<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Disable of Drive, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Disable of Drive NSIS Discussion" />
	
	<title> Disable of Drive [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Disable of Drive</div>
<hr />
<div class="pda"><a href="t-297107.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297107">Disable of Drive</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Naina</div><div class="date">9th September 2008, 11:24</div></div><div class="posttext">Hello,<br />
<br />
I would like to know one more thing. I want to know if we can disbale the drive (C: or D:) in the nullsoft Installer.<br />
<br />
Please let me know if anybody has any idea.<br />
<br />
Thanks in advance,<br />
<br />
Naina</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">9th September 2008, 12:58</div></div><div class="posttext">Use the .onVerifyInstDir callback...<br />
<br />
Function .onVerifyInstDir<br />
<br />
  StrCpy $0 $INSTDIR 2<br />
  StrCmp $0 &quot;C:&quot; PathBad<br />
  StrCmp $0 &quot;D:&quot; 0 PathGood<br />
    PathBad:<br />
    Abort<br />
  PathGood:<br />
<br />
FunctionEnd<br />
<br />
Edit:<br />
Or do you mean just the root dir?<br />
<br />
In that case use this.<br />
Function .onVerifyInstDir<br />
<br />
  StrCmp $INSTDIR &quot;C:&quot; PathBad<br />
  StrCmp $INSTDIR &quot;D:&quot; 0 PathGood<br />
    PathBad:<br />
    Abort<br />
  PathGood:<br />
<br />
FunctionEnd<br />
<br />
PaR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Naina</div><div class="date">10th September 2008, 06:09</div></div><div class="posttext">Hello,<br />
<br />
Thanks for your quick reply. But I guess the solution that you have given is not working for my requirement.<br />
<br />
Actually as per my requirement, Installer has to create a directory structure so that the folder always have to start from the drive itself. for example, C:\DVT and D:\DVT. User should not be allowed to install in any other folder except C:\DVT or D:\DVT, we should be able to disable other folders. <br />
<br />
I donno if it is possible to control the user to do like that in Nullsoft Installer. Please let me know if you have any idea to solve this as early as possible.<br />
<br />
Thanks in advance,<br />
<br />
Naina</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Naina</div><div class="date">10th September 2008, 06:33</div></div><div class="posttext">Hello,<br />
<br />
Thanks for your quick reply. But I guess the solution that you have given is not working for my requirement.<br />
<br />
Actually as per my requirement, Installer has to create a directory structure so that the folder always have to start from the drive itself. for example, C:\DVT and D:\DVT. User should not be allowed to install in any other folder except C:\DVT or D:\DVT, we should be able to disable other folders. <br />
<br />
I donno if it is possible to control the user to do like that in Nullsoft Installer. Please let me know if you have any idea to solve this as early as possible.<br />
<br />
Here is my code attached. <br />
<br />
Thanks in advance,<br />
<br />
Naina</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">10th September 2008, 20:52</div></div><div class="posttext">Originally posted by Naina <br />
Installer has to create a directory structure so that the folder always have to start from the drive itself. for example, C:\DVT and D:\DVT. User should not be allowed to install in any other folder except C:\DVT or D:\DVT, we should be able to disable other folders.<br />
Well then maybe this will work. :)<br />
<br />
This code should only allow istall in &lt;drive&gt;:\DVT folder tree. If you want to strictly allow install only in &lt;drive&gt;:\DVT folder just replace line 'StrCpy $0 $INSTDIR 5 1' with 'StrCpy $0 $INSTDIR &quot;&quot; 1' in the code.<br />
Function .onVerifyInstDir<br />
<br />
  StrCpy $0 $INSTDIR 5 1<br />
  StrCmp $0 &quot;:\DVT&quot; PathGood<br />
    Abort<br />
  PathGood:<br />
<br />
FunctionEnd<br />
<br />
PaR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Naina</div><div class="date">11th September 2008, 07:25</div></div><div class="posttext">Hello,<br />
<br />
Thanks for the reply. I tried with the given code. But it is disabling the &quot;Install&quot; button. So am not able to install. I should be able to install only with the drives C:\DVT and D:\DVT and if the folder is other than the DVT, I should be able to disable the Install button that time.<br />
<br />
Please let me know if it is possible to do like this.<br />
<br />
Thanks,<br />
<br />
Naina</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">11th September 2008, 20:17</div></div><div class="posttext">Are you sure you picked the right path?  The install button should be grayed out unless you pick the right path--one that contains &lt;drive&gt;:\DVT  (I tested it on my own and it seems to work fine.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>