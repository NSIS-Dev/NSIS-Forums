<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" getting makensis options within nsi-script, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  getting makensis options within nsi-script NSIS Discussion" />
	
	<title> getting makensis options within nsi-script [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  getting makensis options within nsi-script</div>
<hr />
<div class="pda"><a href="t-272138.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272138">getting makensis options within nsi-script</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">1st June 2007, 10:14</div></div><div class="posttext">Hi,<br />
if I want to get the used makensis options within the nsi-script that is currently compiled I could use an additional define /D that contains this makensis command line. E.g.:<br />
<br />
makensis.exe /DDef1 /DDef2 /DCL=&quot;/DDef1 /DDef2&quot; myscript.nsi<br />
<br />
But if the command line changes I have to ensure that this additional define is adapted too. <br />
<br />
Is there another way to get the makensis command line within the script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">1st June 2007, 23:59</div></div><div class="posttext">$CMDLINE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">4th June 2007, 09:08</div></div><div class="posttext">Thanks demiller9, but $CMDLINE contains the command line of the installer application. What I need is the command line of makensis.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th June 2007, 13:44</div></div><div class="posttext">What do you use the CL define for in your script?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">19th June 2007, 07:53</div></div><div class="posttext">Hi Afrow UK,<br />
sorry for the late response. I hadn't much time last weeks. <br />
<br />
The reason to get the makensis command line is the following:<br />
I had to implement an installer that just should install/uninstall some files. The definition of these files should be done with wildcards which is not a problem. But to uninstall only that files that actually has been installed wildcards cannot be used. <br />
<br />
As recommended in another thread of this forum I created a auxiliary exe (just a second nsi-script) that creates a text file with the list of all files to install/uninstall from the list containing wildcards. But the file list containing wildcards depends on defines like DEBUG that control which files to install. The same defines are used by the installer itself. So the auxiliary exe has to be compiled with the same makensis command line parameters (i.e. /D et cetera) like the installer itself. Than it will be called to create the text file and after that the installer is compiled using this created file.<br />
<br />
Sure, I can use a batch file to perform this steps but I wanted to hide this process. I wanted to compile the auxiliary exe from within the installer during compilation by means of !system using the same command line parameters (at least the /D parameters). Another !system call is than used to run the auxiliary exe ...<br />
<br />
Hope it's not too confusing  ;-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2007, 10:12</div></div><div class="posttext">I see. You could post a feature request on the NSIS SourceForge page.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2007, 10:14</div></div><div class="posttext">However, really you should pass those defines yourself. You won't be referencing defines in your script that haven't had their names hard-coded in...<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">19th June 2007, 10:40</div></div><div class="posttext">Unknown defines could be ignored. But actually only hard-coded  defines are passed. The problem is that I have to pass them twice. <br />
<br />
But it's only a minor problem overall. I was only interested whether there is a NSIS feature that I doesn't know. <br />
Thanks for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>