<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" rebootok: bug, gotcha or error on my part?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  rebootok: bug, gotcha or error on my part? NSIS Discussion" />
	
	<title> rebootok: bug, gotcha or error on my part? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  rebootok: bug, gotcha or error on my part?</div>
<hr />
<div class="pda"><a href="t-313549.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313549">rebootok: bug, gotcha or error on my part?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">iamdave</div><div class="date">8th October 2009, 20:55</div></div><div class="posttext">I noticed this while testing an installer...<br />
<br />
In the uninstall section, I use &quot;rmdir /r /rebootok&quot;<br />
I tested the uninstall<br />
Whoops... I had one of the EXE's running so it couldn't<br />
  be deleted and so the delete was saved in windows magic<br />
  &quot;delete on next reboot&quot; registry keys<br />
I went and manually deleted the EXE after stopping it<br />
Then I ran the installer... all seems well and good,<br />
  everything is installed as I wished<br />
<br />
[Sometime later that day]<br />
<br />
I reboot<br />
Whoops... the EXE that had been queued for deletion is<br />
  actually deleted (surprise) but it is the newly installed<br />
  EXE, not the original EXE<br />
<br />
------<br />
<br />
So, would this be considered a bug? Should NSIS check to<br />
see if a file being installed is queued for deletion at<br />
the next boot and fixup the registry so it does not get<br />
deleted?<br />
<br />
Or... is this something that everyone else using NSIS knows<br />
and I am just dumb?<br />
<br />
Is there a way to avoid this scenario?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th October 2009, 08:52</div></div><div class="posttext">This is not a bug, as everything is behaving as it has been designed: the file gets deleted after reboot. That's what you told it to do, after all.<br />
<br />
The scenario you describe would be a typical case of 'pebkac' for which, if you happen to want to prevent it, you'll have to create your own checks in your own installer. Not sure how you should go about doing this, though, as I don't know how NSIS executes the deletion after reboot.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>