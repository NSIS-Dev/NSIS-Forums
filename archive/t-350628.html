<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How can make NSIS to download and run a file without user intervention?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How can make NSIS to download and run a file without user intervention? NSIS Discussion" />
	
	<title> How can make NSIS to download and run a file without user intervention? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How can make NSIS to download and run a file without user intervention?</div>
<hr />
<div class="pda"><a href="t-350628.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=350628">How can make NSIS to download and run a file without user intervention?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">saxe</div><div class="date">25th October 2012, 21:37</div></div><div class="posttext">Hi there,<br />
<br />
I am new to NSIS.<br />
<br />
My installation would like to give the user a selection of available components and each component links to an installation from my website. When the selection is made, I would like NSIS to download the files and run them without any user intervention.<br />
<br />
1) The checksum of these files should be verified at the end of the download against a checksum log from my website, such as a TXT file<br />
2) These files need to be run at a certain order, not just FIFO style<br />
3) These files should be stored in a temp directory by default so that they won't take up resource when the installation is finished<br />
4) Before the actual download, the user can request to save these files to an user directory so that they can transfer them to another PC<br />
<br />
Can someone be so kind to give me some pointers on how to get this done?<br />
<br />
Thanks a lot!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Seban</div><div class="date">25th October 2012, 22:36</div></div><div class="posttext">Hi saxe,<br />
<br />
I'm a noob too, but some hints are better than nothing, right?<br />
<br />
1) I saw this earlier: http://nsis.sourceforge.net/MD5_plugin<br />
You can create the md5 checksum of a file and compare it to your text files. Reading from files is very well described in the NSIS help. To compare you can use StrCmp.<br />
<br />
2) If the order depends on the chosen components, you can create a hidden section (that always gets executed) behind the other sections and use <br />
${If} ${SectionIsSelected} ${section_name}<br />
...<br />
${EndIf}<br />
<br />
to egt some order. Requires logiclib.nsh<br />
<br />
3) NSIS uses the temporary folder when I execute my installer, maybe it saves downloads to %temp% too? Did you check that? You can use a tool like FolderChangesView from NirSoft to do that. otherwise the constant $Temp may help.<br />
<br />
4) You can use a custom pre-function to ask if the files should be saved right before the install page is opened. See chapter 4.5.3 Callbacks in NSIS help. Use a message box to ask the user if the files should be saved and if so let him choose a folder to save to.<br />
<br />
Good luck :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">25th October 2012, 22:43</div></div><div class="posttext">1) Use the md5 plugin to create the md5 hash, and use the inetc or other download plugin to download a (text)file with the correct md5 hash in it. (Or create a php script that sends the md5hash for a requested filename.)<br />
2) Sections are executed in the order that they appear in your .nsi script.<br />
3) $PLUGINSDIR is your friend.<br />
4) Create a custom page with nsDialogs, that offers the user a choice between temp or selected folder. There's an excellent tutorial in the nsDialogs readme. http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saxe</div><div class="date">26th October 2012, 14:15</div></div><div class="posttext">Thanks for the reply.<br />
<br />
How about pointers to how to download a file from website and execute it? If codes are too much to ask, please give me a few key words so that I can use them to search this website.<br />
<br />
I want to create a simple one to see how it works first<br />
<br />
Again, thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Seban</div><div class="date">26th October 2012, 15:00</div></div><div class="posttext">I know it's possible, but I don't know where it is written down. You could search this site http://nsis.sourceforge.net/List_of_all_pages_in_NSIS_repository#String_Functions for web installtion or similar terms.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saxe</div><div class="date">26th October 2012, 15:07</div></div><div class="posttext">Thanksï¼Œ Seban<br />
<br />
Hopefully some guru will show us the way</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Seban</div><div class="date">26th October 2012, 15:17</div></div><div class="posttext">yw<br />
<br />
it's a lot of searching, but most of the time the answer is somewhere to be found ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saxe</div><div class="date">26th October 2012, 15:28</div></div><div class="posttext">I tried, but I must be using the wrong keywords.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saxe</div><div class="date">26th October 2012, 15:45</div></div><div class="posttext">I guess I can use the codes like this:<br />
<br />
NSISdl::download http://www.myweb.com/support/downloads/myapp.exe localfile.exe<br />
Pop $R0 ;Get the return value<br />
  StrCmp $R0 &quot;success&quot; +3<br />
    MessageBox MB_OK &quot;Download failed: $R0&quot;<br />
    Quit<br />
<br />
exec localfile.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Seban</div><div class="date">26th October 2012, 17:24</div></div><div class="posttext">just stumbled upon this thread: http://forums.winamp.com/showthread.php?t=332999<br />
<br />
maybe you can need this (didn't check it out though)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>