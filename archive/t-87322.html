<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" $Variables in File instruction?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  $Variables in File instruction? NSIS Discussion" />
	
	<title> $Variables in File instruction? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  $Variables in File instruction?</div>
<hr />
<div class="pda"><a href="t-87322.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=87322">$Variables in File instruction?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">oojah</div><div class="date">10th May 2002, 13:50</div></div><div class="posttext">Hi,<br />
<br />
I am one of the developers of the windows port of an open source gaming zone (see http://ggz.sf.net ). We have been using nsis to distribute our paltry attempts at coding and are for the most part amazingly pleased with it.<br />
<br />
We have a number of system files to be distributed and at the moment these are added with the instructions<br />
<br />
SetOutputPath $SYSDIR<br />
File &quot;C:\windows\system\dllname.dll&quot;<br />
RegDLL $SYSDIR\dllname.dll<br />
<br />
for example. This works without a problem for me when using Win98, but one of the other developers uses Win2k exclusively. For him to be able to compile the nsis file he must replace C:\windows\system with c:\winnt\system32. This is, I must admit, not the greatest of hardships but I imagine that it would be simple enough to add support for at least $SYSDIR to the File instruction so that we could then use<br />
<br />
File &quot;$SYSDIR\dllname.dll&quot; <br />
<br />
and it would compile on all versions of windows.<br />
<br />
It occurs to me now that makensis may search for the file in all of %PATH% so<br />
<br />
File &quot;dllname.dll&quot; <br />
<br />
would be all that is needed. I don't have internet access until I'm back at work on monday so I'll leave this post and test it over the weekend ;)<br />
<br />
I'm sure that I'm not the only one in this situation.<br />
<br />
Regards,<br />
<br />
Roger</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th May 2002, 15:27</div></div><div class="posttext">Hi Roger,<br />
<br />
You can build an installer that will make the installer.<br />
Its script should be:<br />
SilentInstall silent<br />
<br />
Section &quot;asd&quot;<br />
  ReadRegStr $1 HKLM &quot;Software\\NSIS&quot; &quot;&quot;<br />
  Exec '&quot;$1\\makensisw.exe&quot; &quot;$1\\makensis.exe&quot; /CD &quot;yourscript.nsi&quot; /DLOCALSYSDIR=$SYSDIR'<br />
SectionEnd<br />
<br />
In your installer you should use ${LOCALSYSDIR} to find your dll.<br />
<br />
KiCHiK</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oojah</div><div class="date">10th May 2002, 16:32</div></div><div class="posttext">Ah, very cunning.<br />
<br />
Thanks,<br />
<br />
Roger</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>