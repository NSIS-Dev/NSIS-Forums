<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Section control using flags, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Section control using flags NSIS Discussion" />
	
	<title> Section control using flags [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Section control using flags</div>
<hr />
<div class="pda"><a href="t-121645.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=121645">Section control using flags</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cosmic66</div><div class="date">16th January 2003, 12:02</div></div><div class="posttext">Hi!<br />
<br />
I'm new to NSIS and try to achieve the following:<br />
I have two sections (s0 and s1) and their state (selection ON|OFF) should be dependend on each other:<br />
<br />
When section s0 is deselcted, section s1 should be deselcted.<br />
When section s1 is selected, section s0 should be deselcted.<br />
<br />
I have followed the procedure described in previous postings and in<br />
example &quot;one-selection&quot;.<br />
<br />
I have attached my NSI-file to this posting,<br />
Setting the flags doesn't have an effect and s1 is not interactive in<br />
the installer after its flag has been written.<br />
<br />
I'm using NSIS v2.0b0.<br />
<br />
Thanks for any hints on how to solve this problem!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cosmic66</div><div class="date">16th January 2003, 12:09</div></div><div class="posttext">Originally posted by cosmic66 <br />
[...]<br />
When section s0 is deselcted, section s1 should be deselcted.<br />
When section s1 is selected, section s0 should be deselcted.<br />
[...]<br />
[/B]<br />
<br />
Sorry, there was a mistake,<br />
the correction is:<br />
<br />
<br />
When section s0 is deselcted, section s1 should be deselcted.<br />
When section s1 is selected, section s0 should be selected.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">16th January 2003, 19:13</div></div><div class="posttext">That's where the Edit button is for :).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th January 2003, 11:26</div></div><div class="posttext">Have you tried settings the initial value for $R0 and $R1? Set it in .onInit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cosmic66</div><div class="date">17th January 2003, 12:04</div></div><div class="posttext">Originally posted by kichik <br />
Have you tried settings the initial value for $R0 and $R1? Set it in .onInit. <br />
<br />
Thanks for your quick answer.<br />
Setting the initial value for $R0 and $R1 doesn't make a difference.<br />
<br />
<br />
But still I was able to solve the problem :D <br />
I had a mistake in my flow (in which case to jump to which label) and I was using the wrong operation when setting the flag to being deselcted.<br />
<br />
In case someone is interested, the working skript is attached to this posting.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">japheth</div><div class="date">17th January 2003, 20:11</div></div><div class="posttext">I'm looking to do something similar, but not quite.<br />
<br />
Here's what I need to do:<br />
<br />
There are 4 components.<br />
<br />
I need components 1 and 3 to be co-dependent upon one another.  So, if a user selects component 1 and component 3 is selected, component 3 becomes unselected.  Similarly, if a user selects component 3 and component 1 is selected, component 3 becomes unselected.<br />
<br />
I've looked at one-section.nsi and at the script posted on this thread, and I sort of get it, however, it's not the kind of programming logic I'm used to coding in.<br />
<br />
Any help is appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th January 2003, 11:17</div></div><div class="posttext">I don't understand, if you got it to work what's the problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">japheth</div><div class="date">18th January 2003, 17:13</div></div><div class="posttext">Sorry, I guess I should of explained myself better.<br />
<br />
I don't have it working at all.  And actually, instead of co-dependent, I should of said mutually exclusive.<br />
<br />
one-section.nsi is *almost* what I need.  The only thing is, in one-section.nsi, at least one section is required.  I need something similar to that, except that no section will be required, the user just can't have component 3 selected if component 1 is selected and visa-versa.<br />
<br />
<br />
Hopefully that clears things up. ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th January 2003, 19:15</div></div><div class="posttext">OK, then lets think of a script logic for that.<br />
<br />
What you need to do is initially select only one of them to make the initial state valid. Do this in .onInit. Remember what section you initially selected. Then in .onSelChange check to see if the section that wasn't remembered is selected. If it is, remember it and uncheck the one that was remembered earlier. That's all you need to do. It should cover all cases.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">18th January 2003, 21:18</div></div><div class="posttext">I think he has come up with that idea too, but didn't find the right words for it. What code should he use?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">japheth</div><div class="date">19th January 2003, 07:29</div></div><div class="posttext">Yeah, virtlink hit the proverbial nail on the head.<br />
<br />
I know the logic that's required, it's just that I'm pretty bad with NSIS's programming logic.<br />
<br />
I hate being hand-held just as much as the next person, but I've been farting around with this for the past couple of days with no results.<br />
<br />
If someone could come up with a small snippet of code, I'd be much appreciative. ;)<br />
<br />
Perhaps it could even be included in the examples as mutual-excluseive.nsi or something.  I'm sure someone else will want to do something similar to this in the future. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th January 2003, 15:52</div></div><div class="posttext">Enjoy:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=85&amp;instances=0,64</div></div><hr />


<div class="post"><div class="posttop"><div class="username">japheth</div><div class="date">20th January 2003, 00:02</div></div><div class="posttext">Thanks a lot kichik. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tkm2007</div><div class="date">25th October 2007, 10:00</div></div><div class="posttext">Hello everyone!<br />
<br />
  I am trying to create an installer with 2 sections which cannot be both selected at once, exactly as japheth. I saw the example kichik posted, but I would like to ask how I can have the second section selected by default, and not the first one as shown in the example.<br />
<br />
Thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">25th October 2007, 10:13</div></div><div class="posttext">I didn't see kichik's example but I'll give you my. I hope it is what you need.<br />
name 'example'<br />
<br />
outfile 'example.exe'<br />
<br />
!include 'sections.nsh'<br />
<br />
page components<br />
page instfiles<br />
<br />
showinstdetails show<br />
<br />
var sec_var<br />
<br />
section /o 'first' sec_1<br />
  detailprint 'first section'<br />
sectionend<br />
<br />
section 'second' sec_2<br />
  detailprint 'second section'<br />
sectionend<br />
<br />
function .onselchange<br />
  !insertmacro startradiobuttons $sec_var<br />
    !insertmacro radiobutton ${sec_1}<br />
    !insertmacro radiobutton ${sec_2}<br />
  !insertmacro endradiobuttons<br />
functionend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tkm2007</div><div class="date">25th October 2007, 10:17</div></div><div class="posttext">Thank you pospec for your quick reply. I have already found this way in the web, but it doesn't give me the option to have no section selected as kichik's example does. Thank you anyway!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">25th October 2007, 10:24</div></div><div class="posttext">I see. If you like his example then you can modify it for your purposes. Just change IntOp $0 $0 &amp; ${SECTION_OFF} with IntOp $0 $0 | ${SF_SELECTED} and vice versa in .onInit ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">25th October 2007, 10:31</div></div><div class="posttext">I missed one thing - remember ${sec2} in $R9 on init.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tkm2007</div><div class="date">25th October 2007, 10:32</div></div><div class="posttext">Originally posted by pospec <br />
I see. If you like his example then you can modify it for your purposes. Just change IntOp $0 $0 &amp; ${SECTION_OFF} with IntOp $0 $0 | ${SF_SELECTED} and vice versa in .onInit ;)  <br />
<br />
Thank you very much pospec for your time! It workd! :) :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sr164w</div><div class="date">15th February 2012, 05:45</div></div><div class="posttext">I need same kind of mutual exclusion wrt &quot; Main &quot; section.  I am using Main section of nsi file only to copy few files. i need to achieve to copy few files when some variable set to true.<br />
if i put only File command to copy files when variable set to flase also installer is trying to copy those files and giving me error. If i use /nonfatal with File command then installer gives warning.<br />
what exactly i want achieve is installer should only try to copy if variable set to true. if variable is false then there File command should not get executed.<br />
Any help would be highly appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th February 2012, 11:22</div></div><div class="posttext">http://forums.winamp.com/showthread.php?t=341517<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>