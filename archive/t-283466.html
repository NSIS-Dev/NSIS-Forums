<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Reading a text file into a text box using nsdialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Reading a text file into a text box using nsdialog NSIS Discussion" />
	
	<title> Reading a text file into a text box using nsdialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Reading a text file into a text box using nsdialog</div>
<hr />
<div class="pda"><a href="t-283466.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283466">Reading a text file into a text box using nsdialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fifthnormal</div><div class="date">20th December 2007, 06:39</div></div><div class="posttext">Hello,<br />
<br />
I have a textbox on a custom page:<br />
<br />
${NSD_CreateText} 160 150 290 50 ''<br />
<br />
I have a 24kb text file that I need to load into the text box. <br />
<br />
I have use the CustomLicense plug-in before when using InstallOptions:<br />
http://nsis.sourceforge.net/CustomLicense_plug-in<br />
<br />
Is there a way to make CustomLicense work with nsDialogs. Or is there another way to get the file loaded in?<br />
<br />
Thanks in advance,<br />
<br />
Daniel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th December 2007, 16:59</div></div><div class="posttext">CustomLicense should work as is with nsDialogs. Just give it the HWND you get from NSD_CreateText.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fifthnormal</div><div class="date">22nd December 2007, 03:55</div></div><div class="posttext">Hi,<br />
<br />
I was able to get it work with this code just in case anyone else needs it:<br />
<br />
File /oname=$PLUGINSDIR\EULA.txt &quot;EULA.txt&quot;<br />
${NSD_CreateText} 160 150 290 50<br />
Pop $0<br />
CustomLicense::LoadFile &quot;$PLUGINSDIR\EULA.txt&quot; &quot;$0&quot;<br />
<br />
But now I have a new problem with it.<br />
<br />
The textbox contains just one really long string of text. It does not show the line breaks that are the file. The file is using CRLF for the line breaks. <br />
<br />
When using installoptions this seems to work just fine. But using nsdialgs it has this problem.<br />
<br />
Thanks in advance,<br />
<br />
Daniel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fifthnormal</div><div class="date">22nd December 2007, 04:42</div></div><div class="posttext">ok, I figured out. Here it is if anyone needs it:<br />
<br />
<br />
File /oname=$PLUGINSDIR\EULA.txt &quot;EULA.txt&quot;<br />
<br />
nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} ${DEFAULT_STYLES}|${WS_TABSTOP}|${ES_AUTOHSCROLL}|${ES_MULTILINE}|${WS_VSCROLL}|${WS_HSCROLL} ${__NSD_Text_EXSTYLE} 160 150 290 50 <br />
<br />
POP $0<br />
	<br />
CustomLicense::LoadFile &quot;$PLUGINSDIR\EULA.txt&quot; &quot;$0&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">23rd December 2007, 06:34</div></div><div class="posttext">Thanks for sharing :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">10th May 2008, 10:35</div></div><div class="posttext">I tried this:<br />
<br />
${NSD_CreateText} 160 150 290 50 &quot;&quot;<br />
Pop $0<br />
${NSD_AddStyle} $0 ${ES_MULTILINE}<br />
CustomLicense::LoadFile &quot;$PLUGINSDIR\License.txt&quot; &quot;$0&quot;<br />
<br />
It didn't work, the multi line style has no effect. If I append ES_MULTILINE to __NSD_Text_STYLE in nsDialogs.nsh, it works. Why?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th May 2008, 10:43</div></div><div class="posttext">Some styles must be there when you create the window or else they have no effect. That's probably one of them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">10th May 2008, 13:18</div></div><div class="posttext">Oops! What shall I do? (because calling nsDialogs::CreateControl ... doesn't create the textbox, it leaves error on the stack)<br />
<br />
I attach my test script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">10th May 2008, 13:47</div></div><div class="posttext">This is my test:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">10th May 2008, 13:53</div></div><div class="posttext">I got it :)<br />
I forgot last argument - the string after the coordinates.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">14th September 2009, 09:08</div></div><div class="posttext">Where do we insert the text file to print in the text area ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th September 2009, 13:38</div></div><div class="posttext">Add it with the CustomLicense::LoadFile command.<br />
From the various posts above:nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} ${DEFAULT_STYLES}|${WS_TABSTOP}|${ES_AUTOHSCROLL}|${ES_MULTILINE}|${WS_VSCROLL} ${__NSD_Text_EXSTYLE} 0 0 290 50 &quot;&quot;<br />
Pop $0<br />
CustomLicense::LoadFile &quot;$PLUGINSDIR\License.txt&quot; $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">14th September 2009, 14:03</div></div><div class="posttext">Thank youvery much for your answer but I add the double quotes and I have steel not text in my TextArea</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">14th September 2009, 14:17</div></div><div class="posttext">I am so depress, I spent 5 hours on those lines of NSIS code and I can't find how to print my text in this Textarea :<br />
<br />
<br />
!define LICENSEPAGE &quot;license.txt&quot;<br />
<br />
ReserveFile &quot;${LICENSEPAGE}&quot;<br />
<br />
Function textarea<br />
	InitPluginsDir<br />
	<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	<br />
	# 1028 is the id of the branding text control<br />
		FindWindow $MUI_TEMP1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
		GetDlgItem $MUI_TEMP1 $HWNDPARENT 1028<br />
		SetCtlColors $MUI_TEMP1 0xFFFFFF 0xFFFFFF<br />
<br />
		FindWindow $1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
		GetDlgItem $1 $1 1000		<br />
<br />
		File /oname=$PLUGINSDIR\${LICENSEPAGE} &quot;${LICENSEPAGE}&quot;<br />
 <br />
		nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} ${DEFAULT_STYLES}|${WS_TABSTOP}|${ES_AUTOHSCROLL}|${ES_MULTILINE}|${WS_VSCROLL}|${WS_HSCROLL} ${__NSD_Text_EXSTYLE} 20 45 425 150 ''<br />
		Pop $1<br />
		CustomLicense::LoadFile &quot;CGU.txt&quot; $1<br />
		<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
<br />
Do I forget something anywhere, I installed the plugin to the licensecustom but maybe I forgot something, please Help me ...<br />
<br />
Thank you very much</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">14th September 2009, 16:21</div></div><div class="posttext">Does the code can be write in a .nsh page and call in the main page .nsi by the command !include &quot;pages\licenseshow.nsh&quot; ??<br />
<br />
If I can do it, I surely forgot somthing in my .nsi page, I really don't know want to invent to print this text on my textarea.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th September 2009, 18:50</div></div><div class="posttext">Please keep your posts about the same subject in one thread.<br />
<br />
Find attached an example Custom License script.<br />
<br />
 - By placing the License file in the pluginsdir, you make sure that it is deleted when the installer quits, and thus cleaning up the garbage.<br />
<br />
 - The FindWindow and GetDlgItem is used to find the textbox control, but since we already have the handle to this control, it is not needed.<br />
<br />
 - The License file should contain the License text you want the user to accept, so you need to write it yourself.<br />
   See the several license.txt files from other plugins for an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">21st September 2009, 16:57</div></div><div class="posttext">i get the below error when i compile my setup.nsi:<br />
<br />
&quot;Invalid command: CustomLicense::LoadFile&quot;<br />
<br />
have already included &quot;nsDialogs.nsh&quot;<br />
<br />
thoughts ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">21st September 2009, 16:58</div></div><div class="posttext">You need to either put the CustomLicense plugin dll into the NSIS\plugins directory, or you need to use !addplugindir at the top of your script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 08:28</div></div><div class="posttext">well thanks, but where do i get this DLL from ? is that supposed to be bundled with NSIS 2.4, if yes, i was unlucky, it's not present in my plugins folder :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">22nd September 2009, 08:38</div></div><div class="posttext">Have you tried googling for 'customlicense plugin'?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 08:49</div></div><div class="posttext">just did :), and found it here: <br />
<br />
http://nsis.sourceforge.net/CustomLicense_plug-in<br />
<br />
thanks !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 08:50</div></div><div class="posttext">can't see my last URL ?<br />
<br />
try this: <br />
<br />
http://nsis.sourceforge.net/CustomLicense_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 09:08</div></div><div class="posttext">sorry guys, it doesn't let me display the URL !<br />
@MSG, thanks for the hints.<br />
<br />
i now have CustomLicense.dll in my plugin dir. i am able to get past the error. however, the EULA text box does not display the EULA, pls advise:<br />
<br />
Function myLicensePageCreate<br />
		File /oname=EULA.txt &quot;winst\EULA-en.rtf&quot;<br />
		nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} ${DEFAULT_STYLES}|${WS_TABSTOP}|${ES_AUTOHSCROLL}|${ES_MULTILINE}|${WS_VSCROLL}|${WS_HSCROLL} ${__NSD_Text_EXSTYLE} 160 150 290 50<br />
		POP $0<br />
		CustomLicense::LoadFile &quot;EULA.txt&quot; &quot;$0&quot;<br />
		!include &quot;winst\myLicense.nsh&quot;<br />
FunctionEnd<br />
<br />
<br />
thanks a lot !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">22nd September 2009, 15:07</div></div><div class="posttext">To prevent SPAM, your URL won't show, until you post certain number of posts.<br />
Here's the link:<br />
http://nsis.sourceforge.net/CustomLicense_plug-in<br />
<br />
I think the plugin needs a absolute path.<br />
Try CustomLicense::LoadFile &quot;$INSTDIR\EULA.txt&quot; &quot;$0&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 16:08</div></div><div class="posttext">ok, thanks, that worked !<br />
can i still use this functionality along with displaying the radio buttons at the bottom viz, &quot;accept&quot; and &quot;decline&quot; ?<br />
<br />
and also, the Next button should remain enabled even when &quot;decline&quot; radio button is selected.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">22nd September 2009, 16:38</div></div><div class="posttext">my apologies !<br />
actually, it did not work :( <br />
i am using the following code.<br />
<br />
!define LICENSEPAGE &quot;EULA-en.rtf&quot;<br />
ReserveFile &quot;winst\${LICENSEPAGE}&quot;<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW &quot;myLicensePageCreate&quot;<br />
<br />
....<br />
Function myLicensePageCreate<br />
		InitPluginsDir<br />
		File /oname=${LICENSEPAGE} &quot;winst\${LICENSEPAGE}&quot;<br />
		FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
		GetDlgItem $0 $0 1000<br />
		CustomLicense::LoadFile &quot;${LICENSEPAGE}&quot; $0<br />
		!insertmacro MUI_HEADER_TEXT &quot;$(MSG185)&quot; &quot;&quot; #MSG# License Agreement<br />
		!insertmacro INSTALLOPTIONS_WRITE &quot;myLicense.ini&quot; &quot;Field 1&quot; &quot;text&quot; &quot;$(MSG186)&quot; #MSG# Press page down to see the entire EULA<br />
		!insertmacro INSTALLOPTIONS_WRITE &quot;myLicense.ini&quot; &quot;Field 3&quot; &quot;text&quot; &quot;$(MSG187)&quot; #MSG# You will have to accept the license agreement in order to proceed with the installation<br />
		!insertmacro INSTALLOPTIONS_WRITE &quot;myLicense.ini&quot; &quot;Field 4&quot; &quot;text&quot; &quot;$(MSG188)&quot; #MSG# I Accept<br />
		!insertmacro INSTALLOPTIONS_WRITE &quot;myLicense.ini&quot; &quot;Field 5&quot; &quot;text&quot; &quot;$(MSG189)&quot; #MSG# I Decline<br />
		!insertmacro INSTALLOPTIONS_DISPLAY &quot;myLicense.ini&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">23rd September 2009, 07:31</div></div><div class="posttext">Ok, you still need the full path.<br />
Since I'm not sure if $INSTDIR is already defined when the function is called, you better use the pluginsdir (as used in my example script, like:File &quot;/oname=$PLUGINSDIR\${LICENSEPAGE}&quot; &quot;winst\${LICENSEPAGE}&quot;<br />
...<br />
CustomLicense::LoadFile &quot;$PLUGINSDIR\${LICENSEPAGE}&quot; $0<br />
Note that the UELA file will be deleted when the installer eds.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprinleo</div><div class="date">23rd September 2009, 11:07</div></div><div class="posttext">thanks, i'll try that. Before that but let me try understanding the need to have a CustomLicense plug-in.<br />
<br />
can we still use it instead of :<br />
!insertmacro MUI_PAGE_LICENSE &quot;$(license_txt)&quot;<br />
<br />
the whole idea for me to have a custom license page is because i am not able to change the way MUI_PAGE_LICENSE behaves. ie. when i enable the radio buttons for i accept and i decline options, and &quot;i decline&quot;  is selected, the &quot;Next&quot; button is disabled. I want it to be enabled to display the appropriate info to the customer about declining the license.<br />
<br />
how can we achieve this ? <br />
thanks in advance...:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">23rd September 2009, 20:29</div></div><div class="posttext">There is another plugin that seems to do what you require:<br />
<br />
http://nsis.sourceforge.net/ScrollLicense_plug-in<br />
<br />
&quot;A plugin that stops the user passing the License page without scrolling to the end of the License box. Also has support for two &quot;Accept&quot; check-boxes when LicenseForceSelection checkbox is set.&quot;<br />
<br />
Edit: Oops! I think I misread what you are trying to do, so this plugin may not be relevant.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jrenbaum</div><div class="date">16th March 2010, 21:14</div></div><div class="posttext">I am trying to use the attached customlicense.nsi file, but I am not able to affect the Cancel and Close buttons that appear on the bottom of the screen. Is there any way to do so? I don't see any mention of these buttons in the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grey220022</div><div class="date">11th August 2011, 11:31</div></div><div class="posttext">Hi, I find that it works well in Windows 7 but it doesn't work in Windows XP.  (The customlicense plugin)<br />
Can anybody help me? Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">11th August 2011, 11:37</div></div><div class="posttext">Try<br />
http://forums.winamp.com/showthread.php?t=333267</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th August 2011, 21:37</div></div><div class="posttext">nsRichEdit works on XP.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bella10388</div><div class="date">16th August 2011, 08:39</div></div><div class="posttext">Hello,<br />
<br />
I have a textbox on a custom page:<br />
<br />
${NSD_CreateText} 160 150 290 50 ''<br />
<br />
I have a 24kb text file that I need to load into the text box. <br />
<br />
I have use the CustomLicense plug-in before when using InstallOptions:<br />
http://nsis.sourceforge.net/CustomLicense_plug-in<br />
<br />
Is there a way to make CustomLicense work with nsDialogs. Or is there another way to get the file loaded in?<br />
<br />
Thanks in advance,<br />
<br />
Daniel<br />
<br />
Such a very amazing link!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bella10388</div><div class="date">16th August 2011, 08:43</div></div><div class="posttext">There is another plugin that seems to do what you require:<br />
<br />
<br />
&quot;A plugin that stops the user passing the License page without scrolling to the end of the License box. Also has support for two &quot;Accept&quot; check-boxes when LicenseForceSelection checkbox is set.&quot;<br />
<br />
Edit: Oops! I think I misread what you are trying to do, so this plugin may not be relevant.<br />
<br />
<br />
I also think so.<br />
__________________<br />
Watch Zookeeper Online Free (http://moviesonlinewatch.net/)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>