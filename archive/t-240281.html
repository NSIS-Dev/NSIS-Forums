<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" .onGUIInit and check for Admin and set the context to all, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  .onGUIInit and check for Admin and set the context to all NSIS Discussion" />
	
	<title> .onGUIInit and check for Admin and set the context to all [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  .onGUIInit and check for Admin and set the context to all</div>
<hr />
<div class="pda"><a href="t-240281.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240281">.onGUIInit and check for Admin and set the context to all</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">8th March 2006, 17:21</div></div><div class="posttext">Hi all,<br />
<br />
My requirement is to install the product for all users (per-machine), and because of this (and other reasons) I check if the current user is admin. As I need to show a multilanguage MsbBox in case the user is not admin, I decided to use:<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
and to check in myGuiInit if the user is admin and if not to show a multilanguage MsgBox.<br />
<br />
Question:<br />
1) Is this way correct? Or it's not the right path to go to?<br />
2) Is the .onGUIInit always called, even in a silent (un)install?<br />
3) I also have to set the context to all users using the SetShellVarContext. Where is the best place to do so? Is it ok to also have this in the myGuiInit function after I check that the current user is admin?<br />
<br />
Thanks,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th March 2006, 19:21</div></div><div class="posttext">It's a valid way of doing this. The .onGUIInit callback isn't called when running silently, so you should preform the test in .onInit and only display the message in .onGUIInit, if not running silently. You can check if the installer was ran silently using IsSilent.<br />
<br />
It doesn't matter where you put SetShellVarContext, as long as it's called before everything else you'd want it to affect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">10th March 2006, 12:38</div></div><div class="posttext">Thx,<br />
Viv</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>