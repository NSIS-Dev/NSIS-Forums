<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Install for all users or current user: Can NSIS help?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Install for all users or current user: Can NSIS help? NSIS Discussion" />
	
	<title> Install for all users or current user: Can NSIS help? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Install for all users or current user: Can NSIS help?</div>
<hr />
<div class="pda"><a href="t-254878.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=254878">Install for all users or current user: Can NSIS help?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joachim</div><div class="date">5th September 2006, 16:39</div></div><div class="posttext">Hi,<br />
Modern apps should allow the user to install, even without admin rights. A user with admin rights should be given the choice how to install. Depending on what choice the user makes the installer should write to HKEY_LOCAL_MACHINE or to HKEY_CURRENT_USER.<br />
<br />
This is expecially important when dlls must be registered, because without admin rights the registration in HKEY_CLASSES_ROOT will usually fail. Instead of HKCR one should use either HKLM\Software\Classes or HKCU\Software\Classes.<br />
<br />
Does NSIS provide any support for this?<br />
Is there a page that asks this question or must I create one myself? Is there a standard variable to use during installation and uninstallation?<br />
<br />
Cheers,<br />
Joachim</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">5th September 2006, 16:43</div></div><div class="posttext">I have seen some NSIS installers ask this question using a custom page designed with InstallOptions, but I do not beleive there is a built in page to ask this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th September 2006, 16:53</div></div><div class="posttext">Use InstallOptions to create the dialog and depending on the radio buttons state, SetShellVarContext to all or current.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joachim</div><div class="date">5th September 2006, 23:42</div></div><div class="posttext">Thanks for the answers.<br />
I managed to create such a custom page, but of course the strings on this page will remain untranslated.<br />
<br />
As for SetShellVarContext I found out, that this information must be saved somewhere, so that it is again available for the uninstall step. This variable I placed in the registry among my other app-settings. &quot;HKCU/Software/Appname/InstalledForAllUsers&quot;.<br />
<br />
By now it seems to work but I would still appreciate if original dialogs of NSIS could contain something of that kind.<br />
<br />
Joachim</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">1st October 2009, 09:47</div></div><div class="posttext">Hi,<br />
<br />
I also need to use such a page in my script. Is there already an easier solution (standard page in NSIS, or a plug-in, or something else...)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">1st October 2009, 12:29</div></div><div class="posttext">NSIS already permits this ability using the &quot;MultiUser&quot; header included. Take a look at:<br />
http://nsis.sourceforge.net/Docs/MultiUser/Readme.html<br />
http://nsis.sourceforge.net/Docs/MultiUser/Readme.html</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">6th October 2009, 09:11</div></div><div class="posttext">Hi guys,<br />
The MultiUser header solved my problem, but here it comes the next one (I don't know if this forum is suitable for such discussion). I have to deliver information to the applications that I installed what kind of installation is selected, because they also must access the corresponding registry area. What is the normal way to do this? I suppose that I have to write a registry value under HKLM that corresponds to the selection... Is this the right way?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th October 2009, 10:01</div></div><div class="posttext">You can use the registry, or write to an ini file in the app's directory, or whatever you prefer.<br />
<br />
Of course if it's a single-user install, you can also use HKCU instead of HKLM.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">6th October 2009, 10:11</div></div><div class="posttext">If I write to HKCU by installation for the current user only, how the applications will know where to find this registry key (HKCU or HKLM)? Isn't correct to write such a common key always in HKLM? Depending on this key the applications can get information in which area they have to work. Sorry for the stupid questions, but I really don't have experience with this...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th October 2009, 10:22</div></div><div class="posttext">Like I said, you can use HKCU if it's a single-user install. If you want things to work the same for all users, then yes of course you have to use HKLM.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>