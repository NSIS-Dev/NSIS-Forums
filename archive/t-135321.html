<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to set exit errorlevel code, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to set exit errorlevel code NSIS Discussion" />
	
	<title> How to set exit errorlevel code [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to set exit errorlevel code</div>
<hr />
<div class="pda"><a href="t-135321.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=135321">How to set exit errorlevel code</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bcording</div><div class="date">14th May 2003, 02:29</div></div><div class="posttext">I am trying to find how to set an exit errorlevel code. I am using NSIS for automation, and would like to know via ye olde %errorlevel% whether the install finished with an eorror, and if possible different errors. For example 0 for no error, 1 for missing prerquisits, 2 for...you get the idea.<br />
<br />
thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th May 2003, 11:26</div></div><div class="posttext">This section (http://nsis.sourceforge.net/Docs/AppendixC.html#C.2) of the documentation describes the error levels. You can't change the error level to whatever value you want. You'll have to find another way such as writing to an INI file, creating files or writing to the registry.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mbenedict</div><div class="date">9th January 2004, 19:26</div></div><div class="posttext">Is this still true?  Is there no way to return a custom errorlevel exit code from the nsis process?  And if not, is this a feature that will ever be implemented?  Thanks.<br />
<br />
Marianne</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th January 2004, 20:28</div></div><div class="posttext">NSIS still uses the same error levels.<br />
<br />
See the NSIS Website for information about submitting feature requests.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dpbluegreen</div><div class="date">6th July 2004, 22:48</div></div><div class="posttext">I'm trying to view the errorlevel from the cmdline, but the value doesn't seem accurate.<br />
<br />
Here is my script for causing a &quot;failure&quot; errorlevel:<br />
<br />
#############################<br />
OutFile &quot;c:\temp\testErrorlevel.exe&quot;<br />
<br />
Section &quot;&quot;<br />
        SetErrors<br />
SectionEnd<br />
#############################<br />
<br />
Here's one for &quot;success&quot;:<br />
<br />
#############################<br />
OutFile &quot;c:\temp\testNoErrors.exe&quot;<br />
<br />
Section &quot;&quot;<br />
        ClearErrors<br />
SectionEnd<br />
#############################<br />
<br />
And here are my test results:<br />
#############################<br />
C:\temp&gt;testErrorlevel<br />
<br />
C:\temp&gt;echo %errorlevel%<br />
9009<br />
<br />
C:\temp&gt;testNoErrors<br />
<br />
C:\temp&gt;echo %errorlevel%<br />
9009<br />
#############################</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th July 2004, 22:53</div></div><div class="posttext">Try to get the error level from another NSIS script using Exec.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dpbluegreen</div><div class="date">7th July 2004, 01:18</div></div><div class="posttext">I need to communicate my error status to a non-NSIS executable that invokes my module, so using Exec and IfError don't really help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th July 2004, 17:50</div></div><div class="posttext">ExecWait can get the error level. ExecWait waits for the NSIS installer to finish, a DOS box doesn't. 9009 is probably the error level of the application you ran just before the installer.<br />
<br />
SetErrors and ClearErrors is for the script. The error level is not set by them. It is set to a value different than zero if the installation was aborted. As the documentation states:* 0 - Normal execution (no error)<br />
* 1 - Installation aborted by user<br />
* 2 - Installation aborted by script</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dpbluegreen</div><div class="date">7th July 2004, 18:24</div></div><div class="posttext">If 'SetErrors' is replaced by 'Abort' in the script above, and 'ClearErrors' by 'Quit', the test results are still the same.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th July 2004, 18:28</div></div><div class="posttext">The first paragraph addresses that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dpbluegreen</div><div class="date">7th July 2004, 19:07</div></div><div class="posttext">Sorry, that's a bit too cryptic for me.<br />
<br />
How is ExecWait relevant if I'm checking the errorlevel from the commandline?  If you would modify my samples so the tests work correctly, that would help tremendously.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th July 2004, 19:14</div></div><div class="posttext">The command line doesn't wait for the installer and therefore can't get its error level.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">8th July 2004, 18:05</div></div><div class="posttext">see this thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=180398).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>