<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Another modifed Modern UI with image control, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Another modifed Modern UI with image control NSIS Discussion" />
	
	<title> Another modifed Modern UI with image control [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Another modifed Modern UI with image control</div>
<hr />
<div class="pda"><a href="t-172942.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=172942">Another modifed Modern UI with image control</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">shantanu_gadgil</div><div class="date">11th March 2004, 10:14</div></div><div class="posttext">Hello all !<br />
<br />
Yet another modified ModernUI based on the dimensions of some software (you'll get it from the name :), *PROBABLY* made using WISE classic.<br />
<br />
Thats is not so important, anyway... :)<br />
<br />
How to use the modified UI.<br />
<br />
1. Just download the attached zip.<br />
2. Extract the EXE in any directory (preferably &quot;$NSISDIR\Contrib\UIs&quot;)<br />
3. In your script use the following command:<br />
<br />
---<br />
.<br />
.<br />
.<br />
ChangeUI all &quot;${NSISDIR}\Contrib\UIs\modern_eraser.exe&quot;<br />
.<br />
.<br />
.<br />
---<br />
<br />
4. If you extract it somewhere else, modify the path to the EXE accordingly.<br />
5. That's it ! Enjoy :up:<br />
<br />
=-=-= Question =-=-=<br />
I have added an image control (SS_BITMAP) in which the user can keep showing image/images as per his her wish !<br />
<br />
The control ID of the image control is 6666. <br />
<br />
I will be searching the forum...still...could anyone point me to the relevant topic of how to set the image immmediately after the WELCOME page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shantanu_gadgil</div><div class="date">11th March 2004, 10:38</div></div><div class="posttext">I searched the forums, and kept coming up with &quot;custom .onGUIInit function&quot;. Would this solve my problem ?<br />
<br />
Please help !<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">11th March 2004, 11:27</div></div><div class="posttext">Hi :) <br />
<br />
Actually this function won't solve your problem as the function .onGUIInit is called *before* the Welcome page's display, and not *after*... <br />
<br />
Unfortunately I don't have the answer to your question :(<br />
<br />
Hope you'll find a way... :D<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">11th March 2004, 13:55</div></div><div class="posttext">You should do it in the show function of the next installer page.  If you need any help with the right instructions to display the image check out my MUI mod, see the link below.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">11th March 2004, 14:04</div></div><div class="posttext">where do i have to write that line &quot;changeIU...&quot; ?<br />
<br />
i wrote it in my script and i can't see any diference.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">11th March 2004, 14:12</div></div><div class="posttext">It shold be used at the start of the script, before page commands.  Also if using MUI you should define MUI_UI rather than use the Change UI setting.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shantanu_gadgil</div><div class="date">11th March 2004, 18:27</div></div><div class="posttext">after fiddling with many small snippets of codes from many different users I got a working script...<br />
<br />
Please note :D could be a colon followed by a capital 'd'<br />
----<br />
.<br />
.<br />
.<br />
!include &quot;${NSISDIR}\Include\WinMessages.nsh&quot;<br />
.<br />
.<br />
.<br />
!define LR_LOADFROMFILE     0x0010<br />
!define	LR_LOADREALSIZE	    0xF7FF<br />
!define LR_CREATEDIBSECTION 0x2000<br />
!define STM_SETIMAGE        370<br />
!define IMAGE_BITMAP        0<br />
!define sysLoadImage        &quot;user32::LoadImageA(i, t, i, i, i, i) i&quot;<br />
!define sysDeleteObject     &quot;gdi32:DeleteObject(i) i&quot;<br />
.<br />
.<br />
.<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT	MyCustomFunction<br />
!define MUI_CUSTOMFUNCTION_UNGUIINIT	un.MyCustomFunction<br />
<br />
<br />
Function	MyCustomFunction<br />
	Push $0<br />
	Push $1<br />
	Push $6<br />
	<br />
	GetTempFileName $0<br />
	File /oname=$0 &quot;Setup.bmp&quot;<br />
	<br />
	GetDlgItem $1 $HWNDPARENT 6666<br />
	<br />
	System::Call	'${sysLoadImage} (0, &quot;$0&quot;, ${IMAGE_BITMAP}, 135, 200, ${LR_CREATEDIBSECTION}|${LR_LOADFROMFILE} ) .r6'<br />
        SendMessage	$1	${STM_SETIMAGE} ${IMAGE_BITMAP} $6<br />
	<br />
	Pop $6<br />
	Pop $1<br />
	Pop $0<br />
FunctionEnd<br />
  <br />
<br />
Function un.MyCustomFunction<br />
	Push $0<br />
	Push $1<br />
	Push $6<br />
	<br />
	GetTempFileName $0<br />
	File /oname=$0 &quot;Uninstall.bmp&quot;<br />
	<br />
	GetDlgItem $1 $HWNDPARENT 6666<br />
	<br />
	System::Call	'${sysLoadImage} (0, &quot;$0&quot;, ${IMAGE_BITMAP}, 128, 200, ${LR_CREATEDIBSECTION}|${LR_LOADFROMFILE} ) .r6'<br />
        SendMessage	$1	${STM_SETIMAGE} ${IMAGE_BITMAP} $6<br />
	<br />
	Pop $6<br />
	Pop $1<br />
	Pop $0<br />
FunctionEnd<br />
<br />
---<br />
<br />
The approximate size of the bmp should be somewhere around 135x200.<br />
<br />
In the API call we HAVE to specify the dimensions in which we want to display the bmp.<br />
<br />
P.S. aaaarrrgh, Idon't like this :) I actually waded through the macros and made myself understand the custom .onGUIInit macro. Ack !!! :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">11th March 2004, 18:48</div></div><div class="posttext">Originally posted by Vytautas <br />
It shold be used at the start of the script, before page commands.  Also if using MUI you should define MUI_UI rather than use the Change UI setting.<br />
<br />
Vytautas  <br />
<br />
sorry, but it seems that i'm doing something wrong. if i write &quot;ChangeUI ...&quot; - no diference. if i write &quot;!define MUI_UI all 'file.exe'&quot; - i get an error - too many parameters. if i write &quot;!define MUI_UI 'file.exe'&quot; - the size of the installer is the same, only some controls are smaller.<br />
<br />
i wrote the line before page commands. i am using NSIS v2.0 and modern UI.<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">11th March 2004, 22:17</div></div><div class="posttext">I use this command and it works for me, in my MUI mod.<br />
<br />
!define MUI_UI &quot;${NSISDIR}\Contrib\UIs\modern_instpic.exe&quot; Are you sure that the installer is supposed to look very different?<br />
<br />
Vytautas<br />
<br />
PS. BTW Which page are you trying to display the image in?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shantanu_gadgil</div><div class="date">14th March 2004, 20:07</div></div><div class="posttext">The attached script is a sample full working script. :)<br />
<br />
Please change the BMP and ICON paths for your system. :)<br />
<br />
Most of the script is half-cooked, anyway...tell me if you run into any problems.<br />
- Enjoy</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>