<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ExecDos keeps &quot;trapping&quot;, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ExecDos keeps &quot;trapping&quot; NSIS Discussion" />
	
	<title> ExecDos keeps &quot;trapping&quot; [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ExecDos keeps &quot;trapping&quot;</div>
<hr />
<div class="pda"><a href="t-313972.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313972">ExecDos keeps &quot;trapping&quot;</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">asathatsme</div><div class="date">18th October 2009, 20:26</div></div><div class="posttext">I'm trying to start a console program (MakeCab.exe actually) in to background silently, and ExecDos seemed to suit well.  But something is wrong as this code example keeps trapping all the time.<br />
<br />
Please tell me what I'm doing wrong here (Far nor Makecab never starts):<br />
!include &quot;nsDialogs.nsh&quot;<br />
<br />
!AddPluginDir .<br />
<br />
OutFile &quot;test4.exe&quot;<br />
<br />
Page license<br />
Page custom nsDialogs_Create nsDialogs_Leave<br />
Page license<br />
<br />
Var handle<br />
<br />
Function nsDialogs_Create<br />
<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $0<br />
	StrCmp $0 error 0 +2<br />
	  Abort<br />
<br />
	${NSD_CreateLabel} 10u 10u 100% 10u &quot;Please, wait a minute while backup files are being compressed.&quot;<br />
	Pop $0<br />
<br />
	GetDlgItem $R1 $HWNDPARENT 1 ; disable NEXT button<br />
	GetDlgItem $R2 $HWNDPARENT 2 ; disable CANCEL button<br />
	GetDlgItem $R3 $HWNDPARENT 3 ; disable BACK button<br />
	EnableWindow $R1 0<br />
	EnableWindow $R2 0<br />
	EnableWindow $R3 0<br />
<br />
	ExecDos::exec /NOUNLOAD /ASYNC &quot;C:\Program Files\FAR\Far.exe&quot;<br />
	Pop $handle # thread handle for wait<br />
<br />
	${NSD_CreateTimer} Timer1 1000<br />
<br />
	nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Function nsDialogs_Leave<br />
FunctionEnd<br />
<br />
Function Timer1<br />
<br />
	ExecDos::isdone $handle		; return 1 if application have exited, 0 if still running, -1 on error<br />
	Pop $0<br />
	IntCmp $0 0 processfound error processnotfound<br />
<br />
	error:<br />
		MessageBox MB_OK &quot;ExecDos::isdone failed.&quot;<br />
		Abort<br />
		<br />
	processnotfound:<br />
		${NSD_KillTimer} Timer1<br />
		EnableWindow $R1 1<br />
		EnableWindow $R2 1<br />
		EnableWindow $R3 1<br />
		;Goto END<br />
<br />
	processfound:<br />
<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
Thank You.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">18th October 2009, 20:54</div></div><div class="posttext">I guessExecDos::exec /NOUNLOAD /DETAILED /ASYNC &quot;C:\Program Files\FAR\Far.exe&quot; &quot;&quot;may help. Probably /NOUNLOAD required for isdone.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">asathatsme</div><div class="date">18th October 2009, 21:42</div></div><div class="posttext">Yes, tried quickly adding the /NOUNLOAD after isdone and it didn't trap yet, thank you.<br />
<br />
I didn't even think that isdone could need that parameter too, because there were no mension of it in the help page.<br />
<br />
I'll be testing this more closely in a bigger script tomorrow.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>