<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Hide a control?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Hide a control? NSIS Discussion" />
	
	<title> Hide a control? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Hide a control?</div>
<hr />
<div class="pda"><a href="t-105687.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=105687">Hide a control?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 15:17</div></div><div class="posttext">is is possible to hide a control?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 18:33</div></div><div class="posttext">Nope, not yet.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 19:14</div></div><div class="posttext">not even with sendmessage?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 19:16</div></div><div class="posttext">No, you have to change the window's style with GetWindowLong and SetWindowLong, or just use the good old ShowWindow :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 19:41</div></div><div class="posttext">i was thinking of the showwindow but was trying to find a way without writing a plugin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 21:16</div></div><div class="posttext">I tried creating a plugin but it hide the control. do you think there would be any limitation to using the ShowWindow api to hide a control.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 21:20</div></div><div class="posttext">I tried creating a plugin but it hide the control<br />
<br />
Weren't you trying to hide the control? :weird:<br />
ShowWindow should work fine if you give a valid window handle (HWND).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 21:27</div></div><div class="posttext">yup, didn't work.<br />
<br />
created a plugin called HideWin. in the function HideWin I call the following.<br />
<br />
ShowWindow((HWND)variables,SW_HIDE);<br />
<br />
In the script I call the following (for example)<br />
<br />
GetDlgItem $R1 $HWNDPARENT 1028<br />
HideWin $R1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 21:30</div></div><div class="posttext">What's variables? Have you poped the variable out? Have you converted it to an integer value?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 21:38</div></div><div class="posttext">i used ExDLL as a base. variables translates to $R1.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 21:43</div></div><div class="posttext">You have to convert it to a number first. NSIS gives you a string, and HWND is actually a number. Use myatoi from NSIS source.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">17th September 2002, 21:51</div></div><div class="posttext">I just tried that, still nothing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2002, 22:24</div></div><div class="posttext">Use IsWindow in NSIS and in your DLL to check out if you get a real HWND.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 14:01</div></div><div class="posttext">It does return a real hwnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th September 2002, 14:23</div></div><div class="posttext">Hmm... Get it's text, make sure it is the one you want. Make sure you are getting the control from the right window, you are currently getting it from the parent window, not the inner window.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 14:26</div></div><div class="posttext">tried both, different controls, even the main window. the best I can do is get the main window to flash once.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 14:27</div></div><div class="posttext">ohm and get this. the following code doesn't return a valid hwnd.<br />
<br />
FindWindow $R1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
IsWindow $R1 +2 0<br />
MessageBox MB_OK &quot;not a window handle&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th September 2002, 14:30</div></div><div class="posttext">FindWindow $R1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
<br />
should be:<br />
<br />
FindWindow $R1 &quot;#32770&quot; 0 $HWNDPARENT<br />
<br />
If I remember correctly. Try it...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 14:51</div></div><div class="posttext">nope, the same.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th September 2002, 15:03</div></div><div class="posttext">FindWindow $R8 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $R8 $R8 1006<br />
SetStaticBkColor $R8 0x00BAFAFF<br />
<br />
This works for me... Are you using it in .onInitDialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 16:27</div></div><div class="posttext">just playin withit and for some reason the findwindow isn't returnning a hwnd.<br />
<br />
FindWindow $R1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
<br />
returns 0<br />
<br />
I'm doing it on the nextpage of a test installer, latest cvs<br />
<br />
here's the test<br />
<br />
Name &quot;Test Install&quot;<br />
OutFile &quot;test.exe&quot;<br />
<br />
DirText &quot;Choose dir&quot;<br />
<br />
Section &quot;&quot;<br />
SectionEnd<br />
<br />
Function .onNextPage<br />
  FindWindow $R1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
  MessageBox MB_OK $R1<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th September 2002, 16:53</div></div><div class="posttext">In .onNextPage the dialog hasn't been created yet... Use .onInitDialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 18:22</div></div><div class="posttext">that just fixed the problem with the findwindow returning 0. I switched after you posted that message about the critial error. I switched it back to oninitdialog. still doesn't work. The plugin gets a valid hwnd too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 18:24</div></div><div class="posttext">sorry, the plgin say its not a valid hwnd when the script says it is.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">18th September 2002, 19:21</div></div><div class="posttext">Thanks kichik, as you said, just needed to pop the string.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">20th September 2002, 14:31</div></div><div class="posttext">ShowWin Plugin<br />
---------------------------------------------------------<br />
<br />
Description:<br />
  ShowWin is a small plugin which will allow you to hide,<br />
  show, enable and disable controls.<br />
<br />
Usage:<br />
  ShowWin::Show hwnd<br />
  ShowWin::Hide hwnd<br />
  ShowWin::Enable hwnd<br />
  ShowWin::Disable hwnd<br />
<br />
Example:<br />
  Hide the version label<br />
<br />
  GetDlgItem $R1 $HWNDPARENT 1028<br />
  ShowWin::Hide $R1<br />
<br />
  Also see ShowWin.nsi.<br />
<br />
---------------------------------------------------------<br />
Copyright (c) 2002 Don Selkirk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n_baua</div><div class="date">27th November 2006, 10:31</div></div><div class="posttext">Can you just compile a plugin and put the dll...?<br />
I may need it badly.<br />
<br />
If this feature is already included in newer versions please let me know I am not aware much of NSIS functionality.<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th November 2006, 11:23</div></div><div class="posttext">The built in ShowWindow instruction doesn't work?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n_baua</div><div class="date">27th November 2006, 13:31</div></div><div class="posttext">Hi Afrow,<br />
I just want to hide a single control, not the entire window, I tried sending msg to window as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2006, 13:33</div></div><div class="posttext">ShowWindow does exactly what this plug-in does. Get the HWND of the control you want to hide using FindWindow and GetDlgItem and use ShowWindow on it, passing 0 or ${WM_HIDE} on the second parameter.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n_baua</div><div class="date">28th November 2006, 06:45</div></div><div class="posttext">Thanks kichik,<br />
<br />
It worked for me.<br />
NSIS rocks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tpr</div><div class="date">13th April 2007, 23:55</div></div><div class="posttext">Hello guys,<br />
<br />
First of all thanks for all your help, I was able to remove the titlebar of an application (Opera) with<br />
<br />
System::Call 'user32::SetWindowLong(i $5,i -16,i 339871820)'<br />
<br />
The problem is that after the titlebar is gone and I right-click on Opera on the tray, there's no pop-up menu with close, minimize, etc items. <br />
Is this a drawback of that method or is there a way to fix it?<br />
<br />
Another question: how can I restore the titlebar after I've removed? Or it's impossible?<br />
<br />
Thanks in advance,<br />
<br />
tpr</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>