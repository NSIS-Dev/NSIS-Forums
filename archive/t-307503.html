<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to use the UAC Plugin ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to use the UAC Plugin ? NSIS Discussion" />
	
	<title> How to use the UAC Plugin ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to use the UAC Plugin ?</div>
<hr />
<div class="pda"><a href="t-307503.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307503">How to use the UAC Plugin ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">arnaudTLSE</div><div class="date">19th June 2009, 17:14</div></div><div class="posttext">Hi everyone, first of all I'll ask you to excuse my English (yes, I'm French ;) ).<br />
<br />
I've got some troubles to make the UAC Plugin working...<br />
<br />
I've read the following page : http://nsis.sourceforge.net/UAC_plug-in <br />
<br />
And after having downloaded the zip file and read the examples given in it, I compiled them but none succeeded...<br />
<br />
Then I just tried to insert the code given in the page in my .nsi :<br />
First :RequestExecutionLevel userat the beginning of the script,<br />
<br />
Then !include 'UAC.nsh'<br />
And to finish <br />
<br />
; Attempt to give the UAC plug-in a user process and an admin process.<br />
Function .OnInit<br />
 <br />
UAC_Elevate:<br />
    UAC::RunElevated <br />
    StrCmp 1223 $0 UAC_ElevationAborted ; UAC dialog aborted by user?<br />
    StrCmp 0 $0 0 UAC_Err ; Error?<br />
    StrCmp 1 $1 0 UAC_Success ;Are we the real deal or just the wrapper?<br />
    Quit<br />
 <br />
UAC_Err:<br />
    MessageBox mb_iconstop &quot;Unable to elevate, error $0&quot;<br />
    Abort<br />
 <br />
UAC_ElevationAborted:<br />
    # elevation was aborted, run as normal?<br />
    MessageBox mb_iconstop &quot;This installer requires admin access, aborting!&quot;<br />
    Abort<br />
 <br />
UAC_Success:<br />
    StrCmp 1 $3 +4 ;Admin?<br />
    StrCmp 3 $1 0 UAC_ElevationAborted ;Try again?<br />
    MessageBox mb_iconstop &quot;This installer requires admin access, try again&quot;<br />
    goto UAC_Elevate <br />
 <br />
FunctionEndwith my own functions.<br />
<br />
But when I try to compile, I've got the following error :<br />
<br />
Function: &quot;.OnInit&quot;<br />
Invalid command: UAC::RunElevated<br />
Error in script &quot;C:\Users\Me\MyFolder\MyScript.nsi&quot; on line 156 -- aborting creation process<br />
<br />
I think I've missed something, the file UAC.nsh is in the same directory as the script (MyFolder).<br />
<br />
Can anybody try to help me please ? :cry:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2009, 17:20</div></div><div class="posttext">Put UAC.dll in the Plugins folder.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arnaudTLSE</div><div class="date">19th June 2009, 23:28</div></div><div class="posttext">Thanks for you answer,<br />
<br />
I'm going to test and let you know...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gosev</div><div class="date">15th July 2009, 11:17</div></div><div class="posttext">Originally posted by Afrow UK <br />
Put UAC.dll in the Plugins folder.<br />
<br />
Stu  <br />
<br />
Hi<br />
<br />
 In the package there's actually two UAC.dll, one in a A/ directory and one in U/.<br />
I put the A one in Plugins (for no worthwhile reason) and when the installer asks for elevation it does so with a weird (random/temp) name. Should I have used the one in U/ (and does anyone know what the difference is ?)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th July 2009, 11:35</div></div><div class="posttext">A=ansi (normal official nsis)<br />
U=unicode (3rd party nsis version)<br />
<br />
The installer command should look something like: c:\path\installer.exe /UAC:1234 /NCRC<br />
<br />
The uninstaller on the other hand might be in %temp% and have a weird name, but thats how NSIS does it</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>