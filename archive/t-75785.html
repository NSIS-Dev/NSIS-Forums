<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Show a text file within a section, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Show a text file within a section NSIS Discussion" />
	
	<title> Show a text file within a section [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Show a text file within a section</div>
<hr />
<div class="pda"><a href="t-75785.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=75785">Show a text file within a section</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mattiasw</div><div class="date">14th February 2002, 16:12</div></div><div class="posttext">Hi!<br />
<br />
I like the look and feel of the LicenseData screen but why can't it show a text file within a section? Are there any other functions that can do that?<br />
<br />
---<br />
mw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">14th February 2002, 17:27</div></div><div class="posttext">Hi Mattias,<br />
<br />
some possibilities:<br />
[list=1]<br />
 Load the text into variables and use some huge messagebox.<br />
 Use ExecWait &quot;$WINDIR\notepad.exe $EXEDIR\prob.txt&quot; to display into the notepad editor.<br />
 Use a listbox of Install Options.<br />
 Or look at my solution, attached to this reply.<br />
[/list=1]<br />
<br />
My solution loads the file prob.txt into an ini using labels. A maximum of 14 lines can be achieved. Furthermore, an end of line command is necessary at the end of each line (at this moment). You could also check wether an eol is present and delete it if present.<br />
<br />
I included a safety for the maximum of 14 lines. (Try renaming prob1.txt to prob.txt to see it working.)<br />
<br />
I have to admit, it's all cumbersome, but there are no possibilities for this in the current NSIS so we have to create something ourselves...<br />
<br />
Good luck, if you have questions, e-mail me,<br />
greetz from Holland,<br />
<br />
Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">14th February 2002, 17:30</div></div><div class="posttext">BTW, solution item 3 is not preferred, because a listbox does not have a scrollbar, so scrolling becomes cumbersome. Besides that, it actually is not designed for this purpose, that's why I tried to use labels instead.<br />
<br />
Greetz, Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">14th February 2002, 17:44</div></div><div class="posttext">Ok, I added the check for EOL and also an extra line to diplay, 15 at max now.<br />
<br />
Rename prob1.txt to prob.txt and run the program prob.exe again to see the max number of lines.<br />
<br />
Good luck, greetz from Holland,<br />
Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mattiasw</div><div class="date">15th February 2002, 15:48</div></div><div class="posttext">Hi!<br />
<br />
I solved the problem with a DLL. I wrote a simple function that takes three arguments, a file name, a caption and button options. Then call it from the script with CallInstDLL. Simple really!<br />
<br />
Example:<br />
StrCpy $0 &quot;Conf.txt&quot;<br />
StrCpy $1 &quot;Setup your PDA&quot;<br />
StrCpy $2 &quot;MB_OK|MB_STOP&quot;<br />
CallInstDLL IDNETEX.DLL showTextFile<br />
<br />
Now there is only one problem left. How can I get information from the DLL back to the script. Using the stack was my first thought but doesn't seem to work. Anyone else?<br />
<br />
---<br />
mw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">15th February 2002, 15:53</div></div><div class="posttext">Just set a user variable like $0.  The seruservar function may not be in the example dll but it should be in install options.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">18th February 2002, 07:36</div></div><div class="posttext">A dll is also possible, I wanted to show a solution within NSIS framework.<br />
<br />
-Hn3.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mattiasw</div><div class="date">18th February 2002, 08:07</div></div><div class="posttext">Sure I understand. My solution must distribute the DLL with setup-package. What is the most efficient solution to that problem? A self-extracting auto-starting zip-archive or what? Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">18th February 2002, 08:11</div></div><div class="posttext">I think, you best pack it together with the install data and compare zlib and bzip2 compression. This is quick and quite OK. Furthermore, use UPX to compress the exehead.<br />
<br />
-Hn3.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>