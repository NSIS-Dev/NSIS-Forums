<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Preventing decompilation of your installer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Preventing decompilation of your installer NSIS Discussion" />
	
	<title> Preventing decompilation of your installer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Preventing decompilation of your installer</div>
<hr />
<div class="pda"><a href="t-327354.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327354">Preventing decompilation of your installer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">15th February 2011, 19:13</div></div><div class="posttext">I noticed commented in 'fileform.h' it reads:<br />
// if you want people to not be able to decompile your installers as easily,<br />
// reorder the lines following EW_INVALID_OPCODE randomly.<br />
<br />
So I changed :<br />
<br />
  EW_INVALID_OPCODE,<br />
  EW_RET,               <br />
  EW_NOP,               // Nop/Jump, do nothing: 1, [?new address+1:advance one]<br />
  EW_ABORT,             // Abort: 1 [status]<br />
  EW_QUIT,              // Quit: 0<br />
  EW_CALL,              // Call: 1 [new address+1]<br />
  EW_UPDATETEXT,        // Update status text: 2 [update str, ui_st_updateflag=?ui_st_updateflag:this]<br />
  EW_SLEEP,             // Sleep: 1 [sleep time in milliseconds]<br />
  EW_BRINGTOFRONT,      // BringToFront: 0<br />
  EW_CHDETAILSVIEW,     // SetDetailsView: 2[listaction,buttonaction]<br />
  EW_SETFILEATTRIBUTES, // SetFileAttributes: 2 [filename, attributes]<br />
  EW_CREATEDIR,         // Create directory: 2, [path, ?update$INSTDIR]<br />
  EW_IFFILEEXISTS,      // IfFileExists: 3, [file name, jump amount if exists, jump amount if not exists]<br />
  EW_SETFLAG,           // Sets a flag: 2 [id, data]<br />
  EW_IFFLAG,            // If a flag: 4 [on, off, id, new value mask]<br />
  EW_GETFLAG,           // Gets a flag: 2 [output, id]<br />
<br />
<br />
to:<br />
<br />
  EW_INVALID_OPCODE,    // zero is invalid. useful for catching errors. (otherwise an all zeroes instruction<br />
  EW_QUIT,              // Quit: 0<br />
  EW_IFFILEEXISTS,      // IfFileExists: 3, [file name, jump amount if exists, jump amount if not exists]<br />
  EW_CALL,              // Call: 1 [new address+1]<br />
  EW_UPDATETEXT,        // Update status text: 2 [update str, ui_st_updateflag=?ui_st_updateflag:this]<br />
  EW_SLEEP,             // Sleep: 1 [sleep time in milliseconds]<br />
  EW_NOP,               // Nop/Jump, do nothing: 1, [?new address+1:advance one]<br />
  EW_GETFLAG,           // Gets a flag: 2 [output, id]<br />
  EW_BRINGTOFRONT,      // BringToFront: 0<br />
  EW_IFFLAG,            // If a flag: 4 [on, off, id, new value mask] <br />
  EW_RET,               // return from function call<br />
  EW_SETFILEATTRIBUTES, // SetFileAttributes: 2 [filename, attributes]<br />
  EW_SETFLAG,           // Sets a flag: 2 [id, data]<br />
  EW_CREATEDIR,         // Create directory: 2, [path, ?update$INSTDIR]<br />
  EW_ABORT,             // Abort: 1 [status]<br />
  EW_CHDETAILSVIEW,     // SetDetailsView: 2[listaction,buttonaction]<br />
<br />
I recompiled with these changes, made an arbitrary installer and still was able to decompile/decompress with 7zip.<br />
<br />
I PM'd kichik and he said if you change the value of EW_FILE then it shouldn't be able to decompile it. but I'm not even sure where the value is defined.<br />
<br />
Does anyone have any input on how to make the necessary changes to the source to prevent decompilation of your installer?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th February 2011, 20:51</div></div><div class="posttext">He means EW_EXTRACTFILE.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">15th February 2011, 22:14</div></div><div class="posttext">Ah, I see.<br />
<br />
Do you know where a value is assigned to EW_EXTRACTFILE? <br />
<br />
EW_EXTRACTFILE only shows up 3 times in the entire source:<br />
<br />
fileform.h:<br />
#ifdef NSIS_SUPPORT_FILE<br />
  EW_EXTRACTFILE,       // File to extract: 6 [overwriteflag, output filename, compressed filedata, filedatetimelow, filedatetimehigh, allow ignore]<br />
                        //  overwriteflag: 0x1 = no. 0x0=force, 0x2=try, 0x3=if date is newer<br />
#endif<br />
<br />
scripts.cpp (twice):<br />
ent.which=EW_EXTRACTFILE;<br />
<br />
<br />
I don't ever see values being assigned to EW_EXTRACTFILE, but then again I'm no c++ expert.<br />
<br />
Any help would be great, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th February 2011, 11:44</div></div><div class="posttext">The order that it appears in the enumeration defines the value. Therefore moving it around will give it a different value.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>