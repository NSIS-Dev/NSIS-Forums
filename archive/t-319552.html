<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Unattended Java install successful, files deleted after reboot, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Unattended Java install successful, files deleted after reboot NSIS Discussion" />
	
	<title> Unattended Java install successful, files deleted after reboot [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Unattended Java install successful, files deleted after reboot</div>
<hr />
<div class="pda"><a href="t-319552.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=319552">Unattended Java install successful, files deleted after reboot</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">brettw7</div><div class="date">31st May 2010, 01:37</div></div><div class="posttext">I'm experiencing a difficult to diagnose problem running an unattended install of Java SDK.  The problem is really twofold.<br />
<br />
First problem.  Sometimes the unattended Java install fails, but if I run the install a second time (in the same invocation of NSIS), it succeeds.  I have actually put in &quot;retry&quot; code, which is a serious hack, like this:<br />
<br />
    !ifdef WIN64<br />
       File &quot;/oname=$TEMP\jdk1.6.0_18.exe&quot; ..\..\..\Products\jdk-6u18-windows-x64.exe<br />
    !else<br />
       File &quot;/oname=$TEMP\jdk1.6.0_18.exe&quot; ..\..\..\Products\jdk-6u18-windows-i586.exe<br />
    !endif<br />
    # This copy files is a hack for Windows Server 2003<br />
    CopyFiles /silent &quot;$TEMP\jdk1.6.0_18.exe&quot; &quot;$TEMP\java_install.exe&quot;<br />
    ExecWait '&quot;$TEMP\java_install.exe&quot; /passive ADDLOCAL=&quot;ToolsFeature&quot; IEXPLORER=0 MOZILLA=0 REBOOT=Suppress' $0<br />
    # This is also a hack for Windows Server 2003<br />
    ${If} &quot;$0&quot; != &quot;0&quot;<br />
        DetailPrint &quot;Java install returned $0&quot;<br />
        ExecWait '&quot;$TEMP\java_install.exe&quot; /passive ADDLOCAL=&quot;ToolsFeature&quot; IEXPLORER=0 MOZILLA=0 REBOOT=Suppress' $0<br />
        DetailPrint &quot;Second Java install returned $0&quot;<br />
    ${EndIf}<br />
<br />
Sometimes the first install exits prematurely and a non-zero exit code is returned (and the installation of Java is indeed &quot;partial&quot;).  However, the second invocation (of the same installer) invariably succeeds.<br />
<br />
I am curious if anyone has any clues as to why this happens?<br />
<br />
Secondly, and more serious and mysterious to me is:<br />
<br />
On Windows 2008 after installation, our Java server -- run as a service -- successfully starts.  It can be stopped and started at will.  However, [on some systems] after a reboot of Windows 2008, some of the Java files (rt.jar among them) in the Java SDK installation have been deleted and the service will no longer start.  It's as if these files were &quot;rolled back&quot; or removed by Windows.<br />
<br />
Does anyone have any clues as to why this might happen?<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd June 2010, 12:17</div></div><div class="posttext">Firstly I would identify a machine which you can reproduce the problem on and run the Java silent install manually. You should also get in contact with Sun regarding this problem. I don't think NSIS is at fault here.<br />
<br />
Also why do you have to extract as jdk1.6.0_18.exe and then copy to java_install.exe? Why not just extract as java_install.exe in the first place?<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>