<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Call Function only if two sections selected, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Call Function only if two sections selected NSIS Discussion" />
	
	<title> Call Function only if two sections selected [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Call Function only if two sections selected</div>
<hr />
<div class="pda"><a href="t-118327.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=118327">Call Function only if two sections selected</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">18th December 2002, 14:21</div></div><div class="posttext">What's the most efficient way to call a function only if two sections have been selected by the user, using SectionGetFlags?  Sorry if this is a dumb question, I just figured there was some way to do it quickly with an IntOp &amp; operation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">18th December 2002, 14:53</div></div><div class="posttext">Ooops, actually meant if one OR the other is selected.  What I am trying to do is check the selections from the user.  They can install documentation only if one or another part of an SDK was selected.  Will this work?:<br />
<br />
<br />
SectionGetFlags ${SDKDOC} $R1<br />
IntOp $R2 $R1 &amp; 0x80000000<br />
IntCmp $R2 0 Skip<br />
    SectionGetFlags ${CPPSDK} $R1<br />
    SectionGetFlags ${COMSDK} $R2<br />
    IntOp $R3 $R1 | $R2	<br />
    IntCmp $R3 0x80000000 Skip<br />
        Call InstallSDKDocStartShortcuts<br />
Skip:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th December 2002, 15:09</div></div><div class="posttext">This should do it:<br />
<br />
SectionGetFlags ${SDK_PART1} $0<br />
SectionGetFlags ${SDK_PART2} $1<br />
IntOp $0 $1 | $0<br />
# SECTION_SELECTED should be defined according to the NSIS version<br />
IntOp $0 $0 &amp; ${SECTION_SELECTED}<br />
StrCmp $0 ${SECTION_SELECTED} 0 nonSelected<br />
  # do whatever you want to do if one or the other is selected<br />
  Goto done<br />
nonSelected:<br />
  # do whatever you want to do if non is selected<br />
done:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">18th December 2002, 15:09</div></div><div class="posttext">Also tried<br />
<br />
<br />
SectionGetFlags ${CPPSDK} $R1<br />
SectionGetFlags ${COMSDK} $R2<br />
IntOp $R3 $R1 | $R2	<br />
IntOp $R4 $R3 &amp; 0x80000000<br />
IntCmp $R4 0 Skip<br />
 <br />
<br />
Still no luck.  It always installs if it enters this segment.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th December 2002, 15:22</div></div><div class="posttext">From where are you trying to call this code? I would suggest you call it from .onSelChange, and uncheck the docs section if non of the two SDK sections are selected.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">18th December 2002, 15:29</div></div><div class="posttext">OK, the last bit of code works.  Another section was calling that function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HelluvaEngineer</div><div class="date">18th December 2002, 16:05</div></div><div class="posttext">Absolutely correct.  I decided to pull this function.  In the future, I will readdress it by using OnSelectChange, so that the user is aware of what's going on.<br />
<br />
As a side note, I didn't realize that StrCmp worked for these comparisons.  I was only using IntCmp.  I will keep that in mind for the future.<br />
<br />
Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>