<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" installation to several directories, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  installation to several directories NSIS Discussion" />
	
	<title> installation to several directories [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  installation to several directories</div>
<hr />
<div class="pda"><a href="t-109371.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=109371">installation to several directories</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">snarum</div><div class="date">11th October 2002, 12:58</div></div><div class="posttext">I have an appication that needs several directories to be chosen by the user/installer. Is this possible to do with nsis? Or is it limited to only one target folder?<br />
<br />
Regards,<br />
<br />
Snorre</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th October 2002, 13:01</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=109352<br />
<br />
Use InstallOptions. InstallOptions gives you the ability to create custom pages during installation. It can also get input for you such as another directory. <br />
<br />
If you want to show one custom page right after the other use MultIni4 or the new macros in the modern UI (avaiable in the latest CVS version).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">snarum</div><div class="date">11th October 2002, 22:37</div></div><div class="posttext">Exelent. The InstallOptions.dll worked fine for me. Now I've got a few followups that you might know the answer to:<br />
<br />
1) Is it possible to set the default value of the installOptions elements from the main script or the ini file?<br />
2) Is it possible to remove the standard output dir page?<br />
3) Can you refer to a page where the MultIni4 function is described? cant find anything about it.<br />
<br />
Thank you for your help.<br />
<br />
Regards,<br />
<br />
Snorre</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th October 2002, 23:02</div></div><div class="posttext">1) Yes, because NSIS have INI files handing capabilities you can write to the INI file and change certain fields such as State and Text and thus dynamically editing the custom page. For more info about fields in the INI file consult the IO readme file (Install Options.html).<br />
2) Yes, just don't use DirText in your script.<br />
3) Well,<br />
The best documentation in this case is the script files themselves. They are well documented and unless you are the curious type in order to use their technique you don't need to actually read most of their script, you just have to use it and that thankfully is simplicity itself ;-) <br />
The script files contain some comments that might help. Most of them are in CustomPages.nsh in the ZIP file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th October 2002, 13:07</div></div><div class="posttext">If you are using the Modern UI, you can use the InstallOptions macro's. Have a look at Examples\Modern UI\InstallOptions.nsi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">snarum</div><div class="date">13th October 2002, 09:58</div></div><div class="posttext">Thank you very much for your help guys. My install script is now almost done, in beautify Modern UI :) The only thing I did'nt seem to be able to do was to move the installoption.dll to another folder than the Plugins folder. I want to be able to store everything that I need to build a distribution in my CVS tree so that I dont have to install NSIS on all computers I work on. I managed to move all other included files (language files, system) but when i move the installoption.dll makensis complains that there is no function installOptions::dialog. Any solutions to this? It's no big issue, just got curious as to why I cant move this file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th October 2002, 17:40</div></div><div class="posttext">Use PluginDir to give NSIS another folder to search for plug-ins.<br />
<br />
PluginDir &quot;C:\\MyProj\\plugins&quot;<br />
Section<br />
   ; ...<br />
   InstallOptions::dialog ; bla bla<br />
   ; ...<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hermanator</div><div class="date">29th April 2003, 16:17</div></div><div class="posttext">Is there a way to change the &quot;...&quot; to &quot;Browse&quot; on a dirrequest install options field?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">29th April 2003, 16:28</div></div><div class="posttext">I don't know, maybe using the &quot;Text=&quot; value</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2003, 16:42</div></div><div class="posttext">No, you can't. But a lot have changed in the past half a year :)<br />
You can use two Page dir commands, the first of them with a leave callback function that will copy $INSTDIR into another variable so you'll have one directory in that variable and one in $INSTDIR.<br />
<br />
For example:<br />
<br />
Page directory &quot;&quot; setTexts getInstDir<br />
Page directory<br />
<br />
Function setTexts<br />
  FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $1 $0 1006<br />
  SendMessage $1 ${WM_SETTEXT} 0 \<br />
  &quot;STR:Another text for the first directory page instead of DirText&quot;<br />
FunctionEnd<br />
<br />
Function getInstDir<br />
  StrCpy $R9 $INSTDIR<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hermanator</div><div class="date">29th April 2003, 17:08</div></div><div class="posttext">Can I call the second dir page dynamically, from within a section?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2003, 17:12</div></div><div class="posttext">No, and you can do that with InstallOptions pages (unless you're using 1.98 or 2.0a*). But you can skip the page from the pre-function using Abort.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hermanator</div><div class="date">29th April 2003, 18:56</div></div><div class="posttext">I am trying to do this now with InstallOptions.. If I try to show a custom page from my second section (once the first section's files have already been installed), clicking next on the custom page will pass the path I need in that section succesfully, and the remaining files are installed correctly, but the custom page remains (instead of the finish page being displayed):<br />
<br />
      InstallOptions::show $PLUGINSDIR\customPage.ini<br />
      Pop $R0<br />
      MessageBox MB_OK &quot;The user choose: $R0&quot; IDOK<br />
<br />
I'm using v2.0b4 cvs. What am I doing wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2003, 18:59</div></div><div class="posttext">Missed the not :(<br />
<br />
You can NOT do this with InstallOptions pages - you can't show InstallOptions pages inside a section.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>