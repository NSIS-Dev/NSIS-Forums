<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help!, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help! NSIS Discussion" />
	
	<title> Help! [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help!</div>
<hr />
<div class="pda"><a href="t-142118.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142118">Help!</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Zpeek</div><div class="date">14th July 2003, 05:36</div></div><div class="posttext">Ok, I need NSIS to help me.<br />
<br />
I made some reg file that do different thing to tweak windows.<br />
But now i need NSIS to active them easy-er.<br />
<br />
The files i use are .reg files.<br />
<br />
Windows<br />
1. I need a Message window, you know saying <br />
damage to computer etc.<br />
2. Then it how active reg<br />
3. Then the last window saying Complete.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">14th July 2003, 07:29</div></div><div class="posttext">I didn't understand you very clearly... but here are some answers:<br />
<br />
1) add:<br />
MessageBox MB_OK &quot;We are going to damage your computer, ok?&quot;<br />
<br />
2) use this to enter .reg to registry:<br />
ExecWait &quot;REGEDIT.EXE /S file.REG&quot;<br />
<br />
3) I don't understand at all. When the install is complete nsis always says &quot;Complete&quot;. If you want another 'complete' in the window, do this:<br />
DetailPrint &quot;Complete&quot;<br />
<br />
<br />
(the last sentence in every answer is the command you have to add in the .nsi file)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">14th July 2003, 13:18</div></div><div class="posttext">Would it not be better to convert the .reg files into an NSIS script.  Since NSIS can work with the registry it should make the installer easier to manage and might even make it faster.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th July 2003, 14:58</div></div><div class="posttext">This new utility converts .reg files or registry keys to NSIS commands:<br />
<br />
http://nsis.sourceforge.net/archive/viewpage.php?pageid=296</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">14th July 2003, 23:33</div></div><div class="posttext">Originally posted by Vytautas <br />
and might even make it faster. <br />
Are you sure it can be faster? I am not a pragmatic programmer, but make nsis add one value to registry, and then another, and then another..., seems slower than adding a .reg file directly (which will add one value and then another...)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">15th July 2003, 12:47</div></div><div class="posttext">'.reg' files also have to enter values one by one, this is done by the regedit program.  So the value entry speed should be about the same.  NSIS however does not need to extract a file and open an external program so it should make it quicker.  Although on most fast machines you will probably not notice a lot of difference.  Well, that' the theory anyway;) <br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th July 2003, 12:54</div></div><div class="posttext">Indeed you shouldn't notice any difference. But NSIS should be faster because it doesn't read and parse a text file but its own format which is designed to run fast, doens't need too much error checking and simply has to read less.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zpeek</div><div class="date">16th July 2003, 03:38</div></div><div class="posttext">Question i try the file thats converts reg file into nsis command.<br />
<br />
Ok, i did Reg2Nsis doc.reg then it type out some text.<br />
<br />
Now what do i do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">16th July 2003, 04:44</div></div><div class="posttext">I suppose that text that typed out is the text you have to write inside a section in the .nsi file.<br />
<br />
Doesn't that program come with instrucionts?<br />
<br />
<br />
kichik and Vytautas: ok, you explanantions sound reasonable, so nsis can be faster ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zpeek</div><div class="date">16th July 2003, 05:01</div></div><div class="posttext">Ok heres the script:<br />
<br />
;Perform A Silent Install<br />
SilentInstall silent<br />
BrandingText &quot; &quot;<br />
<br />
!include doc.reg<br />
<br />
----------------------------------<br />
Here's the error<br />
----------------------------------<br />
Processing script file: &quot;C:\WINDOWS\Desktop\aa.nsi&quot;<br />
SilentInstall: silent<br />
BrandingText: &quot; &quot;<br />
!include: &quot;doc.reg&quot;<br />
Invalid command: REGEDIT4<br />
!include: error in script: &quot;doc.reg&quot; on line 1<br />
Error in script &quot;C:\WINDOWS\Desktop\aa.nsi&quot; on line 5 -- aborting creation process<br />
<br />
Can someone help me pls.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th July 2003, 09:52</div></div><div class="posttext">You're not supposed to include the .reg file, you're supposed to include the output of the program. And you're supposed to include it in a section as it contains insturctions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zpeek</div><div class="date">17th July 2003, 06:30</div></div><div class="posttext">Ok here is the file:<br />
<br />
############################### reg2nsis begin #################################<br />
# This NSIS-script is generated by the reg2nsis utility                        #<br />
# Author : Artem Zankovich                                                     #<br />
# URL    : http://aarrtteemm.nm.ru                                             #<br />
# You can freely inserts it into your setup script as inline text or via       #<br />
# !include directive. Please don't remove this header.                         #<br />
################################################################################<br />
<br />
WriteRegBin HKEY_CURRENT_USER &quot;Software\Microsoft\Windows\CurrentVersion\Policies\Explorer&quot; &quot;NoDriveTypeAutoRun&quot; 95000000<br />
<br />
###############################  reg2nsis end  #################################<br />
<br />
---------------------------------------------------------------<br />
When i enter it in MakeNSIS-Complie and got an error:<br />
---------------------------------------------------------------<br />
Processing script file: &quot;C:\WINDOWS\Desktop\Reg2Nsis002\test.nsi&quot;<br />
WriteRegBin: HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer\NoDriveTypeAutoRun=95000000<br />
Error: Can't add entry, no section or function is open!<br />
Error in script &quot;C:\WINDOWS\Desktop\Reg2Nsis002\test.nsi&quot; on line 9 -- aborting creation process<br />
<br />
HELP PLS</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th July 2003, 12:38</div></div><div class="posttext">You're supposed to use !include &quot;filename.nsh&quot; inside the section/function you wish to write those registry entries. For example:<br />
<br />
Section &quot;Install stuff&quot;<br />
File bla.exe<br />
File foo.txt<br />
!include &quot;RegEntries.nsh&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>