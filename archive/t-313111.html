<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" trouble disabling some buttons, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  trouble disabling some buttons NSIS Discussion" />
	
	<title> trouble disabling some buttons [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  trouble disabling some buttons</div>
<hr />
<div class="pda"><a href="t-313111.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313111">trouble disabling some buttons</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">alexp123</div><div class="date">28th September 2009, 14:19</div></div><div class="posttext">I am creating an auto-installer which is designed to operate without user interaction. I want to make it so the user can cancel on any page, but cannot hit the next or back buttons. I've been successful at disabling the Back button for all of the pages, and the next button for 4/7 of the pages. I can't seem to disable the &quot;I agree&quot; button for the License page, the &quot;Install&quot; button on the Start Menu Folder page, or the &quot;Next&quot; button on the directory page. Some of the relevent code is copied below. I have also tried many other control ID's, but havent had any success. I tried Resource Hacker and AutoIt as well... any ideas?<br />
<br />
from code:<br />
; License page<br />
!define MUI_PAGE_CUSTOMFUNCTION_Pre License_PrePage<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
!insertmacro MUI_PAGE_LICENSE &quot;...&quot;<br />
<br />
...<br />
; Directory page<br />
!define MUI_PAGE_CUSTOMFUNCTION_Pre Directory_PrePage<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
...<br />
; Start Menu page<br />
!define MUI_PAGE_CUSTOMFUNCTION_Pre StartMenu_PrePage<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW SkipPage<br />
!insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />
<br />
...<br />
<br />
<br />
Function License_PrePage<br />
StrCmp $AutoInstall &quot;true&quot; 0 end<br />
StrCpy $R5 &quot;250&quot;<br />
<br />
GetDlgItem $4 $HWNDPARENT 1<br />
EnableWindow $4 0<br />
GetDlgItem $4 $HWNDPARENT 3<br />
EnableWindow $4 0<br />
<br />
end:<br />
FunctionEnd<br />
<br />
...<br />
<br />
Function Directory_PrePage<br />
StrCmp $AutoInstall &quot;true&quot; 0 end<br />
StrCpy $R5 &quot;250&quot;<br />
<br />
GetDlgItem $4 $HWNDPARENT 1<br />
EnableWindow $4 0<br />
GetDlgItem $4 $HWNDPARENT 3<br />
EnableWindow $4 0<br />
end:<br />
FunctionEnd<br />
<br />
...<br />
<br />
Function StartMenu_PrePage<br />
StrCmp $AutoInstall &quot;true&quot; 0 end<br />
StrCpy $R5 &quot;250&quot;<br />
<br />
GetDlgItem $4 $HWNDPARENT 1<br />
EnableWindow $4 0<br />
GetDlgItem $4 $HWNDPARENT 3<br />
EnableWindow $4 0<br />
<br />
end:<br />
FunctionEnd<br />
<br />
Any help would be greatly appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">28th September 2009, 14:38</div></div><div class="posttext">...Shouldn't button disabling be in the SHOW function, and skipping in the PRE function?<br />
<br />
And why on earth would you want to disable the I Agree button on the license page? You don't want people to agree to your license? o_O</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alexp123</div><div class="date">28th September 2009, 14:53</div></div><div class="posttext">Originally posted by MSG <br />
...Shouldn't button disabling be in the SHOW function, and skipping in the PRE function?<br />
<br />
And why on earth would you want to disable the I Agree button on the license page? You don't want people to agree to your license? o_O  <br />
<br />
It's not that we dont want them to agree to the license, we just dont want them to have a choice :) The installer is going to be included inside another installer, so they will be agreeing to the license implicitly. <br />
<br />
And as for the PRE vs. SHOW function, conventionally you are right, but it shouldnt matter in terms of how the program works in this case. I went ahead and made the switch anyway though :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">28th September 2009, 16:13</div></div><div class="posttext">the controls on a page are not yet created in the pre callback.<br />
<br />
use the .onVerifyInstDir callback for the directory page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alexp123</div><div class="date">28th September 2009, 19:00</div></div><div class="posttext">Thanks guys! Using skip page in PRE and disabling in SHOW did the trick for the license and start menu pages, and aborting in .onVerifyInstDir worked for the directory page</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>