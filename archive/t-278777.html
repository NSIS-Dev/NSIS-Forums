<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Having problems with trailing backslash, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Having problems with trailing backslash NSIS Discussion" />
	
	<title> Having problems with trailing backslash [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Having problems with trailing backslash</div>
<hr />
<div class="pda"><a href="t-278777.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=278777">Having problems with trailing backslash</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jhahn0</div><div class="date">12th October 2007, 05:10</div></div><div class="posttext">I've created my first NSIS script (makes you cringe when you see that in a post, I'm sure) and I used the EclipseNSIS plug-in for Eclipse.  I'm installing a file, adding a registry key, and adding string values to the registry key.  Someone else has inherited the development of the program I'm installing and I'm trying to help him deploy it.  I've spent hours searching the forums, looking in the docs/faqs, and searching Google.  I haven't found anything to get this to work or maybe I'm just too tired right now. :igor: <br />
<br />
One of the string values added to the registry is<br />
BASE_DIR=\\server\share\folder$\<br />
<br />
The EclipseNSIS created this line of code to add it to the registry:<br />
WriteRegStr HKEY_LOCAL_MACHINE SOFTWARE\company\program BASE_DIR \\server\share\folder$\<br />
<br />
Compiling gives me this error:<br />
WriteRegStr expects 4 parameters, got 8.<br />
Usage: WriteRegStr rootkey subkey entry_name new_value_string<br />
root_key=(HKCR|HKLM|HKCU|HKU|HKCC|HKDD|HKPD|SHCTX)<br />
Error in script &quot;C:\Documents and Settings\me\My Documents\setup_silent.nsi&quot; on line 74 -- aborting creation process<br />
<br />
Line 75 is<br />
WriteRegStr HKLM &quot;${REGKEY}\Components&quot; Main 1<br />
which is how it gets 8 parameters in the error.<br />
<br />
I do not have control over the $ and the trailing backslash.<br />
<br />
I have tried many different variations of $$, \\, and all three types of quotes.  I've managed to just get warnings, but the output is never right in the registry.  I end up with multiple &quot;$&quot;s, multiple &quot;\&quot;s, no &quot;$&quot;, and/or no trailing &quot;\&quot; at the end of the string value in the registry.<br />
<br />
Removing the trailing backslash allows the script to compile and run just fine (except now I do not have the trailing backslash).<br />
<br />
Can someone figure this out?  If not, perhaps I'll look at getting NSIS to run an embedded cmd script that loads an embedded .reg file.  I was just (futilely) trying to keep it all NSIS.  Maybe the answer is to add the string without the trailing backslash and then concatenate the trailing backslash.  Perhaps I'll see how to do that tomorrow.<br />
<br />
Thank you in advance for any help/suggestions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th October 2007, 08:37</div></div><div class="posttext">Use quotes around the path.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jhahn0</div><div class="date">12th October 2007, 17:20</div></div><div class="posttext">Afrow, I had tried that with &quot;, ', and ` quotes around that parameter.<br />
<br />
Using &quot;:<br />
WriteRegStr HKEY_LOCAL_MACHINE SOFTWARE\company\program BASE_DIR &quot;\\server\share\folder$\&quot;<br />
I get this error:<br />
Error: unterminated string parsing line at C:\Documents and Settings\me\My Documents\setup_silent.nsi:73<br />
Error in script &quot;C:\Documents and Settings\me\My Documents\setup_silent.nsi&quot; on line 73 -- aborting creation process<br />
<br />
Using ':<br />
WriteRegStr HKEY_LOCAL_MACHINE SOFTWARE\company\program BASE_DIR '\\server\share\folder$\'<br />
I get this error:<br />
Error: unterminated string parsing line at C:\Documents and Settings\me\My Documents\setup_silent.nsi:73<br />
Error in script &quot;C:\Documents and Settings\me\My Documents\setup_silent.nsi&quot; on line 73 -- aborting creation process<br />
<br />
Using `:<br />
WriteRegStr HKEY_LOCAL_MACHINE SOFTWARE\company\program BASE_DIR `\\server\share\folder$\`<br />
I get this error:<br />
Error: unterminated string parsing line at C:\Documents and Settings\me\My Documents\setup_silent.nsi:73<br />
Error in script &quot;C:\Documents and Settings\me\My Documents\setup_silent.nsi&quot; on line 73 -- aborting creation process<br />
<br />
I was just thinking about $\ being used to escape quotes, which is why just putting quotes around that parameter does not work.  So, I just tried this:<br />
WriteRegStr HKEY_LOCAL_MACHINE SOFTWARE\company\program BASE_DIR $\&quot;\\server\share\folder$\$\&quot;<br />
Now it will compile and run, but the string in the registry has double quotes around it (i.e.,&quot;\\server\share\folder$\&quot; and I want \\server\share\folder$\.<br />
<br />
Any other ideas?  Should I just pull out the quotes after writing the string?  Can you do that?  Like I said before, Iâ€™ve tried all different kinds of combinations with the dollar sign, the backslash, and the 3 different quotes, like â€¦$$\, â€¦$$\\, â€œâ€¦$$\\â€, etc., but Iâ€™m not the pro like most of you out there providing help.  I was hoping someone more familiar with the syntax or NSIS scripting could tell the correct way to write this line or how to get around this issues.<br />
<br />
Thank you and I apologize for the long posts.  I just want to make sure I'm being thorough.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th October 2007, 17:36</div></div><div class="posttext">&quot;\\server\share\folder\&quot;<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>