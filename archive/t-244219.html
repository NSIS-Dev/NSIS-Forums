<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" help for section on modern gui, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  help for section on modern gui NSIS Discussion" />
	
	<title> help for section on modern gui [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  help for section on modern gui</div>
<hr />
<div class="pda"><a href="t-244219.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=244219">help for section on modern gui</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Homeless</div><div class="date">22nd April 2006, 09:11</div></div><div class="posttext">Hi all,<br />
<br />
I must insert 2 section only with this parameters:<br />
<br />
OutFile &quot;test.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\Test1&quot;<br />
ShowInstDetails show<br />
<br />
InstType &quot;First option&quot;<br />
InstType &quot;Second option&quot;<br />
<br />
Section &quot;First Section&quot; SEC01<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  SetOverwrite on<br />
  File &quot;${NSISDIR}\test1.txt&quot;<br />
SectionEnd<br />
<br />
Section &quot;Second Section&quot; SEC02<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  SetOverwrite on<br />
  File &quot;${NSISDIR}\test2.txt&quot;<br />
SectionEnd<br />
<br />
I dont understand the checked of options.<br />
When i select First option the check box of section 1<br />
must be checked and check box of section 2 not checked and of course disable.<br />
When i select Second option the check of section 1 must be<br />
not checked but enabled to checked and check box of section 2 checked and disabled.<br />
There is also the possibility to change the destination path when the option i different?<br />
If i select first option installdir must be:<br />
InstallDir &quot;$PROGRAMFILES\Test1&quot;<br />
If i select second option installdir must be:<br />
InstallDir &quot;$PROGRAMFILES\Test2&quot; <br />
<br />
Thanks a lot for help.<br />
Thanks in advance.<br />
HL</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd April 2006, 15:36</div></div><div class="posttext">Yeah, it is possible, see one-section.nsi example</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Homeless</div><div class="date">23rd April 2006, 11:27</div></div><div class="posttext">Thanks a lot to reply my post.<br />
I have another question:<br />
<br />
I must check on registry that is installed Photoshop CS or Photoshop CS2, couse the path is different.<br />
<br />
I have this code for CS2.<br />
first<br />
InstallDirRegKey HKLM &quot;SOFTWARE\Adobe\Photoshop\9.0&quot; &quot;ApplicationPath&quot;<br />
<br />
and I think this in CS but not shure:<br />
second<br />
InstallDirRegKey HKLM &quot;SOFTWARE\Adobe\Photoshop\8.0&quot; &quot;ApplicationPath&quot;<br />
<br />
So I must set the different path.<br />
For example:<br />
If Version is 9.0 put on the script the first InstallDirRegKey but the version is 8 put the second InstallDirRegKey<br />
<br />
In this mode when the user install programm find always correct path.<br />
<br />
Thanks a lot.<br />
Homeless</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">23rd April 2006, 14:50</div></div><div class="posttext">Well...you can try not InstallDirRegKey and use ReadRegStr to read both paths, then use StrCmp, to see which paths exists</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Homeless</div><div class="date">23rd April 2006, 15:55</div></div><div class="posttext">Thanks a lot Joel,<br />
<br />
If possible to have an example....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">23rd April 2006, 23:48</div></div><div class="posttext">@Homeless<br />
To check the registry for the correct version of photoshop installed (according to your info) try something along these lines: ClearErrors<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Adobe\Photoshop\8.0&quot; &quot;ApplicationPath&quot;<br />
IfErrors CS9<br />
; found version 8 $0 contains the 'ApplicationPath' value<br />
...<br />
Goto End<br />
<br />
CS9:<br />
ClearErrors<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Adobe\Photoshop\9.0&quot; &quot;ApplicationPath&quot;<br />
IfErrors NoVersion<br />
; found version 9, $0 contains the 'ApplicationPath' value<br />
...<br />
Goto End<br />
<br />
NoVerion:<br />
DetailPrint &quot;No version was found&quot;<br />
...<br />
End:Add your extra code instead of the '...'<br />
<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Homeless</div><div class="date">24th April 2006, 10:13</div></div><div class="posttext">Thanks cancerface for help, but I dont understand while put the string of correct path on installdir.<br />
I find correct path but the installdir is empty and after component window section the path is empty.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th April 2006, 11:44</div></div><div class="posttext">To set the current InstallDir at run time, use<br />
StrCpy $INSTDIR &quot;$PROGRAMFILES\new_path&quot;<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>