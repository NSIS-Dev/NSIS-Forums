<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_PAGE_LICENSE with a variable (not another LANG select), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_PAGE_LICENSE with a variable (not another LANG select) NSIS Discussion" />
	
	<title> MUI_PAGE_LICENSE with a variable (not another LANG select) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_PAGE_LICENSE with a variable (not another LANG select)</div>
<hr />
<div class="pda"><a href="t-262199.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=262199">MUI_PAGE_LICENSE with a variable (not another LANG select)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">21st December 2006, 10:11</div></div><div class="posttext">Hi,<br />
<br />
i ve searched the forum for MUI_PAGE_LICENSE and Licensed explanation in order to use a different EULA file depending on a variable in a compilation command :<br />
<br />
makensis /V2 /DOutFile=&quot;..\Dist\Setup.exe&quot; /DResLicName=&quot;LicenseFile&quot; setup.nsi<br />
<br />
Then in the setup.nsi :<br />
<br />
<br />
...<br />
!ifndef ResLicName<br />
 !define ResLicame &quot;AnotherLicenseFile&quot;<br />
!endif<br />
...<br />
!insertmacro MUI_PAGE_LICENSE &quot;$(ResLicName)-cluf.rtf&quot;<br />
or<br />
!insertmacro MUI_PAGE_LICENSE &quot;${ResLicName}-cluf.rtf&quot;<br />
or<br />
!insertmacro MUI_PAGE_LICENSE &quot;$ResLicName-cluf.rtf&quot;<br />
<br />
<br />
When compiling project i have the following error :<br />
<br />
LicenseData: open failed &quot;$(ResLicName)-cluf.rtf&quot;<br />
Usage: LicenseData local_file_that_has_license_text | license_lang_string<br />
Error in macro MUI_PAGE_LICENSE on macroline 21<br />
Error in script &quot;setup.nsi&quot; on line 93 -- aborting creation process<br />
<br />
I read the forum about using a different EULA file from lang string but that's not my case, i also read that variables was not possible ?<br />
<br />
Is there a (simple) way to solve my problem ?<br />
<br />
Thanks all.<br />
<br />
EDIT : <br />
i va tried <br />
<br />
!insertmacro MUI_PAGE_LICENSE &quot;$(ResLicName)&quot;<br />
<br />
<br />
and have the error :<br />
<br />
LangString &quot;ResLicName&quot; is not set in language table of language English<br />
LangString &quot;ResLicName&quot; is not set in language table of language French</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st December 2006, 11:17</div></div><div class="posttext">${ResProdName} is a define more info (http://nsis.sourceforge.net/Docs/Chapter2.html#2.3.7)<br />
e.g. !define ResProdName &quot;${NSISDIR}\license.txt&quot;<br />
!insertmacro MUI_PAGE_LICENSE &quot;${ResProdName}&quot;<br />
Also take a look here Command Line Usage (http://nsis.sourceforge.net/Docs/Chapter3.html#3.1)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">21st December 2006, 11:21</div></div><div class="posttext">Well i've found a solution in another thread in forum (saying to read Multilanguage.nsi from \NSIS\Examples\Modern UI !)<br />
<br />
makensis /V2 /DOutFile=&quot;..\Dist\Setup.exe&quot; /DResProdName=&quot;Different App&quot; setup.nsi<br />
<br />
<br />
...<br />
!ifndef ResProdName<br />
 !define ResProdName &quot;My App&quot;<br />
!endif<br />
...<br />
!insertmacro MUI_PAGE_LICENSE $(ResLicName)<br />
...<br />
LicenseLangString ResLicName ${LANG_FRENCH} &quot;${ResProdName}-cluf.rtf&quot;<br />
LicenseLangString ResLicName ${LANG_ENGLISH} &quot;${ResProdName}-cluf.rtf&quot;<br />
<br />
<br />
All MUIs for LANG were already set in my script.<br />
<br />
It works as expected, but this workaround is effective if i don't use different language EULA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">21st December 2006, 11:32</div></div><div class="posttext">Hi Red Wine,<br />
<br />
i m sorry there was a bug in my script file i first posted (i should have posted original one...).<br />
ResProdName = ResLicName (i ve edited my post).<br />
In my second post i have separated ResProdName and ReslicName because when compiling script the command Line /DResprodName define the name of the application and ResLicName get the EULA file name associated to.<br />
Hope it is clear ! ^^</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">21st December 2006, 11:47</div></div><div class="posttext">well,<br />
<br />
Red Wine, you gave me an important clue so i tried :<br />
<br />
makensis /V2 /DOutFile=&quot;..\Dist\Setup.exe&quot; /DResProdName=&quot;Different App&quot; setup.nsi<br />
<br />
<br />
!ifndef ResProdName<br />
 !define ResProdName &quot;Default App&quot;<br />
!endif<br />
<br />
!define ResLicName &quot;${ResProdName}-cluf.rtf&quot;<br />
<br />
!insertmacro MUI_PAGE_LICENSE &quot;${ResLicName}&quot;<br />
<br />
<br />
So it works without having to use LicenseLangString workaround and the different syntax<br />
<br />
But what if i had to set for my different license apps diffrent license lang too ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st December 2006, 12:11</div></div><div class="posttext">I'm not sure what exactly you're trying to achieve,<br />
perhaps this:<br />
!ifndef ResProdName<br />
 !define ResProdName &quot;Default App&quot;<br />
!endif<br />
<br />
!if ${ResProdName} == &quot;Different App&quot;<br />
!define ResLicName &quot;D:\Licenses\Lic_FRA.rtf&quot;<br />
!else<br />
!define ResLicName &quot;D:\Licenses\Lic_ENU.rtf&quot;<br />
!endif<br />
<br />
!insertmacro MUI_PAGE_LICENSE &quot;${ResLicName}&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">21st December 2006, 13:15</div></div><div class="posttext">ResProdName in the compilation command line give me the name of the CLUF/EULA file to display (i have created those files). They are both in french but the name of the file is different depending of the ResProdName. I don't need now, but i was wondering what if i had to display one of these file depending of the given variable AND language :<br />
<br />
For the moment i have :<br />
<br />
/DResProdName=&quot;App01&quot;<br />
ResLicName would be App01-cluf.rtf<br />
<br />
/DResProdName=&quot;App02&quot;<br />
ResLicName would be App02-cluf.rtf<br />
<br />
What if i would like :<br />
<br />
/DResProdName=&quot;App01&quot;<br />
ResLicName would be App01-cluf_FRA.rtf when french is selected<br />
or<br />
ResLicName would be App01-cluf_EN.rtf when english is selected<br />
<br />
/DResProdName=&quot;App02&quot;<br />
ResLicName would be App02-cluf_FRA.rtf when french is selected<br />
<br />
or <br />
ResLicName would be App02-cluf_FRA.rtf when english is selected.<br />
<br />
Well, this part would be next step and maybe will never occur !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st December 2006, 13:50</div></div><div class="posttext">!ifndef ResProdName<br />
 !define ResProdName &quot;Default App&quot;<br />
!endif<br />
<br />
!if ${ResProdName} == &quot;App_01&quot;<br />
!define ResLicName &quot;D:\Licenses\Lic__01.rtf&quot;<br />
!endif<br />
<br />
!if ${ResProdName} == &quot;App_02&quot;<br />
!define ResLicName &quot;D:\Licenses\Lic__02.rtf&quot;<br />
!endif<br />
!if ${ResProdName} == &quot;Default App&quot;<br />
!define ResLicName &quot;D:\Licenses\Lic_DEFAULT.rtf&quot;<br />
endif<br />
<br />
!insertmacro MUI_PAGE_LICENSE &quot;${ResLicName}&quot; <br />
<br />
All the above are compile time commands.<br />
<br />
The Language selection is a runtime action  depented on the end user, thus you have to set the different lang strings at runtime according to the end user's selection.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">22nd December 2006, 15:36</div></div><div class="posttext">/DResProdName=&quot;App01&quot;<br />
ResLicName would be App01-cluf_FRA.rtf when french is selected<br />
or<br />
ResLicName would be App01-cluf_EN.rtf when english is selected<br />
<br />
/DResProdName=&quot;App02&quot;<br />
ResLicName would be App02-cluf_FRA.rtf when french is selected<br />
<br />
or<br />
ResLicName would be App02-cluf_FRA.rtf when english is selected.<br />
<br />
use this:<br />
<br />
<br />
!ifndef ResProdName<br />
 !define ResProdName &quot;Default App&quot;<br />
!endif<br />
<br />
!if ${ResProdName} == &quot;App_01&quot;<br />
 !define ResLicName &quot;D:\Licenses\Lic__01.rtf&quot;<br />
!else if ${ResProdName} == &quot;App_02&quot;<br />
 !define ResLicName &quot;D:\Licenses\Lic__02.rtf&quot;<br />
!else <br />
 !define ResLicName &quot;D:\Licenses\Lic_DEFAULT.rtf&quot;<br />
!endif<br />
<br />
LicenseLangString ResLicFile ${LANG_ENGLISH} &quot;${ResLicName}-cluf_EN.rtf&quot;<br />
LicenseLangString ResLicFile ${LANG_FRENCH} &quot;${ResLicName}-cluf_FRA.rtf&quot;<br />
<br />
!insertmacro MUI_PAGE_LICENSE &quot;$(ResLicFile)&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>