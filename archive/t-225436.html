<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem removing empty instdir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem removing empty instdir NSIS Discussion" />
	
	<title> Problem removing empty instdir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem removing empty instdir</div>
<hr />
<div class="pda"><a href="t-225436.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=225436">Problem removing empty instdir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">NukeyDoo</div><div class="date">8th September 2005, 08:58</div></div><div class="posttext">I'm having a weird issue wit 2.09.<br />
<br />
If I select a single level instdir for my app, i.e. &quot;My App&quot; and then inst all files to it, upon uninstall everything including said folder gets removed cleanly. However, if I choose an inst path like &quot;My Company\My App&quot; and then inst all files, upon uninstall only the files and the folder &quot;My App&quot; gets removed, leaving the folder &quot;My Company&quot; there.<br />
<br />
I'm thinking ahead to the future when I release more apps, I want to have them all in the main folder &quot;My Company&quot; with sub folders for the names of the apps, and then when one gets removed, the top level folder will not get removed unless there are no other sub folders. If no sub folders, then it should be removed.<br />
<br />
In this case since I only have one app, the top level folder should be getting removed but it's not.<br />
<br />
Does anyone have any code that can do this?<br />
<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">8th September 2005, 09:12</div></div><div class="posttext">Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro un.GetParent<br />
<br />
#... install code<br />
<br />
Section un.Install<br />
	RMDir $INSTDIR            # Remove &quot;My Company\My App&quot;<br />
	${un.GetParent} &quot;$INSTDIR&quot; $0<br />
	RMDir $0                  # Remove &quot;My Company&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NukeyDoo</div><div class="date">9th September 2005, 11:26</div></div><div class="posttext">Worked great! Thank ya kindly!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>