<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how can i do this?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how can i do this? NSIS Discussion" />
	
	<title> how can i do this? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how can i do this?</div>
<hr />
<div class="pda"><a href="t-235210.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235210">how can i do this?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">11th January 2006, 02:44</div></div><div class="posttext">i have 4 sections,,<br />
<br />
section1<br />
section2<br />
section3<br />
section4<br />
<br />
section1 is hidden, others are visible<br />
<br />
they are in the same group<br />
<br />
i want my installer to:<br />
<br />
if the user select any section within 2-4, enable section1<br />
<br />
if the user does not select any of section[2-4], disable section1<br />
<br />
Please tell me how could i do this, thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th January 2006, 16:50</div></div><div class="posttext">Piece of cake. Assuming you are using Modern UI...<br />
<br />
<br />
!include Sections.nsh<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE ComponentsLeave<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
...<br />
<br />
Section &quot;-section1&quot; Sec1<br />
SectionEnd<br />
<br />
Section &quot;section2&quot; Sec2<br />
SectionEnd<br />
<br />
Section &quot;section3&quot; Sec3<br />
SectionEnd<br />
<br />
Section &quot;section4&quot; Sec4<br />
SectionEnd<br />
<br />
Function ComponentsLeave<br />
<br />
  !insertmacro SectionFlagIsSet ${Sec2} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec3} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec4} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
<br />
    !insertmacro UnselectSection ${Sec1}<br />
<br />
  Goto End<br />
  SelectSection1:<br />
<br />
    !insertmacro SelectSection ${Sec1}<br />
<br />
  End:<br />
<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">11th January 2006, 20:50</div></div><div class="posttext">thanks for your help but the code is not working<br />
<br />
section1 is visible for testing, section1 is not always enabled when other sections are enabled, and i want auto disable section1 when no other section is enabled<br />
<br />
<br />
!include Sections.nsh<br />
!include MUI.nsh<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE ComponentsLeave<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
OutFile .\111.exe<br />
<br />
Section &quot;section1&quot; Sec1<br />
SectionEnd<br />
<br />
Section &quot;section2&quot; Sec2<br />
SectionEnd<br />
<br />
Section &quot;section3&quot; Sec3<br />
SectionEnd<br />
<br />
Section &quot;section4&quot; Sec4<br />
SectionEnd<br />
<br />
Function ComponentsLeave<br />
<br />
  !insertmacro SectionFlagIsSet ${Sec2} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec3} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec4} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
<br />
    !insertmacro UnselectSection ${Sec1}<br />
<br />
  Goto End<br />
  SelectSection1:<br />
<br />
    !insertmacro SelectSection ${Sec1}<br />
<br />
  End:<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th January 2006, 20:54</div></div><div class="posttext">1. Missing - in front of name in your code. It's in mine.<br />
Section &quot;-section1&quot; Sec1<br />
SectionEnd<br />
<br />
2. You need !insertmacro MUI_PAGE_INSTFILES in there otherwise none of the Sections will be executed!<br />
<br />
Edit: Oh and btw, when you mean 'disable' and 'enable' are you referring to selecting the section to be executed, or are you referring to enabling the section check-box so that the user can select or unselect it?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">11th January 2006, 23:50</div></div><div class="posttext">1. Missing - in front of name in your code. It's in mine. <br />
i deleted the &quot;-&quot; for testing, so i can see the status of the selection,<br />
<br />
sorry my english is bad, when i say enable, it means select<br />
<br />
i want my secton to look like <br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=235097<br />
<br />
but section1 is hidden,  section2-4 depends on section1<br />
if section2-4 is not selected(checked) auto uncheck section1<br />
that means section1 cannot be installed alone</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th January 2006, 09:12</div></div><div class="posttext">Oh I see. With the code above Section 1 will be selected if any 1 of the 3 (2-4) Sections are selected. If you need all three selected for Section 1 to be selected, then your ComponentsLeave function should look like this:<br />
<br />
<br />
Function ComponentsLeave<br />
<br />
  !insertmacro SectionFlagIsSet ${Sec2} ${SF_SELECTED} 0 UnselectSection1<br />
  !insertmacro SectionFlagIsSet ${Sec3} ${SF_SELECTED} 0 UnselectSection1<br />
  !insertmacro SectionFlagIsSet ${Sec4} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
<br />
  UnselectSection1:<br />
<br />
    !insertmacro UnselectSection ${Sec1}<br />
<br />
  Goto End<br />
  SelectSection1:<br />
<br />
    !insertmacro SelectSection ${Sec1}<br />
<br />
  End:<br />
<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">12th January 2006, 12:08</div></div><div class="posttext">thank you<br />
i did it, but i changed something and it worked<br />
<br />
!include Sections.nsh<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
...<br />
<br />
Section &quot;-section1&quot; Sec1<br />
SectionEnd<br />
<br />
Section &quot;section2&quot; Sec2<br />
SectionEnd<br />
<br />
Section &quot;section3&quot; Sec3<br />
SectionEnd<br />
<br />
Section &quot;section4&quot; Sec4<br />
SectionEnd<br />
<br />
Function .onSelChange<br />
<br />
  !insertmacro SectionFlagIsSet ${Sec2} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec3} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
  !insertmacro SectionFlagIsSet ${Sec4} ${SF_SELECTED} SelectSection1 &quot;&quot;<br />
<br />
    !insertmacro UnselectSection ${Sec1}<br />
<br />
  Goto End<br />
  SelectSection1:<br />
<br />
    !insertmacro SelectSection ${Sec1}<br />
<br />
  End:<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th January 2006, 18:48</div></div><div class="posttext">I didn't put it in .onSelChange because you won't see the changes made to Sec1 because Sec1 is hidden anyway. Therefore it would be bad coding practice to place the code there which will be called every time the user selects or unselects a section. It might as well be just when the user clicks Next instead...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">12th January 2006, 20:28</div></div><div class="posttext">i think nsis should add a manual for section.nsi<br />
<br />
or the manual is exist that i cannot find?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>