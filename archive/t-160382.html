<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" rmdir doesn´t work correctly!?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  rmdir doesn´t work correctly!? NSIS Discussion" />
	
	<title> rmdir doesn´t work correctly!? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  rmdir doesn´t work correctly!?</div>
<hr />
<div class="pda"><a href="t-160382.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=160382">rmdir doesn´t work correctly!?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Speed78</div><div class="date">17th December 2003, 21:48</div></div><div class="posttext">Hi,<br />
<br />
my uninstall section looks like this...<br />
<br />
------<br />
  ; Delete Files and Directories<br />
  Delete /REBOOTOK &quot;$INSTDIR\Daten\*.*&quot;<br />
  Delete /REBOOTOK &quot;$INSTDIR\*.*&quot;<br />
  RMDir  /REBOOTOK &quot;$INSTDIR\Daten&quot;<br />
  RMDir  /REBOOTOK &quot;$INSTDIR&quot;<br />
------<br />
<br />
In $INSTDIR there is a file that cannot be deleted, because the file is in use. After a reboot the file is deleted but the directory still exists. This only happens on Win9x and WinME machines. On Win2000 and WinXP it works correctly.<br />
<br />
Any Ideas??<br />
<br />
Best regards<br />
<br />
Speed78</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th December 2003, 22:10</div></div><div class="posttext">Which version of NSIS are you using?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Speed78</div><div class="date">18th December 2003, 18:02</div></div><div class="posttext">Hi,<br />
<br />
i use the latest 2.04b version.<br />
<br />
Best regards<br />
<br />
Speed78</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th December 2003, 19:14</div></div><div class="posttext">Hmm... It seems wininit.ini, which is what NSIS uses to delete folders on Windows 9x with /REBOOTOK, can't delete folders. I'll update docs and try to find some solution in the next version.<br />
<br />
For now, you can create another small installer or even a batch file which will delete the folder and set it to run in HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">s793016</div><div class="date">19th December 2003, 06:44</div></div><div class="posttext">... why can not I delete my own post?<br />
<br />
Sorry, I post something wrong inside this thread, and I could not delete it by myself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">s793016</div><div class="date">27th December 2003, 10:27</div></div><div class="posttext">Sorry, my English is very poor.<br />
<br />
I found that Wininit.ini in Win9x Do delete folders.<br />
<br />
Just use &quot;DIRNUL=&quot; to do that.<br />
<br />
And this will delete all things inside that folder.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th December 2003, 17:28</div></div><div class="posttext">Is there any documentation from Microsoft on that feature? All I have been able to find is some &quot;trick lists&quot; that mention this. I tested it on Windows ME and it did work, but nothing says it works on Windows 95 and Windows 98. Furthermore, it recursively deletes all files in the folder unlike MoveFileEx which only removes empty folders as RMDir is supposed to do without the /r switch.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">s793016</div><div class="date">28th December 2003, 06:31</div></div><div class="posttext">Sorry, my English is very poor.<br />
<br />
I known that because I use HexEditor (ex: UltraEdit ... etc.) to find those ASCII String inside Wininit.exe by handywork.<br />
<br />
I found wininit.exe at both Win98SE &amp; WinME do content that ASCII String, and tested OK.<br />
<br />
Maybe someone could provide a Win95 version Wininit.exe to search that Ascii String?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st January 2004, 17:00</div></div><div class="posttext">Your English is OK, no need to apologize.<br />
<br />
I think we'll have to find a better solution because of the above reasons.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>