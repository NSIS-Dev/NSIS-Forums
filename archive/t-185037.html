<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Detect script path at compile time, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Detect script path at compile time NSIS Discussion" />
	
	<title> Detect script path at compile time [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Detect script path at compile time</div>
<hr />
<div class="pda"><a href="t-185037.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=185037">Detect script path at compile time</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">29th June 2004, 22:18</div></div><div class="posttext">Hi folks,<br />
<br />
I was having some trouble excluding .svn version control subdirectories from getting packages with my application, but thanks to rsegal I could solve the problem.<br />
<br />
One question remains: I need the full absolute path to the NSIS script (resp. to the directories I choose to wrap up into the installer). Since my source is tucked away in a version control database, the actual path where the NSIS script is compiled from is not fixed, but differs from time to time (and PC to PC). <br />
<br />
Is there a way of detecting the script directory at _compile_ time? I am thinking of something like ${__DIR__}, similar to ${__FILE__}? I was not able to find any solution in the documentation or by googling around.<br />
<br />
Kind regards,<br />
<br />
Steve</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">1st July 2004, 19:24</div></div><div class="posttext">There is a macro in the archive which you can use to extract the directory from a file name. Use that in conjunction with ${__FILE__} to get what you need.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">2nd July 2004, 03:04</div></div><div class="posttext">The only way to change Compile Time strings is to create another program and make this second program run the first program with the information you want to change in the command line as defines.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">2nd July 2004, 15:12</div></div><div class="posttext">Oops, you're right- I missed the compile time reference.<br />
To the original poster- why do you need absolute paths. If you write your NSI with relative paths, you should be OK.<br />
I am doing the same thing as you, i.e., my NSI file is in a version control system and the absolute path may vary from PC to PC.<br />
However, since my scripts use relative paths and the version control relative directory structure is the same on every PC, I experience no problems compiling on different PCs.<br />
If you really want the ${__DIR__} macro, a couple of options are to: <br />
a) Modify the makensis source code and recompile, or,<br />
b) Create a batch file in the same folder as the NSI file. In the batch file generate an NSH file which defines the ${__DIR__} macro for you and then include the NSH file in your main NSI. You can invoke the batch file using the !system command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">e-novative</div><div class="date">3rd July 2004, 11:14</div></div><div class="posttext">Thanks for your help, folks. The relative paths I required because I use rsegal's FolderList to exclude .svn version control files from being packaged into the installer and being deployed to the target system. Originally, rsegal told me that I must use absolute paths to specify the exclude directories, but (lucky my) I tried with relative paths and they - unexpectedly - worked, too.<br />
<br />
It's good to know a way of doing at, though, in case I should need it in the future. Thanks again for your help.<br />
<br />
Regards,<br />
<br />
Steve</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>