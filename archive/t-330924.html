<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Wow6432Node Issue, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Wow6432Node Issue NSIS Discussion" />
	
	<title> Wow6432Node Issue [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Wow6432Node Issue</div>
<hr />
<div class="pda"><a href="t-330924.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330924">Wow6432Node Issue</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dc_dweller</div><div class="date">25th May 2011, 19:21</div></div><div class="posttext">Hi all,<br />
<br />
My installer is supposed to write something to HKEY_LOCAL_MACHINE\Software\... if this is a 32-bit Windows, and to HKEY_LOCAL_MACHINE\Software\Wow6432Node\... if it is a 64-bit machine, so I have this code:<br />
<br />
${If} ${RunningX64}<br />
	WriteRegStr HKLM &quot;Software\Wow6432Node\blahblah&quot; &quot;Path&quot; $INSTDIR<br />
${Else}<br />
	WriteRegStr HKLM &quot;Software\blahblah&quot; &quot;Path&quot; $INSTDIR<br />
${EndIf}<br />
<br />
This works **most of the time** but not always. Sometimes, when I run it on a 64-bit machine, it creates an additional level:<br />
<br />
HKEY_LOCAL_MACHINE\Software\Wow6432Node\Wow6432Node\blahblah.<br />
<br />
Can someone shed some light on this?<br />
<br />
Thanks.<br />
<br />
-- DC Dweller</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th May 2011, 19:34</div></div><div class="posttext">You don't need to specify both registry keys. This is enough for both 32-bit and 64-bit:WriteRegStr HKLM &quot;Software\blahblah&quot; &quot;Path&quot; $INSTDIRWindows handles the redirection for you (try it). If you don't want to write to Wow6432Node then you use SetRegView 64, but otherwise it will always write to Wow6432Node on Windows 64 (because NSIS installers are 32-bit).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dc_dweller</div><div class="date">25th May 2011, 21:08</div></div><div class="posttext">Thanks for replying. You are right, and I ended up doing just that.<br />
<br />
I did notice one thing which implies a bug in NSIS:<br />
<br />
If the registry key HKEY_LOCAL_MACHINE\Software\Wow6432Node\BlahBlah already exists, then the command <br />
<br />
WriteRegStr HKLM &quot;Software\Wow6432Node\blahblah&quot; &quot;Path&quot; $INSTDIR<br />
<br />
works properly, but if it does not exist, then this command writes to <br />
<br />
HKEY_LOCAL_MACHINE\Software\Wow6432Node\Wow6432Node\blahblah</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">25th May 2011, 21:17</div></div><div class="posttext">NSIS just passes the string to the registry API, this redirection is probably by design, you are not really supposed to hardcode the Wow6432 key anywhere. If you are only doing 32bit stuff, don't think about x64 redirection at all and everything should be fine...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>