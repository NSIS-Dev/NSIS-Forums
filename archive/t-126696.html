<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Incorrect progress indicator when calling return, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Incorrect progress indicator when calling return NSIS Discussion" />
	
	<title> Incorrect progress indicator when calling return [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Incorrect progress indicator when calling return</div>
<hr />
<div class="pda"><a href="t-126696.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=126696">Incorrect progress indicator when calling return</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">28th February 2003, 14:18</div></div><div class="posttext">Hi,<br />
<br />
There is a bug when using Return to prematurely exit from a section. This bug causes the progress bar not to &quot;finish&quot; the install, meaning it will remain with a value smaller than it's maximum.<br />
<br />
It seems that it misses the value given by the size of the files added to the section after the return was called.<br />
<br />
I test it both on v2.0b1 and v2.0b2 with the same result.<br />
<br />
I attached an example script that shows the problem. j2re-1_4_1_02-windows-i586.exe in this case is a big file (~8Mb) while the files from the section &quot;My files&quot; are small. I think the bigger this file is, the &quot;distance&quot; to the end of the progress becomes bigger.<br />
<br />
If you run the installer from this script you can see the problem, but if you comment line 32 and uncomment line 33, the problem goes. To put it short: use goto instead of return.<br />
<br />
So if you encounter this problem and a fix is not made, you should use this workaround.<br />
<br />
Cheers<br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th February 2003, 22:31</div></div><div class="posttext">Return in a section is the same as Abort just without any text. You are not supposed to use that and there is absolutely no reason to. To get out of a section jump to the end of it using Goto.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">3rd March 2003, 09:42</div></div><div class="posttext">Can you give me an example of what's the use for Return ? <br />
From your post I understand that Return must not be used in any circumstances, which is kinda of odd, since it's in the documentation and from that I understood it has a similar purpose to that of the return keyword from C/C++.<br />
<br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd March 2003, 12:57</div></div><div class="posttext">Return is to be used as functions. In functions it acts just like the C/C++ return keyword. It can also be used in called labels such as in the UpgradeDLL macro.<br />
<br />
Example:<br />
Function Test<br />
  MessageBox MB_YESNO &quot;Would you like to do some testings?&quot; IDYES +2<br />
    Return<br />
  # do stuff...<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">3rd March 2003, 15:07</div></div><div class="posttext">Then the docs must be updated cause it says &quot;Returns from a function or section.&quot; so I thought it has the same effect on sections as it has on functions.<br />
<br />
anyway thx for the clarifications.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd March 2003, 20:05</div></div><div class="posttext">I am sorry, my mistake. It's like abort with no text only to that section. So in a way it does return from the section but the progress bar won't advance because it can't know if it's the return that is automatically tagged at the end of the section or your return.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pcristip</div><div class="date">4th March 2003, 08:34</div></div><div class="posttext">Ok thx, I understand in a way why it's difficult to advance the progress because it doesn't know in advance the size of the files that are added after the return statement.<br />
Maybe some function similar to AddSize that will advance the progress will do it but i think it's a little to much when goto can be used.<br />
<br />
Oh well, goto is not that bad :)<br />
<br />
Cheers,<br />
Chris</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>