<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Some files are copied to c:\ instead to the install dir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Some files are copied to c:\ instead to the install dir NSIS Discussion" />
	
	<title> Some files are copied to c:\ instead to the install dir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Some files are copied to c:\ instead to the install dir</div>
<hr />
<div class="pda"><a href="t-159538.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=159538">Some files are copied to c:\ instead to the install dir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">premm</div><div class="date">13th December 2003, 09:01</div></div><div class="posttext">Its strange, some useres report that DeskCalc.exe file was sent to root directory (c:\), but the uninstall programs (Uninstall.exe and uninst-nsis.exe) were sent to the right directory (c:\Program Files\DeskCalc Pro) along with the help subdirectory (French and English help files).<br />
<br />
Here's the script, can anybody help me with this, i'am using 2.0Beta3<br />
<br />
Thank you<br />
Mario<br />
<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
Section &quot;Deskcalc.exe&quot; SecCopyUI<br />
<br />
  ;Add your stuff here<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
<br />
  File &quot;lizenz.txt&quot;<br />
  File &quot;f:\Projects\DeskCalc.uk\TaxCalc___Win32_Release_englisch\deskcalc.exe&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\Taxcalc.bat&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\wait.exe&quot;<br />
<br />
  SetOutPath &quot;$INSTDIR\HELP&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\help\deskcalc_uk.chm&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\help\deskcalc_fr.chm&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\help\deskcalc_basics.swf&quot;<br />
  File &quot;f:\PROJECTS\DeskCalc.uk\help\deskcalc_basics.html&quot;<br />
<br />
  ;Add your stuff here<br />
  WriteUninstaller &quot;$INSTDIR\Uninstall.exe&quot;<br />
<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th December 2003, 10:51</div></div><div class="posttext">You might want to upgrade to b4 and see if that fixes the problem.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">premm</div><div class="date">13th December 2003, 11:19</div></div><div class="posttext">thanks, but does anyone know that this bug is fixed in B4 ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th December 2003, 13:04</div></div><div class="posttext">I know no such bug. Please attach the entire script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">premm</div><div class="date">13th December 2003, 13:09</div></div><div class="posttext">here it is, its really strange, this problem happens only on some<br />
machine. i haven't seen that myself, so i cannt reproduce it.<br />
<br />
script is attached !<br />
<br />
thanks<br />
 mario</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th December 2003, 13:29</div></div><div class="posttext">You have some errors in your script. You have mixed code from makensis.nsi with your own code. You write to the NSIS registry key instead into your own:WriteRegStr HKLM SOFTWARE\NSIS &quot;&quot; $INSTDIRYou create uninst-nsis.exe again after you've created Uinstall.exe:WriteUninstaller $INSTDIR\uninst-nsis.exeAnd you still read $INSTDIR from your own registry key though you don't write anything there:InstallDirRegKey HKCU &quot;Software\${MUI_PRODUCT}&quot; &quot;&quot;Those users probably had a previous installation of your product which wrote something to that registry key on its own. NSIS probably read that key, got the wrong directory from and installed the files in there. The wrong directory in their case was the root directory.<br />
<br />
You also get the desktop dirctory using the wrong method. You should use $DESKTOP and not $SMPROGRAMS\..\.. which might not always work. You also forgot to quote the paths in ExecShell.<br />
<br />
Try the attached file with b4 or the latest CVS version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">premm</div><div class="date">13th December 2003, 14:33</div></div><div class="posttext">thank you,<br />
<br />
i'll try that!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>