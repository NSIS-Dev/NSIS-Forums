<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How do I make a user level have admin rights during installation?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How do I make a user level have admin rights during installation? NSIS Discussion" />
	
	<title> How do I make a user level have admin rights during installation? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How do I make a user level have admin rights during installation?</div>
<hr />
<div class="pda"><a href="t-305289.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=305289">How do I make a user level have admin rights during installation?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">13th April 2009, 08:05</div></div><div class="posttext">I made an installer that works perfectly with XP. It works with Vista as well but only with administrators. <br />
<br />
What if the user wants to install this software but doesn't have the administrator's password (user level at VISTA)? I have tried using the UAC plug in, but this would definitely prompt the user for the admin password. <br />
<br />
Is there anyway that could make the installer run by the user as if he's the admin? <br />
<br />
Please help... thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">13th April 2009, 11:17</div></div><div class="posttext">The entire point of access levels is that a common user can't just simply gain admin level without so much as a prompt for administrator credentials... so, no - you can't have your installer magically gain admin level if the person running the installer only has user level.<br />
<br />
If common users should be able to use your installer, you might have to check why your installer needs admin level and see if you can eliminate that need.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">15th April 2009, 05:50</div></div><div class="posttext">That's right. You have a point. But I was wondering why you can install GTalk even if you only have a user level. I think same goes with yahoo messenger. <br />
<br />
I would want to make it work that way if there's any way. I actually made a workaround, you can get to install it but only on the APPDATA folder. I figured you can't install in the PROGRAM files folder if you're only a user.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th April 2009, 09:47</div></div><div class="posttext">Your installer is just as broken on XP, it's just that most people run as admin there (but not everyone)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">15th April 2009, 10:47</div></div><div class="posttext">Nope, it works perfectly on XP whatever folder you select... I'm only having problems on Vista. <br />
<br />
If you can install Gtalk and YM on Vista without having admin rights, that means, there's gotta be a way you could do that on your own installer. <br />
<br />
That's what I'm trying to figure out...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th April 2009, 11:57</div></div><div class="posttext">If you try to write to $programfiles without checking for admin rights on XP, your installer is broken!<br />
<br />
To install something as non-admin, you must install the program in $localappdata or $appdata</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">15th April 2009, 12:02</div></div><div class="posttext">I understand, but that's not what i want to do... :) I want to be able to install to any folder... :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">15th April 2009, 23:31</div></div><div class="posttext">UAC will also block access to the root of the system drive (C:\ for example) as well as the Windows and Program Files folders.  (I'm not totally sure, but I believe the restriction to the root of the system drive might be the difference between XP and Vista.)<br />
<br />
MS recommends using the user's profile folder instead if trying to run without elevated permissions.  More info here:  http://technet.microsoft.com/en-us/windows/cc507861.aspx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">16th April 2009, 02:25</div></div><div class="posttext">UAC facilitates switching between Administrator and Non-Administrator tokens, in order to temporarily elevate permissions for a program w/o using a separate account. Else, it has to do with file system permissions which should be the same or similar between XP and Vista.<br />
<br />
- Cannot write a FILE to root but can create a folder in the root; if another user created that folder then they can add their own files but not modify the other user's files.<br />
- Can write to their profile directory, and the Shared Documents folder (they can add their own files but not modify other users' files).<br />
- Write to HKEY_CURRENT_USER, few exceptions: HKCU\Software\Microsoft\Windows\CurrentVersion\Policies is not writeable by non-admin even though it's under their hive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">16th April 2009, 03:24</div></div><div class="posttext">If you select &quot;single user&quot; for the install type, that means the application will be installed in the current user's account. <br />
<br />
My understanding is that, if you're an admin the application should be written in HKLM which makes it available to all users. And if you're just a user it should be written in HKCU. <br />
<br />
My question is, If I'm an admin and I select &quot;single user&quot; will the application installed be available to all users?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">16th April 2009, 04:05</div></div><div class="posttext">My question is, If I'm an admin and I select &quot;single user&quot; will the application installed be available to all users? [/B]That depends on where you install it. If you install it within the admin's profile, non-admin users won't be able to access the program. Non-admins also cannot access other users' profiles, via file system permissions and not UAC, if using NTFS as the file system. If it is somewhere where the user can read it then they can open the program.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th April 2009, 09:54</div></div><div class="posttext">single user is single user, does not matter if you are admin or not</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsfis</div><div class="date">17th April 2009, 12:44</div></div><div class="posttext">bedbuffer,<br />
have you tried to set RequestExecutionLevel to &quot;user&quot;? By default, XML manifest is not included and OS decides itself what priviliges are required. It can recognize that EXE is an installer and then requires admin priviliges.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">20th April 2009, 03:19</div></div><div class="posttext">nsfis, <br />
<br />
Yes I did, it was the very first thing I considered actually. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">20th April 2009, 06:57</div></div><div class="posttext">Last Friday, I just finished creating the installer and it works perfectly with Vista and XP. It sets the installation folder depending on the level of priviledge the user has (admin, user, etc...) and it also bypasses the UAC prompt in Vista. <br />
<br />
Thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">20th April 2009, 10:17</div></div><div class="posttext">Do you guys know how to create a software updater? one that silently installs...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">22nd April 2009, 09:44</div></div><div class="posttext">I just figured how to... thanks... :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ethanchen</div><div class="date">30th April 2009, 10:26</div></div><div class="posttext">hi bedbuffer, would you show how to do it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">6th May 2009, 07:21</div></div><div class="posttext">yes, just check the vpatch sample included in the nsis package. That's how I made the updater...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bedbuffer</div><div class="date">6th May 2009, 07:58</div></div><div class="posttext">also, add a line that would read the registry entry of your app (location of the app) so it would know where to install the updates....</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>