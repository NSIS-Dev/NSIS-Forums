<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Upx &amp; Nsis, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Upx &amp; Nsis NSIS Discussion" />
	
	<title> Upx &amp; Nsis [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Upx &amp; Nsis</div>
<hr />
<div class="pda"><a href="t-266215.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266215">Upx &amp; Nsis</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">amckern</div><div class="date">20th February 2007, 13:38</div></div><div class="posttext">Hey!<br />
<br />
I was just messing around with UPX 2.03 (http://upx.sourceforge.net/ OR http://en.wikipedia.org/wiki/UPX) and found I can compress almost 20KB out of some of Null soft installers, while I can dump 30kb-190kb out of my own.<br />
<br />
Now, I know this is a complex question but:<br />
<br />
Am I destroying the content of these installers? (I am making back ups before I UPX them)<br />
<br />
Is it only the NSIS scripting language that is getting compressed inside the installers, or has UPX found the actual program that the installer is meant to install, and is compacting it as well?<br />
<br />
Examples<br />
<br />
nsis-2.24-setup.exe<br />
<br />
1480945 bytes to 1467121 bytes (99.07%) = 13824 bytes / 13.5 KB smaller<br />
<br />
Original File<br />
http://i19.tinypic.com/402t2pz.png<br />
<br />
UPX File<br />
http://i5.tinypic.com/4btncsp.png<br />
<br />
Stats <br />
http://i13.tinypic.com/3zq5v29.png<br />
<br />
Setup_Prime_TCS.exe<br />
<br />
382761948 bytes to 382749148 bytes = 12800 Bytes / 12.5 KB smaller<br />
<br />
Script<br />
http://developer.valvesoftware.com/wiki/Source_Mod_Installers<br />
<br />
Before<br />
http://i12.tinypic.com/30cnh1x.png<br />
<br />
After<br />
http://i19.tinypic.com/35lbtyh.png<br />
<br />
Stats <br />
http://i13.tinypic.com/4hrs4t2.png</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th February 2007, 15:58</div></div><div class="posttext">UPX compresses the overhead, i.e. the execution code.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">20th February 2007, 16:15</div></div><div class="posttext">You can also use UPX on your installer at compile time with the !packhdr command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">amckern</div><div class="date">20th February 2007, 23:24</div></div><div class="posttext">Because I normally use HM NSIS, where about would I stick !packhdr - and will that UPX the correct files at compile time, instead of having to run them through the external tool?<br />
<br />
I also saw that UPX reserves its self a slice of ram at run time, would this be a hack way to safe guard your self against buffer over runs? Or is it the other way around, and will have a more significant chance of causing them?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st February 2007, 00:15</div></div><div class="posttext">You just put it in your script.<br />
Documentation shows this example:<br />
!packhdr &quot;$%TEMP%\exehead.tmp&quot; '&quot;C:\Program Files\UPX\upx.exe&quot; &quot;$%TEMP%\exehead.tmp&quot;'<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>