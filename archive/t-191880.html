<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Proposal: /NOIEPROXY flag for nsisdl plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Proposal: /NOIEPROXY flag for nsisdl plugin NSIS Discussion" />
	
	<title> Proposal: /NOIEPROXY flag for nsisdl plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Proposal: /NOIEPROXY flag for nsisdl plugin</div>
<hr />
<div class="pda"><a href="t-191880.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=191880">Proposal: /NOIEPROXY flag for nsisdl plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">30th August 2004, 14:04</div></div><div class="posttext">Hi,<br />
<br />
 I've just made a little modification to nsisdl: I've introduced a new flag called /NOIEPROXY which makes the plugin not to read IE proxy settings, so it tries to download the files directly. <br />
 The reason behind this modification is that in certain enviroments, some of the intranet http servers can't be connected via the corporate proxy server and I can't make the users switch to M$IE proxy options just because that single download, it's easier to give them the option to not to use the proxy in that one case.<br />
Use: <br />
<br />
 The /NOIEPROXY flag should be the first flag for the nsis::download command. <br />
If /NOIEPROXY or /NOIEPROXY=1 is the first flag for this command, then the IE proxy config is not used. Examples: <br />
<br />
<br />
 NSISdl::download /NOIEPROXY http://www.domain.com/file localfile.exe<br />
 NSISdl::download /NOIEPROXY=1 http://www.domain.com/file localfile.exe<br />
 <br />
<br />
If this flag is ommitted or for exp. /NOIEPROXY=0 is inserted then IE proxy is used.<br />
Examples: <br />
<br />
<br />
 NSISdl::download http://www.domain.com/file localfile.exe<br />
 NSISdl::download /NOIEPROXY=0 http://www.domain.com/file localfile.exe<br />
 <br />
<br />
I think this modification is helpful and does not make the usage or the source code much too complicated. I hope that it might be included in the CVS someday.<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">30th August 2004, 17:15</div></div><div class="posttext">Well, I though this topic generates much more interest than that :)<br />
Anyone interested?<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">3DTrains</div><div class="date">30th August 2004, 21:22</div></div><div class="posttext">Me! &lt;*waves*&gt; :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">31st August 2004, 09:04</div></div><div class="posttext">Hi Marc,<br />
<br />
 I forgot to mention, and that might disturb people: If you apply the patch against nsisdl.cpp in the NSISDL source, you'll get the modified source.<br />
<br />
The directory where the cpp file to be patched resides is: <br />
C:\Program Files\NSIS\Contrib\NSISdl <br />
<br />
<br />
The command to apply the patch:<br />
/usr/bin/patch nsisdl.cpp nsisdl.cpp.diff.txt <br />
<br />
The patch command requires cygwin to be deployed. If you want, I can upload the modified nsisdl.cpp source here.<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mdm</div><div class="date">31st August 2004, 18:07</div></div><div class="posttext">confused...<br />
1. do I add the /NOIEPROXY flag to nsisdl.cpp (where?)?<br />
2. what about deleting nsisdl.dll file if my installer has no need to go to any webserver? Is that a working solution?<br />
<br />
mdm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">31st August 2004, 18:21</div></div><div class="posttext">Hi mdm,<br />
<br />
 1: you have to patch your nsisdl.cpp the way I described above. I'll attach to whole source, in case you don't have patch utility. Usage is described in my first post: you have to put this flag right after the 'NSISdl::download' command.<br />
2: Well, I'm not sure if I understand what you mean to say. My  patch is to enable an NSIS user to avoid to use MSIE's web proxy settings and go to the web server directly. If your installer does not download data via web, you just simply comment out the 'NSISdl::download' command in your script.<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mdm</div><div class="date">31st August 2004, 18:41</div></div><div class="posttext">please excuse me for being obtuse here..<br />
my nsisdl.cpp and the one you sent has no line: NSISdl::download. <br />
Is NSISdl::download a command for my nullsoft installation script? I don't have any web downloads within my installation script(&quot;If your installer does not download data via web, you just simply comment out the 'NSISdl::download' command in your script&quot;). <br />
<br />
appreciate your patience, <br />
mdm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">1st September 2004, 09:15</div></div><div class="posttext">Mdm,<br />
<br />
 'NSISdl::download' is invocation form of &quot;NSISdl&quot; plugin's &quot;download&quot; function, so in this form it should present in an nsi script, so &quot;C:\Program Files\NSIS\Contrib\NSISdl\ReadMe.txt&quot;  for details. If you don't want to use web in your NSIS installer you, don't need it and this topic is needles either :)<br />
In the nsisdl.cpp you can find a line starting with &quot;_declspec(dllexport) void download&quot;, that's where you can check the C++ source code.<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">k_hejwosz</div><div class="date">1st September 2004, 11:56</div></div><div class="posttext">Could you please upload the recompiled nsisdl.dll with the /NOIEPROXY flag?<br />
<br />
I would be much obliged</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">1st September 2004, 12:00</div></div><div class="posttext">Hi,<br />
<br />
 Here it goes, along with the source.<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div class="post"><div class="posttop"><div class="username">k_hejwosz</div><div class="date">1st September 2004, 12:37</div></div><div class="posttext">Thanks.<br />
<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd September 2004, 22:07</div></div><div class="posttext">thanks, added in latest cvs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">memph</div><div class="date">3rd September 2004, 11:13</div></div><div class="posttext">Kichik,<br />
<br />
 Thank you!<br />
<br />
Regards,<br />
<br />
Memph</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>