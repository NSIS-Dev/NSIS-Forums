<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Selected Sections Summary, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Selected Sections Summary NSIS Discussion" />
	
	<title> Selected Sections Summary [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Selected Sections Summary</div>
<hr />
<div class="pda"><a href="t-356457.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=356457">Selected Sections Summary</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kolorowy</div><div class="date">28th February 2013, 22:50</div></div><div class="posttext">I'm trying to show selected sections before installing, a summary. <br />
<br />
I assign text to variables based on the selection. This is displayed fine, but the problem is when the section is not selected the MultiTextLine shows empty space. <br />
<br />
If this is for the last line it is not as noticeable, if it is in the middle (TextVar2) that is mach more noticeable. <br />
<br />
All variables are cleared before nsDialogs is created, StrCpy TextVar1 &quot;&quot; and so on. <br />
<br />
If section 2 is not selected I get output such as:<br />
<br />
Section 1<br />
                            <br />
Section 3<br />
<br />
<br />
Is there any other way of getting a summary of selected options? Initially I wanted to use NSD_CreateLabel but since not every time label will be displayed I could not find solution to move label locations if section is selected or not.<br />
<br />
<br />
<br />
Var MultiText<br />
Function SummaryDetails<br />
<br />
  nsDialogs::Create 1018<br />
    Pop $Dialog<br />
<br />
    ${If} $Dialog == error<br />
      Abort<br />
    ${EndIf}<br />
<br />
    ${NSD_CreateTextMultiline} 0u 0u 100% 130u &quot;TextVar1$\r$\nTextVar2$\r$\n\<br />
                                      TextVar3$\r$\n&quot;<br />
    Pop $MultiText<br />
<br />
  nsDialogs::Show<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">2nd March 2013, 11:41</div></div><div class="posttext">The most straight-forward method would be to do<br />
<br />
${If} ${SectionIsSelected} Section1<br />
StrCpy $TextVar &quot;$TextVar$\r$\nSection1&quot;<br />
${EndIf}<br />
and keep doing that for all the sections. There's probably a smarter way, though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">oldfriend</div><div class="date">2nd March 2013, 12:19</div></div><div class="posttext">The most straight-forward method would be to do<br />
<br />
${If} ${SectionIsSelected} Section1<br />
StrCpy $TextVar &quot;$TextVar$\r$\nSection1&quot;<br />
${EndIf}<br />
and keep doing that for all the sections. There's probably a smarter way, though.<br />
<br />
But imagine there are 40-50 sections like in the media player installation and files type association. It won't be very convenient for every section place such part of code as for me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd March 2013, 12:56</div></div><div class="posttext">Then use a macro but you will still need to insert it for each section.<br />
<br />
Edit: Or you could enumerate the sections using the SectionGet* instructions and a counter.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kolorowy</div><div class="date">4th March 2013, 17:32</div></div><div class="posttext">Yes, that is exactly what I have done as MSG said. To eliminate the process of writing if statements for all sections, I simply loop through sections find if selected and if so get name per Afrow UK suggestions.<br />
<br />
All left to do is meaningful section names as those are displayed. <br />
<br />
<br />
  StrCpy $SELECTED<br />
  StrCpy $R0 ${FirstSectionName} ;Index 0<br />
<br />
  IntOp $R1 $R0 + 40 ;number of all sections<br />
<br />
  Find_Sec_Loop:<br />
    ; check if flag set<br />
    SectionGetFlags $R0 $SELECTED ;Start at $R0 = first section = 0<br />
    SectionGetText $R0 $SecName ;Gets section name<br />
    IntOp $SELECTED $SELECTED&amp; ${SF_SELECTED} <br />
    IntCmp $SELECTED ${SF_SELECTED} SecSelected SecNotSelected 0 ; <br />
    SecSelected:<br />
      StrCpy $SummaryText &quot;$SummaryText    $SecName $\r$\n&quot;<br />
    SecNotSelected: ;Do nothing<br />
    IntOp $R0 $R0 + 1<br />
    IntCmpU $R0 $R1 Find_Sec_Loop_End ;0 = 1 leave loop once it hits 40<br />
  Goto Find_Sec_Loop<br />
  Find_Sec_Loop_End: ;Finish</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>