<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problems building NSIS on linux, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problems building NSIS on linux NSIS Discussion" />
	
	<title> Problems building NSIS on linux [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problems building NSIS on linux</div>
<hr />
<div class="pda"><a href="t-191930.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=191930">Problems building NSIS on linux</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">elFarto</div><div class="date">30th August 2004, 21:49</div></div><div class="posttext">Hi<br />
<br />
I have a linux mingw cross compiler setup, but I am having some problems when I try to build NSIS.<br />
<br />
Does anyone have any ideas on how to fix this?<br />
<br />
Thanks &amp; Regards<br />
elFarto<br />
<br />
[root@thor Source]$ make<br />
make -C exehead<br />
make[1]: Entering directory `/tmp/NSIS/Source/exehead'<br />
mkdir Release-zlib Release-bzip2 Release-lzma<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB bgbg.c -o Release-zlib/bgbg.o<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB exec.c -o Release-zlib/exec.o<br />
exec.c: In function `ExecuteEntry':<br />
exec.c:700: warning: dereferencing type-punned pointer will break strict-aliasing rules<br />
exec.c:982: warning: dereferencing type-punned pointer will break strict-aliasing rules<br />
exec.c:987: warning: dereferencing type-punned pointer will break strict-aliasing rules<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB fileform.c -o Release-zlib/fileform.o<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB Main.c -o Release-zlib/Main.o<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB Ui.c -o Release-zlib/Ui.o<br />
Ui.c: In function `DialogProc':<br />
Ui.c:543: warning: dereferencing type-punned pointer will break strict-aliasing rules<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB util.c -o Release-zlib/util.o<br />
i386-mingw32-gcc -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB ../crc32.c -o Release-zlib/crc32.o<br />
i386-mingw32-windres --input-format rc --output-format coff -o Release-zlib/resource.res -i resource.rc<br />
i386-mingw32-gcc -x c -c -DEXEHEAD -DWIN32_LEAN_AND_MEAN -DZEXPORT=__stdcall -DLZMACALL=__fastcall -Wall -Os -DNSIS_COMPRESS_USE_ZLIB ../zlib/INFBLOCK.C -o Release-zlib/INFBLOCK.o<br />
echo &quot;SECTIONS&quot; &gt; sections_script<br />
echo &quot;{&quot; &gt;&gt; sections_script<br />
echo &quot;  .text : { *(.text) }&quot; &gt;&gt; sections_script<br />
echo &quot;  .data : { *(.data) }&quot; &gt;&gt; sections_script<br />
echo &quot;  .rdata : { *(.rdata) }&quot; &gt;&gt; sections_script<br />
echo &quot;  .bss : { *(.bss) }&quot; &gt;&gt; sections_script<br />
echo &quot;  .idata : { *(.idata) }&quot; &gt;&gt; sections_script<br />
echo &quot;  .ndata BLOCK(__section_alignment__) : { [ .ndata ] }&quot; &gt;&gt; sections_script<br />
echo &quot;  .rsrc : { *(.rsrc) }&quot; &gt;&gt; sections_script<br />
echo &quot;}&quot; &gt;&gt; sections_script<br />
i386-mingw32-gcc -Wall -Os -DNSIS_COMPRESS_USE_ZLIB -s -mwindows -nostdlib -nostartfiles --enable-stdcall-fixup <br />
-Wl,-Bdynamic -Wl,--file-alignment,512 -Wl,--exclude-libs,msvcrt.a -Wl,-e,_WinMain@16 -Wl,sections_script -Wl,-Map,Release-zlib/exehead_zlib.map <br />
-o Release-zlib/exehead_zlib.exe Release-zlib/bgbg.o Release-zlib/exec.o Release-zlib/fileform.o Release-zlib/Main.o <br />
Release-zlib/Ui.o Release-zlib/util.o Release-zlib/crc32.o Release-zlib/resource.res Release-zlib/INFBLOCK.o <br />
-lole32 -lgdi32 -lversion -luuid -lcomctl32 -lkernel32 -luser32 -lshell32 -ladvapi32<br />
Release-zlib/exec.o(.text+0x183):exec.c: undefined reference to `memcpy'<br />
Release-zlib/Ui.o(.text+0x1ec2):Ui.c: undefined reference to `memcpy'<br />
make[1]: *** [Release-zlib/exehead_zlib.exe] Error 1<br />
make[1]: Leaving directory `/tmp/NSIS/Source/exehead'<br />
make: *** [exehead] Error 2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">31st August 2004, 19:46</div></div><div class="posttext">Are you using gcc-3.4? If so, use an earlier version for now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elFarto</div><div class="date">31st August 2004, 21:40</div></div><div class="posttext">Yep, that was it, I was using 3.4.0, and I reverted to 3.3.4, and it built perfectly.<br />
<br />
Thanks<br />
elFarto</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th September 2004, 19:05</div></div><div class="posttext">Workaround added in latest CVS version.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>