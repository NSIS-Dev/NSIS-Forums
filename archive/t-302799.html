<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" .ini page issue....., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  .ini page issue..... NSIS Discussion" />
	
	<title> .ini page issue..... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  .ini page issue.....</div>
<hr />
<div class="pda"><a href="t-302799.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302799">.ini page issue.....</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">parag_NSIS</div><div class="date">5th February 2009, 06:48</div></div><div class="posttext">Hi,<br />
<br />
In one of my (InstallOptions) .ini page, the last two fields (Label and DirRequest) are comming in different background color than the other fields. <br />
<br />
I have not applied any new formatting to those two fields (Label and DirRequest).<br />
<br />
Why those two fields are comming in different background color?<br />
<br />
BTW, I am using the following code to make them similar with the other fields but the code is not working....<br />
<br />
Page custom in_DirectoryListing_Pre in_DirectoryListing_show in_DirectoryListing_leave<br />
<br />
<br />
Function in_DirectoryListing_show<br />
                 ;MessageBox MB_OK &quot;In Show.........&quot;<br />
                 FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
                 GetDlgItem $0 $0 0x50482 ;DirRequest Control Id<br />
                 SetCtlColors $0 000000 3D66AB<br />
                 <br />
                 FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
                 GetDlgItem $0 $0 0xB0448 ;DirRequest Control Id<br />
                 SetCtlColors $0 000000 3D66AB<br />
FunctionEnd<br />
<br />
Am I missing something?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">5th February 2009, 07:31</div></div><div class="posttext">are you using a visual theme/skin in your windows installation that - for some reason - doesn't affect those controls, perhaps?<br />
also, this seems suspect...<br />
<br />
GetDlgItem $0 $0 0x50482 ;DirRequest Control Id<br />
GetDlgItem $0 $0 0xB0448 ;DirRequest Control Id<br />
<br />
The first has dialog item ID 328834, and the next is 721992?  You  have nearly 400,000 items in your dialog? o_O  I think you might have been using the HWND values from a specific run?<br />
<br />
If you are using installoptions, then the controls on your dialog start numbering their dialog item ID at 1200 for the first control, then move on to 1201 for the 2nd, 1202 = 3, etc.<br />
<br />
Alternatively, you can get the HWND (which changes every time the dialog is created), from the INI file:<br />
'ReadINIStr $R1 $PLUGINSDIR\test.ini &quot;Field 1&quot; &quot;HWND&quot;', and use that directly (no need for GetDlgItem) in your SetCtlColors call.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parag_NSIS</div><div class="date">5th February 2009, 08:48</div></div><div class="posttext">Hi,<br />
<br />
No I am not using any external theme/skin. I am using the Ultra Modern UI.<br />
<br />
BTW, Where can I use this code, pre function? or show function?<br />
<br />
ReadINIStr $R1 $PLUGINSDIR\test.ini &quot;Field 1&quot; &quot;HWND&quot;<br />
<br />
Is there a show function available for CustomPage like the inbuild pages of NSIS?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">5th February 2009, 10:12</div></div><div class="posttext">you would use that code -after- you initialize the dialog.<br />
<br />
Can't say I have any experience with UMUI itself, but I suspect that's why the background color doesn't match.<br />
<br />
Once you've got the correct HWNDs, try setting the background color to 'transparent' before specifying the color directly.  If that works, then you don't have to worry about any background color changes in the future, should you choose to use a different UMUI background color.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th February 2009, 12:25</div></div><div class="posttext">You do realise that Page Custom doesn't have a pre function; only show and leave. You are showing your custom page in its leave function.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>