<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" installer window loosing focus, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  installer window loosing focus NSIS Discussion" />
	
	<title> installer window loosing focus [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  installer window loosing focus</div>
<hr />
<div class="pda"><a href="t-309064.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=309064">installer window loosing focus</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 09:59</div></div><div class="posttext">using custom page leave function seems to make the installer window loose focus while its processing a task. Is there something Iâ€™m doing wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">30th July 2009, 11:06</div></div><div class="posttext">processing task = running external program?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 11:24</div></div><div class="posttext">I'm running a number of batch sripts and installs in the leave function. Im also using the leave to post HTML data.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2009, 12:13</div></div><div class="posttext">Running batches using ExecWait or what?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 13:27</div></div><div class="posttext">a mixture of:<br />
nsExec::Exec <br />
exewait <br />
and some pluggins:<br />
<br />
inetc::post<br />
ebanner<br />
<br />
the idea was to check some credentials with the post then run scripts with the output from the post. This intern modifies the packages and then runs them. while playing some images and showing progress all in a custom page.<br />
<br />
Simple?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2009, 13:28</div></div><div class="posttext">Leave function isn't the place to do this stuff. Can't you do it during install?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 13:33</div></div><div class="posttext">I have moved most of the process this morning into the install section of MUI but I still have the problem with the user signup and serial activation. It currently requires the user to input details then it send them in a post via web services for validation checks. Do I need to run this in a single function and add a submit button to the page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 13:35</div></div><div class="posttext">page custom serial serialleave<br />
<br />
<br />
Function serial<br />
<br />
        nsDialogs::Create 1044<br />
	Pop $Dialog<br />
        ${If} $Dialog == error<br />
	Abort<br />
       <br />
        ${EndIF}<br />
        GetDlgItem $R0 $HWNDPARENT 1<br />
        EnableWindow $R0 0<br />
        <br />
        ${NSD_CreateText} 37 230 50 20 $Serial1<br />
	Pop $Text5<br />
	${NSD_CreateText} 127 230 50 20 $Serial2<br />
	Pop $Text6<br />
	${NSD_CreateText} 217 230 50 20 $Serial3<br />
	Pop $Text7<br />
	${NSD_CreateText} 307 230 50 20 $Serial4<br />
	Pop $Text8<br />
	${NSD_SetFocus} $Text5 <br />
	<br />
<br />
	${NSD_SetTextLimit} $Text5 4<br />
        ${NSD_SetTextLimit} $Text6 4<br />
	${NSD_SetTextLimit} $Text7 4<br />
	${NSD_SetTextLimit} $Text8 4<br />
<br />
	<br />
	${NSD_OnChange} $text8 enableNext<br />
<br />
        ${NSD_CreateBitmap} 0u 0u 100% 100% &quot;&quot;<br />
	Pop $Image<br />
	${NSD_SetImage} $Image $PLUGINSDIR\page2 $ImageHandle<br />
        nsDialogs::Show<br />
        ${NSD_FreeImage} $ImageHandle<br />
        nsDialogs::Show<br />
<br />
<br />
<br />
FunctionEnd<br />
<br />
Function SerialLeave<br />
<br />
         GetDlgItem $R0 $HWNDPARENT 1<br />
         EnableWindow $R0 0<br />
<br />
         ${NSD_GetText} $Text5 $Serial1<br />
         ${NSD_GetText} $Text6 $Serial2<br />
         ${NSD_GetText} $Text7 $Serial3<br />
         ${NSD_GetText} $Text8 $Serial4<br />
<br />
         inetc::post &quot;ProtectorSerialKey=$Serial1$Serial2$Serial3$Serial4&quot; /SILENT /HEADER &quot;Content-Type:application/x-www-form-urlencoded&quot; \<br />
         &quot;hostX.X.X.X&quot; &quot;$TEMP\post_reply.txt&quot; <br />
<br />
         Push &quot;$TEMP\post_reply.txt&quot;<br />
         push &quot;Serial Key registered&quot;<br />
         Call FileSearch<br />
         Pop $0<br />
         ${if} $0 = 1<br />
         #MessageBox MB_OK|MB_ICONINFORMATION &quot;Serial Key registered OK&quot;<br />
         call enableNEXT<br />
         ${else}<br />
         Push &quot;$TEMP\post_reply.txt&quot;<br />
         Push &quot;Serial Key not recognised&quot;<br />
         Call FileSearch<br />
         Pop $0<br />
         ${if} $0 = 1<br />
         MessageBox MB_OK|MB_ICONINFORMATION &quot;Serial Key not recognised&quot; <br />
         abort<br />
              ${else}<br />
              Push &quot;$TEMP\post_reply.txt&quot;<br />
              Push &quot;Serial Key has already been registered&quot;<br />
              Call FileSearch<br />
              Pop $0<br />
              ${if} $0 = 1<br />
                    MessageBox MB_OK|MB_ICONINFORMATION &quot;Serial key already registered&quot;<br />
                    abort<br />
              ${else}<br />
                    MessageBox MB_OK|MB_ICONINFORMATION &quot;An unknown error has occured please contact your Service provider&quot;<br />
                    abort<br />
              ${endif}<br />
<br />
        ${endif}<br />
${endif}<br />
${NSD_FreeImage} $ImageHandle<br />
<br />
<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2009, 14:39</div></div><div class="posttext">You just have to show your serial page before installing.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 14:50</div></div><div class="posttext">not sure what you mean. <br />
<br />
I run the serial function, wait for the results then a seperate signup function then install. I need the results of the serial function to complete the signup. this means I can't just place the posts in the install section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2009, 15:55</div></div><div class="posttext">What you have now is fine. Send the web request in your page's leave function. Everything else can be done in a section.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 15:56</div></div><div class="posttext">Its still loosing focus in the leave function which makes it look a bit strange?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2009, 17:28</div></div><div class="posttext">You mean the installer window no longer has focus or some of your serial box fields when Abort is called?<br />
<br />
NSIS has a BringToFront instruction. To set focus on the text fields you can use NSD_SetFocus.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dfranklin72</div><div class="date">30th July 2009, 17:29</div></div><div class="posttext">its the installer window.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>