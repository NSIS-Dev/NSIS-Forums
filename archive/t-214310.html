<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Timer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Timer NSIS Discussion" />
	
	<title> Timer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Timer</div>
<hr />
<div class="pda"><a href="t-214310.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214310">Timer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">27th April 2005, 09:56</div></div><div class="posttext">How can I do this:<br />
1. Create timer (state: 0ms)<br />
2. (do some operations)<br />
3. Get elapsed time since timer start (state e.g.: 1050ms)<br />
4. Kill timer</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">27th April 2005, 10:49</div></div><div class="posttext">Could you use some API call (I don't know what OS you're using) to get the current time, store it in a var, then when you want to compare, get the (new) current time, and subtract?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">27th April 2005, 11:05</div></div><div class="posttext">RobGrant, I know that I can use API calls but<br />
-kernel32::GetLocalTime returns always zero in milliseconds variable<br />
-I found only user32::SetTimer and user32::KillTimer and no command for get state</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kike_velez</div><div class="date">27th April 2005, 13:14</div></div><div class="posttext">Hello <br />
<br />
 MSDN information <br />
<br />
GetTickCount<br />
<br />
The GetTickCount function retrieves the number of milliseconds that have elapsed since the system was started. It is limited to the resolution of the system timer. To obtain the system timer resolution, use the GetSystemTimeAdjustment function.<br />
<br />
DWORD GetTickCount(void);<br />
<br />
Nsis solution <br />
<br />
<br />
Section &quot;timer&quot; timer<br />
System::Alloc 400<br />
pop $2<br />
System::Call 'kernel32::GetTickCount()i .r0'<br />
System::Free $2<br />
MessageBox MB_OK &quot;Inicial Time  $0 in ms&quot;<br />
<br />
System::Alloc 400<br />
pop $2<br />
System::Call 'kernel32::GetTickCount()i .r1'<br />
System::Free $2<br />
IntOp $1 $1 - $0<br />
MessageBox MB_OK &quot;Time before start  $1 in ms&quot;<br />
<br />
SectionEnd<br />
<br />
<br />
Best Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">27th April 2005, 13:36</div></div><div class="posttext">This is exactly what I want. Thanks, kike_velez!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th April 2005, 13:46</div></div><div class="posttext">Ah cool, this is something that we've always needed and hopefully it actually works (the old solutions on the archive, including mine didn't work very well).<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>