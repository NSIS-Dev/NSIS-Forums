<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Conditional standard pages, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Conditional standard pages NSIS Discussion" />
	
	<title> Conditional standard pages [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Conditional standard pages</div>
<hr />
<div class="pda"><a href="t-305875.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=305875">Conditional standard pages</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">30th April 2009, 13:50</div></div><div class="posttext">Hello,<br />
<br />
In my installer, I've got standard pages, and custom pages called like that:<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
Page Custom ChoixTypeInstall ChoixTypeInstallLeave &quot; : Choix type installation&quot;<br />
Page Custom ChoixParamsInstall ChoixParamsInstallLeave &quot; : ParamÃ¨tres d'installation de DOMEVIH&quot;<br />
Page Custom PgInstall PgInstallLeave &quot; : ParamÃ¨tres d'installation de PostgreSQL&quot;<br />
Page Custom SavePassword SavePasswordLeave &quot; : Connexion au serveur de base de donnÃ©es&quot;<br />
Page Custom ChoixInstallBase ChoixInstallBaseLeave &quot; : Choix installation base&quot;<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_STARTMENU Application $StartMenuGroup<br />
!insertmacro MUI_PAGE_INSTFILES<br />
Page Custom ChoixRep ChoixRepLeave &quot; : SÃ©lection rÃ©pertoires&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
I wanted the standard page &quot;!insertmacro MUI_PAGE_DIRECTORY&quot; to be skipped&quot; in certain conditions coming from my custom pages...<br />
<br />
How can I do ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">30th April 2009, 15:34</div></div><div class="posttext">call abort in the pre callback function to skip a page, read the MUI docs to find the name of the define to use</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">30th April 2009, 15:38</div></div><div class="posttext">Whet do you mean using the terms &quot;the define to use&quot; ?<br />
<br />
Thanks a lot</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">30th April 2009, 16:52</div></div><div class="posttext">In fact, I want the page !insertmacro MUI_PAGE_DIRECTORY not being displayed at each time...<br />
<br />
And I didn't find anything on the doc...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">30th April 2009, 17:06</div></div><div class="posttext">If you tried to RTFM, you would find MUI_PAGE_CUSTOMFUNCTION_PRE<br />
<br />
so:<br />
function maybeAbort<br />
;maybe call abort here<br />
functionEnd<br />
<br />
...<br />
page custom foo bar<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_DIRECTORY</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">30th April 2009, 18:03</div></div><div class="posttext">I had found that example but didn't succes in trying it...<br />
<br />
I tried like that with your example (I need to skip these three files when the consition is not ok):<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_STARTMENU Application $StartMenuGroup<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
Page Custom MyPageFunction &quot;&quot;<br />
<br />
function maybeAbort<br />
    ${If} $Condition == &quot;false&quot;<br />
    Abort<br />
    ${EndIf}<br />
functionEnd<br />
<br />
<br />
The problem is that when the condition is not OK, my three pages are hidden, but I've got an empty page displayed before my last page (MyPageFunction).<br />
<br />
If I'm not using the INST_FILES page, that empty page is not displayed and I've got directly my last page :<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE maybeAbort<br />
!insertmacro MUI_PAGE_STARTMENU Application $StartMenuGroup<br />
<br />
Page Custom MyPageFunction &quot;&quot;<br />
<br />
<br />
<br />
Maybe the INST_FILES page has a different behaviour than others... ? <br />
<br />
Thanks a lot for your help !!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th April 2009, 19:16</div></div><div class="posttext">What do you mean by an empty page exactly? Are you not creating a page with nsDialogs or InstallOptions in it yet?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">30th April 2009, 23:28</div></div><div class="posttext">sylvinhio, I think the INSTFILES page might act differently. I think you probably would not want to skip it because that page is the page that executes the Sections in your script and normally does the installation.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">4th May 2009, 09:12</div></div><div class="posttext">Hi,<br />
<br />
Thanks for your answers.<br />
Effectively, I want to skip the INSTFILES page too, because in one case in my setup, I needn't to copy files, and treatments are done in previous pages (upadte config files, install framework, ...)<br />
<br />
So I don't want the INSTFILES page to be displayed.<br />
And my problem, as I told you previously, is that when trying to skip the INSTFILES, I've got an empty page displayed, with only PREV, NEXT and CANCEL buttons displayed.<br />
<br />
Thanks for helping me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sylvinhio</div><div class="date">20th May 2009, 09:43</div></div><div class="posttext">Hello,<br />
<br />
Is there any soluce to skip that empty page ?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justme123</div><div class="date">21st December 2009, 16:52</div></div><div class="posttext">i'm also seeing this behaviour. Anyone got an Idea how to solve it?<br />
<br />
I tried to use Abort in MUI_PAGE_CUSTOMFUNCTION_SHOW instead of PRE but it didn't work (kinda expected).<br />
<br />
Actually i don't want to skip the page completely but change the (sub)title labels if a condition is met(a variable tells if the installer is in 'install' or 'upgrade' mode). So i thought using 2 Versions of the page but showing only one would do the trick (this works for the finish page):<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE skipIfUpgrade<br />
!define MUI_INSTFILESPAGE_FINISHHEADER_TEXT &quot;Installation done&quot;<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE showIfUpgrade<br />
!define MUI_INSTFILESPAGE_FINISHHEADER_TEXT &quot;Upgrade done&quot;<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
<br />
but for instfiles it creates an additional empty page that requires a 'next' cklick to close it.<br />
<br />
using conditional defines in the pre funtion of a single instfiles page didn't work for me either :/</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>