<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem executing file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem executing file NSIS Discussion" />
	
	<title> Problem executing file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem executing file</div>
<hr />
<div class="pda"><a href="t-298267.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=298267">Problem executing file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">donakalz</div><div class="date">5th October 2008, 16:42</div></div><div class="posttext">Hi..<br />
<br />
I am creating a new installer.<br />
<br />
Currently I have the following directory structure: The root folder in which I am working is C:\test. Inside test, I have the following folders:<br />
<br />
files<br />
-&gt;regfolder<br />
   -&gt;register.bat<br />
installer<br />
-&gt;installer.nsi<br />
<br />
Inside files folder, I have a file called register.bat (in the regfolder subfolder) which has got some commands which I intend to run during installation.<br />
installer folder contains my nsi script and after compilation, this is where the exe is created.<br />
<br />
After installation, only the files folder and its contents are stored in the program files directory of my program.<br />
<br />
The thing is that...during installation, I want to run the register.bat. I have tried with no success. I am using the following command:<br />
<br />
ExecWait '&quot;.\files\regfolder\register.bat&quot; doRegister $0 $0 $1 $2' $0<br />
<br />
The script bat file doesnt get executed. I just get a cmd shell for less than a second and it disappears. Please could someone tell me what I am doing wrong?<br />
<br />
Thanks a lot in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">5th October 2008, 19:11</div></div><div class="posttext">I don't think ExecWait works when calling the batch file directly.  You'll probably want to call the command interpreter directly with the batch file as a parameter using either the nsExec plugin or ExecWait.  (Unless you needed input from the user, I'd suggest using nsExec to hide the command window.  Something like this should work (borrowed from a post by AfrowUK in this thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=294867)):<br />
<br />
ReadEnvStr $R0 COMSPEC<br />
nsExec::Exec `&quot;$R0&quot; /C &quot;.\files\regfolder\register.bat&quot;`<br />
Pop $R0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">donakalz</div><div class="date">6th October 2008, 17:22</div></div><div class="posttext">Hi comperio...<br />
<br />
<br />
thanks for your response. Now that part of my code works. However, I have some other questions....<br />
<br />
<br />
How do I test for empty text fields when the next button is clicked on a custom dialog?<br />
<br />
How can I set up the onClick function for the BrowseButton Element of a DirRequest?<br />
<br />
How do I make the text fields remember input? For example, from dialog 1, I type some stuff into the fields on that dialog and click next. When I click prev, I want to be able to see the information that was typed there previously.<br />
<br />
<br />
Thanks a lot in advance for your answers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">6th October 2008, 23:29</div></div><div class="posttext">How do I test for empty text fields when the next button is clicked on a custom dialog?<br />
Use use a page callback function (also referred to as the page's leave function).  <br />
Example:; assume $0 is value of text<br />
${If} &quot;$0&quot; == &quot;&quot;<br />
   MessageBox MB_OK &quot;Blank not allowed&quot;<br />
   abort<br />
${EndIf}<br />
<br />
<br />
How can I set up the onClick function for the BrowseButton Element of a DirRequest?  I'm not sure, but probably you'd have to modify the source to allow a callback.  My suggestion would be to create your own custom page rather than try to use the stock directory page.  That way, you'll have full control over everything.<br />
<br />
How do I make the text fields remember input? For example, from dialog 1, I type some stuff into the fields on that dialog and click next. When I click prev, I want to be able to see the information that was typed there previously.Assuming you are using nsDialogs, you'd store the value in a variable and then use that to set the defaults at page load.  (See the &quot;memory&quot; section of the nsDialogs readme, which is included with NSIS.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>