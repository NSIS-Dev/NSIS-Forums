<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" function for showing diff translated strings, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  function for showing diff translated strings NSIS Discussion" />
	
	<title> function for showing diff translated strings [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  function for showing diff translated strings</div>
<hr />
<div class="pda"><a href="t-245310.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245310">function for showing diff translated strings</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">3rd May 2006, 16:40</div></div><div class="posttext">Hi all,<br />
<br />
I have in .onInit to do different checks and in case smth fails I have to show MsgBoxes in the specific language. For this I do the ${Switch} $LANGUAGE trick. So I have several times the same code, for instance:<br />
<br />
<br />
    ${Switch} $LANGUAGE<br />
      ${Case} ${LANG_ENGLISH}<br />
        StrCpy $msg &quot;${OLDER_VERSION_ALREADY_INSTALLED_ENGLISH}&quot;<br />
        ${Break}<br />
      ${Case} ${LANG_FRENCH}<br />
        StrCpy $msg &quot;${OLDER_VERSION_ALREADY_INSTALLED_FRENCH}&quot;<br />
        ${Break}<br />
      ${Default} ; if we forget one language, show the english msgbox<br />
        StrCpy $msg &quot;${OLDER_VERSION_ALREADY_INSTALLED_ENGLISH}&quot;<br />
        ${Break}<br />
    ${EndSwitch}<br />
<br />
<br />
and<br />
<br />
<br />
    ${Switch} $LANGUAGE<br />
      ${Case} ${LANG_ENGLISH}<br />
        StrCpy $msg &quot;${NEED_TO_BE_ADMIN_LANG_ENGLISH}&quot;<br />
        ${Break}<br />
      ${Case} ${LANG_FRENCH}<br />
        StrCpy $msg &quot;${NEED_TO_BE_ADMIN_LANG_FRENCH}&quot;<br />
        ${Break}<br />
      ${Default} ; if we forget one language, show the english msgbox<br />
        StrCpy $msg &quot;${NEED_TO_BE_ADMIN_LANG_ENGLISH}&quot;<br />
        ${Break}<br />
    ${EndSwitch}<br />
<br />
<br />
and so on.<br />
<br />
Those chunks of code look the same with the exception of the define which are in the above sample: OLDER_VERSION_ALREADY_INSTALLED_ENGLISH, OLDER_VERSION_ALREADY_INSTALLED_FRENCH, NEED_TO_BE_ADMIN_LANG_ENGLISH, NEED_TO_BE_ADMIN_LANG_FRENCH<br />
<br />
Is there a way to create smth like a function and as a parameter to pass for instance OLDER_VERSION_ALREADY_INSTALLED_ or NEED_TO_BE_ADMIN_LANG_ so that I don't have the same code written over and over again? (and in this way for a new language I just have to add one line in the function not to change in each piece of code)<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th May 2006, 09:06</div></div><div class="posttext">!macro OLDER_VERSION_ALREADY_INSTALLED Language<br />
 ${Case} ${LANG_${Language}}<br />
  StrCpy $msg &quot;${OLDER_VERSION_ALREADY_INSTALLED_${Language}}&quot;<br />
  ${Break}<br />
!macroend<br />
<br />
!macro NEED_TO_BE_ADMIN Language<br />
 ${Case} ${LANG_${Language}}<br />
  StrCpy $msg &quot;${NEED_TO_BE_ADMIN_LANG_${Language}}&quot;<br />
  ${Break}<br />
!macroend<br />
<br />
...<br />
${Switch} $LANGUAGE<br />
  !insertmacro OLDER_VERSION_ALREADY_INSTALLED ENGLISH<br />
  !insertmacro OLDER_VERSION_ALREADY_INSTALLED FRENCH<br />
 ${Default} ; if we forget one language, show the english msgbox<br />
  StrCpy $msg &quot;${OLDER_VERSION_ALREADY_INSTALLED_ENGLISH}&quot;<br />
  ${Break}<br />
 ${EndSwitch}<br />
...<br />
<br />
 ${Switch} $LANGUAGE<br />
  !insertmacro NEED_TO_BE_ADMIN ENGLISH<br />
  !insertmacro NEED_TO_BE_ADMIN FRENCH<br />
 ${Default} ; if we forget one language, show the english msgbox<br />
  StrCpy $msg &quot;${NEED_TO_BE_ADMIN_LANG_ENGLISH}&quot;<br />
  ${Break}<br />
 ${EndSwitch}<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">4th May 2006, 12:27</div></div><div class="posttext">Hi Stu,<br />
<br />
Thanks for your reply. Still in your sample whenever I add a new language I have to add a line in _each_ chunk of code, in your sample in the last 2 chunks like:<br />
<br />
<br />
!insertmacro OLDER_VERSION_ALREADY_INSTALLED NEW_LANGUAGE<br />
<br />
<br />
respectivelly<br />
<br />
<br />
!insertmacro NEED_TO_BE_ADMIN NEW_LANGUAGE<br />
<br />
<br />
which is what I would like to avoid.<br />
The algorithm I was thinking about would look smth like:<br />
<br />
<br />
function call_MsgBox(a_define)<br />
    ${Switch} $LANGUAGE<br />
      ${Case} ${LANG_ENGLISH}<br />
        StrCpy $msg &quot;${a_define_ENGLISH}&quot;<br />
        ${Break}<br />
      ${Case} ${LANG_FRENCH}<br />
        StrCpy $msg &quot;${a_define_FRENCH}&quot;<br />
        ${Break}<br />
      ${Default} ; if we forget one language, show the english msgbox<br />
        StrCpy $msg &quot;${a_define_ENGLISH}&quot;<br />
        ${Break}<br />
    ${EndSwitch}<br />
    MessageBox MB_ICONEXCLAMATION|MB_OK &quot;$msg&quot;<br />
end function<br />
<br />
<br />
and when calling the function would be smth like:<br />
<br />
<br />
call_MsgBox(OLDER_VERSION_ALREADY_INSTALLED)<br />
<br />
<br />
and<br />
<br />
<br />
call_MsgBox(NEED_TO_BE_ADMIN)<br />
<br />
<br />
<br />
which means whenever a new language is added the _only_ place I would have to change is in the first chunk of code by just adding:<br />
<br />
<br />
  ${Case} ${LANG_NEW_LANGUAGE}<br />
    StrCpy $msg &quot;${{a_define_NEW_LANGUAGE}&quot;<br />
    ${Break}<br />
<br />
<br />
Is smth like this possible?<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">5th May 2006, 19:42</div></div><div class="posttext">I didn't get any answer to this one. Does this mean this is not possible? or does this mean that no NSIS-guru has yet read this post? or maybe I wasn't clear enough with my question?<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2006, 20:14</div></div><div class="posttext">There is no simple way.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th May 2006, 12:12</div></div><div class="posttext">You can't do it with a function, but you can create a macro from your switch.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">8th May 2006, 10:56</div></div><div class="posttext">Thx guys for your answer.<br />
<br />
&gt; but you can create a macro from your switch.<br />
Does this mean I would have to change only in one place when a new language is added? Or the solution you are talking about is similar with Stu's suggestion? (which btw is nice, but I am trying to get rid of the fact that I have to change in several similar places when I add a new language)<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th May 2006, 20:21</div></div><div class="posttext">Yes, one place. It's a combination of Afrow's macros and your pseudo-function. Instead of your function, you'll have:!macro lang_define var name<br />
    ${Switch} $LANGUAGE<br />
      ${Case} ${LANG_ENGLISH}<br />
        StrCpy ${var} &quot;${${name}_ENGLISH}&quot;<br />
        ${Break}<br />
      ${Case} ${LANG_FRENCH}<br />
        StrCpy ${var} &quot;${${name}_FRENCH}&quot;<br />
        ${Break}<br />
      ${Default} ; if we forget one language, show the english msgbox<br />
        StrCpy ${var} &quot;${${name}_ENGLISH}&quot;<br />
        ${Break}<br />
    ${EndSwitch}<br />
!macroendThen you can use it like this:!insertmacro lang_define $0 somelangdefine<br />
MessageBox MB_OK $0You only have to a few lines for each new language, all in one place.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">9th May 2006, 14:11</div></div><div class="posttext">Yes, it's exactly what I wanted and works just fine :) Thx a lot!<br />
<br />
Viv</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>