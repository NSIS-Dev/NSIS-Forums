<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Compile Time Commands, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Compile Time Commands NSIS Discussion" />
	
	<title> Compile Time Commands [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Compile Time Commands</div>
<hr />
<div class="pda"><a href="t-157467.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=157467">Compile Time Commands</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th November 2003, 21:39</div></div><div class="posttext">How could i do this(@ Compile time)?<br />
<br />
<br />
!define SetupMode &quot;1&quot;<br />
...<br />
!if ${SetupMode}==&quot;1&quot;<br />
!insertmacro DoSomething<br />
!else<br />
!insertmacro DoTheOtherThing<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2003, 21:44</div></div><div class="posttext">If you can get to http://nsis.sf.net/ then you can find the answer in the FAQ on that page. If it's lagging for you too see StrCmp, StrCpy and IntCmp in the manual. Some examples in the Examples directory use those, so you can look at them for usage example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th November 2003, 22:04</div></div><div class="posttext">Isnt StrCmp, StrCpy and IntCmp RunTime only?<br />
<br />
What I want is to !include a file only if a define is defined to a certain(sp?) value...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2003, 22:11</div></div><div class="posttext">Oh sorry, didn't read that right... I have no ideas for that at the moment, but something with !system would probably do the trick.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">24th November 2003, 22:20</div></div><div class="posttext">Here's a trick I've used:!define SetupMode &quot;1&quot;<br />
...<br />
!define SetupModeIs${SetupMode}<br />
!ifdef SetupModeIs1<br />
!insertmacro DoSomething<br />
!else<br />
!insertmacro DoTheOtherThing<br />
!endif<br />
!undef SetupModeIs${SetupMode}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th November 2003, 22:26</div></div><div class="posttext">From Help File: <br />
<br />
!system: This command will execute 'command' using a call to system()<br />
<br />
i dont know what 'system()' is and the only example i could find was in makensis.nsi:<br />
<br />
!system '&quot;${NSISDIR}\Bin\InstallCVSData.exe&quot; nooverwrite'<br />
!echo &quot;Compiling CVS Data Setup...&quot;<br />
!system '&quot;${NSISDIR}\makensis.exe&quot; /V1 cvsdata.nsi' = 0<br />
 <br />
dont know what those lines do but it looks to me like they call an external program... <br />
<br />
what I need is a C preprocessor like command...<br />
<br />
from a normal StdAfx.h file:<br />
<br />
#if _MSC_VER &gt; 1000  &lt;--This is what I need<br />
#pragma once<br />
#endif // _MSC_VER &gt; 1000<br />
<br />
<br />
I'm guessing that this is currently not possible, but could support be added 4 this in the future??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th November 2003, 15:42</div></div><div class="posttext">It's currently not possible, but if you give more details we might be able to help you with other solutions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">26th November 2003, 21:56</div></div><div class="posttext">i guess i have to hack nsis myself then, script.cpp would be the right place to do it right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th November 2003, 22:00</div></div><div class="posttext">Yes, but why not use eccle's method?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">26th November 2003, 22:08</div></div><div class="posttext">because i want to use stuff like !if ${somedefine} &gt; 4...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th November 2003, 22:14</div></div><div class="posttext">OK, good luck. Submit a patch if you get it working. If you don't you can use !system to call anotehr program that will do this, like perl for example. You can get the program to write a NSH file which you would !include and use.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">26th November 2003, 22:27</div></div><div class="posttext">what im trying do is create a script file that makes it real easy to create a setup...<br />
<br />
this is all i need to create the setup for one of my apps:<br />
<br />
!define APP_NAME &quot;YourApp&quot;<br />
!define APP_COMPANY &quot;Nullsoft Fan =)&quot;<br />
!define APPFILE_MAIN_SRCTREEPATH &quot;..\Source\ReleaseU\${APPFILE_MAIN_BINNAME}&quot;<br />
<br />
!include &quot;nsw.nsh&quot;<br />
<br />
<br />
This script will:<br />
-Install ${APPFILE_MAIN_SRCTREEPATH} in $PROGRAMFILES\${APP_NAME} <br />
-Create a uninstaller and register this in the registry.<br />
-Show The License page<br />
-Copy the license file to $InstDir<br />
-AutoCreate Shortcut for the main program file in: (Can be disabled on the componentpage (Classic &amp; Modern GUI))<br />
 --The Desktop<br />
 --The QuickLaunch area</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th November 2003, 23:50</div></div><div class="posttext">A worthy goal indeed :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">azerger</div><div class="date">22nd September 2004, 20:23</div></div><div class="posttext">Joost or kichik,<br />
Has this feature ever been added to nsis?  It was posted over a year ago and I am trying to do the same thing.<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;postid=1477361#post1477361<br />
<br />
Its seems straight forward to add just a binary compare equals to the compile time !ifdef  APP_COMP == &quot;sdfsd&quot; to nsis.  Can this be done?<br />
Was it done?<br />
Thanks,<br />
art</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>