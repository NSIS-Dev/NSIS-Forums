<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Stack plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Stack plugin NSIS Discussion" />
	
	<title> Stack plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Stack plugin</div>
<hr />
<div class="pda"><a href="t-222762.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=222762">Stack plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">28th July 2005, 23:44</div></div><div class="posttext">Last few days I'm wrote header on &quot;C&quot; with linear (one direction) and bilinear (two directions) stack functions. I has thought if make NSIS plugin that probably will be useful for somebody.<br />
<br />
Functions for working with NSIS stack (linear):<br />
ns_push_front (same as Push)<br />
ns_pop_front (same as Pop)<br />
ns_push_back<br />
ns_stack_read<br />
ns_stack_write<br />
ns_stack_size<br />
ns_stack_free<br />
<br />
Functions for working with private stack (bilinear):<br />
dll_push_front<br />
dll_pop_front<br />
dll_push_back<br />
dll_pop_back<br />
dll_stack_read<br />
dll_stack_write<br />
dll_stack_insert<br />
dll_stack_delete<br />
dll_stack_size<br />
dll_stack_free</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">29th July 2005, 04:24</div></div><div class="posttext">Cool :up:<br />
I can share with you my NOT crt function of lstrcmp since once I also use it :tinfoil: <br />
<br />
int _stdcall _strcmp(char* s1, char* s2)<br />
{<br />
	for (; *s1 &amp;&amp; *s2; ++s1, ++s2)<br />
	{<br />
		if ( *s1 != *s2 )<br />
		{<br />
			break;<br />
		}<br />
	}<br />
	return *s1 - *s2;<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">29th July 2005, 09:56</div></div><div class="posttext">If you talk about lstrcmp, probably the correct variant will be:<br />
<br />
<br />
int __stdcall _strcmp(char *s1, char *s2)<br />
{<br />
	for (;(*s1) &amp;&amp; (*s2); ++s1, ++s2)<br />
		if (*s1 &lt; *s2)<br />
			return -1;<br />
		else if (*s1 &gt; *s2)<br />
			return 1;<br />
<br />
	if ((!*s1) &amp;&amp; (!*s2))<br />
		return 0;<br />
	else if (!*s1)<br />
		return -1;<br />
	else<br />
		return 1;<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th July 2005, 11:51</div></div><div class="posttext">lstrcmp is not part of CRT. You're confusing it with strcmp. lstrcmp is a Windows API, defined in kernel32.dll. There's no need to write a replacement for it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">10th August 2005, 08:49</div></div><div class="posttext">Changes:<br />
<br />
- New: Supports multi-stack (StackFunc.h).<br />
- Fixed: xitoa string missing terminating null character when number is &quot;0&quot; (ConvFunc.h).<br />
<br />
Functions for working with NSIS stack (linear):<br />
- ns_stack_free-&gt;ns_stack_clear (function now not uses pop_frontL)<br />
<br />
Functions for working with private stack (bilinear):<br />
- Changed: stack_insert now can insert element to the top and first places<br />
- dll_stack_free-&gt;dll_stack_clear (function now not uses pop_front)<br />
- New: stack_exchange<br />
- New: stack_delete_range<br />
- New: stack_move<br />
- New: stack_move_range<br />
- New: stack_sort<br />
- New: stack_reverse_range</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">1st September 2005, 12:55</div></div><div class="posttext">Changes:<br />
<br />
- New: stack::dll_push_sort (Pushs element to the stack and sorts alphabetically in ascending or descending)<br />
<br />
- Added example how to sort lines in a text file<br />
<br />
- Supports custom structures (StackFunc.h)<br />
<br />
<br />
&quot;Stack&quot; plugin v1.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">2nd March 2006, 19:39</div></div><div class="posttext">1. New:<br />
dll_push_sort_int<br />
dll_sort_all_int<br />
Debug<br />
<br />
2. Renamed:<br />
ns_stack_read-&gt;ns_read<br />
ns_stack_write-&gt;ns_write<br />
ns_stack_size-&gt;ns_size<br />
ns_stack_clear-&gt;ns_clear<br />
dll_stack_read-&gt;dll_read<br />
dll_stack_write-&gt;dll_write<br />
dll_stack_insert-&gt;dll_insert<br />
dll_stack_exchange-&gt;dll_exchange<br />
dll_stack_reverse_range-&gt;dll_reverse_range<br />
dll_stack_delete-&gt;dll_delete<br />
dll_stack_delete_range-&gt;dll_delete_range<br />
dll_stack_move-&gt;dll_move<br />
dll_stack_move_range-&gt;dll_move_range<br />
dll_stack_sort-&gt;dll_sort_all<br />
dll_stack_size-&gt;dll_size<br />
dll_stack_clear-&gt;dll_clear<br />
<br />
Update from previous versions:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Insert line in script:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!include &quot;Stack.nsh&quot;<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Replace:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;stack::ns_push_front -&gt; ${stack::ns_push_front} ...<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Replace:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.r0 -&gt; $0, .r1 -&gt; $1 ...  .R0 -&gt; $R0, .R1 -&gt; $R1 ...<br />
<br />
<br />
&quot;Stack&quot; plugin v1.4</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">3rd March 2006, 15:17</div></div><div class="posttext">nice one.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">16th May 2006, 08:53</div></div><div class="posttext">Updated: &quot;StackFunc.h&quot; to v1.7<br />
Added: now possible dynamically create private stacks, all private stack functions<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;now require stack handle in first parameter<br />
Removed: dll_push_front, dll_pop_front, dll_push_back, dll_pop_back, because<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;dll_insert and dll_delete can be used<br />
<br />
&quot;Stack&quot; plugin v1.5</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th May 2006, 00:49</div></div><div class="posttext">Updated: &quot;StackFunc.h&quot; to v1.8<br />
<br />
&quot;Stack&quot; plugin v1.6</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">27th November 2009, 17:23</div></div><div class="posttext">Updated: &quot;StackFunc.h&quot; to v3.0<br />
<br />
&quot;Stack&quot; plugin v1.7</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Marshall7a</div><div class="date">4th January 2011, 14:13</div></div><div class="posttext">The documentation doesn't mention that you have to clear a private stack before you destroy it, otherwise memory is leaked for the elements on the stack!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Marshallx7</div><div class="date">20th June 2013, 10:10</div></div><div class="posttext">There appears to be a memory leak in the private stacks. I just created a test script that inserts 10,000 elements, then deletes them.<br />
Memory usage before create: 1,380KB<br />
Memory usage after create: 1,392KB<br />
Memory usage after 10,000 inserts: 12,432KB<br />
Memory usage after 10,000 deletes: 2,712KB<br />
Destroyed but not unloaded: 2,588 KB<br />
<br />
I tried the same thing with inserting and deleting 1,000,000 elements (this took a long time to run) and the memory usage at the end was over 190 MB !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">16th September 2013, 16:59</div></div><div class="posttext">Added: full unicode support on NSIS Unicode.<br />
Fixed: ${stack::dll_destroy} didn't erase the stack before destroying.<br />
<br />
Stack plugin v1.8 (http://nsis.sourceforge.net/Stack_plug-in)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aerDNA</div><div class="date">17th September 2013, 19:02</div></div><div class="posttext">I've found Stack precious in several scripts, thank you. Nice to see it up to date.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">18th September 2013, 19:39</div></div><div class="posttext">Added: ${stack::ns_pop_back} - removes the element from the end of the NSIS stack and puts it in the variable.<br />
Added: ${stack::ns_insert} - inserts new element at specified index of the NSIS stack.<br />
Added: ${stack::ns_delete} - finds the NSIS element by index, puts it in the variable and removes it.<br />
<br />
Stack plugin v2.0 (http://nsis.sourceforge.net/Stack_plug-in)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>