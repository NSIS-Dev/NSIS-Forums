<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Registry Read Problems, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Registry Read Problems NSIS Discussion" />
	
	<title> Registry Read Problems [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Registry Read Problems</div>
<hr />
<div class="pda"><a href="t-345102.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=345102">Registry Read Problems</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">puzzled</div><div class="date">24th May 2012, 00:20</div></div><div class="posttext">I'm setting a registry string during the NSIS installer process. I'm able to retrieve the registry string without a problem when I am in the install phase.<br />
<br />
ReadRegStr $1 HKLM &quot;${REGKEY}&quot; &quot;Start Menu Folder&quot;<br />
<br />
MessageBox MB_OK &quot;Registry Start Menu folder: $1&quot;<br />
<br />
I attempt the same registry read in the uninstaller and it returns an error and an empty string.<br />
<br />
    ClearErrors<br />
    ReadRegStr $StartMenuFolder HKLM &quot;${REGKEY}&quot; &quot;Start Menu Folder&quot;<br />
    IfErrors Errors<br />
    MessageBox MB_OK &quot;reg read startmenuFolder = $StartMenuFolder&quot;<br />
    Goto MoveOn<br />
    <br />
    Errors:<br />
       MessageBox MB_OK &quot;reg read ERROR 1 = **$StartMenuFolder**&quot;<br />
<br />
I've also attempted to get this value out of:<br />
<br />
!insertmacro MUI_STARTMENU_GETFOLDER Application $StartMenuFolder<br />
<br />
This only returns the default value that was set. The user inputed value does not get returned.<br />
<br />
Any suggestions?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th May 2012, 00:27</div></div><div class="posttext">Any chance you are trying to read from the Wow6432Node key when it's not under there (i.e. you have used SetRegView 64 in the installer but not the uninstaller).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">puzzled</div><div class="date">24th May 2012, 03:41</div></div><div class="posttext">Wow, that was exactly it. I thought that if I was setting it in the installer then it would carry over to the uninstaller. Thanks so much for the help. I've been trying to figure out this issue all day! Much appreciated, especially the quick response.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th May 2012, 04:22</div></div><div class="posttext">SetRegView is a command and not an attribute/property (And most attributes are not shared with the uninstaller anyway)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>