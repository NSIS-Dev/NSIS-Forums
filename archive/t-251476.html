<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" IP control, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  IP control NSIS Discussion" />
	
	<title> IP control [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  IP control</div>
<hr />
<div class="pda"><a href="t-251476.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251476">IP control</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">19th July 2006, 11:17</div></div><div class="posttext">Does anybody have handy IP control which allows to input only valid IP thus making unnecessary complicated checking?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">24th July 2006, 17:16</div></div><div class="posttext">It's a pity that nobody answered. Here is my solution which is just silly checking of a string entered in text box:<br />
<br />
<br />
Var IpToCheck<br />
Var IpSectionsCount ; every IP consists of 4 sections<br />
Function CheckIsIpValid<br />
  Pop $IpToCheck ; trimmed ip<br />
<br />
  StrCpy $IpSectionsCount 0<br />
  ${Do}<br />
    Push &quot;.&quot; ; divider char<br />
    Push $IpToCheck<br />
<br />
    Call SplitFirstStrPart<br />
    Pop $1 ; first IP number<br />
    Pop $IpToCheck ; the rest of IP string<br />
<br />
    Push $1 ; verify if numeric<br />
    Call IsNumeric<br />
    Pop $0<br />
<br />
    ${if} $0 == 0<br />
      goto invalid_ip<br />
    ${else}<br />
      ${if} $1 &lt; 0<br />
        goto invalid_ip<br />
      ${endif}<br />
      ${if} $1 &gt; 255 <br />
        goto invalid_ip<br />
      ${endif}<br />
    ${endif}<br />
    IntOp $IpSectionsCount $IpSectionsCount + 1<br />
  ${LoopUntil} $IpToCheck == &quot;&quot;<br />
<br />
  ${if} $IpSectionsCount == 4<br />
    Push 1 ; OK, valid IP<br />
  ${else}<br />
    goto invalid_ip<br />
  ${endif}<br />
  Return<br />
<br />
invalid_ip:<br />
  Push 0 ; Invalid IP<br />
FunctionEnd<br />
<br />
<br />
The code does not verify a lot of things like that first section is not 0 but suits for most of situations.<br />
SplitFirstStrPart - <br />
http://nsis.sourceforge.net/Get_first_part_and_rest_of_string<br />
IsNumeric - http://forums.winamp.com/showthread.php?s=&amp;threadid=145481&amp;highlight=check+string+is+number</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">25th July 2006, 02:13</div></div><div class="posttext">InstallOptionsEX (https://sourceforge.net/projects/nsis-ioex)  has custom page function for IP addresses.  It may work for what you need.<br />
<br />
Also, Check IP (http://nsis.sourceforge.net/CheckIP_function) might be an alternative way to check an IP address.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">25th July 2006, 08:29</div></div><div class="posttext">I've tried CheckIP but it is a bit obscure. It seems that is really checks ip (not just ip number correctness) which is sometimes not needed in an installer.<br />
I will try to see InstallOptionsEx, thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">26th July 2006, 23:40</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=252007<br />
<br />
Heh, I thought I was the only one looking for this. I haven't found a workable solution yet. For some reason, InstallOptionsEx has some trouble displaying my InstallOptions pages. (And it doesn't help that the project is abandoned :(). <br />
<br />
Anyway, I know I posted a bit later than you but I figured the screenshot in mine might help.<br />
<br />
Joe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">29th July 2006, 01:40</div></div><div class="posttext">Well... I recommend using the function to verify the IP. The control is buggy, just like everything else in the plug-in.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>