<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS works with LangString incorrectly, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS works with LangString incorrectly NSIS Discussion" />
	
	<title> NSIS works with LangString incorrectly [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS works with LangString incorrectly</div>
<hr />
<div class="pda"><a href="t-347326.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=347326">NSIS works with LangString incorrectly</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SirHally</div><div class="date">24th August 2012, 11:30</div></div><div class="posttext">I have an installer, it builds automatically (on TFS) by using NSIS command line features<br />
<br />
    &quot;..\..\NSIS\makensis.exe&quot;  /DBUILD_NUMBER=28311 /DPRODUCT_LANGUAGE=English &quot;MTService_setup.nsi&quot;<br />
<br />
The installer must use only one language, which specified in PRODUCT_LANGUAGE parameter. I've done it in the following way<br />
<br />
    !insertmacro MUI_LANGUAGE &quot;${PRODUCT_LANGUAGE}&quot;<br />
<br />
When I build installer in such way, the common language of the interface is correct. But it uses default system language for LangString. So, if default system language is not English, it shows LangString on another language in the English installer.<br />
<br />
I've tried to change script to avoid command line parameters (for test purposes)<br />
<br />
    !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
It doesn't work too.<br />
<br />
I've tried to change script to <br />
<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Russian&quot;<br />
<br />
Function .onInit<br />
<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
FunctionEnd<br />
<br />
<br />
It works, but, of course, it shows language selection dialog. I want to use specific ${PRODUCT_LANGUAGE} without any dialog.<br />
<br />
So, how can I fix it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th August 2012, 11:48</div></div><div class="posttext">Try http://nsis.sourceforge.net/Language_Detection_From_Windows_UI_Language.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SirHally</div><div class="date">24th August 2012, 12:26</div></div><div class="posttext">Try http://nsis.sourceforge.net/Language...ws_UI_Language.<br />
<br />
Unfortunatelly, it doesn't work for me. There wasn't any changes, LangString use system default language.<br />
<br />
http://i.stack.imgur.com/N6f1s.png<br />
<br />
I've tried to add <br />
<br />
<br />
  StrCpy $LANGUAGE ${LANG_ENGLISH}<br />
<br />
<br />
in .onInit function, but it doesn't work too</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th August 2012, 13:55</div></div><div class="posttext">Something is wrong with your script. Half of those texts are LangStrings. The rest are set via the old language file format (nlf) but are still selected on the value of $LANGUAGE. Is it just the section descriptions? Where have you put your language strings for those? Are they after !insertmacro MUI_LANGUAGE ...?<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>