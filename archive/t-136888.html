<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" file association, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  file association NSIS Discussion" />
	
	<title> file association [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  file association</div>
<hr />
<div class="pda"><a href="t-136888.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136888">file association</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">28th May 2003, 10:50</div></div><div class="posttext">hi!<br />
<br />
actualy i have 4 questions:<br />
<br />
1. i need to make multiple file associations. does anyone know how? and how do i UNassociate at uninstall?<br />
<br />
2. how to make if win9x is installed o install file1 and if win2000, winxp is installed, to install file2?<br />
<br />
3. can i make (i did not tried yet this one !) a custom page to display something like this with a chekbox : &quot;associate .123 files with file1.exe&quot;?<br />
<br />
4. i am a bit confused. i have 6 sections at install. but at uninstall there is only one section. right?<br />
if the user selects only 2 sections at install, NSIS knows that were selected only 2 sections? because if not, that means it deletes a lot of files that are not mine. (sorry for bad english). or if i am wrong, please tell me how to correct this.<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 13:28</div></div><div class="posttext">1. Examples\makensis.nsi associates file extensions, you can use it as an example.<br />
<br />
2. Use GetWindowsVersion (http://nsis.sourceforge.net/Docs/AppendixB.html#B.5).<br />
<br />
3. Use InstallOptions to display custom made pages. See Examples\Modern UI\InstallOptions.nsi if using the MUI or Contrib\InstallOptions\test.nsi if not.<br />
<br />
4. The uninstaller doesn't remember the sections choosen in the installer. If you need to know exactly which sections where choosen you can write the selection (using GetSectionFlags to find out if they were selected) to an INI file or the registry and then read those values at uninstall time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">29th May 2003, 06:54</div></div><div class="posttext">question 1 is ok. i associated the extensions.<br />
question 2 - working now.<br />
question 3 is ok. i creted my custom page. the user can associate file extensions with a program.<br />
question 4 - not yet.<br />
<br />
but i have to combine q1 with q3. how can i do this: the custom page to be displayed only if a section from the installer has been selected ? and how to associate the file extensions only if the checkbox from the custom page has been selected ?<br />
<br />
<br />
<br />
another question. can anyone tell me was this lines mean (from the .ini file required for the custom page):<br />
Left=0 - space from the left side. right ? <br />
Right=-1 - ???<br />
Top=0 - ???<br />
Bottom=10 - ???<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 10:12</div></div><div class="posttext">To skip a page according to section selection see:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=126317&amp;highlight=custom+page+section<br />
<br />
To read the values entered by the user in the custom page see one of the InstallOptions examples.<br />
<br />
Left, Right, Top and Bottom define a rectangle in which the control will be created. Left and Right values are distances from the left side of the page, Top and Bottom are the distances from the top side of the page. If the value is negative it's the distance from the oppsite side. For example, Right is -1 in your example so it's distance from the left side of the page will be PageWidth - 1.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">29th May 2003, 16:01</div></div><div class="posttext">hello again!<br />
<br />
i changed my code as is &quot;Contrib\InstallOptions\test.nsi&quot; and the file extension association does not work. i can't see what is wrong, so i attach the function. help! please !<br />
<br />
PS: 1. i opened regedit.exe and look for &quot;.xvid&quot; extension. it does not exist in registry<br />
2. the state of the checkbox is &quot;1&quot; (default in .ini file)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 16:10</div></div><div class="posttext">I can tell much without the whole code but I bet it just doesn't find Tasks.ini. Specify a full path as in the example - $PLUGINSDIR\test.ini (assuming you've extracted it to the $PLUGINSDIR). I also think it'll be a better idea to put this code in a section so it will only register the file type if the user actually got to installation step.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">29th May 2003, 16:22</div></div><div class="posttext">thanks very much for super fast response, kichik !<br />
<br />
i changed the code as you said and it works. but what does $PLUGINSDIR mean ?<br />
let me rephrase : where would be my file extracted ? in a temp directory ?<br />
<br />
about the question with the uninstall section, can you point me to an example ?<br />
<br />
thanks again.!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 17:49</div></div><div class="posttext">$PLUGINSDIR is a special directory for plug-in used by NSIS and other temporary files used by the installer. It's directory name is random but it's always in the temporary directory.<br />
<br />
Hmm... Example of what? Of writing the section selection into an INI file? If that's the case all you need is:<br />
<br />
SectionGetFlags ${sectionDefinedName} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
WriteIniStr myFile.ini uninstallSection section1 $0<br />
<br />
for every section you have. It will write 1 if the section is selected and 0 if it's not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 17:49</div></div><div class="posttext">You can also write a value to the ini file in the end of each section. It will only be written if that section executed which means it was selected.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">2nd June 2003, 11:33</div></div><div class="posttext">hello again, is tried with this example<br />
<br />
Originally posted by kichik <br />
SectionGetFlags ${sectionDefinedName} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
WriteIniStr myFile.ini uninstallSection section1 $0<br />
<br />
for every section you have. It will write 1 if the section is selected and 0 if it's not.  <br />
<br />
i have no errors and no warnings, but &quot;1&quot; is not written to file. the path is correct. i put the code in &quot;Section -post&quot; of the installer.<br />
how do the ini file should look like ?<br />
mine is like this:<br />
<br />
[uninstallSection]<br />
<br />
section1=0<br />
section2=0<br />
section3=0<br />
section4=0<br />
section5=0<br />
section6=0<br />
<br />
sorry for all the (probably) stupid questions.<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd June 2003, 13:38</div></div><div class="posttext">Do all of the defines (${sectionDefinedName}) have the right value or are they all zero?<br />
<br />
Don't worry about asking, ask until you understand.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">2nd June 2003, 13:51</div></div><div class="posttext">the script is already attached in<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=136925 <br />
<br />
i attach the ini file to.<br />
<br />
nothing changes in it. everything remains with &quot;=0&quot;.<br />
<br />
thanks for helping.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd June 2003, 13:57</div></div><div class="posttext">You should not extract a default INI file but let the code create it for you. You must inlcude the code above for every section in the script, not just the first section. If it still doesn't work try giving a full path to WriteIniStr ($INSTDIR\install.ini).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">o_owd</div><div class="date">2nd June 2003, 14:59</div></div><div class="posttext">ok. it works. the uninstall part too. it's ok. thanks very much.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>