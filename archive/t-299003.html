<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" CheckedListBox in NSIS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  CheckedListBox in NSIS NSIS Discussion" />
	
	<title> CheckedListBox in NSIS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  CheckedListBox in NSIS</div>
<hr />
<div class="pda"><a href="t-299003.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=299003">CheckedListBox in NSIS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">22nd October 2008, 13:23</div></div><div class="posttext">Hello, guys. I wanted to place a CheckedListBox on one of the installer pages. Since there is no macro for this purpose, I tried to use the Windows API. I made the following command:<br />
<br />
System::Call &quot;user32::CreateWindow(i WC_LISTVIEW, t 'blub', i WS_CHILD | i LVS_REPORT | i LVS_EDITLABELS | i WS_VISIBLE, i 0, i 0, i 50, i 15, i $HWNDPARENT, i (HMENU)ID_LISTVIEW, i hInst, *i 0) i .s&quot;<br />
<br />
That corresponds to http://msdn.microsoft.com/en-us/library/ms632679(VS.85).aspx specification of the CreateWindow command. But the control element does not appear on my installer page:(( What could be wrong???<br />
<br />
BR<br />
Ewgenij</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd October 2008, 14:09</div></div><div class="posttext">WC_LISTVIEW is not the correct class name. I'm also not sure if you can OR things like you do, ex &quot;i 1 | i 2&quot;, I think you need &quot;i 1|2&quot;. Also, all the WS_ and LVS_ bits must be defines ${WS_VISIBLE} with the correct value, not just the text you get from MSDN. Once you get passed this you will find out that listview's use structs to add/edit items, so its just not a simple SendMessage call to add items</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">22nd October 2008, 14:54</div></div><div class="posttext">Hmm, OK. Can I create a listview with the <br />
<br />
nsDialogs::CreateControl /NOUNLOAD class style extended_style x y width height text<br />
<br />
command? But which values should I enter for class, style and extended_style?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">22nd October 2008, 16:25</div></div><div class="posttext">To be honest, I just want to create a list box with checking option, which I can fill then dependent on the actual program configuration. What is the best way to achieve that?<br />
<br />
BR<br />
Ewgenij</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd October 2008, 22:01</div></div><div class="posttext">listview class is SysListView32, for the styles, you can normally just google &quot;define NAME_OF_STYLE&quot;, or look it up in a .h file if you have the windows sdk installed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">27th October 2008, 09:12</div></div><div class="posttext">Hello! So I inserted the following command into my page create function:<br />
<br />
nsDialogs::CreateControl /NOUNLOAD 'SysListView32' 0 0x00000004 100u 50u 50u 20u &quot;blub&quot;<br />
<br />
But nothing appears on the page :cry: What is wrong??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">27th October 2008, 09:19</div></div><div class="posttext">I also tried<br />
<br />
nsDialogs::CreateControl /NOUNLOAD 'SysListView32'  0x08000000L  0x00000004 100u 50u 50u 20u &quot;blub&quot;<br />
<br />
0x08000000L - WS_VISIBLE<br />
0x00000004 -  LVS_EX_CHECKBOXES <br />
<br />
But it did not work too.<br />
:igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NounouRs</div><div class="date">27th October 2008, 15:06</div></div><div class="posttext">Why making so complicated just to add some check boxes ?<br />
Is there no macro defined in the basic macros of NSIS ?<br />
It's not rare to need that, so what...<br />
<br />
I've found this help (that doesn't help me because I don't fully understand) that uses only MUI macro and ini files...<br />
http://nsis.sourceforge.net/Custom_Finish_Page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">27th October 2008, 15:49</div></div><div class="posttext">Ewgenijkkg: you at least need WS_CHILD+WS_VISIABLE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">27th October 2008, 16:10</div></div><div class="posttext">nsDialogs::CreateControl /NOUNLOAD 'SysListView32' ${DEFAULT_STYLES}  100u 50u 50u 20u &quot;blub&quot;<br />
works fine not sure how your gonna handle all the sysListviews messages thou</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">28th October 2008, 16:00</div></div><div class="posttext">Originally posted by NounouRs <br />
Why making so complicated just to add some check boxes ?<br />
Is there no macro defined in the basic macros of NSIS ? <br />
<br />
No, there isn't:(( At least, I did not find any.<br />
<br />
I've found this help (that doesn't help me because I don't fully understand) that uses only MUI macro and ini files <br />
<br />
And where do you see checkboxes there?<br />
<br />
BR<br />
Ewgenij</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">28th October 2008, 16:01</div></div><div class="posttext">Originally posted by ZmAn3 <br />
nsDialogs::CreateControl /NOUNLOAD 'SysListView32' ${DEFAULT_STYLES}  100u 50u 50u 20u &quot;blub&quot;<br />
works fine not sure how your gonna handle all the sysListviews messages thou  <br />
<br />
Sorry, I have never programmed with Win32-API before. So I do not know a lot about it. You think, it will be impossible to implement the checkedlistbox in NSIs? And to work with it?<br />
<br />
BR<br />
Ewgenij</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">28th October 2008, 16:12</div></div><div class="posttext">well id use the embedded lists plugin or if you always had a set number of checkboxes id totally just fake it you could make a white static control in nsdialogs with a border and place check boxes in there or if you look at nsdialogs.nsh he has macros for creating listboxes not sure what youd have to do to support check boxes in those thou</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NounouRs</div><div class="date">28th October 2008, 16:14</div></div><div class="posttext">An exctract of my code, using Modern UI :<br />
<br />
!define MUI_FINISHPAGE_SHOWREADME<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT $R7 #&quot;Read Pdf&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME_FUNCTION openPdf<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
This add a new checkbox at the last page (MUI_PAGE_FINISH) where there is already 1 checkbox for &quot;launching application&quot;<br />
<br />
it is the simpliest I've found</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">28th October 2008, 16:21</div></div><div class="posttext">Originally posted by ZmAn3 <br />
well id use the embedded lists plugin or if you always had a set number of checkboxes id totally just fake it you could make a white static control in nsdialogs with a border and place check boxes in there or if you look at nsdialogs.nsh he has macros for creating listboxes not sure what youd have to do to support check boxes in those thou  <br />
<br />
I wish I had a static number of the items, but the number is dynamic :( What lists-plugin do you mean?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">28th October 2008, 17:13</div></div><div class="posttext">http://nsis.sourceforge.net/EmbeddedLists_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">29th October 2008, 00:11</div></div><div class="posttext">i have another question for you do they get to select more then one item?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">29th October 2008, 11:08</div></div><div class="posttext">Originally posted by ZmAn3 <br />
http://nsis.sourceforge.net/EmbeddedLists_plug-in  <br />
<br />
Hey!!! That is exactly what I need! Thanks a lot. So, I do not need the whole Win32 API stuff. However, the plugin is based on Ini-Files, and you read in the new releases of NSIS that this approach is deprecated. Therefore it is better to use nsDialogs-Plugin instead of InstallOptions. So why is there no macro for checkedlistboxes?<br />
<br />
BR<br />
Ewgenij</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ewgenijkkg</div><div class="date">29th October 2008, 11:09</div></div><div class="posttext">Originally posted by ZmAn3 <br />
i have another question for you do they get to select more then one item?  <br />
<br />
Yes, in the most cases:)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>