<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsSCM::Install fails on XP, works on 2008, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsSCM::Install fails on XP, works on 2008 NSIS Discussion" />
	
	<title> nsSCM::Install fails on XP, works on 2008 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsSCM::Install fails on XP, works on 2008</div>
<hr />
<div class="pda"><a href="t-314264.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314264">nsSCM::Install fails on XP, works on 2008</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">30th October 2009, 19:36</div></div><div class="posttext">Using the latest build of nsSCM posted in the wiki (http://nsis.sourceforge.net/NsSCM_plug-in), it seems there is a bug regarding the Install function.  I'm doing all of my testing in VMware OS's, so I can revert back to a 'clean slate' each time I do a test. <br />
<br />
On 2003 x86, nsSCM::Install fails. On 2008 x64, nsSCM::Install is successful.  It's the exact same code/installer too. Any idea on a fix?<br />
<br />
<br />
DetailPrint &quot;Installing ${MYSERVICE_DISPLAYNAME} service...&quot;<br />
nsSCM::Install /NOUNLOAD &quot;${MYSERVICE_SERVICENAME}&quot; &quot;${MYSERVICE_DISPLAYNAME}&quot; 16 2 &quot;$\&quot;$INSTDIR\bin\abcpollerd.exe$\&quot; -c $\&quot;$INSTDIR\etc\abcpollerd.conf$\&quot;&quot; &quot;&quot; &quot;&quot; &quot;$U_USER&quot; &quot;$U_PASS&quot;<br />
Pop $0<br />
DetailPrint &quot;Service install exited with: $0&quot;        <br />
${If} $0 != &quot;error&quot;   <br />
    ; set the failure / restart actions<br />
    WriteRegBin HKLM &quot;SYSTEM\CurrentControlSet\Services\${MYSERVICE_SERVICENAME}&quot; &quot;FailureActions&quot; 00000000000000000000000003000000530065000100000060EA00000100000060EA00000100000060EA0000   <br />
    WriteRegStr HKLM &quot;SYSTEM\CurrentControlSet\Services\${MYSERVICE_SERVICENAME}&quot; &quot;Description&quot; &quot;${MYSERVICE_DESCR}&quot;<br />
    nsSCM::Start &quot;${MYSERVICE_SERVICENAME}&quot;<br />
${EndIF}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">30th October 2009, 20:05</div></div><div class="posttext">Throughout my installer, I've got &quot;!ifndef COMPILE&quot; around all of the FILE commnds. This way I can quickly test a code change with out having to compress all of the nested installers.<br />
<br />
I've noticed that when I do have COMPILE defined, nsSCM::Install doesn't work on 2003. Yet, when I do not have COMPILE define (thus, just installer code made), nsSCM::Install works on 2003.  Additionally, the above block of code is near the last section of the giant installer (approx line 860). Is it possible there is some sort of stack / calling issue with nsSCM?<br />
<br />
Is</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">31st October 2009, 00:23</div></div><div class="posttext">Well forget it.  I've migrated over to the SimpleSC plugin (http://nsis.sourceforge.net/NSIS_Simple_Service_Plugin) instead which works flawlessly on both Windows 2003 and 2008.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>