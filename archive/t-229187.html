<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" to un. or not to un. that is the question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  to un. or not to un. that is the question NSIS Discussion" />
	
	<title> to un. or not to un. that is the question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  to un. or not to un. that is the question</div>
<hr />
<div class="pda"><a href="t-229187.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=229187">to un. or not to un. that is the question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">hgerstung</div><div class="date">24th October 2005, 08:50</div></div><div class="posttext">Hi!<br />
<br />
This un./not un. stuff is driving me crazy. I am trying to use the Path manipulation code from http://nsis.sourceforge.net/wiki/Path_Manipulation in order to add my programs binary directory to the path under Windows NT/2000/XP in a persistent way but cannot get rid of those x&amp;%!rgh-compiler errors related to the &quot;un.&quot; prefix stuff. I would like to use the macro &quot;RemoveFromPath&quot; while in installer and uninstaller mode. It compiles but at the end says:<br />
<br />
Processed 1 file, writing output:<br />
Adding plug-ins initializing function... Done!<br />
Error: resolving uninstall function &quot;un.RemoveFromPath&quot; in uninstall section &quot;Uninstall&quot; (0)<br />
Note: uninstall functions must begin with &quot;un.&quot;, and install functions must not<br />
Error - aborting creation process<br />
<br />
which reminds me of some odd problems I had in the past with this stuff (un.) ... I just would like to propose that in a future version we could simply be allowed to call un. functions while in installer mode. If I explicitely say &quot;un.xxxx&quot; the compiler could be nice and just pretends that I know that I want that function and not the installer-version of it...<br />
<br />
But back to this problem:<br />
Any hints what I can check?<br />
I put the two functions AddToPath and RemoveFromPath as well as the rest of that utility stuff shown on the Wiki page in an include file &quot;path.nsh&quot; and include this at the beginning of my installer. What the heck can I do to let the pig fly?<br />
<br />
Thanks in advance,<br />
kind regards,<br />
Heiko</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">24th October 2005, 09:12</div></div><div class="posttext">NSIS compiller cannot share source code functions, all the code with 'un' prefix belongs to uninstaller only and will be used for uninstaller.exe compilation. The rest of code will be used in installer.exe build. May be in 3.0 version of NSIS ;) To use macro in both programs, use macro as the only content of 2 functions:<br />
Function A2P<br />
!macro AddToPath<br />
FunctionEnd<br />
<br />
Function un.A2P<br />
!macro AddToPath<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">25th October 2005, 14:10</div></div><div class="posttext">You could call the macro directly (!insertmacro XYZ). This may increase your code size if you do this more than once (inst+uninst) in your code. But I prefer this so I don't have the hassle with &quot;un.&quot; for helper functions.<br />
<br />
One more point: If you have a function you do not use, you get a warning. Macros don't cause warnings. So I think &quot;pure macro&quot; is a very practical solution for little helpers.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>