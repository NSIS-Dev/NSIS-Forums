<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Does NSIS install three or more software with one Install EXE?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Does NSIS install three or more software with one Install EXE? NSIS Discussion" />
	
	<title> Does NSIS install three or more software with one Install EXE? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Does NSIS install three or more software with one Install EXE?</div>
<hr />
<div class="pda"><a href="t-126710.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=126710">Does NSIS install three or more software with one Install EXE?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">28th February 2003, 16:55</div></div><div class="posttext">Does anyone know really well about NSIS &quot;super Pimp&quot; i have a tough question about this intresting install software. Could this software do multiple install with one exe? If so How and could it also access other software installers. <br />
<br />
For example: <br />
let say that i would put Apache, mysql, zope in to this package, could i do it. But there are other problems, How can i access those other packages's build in installer?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th February 2003, 19:53</div></div><div class="posttext">Sure... put Sections in your installer for each one of you<br />
product... but...do you wanna installed ALL of them at the same time<br />
or you wanna let the end-user to select one or everything?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th February 2003, 20:55</div></div><div class="posttext">It's very simple and easy to achieve.<br />
<br />
In your nsi script you can add many sections...<br />
<br />
eg.<br />
<br />
Section &quot;Install MyProgram1&quot;<br />
  SetOutPath &quot;$INSTDIR\MyProgram1&quot;<br />
  File &quot;C:\MyProgram1\*.*&quot;<br />
SectionEnd<br />
<br />
This first bit will add a install option for installing 'MyProgram1'<br />
If it is checked, then anything inside the section will run, eg.<br />
SetOutPath (is obvious) will set the path where files will be dumped on the users' PC<br />
$INSTDIR is the variable for the installation path that the user can enter on the NSIS 'Directory' page.<br />
The 'File' cmd will compress the file specified off your PC into the exe, and then will allow it to be extracted to the OutPath.<br />
<br />
You can have as many sections as you wish!<br />
<br />
<br />
NSIS IS THE BEST!<br />
<br />
-Stuart :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">3rd March 2003, 16:19</div></div><div class="posttext">Thank you Stuart, i was looking at the Documentations for the Setoutpath and the file command. that is the least of my worries. <br />
<br />
If i could get more specific help from this community, i would be glad to post my scrips on line to view. there really isn't much examples that i can use to look at. <br />
<br />
My script will be long, may probably a variety of codes.<br />
<br />
this is my first time coding Install scripts. <br />
<br />
<br />
Aschenabachen.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">3rd March 2003, 17:31</div></div><div class="posttext">the only way this installer will work is that i have installed php already on my pc and i lay it right under the c:\ drive. It needs to read all the dirs and files under c:\php and the NSIS installer does something to suck it all up and turn it into a executable file. <br />
<br />
to do this you would need to type in;<br />
makensis install.nsi<br />
under the DOS prompt.<br />
<br />
here is the codes that will read everything from c:\php plus all the dirs/files under php too and put it into the NSIS installer, in this case install.exe<br />
<br />
outfile &quot;install.exe&quot;<br />
<br />
; The stuff to install<br />
Function &quot;php&quot;<br />
   ; Install dir<br />
   ; 	InstallDir &quot;c:\&quot;<br />
   ; Set output path to the installation directory.<br />
	SetOutPath &quot;C:\&quot;<br />
   ; read files from c drive and <br />
   ; loaded in the exe file<br />
	File /r C:\php<br />
FunctionEnd <br />
<br />
i don't know the different between<br />
installdir and $INSTDIR and $OUTDIR.<br />
<br />
Please give me examples.<br />
<br />
i could change my codes to be this way:<br />
<br />
installdir &quot;c:\&quot;<br />
<br />
function &quot;php&quot;<br />
; install dir<br />
;this variable referr back to ;installdir, don't know it will work or not<br />
   setoutpath &quot;$INSTDIR&quot; <br />
   file /r &quot;$INSTDIR&quot;<br />
functionend<br />
 <br />
is this right?<br />
Is there an easier way to do this? <br />
<br />
aschenbachen</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">3rd March 2003, 18:05</div></div><div class="posttext">First you should sections insteed of functions.<br />
<br />
Section &quot;php&quot;<br />
<br />
SetOutPath &quot;C:\PHP&quot;<br />
File /r &quot;C:\PHP\*.*&quot; <br />
SectionEnd <br />
<br />
With these lines all files with subdirectories from C:\PHP will be packed and installed in the Target given by SetOutPath (C:\PHP)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd March 2003, 20:10</div></div><div class="posttext">$OUTDIR is the directory in which files will be extracted. $INSTDIR is the installation directory chosen by the user or, if the directory page doesn't show, by InstallDir or InstallDirRegKey.<br />
<br />
You can't use either in File because File searches for those files on compile time and not on run-time when those are defined. When compiling $INSTDIR doesn't mean a thing to the compiler, it could be anything from C:\php to Z:\MyProgs\WebDev\PHP.<br />
<br />
There are examples in your Examples directory and more in the Archive (http://nsis.sf.net/archive/).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">3rd March 2003, 20:27</div></div><div class="posttext">As promised, Here is part of my script so far.<br />
<br />
thanks everyone for explaining NSIS.<br />
<br />
Nothing special. <br />
<br />
please attach large scripts. attached below<br />
<br />
i am using a control structure to control the flow of the code, Functions are better than Sections b/c i am using a Section to control the flow of things. Functions in C/C++ are faster so...<br />
<br />
i have a big question, Since Mysql comes in a zip file, how to i actually install this application to build in with my script to make one huge installation process? <br />
<br />
my idea is to extract the mysql files in a folder let say c:\mysql, so that the mysql installation procedures will take over the NSIS installation procedures. <br />
<br />
i now need to access the setup.exe, How do i access the setup.exe in NSIS script?<br />
<br />
installing/encorporating Apache in my scripts will my next task.<br />
<br />
asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd March 2003, 20:33</div></div><div class="posttext">To extract files from a ZIP file use the ZipDLL from the archive (http://nsis.sf.net/archive - search for zipdll). To execute programs use Exec, ExecWait, ExecShell, nsExec::Exec, nsExec::ExecToLog, or nsExec::ExecToStack.<br />
<br />
Oh, and sections are faster than functions in this case because you have to call functions from sections.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">4th March 2003, 14:17</div></div><div class="posttext">Section &quot;install&quot;<br />
	call apache<br />
	call mysql<br />
SectionEnd<br />
<br />
;Function &quot;apache&quot;<br />
<br />
	;	this code will suck in the entire install apache application at compile time<br />
	; 	release it to a temp folder and execute the apache install application<br />
	; File &quot;D:\apache\apache_1.3.27-win32-x86-no_src.exe&quot;<br />
	; SetOutPath &quot;c:\temp&quot;<br />
	; ExecWait &quot;c:\temp\apache_1.3.27-win32-x86-no_src.exe&quot;<br />
<br />
	; As far as my concerns i am letting the script compile &quot;without&quot; building in the entire apache applciation<br />
	; inside the exe file, that would be one huge exe file   <br />
	; this should access the install utility from the d: drive, once the user<br />
	; click on the install.exe icon.<br />
	ExecWait &quot;D:\apache\apache_1.3.27-win32-x86-no_src.exe&quot;<br />
<br />
	; dude this Execwait better work, b/c no matter what, you have to use this. <br />
FunctionEnd<br />
<br />
;the last option is to use the classes stuff<br />
;nsExec::Exec, nsExec::ExecToLog, or nsExec::ExecToStack.<br />
;how do you use these?<br />
<br />
;if anyone needs this, this would be the same for mysql<br />
; since i don't trust the extended zip.dll file, and don't know how to<br />
; plugin to the NSIS installer, here it is, same stuff as above<br />
Function &quot;mysql&quot;<br />
	; first, i am unzipping the Mysql package<br />
	; burn it on to a CD with lots of files under d:\mysql<br />
	; then i access the setup.exe application installer<br />
	ExecWait &quot;D:\mysql\setup.exe<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2003, 16:41</div></div><div class="posttext">You don't need nsExec unless the Apache/MySQL isntaller is command line (DOS). I don't recommend assuming the CD-ROM is on drive D:. You better get the first two letters of $EXEDIR using StrCpy $0 $EXEDIR 2.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">4th March 2003, 18:25</div></div><div class="posttext">Hello,<br />
<br />
i tested a few things and they work well.<br />
Unfortunately, i have hard-coded most parts. i can't seem to use the NSIS Variables, each time i tried, it won't compile. <br />
Feel free to change my codes to suit your needs. <br />
<br />
Can i run the installer while switching CDs? i am loading/running everything from CDs. Is it possible to pause that exe file while running?<br />
<br />
i am sad to say that i really don't know how to check for the proper CD-ROM drive in my script if they drive letter is not 'D'. i hardcorded that in the script. <br />
<br />
Asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2003, 18:38</div></div><div class="posttext">i tested a few things and they work well.<br />
Unfortunately, i have hard-coded most parts. i can't seem to use the NSIS Variables, each time i tried, it won't compile. <br />
Feel free to change my codes to suit your needs. <br />
<br />
Can you please give an example of a command that uses a variable that doesn't compile?<br />
<br />
Can i run the installer while switching CDs? i am loading/running everything from CDs. Is it possible to pause that exe file while running?<br />
<br />
I have never tested this but I think it should be OK. All of the code is loaded into memory so the only problem will be with extracting files. If it doesn't work you can always copy your installer to $TEMP.<br />
<br />
i am sad to say that i really don't know how to check for the proper CD-ROM drive in my script if they drive letter is not 'D'. i hardcorded that in the script. <br />
<br />
Well, as I said in the post above:<br />
<br />
&quot;You better get the first two letters of $EXEDIR using StrCpy $0 $EXEDIR 2.&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">4th March 2003, 21:46</div></div><div class="posttext">hello,<br />
The program files variable, windir variable doesn't work.<br />
<br />
<br />
function &quot;suckin&quot;<br />
File &quot;$PROGRAMFILES\apache group\apache\htdocs\*.php&quot;<br />
File &quot;$WINDIR\php.ini&quot;<br />
functionend<br />
<br />
Asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th March 2003, 21:53</div></div><div class="posttext">Does &quot;File&quot; can run inside of a &quot;Function&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">4th March 2003, 22:01</div></div><div class="posttext">Hello,<br />
<br />
My entire coding philosophy are based in functions, everything i do is inside a function. If i write out program files, it works.<br />
ex:<br />
file &quot;C:\program files\apache group\apache\*.*&quot;<br />
<br />
Asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th March 2003, 22:33</div></div><div class="posttext">then why &quot;$WINDIR&quot; doesnÂ´t work? Is the file in that directory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">5th March 2003, 13:26</div></div><div class="posttext">Hello dark boy,<br />
<br />
Did you try to make some codes up and compile any codes, i tried it inside a function, and inside a section, NONE of the variables works. I am sure they won't work outside of any sections and functions. <br />
<br />
That is no problem, As long as typing it all out works then its fine with me. <br />
<br />
its just strenge to me that way that i can't access these variables.<br />
<br />
Asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th March 2003, 15:27</div></div><div class="posttext">It's not the scetion or function's fault. You can't use variables with the File command. The variables are extended at run-time and are depended on the user's machine. NSIS can't tell what $WINDIR will be on the user's machine while adding the files to the installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">5th March 2003, 16:50</div></div><div class="posttext">Hello,<br />
<br />
Is it possible to encorporate third party install with the compiled EXE file that i made? <br />
<br />
So far i tested throughlly with winzip, but the winzip installer took over the process, which is fine,but to make it looks nicer.<br />
<br />
Is there a solution for this task?<br />
<br />
Asch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th March 2003, 17:48</div></div><div class="posttext">Use ExecWait to make NSIS wait for the installer to finish. If you want to make the other installer quite and not disturb see this page:<br />
http://unattended.sourceforge.net/installers.html</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aschenbachen</div><div class="date">5th March 2003, 20:22</div></div><div class="posttext">Hello,<br />
<br />
My final product is finish, very simple. the actual one a little with more same functions over and over again. <br />
<br />
As far as mysql, apache goes, i am installing them from a CD. <br />
d:\mysql\mysql_setup.exe<br />
d:\apache\apache_setUp.exe<br />
<br />
i am calling the exe files from the compiled exe file i made using NSIS.<br />
<br />
i didn't need to encorporate those apache, mysql exe files into one huge installer. <br />
<br />
after using this for three days, this NSIS product is great, a few minors problems. <br />
<br />
have fun changing this script.<br />
<br />
Asch:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th March 2003, 20:32</div></div><div class="posttext">Why are you still using D:? Use:<br />
<br />
Function .onInit<br />
  StrCpy $R9 $EXEDIR 2<br />
FunctionEnd<br />
<br />
# then everywhere there is a D: replace with:<br />
CopyFiles /silent &quot;$R9\dir\file&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>