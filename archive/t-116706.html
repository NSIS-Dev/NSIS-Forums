<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Migration to NSIS2 &amp; MUI - Questions and Suggestions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Migration to NSIS2 &amp; MUI - Questions and Suggestions NSIS Discussion" />
	
	<title> Migration to NSIS2 &amp; MUI - Questions and Suggestions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Migration to NSIS2 &amp; MUI - Questions and Suggestions</div>
<hr />
<div class="pda"><a href="t-116706.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=116706">Migration to NSIS2 &amp; MUI - Questions and Suggestions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">5th December 2002, 08:28</div></div><div class="posttext">Hello,<br />
<br />
I've been following NSIS since 1.2 and now trying to port my installers to the latest NSIS2 with ModernUI which is quite fancy. However, I quickly ran into the following problems and suggestions:<br />
<br />
1. Display an options to install software for one/all users- could this be integrated ie. into the component selection page?<br />
In previous NSIS I've use an .onNextPage to pop up a dialog box to ask. I've tried to implement this in the event for the directory selection page- but the callback function is already defined by MUI, do I need to put my message box into the system.nsh?<br />
<br />
2. If finish page is used, it's no longer possible to verifiy the installation details (bacl button is disabled)- intended or my mistake?<br />
<br />
3. Would it be possible to get a component selection page that does not contain the description pane? If no descriptions are specified, it currently stays empty instead of vanishing.<br />
<br />
4. The Polish.nsh file seems to be missing MUI_TEXT_STARTMENU_WINDOWTITLE.<br />
<br />
5. Not MUI-related: can I still have required sections that *are* displayed, but where the checkmark cannot be removed (as the first section previously was)<br />
<br />
I hope I'm making sense and you guys can shed some light this...<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th December 2002, 10:52</div></div><div class="posttext">1) In b0 there is no callback function that is called after you move from a page and before that page is destroyed. You will have to use an InstallOptions page which will actually look better than a message box IMHO.<br />
<br />
2) The back button is disabled on purpose. If you want the install details to stay until the user click the next button define MUI_FINISHPAGE_NOAUTOCLOSE before you inlude the Modern UI system.nsh. I will make sure it goes into the docs too...<br />
<br />
3) You will have to make your own UI for that. It's actually very easy. Just download Resource Hacker (http://www.users.on.net/johnson/resourcehacker/), open up modern.exe or modern2.exe with it and edit whatever you want. Save as, lets say modern-nodesc.exe and then define MUI_UI as the path to it before you include System.nsh. That one is in the MUI readme.<br />
<br />
4) Our Polish translator hasn't sent a new translation yet... :(<br />
<br />
5) Use SectionIn RO.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">matini</div><div class="date">5th December 2002, 11:08</div></div><div class="posttext">Well, I always keep a copy of the modified Modern2.exe for my <br />
installers that needn't descriptions. Here it is:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">5th December 2002, 14:52</div></div><div class="posttext">Kichik, thank you for the advice. Only one comment for now:<br />
<br />
1) Would be OK, but can this be achived on an existing page (ie. the shortcuts page)? I agree with not using messages boxes (therefore the final page is very good), but then again you don't want to increase the number of unnessesary clicks.<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th December 2002, 15:01</div></div><div class="posttext">For the shortcuts page you will have to write your own Page commands (define MUI_CUSTOMPAGECOMMANDS) call StartMenu yourself and add a MessageBox after its call.<br />
<br />
You need to click on a message box or no enter to skip it too ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RIV@NVX</div><div class="date">5th December 2002, 16:00</div></div><div class="posttext">Will that AndiG's UI be included with next version of NSIS?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th December 2002, 16:27</div></div><div class="posttext">I'll make a modern3.exe without description.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">10th December 2002, 15:56</div></div><div class="posttext">Joost,<br />
thank you for modern3,<br />
<br />
kichik,<br />
I'm still not entirely sure- I understand it's not possible to add a checkbox to any existing page, right? They need to be clicked, too, but only if you disagree with the standard...<br />
<br />
Do you think an &quot;Install for All Users&quot; checkbox (optional) would be a good enhancement for NSIS, status automatically determining the where to install (reg keys, as you can do now wit scripting) and able to be queried via scripting language?<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">11th December 2002, 08:36</div></div><div class="posttext">Not sure this makes sense, but I'm not really happy with MUI_FINISHPAGE_NOAUTOCLOSE.<br />
My preferred behaviour would be that I get to the finish page automatically and can still go back to the installer progress page (Back button on final not disabled). Saves one click and the interested users can still go back.<br />
Makes sense?<br />
<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th December 2002, 15:04</div></div><div class="posttext">Do you think an &quot;Install for All Users&quot; checkbox (optional) would be a good enhancement for NSIS, status automatically determining the where to install (reg keys, as you can do now wit scripting) and able to be queried via scripting language?<br />
<br />
It's not that hard to do it right now, I don't think there should be an option for another page that does only it. All you need to do is create an InstallOptions page that asks the user where he wants it. Then according to it use SetShellVarContext and you are set. SetShellVarContext will make sure all of the NSIS variables ($PROGRAMFILES, $STARTMENU etc.) will point to the right place. For the registry keys you will have to use a variable to store either HKLM or HKCU and use it in every registry function.<br />
<br />
Makes sense? <br />
<br />
I will think about it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">11th December 2002, 15:18</div></div><div class="posttext">kichik,<br />
<br />
not another page (installoptions), but rather incorporate it into one of the existing pages :)<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th December 2002, 15:27</div></div><div class="posttext">Which page were you thinking about?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">14th December 2002, 09:25</div></div><div class="posttext">Mhhm. Not entirely sure- maybe the Shortcusts page? I'm wondering though- how do other installers handle this?<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th December 2002, 20:19</div></div><div class="posttext">Most of the installers I have seen have a seperate page for it, I think.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>