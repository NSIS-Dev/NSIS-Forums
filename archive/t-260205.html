<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Installer language, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Installer language NSIS Discussion" />
	
	<title> Installer language [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Installer language</div>
<hr />
<div class="pda"><a href="t-260205.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260205">Installer language</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">is99</div><div class="date">23rd November 2006, 15:50</div></div><div class="posttext">I made an installer that works with several languages, evrything works fine and when a user runs an installer the language selection screan appears.<br />
<br />
But the problem is that if the same user runs the same setup on the same pc again the setup wont ask him to select a language and instead will use a language he selected the first time.<br />
<br />
How can I make the installer to ask the user the language each time it runs ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fmt_jsc</div><div class="date">23rd November 2006, 16:43</div></div><div class="posttext">You have to delete the corresponding Registry key :-)<br />
<br />
You have probably had to use some defines such as (the example is if you use the Modern User Interface plugin):<br />
!define MUI_LANGDLL_REGISTRY_ROOT HKLM<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\mysoftwarename&quot;<br />
!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;InstallerLanguage&quot;<br />
<br />
Which means the language selected by the user will be saved in the registry in HKLM\Software\mysoftwarename under the key name InstallerLanguage<br />
<br />
Don't know though whether you can avoid the language to be saved in the first place by giving an empty registry path or using some other define?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">23rd November 2006, 16:44</div></div><div class="posttext">Or you can use<br />
<br />
!define MUI_LANGDLL_ALWAYSSHOW</div></div><hr />


<div class="post"><div class="posttop"><div class="username">is99</div><div class="date">23rd November 2006, 16:51</div></div><div class="posttext">Excelent !define MUI_LANGDLL_ALWAYSSHOW is exactly what I was looking for.<br />
<br />
Thakns.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">23rd November 2006, 17:00</div></div><div class="posttext">Hi<br />
<br />
This work fine to me too, but when i run unistaller, this not &quot;get&quot; the language ive select when install.<br />
I use this<br />
<br />
;Uninstaller Functions<br />
Function un.onInit<br />
  !insertmacro MUI_UNGETLANGUAGE<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 $(UN_QUESTION) IDYES +2<br />
  Abort<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fmt_jsc</div><div class="date">23rd November 2006, 17:26</div></div><div class="posttext">Did you check if the value is recorded in the registry with the MUI_LANGDLL_REGISTRY_ROOT, KEY and VALUENAME you gave?<br />
<br />
If it's correct, maybe try with calling the message box after stepping out of function un.onInit?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">23rd November 2006, 17:38</div></div><div class="posttext">The MUI_LANGDLL_REGISTRY_ROOT, KEY and VALUENAME are OK<br />
<br />
The stranger is that only happens in messagebox of onInit since in the one of onUninstSuccess works fine with the language of the installation<br />
<br />
Function un.onUninstSuccess<br />
  HideWindow<br />
  MessageBox MB_ICONINFORMATION|MB_OK $(UN_CONFIRMATION)<br />
FunctionEnd<br />
<br />
Any idea?<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd November 2006, 19:27</div></div><div class="posttext">The language selection doesn't take effect until after .onInit. You can use .onGUIInit to display multilingual messages with ease, or you could use a switch on $LANGUAGE.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">23rd November 2006, 19:36</div></div><div class="posttext">Thanks Kichik<br />
<br />
And in this part of code how i could use $LANGUAGE??<br />
<br />
;Uninstaller Functions<br />
Function un.onInit<br />
  !insertmacro MUI_UNGETLANGUAGE<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 $(UN_QUESTION) IDYES +2<br />
  Abort<br />
FunctionEnd<br />
<br />
Function un.onUninstSuccess<br />
  HideWindow<br />
  MessageBox MB_ICONINFORMATION|MB_OK $(UN_CONFIRMATION)<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd November 2006, 19:39</div></div><div class="posttext">If you want to use language strings, use them in un.onGUIInit. If you really must use it in un.onInit, use a switch.!include LogicLib.nsh<br />
#...<br />
${Switch} $LANGUAGE<br />
  ${Case} ${LANG_ENGLISH}<br />
    MessageBox MB_OK english<br />
    ${Break}<br />
  ${Case} ${LANG_FRENCH}<br />
    MessageBox MB_OK french<br />
    ${Break}<br />
${EndSwitch}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">27th November 2006, 16:15</div></div><div class="posttext">Thanks Kichik, but i still vae problems with uninstaller<br />
This is my part of code with your help<br />
<br />
;Uninstaller Functions<br />
Function un.onInit<br />
  !insertmacro MUI_UNGETLANGUAGE<br />
  !include LogicLib.nsh<br />
  ${Switch} $LANGUAGE<br />
    ${Case} ${LANG_ENGLISH}<br />
      MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Are you sure you wish to uninstall $(^Name) with all componentes?&quot; IDYES +2<br />
      Abort<br />
      ${Break}<br />
    ${Case} ${LANG_SPANISH}<br />
      MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2  &quot;Â¿EstÃ¡ completamente seguro que desea desinstalar $(^Name) junto con todos sus componentes?&quot; IDYES +2<br />
      Abort<br />
      ${Break}<br />
    ${Case} ${LANG_PORTUGUESEBR}<br />
      MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Â¿Voce estÃ¡ completamente seguro que desea desinstalar $(^Name) junto con tudos sua componentes?&quot; IDYES +2<br />
      Abort<br />
      ${Break}<br />
  ${EndSwitch}<br />
FunctionEnd<br />
<br />
<br />
At this time the messagebox shows ok and in the install language, but the title of the unistall window still in Spanish, but not the title of unistall confirmation.<br />
If you wish ive attach some images.<br />
<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2006, 16:41</div></div><div class="posttext">In that case, you can set Caption to a variable and change that variable in that Switch according to the selected language. Or simply put that message box in un.onGUIInit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">27th November 2006, 16:51</div></div><div class="posttext">Thanks kichik, but if ive try that the compiler says <br />
Error : Function named  &quot;un.onGUIInit&quot; already exists.<br />
<br />
In other way how can I &quot; set Caption to a variable and change that variable in that Switch according to the selected language&quot;, could you help me with some lines in my above code?<br />
<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2006, 16:57</div></div><div class="posttext">You need to tell the MUI you want to use it with MUI_CUSTOMFUNCTION_UNGUIINIT.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">27th November 2006, 17:32</div></div><div class="posttext">Ok and whatsup with <br />
<br />
how can I &quot; set Caption to a variable and change that variable in that Switch according to the selected language&quot;, could you help me with some lines in my above code?<br />
<br />
Thanks a lot</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2006, 17:40</div></div><div class="posttext">You shouldn't use that. Use un.onGUIInit, it's by far the best solution. But if you insist...Var caption<br />
Caption $CAPTION<br />
Function un.onInit<br />
# if english...<br />
StrCpy $caption &quot;some caption&quot;<br />
MessageBox MB_OK &quot;some message&quot;<br />
# if hebrew...<br />
StrCpy $caption &quot;koteret&quot;<br />
MessageBox MB_OK &quot;hoda'a&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">28th November 2006, 12:56</div></div><div class="posttext">Hi kichik, sorry for insist but just Im beginning with NSIS and are many things that exceed to me, thanks to answer.<br />
<br />
Kindly</div></div><hr />


<div class="post"><div class="posttop"><div class="username">UranusOne</div><div class="date">20th February 2009, 04:43</div></div><div class="posttext">Hello everyone. Kichik is right. This is very interesting. Try this way it works. After adding conditionals that they want wherever they want.<br />
<br />
Name &quot;ChangeCaption&quot;<br />
OutFile &quot;ChangeCaption.exe&quot;<br />
<br />
Var CAPTION<br />
Caption $CAPTION<br />
<br />
Function .OnInitStrCpy $CAPTION &quot;MyNewCaption&quot;<br />
MessageBox MB_OK &quot;You NOT see the caption here&quot;FunctionEnd<br />
<br />
Section SectionOneMessageBox MB_OK &quot;You NOW see the caption here&quot;SectionEnd<br />
<br />
Kichik: you are the master, add this to the Code Example.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>