<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File page similar to directory page in mui2?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File page similar to directory page in mui2? NSIS Discussion" />
	
	<title> File page similar to directory page in mui2? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File page similar to directory page in mui2?</div>
<hr />
<div class="pda"><a href="t-322662.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322662">File page similar to directory page in mui2?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">siggel</div><div class="date">23rd September 2010, 11:29</div></div><div class="posttext">I wonder if there is a ready-to-use file page just like mui2's directory page but accepting files instead of directories  (possibly plus a file extension list). I would implement it using nsDialogs but I think the problem is so common that there are probably several solutions already. Maybe I just didn't use the right search terms to find them?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">23rd September 2010, 16:10</div></div><div class="posttext">nope - it's also not all that common in an installer; last I've seen one was for a multi-thousand dollar program that let the user download big fat maintenance update files -or- point to such a file locally (e.g. if provided by the reseller on a separate disc).<br />
<br />
But, as you mentioned, it's fairly simple to whip one up yourself with nsDialogs - can just take the template page one for the directory out of the NSIS\Contrib\ModernUI...something folder and adjust that, even :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">siggel</div><div class="date">23rd September 2010, 16:40</div></div><div class="posttext">Ok, I'm now in the process of implementing my own, hope I can post some results soon</div></div><hr />


<div class="post"><div class="posttop"><div class="username">siggel</div><div class="date">23rd September 2010, 17:49</div></div><div class="posttext">So here it is, layout equals the mui2 directory page. Comments welcome, e.g. on my use of some uniquely created ID to enable multiple use of the page (probably there is a better way?), or how to make the groupbox text useable in multiple languages, ideas for providing &quot;save&quot;-version as well, or JUST GENERALLY NOT GOOD STYLE comments are welcome ;-)<br />
<br />
<br />
/*<br />
<br />
NSIS Modern User Interface 2 - Extensions<br />
Generic file page<br />
Usage:<br />
   Var /GLOBAL filename<br />
<br />
  !define MUI_FILEPAGE_HEADER_TEXT &quot;Title&quot; ; mandatory as a file page should require some specific description<br />
  !define MUI_FILEPAGE_HEADER_SUBTEXT &quot;Subtitle&quot; ; mandatory as a file page should require some specific description<br />
  !define MUI_FILEPAGE_TEXT_TOP &quot;Description&quot; ; optional<br />
  !insertmacro MUI_PAGE_FILE &quot;filename&quot; &quot;Extension1 description|extension1|Extension2 description|extension2|...&quot; ; attention: use &quot;filename&quot; not &quot;$filename&quot; !<br />
<br />
*/<br />
<br />
Var MUI_FILEPAGE_FILEREQUESTHANDLE<br />
Var MUI_FILEPAGE_BROWSEBUTTONHANDLE<br />
<br />
;--------------------------------<br />
;Page declaration<br />
<br />
!macro MUI_PAGE_FILE FILENAME EXTENSIONS <br />
    !define MY_ID ${__LINE__}<br />
    !insertmacro MUI_PAGE_FILE_MACROS &quot;${MY_ID}&quot; &quot;${FILENAME}&quot; &quot;${EXTENSIONS}&quot; <br />
    !verbose push<br />
    !verbose ${MUI_VERBOSE}<br />
    Page custom MUI_CUSTOMPAGE_FILE_${MY_ID} MUI_CUSTOMPAGE_FILE_LEAVE_${MY_ID}<br />
<br />
    !verbose pop<br />
    !undef MY_ID<br />
!macroend<br />
<br />
!macro MUI_PAGE_FILE_MACROS ID FILENAME EXTENSIONS <br />
Function MUI_CUSTOMPAGE_FILE_${ID}<br />
<br />
    nsDialogs::Create 1018<br />
    Pop $0<br />
<br />
    !insertmacro MUI_HEADER_TEXT &quot;${MUI_FILEPAGE_HEADER_TEXT}&quot; &quot;${MUI_FILEPAGE_HEADER_SUBTEXT}&quot;<br />
    !ifndef MUI_FILEPAGE_TEXT_TOP<br />
      !define MUI_FILEPAGE_TEXT_TOP &quot;&quot;<br />
    !endif<br />
<br />
    ${NSD_CreateLabel} 0u 0u 100% 60u &quot;${MUI_FILEPAGE_TEXT_TOP}&quot;<br />
    <br />
    ${NSD_CreateGroupBox} 0u 70u 300u 35u &quot;Selected File&quot;<br />
    ${NSD_CreateFileRequest} 10u 85u 210u 12u &quot;$${FILENAME}&quot;<br />
    Pop $MUI_FILEPAGE_FILEREQUESTHANDLE<br />
    <br />
    ${NSD_CreateBrowseButton} 228u 83u 60u 15u &quot;$(^BrowseBtn)&quot;<br />
    Pop $MUI_FILEPAGE_BROWSEBUTTONHANDLE<br />
    ${NSD_OnClick} $MUI_FILEPAGE_BROWSEBUTTONHANDLE MUI_CUSTOMPAGE_FILE_BROWSE_${ID}<br />
<br />
    nsDialogs::Show<br />
    <br />
    !undef MUI_FILEPAGE_HEADER_TEXT<br />
    !undef MUI_FILEPAGE_HEADER_SUBTEXT<br />
    !undef MUI_FILEPAGE_TEXT_TOP<br />
<br />
FunctionEnd<br />
<br />
Function MUI_CUSTOMPAGE_FILE_BROWSE_${ID}<br />
  nsDialogs::SelectFileDialog &quot;open&quot; &quot;$${FILENAME}&quot; &quot;${EXTENSIONS}&quot;<br />
  Pop $0<br />
  ${If} $0 != &quot;&quot;<br />
    ${NSD_SetText} $MUI_FILEPAGE_FILEREQUESTHANDLE $0<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Function MUI_CUSTOMPAGE_FILE_LEAVE_${ID}<br />
  Call READ_FILENAME_${ID}<br />
FunctionEnd<br />
<br />
Function READ_FILENAME_${ID}<br />
    ${NSD_GetText} $MUI_FILEPAGE_FILEREQUESTHANDLE $${Filename}<br />
FunctionEnd<br />
<br />
!macroend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">25th September 2010, 09:03</div></div><div class="posttext">Please use http://nsis.pastebin.com/ or attachments to share large amounts of code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">siggel</div><div class="date">26th September 2010, 11:48</div></div><div class="posttext">Ok, I've put it to http://nsis.pastebin.com/sAtyhgTY<br />
But I can't edit my original post anymore. I'll keep it in mind for future posts.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>