<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Screen mouse pointer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Screen mouse pointer NSIS Discussion" />
	
	<title> Screen mouse pointer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Screen mouse pointer</div>
<hr />
<div class="pda"><a href="t-87412.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=87412">Screen mouse pointer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 13:08</div></div><div class="posttext">Before I can show the first window of my NSIS installer, I need to extract the InstallOptions DLL and a few INI files. This takes a few seconds :)<br />
<br />
The problem is that the user doesn't see anything while the installer is loading, so it gives the idea that it doesn't work. :( <br />
<br />
I would be nice if I could set the mousepointer of the screen to a hourglass. A SetScreenMousePointer function or something like that.<br />
<br />
I don't know how I should add this to the NSIS C++ code (I don't know C++ very well). A splash screen / DLL is not possible, because they have to be extracted too, and I need to use very high compression (so a bit slow). Can anyone help me with this?<br />
<br />
Thanx!<br />
;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2002, 13:15</div></div><div class="posttext">Oops... Should have read it until the end :(<br />
If not with a DLL you can use this code in NSIS if you understand how to add functions.<br />
<br />
Create a DLL with these functions (you have a template in the contrib dir):<br />
<br />
SetCursor(LoadCursor(0, IDC_WAIT));<br />
OR<br />
SetCursor(LoadCursor(0, IDC_APPSTARTING));<br />
<br />
And to set it back to normal use:<br />
<br />
SetCursor(LoadCursor(0, IDC_ARROW));<br />
<br />
Bad idea... You will have to extract this DLL too...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 13:20</div></div><div class="posttext">Yes, it should be in the installer itself :D<br />
<br />
Does Setcursor work for the entire screen?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2002, 13:53</div></div><div class="posttext">I think this example will clear it all up:<br />
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/cursors_41pu.asp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 14:08</div></div><div class="posttext">The NSIS window is not visible when the cursor should be displayed, so the cursor of the entire screen should be changed. In Visual Basic, I can use:<br />
<br />
Screen.MousePointer = vbHourglass<br />
<br />
This MSDN info is for the cursor of application window itself I think?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2002, 14:53</div></div><div class="posttext">I am not sure it is the best sulotion, but it is the only one I can think of. You can use SetSystemCursor.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 15:25</div></div><div class="posttext">Maybe a build-in splash screen is a better idea. Like the one that appears when the installer is doing a CRC check.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 15:42</div></div><div class="posttext">Ok, I'll create a dialog resource with a wait dialog for the installer. :)<br />
<br />
How can I add an NSIS function to show and hide this dialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th May 2002, 20:23</div></div><div class="posttext">Ok :D<br />
<br />
I've added a function for a nice wait dialog, maybe this is even better than just a mouse cursor. Quite easy to add a function to NSIS. :)<br />
<br />
Thanks for the help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">petersa</div><div class="date">13th May 2002, 14:35</div></div><div class="posttext">Of course, you could make a small bitmap saying 'Unpacking Installation...' or something like that.<br />
<br />
Here's a modified version of Splash that stays there until you send a message to it. Just put this before you do the extractions:Function .onInit<br />
<br />
  SetOutPath $TEMP<br />
  File SPLASH.EXE<br />
  File SPLASH.BMP<br />
  Exec '$TEMP\SPLASH 1 $HWNDPARENT $TEMP\SPLASH'<br />
<br />
FunctionEnd...and this code after the extractions are done:  FindWindow $0 _sp<br />
  SendMessage $0 0x300 0 0images/attach/gif.gifAttachment: splash_until_cut.zip (http://forums.winamp.com/attachment.php?s=&amp;postid=387093)<br />
This has been downloaded 697 time(s).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">13th May 2002, 16:29</div></div><div class="posttext">Originally posted by petersa <br />
Of course, you could make a small bitmap saying 'Unpacking Installation...' or something like that.<br />
<br />
Here's a modified version of Splash that stays there until you send a message to it. Just put this before you do the extractions:Function .onInit<br />
<br />
  SetOutPath $TEMP<br />
  File SPLASH.EXE<br />
  File SPLASH.BMP<br />
  Exec '$TEMP\SPLASH 1 $HWNDPARENT $TEMP\SPLASH'<br />
<br />
FunctionEnd...and this code after the extractions are done:  FindWindow $0 _sp<br />
  SendMessage $0 0x300 0 0images/attach/gif.gifAttachment: splash_until_cut.zip (http://forums.winamp.com/attachment.php?s=&amp;postid=387093)<br />
This has been downloaded 697 time(s). <br />
Thanks for your info.<br />
<br />
As I said, I have already made a build-in splash in the NSIS installer, which appears immediately, without extracting an extrernal splash application. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">1st September 2005, 12:48</div></div><div class="posttext">I'm sorry, but I haven't catched this - what is the simplest way to set hourglass cursor for my Modern UI custom page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st September 2005, 19:34</div></div><div class="posttext">Well, this thread is talking about a very specific hourglass cursor shown when the installer starts up, not anywhere in the installer. For the start-up, the splash or banner plug-in are probably the best solution. For anything else, write a plug-in that calls SetCursor.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>