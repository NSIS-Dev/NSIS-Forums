<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help with update program, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help with update program NSIS Discussion" />
	
	<title> Help with update program [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help with update program</div>
<hr />
<div class="pda"><a href="t-138090.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=138090">Help with update program</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Merlin73</div><div class="date">6th June 2003, 17:19</div></div><div class="posttext">Hi,<br />
Could someone please help me write a script? I'm new to NSIS and I've created an install script successfully. But I want to use NSIS to write a program that not only downloads an updated version of my program off the internet, but checks to see if it's a newer version first. I've read the documentation and know how to use NSISdl::download, but don't know how to write the rest of the code. (If it was Delphi I could do it)<br />
The idea I have is the updater will read the program's ini file to find the version and compare it with an ini file on the website, if the ini file on the web contains a higher version number it will download the program.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th June 2003, 18:07</div></div><div class="posttext">That can be done and I did it with my program - it did exactly what you want to do!<br />
<br />
You can either use GetFileTime to compare the program files like so:<br />
<br />
	GetFileTime &quot;C:\olderfile.exe&quot; $3 $4<br />
	GetFileTime &quot;C:\downloadedfile.exe&quot; $5 $6<br />
<br />
	IntCmp $3 $5 0 skip +2<br />
	IntCmp $4 $6 skip skip 0<br />
<br />
Delete &quot;C:\olderfile.exe&quot;<br />
Rename &quot;C:\downloadedfile.exe&quot; &quot;C:\olderfile.exe&quot;<br />
skip:<br />
<br />
<br />
Or, use:<br />
<br />
NSISdl::download &quot;http://myweb.server.com/downloadedfile.ini&quot; &quot;C:\downloadedfile.ini&quot;<br />
<br />
ReadINIStr $0 &quot;C:\olderfile.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
ReadINIStr $1 &quot;C:\downloadedfile.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
 IntCmp $0 $1 skip 0 skip<br />
<br />
NSISdl::download &quot;http://myweb.server.com/downloadedfile.exe&quot; &quot;C:\olderfile.exe&quot;<br />
MessageBox MB_OK|MB_ICONINFORMATION &quot;Downloaded file update for olderfile.exe!&quot;<br />
<br />
skip:<br />
<br />
<br />
Hope it helps!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">6th June 2003, 18:07</div></div><div class="posttext">check this old thread:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=135626</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>