<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Can Abort from MUI Pre fn, but not from MUI Leave fn, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Can Abort from MUI Pre fn, but not from MUI Leave fn NSIS Discussion" />
	
	<title> Can Abort from MUI Pre fn, but not from MUI Leave fn [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Can Abort from MUI Pre fn, but not from MUI Leave fn</div>
<hr />
<div class="pda"><a href="t-139990.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=139990">Can Abort from MUI Pre fn, but not from MUI Leave fn</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">24th June 2003, 20:01</div></div><div class="posttext">I am using latest CVS, updated yesterday. This is using Win98SE with latest updates.<br />
<br />
According to the documentation, chapter 4...<br />
Callbacks. Use Abort from a built-in page's pre-function to skip the page, and from a built-in page's leave-function to stay in the page. <br />
<br />
Test Results: I tried using abort from the StartMenu's pre function, and it worked as documented above. But it does not work as documented above when used in the StartMenu's leave function. My code is shown below.<br />
<br />
Problem. Below I am using Abort in the leave-function, it gives the error message, so it is seeing the Abort command but it DOES NOT stay in the page as the documentation (see above) says it should. Instead, it moves on to the next page. Method 2 (see below) doesn't work either.<br />
<br />
I add the following code to the StartMenu.nsi, compile and test.<br />
<br />
!define MUI_CUSTOMFUNCTION_STARTMENU_LEAVE StartMenuPage_Leave<br />
<br />
Method 1.<br />
<br />
Function StartMenuPage_Leave<br />
  StrCmp ${MUI_STARTMENUPAGE_VARIABLE} &quot;${MUI_PRODUCT}&quot; PathGood<br />
      MessageBox MB_OK|MB_ICONSTOP &quot;Please correct. This path must end with: \${MUI_PRODUCT}&quot;<br />
      Abort<br />
  PathGood:<br />
FunctionEnd<br />
<br />
<br />
Method 2.<br />
<br />
Function StartMenuPage_Leave<br />
  StrCmp ${MUI_STARTMENUPAGE_VARIABLE} &quot;${MUI_PRODUCT}&quot; PathGood<br />
      Abort &quot;Please correct. This path must end with: \${MUI_PRODUCT}&quot;<br />
  PathGood:<br />
FunctionEnd<br />
<br />
<br />
Is this a bug, or a feature that's not finished yet?<br />
If I should post this as a bug report, please advise.<br />
<br />
Thanks,<br />
Lilla</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th June 2003, 20:51</div></div><div class="posttext">Thanks for reporting this issue :D Fixed and uploaded :)<br />
<br />
Note that it might take up to 24 hours before public CVS will be updated (because of SF CVS server issues).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">24th June 2003, 21:55</div></div><div class="posttext">Wow! fast fix!<br />
<br />
Thank you,<br />
Lilla</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>