<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Skipping a custom Page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Skipping a custom Page NSIS Discussion" />
	
	<title> Skipping a custom Page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Skipping a custom Page</div>
<hr />
<div class="pda"><a href="t-334297.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=334297">Skipping a custom Page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">langdon</div><div class="date">1st September 2011, 22:46</div></div><div class="posttext">This crashes when it hits Page 3 because of the Abort inside of Page2.<br />
<br />
Name nsDialogs<br />
OutFile nsDialogs.exe<br />
<br />
!Include nsDialogs.nsh<br />
<br />
Page custom nsDialogsPage1<br />
Page custom nsDialogsPage2<br />
Page custom nsDialogsPage3<br />
Page instfiles<br />
<br />
Function nsDialogsPage1<br />
	nsDialogs::Create 1018<br />
 	nsDialogs::show<br />
FunctionEnd<br />
<br />
Function nsDialogsPage2<br />
	nsDialogs::Create 1018<br />
	Abort<br />
 	nsDialogs::show<br />
FunctionEnd<br />
<br />
Function nsDialogsPage3<br />
	nsDialogs::Create 1018<br />
 	nsDialogs::show<br />
FunctionEnd<br />
<br />
Section<br />
	DetailPrint &quot;hello world&quot;<br />
SectionEnd<br />
<br />
In my real world example, I've got a prerequisites page that runs and does a bunch of validation. If there are no errors at the end of my prerequisite validation, I'm calling Abort to (1) skip that page, (2) go on to the next one, (3) disable the back button.  If there ARE errors, the page displays the errors and won't let the user proceed until everything is resolved (server config, etc).<br />
<br />
It doesn't seem like I'm doing anything wild here.  Is there another way to go about this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">1st September 2011, 23:44</div></div><div class="posttext">have you tried aborting before creating the dialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">langdon</div><div class="date">2nd September 2011, 01:36</div></div><div class="posttext">Ahh dang, that seems to work.<br />
<br />
I've got an order of operations problem then.  I'm creating a ListBox on that custom page and filling it with any issues that arise from my validation.  At the end of the function, I SendMessage LB_GETCOUNT, and if I get 0 back, I Abort to proceed onto the next step.<br />
<br />
Is there a better place I can store these issues (just strings of text) and then if there are any, render the interface and fill the list?  It seems like the NSISArray or nsArray might work, but perhaps there's something more appropriate?<br />
<br />
Shame this scenario just crashes the installer.  I feel like what I've written is really clean and straight forward.  I wonder if I could just free up whatever nsDialogs::Create created?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">2nd September 2011, 06:08</div></div><div class="posttext">You could also do the validation twice, first time only increment an integer counter. When it's larger than zero, you can do it again and populate the listbox.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">2nd September 2011, 07:21</div></div><div class="posttext">Is there a better place I can store these issues (just strings of text) and then if there are any, render the interface and fill the list? <br />
First idea - If the list isn't extremely long, use the stack. Just Push the string (you should start with a marker to recognize the end when you are retrieving them) and when you finish validating all components, Pop the strings back and add them to the ListBox. If the first Pop gives you your marker, your list was empty. (This method will reverse the strings, LIFO).<br />
<br />
Second idea - write the text to a tempfile in $PlugInsDir. When you go to read the file, if it's empty the listbox will be, too. (This method maintains the order, FIFO).<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">langdon</div><div class="date">7th September 2011, 18:43</div></div><div class="posttext">Thanks for all the input.  I ended up using NSISArray (http://forums.winamp.com/showthread.php?t=222275) to push issues into my own array.  After running all my checks, I called SizeOf.  If there were any issues, I created the custom page, called Reverse on the array, and filled the listbox with items from the array (in the order they happened).<br />
<br />
Still, calling Abort at the end of the page to hide the Back button on the 2nd page closed or crashed the app if the user hit back, so I ended up using Buttons Header (http://nsis.sourceforge.net/Buttons_Header) to hide the Back button when the 2nd page was created.<br />
<br />
Shitty work around, but it does work like I want now.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>