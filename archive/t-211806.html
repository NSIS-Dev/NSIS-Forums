<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MySQL Setup, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MySQL Setup NSIS Discussion" />
	
	<title> MySQL Setup [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MySQL Setup</div>
<hr />
<div class="pda"><a href="t-211806.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=211806">MySQL Setup</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">drsmartman44</div><div class="date">30th March 2005, 17:38</div></div><div class="posttext">Hello everyone,<br />
<br />
I have read over a few posts that touch on my problem, but for some reason or another (most likely human error) I can't get it to work. I am running an NSIS script that includes the setup of a MySQL database, table and user. I do this via SQL run from the cmd line. See below.<br />
<br />
mysql -uroot &lt; &quot;C:\Documents and Settings\username\Desktop\appName\install\mysql\scripts\create_mysql_database.sql&quot; <br />
<br />
In my NSIS script, I run this from a function. see below.<br />
<br />
Function setupSchema<br />
	Exec 'mysql -uroot &lt; &quot;${SRC}\mysql\scripts\create_mysql_database.sql&quot;'<br />
FunctionEnd <br />
<br />
I have also tried various commands instead of Exec (NSExec::ExecToStack, nsExec::ExecToLog, ExecWait) and messed around with the command itself(including 'cmd' or 'command',giving a full path to 'mysql' with full quotes,etc).<br />
<br />
Any idea why this would be working? I did review some previous posts, but nothing seems to be working. By the way, MySQL is running when this is executed and I verified the SQL works when run manually.<br />
<br />
Also, are there any debugging options or logging that I can use to see what's going on. I know all the commands are displayed during the install...but anything more is helpful. <br />
<br />
Many thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KenA</div><div class="date">31st March 2005, 13:02</div></div><div class="posttext">Originally posted by drsmartman44 <br />
Hello everyone,<br />
<br />
I have read over a few posts that touch on my problem, but for some reason or another (most likely human error) I can't get it to work. I am running an NSIS script that includes the setup of a MySQL database, table and user. I do this via SQL run from the cmd line. See below.<br />
<br />
mysql -uroot &lt; &quot;C:\Documents and Settings\username\Desktop\appName\install\mysql\scripts\create_mysql_database.sql&quot; <br />
<br />
In my NSIS script, I run this from a function. see below.<br />
<br />
Function setupSchema<br />
	Exec 'mysql -uroot &lt; &quot;${SRC}\mysql\scripts\create_mysql_database.sql&quot;'<br />
FunctionEnd <br />
{...} <br />
Hi, maybe you should try:<br />
Function setupSchema<br />
	Exec '&quot;mysql.exe&quot; -uroot &lt; ${SRC}\\mysql\\scripts\\create_mysql_database.sql'<br />
FunctionEnd <br />
Hope this helps,<br />
<br />
KenA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">drsmartman44</div><div class="date">31st March 2005, 15:24</div></div><div class="posttext">KenA,<br />
<br />
Thanks for the response. I tried it the way you suggested, but to no avail. I put &quot;mysql.exe&quot; in quotes and took the quotes out of my .sql path although that path has spaces so it would need to be quoted. I also tried the full path to mysql.exe (C:\mysql\bin\mysql.exe).<br />
<br />
Is there anyway I can log or view the results of this particular execution? The installer shows 'Execute: &lt;my string above&gt;'...but I don't know the results of that execution. Anyway, I could print it to the screen???<br />
<br />
Sorry, I'm new at this :( Thanks again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KenA</div><div class="date">31st March 2005, 16:04</div></div><div class="posttext">Originally posted by drsmartman44 <br />
KenA,<br />
<br />
Thanks for the response. I tried it the way you suggested, but to no avail. I put &quot;mysql.exe&quot; in quotes and took the quotes out of my .sql path although that path has spaces so it would need to be quoted. I also tried the full path to mysql.exe (C:\mysql\bin\mysql.exe).<br />
<br />
Is there anyway I can log or view the results of this particular execution? The installer shows 'Execute: &lt;my string above&gt;'...but I don't know the results of that execution. Anyway, I could print it to the screen???<br />
<br />
Sorry, I'm new at this :( Thanks again. <br />
Ok. I assume that mysql.exe is a command line application. If so, you should be able to execute it with nsExec (it's a plug-in that I believe to be part of the standard NSIS install that deals with command line applications).<br />
<br />
I also assume that {SRC} has been defined as &quot;$DESKTOP\appName\install&quot; and that the ShellVarContext is current.<br />
<br />
Function setupSchema<br />
	nsExec::ExecToLog '&quot;C:\\mysql\\bin\\mysql.exe&quot; -uroot &lt; ${SRC}\\mysql\\scripts\\create_mysql_database.sql'<br />
FunctionEndYou should be able to see the result of the function in the logwindow, to help debug the problem. You may also try a simpler path for the &quot;create_mysql_database.sql&quot; file to help you in the debug process.<br />
<br />
Later, KenA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">31st March 2005, 16:50</div></div><div class="posttext">BTW ExecDos plug-in supports stdin string parameter for console application http://forums.winamp.com/showthread.php?s=&amp;threadid=181442&amp;highlight=ExecDos</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>