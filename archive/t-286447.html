<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help with Locate function, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help with Locate function NSIS Discussion" />
	
	<title> Help with Locate function [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help with Locate function</div>
<hr />
<div class="pda"><a href="t-286447.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286447">Help with Locate function</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Vino87</div><div class="date">7th February 2008, 12:57</div></div><div class="posttext">Hi,<br />
<br />
Im making an installer for a mod right now and i need to be able to search for a directory on the users PC and set that directory as the Installation Directory. Is there any way I could use the Locate function to do this</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">7th February 2008, 15:33</div></div><div class="posttext">if you want the user to select a directory,<br />
look for &quot;Page directory&quot; in NSIS Help File<br />
or !insertmacro MUI_PAGE_DIRECTORY in MUI ReadMe file<br />
<br />
if you want to search for a specific existing directory, you will need to tell us more about what you want</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vino87</div><div class="date">7th February 2008, 15:37</div></div><div class="posttext">I dont want the user to select it, i wanna search the users computer for a certain directory and if it exist install there, if not, quit the installation. The game must be installed for the mod to be installed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">7th February 2008, 15:43</div></div><div class="posttext">usually the best thing is to get the directory from the registry, under the &quot;Uninstall&quot; key for example</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fabian.rap.more</div><div class="date">7th February 2008, 16:24</div></div><div class="posttext">if its a game then there should be a registry key pointing to the folder where its installed.............if u dont know where the key is located the snnop around the registry or google it</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">8th February 2008, 07:32</div></div><div class="posttext">@ Vino87,<br />
following example will search in all available HDDs for a given directory,<br />
outfile &quot;test.exe&quot;<br />
ShowInstDetails Show<br />
<br />
!include FileFunc.nsh<br />
!insertmacro Locate<br />
!insertmacro GetDrives<br />
<br />
Section<br />
        ${GetDrives} &quot;HDD&quot; &quot;GetDrives_CallBack&quot;<br />
        SetOutPath &quot;$R0&quot;<br />
        DetailPrint &quot;$OUTDIR&quot;<br />
SectionEnd<br />
<br />
Function GetDrives_CallBack<br />
	StrCpy $R1 &quot;$9&quot;<br />
	StrCmp &quot;$R1&quot; &quot;$R2&quot; +3<br />
	MessageBox MB_YESNO &quot;Search in $R1 hard disk?&quot; IDYES +2<br />
	goto end<br />
	${Locate} &quot;$R1&quot; &quot;/L=D /M=CONTRIB&quot; &quot;Locate_CallBack&quot;<br />
	StrCpy $R2 &quot;$R1&quot;<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK &quot;Error&quot; IDOK +2<br />
	MessageBox MB_OK &quot;$$R0=$R0&quot;<br />
	end:<br />
	Push $0<br />
FunctionEnd<br />
<br />
Function Locate_CallBack<br />
	StrCpy $R0 $R9<br />
 	MessageBox MB_YESNO '$R0$\n$\nFind next?' IDYES +2<br />
	StrCpy $0 StopLocate<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vino87</div><div class="date">8th February 2008, 12:56</div></div><div class="posttext">Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fabian.rap.more</div><div class="date">8th February 2008, 13:50</div></div><div class="posttext">Red Wine's function is quite good but u should expect the user to change the name of the folder..........i admit that not many will but it will be safer to read the location from the registry............the game's official site should have a section like this</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>