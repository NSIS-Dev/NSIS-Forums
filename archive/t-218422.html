<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" TIP: CD/DVD Icon on XP..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  TIP: CD/DVD Icon on XP... NSIS Discussion" />
	
	<title> TIP: CD/DVD Icon on XP... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  TIP: CD/DVD Icon on XP...</div>
<hr />
<div class="pda"><a href="t-218422.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=218422">TIP: CD/DVD Icon on XP...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">9th June 2005, 13:48</div></div><div class="posttext">Hello Everyone,<br />
<br />
I know this isn't specifically NSIS related, but it IS installer related and drove me crazy. I have an autorun.inf file with the following contents (see below). When I burn the contents to a CD/DVD with the proper structure and autorun file, then place the disc in a drive, I don't get the desired or expected results.<br />
<br />
My autorun.inf contains:<br />
<br />
code:<br />
[autorun]<br />
open=myapps\setup.exe<br />
icon=myicon.ico,1<br />
label=&quot;MyStrangeSetup&quot;<br />
<br />
and my CD/DVD disc has the following structure:<br />
<br />
myapps\Setup.exe<br />
 myapps\readme.txt<br />
autorun.inf<br />
myicon.ico<br />
<br />
The autorun open portion works fine, but the icon only displays in Windows Explorer IF and only IF the Operating System is 95/98/ME/NT/2K but NOT XP. <br />
<br />
In XP I do NOT get the icon associated. :-( It only shows the OS default icon.<br />
<br />
Tried this on ~20 different machines, all the XP ones fail, all the others mentioned were tested and passed.<br />
It is a Windows bug, have a cookie!<br />
<br />
WAIT.. the answer is simple.<br />
<br />
You CANNOT specify BOTH ICON and LABEL in the autorun.inf !<br />
<br />
It produces inconsistent results, usually not showing the icon. Depending on the icon order, you may get other results on older Windows versions, as well.<br />
The best way to do it? Label the disc properly in your burning app and just not use label= in autorun.inf. Removing the &quot;label=&quot; option solves the problem. 	<br />
<br />
Oh, and keep the CD labeltext under 16 chars. There's another bug lurking there...<br />
<br />
Hint:<br />
If your burning software lets you set file burning precedence (such as Nero), set the autorun.inf to be low, and whatever program autoruns as well as the installer to <br />
high. If the icon is its own .ico file, set that to low. Leave all other files at medium. This has helped me make discs that feel far more responsive on lower-end hardware (i.e. Win98 w/ 4x CD-ROM). Setting the priority to high also helps speed up the CRCCheck slightly.<br />
<br />
Success creating better installers with NSIS.<br />
<br />
<br />
Emin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">9th June 2005, 13:56</div></div><div class="posttext">you probably can remove the &quot;,1&quot; part, when pointing to an icon. i think it's only necessary when pointing to an executable (i.e. icon=myapps\setup.exe,1). i'm probably wrong, as the number should tell which icon is used, but try it anyways.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venatonium</div><div class="date">9th June 2005, 14:16</div></div><div class="posttext">No that is right Yathosho,  Iv done a few autorun.ini files.  For help just pick up any disk and browse for the autorun file and study it.  Games are better for this task.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th June 2005, 16:56</div></div><div class="posttext">i think label= couses problems on xp, also you probably dont need the icon index (or set it to 0 atleast)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">9th June 2005, 17:10</div></div><div class="posttext">Yes Anders, you are right, that was what the article was all about ;) Thanks for confirming...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">10th June 2005, 16:00</div></div><div class="posttext">sure, that 1 is the right icon index?<br />
beware, that the first icon is indexed with 0 (zero) :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">12th June 2005, 21:15</div></div><div class="posttext">Yes, a 1 - because for me the first one was the setup icon the second (icon id 1) a CD/DVD symbolic setupicon.<br />
<br />
Thanks for looking so precise anyhow...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>