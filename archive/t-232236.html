<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Multilanguage, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Multilanguage NSIS Discussion" />
	
	<title> Multilanguage [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Multilanguage</div>
<hr />
<div class="pda"><a href="t-232236.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=232236">Multilanguage</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">30th November 2005, 11:21</div></div><div class="posttext">Hi,<br />
<br />
I want make a multilanguage installer.<br />
I've inserted this string in the script:<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;French&quot;<br />
!insertmacro MUI_LANGUAGE &quot;German&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Italian&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Spanish&quot;<br />
But the Uninstaller start (automatically) in Italian.<br />
Why?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">30th November 2005, 13:21</div></div><div class="posttext">Is there next line in your un.onInit function<br />
<br />
!insertmacro MUI_UNGETLANGUAGE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">30th November 2005, 13:34</div></div><div class="posttext">This is my un.onInit function:<br />
<br />
Function un.onInit<br />
  !insertmacro MUI_UNGETLANGUAGE<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Sei sicuro di voler completamente rimuovere $(^Name) e tutti i suoi componenti?&quot; IDYES +2<br />
  Abort<br />
FunctionEnd<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">30th November 2005, 14:27</div></div><div class="posttext">Uninstaller start in Italian even if another language was selected during install?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">30th November 2005, 14:38</div></div><div class="posttext">Sorry,<br />
<br />
but if I select &quot;english&quot; during the installation..the uninstallation start in &quot;italian&quot;.<br />
Why?<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">30th November 2005, 14:50</div></div><div class="posttext">What information store in registry under your &quot;MUI_LANGDLL_REGISTRY_ROOT\MUI_LANGDLL_REGISTRY_KEY\MUI_LANGDLL_REGISTRY_VALUENAME&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">30th November 2005, 15:44</div></div><div class="posttext">Hi,<br />
<br />
in which registry?<br />
<br />
In Windows Registry, I don't find any MUI_LANGDLL_REGISTRY_ROOT\...<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">30th November 2005, 16:30</div></div><div class="posttext">I'm found the registry..<br />
the code are:<br />
ITA -&gt; 1040<br />
ENG -&gt; 1033<br />
FRA -&gt; 1036<br />
DEU -&gt; 1031<br />
ESP -&gt; 1034<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">30th November 2005, 16:37</div></div><div class="posttext">From MUI doumentation:<br />
To remember to users preference, you can define a registry key.<br />
Note: These defines should be set before inserting the installation page macro.<br />
<br />
MUI_LANGDLL_REGISTRY_ROOT root<br />
MUI_LANGDLL_REGISTRY_KEY key<br />
MUI_LANGDLL_REGISTRY_VALUENAME value_name<br />
The registry key to store the language. The users preference will be remembered. You can also use it for the uninstaller to display the right language. Don't forget to remove this key in the uninstaller.<br />
You need to define this values to store language selection in windows registry.<br />
<br />
ADD:<br />
So, instead MUI_LANGDLL_REGISTRY_ROOT, etc. use it's values you define.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lorenzop</div><div class="date">2nd December 2005, 16:15</div></div><div class="posttext">Thanks,<br />
<br />
but now I've another problem.<br />
I need to customize that MessageBox (see the code):<br />
LangString msgRimozione1 ${LANG_ITALIAN} &quot;Sei sicuro di voler completamente rimuovere&quot;<br />
LangString msgRimozione1 ${LANG_ENGLISH} &quot;Are you sure of wanting completely to remove&quot;<br />
LangString msgRimozione1 ${LANG_FRENCH} &quot;Êtes vous sûr de vouloir complètement enlever&quot;<br />
LangString msgRimozione1 ${LANG_GERMAN} &quot;Sind Sie sicher von entfernen vollständig wünschen&quot;<br />
LangString msgRimozione1 ${LANG_SPANISH} &quot;¿Usted seguro desear completo para quitar&quot;<br />
<br />
LangString msgRimozione2 ${LANG_ITALIAN} &quot;e tutti i suoi componenti?&quot;<br />
LangString msgRimozione2 ${LANG_ENGLISH} &quot;and all its members?&quot;<br />
LangString msgRimozione2 ${LANG_FRENCH} &quot;et tous ses membres?&quot;<br />
LangString msgRimozione2 ${LANG_GERMAN} &quot;und alle seine Mitglieder?&quot;<br />
LangString msgRimozione2 ${LANG_SPANISH} &quot;y todos sus miembros?&quot;<br />
<br />
Function un.onInit<br />
!insertmacro MUI_UNGETLANGUAGE<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;$(msgRimozione1) $(^Name) $(msgRimozione2)&quot; IDYES +2;<br />
  Abort<br />
FunctionEnd<br />
<br />
But when start the uninstaller, the messege doesn't switch with the language.<br />
<br />
Thanks,<br />
Lorenzo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">5th December 2005, 13:07</div></div><div class="posttext">I know this problem. Here (http://forums.winamp.com/showthread.php?s=&amp;threadid=147907&amp;highlight=onInit+messagebox) and here (http://forums.winamp.com/showthread.php?s=&amp;threadid=109913&amp;highlight=messagebox+onInit) discussion.<br />
You need to use $LANGUAGE variable in un.onInit function and define language string here.<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
...<br />
var mess<br />
Function un.onInit<br />
...<br />
${Switch} $LANGUAGE<br />
${Case} ${LANG_ENGLISH}<br />
   StrCpy $mess &quot;English message&quot;<br />
${Break}<br />
${Case} ${LANG_RUSSIAN}<br />
   StrCpy $mess &quot;Russian message&quot;<br />
${Break}<br />
${Case} ${LANG_ITALIAN}<br />
   StrCpy $mess &quot;Italian message&quot;<br />
${Break}<br />
${EndSwitch}<br />
<br />
MessageBox MB_OK &quot;$mess&quot;<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>