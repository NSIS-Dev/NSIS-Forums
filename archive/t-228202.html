<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" C-style comment problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  C-style comment problem NSIS Discussion" />
	
	<title> C-style comment problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  C-style comment problem</div>
<hr />
<div class="pda"><a href="t-228202.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228202">C-style comment problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th October 2005, 00:23</div></div><div class="posttext">Not sure if this has been reported before.<br />
I found that putting a complete C-style comment in a line skips everything preceding the comment in the line.<br />
This doesn't seem to be intuitively correct.<br />
See the attached script for an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th October 2005, 12:27</div></div><div class="posttext">Do you want to take a shot at it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th October 2005, 12:44</div></div><div class="posttext">I can try.<br />
IMHO what should be done is that any tokens after the comment should be added to tokens before the comment.<br />
e.g.,<br />
<br />
<br />
MessageBox MB_OK /* comment */ &quot;Hello&quot;<br />
<br />
<br />
should effectively become<br />
<br />
<br />
MessageBox MB_OK &quot;Hello&quot;<br />
<br />
<br />
Let me see if I can put together a patch.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th October 2005, 15:34</div></div><div class="posttext">I have submitted a patch (http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1324898&amp;group_id=22049&amp;atid=373087)  for this.<br />
I have tested it on a few scripts and it seems to be working OK. Give it a whirl and see if it is acceptable.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">12th October 2005, 16:57</div></div><div class="posttext">What about C++'s //? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">12th October 2005, 17:02</div></div><div class="posttext">Not part of the NSIS spec, sorry. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2005, 14:53</div></div><div class="posttext">Are you going to commit the first patch?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">15th October 2005, 16:22</div></div><div class="posttext">Sure, if you want me to.<br />
I thought you might want to test it before I commit it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2005, 16:29</div></div><div class="posttext">Take a look at the bug tracker, I've replied there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">15th October 2005, 17:14</div></div><div class="posttext">I have a question for you in the bug tracker- please take a look.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2005, 17:25</div></div><div class="posttext">You should get an e-mail for each change to the item in the tracker. If you don't, hit the monitor button again and make sure the e-mail address you gave SourceForge is working.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">15th October 2005, 18:36</div></div><div class="posttext">I usually do get emails. Your first reply to the patch wasn't emailed to me. Since then all replies have been emailed to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">18th October 2005, 00:49</div></div><div class="posttext">I was also wondering if you could put in // to comment a line.<br />
It gets a little annoying when you swap from a C\C++ IDE to nsis script and forget that nsis dosen't support //.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">18th October 2005, 01:32</div></div><div class="posttext">I suppose you could always create a feature request. But I don't think it will be a very high priority.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st November 2005, 20:30</div></div><div class="posttext">I was just playing around and I think I found a bug (unless I did someting stupid)<br />
<br />
The compiler is executing the code inside my /**/ comment<br />
It only seems to happen with include files</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2005, 20:14</div></div><div class="posttext">This is not related to this patch. The preprocessor comes before the comment handling, so !ifdef will always be handled. That's why your code is invalid. !ifdef doesn't have enough parameters.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">25th November 2005, 10:36</div></div><div class="posttext">yeah, i know its missing a parameter, but it seems wrong to me that a comment only comments out real commands, IMHO the comments must be parsed out first</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th November 2005, 11:53</div></div><div class="posttext">Ignore my last comment. Multiple line comments should be treated inside ifdef'ed blocks, just like normal comments. I've fixed this and add a test case to make sure it doesn't come back.<br />
<br />
Here's a stripped down version of the script showing the problem:!ifdef some_define_that_doesnt_exist<br />
/*<br />
!ifdef<br />
*/<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">25th November 2005, 12:53</div></div><div class="posttext">Yeah, I always wondered why !ifdef processing worked the way it did.<br />
I did run into the same problem as Anders but I assumed that preprocessor commands trumped comments.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>