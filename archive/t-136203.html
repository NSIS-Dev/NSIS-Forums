<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Network Paths Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Network Paths Problem NSIS Discussion" />
	
	<title> Network Paths Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Network Paths Problem</div>
<hr />
<div class="pda"><a href="t-136203.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136203">Network Paths Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">22nd May 2003, 09:38</div></div><div class="posttext">Hi all,<br />
<br />
I have a little problem with my installation script, when the user selects a network path the 'Next' button is disabled.<br />
<br />
Is there any way to overcome this problem or is it a bug?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">22nd May 2003, 09:50</div></div><div class="posttext">Network path as in UNC (e.g. \\machine\share) or a mapped network drive? It sounds like a bug either way to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">22nd May 2003, 09:54</div></div><div class="posttext">Sorry, forgot to mention, it is with UNC style paths.  I think that NSIS checks to see if the first char in the path is a letter and since it begins with a '\' it rejects it.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd May 2003, 17:06</div></div><div class="posttext">Works fine for me. What version of NSIS are using? Are you sure it's not the root directory that the user have choosen?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">23rd May 2003, 00:57</div></div><div class="posttext">kichik :up: you are right. The user was selecting the root of a network share and if you select a subdirectory it all works fine.<br />
<br />
My next question is how do i allow the user to select the root folder of a network share?  I am writing an installer which need to specify a network data share. :(<br />
<br />
Edit: I'm using NSIS 2.0b4 (CSV)  /  2.0b3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">23rd May 2003, 08:40</div></div><div class="posttext">AllowRootDirInstall true</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">23rd May 2003, 11:24</div></div><div class="posttext">Thanxs Sunjammer, that fixed that problem, however is there an equivalent command to 'AllowRootDirInstall true' that can be used inside a function.<br />
<br />
What i would like is to allow users to select root dir for the data folder, but not the main installation folder.  For a sample script see this thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=135956).<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">23rd May 2003, 11:34</div></div><div class="posttext">Not that I'm aware of, but I can see why you'd want that behaviour. How about you use .onVerifyInstDir to manually enforce the check in the second case?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">23rd May 2003, 15:22</div></div><div class="posttext">Thanxs Sunjammer, I think the following code should work (I won't be able to check for a few hours, no network @ home).<br />
<br />
This code uses a function available in NSIS Archive written by kichik and can be found here (http://nsis.sourceforge.net/archive/viewpage.php?pageid=251) <br />
<br />
<br />
Function .onVerifyInstDir<br />
  StrCmp $9 &quot;2&quot; DataPath All<br />
<br />
DataPath:<br />
;all valid if UNC <br />
  StrCpy $R2 $INSTDIR 2<br />
  StrCmp $R2 &quot;\\&quot; PathOK<br />
<br />
All:<br />
; Invalid path if root<br />
  Push $INSTDIR<br />
  call GetRoot<br />
  Pop $R1<br />
  StrCmp $R1 $INSTDIR &quot;&quot; PathOK<br />
  Abort <br />
<br />
PathOK:  <br />
FunctionEnd<br />
 <br />
<br />
Or see the full attached script.<br />
<br />
Vytautas</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>