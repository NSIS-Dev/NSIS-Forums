<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SelectSection, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SelectSection NSIS Discussion" />
	
	<title> SelectSection [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SelectSection</div>
<hr />
<div class="pda"><a href="t-175038.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=175038">SelectSection</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DigitAl56K</div><div class="date">2nd April 2004, 01:06</div></div><div class="posttext">Hi guys,<br />
<br />
I'm looking for a way for one section to turn on a bunch of others when enabled.<br />
<br />
Currently I'm looking at the SelectSection macro in Section.nsh, and doing something like this:<br />
<br />
Section &quot;First section&quot;<br />
!insertmacro SelectSection TEST<br />
SectionEnd<br />
<br />
Section &quot;Second section&quot; TEST<br />
MessageBox MB_OK &quot;Enabled!&quot;<br />
SectionEnd<br />
<br />
When I turn on the first section and hit next I expect to see the second section run, because the first section should have enabled it. This doesn't seem to be the case though.<br />
<br />
Any ideas where I'm going wrong, or alternative solutions for achieving the desired functionality?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">2nd April 2004, 01:25</div></div><div class="posttext">The 'one-section.nsi' in the examples directory should give you some ideas.<br />
<br />
Vytautas :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd April 2004, 05:31</div></div><div class="posttext">TEST is parsed as 0 because NSIS expects a number for what the SelectSection macro uses. You should use ${TEST}. Another problem is that TEST will not be defined at that point so you'd need to define a function after the second section. That function should enable that section and should be called from the first section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DigitAl56K</div><div class="date">5th April 2004, 04:11</div></div><div class="posttext">kichik: Firstly, thanks for actually offering some help, and not simply pointing me at an example file already referenced in the usage notes....<br />
<br />
Second, perhaps you can help me understand how parameters are passed. If I look at the SelectSection macro code I see this:<br />
<br />
!macro SelectSection SECTION<br />
<br />
Push $0<br />
SectionGetFlags &quot;${SECTION}&quot; $0<br />
IntOp $0 $0 | ${SF_SELECTED}<br />
SectionSetFlags &quot;${SECTION}&quot; $0<br />
Pop $0<br />
<br />
<br />
Which lead me to believe that SECTION should be the section name, not enclodes in ${}, since this is already added in the macro code. Obviously this isn't the case :)<br />
<br />
It seems that one section can't enable another? I can make SelectSection work when I call it from a callback like .onSelChange, but I think there is an ordering problem.<br />
<br />
You say I can't use TEST until it has been defined, so I can't try to enable the TEST section until after its already been processed, which means even if I enable it, it won't run...<br />
<br />
Its kind of annoying that there is no callback that occurs right when the user leaves the components page but before sections are actually processed to enable you to manage this kind of thing. It makes my problem a lot harder...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th April 2004, 07:59</div></div><div class="posttext">Section &quot;First section&quot;<br />
  Call SelectSecond<br />
SectionEnd<br />
<br />
Section &quot;Second section&quot; TEST<br />
  MessageBox MB_OK &quot;Enabled!&quot;<br />
SectionEnd<br />
<br />
Function SelectSecond<br />
  !insertmacro SelectSection ${TEST}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th April 2004, 11:31</div></div><div class="posttext">Macro parameters are passed defines. For example:!macro echo msg<br />
DetailPrint &quot;${msg}&quot;<br />
!macroend<br />
!insertmacro echo &quot;a message&quot;will translate intoDetailPrint &quot;a message&quot;You can think of the !insertmacro lines as:!define msg &quot;a message&quot;<br />
DetailPrint &quot;${msg}&quot;As for one section enabling another, you can use the function trick I talked about and Joost demonstrated.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>