<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Get X/Y coordinates of install screen, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Get X/Y coordinates of install screen NSIS Discussion" />
	
	<title> Get X/Y coordinates of install screen [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Get X/Y coordinates of install screen</div>
<hr />
<div class="pda"><a href="t-348756.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=348756">Get X/Y coordinates of install screen</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">scubanarc</div><div class="date">20th September 2012, 04:08</div></div><div class="posttext">Hey Guys,<br />
<br />
I've been searching for a couple of days on how to do this and have finally gave in and am asking for help.<br />
<br />
I need to get the top-left or bottom-left x/y coordinates of the currently shown NSIS window. I'm supposed to pass these values through the registry to another application that is going to pop up at install-time and I want it to pop at the exact same location.<br />
<br />
Any thoughts here?<br />
<br />
 - jason</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">20th September 2012, 05:51</div></div><div class="posttext">You need to call GetWindowRect using the system plugin.<br />
http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519%28v=vs.85%29.aspx<br />
<br />
Example: http://forums.winamp.com/showthread.php?p=2688175#post2688175</div></div><hr />


<div class="post"><div class="posttop"><div class="username">scubanarc</div><div class="date">20th September 2012, 16:46</div></div><div class="posttext">Hey MSG, thanks for the reply. This helps a lot. If you could help me understand the mechanics of this a little bit I'd appreciate it.<br />
<br />
<br />
        nxs::getWindow /NOUNLOAD<br />
        Pop $1  ;(now contains the HWND of the nxs window)<br />
        System::Alloc 16<br />
        Pop $2<br />
        System::Call &quot;user32::GetWindowRect(i r1, i r2)&quot;<br />
        System::Call &quot;*$2(i .r3, i .r4, i, i)&quot;<br />
        System::Free $2<br />
        IntOp $4 $4 + 20<br />
        System::Call 'User32::SetWindowPos(i $1, i $1, i $3, i $4, i 0, i 0, i 5)'<br />
<br />
I understand everything up to this line:<br />
<br />
        System::Call &quot;*$2(i .r3, i .r4, i, i)&quot;<br />
<br />
What does *$2 mean and what does that line accomplish?<br />
<br />
Also, I get that the lpRECT structure contains the values I want, but I don't understand how to get those values out.<br />
<br />
 - jason</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">20th September 2012, 19:54</div></div><div class="posttext">* means struct syntax, *$2 means access struct at memory address stored in $2 and i.r# (type input output, . (dot) means no input) extracts the first two INT32 fields in the RECT struct...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">scubanarc</div><div class="date">20th September 2012, 22:04</div></div><div class="posttext">Thank you very much for your help. I was able to get the values and use them with this example.<br />
<br />
 - jason</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>