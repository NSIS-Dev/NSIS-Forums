<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Multiple Install Paths, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Multiple Install Paths NSIS Discussion" />
	
	<title> Multiple Install Paths [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Multiple Install Paths</div>
<hr />
<div class="pda"><a href="t-284993.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=284993">Multiple Install Paths</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lanchfn21</div><div class="date">14th January 2008, 22:13</div></div><div class="posttext">Hi,<br />
<br />
I am trying to update a previous installer (one that I did not write) to handle installing on Vista.<br />
<br />
The way it is now, the default installation directory is &quot;$PROGRAMFILES\[app name]&quot;. This is to remain the same. <br />
<br />
What I need is to set a different path when the installer in running on Vista. <br />
<br />
I thought I had a good (one that would work) method to accomplish this but seem to have run into a snag. The following is part of what I have / do.<br />
<br />
First, I use GetVersion::WindowsName and store it in $R0. Next, I used this<br />
<br />
${if} $R0 == &quot;Vista&quot;<br />
	StrCpy &quot;$DefaultDir&quot; &quot;$APPDATA\[app name]&quot;<br />
  ${else}<br />
	StrCpy &quot;$DefaultDir&quot; &quot;$PROGRAMFILES\[app name&quot;<br />
  ${endif}<br />
<br />
where DefaultDir is just a variable I declared. <br />
<br />
When I go to set the default installation directory I thought using <br />
<br />
InstallDir &quot;$DefaultDir&quot; <br />
<br />
would work, but when the option to select the default directory would happen, that field is blank and I must browse to get the path.<br />
<br />
Any ideas on how I can go about getting this to work properly? Any suggestions would be greatly appreciated.<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th January 2008, 22:35</div></div><div class="posttext">Much easier:<br />
!include WinVer.nsh<br />
<br />
InstallDir &quot;$PROGRAMFILES\[app name]&quot;<br />
<br />
${If} ${AtleastWinVista}<br />
  StrCpy $INSTDIR &quot;$APPDATA\[app name]&quot;<br />
${EndIf}<br />
<br />
The ${If} block can go in .onInit or anywhere before the directory page.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sgiusto</div><div class="date">14th January 2008, 22:38</div></div><div class="posttext">hi,<br />
If you are using MUI you should define set $INSTDIR value:<br />
quoting from MUI manual<br />
<br />
MUI_DIRECTORYPAGE_VARIABLE variable<br />
Variable in which to store the selected folder.<br />
Default: $INSTDIR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lanchfn21</div><div class="date">14th January 2008, 23:24</div></div><div class="posttext">Thanks for the quick replys. I'll try that.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>