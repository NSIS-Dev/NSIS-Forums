<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" check if the ip is correct, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  check if the ip is correct NSIS Discussion" />
	
	<title> check if the ip is correct [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  check if the ip is correct</div>
<hr />
<div class="pda"><a href="t-174707.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174707">check if the ip is correct</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">30th March 2004, 12:02</div></div><div class="posttext">hi!<br />
i have a little problem..<br />
i have to check if a IP is valid... i have this Ip in a uservar [the ip is: 192.168.2.11] and i only want to check if the IP is correct. <br />
now i use the iptest.dll<br />
[i hope i do ]:p <br />
is there any bug in this following code?<br />
<br />
    !insertmacro ReadOutIp<br />
    StrCpy $0 $Ip<br />
    Loop:<br />
        Push $0<br />
        ;Call GetNextIp<br />
        Call CheckIp<br />
        MessageBox MB_OK &quot;Type of Ip $2&quot;<br />
        Pop $2 ; Type of current IP-address<br />
        Pop $1 ; Current IP-address<br />
        Pop $0 ; Remaining addresses<br />
        StrCmp $2 '1' '' NoLoopBackIp<br />
        MessageBox MB_OK &quot;LoopBack IP-address: $1&quot;<br />
        Goto Continue<br />
    NoLoopBackIp:<br />
        StrCmp $2 '2' '' NoAPA<br />
        MessageBox MB_OK &quot;Automatic Private IP-address: $1&quot;<br />
        Goto Continue<br />
    NoAPA:<br />
        StrCmp $2 '3' '' NoLanIp<br />
        MessageBox MB_OK &quot;Network IP-address: $1&quot;<br />
        Goto Continue<br />
    NoLanIp:<br />
        MessageBox MB_OK &quot;Internet IP-address: $1&quot;<br />
        Goto Continue<br />
    Continue:<br />
        ;StrCmp $0 '' ExitLoop Loop<br />
        Goto ExitLoop<br />
    ExitLoop:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">30th March 2004, 15:23</div></div><div class="posttext">Hi :)<br />
<br />
Well actually there is a little bug:<br />
<br />
As apparently you want to test only one IP address, you do NOT use the function &quot;GetNextIP&quot;. Therefore, you don't have &quot;Remaining adresses&quot;, and there are *two* values on the stack, and not *three*. So basically there is one &quot;Pop&quot; in excess, and you're not testing the right one. Here is the corrected code, it should work :<br />
<br />
<br />
Function testIp<br />
  Push $0<br />
  Push $1<br />
<br />
  StrCpy $0 $Ip<br />
  Loop:<br />
      Push $0<br />
      Call CheckIp<br />
      Pop $1 ; Type of current IP-address<br />
      Pop $0 ; Current IP-address<br />
      MessageBox MB_OK &quot;Type of Ip $1&quot;<br />
<br />
      StrCmp $1 '1' '' NoLoopBackIp<br />
      MessageBox MB_OK &quot;LoopBack IP-address: $0&quot;<br />
      Goto Continue<br />
  NoLoopBackIp:<br />
      StrCmp $1 '2' '' NoAPA<br />
      MessageBox MB_OK &quot;Automatic Private IP-address: $0&quot;<br />
      Goto Continue<br />
  NoAPA:<br />
      StrCmp $1 '3' '' NoLanIp<br />
      MessageBox MB_OK &quot;Network IP-address: $0&quot;<br />
      Goto Continue<br />
  NoLanIp:<br />
      MessageBox MB_OK &quot;Internet IP-address: $0&quot;<br />
      Goto Continue<br />
  Continue:<br />
      Goto ExitLoop<br />
  ExitLoop:<br />
<br />
  Pop $1<br />
  Pop $0<br />
FunctionEnd<br />
 <br />
<br />
Oh, and a little test function: <br />
<br />
<br />
Function test<br />
  StrCpy $Ip &quot;192.168.2.11&quot;  ; Network IP-address<br />
  Call testIp<br />
  StrCpy $Ip &quot;169.254.10.10&quot; ; Automatic Private IP-address<br />
  Call testIp<br />
  StrCpy $Ip &quot;127.0.0.1&quot;     ; LoopBack IP-address<br />
  Call testIp<br />
  StrCpy $Ip &quot;66.35.250.209&quot; ; Internet IP-address<br />
  Call testIp<br />
FunctionEnd<br />
<br />
<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dj Nyx</div><div class="date">31st March 2004, 06:43</div></div><div class="posttext">great, thx</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>