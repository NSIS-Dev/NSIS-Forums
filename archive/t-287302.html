<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 2.35 nsExec Trojan.Win32.Agent.fqk Kaspersky false positive, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  2.35 nsExec Trojan.Win32.Agent.fqk Kaspersky false positive NSIS Discussion" />
	
	<title> 2.35 nsExec Trojan.Win32.Agent.fqk Kaspersky false positive [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  2.35 nsExec Trojan.Win32.Agent.fqk Kaspersky false positive</div>
<hr />
<div class="pda"><a href="t-287302.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287302">2.35 nsExec Trojan.Win32.Agent.fqk Kaspersky false positive</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st February 2008, 08:04</div></div><div class="posttext">Just to keep you informed - I've sent a report to Kaspersky labs, and they confirmed 'false positive' situation, promised to fix this soon. Can be reproduced on simple scriptName &quot;nsExec Test&quot;<br />
OutFile &quot;nsExec Test.exe&quot;<br />
ShowInstDetails show<br />
Section &quot;MakeNSIS commands help&quot;<br />
;  ExecDos::exec '&quot;c:\qstar\bin\helper.exe&quot; inssvc stop' &quot;&quot; &quot;$EXEDIR\helper.log&quot;<br />
nsexec::exec '&quot;c:\qstar\bin\helper.exe&quot; inssvc stop'<br />
Pop $0<br />
DetailPrint &quot; c:\qstar\bin\helper.exe      Return value: $0&quot;<br />
SectionEndExecDos not caused any problems (today :) ).<br />
Antivirus alert was on tmp file during nsExec.dll extraction to the temporary dir.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd February 2008, 09:25</div></div><div class="posttext">Will this automatic stuff ever stop? We should add all NSIS files into the default Windows installation or something...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">22nd February 2008, 14:28</div></div><div class="posttext">False positive fixed in today's update form Kaspersky.<br />
If I correctly understood KichiK' note about 'c:\qstar\...' Now in script #InstallDir &quot;$PROGRAMFILES64\${SHORT_NAME}&quot;<br />
InstallDir &quot;C:\${SHORT_NAME}&quot; both root and $PROGRAMFILES tested, and I am realy don't like all these Pithon's, MinGW and other installing to disk root, but executive director says this is better and so it is. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd February 2008, 14:36</div></div><div class="posttext">I wasn't referring to your script. I was complaining about the automatic process anti-virus companies use that cause all of these false positives. Then I went on to &quot;suggest&quot; a solution of including all NSIS files in the default installation of Windows because surely they check for false positives on those.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">16th April 2008, 18:00</div></div><div class="posttext">Several of our testers are getting a hit on Trojan.Win32.Agent.jkv.  Is there a way to identify/capture the tmp file to send in to Kaspersky?  We need to get past this if it is a false positive.<br />
<br />
From AV Log <br />
C:\DOCUME~1\lmeadows\LOCALS~1\Temp\nsb32.tmp\ns33.tmp;is a Trojan<br />
Trojan.Win32.Agent.jzv;4/15/2008 9:34:31 AM<br />
<br />
This seems to be repeated for 10 temporary files during the install.  An AV scan of the machines HD, once the install completes, does not seem to find any trace of this virus.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">16th April 2008, 19:18</div></div><div class="posttext">A co-worker has identified that nsExec.dll is the problem.  A quote from my co-worker:<br />
We've secretly replaced our fine ground nsExec coffee with Folger's ExecWaits. Let's see if Kaspersky notices...<br />
<br />
Nio, Kaspersky isn't complaining at all. No ugly red windows popping up.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">21st April 2008, 13:19</div></div><div class="posttext">In case anyone is interested, we resolved this problem by extracting the nsExec.dll from NSIS 2.36 and using that instead of the one from NSIS 2.29.  There was a fix, so apparently it is no longer identified as a false positive in version 2.36 by Kaspersky.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">21st May 2008, 13:51</div></div><div class="posttext">This worked for awhile.  A new virus report has come in from the latest build today.  Here is the information reported:  I received anti-virus alert that trojan program &quot;Trojan.win32.Agent.muq&quot; was detected.<br />
file ns88.tmp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsfis</div><div class="date">29th July 2008, 12:27</div></div><div class="posttext">Same happens here. Our users are reporting problem with Avast antivirus. Currently we are using NSIS 2.37, it is OK when we use nsexec.dll from NSIS 2.29. In fact, the problem is not with nsexec.dll but with its temporary copy (e.g. ns6A.tmp) which is different only in 4 bytes. Does anyone know why NSIS creates modified temporary copy of nsexec.dll?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">29th July 2008, 12:49</div></div><div class="posttext">IIRC the nsexec copy is a exe and not a dll</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>