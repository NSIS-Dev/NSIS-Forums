<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Howto add Timestamp to outfile?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Howto add Timestamp to outfile? NSIS Discussion" />
	
	<title> Howto add Timestamp to outfile? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Howto add Timestamp to outfile?</div>
<hr />
<div class="pda"><a href="t-257871.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257871">Howto add Timestamp to outfile?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">helios73</div><div class="date">19th October 2006, 10:13</div></div><div class="posttext">Hello,<br />
<br />
I want to generate the outfile more dynamically by adding a timestamp like MMDDYY_HHMM. <br />
<br />
Searching the doc I found __DATE__, __TIME__ and __TIMESTAMP__. __DATE__ works but if I add the __TIME__ information the filename is not writeable because of the ':' char. <br />
<br />
Can someone give me some code for this task?<br />
<br />
Regards,<br />
<br />
Michael</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th October 2006, 10:32</div></div><div class="posttext">You can create a program that'd create a file with a date in it. Execute this program using !system and then !include the file it creates.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">helios73</div><div class="date">20th October 2006, 11:10</div></div><div class="posttext">Thanks kichik, but that is not what I'm looking for. I already have some time information inside the NSIS archive but I want to distinct the generated NSIS archives by their names and therefore I need something like a timestamp in the filename. <br />
<br />
Regards,<br />
<br />
Michael</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th October 2006, 11:24</div></div><div class="posttext">The generated file can have something like:!define MYTIMESTAMP &quot;something smoething&quot;You can then use that define with OutFile:OutFile &quot;my-setup-${MYTIMESTAMP}.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">helios73</div><div class="date">22nd October 2006, 17:23</div></div><div class="posttext">Thank you kichik for the hint.<br />
<br />
I added the following code to my ant build script:<br />
<br />
...<br />
&lt;tstamp/&gt;<br />
&lt;echo file=&quot;${nsis.dir}\OutfileTimestamp.nsh&quot; append=&quot;false&quot;&gt;!define MYTIMESTAMP &quot;${DSTAMP}_${TSTAMP}&quot;<br />
&lt;/echo&gt;<br />
...<br />
<br />
<br />
and to the nsi script I added:<br />
<br />
...<br />
!include OutfileTimestamp.nsh<br />
OutFile &quot;setup_${PRODUCT_NAME}_${PRODUCT_VERSION}_${MYTIMESTAMP}.exe&quot; <br />
...<br />
<br />
Regards,<br />
<br />
Michael</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mutantbc</div><div class="date">27th February 2007, 02:17</div></div><div class="posttext">Hi,<br />
<br />
I am having problem when renaming the file to output a filename with datetime.<br />
<br />
1.) i was able to create a file without datetime e.g. myfile.dat<br />
2.) i was able to rename myfile.dat to myfile-101109 27 Feb, 2007.dat<br />
3.) i cant rename the myfile.dat anymore, why?<br />
<br />
!define /date DATE &quot;%H:%M:%S %d %b, %Y&quot;<br />
<br />
IfFileExists $MyFilePath lbl_backupFile lbl_end<br />
  lbl_backupFile:<br />
  Rename $MyFiletPath &quot;$R9\backup\myfile-${DATE}.dat&quot;<br />
  lbl_end:<br />
  ...exit the program</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">27th February 2007, 10:49</div></div><div class="posttext">i cant rename the myfile.dat anymore, why?Your code is trying to use an invalid name when it renames the file.<br />
<br />
Instead of using a name like &quot;myfile-101109 27 Feb, 2007.dat&quot;, your code tries to rename the file to something like &quot;myfile-10:38:36 27 Feb, 2007.dat&quot;<br />
<br />
Try changing<br />
<br />
!define /date DATE &quot;%H:%M:%S %d %b, %Y&quot;<br />
<br />
to<br />
<br />
!define /date DATE &quot;%H-%M-%S %d %b, %Y&quot;<br />
<br />
so your code will rename the file to something like &quot;myfile-10-42-06 27 Feb, 2007.dat&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mutantbc</div><div class="date">28th February 2007, 00:53</div></div><div class="posttext">I have tried that, but still step 3 doesnt work. I dont know why, step 1 and 2 are working ok.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mutantbc</div><div class="date">1st March 2007, 08:03</div></div><div class="posttext">any help on this one?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st March 2007, 19:23</div></div><div class="posttext">Are you sure that's really what you want to do? DATE will contain the date when you compiled the installer and not the current date on the user's machine... You should get the date at runtime using one of the available functions (http://nsis.sourceforge.net/Special:Search?search=date).<br />
<br />
As for the renaming issue, did you create the backup folder first?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisMorton75</div><div class="date">21st March 2007, 20:09</div></div><div class="posttext">It's hard to search for special characters for an explanation of how they are used.<br />
Can someone explain the use of the forward-slash in<br />
!define /date DATE &quot;%H:%M:%S&quot;<br />
<br />
Is /date calling an NSIS command or an OS command (and if so why isn't &quot;!system&quot; used ) ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st March 2007, 20:58</div></div><div class="posttext">/date is a switch for the !define command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st March 2007, 20:58</div></div><div class="posttext">http://nsis.sourceforge.net/Docs/Chapter5.html#5.4.1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChrisMorton75</div><div class="date">21st March 2007, 21:03</div></div><div class="posttext">thanks for the information</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>