<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / ), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / ) NSIS Discussion" />
	
	<title> Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / ) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )</div>
<hr />
<div class="pda"><a href="t-83283.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=83283">Converting a String ($INSTDIR) from back to forward slash ( \ -&gt; / )</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">amitchel_us</div><div class="date">2nd April 2002, 00:09</div></div><div class="posttext">I'm planning to use NSIS (which rocks) to install a Java application on WinNT/2000.  The framework includes configuration files with directory listings.  For example :<br />
<br />
UPLOAD_DIR = d:/InstallDir/subDir<br />
<br />
InstallDir is the same as NSIS' $INSTDIR.  So if the user decides to install on F:\InstallDir, I want to change my configuration files to F:/InstallDir/subDir.<br />
<br />
Java's file are either forward slash (/), or double-backslash (\\).  A single backslash (\) is an escape character.  So, F:\InstallDir is invalid.  <br />
<br />
Here's what I've thought of :<br />
1. use NSIS strcmp, strcpy, strlen.  I don't think this will work because there's no for..loop to loop through each character in $INSTDIR.<br />
<br />
2. use an MS-Dos command through Exec to replace the slashes.  It doesn't look like there's an easy way to do it.  Win-2000's wsh may have it, but most of my customers are NT.  If I could call it, though, I could probably write the result to a file and then read the file back in to get the value<br />
<br />
3. Check this forum for similar items.  I didn't see any.<br />
<br />
Thanks in advance,<br />
Andy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">2nd April 2002, 05:42</div></div><div class="posttext">Look at the example for parsing $CMDLINE parameters.  Instead of delimiting by ' ',  just scan until you hit the \ and then do a strcat.  Like this:<br />
<br />
#Scan for parameters $R1 is the counter which points to the '\'<br />
IntOp $R1 $R1 - 1       ; Move pointer back to point before the '\'<br />
StrCpy $R2 &quot;/&quot;<br />
StrCpy $R0 $R0 &quot;&quot; $R1   ; Copy until the '\'<br />
StrCpy $R0 &quot;$R0$R2&quot;     ; Replace the '\' with '/'<br />
<br />
I think that should work,  but I'm also sure someone else will have a much simpler solution,  they always do.<br />
<br />
Hope that helps (a little).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">2nd April 2002, 13:30</div></div><div class="posttext">Since I guess that there will be multiple '\' that need to be replaced, just scan the complete string character by character and replace if recessary will be more easy than waiting with copieng till a '\' is encountered. But that's just my guess. Otherwise you will have a loop with two possibilities and a lot of jumps. With this solution you just copie each character to a new string unless it's equal to '\'.<br />
<br />
Take a look at the source. It's a function that replaces in a string any substring by another string (StrReplace).<br />
<br />
I hope this will answer the question.<br />
<br />
Good luck,<br />
greetz, Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">2nd April 2002, 15:06</div></div><div class="posttext">I generalized the ReplChar function to a StrReplace function that replaces any substring by an other string. The statement above was not correct, the previous function only worked for substrings of length 1. That was sufficient for your problem. The new function can take substrings of any length. But anyway, take a look at the general function. I guess more people will like this one...<br />
<br />
This function can of course also solve the problem of replacing '\' by '/'.<br />
<br />
Good luck, greetz,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">amitchel_us</div><div class="date">3rd April 2002, 00:30</div></div><div class="posttext">That's terrific.  It just clicked into place once I saw how you used labels for the loops.  I had no idea.  Thanks for the cleverness.<br />
<br />
Andy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">3rd April 2002, 07:07</div></div><div class="posttext">Thx for the nice words :D :D :D<br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">15th January 2003, 19:46</div></div><div class="posttext">Hi,<br />
<br />
I guess there is a silly person here who doesn't know how to integrate your StrReplace function and put it to use.<br />
<br />
I need to replace Strings in a file, but how do I specify a file name or get your StrReplace function read my file?<br />
<br />
Could you please advice. Thanks.<br />
:o</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">15th January 2003, 20:48</div></div><div class="posttext">Read this:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=121562<br />
<br />
-Hendri.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>