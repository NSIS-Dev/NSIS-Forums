<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Creating Multiple Installers At Compile Time, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Creating Multiple Installers At Compile Time NSIS Discussion" />
	
	<title> Creating Multiple Installers At Compile Time [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Creating Multiple Installers At Compile Time</div>
<hr />
<div class="pda"><a href="t-317119.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317119">Creating Multiple Installers At Compile Time</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">deanbayley</div><div class="date">18th February 2010, 16:31</div></div><div class="posttext">Hi guys..<br />
<br />
Can NSIS create multiple installers at compile time, i want it to create:<br />
<br />
<br />
<br />
 Product_Name_2000-XP_SP2.exe<br />
 Product_Name_XP_SP3_Vista-7.exe<br />
<br />
<br />
The 2000 XP one will have 2 sections missing, one section checks if the windows installer is up to date and the second installs the .NET framework v2..<br />
<br />
My installer is 35mb and about 24mb is for the framework and windows installer v3..<br />
<br />
I know i could make the installer download the files only if required but where my application is deployed customers often download on 1 machine and install on another...<br />
<br />
D.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">19th February 2010, 08:56</div></div><div class="posttext">It's not really clear to me what it is you want. Do you want to make two installers? Just use two .nsi files, then.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">19th February 2010, 13:35</div></div><div class="posttext">I suppose you want to create two installers with one script.<br />
As far as I know this is not possible.<br />
<br />
What you can do is to put all shared code in a nsh header, and include this header into two seperate scripts with the OS specific code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsvargas</div><div class="date">19th February 2010, 14:22</div></div><div class="posttext">I've asked the same question once (here (http://forums.winamp.com/showthread.php?s=&amp;threadid=290279)), and as far as I know, it is not possible.<br />
<br />
I still needed to create two installers with one script this is what I did:<br />
<br />
I've put the sections I needed to be on one installer but not in the other inside &quot;!if&quot; clauses, like this:<br />
<br />
<br />
!if INSTALL_TYPE == &quot;TYPE_FULL&quot;<br />
Section OnlyInFull<br />
 ... ; the files that go in this section<br />
SectionEnd<br />
!endif<br />
<br />
<br />
then in the beginning of the file, I create a &quot;!define&quot; that can be defined optionally by the command line compiler<br />
<br />
<br />
!ifndef INSTALL_TYPE<br />
  !define INSTALL_TYPE &quot;TYPE_FULL&quot;<br />
!endif<br />
<br />
<br />
finally I've created a .bat file that executes the compiler two times:<br />
<br />
<br />
makensis.exe /DINSTALL_TYPE=&quot;TYPE_FULL&quot;     script.nsi<br />
makensis.exe /DINSTALL_TYPE=&quot;TYPE_NOT_FULL&quot; script.nsi<br />
<br />
<br />
actually you can call the second time without the /D option, but I've put there for clarity.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ssssss</div><div class="date">11th March 2010, 09:44</div></div><div class="posttext">rsvargas<br />
It's a good solution, but there's one mistake (misprint). Must be:<br />
!if ${INSTALL_TYPE} == &quot;TYPE_FULL&quot;<br />
...<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2010, 12:00</div></div><div class="posttext">In fact it really should be:<br />
!if `${INSTALL_TYPE}` == `TYPE_FULL`<br />
...<br />
!endif<br />
Notice the quotes around ${INSTALL_TYPE}. Without them, and if INSTALL_TYPE is undefined or empty, your script will not compile.<br />
<br />
(FYI I use `` as primary quotes followed by ' and &quot;).<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>