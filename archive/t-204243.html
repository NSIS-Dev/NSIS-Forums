<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to localize !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN to it's very own NSH file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to localize !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN to it's very own NSH file NSIS Discussion" />
	
	<title> How to localize !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN to it's very own NSH file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to localize !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN to it's very own NSH file</div>
<hr />
<div class="pda"><a href="t-204243.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=204243">How to localize !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN to it's very own NSH file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">8th January 2005, 05:47</div></div><div class="posttext">Each section has its own description. But, each section really has it's own .nsh file and so the section is not located within the main .nsi.<br />
<br />
I am trying to localize section properties. One of the properties being the description for the section.<br />
<br />
e.g. 10 sections make 10 nsi files. The main nsi script holds a reference to each nsh file because of a description. Is it possible to bypass this?<br />
<br />
I'd really like to localize each sections description to it's own nsh file. Instead of having descriptions all bunched up at the bottom of the main nsi. I'd like to get them divided and put into their corresponding nsh file.<br />
<br />
Does this make sense? Is this possible? I would really appreciate any help on this. Thanks!<br />
<br />
PS. I've already applied &quot;8. Section descriptions of the MUI readme&quot;. This is close but no cigar.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th January 2005, 15:36</div></div><div class="posttext">You can have a macro like the following to insert in each .nsh:!macro desc sec text<br />
!system 'echo !insertmacro MUI_DESCRIPTION_TEXT ${sec} \<br />
  &quot;${text}&quot; &gt;&gt; $%TEMP%\descs.nsh'<br />
!macroendBefore you start including your .nsh files, use this:!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN &gt; $%TEMP%\descs.nsh'And after you finish including the .nsh files, use this:!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_END &gt;&gt; $%TEMP%\descs.nsh'Finally, to get the descriptions into your script, use:!include $%TEMP%\descs.nsh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">9th January 2005, 01:57</div></div><div class="posttext">Thank you for the reply Kichik. I am sorry but I just cannot get it to work. Here is how I tried to apply it.<br />
This is what the main .nsi looks like. <br />
<br />
!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN &gt; $%TEMP%\descs.nsh'<br />
!include &quot;include\sample.nsh&quot;<br />
!include &quot;include\example.nsh&quot;<br />
!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_END &gt;&gt; $%TEMP%\descs.nsh'<br />
!include $%TEMP%\descs.nsh<br />
The following piece of code you've supplied I think might have me confused and hitting a dead end.<br />
!macro desc sec text<br />
!system 'echo !insertmacro MUI_DESCRIPTION_TEXT ${sec} \<br />
  &quot;${text}&quot; &gt;&gt; $%TEMP%\descs.nsh'<br />
!macroend<br />
I've placed it at the top and tried it at the bottom of the nsh. I've renamed ${sec} &amp; ${text} to ${sectionname} &amp; ${sectiondescription}. I've placed my !insertmacro MUI_DESCRIPTION_TEXT ${sectionname} &quot;$(sectiondescription)&quot;within, above and below the macro. Man, I've tried a few things and searched the web. Can you help provide an example or correct me where I've gone wrong?<br />
<br />
Thank you very much for your time and help on this question.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">9th January 2005, 02:16</div></div><div class="posttext">!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN &gt; $%TEMP%\descs.nsh'Probably this line should have &quot;&gt;&gt;&quot; instead of &quot;&gt;&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">9th January 2005, 02:54</div></div><div class="posttext">Thanks for that fast reply and sharp eagle eye deguix.<br />
Now I know this little change made a big impact because<br />
I currently cannot compile :(<br />
<br />
Here is some of the verbose error feedback<br />
!system: &quot;echo !insertmacro MUI_FUNCTION_DESCRIPTION_END &gt;&gt; C:\DOCUME~1\VICTOR~1.GON\LOCALS~1\Temp\descs.nsh&quot;<br />
!system: returned 0<br />
!include: &quot;C:\DOCUME~1\VICTOR~1.GON\LOCALS~1\Temp\descs.nsh&quot;<br />
!insertmacro: MUI_FUNCTION_DESCRIPTION_BEGIN<br />
!insertmacro: end of MUI_FUNCTION_DESCRIPTION_BEGIN<br />
!insertmacro: MUI_FUNCTION_DESCRIPTION_END<br />
!insertmacro: end of MUI_FUNCTION_DESCRIPTION_END<br />
!insertmacro: MUI_FUNCTION_DESCRIPTION_BEGIN<br />
Error: Function named &quot;.onMouseOverSection&quot; already exists.<br />
Error in macro MUI_FUNCTION_DESCRIPTION_BEGIN on macroline 10<br />
!include: error in script: &quot;C:\DOCUME~1\VICTOR~1.GON\LOCALS~1\Temp\descs.nsh&quot; on line 3<br />
Error in script &quot;C:\Documents and Settings\Victor B. Gonzalez\Desktop\Example\Copy of nsissource1.7 (template).nsi&quot; on line 62 -- aborting creation process<br />
I assume the error on line 3 for the macro is<br />
1. !macro desc sec text<br />
2. !system 'echo !insertmacro MUI_DESCRIPTION_TEXT ${sec} \<br />
3. &quot;${text}&quot; &gt;&gt; $%TEMP%\descs.nsh'<br />
The line in the main nsi (62) which causes the error is<br />
the following61. !system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_END &gt;&gt; $%TEMP%\descs.nsh'<br />
62. !include $%TEMP%\descs.nsh<br />
Can you help school me on the problem? Thank you very much!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">9th January 2005, 06:06</div></div><div class="posttext">OK, I've managed to find out what the problem is. It seems everytime the following code is called!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN &gt;&gt; $%TEMP%\descs.nsh'<br />
!include &quot;example.nsh&quot;<br />
!system 'echo !insertmacro MUI_FUNCTION_DESCRIPTION_END &gt;&gt; $%TEMP%\descs.nsh'<br />
!include $%TEMP%\descs.nshThe temporary file created will not delete itself. Neither can another call to the code reset the temporary file. What seems to happen is, is when the code is called, the script will append itself to itself again. This leads to the error.<br />
<br />
What I've done was, I opened the temporary file in question and deleted it's contents. Ran the script again (error free), and the temporary file looked perfect.<br />
<br />
The latest problem though is although everything looks good, script runs fine, the temporary file looks perfect, something is not working. I say this because when I hover over the description in the final installer, I see no description :(<br />
<br />
Any Ideas? Thank you for your time :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">9th January 2005, 06:16</div></div><div class="posttext">I got it to work. I simply replaced the location of the following code snippet &quot;!include $%TEMP%\descs.nsh&quot;. I placed it where descriptions normally go and all seems to work fine now. Thanks a million for your help fellas!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th January 2005, 13:10</div></div><div class="posttext">deguix, it should be &gt;, not &gt;&gt;. If it's &gt;&gt;, it will simply append and not replace. That's why you began to get errors, vbgunz. As for the macro, by inserting a macro, I meant using !insertmacro, not actually inserting the macro itself in every .nsh file. But I guess you've already figured that one out since it's working now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">9th January 2005, 19:29</div></div><div class="posttext">Awesome! &gt; Vs &gt;&gt; is true. Although &gt;&gt; Helped me troubleshoot the problem somewhat ;) Thanks a million Kichik, thats powerful!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>