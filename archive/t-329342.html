<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Invalid command: UAC::RunElevated, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Invalid command: UAC::RunElevated NSIS Discussion" />
	
	<title> Invalid command: UAC::RunElevated [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Invalid command: UAC::RunElevated</div>
<hr />
<div class="pda"><a href="t-329342.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329342">Invalid command: UAC::RunElevated</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">6th April 2011, 00:36</div></div><div class="posttext">when i compile my script i get:<br />
<br />
Invalid command: UAC::RunElevated<br />
<br />
UAC.dll is in my plugin's directory, but i am not sure its it loading properly:<br />
<br />
in the installer output i see:<br />
<br />
Processing plugin dlls<br />
many individual lines are listed<br />
e.g.<br />
BgImage::Clear<br />
BgImage::Sound<br />
<br />
but for UAC I have:<br />
<br />
UAC::_<br />
<br />
does UAC::_ mean its collecting all functions or does this indicate a problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">6th April 2011, 01:13</div></div><div class="posttext">assuming UAC::_ is not indicating a problem ...<br />
i also verified that UAC.nsh is loaded correctly<br />
<br />
(tried the .dll from the current branch as well as experimental, tried both the &quot;A&quot; and &quot;U&quot; versions... same result)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">6th April 2011, 01:55</div></div><div class="posttext">well i got it to compile by changing:<br />
<br />
UAC::RunEvevated<br />
<br />
with<br />
<br />
!insertmacro UAC_RunElevated<br />
<br />
is this correct?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">6th April 2011, 04:48</div></div><div class="posttext">Yeah, the export name changed, and yes, use the macro from now on...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">7th April 2011, 01:39</div></div><div class="posttext">same problem for UAC::ExecCodeSegment?<br />
<br />
is there a macro i should use in its place?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th April 2011, 01:51</div></div><div class="posttext">Yes, all exports have been renamed to _. UAC_AsUser_Call is the basic replacement macro (With more specific versions like UAC_AsUser_ExecShell)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">7th April 2011, 02:16</div></div><div class="posttext">I'm sorry I don't understand:<br />
<br />
what specifically do I substitute for UAC::ExecCodeSegment as in the code example:<br />
<br />
  GetFunctionAddress $0 CreateShortcuts<br />
  UAC::ExecCodeSegment $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th April 2011, 06:00</div></div><div class="posttext">You cannot call UAC::Whatever directly anymore. You have to use the macros in UAC.nsh.  For the case of ExecCodeSegment, you'll probably need something like<br />
  !insertmacro UAC_AsUser_Call function YourFunc ${UAC_SYNCREGISTERS}|${UAC_SYNCINSTDIR}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">7th April 2011, 06:31</div></div><div class="posttext">so I assume you mean:<br />
<br />
!insertmacro UAC_AsUser_Call ExecCodeSegment CreateShortcuts ${UAC_SYNCREGISTERS}|${UAC_SYNCINSTDIR}<br />
<br />
so with that i get:<br />
<br />
!insertmacro: UAC_AsUser_Call<br />
Push: $0<br />
Invalid command: GetExecCodeSegmentAddress<br />
Error in macro UAC_AsUser_Call on macroline 2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th April 2011, 06:45</div></div><div class="posttext">I cannot find 'GetExecCodeSegmentAddress' in any of the recent UAC.nsh versions. You're probably using an out-of-date version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">7th April 2011, 06:47</div></div><div class="posttext">ok i think you meant literally:<br />
<br />
!insertmacro UAC_AsUser_Call function CreateShortcuts ${UAC_SYNCREGISTERS}|${UAC_SYNCINSTDIR}<br />
<br />
correct?<br />
<br />
if so, what does:<br />
<br />
${UAC_SYNCREGISTERS}|${UAC_SYNCINSTDIR}<br />
<br />
mean?<br />
<br />
could someone update http://nsis.sourceforge.net/UAC_plug-in so the examples map to the current code reality?  <br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pbeisel</div><div class="date">7th April 2011, 06:50</div></div><div class="posttext">i am using uac.dll and UAC.nsh<br />
<br />
in version UAC_v0.2.2d.zip</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th April 2011, 06:52</div></div><div class="posttext">Syncregisters and syncinstdir do exactly what they sound like: they synchronize the registers (registers are the NSIS standard variables $0, $1, etc) and the instdir variable. And if you're wondering 'Synchronize between what?', I would suggest you stop trying to use the UAC plugin...<br />
<br />
As for code examples, there are several nsi example files in the zip.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>