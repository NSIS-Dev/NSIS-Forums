<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionIsSelected, unknown variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionIsSelected, unknown variable NSIS Discussion" />
	
	<title> SectionIsSelected, unknown variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionIsSelected, unknown variable</div>
<hr />
<div class="pda"><a href="t-372747.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=372747">SectionIsSelected, unknown variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Smurge</div><div class="date">8th October 2013, 13:07</div></div><div class="posttext">Hello<br />
<br />
I try to use the &quot;SectionIsSelected&quot; macro from the logiclib.nsh, but it seems not to work with Sections that appear below the IF function.<br />
<br />
In my example the MessageBox &quot;g1o2_unselected&quot; never appear. The compiler returns the warning:<br />
unknown variable/constant &quot;{g1o2}&quot; detected, ignoring (macro:_SectionFlagIsSet:2)<br />
<br />
So it appears that this IF only work when it is bellow the dependent section. <br />
Is this a limitation of the SectionIsSelected macro? Is there a workaround?<br />
<br />
Any help is appreciated<br />
<br />
!include &quot;Sections.nsh&quot;<br />
!include &quot;logiclib.nsh&quot;<br />
<br />
;--------------------------------<br />
Name &quot;Section Selected&quot;<br />
OutFile &quot;section_selected.exe&quot;<br />
RequestExecutionLevel user<br />
;--------------------------------<br />
; Pages<br />
Page components<br />
Page instfiles<br />
;--------------------------------<br />
; Sections<br />
<br />
Section !Required<br />
  SectionIn RO<br />
SectionEnd<br />
<br />
Section &quot;Group 1 - Option 1&quot; g1o1<br />
	<br />
${If} ${SectionIsSelected} ${g1o2}<br />
MessageBox MB_OK g1o2_selected<br />
${Else}<br />
MessageBox MB_OK g1o2_unselected<br />
${EndIf}<br />
<br />
SectionEnd<br />
<br />
<br />
Section /o &quot;Group 1 - Option 2&quot; g1o2<br />
	<br />
${If} ${SectionIsSelected} ${g1o1}<br />
MessageBox MB_OK g1o1_selected<br />
${Else}<br />
MessageBox MB_OK g1o1_unselected<br />
${EndIf}<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th October 2013, 16:02</div></div><div class="posttext">Where you have ${g1o2}, g1o2 has not yet been defined. You will either have to define it yourself before or just substitute it with the value it would end up having (the section index or 1 in this case).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smurge</div><div class="date">9th October 2013, 11:11</div></div><div class="posttext">I tried something similar, but this doesn't work also.<br />
When i set the define above the sections<br />
!define g1o2 1<br />
the compiler exits with:<br />
<br />
Section: &quot;Group 1 - Option 2&quot; -&gt;(g1o2)<br />
Error: &quot;g1o2&quot; already defined, can't assign section index!<br />
Error in script &quot;stdin&quot; on line 33 -- aborting creation process<br />
<br />
when i put the define below the sections<br />
!define: &quot;g1o2&quot; already defined!<br />
Error in script &quot;stdin&quot; on line 39 -- aborting creation process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th October 2013, 16:45</div></div><div class="posttext">If you're going to define it yourself, you have to remove the token from the Section line.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>