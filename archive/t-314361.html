<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Folder Creation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Folder Creation NSIS Discussion" />
	
	<title> Folder Creation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Folder Creation</div>
<hr />
<div class="pda"><a href="t-314361.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314361">Folder Creation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">IB53</div><div class="date">4th November 2009, 06:19</div></div><div class="posttext">I just installed NSIS and I'm trying to come to grips with things, I've read a lot of the documentation but there are still many things which are confusing me.<br />
So my first question is regarding creating a folder.  If I create a folder under (say) Userdata, and it already exists (for example the user runs the install twice or they have a folder of that name already), what happens?  Does the install error out, does the user get a question or what?<br />
What's the best way to prevent this happening, for example, should I be somehow testing for it's existence and taking appropriate action?<br />
Any examples would be more than welcome!  :) <br />
<br />
many thanks,, and,, &quot;Hello!&quot; nice to meet you all.<br />
<br />
Ian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">4th November 2009, 07:49</div></div><div class="posttext">If I create a folder under (say) Userdata, and it already exists (for example the user runs the install twice or they have a folder of that name already), what happens?  Does the install error out, does the user get a question or what?<br />
Answer 1)  http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.9  or  http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.3.3<br />
Answer 2)  Why don't you just try it, and see what happens? That would be a lot faster than posting in the forums...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">IB53</div><div class="date">5th November 2009, 03:42</div></div><div class="posttext">Thank you for your reply.<br />
<br />
To answer your question - because no matter what the answer to &quot;what happens if&quot; I would not have known what to do about it so i would still have had to post a question to answer that.<br />
<br />
Even after having looked again at the page you reference I'm still unsure of the answer, as I said, I have read the documentation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CG!</div><div class="date">5th November 2009, 04:06</div></div><div class="posttext">i'm new to NSiS too and that's what i figured out from learning by doing:<br />
if your install trys to create a folder that already exists, nothing happens. No error message, nothing. So if you install into a sensitive folder, check if it already exists first or use user confirmations when a file as to be replaced.<br />
if you try to delete a folder that has still files in it, nothing will be deleted and no error comes up.<br />
if you got a folder tree like this:<br />
Root<br />
-- Files<br />
-- Subfolder #1<br />
---- Subfolder #2<br />
------ Files<br />
then you'll gave to create Subfolder #1 first. i know, that's basic knowledge but easy to forget because NSiS does not create Subfolder in not existing folder. With other words: nothing will be done and no error comes up. Same count's for deleting folder. You can't just RMDir the root if there are still files or subfolders in it.<br />
DOS style i say ... a least it what it looks like to me. ^^<br />
<br />
Hope i could help a bit or more.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">5th November 2009, 08:04</div></div><div class="posttext">Originally posted by CG! <br />
NSiS does not create Subfolder in not existing folder. <br />
This is not true. Read the documentation.<br />
<br />
IB53: What you would have to do to 'try it out yourself', is something like this:<br />
<br />
ClearErrors<br />
CreateDirectory &quot;C:\YourPath\YourExistingSubDir&quot;<br />
${If} ${Errors}<br />
  MessageBox MB_OK &quot;Error!&quot;<br />
${Else}<br />
  MessageBox MB_OK &quot;No error.&quot;<br />
${EndIf}<br />
<br />
That way, you'll know whether or not NSIS raises the error flag in this situation. You will also see whether or not the user is shown an error/question in this situation. (Spoiler: The user won't see a thing, and no error flag is set.)<br />
<br />
Once you know the above two pieces of information, you'll also know that you don't have to do anything to 'prevent it', because nothing goes wrong in the first place.<br />
<br />
As you can see, it would've been much quicker to just test this thing out and see what happens.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CG!</div><div class="date">5th November 2009, 09:54</div></div><div class="posttext">Creating subfolders in not axisting folders doesn't work for me and it's what i discovered by doing instead of reading.<br />
i'm still new to NSiS, so there's alot to learn left.<br />
<br />
Originally posted by MSG <br />
ClearErrors<br />
CreateDirectory &quot;C:\YourPath\YourExistingSubDir&quot;<br />
${If} ${Errors}<br />
  MessageBox MB_OK &quot;Error!&quot;<br />
${Else}<br />
  MessageBox MB_OK &quot;No error.&quot;<br />
${EndIf}<br />
This wasn't the question ... i think.<br />
As far as i understood, he wanted to know if NSiS displays error messages on itself.<br />
So my answer was &quot;No&quot; for the mentioned cases.<br />
That it's possible to catch a possible error is common knowledge and a must have.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>