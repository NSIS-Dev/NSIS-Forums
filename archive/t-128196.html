<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Multiple io.ini files on 2.0, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Multiple io.ini files on 2.0 NSIS Discussion" />
	
	<title> Multiple io.ini files on 2.0 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Multiple io.ini files on 2.0</div>
<hr />
<div class="pda"><a href="t-128196.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=128196">Multiple io.ini files on 2.0</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ironhead</div><div class="date">12th March 2003, 15:43</div></div><div class="posttext">Hey All,<br />
<br />
I'm try to get NSIS 2.0 to allow for multiple io.ini files to display, depending on which install options are choosen.  For example, if the user chooses &quot;Sample Configuration&quot;, I'd like to be able to display an IO screen prompting them for which files to create.<br />
<br />
I've got the page to display, but it always displays, regardless if the &quot;Sample Configuration&quot; is selected.<br />
<br />
Any help would be appreciated! :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">12th March 2003, 16:06</div></div><div class="posttext">I would imagine you're running into problems with correctly reading the values from the page where the user has to make a selection for what page will be displayed next.  What script code are you using to read the status from the controls of your custome pages?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th March 2003, 16:18</div></div><div class="posttext">!include &quot;Sections.nsh&quot;<br />
<br />
Section &quot;Optional&quot; SecOptional<br />
  File &quot;opt.exe&quot;<br />
SectionEnd<br />
<br />
Function YourPageFunction<br />
<br />
  SectionGetFlags ${SecOptional} $R0<br />
  IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
  StrCmp $R0 ${SF_SELECTED} +2<br />
    Abort ;Skip page if optional section not selected<br />
<br />
  ...section selected, display IO dialog...<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ironhead</div><div class="date">12th March 2003, 17:06</div></div><div class="posttext">Originally posted by Joost Verburg <br />
!include &quot;Sections.nsh&quot;<br />
<br />
I tried that now I get:<br />
<br />
!define: &quot;HWND_BROADCAST&quot; already defined!<br />
!include: error in script: &quot;C:\Program Files\NSIS\Include\Sections.nsh&quot; on line 10 <br />
<br />
I'm guess because I have:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
!include &quot;WinMessages.nsh&quot;<br />
!include &quot;Sections.nsh&quot;<br />
<br />
Is there a way to correct this?<br />
<br />
Thanx!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ironhead</div><div class="date">12th March 2003, 17:19</div></div><div class="posttext">Hey,<br />
<br />
I changed WinMessage.nsh and Sections.nsh with the following:<br />
<br />
!ifndef HWND_BROADCAST<br />
       !define HWND_BROADCAST 0xFFFF<br />
!endif<br />
<br />
since I couldn't think of a way to do it in my .nsi file.  Dunno if this should be listed as a bug?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ironhead</div><div class="date">12th March 2003, 17:25</div></div><div class="posttext">Sorry to keep buggin'....  ;) <br />
<br />
I've got it to work, however, if the section is not selected, the final page still has a &quot;Next&quot; button instead of an &quot;Install&quot; button.  Is there a way to make it know there is no follow up page?<br />
<br />
Thanx!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th March 2003, 18:56</div></div><div class="posttext">The MUI already inserts WinMessages, so you don't have to insert that one. I removed HWND_BROADCAST from Sections.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th March 2003, 19:04</div></div><div class="posttext">Originally posted by ironhead <br />
Sorry to keep buggin'....  ;) <br />
<br />
I've got it to work, however, if the section is not selected, the final page still has a &quot;Next&quot; button instead of an &quot;Install&quot; button.  Is there a way to make it know there is no follow up page?<br />
<br />
Thanx! It's possible, but changing buttons confuse the user.<br />
<br />
I recommend to put the page after the instfiles page.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>