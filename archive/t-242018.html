<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Wrong Language used, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Wrong Language used NSIS Discussion" />
	
	<title> Wrong Language used [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Wrong Language used</div>
<hr />
<div class="pda"><a href="t-242018.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242018">Wrong Language used</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tieum</div><div class="date">28th March 2006, 15:40</div></div><div class="posttext">I have the following code:<br />
<br />
LangString AlreadyInstalled ${LANG_ENGLISH} &quot;An installation of ${PRODUCT_NAME} ${PRODUCT_VERSION} has been found.$\nUninstall it before trying to re-install.&quot;<br />
LangString AlreadyInstalled ${LANG_FRENCH} &quot;${PRODUCT_NAME} ${PRODUCT_VERSION} est deja installe.$\nDesinstallez-le avant de le re-installer.&quot;<br />
<br />
Function .onInit<br />
<br />
  MessageBox MB_OK &quot;1. ENG ${LANG_ENGLISH} FR ${LANG_FRENCH} CUR $LANGUAGE&quot;<br />
<br />
  !insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
  MessageBox MB_OK &quot;2. ENG ${LANG_ENGLISH} FR ${LANG_FRENCH} CUR $LANGUAGE&quot;<br />
<br />
  ; Prevent re-installing<br />
  ReadRegStr $TMP ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayName&quot;<br />
  IfErrors NotInstalled Installed<br />
  Installed:<br />
  MessageBox MB_OK &quot;2a. ENG ${LANG_ENGLISH} FR ${LANG_FRENCH} CUR $LANGUAGE&quot;<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;$(AlreadyInstalled)&quot;<br />
  MessageBox MB_OK &quot;2b. ENG ${LANG_ENGLISH} FR ${LANG_FRENCH} CUR $LANGUAGE&quot;<br />
  Abort<br />
  NotInstalled:<br />
FunctionEnd<br />
<br />
The message boxes show<br />
<br />
1. ENG 1033 FR 1036 CUR 1033<br />
2. ENG 1033 FR 1036 CUR 1036<br />
2a. ENG 1033 FR 1036 CUR 1036<br />
An installation of MyProduct 1.0 has been found. Uninstall it before trying to re-install.<br />
2b. ENG 1033 FR 1036 CUR 1036<br />
<br />
Why do I get the English message whereas $LANGUAGE is set to French?<br />
<br />
Thanks,<br />
<br />
   Tieum</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th March 2006, 17:25</div></div><div class="posttext">The language you set in .onInit isn't really set until .onInit ends. Therefore the language NSIS found most fit would be used for any LangString in .onInit. You can show the message in .onGUIInit or in a custom page.<br />
<br />
I searched the forum<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tieum</div><div class="date">29th March 2006, 08:54</div></div><div class="posttext">Would be nice to have this in the doc.<br />
<br />
  Thanks,<br />
<br />
<br />
Tieum</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">29th March 2006, 12:57</div></div><div class="posttext">Enjoy :) (http://forums.winamp.com/announcement.php?s=&amp;forumid=65)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th March 2006, 13:43</div></div><div class="posttext">tieum, you have a good point there. Perhaps it would be a good idea to add a feature request on the tracker at http://www.sf.net/projects/nsis<br />
<br />
Edit: Actually, under Language Selection (http://nsis.sourceforge.net/Docs/Chapter4.html#4.10.1) it does mention this (maybe not in a very obvious way though).<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>