<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Silent installer aborts without obvious reason, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Silent installer aborts without obvious reason NSIS Discussion" />
	
	<title> Silent installer aborts without obvious reason [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Silent installer aborts without obvious reason</div>
<hr />
<div class="pda"><a href="t-308087.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308087">Silent installer aborts without obvious reason</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Vukashin</div><div class="date">8th July 2009, 16:44</div></div><div class="posttext">Hi all, I've recently, for the first time, started working on an installer using NSIS. I've managed to create installer but I have problem when I try to start it from the command line (silent install).<br />
I know, I have to put /S to be able to install it silently. I'm using this function:<br />
${GetOptions} <br />
for getting command line parameters. <br />
Problem is that all of a sudden installer aborts on this line:<br />
<br />
StrCmp &quot;&quot; $0 +1 +2<br />
<br />
<br />
Here is a part of the code:<br />
<br />
${GetOptions} $R0 /PASSWORD= $0         <br />
StrCpy $password $0         <br />
StrCmp $password &quot;&quot; +1 +2         <br />
${LogText} &quot;Password is not specified.&quot;     <br />
continue:         <br />
${GetOptions} $R0 /WINACC= $0 		<br />
${LogText} &quot;win acc: $0&quot;         <br />
StrCpy $accountName $0 		<br />
${LogText} &quot;win acc2: $accountName&quot; 		<br />
${LogText} &quot;win acc again1: $0&quot;         <br />
StrCmp &quot;&quot; $0 +1 +2 ; this is the line where it aborts         <br />
${LogText} &quot;Windows account is not specified.&quot;<br />
${LogText} &quot;after win acc&quot;<br />
 <br />
Before this point, I also have this function called:<br />
 ${GetParameters} $R0<br />
Strange thing is that I have called StrCmp function couple of times before this. <br />
Function <br />
${LogText} <br />
is used for logging.<br />
I have put so many LogText statements for debugging reasons. All the code I wrote here is located in .onInit function. I don't know if that means something.<br />
I'm really confused what is wrong here, if anyone knows what is the problem, please tell me. If you want more detail fill free to ask.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2009, 17:05</div></div><div class="posttext">Your logic is messed up to start with. Even if you don't specify a password your script will print a message and then continue! Use LogicLib and if needed call Abort.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vukashin</div><div class="date">8th July 2009, 17:47</div></div><div class="posttext">Actually, this is what I did, I deliberately altered code like this because I didn't wanted to Abort. That is why I changed Abort calls on lines 4 and 12 with ${LogText} calls. And instead of jumping on label continue I made a relative jump +2. That is, now I don't abort on mistake but rather log it. Problem is that on the line which I marked with comment, installer script aborts, without any reason logical to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2009, 17:53</div></div><div class="posttext">Could you produce a script that reproduces the problem?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vukashin</div><div class="date">8th July 2009, 17:59</div></div><div class="posttext">No. Actually, I have two other similar scripts (almost the same) and they are working flawlessly. That's why I am so confused. I think problem is hidden somewhere in this script, but I just can't find it. To create all these scripts I used wizard from the NSIS plug-in for Eclipse. I created a MUI2 installer, if that is important. I just thought that someone maybe had similar problem. I don't have that script with me now, but I'll attach it tomorrow. Maybe you or someone else can spot the error.<br />
<br />
BTW, thanks for quick replay.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">8th July 2009, 20:37</div></div><div class="posttext">Macros do not count as a single line. If your macro LogText has multiple lines then this StrCmp &quot;&quot; $0 +1 +2<br />
${LogText} &quot;Windows account is not specified.&quot;will be jumping someplace inside the macro. You should either use LogicLib or add specific labels and put those on the StrCmp. LogicLib would really be a better choice, in my opinion.<br />
${If} $0 == &quot;&quot;<br />
  ${LogText} &quot;Windows account is not specified.&quot;<br />
${EndIf}Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vukashin</div><div class="date">8th July 2009, 21:29</div></div><div class="posttext">Hmmm... That sounds interesting. I'll try it tomorrow. Thank you, too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vukashin</div><div class="date">13th July 2009, 11:14</div></div><div class="posttext">Sorry for late reply, demiller9, you were right, macros were my problem. I've solved it, thanks to you and Afrow UK.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>