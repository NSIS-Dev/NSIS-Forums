<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" security flaw in nsis, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  security flaw in nsis NSIS Discussion" />
	
	<title> security flaw in nsis [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  security flaw in nsis</div>
<hr />
<div class="pda"><a href="t-216201.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=216201">security flaw in nsis</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">16th May 2005, 20:52</div></div><div class="posttext">i spend some time about it cause i had the trouble that my <br />
ntldr was deleted last time and had no solution to it.<br />
1st i thought it was a misconfigured MFT (oversized).<br />
but after a time i saw that it only happend at some specific <br />
time - when my script was executed.<br />
<br />
so i analysed it and that came out:<br />
<br />
If u dont have this<br />
Function .onInit<br />
;expand files<br />
  InitPluginsDir<br />
FunctionEnd<br />
<br />
but this<br />
Function .onGUIEnd<br />
  Delete $pluginsdir\*.*<br />
  RMdir $PLUGINSDIR<br />
FunctionEnd<br />
<br />
...nsis deletes all files in partition root (here c)<br />
<br />
I dont think its not specfic at $pluginsdir - logically it <br />
m8 be at alle those vars which aren't declared.<br />
in case of an empty var these routines dont have to be <br />
executed - the result if not may critical sometimes.<br />
<br />
hth</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">17th May 2005, 01:01</div></div><div class="posttext">u dont need to delete the plugins dir</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">17th May 2005, 04:28</div></div><div class="posttext">And why is it again part of &quot;AdvSplash Test&quot; ?<br />
I found that in many scripts... not the now delivered examples<br />
but i'm sure they was...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aaron's rod</div><div class="date">17th May 2005, 21:58</div></div><div class="posttext">In my experience if you haven't call InitPluginsDir before using $pluginsdir it returns partition root. And on .onGUIEnd the pluginsdir is probably already deleted so it returns partition root.<br />
<br />
Some careless unlucky person might end up deleting all files on roodir because of this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">26th May 2005, 00:00</div></div><div class="posttext">I searched all my scripts now and tried it with out it - success.<br />
i'm not sure from where i got it, maybe a previous version.<br />
<br />
&gt;&gt; Some careless unlucky person might end up deleting all files on roodir because of this.<br />
<br />
I had :( but i found the solution preventing others from that fault<br />
<br />
nsis need to control unused system variables !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th May 2005, 20:03</div></div><div class="posttext">Well I think a compile-time warning would be nice here.<br />
<br />
Edit: No that isn't possible because the compiler can't easily tell if you've used InitPluginsDir before using $PLUGINSDIR. You may use InitPluginsDir in a function further down the script after you're using $PLUGINSDIR.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>