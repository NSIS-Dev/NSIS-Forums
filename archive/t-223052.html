<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" warning dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  warning dialog NSIS Discussion" />
	
	<title> warning dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  warning dialog</div>
<hr />
<div class="pda"><a href="t-223052.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223052">warning dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">unplug</div><div class="date">1st August 2005, 05:48</div></div><div class="posttext">I have an installer and it needs 250MB drive space.  However, I only have 100MB in my HD.  After a few second, the windows of installation directory choosing is shown with a install button disabled.  It seems NSIS knows there is not enough space for installation.  Now, I want to create a warning dialog to display that information to the user.  How can I do it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">1st August 2005, 06:02</div></div><div class="posttext">In your install page, use this:<br />
<br />
PageEx directory<br />
  DirVerify leave<br />
  PageCallbacks &quot;&quot; &quot;&quot; dirLeave<br />
PageExEnd<br />
<br />
Then, in your dirLeave function, call GetInstError $0<br />
<br />
If $0 = 2 then there's not enough space.<br />
<br />
(see GetInstDirError and DirVerify in the help files for more info).<br />
<br />
If using MUI, then you'll need to call !define MUI_DIRECTORYPAGE_VERIFYONLEAVE in your pages section to accomplish the same thing.  (Refer to the MUI docs for info on this.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">unplug</div><div class="date">1st August 2005, 10:34</div></div><div class="posttext">Thanks!<br />
<br />
I follow the instruction and add pageex and a function to it.<br />
However, when I compiled it, it shows a warning message below.<br />
  Page instfiles not used, no sections will be executed<br />
<br />
And I can't install even there is an enough space.<br />
I have no idea why?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st August 2005, 11:54</div></div><div class="posttext">You're missing:<br />
Page InstFiles<br />
or<br />
!insertmacro MUI_PAGE_INSTFILES<br />
(Modern UI)<br />
<br />
Edit:<br />
As you appear to be using Modern UI, you shouldn't use PageEx.<br />
You should use:<br />
<br />
!define MUI_DIRECTORYPAGE_VERIFYONLEAVE<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE dirLeave<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">unplug</div><div class="date">2nd August 2005, 03:43</div></div><div class="posttext">I use pageex.  When I insert &quot;Page instfiles&quot; in my code, the installer will run and install program once I click the installer.  After that it shows me the installation directory selection windows with a &quot;Close&quot; button enabled.  Below is my code and I donno what's wrong with it.<br />
<br />
Name &quot;superprogram&quot;<br />
InstallDir &quot;C:\somedirectory&quot;<br />
OutFile &quot;superprogram.exe&quot;<br />
<br />
Page instfiles<br />
DirText &quot;Choose directory to install ...&quot;<br />
<br />
SetCompress Off<br />
CRCCheck off<br />
<br />
PageEx directory<br />
	DirVerify leave<br />
	PageCallbacks &quot;&quot; &quot;&quot; dirLeave<br />
PageExEnd<br />
<br />
Function dirLeave<br />
...<br />
FunctionEnd<br />
<br />
Section &quot;superinstaller&quot;<br />
 SetOutPath &quot;$INSTDIR\&quot;<br />
 File &quot;c:\somefiles&quot;<br />
 ...<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">2nd August 2005, 04:01</div></div><div class="posttext">Try putting the PageEx before the instfiles page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">2nd August 2005, 04:04</div></div><div class="posttext">I just about to say that!<br />
;) <br />
<br />
As it is now, the installation is off installing files before it ever asks the user were to install.  (minor details...)<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">unplug</div><div class="date">2nd August 2005, 04:14</div></div><div class="posttext">Get it.  Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>