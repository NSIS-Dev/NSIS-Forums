<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Same file being compressed twice with /oname... ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Same file being compressed twice with /oname... ? NSIS Discussion" />
	
	<title> Same file being compressed twice with /oname... ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Same file being compressed twice with /oname... ?</div>
<hr />
<div class="pda"><a href="t-136944.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136944">Same file being compressed twice with /oname... ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">28th May 2003, 22:23</div></div><div class="posttext">Trying to compress a file ONCE and then output that ONE file to multiple folders with different file names.<br />
<br />
Examples of syntax tried is:<br />
<br />
<br />
SetOutPath &quot;$INSTDIR\folder1&quot;<br />
File /oname=bitmap1.bmp mybitmap1.bmp <br />
File /oname=bitmap2.bmp mybitmap2.bmp <br />
File /oname=bitmap3.bmp mybitmap3.bmp<br />
<br />
SetOutPath &quot;$INSTDIR\folder2&quot;<br />
File /oname=bitmap4.bmp mybitmap1.bmp<br />
File /oname=bitmap5.bmp mybitmap2.bmp<br />
File /oname=bitmap6.bmp mybitmap3.bmp<br />
<br />
<br />
Now, looking at this, you'd think that 6 bitmap files would be created using only 3 source files. However, my problem is that mybitmap1 through mybitmap3.bmp are being compressed twice (and doubling the archive size), thus making the whole concept of why I want to do this moot.<br />
<br />
Am I missing something, or can I not do what I want to do?<br />
<br />
I want 3 files compressed and added to the archive, but I want those 3 files to be extracted 6 times. 3 to one folder with a certain name, and 3 to another folder with a different name.<br />
<br />
?<br />
<br />
Not possible? <br />
:weird:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th May 2003, 22:44</div></div><div class="posttext">copy them.... :)<br />
look the instruction &quot;CopyFiles&quot; in the manual</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">28th May 2003, 22:46</div></div><div class="posttext">I was going off of Kichik's example/suggestion.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">28th May 2003, 22:50</div></div><div class="posttext">Ok. The instructions aren't ample enough to explain to me explicitly the syntax or location of the command in my script to accomplish my goal.<br />
<br />
The CopyFiles also does not &quot;rename&quot; source files, unless I'm missing something.<br />
<br />
Care to let me know how to use it in the above-posted example? Also need to know where in the script this needs to go?<br />
<br />
Can wildcards be used?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th May 2003, 22:57</div></div><div class="posttext">Section &quot;Ghost&quot;<br />
CreateDirectory &quot;$INSTDIR\folder1&quot;<br />
SetOutPath &quot;$INSTDIR\folder1&quot;<br />
File &quot;C:\1.bmp&quot;<br />
File &quot;C:\2.bmp&quot;<br />
CreateDirectory &quot;$INSTDIR\folder2&quot;<br />
SetOutPath &quot;$INSTDIR\folder2&quot;<br />
CopyFiles &quot;$INSTDIR\folder1\1.bmp&quot; &quot;$INSTDIR\folder2&quot; ; or &quot;$INSTDIR\folder2\1.bmp&quot;<br />
SectionEnd<br />
<br />
The wildcards, like &quot;*.bmp&quot;? I don't know, never try.<br />
Helps?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">28th May 2003, 23:04</div></div><div class="posttext">Yes. Actually, after furthing testing, I now am no longer certain that the files are being compressed and stored twice, as I originally suspected.<br />
<br />
Man oh man.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 23:06</div></div><div class="posttext">File /oname=$INSTDIR\folder1\bitmap1.bmp mybitmap1.bmp<br />
File /oname=$INSTDIR\folder1\bitmap2.bmp mybitmap2.bmp<br />
File /oname=$INSTDIR\folder1\bitmap3.bmp mybitmap3.bmp<br />
CreateDirectory &quot;$INSTDIR\folder2&quot;<br />
CopyFiles &quot;$INSTDIR\folder1\*.bmp&quot; &quot;$INSTDIR\folder2&quot;<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">28th May 2003, 23:14</div></div><div class="posttext">Afrow UK. Right on the money. My script looks just like that and it did work fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 10:00</div></div><div class="posttext">If it's really included twice and the installer size grows and not just the size it displays in the components/directory page you've probably used SetDatablockOptimize off. This is not a good idea because the datablock optimizer is fast and makes sure files won't be included twice, just like in this case.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tolwyn</div><div class="date">29th May 2003, 16:29</div></div><div class="posttext">Perfect. I have a great working installer that does everything as I expect it to.<br />
<br />
Thanks again for all the work and time, everyone, in the effort to assist the ignorant!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>