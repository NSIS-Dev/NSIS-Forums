<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Switching Dirshow and ComponentText at runtime, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Switching Dirshow and ComponentText at runtime NSIS Discussion" />
	
	<title> Switching Dirshow and ComponentText at runtime [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Switching Dirshow and ComponentText at runtime</div>
<hr />
<div class="pda"><a href="t-72909.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=72909">Switching Dirshow and ComponentText at runtime</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">superrock</div><div class="date">22nd January 2002, 22:00</div></div><div class="posttext">Hi!:rolleyes: <br />
<br />
It would be fine to decide at runtime to show the DirPage and the Component page (e.g. decide .ononit). So ist there a possibiblity to to do that ? <br />
<br />
If not I can try to implement it myself and give out the source!<br />
<br />
<br />
Regards,<br />
Rocky :igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">petersa</div><div class="date">23rd January 2002, 11:25</div></div><div class="posttext">Nope, there's nothing like that at the moment, but it would be useful!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">felfert</div><div class="date">27th January 2002, 09:01</div></div><div class="posttext">Not quite correct. Using the .onNextPage and .onPrevPage callbacks,<br />
you can skip pages depending on some variable at runtime.<br />
<br />
The following code skips the component page, if the given key<br />
in the registry is set.<br />
<br />
<br />
Function .onInit<br />
  StrCpy $9 0<br />
  ReadRegStr $8 HKLM &quot;Software\myProg&quot; &quot;InstallPath&quot;<br />
FunctionEnd<br />
<br />
Function .onNextPage<br />
  IntOp $9 $9 + 1<br />
  StrCmp $9 2 0 noabort<br />
  StrCmp $8 &quot;&quot; noabort<br />
  IntOp $9 $9 + 1<br />
  Abort 2<br />
  noabort:<br />
FunctionEnd<br />
<br />
Function .onPrevPage<br />
  IntOp $9 $9 - 1<br />
  StrCmp $9 2 &quot;&quot; noabort<br />
  StrCmp $8 &quot;&quot; noabort<br />
  IntOp $9 $9 - 1<br />
  Abort -2<br />
  noabort:<br />
FunctionEnd<br />
<br />
<br />
-Fritz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superrock</div><div class="date">27th January 2002, 23:34</div></div><div class="posttext">Thanks Fritz!:p <br />
<br />
Meanwhile I implemented a runtime feature to hide the licence, component and dir page. I will post it soon to the newsgroup, but I want to migrate it to Nsis 1.95.<br />
For the documentation I would like to ask you for the patch tool. Where can I find it?<br />
<br />
Hey - your patches are really interesting - Good work !<br />
<br />
Hope to get a reply!;) <br />
<br />
Herzliche Gruesse aus Oesterreich!<br />
Danke!!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">felfert</div><div class="date">28th January 2002, 02:47</div></div><div class="posttext">It is part of the cygwin dist, available at http://sources.redhat.com/cygwin/ <br />
<br />
How to use it:<br />
[list=1]<br />
 Install cygwin<br />
 In cywin's bash, mount the NSIS sources in text-mode(!) somewhere (e.g.: mount -t 'C:\Programme\NSIS\Source' /home/fritz/nsis)<br />
 cd into the source dir<br />
 Unpack the patches<br />
 run the command: patch -p0 &lt; nsis-all.patch<br />
[/list=1] <br />
<br />
It is important, that the sources are mounted in text mode (-t option of the mount command). Otherwise, patch will get screwed up by the DOSish CR/LF's (normally it works with Unix style LF-only).<br />
<br />
Or do you mean: How did i create the patches?<br />
-&gt; I use CVS to track NSIS sources and merge my own changes automatically when a new official version is released.<br />
CVS can generate patches between. I'm not shure, if there's a CVS server available for windows. My CVS server runs on Linux. The client is available for windows too: <br />
http://www.cvsgui.org<br />
<br />
-Fritz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">felfert</div><div class="date">28th January 2002, 09:56</div></div><div class="posttext">BTW:<br />
<br />
Just found a native patch.exe for Win ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">petersa</div><div class="date">28th January 2002, 11:47</div></div><div class="posttext">Whoops!<br />
<br />
I was thinking of the text on those pages...you can't change those at runtime...yet... ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superrock</div><div class="date">29th January 2002, 00:54</div></div><div class="posttext">Hi Justin and all other,:) <br />
<br />
I worked on several addons to Nsis 1.95: <br />
<br />
HideLicPage,HideCompPage, HideDirPage :<br />
<br />
Hide pages on runtime (e.g. .oninit)<br />
<br />
SelSection [-]Section [[-]Section] :<br />
<br />
Select or deselect sections. Section 1 can't be deselected !! <br />
Maybe it would also be nice to switch to an unselectable status for marking unavailable parts of an installation. Tell me if you are interested!!<br />
<br />
My comments:<br />
************<br />
So I am using these addons for installing a complete software <br />
system containig of one or several parts, which may be shipped to somebody or not. So I am making a main installer and spawn components. The spawned components get the install. dir over the command line and should only show the progress bar and not anything else. If such a partial installer is started directly, you will have access to all pages (lic, dir, ....).<br />
<br />
Enjoy it,<br />
Andreas<br />
:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superrock</div><div class="date">29th January 2002, 00:59</div></div><div class="posttext">Hi! <br />
<br />
The sources for the add on!<br />
<br />
The patcher can be found on Fritz  recent reply !!<br />
<br />
Greetings,<br />
Andreas:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superrock</div><div class="date">29th January 2002, 08:28</div></div><div class="posttext">Hi Fritz,<br />
<br />
I documented my changes with the Win32 version of diff.exe, because I didn't succeed with WinCvs. I will try it again, if I have more time.<br />
<br />
But do you know how to use the Win32 diff tool recursevly instead of  file by file and write an input file for the patch tool?<br />
<br />
Regards,<br />
Andreas<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">felfert</div><div class="date">29th January 2002, 11:23</div></div><div class="posttext">Doesn't your diff have a -r option?<br />
If yes:<br />
<br />
diff -urwN originaldir modifieddir<br />
<br />
u = Produce unified diff, r = recursive, w = ignore whitespace, N (or with some diffs: P) = produce diff for added and deleted files.<br />
<br />
If not, then probably get cygwin anyway.<br />
<br />
If i need unix tools, i usually use cygwin. cygwin's diff has all important options. And there are much more useful unix tools in cygwin.<br />
<br />
What's your problem with wincvs? (Probably via mail?)<br />
<br />
Ciao<br />
 -Fritz</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>