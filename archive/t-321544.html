<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_PAGE_COMPONENTS - hide SectionGroup, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_PAGE_COMPONENTS - hide SectionGroup NSIS Discussion" />
	
	<title> MUI_PAGE_COMPONENTS - hide SectionGroup [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_PAGE_COMPONENTS - hide SectionGroup</div>
<hr />
<div class="pda"><a href="t-321544.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321544">MUI_PAGE_COMPONENTS - hide SectionGroup</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">10th August 2010, 17:18</div></div><div class="posttext">Hi,<br />
<br />
I have read all the tips here in the forum concerning my problem, but couldn't solve it yet.<br />
<br />
I have 2 SectionGroups. The first one should be completely hidden depending on some values checked/ defined in the .onInit function.<br />
<br />
But no matter what I try I did not get the SectionGroup hidden - it is always shown (the Sections inside are hidden as they should).<br />
<br />
I have read (and understood) about clearing the hidden SF_SECGRPEND flag.<br />
<br />
Do I overlook something?<br />
<br />
SectionGroup /e &quot;Reset Config Section Group&quot; SecGrpResetConfig <br />
	Section &quot;Delete Config File Section&quot; SecDeleteConfigFile<br />
		<br />
	SectionEnd<br />
	<br />
	;Delete chart DB (CHRTLIST.DAT)<br />
	Section &quot;Delete ChartDB Section&quot; SecDeleteChartDB<br />
		<br />
	SectionEnd<br />
<br />
	;Delete SENC directory<br />
	Section &quot;Delete SENC Section&quot; SecDeleteSENC<br />
		<br />
	SectionEnd<br />
SectionGroupEnd<br />
<br />
;Shortcut Section<br />
SectionGroup /e &quot;Shortcuts Section Group&quot; SecGrpShortcuts	<br />
	Section &quot;Startmenu Shortcut Section&quot; SecShortcutStartmenu<br />
		;Start Menu<br />
	SectionEnd<br />
	<br />
	Section &quot;Desktop Shortcut Section&quot; SecShortcutDesktop<br />
		;Desktop<br />
	SectionEnd	<br />
SectionGroupEnd	<br />
<br />
Function .onInit<br />
		${If} $CONFIG_EXISTS != 1<br />
		${OrIf} $CONFIG_EMPTY == 1<br />
			!insertmacro ClearSectionFlag ${SecDeleteConfigFile} ${SF_SELECTED}<br />
			SectionSetText ${SecDeleteConfigFile} &quot;&quot;<br />
			!insertmacro ClearSectionFlag ${SecDeleteChartDB} ${SF_SELECTED}<br />
			SectionSetText ${SecDeleteChartDB} &quot;&quot;<br />
			!insertmacro ClearSectionFlag ${SecDeleteSENC} ${SF_SELECTED}<br />
			SectionSetText ${SecDeleteSENC} &quot;&quot;<br />
			!insertmacro ClearSectionFlag ${SecGrpResetConfig} ${SF_SECGRP}<br />
			!insertmacro ClearSectionFlag ${SecGrpResetConfig} ${SF_SELECTED}<br />
			SectionSetFlags ${SecGrpResetConfig} 0<br />
			SectionSetText ${SecGrpResetConfig} &quot;&quot;<br />
			IntOp $0 ${SecDeleteSENC} + 1<br />
			!insertmacro ClearSectionFlag $0 ${SF_SECGRPEND}<br />
			SectionSetText $0 &quot;&quot;<br />
			;MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Macro S0: $0&quot; ;#DEBUG<br />
		${EndIf}<br />
FunctionEnd<br />
<br />
I am using version 2.46 - Unicode with the ModernUI2 and therefor MUI_PAGE_COMPONENTS.<br />
<br />
Any help is very much appreciated! :)<br />
<br />
Thanks,<br />
Gunther</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th August 2010, 07:01</div></div><div class="posttext">Have you tried to rename them to &quot;&quot;? That will hide a normal section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">11th August 2010, 07:51</div></div><div class="posttext">Have you tried to rename them to &quot;&quot;? That will hide a normal section.<br />
You mean the line<br />
SectionSetText ${SecGrpResetConfig} &quot;&quot;<br />
in the .onInit function?<br />
If so, the answer is yes.<br />
<br />
As I am using a multilanguage version I have also tried to use an empty LangString for each language:<br />
SectionSetText ${SecGrpResetConfig} $(EmptyString)<br />
No change in result - the SectionGroup still shows up on the Components page (with the string of the choosen language), which leads me to the assumption that somethings goes wrong with emptying the SectionText. But I have no idea where or why, yet.<br />
<br />
Gunther<br />
<br />
Addition 1:<br />
Tried the exact same code for my second SectionGroup (which never has to be hidden) and guess what? It disappears without any problem.<br />
<br />
So there might be a bug that a SectionGroup does not disappear if it is the first one in the row of Sections(Groups)?<br />
<br />
I'll do some further tests to figure out the differences between my two SectionGroups and hopefully find the reason why one disappears correctly and the other do not.<br />
<br />
So if anyone has an idea or had have the same problem, tips and possible solutions/ workarounds are still very much appreciated.<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th August 2010, 08:35</div></div><div class="posttext">You mean the line<br />
SectionSetText ${SecGrpResetConfig} &quot;&quot;<br />
in the .onInit function?<br />
If so, the answer is yes.<br />
Oops, my bad.<br />
<br />
If you add a hidden, empty section on top, does it still refuse to hide the group?<br />
<br />
How about just reversing the order of the two groups?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">11th August 2010, 08:43</div></div><div class="posttext">Hi,<br />
Oops, my bad.<br />
<br />
If you add a hidden, empty section on top, does it still refuse to hide the group?<br />
<br />
How about just reversing the order of the two groups?<br />
<br />
no, not your fault - my fault.<br />
<br />
I have overlooked a line at the end of my .onInit function which sets the text for the SectionGroup. :rolleyes:<br />
<br />
So after hiding the Group the name was set again to something else than an empty string.<br />
<br />
Now everything works as expected! :up:<br />
<br />
No bug or any other 'weird' circumstances - just a dumb coder ...!<br />
<br />
For the archive: The code in the first posting is correct.<br />
<br />
@MSG: Thanks for your help.<br />
Sorry for the unnecessary question.<br />
<br />
Thanks,<br />
Gunther</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Netsurfer24</div><div class="date">13th August 2010, 12:37</div></div><div class="posttext">Hi,<br />
<br />
it's me again ...! Now that I have managed to dynamically hide sections and sectiongroups I have some difficulties to show it up again.<br />
<br />
I want to change its state (shown|hidden) in the .onSelChange function.<br />
<br />
What has to be done to show it again?<br />
<br />
 SectionSetText ... for all Sections and the SectionGroup<br />
 SectionSetFlags ... ???<br />
<br />
Anything else?<br />
<br />
And how about the Section Flags which I have cleared when hiding the Section Group?<br />
Which ones do I have to set again? <br />
<br />
Does the order play a role?<br />
<br />
Thanks,<br />
Gunther<br />
<br />
Update 1:<br />
I am one step further - my code seems to be OK. The problem is that the components page (or just the components list) needs to be refreshed/ updated. If I use the back button and return to the page my sectiongroup is hidden or shown correctly.<br />
Anyone who can tell me how to refresh/ update the page or list?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>