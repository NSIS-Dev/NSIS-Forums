<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" execWait problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  execWait problem NSIS Discussion" />
	
	<title> execWait problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  execWait problem</div>
<hr />
<div class="pda"><a href="t-221345.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=221345">execWait problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">paulcookie</div><div class="date">13th July 2005, 10:46</div></div><div class="posttext">I have searched through the help and forums but to no avail! My problem is getting a .bat file to run using execwait. I write the bat file during the install and it appears correctly in the install routine, it also works if I double click on it.<br />
The install says it is running it but it never does. I have tried ExecWait '&quot;$INSTDIR\PDMIntegrator\PDMi_build_mm.bat&quot;'<br />
and even tried<br />
ExecWait &quot;c:\temp\PDMi_build_mm.bat&quot;<br />
the file is alway there, it just never executes. I have used a message box to confirm the path but I just cannot seem to see what is wrong.<br />
Help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th July 2005, 12:12</div></div><div class="posttext">Tried nsExec::Exec?<br />
<br />
Edit: Also make sure you set the working folder correctly before running the batch file using SetOutPath.<br />
You shouldn't really need to use a batch though - everything that can be done through a batch file can be done through NSIS script too.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">paulcookie</div><div class="date">13th July 2005, 13:02</div></div><div class="posttext">Thanks for the reply, I had tried nsExec as well, which make me think something must be fundamentally wrong. My code is:-<br />
  CreateDirectory &quot;$INSTDIR\PDMIntegrator&quot;<br />
  SetOutPath &quot;$INSTDIR\PDMIntegrator&quot;<br />
  call writeBuildBatchFile<br />
;  ExecWait '&quot;$INSTDIR\PDMIntegrator\PDMi_build_mm.bat&quot;'<br />
;  ExecWait &quot;PDMi_build_mm.bat&quot;<br />
  nsExec::Exec '&quot;PDMi_build_mm.bat&quot;'<br />
As you can see I have 3 options, none of which work. I appreciate the comments about the batch file, it is slightly unusual in that it is running a custom routine that already exists on the target system. Are there any install logs I can view?<br />
I have also tried using the IfFileExists command before running my execWait, and it tells me the file is there.<br />
I downloaded nsi yesterday if that helps. My batch file is below, I don't know whether the syntax is wrong in this?<br />
echo hello &gt; c:\temp\test.txt <br />
rem PDMi_build_mm.bat verion 13.20 <br />
cd /d &quot;C:\Program Files\CoCreate\OneSpace Manager 2005\clntwin&quot; <br />
call mmbuild.bat</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">13th July 2005, 13:23</div></div><div class="posttext">This works on my comp (XP Pro SP2), see attachment.<br />
nsExec or my execDos would be better, of course.<br />
SetOutPath creates folder if it not exists yet.<br />
I used File command instead of dynamic file creation ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">paulcookie</div><div class="date">13th July 2005, 14:52</div></div><div class="posttext">Takhir, Thanks very much for the example scripts, they helped me focus on what was the problem. I have not used execWait before and spent all my time looking for a problem with the syntax of the command, which you proved to be correct.<br />
It turns out my routine to write the batch file did not have a fileClose statement!<br />
Once again many thanks, the quality and speed of your response was excellent!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>