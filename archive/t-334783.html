<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Disable Enter Key, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Disable Enter Key NSIS Discussion" />
	
	<title> Disable Enter Key [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Disable Enter Key</div>
<hr />
<div class="pda"><a href="t-334783.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=334783">Disable Enter Key</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">EZsteve</div><div class="date">15th September 2011, 16:42</div></div><div class="posttext">I have a dialog With 3 buttons: Back, Accept and Decline - Within the displayed text there are two links (Not sure if the links are relevant to the question).<br />
<br />
Anyway, initially the BACK button is the default:<br />
${NSD_SetText} $mui.Button.Next &quot;&amp;Accept&quot;<br />
${NSD_SetText} $mui.Button.Cancel &quot;&amp;Decline&quot;<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $mui.Button.Back 1<br />
<br />
The problem is, if the user CLICKS on either of the links (Or for that matter anywhere in the dialog), the FOCUS (Or default) moves to the ACCEPT button - At which point the user can press ENTER and move forward - The requirement is for them to physically CLICK the ACCEPT button.<br />
<br />
Question: How do I: (1) Stop the user from pressing ENTER, or (2) Ensure that clicking within the dialog does not change the default, or even (3) ensure that the BACK button is always the default.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">15th September 2011, 17:35</div></div><div class="posttext">Simple solution: Disable the next button and add a checkbox 'I accept' that enables it.<br />
<br />
Proper solution: You need to change the default action from Next to Back. I've no idea how to do this though. (Note that this is very different from setting the focus! Using NEXTDLGCTL you changed the focus, but you did NOT change the default.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">15th September 2011, 19:05</div></div><div class="posttext">You'll want to send DM_SETDEFID (0x0401) to the parent dialog. The wparam will be the control id (not the handle). If you are creating your Accept/Decline/Back buttons on your custom page, the dialog is not HWNDPARENT, it is your inner dialog.<br />
!define DM_SETDEFID 0x0401<br />
SendMessage $HWND ${DM_SETDEFID} $mui.Button.Back.Id 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZsteve</div><div class="date">15th September 2011, 19:23</div></div><div class="posttext">Hi: MSG, thanks, you pointed me in the RIGHT DIRECTION:<br />
<br />
Change the DEFAULT. So I went to RESOURCE HACKER and changed DIALOG 105 of modern.exe to set the BACK BUTTON to BS_DEFPUSHBUTTON - This worked like a charm - Many thanks. HOWEVER, that (Obviously) changes the default throughout the installer. New question: How to change the PROPERTIES of a BUTTON within a function (So that it applies to this one dialog only).<br />
<br />
From:<br />
&quot;CONTROL &quot;&quot;, 3, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 166, 201, 50, 14&quot;<br />
<br />
To:<br />
&quot;CONTROL &quot;&quot;, 3, BUTTON, BS_DEFPUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 166, 201, 50, 14&quot;<br />
<br />
Demiller9: Tried that, but that just changed the DEFAULT to the ACCEPT button (Tried it with a &quot;0&quot; and a &quot;1&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">15th September 2011, 19:39</div></div><div class="posttext">It sounds like you were not using the ID of the Back button - perhaps you used the Accept button's id by accident. The last parameter is unused, so 0/1 would not help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZsteve</div><div class="date">15th September 2011, 20:12</div></div><div class="posttext">Demiller9, you are right, I was not using the ID - I hate to ask (Especially since it seem like I know what I am doing by doing stuff in Resource Hacker).....................But I am relatively new to NSIS - How do I find out the ID assigned to each button?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">15th September 2011, 23:07</div></div><div class="posttext">If you are using MUI2, the IDs of your controls start at 1200 and go up for each control (checkbox, label, groupbox, radio button, etc) you create. You can also find several 'spy' type programs that will let you drag a crosshair onto the control and will show you the id.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZsteve</div><div class="date">15th September 2011, 23:37</div></div><div class="posttext">Thank you so much for your help. Through a series of your help and a bit of luck I have it working. The trick was to add your code:<br />
<br />
!define DM_SETDEFID 0x0401<br />
SendMessage $HWND ${DM_SETDEFID} $mui.Button.Back.3 0<br />
<br />
Change the $HWND to $HWNDPARENT:<br />
<br />
SendMessage $HWNDPARENT ${DM_SETDEFID} $mui.Button.Back.3 0<br />
<br />
And THEN reset FOCUS to the BACK button:<br />
<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $mui.Button.Back 1.<br />
<br />
So the complete solution is:<br />
<br />
!define DM_SETDEFID 0x0401<br />
SendMessage $HWNDPARENT ${DM_SETDEFID} $mui.Button.Back.3 0<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $mui.Button.Back 1 <br />
<br />
I sure hope this helps somebody else - I know it drove me mad!<br />
<br />
PS. Is there a way to mark this issue as solved?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th September 2011, 05:40</div></div><div class="posttext">(There's no way to mark this 'issue' solved, and there's no need to. Forum threads aren't issues, they're discussions.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>