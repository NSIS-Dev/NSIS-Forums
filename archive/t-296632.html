<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to detect failure of /D=install_dir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to detect failure of /D=install_dir NSIS Discussion" />
	
	<title> How to detect failure of /D=install_dir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to detect failure of /D=install_dir</div>
<hr />
<div class="pda"><a href="t-296632.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296632">How to detect failure of /D=install_dir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">29th August 2008, 12:17</div></div><div class="posttext">Hi,<br />
if the installation directory is specified by means of /D=... it may happen that INSTDIR isn't set to this value, e.g. if the installation directory cannot be created because of a file with the directory name that already exist in the same parent dir). Bug 1842326 seams to address the same problem. <br />
<br />
Since /D is optional how can I detect whether /D has been specified but rejected?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2008, 12:23</div></div><div class="posttext">The directory passed on the command line is just ignored if the directory is invalid. You can set InstallDir to nothing, or a special directory and compare $INSTDIR to that in .onInit. If the directory from the command line is ignored, that would be the value of $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">29th August 2008, 14:32</div></div><div class="posttext">OK, but if InstallDir is set to any pattern and the value of $INSTDIR gets this value, how can I differ between /D that has not been set and /D that has been set with an invalid value? I.e., how can I detect the error to inform the caller?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2008, 15:22</div></div><div class="posttext">You can't detect an error. You can only detect that InstallDir was used.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SunToo</div><div class="date">29th August 2008, 15:45</div></div><div class="posttext">So this is a bug in my opinion. It's required to inform the caller of the setup that the specified directory could not be used. E.g., if the customer optionally wants to integrate the setup into another, higher-ranking setup and the latter depends on a successful installation into the specified directory there is no chance to recognize this error.<br />
<br />
If there is no other workaround I have to implement my own command line parameter :-(</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>