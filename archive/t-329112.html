<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstaller, plugin crash, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstaller, plugin crash NSIS Discussion" />
	
	<title> Uninstaller, plugin crash [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstaller, plugin crash</div>
<hr />
<div class="pda"><a href="t-329112.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329112">Uninstaller, plugin crash</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lloydtech</div><div class="date">30th March 2011, 15:28</div></div><div class="posttext">Hi,<br />
<br />
I have an NSIS Installer/Uninstaller. The uninstaller calls functionality available in a plugin. This plugin is compiled using visual studio 2010 so requires the runtime library msvcr100.dll and msvcp100.dll. And the application is installed in an XP machine, which does not have these libraries.<br />
<br />
When the uninstaller is called, the uninstaller is first copied into a temp directory and from there it executes. At that time it misses the run time library in &quot;the current working directory&quot; and causes problem in loading the plugin dll. What is the right work around for this?<br />
<br />
Should I copy the runtime libraries to the temp folder where uninstaller is copied? if this is the case how can I get the path to uninstaller temp folder?<br />
<br />
Or should I install the runtime libraryin the &quot;system&quot; folder? Does NSIS have some shortcut for this?<br />
<br />
Thanks a lot,<br />
  Lloyd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th March 2011, 15:56</div></div><div class="posttext">You don't necessarily need to have a dependency on those DLL's if you &quot;Ignore default libraries&quot; and then do not include a manifest in your DLL. Anyway, extract the dependencies to $PLUGINSDIR before calling the plug-in.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">30th March 2011, 15:57</div></div><div class="posttext">Do you code this plugin yourself? You should avoid dependencies to any kind of runtimes. Installers should always need only itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lloydtech</div><div class="date">31st March 2011, 05:30</div></div><div class="posttext">Thanks, How can I avoid dependency on runtime?<br />
<br />
If I set &quot;NODEFAULTLIB&quot; option, the linker gives me linking errors.<br />
<br />
Or should I use the runtime library as &quot;Multi threaded&quot; than &quot;Multi threaded dll&quot; ?<br />
<br />
Thanks a lot,<br />
  Lloyd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st March 2011, 10:42</div></div><div class="posttext">http://forums.winamp.com/showpost.php?p=2696184&amp;postcount=60<br />
<br />
If you get other linker errors then you are using CRT library functions and you need to find alternatives/write your own.<br />
<br />
For example, you can replace strcmp with lstrcmp (and the variants) and any printf's with wsprintf. Also NSIS exports helper functions such as myatoi() for plug-ins. Look in one of the plug-in API header files.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>