<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" display real size of ZiP/7Z contents, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  display real size of ZiP/7Z contents NSIS Discussion" />
	
	<title> display real size of ZiP/7Z contents [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  display real size of ZiP/7Z contents</div>
<hr />
<div class="pda"><a href="t-315271.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=315271">display real size of ZiP/7Z contents</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">CG!</div><div class="date">11th December 2009, 18:39</div></div><div class="posttext">is there any way to display the &quot;real&quot; size of files, that are packed using zip or 7-zip, inside the installer and that are delivered inside the NSiS package?<br />
Doesn't matter if i hardcode it as long as anyone maybe willing to tell me how. But an plugin that meassures the size at runtime or calculates it at compile time would be my favorite solution ofc.<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CG!</div><div class="date">12th December 2009, 01:16</div></div><div class="posttext">Found a solution.<br />
Hardcoded and working using SectionSetSize.<br />
Took me a while to find the right words for what i was looking for, so my search finally pointed in the right direction. :/<br />
But if some knows a method that calculates the file size inside the archive(s) during compiling or runtime automaticly, let me know please.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">12th December 2009, 12:11</div></div><div class="posttext">Using nsUnzip (http://nsis.sourceforge.net/NsUnzip_plugin):<br />
<br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
Section<br />
	StrCpy $R0 0<br />
	GetFunctionAddress $0 VerboseCallback<br />
	nsUnzip::Extract &quot;1.zip&quot; /callV=$0 /END<br />
	Pop $0<br />
	MessageBox MB_OK &quot;Uncompressed size: $R0$\nError: $0&quot;<br />
SectionEnd<br />
<br />
Function VerboseCallback<br />
	Pop $0  ;File name<br />
	Pop $1  ;Uncompressed size<br />
	Pop $2  ;Compressed size<br />
	Pop $3  ;CRC: ff00ff00<br />
	Pop $4  ;Compress ratio<br />
	Pop $5  ;File date: &quot;dd.MM.yy&quot;<br />
	Pop $6  ;File time: &quot;hh:mm&quot;<br />
	Pop $7  ;Method: &quot;Stored&quot;, &quot;Shrunk&quot;, &quot;Reduce1&quot;, &quot;Reduce2&quot;, &quot;Reduce3&quot;, &quot;Reduce4&quot;, &quot;Implode&quot;, &quot;Token&quot;, &quot;Defl:#&quot;, &quot;Def64#&quot;, &quot;ImplDCL&quot;, &quot;PKres11&quot;, &quot;BZip2&quot;, &quot;Unk:###&quot;<br />
	Pop $8  ;Encrypted: &quot;E&quot; or not &quot; &quot;<br />
<br />
	IntOp $R0 $R0 + $1<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CG!</div><div class="date">12th December 2009, 15:03</div></div><div class="posttext">Thanks Mr. instructor, Sir.<br />
<br />
All i need to figure out now, is how to hand these values over to NSiS before the user reaches the components dialog, so the install size will be automaticly calculated with the uncompressed size only.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>