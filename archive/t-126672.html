<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Verify that instdir is not on a CDROM drive?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Verify that instdir is not on a CDROM drive? NSIS Discussion" />
	
	<title> Verify that instdir is not on a CDROM drive? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Verify that instdir is not on a CDROM drive?</div>
<hr />
<div class="pda"><a href="t-126672.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=126672">Verify that instdir is not on a CDROM drive?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">david33470</div><div class="date">28th February 2003, 09:25</div></div><div class="posttext">Hello!!<br />
<br />
I just want to know how can I verify (on the function .onVerifyInstdir) that the installation path is not on a CDROM drive?? is there any solution to know that?? <br />
<br />
:) :( :D ;) :p :cool: :mad: :eek: :confused: :o :hang: :cry: :igor: :blah:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">28th February 2003, 09:50</div></div><div class="posttext">Use the System plugin to invoke the Windows API function GetDriveType (http://msdn.microsoft.com/library/en-us/fileio/base/getdrivetype.asp). I'll post back here with the exact NSIS command if I can work it out for you.<br />
<br />
Fortunately system.nsh (in contrib\system) already defines sysGetDriveType. This script should help you:-<br />
<br />
OutFile &quot;blah.exe&quot;<br />
<br />
!include &quot;${NSISDIR}\Contrib\System\System.nsh&quot;<br />
<br />
Section -<br />
  StrCpy $1 &quot;c:\&quot;<br />
  System::Call '${sysGetDriveType}(r1) .r0'<br />
  DetailPrint &quot;Boo: $1 $0&quot;<br />
  IntCmp $0 5 0 notcddrive<br />
    MessageBox MB_OK &quot;Drive $1 is a cd drive&quot;<br />
  notcddrive:<br />
SectionEnd<br />
<br />
FYI 5 is the drive type code of a cd drive as far as I can tell, well it works on my system anyway</div></div><hr />


<div class="post"><div class="posttop"><div class="username">david33470</div><div class="date">28th February 2003, 12:09</div></div><div class="posttext">Thank you for your help!<br />
It seems to work fine, but i don't remember and i don't arrive to find how to catch the &quot;c:\&quot; when you have a full path like &quot;c:\progam files\my app&quot;. I know that there is a function (or a pluggin) to do it, but I can't find it!!!<br />
Perhaps somebody can help me???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">28th February 2003, 12:22</div></div><div class="posttext">you could just use strcpy $0 &quot;C:\program files\my app&quot; 3 which will grab the first three characters</div></div><hr />


<div class="post"><div class="posttop"><div class="username">david33470</div><div class="date">28th February 2003, 13:08</div></div><div class="posttext">ok thank you very much <br />
I think i'am very tired not to find so basic things!!!<br />
so tank you to complete my damaged mind!!!(lOl)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>