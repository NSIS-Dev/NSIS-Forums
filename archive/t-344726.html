<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How can I resolve Sign error 0x800700C1 when signing an uninstaller?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How can I resolve Sign error 0x800700C1 when signing an uninstaller? NSIS Discussion" />
	
	<title> How can I resolve Sign error 0x800700C1 when signing an uninstaller? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How can I resolve Sign error 0x800700C1 when signing an uninstaller?</div>
<hr />
<div class="pda"><a href="t-344726.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=344726">How can I resolve Sign error 0x800700C1 when signing an uninstaller?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gencha</div><div class="date">8th May 2012, 22:36</div></div><div class="posttext">I was just looking into signing our installer/uninstaller and read this wiki article: http://nsis.sourceforge.net/Signing_an_Uninstaller<br />
<br />
Everything seemed to go well until it comes to signing the actual uninstaller:<br />
<br />
!system: &quot;&quot;C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\signtool.exe&quot; sign /f &quot;X:\ssl\code\y.pfx&quot; /p abcdef /t &quot;http://timestamp&quot; &quot;C:\Users\y\AppData\Local\Temp\uninstaller.exe&quot;&quot;<br />
Done Adding Additional Store<br />
<br />
Number of errors: 1<br />
<br />
SignTool Error: SignedCode::Sign returned error: 0x800700C1<br />
<br />
	Either the file being signed or one of the DLL specified by /j switch is not a valid Win32 application.<br />
<br />
SignTool Error: An error occurred while attempting to sign: C:\Users\y\AppData\Local\Temp\uninstaller.exe<br />
<br />
!system: returned 1<br />
<br />
But there is nothing wrong with that uninstaller. I can execute it just fine (so I'm quite certain it's a valid Win32 application).<br />
<br />
Is the approach outlined in that article still correct?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th May 2012, 22:52</div></div><div class="posttext">That means &quot;The parameter is incorrect&quot;. Try writing the uninstaller elsewhere.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gencha</div><div class="date">8th May 2012, 22:59</div></div><div class="posttext">I think it just resolved itself.<br />
<br />
I won't claim that I understand it, but I think the issue was related to switching compression on and off during the build process.<br />
Most likely, the way I use the code from the article isn't optimal (to say the least) and this caused problems.<br />
<br />
I now enable whole LZMA compression at the beginning of the build process and just keep it. Even though the build takes forever :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">isawen</div><div class="date">19th June 2012, 23:02</div></div><div class="posttext">Hi guys,<br />
<br />
It appears that if you try to sign the uninstaller belonging to a signed installer you will get the same exception..<br />
Isn't that strange?<br />
<br />
Thanks,<br />
Isa</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stephench</div><div class="date">15th August 2012, 00:25</div></div><div class="posttext">I am getting the same error when I attempt to sign uninst.exe. The error persists even if I turn off compression completely. <br />
<br />
My guess is when nullsoft installer dynamically patches the uninst.exe file, it somehow violates some non-critical rule of win32 exe format which doesn't affect correction executation of the file. But it is not able to pass the exe format validation performed by the signtool.exe file from Microsoft Platform SDK. <br />
<br />
Does anybody have a better idea what might go wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th August 2012, 00:35</div></div><div class="posttext">I've not had any issues signing uninstall executables. How are you going about it? You need to:<br />
<br />
1. Write a standalone script which generates the uninstaller.<br />
2. Build it and run the built executable to generate the uninstaller.<br />
3. Sign the generated uninstaller.<br />
4. Bundle it in the main installer.<br />
<br />
I wasn't aware there was any other way so you are probably already doing this?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stephench</div><div class="date">15th August 2012, 02:19</div></div><div class="posttext">I didn't attempt to create the fully automatic flow yet. I just use the original script to generate the installer, install it manually to get the file uninst.exe. Then I tried to sign the uninst.exe file manually and got this error. I do use the unicode version of the installer instead of the ansi version. <br />
<br />
I noticed in your earlier reply saying &quot;Try writing the uninstaller elsewhere&quot;. How does the location of the uninstaller matter in this case?<br />
<br />
<br />
I've not had any issues signing uninstall executables. How are you going about it? You need to:<br />
<br />
1. Write a standalone script which generates the uninstaller.<br />
2. Build it and run the built executable to generate the uninstaller.<br />
3. Sign the generated uninstaller.<br />
4. Bundle it in the main installer.<br />
<br />
I wasn't aware there was any other way so you are probably already doing this?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th August 2012, 06:26</div></div><div class="posttext">http://social.msdn.microsoft.com/Forums/en-US/wdk/thread/158b5381-f257-4076-83ca-db71cd8a323b/ ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n1ghtv1s1on</div><div class="date">16th November 2012, 18:34</div></div><div class="posttext">I ran across this post from a Google search because I was having the same problem signing an uninstaller from Bitrock Install Builder.  This was my solution:<br />
<br />
1.) Build an unsigned installer<br />
2.) Install that unsigned installer on your machine<br />
3.) Sign the resultant uninstall.exe<br />
4.) Package it with your distribution<br />
5.) Build the signed installer<br />
<br />
BitRock instructions for packaging and deploying are here if anybody is interested:<br />
http://answers.bitrock.com/questions/720/how-can-i-add-digital-signature-to-uninstaller-on-windows</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>