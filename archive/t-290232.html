<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" .nsi Script Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  .nsi Script Question NSIS Discussion" />
	
	<title> .nsi Script Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  .nsi Script Question</div>
<hr />
<div class="pda"><a href="t-290232.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=290232">.nsi Script Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">14th April 2008, 22:29</div></div><div class="posttext">I was creating a .nsi script to test and practice making a .nsi script. <br />
This is my code so far: <br />
<br />
Name &quot;Test1&quot;	 <br />
;<br />
Page directory<br />
Page instfiles<br />
;<br />
;								  <br />
InstallDir $PROGRAMFILES\NSIS_Test <br />
;<br />
Section &quot;!TestProgram&quot;		<br />
SetOutPath $INSTDIR<br />
File test1.txt<br />
File test2.txt<br />
File test3.txt<br />
;<br />
SectionEnd<br />
;<br />
;<br />
Section /o &quot;Uninstall&quot;<br />
WriteUninstaller $INSTDIR\Uninstal.exe<br />
  Delete $INSTDIR\test1.txt<br />
  Delete $INSTDIR\test2.txt<br />
  RMDir $INSTDIR<br />
SectionEnd<br />
<br />
Now heres my question:<br />
Before I compile how do I set the test1.txt, test2.txt, test3.txt to be included? Because when I compile it says those files are missing, so how do I include them into the script beyond putting in the &quot;File xxx&quot; tag? Can somebody please help me, thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">14th April 2008, 22:34</div></div><div class="posttext">As you have it written, when you compile, NSIS compiler will look for those three txt files in the same directory as your nsi script.  Do you have three files of those names in the same directory as the *.nsi file?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">14th April 2008, 23:46</div></div><div class="posttext">Oh! You have to put it in the same folder as your *.nsi file! Thanks AaronLS, also I have a question for you, do you know any links to good tutorials on writting *.nsi script files?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">15th April 2008, 00:02</div></div><div class="posttext">;) You can get really fancy and specify a relative path such as:<br />
File &quot;SubDirectory/file.txt&quot;<br />
File &quot;../SameLevelDirectory/file.txt&quot;<br />
<br />
I began my NSIS adventure by running NSIS fromt he Start menu and choosing &quot;NSIS Users Manual&quot; under documentation and reading through a good portion of the manual.  For example, there is lots more information about the &quot;File&quot; command.<br />
<br />
Tutorials:<br />
http://nsis.sourceforge.net/Category:Tutorials<br />
<br />
That website has lots of other sections with good information.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">15th April 2008, 00:23</div></div><div class="posttext">Thanks, but I have one more question.<br />
<br />
I can't seem to get the uninstaller to work..<br />
 Here is my code now<br />
<br />
Name &quot;Test1&quot;	 <br />
;<br />
OutFile installer.exe<br />
;<br />
Page components<br />
Page directory<br />
Page instfiles<br />
<br />
;<br />
;								<br />
<br />
  <br />
InstallDir $PROGRAMFILES\NSIS_Test <br />
;<br />
Section /o &quot;TestProgram&quot;		<br />
SetOutPath $INSTDIR<br />
File test1.txt<br />
File test2.txt<br />
File test3.txt<br />
;<br />
SectionEnd<br />
;<br />
Section /o &quot;Uninstaller&quot;<br />
WriteUninstaller $INSTDIR\uninstall.exe<br />
SectionEnd<br />
<br />
Section &quot;!Optional Program Files&quot;<br />
SetOutPath $INSTDIR\Test<br />
File test4.txt<br />
File test5.txt<br />
SectionEnd<br />
;<br />
Section &quot;!Optional Program Filesv2&quot;<br />
SetOutPath $INSTDIR\Test\Test2<br />
File test6.txt<br />
SectionEnd<br />
;<br />
;<br />
Section /o &quot;Uninstall&quot;<br />
  Delete $INSTDIR\uninstall.exe<br />
  Delete $INSTDIR\test1.txt<br />
  Delete $INSTDIR\test2.txt<br />
  Delete $INSTDIR\test3.txt<br />
  Delete $INSTDIR\Test\test4.txt<br />
  Delete $INSTDIR\Test\test5.txt<br />
  Delete $INSTDIR\Test\Test2\test6.txt<br />
SectionEnd<br />
<br />
<br />
But when I run the uninstaller in the end it doesn't do anything, it just says &quot;Completed&quot; but no files were removes. How do I fix this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">15th April 2008, 00:44</div></div><div class="posttext">Remove the /o from the Uninstaller section and see if that helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">15th April 2008, 00:46</div></div><div class="posttext">AaronLS, how do you put the installer in ModernUI?<br />
I've tried<br />
<br />
MUI_PAGE_WELCOME and other MUI_PAGE's but it says unknown command. Then I tried<br />
!insertmacro MUI_PAGE_WELCOME but then it says it can't find the macro. How do i fix this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">15th April 2008, 00:51</div></div><div class="posttext">You have to include MUI.nsh or <br />
!include &quot;MUI2.nsh&quot;<br />
<br />
I think there is a few MUI example scripts in the NSIS install directory under examples:<br />
C:\program files\NSIS\Examples\Modern UI\</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Koopa</div><div class="date">15th April 2008, 00:55</div></div><div class="posttext">E.g.<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
; MUI Settings<br />
!define MUI_ABORTWARNING<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Header\orange.bmp&quot;<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Wizard\orange.bmp&quot;<br />
!define MUI_COMPONENTSPAGE_CHECKBITMAP &quot;${NSISDIR}\Contrib\Graphics\Checks\simple-round.bmp&quot;<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\orange-install.ico&quot;<br />
!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\Icons\orange-uninstall.ico&quot;<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!define MUI_UNINSTALLER</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">15th April 2008, 01:06</div></div><div class="posttext">how do you add text to a page in MUI_? I tried doing:<br />
MUI_WELCOMEPAGE_TEXT &quot;text&quot;under the !insertmacro MUI_PAGE_WELCOME but it doesn't work to add any text or anything, how do I do this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">15th April 2008, 01:10</div></div><div class="posttext">You need !define and I think it needs to come before the page declaration if I remember correctly.<br />
<br />
<br />
!define MUI_WELCOMEPAGE_TEXT &quot;text&quot;<br />
!insertmacro MUI_PAGE_WELCOME</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aeroelim</div><div class="date">15th April 2008, 22:34</div></div><div class="posttext">Now im running into this problem... Im trying to put a function to do a .onMouseOverSection function command but everything I try it just gives me an error in the compile..<br />
<br />
(Note I want to put a mouseover message on the &quot;Test Program&quot; SECTION. Thanks!)<br />
<br />
This is my whole code so far : <br />
<br />
Name &quot;TestInst&quot;<br />
<br />
OutFile installer1_1.exe<br />
<br />
<br />
Function .onMouseOverSection<br />
FindWindow $RO &quot;Test Program&quot; $HWNDPARENT $TESTPROGRAM<br />
SendMessage $RO ${WM_SETTEXT} 0 &quot;STR: REQUIRED TEST PROGRAM SECTION PLEASE DO&quot;<br />
FunctionEnd<br />
<br />
Function .onInit<br />
  MessageBox MB_YESNO &quot;This will install My Program. Do you wish to continue?&quot; IDYES gogogo<br />
    Abort<br />
  gogogo:<br />
FunctionEnd<br />
Function un.onInit<br />
  MessageBox MB_YESNO &quot;This will completely remove 'MY PROGRAM' from your computer.  Do you wish to continue?&quot; IDYES gogogo<br />
    Abort<br />
  gogogo:<br />
FunctionEnd<br />
!include MUI2.nsh<br />
!define MUI_WELCOMEPAGE_TITLE &quot;Welcome to test install!&quot;<br />
!define MUI_WELCOMEPAGE_TEXT &quot;Welcome to test install! This is an installer testing my script creating skills!&quot;<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!define MUI_FINISHPAGE_TITLE &quot;Congratulations!&quot;<br />
!define MUI_FINISHPAGE_TEXT &quot;Your install has completed succesfully if you have made it to this page! GRATZ!&quot;<br />
!define MUI_FINISHPAGE_BUTTON &quot;Finish and Close&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!define MUI_WELCOMEPAGE_TEXT &quot;Welcome to the uninstaller for the Test Program!&quot;<br />
!insertmacro MUI_UNPAGE_WELCOME<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
!define MUI_FINISHPAGE_TEXT &quot;The Test Program has completed un-installation! The program is now completely removed from your computer. If you wish you can check to see if the Directory is still there but it shouldn't be!&quot;<br />
!insertmacro MUI_UNPAGE_FINISH<br />
<br />
InstallDir $PROGRAMFILES\_TEST<br />
<br />
Section &quot;!Test Program&quot;<br />
MessageBox MB_OK &quot;The Installation has started! Please Wait while the installation continues&quot;<br />
SetOutPath $INSTDIR<br />
File 1.txt<br />
File 2.txt<br />
File readme.txt<br />
File help.txt<br />
SetOutPath $INSTDIR\materials<br />
File wep1.txt<br />
File wep2.txt<br />
SetOutPath $INSTDIR\maps<br />
File 2tower.txt<br />
File aces.txt<br />
File city.txt<br />
SectionEnd<br />
<br />
Section /o &quot;Custom Maps&quot;<br />
SetOutPath $INSTDIR\maps<br />
File red.txt<br />
File blue.txt<br />
File yellow.txt<br />
File green.txt<br />
SectionEnd<br />
<br />
Section /o &quot;Uninstaller&quot;<br />
WriteUninstaller $INSTDIR\Uninstall.exe<br />
SectionEnd<br />
<br />
Section &quot;Uninstall&quot;<br />
Delete $INSTDIR\Uninstall.exe<br />
Delete $INSTDIR\maps\red.txt<br />
Delete $INSTDIR\maps\blue.txt<br />
Delete $INSTDIR\maps\yellow.txt<br />
Delete $INSTDIR\maps\green.txt<br />
Delete $INSTDIR\maps\2tower.txt<br />
Delete $INSTDIR\maps\aces.txt<br />
Delete $INSTDIR\maps\city.txt<br />
RMDir $INSTDIR\maps<br />
Delete $INSTDIR\materials\wep1.txt<br />
Delete $INSTDIR\materials\wep2.txt<br />
RMDir $INSTDIR\materials<br />
Delete $INSTDIR\readme.txt<br />
Delete $INSTDIR\help.txt<br />
Delete $INSTDIR\1.txt<br />
Delete $INSTDIR\2.txt<br />
RMDir $INSTDIR<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">15th April 2008, 22:52</div></div><div class="posttext">The compile errors indicates line 7 is the problem, and also gives this output:<br />
Usage: FindWindow $(user_var: handle output) WindowClass [WindowTitle] [Window_Parent] [Child_After]<br />
<br />
This means there is a probalem with your FindWindow statement.<br />
<br />
According to the FindWindow documentation in the manual, the first parameter must be a user var.  You are using $R0, but you should be using a variable you declared such as :<br />
<br />
Var /GLOBAL $FoundWindow</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>