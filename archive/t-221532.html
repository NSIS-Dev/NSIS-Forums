<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" License Background Colour, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  License Background Colour NSIS Discussion" />
	
	<title> License Background Colour [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  License Background Colour</div>
<hr />
<div class="pda"><a href="t-221532.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=221532">License Background Colour</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">15th July 2005, 15:29</div></div><div class="posttext">Is there any way to change to the background colour of the License text box so that you can have diffrent colours for each License page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">15th July 2005, 15:48</div></div><div class="posttext">Did you tried to use LicenseBkColor?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">15th July 2005, 15:52</div></div><div class="posttext">Yes but that changes the colour for all the license pages</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">15th July 2005, 17:17</div></div><div class="posttext">So, you have MULTIPLE license pages, next time let us know beforehand ;)<br />
<br />
anyhow use something along the lines of: <br />
<br />
!define MUI_PAGE_LICENSE_PRE MUI_PAGE_LICENSE_SetBackgroundColor<br />
<br />
...<br />
<br />
Function MUI_PAGE_LICENSE_SetBackgroundColor<br />
  ...do your thing here...<br />
 <br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">15th July 2005, 17:35</div></div><div class="posttext">Ok, what I've got at the moment is:<br />
<br />
  !define MUI_PAGE_CUSTOMFUNCTION_PRE ChangeColour<br />
<br />
   Function ChangeColour<br />
      FindWindow $0 &quot;&quot;#32770&quot;&quot; &quot;&quot; $HWNDPARENT<br />
      GetDlgItem $0 $0 1000<br />
      SetCtlColors $0 0xFF0000 0x00FF00<br />
   FunctioEnd<br />
<br />
Doesn't seem to work though</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th July 2005, 17:36</div></div><div class="posttext">so that you can have diffrent colours for each License page? :p (ok not that apparent, but still)<br />
<br />
The ...do your thing here... doesn't seem to work.<br />
<br />
 FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
 GetDlgItem $R0 $R0 1000<br />
 SetCtlColors $R0 &quot;&quot; FF0000<br />
<br />
I think it's because it's a RichEdit20A control.<br />
You can't change the font colour of it either (you can do so with other controls on the dialog though).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th July 2005, 17:49</div></div><div class="posttext">Send it EM_SETBKGNDCOLOR instead of using SetCtlColors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th July 2005, 18:17</div></div><div class="posttext">Whis is WM_USER + 67 which is... 0x400 + 67?<br />
What would that come to?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">15th July 2005, 18:24</div></div><div class="posttext">Cheers, but I can't seem to get it to work<br />
<br />
My function so far:<br />
<br />
   FindWindow $0 &quot;&quot;#32770&quot;&quot; &quot;&quot; $HWNDPARENT<br />
   GetDlgItem $0 $0 1000<br />
   SendMessage $0 ${EM_SETBKGNDCOLOR} 0xFF0000 0x00FF00</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th July 2005, 19:21</div></div><div class="posttext">You need !define EM_SETBKGNDCOLOR in your script too (it's not in WinMessages.nsh)<br />
It's WM_USER + 67 (0x400 + 67) but I'm not sure what the correct answer to that is.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th July 2005, 19:36</div></div><div class="posttext">EM_SETBKGNDCOLOR seems to be 1091 but I can't get the colour codes to work.<br />
<br />
Edit: Now it works (had a look at http://msdn.microsoft.com/library/en-us/shellcc/platform/commctls/richedit/richeditcontrols/richeditcontrolreference/richeditmessages/em_setbkgndcolor.asp).<br />
<br />
!define EM_SETBKGNDCOLOR 1091<br />
<br />
Function show<br />
 FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
 GetDlgItem $R0 $R0 1000<br />
 SendMessage $R0 ${EM_SETBKGNDCOLOR} 0 0xC0C0C0<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">15th July 2005, 22:34</div></div><div class="posttext">Afrow Uk, Could you post your full working code as I can't seem to get it to work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th July 2005, 00:28</div></div><div class="posttext">!define MUI_PAGE_CUSTOMFUNCTION_SHOW licenseAShow<br />
!insertmacro MUI_PAGE_LICENSE &quot;license.txt&quot;<br />
<br />
!define EM_SETBKGNDCOLOR 1091<br />
<br />
Function licenseAShow<br />
 FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
 GetDlgItem $R0 $R0 1000<br />
 SendMessage $R0 ${EM_SETBKGNDCOLOR} 0 0xC0C0C0<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">C_Denton</div><div class="date">16th July 2005, 14:58</div></div><div class="posttext">Thanks for your help!<br />
<br />
In case anyone else finds this thread useful I should warn you that the colours format is BGR (instead of the normal RGB).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>