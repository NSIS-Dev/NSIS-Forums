<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" unknown variable/constant warning, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  unknown variable/constant warning NSIS Discussion" />
	
	<title> unknown variable/constant warning [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  unknown variable/constant warning</div>
<hr />
<div class="pda"><a href="t-330629.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330629">unknown variable/constant warning</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">camato10</div><div class="date">16th May 2011, 15:21</div></div><div class="posttext">Any help on why I am getting this warning would be really appreciated. I am basically doing a silent install of apache and php then I want to move the folders/files from Apache to another folder.<br />
<br />
My Code:<br />
##====================================================================<br />
##Section Start<br />
##====================================================================<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\AmegaWeb2&quot;<br />
ShowInstDetails show<br />
!include 'FileFunc.nsh'<br />
!insertmacro Locateunkno<br />
!include &quot;${NSISDIR}\Include\MoveFolder.nsh&quot;<br />
<br />
Section &quot;Apache&quot; SEC01<br />
  SetOutPath &quot;$INSTDIR\AmegaWeb2&quot;<br />
   MessageBox MB_YESNO &quot;Are you sure you want to install Apache Web Server and PHP&quot; /SD IDYES IDNO endApache<br />
    #File &quot;${NSISDIR}\Amega\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi&quot;<br />
    ExecWait '&quot;msiexec&quot; /I &quot;$INSTDIR\AmegaWeb2\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi&quot; /passive ALLUSERS=1 SERVERADMIN=admin@localhost SERVERNAME=localhost SERVERDOMAIN=localhost SERVERPORT=80'<br />
endApache:<br />
<br />
##===========================================================<br />
##Move Apache2.2 folder into AmegaWeb<br />
##==========================================================<br />
Var /GLOBAL switch_overwrite<br />
StrCpy $switch_overwrite 0<br />
!insertmacro MoveFolder &quot;$INSTDIR\Apache Software Foundation\Apache2.2\&quot; &quot;$INSTDIR\AmegaWeb2\&quot; &quot;*.*&quot;<br />
##CopyFiles /SILENT /FILESONLY &quot;$INSTDIR\Apache Software Foundation\Apache2.2\&quot; &quot;$INSTDIR\AmegaWeb2\&quot;<br />
<br />
##=================================================================<br />
##PHP Install<br />
##=================================================================<br />
   # File &quot;${NSISDIR}\Amega\php-5.3.6-nts-Win32-VC9-x86.msi&quot;<br />
    ExecWait '&quot;msiexec&quot; /i &quot;$INSTDIR\AmegaWeb2\php-5.3.6-nts-Win32-VC9-x86.msi&quot;/q INSTALLDIR=c:\PHP2 ADDLOCAL=cgi,ext_php_mysqli'<br />
#endPHP:<br />
SectionEnd<br />
<br />
Output from<br />
Command line: <br />
&quot;C:\Program Files (x86)\NSIS\makensis.exe&quot;  /NOTIFYHWND 262744  &quot;C:\Program Files (x86)\NSIS\Amega\amegatest.nsi&quot;<br />
<br />
MakeNSIS v2.46 - Copyright 1995-2009 Contributors<br />
See the file COPYING for license details.<br />
Credits can be found in the Users Manual.<br />
<br />
Processing config: <br />
Processing plugin dlls: &quot;C:\Program Files (x86)\NSIS\Plugins\*.dll&quot;<br />
 - AdvSplash::show<br />
 - Banner::destroy<br />
 - Banner::getWindow<br />
 - Banner::show<br />
 - BgImage::AddImage<br />
 - BgImage::AddText<br />
 - BgImage::Clear<br />
 - BgImage::Destroy<br />
 - BgImage::Redraw<br />
 - BgImage::SetBg<br />
 - BgImage::SetReturn<br />
 - BgImage::Sound<br />
 - Dialer::AttemptConnect<br />
 - Dialer::AutodialHangup<br />
 - Dialer::AutodialOnline<br />
 - Dialer::AutodialUnattended<br />
 - Dialer::GetConnectedState<br />
 - InstallOptions::dialog<br />
 - InstallOptions::initDialog<br />
 - InstallOptions::show<br />
 - LangDLL::LangDialog<br />
 - Math::Script<br />
 - NSISdl::download<br />
 - NSISdl::download_quiet<br />
 - Splash::show<br />
 - StartMenu::Init<br />
 - StartMenu::Select<br />
 - StartMenu::Show<br />
 - System::Alloc<br />
 - System::Call<br />
 - System::Copy<br />
 - System::Free<br />
 - System::Get<br />
 - System::Int64Op<br />
 - System::Store<br />
 - TypeLib::GetLibVersion<br />
 - TypeLib::Register<br />
 - TypeLib::UnRegister<br />
 - UserInfo::GetAccountType<br />
 - UserInfo::GetName<br />
 - UserInfo::GetOriginalAccountType<br />
 - VPatch::GetFileCRC32<br />
 - VPatch::GetFileMD5<br />
 - VPatch::vpatchfile<br />
 - nsDialogs::Create<br />
 - nsDialogs::CreateControl<br />
 - nsDialogs::CreateItem<br />
 - nsDialogs::CreateTimer<br />
 - nsDialogs::GetUserData<br />
 - nsDialogs::KillTimer<br />
 - nsDialogs::OnBack<br />
 - nsDialogs::OnChange<br />
 - nsDialogs::OnClick<br />
 - nsDialogs::OnNotify<br />
 - nsDialogs::SelectFileDialog<br />
 - nsDialogs::SelectFolderDialog<br />
 - nsDialogs::SetRTL<br />
 - nsDialogs::SetUserData<br />
 - nsDialogs::Show<br />
 - nsExec::Exec<br />
 - nsExec::ExecToLog<br />
 - nsExec::ExecToStack<br />
<br />
!define: &quot;MUI_INSERT_NSISCONF&quot;=&quot;&quot;<br />
<br />
Changing directory to: &quot;C:\Program Files (x86)\NSIS\Amega&quot;<br />
<br />
Processing script file: &quot;C:\Program Files (x86)\NSIS\Amega\amegatest.nsi&quot;<br />
!define: &quot;PRODUCT_NAME&quot;=&quot;AmegaWeb&quot;<br />
!define: &quot;PRODUCT_VERSION&quot;=&quot;3.5&quot;<br />
!define: &quot;PRODUCT_PUBLISHER&quot;=&quot;Amega Scientific Corp.&quot;<br />
!define: &quot;PRODUCT_WEB_SITE&quot;=&quot;http://www.amegascientific.com&quot;<br />
!include: &quot;C:\Program Files (x86)\NSIS\Include\MUI.nsh&quot;<br />
!include: &quot;C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh&quot;<br />
NSIS Modern User Interface version 1.8 - Copyright 2002-2009 Joost Verburg (C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh:8)<br />
!define: &quot;MUI_INCLUDED&quot;=&quot;&quot;<br />
!define: &quot;MUI_SYSVERSION&quot;=&quot;1.8&quot;<br />
!define: &quot;MUI_VERBOSE&quot;=&quot;3&quot;<br />
!include: closed: &quot;C:\Program Files (x86)\NSIS\Contrib\Modern UI\System.nsh&quot;<br />
!include: closed: &quot;C:\Program Files (x86)\NSIS\Include\MUI.nsh&quot;<br />
!define: &quot;MUI_ABORTWARNING&quot;=&quot;&quot;<br />
!define: &quot;MUI_ICON&quot;=&quot;C:\Program Files (x86)\NSIS\Amega\ASbutton.ico&quot;<br />
!insertmacro: MUI_PAGE_DIRECTORY<br />
!insertmacro: end of MUI_PAGE_DIRECTORY<br />
!insertmacro: MUI_PAGE_INSTFILES<br />
!insertmacro: end of MUI_PAGE_INSTFILES<br />
!insertmacro: MUI_PAGE_FINISH<br />
!insertmacro: end of MUI_PAGE_FINISH<br />
!insertmacro: MUI_LANGUAGE<br />
!insertmacro: end of MUI_LANGUAGE<br />
Name: &quot;AmegaWeb 3.5&quot;<br />
OutFile: &quot;Setup.exe&quot;<br />
InstallDir: &quot;$PROGRAMFILES\AmegaWeb2&quot;<br />
ShowInstDetails: show<br />
!include: &quot;C:\Program Files (x86)\NSIS\Include\FileFunc.nsh&quot;<br />
!define: &quot;FILEFUNC_INCLUDED&quot;=&quot;&quot;<br />
!include: &quot;C:\Program Files (x86)\NSIS\Include\Util.nsh&quot;<br />
!include: closed: &quot;C:\Program Files (x86)\NSIS\Include\Util.nsh&quot;<br />
!define: &quot;Locate&quot;=&quot;!insertmacro LocateCall&quot;<br />
!define: &quot;un.Locate&quot;=&quot;!insertmacro LocateCall&quot;<br />
!define: &quot;GetSize&quot;=&quot;!insertmacro GetSizeCall&quot;<br />
!define: &quot;un.GetSize&quot;=&quot;!insertmacro GetSizeCall&quot;<br />
!define: &quot;DriveSpace&quot;=&quot;!insertmacro DriveSpaceCall&quot;<br />
!define: &quot;un.DriveSpace&quot;=&quot;!insertmacro DriveSpaceCall&quot;<br />
!define: &quot;GetDrives&quot;=&quot;!insertmacro GetDrivesCall&quot;<br />
!define: &quot;un.GetDrives&quot;=&quot;!insertmacro GetDrivesCall&quot;<br />
!define: &quot;GetTime&quot;=&quot;!insertmacro GetTimeCall&quot;<br />
!define: &quot;un.GetTime&quot;=&quot;!insertmacro GetTimeCall&quot;<br />
!define: &quot;GetFileAttributes&quot;=&quot;!insertmacro GetFileAttributesCall&quot;<br />
!define: &quot;un.GetFileAttributes&quot;=&quot;!insertmacro GetFileAttributesCall&quot;<br />
!define: &quot;GetFileVersion&quot;=&quot;!insertmacro GetFileVersionCall&quot;<br />
!define: &quot;un.GetFileVersion&quot;=&quot;!insertmacro GetFileVersionCall&quot;<br />
!define: &quot;GetExeName&quot;=&quot;!insertmacro GetExeNameCall&quot;<br />
!define: &quot;un.GetExeName&quot;=&quot;!insertmacro GetExeNameCall&quot;<br />
!define: &quot;GetExePath&quot;=&quot;!insertmacro GetExePathCall&quot;<br />
!define: &quot;un.GetExePath&quot;=&quot;!insertmacro GetExePathCall&quot;<br />
!define: &quot;GetParameters&quot;=&quot;!insertmacro GetParametersCall&quot;<br />
!define: &quot;un.GetParameters&quot;=&quot;!insertmacro GetParametersCall&quot;<br />
!define: &quot;GetOptions&quot;=&quot;!insertmacro GetOptionsCall&quot;<br />
!define: &quot;un.GetOptions&quot;=&quot;!insertmacro GetOptionsCall&quot;<br />
!define: &quot;GetOptionsS&quot;=&quot;!insertmacro GetOptionsSCall&quot;<br />
!define: &quot;un.GetOptionsS&quot;=&quot;!insertmacro GetOptionsSCall&quot;<br />
!define: &quot;GetRoot&quot;=&quot;!insertmacro GetRootCall&quot;<br />
!define: &quot;un.GetRoot&quot;=&quot;!insertmacro GetRootCall&quot;<br />
!define: &quot;GetParent&quot;=&quot;!insertmacro GetParentCall&quot;<br />
!define: &quot;un.GetParent&quot;=&quot;!insertmacro GetParentCall&quot;<br />
!define: &quot;GetFileName&quot;=&quot;!insertmacro GetFileNameCall&quot;<br />
!define: &quot;un.GetFileName&quot;=&quot;!insertmacro GetFileNameCall&quot;<br />
!define: &quot;GetBaseName&quot;=&quot;!insertmacro GetBaseNameCall&quot;<br />
!define: &quot;un.GetBaseName&quot;=&quot;!insertmacro GetBaseNameCall&quot;<br />
!define: &quot;GetFileExt&quot;=&quot;!insertmacro GetFileExtCall&quot;<br />
!define: &quot;un.GetFileExt&quot;=&quot;!insertmacro GetFileExtCall&quot;<br />
!define: &quot;BannerTrimPath&quot;=&quot;!insertmacro BannerTrimPathCall&quot;<br />
!define: &quot;un.BannerTrimPath&quot;=&quot;!insertmacro BannerTrimPathCall&quot;<br />
!define: &quot;DirState&quot;=&quot;!insertmacro DirStateCall&quot;<br />
!define: &quot;un.DirState&quot;=&quot;!insertmacro DirStateCall&quot;<br />
!define: &quot;RefreshShellIcons&quot;=&quot;!insertmacro RefreshShellIconsCall&quot;<br />
!define: &quot;un.RefreshShellIcons&quot;=&quot;!insertmacro RefreshShellIconsCall&quot;<br />
!include: closed: &quot;C:\Program Files (x86)\NSIS\Include\FileFunc.nsh&quot;<br />
!insertmacro: Locate<br />
!insertmacro: end of Locate<br />
!include: &quot;C:\Program Files (x86)\NSIS\Include\MoveFolder.nsh&quot;<br />
Function: &quot;.MoveFolder_Locate_createDir&quot;<br />
!insertmacro: _If<br />
!insertmacro: end of _If<br />
Push: $R2<br />
StrLen $R2 &quot;$R0&quot;<br />
StrCpy $R2 &quot;$R9&quot; () ($R2)<br />
CreateDirectory: &quot;$R1$R2&quot;<br />
Pop: $R2<br />
!insertmacro: _EndIf<br />
!insertmacro: end of _EndIf<br />
Push: $R1<br />
FunctionEnd<br />
Function: &quot;.MoveFolder_Locate_moveFile&quot;<br />
Push: $R2<br />
StrLen $R2 &quot;$R0&quot;<br />
StrCpy $R2 &quot;$R9&quot; () ($R2)<br />
StrCpy $R2 &quot;$R1$R2&quot; () ()<br />
IfFileExists: &quot;$R2&quot; ? +3 : 0<br />
Rename: $R9-&gt;$R2<br />
Goto: done<br />
!insertmacro: _If<br />
warning: unknown variable/constant &quot;switch_overwrite&quot; detected, ignoring (macro:_==:1)<br />
!insertmacro: end of _If<br />
Delete: &quot;$R2&quot;<br />
Rename: $R9-&gt;$R2<br />
Delete: &quot;$R9&quot;<br />
Goto: done<br />
!insertmacro: _EndIf<br />
!insertmacro: end of _EndIf<br />
Push: $0<br />
Push: $1<br />
Push: $2<br />
Push: $3<br />
GetFileTime: $R9-&gt;$0,$1<br />
GetFileTime: $R2-&gt;$2,$3<br />
IntCmp $0:$2 equal=0, &lt; older, &gt; newer<br />
IntCmp $1:$3 equal=older, &lt; older, &gt; newer<br />
Delete: &quot;$R9&quot;<br />
Goto: time_check_done<br />
Delete: &quot;$R2&quot;<br />
Rename: $R9-&gt;$R2<br />
Delete: &quot;$R9&quot;<br />
Pop: $3<br />
Pop: $2<br />
Pop: $1<br />
Pop: $0<br />
Pop: $R2<br />
Push: $R1<br />
FunctionEnd<br />
Function: &quot;.MoveFolder_Locate_deleteDir&quot;<br />
!insertmacro: _If<br />
!insertmacro: end of _If<br />
RMDir: &quot;$R9&quot;<br />
IntOp: $R2=$R2+1<br />
!insertmacro: _EndIf<br />
!insertmacro: end of _EndIf<br />
Push: $R1<br />
FunctionEnd<br />
!include: closed: &quot;C:\Program Files (x86)\NSIS\Include\MoveFolder.nsh&quot;<br />
Section: &quot;Apache&quot; -&gt;(SEC01)<br />
SetOutPath: &quot;$INSTDIR\AmegaWeb2&quot;<br />
MessageBox: 4: &quot;Are you sure you want to install Apache Web Server and PHP&quot; (on IDNO goto endApache)<br />
ExecWait: &quot;&quot;msiexec&quot; /I &quot;$INSTDIR\AmegaWeb2\httpd-2.2.17-win32-x86-openssl-0.9.8o.msi&quot; /passive ALLUSERS=1 SERVERADMIN=admin@localhost SERVERNAME=localhost SERVERDOMAIN=localhost SERVERPORT=80&quot; (-&gt;)<br />
Var: &quot;switch_overwrite&quot;<br />
StrCpy $switch_overwrite &quot;1&quot; () ()<br />
!insertmacro: MoveFolder<br />
!define: &quot;MOVEFOLDER_JUMP&quot;=&quot;55.2&quot;<br />
Push: $R0<br />
Push: $R1<br />
StrCpy $R0 &quot;$INSTDIR\Apache Software Foundation\Apache2.2\&quot; () ()<br />
StrCpy $R1 &quot;$INSTDIR\AmegaWeb2\&quot; () ()<br />
Push: $0<br />
StrCpy $0 &quot;$R0&quot; (1) (-1)<br />
StrCmp &quot;$0&quot; &quot;\&quot; equal=0, nonequal=+2<br />
StrCpy $R0 &quot;$R0&quot; (-1) ()<br />
StrCpy $0 &quot;$R1&quot; (1) (-1)<br />
StrCmp &quot;$0&quot; &quot;\&quot; equal=0, nonequal=+2<br />
StrCpy $R1 &quot;$R1&quot; (-1) ()<br />
Pop: $0<br />
CreateDirectory: &quot;$R1&quot;<br />
DetailPrint: &quot;Moving files: $R0\*.* to $R1\&quot;<br />
Push: $R6<br />
Push: $R7<br />
Push: $R8<br />
Push: $R9<br />
!insertmacro: LocateCall<br />
!insertmacro: end of LocateCall<br />
!insertmacro: LocateCall<br />
!insertmacro: end of LocateCall<br />
Push: $R2<br />
StrCpy $R2 &quot;0&quot; () ()<br />
!insertmacro: LocateCall<br />
!insertmacro: end of LocateCall<br />
StrCmp &quot;$R2&quot; &quot;0&quot; equal=0, nonequal=deldir_loop_55.2<br />
Pop: $R2<br />
Push: $R2<br />
StrCpy $R2 &quot;0&quot; () ()<br />
!insertmacro: LocateCall<br />
!insertmacro: end of LocateCall<br />
StrCmp &quot;$R2&quot; &quot;0&quot; equal=0, nonequal=delnewdir_loop_55.2<br />
Pop: $R2<br />
Pop: $R9<br />
Pop: $R8<br />
Pop: $R7<br />
Pop: $R6<br />
RMDir: &quot;$R0&quot;<br />
Pop: $R1<br />
Pop: $R0<br />
!undef: &quot;MOVEFOLDER_JUMP&quot;<br />
!insertmacro: end of MoveFolder<br />
ExecWait: &quot;&quot;msiexec&quot; /i &quot;$INSTDIR\AmegaWeb2\php-5.3.6-nts-Win32-VC9-x86.msi&quot;/q INSTALLDIR=c:\PHP2 ADDLOCAL=cgi,ext_php_mysqli&quot; (-&gt;)<br />
SectionEnd<br />
<br />
Processed 1 file, writing output:<br />
Adding plug-ins initializing function... Done!<br />
Processing pages... Done!<br />
Removing unused resources... Done!<br />
Generating language tables... Done!<br />
<br />
Output: &quot;C:\Program Files (x86)\NSIS\Amega\Setup.exe&quot;<br />
Install: 4 pages (256 bytes), 1 section (1048 bytes), 575 instructions (16100 bytes), 195 strings (2783 bytes), 1 language table (294 bytes).<br />
Datablock optimizer saved 8009 bytes (~9.4%).<br />
<br />
Using zlib compression.<br />
<br />
EXE header size:               60416 / 35840 bytes<br />
Install code:                   4173 / 20857 bytes<br />
Install data:                  16216 / 67685 bytes<br />
CRC (0x8143ADB9):                  4 / 4 bytes<br />
<br />
Total size:                    80809 / 124386 bytes (64.9%)<br />
<br />
1 warning:<br />
  unknown variable/constant &quot;switch_overwrite&quot; detected, ignoring (macro:_==:1)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th May 2011, 16:59</div></div><div class="posttext">Please attach large amounts of code in future. You need to move your Var declaration before the !include MoveFolder.nsh.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>