<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A Preselect page in setup, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A Preselect page in setup NSIS Discussion" />
	
	<title> A Preselect page in setup [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A Preselect page in setup</div>
<hr />
<div class="pda"><a href="t-274799.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274799">A Preselect page in setup</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dark^Listner</div><div class="date">23rd July 2007, 13:08</div></div><div class="posttext">Hello<br />
IÂ´m looking for a possibility to get a second components page in my installer. The user should have to decide first between two mainthemes of the installation. I have for each of them a componets page. For example: when setup starts you can decide if you want to install &quot;game 1&quot; or &quot;game 2&quot;. then you can choose the options. It is unpossible to make 2 setup runtimes because they would have t large, to i canÂ´t put the on one cd.<br />
<br />
If there is a possiblity and if you understand my little bit worst english, could anyone post the code for it.<br />
<br />
Thank you very much<br />
<br />
Dark^Listner</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2007, 13:20</div></div><div class="posttext">Create a custom page using InstallOptions to begin with.<br />
Based on the user's selection on there, you can decide which sections should be hidden from the single components page (so effectively you have two components pages, but it is in fact one with a selected list of items to install).<br />
<br />
To hide a section, set its text to &quot;&quot; with SectionSetText.<br />
<br />
As for displaying which game is being installed on those pages, set Name to a variable like so:<br />
<br />
Var $NAME<br />
Name $NAME<br />
<br />
Function .onInit<br />
  StrCpy $NAME &quot;My Installer Name&quot;<br />
FunctionEnd<br />
<br />
When you change the value of $NAME, it shall be reflected on the installer pages.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dark^Listner</div><div class="date">23rd July 2007, 13:35</div></div><div class="posttext">Sorry, but i donÂ´t understand one thing. :-)<br />
normaly all options on the componets page are activate, so it is a problem to hide these option, because the user canÂ´t see them so he also canÂ´t disactivate them. so if have to disable all options first. right? but i donÂ´t know how?<br />
<br />
thx for your answers<br />
<br />
<br />
------------------------------------<br />
is it possible to post the whole code foor a custome page which to radiobuttons and th command to hide or display the components, because my problems starts in making a new page<br />
thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2007, 14:15</div></div><div class="posttext">Before displaying the components page, you select and hide the sections that you do not want to have installed using !insertmacro SelectSection (from Sections.nsh) and SectionSetText &quot;&quot;.<br />
<br />
Your code might look something like this:<br />
<br />
!include LogicLib.nsh<br />
!include Sections.nsh<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE ComponentsPagePre<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
Section &quot;&quot; GAME1_1<br />
...<br />
SectionEnd<br />
<br />
Section &quot;&quot; GAME1_2<br />
...<br />
SectionEnd<br />
<br />
Section &quot;&quot; GAME2_1<br />
...<br />
SectionEnd<br />
<br />
Section &quot;&quot; GAME2_2<br />
...<br />
SectionEnd<br />
<br />
Function ComponentsPagePre<br />
<br />
  # Which game to install?<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;my ini file.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
<br />
  # Install game 1.<br />
  ${If} $R0 == 1<br />
<br />
    # Show and select all game 1 components.<br />
    !insertmacro SelectSection ${GAME1_1}<br />
    !insertmacro SelectSection ${GAME1_2}<br />
    SectionSetText ${GAME1_1} &quot;Game 1 Section 1&quot;<br />
    SectionSetText ${GAME1_2} &quot;Game 1 Section 2&quot;<br />
<br />
    # Hide and unselect all game 2 components.<br />
    !insertmacro UnselectSection ${GAME2_1}<br />
    !insertmacro UnselectSection ${GAME2_2}<br />
    SectionSetText ${GAME2_1} &quot;&quot;<br />
    SectionSetText ${GAME2_2} &quot;&quot;<br />
<br />
  # Install game 2.<br />
  ${Else}<br />
<br />
    # Show and select all game 2 components.<br />
    !insertmacro SelectSection ${GAME2_1}<br />
    !insertmacro SelectSection ${GAME2_2}<br />
    SectionSetText ${GAME2_1} &quot;Game 2 Section 1&quot;<br />
    SectionSetText ${GAME2_2} &quot;Game 2 Section 2&quot;<br />
<br />
    # Hide and unselect all game 1 components.<br />
    !insertmacro UnselectSection ${GAME1_1}<br />
    !insertmacro UnselectSection ${GAME1_2}<br />
    SectionSetText ${GAME1_1} &quot;&quot;<br />
    SectionSetText ${GAME1_2} &quot;&quot;<br />
<br />
  ${EndIf}<br />
<br />
FunctionEnd<br />
<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2007, 14:16</div></div><div class="posttext">There are dozens of InstallOptions examples. A good base INI file with two radio buttons you can use is Examples\makensis.ini<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dark^Listner</div><div class="date">23rd July 2007, 14:57</div></div><div class="posttext">THank you very much Afrow UK<br />
it loks good, but it doensnÂ´d work because there is an error in &quot;!insertmacro MUI_PAGE_COMPONENTS&quot; nsis canÂ´t find a file. I donÂ´t know where what to to with a -ini file <br />
maybe should do like !include precmop.ini?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2007, 18:10</div></div><div class="posttext">!include MUI.nsh<br />
<br />
This is for a Modern UI installer.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dark^Listner</div><div class="date">23rd July 2007, 19:53</div></div><div class="posttext">sorry, now i can compile the script but the command !define <br />
!insertmacro MUI_PAGE_COMPONENTS makes that i have two componets pages, but it isnÂ´t possible to get my .ini page allthough they are included in the script<br />
<br />
<br />
EDIT: Now it works thx you so much</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>