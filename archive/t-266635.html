<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Loading Bar and Execwait question?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Loading Bar and Execwait question? NSIS Discussion" />
	
	<title> Loading Bar and Execwait question? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Loading Bar and Execwait question?</div>
<hr />
<div class="pda"><a href="t-266635.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266635">Loading Bar and Execwait question?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joseph0953</div><div class="date">26th February 2007, 03:50</div></div><div class="posttext">I put â€œ Execwait â€œ command in install section, but when the files extract finish and execute program, loading bar can not auto close, so it will be appear two windows together.Is there a way to let loading bar display the files extract finish and auto close itself then run the program?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th February 2007, 05:34</div></div><div class="posttext">Well, ExecWait means execute the specified process and wait until finishes, thus is useful if you want during the installation to execute a process and continue.<br />
Probably you should replace it with Exec and add it in function .onInstSuccess instead of section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joseph0953</div><div class="date">26th February 2007, 19:23</div></div><div class="posttext">Thanks Red Wine, Thanks for your help <br />
<br />
But I still have another question ,How do I know use which command when program close then the files can be delete in function .onInstSuccess.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th February 2007, 19:38</div></div><div class="posttext">Well, one option is to add the command Delete /REBOOTOK right after the Exec command, e.g.<br />
Exec &quot;$TEMP\my_file.exe&quot;<br />
Sleep 100<br />
Delete /REBOOTOK &quot;$TEMP\my_file.exe&quot;<br />
Another option, hide installer window and use ExecWait, e.g.<br />
HideWindow<br />
ExecWait &quot;$TEMP\my_file.exe&quot;<br />
Delete &quot;$TEMP\my_file.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joseph0953</div><div class="date">27th February 2007, 17:36</div></div><div class="posttext">OutFile &quot;App.exe&quot;<br />
Caption &quot;Loading...&quot;<br />
Section<br />
DetailPrint 'Initializing...'<br />
Sleep 500<br />
Sleep 500<br />
DetailPrint 'Loading Graphics...'<br />
Sleep 500<br />
Sleep 500<br />
DetailPrint 'Finalizing...'<br />
Sleep 500<br />
Sleep 500<br />
SetDetailsPrint None<br />
<br />
SetOutPath $Temp\ABC<br />
  File &quot;AAA.dll&quot;<br />
  File &quot;BBB.dat&quot;<br />
  File &quot; App.exe &quot;<br />
<br />
SectionEnd<br />
<br />
Subcaption 3 &quot; &quot;<br />
XPStyle on<br />
AutoCloseWindow true<br />
ChangeUI all &quot;${NSISDIR}\Contrib\UIs\LoadingBar.exe&quot;<br />
<br />
Function .onInstSuccess<br />
<br />
Exec &quot;$INSTDIR\ App.exe &quot;<br />
<br />
FunctionEnd<br />
<br />
My question is when user close the program then how can let these files will be delete automatically. If put delete command in Function .onInstSuccess ,the program can not run</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2007, 18:00</div></div><div class="posttext">You're extracting these 3 files in $TEMP and then you execute a file from $INSTDIR, is this correct? Anyway, probably you don't need the callback at all.<br />
Extract the files in $PLUGINSDIR and add a last hidden section where you should hide installer (HideWindow) and ExecWait &quot;$PLUGINSDIR\App.exe&quot;<br />
That's all</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joseph0953</div><div class="date">27th February 2007, 20:02</div></div><div class="posttext">Thanks Red Wine<br />
Thank you for help<br />
I have try , very success</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>