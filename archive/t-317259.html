<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialogs radiobuttons default state, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialogs radiobuttons default state NSIS Discussion" />
	
	<title> nsDialogs radiobuttons default state [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialogs radiobuttons default state</div>
<hr />
<div class="pda"><a href="t-317259.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317259">nsDialogs radiobuttons default state</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">24th February 2010, 21:13</div></div><div class="posttext">I am trying to follow this example for radiobuttons:<br />
http://nsis.sourceforge.net/NsDialogs_FAQ#How_to_easily_handle_radiobutton_selections<br />
<br />
I have been all through the Googlenets. I am not too familiar with nsDialogs and am running into trouble:<br />
<br />
1) I want the first radio button to be selected by default. I can do this with SendMessage or NSD_SetState or NSD_Check but they all have the same problem: if the user simply clicks Next, it will not work, $MPLAYER_VERSION is supposed to return 'mplayer-svn-30369' for the first choice but it will be simply blank. I have to click on the first choice even if it is already checked for it to work.<br />
<br />
2) Remember what the user selected if they leave the page and come back. I read the readme and am unsure how to apply it to the code. Maybe a bump in the right direction...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">24th February 2010, 21:14</div></div><div class="posttext">Script. Doesn't require any other files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th February 2010, 21:55</div></div><div class="posttext">Instead of deciding on what radio button has been selected when they click on them, just check which radio button is selected in the page leave function.<br />
<br />
No need for Get/SetUserdata either.<br />
<br />
Edit: And you can store which radio button was selected (maybe a numeric value) in another variable then use that value to set the check state again on page creation.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">24th February 2010, 23:24</div></div><div class="posttext">I got it to work. If the user presses Next without clicking the default choice it will register properly and to remember the choice when going back to the page.<br />
<br />
<br />
; The name of the installer<br />
Name &quot;MPlayer&quot;<br />
<br />
; The file to write<br />
OutFile &quot;mp-inst.exe&quot;<br />
<br />
; Request application privileges for Windows Vista<br />
RequestExecutionLevel user<br />
<br />
InstallDir &quot;$DESKTOP&quot;<br />
<br />
ShowInstDetails show<br />
<br />
!include MUI2.nsh<br />
!include LogicLib.nsh<br />
!include nsDialogs.nsh<br />
<br />
Var MPLAYER_486GENERIC<br />
Var MPLAYER_AMDMULTI<br />
Var MPLAYER_INTELMULTI<br />
Var MPLAYER_SELECTION_STATE<br />
Var MPLAYER_VERSION<br />
<br />
;--------------------------------<br />
<br />
; Pages<br />
<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
Page custom PageMPlayerBuild PageMPlayerBuildLeave<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
;--------------------------------<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Function PageMPlayerBuild<br />
<br />
  nsDialogs::Create /NOUNLOAD 1018<br />
  Pop $0<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Choose MPlayer Build&quot; &quot;Choose which MPlayer build you would like to install.&quot;<br />
  ${NSD_CreateLabel} 0 0 100% 10u &quot;Select the MPlayer build you would like to install and click Install to continue.&quot;<br />
<br />
  ${NSD_CreateRadioButton} 10 35 100% 10u &quot;Generic i486 or better (CPU Runtime Detection)&quot;<br />
  Pop $MPLAYER_486GENERIC<br />
  ${NSD_AddStyle} $MPLAYER_486GENERIC ${WS_GROUP}<br />
  ${NSD_CreateLabel} 26 55 100% 20u &quot;Generic build for all x86/x86-64 CPUs using runtime cpudetection.$\nIf you are unsure, select this build.&quot;<br />
<br />
  ${NSD_CreateRadioButton} 10 95 100% 10u &quot;AMD Multicore (X2/X3/X4/Phenom)&quot;<br />
  Pop $MPLAYER_AMDMULTI<br />
  ${NSD_CreateLabel} 26 115 100% 20u &quot;Optimized for multicore AMD processors using experimental multithreaded$\nFFmpeg-mt branch.&quot;<br />
  <br />
  ${NSD_CreateRadioButton} 10 155 100% 10u &quot;Intel Multicore (P4EE/P4D/Xeon/Core2/i7/etc)&quot;<br />
  Pop $MPLAYER_INTELMULTI<br />
  ${NSD_CreateLabel} 26 175 100% 20u &quot;Optimized for multicore Intel processors using experimental multithreaded$\nFFmpeg-mt branch.&quot;<br />
<br />
  ${If} $MPLAYER_SELECTION_STATE = 1<br />
    SendMessage $MPLAYER_486GENERIC ${BM_SETCHECK} 1 0<br />
  ${ElseIf} $MPLAYER_SELECTION_STATE = 2<br />
    SendMessage $MPLAYER_AMDMULTI ${BM_SETCHECK} 1 0<br />
  ${ElseIf} $MPLAYER_SELECTION_STATE = 3<br />
    SendMessage $MPLAYER_INTELMULTI ${BM_SETCHECK} 1 0<br />
  ${Else}<br />
    SendMessage $MPLAYER_486GENERIC ${BM_SETCHECK} 1 0<br />
  ${EndIf}<br />
<br />
  nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Function PageMPlayerBuildLeave<br />
<br />
  ${NSD_GetState} $MPLAYER_486GENERIC $R0<br />
  ${NSD_GetState} $MPLAYER_AMDMULTI $R1<br />
  ${NSD_GetState} $MPLAYER_INTELMULTI $R2<br />
<br />
  ${If} $R0 = 1<br />
    StrCpy $MPLAYER_VERSION &quot;mplayer-svn-30369&quot;<br />
    StrCpy $MPLAYER_SELECTION_STATE 1<br />
  ${ElseIf} $R1 = 1<br />
    StrCpy $MPLAYER_VERSION &quot;mplayer-amd-30687-mt&quot;<br />
    StrCpy $MPLAYER_SELECTION_STATE 2<br />
  ${ElseIf} $R2 = 1<br />
    StrCpy $MPLAYER_VERSION &quot;mplayer-intel-30687-mt&quot;<br />
    StrCpy $MPLAYER_SELECTION_STATE 3<br />
  ${EndIf}<br />
<br />
FunctionEnd<br />
<br />
; The stuff to install<br />
Section &quot;MPlayer&quot; ;No components page, name is not important<br />
<br />
  ; Set output path to the installation directory.<br />
  DetailPrint &quot;$R0 $R1 $R2&quot;<br />
  DetailPrint &quot;MPLAYER_VERSION: $MPLAYER_VERSION&quot;<br />
  DetailPrint &quot;MPLAYER_SELECTION_STATE: $MPLAYER_SELECTION_STATE&quot;<br />
  <br />
SectionEnd ; end the section</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th February 2010, 23:28</div></div><div class="posttext">Spot on!<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>