<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallOptions Modification, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallOptions Modification NSIS Discussion" />
	
	<title> InstallOptions Modification [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallOptions Modification</div>
<hr />
<div class="pda"><a href="t-149731.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149731">InstallOptions Modification</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">19th September 2003, 19:01</div></div><div class="posttext">Hey. I required certain functionality to a dialog so I modified the InstallOptions plugin to include the following.<br />
<br />
Added Button support:<br />
- will return the field name instead of success, back, etc.<br />
<br />
Added Callback or Validation before the dialog closes:<br />
- after calling the show method, call the clean method to close the dialog.<br />
<br />
Added /TIMEOUT to allow data refresh:<br />
- will return &quot;timeout&quot; instead of success, back, etc.<br />
<br />
This was made more for my requirements but if you have a use for it, glad to hear. If anyone can see any problems or has any suggestions I would appreciate them.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th September 2003, 19:32</div></div><div class="posttext">since i'm using beta 4 cvs, i have the following problem using installoptions. the script does not use modern ui!<br />
<br />
when the components page is displayed, the captions say &quot;$NAME Setup: Installtion Options&quot;, which should be displayed on the IO page instead. in beta 3 the page was called with Page custom SetCustom &quot;: Page Title&quot;. this does no longer work. is it my fault or is that a bug?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">19th September 2003, 19:58</div></div><div class="posttext">try the following:<br />
Page custom SetCustom &quot;&quot; &quot;: Page Title&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th September 2003, 20:07</div></div><div class="posttext">it still appears on the components page, and it doesnt use my text (still Installation Options).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">19th September 2003, 20:11</div></div><div class="posttext">Does a caption of a custom page appear on the components page? That's weird. Can you attach your script and a screenshot?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">19th September 2003, 20:16</div></div><div class="posttext">not trying to call installoptions from within the the component page are you? Like this...<br />
<br />
Page components CustomPage<br />
Function CustomPage<br />
  installoptions::dialog &quot;test.ini&quot;<br />
  Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th September 2003, 20:17</div></div><div class="posttext">it is NO mui installer. this code is a template, in case you're wondering about thos ##'s.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">19th September 2003, 20:23</div></div><div class="posttext">when I compile it I get the component dialog with the title <br />
  &quot;##PACKTITLE##CATALOGUE Setup: Install Options&quot;<br />
Then I get the custom dialog with this title<br />
  &quot;##PACKTITLE##CATALOGUE Setup: Page Title&quot;<br />
<br />
Thats the way it should be</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">19th September 2003, 20:33</div></div><div class="posttext">Installation Options is the normal text for the component page (you can set options for the installation). This is not related to the InstallOptions plug-in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th September 2003, 20:35</div></div><div class="posttext">oh ok, so i was only confused by the terminology. anyway, the io page doesnt have that caption for me, its only &quot;name setup&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">19th September 2003, 21:40</div></div><div class="posttext">works now</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">19th September 2003, 21:44</div></div><div class="posttext">good to hear</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jfn</div><div class="date">22nd September 2003, 10:31</div></div><div class="posttext">dselkirk<br />
<br />
I would like to use your modified verstion of the InstallOptions plug-in.<br />
<br />
Any change you could upload/attach an archive that contains the compiled dll too?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">22nd September 2003, 13:37</div></div><div class="posttext">Here ya go.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd September 2003, 18:50</div></div><div class="posttext">Any chance this code will get added to the official dll?<br />
I think that any additions could be added...<br />
<br />
Edit: BTW, the added Button support...<br />
Does that allow to add another button, or just support on the current buttons?<br />
I think it would be nice if we could add a clickable active button which would call an NSIS function...<br />
E.g. add a &quot;Settings&quot; button on our IO page to call Function Settings, which would ExecWait another installer containing the settings dialog.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">22nd September 2003, 20:13</div></div><div class="posttext">Fixed an offset issue with returning the appropriate button field name. Had to take in account the FileRequest and DirRequest types that have 2 controls.<br />
<br />
Afrow UK: take a look ate test.nsi for an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 20:15</div></div><div class="posttext">This modification will be reviewed and possibly merged after NSIS 2 comes out. I don't really want to add new features now, I want to concentrate on bug fixing and testing.<br />
<br />
BTW, to validate before the page ends you can use the leave function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">23rd September 2003, 16:53</div></div><div class="posttext">Originally posted by kichik <br />
I don't really want to add new features now, I want to concentrate on bug fixing and testing. <br />
That means no integrated 7-zip support before nsis 2 release?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd September 2003, 17:15</div></div><div class="posttext">It's already in progress so it won't stop now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">1st October 2003, 01:01</div></div><div class="posttext">Have a bug with this modification:<br />
<br />
I used it in my installer as a page. After going to the page with your InstallOptions, going a page back (Start Menu) and returning again, it doesn't show the page anymore. Tried everything but it continues. Maybe I can put a screenshot here but not now. Thanks for a great modificated InstallOptions!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">1st October 2003, 02:06</div></div><div class="posttext">are you calling InstallOptions::clean before you go back?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">3rd October 2003, 00:34</div></div><div class="posttext">Yes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">5th December 2003, 22:28</div></div><div class="posttext">The standard InstallOptions in the latest NSIS development version now supports most of these features (all except the timeout idea).  It has been done slightly differently but the effect is the same.<br />
<br />
See the latest InstallOptions documentation and the new testnotify.nsi example script for all the juicy details!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dselkirk</div><div class="date">7th December 2003, 21:30</div></div><div class="posttext">Great work!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">8th December 2003, 12:16</div></div><div class="posttext">I tested the new version by using the new examples. I've only a small question. What kind of SendMessage Parameter can enable/disable a checkbox?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th December 2003, 12:45</div></div><div class="posttext">You can't do that with messages. For that you need the EnalbeWindow Win32 API function which is also available as a script instruction. TestNotify.nsi example shows how to use it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">8th December 2003, 13:37</div></div><div class="posttext">works like a charm. I've two more questions:<br />
<br />
1. How can i change the state of a checkbox? Using WriteIniStr doesn't - probably because IO doesn't re-read the ini file.<br />
<br />
2. I have a input Field with the following settings:<br />
<br />
[Field 5]<br />
Type=Text<br />
Left=20<br />
Right=50<br />
Top=80<br />
Bottom=95<br />
MinLen=3<br />
MaxLen=3<br />
Flags=ONLY_NUMBERS<br />
<br />
If i don't use the leave page the input is checked. I.e. you can't continue until the length requirements are met. But if i use a leave page the input isn't checked. Any reasons?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th December 2003, 14:08</div></div><div class="posttext">Use BM_SETCHECK (http://msdn.microsoft.com/library/en-us/shellcc/platform/commctls/buttons/buttonreference/buttonmessages/bm_setcheck.asp) (!define BM_SETCHECK 0x00F1) The validation function was called after the leave function. Thanks, fixed.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>