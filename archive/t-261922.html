<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Install Options: Save Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Install Options: Save Question NSIS Discussion" />
	
	<title> Install Options: Save Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Install Options: Save Question</div>
<hr />
<div class="pda"><a href="t-261922.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=261922">Install Options: Save Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">17th December 2006, 03:12</div></div><div class="posttext">Hi,<br />
<br />
i am searching for the easiest way to save the data in the Labels and restore them while switching between the boxes.<br />
My Custom Page:<br />
<br />
http://img347.imageshack.us/img347/3005/shot00243uj2.jpg<br />
<br />
Every Checkbox on the left side have their own labels.<br />
I hope I have expressed myself clearly enough and you understand what I mean.<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">17th December 2006, 16:57</div></div><div class="posttext">I'm not really sure if I got your point.<br />
Compile and examine the code below to see if it could help you do what you're looking for.<br />
outfile 'CheckboxNotify.exe'<br />
showinstdetails show<br />
licenseData '${NSISDIR}\License.txt'<br />
<br />
!define NOCHECKED_TEXT 'Please select a checkbox'<br />
<br />
!include WinMessages.nsh<br />
!include LogicLib.nsh<br />
<br />
page license<br />
page custom CustomCreate CustomLeave<br />
page instfiles<br />
<br />
section -<br />
<br />
sectionend<br />
<br />
function .onInit<br />
initpluginsdir<br />
gettempfilename $0<br />
rename $0 '$PLUGINSDIR\custom.ini'<br />
call WriteIni<br />
functionend<br />
<br />
function CustomCreate<br />
push $R1<br />
InstallOptions::InitDialog /NOUNLOAD '$PLUGINSDIR\custom.ini'<br />
pop $R1<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
InstallOptions::Show '$PLUGINSDIR\custom.ini'<br />
pop $R1<br />
functionend<br />
<br />
function CustomLeave<br />
readinistr $0 '$PLUGINSDIR\custom.ini' 'Settings' 'State'<br />
${if} $0 == 1<br />
readinistr $1 '$PLUGINSDIR\custom.ini' 'Field 1' 'Text'<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 5' 'HWND'<br />
readinistr $3 '$PLUGINSDIR\custom.ini' 'Field 1' 'State'<br />
${if} $3 == 1<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:$1'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 1<br />
${else}<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:${NOCHECKED_TEXT}'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
${endif}<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 2' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 3' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
abort<br />
${elseif} $0 == 2<br />
readinistr $1 '$PLUGINSDIR\custom.ini' 'Field 2' 'Text'<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 5' 'HWND'<br />
readinistr $3 '$PLUGINSDIR\custom.ini' 'Field 2' 'State'<br />
${if} $3 == 1<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:$1'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 1<br />
${else}<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:${NOCHECKED_TEXT}'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
${endif}<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 1' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 3' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
abort<br />
${elseif} $0 == 3<br />
readinistr $1 '$PLUGINSDIR\custom.ini' 'Field 3' 'Text'<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 5' 'HWND'<br />
readinistr $3 '$PLUGINSDIR\custom.ini' 'Field 3' 'State'<br />
${if} $3 == 1<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:$1'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 1<br />
${else}<br />
SendMessage $2 ${WM_SETTEXT} 1 'STR:${NOCHECKED_TEXT}'<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
${endif}<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 1' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
readinistr $2 '$PLUGINSDIR\custom.ini' 'Field 2' 'HWND'<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
abort<br />
${endif}<br />
functionend<br />
<br />
function WriteIni<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Settings' 'NumFields' '5'<br />
<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Type' 'Checkbox'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Left' '2'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Top' '2'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Right' '100'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Bottom' '14'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Text' 'Checkbox one'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'State' '0'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 1' 'Flags' 'NOTIFY'<br />
<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Type' 'Checkbox'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Left' '2'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Top' '18'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Right' '100'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Bottom' '32'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Text' 'Checkbox two'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'State' '0'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 2' 'Flags' 'NOTIFY'<br />
<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Type' 'Checkbox'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Left' '2'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Top' '36'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Right' '100'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Bottom' '50'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Text' 'Checkbox three'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'State' '0'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 3' 'Flags' 'NOTIFY'<br />
<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Type' 'GroupBox'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Left' '30'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Top' '70'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Right' '-31'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Bottom' '120'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 4' 'Text' 'Select Checkbox'<br />
<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'Type' 'Text'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'Left' '40'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'Top' '90'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'Right' '-41'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'Bottom' '105'<br />
WriteIniStr '$PLUGINSDIR\custom.ini' 'Field 5' 'State' '${NOCHECKED_TEXT}'<br />
Functionend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">18th December 2006, 00:31</div></div><div class="posttext">First I want to thank you for writing the code for me.<br />
But unfortunately this isn't what I want to do. But I think I didn't express myself good enough.<br />
You're reading the text of the checkbox and send it to the label using SendMessage.<br />
I want to save the text in the labels separate for every checkboxes. I will try to make an example:<br />
If I type &quot;This is a test 1&quot; into CB_1_1 and &quot;This is a test 2&quot; into CB_1_2 and I select another CheckBox the labels should disappear empty. Now you type some other text into the labels. If I select CB_1 again the text I type in before (&quot;This is a test 1&quot; &amp; &quot;This is a test 2&quot;) should be restored.<br />
<br />
I hope you understand me now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">18th December 2006, 08:37</div></div><div class="posttext">I understand you :-)<br />
I believe the provided above code example would help you understand the NOTIFY flag and therefore manage those things that you're looking for. It's just a few steps forward.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>