<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Making an entry to the hosts file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Making an entry to the hosts file NSIS Discussion" />
	
	<title> Making an entry to the hosts file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Making an entry to the hosts file</div>
<hr />
<div class="pda"><a href="t-156091.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=156091">Making an entry to the hosts file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lars1106</div><div class="date">13th November 2003, 13:02</div></div><div class="posttext">Hello all<br />
I am trying to add an entry to the hosts file using the modern UI..<br />
But I am not sure how to go about this, have been looking in the manual for quite some time now. Without luck<br />
Can anybody help out here with a snipplet of script for this?<br />
<br />
Thanks in advance<br />
<br />
Lars</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th November 2003, 13:07</div></div><div class="posttext">Use FileOpen, FileWrite, FileRead and FileClose. See the Archive for examples.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lars1106</div><div class="date">13th November 2003, 13:39</div></div><div class="posttext">&quot;Use FileOpen, FileWrite, FileRead and FileClose. See the Archive for examples.&quot;<br />
<br />
Thanks for the reply, this is what I have been doing, especially in the filesection of the archive, and also in the examples, and I cannot find some code I can use. I know I have to use the 4 functions you mention above, but my skills in NSIS is still too small... So I was hoping for sode code.. Someone must have tried this..<br />
<br />
Wbr<br />
Lars</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th November 2003, 13:53</div></div><div class="posttext">The Archive is full of file altering code randing from deleting a certain line to replacing a certain strings across multiple lines. Just search for FileWrite using the search function and you're bound to found something that could help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lars1106</div><div class="date">14th November 2003, 07:25</div></div><div class="posttext">Thanks, found some usefull information, and appended this to project,however.. If you see the example below, when I write to &quot;somefile.txt&quot; it works, but when writing to the hosts file it does not... Any ideas?<br />
<br />
  ; Write to hosts file<br />
;FileOpen $4 &quot;$DESKTOP\SomeFile.txt&quot; a<br />
FileOpen $4 $SYSDIR\drivers\etc\hosts a<br />
FileSeek $4 0 END<br />
FileWrite $4 &quot;$\r$\n&quot; ; we write a new line<br />
FileWrite $4 &quot;Test&quot;<br />
FileWrite $4 &quot;$\r$\n&quot; ; we write an extra line<br />
FileClose $4 ; and close the file<br />
<br />
An additional question.. I think mosts hosts file per default is read only, do I have to change attributes as well..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th November 2003, 11:15</div></div><div class="posttext">Yes, a file can't be opened for writing when its read only atrribute is set. Remove it using SetFileAtrributes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mtech</div><div class="date">31st January 2007, 07:32</div></div><div class="posttext">i want to edit a ini file. on host the file is readonly mode <br />
i did the following<br />
 IfFileExists &quot;c:\bos.ini&quot; +3 0<br />
  WriteIniStr &quot;c:\bos.ini&quot; &quot;operating systems&quot; &quot;c:\asd&quot; '&quot;aasd&quot;'<br />
<br />
than also it does not write anything to the ini file..<br />
<br />
please help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st January 2007, 07:38</div></div><div class="posttext">your relative jump for IfFileExists is away (+3) from the WriteINIStr instruction, according to your code above, you're writing to the file if does not exist (0).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>