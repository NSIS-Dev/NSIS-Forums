<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" HowTo: uppercase variable outside of function?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  HowTo: uppercase variable outside of function? NSIS Discussion" />
	
	<title> HowTo: uppercase variable outside of function? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  HowTo: uppercase variable outside of function?</div>
<hr />
<div class="pda"><a href="t-245806.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=245806">HowTo: uppercase variable outside of function?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">9th May 2006, 18:59</div></div><div class="posttext">I looked in the documentation and on this forum, but didn't find an obvious way to uppercase a variable or defined variable outside of a function (for example, to change the OutFile name).<br />
<br />
# File: CommonCode.nsh<br />
!include &quot;WordFunc.nsh&quot;<br />
Var MixedCaseVar<br />
Var UpperCaseVar<br />
<br />
# StrCpy doesn't work outside of functions<br />
strcpy $MixedCaseVar &quot;camelCaseName&quot;<br />
strcpy $UpperCaseVar $MixedCaseVar<br />
# Does StrFilter work outside of functions?<br />
${StrFilter} $UpperCaseVar &quot;+&quot;<br />
<br />
OutFile $UpperCaseVar + &quot;_Setup.exe&quot;<br />
<br />
I've got a whole series of installers that: <br />
!include CommonCode.nsh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th May 2006, 19:05</div></div><div class="posttext">Hmmm. You're getting confused with run-time and compile-time. This has been explained millions of times before. Variables contain data to be used at run-time, i.e. when the installer is executed by the end user. How can you possibly set the name of the installer to a value that hasn't even been created yet?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">9th May 2006, 21:15</div></div><div class="posttext">Ok, here is more info on what I want to do. Sorry I wasn't clear in the original question.<br />
<br />
There will eventually be about 50 or more separate scripts that allow installation of different Bibles (like KJV, ESV, NET, ASV, WEB, etc). The only difference is which files are included. However, some of the information used by the installer is lower case, and some is upper case (especially case sensitive URL links to use for Internet downloads.)<br />
<br />
The app is part of a &quot;family of applications&quot;, so the main nsis script is fairly elaborate to detect previous installations of 4 other apps within the &quot;family&quot; so resources can be shared.<br />
<br />
Here is an example of the nsis code that !includes a 700+ line .nsh file<br />
/* File: LcdBibleStarterKitSetup_KJV.nsi */<br />
!define STARTER_KIT_BIBLE_ABBREV       Kjv<br />
!define STARTER_KIT_BIBLE_ABBREV_UC    KJV<br />
!define STARTER_KIT_BIBLE_NAME         &quot;King James Version&quot;<br />
!define STARTER_KIT_BIBLE_MODNAME      KjvLite<br />
!define STARTER_KIT_BIBLE_DRIVER_NAME  ztext<br />
!define STARTER_KIT_BIBLE_FILE_EXT     bzs<br />
<br />
!include &quot;CrosswireFamilyDefines.nsh&quot;<br />
!include &quot;LcdProjectDefines.nsh&quot;<br />
<br />
# Essentially everything is in this 700+ line .nsh file<br />
!include &quot;LcdBibleStarterKitSetup.nsh&quot;<br />
<br />
<br />
Within the file LcdBibleStarterKitSetup.nsh, there are lines such as: OutFile &quot;${PROJECT_NAME}StarterKitSetup_${STARTER_KIT_BIBLE_ABBREV_UC}.exe&quot;<br />
<br />
It works fine to have these lines:<br />
!define STARTER_KIT_BIBLE_ABBREV       Kjv<br />
!define STARTER_KIT_BIBLE_ABBREV_UC    KJV<br />
<br />
This would be fine if there were only one or two scripts, but with 50 or more installers, it seemed worth checking if there was a way to do the UC (upper-case) with a function rather than having to define two separate constants. <br />
<br />
I had put together 4 scripts, and then realized that the second line above was advisable for the URL link to be correct on a Linux webhost that uses Apache.  That involved changes to 4 files rather than one file.  For future maintenance and enhancements, it will obviously be easier to change the one .nsh file than 50+ &quot;stubs&quot; that !include the .nsh file.<br />
<br />
To illustrate, here is a link to a &quot;StarterKit&quot; (1.4mb):<br />
LcdBibleStarterKitSetup_WEB (http://lcdbible.sourceforge.net/download/LcdBibleStarterKitSetup_WEB_beta.exe) <br />
<br />
Thanks for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th May 2006, 21:25</div></div><div class="posttext">There's no simple way to do this. You'd have to write an external parser executable which does the conversions. This could even be another NSIS installer.<br />
<br />
http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>