<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Unicode string in binary file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Unicode string in binary file NSIS Discussion" />
	
	<title> Unicode string in binary file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Unicode string in binary file</div>
<hr />
<div class="pda"><a href="t-355853.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=355853">Unicode string in binary file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">14th February 2013, 23:50</div></div><div class="posttext">Hello,<br />
A while ago I built an installer that appended a string of data at the end of the uninstaller file. Something like this:<br />
<br />
CUSTDATA:C:\Gallery;1;1033;TIG;0;07022013010946;TN;0;0<br />
<br />
It worked fine, but lately I've been thinking about the string. Shouldn't it be converted to unicode, in a unicode installer/uninstaller?<br />
<br />
It would make sense, in my view, to convert the string to UTF-8. The problem with UTF-8 is the uninstaller file, that seems to be ansi.<br />
<br />
I wonder if there's a way around this. My main worry is that the path data might contain non-Latin-A characters.<br />
<br />
Any suggestions would be welcome.<br />
<br />
So far I've only tried manually editing text in the uninstaller. Maybe the file can be saved as unicode. Is that possible or advisable or a deadend?<br />
<br />
String conversion could be a deadend also when it comes to reading the data for parsing. I'm unsure how FileRead handles UTF-8 in a binary file.<br />
<br />
Can anyone help?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd March 2013, 07:49</div></div><div class="posttext">The Unicode fork of NSIS (http://www.scratchpaper.com) has FileWriteUTF16LE and FileReadUTF16LE. That can solve your situation. The official version of NSIS can only hold ANSI strings (not necessarily latin, but the current codepage), so conversion might not work out.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">9th March 2013, 14:00</div></div><div class="posttext">FileWriteUTF16LE is useful for writing the custom string to a UTF-16 file.<br />
<br />
I'm just wondering if the user's codepage would convert the custom data string to that system's codepage and would it be safe to write to the uninstaller file.<br />
<br />
The codepage converts Latin1 to, for instance Japanese, if the installer is non-unicode. Unicode, in practice, means that Latin1 characters are unchanged. In Japanese 'C:\Gallery' is still 'C:\Gallery', because unicode symbols are in use. If I install with unicode and write 'C:\Gallery' to my data string, the file that I write to must be a unicode file, or else the codepage will convert the string.<br />
<br />
It kind of begs the question if 'C:\Gallery' is a valid path in Japanese. I really don't know. I have never worked on a Japanese version of Windows. I'd like to.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>