<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problems with latest CVS build and Modern UI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problems with latest CVS build and Modern UI NSIS Discussion" />
	
	<title> Problems with latest CVS build and Modern UI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problems with latest CVS build and Modern UI</div>
<hr />
<div class="pda"><a href="t-148167.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148167">Problems with latest CVS build and Modern UI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">5th September 2003, 01:03</div></div><div class="posttext">Hi!<br />
<br />
I'm having a couple of problems with the latest CVS build of NSIS, using Modern UI, and I'm not sure if it's something I need to change in my code.<br />
<br />
1) The subtitle text in the window titlebar for each page is back when before I could just use Caption &quot;${MUI_TITLE}&quot; to disable it.<br />
<br />
2) I've been using SetFont to change the font used on each page. That still works fine for all pages except for the inner dialog text on the license page, which stays at 8-point tahoma/ms sans serif/whatever.<br />
<br />
3) Using !define MUI_BRANDINGTEXT &quot; &quot; no longer works. The default branding text is there, regardless.<br />
<br />
I've put the !define's for the settings for each page before the !insertmacro command for the pages (which solved a few errors), but no idea what to do now....<br />
<br />
Any ideas?<br />
<br />
Thanks in advance..<br />
<br />
Brad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">5th September 2003, 03:04</div></div><div class="posttext">Well, I've resolved 1) and 3), but am having no luck with 2). Is this an oversight in the Modern UI code, or could I be doing something wrong? I'm guessing that SetFont should set the font for all pages, like it has previously....<br />
<br />
Regards,<br />
<br />
Brad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">5th September 2003, 07:49</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=148146</div></div><hr />


<div class="post"><div class="posttop"><div class="username">R@m00n</div><div class="date">5th September 2003, 13:40</div></div><div class="posttext">I've one problem:<br />
I want one license page but the license file should depend on the language.<br />
How can I do this with the latest Snapshot?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2003, 13:41</div></div><div class="posttext">LicenseLangString.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">R@m00n</div><div class="date">5th September 2003, 13:42</div></div><div class="posttext">Thanks,<br />
I'll try.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">R@m00n</div><div class="date">5th September 2003, 13:57</div></div><div class="posttext">I'm using the following code:<br />
<br />
LangString LicenseLangString ${LANG_ENGLISH} &quot;License.rtf&quot;<br />
LangString LicenseLangString ${LANG_GERMAN} &quot;Lizenz.rtf&quot;<br />
!define MUI_LICENSEPAGE_RADIOBUTTONS<br />
!insertmacro MUI_PAGE_LICENSE LicenseLangString<br />
<br />
I get only:<br />
<br />
LicenseData: open failed &quot;LicenseLangString&quot;<br />
Usage: LicenseData local_file_that_has_license_text | license_lang_string<br />
Error in macro MUI_PAGE_LICENSE on macroline 15</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2003, 14:08</div></div><div class="posttext">The command LicenseLangString (http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.15.3)...<br />
<br />
LinceseLangString myLicense ${LANG_ENGLISH} &quot;license.rtf&quot;<br />
LinceseLangString myLicense ${LANG_GERMAN} &quot;license-german.rtf&quot;<br />
<br />
LicenseData $(myLicesnse)<br />
or<br />
!insertmacro MUI_PAGE_LICENSE $(myLicense)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">R@m00n</div><div class="date">5th September 2003, 15:28</div></div><div class="posttext">Ok, can you perhaps give me a whole example.<br />
<br />
If I try to use LicenseLangString before the Language loading I get &quot;LicenseLangString &quot;myLicense&quot; set multiple times for 0, wasting space (...)&quot;.<br />
So it doesn't load the license and the field is blank.<br />
<br />
If I use the code after language initialisation it's blank cause it's after the !insertmacro MUI_PAGE_LICENSE $(myLicense)<br />
<br />
If I use the language initialisation before the page command I'm getting one warning after the other that some strings are missing and many fields are blank.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2003, 15:47</div></div><div class="posttext">Fixed in latest CVS version.<br />
<br />
It wasn't because you've defined the LangString after you've used it, you should be able to do that. The right way is to use the LangString created by LicenseLangString before you set it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">5th September 2003, 23:35</div></div><div class="posttext">Hi Joost,<br />
<br />
Followed the link you gave, but I'm not sure how or where it'll help me resolve the issue I'm having.<br />
<br />
It seems that for whatever reason, I'm unable to change the font on the license page, whereas every other page is displayed fine. I've put all the page settings before inserting the page, but other than that, it has worked as it should in the past. I've attached my nsi file. Any ideas?<br />
<br />
Thanks in advance.<br />
<br />
Brad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2003, 23:43</div></div><div class="posttext">Assuming you are talking only about the license data itself your answer is that RTF has its own font settings. To change the font for the license data you should change the RTF or use a text file instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">5th September 2003, 23:54</div></div><div class="posttext">Thanks kichik, but no, I'm referring to the inner dialog text on the license page. (sorry, should have been clearer). The header text and button text are fine, and the overall width of the window is fine to match the other pages. I've attached a screenshot of the page to show you what I mean.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th September 2003, 10:48</div></div><div class="posttext">Fixed in latest CVS version. I have also improved SetFont so you can set a different font for every language from the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">6th September 2003, 12:01</div></div><div class="posttext">&gt;&gt; Using !define MUI_BRANDINGTEXT no longer works. <br />
<br />
i can copy this :(<br />
CVS from this morning.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th September 2003, 12:34</div></div><div class="posttext">You should use the normal BrandingText command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">6th September 2003, 12:53</div></div><div class="posttext">huh?<br />
<br />
Important: Because the Modern UI has its own macro system, its own default settings and a lot of new features, the interface configuration works differently. So you should not use commands like Icon, BrandingText etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th September 2003, 13:23</div></div><div class="posttext">I'll change that. Because of the new langauge stuff, the Modern UI doesn't need it own BrandingText setting anymore.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">6th September 2003, 13:24</div></div><div class="posttext">@Joost<br />
<br />
the change must be somewhere between 30-08 and 03-09.<br />
<br />
all versions from september has bugs like &quot;brandingtext has already been defined&quot;<br />
<br />
the version from 30-08 works fine here - i have to step back to get all my scripts so far to work.<br />
<br />
little bit disappointed and angry about that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th September 2003, 13:50</div></div><div class="posttext">Please read http://forums.winamp.com/showthread.php?s=&amp;threadid=148146<br />
<br />
A lot has changed, you should not use MUI_BRANDINGTEXT anymore. You should also make other changes to make your script compatible (as descriped in that topic).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">7th September 2003, 00:19</div></div><div class="posttext">Thanks, everyone!<br />
<br />
Now it works as before.<br />
<br />
Just one other query: I've been experimenting with SetCtlColors, and have been able to set the background colour of all things on all pages except for two problems:<br />
<br />
How do you set the background colour of the inner dialog of the start menu page? Becuase it doesn't have a custom show page, is it possible at all?<br />
<br />
Also, how do you set the background colour of the branding text without the horizontal bevelled line disappearing altogether. Using the following example in the documentation does just that:<br />
<br />
<br />
 Function .onGUIInit<br />
   # 1028 is the id of the branding text control<br />
   GetDlgItem $R0 $HWNDPARENT 1028<br />
   CreateFont $R1 &quot;Tahoma&quot; 10 700<br />
   SendMessage $R0 ${WM_SETFONT} $R1 0<br />
   # set background color to white and text color to red<br />
   SetCtlColors $R0 FFFFFF FF0000<br />
 FunctionEnd<br />
<br />
<br />
Thanks again.<br />
<br />
Brad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th September 2003, 09:43</div></div><div class="posttext">As for the StartMenu, not yet. See http://sourceforge.net/tracker/index.php?func=detail&amp;aid=711900&amp;group_id=22049&amp;atid=373088<br />
<br />
For the branding in the MUI you need to set the background to control number 1256. I have added an option in latest CVS to combine both colors and /BRANDING. Use:<br />
<br />
GetDlgItem $0 $HWNDPARENT 1256<br />
SetCtlColors $0 /BRANDING FF0000</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">7th October 2003, 13:52</div></div><div class="posttext">I've updated my kit to use:<br />
<br />
LicenseLangString myLicense ${LANG_ENGLISH} &quot;license/en/license.txt&quot;<br />
...<br />
but i want to copy it to the install dir BUT if I try:<br />
<br />
File $(myLicense)<br />
<br />
it tell that file does not exists!!<br />
<br />
How do I resolve this problem ?<br />
(Did I mention, the license is working and it's loaded in the kit but i need to copy it to the destionation foloder and create a link to it)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th October 2003, 14:00</div></div><div class="posttext">$(myLicense) contains the text of the license and is a runtime &quot;variable&quot;. You would have to copy the right license according to the language select (StrCmp $LANGUAGE ...).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sealite</div><div class="date">7th October 2003, 14:07</div></div><div class="posttext">Imagine that now I have 5 languages and the list will grow soon. Do I have to include assembles style if/else code for every change?<br />
I think we need a better way, quick.<br />
<br />
Any ideea?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th October 2003, 14:14</div></div><div class="posttext">You can always create a nice little macro.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>