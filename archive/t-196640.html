<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" detecting and closing previous instances, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  detecting and closing previous instances NSIS Discussion" />
	
	<title> detecting and closing previous instances [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  detecting and closing previous instances</div>
<hr />
<div class="pda"><a href="t-196640.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=196640">detecting and closing previous instances</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lopardo2003</div><div class="date">16th October 2004, 22:46</div></div><div class="posttext">Hi. I've searched about this in many places but couldn't find anything useful. So, how can I detect and close previous instances of my application from the NSIS installer, just like the Winamp installer does?<br />
Thanks a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">17th October 2004, 19:16</div></div><div class="posttext">Did you try it with FindWindowEx API?<br />
<br />
There you can use your CLASS to dectect your Application?<br />
<br />
Winamp uses FindWindow API with the parameter &quot;Winamp v1.0&quot; as the window title.<br />
<br />
Maybe you should do that, too.<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">17th October 2004, 19:25</div></div><div class="posttext">FindWindow syntax:<br />
<br />
FindWindow user_var(hwnd output) windowclass [windowtitle] [windowparent] [childafter]Example:FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th October 2004, 20:45</div></div><div class="posttext">This works nicely:<br />
<br />
<br />
!define Title       &quot;MapUpdater&quot;<br />
!define Version     &quot;v0.2b&quot;<br />
<br />
Function .onInit<br />
 ## Check MapUpdater is not already running<br />
 Push $R0<br />
 FindWindow $R0 &quot;&quot; &quot;${Title} ${Version}&quot; $HWNDPARENT<br />
 StrCmp $R0 0 +3<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;${Title} is already running!&quot;<br />
  Quit<br />
 Pop $R0<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">20th October 2004, 19:26</div></div><div class="posttext">If your application is a non-windowed application, use a combo of FindProc and KillProc.<br />
FindProc (http://nsis.sourceforge.net/archive/nsisweb.php?page=575) will tell you if the application is running.<br />
You can then inform the user and use KillProc (http://nsis.sourceforge.net/archive/nsisweb.php?page=325) to kill the process if necessary.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YooperNC</div><div class="date">25th January 2005, 16:52</div></div><div class="posttext">I read the warning in the KillProc description, and now I have a question:  Why use TerminateProcess when ExitProcess sounds like it would be the prefered method?<br />
<br />
Thanks.<br />
<br />
Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">25th January 2005, 17:21</div></div><div class="posttext">Because it is guaranteed to kill the process.<br />
ExitProcess may result in a deadlock.<br />
See ExitProcess (http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/exitprocess.asp).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>