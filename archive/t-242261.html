<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstall section - removing files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstall section - removing files NSIS Discussion" />
	
	<title> Uninstall section - removing files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstall section - removing files</div>
<hr />
<div class="pda"><a href="t-242261.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242261">Uninstall section - removing files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">31st March 2006, 15:09</div></div><div class="posttext">Hi *,<br />
<br />
I used some wizards to generate a basic installer that just copies 3 files on the destination computer. I noticed that in the uninstall section is:<br />
<br />
Delete &quot;$INSTDIR\sample1.exe&quot;<br />
Delete &quot;$INSTDIR\sample2.exe&quot;<br />
Delete &quot;$INSTDIR\sample3.exe&quot;<br />
<br />
<br />
Why would I need something like this (3 times the Delete command) and not having in the uninstall section just:<br />
<br />
RMDir /REBOOTOK &quot;$INSTDIR&quot;<br />
<br />
<br />
Otherwise if I have 20 files that I need to copy when install, and to remove when uninstall, I would need 20 times the File command and 20 times the Delete command, for the same files, instead of 1 RMDir only in uninstall case. Or am I totally wrong/missing smth here?<br />
<br />
Thanks,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhaelochon</div><div class="date">31st March 2006, 15:46</div></div><div class="posttext">RMDir /r /REBOOTOK $INSTIDR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">31st March 2006, 15:57</div></div><div class="posttext">Originally posted by coco_vc <br />
<br />
Otherwise if I have 20 files that I need to copy when install, and to remove when uninstall, I would need 20 times the File command and 20 times the Delete command, for the same files, instead of 1 RMDir only in uninstall case. Or am I totally wrong/missing smth here?<br />
<br />
Thanks,<br />
Viv  <br />
<br />
You could do either way but you may want to consider where people are installing these files/folders from your install package.  If someone installs their files to their My Documents folder and you tell the uninstaller to delete the entire folder that user has just had their My Documents folder deleted.  Don't laugh.  It's happened to me.  Most users are likely to install files to a unique folder name that will not conflict with any other files/folders on their computer and you are likely to have a pre populated folder name for where your files are to be installed. <br />
<br />
Alternatively as has been mentioned many times on these forums you can keep track of what files are installed during installation and then uninstall only those files by reading that file.  This has the nice advantage that you can install to potentially dangerous spots such as My Documents or even the Windows\System folder and uninstall and you'll have no issues on uninstallation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">31st March 2006, 17:38</div></div><div class="posttext">Agreed, using &quot;RMDir /r $INSTDIR&quot; is irresponsible unless you know what $INSTDIR is. People do odd things when installing, and nobody wants to be responsible for wiping a user's $WINDIR, $PROGRAMFILES, $APPDATA, etc. when they uninstall.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">3rd April 2006, 12:51</div></div><div class="posttext">Thx for all your answers. So your suggestion would be to:<br />
- delete specifically each file I installed<br />
- delete, maybe over reboot, the INSTDIR, without using the /r flag<br />
<br />
So, it will look like:<br />
<br />
Delete /REBOOTOK &quot;$INSTDIR\sample1.exe&quot;<br />
Delete /REBOOTOK &quot;$INSTDIR\sample2.exe&quot;<br />
Delete /REBOOTOK &quot;$INSTDIR\sample3.exe&quot;<br />
RMDir /REBOOTOK &quot;$INSTDIR&quot;<br />
<br />
<br />
This would be both: save and nice.<br />
<br />
Questions:<br />
1) Is the above correct?<br />
2) Is there a way to specify only once all the files that need to be installed and removed (it's the same list, so would be nice to have somehow a list of all files and on install specify to install all and on uninstall to remove all)<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd April 2006, 15:41</div></div><div class="posttext">To delete only installed files, use:<br />
http://nsis.sourceforge.net/Uninstall_only_installed_files<br />
This is probably not needed here though; you might as well just delete them yourself with the code that you have posted (which is perfect).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">3rd April 2006, 16:18</div></div><div class="posttext">Thx Stu. I used in the end the:<br />
<br />
<br />
Delete /REBOOTOK &quot;$INSTDIR\sample1.exe&quot;<br />
Delete /REBOOTOK &quot;$INSTDIR\sample2.exe&quot;<br />
Delete /REBOOTOK &quot;$INSTDIR\sample3.exe&quot;<br />
RMDir /REBOOTOK &quot;$INSTDIR&quot;<br />
<br />
<br />
Viv</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>