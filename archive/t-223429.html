<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" blocking options in uninstaller, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  blocking options in uninstaller NSIS Discussion" />
	
	<title> blocking options in uninstaller [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  blocking options in uninstaller</div>
<hr />
<div class="pda"><a href="t-223429.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223429">blocking options in uninstaller</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">5th August 2005, 21:56</div></div><div class="posttext">Hi:<br />
<br />
Here is what i would like to do:<br />
<br />
I have 3 sections, a, b, c. In the uninstaller the user have the options to remove option, a, b or c...so what i would like to have is that whenever the user removes option a, and run the uninstaller again...option a should be marked as deleted so only b and c will appear. Same as if in the installer he only choose to install option a, when running the uninstaller option a should be the only one available to uninstall. <br />
<br />
Last, the uninstall.exe sits on the root directory(where folder a, b, c are) so whenever the user uninstall the last section and there is nothing else to uninstall, it should remove the uninstall.exe from the root directory as well.<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">6th August 2005, 03:26</div></div><div class="posttext">Yeah, I was also wondering why this has not been a feature. But then again the original installer does the same job (I think).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th August 2005, 08:35</div></div><div class="posttext">Write some values to registry specifying what's left and act accordingly in the uninstaller. To hide sections, use the macros in Include\Sections.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">22nd August 2005, 19:33</div></div><div class="posttext">Can you give me an example of how to hide sections in the unistaller?? <br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd August 2005, 23:20</div></div><div class="posttext">Section &quot;un.A Section&quot; unSec01<br />
...<br />
SectionEnd<br />
<br />
Function un.onInit<br />
 !insertmacro UnselectSection ${unSec01}<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">23rd August 2005, 01:37</div></div><div class="posttext">First of all. Thanks for all your help! It seems that I'm not getting what I wanna do tho. The piece of code you provided me only unchecked the option, but it doesn't hide it or block it(so the user cant select it again), so is there any way I can do that? <br />
<br />
Also, How do can I keep tracking of what the user has installed/uninstalled and what not?? Using comparing with the registry? how can that be done??<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd August 2005, 10:39</div></div><div class="posttext">Function un.onInit<br />
SectionSetText ${unSec01} &quot;&quot;<br />
FunctionEnd<br />
<br />
Edit: As for your second question, use WriteRegStr in each section of your installer, e.g.<br />
WriteRegStr HKLM &quot;Software\myApp\Installed&quot; &quot;A&quot; &quot;1&quot;<br />
<br />
Then in un.onInit:<br />
Function un.onInit<br />
Push $R0<br />
<br />
 ReadRegStr $R0 HKLM &quot;Software\myApp\Installed&quot; &quot;A&quot;<br />
 StrCmp $R0 1 +2<br />
 SectionSetText ${unSec01} &quot;&quot;<br />
<br />
 ReadRegStr $R0 HKLM &quot;Software\myApp\Installed&quot; &quot;B&quot;<br />
 StrCmp $R0 1 +2<br />
 SectionSetText ${unSec02} &quot;&quot;<br />
<br />
 ...etc...<br />
<br />
Pop $R0<br />
FunctionEnd<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">23rd August 2005, 23:31</div></div><div class="posttext">Thanks, it works!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>