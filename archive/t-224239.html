<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Require user to choose one component, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Require user to choose one component NSIS Discussion" />
	
	<title> Require user to choose one component [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Require user to choose one component</div>
<hr />
<div class="pda"><a href="t-224239.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=224239">Require user to choose one component</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Cyrus XIII</div><div class="date">19th August 2005, 02:18</div></div><div class="posttext">Hi,<br />
I'm writing an installer with four components, all optional. Now I'd like people to be stopped and prompted to select at least one of them upon leaving the component page.<br />
<br />
I already know that this can be done by associationg the respective function like this<br />
Page Components &quot;&quot; &quot;&quot; MyFunction<br />
but I just can't come up with a function that does the job properly.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">19th August 2005, 05:53</div></div><div class="posttext">I have put together an example barebones script that works. it uses pageex for the components page because it needs the callback function of leaving the page. Here's the example script and it's exe.<br />
<br />
EDIT: Forget about the pageex and use the function described above. I didn't realize a page command could use function calls as well as custom pages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th August 2005, 10:55</div></div><div class="posttext">Simpler:<br />
<br />
!include Sections.nsh<br />
<br />
Page Components &quot;&quot; &quot;&quot; ComponentsLeaveFunc<br />
<br />
Section &quot;A section&quot; SEC1<br />
SectionEnd<br />
<br />
Section &quot;A section&quot; SEC2<br />
SectionEnd<br />
<br />
Function ComponentsLeaveFunc<br />
<br />
 !insertmacro SectionFlagIsSet ${SEC1} ${SF_SELECTED} End &quot;&quot;<br />
 !insertmacro SectionFlagIsSet ${SEC2} ${SF_SELECTED} End &quot;&quot;<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;Select atleast one component.&quot;<br />
  Abort<br />
 End:<br />
<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th August 2005, 12:55</div></div><div class="posttext">Simpler:<br />
!include LogicLib.nsh<br />
<br />
Page Components &quot;&quot; &quot;&quot; ComponentsLeaveFunc<br />
<br />
Section &quot;A section&quot; SEC1<br />
SectionEnd<br />
<br />
Section &quot;A section&quot; SEC2<br />
SectionEnd<br />
<br />
Function ComponentsLeaveFunc<br />
<br />
 ${Unless} ${SectionIsSelected} ${SEC1}<br />
 ${AndUnless} ${SectionIsSelected} ${SEC2}<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;Select atleast one component.&quot;<br />
  Abort<br />
 ${EndUnless}<br />
<br />
FunctionEnd<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cyrus XIII</div><div class="date">20th August 2005, 01:27</div></div><div class="posttext">So far I tried Jason's solution and it worked like a charm. But I might play around with the other two later on to thin out the code.<br />
<br />
Anyway, thx to all of you. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">22nd August 2005, 07:06</div></div><div class="posttext">The extra stuff in the .oninit function sets the components page checkboxes to not checked so the end user HAS to choose one option before continuing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd August 2005, 10:57</div></div><div class="posttext">You should use Section /o for that.<br />
Similarely, Section flags (with SectionGetFlags) are not always going to be &quot;1&quot; (the flags specify more than the selected state).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">23rd August 2005, 01:20</div></div><div class="posttext">Yes, I know that. But I just don't know what the return value should look like if several settings are set and you call SectionGetFlags.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>