<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Hiding finish page run program check box, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Hiding finish page run program check box NSIS Discussion" />
	
	<title> Hiding finish page run program check box [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Hiding finish page run program check box</div>
<hr />
<div class="pda"><a href="t-316588.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316588">Hiding finish page run program check box</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">27th January 2010, 10:58</div></div><div class="posttext">Hi,<br />
1. I'm trying to hide the finish page run text box (added with !define MUI_FINISHPAGE_RUN)<br />
<br />
2. This check box is defined for both Install and uninstall finish pages<br />
<br />
3. This is how i try to do that (within the finish page show page call back)<br />
<br />
<br />
      ;Find the internal window in the finish page<br />
      FindWindow $5 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
<br />
      ;Get the check box handle<br />
      GetDlgItem $3 $5 &quot;1203&quot; ; 1203 - control id <br />
<br />
      ;uncheck it<br />
      SendMessage $3 ${WM_LBUTTONDOWN} 0 0 <br />
      SendMessage $3 ${WM_LBUTTONUP} 0 0 ;<br />
<br />
      ;Hide the window<br />
      ShowWindow $3 ${SW_HIDE}<br />
<br />
<br />
4. The problem is that this is not working always<br />
<br />
For example: <br />
<br />
 If i display only the welcome and finish pages - it works<br />
 If I add any other page (say Install files page) it doesn't work.<br />
<br />
 <br />
Debugging using dumpstate and WinSpy++ I can see that in the second case the code line <br />
    FindWindow $5 &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
does not return the handle to the internal window but rather to another window I can not recognize - thus the check box is not found and the all thing does not succeed<br />
<br />
Any idea why?<br />
<br />
5. Also I read in the thread forums.winamp.com/showthread.php?postid=1364382 about the  $MUI_HWND that is supposed to hold the internal windows handle. but this one is not populated for me. <br />
<br />
Ideas please?<br />
<br />
Tx<br />
<br />
Jammusi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">27th January 2010, 11:39</div></div><div class="posttext">First of all, why creating a checkbox, and then later hide it?<br />
Or do you do that conditionally?<br />
<br />
Anyway, have a look at these threads:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=291799<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=273029<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=248633</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">27th January 2010, 12:01</div></div><div class="posttext">1. Yes I do conditionally ;-)<br />
<br />
2. The first link suggest using $mui.FinishPage for MUI2 and that $MUI_HWND does not work for MUI1 - this answer the second question. Cool but still<br />
<br />
What to do with $mui.FinishPage - can not find documentation for that<br />
<br />
3. Unless i miss something - it seems that the other links do the same as me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th January 2010, 15:02</div></div><div class="posttext">The check box handle should already be stored in $mui.FinishPage.Run.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">27th January 2010, 17:58</div></div><div class="posttext">Yep - mui.FinishPage.Run <br />
That's the answer<br />
<br />
Thanks<br />
<br />
BUT<br />
<br />
It took me few hours to understand the problem<br />
<br />
When I reference the mui.FinishPage.Run within the nsi file  - all good<br />
<br />
I have though another nsi file holding common functions, which i include in some scripts.<br />
The function hiding the checkbox is defined there.<br />
It seems in that case the mui.FinishPage.Run was not defined as: <br />
StrCpy $0 $mui.FinishPage.Run <br />
<br />
Leaves $0 have the string value &quot;$mui.FinishPage.Run&quot; rather than the handle.<br />
<br />
Why is that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th January 2010, 21:37</div></div><div class="posttext">I have though another nsi file holding common functions, which i include in some scripts.<br />
The function hiding the checkbox is defined there.<br />
It seems in that case the mui.FinishPage.Run was not defined as: <br />
StrCpy $0 $mui.FinishPage.Run <br />
<br />
Leaves $0 have the string value &quot;$mui.FinishPage.Run&quot; rather than the handle.<br />
<br />
Why is that? <br />
That's because you included the common functions file before you included MUI2.nsh. Reverse the order and it should work. (Although perhaps you also need to define the pages before the variable becomes active, I'm not sure. Try it out.)<br />
<br />
<br />
<br />
Edit: On second thought... If a variable doesn't exist, it shouldn't become a string, should it? The value becoming &quot;$mui.FinishPage.Run&quot; seems rather weird. o__O</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">27th January 2010, 22:07</div></div><div class="posttext">I include mui2 first</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>