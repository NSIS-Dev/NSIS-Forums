<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" You can only install if you have admin rights, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  You can only install if you have admin rights NSIS Discussion" />
	
	<title> You can only install if you have admin rights [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  You can only install if you have admin rights</div>
<hr />
<div class="pda"><a href="t-295373.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295373">You can only install if you have admin rights</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">1st August 2008, 12:08</div></div><div class="posttext">--------------<br />
Windows Vista<br />
--------------<br />
<br />
Hi<br />
<br />
What is the best approach to inform the user that they can only install our product providing they have admin rights.<br />
<br />
Is there a way to raise the administrator dialog in Vista.<br />
<br />
Regards<br />
<br />
Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">1st August 2008, 12:13</div></div><div class="posttext">Originally posted by pgg1 <br />
What is the best approach to inform the user that they can only install our product providing they have admin rights.<br />
 <br />
UserInfo plugin (part of nsis) and MessageBox or Custom Page<br />
<br />
Originally posted by pgg1 <br />
<br />
Is there a way to raise the administrator dialog in Vista.<br />
 <br />
for vista, use RequestExecutionLevel admin (this only works when UAC is on) If you need to support 2k/XP or Vista with UAC off, check if the user is admin with UserInfo and display a dialog and quit if they are not, or use the UAC plugin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">1st August 2008, 12:14</div></div><div class="posttext">RequestUserLevel admin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">1st August 2008, 13:49</div></div><div class="posttext">Thanks guys.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">4th August 2008, 11:25</div></div><div class="posttext">Hi <br />
<br />
I have a problem that occurs that I cannot reproduce. <br />
<br />
Current setup is:<br />
Windows Vista<br />
Amin rights<br />
UAC is on<br />
<br />
When the installer is double clicked the installer dialog appears. Everything is fine until the installer starts copying files over to Program files. The installer errors on the very first file transfer and displays a message that is not helpful to the user and I can't remember what is said anyway :-/<br />
<br />
The reason is that the user does not have admin rights when in fact they do, this is due to UAC I think. So they simply run the installer with admin rights (right-clicking the installer and run as admin). <br />
<br />
My question is:<br />
<br />
Why does Windows allow the installer to get that far and then the moment we start to copy files over the installer errors.<br />
<br />
What can I do to get around this problem?<br />
<br />
Cheers<br />
<br />
Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">4th August 2008, 12:28</div></div><div class="posttext">if you have &quot;RequestExecutionLevel admin&quot; in your script, the elevation dialog should pop up right away, if it does not, you should file a bug report</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">4th August 2008, 15:29</div></div><div class="posttext">In Function .onInit, insert:<br />
;Does user have Admin privileges?<br />
Push $R0<br />
Call IsUserAdmin<br />
Pop $R0<br />
${If} $R0 == &quot;false&quot;<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;This installer must be run with Administrative Privileges&quot;<br />
Abort<br />
${EndIf}<br />
<br />
<br />
HTH,<br />
Victor</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>