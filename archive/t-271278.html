<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" wrapped install questions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  wrapped install questions NSIS Discussion" />
	
	<title> wrapped install questions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  wrapped install questions</div>
<hr />
<div class="pda"><a href="t-271278.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271278">wrapped install questions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">16th May 2007, 22:59</div></div><div class="posttext">Hello,<br />
Thanks to goldy1064 I was able to use 2 nsis pages to create one program that calls another so that I can do a silent versus custom install.  However, I am having problems with hiding the banner from the wrapped installer.<br />
<br />
I have tried using both HideWindow and Banner::show /NOUNLOAD<br />
in my .oninit function (which is located at the bottom of the page).  <br />
<br />
If I try to move my .oninit function to the top of the page, as suggested by kichik in another thread, I get an error that says this:<br />
<br />
Usage: ReadRegStr $(user_var: output) rootkey subkey entry<br />
   root_key=(HKCR|HKLM|HKCU|HKU|HKCC|HKDD|HKPD|SHCTX)<br />
<br />
Because I am reading registry strings during my .oninit.<br />
<br />
What is the problem?  Is there anyway around this?<br />
<br />
Jack</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">17th May 2007, 03:37</div></div><div class="posttext">ReadRegStr $R0 HKLM &quot;SOFTWARE\Segue Software Inc\SilkTest\Installed&quot; &quot;Directory1&quot; works in .onInit in my script.<br />
<br />
<br />
Because I am reading registry strings during my .oninit.<br />
<br />
What is the problem? Is there anyway around this? <br />
Show us what you are doing, someone might see the problem.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 17:59</div></div><div class="posttext">Function .onInit<br />
Banner::show /NOUNLOAD<br />
ReadRegStr $Py_REGVALUE HKLM SOFTWARE\Py\Py\1.234\InstallPath\InstallGroup &quot;&quot;<br />
StrCmp $Py_REGVALUE &quot;program 1.234&quot; 0 +2<br />
	sectionsetflags ${program} 0<br />
StrCmp [some other stuff]<br />
...<br />
FunctionEnd<br />
<br />
Works fine at the bottom of the page but gives me that error at the top.<br />
<br />
jack</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 18:06</div></div><div class="posttext">i think i may have found the solution... one sec</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 18:16</div></div><div class="posttext">I thought it may have been because I hadn't declared the variable<br />
<br />
Py_REGVALUE yet (probably what was giving me the error)<br />
<br />
But when I put the global variable declaration in .onInit<br />
I get an error because the section ${program} has not been defined yet.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2007, 19:29</div></div><div class="posttext">Then both declare Py_REGVALUE and define program on the top of the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:04</div></div><div class="posttext">thats the way it is now, first I have the variables defined, then all the sections, then the .onInit which uses both the variables and the sections.<br />
<br />
The banner still pops up even when I put Banner::show /NOUNLOAD in .onInit.<br />
<br />
Sorry if I am going around in circles here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2007, 20:10</div></div><div class="posttext">And where is the !define? If you get an error for ${program}, you didn't !define it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:17</div></div><div class="posttext">program is the name of one of my sections.  Does this make sense?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2007, 20:26</div></div><div class="posttext">Well, ${program} makes sense now, but the rest got me completely confused. Why do you use Banner::show to hide a banner? What banner are you trying to hide exactly?<br />
<br />
.onInit should be defined below the &quot;program&quot; section so ${program} will be defined.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:29</div></div><div class="posttext">I am trying to hide the &quot;please wait while setup initiliazes...&quot; banner.  I want to hide it because it is already being shown by the &quot;wrapper&quot; installer.  <br />
<br />
I know this may be getting picky, but I want this to be pretty seamless and perfect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:35</div></div><div class="posttext">And I thought that according to the documentation, if you wrote banner:show /NOUNLOAD it would show no banner at all.<br />
<br />
I have also tried banner:show /NOLOAD, banner:destroy /NOLOAD, banner:destroy /NOUNLOAD, and none of them seem to do to the trick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2007, 20:42</div></div><div class="posttext">The Banner plug-in has nothing to do with that dialog. You can't use the plug-in to hide it.<br />
<br />
To avoid the &quot;verifying installer&quot; dialog, use CRCCheck off in the internal installer. To avoid the &quot;unpacking data&quot; dialog, use ReserveFile on the top of the script for every file and plug-in used in .onInit. When using the MUI, also use MUI_RESERVEFILE_INSTALLOPTIONS and MUI_RESERVEFILE_LANGDLL as explained in section 6 of the MUI Readme.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:46</div></div><div class="posttext">Thank you.  I will look at these things.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:52</div></div><div class="posttext">CRCcheck off worked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">17th May 2007, 20:56</div></div><div class="posttext">CRCcheck off worked.<br />
<br />
I assume that this just means that it allows the user to run a potentially invalid installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th May 2007, 22:37</div></div><div class="posttext">Yes, but as long as it's already checked by the outer installer, it's just a double check.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jackkoho</div><div class="date">18th May 2007, 17:32</div></div><div class="posttext">cool, and thanks :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>