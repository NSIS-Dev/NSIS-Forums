<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialogs suggestion, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialogs suggestion NSIS Discussion" />
	
	<title> nsDialogs suggestion [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialogs suggestion</div>
<hr />
<div class="pda"><a href="t-286912.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286912">nsDialogs suggestion</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">14th February 2008, 23:20</div></div><div class="posttext">I wanted to use a variation of an EDIT box, that limits input to numbers only. There is a style bit (ES_NUMBER) to do that, but no macros have been provided to allow adding styles to existing controls. So I modified nsDialogs.nsh (around line 248) from this:<br />
!macro __NSD_DefineControl NAME<br />
	!define NSD_Create${NAME} &quot;nsDialogs::CreateControl /NOUNLOAD ${__NSD_${Name}_CLASS} ${__NSD_${Name}_STYLE} ${__NSD_${Name}_EXSTYLE}&quot;<br />
!macroend<br />
 to this: !macro __NSD_CreateControl Name X Y H W TXT<br />
	!ifndef NSD_ADD_STYLE<br />
	!define NSD_ADD_STYLE 0<br />
	!endif<br />
	!ifndef NSD_ADD_EXSTYLE<br />
	!define NSD_ADD_EXSTYLE 0<br />
	!endif<br />
	nsDialogs::CreateControl /NOUNLOAD ${__NSD_${Name}_CLASS} ${__NSD_${Name}_STYLE}|${NSD_ADD_STYLE} ${__NSD_${Name}_EXSTYLE}|${NSD_ADD_EXSTYLE} ${X} ${Y} ${H} ${W} &quot;${TXT}&quot;<br />
	!undef NSD_ADD_STYLE<br />
	!undef NSD_ADD_EXSTYLE<br />
!macroend<br />
<br />
!macro __NSD_DefineControl NAME<br />
	!define NSD_Create${NAME} &quot;!insertmacro __NSD_CreateControl ${Name} &quot;<br />
!macroend<br />
<br />
The programmer (me) needs to !define the style they want to add before each call to NSD_CreateText, like this 	!define NSD_ADD_STYLE ${ES_NUMBER}<br />
	${NSD_CreateText}   110u 48u 30u 11u &quot;1000&quot; You can also add EXSTYLE (!define NSD_ADD_EXSTYLE ... ), and buttons as well as text boxes are good candidates.<br />
<br />
<br />
@kichik, what do you think about including a similar change to the next version of nsDialogs.nsh?<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th February 2008, 10:15</div></div><div class="posttext">I was trying to think of a good solution for this problem for a while. A solution involving insertion of a macro which parameters' are passed through to a plug-in call has one major flaw - quotes. In your macro's case, it's enough to include a single double quote to kill the macro. That's why I went with direct plug-in calls in the first place.<br />
<br />
I was also thinking of creating defines that the NSD_Create* define will use by concatenating them to the styles. But then the user will have to undefine those after each call because we can't do it for him.<br />
<br />
There were a bunch of other ideas, but none was good enough. If you have a good idea that solves all of this, I'd be very happy to hear about it and include it in the next version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">15th February 2008, 15:51</div></div><div class="posttext">I see what you are saying. This macro could use the back-quote (`), which would allow user text to have single or double quotes. It's not a total solution, but maybe a small improvement. I'll keep thinking about this...<br />
<br />
Don</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>