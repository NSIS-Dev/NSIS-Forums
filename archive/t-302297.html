<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" [PROBLEM] How To Check URL ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  [PROBLEM] How To Check URL ? NSIS Discussion" />
	
	<title> [PROBLEM] How To Check URL ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  [PROBLEM] How To Check URL ?</div>
<hr />
<div class="pda"><a href="t-302297.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302297">[PROBLEM] How To Check URL ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ThiWeb</div><div class="date">21st January 2009, 17:14</div></div><div class="posttext">Hi,<br />
<br />
I'm trying to check an URL like http://mysite.com/program1.6.exe<br />
<br />
If URL exist, the program is up to date.<br />
But if not, the installation have to close and launch the URL.<br />
<br />
I don't want a special download way...<br />
An IE download will be enough for me.<br />
<br />
Now, how can I realise that ? :$<br />
<br />
I'm already checking if the program is installed or not with :Function .onInit<br />
  ClearErrors<br />
  readregstr $1 ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayName&quot;<br />
  IfErrors done<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Already installed, uninstall ?&quot; IDNO +2<br />
  ExecShell Open &quot;$INSTDIR\uninst.exe&quot;<br />
  SetAutoClose true<br />
  Abort<br />
  done:<br />
FunctionEndBut how can I do the same with an simple URL ?<br />
<br />
Thanks !<br />
<br />
ThiWeb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">21st January 2009, 18:26</div></div><div class="posttext">could try the Inetc plugin (or others like it)<br />
http://nsis.sourceforge.net/Inetc_plug-in<br />
<br />
It has an option to grab just the headers of an HTTP file request.  Then just check if the headers say that the file is there, or whether the file doesn't exist. easypeasy.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ThiWeb</div><div class="date">21st January 2009, 21:11</div></div><div class="posttext">It has an option to grab just the headers of an HTTP file request.  Then just check if the headers say that the file is there, or whether the file doesn't exist.Ok thank you so much ! But when I try to use the script, it download my file...<br />
I've try to put &quot;HEAD&quot; in the script but where is the &quot;title&quot; of my file.<br />
<br />
My file is : test.zip<br />
And after launching the programme he wrote that in the &quot;TXT&quot; :HTTP/1.1 200 OK<br />
Date: Wed, 21 Jan 2009 21:08:38 GMT<br />
Server: Apache/2.2.10 (Unix) mod_ssl/2.2.10 OpenSSL/0.9.8i DAV/2 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635<br />
Last-Modified: Wed, 21 Jan 2009 20:49:10 GMT<br />
ETag: &quot;967003d-12172-4610449a29d80&quot;<br />
Accept-Ranges: bytes<br />
Content-Length: 74098<br />
Keep-Alive: timeout=2, max=15<br />
Connection: Keep-Alive<br />
Content-Type: application/zipWhat can I do with that ? :rolleyes:<br />
<br />
Here is my code :inetc::head &quot;http://mywebsite.com/test.zip&quot; &quot;test.txt&quot;<br />
Pop $0 # return value = exit code, &quot;OK&quot; if OK<br />
MessageBox MB_OK &quot;Download Status: $0&quot;<br />
ThiWeb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st January 2009, 21:19</div></div><div class="posttext">HTTP/1.1 200 = ok, 404 is file not found etc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ThiWeb</div><div class="date">21st January 2009, 21:56</div></div><div class="posttext">Ahhh ok ok ! Thank you again !<br />
I begin to understand lol !<br />
So if the file exist on the serveur : &quot;TEST.TXT&quot; contain : HTTP/1.1 200 OK<br />
If not, there's no file ? No way to have one TXT with 404 in it ?<br />
My idee is to check this file and tell : &quot;You are up to date / Or not&quot;.<br />
If OK =&gt; Up to date<br />
If 404 =&gt; An udate is available<br />
Any idee for that ?<br />
<br />
ThiWeb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">21st January 2009, 22:06</div></div><div class="posttext">no, if its not 200, it could be file not found, server down, or any kind of error<br />
<br />
you are better off storing a .ini file on the server, and put the version info in the .ini, just download and use the nsis ini functions to check the version</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ThiWeb</div><div class="date">21st January 2009, 22:11</div></div><div class="posttext">Yes... I think you'r right.<br />
INI file on the server is better.<br />
<br />
I will try this and try also INI Function.<br />
<br />
Thanks again.<br />
<br />
I'll surly come back :)<br />
<br />
ThiWeb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">21st January 2009, 23:23</div></div><div class="posttext">there's pros and cons to both methods<br />
<br />
We use an ini, ourselves, because it allows us to add a summary line of text that we can display in the installer and a URL that we can then hook up to a hyperlink control so the user can browse for more information.<br />
However, it does mean that the URL for that ini -must- exist for some time to come - you don't want older installers to suddenly go nuts just because the file can no longer be found - expect, say, 6 months to a year that you should -at least- keep that URL, with valid content, alive.  Anybody running an installer that's over a year old should - if the ini file doesn't exist anymore - get a message that their version is possibly horribly outdated, with a link to the main site page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">22nd January 2009, 10:06</div></div><div class="posttext">inetc puts to NSIS stack &quot;OK&quot; if file or http headers were downloaded successfully, &quot;File Not Found (404)&quot; if no such file on server. Please note that a lot of other situations may have place on customer comp (like no internet connection at all). Plug-in auto-removes local file on '404' situation. So the best way is to check what you have after &quot;Pop $0&quot;. Ini file tracking is another good approach.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ThiWeb</div><div class="date">23rd January 2009, 01:04</div></div><div class="posttext">Hi,<br />
<br />
I found something interesting,<br />
I try to use an XML to check the version of my installation. Here is the code :Name &quot;OnlineUpdate&quot;<br />
OutFile &quot;OnlineUpdate.exe&quot;<br />
ShowInstDetails show<br />
<br />
!include &quot;WordFunc.nsh&quot;                 ; only for UpdatePad<br />
!insertmacro &quot;VersionCompare&quot;         ; only for UpdatePad<br />
!include &quot;XML.nsh&quot;<br />
!include &quot;OnlineUpdate.nsh&quot;<br />
!insertmacro &quot;UpdateXml&quot;<br />
!insertmacro &quot;UpdatePad&quot;<br />
<br />
Page Components<br />
Page InstFiles<br />
<br />
Section &quot;Read Version from XML&quot;<br />
	${UpdateXml} &quot;http://198.63.208.118/padinfo/padgen.xml&quot; &quot;/XML_DIZ_INFO/Program_Info/Program_Version&quot; &quot;$0&quot;<br />
	DetailPrint &quot;The latest version is $0&quot;<br />
SectionEnd<br />
<br />
Section &quot;Read Version from PAD and Download&quot;<br />
	${UpdatePad} &quot;http://198.63.208.118/padinfo/padgen.xml&quot; &quot;1.0&quot; $0<br />
	StrCmp $0 &quot;&quot; 0 +3<br />
	DetailPrint &quot;No updates available&quot;<br />
	Goto +2<br />
	DetailPrint &quot;You can download a newer version @ $0&quot;<br />
SectionEndI've change the adress with mine, but he say everytime the same thing :<br />
http://light.zone-dl.fr/4UMEQ/nsis.jpg<br />
And here is my XML :&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br />
&lt;Test&gt;<br />
&lt;ver&gt;1.2&lt;/ver&gt;<br />
&lt;/Test&gt;Why he don't me : &quot;Hey ! There's an update available !&quot; ?<br />
<br />
Maybe it's simple to use an INI file, but I'm a beginner with NSIS...<br />
<br />
Can someone show me how use my script to do what I want ?<br />
Or I'm open to try INI way.<br />
<br />
Thank you so much.<br />
<br />
ThiWeb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">23rd January 2009, 12:49</div></div><div class="posttext">I think you'd have to check the documentation for UpdateXml / UpdatePad (wherever those are from - google's proving fruitless on either term in combination with nsis), but if I'd have to perform guesswork...<br />
<br />
${UpdateXml} &quot;http://198.63.208.118/padinfo/padgen.xml&quot; &quot;/XML_DIZ_INFO/Program_Info/Program_Version&quot; &quot;$0&quot;<br />
<br />
...I'd say that line means &quot;from the padgen.xml, read the value for the XML path /XML_DIZ_INFO/Program_Info/Program_Version and stick the result in $0&quot;.<br />
<br />
However, your XML does not have that path.  Apparently, it's supposed to look more like - say - this:<br />
http://www.asp-shareware.org/padinfo/padgen.xml<br />
Now, that one has a ton of fields and only a few of them are actually required, but you should be able to tell that the /XML_DIZ_INFO/Program_Info/Program_Version path at least exists in that file.<br />
<br />
So, again, my guess would be that your XML does not conform to the PAD specification, and thus the PAD scripts fail to work with it.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>