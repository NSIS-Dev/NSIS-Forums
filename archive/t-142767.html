<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS message box Q2, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS message box Q2 NSIS Discussion" />
	
	<title> NSIS message box Q2 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS message box Q2</div>
<hr />
<div class="pda"><a href="t-142767.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142767">NSIS message box Q2</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">19th July 2003, 11:12</div></div><div class="posttext">You may have seen a message by me before on a message box but I found out what I wanted.<br />
I want a message box that askes if you want to install into one folder(click yes) or a different folder(click no) from a regristy string. The 2 reigstry strings I want installer to use are the Winamp 2.x and the Winamp3 one.<br />
<br />
<br />
PLZ help me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">19th July 2003, 14:56</div></div><div class="posttext">What exaclly is your question?  Do you want to find out how to get registry values, or how to use them in a message box?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">19th July 2003, 15:56</div></div><div class="posttext">Read the Manual...<br />
You'll find usages to the MessageBox...<br />
see also the goto statments: +0, +1, ....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">20th July 2003, 02:54</div></div><div class="posttext">I can't understand any of that stuff. If you don't know what I'm talking about goto this page: http://yathosho.deviantart.com/ then click on something that since then 7. Download it then open it. A message box should come up and it askes where to install. How does it pick out the winamp 2&amp;3 directory no matter where it is? Can someone plz make me a message box like that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">20th July 2003, 04:27</div></div><div class="posttext">OutFile mbox.exe<br />
Section &quot;&quot;<br />
  MessageBox MB_YESNO &quot;YES, continue installing in your Winamp 3.x \<br />
directory.$\n$\n NO, install in your Winamp 2.x directory instead.&quot; \<br />
IDYES yeslabel IDNO nolabel<br />
  yeslabel:<br />
  MessageBox MB_OK &quot;You pressed yes&quot;<br />
  Goto done<br />
  nolabel:<br />
  MessageBox MB_OK &quot;You pressed no&quot;<br />
  done:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">20th July 2003, 04:40</div></div><div class="posttext">Sunjammer, did you go to the link???? I don't think you did. That doesn't change the install dir to the directory that you have installed your winamp's into.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">20th July 2003, 04:42</div></div><div class="posttext">I should have just said to Vytautas.<br />
&quot;....or how to use them in a message box?&quot;<br />
I think I need to know.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th July 2003, 11:24</div></div><div class="posttext">## $R0 = winamp2 instdir<br />
## $R1 = winamp3 instdir<br />
MessageBox MB_YESNO|MB_ICONQUESTION &quot;Click Yes to install to \<br />
$R0.$\r$\nClick No to install to $R1.&quot; IDNO dir2<br />
StrCpy $INSTDIR $R0<br />
Goto exit<br />
dir2:<br />
StrCpy $INSTDIR $R1<br />
exit:<br />
Is that what you want?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">27th July 2003, 01:37</div></div><div class="posttext">um yes, sort of. But I want it to use these:<br />
HKLM \<br />
&quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp&quot; \<br />
&quot;UninstallString&quot;<br />
<br />
AND<br />
<br />
HKLM \<br />
&quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3&quot; \<br />
&quot;UninstallString&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">27th July 2003, 05:26</div></div><div class="posttext">Use the code from Afrow UK and add these lines before his scriptReadRegStr $R0 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp&quot; &quot;UninstallString&quot;<br />
ReadRegStr $R1 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3&quot; &quot;UninstallString&quot; This will work perfectly if both versions are installed but if one is missing the message box will not make sense so you should check to see if both versions are installed and if not then skip the message box and use the path of the installed version.<br />
<br />
Vytautas :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2003, 11:54</div></div><div class="posttext">ReadRegStr $R0 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp&quot; &quot;UninstallString&quot;<br />
ReadRegStr $R1 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3&quot; &quot;UninstallString&quot;<br />
StrCmp $R0 &quot;&quot; 0 +3<br />
 StrCpy $INSTDIR $R1<br />
Goto exit<br />
StrCmp $R1 &quot;&quot; 0 +3<br />
 StrCpy $INSTDIR $R0<br />
Goto exit<br />
<br />
## $R0 = winamp2 instdir<br />
## $R1 = winamp3 instdir<br />
MessageBox MB_YESNO|MB_ICONQUESTION &quot;Click Yes to install to \<br />
$R0.$\r$\nClick No to install to $R1.&quot; IDNO dir2<br />
StrCpy $INSTDIR $R0<br />
Goto exit<br />
dir2:<br />
StrCpy $INSTDIR $R1<br />
exit:<br />
<br />
<br />
This will work.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">30th July 2003, 11:14</div></div><div class="posttext">maby I shoud just stick with the last reply and edit it to my liking<br />
:( :mad: :( :mad: :( :mad: :( :mad: :( :mad:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2003, 11:27</div></div><div class="posttext">There is nothing wrong with the script.<br />
It works fine.<br />
<br />
Place in .onInit function.<br />
<br />
I put this part in special:<br />
ReadRegStr $R0 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp&quot; &quot;UninstallString&quot;<br />
ReadRegStr $R1 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3&quot; &quot;UninstallString&quot;<br />
StrCmp $R0 &quot;&quot; 0 +3<br />
 StrCpy $INSTDIR $R1<br />
Goto exit<br />
StrCmp $R1 &quot;&quot; 0 +3<br />
 StrCpy $INSTDIR $R0<br />
Goto exit<br />
<br />
It stops the message box appearing if one of the registry values is missing, because if e.g. Winamp1.x value is missing, then there is no point asking the user to optionally install to Winamp1.x dir [does not exist]<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">30th July 2003, 11:38</div></div><div class="posttext">does this:<br />
WriteRegStr HKLM SOFTWARE\Pure_Krypton\Winamp3 &quot;Install Location&quot; $INSTDIR<br />
create a registry string/setting (don't know the correct name to use) from the install directory that you have specified?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2003, 13:04</div></div><div class="posttext">Correct :)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pure-krypton</div><div class="date">7th August 2003, 13:38</div></div><div class="posttext">Thanks a heap for the help. Shouldn't need anymore.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>