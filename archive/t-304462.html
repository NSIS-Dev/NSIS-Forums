<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" WM_SETCURSOR with Bitmap Control, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  WM_SETCURSOR with Bitmap Control NSIS Discussion" />
	
	<title> WM_SETCURSOR with Bitmap Control [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  WM_SETCURSOR with Bitmap Control</div>
<hr />
<div class="pda"><a href="t-304462.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=304462">WM_SETCURSOR with Bitmap Control</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Rolando</div><div class="date">22nd March 2009, 11:11</div></div><div class="posttext">I've been trying to set a hand cursor on a bitmap image I have placed using nsDialogs like this:<br />
<br />
${NSD_CreateBitmap} 0 108u 100% 100% &quot;&quot;<br />
Pop $IMAGE<br />
${NSD_SetImage} $IMAGE &quot;$PLUGINSDIR\blah.bmp&quot; $IMAGEHANDLE<br />
<br />
GetFunctionAddress $0 TestFunction<br />
nsDialogs::OnClick $IMAGE $0<br />
<br />
How can I make it in a way that when the user hovers over the bitmap, the cursor changes to IDC_HAND?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd March 2009, 12:07</div></div><div class="posttext">you need to handle the window message, and nsDialogs can't do it. <br />
<br />
http://nsis.sourceforge.net/WndSubclass_plug-in can do it, but it's very much in the Alpha stage, and you pretty much need to be a win32 programmer to use it</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rolando</div><div class="date">22nd March 2009, 12:24</div></div><div class="posttext">If I'm not mistaken I only need to use LoadCursor() and SetCursor() correct?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">23rd March 2009, 02:09</div></div><div class="posttext">now this is a bit weird as i made a modification to nsDialogs to do just the same thing for one of the winamp lang pack authors last weekend (still need to sort out the patch difference and to have a look at implementing this (http://sourceforge.net/tracker2/index.php?func=detail&amp;aid=2129316&amp;group_id=22049&amp;atid=373088) as well).<br />
<br />
the attached 7z file has an altered nsDialogs.dll and nsDialogs.nsh - should be able to just extract it out into the main NSIS folder (with path extraction) to have it replace the required files.<br />
<br />
then the following will need to be added to the script something like the following (am guessing at the variable's being used):<br />
<br />
${NSD_OnSetCursor} $IMAGE Button_SetCursor ; add after the button has been created<br />
 <br />
Function Button_SetCursor ; add this where you want it to go<br />
 Pop $0<br />
 Push 32649 ;${IDC_HAND}<br />
FunctionEnd<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">23rd March 2009, 12:44</div></div><div class="posttext">but should there be a special callback for every message? nsDialogs can't support everything. It would make more sense if nsD had some sort of subclass support, or that people would use external subclass plugins IMHO</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">23rd March 2009, 14:38</div></div><div class="posttext">i agree with you that it can't support everything (and obviously that's where the subclass has to come in on things) but for certain common cases then it makes sense to have it natively done in nsDialogs. and in this case, it's a minor adjustment to expand the code already used for setting the cursor on the link control to be able to be applied for the other created controls.<br />
<br />
native subclass support of some form would make things easier but then it comes down how to integrate that into the existing framework.<br />
<br />
then again i thought most of the 'special' cases which would require subclassing of some sort are aready handled by existing plugins. either way it's an area that needs to be worked through a bit more (since all i've done was a quick hack to get something working [to save you some #nsis questions ;) ] but is something that needs a bit more thinking through as such).<br />
<br />
-daz</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>