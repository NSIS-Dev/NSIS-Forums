<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Change some codes in file InstallOption on Example has problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Change some codes in file InstallOption on Example has problem NSIS Discussion" />
	
	<title> Change some codes in file InstallOption on Example has problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Change some codes in file InstallOption on Example has problem</div>
<hr />
<div class="pda"><a href="t-258569.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=258569">Change some codes in file InstallOption on Example has problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sunlight112</div><div class="date">30th October 2006, 04:47</div></div><div class="posttext">While I am creating my installer, I have some problems.<br />
I has looked for on example folder careful but I can not do it well.<br />
In file InstallOptions.nsi, I repair on ioA.ini as:<br />
<br />
[Settings]<br />
NumFields=3<br />
<br />
[Field 1]<br />
Type=label<br />
Text=Install Options Page A<br />
Left=0<br />
Right=-1<br />
Top=0<br />
Bottom=9<br />
<br />
[Field 2]<br />
Type=text<br />
Left=0<br />
Right=-1<br />
Top=20<br />
Bottom=58<br />
Flags=MULTILINE|READONLY<br />
State=&quot;Description:\r\n\r\nWhen installing for server, we need many program to install.\r\nFirstly, we will install JDK on this page<br />
<br />
[Field 3]<br />
Type=Button<br />
Text=Install<br />
Left=20<br />
Right=163<br />
Top=64<br />
Bottom=84<br />
<br />
<br />
I want to install jdk after next button is enable and run the next custom which it is the same way on Install Options.<br />
In CustomPageA,if I use this code, I can not know HWND of dialog.<br />
<br />
<br />
 <br />
Function CustomPageA<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  <br />
 !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ioA.ini&quot;<br />
FunctionEnd<br />
<br />
<br />
<br />
<br />
However, I also used this to see HWND of Dialog<br />
<br />
<br />
<br />
<br />
Function CustomPageA<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  <br />
 !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;ioA.ini&quot;<br />
  Pop $HWND ;HWND of dialog<br />
<br />
  GetDlgItem $1 $HWNDPARENT 1     ;/Disable &quot;Next&quot; button.<br />
  EnableWindow $1 0 	;/Disable &quot;Next&quot; button.<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
  <br />
FunctionEnd<br />
<br />
<br />
<br />
<br />
Although I use the second code, I can not control HWND of Dialog.<br />
I mean, when I add code on function CustomPageA, It does not display to run application to set up JDK.<br />
My code here:<br />
<br />
Function CustomPageA<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;ioA.ini&quot;<br />
  Pop $HWND ;HWND of dialog<br />
<br />
  GetDlgItem $1 $HWNDPARENT 1     ;/Disable &quot;Next&quot; button.<br />
  EnableWindow $1 0 	;/Disable &quot;Next&quot; button.<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
  ;-------my code----------------------<br />
  ReadINIStr $HWND &quot;ioA.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
    StrCmp $HWND 3 Install      <br />
    StrCmp $HWND 0 NextBtt  	<br />
    Abort<br />
    Install:<br />
       MessageBox MB_OK &quot;Press install&quot;<br />
       ReadINIStr $1 &quot;ioA.ini&quot; &quot;Field 3&quot; &quot;State&quot;<br />
       SetOutPath $PLUGINSDIR<br />
       File &quot;e:\server\script\server\java.exe&quot;<br />
       ExecShell 'open' &quot;$PLUGINSDIR\java.exe&quot;<br />
       StrCmp $1 &quot;&quot; 0 Validate<br />
         GetDlgItem $1 $HWNDPARENT 1 	<br />
         EnableWindow $1 0		<br />
       NextBtt:<br />
         GetDlgItem $1 $HWNDPARENT 1 		<br />
         EnableWindow $1 1 	<br />
;--------------------------------------<br />
<br />
FunctionEnd<br />
<br />
If someone use to see my prblem, please help me!!!!<br />
Big thank for your help,<br />
I also enclose image to express my idea<br />
Thank you very much,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th October 2006, 10:56</div></div><div class="posttext">Use !insertmacro MUI_INSTALLOPTIONS_READ not ReadINIStr.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>