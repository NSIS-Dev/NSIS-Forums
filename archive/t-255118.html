<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Having an unsigned int, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Having an unsigned int NSIS Discussion" />
	
	<title> Having an unsigned int [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Having an unsigned int</div>
<hr />
<div class="pda"><a href="t-255118.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255118">Having an unsigned int</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kookh</div><div class="date">8th September 2006, 23:29</div></div><div class="posttext">I'm trying to translate a C++ function to NSIS, and I've had some help with that earlier on the forums.<br />
<br />
Here's the C++ method:<br />
int calculateId(LPTSTR email)<br />
{<br />
    unsigned int x = 0;<br />
<br />
    for (int i = 0; i &lt; strlen(email); i++) {<br />
        x = x * 101;<br />
        x = x + towlower(email[i]);<br />
    }<br />
<br />
    return x;<br />
}<br />
<br />
and here's the core of the NSIS function:<br />
StrCpy $3 0   <br />
System::Call &quot;*(&amp;w1024 'email@someplace.com')i.r0&quot;<br />
StrCpy $1 $0<br />
System::Call &quot;*$0(&amp;i2.r2)&quot;<br />
${While} $2 != 0<br />
  IntOp $3 $3 * 101<br />
  IntOp $3 $3 + $2<br />
  IntOp $0 $0 + 2<br />
  System::Call &quot;*$0(&amp;i2.r2)&quot;<br />
${EndWhile}<br />
System::Free $1<br />
<br />
These two methods seem to be giving two different results. Calling calculateId(email@somplace.com) gives &quot;2849034273&quot; where as in NSIS it is giving &quot;-1319540362&quot;. However, I've tried debugging and it seems that when you call the two functions with the first few characters, they give the same result. Once the string becomes longer, NSIS starts giving negative values. Now I'm no NSIS expert, so I was wondering if it had to do with the nature of variables in NSIS or something else. Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th September 2006, 01:09</div></div><div class="posttext">You can use IntFmt (IntFmt $0 %u $0) to get an unsigned number representation. If you want to compare unsigned numbers, use IntCmpU.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>