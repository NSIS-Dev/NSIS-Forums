<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Convert string to variable, is it possible?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Convert string to variable, is it possible? NSIS Discussion" />
	
	<title> Convert string to variable, is it possible? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Convert string to variable, is it possible?</div>
<hr />
<div class="pda"><a href="t-292321.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292321">Convert string to variable, is it possible?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Leanid</div><div class="date">26th May 2008, 17:17</div></div><div class="posttext">I need to access hidden optional section to set it's flag to selected. <br />
Since section is hidden it does not have name only variable.<br />
<br />
Problem is I will know name of section only at runtime. I can generate string with name of this section variable, but how I can access it?<br />
<br />
For example I have 2 hidden sections:<br />
<br />
Section /o &quot;&quot; Pool_Conf1<br />
SetOutPath $INSTDIR\Pool<br />
File  /r  &quot;${SOURCE}\Pool\*.*&quot;<br />
SectionEnd<br />
<br />
Section /o &quot;&quot; Pool_Conf2<br />
SetOutPath $INSTDIR\Pool<br />
File  /r  &quot;${SOURCE}\Pool\*.*&quot;<br />
SectionEnd<br />
<br />
;I am trying to select it in function called after my custom page<br />
<br />
Function func<br />
StrCpy $R1 &quot;Pool_Conf1&quot;<br />
;Next line obviously does not work, <br />
;but can I convert string value Pool_Config1 to variable ${Pool_Config1}<br />
SectionSetFlags ${R1} ${SF_SELECTED}<br />
;I want it to be the same as:<br />
SectionSetFlags ${Pool_Config1} ${SF_SELECTED}<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Leanid</div><div class="date">26th May 2008, 18:06</div></div><div class="posttext">Only solution I found to generate function with custom mapping  string to variable:<br />
<br />
Function GetConfSection<br />
    Pop $0<br />
    StrCpy $1 0<br />
    StrCmp $0 &quot;Pool_Conf1&quot; 0 +2<br />
    StrCpy $1 ${Pool_Conf1}<br />
    StrCmp $0 &quot;Pool_Conf2&quot; 0 +2<br />
    StrCpy $1 ${Pool_Conf2}<br />
    Push $1<br />
FunctionEnd<br />
<br />
A bit of pain to do, but it works.<br />
If there is no easy way to map it with some NSIS function I think that will do for me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th May 2008, 18:06</div></div><div class="posttext">What is ${R1} ?<br />
You need SectionSetText if you want the section visible in components page.<br />
<br />
See here, might help you,<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=292160</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Leanid</div><div class="date">26th May 2008, 18:33</div></div><div class="posttext">I don't want it to be visible on component page, but I want to select this section later on one of my custom page. In custom page I let user to select string and from that string I know name of variable that holds number of my hidden section. Problem was to access value in that variable by just having string name.<br />
<br />
I did it by creating map function, when by comparing string I return section number and can set flag on it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">26th May 2008, 20:42</div></div><div class="posttext">I don't want it to be visible on component page, but I want to select this section later on one of my custom page.<br />
<br />
I think you can use the &quot;SectionSetFlags&quot; command for that ;)<br />
<br />
Section test test_section_id<br />
SectionEnd<br />
<br />
Function .onInit<br />
  # set section 'test' as selected and read-only<br />
  IntOp $0 ${SF_SELECTED} | ${SF_RO}<br />
  SectionSetFlags ${test_section_id} $0<br />
FunctionEnd<br />
<br />
<br />
Using a section name that begins with a &quot;-&quot; will hide it on the components page...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Leanid</div><div class="date">27th May 2008, 14:25</div></div><div class="posttext">I know all that, but it was not that simple.<br />
If section has text name you can loop over all section and get section name, compare to your string and set flag. BUT, not for hidden section. Even if you set text name with &quot;-&quot;, section become hidden and SectionGetText return empty string, like you did not put any name at all. So there is really no difference use empty string &quot;&quot; or &quot;-something&quot; for hidden section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">27th May 2008, 14:48</div></div><div class="posttext">I think a section should be accessed by using it's ID, not by using it's caption. At the moment your string contains the caption of the section. Can't you store section's ID instead? Like this:<br />
<br />
Section &quot;&quot; test_section_id<br />
  ...<br />
  # Do some super secret things in this hidden section<br />
  ...<br />
SectionEnd<br />
<br />
Function myFunction<br />
  StrCpy $1 ${test_section_id}<br />
  ...<br />
  # Save section id stored in $1<br />
  ...<br />
FunctionEnd<br />
<br />
Function myFunction2<br />
  ...<br />
  # Load section id into $1 again<br />
  ...<br />
  IntOp $0 ${SF_SELECTED} | ${SF_RO}<br />
  SectionSetFlags $1 $0<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>