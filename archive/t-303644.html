<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MojoPack NSIS plugin project written in Delphi, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MojoPack NSIS plugin project written in Delphi NSIS Discussion" />
	
	<title> MojoPack NSIS plugin project written in Delphi [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MojoPack NSIS plugin project written in Delphi</div>
<hr />
<div class="pda"><a href="t-303644.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=303644">MojoPack NSIS plugin project written in Delphi</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Candu</div><div class="date">1st March 2009, 15:39</div></div><div class="posttext">Hello,<br />
<br />
I am using NSIS now for nearly 1,5 years. NSIS is the installer technology of my choice. So I decide to write own plugins to enhance the functionality of NSIS. Like a convinced Delphi programmer, the goal for me was to write  NSIS plugins in Delphi. To give the NSIS community some more information about writing NSIS plugins using Delphi, I decide to provide the source code as well. Now, writing NSIS plugins should be very easy, because I have spent a lot of time to comment my source code well. Feel free to use the source for your own plugin project or just help to enhance my MojoPack NSIS plugin project (MNPP).<br />
<br />
MojoPack provides a view useful functions and should be enhanced with more functions in the near future. Currently the following functions are implemented:<br />
<br />
- SetAttributes:    Set file system attributes to entire directories<br />
- ReplaceInFile:    Replace a string with another string in a given file <br />
- ReplaceInFileEx:  Replace two strings at the same time in a given file<br />
- TerminateTask:    Terminate a running application<br />
- CheckTask:        Check if task is currently running<br />
- IsUserLocalAdmin: Check if current user is a member of the local administrator group<br />
<br />
See the MojoPack_Readme.txt for more information about the usage of each function and what you have to do if you decide to help enhancing MojoPack.<br />
<br />
At least let me give you some useful information how to write plugin functions (procedures) in Delphi.<br />
-------------------------------------------------------------------------------------------<br />
- Always use NSIS.pas for the interface to NSIS<br />
- Each exported dll procedure must call the INIT() function of NSIS.pas first.<br />
- The return value must always be of type string<br />
- Each call of PopString() will catch the next parameter of the function. Note: all parameters<br />
  are passed as strings.<br />
- The last call of PushString() fills $0<br />
<br />
MNPP is developed with BDS2006/CRS2007 but you should be able to open the .dpr file in previous versions of Delphi.<br />
<br />
To compile the Mojopack make sure you have the Jedi Code Library installed.<br />
<br />
Special thanks to Bernhard Mayer, Peter Windridge, Brett Dever and Rainer Budde. Great job guys.<br />
<br />
Use UPX to shrink the size of the output dll file. Thanks to the upx developper team Markus Oberhumer, Laszlo Molnar and John Reiser.<br />
<br />
<br />
I hope, you find the provided stuff useful.<br />
  Candu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Candu</div><div class="date">2nd March 2009, 15:18</div></div><div class="posttext">Hello again,<br />
<br />
I have updated the MojoPack with two additional functions:<br />
<br />
WReplaceInFile and WReplaceInFileEx.<br />
<br />
The functions are working similar to ReplaceInfile and ReplaceInFileEx, but using unicode files. <br />
<br />
The version of MojoPack.dll has been increased to 1.0.0.1.<br />
<br />
See MojoPack_ReleaseNotes.txt for some more details on this release.<br />
<br />
The attached file only contains the dll, the readme and the release notes. The source code could not be included because of the file size limitation.<br />
<br />
@board admins: do I have the chance to upload the whole MojoPack project somewhere? (211 KB).<br />
<br />
Regards<br />
  Candu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Candu</div><div class="date">2nd March 2009, 16:02</div></div><div class="posttext">OK, attached you will find the Source code of version 1.0.0.1.<br />
<br />
For Delphians:<br />
--------------<br />
To compile the project, you must have the Jedi Code Library and the TMS Unicode Component Pack installed.<br />
<br />
<br />
Regards<br />
  Candu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">2nd March 2009, 21:39</div></div><div class="posttext">do I have the chance to upload the whole MojoPack project somewhere? (211 KB).<br />
NSIS wiki http://nsis.sf.net is the place.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f!o</div><div class="date">1st September 2009, 16:34</div></div><div class="posttext">Hello,<br />
<br />
Your plugin unfortunately cannot work with the Unicode version of NSIS. I have the same issue.<br />
<br />
Do you know if there is an existing version of the NSIS.pas that manages unicode for the string parameters passed ?<br />
<br />
Thanks &amp; Regards,<br />
F!o</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>