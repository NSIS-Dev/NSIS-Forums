<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ExecWait with file redirection, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ExecWait with file redirection NSIS Discussion" />
	
	<title> ExecWait with file redirection [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ExecWait with file redirection</div>
<hr />
<div class="pda"><a href="t-118246.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=118246">ExecWait with file redirection</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">humgut</div><div class="date">17th December 2002, 21:07</div></div><div class="posttext">Hi,<br />
<br />
Trying to use ExecWait (NSIS2, ModernUI) in a section to redirect external program output to file:<br />
   <br />
  SetOutPath $INSTDIR<br />
  File &quot;memory.exe&quot;<br />
  ExecWait '&quot;$INSTDIR\memory.exe&quot; &gt; &quot;$INSTDIR\memory.txt&quot;' $0<br />
  IfErrors e1 e2<br />
e1:<br />
  MessageBox MB_OK &quot;Error = $0&quot;<br />
  goto e3<br />
e2:<br />
  MessageBox MB_OK &quot;OK&quot;<br />
e3:<br />
<br />
ExecWait returns no error, yet file is not created. Any ideas?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th December 2002, 21:25</div></div><div class="posttext">This thread should help you:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=70724&amp;highlight=mysql<br />
<br />
BTW, you might also want to try out nsExec, maybe it can help you too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">humgut</div><div class="date">18th December 2002, 14:33</div></div><div class="posttext">Thanks for the link Kichik.<br />
<br />
Here is the the code that worked for me:<br />
<br />
ExpandEnvStrings $1 %COMSPEC%<br />
ExecWait '&quot;$1&quot; /C &quot;$INSTDIR\memory.exe&quot; &gt; &quot;$INSTDIR\mem.txt&quot;' $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">13th January 2003, 17:26</div></div><div class="posttext">Hi,<br />
<br />
I guess I have a some-what similar problem.<br />
I am trying to pipe my output to a log file and I have attempt the below 3 options but none of them creates the test.log file.<br />
<br />
Could someone please help. Thanks.<br />
<br />
ExecWait 'call &quot;$INSTDIR\test.bat&quot; &quot;2&gt; $INSTDIR\test.log&quot;' $0<br />
ExecWait 'call &quot;$INSTDIR\test.bat&quot; 2&gt; &quot;$INSTDIR\test.log&quot;' $0<br />
ExecWait &quot;call $INSTDIR\test.bat 2&gt; $INSTDIR\test.log&quot; $0<br />
<br />
<br />
:(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th January 2003, 17:31</div></div><div class="posttext">Use the code above:<br />
<br />
ExpandEnvStrings $1 %COMSPEC%<br />
ExecWait '&quot;$1&quot; /C &quot;$INSTDIR\test.bat&quot; &gt; &quot;$INSTDIR\test.log&quot;' $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blmille1</div><div class="date">12th June 2009, 23:25</div></div><div class="posttext">Originally posted by kichik <br />
Use the code above:<br />
<br />
ExpandEnvStrings $1 %COMSPEC%<br />
ExecWait '&quot;$1&quot; /C &quot;$INSTDIR\test.bat&quot; &gt; &quot;$INSTDIR\test.log&quot;' $0  <br />
<br />
Every time I put double quotes around the output file I get an errorlevel of 1.<br />
<br />
After about try 1038 I decided to try taking the quotes out.<br />
It started working.<br />
<br />
	strcpy $BACKUPFILE &quot;$TEMP\ADMIN_DB_MYSQL_BACKUP.sql&quot;<br />
	strcpy $BACKUPFILE_PREPARED &quot;$TEMP\ADMIN_DB_MYSQL_BACKUP_PREPARED.sql&quot;<br />
	strcpy $1 $BACKUPFILE<br />
	ExpandEnvStrings $2 %COMSPEC%<br />
<br />
Before:<br />
	ExecWait '&quot;$2&quot; /C &quot;$INSTDIR\bin\mysqldump.exe&quot; --quick --add-drop-table --extended-insert --force --user=username --password=password database &gt; &quot;$1&quot;' $0<br />
After:<br />
	ExecWait '&quot;$2&quot; /C &quot;$INSTDIR\bin\mysqldump.exe&quot; --quick --add-drop-table --extended-insert --force --user=username --password=password database &gt; $1' $0<br />
<br />
The reason I resorted to $1 instead of $BACKUPFILE was that I thought variable expansion wasn't working correctly, so sorry for the unnecessary confusion.<br />
<br />
Any reason why the first attempt didn't work?<br />
<br />
Thanks!<br />
<br />
Brandon</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th June 2009, 23:42</div></div><div class="posttext">cmd.exe sucks, though probably for a reason. Add a IF 1==1 prefix to your command.ExecWait '&quot;$2&quot; /C IF 1==1 &quot;$INSTDIR...&quot; ...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>