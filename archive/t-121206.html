<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Back to previous page during installation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Back to previous page during installation NSIS Discussion" />
	
	<title> Back to previous page during installation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Back to previous page during installation</div>
<hr />
<div class="pda"><a href="t-121206.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=121206">Back to previous page during installation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">12th January 2003, 22:22</div></div><div class="posttext">Hi,<br />
I am not sure if this question has been posted before.<br />
If it is linked to some other past questions, pls do lead me to them.<br />
<br />
Scenerio:<br />
The user makes and input on one page and clicks NEXT.<br />
The installer would then validate the user's input.<br />
If the input is valid, then installer would proceed to the install page.<br />
Otherwise, the installer would go back to the page where the user has to re-enter his input.<br />
<br />
I would greatly appreciate it if someone could help on this.<br />
An example would be great. <br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th January 2003, 22:35</div></div><div class="posttext">Use the ValidateText field of IO. Read the IO readme for more information about it (ValidateText, MaxLen and MinLen).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">12th January 2003, 23:01</div></div><div class="posttext">Please pardon my ignorance, I was reading through the example given in IO.  But I do not understand much about it at all.  Could someone pls explain with comments of what each statement with ;??  does?<br />
<br />
I would also like to know how do I make use of the InstallOptions for my installer which already has some useful functions incoporated? (What statements do I need to include in my own script to use InstallOptions?)<br />
<br />
Thanks in advance.<br />
<br />
Example in IO: <br />
	InstallOptions::initDialog /NOUNLOAD file.ini 	Pop $0;is file.ini my own ini file?? <br />
	IntCmp $0 0 error<br />
		; $0 is now the IO dialog HWND<br />
		; use getdlgitem with it and sendmessage<br />
		GetDlgItem $1 $0 1200 ; 1200 + field number - 1 ;what is field number and what does this statement do?? <br />
<br />
		; $1 is now the HWND of the first field<br />
		CreateFont $2 &quot;Tahoma&quot; 10 700 <br />
		SendMessage $1 ${WM_SETFONT} $2 0 ;?? <br />
<br />
		InstallOptions::show<br />
		Pop $0<br />
		StrCmp $0 &quot;success&quot; done <br />
		StrCmp $0 &quot;back&quot; done<br />
		StrCmp $0 &quot;cancel&quot; done<br />
	error:<br />
		MessageBox MB_OK|MB_ICONSTOP &quot;IO error: $0&quot;<br />
		Quit<br />
	done:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th January 2003, 23:14</div></div><div class="posttext">; just start a comment. A comment, is a comment, doesn't do anything.<br />
<br />
Take a look at the simpler example first, test.nsi and test.ini. ValidateText, MaxLen and MinLen should be in the INI.<br />
<br />
If you are using the Modern UI have a look at the MUI example InstallOtpions.nsi in Examples\Modern UI.<br />
<br />
I am sure this is not enough, but alas, my time is up. I will come back for more information tomorrow.<br />
<br />
Good night.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">13th January 2003, 15:50</div></div><div class="posttext">Hi,<br />
I guess my question was not structured that well therefore there is a mis-interpretation.<br />
<br />
I was using those comments in red to ask my questions.<br />
<br />
Maybe I should use a totall different approach:<br />
Could someone tell me what does the below statements do?<br />
<br />
1) GetDlgItem $1 $0 1200<br />
2) SendMessage $1 ${WM_SETFONT} $2 0<br />
<br />
May I also know how does this work such that it allows the user to go back to the previous page to re-enter his inputs?<br />
<br />
Please note that my validation is not simple text validating.  Therefore, using ValidateText does not work.<br />
<br />
I hope I am clear this time. Apologise for the bad language.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th January 2003, 17:24</div></div><div class="posttext">GetDlgItem gets the handle of a control in a dialog. In this case it gets the handle of the first field of the dialog created by IO (Field 1). You can use the HWND (window handle) to send the control messages such as WM_SETFONT, hide or show it, and set its background color using SetStaticBkColor (only if it's a label).<br />
<br />
The WM_SETFONT message sets the font of the control associated with the HWND inside $1.<br />
<br />
You don't need all of this for what you are trying to do. In fact, you don't even need initDialog and showDialog, only dialog.<br />
<br />
After you call InstallOptions::dialog and it returns &quot;success&quot; (pushes it on the stack and you get it using Pop) you should read the INI file, verify that everything is right and if not call InstallOptions::dialog again and possibly add an error label or pop up a message box stating what's wrong with the input.<br />
<br />
I have recently written an example for NsisMan of an IO page that gets the user name and info and then verifies it. The example is in this thread: http://forums.winamp.com/showthread.php?s=&amp;threadid=118942&amp;highlight=password</div></div><hr />


<div class="post"><div class="posttop"><div class="username">treaz</div><div class="date">13th January 2003, 20:17</div></div><div class="posttext">Thanks!<br />
Got the problem solved with your example.<br />
:)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>