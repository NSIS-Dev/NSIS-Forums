<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" New user: Simple problem?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  New user: Simple problem? NSIS Discussion" />
	
	<title> New user: Simple problem? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  New user: Simple problem?</div>
<hr />
<div class="pda"><a href="t-318445.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318445">New user: Simple problem?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kwhite9266</div><div class="date">15th April 2010, 22:16</div></div><div class="posttext">Hi, I'd like to just start off by saying I am NOT a programmer of any kind. I actually inherited a project from a coworker who is quitting and I need to create a fairly basic installer.<br />
<br />
I work for a textbook publisher. The goal of the installer is to extract a folder filled with educational data files for use with a 3rd party software. I have a copy of the folder ready to go (the way it should look on a student's computer).<br />
<br />
Using the very basic ZIP to EXE function, I've been able to make a bare-bones installer that replicates my data folder in the correct location. However I need a license page and an accept page to go along with it.<br />
<br />
I've DONE those (the license works, although I'm not quite sure how to add an image to my license page, i.e. the book cover) and the installation page both work fine. Unfortunately all I can figure out how to do is get the ZIP to copy to my destination folder; I can't get the contents of the zip to actually extract into the output folder.<br />
<br />
I know I'm missing something fairly simple, but I've been looking over the manual and haven't seen anything that looks like a &quot;run&quot; or &quot;extract&quot; File command.<br />
<br />
Here's what my very, very basic script looks like:<br />
<br />
  !include &quot;MUI2.nsh&quot;<br />
<br />
  Name &quot;PROGRAM NAME&quot;<br />
  OutFile &quot;PROGRAM.exe&quot;<br />
<br />
  InstallDir &quot;C:\&quot;    &lt;---the data needs to be installed in the root to work<br />
<br />
  !define MUI_ABORTWARNING<br />
<br />
;--------------------------------<br />
;Pages<br />
<br />
  !insertmacro MUI_PAGE_LICENSE &quot;LA.txt&quot;<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  <br />
;--------------------------------<br />
;Languages<br />
 <br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
Section &quot;NAME&quot;<br />
  SetOutPath &quot;C:\&quot;<br />
  File &quot;MYFILE.ZIP&quot;<br />
SectionEnd<br />
<br />
What do I need to add to the section to get it to extract the zip contents instead of just copying it? (Also, I've tried using the exe made from my zip to see if it would actually run, but that file just gets copied too.)<br />
<br />
A noob greatly appreciates your help. THANKS!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">isawen</div><div class="date">15th April 2010, 22:27</div></div><div class="posttext">You could use Exec &quot;$INSTDIR\MYFILE.EXE&quot; command to run your exe file after the <br />
&quot;File MYFILE.EXE&quot; line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">redxii</div><div class="date">16th April 2010, 00:53</div></div><div class="posttext">You need an extra plug-in, here is one of many: http://nsis.sourceforge.net/Nsisunz_plug-in<br />
<br />
Add MYFILE.ZIP to a temp directory. $PLUGINSDIR is the temp directory used by the installer and automatically cleans itself up after the install is finished.<br />
 Goes something like this:<br />
Section &quot;NAME&quot;<br />
<br />
SetOutPath &quot;$PLUGINSDIR&quot;<br />
File &quot;MYFILE.ZIP&quot;<br />
<br />
nsisunz::UnzipToStack &quot;$PLUGINSDIR\MYFILE.ZIP&quot; &quot;$INSTDIR&quot;<br />
Pop $R0<br />
StrCmp $R0 &quot;success&quot; +2<br />
  DetailPrint &quot;$R0&quot; ;print error message to log<br />
<br />
SectionEnd<br />
<br />
Add this line at the top so you can put the plug-in file in the same folder as your script:<br />
!addplugindir .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th April 2010, 08:51</div></div><div class="posttext">Here's a better idea: Don't distribute a zip, but the actual files themselves.<br />
<br />
SetOutPath $INSTDIR<br />
File /r &quot;C:\YourProjectFolder\ProjectFiles\*.*&quot;<br />
<br />
<br />
You can find this information in the manual. Please read it:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th April 2010, 12:29</div></div><div class="posttext">As for your book image - if you want this separate from the license text but in the main dialog, you'll have to create your own custom license page.  Otherwise, perhaps you could use it as a header image while using the ModernUI?<br />
<br />
Edit: Or the ExperienceUI which looks like it has a nice big space on the left you might be able to stick a bitmap in.. http://nsis.sourceforge.net/ExperienceUI ..the example image just happens to be of the License page.<br />
<br />
( apparently images included in a license RTF (Rich Text File) don't get displayed, or that might have been an option as well )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kwhite9266</div><div class="date">16th April 2010, 15:37</div></div><div class="posttext">Here's a better idea: Don't distribute a zip, but the actual files themselves.<br />
<br />
SetOutPath $INSTDIR<br />
File /r &quot;C:\YourProjectFolder\ProjectFiles\*.*&quot;<br />
<br />
<br />
You can find this information in the manual. Please read it:<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1<br />
<br />
Thank you, this actually is the most straightforward solution for what I need to do. (I actually stared at that particular page all afternoon yesterday-- I knew the answer was in there but I just wasn't making sense of it.)<br />
<br />
This program is a lifesaver (as are the forums-- thanks to everybody for your extremely fast suggestions!)<br />
<br />
Now I'll spend the rest of my time making the UI of the installer presentable. I've been reading a bit on custom pages but hopefully I can take it from here.<br />
<br />
Cheers!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>