<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Cancel button issue with multiple custom pages, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Cancel button issue with multiple custom pages NSIS Discussion" />
	
	<title> Cancel button issue with multiple custom pages [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Cancel button issue with multiple custom pages</div>
<hr />
<div class="pda"><a href="t-261594.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=261594">Cancel button issue with multiple custom pages</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">11th December 2006, 23:45</div></div><div class="posttext">Hi, I have a few custom pages in my installer, all doing different things, but if the user clicks &quot;Cancel&quot; on any of these pages, it just takes them to the next page (it shows the abort message too). Just wondering if i can make the &quot;Cancel&quot; button directly exit the installer, or exit normally, or just at all would be great.<br />
<br />
The function for the custom pages are like this but it happens with all the custom pages it seems:<br />
<br />
Function InstallMap<br />
         call InstallMapData<br />
         <br />
         ${If} $need_map == &quot;no&quot;<br />
               goto map_exists<br />
         ${ElseIf} $need_map == &quot;yes&quot;<br />
              Call InstallMapPack<br />
              ;Display the InstallOptions dialog<br />
              InstallOptions::dialog &quot;$PLUGINSDIR\installmap.ini&quot;<br />
              Pop $0<br />
         ${EndIf}<br />
map_exists:<br />
FunctionEnd<br />
<br />
<br />
thanks for any help<br />
-zbd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">12th December 2006, 00:43</div></div><div class="posttext">Hi zbd!<br />
<br />
Could you attach the whole piece of code?<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th December 2006, 01:04</div></div><div class="posttext">Hi again Bruno,<br />
I must warn this is very mashed up and a lot of unnecessary stuff in there, i will try and tell u which lines the things that matter are.<br />
Script is attached...<br />
<br />
Line ~ 50 - 70  -  Var's i'm using for the pages<br />
Line 124 - 131  -  Custom pages<br />
Line 162 - 240  -  Custom page Functions<br />
Line 335 - 340  -  InstallCAB used in most of the custom pages<br />
Line 420 - 500  -  One of the components being checked and installed<br />
Line 464        -  Variable being set to show page or not<br />
Line 841 - 875  -  .onInit ini files etc being extracted/reserved<br />
<br />
<br />
It just seems strange to me that it will give me the abort warning message when i click &quot;Cancel&quot;, then i click yes and it just goes to the next page.<br />
<br />
Hope you can help, thanks<br />
Zbd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">12th December 2006, 01:31</div></div><div class="posttext">Hi zbd!<br />
<br />
I couldn't spot anything wrong. Is it working with MUI? I don't know XPUI, sorry.<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th December 2006, 01:48</div></div><div class="posttext">I think its almost exactly the same, but yeah i'm using a skinning system with XPUI, Its very strange, seems to happen with every custom page.<br />
Is there a way i can make a custom AbortWarning?<br />
I would have to detect when they clicked the Cancel button tho<br />
<br />
Thanks Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">12th December 2006, 01:54</div></div><div class="posttext">Hi zbd!<br />
<br />
Hmmm, this behaviour is really weird!<br />
<br />
It is possible to create your own abort warning. Write your code in the .onUserAbort callback function:<br />
<br />
<br />
 Function .onUserAbort<br />
   MessageBox MB_YESNO &quot;Abort install?&quot; IDYES NoCancelAbort<br />
     Abort ; causes installer to not quit.<br />
   NoCancelAbort:<br />
 FunctionEnd<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th December 2006, 01:59</div></div><div class="posttext">sorry, newb-ness kicking in,<br />
I tried just putting that function in my code, it says it exists already? i cant find it</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">12th December 2006, 02:06</div></div><div class="posttext">Ok, XPUI must have occupied this function for its own stuff. Have a look into the documentation of XPUI. It might provide the possibility to create your own function.<br />
<br />
MUI has a similar behaviour with .onGUIInit. If you want to execute your own code, you have to create your own myGUIInit function and introduce a line like this one:<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGUIInit<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th December 2006, 02:22</div></div><div class="posttext">Ur a champ Bruno, it's almost doing what i want now, i just renamed that last .onUserAbort func and included !define MUI_CUSTOMFUNCTION_ABORT &quot;UserAbort&quot; so it is using the Function you gave.<br />
<br />
It is now closing the installer as soon as i press Cancel, there is no Abort Warning, but I can deal with that i hope.<br />
<br />
Thanks for ur help, its very much appreciated.<br />
Zbd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">12th December 2006, 02:25</div></div><div class="posttext">You're welcome.<br />
<br />
Well I guess you could use this code anyway.<br />
<br />
<br />
    Function UserAbort<br />
       MessageBox MB_YESNO &quot;Abort install?&quot; IDYES NoCancelAbort<br />
         Abort ; causes installer to not quit.<br />
       NoCancelAbort:<br />
     FunctionEnd<br />
<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th December 2006, 02:27</div></div><div class="posttext">Yeah, willdo<br />
<br />
thanks again mate, Zbd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>