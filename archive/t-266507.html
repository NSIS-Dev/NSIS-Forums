<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to check if window is hidden or shown, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to check if window is hidden or shown NSIS Discussion" />
	
	<title> How to check if window is hidden or shown [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to check if window is hidden or shown</div>
<hr />
<div class="pda"><a href="t-266507.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266507">How to check if window is hidden or shown</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">24th February 2007, 12:48</div></div><div class="posttext">Hi,<br />
<br />
I want to ask, how I can check if a window (Field of Install Options) is  hidden or shown?<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">25th February 2007, 12:36</div></div><div class="posttext">Impossible?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">25th February 2007, 13:46</div></div><div class="posttext">I've read your post twice, still I'm not able to figure what exactly you're referring...<br />
<br />
Guessing that saying window you mean the instruction EnableWindow and Field of Install Options means a control on a custom page, and probably hidden or shown means enabled or disabled... <br />
Well, this is script depended, you specify in your script under which condition the control needs to be enabled/disabled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">25th February 2007, 14:02</div></div><div class="posttext">Chieftec,<br />
<br />
If you wish to check if a control is VISIBLE (e.g. if toggled with ShowWindow), you need to test the window's style for the WS_VISIBLE flag.<br />
<br />
If you wish to check if a keyboard/mouse input for a control is enabled (e.g. is toggled with EnableWindow), you can test the control for the WS_DISABLED flag.<br />
<br />
You can do the checks using the System plugin and calling the GetWindowStyle API, you can use search to find several examples here in the forums.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">25th February 2007, 18:48</div></div><div class="posttext">Originally posted by Backland <br />
If you wish to check if a control is VISIBLE (e.g. if toggled with ShowWindow), you need to test the window's style for the WS_VISIBLE flag.<br />
 <br />
Thats exactly what I want to do ;)<br />
<br />
Originally posted by Backland <br />
You can do the checks using the System plugin and calling the GetWindowStyle API, you can use search to find several examples here in the forums.  <br />
<br />
I searched the forum, but didn't found examples to GetWindowStyle or WS_VISIBLE.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">25th February 2007, 19:44</div></div><div class="posttext">Here is an example for getting the style flags of control (by Kichik)<br />
<br />
<br />
!define GWL_STYLE -16<br />
!define BS_DEFPUSHBUTTON 1<br />
 <br />
GetDlgItem $0 $HWNDPARENT 1<br />
System::Call &quot;user32::GetWindowLongA(i $0, i ${GWL_STYLE}) i .s&quot;<br />
Pop $1<br />
<br />
<br />
I havent got access to NSIS right now to create an example, but you should be able to check for the WS_VISIBLE flag using IntCmp.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">26th February 2007, 15:04</div></div><div class="posttext">I tried to check the window visibility with the code you posted but it doesn't work. <br />
<br />
!define WS_VISIBLE          0x10000000<br />
  <br />
  InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\ioA.ini&quot;<br />
  Pop $0<br />
  <br />
  GetDlgItem $1 $0 1200<br />
  System::Call &quot;user32::GetWindowLongA(i $0, i ${WS_VISIBLE}) i .s&quot;<br />
  Pop $1    <br />
I also read and compiled the examples in NSIS\Examples\System ...<br />
I am not well up with System commands. <br />
So can someone write the code checking for the WS_VISIBLE flag for me?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">27th February 2007, 18:57</div></div><div class="posttext">- push :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 19:55</div></div><div class="posttext">There's IsWindowVisible, so there's no need for GetWindowLong.StrCpy $0 &quot;some hwnd&quot;<br />
System::Call &quot;user32::IsWindowVisible(i r0)&quot;i.r0<br />
# $0 here is non-zero if the window is visible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">27th February 2007, 23:22</div></div><div class="posttext">Thank you for your reply ;)<br />
Is this the correct code?<br />
<br />
InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\ioA.ini&quot;<br />
  Pop $1<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $0 &quot;ioA.ini&quot; &quot;Field 1&quot; &quot;HWND&quot;<br />
   System::Call &quot;user32::IsWindowVisible(i r0)&quot;i.r0<br />
   # $0 here is non-zero if the window is visible.<br />
<br />
  MessageBox mb_ok &quot;$0&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">1st March 2007, 13:35</div></div><div class="posttext">The code I posted above, won't work...<br />
Can someone say me what's wrong?<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st March 2007, 19:41</div></div><div class="posttext">That's because `i.r0` should be in the quotes. Little typo of mine...System::Call &quot;user32::IsWindowVisible(i r0)i.r0&quot;But even with this change, you'll always get 0 because the custom dialog doesn't show until installOptions::show is called.<br />
<br />
There isn't even an option in InstallOptions to hide a control. What exactly are you trying to do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chieftec</div><div class="date">3rd March 2007, 09:13</div></div><div class="posttext">Thank, that works ;)<br />
<br />
<br />
Originally posted by kichik <br />
But even with this change, you'll always get 0 because the custom dialog doesn't show until installOptions::show is called. <br />
<br />
installOptions::show is already called when I use the function (yes, in the code I posted above it isn't)<br />
<br />
Thanks again :-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>