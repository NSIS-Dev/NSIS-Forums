<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Question about Message Boxes, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Question about Message Boxes NSIS Discussion" />
	
	<title> Question about Message Boxes [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Question about Message Boxes</div>
<hr />
<div class="pda"><a href="t-328937.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=328937">Question about Message Boxes</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 05:39</div></div><div class="posttext">Howdy folks!  Brand new here... :)<br />
<br />
I am wondering if there is an alternative to being forced to use gotos and labels as the result of buttons in a message box.  Instead of using labels I would like to set some flags or something similar.  I have been a developer for many years and the thought of using gotos makes me cringe a little bit haha!  I am using a MB_YESNOCANCEL message box and once the flags are set I would do some logic on them via LogicLib.nsh.<br />
<br />
Thanks for any info!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">26th March 2011, 11:36</div></div><div class="posttext">Try reading the manual and the example scripts supplied with NSIS.<br />
<br />
Here is a simple example to get you started:<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
Name &quot;Demo&quot;<br />
OutFile demo.exe<br />
<br />
RequestExecutionLevel &quot;user&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Section default<br />
<br />
   ${If} ${Cmd} `MessageBox MB_YESNO|MB_ICONQUESTION 'Display MAKENSIS help?' IDYES`<br />
       DetailPrint &quot;MAKENSIS Help:&quot;<br />
       DetailPrint &quot;&quot;<br />
       nsExec::ExecToLog '&quot;${NSISDIR}\makensis.exe&quot; /CMDHELP'<br />
       DetailPrint &quot;&quot;<br />
  ${Else}<br />
      DetailPrint &quot;&quot;<br />
      DetailPrint &quot;User did not request the help listing&quot;<br />
      DetailPrint &quot;&quot;<br />
  ${EndIf}<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 17:03</div></div><div class="posttext">Thanks for the info!  My apologies, I did look through the manual (but not example scripts) and every mention I could find of MessageBox used labels.  I must have missed the part where they work with logical flow statements.  I had also googled for hours trying to find this information too so I hope you don't think I was lazy haha :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 17:06</div></div><div class="posttext">I also need this to work with YESNOCANCEL (so 3 buttons), off to searching the manual again and examples I go!  Thanks again for pointing me in the right direction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 17:25</div></div><div class="posttext">How about something like this?<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
Name &quot;Demo&quot;<br />
OutFile demo.exe<br />
<br />
RequestExecutionLevel &quot;user&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Section default<br />
<br />
   ${If} ${Cmd} `MessageBox MB_YESNOCANCEL|MB_ICONQUESTION 'Display MAKENSIS help?' IDYES`<br />
       DetailPrint &quot;MAKENSIS Help:&quot;<br />
       DetailPrint &quot;&quot;<br />
       nsExec::ExecToLog '&quot;${NSISDIR}\makensis.exe&quot; /CMDHELP'<br />
       DetailPrint &quot;&quot;<br />
  ${ElseIf ${Cmd} `IDNO`}<br />
      DetailPrint &quot;&quot;<br />
      DetailPrint &quot;User did not request the help listing&quot;<br />
      DetailPrint &quot;&quot;<br />
  ${Else}<br />
      {DO SOMETHING ELSE HERE}<br />
  ${EndIf}<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">26th March 2011, 17:27</div></div><div class="posttext">I find &quot;Windows Grep&quot; useful for searching the example files supplied with NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 17:41</div></div><div class="posttext">I find &quot;Windows Grep&quot; useful for searching the example files supplied with NSIS.<br />
<br />
That is exactly what I already did.  I looked through all instances of &quot;messagebox&quot; and the only ones I found using LogicLib only had 2 choices like your original example.<br />
<br />
I also grepped for instances of ${If} and ${Cmd} together to see if they were possibly used with another command other than messagebox, no dice.<br />
<br />
I am not lazy, I know how to search for stuff.  This isn't my first rodeo =(  I may have seen what I needed and not known it was what I needed.<br />
<br />
Sorry for the troubles :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">26th March 2011, 17:45</div></div><div class="posttext">${ElseIf ${Cmd} `IDNO`} will not compile for several reasons.<br />
<br />
Have you bothered to look at the LogicLib.nsi example script? It shows that LogicLib uses ${ElseIf} for the &quot;if ... elseif ... else ... endif&quot; structure.<br />
<br />
The ${If} ${Cmd} structure conditionally executes an inline statement, depending on a true value of the provided NSIS function. Your suggestion uses `IDNO` which is not a function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 18:15</div></div><div class="posttext">will not compile for several reasons.<br />
<br />
Have you bothered to look at the LogicLib.nsi example script? It shows that LogicLib uses ${ElseIf} for the &quot;if ... elseif ... else ... endif&quot; structure.<br />
<br />
The ${If} ${Cmd} structure conditionally executes an inline statement, depending on a true value of the provided NSIS function. Your suggestion uses `IDNO` which is not a function.<br />
<br />
Yes I have &quot;bothered&quot; to.  I hope by now I would have proved my self knowledgeable and competent... I am not someone looking for an easy answer.  I had already spent a day looking for a solution to this.  I just explained how I even used wingrep to search through all the example file.<br />
<br />
My question was never about how to setup the logic structure, I know how to use ${ElseIf} just fine (in general that is).  My question is how to use that logic structure specifically with MessageBox YESNOCANCEL.<br />
<br />
There are only 2 examples in LogicLib.nsi that reference MessageBox.<br />
<br />
  ; ifcmd..||..| and if/unless cmd<br />
  StrCpy $R2 &quot;&quot;<br />
  ${IfCmd} MessageBox MB_YESNO &quot;Please click Yes&quot; IDYES ${||} StrCpy $R2 $R2A ${|}<br />
  ${Unless} ${Cmd} `MessageBox MB_YESNO|MB_DEFBUTTON2 &quot;Please click No&quot; IDYES`<br />
    StrCpy $R2 $R2B<br />
  ${EndUnless}<br />
  ${If} $R2 == &quot;AB&quot;<br />
    DetailPrint &quot;PASSED IfCmd/If Cmd test&quot;<br />
  ${Else}<br />
    DetailPrint &quot;FAILED IfCmd/If Cmd test&quot;<br />
  ${EndIf}<br />
<br />
Function ComponentsLeave<br />
  ; Section flags tests (requires sections.nsh be included)<br />
  ${Unless} ${SectionIsSelected} ${TESTS}<br />
    MessageBox MB_OK &quot;Please select the component&quot;<br />
    Abort<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Neither of the above reference using an ${ElseIf}<br />
<br />
The only example in that script that references ${ElseIf} is the below, and it is just using strings, nothing to do with commands like MessageBox.<br />
<br />
  ; if..elseif..else..endif<br />
  StrCpy $R1 A<br />
  StrCpy $R2 &quot;&quot;<br />
  ${If} $R1 == A<br />
    StrCpy $R2 $R2A<br />
  ${ElseIf} $R1 == B<br />
    StrCpy $R2 $R2B<br />
  ${ElseUnless} $R1 != C<br />
    StrCpy $R2 $R2C<br />
  ${Else}<br />
    StrCpy $R2 $R2D<br />
  ${EndIf}<br />
  ${If} $R1 == D<br />
    StrCpy $R2 $R2D<br />
  ${ElseIf} $R1 == A<br />
    StrCpy $R2 $R2A<br />
  ${ElseUnless} $R1 != B<br />
    StrCpy $R2 $R2B<br />
  ${Else}<br />
    StrCpy $R2 $R2C<br />
  ${EndIf}<br />
  ${If} $R1 == C<br />
    StrCpy $R2 $R2C<br />
  ${ElseIf} $R1 == D<br />
    StrCpy $R2 $R2D<br />
  ${ElseUnless} $R1 != A<br />
    StrCpy $R2 $R2A<br />
  ${Else}<br />
    StrCpy $R2 $R2B<br />
  ${EndIf}<br />
  ${If} $R1 == B<br />
    StrCpy $R2 $R2B<br />
  ${ElseIf} $R1 == C<br />
    StrCpy $R2 $R2C<br />
  ${ElseUnless} $R1 != D<br />
    StrCpy $R2 $R2D<br />
  ${Else}<br />
    StrCpy $R2 $R2A<br />
  ${EndIf}<br />
  ${If} $R2 == &quot;$R1$R1$R1$R1&quot;<br />
    DetailPrint &quot;PASSED If..ElseIf..Else..EndIf test&quot;<br />
  ${Else}<br />
    DetailPrint &quot;FAILED If..ElseIf..Else..EndIf test&quot;<br />
  ${EndIf}<br />
<br />
What am I missing?  Do I have an old example file or something?  I promise I am not an idiot! LOL</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 18:17</div></div><div class="posttext">will not compile for several reasons.<br />
<br />
Have you bothered to look at the LogicLib.nsi example script? It shows that LogicLib uses ${ElseIf} for the &quot;if ... elseif ... else ... endif&quot; structure.<br />
<br />
The ${If} ${Cmd} structure conditionally executes an inline statement, depending on a true value of the provided NSIS function. Your suggestion uses `IDNO` which is not a function.<br />
<br />
Also FYI I typoed that, what I had meant was<br />
<br />
${ElseIf} ${Cmd} `IDNO` (which still won't work obviously)<br />
<br />
Please excuse the slip of the keyboard, I know how to use ${ElseIf}, this isn't my first NSIS script :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TehMuffinMan</div><div class="date">26th March 2011, 19:41</div></div><div class="posttext">For simplicity, this is exactly what I am trying to figure out... (I can ramble some)<br />
<br />
Reference the [WHAT GOES HERE]<br />
<br />
    ${If} ${Cmd} `MessageBox MB_YESNOCANCEL|MB_ICONEXCLAMATION &quot;PRORAM X is already installed. Click YES to remove the installed version found in C:\Program Files(x86). Click NO to skip uninstall and choose a different install location (not recommended) or CANCEL to terminate the installer.&quot; IDYES`<br />
        MessageBox MB_OK &quot;Yes was clicked&quot;<br />
    ${ElseIf} {WHAT GOES HERE??}<br />
        MessageBox MB_OK &quot;No was clicked&quot;<br />
    ${Else}    <br />
        MessageBox MB_OK &quot;Cancel was clicked&quot;<br />
    ${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th March 2011, 22:34</div></div><div class="posttext">You have to use labels I'm afraid, unless you use nsL (see sticky topic).<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>