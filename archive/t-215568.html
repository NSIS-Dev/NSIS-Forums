<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Folder Creation.. what am i missing, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Folder Creation.. what am i missing NSIS Discussion" />
	
	<title> Folder Creation.. what am i missing [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Folder Creation.. what am i missing</div>
<hr />
<div class="pda"><a href="t-215568.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215568">Folder Creation.. what am i missing</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vsleepy</div><div class="date">10th May 2005, 05:33</div></div><div class="posttext">Hi List.<br />
I am slightly baffled with when an installer creates folders and when it doesn't!<br />
Given the script below (note &lt;path&gt; in place of longer path.<br />
<br />
SetOutPath &quot;$INSTDIR\workspace\projects\&quot;<br />
file /r &quot;&lt;path&gt;projects\Drafting1\1.txt&quot;<br />
file /r &quot;&lt;path&gt;projects\Drafting1\Dgnlib\1.txt&quot;<br />
file /r &quot;&lt;path&gt;projects\Drafting1\Data\1.txt&quot;<br />
file /r &quot;&lt;path&gt;Drafting1projects\Cell\1.txt&quot;<br />
<br />
when the installer is run, the folder drafting1 is not created even though it contains files but subsequent folders are, eg cell, data, dgnlib.<br />
<br />
Like many things with nsis, i am finding this behavior slightly cryptic.<br />
<br />
Can somebody please explain the above behaviour.<br />
r,<br />
vsleepy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th May 2005, 08:44</div></div><div class="posttext">Try removing the end back-stroke from the SetOutPath call.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th May 2005, 20:54</div></div><div class="posttext">The /r switch tells NSIS to search for the file in all of the subdirectories. If a file is included from a subdirectory, that subdirectory will also be created on $OUTDIR. But if it's in the root lookup directory, that root directory will not be created.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vsleepy</div><div class="date">12th May 2005, 02:14</div></div><div class="posttext">Unfortunatly the behaviour is very inconsistant.<br />
eg:<br />
SetOutPath &quot;outdirectory&quot;<br />
file /r path1\path2\outdirectory\explicit.txt<br />
file /r path1\path2\outdirectory\path3\explicit2.txt<br />
this example will _not_ create the folder path3, even though path3\explicit2.txt is a valid filter (because the file exists) <br />
<br />
but this will:<br />
SetOutPath &quot;outdirectory&quot;<br />
file /r path1\path2\outdirectory\*.txt<br />
file /r path1\path2\outdirectory\path3\*.txt<br />
<br />
any hints? I have been going crazy over this!<br />
r<br />
vsleepy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">12th May 2005, 02:25</div></div><div class="posttext">the first example does not create a subdir, because you mix up input and output directory. you need to create an output directory using the SetOutPath command.<br />
<br />
the reason why the second example creates the subdir is the first file command (file /r &quot;path1\path2\outdirectory\*.txt&quot;) as you are using the /r trigger. the second line is unnecessary, as you already copies all .txt files recursively (=with subdirs).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vsleepy</div><div class="date">12th May 2005, 02:34</div></div><div class="posttext">sorry kichink, <br />
what you said just clicked. it searched the directorys recursivly for the file, then includes it.<br />
so i should do something like:<br />
file /r path1\path2\outdirectory\explicit.txt<br />
file /r path1\path2\outdirectory\explicit2.txt<br />
<br />
and because explicit2 is not in the search path, then the sub directory will be created?...? was it really designed this way?!<br />
<br />
what happens if if explicit2 exists in many sub directorys?<br />
<br />
btw the real issue i guess is not what to install as this can often be determined by using a *.* filter, but rather what to uninstall. the software that i wrote to complile the script now just uses a wild card for inclusion but explicity adds the files that were originally in source dir to the uninstall routine.<br />
<br />
a future request of mine would be another switch on the file command to preserve path of explicitly referenced files beyond a given level eg:<br />
file /e 3 dir1\dir2\dir3\dir4\file.ext <br />
would retain the directory path:<br />
&lt;outpath&gt;dir4\file.ext<br />
<br />
many thanks,<br />
vsleepy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">12th May 2005, 07:40</div></div><div class="posttext">have a look at this thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=213006)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th May 2005, 10:08</div></div><div class="posttext">If explicit2 exists in a subdirectory of the search path, it will be extracted to a matching subdirectory of the output path.<br />
<br />
If you use File /r &lt;search path&gt;\&lt;matching pattern&gt;, each matched file or folder under &lt;search path&gt; will be extracted to the output path. If the file or folder was found in a subdirectory of the search path, it will be extracted to a matching subdirectory under the output path. If it was found in the search path itself and not under a subdirectory, it will be extracted directly to the output path.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>