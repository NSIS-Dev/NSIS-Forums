<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Copying Files from CD, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Copying Files from CD NSIS Discussion" />
	
	<title> Copying Files from CD [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Copying Files from CD</div>
<hr />
<div class="pda"><a href="t-268369.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=268369">Copying Files from CD</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">26th March 2007, 00:20</div></div><div class="posttext">In NSIS, is there any way to get the drive letter of a CD by searching for its CD name, and then access the files on the CD?<br />
<br />
Would I use this?<br />
<br />
http://nsis.sourceforge.net/CDRom_plug-in<br />
<br />
If so, what commands would I use to get the drive letter of the CD whose name is &quot;Bob_1&quot;?<br />
<br />
How would I copy files over from that drive letter to the $INSTDIR?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th March 2007, 01:11</div></div><div class="posttext">http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.5</div></div><hr />


<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">26th March 2007, 21:31</div></div><div class="posttext">Sorry, Red Wine, but I don't think that it talks about searching for the name of the CD. It only tells me how to search for a type of media storage device, and drive letter.<br />
<br />
Could you tell me how to find the drive letter of a CD by entering the NAME of the CD I'm searching for?<br />
<br />
Many thanks!<br />
<br />
Could you also show me how to implement it directly into an installation code file?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th March 2007, 23:02</div></div><div class="posttext">GetDrives has the option to find CD drives only and returns the corresponding drive letter for each drive.<br />
I think instead of volume name you could add a file on the root of the media e.g. cdid and look for this file, e.g.<br />
Section<br />
	${GetDrives} &quot;CDROM&quot; &quot;Example1&quot;<br />
        CopyFiles &quot;$R0\my_file.ext&quot; &quot;$INSTDIR\my_file.ext&quot;<br />
SectionEnd<br />
<br />
Function Example1<br />
	MessageBox MB_OK &quot;$9  ($8 Drive)&quot;<br />
        IfFileExists &quot;$9\cdid&quot; 0 next<br />
        StrCpy $R0 &quot;$9&quot; ;$R0 contains the drive you're looking<br />
        StrCpy $0 &quot;StopGetDrives&quot;<br />
    next:<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">26th March 2007, 23:20</div></div><div class="posttext">Sorry, but how would I replace IfFileExists &quot;$9\cdid&quot; with multiple files? (so I can make the search more accurate)<br />
<br />
I tried &amp;&amp;, but it doesn't work.<br />
<br />
Sorry, I'm kind of new to NSIS.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th March 2007, 23:27</div></div><div class="posttext">You just need to add a unique file on media root that identifies the cd, that's all, just create an empty text file and rename it as cdid and you're done.<br />
Multiple IfFileExists could be easily done with logiclib e.g.<br />
${If} {FileExists} &quot;file1.ext&quot;<br />
${AndIf} {FileExists} &quot;file2.ext&quot;<br />
${AndIf} {FileExists} &quot;file3.ext&quot;<br />
........</div></div><hr />


<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">26th March 2007, 23:37</div></div><div class="posttext">I did this:<br />
<br />
Function Example1<br />
	MessageBox MB_OK &quot;$9  ($8 Drive)&quot;<br />
        ${If} {FileExists} &quot;$9\file1.exe&quot;<br />
	${AndIf} {FileExists} &quot;$9\file2.exe&quot; 0 next<br />
        StrCpy $R0 &quot;$9&quot; ;$R0 contains the drive you're looking<br />
        StrCpy $0 &quot;StopGetDrives&quot;<br />
    next:<br />
	Push $0<br />
FunctionEnd<br />
<br />
(And I also included !include &quot;LogicLib.nsh&quot;)<br />
<br />
It gave me this:<br />
<br />
Function: &quot;Example1&quot;<br />
MessageBox: 0: &quot;$9  ($8 Drive)&quot;<br />
!insertmacro: _If<br />
!insertmacro: macro &quot;_If&quot; requires 4 parameter(s), passed 3!<br />
<br />
And then aborted.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th March 2007, 23:40</div></div><div class="posttext">Gosh! did you first examine the included logiclib example?<br />
Function Example1<br />
MessageBox MB_OK &quot;$9 ($8 Drive)&quot;<br />
${If} ${FileExists} &quot;$9\file1.exe&quot;<br />
${AndIf} ${FileExists} &quot;$9\file2.exe&quot; <br />
StrCpy $R0 &quot;$9&quot; ;$R0 contains the drive you're looking<br />
StrCpy $0 &quot;StopGetDrives&quot;<br />
${EndIf}<br />
Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">26th March 2007, 23:42</div></div><div class="posttext">Thanks.<br />
<br />
But I had to put a dollar sign in front of &quot;file exists&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th March 2007, 23:51</div></div><div class="posttext">that's true, didn't see my typo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">compmaniac</div><div class="date">27th March 2007, 00:25</div></div><div class="posttext">No problem. Thanks for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>