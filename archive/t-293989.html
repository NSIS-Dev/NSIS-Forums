<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Convert string to integer?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Convert string to integer? NSIS Discussion" />
	
	<title> Convert string to integer? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Convert string to integer?</div>
<hr />
<div class="pda"><a href="t-293989.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293989">Convert string to integer?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">richiebabes</div><div class="date">4th July 2008, 19:16</div></div><div class="posttext">I am trying to read a text file to get a version number from it. I then want to compare that to the current version and abort if a newer version is already installed. This is what I have so far:<br />
<br />
; check existing version<br />
  Push 1 <br />
  Push &quot;$INSTDIR\config\version.txt&quot; <br />
  Call ReadFileLine<br />
  Pop $0 <br />
  <br />
  ${If} $0 &gt; 730<br />
  MessageBox MB_OK &quot;A newer version of blah is already installed on this machine. Please uninstall it first.&quot;<br />
  Abort<br />
  ${EndIf}<br />
<br />
The problem is that $0 is a string and I can't find anywhere in the documentation how to convert it to an integer. I don't want to compare strings because 730 would be bigger than 1000.<br />
<br />
How do I convert $0 to an integer?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">4th July 2008, 20:17</div></div><div class="posttext">out of curiosity - have you tried your code with $0 being a value of 1000 ('as a string')?<br />
<br />
It should get cast to an integer automagically.<br />
<br />
<br />
!include &quot;LogicLib.nsh&quot; ; Logical Library<br />
outFile &quot;installer.exe&quot;<br />
section<br />
${If} &quot;1000&quot; &gt; 730<br />
	messagebox MB_OK &quot;A&quot;<br />
${Else}<br />
	messagebox MB_OK &quot;B&quot;<br />
${EndIf}<br />
sectionEnd<br />
<br />
<br />
Pops up &quot;A&quot; for me.<br />
<br />
But if in doubt, you could try...<br />
IntOp $0 $0 + 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">4th July 2008, 20:47</div></div><div class="posttext">I think in NSIS all variables are strings. And if you run an integer operation, the string will be converted to an integer implicitly. If you create a custom Plugin for example, you have to pop all arguments from the stack as strings. So if you need integers as input, you will have to convert the strings to integers manually. Also return values are pushed on the stack as strings, even if your output is an integer...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">richiebabes</div><div class="date">7th July 2008, 17:30</div></div><div class="posttext">Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">7th July 2008, 18:55</div></div><div class="posttext">See also VersionConvert and VersionCompare headers in the NSIS help (Appendix E).<br />
<br />
VersionConvert will convert a string into a version number for those time when a version number contains a letter (ie &quot;1.1a&quot;)<br />
<br />
VersionCompare compares the version numbers.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>