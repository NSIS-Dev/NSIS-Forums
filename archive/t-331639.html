<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Plugin not working properly when compiled with makensis (console compiler), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Plugin not working properly when compiled with makensis (console compiler) NSIS Discussion" />
	
	<title> Plugin not working properly when compiled with makensis (console compiler) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Plugin not working properly when compiled with makensis (console compiler)</div>
<hr />
<div class="pda"><a href="t-331639.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=331639">Plugin not working properly when compiled with makensis (console compiler)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">17th June 2011, 07:12</div></div><div class="posttext">Hi.<br />
<br />
I have the following simple script trying to utilize the messagebox plugin:<br />
<br />
Function .onInit<br />
messagebox::show MB_ICONEXCLAMATION &quot;HiTitle&quot; &quot;&quot; &quot;HiMessage&quot; IDOK<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
Now, when I compile with the GUI version (makensisw) it works perfectly.<br />
<br />
however, when I compile with the console version (makensis) instead of showing a messagebox, it creates two files in it's currentdirectory: one being &quot;HiTitle&quot; and &quot;HiMessage&quot; (the title and message of the messagebox I'm trying to create)...<br />
<br />
now I've been reading through the output of the console and it is infact recognizing the messagebox plugin and seemingly including it in the build, as shown here:<br />
Function: &quot;.onInit&quot;<br />
File: &quot;messagebox.dll&quot;-&gt;&quot;$PLUGINSDIR\messagebox.dll&quot; 6144 bytes<br />
Plugin Command: show MB_ICONEXCLAMATION HiTitle  HiMessage IDOK<br />
FunctionEnd<br />
<br />
Do you have any idea of how I can solve this problem?<br />
<br />
Thanks for the time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">17th June 2011, 08:33</div></div><div class="posttext">Everything is fine with this:<br />
Function: &quot;.onInit&quot;<br />
File: &quot;messagebox.dll&quot;-&gt;&quot;$PLUGINSDIR\messagebox.dll&quot; 6144 bytes<br />
Plugin Command: show MB_ICONEXCLAMATION HiTitle  HiMessage IDOK<br />
FunctionEnd<br />
<br />
It is a log from makensis as it parses plugin, every plugin is parsed this way.<br />
<br />
But I can see a possible problem in you code :<br />
Function .onInit<br />
messagebox::show MB_ICONEXCLAMATION &quot;HiTitle&quot; &quot;&quot; &quot;HiMessage&quot; IDOK<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
Try to insert InitPluginsDir before first call to your plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">17th June 2011, 09:43</div></div><div class="posttext">Calling a plugin automatically inits the pluginsdir. There's no need to call it manually. The initpluginsdir command was added for people who want to use the dir *before* any plugins are called.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">17th June 2011, 12:20</div></div><div class="posttext">Calling a plugin automatically inits the pluginsdir. There's no need to call it manually. The initpluginsdir command was added for people who want to use the dir *before* any plugins are called.<br />
<br />
I disagree with you - I prefer to call it manually.<br />
<br />
parasoul can you share your plugin with us?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">17th June 2011, 13:04</div></div><div class="posttext">its most likely http://nsis.sourceforge.net/MessageBox_plug-in which is being used and really that plug-in shouldn't be used as i've no source code for it anymore and its just not supported.<br />
<br />
and i agree with MSG, there's no point to do what the the installer is already doing for you but is your installer so you can do what you like really.<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">17th June 2011, 15:20</div></div><div class="posttext">I disagree with you - I prefer to call it manually.<br />
<br />
<br />
Initpluginsdir is for when you need the directory like MSG says. (Back in the day you had to extract the plugin yourself and call it with a NSIS instruction)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">17th June 2011, 18:51</div></div><div class="posttext">yes this is the plugin I'm trying to use. and I also believe that this plugin is the problem because I'm not having issues with any other plugin...<br />
<br />
I've decided to simply use the system plugin to solve this problem...<br />
System::Call 'user32::MessageBox(i $HWNDPARENT, t &quot;dude&quot;, t &quot;man&quot;, i 32) v r0'<br />
<br />
thanks everyone ^&gt;^</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">17th June 2011, 19:26</div></div><div class="posttext">i not v if you want the actual return value</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">18th June 2011, 02:17</div></div><div class="posttext">thanks for letting me know that but no the return is trivial to me</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>