<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help With Install Options- So So Close... I think..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help With Install Options- So So Close... I think... NSIS Discussion" />
	
	<title> Help With Install Options- So So Close... I think... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help With Install Options- So So Close... I think...</div>
<hr />
<div class="pda"><a href="t-205605.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205605">Help With Install Options- So So Close... I think...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mattdisaster</div><div class="date">22nd January 2005, 07:13</div></div><div class="posttext">Hi everyone-<br />
I've posted on here before and everyone was great helping me out, I was in the irc room earlier this evening and had some excellent help, but I've hit another wall and I think I'm so so close so I figured I'de ask on here.  First I'll explain the goal:<br />
<br />
I'de like for the installation to install all the files like normal a normal installation would, following that, 2 custom pages come up(which I have succesfully created and implemented into the setup), each page has something like 4 fields of information that needs to be filled in, mainly paths to directorys and a few locations of executable files. From there I'de like for the setup to then take the information from each field and place it into its spot in config .xml file that was installed along with the other files in the setup.<br />
<br />
Whats happening:<br />
I can get the install to work fantastic, the pages to show up, the fields to work (collect and display the data perfect), and the installation finish. But none of the data is being written to the .xml file.<br />
<br />
Via the irc room I set the custom page to run a function once loaded, and that function has the write to file info in it.  From what I can see the data isnt being put into any varibles(?) to be placed into the file.  I know the function works because if I replace the $R0 variable and put words or something of the like, it will show up in the xml file.<br />
Any help would be great, I'll attach the script for the curious.  Thanks so much to everyone!<br />
<br />
-matt</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd January 2005, 10:42</div></div><div class="posttext">Put a messagebox in .onLeaveFunc to see what $R0 is.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd January 2005, 11:41</div></div><div class="posttext">You are using MUI_INSTALLOPTIONS_WRITE instead of MUI_INSTALLOPTIONS_READ. You are writing the content of $R0 into the INI file, not reading it from the INI file.<br />
<br />
Are you sure .onLeaveFunc is called? Its name might start with a dot, but it's not an installer callback function and I don't see it referenced anywhere.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mattdisaster</div><div class="date">22nd January 2005, 15:42</div></div><div class="posttext">Thank you both for the replies, I updated my script alittle and have updated the attachment.  I put in the msg box and it does come up, but nothing shows for the $r0 value and to see if it was working I changed the write text from $R0 to &quot;testers&quot; and it wrote it perfect.  I still have no clue whats happening or why it isnt putting the data to the $R0.  Any ideas?  Thanks so much for all the help so far, please excuse my newbness. heh<br />
<br />
-matt<br />
<br />
Edit:  You cant edit posts after a certain time, so I've uploaded it to my server. Sorry and thanks again for looking!<br />
xlobbyinstaller.nsi (http://www.disasterparty.com/xlobby/myxlobbyscript.nsi)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd January 2005, 17:40</div></div><div class="posttext">Did you miss kichik's post?<br />
You're using:<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE $R0 &quot;CPA.ini&quot; &quot;Field 6&quot; &quot;State&quot; when it should be:<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;CPA.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
<br />
With !insertmacro MUI_INSTALLOPTIONS_WRITE $R0 &quot;CPA.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
you're effectivly writing to an INI file named $R0, a section in it called &quot;CPA.ini&quot;, a key named &quot;Field 6&quot; and a value of &quot;State&quot;!<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mattdisaster</div><div class="date">22nd January 2005, 17:45</div></div><div class="posttext">Oh my lord, I apologize for the misunderstanding! I just doubled checked it, and had the field placed in the wrong function!  I tried it the correct way but in the wrong place and then just reverted it back to what I had it.  End of story, you guys are the best!<br />
<br />
-matt</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>