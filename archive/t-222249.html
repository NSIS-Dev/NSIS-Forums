<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" I would make an DropList for a custom page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  I would make an DropList for a custom page NSIS Discussion" />
	
	<title> I would make an DropList for a custom page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  I would make an DropList for a custom page</div>
<hr />
<div class="pda"><a href="t-222249.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=222249">I would make an DropList for a custom page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">23rd July 2005, 08:43</div></div><div class="posttext">Hi<br />
I make an installer for counter-strike and I would, that the user can choose on an custom page which netsettigs he has.<br />
<br />
This is my netsettings.ini:<br />
<br />
[Settings]<br />
NumFields=1<br />
<br />
[Field 1]<br />
Type=Droplist<br />
ListItems=LAN|56K Modem|ISDN|D-ISDN|S-DSL|A-DSL|Cable |Q-DSL|DSL mit FP<br />
Left=2<br />
Right=109<br />
Top=1<br />
Bottom=126<br />
<br />
Here is an example:<br />
<br />
http://www.cs-expert.de/netsettings.php<br />
<br />
How can I specify what happens whith the setting LAN, 56KMODEM...<br />
<br />
Example<br />
<br />
This is the code for lan:<br />
<br />
Lan:<br />
[CODE]<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Lan.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;[CODE]<br />
<br />
<br />
I hope you can understand what I mean. My english isn't very good</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2005, 10:58</div></div><div class="posttext">On the page leave function you need to read the State with ReadINIStr.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">23rd July 2005, 11:45</div></div><div class="posttext">Hy thank you for the answer but I don't now what I should do now.<br />
<br />
Can you give me an expamle please?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2005, 17:11</div></div><div class="posttext">Page Custom showFunc leaveFunc<br />
<br />
Function leaveFunc<br />
 ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
  StrCmp $R0 &quot;LAN&quot; 0 notLAN<br />
   ${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Lan.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
  notLAN:<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">24th July 2005, 13:17</div></div><div class="posttext">Hy Afrow UK<br />
<br />
thank you!<br />
<br />
You always help me.<br />
<br />
But it isn't work. There comes always the error<br />
<br />
<br />
ReadINIStr $R0 [Field 1]:State from $PLUGINSDIR\ioFile.ini<br />
StrCmp expects 3-4 parameters, got 5.<br />
Usage: StrCmp str1 str2 label_to_goto_if_equal [label_to_goto_if_not]<br />
Error in script &quot;H:\Eigene Dateien\Programme &amp; Games\Programme\Programme\NSIS\Projekte\Counter-Strike 1.6\Counter-Strike 1.6 Erweiterungs System\Counter-Strike 1.6 Erweiterungs System.nsi&quot; on line 2062 -- aborting creation process<br />
<br />
<br />
This is my Code:<br />
<br />
<br />
Page custom NetsettingsPage PageLeaveNetsettings<br />
ReserveFile &quot;netsettings.ini&quot;<br />
!insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;netsettings.ini&quot;<br />
<br />
<br />
; Page Leave Netsettings<br />
Function PageLeaveNetsettings<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;LAN&quot; 0 notLAN<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Lan.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notLAN:<br />
<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;56K Modem&quot; 0 not56K Modem<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\56K Modem.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
not56K Modem:<br />
<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;ISDN&quot; 0 notISDN<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\ISDN.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notISDN:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;D-ISDN&quot; 0 notD-ISDN<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\D-ISDN.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notD-ISDN:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;S-DSL&quot; 0 notS-DSL<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\S-DSL.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notS-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;A-DSL&quot; 0 notA-DSL<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\A-DSL.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notA-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;Cable&quot; 0 notCable<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Cable.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notCable:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;Q-DSL&quot; 0 notQ-DSL<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Q-DSL.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notQ-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;DSL mit FP&quot; 0 notDSL mit FP<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\DSL mit FP.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
notDSL mit FP:<br />
<br />
FunctionEnd<br />
<br />
<br />
This is the code for the netsetting page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">24th July 2005, 13:20</div></div><div class="posttext">Ah sorry i've forgot to write the code from the Netsettings Page<br />
<br />
<br />
<br />
Function NetsettingsPage<br />
!insertmacro SectionFlagIsSet ${Section2} ${SF_SELECTED} ShowPage SkipPage<br />
ShowPage:<br />
<br />
   !insertmacro MUI_HEADER_TEXT &quot;Konfiguration des Erweiterungs System&quot; &quot;Wählen Sie, mit welcher Verbindung sie spielen.&quot;<br />
   !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;netsettings.ini&quot;<br />
<br />
SkipPage:<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">24th July 2005, 14:27</div></div><div class="posttext">there's a space in StrCmp $R0 &quot;56K Modem&quot; 0 not56K Modem, so it's being interpreted as 5 parameters. it should be &quot;not56K-Modem&quot; instead.<br />
<br />
same with &quot;notDSL mit FP&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">24th July 2005, 15:29</div></div><div class="posttext">Hy,<br />
<br />
thank you it compiles successfully. And the custom page starts too. But the e.g. LAN.cfg does't connect with the userconfig.cfg. Is it possible that file join doesn't works with *.cfg ?<br />
<br />
What could I do that it works?<br />
<br />
Thank you<br />
<br />
Marc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">24th July 2005, 16:36</div></div><div class="posttext">Hy,<br />
<br />
thank you it compiles successfully. And the custom page starts too. But the e.g. LAN.cfg does't connect with the userconfig.cfg. Is it possible that file join doesn't works with *.cfg ?<br />
<br />
What could I do that it works?<br />
<br />
Thank you<br />
<br />
Marc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th July 2005, 19:55</div></div><div class="posttext">Just a guess but it could be because of this:<br />
${FileJoin} &quot;$INSTDIR\cstrike\userconfig.cfg&quot; &quot;$INSTDIR\Infos\Cable.cfg&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
<br />
The function will probably be reading from userconfig.cfg and trying to write to userconfig.cfg at the same time which will not work.<br />
Make the last parameter &quot;$INSTDIR\cstrike\userconfig.cfg.x&quot; and then do:<br />
Delete &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
Rename &quot;$INSTDIR\cstrike\userconfig.cfg.x&quot; &quot;$INSTDIR\cstrike\userconfig.cfg&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">25th July 2005, 08:02</div></div><div class="posttext">Hy i've tried to make it with copy files:<br />
<br />
<br />
; Netsettings Page<br />
Function NetsettingsPage<br />
!insertmacro SectionFlagIsSet ${Section3} ${SF_SELECTED} ShowPage SkipPage<br />
ShowPage:<br />
<br />
   !insertmacro MUI_HEADER_TEXT &quot;Konfiguration des Erweiterungs System&quot; &quot;Wählen Sie, mit welcher Verbindung sie spielen.&quot;<br />
   !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;netsettings.ini&quot;<br />
<br />
SkipPage:<br />
<br />
FunctionEnd<br />
<br />
; Page Leave Netsettings<br />
Function PageLeaveNetsettings<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;LAN&quot; 0 notLAN<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\LAN\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\LAN\netsettings.cfg $INSTDIR\cstrike_german<br />
notLAN:<br />
<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;56K Modem&quot; 0 not56K_Modem<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\56K_Modem\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\56K_Modem\netsettings.cfg $INSTDIR\cstrike_german<br />
not56K_Modem:<br />
<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;ISDN&quot; 0 notISDN<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\ISDN\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\ISDN\netsettings.cfg $INSTDIR\cstrike_german<br />
notISDN:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;D-ISDN&quot; 0 notD-ISDN<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\D-ISDN\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\D-ISDN\netsettings.cfg $INSTDIR\cstrike_german<br />
notD-ISDN:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;S-DSL&quot; 0 notS-DSL<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\S-DSL\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\S-DSL\netsettings.cfg $INSTDIR\cstrike_german<br />
notS-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;A-DSL&quot; 0 notA-DSL<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\A-DSL\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\A-DSL\netsettings.cfg $INSTDIR\cstrike_german<br />
notA-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;Cable&quot; 0 notCable<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\Cable\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\Cable\netsettings.cfg $INSTDIR\cstrike_german<br />
notCable:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;Q-DSL&quot; 0 notQ-DSL<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\Q-DSL\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\Q-DSL\netsettings.cfg $INSTDIR\cstrike_german<br />
notQ-DSL:<br />
<br />
ReadINIStr $R0 &quot;$PLUGINSDIR\ioFile.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
StrCmp $R0 &quot;DSL mit FP&quot; 0 notDSL_mit_FP<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\DSL_mit_FP\netsettings.cfg $INSTDIR\cstrike<br />
CopyFiles /silent $INSTDIR\Infos\Netsettings\DSL_mit_FP\netsettings.cfg $INSTDIR\cstrike_german<br />
notDSL_mit_FP:<br />
<br />
FunctionEnd<br />
<br />
<br />
But it doesn't work. It doesn't copy the netsettings.cfg.<br />
<br />
Do anybody know why it doesn't work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">25th July 2005, 11:37</div></div><div class="posttext">You need to create directories first for the CopyFiles target directories (example: &quot;$INSTDIR\cstrike&quot;). Use CreateDirectory instruction to create those directories. Or maybe the files indicated to copy don't exist. Please explain the situation more, like, put a MessageBox instruction on the start of the page leave function and verify which files or directories exist or not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">25th July 2005, 13:05</div></div><div class="posttext">Hy all the directories exists.<br />
<br />
And all Files, too.<br />
<br />
But I don't know why it isn't works<br />
<br />
I've made an short installer.<br />
<br />
Could anybody show why it doesn't works ?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">27th July 2005, 19:51</div></div><div class="posttext">Haven't you an idea?<br />
<br />
Please help me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">27th July 2005, 21:36</div></div><div class="posttext">Try this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">28th July 2005, 11:24</div></div><div class="posttext">Hy thank you it works (-: (-:<br />
<br />
Is it possible, that the user can only click on next when he has choose an option?<br />
<br />
In the netsettings.ini the State is :<br />
<br />
State=<br />
<br />
So there is an white field and when this white field is active the user shouldn't not click on next.<br />
<br />
How can I do this ?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">28th July 2005, 16:23</div></div><div class="posttext">In the custom page leave function, call Abort if the state is blank. Maybe also show a message box with the error to the user.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">29th July 2005, 07:53</div></div><div class="posttext">Hy isn't it possible only to make the next botton transparent and when the user has choose an option he can click on next?<br />
<br />
Like in the Install page. There the user can't click on abort.<br />
<br />
Can you give me an example ? <br />
<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">30th July 2005, 10:04</div></div><div class="posttext">PLS HELP ME</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">30th July 2005, 13:12</div></div><div class="posttext">Search the forum- this question has been asked before.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sp33dy Gonzale$</div><div class="date">31st July 2005, 09:25</div></div><div class="posttext">Hy I've search but I can't find it.<br />
<br />
My english isn't very good so it is difficult to understand.<br />
<br />
Pls help me.<br />
<br />
Can you write the code in the drop list.nsi which iceman_k has writes?<br />
<br />
Pls it would be very friendly when you help me.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>