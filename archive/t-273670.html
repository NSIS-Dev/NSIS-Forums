<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialogs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialogs NSIS Discussion" />
	
	<title> nsDialogs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialogs</div>
<hr />
<div class="pda"><a href="t-273670.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273670">nsDialogs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th June 2007, 17:18</div></div><div class="posttext">It's time for something really new. I wrote a plug-in that should replace InstallOptions in the near future. It should be faster, more capable, far more customizable and easier to use. Currently it can create any type of control, call callback functions directory from the script and create dialogs without all the INI files overhead.<br />
<br />
It supports specifying units in pixels, dialog units and percentage - both positive and negative. It has a callback for TEXT field changes and for the back button. It's way faster. It has complete control over the style of the generated controls, including extended styles.<br />
<br />
When it's done, it'll be even possible to create a real-time InstallOptions to nsDialogs converter that'd simply read the INI file and create the dialog according to it.<br />
<br />
At the moment, creating a control requires quite a lot of parameters, but in the future it'll have a library of macros or functions that'd allow easier creation that requires nothing more than a type and location - just like with InstallOptions.<br />
<br />
Play with it and let me know if you have any suggestions or issues in mind. Attach cool examples here or useful macros you write and I'll probably include them when nsDialogs goes into CVS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th June 2007, 17:28</div></div><div class="posttext">That's very nice. Can ExecuteCodeSegment be used in any NSIS plugin?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th June 2007, 17:30</div></div><div class="posttext">Yes, any plug-in. It has been added in NSIS 2.03 and as far as I know, this is the first plug-in to use it.<br />
<br />
edit: actually, there's already my incomplete nsXML (http://forums.winamp.com/showthread.php?postid=1621339).<br />
edit2: the UAC plug-in (http://nsis.sourceforge.net/UAC_plug-in) too...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th June 2007, 18:23</div></div><div class="posttext">I cannot believe that went unnoticed lol<br />
I can use that in my ButtonEvent plugin :D<br />
<br />
Edit: Done.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">30th June 2007, 22:41</div></div><div class="posttext">Excellent work, sounds like a major improvement in terms of custom installer dialogs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">1st July 2007, 17:57</div></div><div class="posttext">looks nice :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st July 2007, 18:22</div></div><div class="posttext">And here's the first version of the script that converts existing INI files to a new dialog. Shouldn't be too hard to have it generate the script itself as well.<br />
<br />
The plug-in itself has changed a bit and now takes the text parameter as the last parameter to nsDialogs::CreateItem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th July 2007, 12:46</div></div><div class="posttext">And with browse buttons too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">10th July 2007, 19:55</div></div><div class="posttext">This is really great for for creating on the fly interfaces, but will it be able to setup event handlers for controls defined in the INI?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th July 2007, 21:16</div></div><div class="posttext">The NOTIFY flag will eventually be supported by the IO2nsDialogs function. But you can already do the same when using nsDialogs directly with nsDialogs::OnClick and nsDialogs::OnChange which is not even supported by InstallOptions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">12th July 2007, 08:22</div></div><div class="posttext">Is it possible to set nsDialogs::OnClick for controls created from an IO script? that would be the ultimate solution for getting the best of both formats.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th July 2007, 17:21</div></div><div class="posttext">Yes. All the conversion does is read the INI file and use nsDialogs according to it. You can read the HWND from the INI and use nsDialogs::OnClick with it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th July 2007, 22:25</div></div><div class="posttext">just wanted to say: very cool.  I'll be awaiting the usual first few days of &quot;zomg - it just imploded!&quot; before tinkering with it myself, after which our highly customized installer will probably be moving to nsDialogs from InstallOptions.  Should save a bunch of code and - more importantly - run faster (takes a second on some of the heavier dialogs on my P1.6M).  Might keep the INIs, as currently there's no GUI interface designer for nsDialogs, is there? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th July 2007, 22:27</div></div><div class="posttext">That would be handy :D<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th July 2007, 21:55</div></div><div class="posttext">I want to transfer some scripts where in custom page leave function there are several ReadINIStr conditions and actions' dependency.<br />
<br />
How should I do that?<br />
Are there any suggestions and/or tips?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">16th July 2007, 13:30</div></div><div class="posttext">Well... I guess I should start from scratch, thanks :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th July 2007, 13:53</div></div><div class="posttext">your question is a bit vague, so I'm not sure what the answer would be.  The way I'm reading it right now is that you're using the INI file as a form of variable storage - and depending on the multiple values in the INI file (in the variables), you take a particular action.<br />
<br />
Sounds to me like you could...<br />
A. Stick to using an INI file - except that for each control's callback you'll need to write out the value manually.<br />
B. For each control's callback, write to a different text file. (Essentially the same as the ini - but more work)<br />
C. For each control's callback, assign the value to a runtime variable - and instead of reading from an ini / text file, read the runtime variable.<br />
<br />
In essence, nsDialogs makes creating the dialogs more flexible, faster (code execution-wise) and independent of ini file storage.  Those are the immediate Pros.  The immediate cons are that a lot of the automation is gone.  I.e. changing a text box's text doesn't automatically store this - you'll have to store this yourself (in a variable of file), through a function that you have to write out, and then associate with the text box's change handler.  So on the face of it - it's certainly a good bit more work.  I suspect that as you get used to it, though, it'll prove to be a great enhancement.<br />
<br />
Eventually some GUI editor for use with nsDialogs will come up and in each control's property sheet there'll just be a &quot;code block to execute when changed&quot; sort of text box, along with a small &quot;code block name&quot;, which together simply set up all the Function handling and such for you.<br />
<br />
Of course, if it remains something where you think &quot;InstallOptions did just fine for me, and I'm more comfortable with it&quot; - well, InstallOptions doesn't appear to be going away, and the InstallOptionsEx author(s) might have a thing or two to say about the Pros/Cons and decide to continue development there as well :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th July 2007, 22:54</div></div><div class="posttext">Just a suggestion, would be nice to have NSD_ macros for OnClick etc, and have GetFunctionAddress in them.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">18th July 2007, 03:30</div></div><div class="posttext">/ot: would be nice to handle pluginsdir in memory - not on disk :p<br />
<br />
still working on a &quot;installer script language&quot;? :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2007, 06:04</div></div><div class="posttext">Brummelchen, you can't load DLL files from memory. How is this related to a new scripting language?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th July 2007, 15:59</div></div><div class="posttext">If you don't want to use $PLUGINSDIR, extract the DLL yourself and use CallInstDLL instead. For example, the NSISArray plugin has built in support for this while still using the macros.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">18th July 2007, 17:37</div></div><div class="posttext">as long i write installers i dont care on pluginsdir.<br />
as i started with portables like portableapps.com i wish <br />
to have that in memory - but ok, this is really /ot now.<br />
<br />
i appreciate a newer gui with modern commands - but i dont <br />
really get the point on mouse-effects or similar jokes<br />
on an &quot;installer script&quot;<br />
<br />
but - if nsis goes away from a simple installer script -<br />
and it does - why not to ask for that option above!? ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2007, 17:41</div></div><div class="posttext">Brummelchen, implement a memory-DLL loader and I'll include it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">18th July 2007, 17:48</div></div><div class="posttext">&quot;i'm afraid dave - i cant do this&quot; :D<br />
i am no programmer - i can do only scripts :(<br />
but if that would be possible - much appreciated :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2007, 17:50</div></div><div class="posttext">Brummelchen, you can't load DLL files from memory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tdue</div><div class="date">19th July 2007, 08:32</div></div><div class="posttext">Hello, <br />
<br />
Is there an automated method of converting a IO ini file to a nsDialogs script? I THOUGHT the io.nsi file in the zip file posted earlier would do it, but that does not seem to be the case. <br />
<br />
In any event I have been playing around with NSIS (and HM NIS Edit) for the last couple of days. My installer experience is limited to InstallShield 10.5 and the build-in MSI installer in Visual Studio. I must say I am vastly impressed with NSIS. <br />
<br />
I am seriously lacking integration with Source Safe and Visual Studio though, but I guess I can manage without... for now ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 16:55</div></div><div class="posttext">io.nsi only displays INI files using nsDialogs. In the future, it should also be able to create a script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">20th July 2007, 16:59</div></div><div class="posttext">Well done!<br />
<br />
I'd give my left toe in exchange for something that's better. Manually converting the controls seems to be the first step along the way. I've encountered a problem:<br />
<br />
SetCtlColors $TEXT 0x000000 transparent<br />
<br />
The nsDialogs Welcome.nsi example uses:<br />
<br />
&quot;&quot; 0xffffff<br />
<br />
Is &quot;transparent&quot; not supported?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 17:09</div></div><div class="posttext">&quot;transparent&quot; is a feature of NSIS and not nsDialogs, so it's supported just like in InstallOptions. nsDialogs simply forwards relevant messages to NSIS for handling the colors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">20th July 2007, 17:21</div></div><div class="posttext">Oddly enough,<br />
<br />
SetCtlColors $TEXT 0x000000 transparent<br />
<br />
does not make the background transparent.<br />
<br />
SetCtlColors $TEXT 0x000000 0x0000ff<br />
<br />
changes the background to blue. ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbguy</div><div class="date">20th July 2007, 17:47</div></div><div class="posttext">Originally posted by bnicer <br />
Oddly enough,<br />
<br />
SetCtlColors $TEXT 0x000000 transparent<br />
<br />
does not make the background transparent.<br />
<br />
SetCtlColors $TEXT 0x000000 0x0000ff<br />
<br />
changes the background to blue. ???  <br />
<br />
0x0000ff is blue.<br />
<br />
This is how you set controls to transparent:<br />
<br />
SetCtlColors $TEXT 0x000000 &quot;transparent&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 17:51</div></div><div class="posttext">Add the WS_EX_TRANSPARENT extended style to the CreateItem call and it should work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">20th July 2007, 18:04</div></div><div class="posttext">I always get white.<br />
<br />
Compile Welcome.nsi with a transparent text background.Function nsDialogsWelcome<br />
<br />
	nsDialogs::Create /NOUNLOAD 1044<br />
	Pop $DIALOG<br />
<br />
	nsDialogs::CreateItem /NOUNLOAD STATIC <br />
<br />
${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS} 0 120u 10u -130u 20u &quot;Welcome to nsDialogs!&quot;<br />
	Pop $HEADLINE<br />
<br />
	SendMessage $HEADLINE ${WM_SETFONT} $HEADLINE_FONT 0<br />
<br />
	nsDialogs::CreateItem /NOUNLOAD STATIC <br />
<br />
${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS} 0 120u 32u -130u -32u &quot;nsDialogs is the next generation...&quot;<br />
	Pop $TEXT<br />
<br />
	SetCtlColors $DIALOG &quot;&quot; 0xffffff<br />
	SetCtlColors $HEADLINE &quot;&quot; 0xffffff<br />
	SetCtlColors $TEXT 0xffffff &quot;transparent&quot;<br />
<br />
	nsDialogs::CreateItem /NOUNLOAD STATIC <br />
<br />
${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS}|${SS_BITMAP} 0 0 0 109u 193u &quot;&quot;<br />
	Pop $IMAGECTL<br />
<br />
	StrCpy $0 $PLUGINSDIR\welcome.bmp<br />
	System::Call 'user32::LoadImage(i 0, t r0, i ${IMAGE_BITMAP}, i 497, i 0, i ${LR_LOADFROMFILE}) i.s'<br />
	Pop $IMAGE<br />
	<br />
	SendMessage $IMAGECTL ${STM_SETIMAGE} ${IMAGE_BITMAP} $IMAGE<br />
<br />
	Call HideControls<br />
<br />
	nsDialogs::Show<br />
<br />
	Call ShowControls<br />
<br />
	System::Call gdi32::\DeleteObject(i$IMAGE)<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 18:13</div></div><div class="posttext">That example doesn't use WS_EX_TRANSPARENT, you need to add it. Replace the 0 that comes after the styles with ${WS_EX_TRANSPARENT}. Don't forget to copy its definition from nsDialogs.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">20th July 2007, 18:18</div></div><div class="posttext">WS_EX_TRANSPARENT extended style; how do I define it?<br />
<br />
I have, so far...nsDialogs::CreateItem /NOUNLOAD STATIC ${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS}|$(WS_EX_TRANSPARENT) 0 120u 32u -130u -32u &quot;nsDialogs is the next generation...&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2007, 18:19</div></div><div class="posttext">Take the definition from nsDialogs.nsh and replce the zero before 120u with it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">20th July 2007, 18:21</div></div><div class="posttext">Thanks. Our replies keep on crossing. I'll try that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoBoT</div><div class="date">21st July 2007, 21:29</div></div><div class="posttext">does the BrandingImage stuff work with this yet?<br />
I copy/pasted the commands below into InstallOptions.nsi pointing to my .ini file<br />
<br />
ChangeUI all &quot;${NSISDIR}\Contrib\UIs\modern.exe&quot;<br />
AddBrandingImage top 20<br />
SetBrandingImage &quot;$PLUGINSDIR\logo.bmp&quot;<br />
<br />
from a working InstallOptions version and it displays correctly except the logo is missing from the top of the page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoBoT</div><div class="date">21st July 2007, 22:13</div></div><div class="posttext">also, is the functionality in place yet to change the cancel/next button labels? for example my old .ini files has:<br />
<br />
[Settings]<br />
NumFields=2<br />
Title=Control Panel<br />
CancelEnabled=1<br />
CancelShow=1<br />
BackEnabled=1<br />
CancelButtonText=Exit<br />
NextButtonText=Enter<br />
<br />
so that the cancel/next buttons display custom text<br />
<br />
thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">22nd July 2007, 01:17</div></div><div class="posttext">You can always do that manually, FoBoT.  In fact, it's more flexible with nsDialogs as you can enable/disable / change texts on those buttons dynamically based on what the user is doing - with any dialog item rather than only those that would cause an InstallOptions exit.<br />
<br />
<br />
GetDlgItem $0 $HWNDPARENT 1 ; Next button<br />
SendMessage $0 ${WM_SETTEXT} 0 &quot;STR:Custom Next&quot;<br />
GetDlgItem $0 $HWNDPARENT 3 ; Next button<br />
SendMessage $0 ${WM_SETTEXT} 0 &quot;STR:Custom Back&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd July 2007, 11:36</div></div><div class="posttext">!macro __NSD_Event NAME HWND FUNC<br />
<br />
	Push $R0<br />
		GetFunctionAddress $R0 ${FUNC}<br />
		nsDialogs::${NAME} /NOUNLOAD ${HWND} $R0<br />
	Pop $R0<br />
<br />
!macroend<br />
<br />
!macro __NSD_DefineEvent NAME<br />
<br />
	!define NSD_${NAME} &quot;!insertmacro __NSD_Event ${NAME}&quot;<br />
<br />
!macroend<br />
<br />
!insertmacro __NSD_DefineEvent OnBack<br />
!insertmacro __NSD_DefineEvent OnClick<br />
!insertmacro __NSD_DefineEvent OnChange<br />
<br />
<br />
${NSD_OnClick}  $HWND MyOnClickFunction<br />
${NSD_OnBack}   $HWND MyOnBackFunction<br />
${NSD_OnChange} $HWND MyOnChangeFunction<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd July 2007, 18:20</div></div><div class="posttext">Originally posted by FoBoT <br />
does the BrandingImage stuff work with this yet?<br />
I copy/pasted the commands below into InstallOptions.nsi pointing to my .ini file<br />
<br />
ChangeUI all &quot;${NSISDIR}\Contrib\UIs\modern.exe&quot;<br />
AddBrandingImage top 20<br />
SetBrandingImage &quot;$PLUGINSDIR\logo.bmp&quot;<br />
<br />
from a working InstallOptions version and it displays correctly except the logo is missing from the top of the page AddBrandingImage is unrelated to nsDialogs. It adds an image control to the external dialog and not the internal dialogs, such as those created by nsDialogs. logo.bmp was probably not extracted to $PLUGINSDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">28th July 2007, 13:06</div></div><div class="posttext">Function OnClick<br />
  MessageBox MB_OK &quot;Setup will now abort.&quot;<br />
  Quit<br />
FunctionEndI have a problem with Quit here. Sorry  to be disruptive again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th July 2007, 13:37</div></div><div class="posttext">What's exactly the problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">28th July 2007, 14:35</div></div><div class="posttext">I think you can't create a custom button that closes the installer. The Back, Next and Close buttons are hidden. That's the plan.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2007, 15:26</div></div><div class="posttext">What happens? Does the installer not quit?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">28th July 2007, 15:38</div></div><div class="posttext">Yes, it doesn't quit. nsDialogs is so full of shortcuts, I was kind of hoping that would be another one.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th July 2007, 16:54</div></div><div class="posttext">That's not currently possible as the code handling g_quit_flag is in the installer itself, separate from nsDialogs which doesn't have access to this flag. That wasn't a problem until the direct function callbacks were added. I need to think how it'd be best to handle this. Please submit a feature request.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st July 2007, 12:34</div></div><div class="posttext">I'm guessing calling Abort won't work but how about sending WM_NOTIFY_OUTER_NEXT with a value of 120 (cancel)?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">31st July 2007, 19:21</div></div><div class="posttext">I don't know how well that'd work, considering it might start unloading while still handling another callback. It needs testing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">randomSurfer</div><div class="date">1st August 2007, 00:52</div></div><div class="posttext">I want to resize the NSIS installer window when I display a custom page. Can I specify new rectangle params for nsDialogs::Create? I looked into INI file's Settings\RECT that states &quot;RECT: Overrides the default rect ID to run over. This will make IO resize itself according to a different rect than NSIS's dialogs rect.&quot;<br />
What is this rect ID ?<br />
<br />
This is what I am trying to do :<br />
<br />
Page custom &quot;ShowBrowser&quot; &quot;LeaveBrowser&quot;<br />
<br />
function ShowBrowser<br />
nsDialogs::Create /NOUNLOAD 1044 ;how can I resize this window?<br />
 Pop $R1<br />
  SetPluginUnload  alwaysoff<br />
  SetOutPath &quot;$INSTDIR\temp&quot;<br />
 System::Call 'installer::ShowWebPage(i) v (R1)'<br />
 nsDialogs::Show <br />
 GetDlgItem $0 $HWNDPARENT 1<br />
 EnableWindow $0 1<br />
functionend<br />
<br />
Any help will be appreciated.<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bnicer</div><div class="date">1st August 2007, 06:20</div></div><div class="posttext">An nsDialogs Close button would be convenient. I hope it works. Thanks. :)<br />
<br />
randomSurfer, you can resize the controls and the installer window with Resource Hacker. For mui custom pages it's dialog 105, modern.exe. The changes will be visible in other pages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdpipe</div><div class="date">3rd August 2007, 12:21</div></div><div class="posttext">This plugin ins great but obviously in dire need of some documentation, however meagre. *PLEASE* try to write something? The examples don't even have commenting.<br />
<br />
My particular problem: how to retrieve the value from a checkbox after the user leaves the page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd August 2007, 12:26</div></div><div class="posttext">Send the BM_GETCHECK to the control.SendMessage $CHECKBOX ${BM_GETCHECK} 0 0 $0If $0 is 0, it's unchecked. If it's 1, it's checked. Anything else is an intermediate state.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdpipe</div><div class="date">3rd August 2007, 15:25</div></div><div class="posttext">Thanks for that. Can you also tell me: what are the parameters for the '${NSD_CreateCheckbox}' command?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdpipe</div><div class="date">3rd August 2007, 15:46</div></div><div class="posttext">More questions: Do I need to use 'BM_SETCHECK' to set a new checkbox to 'checked'? Or can I do that via NSD_CreateCheckbox?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd August 2007, 16:14</div></div><div class="posttext">NSD_CreateCheckbox, like every other NSD_Create* takes x, y, width, height and text. To set the state of a checkbox, use BM_SETCHECK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">3rd August 2007, 20:40</div></div><div class="posttext">Just wondering if you can re-create the style of the MS installers that show and hide a checkmark image if the CD-KEY entered is valid.<br />
<br />
I have the code setup now to show a message box if the key length is valid so I'd just have to change that code to show/hide an image on the page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">3rd August 2007, 21:35</div></div><div class="posttext">just get a handle to that checkmark and, in the callback function of the nsdialog item, use showwindow &lt;hwnd&gt; 0|1 to hide / unhide it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th August 2007, 16:46</div></div><div class="posttext">Not 0|1 but ${SW_SHOW} and ${SW_HIDE} (SW_SHOW being 5 not 1).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">4th August 2007, 19:04</div></div><div class="posttext">yeah, alright... ${SW_SHOW} and ${SW_HIDE}.  Don't forget to include WinMessages.nsh .<br />
<br />
( Note that as far as controls are concerned SW_SHOW or SW_SHOWNORMAL have the same effect.  The only time you get a difference if it's actually a window.  Why 'hide' is zero and 'show is -not- one, and why showwindow is what one uses on -controls- in the first place is beyond me. Microsoft, right? )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">7th August 2007, 13:42</div></div><div class="posttext">How does one get a Handle to a specific control on a custom page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th August 2007, 20:36</div></div><div class="posttext">It's returned from ${NSD_Create*} or nsDialogs::CreateItem on the stack.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ClayDowling</div><div class="date">7th August 2007, 23:28</div></div><div class="posttext">Originally posted by Animaether <br />
just get a handle to that checkmark and, in the callback function of the nsdialog item, use showwindow &lt;hwnd&gt; 0|1 to hide / unhide it?  <br />
<br />
That is an excellent idea.  In fact, I'm going to modify the registration component to use nsDialog and implement that feature.  Thanks for the idea.  Kichik, thanks for putting this extension out.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">13th August 2007, 14:35</div></div><div class="posttext">Getting used to the nsDialogs plugin.<br />
<br />
Another quick question.<br />
<br />
1) I want to show a page with some text.<br />
2) Show animated .gif<br />
3) Run function (function handles moving to the next page)<br />
<br />
Currently I can't figure out how to do this.<br />
<br />
#Start Connecting Page<br />
Function ConnectingPage<br />
<br />
         ;Create page<br />
         nsDialogs::Create /NOUNLOAD 1018<br />
	 Pop $0<br />
<br />
         ;(*Update)<br />
         !insertmacro MUI_HEADER_TEXT &quot;Connecting to the Activation Server&quot; &quot;Please wait while we activate $(^NameDA).&quot;<br />
<br />
         ${NSD_CreateLabel} 0 10 100% 50u &quot;Please wait while we activate $(^NameDA).&quot;<br />
         Pop $0<br />
         <br />
         nsDialogs::Show<br />
         <br />
         Call StartActivation<br />
<br />
FunctionEnd<br />
#End Connecting Page<br />
<br />
Using the above code: &quot;StartActivation&quot; is not run until after the NEXT, BACK or CANCEL buttons are clicked.<br />
<br />
If I move &quot;Call StartActivation&quot; before &quot;nsDialogs::Show&quot; then the function is run before the text is displayed.<br />
<br />
Any help would be much appreciated.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">13th August 2007, 15:25</div></div><div class="posttext">Got it.<br />
<br />
Just changed it so the user had to click next to progress.<br />
<br />
#Start Connecting Page<br />
Function ConnectingPage<br />
<br />
         ;Create page<br />
         nsDialogs::Create /NOUNLOAD 1018<br />
	 Pop $0<br />
<br />
         !insertmacro MUI_HEADER_TEXT &quot;Connect to the Activation Server&quot; &quot;Please continue to activate $(^NameDA).&quot;<br />
<br />
         ${NSD_CreateLabel} 0 10 100% 50u &quot;Please click next to activate $(^NameDA).$\n$\n\<br />
                                           Please be patient as activation may take up to 30 seconds.&quot;<br />
         Pop $0<br />
<br />
         nsDialogs::Show<br />
         <br />
FunctionEnd<br />
<br />
Function PostConnecting<br />
         <br />
         Call StartAnimation<br />
<br />
         Call StartActivation<br />
<br />
FunctionEnd<br />
#End Connecting Page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bradharding</div><div class="date">14th August 2007, 05:31</div></div><div class="posttext">Hi!<br />
<br />
Have been spending quite a bit of time rewriting my custom pages to using nsDialogs and must say its a much better way of doing things...<br />
<br />
One thing I am having problems with though is the link control.<br />
For example, I have this:<br />
<br />
<br />
${NSD_CreateLink} 29u 125u 96u 10u &quot;http://nsis.sourceforge.net/&quot;<br />
Pop $LINKCONTROL<br />
${NSD_OnClick} $LINKCONTROL OnLinkClick<br />
SetCtlColors $LINKCONTROL ${BLUE} ${WHITE}<br />
 <br />
<br />
The problem is setting the text colour of the link. For some reason, no text is displayed at all. (Clicking on the link's bounding rectangle works, the OnLinkClick function is called fine.) Any ideas?<br />
<br />
Regards,<br />
Brad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th August 2007, 12:03</div></div><div class="posttext">Links are not yet supported.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">14th August 2007, 15:05</div></div><div class="posttext">I got the links to work by just putting a link and label in the same area and changing the label text to blue and underlined.<br />
<br />
It is a very major pain if the link is in the middle of a sentence but oh well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">14th August 2007, 17:07</div></div><div class="posttext">How does one set the focus to a control on a nsDialogs page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">14th August 2007, 18:04</div></div><div class="posttext">Check out the win32 API SetFocus()</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lushdog</div><div class="date">14th August 2007, 20:47</div></div><div class="posttext">Yeah I got it to work nicely.<br />
<br />
How about password character masking? :)<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sab0tage</div><div class="date">16th August 2007, 00:21</div></div><div class="posttext">I am having trouble getting FileRequest working, I've tried to modify the function as it won't be read from an ini file, but I'm not having much luck.<br />
<br />
Does anyone have an example of it working?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">16th August 2007, 19:42</div></div><div class="posttext">Can someone throw together a quick example?  I'm not sure how you guys figured this thing out, unless it was just by reading the .nsh and trial and error.<br />
<br />
Just something like:<br />
<br />
Custom &quot;enter a message&quot; page with a text box, a check box, a button.<br />
Button pops up a message box saying &quot;You pushed the button&quot;.<br />
One section that just does a DetailPrint &quot;Contents of text box: &quot; and whatever you typed into the box, and &quot;The check box [was | was not] checked.&quot; with whether it was checked or not.<br />
<br />
Thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th August 2007, 20:08</div></div><div class="posttext">sab0tage, add an OnClick handler to your browse button and call SelectFileDialog to get the user's selection. Then put the result in the text box.System::Call user32::GetWindowText(i$TEXT_HWND,t.r0,i${NSIS_MAX_STRLEN})<br />
<br />
nsDialogs::SelectFileDialog /NOUNLOAD save $0 &quot;All Files|*.*&quot;<br />
Pop $0<br />
<br />
${If} $0 != &quot;&quot;<br />
	SendMessage $TEXT_HWND ${WM_SETTEXT} 0 STR:$0<br />
${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th August 2007, 20:09</div></div><div class="posttext">jeffadams78, there are examples in Examples\nsDialogs. From there on, it's trial and error for now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">16th August 2007, 20:18</div></div><div class="posttext">Duh, nevermind... just found the examples installed under /NSIS/Examples/nsDialogs if you install the new version of NSIS.<br />
<br />
Originally posted by jeffadams78 <br />
Can someone throw together a quick example?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">16th August 2007, 20:20</div></div><div class="posttext">Heh, and it would appear I failed to refresh the page before posting.  Thanks anyway though!<br />
<br />
Originally posted by kichik <br />
jeffadams78, there are examples in Examples\nsDialogs. From there on, it's trial and error for now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sab0tage</div><div class="date">16th August 2007, 23:06</div></div><div class="posttext">Thanks kichik, I will give that a go.<br />
<br />
I've put together the following macros, I'm pretty new with trying to put these together but they work for me.<br />
<br />
<br />
!macro _NSD_ENABLE NAME TOGGLE<br />
       SendMessage ${NAME} ${WM_ENABLE} ${TOGGLE} 0 $R0<br />
       Push $R0<br />
!macroend<br />
!define NSD_ENABLE `!insertmacro _NSD_ENABLE`<br />
<br />
!macro _NSD_CHECKSTATE NAME<br />
       SendMessage ${NAME} ${BM_GETCHECK} 0 0 $R0<br />
       Push $R0<br />
!macroend<br />
!define NSD_CHECKSTATE `!insertmacro _NSD_CHECKSTATE`<br />
<br />
I'm not sure if I need to push $R0 in the macro or pop it after it's called, but it works...<br />
<br />
<br />
<br />
Function CheckboxEvent<br />
 ${NSD_CHECKSTATE} $CHECKBOX_ID<br />
 Pop $0<br />
 <br />
 ${NSD_ENABLE} $TEXTBOX_ID $0<br />
FunctionEnd<br />
<br />
<br />
${NSD_CHECKSTATE} checks the value of the checkbox and the returned value is used to disable a textbox with ${NSD_ENABLE}.<br />
<br />
It might be of some use to somebody.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">23rd August 2007, 18:08</div></div><div class="posttext">Hmm, so the FileRequest function really isn't for use in new totally nsDialog-driven stuff, just for working with ini files?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd August 2007, 19:00</div></div><div class="posttext">jeffadams78, it's for everything including completely nsDialogs-driven dialogs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">23rd August 2007, 19:08</div></div><div class="posttext">How is ${NSD_CreateFileRequest} different from ${NSD_CreateText}?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jeffadams78</div><div class="date">23rd August 2007, 19:11</div></div><div class="posttext">OK I thought I had it figured out, but I don't, so I'm going to put back the question I asked before but then erased...<br />
<br />
If I want to create a page with nsDialogs that looks like:<br />
<br />
Label1: [TextBoxForAFilePath1] [BrowseButton1...]<br />
Label2: [TextBoxForAFilePath2] [BrowseButton2...]<br />
<br />
What is the easiest way to do it?<br />
<br />
P.S. and is there a built-in macro that does what the &quot;welcome&quot; example does, where it tries to complete filenames/paths as you type them in?  Or would I have to cut-n-paste all the code from that example?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sab0tage</div><div class="date">24th August 2007, 22:22</div></div><div class="posttext">I've chopped one of my scripts to bits for this example!<br />
<br />
The file box is looking for a file named sdat1234.exe for instance (just create and rename a txt file to play).<br />
<br />
As you can see the code is a bit messy, if anyone can recommend a script formatter that will make it nicer to read I would love to know!<br />
<br />
Also if anyone can see where I improve on the code, I'd love to know that too, I'm quite new with NSIS.<br />
<br />
<br />
!include &quot;MUI.nsh&quot;<br />
!include nsDialogs.nsh<br />
!include LogicLib.nsh<br />
!include winmessages.nsh<br />
!insertmacro MUI_LANGUAGE English<br />
Name &quot;test&quot;<br />
OutFile &quot;guitest.exe&quot;<br />
<br />
XPStyle on<br />
<br />
Page custom SettingsPage<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
Var INST_SDAT<br />
Var INST_SDAT_LOC<br />
VAR TEXT_SDAT_LOC<br />
Var INST_SDAT_BTN<br />
VAR NEXT_BUTTON<br />
<br />
!macro _NSD_ENABLE NAME TOGGLE<br />
       SendMessage ${NAME} ${WM_ENABLE} ${TOGGLE} 0 $R0<br />
       Push $R0<br />
!macroend<br />
!define NSD_ENABLE `!insertmacro _NSD_ENABLE`<br />
<br />
!macro _NSD_CHECKSTATE NAME<br />
       SendMessage ${NAME} ${BM_GETCHECK} 0 0 $R0<br />
       Push $R0<br />
!macroend<br />
!define NSD_CHECKSTATE `!insertmacro _NSD_CHECKSTATE`<br />
<br />
Function SettingsPage<br />
<br />
GetDlgItem $NEXT_BUTTON $HWNDPARENT 1<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $0<br />
<br />
	${NSD_CreateCheckbox} 20 170 90 8u &quot;Install SDAT&quot;<br />
	Pop $INST_SDAT<br />
	GetFunctionAddress $0 OnSDAT<br />
	nsDialogs::OnClick /NOUNLOAD $INST_SDAT $0<br />
<br />
    ${NSD_CreateBrowseButton} 410 170 25 12u ...<br />
    Pop $INST_SDAT_BTN<br />
    nsDialogs::SetUserData /NOUNLOAD $INST_SDAT_BTN FileRequest # remember field id<br />
<br />
	GetFunctionAddress $0 SDATFileBrowseButton<br />
	nsDialogs::OnClick /NOUNLOAD $INST_SDAT_BTN $0<br />
<br />
<br />
	${NSD_CreateFileRequest} 110 170 300 12u &quot;&quot;<br />
	Pop $INST_SDAT_LOC<br />
       ${NSD_ENABLE} $INST_SDAT_LOC 0<br />
	GetFunctionAddress $0 ValidateNext<br />
	nsDialogs::OnChange /NOUNLOAD $INST_SDAT_LOC $0<br />
	<br />
	nsDialogs::Show<br />
FunctionEnd<br />
	<br />
	<br />
	Function SDATFileBrowseButton<br />
${NSD_CHECKSTATE} $INST_SDAT<br />
Pop $0<br />
${If} $0 == 1<br />
      System::Call user32::GetWindowText(i$INST_SDAT_LOC,t.r1,i${NSIS_MAX_STRLEN})<br />
      nsDialogs::SelectFileDialog /NOUNLOAD open $2 &quot;sdatXXXX.exe|sdat*.exe&quot;<br />
      Pop $2<br />
      ${If} $2 == $INST_SDAT_BTN<br />
           ${OrIf} $2 == &quot;&quot;<br />
           SendMessage $INST_SDAT_LOC ${WM_SETTEXT} 0 STR:$1<br />
            ${Else}<br />
	    SendMessage $INST_SDAT_LOC ${WM_SETTEXT} 0 STR:$2<br />
     ${EndIf}<br />
${EndIF}<br />
<br />
FunctionEnd<br />
<br />
Function ValidateNext<br />
      System::Call user32::GetWindowText(i$INST_SDAT_LOC,t.R0,i${NSIS_MAX_STRLEN})<br />
      StrCpy $TEXT_SDAT_LOC $R0<br />
GetDlgItem $NEXT_BUTTON $HWNDPARENT 1<br />
<br />
<br />
${NSD_CHECKSTATE} $INST_SDAT<br />
Pop $R1<br />
<br />
EnableWindow $NEXT_BUTTON 1<br />
<br />
${If} $R0 == 1<br />
        ${If} $R1 == 1<br />
        ${AndUnless} ${FileExists} $TEXT_SDAT_LOC<br />
          EnableWindow $NEXT_BUTTON 0<br />
        ${EndIf}<br />
${EndIf}<br />
FunctionEnd<br />
<br />
Function OnSDAT<br />
  ${NSD_CHECKSTATE} $INST_SDAT<br />
  Pop $0<br />
  ${NSD_ENABLE} $INST_SDAT_LOC $0<br />
  ${NSD_ENABLE} $INST_SDAT_BTN $0<br />
  Call ValidateNext<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th August 2007, 09:19</div></div><div class="posttext">jeffadams78, you must also create a browse button for a file request field. Use ${NSD_CreateBrowseButton}. Underneath it all, FileRequest is actually a Text field and BrowseButton is a actually Button field, so you can also use those if it makes it clearer.<br />
<br />
There's no built in macro for SHAutoComplete, you have to call it yourself.<br />
<br />
sab0tage, you shouldn't use WM_ENABLE. Use EnableWindow instead. The message is just a notification message and as you can see, doesn't really work for the button.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wraithdu</div><div class="date">29th August 2007, 04:09</div></div><div class="posttext">I'd like to trigger a callback function when my TextBox receives focus.  I've found it's the EN_SETFOCUS notification message, but I don't know how to make nsDialogs recognize it.  Is it supported yet?<br />
<br />
If not, is there another way to do it?  Basically I have a text box with some initial text in it, and I want the box to go blank the first time a user clicks into it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2007, 18:53</div></div><div class="posttext">That's not possible yet. Please submit a feature request.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wraithdu</div><div class="date">29th August 2007, 20:07</div></div><div class="posttext">Sure thing.  Where/how should I submit a feature request?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">31st August 2007, 09:22</div></div><div class="posttext">In the SourceForge tracker:<br />
<br />
http://sourceforge.net/tracker/?group_id=22049&amp;atid=373088</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">26th January 2008, 15:10</div></div><div class="posttext">couldn't find anything in the docs or this forum.. will there be a droplist substitute?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th January 2008, 15:12</div></div><div class="posttext">NSD_CreateDropList creates a droplist.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">26th January 2008, 15:19</div></div><div class="posttext">seems my nsis was outdated<br />
<br />
Invalid command: ${NSD_CreateDropList}<br />
<br />
however - it's not mentioned how to add values to a droplist val1|val2|val3 did nothing</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">27th January 2008, 11:42</div></div><div class="posttext">Droplist doesn't swing that way. Use SendMessage to send CB_ADDSTRING message to the droplist control.<br />
<br />
SendMessage $CONTROL ${CB_ADDSTRING} 0 &quot;STR:val1&quot;<br />
SendMessage $CONTROL ${CB_ADDSTRING} 0 &quot;STR:val2&quot;<br />
SendMessage $CONTROL ${CB_ADDSTRING} 0 &quot;STR:val3&quot;<br />
<br />
And to get the value from droplist I use this.<br />
<br />
SendMessage $CONTROL ${CB_GETCURSEL} 0 0 $0<br />
System::Call 'User32::SendMessage(i $CONTROL, i ${CB_GETLBTEXT}, i r0, t .s)'<br />
Pop $VALUE<br />
<br />
Even though simple ${NSD_GetText} seems to work too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2008, 12:09</div></div><div class="posttext">thanks trueparuex!<br />
<br />
will it stay this way or are there more macros in the working? if not, let me point out that &quot;Each of those macros takes 5 parameters&quot; from the docs does not apply to DropList then (to whoever updates the docs)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2008, 14:08</div></div><div class="posttext">once a nsDialogs page is displayed, is it possible to control the state of an element (hide, disable/gray out, enable again, show again) in the OnChange function? any hints how this is done?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ekramulhuq</div><div class="date">1st February 2008, 05:56</div></div><div class="posttext">Hi,<br />
How can I add item into List box? How can add event with this list box? I am doing the following but no item inside list box is appearing:<br />
 <br />
${NSD_CreateListBox} 30u 90u -30u 38u $R4<br />
    Pop $R4<br />
    SendMessage $R4 ${CB_ADDSTRING} 0 &quot;STR:val1&quot;<br />
    SendMessage $R4 ${CB_ADDSTRING} 0 &quot;STR:val2&quot;<br />
    SendMessage $R4 ${CB_ADDSTRING} 0 &quot;STR:val3&quot;<br />
<br />
Could you please give me an example for list box using nsDialog?<br />
<br />
Thanks in advance.<br />
Ekhuq</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">1st February 2008, 20:28</div></div><div class="posttext">@Yathosho<br />
Yes. The notification (OnClick, OnChange and OnNotify) callback functions are exactly for that kind of operations. I made a small example that uses the OnChange callback. It's little light on the comments, but it should give the basic idea.<br />
<br />
The example uses EnableWindow to enable / disable conrols, but you can use ShowWindow, SendMessage and system plugin just as well. :) <br />
<br />
@ekramulhuq<br />
CB_* messages are only for ComboBox controls. For ListBox you need to use LB_* messages E.g. LB_ADDSTRING.<br />
<br />
See the example. It uses ListBox to do things... :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">3rd February 2008, 14:02</div></div><div class="posttext">thanks again</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">3rd February 2008, 22:04</div></div><div class="posttext">one remaining question, how to manipulate the state of a checkbox? my attempts using SendMessage with ${BM_SETSTATE} weren't successful..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th February 2008, 01:50</div></div><div class="posttext">SendMessage $CheckBox ${BM_SETCHECK} ${BST_CHECKED} 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">15th April 2008, 15:27</div></div><div class="posttext">I have some difficulties to migrate from Installoptions to nsDialog. On the first page I've seen an example how to make transparent controls, but is it possible to do it in a easier way? I need a bitmap control which would make the white background color of the loaded image in it transparent. Is there a color which is handled as transparent by default?<br />
<br />
Should ${NSD_AddExStyle} $Image1 ${WS_EX_TRANSPARENT} work?<br />
<br />
<br />
Function DriverSelection<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
    <br />
  nsDialogs::Create /NOUNLOAD 1018<br />
  Pop $DriverDialog<br />
<br />
  ${If} $DriverDialog == error<br />
    Abort<br />
  ${EndIf}<br />
<br />
  ${NSD_CreateGroupBox} 0 0 100% 100% &quot;$(TEXT_IO_TITLE)&quot;<br />
  Pop $0<br />
<br />
  ${NSD_CreateLabel} 14 21 100% 16u &quot;$(TEXT_LABEL_TITLE)&quot;<br />
  Pop $0<br />
    <br />
  ${NSD_CreateRadioButton} 108 55 100% 16u &quot;$(TEXT_YES_TITLE)&quot;    <br />
  ${NSD_CreateRadioButton} 108 109 100% 16u &quot;$(TEXT_NONE_TITLE)&quot;<br />
    <br />
  ${NSD_CreateBitmap} 14 41 29u 39u &quot;&quot;<br />
  Pop $Image1<br />
  ${NSD_SetImage} $Image1 $PLUGINSDIR\1.bmp $ImageHandle1<br />
  ${NSD_AddExStyle} $Image1 ${WS_EX_TRANSPARENT}<br />
    <br />
  ${NSD_CreateBitmap} 51 41 29u 39u &quot;&quot;<br />
  Pop $Image2<br />
  ${NSD_SetImage} $Image2 $PLUGINSDIR\2.bmp $ImageHandle2<br />
  ${NSD_AddExStyle} $Image2 ${WS_EX_TRANSPARENT}<br />
   <br />
  ${NSD_CreateBitmap} 33 103 27u 23u &quot;&quot;<br />
  Pop $Image3<br />
  ${NSD_SetImage} $Image3 $PLUGINSDIR\3.bmp $ImageHandle3<br />
  ${NSD_AddExStyle} $Image3 ${WS_EX_TRANSPARENT}<br />
    <br />
  nsDialogs::Show<br />
    <br />
  ${NSD_FreeImage} $ImageHandle1<br />
  ${NSD_FreeImage} $ImageHandle2<br />
  ${NSD_FreeImage} $ImageHandle3  <br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th April 2008, 19:03</div></div><div class="posttext">You can add two flags to the LoadImage call that'd make it load the image with the first pixel's color being &quot;transparent&quot;. By transparent, I actually mean gray as the window behind it. The flags are ${LR_LOADTRANSPARENT}|${LR_LOADMAP3DCOLORS}. You can drop the second one to make &quot;transparent&quot; white instead of gray.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th April 2008, 21:32</div></div><div class="posttext">Originally posted by kichik <br />
You can add two flags to the LoadImage call that'd make it load the image with the first pixel's color being &quot;transparent&quot;. By transparent, I actually mean gray as the window behind it. The flags are ${LR_LOADTRANSPARENT}|${LR_LOADMAP3DCOLORS}. You can drop the second one to make &quot;transparent&quot; white instead of gray.  <br />
<br />
white and gray are the colors in classic windows theme, but the actual color used is from GetSysColor(COLOR_WINDOW or COLOR_3DFACE)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">16th April 2008, 08:55</div></div><div class="posttext">I've tried this, but it's still white...<br />
<br />
Something else to consider?<br />
<br />
<br />
${NSD_CreateBitmap} 36 58 53 80 &quot;&quot;<br />
Pop $Image1<br />
System::Call `user32::LoadImage(i 0, t &quot;$PLUGINSDIR\1.bmp&quot;, i 0, i 0, i 0, i ${LR_LOADTRANSPARENT}|${LR_LOADFROMFILE}) i.s`<br />
Pop $ImageHandle1<br />
SendMessage $Image1 ${STM_SETIMAGE} 0 $ImageHandle1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">16th April 2008, 14:00</div></div><div class="posttext">thanks it works now. My bitmaps had more than 8bpp so it couldn't work... But I remember that 24 bit bitmaps worked with InstallOptions...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th June 2008, 18:15</div></div><div class="posttext">The ${NSD_On*} event macros in the nsDialogs documentation are still defined as ${NSD_On*} control_HWND function_address. Should be ideally ${NSD_On*} control_HWND function_name.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobbeSweden</div><div class="date">17th June 2008, 17:37</div></div><div class="posttext">I cut down sab0tage's code to what I need: !include &quot;MUI.nsh&quot;<br />
!include nsDialogs.nsh<br />
!include LogicLib.nsh<br />
!include winmessages.nsh<br />
<br />
Var INST_SDAT_LOC<br />
Var INST_SDAT_BTN<br />
<br />
Name &quot;test&quot;<br />
OutFile &quot;nsDialogFileBrowse.exe&quot;<br />
<br />
Page custom SettingsPage<br />
<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Function SettingsPage<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $0<br />
<br />
	${NSD_CreateBrowseButton} 410 170 25 12u &quot;...&quot;<br />
	Pop $INST_SDAT_BTN<br />
	nsDialogs::SetUserData /NOUNLOAD $INST_SDAT_BTN FileRequest # remember field id<br />
<br />
	GetFunctionAddress $0 SDATFileBrowseButton<br />
	nsDialogs::OnClick /NOUNLOAD $INST_SDAT_BTN $0<br />
<br />
	${NSD_CreateFileRequest} 110 170 300 12u &quot;&quot;<br />
	Pop $INST_SDAT_LOC<br />
	<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function SDATFileBrowseButton<br />
	nsDialogs::SelectFileDialog /NOUNLOAD open $2 &quot;sdatXXXX.exe|sdat*.exe&quot;<br />
	Pop $2<br />
	${If} $2 != &quot;&quot;<br />
		SendMessage $INST_SDAT_LOC ${WM_SETTEXT} 0 STR:$2<br />
	${EndIf}<br />
FunctionEnd<br />
<br />
Section<br />
SectionEndIt works as expected, but, how do I set the inital directory for the SelectFileDialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobbeSweden</div><div class="date">19th June 2008, 20:47</div></div><div class="posttext">I have figured out that the way to do it is to change the value of $2 before calling SelectFileDialog.<br />
<br />
I tried the following (the Program Files directory is just called Program on my system):<br />
StrCpy $2 &quot;C:\Program&quot; ; The dialog will begin in C:\ looking for a file called Program<br />
StrCpy $2 &quot;C:\Program\&quot; ; The dialog will begin in the current working directory<br />
StrCpy $2 &quot;C:\Program\*&quot; ; The dialog will begin in C:\Program looking for a file called *<br />
<br />
How do I make it start in C:\Program but without looking for any particular filename?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elllit</div><div class="date">24th June 2008, 14:20</div></div><div class="posttext">Hi,<br />
<br />
I'm trying to disable a ListBox with:<br />
<br />
<br />
EnableWindow $ListBox 0<br />
<br />
<br />
But this apparently does not work (i.e. it does not get grayed out as opposed to a simple &quot;Text&quot; or &quot;CheckBox&quot;).<br />
<br />
I searched my code for &quot;Layer 8&quot; faults but couldn't find any what of course doesn't mean that there is none ;)<br />
<br />
If it's not supported by nsDialogs: Do I have to make a system call?<br />
<br />
Till</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th June 2008, 16:10</div></div><div class="posttext">wrong window handle? try to hide it with ShowWindow to make sure</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elllit</div><div class="date">25th June 2008, 06:19</div></div><div class="posttext">Hi,<br />
Originally posted by Anders <br />
wrong window handle? try to hide it with ShowWindow to make sure <br />
ShowWindow works as expected. Same handle, same line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elllit</div><div class="date">25th June 2008, 09:12</div></div><div class="posttext">Using &quot;Enable Window&quot; only grays out the text inside the ListBox.<br />
<br />
I can live with that but it still doesn't look right to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">25th June 2008, 17:41</div></div><div class="posttext">any plans to add tooltip support?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">25th June 2008, 21:36</div></div><div class="posttext">Originally posted by elllit <br />
Using &quot;Enable Window&quot; only grays out the text inside the ListBox.<br />
<br />
I can live with that but it still doesn't look right to me.  <br />
<br />
EnableWindow just calls the win api, what the disabled windows looks like depends on your theme, has nothing to do with nsis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">elllit</div><div class="date">26th June 2008, 06:43</div></div><div class="posttext">Anders: True! Thanks :)<br />
<br />
Yathosho: Theres a plug-in, but I haven't tested it yet. see: http://nsis.sourceforge.net/ToolTips_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">26th June 2008, 07:02</div></div><div class="posttext">http://nsis.sourceforge.net/ToolTips_plug-in and works! ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">17th July 2008, 19:05</div></div><div class="posttext">in a prior script i used these lines of code to change the  caption of a custom page (mui)<br />
!insertmacro MUI_HEADER_TEXT &quot;$(LabelCaption)&quot; &quot;$(LabelDescription)&quot;<br />
GetDlgItem $0 $HWNDPARENT 3<br />
ShowWindow $0 0<br />
however, since i added a dialog using nsdialogs, this code is getting ignored. it's placed in the show function to the components page. any help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th July 2008, 22:17</div></div><div class="posttext">You should be using the MUI_PAGE_HEADER_TEXT and MUI_PAGE_HEADER_SUBTEXT defines for non custom pages.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">19th July 2008, 22:17</div></div><div class="posttext">Can you add TreeView and RishText controls support in nsDialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobbeSweden</div><div class="date">20th July 2008, 15:08</div></div><div class="posttext">There is a patch already submitted to add support for RichText controls, but for some reason it hasn't been added yet. I don't know why it wasn't included in the last release of nsis... Patch URL: http://sourceforge.net/tracker/index.php?func=detail&amp;aid=2004129&amp;group_id=22049&amp;atid=373087</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th July 2008, 18:59</div></div><div class="posttext">Because I haven't had time to apply any patches. Once I got some free time, I made the release to get back on schedule.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobbeSweden</div><div class="date">20th July 2008, 19:11</div></div><div class="posttext">Ok, thanks for the explanation :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">2nd August 2008, 22:32</div></div><div class="posttext">Can you tell me is it possible to create link using nsdialogs?<br />
Don't know why my code doeasnt work...<br />
<br />
<br />
VAR Link<br />
<br />
${NSD_CreateLink} 0 0 250 14 &quot;http://www.winamp.com&quot;<br />
Pop $LINK<br />
${NSD_OnClick} $LINK MyLink <br />
SetCtlColors $LINK &quot;0XFF0000&quot; &quot;${MUI_BGCOLOR}&quot;<br />
<br />
Function MyLink<br />
  ExecShell &quot;open&quot; &quot;http://www.winamp.com&quot;<br />
FunctionEnd<br />
 <br />
<br />
When i click the link nothing happens :(<br />
Regards,<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">3rd August 2008, 17:45</div></div><div class="posttext">AFAIK shell commands only work with an actual file.<br />
<br />
What I've done before is create a URL shortcut in TEMP and then use the ExecShell open command on the shortcut instead of the URL.<br />
<br />
Internet shortcuts are basically just INI files, so you can use WriteIniStr to create them like this:<br />
WriteIniStr &quot;$TEMP\ShortcutFile.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;http://www.winamp.com&quot;<br />
 (You could also use $PLUGINSDIR instead of $TEMP.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">3rd August 2008, 18:59</div></div><div class="posttext">Originally posted by Comperio <br />
AFAIK shell commands only work with an actual file.<br />
<br />
What I've done before is create a URL shortcut in TEMP and then use the ExecShell open command on the shortcut instead of the URL.<br />
<br />
Internet shortcuts are basically just INI files, so you can use WriteIniStr to create them like this:<br />
WriteIniStr &quot;$TEMP\ShortcutFile.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;http://www.winamp.com&quot;<br />
 (You could also use $PLUGINSDIR instead of $TEMP.)  <br />
<br />
I am not sure I understand you well, but the main reason to use nsDialogs was eliminate writing to ini files. So, I don't want to use any ini files, I just want to run default browser by clicking the link on page created by nsdialogs...<br />
Regards,<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">3rd August 2008, 19:07</div></div><div class="posttext">It worked for me, without any troubles.  This is the code I use, which looks to be exactly the same as yours...<br />
<br />
<br />
		${NSD_CreateLInk} 364 33 80 16 &quot;Privacy Policy&quot;<br />
		Pop $DIGI.Registration.Link<br />
		${NSD_OnClick} $DIGI.Registration.Link onClickPrivacyLink<br />
<br />
<br />
	Function onClickPrivacyLink<br />
		Pop $0<br />
		ExecShell &quot;open&quot; &quot;http://www.digi.com/privacy.jsp&quot;<br />
	FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">3rd August 2008, 19:31</div></div><div class="posttext">hmm... weird.<br />
I'm was certain in a prior project, I was not able to make that work...   :(<br />
<br />
FWIW:  I did find this article (http://support.microsoft.com/kb/224816) from Microsoft that explains how ShellExecute is supposed to work for launching URLs, and indeed, it seems it should have worked as PepeSoft first posted.<br />
<br />
Sorry about the misleading post. :o <br />
When I get back to my work computer, I'll have to experiment with this more.  Maybe there is something else at work here...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">4th August 2008, 16:17</div></div><div class="posttext">I can't make it fail this time.  Sheik's code works correctly no matter what I do.  Very strange.  I probably wasn't totally awake the first time.  (Or an update to NSIS fixed something.)  Either way, it's working now.  (I'm using NSIS 2.37 in case you're wondering.)  And again, sorry for the confusion.  :o</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">4th August 2008, 17:21</div></div><div class="posttext">Originally posted by Comperio <br />
I can't make it fail this time.  Sheik's code works correctly no matter what I do.<br />
<br />
Thanks for help. Everything works ok for me now.<br />
<br />
@Sheik<br />
Thanks, your example works very good. <br />
<br />
Ps: My example works very well too, but I had one label expanded on all page, so I couldn't click on link, because link was under this label :p <br />
Now, I have to wait for implementing &quot;Hand&quot; cursor over the lnk and color change on hower.<br />
Regards,<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Nicholi</div><div class="date">4th August 2008, 22:51</div></div><div class="posttext">Are multistate checkboxes now available with nsDialogs? Or rather something as simple as a checkbox with three states: unchecked, checked, and greyed?<br />
<br />
I know for the Sections at least this is possible, but for custom dialog pages with nsDialogs I don't see anything pre-setup like the other nsDialog macros yet. I did note a few definitions for things like BS_3STATE and BS_AUTO3STATE, if those may have anything to do with it. However I'm not too well aware of the basics of the Styles and ExStyles sent to nsDialogs::CreateControl. Is there anything from msdn/etc I could read to figure out what to do to get this done? Or would it just be a monumental feat of work to make a 3-state checkbox?<br />
<br />
Also I think this has been asked many times in NSIS past before, sorry if the answer is already there somewhere. Whether you call them 3-state or multi-state or intermediate states...not sure of the proper term.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">5th August 2008, 13:45</div></div><div class="posttext">Originally posted by PepeSoft <br />
Thanks for help. Everything works ok for me now.<br />
<br />
@Sheik<br />
Thanks, your example works very good. <br />
<br />
Ps: My example works very well too, but I had one label expanded on all page, so I couldn't click on link, because link was under this label :p <br />
Now, I have to wait for implementing &quot;Hand&quot; cursor over the lnk and color change on hower.<br />
Regards,<br />
-Pawel  <br />
<br />
Good deal!  I am glad it worked for you.<br />
Its funny about not being able to click on the link because it was under a label... I also had that problem, so I have this comment before the code I posted:<br />
<br />
		/* We need to create our Link before the Privacy Text, as we need to be &quot;on top&quot; */</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">10th September 2008, 23:45</div></div><div class="posttext">anyone figure out the code to make a transparent label so i can overlay it on a bmp ive tried the things mentioned earlier in this thread to no avail   --thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">14th September 2008, 23:32</div></div><div class="posttext">For future referance if anyone needs to make a transparent label in Nsdialogs this example works ..<br />
<br />
<br />
;--create some some label <br />
<br />
   ${NSD_CreateLabel} 10 27 300 16 &quot;Updates Complete.&quot; <br />
    Pop $HeaderLabelNoUpdates<br />
<br />
    CreateFont $1 &quot;$(^Font)&quot; &quot;10&quot; &quot;700&quot; <br />
    SendMessage $HeaderLabelNoUpdates ${WM_SETFONT} $1 0<br />
    SetCtlColors $HeaderLabelNoUpdates FFFFFF &quot;transparent&quot; <br />
    ShowWindow $HeaderLabelNoUpdates ${SW_HIDE}<br />
    ShowWindow $HeaderLabelNoUpdates ${SW_SHOW}<br />
<br />
;--End of create some label</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TobbeSweden</div><div class="date">15th September 2008, 08:12</div></div><div class="posttext">ZmAn3: Thanks for sharing</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">7th October 2008, 03:25</div></div><div class="posttext">is there a way to set a controls extended style instead of the windows extended style for a control like if i send 0x00000020 which is LVS_EX_FULLROWSELECT it sets the windows style for the control instead so it sets WS_EX_TRANSPARENT  thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th October 2008, 08:26</div></div><div class="posttext">you need to send a message to the listview to apply that style, check msdn</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">22nd October 2008, 23:30</div></div><div class="posttext">anyone know if and how i can create a child window in nsdialogs winspy shows the it as #32770 with ws_child ws_visible ws_vscroll ws_tabstop ds_setfont ds_3dlook and ds_control thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">23rd October 2008, 00:31</div></div><div class="posttext">#32770 is the standard windows dialog class, so you would use CreateDialog or DialogBox with the system plugin...but, there is no way to actually implement the message proc needed so there would be no way to handle messages</div></div><hr />


<div class="post"><div class="posttop"><div class="username">roy204</div><div class="date">1st December 2008, 12:58</div></div><div class="posttext">Hi folks,<br />
<br />
I am trying to create a link control that is right aligned and so far I haven't been able to. Is this possible?<br />
<br />
I've tried this:<br />
<br />
<br />
${NSD_CreateLink} 0 176 100% 12u &quot;Some Link&quot;<br />
Pop $MyLabel                 <br />
${NSD_AddStyle} $MyLabel ${SS_RIGHT}<br />
${NSD_AddExStyle} $MyLabel ${WS_EX_RIGHT} <br />
 <br />
<br />
But to no avail. I understand that if the link is an ownerdrawn custom control (not a static) then it should not accept SS_RIGHT, but even WS_EX_RIGHT does nothing.<br />
<br />
Am I out of luck ?<br />
Thanks!<br />
Damien.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st December 2008, 22:44</div></div><div class="posttext">The relevant code (http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Contrib/nsDialogs/nsDialogs.c?view=markup&amp;pathrev=5700#l_152) only cares for the RTL setting of nsDialog itself and not for the applied control styles.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">roy204</div><div class="date">2nd December 2008, 16:30</div></div><div class="posttext">Sorry to be a pain but I don't think I fully understand the answer (sorry not a native english speaker here).<br />
<br />
Is there a way to make a link control have it's text right aligned ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd December 2008, 22:27</div></div><div class="posttext">No, there's not currently a way to do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">roy204</div><div class="date">5th December 2008, 12:22</div></div><div class="posttext">Thank you for the answer :) I'll find a way around it.<br />
Cheers,<br />
D.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">10th February 2009, 23:04</div></div><div class="posttext">alright, well underway to getting everything over to nsDialogs - doing a complete rewrite as I go as there's just too much that was relying on InstallOptions(Ex).<br />
<br />
Here's two quick questions...<br />
1. when might an 'error' occur when creating a dialog?<br />
The examples all trap for the 'error' response out of 'nsDialogs::Create' and then call Abort (page gets skipped) - but I'm not seeing anything in the documentation as to what might cause an 'error' response to begin with.<br />
<br />
2. I had a peek about and I think there was a thread where it was suggest to file a feature request for an onMouseover callback - has one been logged?  If not, where might I log one?<br />
( this would be nice to combine with the SetCursor plugin so that I can make it visually obvious when, for example, a bitmap control is clickable; might use the ToolTips plugin as an alternative of sorts? )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th February 2009, 01:24</div></div><div class="posttext">Currently, the only &quot;error&quot; would be failure to create the dialog which should never happen.<br />
<br />
onMouseOver: https://sourceforge.net/tracker2/index.php?func=detail&amp;aid=2129316&amp;group_id=22049&amp;atid=373088</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">11th February 2009, 01:30</div></div><div class="posttext">excellent - thanks, kichik; I'll keep the error check in and make a note to do some minor error log handling there :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">silo5</div><div class="date">17th March 2009, 11:26</div></div><div class="posttext">I want to create a custom page with a scrollable status message box, similar to the status (details) control in the standard installation page. Is this something that nsDialogs could do, or am I going against a wall? If nsdialogs could do it, would someone sketch it out for me, please? If it couldn't, would someone give me some alternative ideas based on other plugins?<br />
I have looked at the nsis source code to see how the installation page does its thing, I see it's based on a listview control, but the code is way over my head...<br />
<br />
The crucial point is that I should append text to  the control synchronously, in a way to the text looks like a growing log and the user can scroll back.<br />
---<br />
If nsdialogs could handle controls on the installation page I would use the standard details control, but I read that nsdialogs controls don't work on standard pages, although that was one of the initial design considerations.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">17th March 2009, 12:45</div></div><div class="posttext">whats wrong with a listbox? You need some code to set the width of the longest line (But it has already been done, I posted the code on the forum a while back) I also does not have the tooltip like the instfiles page has. It would also be possible to use a listview if thats what you really want, but it will require a bit of system plugin use to handle the LV_ITEM struct</div></div><hr />


<div class="post"><div class="posttop"><div class="username">silo5</div><div class="date">17th March 2009, 19:03</div></div><div class="posttext">Originally posted by Anders <br />
whats wrong with a listbox? ... set the width of the longest line ... does not have the tooltip Thanks. So I tried the Listbox and it seems good enough. What I'm missing is some way to export the text (like copy to clipboard in instfiles) and horizontal scrolling, which I don't think is possible, and that's maybe why instfiles does have the tooltip. I don't know the maximum length of a line in advance, why did you hint at setting the maximum line width?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">17th March 2009, 19:35</div></div><div class="posttext">you can get the scrollbar, http://forums.winamp.com/showthread.php?s=&amp;threadid=300489<br />
<br />
You could probably pull off the tooltip using my subclass plugin, but if you want a tooltip that bad, you are better off going with a listview and not the simpler listbox<br />
<br />
When it comes to export, just having a button that does it is the easy way (I'm sure the wiki or forum has existing clipboard code sample) If you really really want ctrl+c or a context menu, you would have to subclass (My subclass plugin is very much in the alpha stage and you need to know win32 programming to use it)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">silo5</div><div class="date">17th March 2009, 20:33</div></div><div class="posttext">Thanks Anders, that thread is illuminating!<br />
I need to find out how to Vscroll programmatically. I googled and found a hint about setting the top index with a message, but I haven't fleshed it out yet. Now I'm off to do the Hscroll bar. As regards exporting, I think I will do a simple button.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">silo5</div><div class="date">15th April 2009, 08:22</div></div><div class="posttext">My installer has a single custom page built with nsDialogs.<br />
Sometimes it doesn't repaint custom page areas that were temporarily covered by another window. What techniques are available to work around this kind of repainting issues?<br />
<br />
Specifically, when my installer shows a MessageBox over the custom page title area, when I OK the MessageBox parts of the title area may not be repainted. It also happens with the progress bar control which is placed right below the title area.<br />
<br />
Andi it may also happen when I replace the MessageBox with a directory or file browse dialog, after OKing the dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">16th April 2009, 05:43</div></div><div class="posttext">Hi everybody. I'm new on this forums, but I've been using NSIS for 2 years already. NsDialogs plugin is some awesome thing in the System. So I haven't found any suggestions about my additions so I post 'em here:<br />
(Addressing 2 kichik)<br />
 Why don't you add ListView and TreeView support as in InstallOptionsEx?<br />
<br />
Thanks, Static_VoiD</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th April 2009, 08:15</div></div><div class="posttext">Static - just a matter of time/interest/etc.  You can always contribute a solution to the Wiki..<br />
http://nsis.sourceforge.net/Category:NsDialogs_Examples<br />
..or submit a patch to the repository :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">16th April 2009, 14:07</div></div><div class="posttext">Yeah, i'm aware of the Plugin's NSDialogs examples section, but I wish I had a native support for the controls mentioned. Just add the ability to create them - i'll take care of the rest ;) .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th April 2009, 14:19</div></div><div class="posttext">The difference between 'native' and another header is a single additional &quot;!include &lt;file&gt;&quot; line ; no more, no less.<br />
<br />
Creating them is relatively simple, in fact.  Adding e.g. treeview items, getting them, etc. are far more involved (requiring the System plugin).  So if you can take care of that, surely a !include can't hurt? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">16th April 2009, 15:15</div></div><div class="posttext">If you mean I can take sources, modify them and compile - that's Great! But you see, i don't have VC compiler :( , and i'm dial-up user :-P . So I want you, Animaether, or anybody else to add the necessary lines and compile the plugin. Can anyone here handle it? I'll appreciate that a lot.<br />
<br />
- Edit - <br />
Oh, I see plugin can create what I want (AFAIK, early versions didn't support this trick) ! So the thing is how to manage it? If the NSdialogs.nsh lacks of it, them I'm gonna make it possible :) ! Thanks for replies.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">16th April 2009, 18:31</div></div><div class="posttext">Yay for the edit ;)<br />
<br />
Not sure how long it's supported this, but it's been there for some time.  Have a peek at, for example:<br />
http://nsis.sourceforge.net/NsDialogs_CreateTextMultiline<br />
<br />
That's a pretty basic extension of nsDialogs that uses the very same code conventions that all the other nsDialogs controls use in terms of naming, styles, etc.  Makes it easier for users/developers to integrate it with their nsDialogs.nsh (although it can be kept separate from it.. it will still depend on nsDialogs.nsh, of course).<br />
<br />
In your case, you'd just need to define SysListView32 as the class name and then ponder what styles you might need.  You may need to define several classes if some of the styles you're interested in cannot be set after the control has been created; hence why CreateTextMultiline exists - you can't set the multiline style on an Edit control after it has been created.<br />
<br />
But, like I said, that's the easy part :)  Good luck!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">16th April 2009, 22:18</div></div><div class="posttext">Yep, I know about that too :) . Another &quot;weird&quot; thing comes to mind: it would be easier to make a plugin which will handle all the operations with getting and setting text into the controls instead of writing .nsh ...Err...I'll give it (.nsh writing) a try anyway ;) .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">17th April 2009, 05:31</div></div><div class="posttext">Originally posted by Nicholi <br />
Are multistate checkboxes now available with nsDialogs? Or rather something as simple as a checkbox with three states: unchecked, checked, and greyed?<br />
<br />
Looks like that's one of those styles that you have to set upon creation (can't use NSD_AddStyle / SetWindowLong trickery; which should get abstracted to an NSD_SetStyle, but anyway), so you would have to use something like:<br />
<br />
<br />
nsDialogs::CreateControl &quot;Button&quot; ${DEFAULT_STYLES}|${WS_TABSTOP}|${BS_TEXT}|${BS_MULTILINE}|${BS_VCENTER}|${BS_AUTO3STATE} 0 0 0 100% 8% &quot;Checkbox&quot;<br />
<br />
<br />
Most of that is copied from the existing checkbox code in nsDialogs.nsh, except that BS_AUTOCHECKBOX  was replaced with BS_AUTO3STATE.<br />
<br />
Actually, perusing MSDN some more, it looks like you can set the button style on-the-fly using the BM_SETSTYLE message;<br />
<br />
	${NSD_CreateCheckbox} 0 0 100% 8% &quot;Checkbox&quot;<br />
	    Pop $0<br />
	    StrCpy $1 0<br />
	    IntOp $1 $1 | ${DEFAULT_STYLES}<br />
	    IntOp $1 $1 | ${BS_TEXT}<br />
	    IntOp $1 $1 | ${BS_MULTILINE}<br />
	    IntOp $1 $1 | ${BS_VCENTER}<br />
	    IntOp $1 $1 | ${BS_AUTO3STATE}<br />
	    SendMessage $0 ${BM_SETSTYLE} $1 1<br />
<br />
<br />
Pretty sure you don't need most of those styles (most are implied, others don't apply to a checkbox-style 'button') and you can just use:<br />
SendMessage $0 ${BM_SETSTYLE} ${BS_AUTO3STATE} 1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th May 2009, 22:38</div></div><div class="posttext">I suppose negative positions are not supported? ( control doesn't appear to get created at all).<br />
<br />
I've got a label that I need to actually have higher up than 0%; the reason for this is that the font used is pretty tall, but the character I need is low - to align it properly, I have to move the very top of that label to a negative Y position (won't hurt as all the label space above that character is blank).<br />
<br />
I'll work around it with GetWindowRect and SetWindowPos (naming consistency? pft) probably as I just need to nudge this thing up, but if I'm not missing something, then this might be a good wishlist item:<br />
- allow negative X and Y positions<br />
- allow negative width/height (calculating from the canvas's width/height and subtracting the value from that, so that e.g. moving a control to the left doesn't require you to adjust the width to end up at the same alignment on the right)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">14th May 2009, 23:40</div></div><div class="posttext">it already supports negative size AFAIK. Not sure why negative x/y does not work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">7th June 2009, 15:09</div></div><div class="posttext">Hi 2 all once again. I decided to somehow modify nsDialogs original code situated over here (http://nsis.sourcearchive.com/documentation/2.44-4/nsDialogs_8c-source.html). I've downloaded it, modified as i wanted and successfully compiled in MS VCExpress 2009 (125 Kb...isn't it too big?).<br />
<br />
But here comes the problem: the heap doesn't allocate at all. Here it comes<br />
<br />
  g_dialog.controls = (struct nsControl*) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, sizeof(struct nsControl));<br />
<br />
And this <br />
HeapSize(GetProcessHeap(), 0, g_dialog.controls);returns me zero :( . It continues even after HeapReAlloc!<br />
<br />
Thus it fails with &quot;access violation&quot; error (0xC0000005) over here @ CreateControl (nsDialogs::CreateControl)<br />
 <br />
...<br />
  if (!lstrcmpi(className, &quot;BUTTON&quot;))<br />
    g_dialog.controls[id].type = NSCTL_BUTTON; //over here<br />
  else if (!lstrcmpi(className, &quot;EDIT&quot;))<br />
    g_dialog.controls[id].type = NSCTL_EDIT;<br />
... //and so on<br />
 <br />
<br />
So can somebody say what's wrong?<br />
<br />
P.S.: I needed to add the ability to create &quot;custom parented&quot; controls, so that not only &quot;g_dialog.hwDialog&quot; could be the parent window when creating a control with CreateWindowEx function. <br />
And if anybody can recompile the DLL for me I'll appreciate that greatly =) (I added one more &quot;popint&quot; to the code to get the necessary parent control).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kryder</div><div class="date">11th June 2009, 07:04</div></div><div class="posttext">Hello! I need help with a ListBox...<br />
<br />
Is it possible to make funds nsDialogs, like that drawn in the image and is described below?<br />
<br />
I make updater\installer...<br />
<br />
To select updates. I use a listlist, but how to configure it, I do not know ..<br />
<br />
I need like EmbeddedLists - ListView_MultiColumnCheckBoxes..<br />
<br />
http://img140.imageshack.us/img140/2690/42788556.jpg<br />
<br />
I need such features as:<br />
   - Columns with sorting<br />
   - Checks with disabling<br />
   - When you click on the component will show information about it.<br />
   - It would be the icons for the components, but it is not necessary.<br />
<br />
Sorry for my bad English!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Static_VoiD</div><div class="date">11th June 2009, 22:29</div></div><div class="posttext">Kryder,<br />
It's better to write a separate plugin especially for you :) . But, it seems I got some workarounds for this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kryder</div><div class="date">15th June 2009, 05:18</div></div><div class="posttext">How do I do that on a white background, displayed correctly Label and Icon?<br />
<br />
image:<br />
http://img522.imageshack.us/img522/5267/95518249.th.jpg (http://img522.imageshack.us/i/95518249.jpg/)<br />
there is my code: <br />
<br />
Function patcher<br />
<br />
	nsDialogs::Create 1018<br />
	Pop $0<br />
	<br />
	GetFunctionAddress $0 OnBack<br />
	nsDialogs::OnBack $0<br />
<br />
	${NSD_CreateButton} 300 58 75 23 &quot;$(Browse)&quot;<br />
	Pop $BROWSE_BTN<br />
	GetFunctionAddress $0 Browse<br />
	nsDialogs::OnClick $BROWSE_BTN $0<br />
	<br />
	${NSD_CreateCheckBox} 10 83 87 17 &quot;Store path&quot;<br />
	<br />
	${NSD_CreateText} 9 59 285 20 &quot;C:\Program Files\Rockstar Games\GTA San Andreas&quot;<br />
	Pop $PATH<br />
	GetFunctionAddress $0 OnChange<br />
	nsDialogs::OnChange $PATH $0<br />
<br />
	${NSD_CreateLabel} 102 86 270 17 &quot;Status: you select non-SA path, pleese select real path&quot;<br />
	Pop $STATUS<br />
  ${NSD_AddStyle} $STATUS ${SS_RIGHT}<br />
<br />
  ${NSD_CreateIcon} 5 3 32 32 icon<br />
	Pop $ICON<br />
	${NSD_SetIconFromInstaller} $ICON $R1<br />
<br />
  ${NSD_CreateLabel} 0 0 384 39 &quot;&quot;<br />
	Pop $R0<br />
  ${NSD_AddStyle} $R0 ${WS_VISIBLE}|${SS_WHITERECT}|${WS_CHILD}|${WS_CLIPSIBLINGS}<br />
<br />
	${NSD_CreateLabel} 43 10 336 32 &quot;${PRODUCT_NAME}&quot;<br />
	Pop $TITLE<br />
	${NSD_AddStyle} $TITLE ${SS_CENTER}<br />
	CreateFont $1 &quot;Lucida Console&quot; &quot;15&quot;<br />
  SendMessage $TITLE ${WM_SETFONT} $1 1<br />
	<br />
	${NSD_CreateGroupBox} 3 46 378 60 &quot;SA Path&quot;<br />
	<br />
	${NSD_CreateGroupBox} 3 106 378 228 &quot;Information&quot;<br />
	<br />
	CreateFont $FONT_BOLD &quot;$(^Font)&quot; &quot;8&quot; &quot;800&quot;<br />
	<br />
	${NSD_CreateLabel} 12 122 360 16 &quot;:&quot;<br />
	Pop $R0<br />
  SendMessage $R0 ${WM_SETFONT} $FONT_BOLD 1<br />
	<br />
	${NSD_CreateText} 9 140 366 65 &quot;$(ReadMe)&quot;<br />
	Pop $README<br />
	<br />
	${NSD_CreateLabel} 12 208 360 16 &quot;  :&quot;<br />
	Pop $R0<br />
  SendMessage $R0 ${WM_SETFONT} $FONT_BOLD 1<br />
	<br />
	${NSD_CreateText} 9 227 366 65 &quot;$(ReadMe)&quot;<br />
	Pop $README<br />
	<br />
	${NSD_CreateLabel} 12 299 168 33 &quot;Patch by:$\nAuto-installer by:&quot;<br />
	Pop $R0<br />
	${NSD_AddStyle} $R0 ${SS_RIGHT}<br />
	<br />
	${NSD_CreateLabel} 183 299 190 33 &quot;Deaglos (ICQ:76411326)$\nKryder (ICQ:9911684&quot;<br />
	Pop $R0<br />
  SendMessage $R0 ${WM_SETFONT} $FONT_BOLD 1<br />
	<br />
  ${NSD_CreateHLine} 5 340 377 1 ButtonsLine<br />
	${NSD_CreateHLine} 5 39 377 1 LabelLine<br />
<br />
	${NSD_CreateButton} 3 347 75 23 $(Close)<br />
	Pop $CLOSE_BTN<br />
	GetFunctionAddress $0 CloseNSIS<br />
	nsDialogs::OnClick $CLOSE_BTN $0<br />
	<br />
	${NSD_CreateButton} 306 347 75 23 Action<br />
	Pop $ACTION_BTN<br />
<br />
<br />
  Call GetSAPath<br />
<br />
	nsDialogs::Show<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st January 2010, 12:15</div></div><div class="posttext">Originally posted by bnicer <br />
Function OnClick<br />
  MessageBox MB_OK &quot;Setup will now abort.&quot;<br />
  Quit<br />
FunctionEndI have a problem with Quit here. Sorry  to be disruptive again.  <br />
Originally posted by kichik <br />
That's not currently possible as the code handling g_quit_flag is in the installer itself, separate from nsDialogs which doesn't have access to this flag. That wasn't a problem until the direct function callbacks were added. I need to think how it'd be best to handle this. Please submit a feature request.  <br />
I guess this one managed to disappear out of sight, after two years the issue is still open. I'd like to quit the installer after the users clicks a button. Is there a workaround I can use? Is there any chance this issue could be resolved in nsDialogs?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">chatterjb</div><div class="date">2nd January 2010, 16:52</div></div><div class="posttext">I didn't get any responses to this when posting on the main board. Maybe better luck here:<br />
<br />
I've got a simple callback function when a button is clicked to remove the selected item from a listbox. It works correctly only if the topmost item is selected. Otherwise, it seems like the item directly above the actual selection gets removed from the LB. Here's the callback:<br />
<br />
<br />
Function Callback_RemoveSite <br />
LogEx::Write &quot; RemoveSite button clicked. Inside callback function.&quot; <br />
${NSD_LB_GetSelection} $Listbox_SiteNameID $0 ${NSD_LB_DelString} $Listbox_SiteNameID $0 <br />
FunctionEnd<br />
<br />
<br />
<br />
And here is the snippet of the dialog/page where it's potentially called:<br />
<br />
<br />
${NSD_CreateListBox} 0u 30u 150u 90u <br />
Pop $Listbox_SiteNameID <br />
${NSD_CreateButton} 172u 105u 58u 12u &quot;--&gt; Remove Site&quot; <br />
Pop $Button_RemoveSite <br />
${NSD_OnClick} $Button_RemoveSite Callback_RemoveSite<br />
<br />
<br />
I'm not a GUI expert, but am I missing somthing here? If needed, I can attach the entire script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">2nd January 2010, 20:33</div></div><div class="posttext">@chatterjb<br />
<br />
Seems like nsDialogs bug. NSD_LB_DelString macro send the  LB_DELETESTRING message with lParam set as the string of the item to delete, but according to MSDN lParam is not used by LB_DELETESTRING.<br />
<br />
Instead NSD_LB_DelString macro should send the LB_DELETESTRING message with wParam set as the index of the item to delete.<br />
<br />
Try using this code:Function Callback_RemoveSite<br />
LogEx::Write &quot; RemoveSite button clicked. Inside callback function.&quot;<br />
SendMessage $Listbox_SiteNameID ${LB_GETCURSEL} 0 0 $0<br />
SendMessage $Listbox_SiteNameID ${LB_DELETESTRING} $0 0<br />
FunctionEnd<br />
<br />
PaR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">chatterjb</div><div class="date">4th January 2010, 19:38</div></div><div class="posttext">Originally posted by {_trueparuex^} <br />
@chatterjb<br />
<br />
Seems like nsDialogs bug. NSD_LB_DelString macro send the  LB_DELETESTRING message with lParam set as the string of the item to delete, but according to MSDN lParam is not used by LB_DELETESTRING.<br />
<br />
Instead NSD_LB_DelString macro should send the LB_DELETESTRING message with wParam set as the index of the item to delete.<br />
<br />
Try using this code:Function Callback_RemoveSite<br />
LogEx::Write &quot; RemoveSite button clicked. Inside callback function.&quot;<br />
SendMessage $Listbox_SiteNameID ${LB_GETCURSEL} 0 0 $0<br />
SendMessage $Listbox_SiteNameID ${LB_DELETESTRING} $0 0<br />
FunctionEnd<br />
<br />
PaR  <br />
<br />
Yup, this did the trick. Thanks for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">7th April 2010, 20:22</div></div><div class="posttext">Just a minor bug report here as well (nsDialogs isn't listed in the bug tracker, unless I missed it)...<br />
<br />
When using ${NSD_SetImage}, the image filename parameter cannot be stored in $R0 - this gets overwritten by nsDialogs and essentially just blanks the bitmap control you're trying to set an image to.<br />
<br />
Work-around is to not use $R0.<br />
<br />
Fix is to adjust nsDialogs.nsh:<br />
<br />
!macro __NSD_LoadAndSetImage _LIHINSTMODE _IMGTYPE _LIHINSTSRC _LIFLAGS CONTROL IMAGE HANDLE<br />
	Push $0<br />
	Push $R0<br />
	Push $R1 ; NEW<br />
	StrCpy $R1 ${IMAGE} # in case ${IMAGE} is $R0 ; NEW<br />
	StrCpy $R0 ${CONTROL} # in case ${CONTROL} is $0<br />
	...<br />
	System::Call 'user32::LoadImage(i ${_LIHINSTSRC}, ts, i ${_IMGTYPE}, i0, i0, i${_LIFLAGS}) i.r0' &quot;$R1&quot; ; MODIFIED<br />
	...<br />
	Pop $R1 ; NEW<br />
	Pop $R0<br />
	Exch $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">13th January 2011, 23:56</div></div><div class="posttext">has anyone been working on a treeview header for nsdialogs like the list view one<br />
http://nsis.sourceforge.net/Header_file_for_Listview<br />
?<br />
I can do all the treeview defines but I dont know the windows api to add items ect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">14th January 2011, 00:13</div></div><div class="posttext">has anyone been working on a treeview header for nsdialogs like the list view one<br />
http://nsis.sourceforge.net/Header_file_for_Listview<br />
?<br />
I can do all the treeview defines but I dont know the windows api to add items ect.<br />
<br />
The win32 treeview does not have the same kind of header support like listview has, while it is possible (A header can exist as its own HWND inside any kind of parent control), you would need to write your own custom plugin...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>