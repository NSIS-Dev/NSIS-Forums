<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Language selection dialog box issue on Vista, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Language selection dialog box issue on Vista NSIS Discussion" />
	
	<title> Language selection dialog box issue on Vista [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Language selection dialog box issue on Vista</div>
<hr />
<div class="pda"><a href="t-297487.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=297487">Language selection dialog box issue on Vista</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zanz</div><div class="date">16th September 2008, 22:37</div></div><div class="posttext">In the language selection dialog, I want to display user's OS language as a selected language by default. My installer includes 10 languages, so if you launch installation on French system, then 'French' would be selected in the language box when the installer is invoked. Same for English, Spanish and so on. <br />
<br />
I used the following code inside .oninit:<br />
<br />
System::Call kernel32::GetSystemDefaultLangID()i.a	<br />
<br />
Which would write the value of the OS's lang to $LANGUAGE var. This works fine on XP, but on Vista the lang selection dialog always defaults to 'German'. On XP, on French, German, and Chinese systems, I see the default language correctly but on Vista, itâ€™s always German, even on French/Chinese/English systems. The issue is reproducible on several vista machines. I do write the language value to registry, but before testing, I make sure to clean the registry.<br />
<br />
Any hints, ideas, or workarounds will be really appreciated. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2008, 06:16</div></div><div class="posttext">Is it because GetSystemDefaultLangID returns German or due to some other issue?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>