<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File problems.., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File problems.. NSIS Discussion" />
	
	<title> File problems.. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File problems..</div>
<hr />
<div class="pda"><a href="t-269710.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269710">File problems..</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joe131</div><div class="date">17th April 2007, 21:36</div></div><div class="posttext">Hi All,<br />
<br />
It was working for me before, but for some reason<br />
I'm getting &quot;bizarre&quot; results when I try to use<br />
&quot;File&quot; to zip-up my source directory.  I'm using the latest<br />
NSIS 2.25<br />
<br />
These aren't the &quot;real&quot; directory names, I'm just using<br />
them as an example. :-)<br />
<br />
C:<br />
    Blah<br />
        Foo<br />
            Bar<br />
<br />
I need to zip-up everything in C:\Blah, including the<br />
leading &quot;Blah&quot; directory, and all<br />
it's subdirectories Foo and Bar and all it's files.<br />
But there are other directories named &quot;Blah&quot;, backups, nested in backup folders in other directories.<br />
<br />
I was using:<br />
<br />
File /r &quot;${SOURCE_DIR}&quot;<br />
<br />
with &quot;SOURCE_DIR&quot; set to C:\Blah<br />
and it seemed to work for a long time, now it's pulling<br />
in everything from other directories it finds, and I even<br />
tried:<br />
<br />
File /r &quot;${SOURCE_DIR}\*.*&quot;<br />
<br />
It only pulls in what's in C:\Blah, but when the<br />
installer runs, the subdirectories, and some of the<br />
other data files, come out in a strange order.<br />
<br />
I know this is a really basic thing, so exactly what<br />
should I use to zip-up only C:\Blah, including that<br />
directory, and all it's subdirectories, but not any<br />
other Blah directories buried in other places?<br />
<br />
Thanks,<br />
<br />
Joe Siebenmann</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th April 2007, 21:48</div></div><div class="posttext">Use:SetOutPath $INSTDIR\Blah<br />
File /r ${SOURCE_DIR}\*.*And for the long explanation, see File's documentation (http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.5).If the /r switch is used, matching files and directories are recursively searched for in subdirectories. If just one path segment is specified (e.g. File /r something), the current directory will be recursively searched. If more than one segment is specified (e.g. File /r something\*.*), the last path segment will be used as the matching condition and the rest for the directory to search recursively. If a directory name matches, all of its contents is added recursively. Directory structure is preserved.Note: when using the /r switch, both matching directories and files will be searched. This is always done with or without the use of wildcards, even if the given path perfectly matches one directory. That means, the following directory structure:&lt;DIR&gt; something<br />
  file.dat<br />
  another.dat<br />
&lt;DIR&gt; dir<br />
  something<br />
  &lt;DIR&gt; dir2<br />
    file2.dat<br />
&lt;DIR&gt; another<br />
  &lt;DIR&gt; something<br />
    readme.txtwith the following File usage:File /r somethingwill match the directory named something on the root directory, the file named something in the directory named dir and the directory named something in the directory named another. To match only the directory named something on the root directory, use the following:File /r something\*.*When adding \*.*, it will be used as the matching condition and something will be used as the directory to search. When only something is specified, the current directory will be recursively searched for every and directory named something and another\something will be matched.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joe131</div><div class="date">17th April 2007, 22:31</div></div><div class="posttext">Thanks!  It looks like that'll work! :-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>