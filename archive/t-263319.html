<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" PostgreSQL, ExecCmd::exec, large dump file problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  PostgreSQL, ExecCmd::exec, large dump file problem NSIS Discussion" />
	
	<title> PostgreSQL, ExecCmd::exec, large dump file problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  PostgreSQL, ExecCmd::exec, large dump file problem</div>
<hr />
<div class="pda"><a href="t-263319.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=263319">PostgreSQL, ExecCmd::exec, large dump file problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jtonic</div><div class="date">9th January 2007, 17:17</div></div><div class="posttext">Hi<br />
<br />
My installer would install PostgreSQL(silent), and then run 3 sql files (1-make a user, 2-make a database, 3-import nomenclators).<br />
<br />
The problem is that the last of them return code 2 and fail to execute (I use ExecCmd::exec).<br />
The dump file is big enough (106 M).<br />
<br />
the line that drives me crazy look like<br />
ExecCmd::exec \<br />
        '$INSTDIR\Db\bin\psql.exe -q -o &quot;$INSTDIR\Commons\data\arhimed\arhimed.log&quot; -U user db -f &quot;$INSTDIR\Commons\data\arhimed\arhimed.sql&quot;' \<br />
        'password$\r$\n'<br />
<br />
What can I do against this problem?<br />
Any help is very welcome, jtonic.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">9th January 2007, 21:29</div></div><div class="posttext">This might help, NSIS manual 2.2 Script Files<br />
<br />
If you want to use a double-quote in a string you can either use $\&quot; to escape the quote or quote the string with a different type of quote such as ` or '.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">10th January 2007, 07:05</div></div><div class="posttext">Plug-in itself uses negative exit codes for it's (internal) errors, so +2 was returned by shell or application. Probably this is &quot;02 File not found&quot;. May be quotes for executable can help? ExecCmd::exec \<br />
'&quot;$INSTDIR\Db\bin\psql.exe&quot; -q -o &quot;$INSTDIR\Commons\data\arhimed\arhimed.log&quot; -U user db -f &quot;$INSTDIR\Commons\data\arhimed\arhimed.sql&quot;' \<br />
'password$\r$\n'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jtonic</div><div class="date">10th January 2007, 11:59</div></div><div class="posttext">First, thanks you for your replies<br />
<br />
If I use -W in psql command I force password request, and the following ExecCmd::exec faild to execute [return code 2]<br />
<br />
StrCpy $1 '$INSTDIR\Db\bin\psql.exe -q -U postgres -W postgres -f $INSTDIR\Commons\data\arhimed\create_user.sql'<br />
DetailPrint $1<br />
ExecCmd::exec /NOUNLOAD /ASYNC $1 \<br />
	&quot;passwordSQL-paSS$\r$\n&quot;<br />
Pop $0<br />
ExecCmd::wait $0<br />
<br />
In postgresql server log I discovered:<br />
2007-01-10 13:28:20 FATAL:  password authentication failed for user &quot;postgres&quot;<br />
<br />
If I remove option -W all its okie, because psql.exe doesn't need password. <br />
<br />
Seemed that password passwordSQL-paSS is not recognized (altered, not delivered) by psql.exe command (via ExecCmd::exec).<br />
<br />
Another problem is that blank spaces can't be included in ExecCmd::exec command string:<br />
If $INSTDIR is C:\Program files\Iqbyte the ExecCmd::exec failed with code 1. If I execute the same command in terminal all is okie.<br />
<br />
Have anyone else faced with these problems? Any helps are very welcome. Cheers, jtonic.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>