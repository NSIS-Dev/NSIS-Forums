<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help with classpath and jars - JAVA, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help with classpath and jars - JAVA NSIS Discussion" />
	
	<title> Help with classpath and jars - JAVA [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help with classpath and jars - JAVA</div>
<hr />
<div class="pda"><a href="t-279972.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=279972">Help with classpath and jars - JAVA</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">25th October 2007, 17:49</div></div><div class="posttext">Hi Guys<br />
<br />
look at the following line:<br />
<br />
<br />
CreateShortCut  &quot;$SMPROGRAMS\${ZANG}\${ZANG}.lnk&quot; &quot;${JAVA_EXE}&quot; &quot;-cp ./Client/a.jar;./Client/b.jar;./Client/c.jar;./Client/d.jar;./Client/e.jar com.kc.pm.Main&quot; &quot;${SOME_ICON}&quot; &quot;&quot;<br />
<br />
<br />
This works fine. However if I add another 7 jars to the classpath:<br />
<br />
<br />
CreateShortCut  &quot;$SMPROGRAMS\${ZANG}\${ZANG}.lnk&quot; &quot;${JAVA_EXE}&quot; &quot;-cp ./Client/a.jar;./Client/b.jar;./Client/c.jar;./Client/d.jar;./Client/e.jar;./Client/f.jar;./Client/g.jar;./Client/h.jar;./Client/i.jar;./Client/j.jar;./Client/k.jar;./Client/l.jar com.kc.pm.Main&quot; &quot;${SOME_ICON}&quot; &quot;&quot;<br />
<br />
<br />
<br />
<br />
This doesn't work. I've noticed that It breaks after adding the 10th jar. When I add the 10th jar it effects the desktop and quick launch icons as well.<br />
<br />
Is the string above too long for NSIS? I have no idea. If i run all the jars using a batch file the program runs correctly.<br />
<br />
ps. I've renamed the jars above for simplicity.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th October 2007, 19:25</div></div><div class="posttext">The string isn't too long. The limit is 1024 characters. How exactly does it &quot;break&quot;? Does it not create the shortcut at all?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">25th October 2007, 20:30</div></div><div class="posttext">Thanks for the reply<br />
<br />
If we can forget the desktop and quick launch icons and concentrate the start menu it makes its easier.<br />
<br />
I have the following jars to put on the classpath.<br />
<br />
(1) ./Client/a.jar<br />
(2) ./Client/bjar<br />
(3) ./Client/c.jar<br />
(4) ./Client/d.ar<br />
(5) ./Client/e.ar<br />
<br />
(6)   ./Client/f.jar<br />
(7)   ./Client/g.jar<br />
(8)   ./Client/h.jar<br />
(9)   ./Client/i.jar<br />
(10) ./Client/j.jar<br />
(11) ./Client/k.ar;<br />
(12) ./Client/l.jar<br />
<br />
The first five work as expected and the application runs. However, we are now adding new functionality and are using some API's which are the jars (6 -&gt; 12)<br />
The problem is I can add an ANY additional 4 jars (from 6 -&gt; 12) making a total of 9 jars and the login screen of the app loads. The moment I add the tenth jar<br />
which can be ANY jar from the remaining 3 jars the icon on the start menu is lost and the app cannot start. <br />
<br />
The message I get back is from the Java Virtual Machine saying &quot;Could not find the main class. Program will exit.&quot;<br />
If I add any more jars and try to run the app nothing happens at all.<br />
<br />
<br />
With 9 it looks like this:<br />
<br />
CreateShortCut  &quot;$SMPROGRAMS\${ZANG}\${ZANG}.lnk&quot; &quot;${JAVA_EXE}&quot; &quot;-cp ./Client/a.jar;./Client/b.jar;./Client/c.jar;./Client/d.jar;./Client/e.jar;./Client/f.jar;./Client/g.jar;./Client/h.jar;./Client/i.jar com.kc.pm.MyApp&quot; &quot;${ZANG_ICON}&quot; &quot;&quot;<br />
<br />
And 10 I add one more<br />
<br />
If I run a batch file from the Client directory of the installation (where all the jars have been copied to):<br />
<br />
java -cp ./a.jar;./b.jar;./c.jar;./d.jar;./e.jar;./f.jar;./g.jar;./h.jar;./i.jar;./j.jar;./k.jar;./l.jar com.kc.pm.MyApp<br />
<br />
It works as expected.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">25th October 2007, 20:33</div></div><div class="posttext">Sorry I forgot to mention that when I say the &quot;icon on the start menu is lost&quot; I mean it's there but it's not my icon, It's an icon that Windows gives it when it can't find a suitable file type. I can still select the menu item.<br />
<br />
Cheers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">26th October 2007, 10:23</div></div><div class="posttext">Hi<br />
<br />
I have solved my problem. NSIS can only take 9 jars after that something breaks. Initially I had 12 jars and was having problems. I then put 4 of the jars into one of the existing jars reducing the overall jar count to 8. This solved my problem.<br />
<br />
Cheers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mannaking</div><div class="date">26th October 2007, 10:59</div></div><div class="posttext">You can use a batch file (.bat) to resolve this problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th October 2007, 11:22</div></div><div class="posttext">NSIS doesn't know what a Jar is, so the problem can't be the number of Jars, but something deeper. What does the properties of the shortcut show when you create a non-functional shortcut? Would it possible to show the real CreateShortcut line?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">26th October 2007, 14:02</div></div><div class="posttext">My Create Shortcuts looks like:<br />
<br />
<br />
Section &quot;Create Shortcuts&quot;<br />
  CreateDirectory &quot;$SMPROGRAMS\${ZANG}&quot;<br />
  CreateShortCut  &quot;$SMPROGRAMS\${ZANG}\${ZANG}.lnk&quot; &quot;${JAVA_EXE}&quot; &quot;${PARAMETERS}&quot;  &quot;${ZANG_ICON}&quot; &quot;&quot;<br />
  WriteINIStr     &quot;$SMPROGRAMS\${ZANG}\ZangBeZang.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;http://www.someAddress.com/&quot;<br />
  CreateShortCut  &quot;$SMPROGRAMS\${ZANG}\Uninstall ${ZANG}.lnk&quot; &quot;${UNINSTALLER}&quot;<br />
SectionEnd<br />
<br />
<br />
PARAMETERS is defined as:<br />
<br />
<br />
&quot;-cp ./Client/BrowserLauncher2-10rc4.jar;./Client/Connected.jar;./Client/flickrapi-1.0b4.jar;./Client/jdic.jar;./Client/jh.jar;./Client/jregex1.2_01.jar;./Client/JSON.jar;./Client/mail.jar;./gdata-client-1.0.jar;./gdata-core-1.0.jar;./gdata-media-1.0.jar;./gdata-youtube-1.0.jar com.kc.pm.MyAPP&quot;<br />
<br />
<br />
The last four jars had to be removed and placed into Connected.jar<br />
<br />
Cheers,<br />
<br />
Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">26th October 2007, 14:04</div></div><div class="posttext">Sorry I've pasted the last four jars in and forget the client directory. The problem still occurs though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th October 2007, 19:20</div></div><div class="posttext">Could you attach a complete piece of code that'd reproduce this. I can't reproduce this with the code you've posted.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">29th October 2007, 13:38</div></div><div class="posttext">In order for your to reproduce the problem I would have to give you our proprietary jars, which of course I can't. Once we have an obfuscater in place I will send everything over to you.<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th October 2007, 19:46</div></div><div class="posttext">Why would I need the JAR files if the problem is in the shortcut itself?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pgg1</div><div class="date">29th October 2007, 23:08</div></div><div class="posttext">So you can reproduce it.<br />
<br />
I've already posted the shortcut code as requested. That's it, there's nothing more to add regarding shortcuts apart from the quick launch and desktop icons but I've temporarily commented them out. I don't believe posting any more of my script will be helpful. <br />
<br />
All the jars are in the same directory before I build my installer and they are in the same directory after the installer has done it's stuff.<br />
<br />
I don't think there is anything wrong with the shortcut and nobody has told me otherwise. How can the shortcut work up to and including the 9th jar but when I add the 10th jar it falls apart. However, the jars works perfectly when running from a batch file (from the install directory), or the jars work perfectly when I add 4 jars into one of the other jars, therefore reducing the overall jar count to 8 and below the 9 jar threshold. <br />
<br />
I take on board that NSIS has no concept of a jar but I don't know what to think at the moment. It's just strange behaviour.<br />
<br />
Cheers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd November 2007, 10:52</div></div><div class="posttext">Well, not exactly. I don't have the exact code to create the shortcut as I don't have the definition of all those constants you've used there. PARAMETERS might also be defined differently than I assume.<br />
<br />
But the longer this thread goes, it seems more and more like a problem with the something else than the shortcut. I'd start by debugging the executed program if I were you. You can start with a simple Process Explorer examination to make sure it got the command line right and go as far as debugging your main function in your JAR. As long as the icon is created and its properties are fine, I can't say much.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>