<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Change Name on runtime, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Change Name on runtime NSIS Discussion" />
	
	<title> Change Name on runtime [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Change Name on runtime</div>
<hr />
<div class="pda"><a href="t-289870.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=289870">Change Name on runtime</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">8th April 2008, 20:55</div></div><div class="posttext">Hi,<br />
<br />
how to change &quot;Name&quot; (= installer name) on runtime? Docs say that I can use variables here if I initialize them in .onInit (I assume that means un.onInit for the uninstaller, too).<br />
<br />
But this does not work here:<br />
<br />
Var MY_NAME<br />
<br />
Name &quot;$MY_NAME&quot;<br />
<br />
At the end of .onInit and un.onInit I use<br />
<br />
StrCpy $MY_NAME ${PROGRAM_NAME_NORMAL}<br />
<br />
The latter one is a standard define:<br />
<br />
!define PROGRAM_NAME_NORMAL &quot;Normal Software&quot;<br />
<br />
Of course I have some alternative naming in .onInit (depends on some condition).<br />
<br />
The installer shows an empty string for $(^NameDA) (e.g. on welcome page).<br />
<br />
<br />
BTW: Can I easily override e.g. MUI_TEXT_WELCOME_INFO_TITLE for one of my languages?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th April 2008, 21:57</div></div><div class="posttext">Works fine for me. Can you attach a full example?OutFile nametest.exe<br />
Var blah<br />
Name $blah<br />
<br />
Function .onInit<br />
  StrCpy $blah &quot;asdasds&quot;<br />
FunctionEnd<br />
<br />
Section<br />
  MessageBox MB_OK $(^NameDA)<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fabian.rap.more</div><div class="date">8th April 2008, 21:57</div></div><div class="posttext">i don't know if the name can be changed but i know the caption can<br />
<br />
http://nsis.sourceforge.net/Change_caption_of_installer_at_runtime<br />
<br />
edit:: kichik's example works fine</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">8th April 2008, 22:12</div></div><div class="posttext">Fixed it by using quotes:<br />
<br />
StrCpy $MY_NAME &quot;${PROGRAM_NAME_NORMAL}&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">9th April 2008, 12:21</div></div><div class="posttext">Thanks, I have now variable Caption and Name.<br />
<br />
But if I raise a MessageBox in .onInit the title is empty (&quot;&quot;). It seems that Name (or Caption?) is evaluated only once after .onInit finished. It would be nice if it could be evaluated every time MessageBox is called (maybe it should be evaluated every time at all). Currently it is impossible to have a non-empty MessageBox title when Name (or Caption?) is set to a variable.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th April 2008, 13:12</div></div><div class="posttext">Right, g_caption is reevaluated when the language changes. Probably in set_language(). I can't think of any solution for this at the moment.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">11th April 2008, 13:17</div></div><div class="posttext">Add a new command &quot;SetLanguage&quot;? (I know that this might not change strings that are already evaluated.)<br />
<br />
Or internally call &quot;set_language()&quot; before a (non-silent) MessageBox is called?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th April 2008, 13:21</div></div><div class="posttext">A feature request for source code changes should be opened regardless which will probably result in g_caption getting eradicated. But I can't think of a workaround for the current versions.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>