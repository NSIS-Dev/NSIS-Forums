<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Newbie needs help with MordernUI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Newbie needs help with MordernUI NSIS Discussion" />
	
	<title> Newbie needs help with MordernUI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Newbie needs help with MordernUI</div>
<hr />
<div class="pda"><a href="t-132418.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=132418">Newbie needs help with MordernUI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 05:20</div></div><div class="posttext">Hi, i've read all the docs, read all the relevant post and looked at the examples but i'm still stuck :confused: <br />
I'm using &quot;Installer sections&quot; as below<br />
;Installer Sections<br />
InstType &quot;Full&quot;<br />
InstType &quot;Singular&quot;<br />
Section &quot;Full Theme&quot; section_1<br />
SectionIn 1<br />
SetOutPath &quot;$INSTDIR&quot;<br />
FILE &quot;D:\LongHorn2\Home\LHv2Theme.CAB&quot;<br />
SectionEnd<br />
Section &quot;Home Screen&quot; section_2<br />
SectionIn 2<br />
SetOutPath &quot;$INSTDIR&quot;<br />
FILE &quot;D:\LongHorn2\Home\LHv2Home.CAB&quot;<br />
SectionEnd<br />
Section &quot;System Theme&quot; section_3<br />
SectionIn 2<br />
SetOutPath &quot;$INSTDIR&quot;<br />
FILE &quot;D:\LongHorn2\Home\LHv2System.CAB&quot;<br />
SectionEnd<br />
Section &quot;WMP Skin&quot; section_4<br />
SectionIn 2<br />
SetOutPath &quot;$INSTDIR&quot;<br />
FILE &quot;D:\LongHorn2\Home\LHv2WMPSkin.CAB&quot;<br />
SectionEnd<br />
Installer Sections<br />
But i want to so that if InstType &quot;full&quot; is selected (section_1) none of the others are available and if any of SectionIn 2 are selected section_1 is not available (but any number of SectionIn 2 can be selected)<br />
<br />
Also i do not want Custom to be in the drop down menu.<br />
<br />
I've looked at the one-section.nsi example but cannot see how this applies to the ModernUI :hang: <br />
<br />
Please help a Newbie in distress, i need to get this finished ASAP.<br />
<br />
TIA<br />
Richie M</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">20th April 2003, 09:57</div></div><div class="posttext">Also i do not want Custom to be in the drop down menu.<br />
<br />
Use:<br />
<br />
InstType /NOCUSTOM</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">20th April 2003, 10:05</div></div><div class="posttext">This is propably not a Modern UI problem, but an NSIS instruction interpretation problem.<br />
<br />
Quote from the documentation:<br />
4.6.1.4 SectionIn (http://nsis.sourceforge.net/Docs/Chapter4.html#4.6.1.4)<br />
insttype_index [insttype_index] [RO]<br />
This command specifies which install types (see InstType) the current section defaults to the enabled state in. Multiple SectionIn commands can be specified (they are combined). If you specify RO as a parameter, then the section will be read-only, meaning the user won't be able to change its state.<br />
<br />
In other words, the installation types specified at SectionIn are just selected/deselected and not enabled/disabled. You have to change a section's enabled-state by using SectionSetFlags (http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13.1). You can find an example in the one-section.nsi (http://nsis.sourceforge.net/Examples/one-section.nsi) file in your examples directory.<br />
<br />
And to hide the 'Custom' option, use the InstType (http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.22) instruction:<br />
InstType /NOCUSTOM</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 12:45</div></div><div class="posttext">Thanks, but how do i apply the code in one-section.nsi, that seems to be for the &quot;basic&quot; UI not ModernUI?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">20th April 2003, 12:59</div></div><div class="posttext">You can use the same code, there is no difference in script code between the Classic UI and the Modern UI.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 13:03</div></div><div class="posttext">Thanks, i'll give it a go :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 13:27</div></div><div class="posttext">Ok, i'm getting there; i changed to second InstType to be InstType /COMPONENTSONLYONCUSTOM   (small note; there is a bug with this, if you hover the mouse over where the selection would be it still shows the description even tho they are hidden :( )<br />
When I select Custom, &quot;section_1&quot; is still shown even tho its assigned to &quot;SectionIn 1&quot;.<br />
Is there no way to hide this if Custom is selected?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th April 2003, 17:16</div></div><div class="posttext">I have fixed the hidden bug, Joost will upload the source in a couple of seconds since my source has some other changes that are not fully tested yet in it.<br />
<br />
What I suggest you do is set the custom string to whatever Singualr using:<br />
InstType /CUSTOMSTRING=Singular<br />
<br />
Then, according to the one-section.nsi example make it so when the user selects one of the 3 other sections unselect the first section (you can use macros from Sections.nsh too to make it simpler), and set it to Read-Only using the ${SF_RO} flag (defined in Sections.nsh [use !include Sections.nsh to include it]) and use the one-section.nsi code to make sure the user selects only one of the 3 other sections.<br />
<br />
It's not possible to hide sections from .onSelChange. You can set a section's name (SectionSetText) to nothing (&quot;&quot;) and then it won't show in any other place but .onSelChange.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">20th April 2003, 17:24</div></div><div class="posttext">Using a combination of InstType /COMPONENTSONLYONCUSTOM and InstType /NOCUSTOM will make the 'Component selection box' invisible for the whole installer. Since the user then can't select which sections he/she wants to install, you don't need to enable/disable the sections. You just use the SectionIn ionstruction.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th April 2003, 17:30</div></div><div class="posttext">Just read your post again:<br />
<br />
But i want to so that if InstType &quot;full&quot; is selected (section_1) none of the others are available and if any of SectionIn 2 are selected section_1 is not available (but any number of SectionIn 2 can be selected) <br />
<br />
You don't need one-section.nsi at all. Just set section1 to read-only (SectionIn RO) and change it's state according to the others. For example:<br />
<br />
Function .onSelChange<br />
SectionGetFlags ${sec2} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
StrCmp $0 ${SF_SELECTED} selected<br />
SectionGetFlags ${sec3} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
StrCmp $0 ${SF_SELECTED} selected<br />
SectionGetFlags ${sec4} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
StrCmp $0 ${SF_SELECTED} selected<br />
<br />
# non of 2,3,4 are selected, select 1<br />
SectionGetFlags ${sec1} $0<br />
IntOp $0 $0 | ${SF_SELECTED}<br />
SectionSetFlags ${sec1} $0<br />
goto done<br />
<br />
# one of 2,3,4 are selected<br />
SectionGetFlags ${sec1} $0<br />
IntOp $0 $0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${sec1} $0<br />
done:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 17:34</div></div><div class="posttext">Thank you so much, i'll try that &amp; let you know :)<br />
(i did say one-section.nsi wasn't helping :P )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 17:58</div></div><div class="posttext">:D Thanks Kichik, got it working ;) <br />
I stayed with;  InstType /COMPONENTSONLYONCUSTOM as my second type.<br />
<br />
Changed section_1 to be;   Section &quot;&quot; section_1<br />
<br />
And then used your code, once i figured out you missed out &quot;selected:&quot;  :p <br />
<br />
All i need now is to go to the VCS and get that bug-fix :D<br />
<br />
Thank you very much guys</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 18:27</div></div><div class="posttext">Kichik, how do i get a compiled version of the new Ui.c ?<br />
Or don't i need it.<br />
<br />
Sorry for being such a Newbie :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th April 2003, 18:43</div></div><div class="posttext">You need a compiler for that. Joost have uploaded a compiled verison to CVS so you can use it instead of compiling yourself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Richie M</div><div class="date">20th April 2003, 19:05</div></div><div class="posttext">Thank you, you deserve a pay-rise :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jacob Metro</div><div class="date">20th April 2003, 22:51</div></div><div class="posttext">I love it virtlink using &quot;INSTtype /COMPONENTSONLYONCUSTOM&quot; and &quot;INSTtype /NOCUSTOM&quot; does have its uses.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>