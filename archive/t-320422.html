<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Blocking appending on install dir on browse, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Blocking appending on install dir on browse NSIS Discussion" />
	
	<title> Blocking appending on install dir on browse [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Blocking appending on install dir on browse</div>
<hr />
<div class="pda"><a href="t-320422.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320422">Blocking appending on install dir on browse</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">liftarn</div><div class="date">30th June 2010, 15:53</div></div><div class="posttext">I have an application that nneds to be installed in the same directory as another application.<br />
<br />
I have set up the install directory by reading a registry setting for that program as<br />
;Default installation folder<br />
InstallDir &quot;$PROGRAMFILES\${COMPANY_NAME}\${PRODUCT_NAME}&quot;<br />
<br />
;Get installation folder from registry if available<br />
InstallDirRegKey HKLM &quot;Software\Company\Package\Install&quot; &quot;InstallDir&quot;<br />
<br />
I then use the standard page, but checks if it's a valid directory<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
Function .onVerifyInstDir<br />
    IfFileExists $INSTDIR\TestFile.exe PathGood<br />
      Abort ; if $INSTDIR is not a valid directory, don't let user install there.<br />
    PathGood:<br />
FunctionEnd<br />
<br />
The problem is if the user uses the browse button to look for the directory the directory name gets appended with my appname when the user clicks OK and this is not what I want.<br />
How do I prevent this and install in the directory the user actually selected?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">30th June 2010, 16:06</div></div><div class="posttext">Add a backslash:<br />
<br />
InstallDir &quot;$PROGRAMFILES\${COMPANY_NAME}\${PRODUCT_NAME}\&quot;<br />
<br />
<br />
(It's explained in the documentation about InstallDir)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">liftarn</div><div class="date">1st July 2010, 13:50</div></div><div class="posttext">Add a backslash:<br />
(It's explained in the documentation about InstallDir)<br />
<br />
Ok, that did the trick. The ducumentation made it look it was not what I was looking for.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>