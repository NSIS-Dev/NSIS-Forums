<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to confirm a password in an INI to another field?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to confirm a password in an INI to another field? NSIS Discussion" />
	
	<title> How to confirm a password in an INI to another field? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to confirm a password in an INI to another field?</div>
<hr />
<div class="pda"><a href="t-139369.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=139369">How to confirm a password in an INI to another field?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 01:34</div></div><div class="posttext">Hello,<br />
<br />
I have several fields in an INI in which two are password fields. One field should validate against the other and this is the kind of idea I have...<br />
<br />
[Field 9]<br />
ValidateText=[Field 10]<br />
<br />
[Field 10]<br />
ValidateText=[Field 9]<br />
<br />
This is obviously not the case at trial. I have checked this page but believe its a little more complicated than it should be. http://nsis.sourceforge.net/archive/viewpage.php?pageid=87<br />
<br />
I also checked the test.nsi script but that is far off from trying to simply validate one field in an INI to another.<br />
<br />
Is this simple? I tried it with and without the square brackets &quot;[]&quot; but I cannot get one field to validate against another... Can someone please help?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 04:15</div></div><div class="posttext">To compare two passwords with each other use the following commands:<br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIR\up.ini&quot; &quot;Field 9&quot; &quot;State&quot;<br />
ReadINIStr $1 &quot;$PLUGINSDIR\up.ini&quot; &quot;Field 10&quot; &quot;State&quot;<br />
<br />
StrCmp $0 $1 PassOK PassNotOK<br />
<br />
<br />
Vytautas;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 04:46</div></div><div class="posttext">I've tried your snippet and see nothing but problems. Your code looks simple and looks great but just doesn't work. I tried the below code but it fails on every buld.<br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot;<br />
ReadINIStr $1 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot;<br />
<br />
StrCmp $0 $1 PassOK PassNotOK<br />
<br />
I tried it by nesting it the needed sections but I keep getting the same errors... <br />
Error: could not resolve label &quot;PassOK&quot; in section &quot;RabbitHole&quot; (0)<br />
Error - aborting creation process<br />
<br />
Please help me a little further in understanding this. Thank you very much :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ramon18</div><div class="date">18th June 2003, 08:15</div></div><div class="posttext">omg :p<br />
<br />
You are missing the labels to jump after &quot;StrCmp&quot;<br />
<br />
Usage: StrCmp str1 str2 label_to_goto_if_equal [label_to_goto_if_not] <br />
<br />
so you need to do something like that:<br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot;<br />
ReadINIStr $1 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot;<br />
<br />
StrCmp $0 $1 Label_PassOK Label_PassNotOK<br />
<br />
Label_PassOK:<br />
  MessageBox MB_OK &quot;Password is OK.&quot;<br />
  ; Do other things here if needed<br />
  goto Label_EndOfTestPassword<br />
<br />
Label_PassNotOK:<br />
  MessageBox MB_OK &quot;Password is WRONG!&quot;<br />
  ; Do other things here if needed<br />
  goto Label_EndOfTestPassword<br />
<br />
Label_EndOfTestPassword:<br />
  ; Do other things here if needed<br />
<br />
<br />
good luck,<br />
Ramon</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 08:28</div></div><div class="posttext">Yes, <br />
<br />
Sorry :( I forgot to mention that PassOK &amp; PassNotOK were only labels to you own functions.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 14:09</div></div><div class="posttext">Thank you :)<br />
<br />
It works and definitely so very appreciated but can I ask just two questions? <br />
<br />
1. How do I get rid of the OK box when the password is right? In other words, if the passwords are correct they simply go ahead with no prompts?<br />
<br />
2. When a user hits cancel, how can I avoid prompting them all together? Right now if pass words are wrong and a user hits cancel they can go through a little mean loop...<br />
<br />
Otherwise, this really works great, just curious about the other two questions.<br />
<br />
Thank you very much :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 14:16</div></div><div class="posttext">I got the first part going so far (Sorry for asking early). The user continues with no prompts of the password is correct. I simply removed the &quot;MessageBox MB_OK &quot;Password is OK.&quot; from the &quot;Label_PassOK:&quot;<br />
<br />
Very cool indeed, now just how to avoid the password prompt when a user hits cancel?<br />
<br />
Thank you so very much for your help :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 14:17</div></div><div class="posttext">For the first question just remove the line: MessageBox MB_OK &quot;Password is OK.&quot; to remove the need to click OK if passwords are identical.<br />
<br />
Vytautas<br />
<br />
<br />
vbgunz was just a second quicker ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 14:45</div></div><div class="posttext">Thank you Vytautas,<br />
<br />
Sometimes I do in fact jump the gun :eek:<br />
<br />
How do I kill the wrong password prompt if a user clicks cancel? If it is too much trouble its cool as I was thinking of entering this as the Message Box label...<br />
<br />
&quot;I would really like to continue ahead with your order but unfortunately your passwords do not match. Please fix them and I'll stay quiet.&quot;<br />
<br />
Cool?<br />
<br />
hehe, thank you so much for everything, just trying to avoid the wrong password when a user clicks cancel :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 14:45</div></div><div class="posttext">The following code should fix your problem.<br />
<br />
Define custom page like this: Page Custom ShowPassword ValidatePassword <br />
<br />
The ShowPassword function should setup the custom page as normal.<br />
<br />
And finally ValidatePassword Function <br />
Function ValidatePassword<br />
ReadINIStr $0 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot; <br />
ReadINIStr $1 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot; <br />
<br />
StrCmp $0 $1 Label_PassOK Label_PassNotOK <br />
<br />
Label_PassOK: <br />
; Do things here if needed <br />
goto Label_EndOfTestPassword <br />
<br />
Label_PassNotOK: <br />
MessageBox MB_OK &quot;Password is WRONG!&quot; <br />
; Do other things here if needed <br />
Abort<br />
goto Label_EndOfTestPassword <br />
<br />
Label_EndOfTestPassword: <br />
; Do other things here if needed <br />
FunctionEnd<br />
 <br />
<br />
Note the Abort command this will not allow the user to go to the next page until the password match.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 14:51</div></div><div class="posttext">When you say cancel do yuo mean cancel the installation or just the cancel button on a message box?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 14:57</div></div><div class="posttext">I found myself testing the password and when I got happy it found the password wrong and prevented the user from moving ahead I hit cancel on the installer itself...<br />
<br />
When I did that I was prompted with Password is Wrong... I hit ok on the message box and hit cancel on the installer again... I was faced with another messagebox... I corrected the passwords and hit cancel but the password scheme didn't like that and said my passwords were wrong...<br />
<br />
The only way around it was to fix the passwords, hit next and then hit cancel.<br />
<br />
I am working with your newest one now but not sure why to implement a new custom page as I have it already nested into a custom page function...<br />
<br />
Thank you Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 15:01</div></div><div class="posttext">You only need to make sure that the custom page definition has the second validation function defined and that if the passwords do not match you abort going to the next page.  Sorry if I confused you.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 15:19</div></div><div class="posttext">Thank you Vytautas,<br />
<br />
As so not to make this confusing I've decided to leave it as is. What are the chances someone gets the password wrong, hits next, hits OK on the prompt and then wants to cancel?<br />
<br />
I've inserted this message which I think defines pretty much to the user what must happen if they get caught in the loop.<br />
<br />
&quot;Passwords Must Match Before Continuing or Quitting This Application.&quot;<br />
<br />
I think it is straightforward enough even for those who do not understand the concept of just add water... I hope :)<br />
<br />
Thank you Vytautas for everything, I am so far very satisified with it.<br />
<br />
Thanks again ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">18th June 2003, 15:23</div></div><div class="posttext">Thats alright, however if you wanted to post the script I could have a look at it and modify it for you?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 15:49</div></div><div class="posttext">Thank you Vytautas,<br />
<br />
Here is a very clean example of how I have it already setup. <br />
<br />
If passwords match, the user moves ahead with no prompt. If the users passwords do not match, the user is prompted and sent back to the initial page (this is the preferred method). <br />
<br />
If the user gets their passwords wrong and hits next their prompted. But if the user selects cancel to exit the user is sent back to the initial page and is caught in a loop.<br />
<br />
The only way the user can escape the loop is if the user makes the passwords match and hits next as cancel will sort of reset the password fields to their initial values and make the passwords wrong again.<br />
<br />
Its a little tricky and I appreciate you looking at it a little further. Thank you for your time Vytautas.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th June 2003, 16:09</div></div><div class="posttext">There is a very easy solution to this which would have fixed your problems from the start.<br />
<br />
Page Custom PasswordDialog &quot;&quot; &quot;&quot; &quot; - Enter User Password&quot;<br />
<br />
Function PasswordDialog<br />
pagetop:<br />
<br />
InstallOptions::dialog &quot;$PLUGINSDIR\UserProfile.ini&quot;<br />
 Pop $0<br />
 StrCmp $0 back pagebottom ;if user clicks back<br />
 StrCmp $0 cancel pagebottom ;if user clicks cancel<br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIRUserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot; <br />
ReadINIStr $1 &quot;$PLUGINSDIRUserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot; <br />
<br />
StrCmp $0 $1 PassOK PassNotOK<br />
<br />
PassOK: <br />
;whatever here<br />
goto SkipPasswordTest<br />
<br />
PassNotOK: <br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Password incorrect!\<br />
$\nYou must re-enter the password.&quot; IDOK pagetop<br />
<br />
SkipPasswordTest:<br />
;more here<br />
<br />
pagebottom:<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 16:23</div></div><div class="posttext">Thank you so much for the snippet Afrow UK but unfortunately the script builder stops at the following<br />
<br />
&quot;Page Custom PasswordDialog   &quot;&quot; &quot;&quot; &quot; - Enter User Password&quot;&quot;<br />
<br />
and states this as the error...<br />
<br />
&quot;Page: CustomError: custom page can not have more than the creator function.&quot;<br />
<br />
I tried entering the top custom page command like I do the rest. Then I simply inserted the rest of your function by itself in the order of all the rest of the custom pages....<br />
<br />
Thank you Afrow UK, I looked forward to your solution :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">18th June 2003, 16:32</div></div><div class="posttext">Sorry Afrow UK,<br />
<br />
It works, just as when I was going over your code you forgot to divide the following...<br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIRUserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot; <br />
ReadINIStr $1 &quot;$PLUGINSDIRUserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot; <br />
<br />
into <br />
<br />
ReadINIStr $0 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 9&quot; &quot;State&quot; <br />
ReadINIStr $1 &quot;$PLUGINSDIR\UserProfile.ini&quot; &quot;Field 10&quot; &quot;State&quot;<br />
<br />
I did that and it works beatifully... I will let you know of any errors I find if any. I hope not, it looks awesome :)<br />
<br />
I Thank you and thank Vytautas for everything. You guys are the best :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th June 2003, 16:52</div></div><div class="posttext">&quot;$PLUGINSDIRUserProfile.ini&quot; is equal to &quot;$PLUGINSDIR\UserProfile.ini&quot; because NSIS will automatically add \ in with those variables ($TEMP, $PROGRAMFILES etc)<br />
<br />
Sorry, my code had an extra &quot;&quot; in it...<br />
Page Custom PasswordDialog &quot;&quot; &quot;&quot; &quot; - Enter User Password&quot;<br />
...when it should be...<br />
Page Custom PasswordDialog &quot;&quot; &quot; - Enter User Password&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th June 2003, 16:55</div></div><div class="posttext">BTW, here is one of my recent scripts:<br />
http://myweb.tiscali.co.uk/imker/mappackager/mappackager.txt<br />
<br />
More info here:<br />
http://dynamic.gamespy.com/~dday/ib3/ikonboard.cgi?s=3ef08aac5300ffff;act=ST;f=2;t=983<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th June 2003, 16:56</div></div><div class="posttext">NSIS doesn't automatically add a back slash for those variables. It automatically removes it. The problem was that Vytautas used [ php ] which removes the back slashes. Using [ code ] is preferred.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">19th June 2003, 00:43</div></div><div class="posttext">Oops!<br />
<br />
The problem was that Vytautas used [ php ] which removes the back slashes. Using [ code ] is preferred. <br />
<br />
Didn't realise that.  Thank you kichik.<br />
<br />
Vytautas</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>