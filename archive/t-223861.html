<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Simple question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Simple question NSIS Discussion" />
	
	<title> Simple question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Simple question</div>
<hr />
<div class="pda"><a href="t-223861.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223861">Simple question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jlee</div><div class="date">12th August 2005, 21:14</div></div><div class="posttext">I have a massive program (19,000+ files) that I am writing an installer for.  There are obviously many sub directories and so on.  Is there a simple script or function that I can use intead of listing each file individually?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jlee</div><div class="date">12th August 2005, 21:28</div></div><div class="posttext">I am trying this, but I got the error,<br />
<br />
Error in script &quot;C:\Program Files\NSIS\Examples\ttp\ttp.nsi&quot; on line 126 -- aborting creation process<br />
<br />
<br />
Section -post<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
<br />
  ;Store installation folder<br />
  WriteRegStr HKCU &quot;Software\Timber Ticket Pro&quot; &quot;&quot; $INSTDIR<br />
  <br />
  ;Create uninstaller<br />
  WriteUninstaller &quot;$INSTDIR\Uninstall.exe&quot;<br />
  <br />
  <br />
 ;Create Xampp folder<br />
  CreateDirectory &quot;$INSTDIR\zertis_xamp&quot;<br />
  SetOutPath &quot;$INSTDIR\zertis_xamp\&quot;<br />
<br />
;  !include &quot;ttp.nsh&quot;<br />
<br />
	StrCpy $R0 &quot;zertis_xampp\&quot;   ;Directory copy from<br />
	StrCpy $R1 &quot;$INSTDIR\zertis_xamp&quot;  ;Directory copy into<br />
	StrLen $R2 $R1<br />
<br />
	GetTempFileName $0<br />
	FileOpen $R3 $0 w<br />
	!insertmacro Locate &quot;$R0&quot; &quot;/L=F&quot; &quot;CallBack&quot;<br />
	FileClose $R3<br />
<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK 'error'<br />
<br />
	Exec '&quot;notepad.exe&quot; &quot;$0&quot;'     ;view log<br />
<br />
SectionEnd  <br />
<br />
Function CallBack<br />
	StrCpy $1 $R8 '' $R2<br />
	StrCmp $1 '' +2<br />
	StrCpy $1 '\$1'<br />
	IfFileExists '$R1\$1\*.*' +2<br />
	CreateDirectory '$R1$1'<br />
	CopyFiles /SILENT $R9 '$R1$1'<br />
<br />
	;Your code ...<br />
	;$R9       &quot;path\name&quot; (source)<br />
	;$R8       &quot;path&quot;      (source)<br />
	;$R1$1     &quot;path&quot;      (destination)<br />
	;$R7       &quot;name&quot;<br />
<br />
	IfFileExists '$R1$1\$R7' 0 +3<br />
	FileWrite $R3 &quot;-old:$R9  -new:$R1$1\$R7  -success$\r$\n&quot;<br />
	goto +2<br />
	FileWrite $R3 &quot;-old:$R9  -new:$R1$1\$R7  -failed$\r$\n&quot;<br />
<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th August 2005, 23:37</div></div><div class="posttext">I think you're getting mixed with compile time and run time. You want to include (compress) all files in a single folder recursively on compile?<br />
<br />
Just use:<br />
File /r &quot;some_local_dir\*.*&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jlee</div><div class="date">13th August 2005, 00:21</div></div><div class="posttext">I O geeze, I thought that a and r had something to do with read and archive.  I didn't read it close enough, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cerf</div><div class="date">14th August 2005, 02:58</div></div><div class="posttext">Hello there<br />
I am kind of on the same boat,<br />
The problem is that I am a total newbie to NSIS<br />
I need to get all the files I have in their original dir structure to be copied to Install_Dir\{original structure}<br />
<br />
But I am really messed up right now.<br />
<br />
Can you help me with that?<br />
<br />
Cërf.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th August 2005, 11:35</div></div><div class="posttext">Just use:<br />
<br />
SetOutPath $INSTDIR<br />
File /r &quot;local_folder&quot;<br />
<br />
Notice no *.* after it.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cerf</div><div class="date">14th August 2005, 16:57</div></div><div class="posttext">Thanks!!!<br />
I knew it had to be very simple, now, is there a way of perform something like that with the delete command? since I don't see /r in the documentation.<br />
<br />
Again THANKS!<br />
<br />
Cërf.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cerf</div><div class="date">14th August 2005, 17:04</div></div><div class="posttext">Once I get this running I think I'm going to write a NSIS 101 tutorial so begginers like me don't have a hard time looking for simple stuff.<br />
: )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th August 2005, 10:32</div></div><div class="posttext">RMDir /r &quot;$INSTDIR&quot;<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>