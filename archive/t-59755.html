<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A faster but limited implementation of Blue Gredient Background feature, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A faster but limited implementation of Blue Gredient Background feature NSIS Discussion" />
	
	<title> A faster but limited implementation of Blue Gredient Background feature [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A faster but limited implementation of Blue Gredient Background feature</div>
<hr />
<div class="pda"><a href="t-59755.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=59755">A faster but limited implementation of Blue Gredient Background feature</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">buster</div><div class="date">11th September 2001, 16:21</div></div><div class="posttext">Hello,<br />
   Thank you for providing us such a great little installer tool. It's really my favorate ones. I know you can make it even better.  Here is my suggestion for a faster but limited :-( implementation of Blue Gredient Background feature.  It relays on a new GDI routine included with windows 98/2k/me or later (as said in M$DN).<br />
<br />
Modifications:<br />
<br />
exehead\bgbg.c,   add link Msimg32.lib to project<br />
<br />
static LRESULT CALLBACK BG_WndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)<br />
...<br />
...<br />
<br />
        // JF: made slower, reduced to 4 pixels high, because I like how it looks better/<br />
#if 1  // YYD, if it is win 98/2k/nt,  there is an new faster and good looking way<br />
  {<br />
   TRIVERTEX        vert[2] ;<br />
   GRADIENT_RECT    gRect;<br />
   vert [0] .x      = r.left;<br />
   vert [0] .y      = r.top;<br />
   vert [0] .Red    = GetRValue(m_color1)&lt;&lt;8;<br />
   vert [0] .Green  = GetGValue(m_color1)&lt;&lt;8;<br />
   vert [0] .Blue   = GetBValue(m_color1)&lt;&lt;8;<br />
   vert [0] .Alpha  = 0x0000;<br />
   <br />
   vert [1] .x      = r.right;<br />
   vert [1] .y      = r.bottom; <br />
   vert [1] .Red    = GetRValue(m_color2)&lt;&lt;8;<br />
   vert [1] .Green  = GetGValue(m_color2)&lt;&lt;8;<br />
   vert [1] .Blue   = GetBValue(m_color2)&lt;&lt;8;<br />
   vert [1] .Alpha  = 0x0000;<br />
   <br />
   gRect.UpperLeft  = 0;<br />
   gRect.LowerRight = 1;<br />
   GradientFill(hdc,vert,2,&amp;gRect,1,GRADIENT_FILL_RECT_V);<br />
  }<br />
#else<br />
        for (y = r.top; y &lt; r.bottom; y += 4)<br />
        {<br />
          int rv,gv,bv;<br />
        RECT rect;<br />
        HBRUSH brush;<br />
          rv = GetRValue(m_color2) * y / r.bottom + GetRValue(m_color1) * (r.bottom - y) / r.bottom;<br />
          gv = GetGValue(m_color2) * y / r.bottom + GetGValue(m_color1) * (r.bottom - y) / r.bottom;<br />
          bv = GetBValue(m_color2) * y / r.bottom + GetBValue(m_color1) * (r.bottom - y) / r.bottom;<br />
        brush = CreateSolidBrush(RGB(rv,gv,bv));<br />
        SetRect(&amp;rect, r.left, y, r.right, y+4);<br />
        // note that we don't need to do &quot;SelectObject(hdc, brush)&quot; <br />
        // because FillRect lets us specify the brush as a parameter.<br />
        FillRect(hdc, &amp;rect, brush);<br />
        DeleteObject(brush);<br />
        }<br />
#endif<br />
<br />
<br />
  Sincerely,<br />
  YYD<br />
  http://www.dv99.com</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pjw62</div><div class="date">14th September 2001, 19:49</div></div><div class="posttext">Only problem is that as you point out, Msimg32.dll is not a standard dll on older versions of windows. Otherwise, looks okay ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>