<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Language support in un-installation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Language support in un-installation NSIS Discussion" />
	
	<title> Language support in un-installation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Language support in un-installation</div>
<hr />
<div class="pda"><a href="t-194661.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=194661">Language support in un-installation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">25th September 2004, 07:24</div></div><div class="posttext">Hi all,<br />
<br />
My installer program has fifteen language support, and I want my un-installer to execute in the same language as the language selected during the installation.  But I don't want to give the option to choose the language during un-installation.<br />
<br />
Can anybody plz help me in this regards.<br />
<br />
Regards<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th September 2004, 09:36</div></div><div class="posttext">If using the MUI, see MUI_LANGDLL_REGISTRY_ROOT, MUI_LANGDLL_REGISTRY_KEY and MUI_LANGDLL_REGISTRY_VALUENAME in the MUI readme. If not, simply write the language from the installer in the registry and read it in the uninstaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">25th September 2004, 11:31</div></div><div class="posttext">Thanks for reply...<br />
<br />
I am using MUI, and the syntax I am writing is as :<br />
<br />
InstallDir $PROGRAMFILES\MyDevice\Driver<br />
InstallDirRegKey HKCU &quot;Software\MyDevice\Driver&quot; &quot;&quot;<br />
<br />
!define MUI_LANGDLL_REGISTRY_ROOT &quot;HKCU&quot;<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\MyDevice\Driver&quot;<br />
!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;Installer Language&quot;<br />
<br />
.........<br />
<br />
Once my installer successful installs the driver, next time installer doesn't prompt for language selection and the installation wizard always comes in the language selected during the first successful installation.  But the un-installer always comes in default english language.<br />
<br />
Why my uninstaller doesnot read the registry for selecting language selected during installation.<br />
<br />
Thanks in advance....<br />
<br />
Regards<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th September 2004, 11:32</div></div><div class="posttext">Did you insert the MUI_UNGETLANGUAGE macro in un.onInit? See Examples\Modern UI\MultiLanguage.nsi for a full example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">27th September 2004, 05:20</div></div><div class="posttext">Thanks.... Actually my script didn't have un.onInit function.... After defining un.onInit function.... Its working very fine.<br />
<br />
Thanks a lot...<br />
<br />
Regards<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">14th October 2004, 03:53</div></div><div class="posttext">Hi all,<br />
<br />
Now after defining &quot;MUI_UNGETLANGUAGE&quot; in un.onInit, the un-installer takes the language selected during the installation.  <br />
<br />
But once I start the installation and even the installer succeeds or fails, next time when I execute the installer, my installer doesnot prompt for the language selection. <br />
<br />
I tried to solve this by deleting the registry key &quot;HKCU &quot;Software\MyDevice\Driver&quot; 'installerLanguage' in .onInit function but it always delets the key even next time the installation is not successful and due to this my previous successfull installation prompts for language selection during the un-installation.<br />
<br />
Can anyone tell me how to always prompt for language selection whenever a user starts the installation, without delecting the registry key.<br />
<br />
Thanks in advance.<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">14th October 2004, 11:43</div></div><div class="posttext">I don't understand...why don't you just delete the language key as the last thing you do in the uninstall process? <br />
<br />
Why would you *want* to delete the key in the .oninit of the install rather than at any point in the uninstall?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">14th October 2004, 15:32</div></div><div class="posttext">Thanks for reply,<br />
<br />
I am deleting the registry key &quot;HKCU &quot;Software\MyDevice\Driver&quot; so that if last installation was unsuccessfull, the next installation should again prompt for the language selection.  <br />
Otherwise if I don't delete that key, than the next installation never prompts for the language selection. <br />
<br />
can any one tell me is there any way to prompts every time for language selection.<br />
<br />
Thanks<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th October 2004, 15:57</div></div><div class="posttext">I'll update the Modern UI so that it will only save the language when the installation was succesful.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Venu</div><div class="date">15th October 2004, 04:28</div></div><div class="posttext">Thanks for reply.  <br />
So it is a limitation of NSIS.<br />
<br />
Regards<br />
Venu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">16th October 2004, 15:12</div></div><div class="posttext">Not really a limitation, but this makes it easier.<br />
<br />
The Modern UI has already been <br />
updated, try the latest CVS version.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>