<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Silent setup for GUI installation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Silent setup for GUI installation NSIS Discussion" />
	
	<title> Silent setup for GUI installation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Silent setup for GUI installation</div>
<hr />
<div class="pda"><a href="t-211991.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=211991">Silent setup for GUI installation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 14:21</div></div><div class="posttext">Hi All,<br />
<br />
We have simple setup with licensing page, product directory select and reboot confirmation pages. For remote SILENT install we need make answers file for each page. <br />
I don't understand How to use SF_SELECTED attribute for section. Any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">1st April 2005, 14:42</div></div><div class="posttext">I didn't test this but it should work:<br />
<br />
Function .onInit<br />
   IfFileExists &quot;$EXEDIR\silent.ini&quot; &quot;&quot; no_silent_install<br />
   /*<br />
   Read here the stuff from the silent file<br />
   */<br />
   Call Install_Function<br />
   Quit<br />
   no_silent_install:<br />
FunctionEnd<br />
<br />
Function Install_Function<br />
   /*<br />
   Place here all the stuff you would normally put in the main section. <br />
   */<br />
FunctionEnd<br />
<br />
<br />
Section<br />
   Call Install_Function<br />
   /*<br />
   Should call the Install_Function here too for normal installations. This way changes of the install process have to be edited on only one place<br />
   */<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 15:01</div></div><div class="posttext">Originally posted by flizebogen <br />
I didn't test this but it should work:<br />
<br />
Function .onInit<br />
   IfFileExists &quot;$EXEDIR\silent.ini&quot; &quot;&quot; no_silent_install<br />
   /*<br />
   Read here the stuff from the silent file<br />
   */<br />
   Call Install_Function<br />
   Quit<br />
   no_silent_install:<br />
FunctionEnd<br />
<br />
Function Install_Function<br />
   /*<br />
   Place here all the stuff you would normally put in the main section. <br />
   */<br />
FunctionEnd<br />
<br />
<br />
Section<br />
   Call Install_Function<br />
   /*<br />
   Should call the Install_Function here too for normal installations. This way changes of the install process have to be edited on only one place<br />
   */<br />
SectionEnd<br />
<br />
  <br />
<br />
Not clear :( <br />
What is answers file? For example: first Welcome scren, user must press Next button. What instruction can do it? Hide Welcome screeen and pres button?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">1st April 2005, 15:15</div></div><div class="posttext">If you want to provide an silent installation you need all neccessary informations. Store them in the ini file (They are very easy to process in NSIS).<br />
<br />
The Function .on.Init is executed BEFORE any GUI is shown up. Thats why i used IfFileexists.<br />
<br />
And the Quit Command after the function call but within .onInit terminate the installer. This way you can install your app without any screen (silent).<br />
<br />
If you write your install commands in the Install_Function as i suggested you only have to call this function within you section for normal installations. This solutions works only if you're using one section. For more sections its a little bit tricky but possible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 15:32</div></div><div class="posttext">Originally posted by flizebogen <br />
If you want to provide an silent installation you need all neccessary informations. Store them in the ini file (They are very easy to process in NSIS).<br />
<br />
The Function .on.Init is executed BEFORE any GUI is shown up. Thats why i used IfFileexists.<br />
<br />
And the Quit Command after the function call but within .onInit terminate the installer. This way you can install your app without any screen (silent).<br />
<br />
If you write your install commands in the Install_Function as i suggested you only have to call this function within you section for normal installations. This solutions works only if you're using one section. For more sections its a little bit tricky but possible.  <br />
<br />
Thanks a lot :) It's easy and fast method. But we have more than one section. And I asked about standart NSIS features<br />
<br />
4.12 Silent Installers/Uninstallers<br />
<br />
....<br />
If your installer/uninstaller requires a lot of information and you want it to be able to be silent, you should allow the user to pass on a path to an answers file. This would be much more comfortable than writing all of the information on the command line.<br />
<br />
<br />
What is answer file? Is it instruction for page control (press next button, select reboot radiobutton on last page) and DON'T SHOW pages</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">1st April 2005, 15:43</div></div><div class="posttext">An answer file is a text file that provides any neccessary infos.<br />
<br />
NSIS is a scripting language that offers less &quot;automatic&quot; flow-control. If the standard installer behaviour isn't enough than you have to modify the script to fit you needs.<br />
<br />
I know what you want - i've seen it in a lot of installers, but most of them had very complex scripts to do the job. There is no &quot;Record&quot; function like in Installshield to give you an answer file.<br />
<br />
It's better to make a combined normal and silent script based on my example than to think about how to alter a specific control in a normal installation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 15:51</div></div><div class="posttext">Ok.<br />
As I understand, NSIS doesn't support REAL silent installation with easy swith key /s :( One setup that can work in GUI mode or silent mode.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">1st April 2005, 15:56</div></div><div class="posttext">Is does support /s switch but your script must react on it, because on silent mode not all commands are working i.e page based commands.<br />
<br />
As i said there is no &quot;automagically&quot; Record and play modus.<br />
<br />
Hence it is very flexible (more than i.e. Innosetup) but it requires a lot more scripting code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 16:20</div></div><div class="posttext">And What about this way for one code but different build options:<br />
1. Set macro SILENT and run 2 NSIS build One /SILENT another without /SILENT macro<br />
2. Hide all pages<br />
!ifndef SILENT<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;License.rtf&quot;<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!endif<br />
3. Left all section as is<br />
...<br />
Copy files<br />
Create registry key<br />
...<br />
4. Get InstallFolder due setup paramenter setup.exe /d=&quot;c:\programm files\...&quot;<br />
5. Get Reboot needs due /reboot paramenter<br />
setup.exe /reboot<br />
<br />
What do u think? One source code and 2 different installers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">1st April 2005, 16:30</div></div><div class="posttext">It's possible to split it this way because !define is a compile-time command but you will need to check for the silent define in different places<br />
<br />
- MUI macros<br />
- Pages commands<br />
- Page related commands as LicenceText</div></div><hr />


<div class="post"><div class="posttop"><div class="username">romko</div><div class="date">1st April 2005, 16:41</div></div><div class="posttext">I try<br />
<br />
!ifdef SILENT<br />
  Silentinstall silent<br />
!endif<br />
<br />
Everything work without additional setting - no visiblt pages :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>