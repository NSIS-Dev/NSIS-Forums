<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Include crash problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Include crash problem NSIS Discussion" />
	
	<title> Include crash problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Include crash problem</div>
<hr />
<div class="pda"><a href="t-283139.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283139">Include crash problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">13th December 2007, 14:41</div></div><div class="posttext">I am seeing an issue when using the locate macro provided with NSIS in a callback function for a page. When the installer calls the callback function to test the directory's the user inputed, the installer crashes on me.  This crash only seems to happen on a windows 2000 server I have. The weird thing is that it works on windows NT 4 and window XP fine.The following code example of the code that causes this problem.  It verifies a directory is valid and sets the install directory to that value if valid.<br />
<br />
 <br />
<br />
page Custom Info checkNTDPSParameters<br />
<br />
....More Code<br />
         <br />
Function CheckParameters<br />
<br />
     var /GLOBAL SearchResults<br />
 <br />
     ReadINIStr $RootDir &quot;$PLUGINSDIR\Info.ini&quot; &quot;Field 7&quot; &quot;State&quot;<br />
<br />
    ${Locate} &quot;$INSTDIR&quot; &quot;/L=D /M=j2sdk-142_05&quot; &quot;SetTrue&quot;                        <br />
<br />
    ${If} $SearchResults == &quot;FALSE&quot;<br />
<br />
        Messagebox MB_OK &quot;Root Directory is not valid.&quot;<br />
<br />
        abort<br />
<br />
    ${Else}<br />
<br />
        StrCpy $INSTDIR $RootDir   ;Set Root Directory path<br />
   <br />
 ${EndIf}<br />
<br />
FunctionEnd<br />
<br />
Function SetTrue<br />
<br />
         StrCpy $SearchResults &quot;TRUE&quot;<br />
<br />
FunctionEnd<br />
<br />
:igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th December 2007, 17:19</div></div><div class="posttext">What are the crash details?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">13th December 2007, 19:30</div></div><div class="posttext">It just quits to the desktop, no error.  Is there a way to get a stack trace from the program upon crash?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th December 2007, 21:12</div></div><div class="posttext">You can use windbg.exe for that. It sounds like you're experiencing a stack overflow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">13th December 2007, 23:04</div></div><div class="posttext">I'm posting the text from the debugger.  Not sure how to read the output.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th December 2007, 14:55</div></div><div class="posttext">Posting where?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">31st December 2007, 19:27</div></div><div class="posttext">Sorry about the long delay. Hopefully this works.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st January 2008, 17:44</div></div><div class="posttext">Debugger says it's an access violation and not a stack overflow which is weird. Use:.symfix<br />
.reload<br />
kpTo get a stack trace that'd further help debugging.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>