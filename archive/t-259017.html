<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Strange new behaviour in LangStrings + InstallDir + Name, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Strange new behaviour in LangStrings + InstallDir + Name NSIS Discussion" />
	
	<title> Strange new behaviour in LangStrings + InstallDir + Name [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Strange new behaviour in LangStrings + InstallDir + Name</div>
<hr />
<div class="pda"><a href="t-259017.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=259017">Strange new behaviour in LangStrings + InstallDir + Name</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">RichardH</div><div class="date">6th November 2006, 15:54</div></div><div class="posttext">When updating to a new version of NSIS I found out that the default language is now selected by NSIS.<br />
<br />
Since I have different application titles(and data) depending on the language selected the following stopped working(MUI):<br />
<br />
Name $(appName)<br />
InstallDir &quot;$PROGRAMFILES\$(appName)&quot;<br />
...<br />
LangString appName ${LANG_ENGLISH} &quot;Reading World Demo&quot;<br />
LangString appName ${LANG_ITALIAN} &quot;Lettere e Parole Demo&quot;<br />
<br />
Before the Name and InstallDir $(appName) was the same but now InstallDir selects the title and data depending on the OS lang. Name works as before though.<br />
<br />
What is the recommended way of restoring the &quot;old way&quot;?<br />
<br />
Suddenly I feel like a little bit of freedom has been stolen from the great NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th November 2006, 19:11</div></div><div class="posttext">From the release notes of version 2.13:Language detection has changed. The default language is now set to the user's user-interface language instead of the locale language, as suggested by MSDN. To restore the old behavior, use System::Call &quot;kernel32::GetUserDefaultLangID()i.a&quot; in .onInit.That's the only thing that has changed in a long time concerning languages.<br />
<br />
The different language of $INSTDIR and the title comes from an unrelated issue. $INSTDIR is initialized from InstallDir before .onInit and before the user has a chance to change the language. Therefore, if you're using LangStrings in it, you should recalculate it after the language changes. You can do it with a switch in .onInit or by using the LangString in .onGUIInit.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>