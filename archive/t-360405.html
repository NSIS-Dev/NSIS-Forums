<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSJSON formatting issue, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSJSON formatting issue NSIS Discussion" />
	
	<title> NSJSON formatting issue [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSJSON formatting issue</div>
<hr />
<div class="pda"><a href="t-360405.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=360405">NSJSON formatting issue</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">30th April 2013, 08:58</div></div><div class="posttext">Hi,<br />
<br />
I am using nsjson plugin to modify Google chrome's preferences file.<br />
<br />
I want to add a new field (urls_to_restore_on_startup)  in the session node if it is not already present. But the new node added has faulty format which is corrupting the preferences file.<br />
I am doing this:<br />
 nsJSON::Set &quot;session&quot; &quot;urls_to_restore_on_startup&quot; /index 0 /Value '&quot;http://www.nsis.sourceforge.net&quot;' ;changing start page<br />
<br />
<br />
It should result like this <br />
<br />
<br />
Preferences.json<br />
.<br />
.<br />
&quot;session&quot;: {<br />
      &quot;restore_on_startup&quot;: 4,<br />
      &quot;restore_on_startup_migrated&quot;: true,<br />
      &quot;urls_to_restore_on_startup&quot;: [ &quot;http://www.nsis.sourceforge.net&quot; ]<br />
   }<br />
<br />
But instead it is like this : -<br />
<br />
Preferences.bad<br />
.<br />
.<br />
&quot;session&quot;: {<br />
      &quot;restore_on_startup&quot;: 4,<br />
      &quot;restore_on_startup_migrated&quot;: true,<br />
      &quot;urls_to_restore_on_startup&quot;:{<br />
			&quot;http://www.nsis.sourceforge.net&quot;<br />
		}<br />
   }<br />
<br />
<br />
The curly braces are added here which are ruining everything.<br />
<br />
How to get the right format ??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th April 2013, 10:09</div></div><div class="posttext">The value is itself parsed as JSON. If you want the value to be an array (i.e. in square brackets) then put square brackets in your value string. Also you don't need /index 0 in there (that is creating a new sub-node, hence the curly brackets).<br />
<br />
I.e.nsJSON::Set &quot;session&quot; &quot;urls_to_restore_on_startup&quot; /value '[&quot;http://www.nsis.sourceforge.net&quot;]'The example script demonstrates this and all other usage.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">miraz.zaidi</div><div class="date">30th April 2013, 13:26</div></div><div class="posttext">Oh great. This fixed it. Thanks. :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>