<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Component dependencies and checkboxes, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Component dependencies and checkboxes NSIS Discussion" />
	
	<title> Component dependencies and checkboxes [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Component dependencies and checkboxes</div>
<hr />
<div class="pda"><a href="t-287671.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287671">Component dependencies and checkboxes</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Daniel James</div><div class="date">27th February 2008, 14:16</div></div><div class="posttext">How can I make the checked state of checkboxes in the MUI2 COMPONENTS page depend on the state of other checkboxes in the tree, to reflect dependencies between components being installed.<br />
<br />
For example: Say I have a SectionGroup called &quot;Options&quot; which contains Sections called &quot;Option Manager&quot;, &quot;Option 1&quot; and &quot;Option 2&quot;. The entire group is optional, but if the user selects either &quot;Option 1&quot; or &quot;Option 2&quot; then &quot;Option Manager&quot; will also be selected, and if the user deselects &quot;Option Manager&quot; then both &quot;Option 1&quot; and &quot;Option 2&quot; must also be deselected (greyed would be good, too, but by no means essential).<br />
<br />
Note that it is valid to install &quot;Option Manager&quot; without either &quot;Option 1&quot; or &quot;Option 2&quot; (because there are other possible options that are not part of the standard install).<br />
<br />
I currently have &quot;Option Manager&quot; as a hidden section, which means that if the user selects the &quot;Options&quot; section it will be selected and if he deselects &quot;Options&quot; then it will be deselected. The trouble with this is that it isn't obvious to the user that the manager component exists. The users find it confusing that they have to select &quot;Options&quot; and then deselect &quot;Option 1&quot; and &quot;Option 2&quot; to get just the manager.<br />
<br />
It would be sufficient to show &quot;Option Manager&quot; as a component that was always selected if the SectionGroup was selected (something like SectionIn, but depending on the selection state of the parent SectionGroup, rather than on an InstType). Can that be done? It's not exactly what I'd like but at least it would be clear to the users.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2008, 20:31</div></div><div class="posttext">Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
Page components<br />
Page instfiles<br />
<br />
!include &quot;Sections.nsh&quot;<br />
!include &quot;logiclib.nsh&quot;<br />
<br />
SectionGroup /e &quot;Options&quot;<br />
Section /o &quot;Option Manager&quot; sec1<br />
#<br />
SectionEnd<br />
<br />
Section /o &quot;Option 1&quot; sec2<br />
#<br />
SectionEnd<br />
<br />
Section /o &quot;Option 2&quot; sec3<br />
#<br />
SectionEnd<br />
SectionGroupEnd<br />
<br />
Function .onSelChange<br />
SectionGetFlags ${sec1} $R1<br />
IntOp $R1 $R1 &amp; ${SF_SELECTED}<br />
<br />
SectionGetFlags ${sec2} $R2<br />
IntOp $R2 $R2 &amp; ${SF_SELECTED}<br />
<br />
SectionGetFlags ${sec3} $R3<br />
IntOp $R3 $R3 &amp; ${SF_SELECTED}<br />
<br />
${If} $R2 = ${SF_SELECTED}<br />
${OrIf} $R3 = ${SF_SELECTED}<br />
    !insertmacro SelectSection ${sec1}<br />
    !insertmacro SetSectionFlag ${sec1} ${SF_RO}<br />
${Else}<br />
${If} $R2 != ${SF_SELECTED}<br />
${AndIf} $R3 != ${SF_SELECTED}<br />
    !insertmacro ClearSectionFlag ${sec1} ${SF_RO}<br />
${EndIf}<br />
${EndIf}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Daniel James</div><div class="date">28th February 2008, 12:52</div></div><div class="posttext">Neat, thanks. That works nicely ... now I just have to work out how! :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Daniel James</div><div class="date">29th February 2008, 18:41</div></div><div class="posttext">Originally posted by Daniel James <br />
Neat, thanks. That works nicely ... now I just have to work out how!  <br />
... and, more particularly, whether the same thing can be done with the checkboxes on a page created by<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
<br />
Any clues?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Daniel James</div><div class="date">29th February 2008, 19:10</div></div><div class="posttext">Originally posted by Daniel James <br />
... and, more particularly, whether the same thing can be done with the checkboxes on a page created by<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
 <br />
It's OK, I've worked it out for myself. The .onSelChange function has to be after the definitions of the sections in the .nsi file (even though the MUI_PAGE_COMPONENTS macro doesn't have to be). :weird: <br />
<br />
Thanks again, Red Wine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrDan</div><div class="date">3rd April 2008, 16:34</div></div><div class="posttext">... my thread on Section dependencies useful (http://forums.winamp.com/showthread.php?s=&amp;threadid=272007)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>