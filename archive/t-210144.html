<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Can NSIS install a separate file from the install CD?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Can NSIS install a separate file from the install CD? NSIS Discussion" />
	
	<title> Can NSIS install a separate file from the install CD? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Can NSIS install a separate file from the install CD?</div>
<hr />
<div class="pda"><a href="t-210144.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=210144">Can NSIS install a separate file from the install CD?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">noleander</div><div class="date">11th March 2005, 22:31</div></div><div class="posttext">I've gotten my simple NSIS install script working.   Now for the next step:  for various reasons, we need to have a data file on the CD _separate_ from the installer file.  In other words, the CD would hold the installer.exe file and a second file containing our data.   The install process will copy the data file from the CD onto the hard drive.  I understand that this is not the normal way to use NSIS, but that's the way it has to be.<br />
<br />
I've searched the archives for an example of how to do this with NSIS, but cannot find an example.   Can anyone point me to an example?<br />
<br />
Thanks in advance,<br />
  neal</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2005, 22:56</div></div><div class="posttext">Well, more information on what type of file it is would help.<br />
<br />
For example, if your seperate file is a .Zip then you'd just include unzip.exe in your installer, extract it on run-time into the $PLUGINSDIR and execute it on your .Zip.<br />
However, if you use something better like LZMA (.7z) then use 7-Zip's command-line program - 7za from http://www.7-zip.org/<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2005, 22:57</div></div><div class="posttext">Here's the source of a little NSIS program I made to download and install another NSIS program...<br />
<br />
Name &quot;MapUpdater Installer&quot;<br />
Caption &quot;MapUpdater Installer&quot;<br />
OutFile &quot;install_mu.exe&quot;<br />
Icon &quot;mapupdater.ico&quot;<br />
XPStyle on<br />
<br />
!define URL1 &quot;http://myweb.tiscali.co.uk/imker/Updater/mapupdater.zip&quot;<br />
!define URL2 &quot;http://myweb.tiscali.co.uk/imker/Updater/Games/hostile.gdf&quot;<br />
<br />
Function .onInit<br />
<br />
 MessageBox MB_OKCANCEL|MB_ICONINFORMATION &quot;MapUpdater will now be downloaded and installed for Hostile Intent.$\r$\nIt shall be installed to C:\MapUpdater (it can be moved later if you wish).$\r$\n$\r$\nClick OK to continue.&quot; IDCANCEL Done<br />
<br />
 InitPluginsDir<br />
<br />
 Banner::show /NOUNLOAD &quot;Please wait while files are downloaded...&quot;<br />
<br />
 TryURL1:<br />
 InetLoad::load &quot;${URL1}&quot; &quot;$PLUGINSDIR\mapupdater.zip&quot; /END<br />
<br />
  Pop $R0<br />
  StrCmp $R0 &quot;OK&quot; TryURL2<br />
   MessageBox MB_RETRYCANCEL|MB_ICONEXCLAMATION &quot;A required file could not be downloaded.$\r$\nPlease check your internet connection and click Retry to try again.&quot; IDRETRY TryURL1 IDCANCEL Done<br />
<br />
 TryURL2:<br />
 InetLoad::load &quot;${URL2}&quot; &quot;$PLUGINSDIR\hostile.gdf&quot; /END<br />
<br />
  Pop $R0<br />
  StrCmp $R0 &quot;OK&quot; DoneURLs<br />
   MessageBox MB_RETRYCANCEL|MB_ICONEXCLAMATION &quot;A required file could not be downloaded.$\r$\nPlease check your internet connection and click Retry to try again.&quot; IDRETRY TryURL2 IDCANCEL Done<br />
<br />
 DoneURLs:<br />
 Banner::destroy<br />
<br />
 Banner::show /NOUNLOAD &quot;Installing MapUpdater...&quot;<br />
<br />
 CreateDirectory &quot;C:\MapUpdater&quot;<br />
<br />
 File &quot;/oname=$PLUGINSDIR\unzip.exe&quot; &quot;Temp\unzip.exe&quot;<br />
 nsExec::Exec '&quot;$PLUGINSDIR\unzip.exe&quot; -o &quot;$PLUGINSDIR\mapupdater.zip&quot; -d &quot;C:\MapUpdater&quot;'<br />
<br />
 Rename &quot;$PLUGINSDIR\hostile.gdf&quot; &quot;C:\MapUpdater\Games\hostile.gdf&quot;<br />
<br />
 Exec &quot;C:\MapUpdater\mapupdater.exe&quot;<br />
<br />
 Done:<br />
 Banner::destroy<br />
 Quit<br />
<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
You can download the actual program from http://myweb.tiscali.co.uk/imker/Updater/install_mu.exe<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">noleander</div><div class="date">11th March 2005, 23:11</div></div><div class="posttext">Thanks for the quick replies.<br />
<br />
The additional file we will put on the CD (actually, it will be a DVD) is a data file containing audio tracks.  The data file is already packed and compressed in our own format (special for music synthesizers) and we don't anticipate compressing it further with zip or tar.<br />
<br />
So, from NSIS's point of view, the second file is just a plain data file that the installer needs to copy from the CD/DVD to the hard drive.<br />
<br />
If NSIS will work better or easier if we run our file thru zip/tar compression, let me know, but we'd rather avoid that.<br />
<br />
I'm just trying to find a sample NSIS script that shows how to copy a plain data file from the CD to the hard drive.<br />
<br />
Thanks!<br />
  neal</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th March 2005, 23:29</div></div><div class="posttext">@afrow: what speaks against using zipdll (http://nsis.sourceforge.net/archive/viewpage.php?pageid=56)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arfinator853</div><div class="date">11th March 2005, 23:32</div></div><div class="posttext">couldn't you just use something easy like<br />
File &quot;$EXEDIR\yourdatafile.somthing&quot;<br />
<br />
I don't know if this is whast your looking for.  But just felt It might work.  :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">12th March 2005, 03:57</div></div><div class="posttext">I think you need to use the CopyFiles command.<br />
<br />
CopyFiles &quot;Location&quot; &quot;Destination&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th March 2005, 15:39</div></div><div class="posttext">I've had problems with ZipDLL in the past. I wrote a NSIS app to update a computer game, and it would fail to decompress atleast 5 of the 60+ Zips that I tested with a run-time error.<br />
<br />
What kind of compression format are you using? You'd need some kind of command-line program to decompress it.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>