<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallDirRegKey, not sure what happens?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallDirRegKey, not sure what happens? NSIS Discussion" />
	
	<title> InstallDirRegKey, not sure what happens? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallDirRegKey, not sure what happens?</div>
<hr />
<div class="pda"><a href="t-171873.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=171873">InstallDirRegKey, not sure what happens?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 08:53</div></div><div class="posttext">If i specify a key/value in the registry to copy files to using InstallDirRegKey, what will happen if that key/value doesn't exist, and there no InstallDir specified?<br />
<br />
I've set the install to be silent, and the compiled exe exits, but I'm not sure if it does anything. When I remove SilentInstall silent, it comes up with an empty installdir and the Install button is disabled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd March 2004, 09:02</div></div><div class="posttext">If the key does not exist it uses the default folder set using InstallDir.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 09:05</div></div><div class="posttext">I know, but I havn't set a folder. And since the installer is silent and it quits, I wonder what it does. Copy files somewhere (where?) or just nothing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd March 2004, 09:06</div></div><div class="posttext">There is no directory page in a silent installer, so it will install in the current folder.<br />
<br />
Check the value of $INSTDIR if you want to prevent that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 09:28</div></div><div class="posttext">I doesn't install in the current folder, because I don't see the files there. In fact, I think it just does nothing, but I want to know if that (in theory) is true, or should indeed extract to the current dir (which isn't the case).<br />
<br />
Not that I mind it does nothing. I'm trying to use this 'trick' to update a program, if it's installed. What if I put this installer/updater onto a CD? It can't write to the current dir there. Will it give (visible) errors?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd March 2004, 09:41</div></div><div class="posttext">If the installation directory is empty it should install in the default folder.<br />
<br />
That does not have to be folder in which the installer is located. It's the folder that is currently the default folder in Windows. It may be the desktop, your root drive or something else.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 09:43</div></div><div class="posttext">How can I check what the default folder in Windows is?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd March 2004, 10:06</div></div><div class="posttext">Depends on what is currently set by the applications you are running. <br />
<br />
SetOutPath sets the current directory, but if you have not set it or set it to an empty installation folder, you can't be sure about it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 10:16</div></div><div class="posttext">In my script, SetOutPath is &quot;$INSTDIR&quot;. What does this mean? I've searched my hard disks for the files, but I found them nowhere (apart from the source files).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd March 2004, 10:22</div></div><div class="posttext">$INSTDIR is the folder that is selected in the installer using InstallDir, InstallDirReg and the directory page.<br />
<br />
In your case this value is empty. To prevent it from installing anything use StrCmp to compare the value of $INSTDIR and quit if it's empty.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Breepee</div><div class="date">3rd March 2004, 10:40</div></div><div class="posttext">Ah, like this:<br />
<br />
Section &quot;MainSection&quot; SEC01<br />
  StrCmp $INSTDIR &quot;&quot; equal unequal<br />
  equal:<br />
    Quit<br />
  unequal:<br />
    SetOutPath &quot;$INSTDIR&quot;<br />
    SetOverwrite on<br />
    etc....<br />
SectionEnd<br />
<br />
Seems to work, although I cant find any difference between behaviour, but I suppose this way is more secure.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>