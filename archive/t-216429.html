<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Installer Checks for update using XML, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Installer Checks for update using XML NSIS Discussion" />
	
	<title> Installer Checks for update using XML [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Installer Checks for update using XML</div>
<hr />
<div class="pda"><a href="t-216429.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=216429">Installer Checks for update using XML</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">19th May 2005, 10:29</div></div><div class="posttext">How do I use NSIS to Check for an Update using a XML File?<br />
<br />
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt; <br />
- &lt;ProgramName&gt;<br />
	&lt;version&gt;5.405&lt;/version&gt;<br />
  &lt;/ProgramName&gt;<br />
<br />
<br />
<br />
Lets just say I am Checking something that is Version 5.403<br />
And I use the XML file above Located at a URL Link. It Tells <br />
the Installer that the Most Recent Version is Higher than the <br />
Version Being Installed...<br />
<br />
How would I go about this?<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">19th May 2005, 14:40</div></div><div class="posttext">At this moment there isn't a *official* XML parser plugin for nsis, here (http://forums.winamp.com/showthread.php?s=&amp;threadid=210994&amp;highlight=XML), here (http://forums.winamp.com/showthread.php?s=&amp;threadid=199405&amp;highlight=XML),  are some un-official plugins.<br />
<br />
Search the forum and you find other ways to parse a XML, although if your tree only has version as element, try a loop until you find it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">19th May 2005, 17:45</div></div><div class="posttext">Thanks Joel,<br />
<br />
Ok to start off how do I call your XML.dll Properly to<br />
Parse it on Node (Version) And Ask if What is Under<br />
the Node is Greater than a Given Number, In this Case<br />
Greater than 5.403 is 5.405, Then Take Action one<br />
way or the other depending on if it ends up Greater or<br />
Lesser.<br />
<br />
Lets start at a Line like this... Unless otherwise.<br />
<br />
<br />
Parse:<br />
XML::TextElementFromNode ${XMLFILE}&quot;ProgramName&quot; &quot;Version&quot;<br />
<br />
<br />
---<br />
Possibly if OldValue&lt;NewValue Activate &quot;FunctionName&quot;<br />
Other wise Some other Function Gets Activated. Might be<br />
A Type of Fork in the Road for me to Take an Action. Not<br />
that any of my Examples mean anything in the way that<br />
you do it for XML.dll.<br />
-------<br />
<br />
<br />
<br />
I had Read those Links Already actually, I had been <br />
Searching for a while and finally Decided to post ... <br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">19th May 2005, 20:14</div></div><div class="posttext">Ok well If it Can't than Perhaps Maybe It can be Done With<br />
the one Called nsXML.dll. How would that be Done? And if not<br />
than Where can I get the thing I am Looking for?<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th May 2005, 21:09</div></div><div class="posttext">I used this to get text between two tags in an HTML file, so it should work here too:<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=693&amp;instances=0,11,311<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">19th May 2005, 22:06</div></div><div class="posttext">Afrow Uk, (About your Link)<br />
<br />
I Have no idea what to do with this... What to change I <br />
mean. Also When I Get it Going to where it Grabs in this <br />
Case in Between &lt;version&gt; &amp; &lt;/version&gt; Which Should<br />
return 5.405, How would I say 5.403 is Less than The<br />
text Returned.<br />
<br />
Than say if Text Returned is Greater than<br />
5.403 (Call FunctionNameUPDATE) If 5.403<br />
is just Equal to the text Returned it will<br />
than (Call FunctionNameNOUPDATE)<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">19th May 2005, 22:33</div></div><div class="posttext">Please Help me Get the Text... And if you want, Also<br />
Please Add how to Check Version Number by Less and <br />
Greater. That would be the next Question Anyway lol.<br />
<br />
Attached a Script.<br />
<br />
Thanks !!!<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">20th May 2005, 00:58</div></div><div class="posttext">Here is the XML to go along with the NSI Script.<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th May 2005, 11:28</div></div><div class="posttext">${GetBetween} &quot;&lt;version&gt;&quot; &quot;&lt;/version&gt;&quot; &quot;$INSTDIR\currentversion.xml&quot; &quot;$R0&quot;<br />
${VersionCompare} &quot;$R0&quot; &quot;5.405&quot; &quot;$R0&quot;<br />
StrCmp $R0 0 0 +2<br />
 MessageBox MB_OK &quot;Versions equal&quot; IDOK Done<br />
StrCmp $R0 1 0 +2<br />
 MessageBox MB_OK &quot;Version one newer&quot; IDOK Done<br />
StrCmp $R0 2 0 +2<br />
 MessageBox MB_OK &quot;Version two newer&quot;<br />
Done:<br />
<br />
VersionCompare: http://nsis.sourceforge.net/archive/nsisweb.php?page=759&amp;instances=0,11,122,754<br />
<br />
Edit: Make sure you put functions code (from archive pages) in the script before you actually use them.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">21st May 2005, 08:05</div></div><div class="posttext">Thanks Afrow UK, I am Starting to Get somewhere....<br />
<br />
I am Still having Problems... I don't know, I have<br />
attached what I made and Theres still a few bugs. It<br />
seems to Never Retrieve The Value of the XML File<br />
Correctly. So I Changed one of the Lines to test it.<br />
<br />
Function VersionCompare is Working Fine Using this.<br />
<br />
${VersionCompare} &quot;5.405&quot; &quot;5.403&quot; &quot;$R0&quot;<br />
<br />
It also I Guess is only Checking the Last two Digits.<br />
All I know is it Makes 5.405 More than 5.403, But if<br />
I change 5.403 to 5.8 it is less than 5.405 For Some<br />
Reason.<br />
<br />
What can be done to make it work with all Digits?<br />
Why Isn't it Grabbing the XML Value Correctly?<br />
<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">21st May 2005, 08:25</div></div><div class="posttext">I change 5.403 to 5.8 it is less than 5.405 For Some<br />
Reason.<br />
${VersionCompare} &quot;5.405&quot; &quot;5.8&quot; &quot;$R0&quot;<br />
;$R0=1It's correct. Because${VersionCompare} &quot;5.10&quot; &quot;5.8&quot; &quot;$R0&quot;<br />
;$R0=1Right comparison (in your case):${VersionCompare} &quot;5.4.05&quot; &quot;5.8&quot; &quot;$R0&quot;<br />
;$R0=2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">21st May 2005, 13:01</div></div><div class="posttext">I need to add a Decimal every Time after the first Decimal?<br />
<br />
When using this Method I must Make my Versions like:<br />
0.0.0.0.0.0.0.0.0.0.0.0.0.0.0<br />
<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">21st May 2005, 13:27</div></div><div class="posttext">As far as Function GetBetween Goes, Using Detail<br />
Print like this:<br />
<br />
<br />
DetailPrint &quot;$R0&quot;<br />
<br />
<br />
It Should Return The Version Number of the XML.<br />
But it turns up Blank. I figure once the Code for<br />
that Function is Working Properly I will get a Result<br />
from the XML. This is what I need to have worked<br />
out at the Moment.<br />
<br />
Oh and After Function VersionCompare I see it Is<br />
used to say 1 or 2.<br />
<br />
-MichaelFlya-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MichaelFlya</div><div class="date">21st May 2005, 14:17</div></div><div class="posttext">Ahh Something Small I have now Figured it out....<br />
<br />
<br />
${GetBetween} &quot;&lt;version&gt;&quot; &quot;&lt;/version&gt;&quot; &quot;.\currentversion.xml&quot; &quot;$R0&quot;<br />
<br />
<br />
That helped on Returning the Value Found in XML. I must<br />
have not Set the Install Directory. Instead I set OutFile.<br />
<br />
<br />
But now For Function VersionCompare. Making the Number in<br />
the XML file 5.1 Instead of 5.405 and Doing this with the Line<br />
of Code:<br />
<br />
Code:<br />
<br />
${VersionCompare} &quot;$R0&quot; &quot;5.0&quot; &quot;$R0&quot;<br />
<br />
<br />
Everything works When I change 5.0 in the Script to a<br />
more Higher Version than 5.1 it works as I want. Plus<br />
when I change 5.1 in the XML to what ever. So now I<br />
can Work With this. A good Explanation on why it's<br />
best to do 0.0.0.0.0 Decimals is needed but ok to Use.<br />
<br />
<br />
Both Afrow Uk And Instructor, All I can say is Thanks !!!!<br />
<br />
And Joel When ever I need to Write a XML With the<br />
Installer I am sure those Links will Come in handy,<br />
Thanks !!!!<br />
<br />
<br />
<br />
<br />
-MichaelFlya-</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>