<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Variable Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Variable Problem NSIS Discussion" />
	
	<title> Variable Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Variable Problem</div>
<hr />
<div class="pda"><a href="t-250462.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250462">Variable Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">5th July 2006, 20:58</div></div><div class="posttext">Hello all.<br />
<br />
I'm having a little problem with how I'm trying to use a variable.  Here is an example:<br />
<br />
${MyArray-&gt;Shift} &quot;VarA&quot;<br />
${MyArray-&gt;Shift} &quot;VarB&quot;<br />
${MyArray-&gt;Shift} &quot;VarC&quot;<br />
<br />
StrCpy $VarA yes<br />
StrCpy $VarB no<br />
StrCpy $VarC Yes<br />
<br />
StrCpy $0 0<br />
Loop:<br />
IntCmp $0 3 Done 0 Done<br />
${MyArray-&gt;Read} $1 $0<br />
<br />
MessageBox MB_OK $$$1<br />
<br />
IntOp $0 $0 + 1<br />
Goto Loop<br />
<br />
Done:<br />
<br />
<br />
Basically, during the course of my script, a bunch of variables get set to yes or no (VarA, VarB, VarC).  I have the list of these variables stored in an Array (MyArray).  Several times during my script I want to check each of these variables (over 15 of them in reality), and instead of having 15 separate checks, I want to loop through them.<br />
<br />
The problem is when I actually try to use the variable, in a MessageBox in the example above, I only get the variable name, and not its value.  I'm using '$$$' above to add 1 $ to the result of the Array Read.  So the first time through the loop, $1 gets set the VarA, and then is displayed as $VarA in the MessageBox.  However I really want to see 'yes' in the message box.<br />
<br />
I realize I'm really using one variable which points to a value that happens to be equal to another variable, and expecting to see the second variable's value.  If I could somehow use nesting or concatenation to use the second variable initially, and get the desired value, that would be great.  Let me know if I'm just crazy, and there is a much better way to do this.<br />
<br />
Thanks for looking.<br />
<br />
- Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">5th July 2006, 21:42</div></div><div class="posttext">Hey guys.  I figured out a work around, using another array.  However, I ran into a similar problem a while back with attempting to nest variables, http://forums.winamp.com/showthread.php?s=&amp;threadid=202192&amp;highlight=nested .  This would be a cool enhancement, although I'm not sure how many other people have run into this.  Just thought I would throw this out there.  Thanks all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2006, 09:50</div></div><div class="posttext">You are giving ${MyArray-&gt;Shift} &quot;VarA&quot; and not $VarA, hence why you're getting &quot;VarA&quot; returned because that is what you put in the array!!<br />
<br />
Also you can use the ReadFirst and ReadNext macros to loop through the array which makes it tidier.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">6th July 2006, 14:43</div></div><div class="posttext">Hey Stu.  Yeah, I tried ${MyArray-&gt;Shift} &quot;$VarA&quot; too, no luck.  The result of MessageBox MB_OK $1 after the Array Read is still &quot;$VarA&quot;, and not &quot;yes&quot;.  Thanks for the suggestion though.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2006, 15:03</div></div><div class="posttext">That is strange. You definitely have the variables defined with the Var instruction?<br />
<br />
If not then would you be able to write a script that reproduces the problem.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">6th July 2006, 15:21</div></div><div class="posttext">I misspoke, but I still don't have it working.  I tried: ${MyArray-&gt;Shift} &quot;$$VarA&quot;.  Needed the double $$, because I want the variable name in the Array, not the values, as they change over the course of the script.  I have a working example of the problem below.  <br />
<br />
Basically, I want all the variable names to be stored in the Array, so I can loop through the array at any time, and see all the values of these variables.  Make sense?<br />
<br />
I have method 1 (my original), and method 2 ($$) included, thanks for the help.<br />
<br />
!define ArrayNoValVar<br />
!include &quot;NSISArray.nsh&quot;<br />
Var VarA<br />
Var VarB<br />
Var VarC<br />
Name Test<br />
OutFile Test.exe<br />
${Array} MyArray<br />
<br />
Section &quot;&quot;<br />
${MyArray-&gt;Init}<br />
;Method 1<br />
;${MyArray-&gt;Shift} &quot;VarA&quot;<br />
;${MyArray-&gt;Shift} &quot;VarB&quot;<br />
;${MyArray-&gt;Shift} &quot;VarC&quot;<br />
<br />
;Method2<br />
${MyArray-&gt;Shift} &quot;$$VarA&quot;<br />
${MyArray-&gt;Shift} &quot;$$VarB&quot;<br />
${MyArray-&gt;Shift} &quot;$$VarC&quot;<br />
<br />
StrCpy $VarA yes<br />
StrCpy $VarB no<br />
StrCpy $VarC Yes<br />
<br />
StrCpy $0 0<br />
Loop:<br />
IntCmp $0 3 Done 0 Done<br />
${MyArray-&gt;Read} $1 $0<br />
<br />
;Method1<br />
;MessageBox MB_OK $$$1<br />
<br />
;Method2<br />
MessageBox MB_OK $1<br />
<br />
IntOp $0 $0 + 1<br />
Goto Loop<br />
Done:<br />
${MyArray-&gt;Delete}<br />
${ArrayUnload}<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2006, 15:44</div></div><div class="posttext">I see well that isn't possible. $VarName is for compile time only. Rather than have these different VarA-C variables, just use an Array.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">6th July 2006, 16:05</div></div><div class="posttext">Thanks Stu, will do.  What I tried to do originally, is fill the Array with A, B, C, etc... and then as I looped through the Array, and set $1 to those elements, I would do something like this: MessageBox MB_OK $Var$1  , but that does not work either, and brought me back to my nested variables problem.  Anyhow, I did as you suggested, and just stored these values in an array, and all is well.  Thanks again.<br />
<br />
Jnuw</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>