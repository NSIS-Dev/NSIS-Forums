<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" IO bitmap, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  IO bitmap NSIS Discussion" />
	
	<title> IO bitmap [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  IO bitmap</div>
<hr />
<div class="pda"><a href="t-273515.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273515">IO bitmap</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">27th June 2007, 21:49</div></div><div class="posttext">I'm using normal installoptions2, and for some reason my code keeps on crashing if I try to display the bitmap.<br />
<br />
!include &quot;XPUI.nsh&quot;<br />
<br />
Name &quot;InstallOptions&quot;<br />
OutFile &quot;InstallOptions.exe&quot;<br />
!define XPUI_ABORTWARNING<br />
<br />
Page custom CustomPageA<br />
!insertmacro XPUI_PAGE_INSTFILES<br />
    <br />
!insertmacro XPUI_LANGUAGE &quot;English&quot;<br />
<br />
ReserveFile &quot;welcome.ini&quot;<br />
ReserveFile &quot;..\support\heading_welcome.bmp&quot;<br />
!insertmacro XPUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
Section &quot;Dummy Section&quot; SecDummy<br />
SectionEnd<br />
<br />
Function .onInit<br />
  !insertmacro XPUI_INSTALLOPTIONS_EXTRACT &quot;welcome.ini&quot;<br />
  File &quot;/oname=$PLUGINSDIR\image.bmp&quot; &quot;..\support\heading_welcome.bmp&quot;<br />
FunctionEnd<br />
<br />
Function CustomPageA<br />
  !insertmacro XPUI_HEADER_TEXT &quot;&quot; &quot;&quot;<br />
  !insertmacro XPUI_INSTALLOPTIONS_WRITE &quot;welcome.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;$PLUGINSDIR\image.bmp&quot;<br />
  !insertmacro XPUI_INSTALLOPTIONS_WRITE &quot;welcome.ini&quot; &quot;Field 2&quot; &quot;Text&quot; &quot;asdf asdf&quot;<br />
  !insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;welcome.ini&quot;<br />
FunctionEnd<br />
<br />
Any ideas?  Thanks!<br />
<br />
And please ignore missing backslashes in the pathnames... for some reason they don't show up in the forum.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th June 2007, 21:54</div></div><div class="posttext">What happens if you use MUI and not XPUI?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">28th June 2007, 00:26</div></div><div class="posttext">If I change everything to MUI the same thing happens... so it's probably not XPUI's fault.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">28th June 2007, 04:11</div></div><div class="posttext">Double posting because it won't let me edit my old message...<br />
<br />
I'm starting to suspect the bmp file itself.  It used to be 24-bit, but I changed it to a 256 color bmp and it still doesn't work.  Is there some special format the file itself needs to be in?<br />
<br />
For the record, the pathname is properly written into the INI file and the image also extracts correctly.  Using other bmps doesn't work either... I even tried a bmp that was being used by XPUI itself.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th June 2007, 04:58</div></div><div class="posttext">Try InitPluginsDir on .onInit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">28th June 2007, 09:15</div></div><div class="posttext">It still crashes even with InitPluginsDir</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th June 2007, 11:35</div></div><div class="posttext">Please attach your INI file.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">28th June 2007, 19:38</div></div><div class="posttext">NSI:<br />
<br />
!include &quot;XPUI.nsh&quot;<br />
<br />
Name &quot;InstallOptions&quot;<br />
OutFile &quot;InstallOptions.exe&quot;<br />
!define XPUI_ABORTWARNING<br />
<br />
Page custom CustomPageA<br />
!insertmacro XPUI_PAGE_INSTFILES<br />
    <br />
!insertmacro XPUI_LANGUAGE &quot;English&quot;<br />
<br />
ReserveFile &quot;welcome.ini&quot;<br />
ReserveFile &quot;heading_welcome.bmp&quot;<br />
!insertmacro XPUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
Section &quot;Dummy Section&quot; SecDummy<br />
SectionEnd<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
FunctionEnd<br />
<br />
Function CustomPageA<br />
  !insertmacro XPUI_INSTALLOPTIONS_EXTRACT &quot;welcome.ini&quot;<br />
  File &quot;/oname=$PLUGINSDIR\image.bmp&quot; &quot;heading_welcome.bmp&quot;<br />
  !insertmacro XPUI_HEADER_TEXT &quot;&quot; &quot;&quot;<br />
  !insertmacro XPUI_INSTALLOPTIONS_WRITE &quot;welcome.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;$PLUGINSDIR\image.bmp&quot;<br />
  !insertmacro XPUI_INSTALLOPTIONS_DISPLAY &quot;welcome.ini&quot;<br />
FunctionEnd<br />
<br />
<br />
INI:<br />
<br />
[Settings]<br />
NumFields=1<br />
<br />
[Field 1]<br />
Type=Bitmap<br />
Left=0<br />
Right=140<br />
Top=0<br />
Bottom=300<br />
Flags=TRANSPARENT</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th June 2007, 22:38</div></div><div class="posttext">What happens if you don't use Flags=TRANSPARENT?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fishsauce</div><div class="date">28th June 2007, 23:46</div></div><div class="posttext">Oh, there we go... it works now!  *kicks himself for not trying out something so simple first*<br />
<br />
It's cut off on the left but I'm pretty sure I can fix that with a bit of tweaking the left/right arguments in the INI.<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th June 2007, 08:17</div></div><div class="posttext">What exactly do you mean by crashing? Can you attach the bitmap?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>