<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" big install.exe - slow process, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  big install.exe - slow process NSIS Discussion" />
	
	<title> big install.exe - slow process [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  big install.exe - slow process</div>
<hr />
<div class="pda"><a href="t-202654.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202654">big install.exe - slow process</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 08:29</div></div><div class="posttext">Hi all,<br />
<br />
I have a problem. My install.exe is 560MB. It's very slow, when I run it, about 1 min till the splash screen appear. Until that, there's no feedback to the user. It's very annoying. Is there any solution?<br />
<br />
TIA<br />
<br />
PS: sorry for m√≠ poor english...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 09:49</div></div><div class="posttext">NSIS Help, 4.9.1.7 ReserveFile<br />
Use forum Search for ReserveFile free samples :)  http://forums.winamp.com/search.php</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 10:35</div></div><div class="posttext">Originally posted by Takhir <br />
NSIS Help, 4.9.1.7 ReserveFile<br />
Use forum Search for ReserveFile free samples :)  http://forums.winamp.com/search.php <br />
<br />
Thannks, but there's lot of topic, and I have no time, sorry for this... What is the right metod? <br />
<br />
ReserveFile /r &quot;install\*&quot; ?<br />
<br />
And where? In the init, or...<br />
<br />
Sorry again for the lame question...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 10:55</div></div><div class="posttext">Thread you need http://forums.winamp.com/showthread.php?s=&amp;threadid=197394&amp;highlight=ReserveFile+splash<br />
<br />
Add ReserveFile instruction on the top of script (not in function or section). Reserve splash image, AdvSplash.dll and sound file (if any) - only files you want to extract first (not *).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bluenet</div><div class="date">21st December 2004, 11:00</div></div><div class="posttext">ReserveFile use for file or plugins use in .onInit Function, not all files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 11:22</div></div><div class="posttext">Thanks for the answers, but it doesn't work. <br />
<br />
I put this in the very beginning of the script:<br />
<br />
ReserveFile &quot;${NSISDIR}\Plugins\advsplash.dll&quot;<br />
ReserveFile &quot;install\pix\setup.bmp&quot;<br />
<br />
If I start the install.exe, there's no splash screen, and after the one minute &quot;silent&quot; initialization (decompression?), there's no splash screen anymore... gone. <br />
<br />
Still, it's a _very_ slow process, if I make a banner (for example, &quot;please wait...&quot;), it will be good, I think, but...<br />
<br />
With the IS or MSI, it's a fast process. The install.exe is 1-2 Mb, the data is in cabinet files. With NSIS, it's only one file, the istall.exe, it's 560 MB (the uncompressed size is 1,1 GB). And it is a very, very slow process... :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">21st December 2004, 11:29</div></div><div class="posttext">Mate, try putting absolute pathnames for the ReserveFiles. You specify the path they are on your system, not the target install path, obviously.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 11:40</div></div><div class="posttext">I guess something is wrong in your script if image not appears at all. This was tested and used many times.<br />
<br />
ReserveFile &quot;${NSISDIR}\Plugins\advsplash.dll&quot;<br />
ReserveFile &quot;nsis.bmp&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 11:50</div></div><div class="posttext">Try using SetOutPath $PLUGINSDIR before using ReserveFile.<br />
Then with the splash dll call, $PLUGINSDIR\splash<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 11:55</div></div><div class="posttext">I've try this:<br />
<br />
ReserveFile &quot;${NSISDIR}\Plugins\Banner.dll&quot;<br />
<br />
Function .onInit<br />
Banner::show /NOUNLOAD &quot;Please wait...&quot;<br />
Banner::destroy<br />
FunctionEnd<br />
<br />
Not working...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 11:56</div></div><div class="posttext">Name &quot;AdvSplash test&quot;<br />
OutFile &quot;AdvSplash Test.exe&quot;<br />
<br />
ReserveFile &quot;${NSISDIR}\Plugins\advsplash.dll&quot;<br />
ReserveFile &quot;nsis.bmp&quot;<br />
<br />
Function .onInit<br />
        InitPluginsDir<br />
        SetOutPath $PLUGINSDIR<br />
        File &quot;nsis.bmp&quot;<br />
        advsplash::show 1000 600 400 -1 &quot;$PLUGINSDIR\nsis&quot;<br />
        Pop $0          ; $0 has '1' if the user closed the splash screen early,<br />
        Delete &quot;$PLUGINSDIR\nsis.bmp&quot;<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 12:04</div></div><div class="posttext">Thanks, but let's forget this splash... The advsplash is working, but just afterthe 1 minute process. Until that, the user don't know, what's goin' on, and will start again and again the install.exe. That's my problem. Click install.exe -&gt; wait one minute -&gt; advsplash, install start. I will try the banner.dll with the reservefile, maybe it's working anyhow. But still, the process is slow. This one minute silent something is annoying...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 12:11</div></div><div class="posttext">Are you using BGGradient by any chance?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 12:16</div></div><div class="posttext">Originally posted by Afrow UK <br />
Are you using BGGradient by any chance?<br />
<br />
-Stu <br />
<br />
No. I don't now, what's BGGradient, but yes, I read that post. I'm through all the post from the last 45 days in the forum now...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 12:20</div></div><div class="posttext">You should change this:<br />
Function .onInit<br />
Banner::show /NOUNLOAD &quot;Please wait...&quot;<br />
Banner::destroy<br />
FunctionEnd<br />
<br />
Stick Banner::destroy in the Pre function for your Welcome page.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 12:57</div></div><div class="posttext">thanks, but my core problem is still exist:<br />
<br />
start the install exe -&gt; one minute hourglass -&gt; starting the .onInit, with the banner, advsplash, bgimage and all the initialization stuff, with the welcome page. So, I want a banner or anything right after I (or the user) click on the install.exe... Not one minute after, because it doesn't make sense...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 14:16</div></div><div class="posttext">How this happens on my comp: installer first makes integrity check (banner with % progress), after this image banner appears, and I can hear file copy disk activity (I used File with 200 MB dir in .onInit, change or comment Sleep in the script), finally installer dialog replaces banner. <br />
NSIS 2.03 and Win2K Server.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 15:19</div></div><div class="posttext">Thank you, Takhir, I've tried it - doesn't work...<br />
<br />
start install.exe -&gt; one minute hourglass -&gt; your image appearing, then the welcome page. It's equivalent with the advsplash.dll.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">21st December 2004, 16:35</div></div><div class="posttext">&quot;Please wait while setup is loading. Verifying installer xx%&quot; - banner should be visible when installer checks package integrity. This may take one minute or less for 1 GB package (image banner in my test appears even faster if compression was used, after 1-3 seconds of &quot;Verifying&quot; banner or even immediatelly after installer launch). And this is a problem - why &quot;verifying&quot; banner is not visible on your system? Are you using stable NSIS version? Did you tested it with 2.02?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 17:00</div></div><div class="posttext">Originally posted by Takhir <br />
&quot;Please wait while setup is loading. Verifying installer xx%&quot; - banner should be visible when installer checks package integrity. This may take one minute or less for 1 GB package (image banner in my test appears even faster if compression was used, after 1-3 seconds of &quot;Verifying&quot; banner or even immediatelly after installer launch). And this is a problem - why &quot;verifying&quot; banner is not visible on your system? Are you using stable NSIS version? Did you tested it with 2.02?  <br />
<br />
Yes, this is the main problem. This verifying not the CRC check? Because I set it off (CRCCheck off). And there's something with the &quot;solid compression&quot; too, as I learnt in the posts of the forum, but I don't understand, what is it (it seems, bzip2 and lzma is the solid, but I'm using the zlib, 'cause the bzip2 and the lzma have very slow compression (bzip2 about 40min, lzma 1-2 hour), and the install.exe with the bzip2 compression doesn't start... (hourglass, 3 minutes winchester work, then nothing, must kill the process. <br />
<br />
I'm using the 2.03 version, the OS is XP SP2 (maybe the SP2 is the guilty...)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">probee</div><div class="date">21st December 2004, 17:28</div></div><div class="posttext">Okay, I've tested it: the &quot;Please wait... verifying&quot; IS the CRC check. It's another annoying process after the one minute hourglass... I'll give it up...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iostriz</div><div class="date">22nd December 2004, 13:59</div></div><div class="posttext">I've just created 550MB install file and everything works as expected, that is: &quot;Verifying installer %xx&quot;.<br />
Here is attached nsi script that does that with no probs.<br />
<br />
Another problem is that I cannot put REALLY big file into setup (e.g. 3.5 GB) because of:<br />
&quot;failed creating mmap of &quot;c:\really big file.avi&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">23rd December 2004, 07:21</div></div><div class="posttext">int (2 GB) limitations in mmap.c/h looks not reasonable, CreateFileMapping (and other calls and structs) supports big files. NSIS developers can clean code and move size limit to DWORD (4 GB) easy. This may also require compression code check out, but this is not a problem too. I guess.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>