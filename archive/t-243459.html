<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A proper tutorial for password protect?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A proper tutorial for password protect? NSIS Discussion" />
	
	<title> A proper tutorial for password protect? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A proper tutorial for password protect?</div>
<hr />
<div class="pda"><a href="t-243459.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=243459">A proper tutorial for password protect?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 18:51</div></div><div class="posttext">Hi pros,<br />
<br />
I been searching out but then as I am a noob to this, I am unable to understand how to create a password custom page, the resource in here do not have sufficient tutorials on creating it.<br />
<br />
Can anyone create a detail tutorial on Password Custom Page in ModernUI.nsi script or something which can be easily set just by changing the password filled in the example, so that when user starts to load the installer it will prompt for a correct password before proceeding<br />
<br />
And More tutorials how you really configure the InstallOptions and .ini files to react with the password custom page.<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th April 2006, 18:55</div></div><div class="posttext">http://nsis.sf.net/File:PassDialog.zip<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 19:26</div></div><div class="posttext">this is one excellent tutorial thanks alot I understand alot from this one.<br />
<br />
Thanks alot man Afrow UK your the man, if only there was a better navigation to this resource everyone could have done it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 20:10</div></div><div class="posttext">Hi, Afrow UK <br />
<br />
More questions regarding UserPass.nsi<br />
<br />
How do I add more username and password ?<br />
<br />
Which files should I be editing ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th April 2006, 20:20</div></div><div class="posttext">Depends how you want to store the usernames and passwords.<br />
In UserPass.nsi the username and password are hardcoded into the installer with two !defines. If you want more usernames and passwords, add more defines and change the code that compares the inputted usernames and passwords.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 20:43</div></div><div class="posttext">I edited the UserPass.nsi a bit but one problem , when I tried the first set , Jeff , blah it did not work, but when I tried the second set , stealth , zero it work.<br />
<br />
Could you tell me which part I am wrong in this script<br />
<br />
## Include headers<br />
!include MUI.nsh<br />
<br />
## Pages<br />
 !insertmacro MUI_PAGE_WELCOME<br />
 Page Custom passwordPage passwordPageLeave<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW showComponents<br />
 !insertmacro MUI_PAGE_COMPONENTS<br />
 !insertmacro MUI_PAGE_INSTFILES<br />
<br />
## Password is<br />
!define Password &quot;blah&quot;<br />
!define Username &quot;Jeff&quot;<br />
!define Password1 &quot;zero&quot;<br />
!define Username1 &quot;stealth&quot;<br />
<br />
## Control ID's<br />
!define IDC_USERNAME 1210<br />
!define IDC_PASSWORD 1211<br />
!define IDC_USERNAME1 1216<br />
!define IDC_PASSWORD1 1217<br />
 <br />
<br />
## Languages<br />
!insertmacro MUI_LANGUAGE English<br />
<br />
## Displays the password dialog<br />
Function passwordPage<br />
<br />
 !insertmacro MUI_HEADER_TEXT &quot;Enter Username &amp;&amp; Password&quot; &quot;Enter your username and password to continue.&quot;<br />
<br />
 PassDialog::InitDialog /NOUNLOAD UserPass<br />
  Pop $R0 # Page HWND<br />
<br />
  GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
  SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
  GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
  SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
<br />
 PassDialog::Show<br />
<br />
FunctionEnd<br />
<br />
## Validate password<br />
Function passwordPageLeave<br />
<br />
 ## Pop password &amp; username from stack<br />
 Pop $R0<br />
 Pop $R1<br />
 POP $R2<br />
 POP $R3<br />
<br />
 ## A bit of validation<br />
 StrCmp $R0 '${Username}' +4 +2<br />
 StrCmp $R1 '${Password}' +3<br />
 StrCmp $R2 '${Username1}' +4 +2<br />
 StrCmp $R3 '${Password1}' +3<br />
<br />
  MessageBox MB_OK|MB_ICONEXCLAMATION &quot;The username is '${Username}' and the password is '${Password}', fool!&quot;<br />
  Abort<br />
<br />
 ## Display the password<br />
 MessageBox MB_OK|MB_ICONINFORMATION &quot;The username and password is correct: $R0, $R1!&quot;<br />
<br />
FunctionEnd<br />
<br />
Function showComponents<br />
<br />
 ## Disable the Back button<br />
 GetDlgItem $R0 $HWNDPARENT 3<br />
 EnableWindow $R0 0<br />
<br />
FunctionEnd<br />
<br />
## Just a dummy section<br />
Section 'A section'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th April 2006, 20:48</div></div><div class="posttext">## Password is<br />
!define Username1 &quot;Jeff&quot;<br />
!define Password1 &quot;blah&quot;<br />
!define Username2 &quot;stealth&quot;<br />
!define Password2 &quot;zero&quot;<br />
<br />
...<br />
<br />
## Validate password<br />
Function passwordPageLeave<br />
<br />
## Pop password &amp; username from stack<br />
Pop $R0<br />
Pop $R1<br />
<br />
## A bit of validation<br />
StrCmp $R0 '${Username1}' 0 +2<br />
StrCmp $R1 '${Password1}' Good Bad<br />
StrCmp $R2 '${Username2}' 0 +2<br />
StrCmp $R3 '${Password2}' Good Bad<br />
<br />
Bad:<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;The entered username or password is incorrect!&quot;<br />
Abort<br />
<br />
Good:<br />
<br />
FunctionEnd<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 20:59</div></div><div class="posttext">hey thanks but something is wrong again, when I enter the first set , Jeff , blah I am able to access the sections but when I enter the second set , stealth,zero it was incorrect and cannot access<br />
<br />
## Include headers<br />
!include MUI.nsh<br />
<br />
## Pages<br />
 !insertmacro MUI_PAGE_WELCOME<br />
 Page Custom passwordPage passwordPageLeave<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW showComponents<br />
 !insertmacro MUI_PAGE_COMPONENTS<br />
 !insertmacro MUI_PAGE_INSTFILES<br />
<br />
<br />
## Password is<br />
!define Username1 &quot;Jeff&quot;<br />
!define Password1 &quot;blah&quot;<br />
!define Username2 &quot;stealth&quot;<br />
!define Password2 &quot;zero&quot;<br />
<br />
## Control ID's<br />
!define IDC_USERNAME 1210<br />
!define IDC_PASSWORD 1211<br />
 <br />
<br />
## Languages<br />
!insertmacro MUI_LANGUAGE English<br />
<br />
## Displays the password dialog<br />
Function passwordPage<br />
<br />
 !insertmacro MUI_HEADER_TEXT &quot;Enter Username &amp;&amp; Password&quot; &quot;Enter your username and password to continue.&quot;<br />
<br />
 PassDialog::InitDialog /NOUNLOAD UserPass<br />
  Pop $R0 # Page HWND<br />
<br />
  GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
  SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
  GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
  SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
<br />
 PassDialog::Show<br />
<br />
FunctionEnd<br />
<br />
 ## Validate password<br />
Function passwordPageLeave<br />
<br />
 ## Pop password &amp; username from stack<br />
 Pop $R0<br />
 Pop $R1<br />
<br />
<br />
## A bit of validation<br />
StrCmp $R0 '${Username1}' 0 +2<br />
StrCmp $R1 '${Password1}' Good Bad<br />
StrCmp $R2 '${Username2}' 0 +2<br />
StrCmp $R3 '${Password2}' Good Bad<br />
<br />
<br />
Bad:<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;The entered username or password is incorrect!&quot;<br />
Abort<br />
<br />
Good:<br />
<br />
FunctionEnd<br />
<br />
<br />
Function showComponents<br />
<br />
 ## Disable the Back button<br />
 GetDlgItem $R0 $HWNDPARENT 3<br />
 EnableWindow $R0 0<br />
<br />
FunctionEnd<br />
<br />
## Just a dummy section<br />
Section 'A section'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">14th April 2006, 21:03</div></div><div class="posttext">solved<br />
<br />
StrCmp $R2 '${Username2}' 0 +2<br />
StrCmp $R3 '${Password2}' Good Bad<br />
<br />
should be replaced as<br />
<br />
StrCmp $R0 '${Username2}' 0 +2<br />
StrCmp $R1 '${Password2}' Good Bad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th April 2006, 22:39</div></div><div class="posttext">Sorry yes it should be. I used the code from your last post as a base.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">17th April 2006, 16:47</div></div><div class="posttext">Hi there Afrow UK <br />
<br />
Just wondering,<br />
<br />
Is there a way to allow<br />
<br />
!define Username1 &quot;Jeff&quot;<br />
!define Password1 &quot;blah&quot;<br />
!define Username2 &quot;stealth&quot;<br />
!define Password2 &quot;zero&quot;<br />
<br />
to be in store somewhere or<br />
<br />
## A bit of validation<br />
StrCmp $R0 '${Username1}' 0 +2<br />
StrCmp $R1 '${Password1}' Good Bad<br />
StrCmp $R0 '${Username2}' 0 +2<br />
StrCmp $R1 '${Password2}' Good Bad<br />
<br />
to be store somewhere instead of being added to the script itself ???<br />
<br />
<br />
Means It will still be read when the user type in the username and password, but I wish to add something like a database. If I had many many more clients, I will be able to add into it instead of using it again and again on different installers.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>