<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Array class, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Array class NSIS Discussion" />
	
	<title> Array class [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Array class</div>
<hr />
<div class="pda"><a href="t-256149.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=256149">Array class</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rajiv naravane</div><div class="date">25th September 2006, 02:24</div></div><div class="posttext">${myArray-&gt;Exists} Value GotoIfExists GotoIfNotExists<br />
and<br />
${myArray-&gt;Destroy} <br />
methods do not seem to compile<br />
Here is my code in essence:<br />
In Utils.nsh, I have these globals<br />
<br />
## Array creation<br />
${Array} arrayIndexNames<br />
${Array} arrayIndexAttribs<br />
<br />
then I have<br />
Function InitUtils<br />
	${arrayIndexNames-&gt;Init}<br />
	${arrayIndexAttribs-&gt;Init}<br />
FunctionEnd<br />
<br />
The client of this class calls InitUtils() in<br />
.onInit() call. <br />
<br />
I wrote UninitUtils() which would call Destroy() and tried calling UninitUtils() from .onInstFailed(), .onInstSuccess() etc. I get compiler error</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th September 2006, 12:59</div></div><div class="posttext">Please attach your complete script.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evin</div><div class="date">26th October 2006, 09:01</div></div><div class="posttext">...<br />
 File /oname=$PLUGINSDIR\w03b.pat texture\w03b.pat<br />
  vpatch::vpatchfile &quot;$PLUGINSDIR\w03b.pat&quot; &quot;$INSTDIR\cdrom.img\stage\w03b\cache.qar&quot; &quot;$INSTDIR\cdrom.img\stage\w03b\cache.tmp&quot;<br />
  Pop $R0<br />
  Strcmp $R0 &quot;OK&quot; 0 +3<br />
  Delete &quot;$INSTDIR\cdrom.img\stage\w03b\cache.qar&quot;<br />
  Rename &quot;$INSTDIR\cdrom.img\stage\w03b\cache.tmp&quot; &quot;$INSTDIR\cdrom.img\stage\w03b\cache.qar&quot;<br />
 File /oname=$PLUGINSDIR\w04a.pat texture\w04a.pat<br />
  vpatch::vpatchfile &quot;$PLUGINSDIR\w04a.pat&quot; &quot;$INSTDIR\cdrom.img\stage\w04a\cache.qar&quot; &quot;$INSTDIR\cdrom.img\stage\w04a\cache.tmp&quot;<br />
  Pop $R0<br />
  Strcmp $R0 &quot;OK&quot; 0 +3<br />
  Delete &quot;$INSTDIR\cdrom.img\stage\w04a\cache.qar&quot;<br />
  Rename &quot;$INSTDIR\cdrom.img\stage\w04a\cache.tmp&quot; &quot;$INSTDIR\cdrom.img\stage\w04a\cache.qar&quot;<br />
 File /oname=$PLUGINSDIR\w04b.pat texture\w04b.pat<br />
  vpatch::vpatchfile &quot;$PLUGINSDIR\w04b.pat&quot; &quot;$INSTDIR\cdrom.img\stage\w04b\cache.qar&quot; &quot;$INSTDIR\cdrom.img\stage\w04b\cache.tmp&quot;<br />
  Pop $R0<br />
  Strcmp $R0 &quot;OK&quot; 0 +3<br />
  Delete &quot;$INSTDIR\cdrom.img\stage\w04b\cache.qar&quot;<br />
  Rename &quot;$INSTDIR\cdrom.img\stage\w04b\cache.tmp&quot; &quot;$INSTDIR\cdrom.img\stage\w04b\cache.qar&quot;<br />
 File /oname=$PLUGINSDIR\w04c.pat texture\w04c.pat<br />
  vpatch::vpatchfile &quot;$PLUGINSDIR\w04c.pat&quot; &quot;$INSTDIR\cdrom.img\stage\w04c\cache.qar&quot; &quot;$INSTDIR\cdrom.img\stage\w04c\cache.tmp&quot;<br />
  Pop $R0<br />
  Strcmp $R0 &quot;OK&quot; 0 +3<br />
  Delete &quot;$INSTDIR\cdrom.img\stage\w04c\cache.qar&quot;<br />
  Rename &quot;$INSTDIR\cdrom.img\stage\w04c\cache.tmp&quot; &quot;$INSTDIR\cdrom.img\stage\w04c\cache.qar&quot;<br />
...<br />
<br />
How can I simplify this code? I make a try of array, but does't work. I don't understand, how work the array.<br />
<br />
Just this scripts changed in the code: w03b, w04a, w04b, w04c<br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th October 2006, 12:35</div></div><div class="posttext">First, you could create a macro to simplify that (I don't know if it works, but you can get the idea...):<br />
<br />
<br />
!macro Test FileName<br />
  File /oname=$PLUGINSDIR\${FileName}.pat \<br />
   texture\${FileName}.pat<br />
  vpatch::vpatchfile &quot;$PLUGINSDIR\${FileName}.pat&quot; \<br />
   &quot;$INSTDIR\cdrom.img\stage\${FileName}\cache.qar&quot; \<br />
   &quot;$INSTDIR\cdrom.img\stage\${FileName}\cache.tmp&quot;<br />
Pop $R0<br />
Strcmp $R0 &quot;OK&quot; 0 +3<br />
  Delete &quot;$INSTDIR\cdrom.img\stage\${FileName}\cache.qar&quot;<br />
  Rename &quot;$INSTDIR\cdrom.img\stage\${FileName}\cache.tmp&quot; \<br />
   &quot;$INSTDIR\cdrom.img\stage\${FileName}\cache.qar&quot;<br />
!macroend<br />
<br />
!insertmacro Test w03b<br />
!insertmacro Test w04a<br />
!insertmacro Test w04b<br />
!insertmacro Test w04c<br />
<br />
<br />
Second, I don't know much about arrays... =(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evin</div><div class="date">26th October 2006, 12:45</div></div><div class="posttext">Hmm... good idea :) Thx<br />
I try it.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>