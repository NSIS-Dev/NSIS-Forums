<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom page with checkbox and disabled &quot;Next&quot; button, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom page with checkbox and disabled &quot;Next&quot; button NSIS Discussion" />
	
	<title> Custom page with checkbox and disabled &quot;Next&quot; button [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom page with checkbox and disabled &quot;Next&quot; button</div>
<hr />
<div class="pda"><a href="t-223087.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223087">Custom page with checkbox and disabled &quot;Next&quot; button</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">snuden9</div><div class="date">1st August 2005, 16:29</div></div><div class="posttext">I am trying to create a custom page with behaviour like the license page with checkbox. I managed to create the page with the next button disable, but when I tick the checkbox the installer goes to the next page<br />
<br />
How do I change the behaviour so when entering the page the &quot;Next&quot; button is disabled until the checkbox is ticked?<br />
<br />
/Soren</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">1st August 2005, 23:39</div></div><div class="posttext">You didn't say whether or not you were using MUI, so I'll just assume that you are...<br />
<br />
Here's what I use on one of my installers.  $hwnd and $hwnd_btn are 2 variables I use for holding dialog handles.<br />
<br />
In my custom page display function, I use this: <br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG 'CustomPage.ini'<br />
pop $hwnd ; handle to the window. (you may not need this, but I'd still POP anyway just to take it off the stack)<br />
GetDlgItem $hwnd_btn $HWNDPARENT 1 ; This returns a handle to the NEXT button.<br />
EnableWindow $hwnd_btn 0 ; this should disable the next button.<br />
!insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
Then, in your page leave function, check the state of the checkbox and display the next button if checked by using the command EnableWindows $hwnd_btn 1. <br />
<br />
Note: You'd have to remember to use the NOTIFY flag on the checkbox.  Otherwise, your script would never run the page's leave function.<br />
<br />
Edit:<br />
You should also remember to hide the NEXT button in your page leave function if the user decided to un-check the box after it's been checked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">snuden9</div><div class="date">2nd August 2005, 09:23</div></div><div class="posttext">Thanx for the help. I am using MUI. I am fairly new to NSIS installer, so if you could provide some more example code I would be greatfull.<br />
<br />
When I put your code into my function it says:<br />
<br />
Usage: GetDlgItem $(user_var: handle output) dialog item_id</div></div><hr />


<div class="post"><div class="posttop"><div class="username">snuden9</div><div class="date">2nd August 2005, 18:14</div></div><div class="posttext">I got it working partly. When I put a tick in the checkbox it jumps to the next page instead of just enabling the Next button. If you take a look at the License page with checkbox, you can toggle the Next button by checking and unchecking the checkbox. Any ideas? <br />
<br />
Function Upgrade<br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG 'Upgrade.ini'<br />
pop $hwnd <br />
GetDlgItem $hwnd_btn $HWNDPARENT 1<br />
EnableWindow $hwnd_btn 0 <br />
!insertmacro MUI_INSTALLOPTIONS_SHOW<br />
FunctionEnd<br />
<br />
Function UpgradeLeave<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R1 &quot;Upgrade.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
StrCmp $R1 &quot;1&quot; Enable Disable<br />
Enable:<br />
EnableWindow $hwnd_btn 1<br />
Goto Exit<br />
Disable:<br />
Abort<br />
Exit:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">4th August 2005, 04:19</div></div><div class="posttext">In your UpgradeLeave function, you need read the state from the 'settings' section to find out if the check box was checked or the next button was pressed. In addtion, you don't want to exit if someone clicks the check, but when they click &quot;next&quot;.<br />
<br />
Based on your example, I'll assume that the check box is field #2.  Your function would therefore be something like this:<br />
<br />
Function UpgradeLeave<br />
     !insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;Upgrade.ini&quot; &quot;settings&quot; &quot;State&quot;<br />
     StrCmp $R0 0 Exit ; exit if the next button was pressed.  Otherwise, proceed:<br />
     !insertmacro MUI_INSTALLOPTIONS_READ $R1 &quot;Upgrade.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
     StrCmp $R1 1 Enable Disable<br />
  Enable:<br />
     ; Box is checked, so enable the next button:<br />
     EnableWindow $hwnd_btn 1<br />
     abort<br />
  Disable:<br />
    ; Box is UN-checked, so disable the next button:<br />
    EnableWindow $hwnd_btn 0<br />
    Abort<br />
  Exit:<br />
    ; user pressed 'next' so exit!<br />
FunctionEnd<br />
<br />
Notice how the EXIT label is never reached unless the user actually clicks 'next'.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>