<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Aborting install due to error, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Aborting install due to error NSIS Discussion" />
	
	<title> Aborting install due to error [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Aborting install due to error</div>
<hr />
<div class="pda"><a href="t-255457.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255457">Aborting install due to error</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">basilisk561</div><div class="date">14th September 2006, 06:02</div></div><div class="posttext">I'm trying to call Abort during the section execution and the install files UI (MUI) goes into an aborted state, and the installation progress halts, but the Next button doesn't light back up.<br />
<br />
I'd like for the user to be able to click Next and then get the finish screen with its labels changed to indicate a failed installation.<br />
<br />
What's up with that Next button and what's the best way to handle this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th September 2006, 09:40</div></div><div class="posttext">You should be able to re-enable the Next button using this code:<br />
<br />
GetDlgItem $R0 $HWNDPARENT 1 ; 1 = Next button<br />
EnableWindow $R0 1 ; 1 = enable<br />
<br />
<br />
As for why it gets disabled - dunno.  Would seem odd as that would mean an aborted installation is stuck on that page with nowhere to go? :&gt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">basilisk561</div><div class="date">14th September 2006, 13:22</div></div><div class="posttext">Originally posted by Animaether <br />
You should be able to re-enable the Next button using this code:<br />
<br />
GetDlgItem $R0 $HWNDPARENT 1 ; 1 = Next button<br />
EnableWindow $R0 1 ; 1 = enable<br />
<br />
<br />
As for why it gets disabled - dunno.  Would seem odd as that would mean an aborted installation is stuck on that page with nowhere to go? :&gt;  <br />
I've tried calling this immediately before the call to Abort and it doesn't seem to do anything.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th September 2006, 13:38</div></div><div class="posttext">I think you'd want to call it -before- Abort, because anything after Abort gets ignored anyway;<br />
&quot;Cancels the install, stops execution of script, and displays user_message in the status display.&quot;<br />
<br />
So hence.. no idea really what would happen if you enable that button, abort, and try to click it ;)<br />
<br />
I'd check into &quot;MUI_CUSTOMFUNCTION_ABORT function&quot; and see if you can handle the abort more cleanly there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">basilisk561</div><div class="date">14th September 2006, 13:47</div></div><div class="posttext">Re-read, I WAS calling that code before Abort. :)<br />
<br />
I've tried MUI_CUSTOMFUNCTION_ABORT and this isn't called when the Abort call is made, it is only called when the user clicks Cancel at any point in the installation.<br />
<br />
Any other ideas?<br />
<br />
TIA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">14th September 2006, 17:55</div></div><div class="posttext">hrm. funky.<br />
<br />
I tossed the code into a &quot;!define MUI_PAGE_CUSTOMFUNCTION_LEAVE blabla&quot;, ending with an MB_OK messagebox.  The button enables.. but as soon as I click on the messagebox OK, the button disables again %)<br />
<br />
So much for my thinking it should be simple.<br />
<br />
Whatever you need to be doing with the Abort, perhaps it's better done another way -without- using Abort? ( presuming NSIS automatically does things when Abort is called that you don't want happening )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">basilisk561</div><div class="date">14th September 2006, 18:43</div></div><div class="posttext">Well, actually, Abort does do some things that I *do* desire, like changing the UI text in the installfiles screen to indicate that a problem occurred and that the installation was aborted.<br />
<br />
Also, without the Abort call (like when I tried to just skip the rest of the steps in the component section), the installer details will always show Complete as the last step in the install.  This is misleading because it kind of indicates that the install was suceessful.<br />
<br />
Ideally, I want this:<br />
<br />
Error occurs --&gt;<br />
Installfiles UI updated with abort indicators --&gt;<br />
User clicks Next button --&gt;<br />
Finish screen is displayed with alternate failure text</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">15th September 2006, 08:26</div></div><div class="posttext">I've been poking and for some reason it just looks like calling Abort kills things and most of the Install page reverts to defaults even after you change things.  I, for one, am at a loss.  I could suggest displaying a custom page inbetween if there is an error that shows that there was an error installing, but I suspect you want the DetailsList in view.<br />
<br />
Anybody else have any ideas?  I'm confounded and surprised that the Install page is behaving the way it is.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">basilisk561</div><div class="date">15th September 2006, 14:22</div></div><div class="posttext">I'm a bit miffed as well.<br />
<br />
Anyone have any suggestions here?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th September 2006, 14:56</div></div><div class="posttext">You can use either of these two:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=224387&amp;highlight=finish+abort<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=230683&amp;highlight=finish+abort<br />
<br />
You can also search the forum for the original threads leading to these. They contain some information about this topic, if I remember correctly.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>