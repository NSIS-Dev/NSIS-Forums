<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Simple example to conditionally create a shortcut?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Simple example to conditionally create a shortcut? NSIS Discussion" />
	
	<title> Simple example to conditionally create a shortcut? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Simple example to conditionally create a shortcut?</div>
<hr />
<div class="pda"><a href="t-128084.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=128084">Simple example to conditionally create a shortcut?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sauroneru</div><div class="date">11th March 2003, 17:43</div></div><div class="posttext">I have an optional section and a &quot;Create shortcuts&quot; section.  I would like to create a shortcut for the files installed in the optional section only if it was selected to install.  I know this is simple, but I've searched and I can't find a simple example that shows how to do this, and I'm not familiar enough with the scripting language to figure it out.  Can someone post an example to fill in the blanks?<br />
<br />
Section &quot;Optional&quot;<br />
  File &quot;opt.exe&quot;<br />
  ; What do I add to create some global variable?<br />
SectionEnd<br />
<br />
Section &quot;Shortcuts&quot;<br />
  CreateDirectory &quot;$SMPROGRAMS\Ex&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\Ex\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot; &quot;&quot; &quot;&quot; 0<br />
  ; Now what do I add to conditionally create this shortcut?<br />
  CreatShortCut &quot;$SMPROGRMAMS\Ex\Opt.lnk&quot; &quot;$INSTDIR\opt.exe&quot; &quot;&quot; &quot;&quot; 0<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">11th March 2003, 18:32</div></div><div class="posttext">!include &quot;Sections.nsh&quot;<br />
<br />
Section &quot;Optional&quot; SecOptional<br />
  File &quot;opt.exe&quot;<br />
SectionEnd<br />
<br />
Section &quot;Shortcuts&quot;<br />
<br />
  CreateDirectory &quot;$SMPROGRAMS\Ex&quot;<br />
  CreateShortcut &quot;$SMPROGRAMS\Ex\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot; &quot;&quot; &quot;&quot; 0<br />
<br />
  SectionGetFlags ${SecOptional} $R0<br />
  IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
  StrCmp $R0 ${SF_SELECTED} &quot;&quot; +2<br />
    CreateShortcut &quot;$SMPROGRMAMS\Ex\Opt.lnk&quot; &quot;$INSTDIR\opt.exe&quot; &quot;&quot; &quot;&quot; 0<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sauroneru</div><div class="date">11th March 2003, 18:51</div></div><div class="posttext">Works great.  I'm using the ModernUI, and to include sections.nsh I had to comment out the <br />
<br />
!define HWND_BROADCAST 0xFFFF<br />
<br />
line, as the installer gave an error (&quot;HWND_BROADCAST&quot; already defined!).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th March 2003, 20:58</div></div><div class="posttext">Joost fixed that, thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>