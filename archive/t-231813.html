<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Silent install and the SelectSection macro, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Silent install and the SelectSection macro NSIS Discussion" />
	
	<title> Silent install and the SelectSection macro [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Silent install and the SelectSection macro</div>
<hr />
<div class="pda"><a href="t-231813.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=231813">Silent install and the SelectSection macro</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">flyakite</div><div class="date">24th November 2005, 09:22</div></div><div class="posttext">Okay, so I've just discovered that .onGUIInit and page callbacks do not work during a silent install.<br />
<br />
What I am trying to do is check command line parameters for a silent install, and based on those parameters, use the SelectSection macro to turn on a section (they are all off by default).  However I have yet to get it to work silently.<br />
<br />
What would be the proper way to achieve this silently?  I really want to avoid having the sections checked by default and then using IfSilent within the section to skip the code if the parameter was not given.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2005, 13:35</div></div><div class="posttext">There's no need to check the command line parameters manually, you can use IfSilent. That, along with UnselectSection macro from Sections.nsh, should be enough. See the attached file for an example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flyakite</div><div class="date">24th November 2005, 16:24</div></div><div class="posttext">Sorry, I didn't mean that I was checking if the installer was actually silent, I meant I was checking if a command line parameter existed, and then enabling the section via SelectSection.  However, this is not working when silent.<br />
<br />
So like /feature1, /feature2 etc.<br />
<br />
If /feature1 switch exists, then I use SelectSection ${feature1} etc.<br />
<br />
However, this is NOT working for me in .onInit, and I have it placed as the last code in .onInit.  To check, I even stripped out all the parameter checking, and just did:<br />
<br />
!insertmacro SelectSection ${feature1}.  The section is off by default, and whether I run it via command line or just double click the icon, when it gets to the component page that section is still not turned on.<br />
<br />
I added a MUI_CUSTOMFUNCTION_GUIINIT command, stuck the SelectSection macro in a function that it called, and it DID work, but of course not when silent, only when ran by just double clicking the icon.<br />
<br />
<br />
So something, somewhere is not letting the SelectSection, ReverseSection, and UnselectSection macros work during .oninit for me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2005, 16:31</div></div><div class="posttext">Are you sure ${feature1} is defined at that point of the script? MessageBox it and make sure it's not empty.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flyakite</div><div class="date">24th November 2005, 16:53</div></div><div class="posttext">Thank you kichik.<br />
<br />
It turns out I am an idiot.  Prior to the call at the very end of .onInit, I had a function that checked if the user was connected to the internet, if they are I returned from the function, and if they weren't I wrote to some ini files.  Since my test machine is always connected to the internet, it was always returning from the function and the SelectSection macro was never getting selected.<br />
<br />
Anyway though, I realized this and instead of using Return I did label jumps (which I should have anyway), and now it's all working.<br />
<br />
<br />
Thanks again for all your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>