<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How Can I make show up UAC with ExecWait?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How Can I make show up UAC with ExecWait? NSIS Discussion" />
	
	<title> How Can I make show up UAC with ExecWait? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How Can I make show up UAC with ExecWait?</div>
<hr />
<div class="pda"><a href="t-341912.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=341912">How Can I make show up UAC with ExecWait?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">9th February 2012, 09:18</div></div><div class="posttext">My setup needs administrator rights to be executed.<br />
In my setup I need to launch many .exe files showing the request Yes or No from UAC. Not necessarily with the request of admin username and password.<br />
I saw the UAC plugin but it should be only ansi and I'm using unicode nsis.<br />
I want to make sure that the UAC request if you want really execute that file for every file that needs admin rights that I execute.<br />
<br />
mmm ok I think that's all.<br />
Sorry again for my bad english :(<br />
Waiting for your reply<br />
Bennaloz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th February 2012, 10:10</div></div><div class="posttext">If your installer is running at admin level, all child processes will also be running at admin level. If you want a yes/no popup, you can simply use the MessageBox command before you execwait.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">9th February 2012, 10:17</div></div><div class="posttext">I saw it. When I say yes the first time uac won't ask me again. So Isn't it possible to make the uac asks for execution confirm of a child process?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th February 2012, 11:15</div></div><div class="posttext">No, not for an admin-level child process. You are correct that it is possible if you execute them at userlevel using the UAC plugin or the ShellExecAsUser plugin.<br />
<br />
..but seriously, why on earth would you want to bother your clients with loads of UAC popups? The whole point of UAC is that once it's elevated you don't need to worry anymore. If I let an installer get admin level, I don't want it to keep asking me whether I'm really sure I want to give it admin access...<br />
<br />
In my opinion, your idea will only confuse the users. They don't expect new UAC popups from your installer, so they might think that some other application (virus?) is suddenly popping up and demanding admin access.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">9th February 2012, 12:26</div></div><div class="posttext">Ok no I'm sorry misunderstood what the problem was. I'am executing the main setup with RequestExecutionLevel user and I need to exec some setups that required admin rights from it. Now those setups don't start. I have to be able to run as user some others setups with admin rights request. Nsis runAs admin plugin I don't think is what I need because for that I need to know login data and I don't know them. Anyway I didn't found any docs about it. So I need to be able to launch executable with admin rights request from a user environment.<br />
How to do it?<br />
I need something like<br />
RequestExecutionLevel user<br />
ExecWait '&quot;myapp.exe&quot; runAsAdmin &lt;parameters&gt;' $0 ;myapp can be executed only by admins<br />
<br />
Sorry for the wrong thread title and for the wrong explanation of the problem but really I didn't understood what I needed<br />
<br />
Edit: I should be able to do something as admin from a user account. (Write reg key, install files etc)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th February 2012, 15:43</div></div><div class="posttext">Why is your main installer &quot;RequestExecutionLevel user&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">9th February 2012, 15:48</div></div><div class="posttext">Just trying if it's possible do the installation from a simple user. But it's hard. I don't understand how runAs works. And a user can't do so much. I am looking for a way to do the same things maybe without asking login data. If it's possible... or maximum asking them once.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th February 2012, 16:02</div></div><div class="posttext">You already said you need to elevate child process and you should only elevate once so why not just use requestexecutionlevel admin?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">9th February 2012, 16:04</div></div><div class="posttext">Aaah... I want to be able to launch installers with admin rights request from a user level installer...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th February 2012, 16:09</div></div><div class="posttext">If you want to install your app at userlevel, and you need to install additional apps at admin level, either create two installers or use the UAC plugin or ShellExecAsUser plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th February 2012, 16:35</div></div><div class="posttext">Aaah... I want to be able to launch installers with admin rights request from a user level installer...<br />
This does not answer my question! Why does the main installer have to stay at user level?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">10th February 2012, 07:15</div></div><div class="posttext">If you want to install your app at userlevel, and you need to install additional apps at admin level, either create two installers or use the UAC plugin or ShellExecAsUser plugin.<br />
<br />
I already saw UAC plugin but the unicode dll miss in the zip. And ShellExecAsUser I will try it I already saw it but I think it doesn't wait and I need that wait for the end of the process. And anyway seems to miss also here the unicode plugin. <br />
<br />
@Anders...<br />
Just testing the potential of nsis at the end. Why? If I can ask you this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bennaloz</div><div class="date">10th February 2012, 08:04</div></div><div class="posttext">Done. I found out a version of ExecShell with waiting for the end of the proc in http://nsis.sourceforge.net/StdUtils_plug-in that can launch installers at admin level from an installer with user level. <br />
In this way having the main installer with RequestExecutionLevel user I can launch flash player prerequisite showing UAC request only for that process -.-''. I wanted to run my installer without UAC request but if I need installing prerequisites showing UAC request for their launch.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>