<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Remove all directories but several, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Remove all directories but several NSIS Discussion" />
	
	<title> Remove all directories but several [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Remove all directories but several</div>
<hr />
<div class="pda"><a href="t-238875.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=238875">Remove all directories but several</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ffletch2</div><div class="date">23rd February 2006, 22:02</div></div><div class="posttext">I see from this: http://nsis.sourceforge.net/wiki/Delete_dirs_/_files_in_a_directory_except_one_dir_/_file<br />
how to remove all directories (or files) but one.  Does anyone know of a way to remove all directories (or files) but several ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">24th February 2006, 00:04</div></div><div class="posttext">You can modify Afrow_UK's function to exclude multiple directories or try something like this: http://nsis.sourceforge.net/Uninstall_only_installed_files</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ffletch2</div><div class="date">24th February 2006, 02:24</div></div><div class="posttext">Forgive my lack of skill with NSIS scripts, can you (or anyone) bump me in the right direction on what I should edit in Afrow_UK's function?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">24th February 2006, 04:09</div></div><div class="posttext">Have you thought about just manually removing all the stuff you want to? It might mean more code, but you can do that without anything fancier than basic Delete and RMDir commands. <br />
<br />
As for the RmDirsButOne function, I hope I'm not breaking etiquette, but watch $R0 (the directory you want to exclude), and specifically, see this line:<br />
<br />
StrCmp $R2 $R0 Next<br />
<br />
That line tells the function to ignore the directory it is parsing ($R2) if it is the same one that you told it to exclude ($R0).<br />
<br />
So you'd want to push all the stuff to exclude and add comparisons for them. I recommend using http://nsis.sourceforge.net/DumpState_plug-in to keep track of your variables and the stack while you are debugging your code. <br />
<br />
To anyone: is it ok for me to recommend modifying other people's functions? I thought so, but I'm a newbie and just wanted to make sure.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>