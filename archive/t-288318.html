<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Check Registrykey Exists, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Check Registrykey Exists NSIS Discussion" />
	
	<title> Check Registrykey Exists [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Check Registrykey Exists</div>
<hr />
<div class="pda"><a href="t-288318.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=288318">Check Registrykey Exists</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">amokk</div><div class="date">11th March 2008, 21:28</div></div><div class="posttext">Hi,<br />
<br />
i want to check if a Registrykey exitst or not.<br />
But I would not consider the key, but the folder in which it is located. In the folder, there is only the (standard) key. <br />
<br />
Example:<br />
<br />
To Check<br />
HKLM &quot;SOFTWARE\Test&quot;<br />
<br />
Not<br />
HKLM &quot;SOFTWARE\Test&quot; &quot;(Item)&quot;<br />
<br />
<br />
<br />
Can someone tell me how I can check? <br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">11th March 2008, 22:43</div></div><div class="posttext">http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.2.6</div></div><hr />


<div class="post"><div class="posttop"><div class="username">amokk</div><div class="date">12th March 2008, 15:00</div></div><div class="posttext">Sorry, but this document, I have already read, but it has not helped me. Can you give me perhaps explain how I use the key to verify existens. <br />
I would be very grateful to you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">12th March 2008, 16:14</div></div><div class="posttext">Yeah, sure, here,<br />
<br />
http://nsis.sourceforge.net/Reading_and_Writing_the_Registry_-_NSIS_makes_it_easy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">12th March 2008, 16:19</div></div><div class="posttext">A comment on terminology: the &quot;folders&quot; in the registry are called &quot;keys&quot;. They can contain other keys (subfolders) and &quot;values&quot; (which have the properties &quot;name&quot;, &quot;type&quot;, and &quot;data&quot;).<br />
<br />
Registry keys always have at least one value, the &quot;default&quot; value. Your screen shot shows this as &quot;standard&quot;. You can test for the existence of a key by reading the default value.<br />
ClearErrors<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Test&quot; &quot;&quot;<br />
${If} ${Errors}<br />
  # key does not exist<br />
${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">amokk</div><div class="date">12th March 2008, 17:28</div></div><div class="posttext">Thanks demiller9 for you help.<br />
but it doesn't works correctly.<br />
<br />
if i run your code, i will allways jump to<br />
# key does not exist<br />
<br />
Can you help me pls.<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">12th March 2008, 18:11</div></div><div class="posttext">There isn't any simple function in NSIS to check is registry key exist, but you can use EnumRegKey as workaround.<br />
<br />
ClearErrors<br />
EnumRegKey $0 HKCR &quot;SOFTWARE\Test&quot; 0<br />
IfErrors 0 keyexist<br />
  # key does not exist<br />
keyexist:<br />
<br />
This will work because EnumRegKey will only set the error flag if there is errors so even if the key doesn't have any sub keys to &quot;enum&quot;, it doesn't set the error flag.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">amokk</div><div class="date">13th March 2008, 11:31</div></div><div class="posttext">GREAT!!!!!!!!!!!!!!<br />
<br />
BIG THX!!!!!!<br />
It works correctly!!! NICE!<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th March 2008, 11:33</div></div><div class="posttext">Originally posted by demiller9 <br />
A comment on terminology: the &quot;folders&quot; in the registry are called &quot;keys&quot;. They can contain other keys (subfolders) and &quot;values&quot; (which have the properties &quot;name&quot;, &quot;type&quot;, and &quot;data&quot;).<br />
<br />
Registry keys always have at least one value, the &quot;default&quot; value. Your screen shot shows this as &quot;standard&quot;. You can test for the existence of a key by reading the default value.<br />
ClearErrors<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Test&quot; &quot;&quot;<br />
${If} ${Errors}<br />
  # key does not exist<br />
${EndIf} <br />
<br />
Yes they do have a default value name, but that value name has to have a value set for your code to work.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>