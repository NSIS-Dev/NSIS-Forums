<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Exec does not work?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Exec does not work? NSIS Discussion" />
	
	<title> Exec does not work? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Exec does not work?</div>
<hr />
<div class="pda"><a href="t-59918.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=59918">Exec does not work?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Pardsbane</div><div class="date">13th September 2001, 14:14</div></div><div class="posttext">Hello,<br />
<br />
On Windows XP at least, I am unable to get any of the Exec instructions to work: I setup the installer to extract a program and then execute it immediately (to register some environment variables, see my previous question), anyway, the program doesn't get started. Here are the lines I'm trying to use:<br />
<br />
ExecWait '$INSTDIR\bin\envEdit.exe -a test hello'<br />
ExecShell &quot;open&quot; $INSTDIR\bin\envEdit.exe &quot;-a Path $INSTDIR\bin&quot;<br />
<br />
As you can see, I tried to use two different formats (I've tried may others too), but none seem to work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gonzotek</div><div class="date">13th September 2001, 15:28</div></div><div class="posttext">Can you verify that the examples provided with NSIS are working or are not working (that is, are any of the EXEC statements working or is it only your script)...I've seen someone else having the same problem with either NT4.0 or 2000.  And since they are all based on the NT kernel, I suspect it something in there and almost definitely not something you're doing wrong.<br />
<br />
And sorry for leading down a wrong path...my bad :)<br />
-=Gonzotek=-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pardsbane</div><div class="date">13th September 2001, 15:54</div></div><div class="posttext">Hi,<br />
<br />
I realized that I messed up, but that there is still a problem:<br />
<br />
My original problem was that this:<br />
<br />
ExecWait '$INSTDIR\bin\evnEdit.exe -a Path $INSTDIR\bin'<br />
<br />
Should have been this:<br />
<br />
ExecWait '$INSTDIR\bin\envEdit.exe -a Path $INSTDIR\bin'<br />
<br />
Subtle problem yes? In fact, I wrote the entire evnEdit program yesterday, meaning to call it envEdit. So when I came to work today, I coded up the nsi as envEdit... Damn.<br />
<br />
However, there is still a problem. This line does not function properly:<br />
<br />
ExecWait '$INSTDIR\bin\envEdit.exe -a Path $INSTDIR\bin'<br />
<br />
I also tried this line, which didn't work either:<br />
<br />
strcpy $0 $INSTDIR<br />
ExecWait '$INSTDIR\bin\envEdit.exe -a Path $0\bin'<br />
<br />
But this one does:<br />
<br />
ExecWait '$INSTDIR\bin\envEdit.exe -a Path INSTDIR\bin'<br />
<br />
<br />
When I say, &quot;doesn't work&quot;, I mean the program is executed, but it doesn't receive the 3rd parameter as would be expected.<br />
<br />
This leads me to believe that only the first variable gets evaluated in ExecWait, or something like that.<br />
<br />
I should point out that envEdit is supposed to set an environment variable, but doesn't do anything if it doesn't get enough parameters. I think what happens is that because the $INSTDIR\bin evaluates to &quot;&quot;, envEdit only gets 2 parameters instead of its expected 3, and quits. When I remove the second $, it gets a 3rd parameter, and works correctly.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>