<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" variables into file.ini, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  variables into file.ini NSIS Discussion" />
	
	<title> variables into file.ini [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  variables into file.ini</div>
<hr />
<div class="pda"><a href="t-192325.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=192325">variables into file.ini</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">3rd September 2004, 12:03</div></div><div class="posttext">Hi all,<br />
I don't know if it's possible.. but I need to put variables inside InstallOptions file.<br />
Another question is:<br />
can I read a string of a file and put it into a file.ini during run-time (not compile-time)?<br />
I hope so.<br />
Bye, thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd September 2004, 13:09</div></div><div class="posttext">Use WriteINIStr and ReadINIStr.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">4th September 2004, 01:36</div></div><div class="posttext">Perhaps I didn't explain well..<br />
I have a custom page with a text field.<br />
I want the state (default value) of text be read from a file during runtime.<br />
Can I put variables (or lines of codes) into installOptions file?<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2004, 01:56</div></div><div class="posttext">Yes, with WriteINIStr you can write variables too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">4th September 2004, 14:40</div></div><div class="posttext">Thanks a lot kichik, with WriteINIStr I change the contents of my custompage installOptions .ini file, but I've to recompile to see modification to take effect.<br />
That's what I've understand.. can you explain me better, please?<br />
Thank's in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2004, 15:55</div></div><div class="posttext">Ah, so you want the InstallOptions file to contain variables and have those parsed when the page is loaded without changes to the script. That's is not possible with InstallOptions. I think InstallOptionsEx (http://forums.winamp.com/showthread.php?s=&amp;threadid=181087) has that option.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">4th September 2004, 16:07</div></div><div class="posttext">Ok, unfortunately I understood well :(<br />
I think this is not possible with InstallOptionsEx too.<br />
Thanks.. bye, dilox</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lewellyn</div><div class="date">10th September 2004, 02:55</div></div><div class="posttext">Funny thing, I think this functionality is exactly what I'm looking for, as well...<br />
<br />
I need the text of one button to change based off of a registry key value, and a link to either show or not based on a define.<br />
<br />
The only way that looks like it may work for me so far is to have a separate page for each possible combination, using !defines and !ifdefs to make sure the correct one displays. I haven't quite gotten this done yet (lots of redundant work), but am I barking up the wrong tree?<br />
<br />
This just seems like a wholly inelegant (and bloated) way of going about it...<br />
<br />
Suggestions welcome. I think they'd likely help dilox77, as well. :)<br />
<br />
--Matt</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">10th September 2004, 13:08</div></div><div class="posttext">Yes.. I thought to have a separate page for each possible combinations, but I refuse to have this kind of work..<br />
What we need is a function that let you to parse ini file durin' runtime (this will solve problem of events on the page too) but I don't know if it's possible to realize it in C.<br />
I hope somebody can!<br />
bye, dilox</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th September 2004, 13:33</div></div><div class="posttext">How about including an external file and reading whatever you need from that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">10th September 2004, 13:54</div></div><div class="posttext">maybe u're understanding each other wrong?<br />
<br />
the text of any label on any installoptions page can be set just before it is shown. see the documentation about &quot;installoptions&quot; and the custom functions &quot;pre&quot;, &quot;init&quot; and &quot;show&quot;.<br />
if you want to change the text at runtime, use the &quot;sendmessage&quot; command:<br />
SendMessage $HANDLE_OF_YOUR_LABEL ${WM_SETTEXT} 0 &quot;STR:YOUR CUSTOM TEXT, even ${Defines}, $(LangStrings) and $Variables are valid&quot;<br />
get the $HANDLE_OF_YOUR_LABEL with this code in the SHOW function of your custom page:<br />
Var HWND<br />
Var HANDLE_OF_YOUR_LABEL<br />
Function CustomPageShow<br />
FindWindow $HWND &quot;#32770&quot; &quot;&quot; $HWNDPARENT ; get the inner handle<br />
GetDlgItem $HANDLE_OF_YOUR_LABEL $HWND NUMBER_OF_LABEL<br />
where the NUMBER_OF_LABEL is calculated this way:<br />
1200 + Field number - 1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lewellyn</div><div class="date">10th September 2004, 20:39</div></div><div class="posttext">Comm@nder: But how do I change both the text of the button as well as what it does? To be more specific, the particular button I am thinking of needs to say &quot;Install Product&quot; if it's not installed and actually launch the appropriate setup file. Then, if the user has already installed the particluar object, it needs to say &quot;Run Product&quot; and launch the program's executable.<br />
<br />
Perhaps what I need is already implemented. Perhaps not. I sure haven't figured it out yet. :( I neglected to mention that what the button actually DOES changes, as well. I apologize for that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">10th September 2004, 22:18</div></div><div class="posttext">Thank's a lot Comm@nder21!<br />
You solved me a big problem<br />
:up:<br />
dilox</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">11th September 2004, 15:53</div></div><div class="posttext">@lewellyn:<br />
install it the common way, and include a finishpage on which you can run the product.<br />
therefor you don't need any custom pages, labels, buttons, etc.<br />
<br />
read the modern ui readme about the finish-page's features.<br />
<br />
but if you really want to do it you way:<br />
1. i think you're using a button inside a custom page`, so it has the notify flag, and everything it does stands inside the LEAVE function.<br />
then just use a variable to store the action:<br />
<br />
Var $action<br />
Var $adress<br />
...<br />
StrCpy $action &quot;install&quot;<br />
...<br />
Function LEAVE<br />
...<br />
buttonaction: ; the button was pressed<br />
GetLabelAddress $adress $action<br />
Call $adress<br />
Abort<br />
install:<br />
; install-code<br />
StrCpy $action run<br />
Return<br />
run:<br />
; run-code<br />
StrCpy $action none<br />
Return<br />
none:<br />
Return<br />
...<br />
FunctionEnd<br />
(i just had to try out the GetLabelAdress-Call-Return functionality, forgive me :D)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lewellyn</div><div class="date">13th September 2004, 23:55</div></div><div class="posttext">Commander: I'm almost done with a glorious autorun.exe thinger.<br />
<br />
Most of the time for our products, I check in .onInit whether a specific registry is set, and run the program's launcher, if so. In this case, the installer takes so long to check the CRC due to the size, that that method is impractical. So, I need a menu to choose whether to install/launch the program depending on whether it is installed.<br />
<br />
Look for an archive page with my results soon. It isn't as difficult as first thought. Just need to get it to cooperate fully now... :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>