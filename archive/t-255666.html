<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to modify a xml config file according to the installation type?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to modify a xml config file according to the installation type? NSIS Discussion" />
	
	<title> How to modify a xml config file according to the installation type? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to modify a xml config file according to the installation type?</div>
<hr />
<div class="pda"><a href="t-255666.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255666">How to modify a xml config file according to the installation type?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">freebendy</div><div class="date">17th September 2006, 12:26</div></div><div class="posttext">I have to modify a xml config file according to the installation type!!If the user chooses to install for the current user I have write &quot;&lt;SetupMode&gt;0&lt;/SetupMode&gt;&quot; into the xml file,and if choosing to install for all user it will be &quot;&lt;SetupMode&gt;1&lt;/SetupMode&gt;&quot;!the content xml file is as follow:<br />
<br />
&lt;LogScale&gt;1&lt;/LogScale&gt;<br />
&lt;LogFileMaxSize&gt;1&lt;/LogFileMaxSize&gt;<br />
&lt;LogPath&gt;Log&lt;/LogPath&gt;<br />
&lt;LogFileMaxTimeSpan&gt;1&lt;/LogFileMaxTimeSpan&gt;<br />
&lt;LogFileLife&gt;15&lt;LogFileLife&gt;<br />
<br />
i will add my modify at the end of the file!!<br />
how to do it?<br />
<br />
And:<br />
I also want to write the Reg according to the installation type!<br />
so I use this to record the installation type:<br />
Function PageLeaveFunc<br />
  ReadINIStr $0 &quot;$PLUGINSDIR\selection.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
FunctionEnd<br />
<br />
then i use :<br />
StrCmp $0 1 0 No1<br />
  SetShellVarContext current<br />
  StrCpy $PURK &quot;HKCU&quot; <br />
  Goto No2<br />
  No1:<br />
     SetShellVarContext all<br />
    StrCpy $PURK &quot;HKLM&quot; <br />
  No2:<br />
to assign the location of reg i will write.But it show mistake in the line:StrCpy $PURK &quot;HKCU&quot; <br />
<br />
what is the wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">freebendy</div><div class="date">18th September 2006, 03:26</div></div><div class="posttext">Anybody can help me?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">18th September 2006, 17:42</div></div><div class="posttext">is $PURK a variable you deefined? If not - that would be why as far as the second error might go.<br />
<br />
as for the XML, look up FileOpen, FileRead, FileWrite, FileClose.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">18th September 2006, 19:51</div></div><div class="posttext">Originally posted by Animaether <br />
as for the XML, look up FileOpen, FileRead, FileWrite, FileClose. <br />
Why? There are a few XML plugins for parsing XML :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">18th September 2006, 20:40</div></div><div class="posttext">because if all he needs it to add that line, then he doesn't need the plugins %)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">freebendy</div><div class="date">19th September 2006, 02:37</div></div><div class="posttext">$PURK is defined by meï¼<br />
I have passed this problem !<br />
But I thinked  that NSIS is weak in modifying the exist file!Locating the place you want to insert is inconvenient</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">19th September 2006, 04:06</div></div><div class="posttext">As long as you have &quot;var PURK&quot; somewhere, then sure, its your variable. But, that is where the compile error is then that is where the problem lies.<br />
<br />
By &quot;passed&quot;, do you mean that you have given up?<br />
<br />
I think its pretty silly of you to dis NSIS for being weak, when you cannot get your script to compile. That is like blaming Visual C when your C code doesn't compile and calling it weak on file handling. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">freebendy</div><div class="date">19th September 2006, 04:25</div></div><div class="posttext">CrushBug:<br />
By &quot;Passed&quot;,i mean i have solved the problem!!My En is not gOOD!:(!!<br />
<br />
And i am not to dis NSIS for being weak!!!<br />
I like NSIS! It is powerful!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th September 2006, 12:35</div></div><div class="posttext">as for &quot;Locating the place you want to insert is inconvenient&quot; - check Joel's comment, then - there are XML parsing plugins for NSIS which would make this easier.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">freebendy</div><div class="date">21st September 2006, 02:14</div></div><div class="posttext">Thanks!And more thx to Joel!:)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>