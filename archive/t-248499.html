<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ExecWait  Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ExecWait  Problem NSIS Discussion" />
	
	<title> ExecWait  Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ExecWait  Problem</div>
<hr />
<div class="pda"><a href="t-248499.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=248499">ExecWait  Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">12th June 2006, 05:28</div></div><div class="posttext">I am developing the installer for myapplication using NSIS script.<br />
<br />
I have to install mysql and execute the script files to create the database.<br />
The following script i have wrriten for the task<br />
<br />
ExecWait 'C:\MYAPPS\Mysql 5.0Setup.exe' $Install_Sql<br />
nsExec::Exec C:\WebPartnerEssentials\3.8\setup\src\Files\dbfiles\sample.bat $1<br />
 Pop $1<br />
  MessageBox MB_OK &quot;after$1&quot;<br />
<br />
But the installer is not waiting for the mysql to be installed before executing the bat file.<br />
<br />
Is there any other way to make the installer to wait for the sql installation to be completed?<br />
<br />
Thanks a lot people</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">12th June 2006, 09:39</div></div><div class="posttext">Try using quotes:<br />
ExecWait '&quot;C:\MYAPPS\Mysql 5.0Setup.exe&quot; $Install_Sql'<br />
nsExec::Exec '&quot;C:\WebPartnerEssentials\3.8\setup\src\Files\dbfiles\sample.bat&quot; $1'<br />
Pop $1<br />
MessageBox MB_OK &quot;after$1&quot;<br />
<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">12th June 2006, 09:47</div></div><div class="posttext">hi CancerFace<br />
<br />
Thanks for the reply.<br />
But it didn't solve the problem.<br />
<br />
What actually i am trying to do is first i need to install mysql and then execute the scripts to create the db in mysql.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">12th June 2006, 09:53</div></div><div class="posttext">In that case you need to see if mysql opens a new thread for installation and as such your installer 'thinks' that the mysql command has finished. I am not familiar with its installation so I cannot be of much help :o(<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">12th June 2006, 09:57</div></div><div class="posttext">CancerFace,<br />
<br />
You are exactly right.Mysql opens a new thread for installation and it extracts some files and starts installation .Now is there any way i can  find that mysql is fully installed and then i can execute the script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th June 2006, 10:29</div></div><div class="posttext">The setup executable should have a command line switch to stop it running a seperate thread, allowing ExecWait to work correctly.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">12th June 2006, 12:26</div></div><div class="posttext">I looked this up on another forum and at least for version 4.1.11 it looks like the MYSQL installer is an MSI wrapped in an EXE. Most likely this is the case for version 5 that you are trying to install. If you run the main exe (Mysql 5.0Setup.exe in your post) go to your temporary folder (usually C:\Documents and Settings\&lt;your username&gt;\Local Settings\Temp) and look for a file called mysql_server.msi or something similar. This is the actual MSI that is called from the exe. You can then use the MSI directly by calling it:start /wait msiexec.exe /qb /i mysql_server.msi<br />
or use the Mysql 5.0Setup.exe using whatever switch it needs to run in a single thread. You may want to check this (http://forums.winamp.com/showthread.php?s=&amp;threadid=247498) thread for more info on how to do this.<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">13th June 2006, 05:00</div></div><div class="posttext">hi CancerFace<br />
<br />
Thanks for the reply .<br />
<br />
I am very new to NSIS .<br />
I have seen the mysql_server.msi in temp folder after i clicked on the mysql5.0.exe  but i am not able to see the file msiexec.exe .But the code i have given ,i have written is for testing purpose only.What exactly i have to do is i have to bundle mysql5.0 with my installer and i have to copy it to client location and execute the .exe .<br />
<br />
So before executing the .exe file there will not be any mysql_server.msi in temp folder.So how to execute that.<br />
<br />
If u can provide me with samle code it will be of great help to me<br />
 Mysql 5.0Setup.exe /?  doesn't give me the available options<br />
<br />
Not only mysql even i have to install jre first,and then install mysql.<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">13th June 2006, 07:56</div></div><div class="posttext">msiexec.exe is the microsoft windows installer and comes bundled with windows (2000 onwards if I am not mistaken).<br />
Look at the Wiki (http://nsis.sourceforge.net/wiki/Special:Search?search=java&amp;go=Go) for the Java Runtime, there are plenty of examples on how to deploy that one using NSIS...<br />
CF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">13th June 2006, 08:17</div></div><div class="posttext">I am able to exeute the msi file from cmd window.But how to do that from NSIS.<br />
<br />
I have tried using nsexec and execwait but i am not able to execute the command  &quot;start /wait msiexec.exe /qb /i mysql_server.msi&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">13th June 2006, 08:33</div></div><div class="posttext">Assuming that the msi is located at the same folder as your NSIS script, try ExecWait '$SYSDIR\msiexec.exe /qb /i &quot;$EXEDIR\mysql_server.msi&quot;'<br />
CF<br />
<br />
[Edit]To avoid the sign-up and the configuration wizzards use the following:ExecWait '$SYSDIR\msiexec.exe /qn /i &quot;$EXEDIR\mysql_server.msi&quot;'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">13th June 2006, 11:29</div></div><div class="posttext">Thank you very much CancerFace for your help :).Now i am able to install the mysql successfully.<br />
But before executing the scripts i need to start mysql db .To do that i need to start mysqld-nt.exe and run the scripts.<br />
I will look into that now.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>