<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How do you Enumerate Sections in a subsection???, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How do you Enumerate Sections in a subsection??? NSIS Discussion" />
	
	<title> How do you Enumerate Sections in a subsection??? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How do you Enumerate Sections in a subsection???</div>
<hr />
<div class="pda"><a href="t-140287.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140287">How do you Enumerate Sections in a subsection???</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">27th June 2003, 10:44</div></div><div class="posttext">This portion of code works<br />
<br />
SubSection /E &quot;Supporting Files&quot; SPF<br />
   Section &quot;Internet Explorer 6.0 With SP1&quot; IE6<br />
       ...<br />
   SectionEnd<br />
   Section &quot;Microsoft .Net Framework&quot; DOTNET<br />
       ...<br />
   SectionEnd<br />
SubSectionEnd<br />
<br />
  if not ie6 then<br />
       SectionSetText ${ie6} &quot;&quot;<br />
  endif<br />
  if not DotNet then<br />
     SectionSetText ${DOTNET} &quot;&quot;    <br />
  endif<br />
<br />
This is what I would like to achieve   <br />
<br />
   if ${SPF}.Count = 0 then<br />
      SectionSetText ${SPF} &quot;&quot;    <br />
   endif<br />
<br />
Any suggestions would be appreciated  <br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th June 2003, 10:46</div></div><div class="posttext">StrCmp ${SPF} 0 If0 NotIf0<br />
If0:<br />
...<br />
NotIf0:<br />
...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">27th June 2003, 10:56</div></div><div class="posttext">Tried it and thought it work at first, but other code changed that.<br />
<br />
Sorry but it does not work I f ahve tried the following variations<br />
<br />
   StrCmp ${SPF} 0 Disable CheckComplete<br />
   Disable:<br />
      SectionSetText ${SPF} &quot;&quot;<br />
      Goto CheckComplete<br />
   CheckComplete:<br />
<br />
   StrCmp ${SPF} &quot;0&quot; Disable CheckComplete<br />
   Disable:<br />
      SectionSetText ${SPF} &quot;&quot;<br />
      Goto CheckComplete<br />
   CheckComplete:<br />
<br />
   IntCmp ${SPF} 0 Disable CheckComplete<br />
   Disable:<br />
      SectionSetText ${SPF} &quot;&quot;<br />
      Goto CheckComplete<br />
   CheckComplete:<br />
<br />
<br />
;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">27th June 2003, 11:11</div></div><div class="posttext">My most humble apologies.<br />
<br />
   There was code that was executing that intefered and caused the<br />
   routine not to be called.<br />
<br />
:hang: <br />
<br />
This product Rocks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th June 2003, 11:18</div></div><div class="posttext">I agree with you very much!<br />
<br />
Check this out:<br />
http://dynamic.gamespy.com/~dday/ib3/ikonboard.cgi?s=3efc1ab6099dffff;act=ST;f=2;t=983<br />
<br />
Check the source too ;)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th June 2003, 12:57</div></div><div class="posttext">Are you sure that code works? It seemed that you wanted to tell how many sections that are in the subsection &quot;Supporting Files&quot; are selected. Your code checks if the id number of the subsection is zero or not.<br />
<br />
To check if a section is selected or not you should use this code:<br />
<br />
!include Sections.nsh<br />
<br />
SectionGetFlags ${sectionid} $0<br />
IntOp $0 $0 &amp; ${SF_SELECTED}<br />
StrCmp $0 ${SF_SELECTED} selected not_selected<br />
<br />
If you wish to enumerate use something like this:<br />
<br />
StrCpy $0 ${SPF}<br />
StrCpy $3 0<br />
loop:<br />
IntOp $0 $0 + 1<br />
SectionGetFlags $1 $0<br />
IntOp $2 $1 &amp; ${SF_SUBSECEND}<br />
StrCmp $2 ${SF_SUBSECEND} done<br />
IntOp $2 $1 &amp; ${SF_SELECTED}<br />
StrCmp $2 ${SF_SELECTED} loop<br />
IntOp $3 $3 + 1<br />
Goto loop<br />
done:<br />
DetailPrint '$3 sections selected under &quot;Supporting Files&quot;'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">28th June 2003, 10:39</div></div><div class="posttext">StrCmp ${SPF} 0 Disable CheckComplete <br />
<br />
does work for the implementation that I wanted.<br />
The prolem was when there was no sub items defined I still had the parent tree node. So if there where no child nodes I did not want to display the parent node.<br />
<br />
The code that you have supplied will go into my code library as I will be needing it in the near future.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th June 2003, 11:50</div></div><div class="posttext">Do you mind explaining a little more please? ${SPF} is a constant number that holds the id of the subsection &quot;Supporting Files&quot;. Why do you compare it with 0?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">28th June 2003, 21:39</div></div><div class="posttext">The problem is as follows :<br />
<br />
SubSection /E &quot;Supporting Files&quot; SPF<br />
    Section &quot;ABC&quot; ABC<br />
    EndSection<br />
<br />
    Section &quot;DEF&quot; DEF<br />
    EndSection<br />
<br />
    Section &quot;GHI&quot; GHI<br />
    EndSection<br />
EndSubSection<br />
<br />
Later on in the script we get the following<br />
<br />
SectionSetText ${ABC} &quot;&quot;<br />
SectionSetText ${DEF} &quot;&quot;<br />
SectionSetText ${GHI} &quot;&quot;<br />
<br />
But now we have &quot;Supporting Files&quot; and no sub nodes.<br />
  The idea is if ${SPF} = 0 nodes then<br />
    SectionSetText ${SPF} = &quot;&quot; <br />
  so that it does not display &quot;Supporting files&quot; as an option, but if<br />
  there is one or<br />
  more subsections then I want to display &quot;Supporting files&quot;.<br />
<br />
 this &quot;StrCmp ${SPF} 0 Disable CheckComplete&quot; appears to change if <br />
 the ${SPF} has nodes defined beneath it.<br />
<br />
 In Short it seems to work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th June 2003, 11:05</div></div><div class="posttext">But SPF is just a constant which contains the id of the subsection which is its serial id. If it is the first [sub]section created it will be numbered 0, second - 1, etc. Your comparison is meaningless. SPF will only be 0 if it's the first section created, not if there are nodes beneath it and will never change on runtime.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">9th July 2003, 16:36</div></div><div class="posttext">I have tried your code, but the code runs into a continuous loop and I cannot seem to figure out why.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th July 2003, 16:54</div></div><div class="posttext">Isn't it way easier to create something like this:<br />
<br />
If Not IE6 And Not DOTNET Then<br />
  SectionSetText ${SPF} &quot;&quot; <br />
EndIf</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">9th July 2003, 16:59</div></div><div class="posttext">That is what I ultimately would like to do but the Subsections are my variables. Does NSIS support If ... Endif. Have not come across it in my documentation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th July 2003, 20:26</div></div><div class="posttext">Yep, it does support conditional operations. In NSIS code it would be something like:<br />
<br />
;$R0 = &quot;1&quot; if IE is installed<br />
;$R1 = &quot;1&quot; if DOTNET is installed<br />
<br />
StrCmp $R0 &quot;1&quot; done<br />
StrCmp $R1 &quot;1&quot; done<br />
<br />
SectionSetText ${SPF} &quot;&quot; <br />
<br />
done:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th July 2003, 13:48</div></div><div class="posttext">This one has been tested and should work:<br />
<br />
StrCpy $0 ${SPF}<br />
StrCpy $3 0<br />
loop:<br />
IntOp $0 $0 + 1<br />
SectionGetFlags $0 $1<br />
IfErrors done<br />
IntOp $2 $1 &amp; ${SF_SUBSECEND}<br />
StrCmp $2 ${SF_SUBSECEND} done<br />
IntOp $2 $1 &amp; ${SF_SELECTED}<br />
StrCmp $2 ${SF_SELECTED} 0 loop<br />
IntOp $3 $3 + 1<br />
Goto loop <br />
done: <br />
DetailPrint '$3 sections selected under &quot;Supporting Files&quot;'</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>