<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" GetFileName question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  GetFileName question NSIS Discussion" />
	
	<title> GetFileName question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  GetFileName question</div>
<hr />
<div class="pda"><a href="t-215691.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215691">GetFileName question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 11:02</div></div><div class="posttext">so far i was using the GetFileName (http://nsis.sourceforge.net/archive/viewpage.php?pageid=176) function to detect the part before a &quot;:&quot; in my $var. i used this function to check protocols of a url (among other things!).<br />
<br />
as it might appear that a port and/or a login-name is specified in an url, this function would not work here. i'm looking for a way to put everything left of the first &quot;:&quot; in $var1 to $var2.<br />
<br />
any help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">11th May 2005, 11:10</div></div><div class="posttext">Can you write an example</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 11:29</div></div><div class="posttext">what i'm checking with GetFileName is<br />
<br />
&quot;http://www.google.com&quot; (detects &quot;http&quot;)<br />
&quot;md5:s0m3cH3ckSum&quot; (detects &quot;md5&quot;)<br />
&quot;ftp://ftp.bla.com&quot; (detects &quot;ftp&quot;)<br />
<br />
this works well with the GetFileName function. however, as this function works from right/end to the left/beginning, it does not work for these examples:<br />
<br />
&quot;http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u&quot; (detects &quot;http://cerebrum.dnalounge.com&quot; instead of &quot;http&quot;)<br />
&quot;http://anonymous:none@www.google.com&quot; (detects &quot;http://anonymous&quot; instead of &quot;http&quot;)<br />
<br />
that's why i'm looking for a way to check all text from the left of the first colon.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">11th May 2005, 12:29</div></div><div class="posttext">Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
!include &quot;WordFunc.nsh&quot;<br />
!insertmacro WordFind<br />
<br />
Section<br />
	${WordFind} 'http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u' ':' '+1{' $0<br />
<br />
	MessageBox MB_OK '$0'<br />
SectionEnd<br />
<br />
Or special variant :)<br />
Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
Function ForYathosho<br />
	Exch $0<br />
	Push $1<br />
	Push $2<br />
<br />
	StrCpy $1 0<br />
	IntOp $1 $1 + 1<br />
	StrCpy $2 $0 1 $1<br />
	StrCmp $2 '' empty<br />
	StrCmp $2 ':' 0 -3<br />
	StrCpy $0 $0 $1<br />
	goto end<br />
<br />
	empty:<br />
	StrCpy $0 ''<br />
<br />
	end:<br />
	Pop $2<br />
	Pop $1<br />
	Exch $0<br />
FunctionEnd<br />
<br />
Section<br />
	Push 'http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u'<br />
	Call ForYathosho<br />
	Pop $0<br />
<br />
	MessageBox MB_OK '$0'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 12:46</div></div><div class="posttext">thanks a lot!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 18:52</div></div><div class="posttext">i tried the second method, but the same problem appears when i tried &quot;http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u&quot;<br />
<br />
will try wordfind now, looks very useful, but the function is also quite huge. ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">11th May 2005, 18:56</div></div><div class="posttext">That problem appears? (&quot;http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u&quot; -&gt; &quot;http&quot;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 19:06</div></div><div class="posttext">Originally posted by Instructor <br />
That problem appears? (&quot;http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u&quot; -&gt; &quot;http&quot;)  <br />
<br />
no, the output is &quot;http://cerebrum.dnalounge.com&quot;, it should be &quot;http&quot; though</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th May 2005, 23:51</div></div><div class="posttext">using wordfind now and it's even better for my purposes, as i can use one function to do multiple operations.. but i have another question!<br />
<br />
my old code wasPush $URL<br />
Call GetFileName (http://nsis.sourceforge.net/archive/viewpage.php?pageid=176)<br />
Pop $File<br />
i replaced it with${WordFind} &quot;$URL&quot; &quot;/&quot; &quot;#&quot; $R0<br />
${WordFind} &quot;$URL&quot; &quot;/&quot; &quot;+$R0}&quot; $File<br />
in each case $URL is a link to a file, the function is supposed to get the filname ($File). when i tested this script, i accidently had an url with two slashes at the wrong place (&quot;http://myurl.com/dir//dir/myfile.txt&quot;).<br />
<br />
my code didn't work then ($File = dir/myfile.txt), so i'm not sure if i made a mistake.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">12th May 2005, 09:10</div></div><div class="posttext">${WordFind} &quot;$URL&quot; &quot;/&quot; &quot;-1}&quot; $File<br />
<br />
P.S.<br />
Function ForYathosho output is &quot;http&quot; (Input: &quot;http://cerebrum.dnalounge.com:8001/audio/2005/04-29-45945.m3u&quot;) :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>