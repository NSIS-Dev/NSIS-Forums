<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Installer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Installer NSIS Discussion" />
	
	<title> Installer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Installer</div>
<hr />
<div class="pda"><a href="t-63982.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=63982">Installer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">runik</div><div class="date">28th October 2001, 03:30</div></div><div class="posttext">I'm just curious about something.<br />
<br />
Is there anyway to execute another program<br />
and wait for it to finish, before you can <br />
close the installer?  Say I have test.exe<br />
that is being installed, and once it's been<br />
installed, I want to run it in the background<br />
and wait for it to finish before you can close the installer.  <br />
<br />
Is there any possible way you can do that?<br />
<br />
Thanks,<br />
<br />
runik</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">28th October 2001, 04:03</div></div><div class="posttext">Use ExecWait</div></div><hr />


<div class="post"><div class="posttop"><div class="username">runik</div><div class="date">28th October 2001, 04:29</div></div><div class="posttext">Ok, thanks.  <br />
<br />
One more thing.  With the uninstall, is there anyway to delete everything that is in the folder without having to put <br />
<br />
<br />
Delete &quot;$INSTDIR\myapp.exe&quot;<br />
Delete &quot;$INSTDIR\myapp.ini&quot;<br />
<br />
ect..<br />
<br />
The reason I ask, is because my application downloads files off the web and they change all the time.  So before I release it I don't now what files the program will have to download for future updates.  <br />
<br />
I hope I made that clear, to where you can understand what I'm wanting to do.<br />
<br />
Thanks again,<br />
<br />
runik</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">28th October 2001, 05:40</div></div><div class="posttext">you mean you want to delete the files in the $INSTDIR and then remove the dir after wards? you can just use RMDir /r $INSTDIR and it will recursivly delete everything inside the dir and then delete $INSTDIR</div></div><hr />


<div class="post"><div class="posttop"><div class="username">locnar42</div><div class="date">28th October 2001, 07:54</div></div><div class="posttext">As Schultz pointed out, you can use RMDir /r.<br />
Additionally, with the new NSIS you can use the FindFirst, FindNext routines to search a directory structure for each file.  This would come in handy if you have some way of determining which files are yours and which you want to delete, or if there are specific files which you want to leave behind.<br />
Otherwise, just use RMDir and make sure that whatever directory you delete doesn't have other files in it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">28th October 2001, 09:25</div></div><div class="posttext">Delete $INSTDIR\*.* deletes all files ;)<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">prodangle</div><div class="date">28th October 2001, 12:26</div></div><div class="posttext">Originally posted by Schultz <br />
you mean you want to delete the files in the $INSTDIR and then remove the dir after wards? you can just use RMDir /r $INSTDIR and it will recursivly delete everything inside the dir and then delete $INSTDIR <br />
<br />
Only problem here is if some user is stupid enough to install your program to just &quot;C:\program files\&quot;, or even &quot;c:\&quot;, which does happen :) .  I'd reccomend doing it the slow way for safety's sake</div></div><hr />


<div class="post"><div class="posttop"><div class="username">prodangle</div><div class="date">28th October 2001, 12:28</div></div><div class="posttext">Sorry, I just read the reasons for your question properly there :).  Maybe downloading some sort of uninstall.ini and reading the filenames to delete from it would be a better idea</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">28th October 2001, 12:31</div></div><div class="posttext">Originally posted by prodangle <br />
<br />
<br />
Only problem here is if some user is stupid enough to install your program to just &quot;C:\program files\&quot;, or even &quot;c:\&quot;, which does happen :) .  I'd reccomend doing it the slow way for safety's sake <br />
<br />
Very good point.. i never thought about that.. and yes there are alot of stupid users out there sometimes.. i think i will update my scripts now to reflect this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">runik</div><div class="date">28th October 2001, 15:48</div></div><div class="posttext">Thanks for the help guys.  And thanks prodangle for pointing that out.  That could get ugly if they installed to system folder or something.  <br />
<br />
<br />
thanks agian,<br />
<br />
runik</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">28th October 2001, 19:14</div></div><div class="posttext">Well, you could do it this way. Every update or install package you create a new uninstall.exe, replacing the old one. So, try it like this:<br />
<br />
I have my program installer:<br />
<br />
Name MyApp<br />
OutFile myapp.exe<br />
;insert installer info here<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
UninstallExeName uninstall.exe<br />
;Do a regular uninstall, just uninstalling the installed components<br />
<br />
<br />
Now for packages that DON'T come with the program installer:<br />
<br />
Name MyAppPlugins1<br />
OutFile package1.exe<br />
;install the components<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
;<br />
Section -post<br />
;in the post section, delete the current uninstall.exe<br />
Delete /r $INSTDIR\uninstall.exe<br />
;If you need some post installation stuff, do it here<br />
SectionEnd<br />
<br />
;Now, Recreate the uninstall.exe<br />
UninstallExeName uninstall.exe<br />
; now search for the files from other possible packages using<br />
; IfFileExists<br />
IfFileExists $INSTDIR\Plug-ins\package2.dll 0 Nopackage2<br />
Delete /r $INSTDIR\Plug-ins\package2.dll<br />
Nopackage2:<br />
; Continue to do this for other packages and also delete the actual <br />
; program files as well. <br />
<br />
This can also be used for Updating.<br />
<br />
The only problem with this is that once a new package is introduced, you have to update the other older packages to delete it if, lets say, a user installs a Package 7, then installs a package 2 AFTER the 7th package.<br />
<br />
But this will work.<br />
<br />
-Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">runik</div><div class="date">28th October 2001, 21:36</div></div><div class="posttext">Hey, thanks man.  I'll give it a try.<br />
<br />
runik</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>