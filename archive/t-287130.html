<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Wild Card Folders?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Wild Card Folders? NSIS Discussion" />
	
	<title> Wild Card Folders? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Wild Card Folders?</div>
<hr />
<div class="pda"><a href="t-287130.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287130">Wild Card Folders?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">18th February 2008, 20:28</div></div><div class="posttext">I'm a little new to NSIS, so i dont know how i would do this, <br />
<br />
I'm making a simple installer for Gmod users, to install a massive addons pack, and the folder names can change (only one really)<br />
<br />
C:\Program Files\Steam\Steamapps\&lt;name&gt;\garrysmod\garrysmod<br />
<br />
so ether A) have a page for the user to select what username to install or B) to install to all folders that have the garrysmod sub folder</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">18th February 2008, 22:15</div></div><div class="posttext">Hi there!<br />
<br />
Use SetOutPath [1] in conjunction with File [2].<br />
I'm sure you'll find what you need!<br />
<br />
[1] http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.9<br />
[2] http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.5<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">19th February 2008, 13:40</div></div><div class="posttext">I'm still lost, how would it be able to detect the right folder?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">19th February 2008, 14:27</div></div><div class="posttext">outfile test.exe<br />
ShowInstDetails show<br />
<br />
var name<br />
<br />
page directory<br />
page instfiles<br />
<br />
Function .onInit<br />
 ReadRegStr $name HKCU &quot;Software\Microsoft\Windows\CurrentVersion\Explorer&quot; &quot;Logon User Name&quot;<br />
 StrCpy $INSTDIR &quot;$PROGRAMFILES\Steam\Steamapps\$name\garrysmod\garrysmod&quot;<br />
FunctionEnd<br />
<br />
Section -<br />
 SetOutPath &quot;$INSTDIR&quot;<br />
 DetailPrint &quot;$OUTDIR&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">19th February 2008, 20:56</div></div><div class="posttext">Steam does not store the username in the registery</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">19th February 2008, 20:59</div></div><div class="posttext">i think i might of found somthing<br />
<br />
found this in the registery<br />
<br />
HKEY_CLASSES_ROOT\Valve.Source\shell\open\command<br />
&quot;c:\program files\steam\steamapps\jrwr\garrysmod\hl2.exe&quot; &quot;%1&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">19th February 2008, 21:19</div></div><div class="posttext">ok i found where steam holds the login info<br />
<br />
C:\Program Files\Steam\config\SteamAppData.vdf<br />
<br />
<br />
<br />
<br />
&quot;SteamAppData&quot;<br />
{<br />
	&quot;RememberPassword&quot;		&quot;1&quot;<br />
	&quot;AutoLoginUser&quot;		&quot;jrwr&quot;<br />
	&quot;jrwr&quot;<br />
	{<br />
		&quot;User&quot;		&quot;jrwr&quot;<br />
		&quot;AccountCreated&quot;		&quot;1&quot;<br />
		&quot;ShowNotifyTrayHintDialog&quot;		&quot;0&quot;<br />
	}<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">{_trueparuex^}</div><div class="date">19th February 2008, 22:54</div></div><div class="posttext">There's a function in the NSIS wiki to get the steam install path and username.<br />
<br />
http://nsis.sourceforge.net/Get_Steam_account_name_and_install_path<br />
<br />
To make that function better...<br />
<br />
Replace this line in GetSteamAccountName function:IfFileExists &quot;$R0\steamapps\$R2\*.*&quot; done<br />
<br />
With this one:IfFileExists &quot;$R0\steamapps\$R2\garrysmod\garrysmod\*.*&quot; done<br />
<br />
After that change the function returns the first user with garrysmod installed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JRWR</div><div class="date">20th February 2008, 03:25</div></div><div class="posttext">Thank you sir (writes name down in installer)<br />
(and Afrow UK)<br />
<br />
Also a note: make sure your path is right, spent a hour looking at code to figure this out<br />
<br />
old:<br />
StrCpy $INSTDIR &quot;$R1\$R0\SteamApps\garrysmod\garrysmod\addons&quot;<br />
<br />
new: <br />
StrCpy $INSTDIR &quot;$R1\SteamApps\$R0\garrysmod\garrysmod\addons&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>