<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Spanning on multiple CDs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Spanning on multiple CDs NSIS Discussion" />
	
	<title> Spanning on multiple CDs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Spanning on multiple CDs</div>
<hr />
<div class="pda"><a href="t-183529.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183529">Spanning on multiple CDs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xiceburnx</div><div class="date">16th June 2004, 17:05</div></div><div class="posttext">I searched for this topic and found a thread about spanning archives over 1.44mb floppy disks, but that's useless - though I think the same principle applies.<br />
<br />
I have a distribution which is over 3 gigs and I want to compress it and distribute it on CD-ROM. How would I do this with NSIS? I don't want to zip it using Winzip and make it a self-extracting archive that runs the setup file after, that just seems cheesy and unprofessional. Is there a way to do this fully within NSIS? <br />
<br />
Come to think of it, I've never seen any mention of features such as this in any of the NSIS documentation that I've read. Is the concept behind NSIS just for small installers that can be transferred over the internet? Because if not, the most common sense application would be to install programs from CDs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">16th June 2004, 19:27</div></div><div class="posttext">See the NSIS Archive for decompression plug-ins that can be called from the installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xiceburnx</div><div class="date">16th June 2004, 20:11</div></div><div class="posttext">I'll check those out. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">17th June 2004, 04:43</div></div><div class="posttext">A lor of people have asked this and everytime I always think to myself for a couple minutes about how this could be done.<br />
<br />
Maybe if you made a bunch of installers (1 for every CD) that use COPYFILES instead of compiling them into an installer. Then you make an installer that includes those 'installers'. You tell the main installer to extract all the installers for the CDs to a TEMP directory. Then it will run the first one. They can install it and move on. Then you can make a custom page that asks you to insert the next CD and it will call that CDs installer. Repeat for every installer for every CD you need to make. If that was unclear (which it probably was) ask me and I'll take more time to explain.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xiceburnx</div><div class="date">17th June 2004, 04:58</div></div><div class="posttext">Wow yeah... That does seem kind of complicated hehe... I checked out some of the plugins that do extraction but the one I grabbed didn't have the program to archive and compress, only to extract. I'll try the other plugin tomorrow (it apparently comes with the archiver).<br />
<br />
If I do this however, would I just have the installer extract everything to a temp directory and then install from there?<br />
<br />
And does this plugin support spanned archives? I didn't see any mention of it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JamesF1</div><div class="date">17th June 2004, 20:22</div></div><div class="posttext">Alternatively, you could just make several silent installers, and call them individually.<br />
<br />
[first post]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stnchris</div><div class="date">18th June 2004, 02:50</div></div><div class="posttext">I'm doing this now for a large installation (60+ GB uncompressed... compressed and split into volumes it spans 6 DVDs).<br />
<br />
I'm using some python scripts (it's actually an SCons build), to collect a list of all the source files into chunks of 1-20 files that are passed through tar/gzip to create a .tgz file for each chunk. <br />
<br />
Once everything is compressed the build process splits the .tgz files across multiple volumes. The build script creates a 'vol&lt;volume#&gt;' file in the directory of what will become the root directory of each DVD.<br />
<br />
As it splits the files across the volumes, the build script is also generating NSIS include scripts with entries for each .tgz file. <br />
<br />
The generated NSIS script checks that the correct volume is inserted in the drive (checking for the vol&lt;volume#&gt; file). Then copies the .tgz file from the DVD to $INSTDIR, untar/ungzips the files from the .tgz, then deletes the local copy of the .tgz file.<br />
<br />
On the first volume, setup.exe bootstraps the install by copying the real install script to $TEMP and then running the real install with a command-line parameter that gives it the $EXEDIR that setup.exe ran from. setup.exe also detects if it is being run from the network rather than DVD, if so it gives the install another cmdline parameter that tells it to go up the directory structure for the secondary volumes rather than prompting the user to insert the new volumes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">18th June 2004, 13:16</div></div><div class="posttext">I read somewhere that using the .CAB format was an easy way of doing this. If I remember correctly you cab the files and place your installer on the final disk, then when you launch your installer you get the install location and component info and only uncab the required files to the location you want them in......by referencing the cab on the same disc as the installer it will ask you to insert the appropriate disc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JamesF1</div><div class="date">18th June 2004, 19:05</div></div><div class="posttext">I would have thought the installer would be on the first disc...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">19th June 2004, 23:46</div></div><div class="posttext">I have an idea!<br />
<br />
You make two installers, one to extract the other one to TEMP directory and one to install.<br />
<br />
The first installer should include:<br />
<br />
SilentInstall &quot;silent&quot;<br />
Section &quot;&quot;<br />
SetOutPath &quot;$TEMP&quot;<br />
File &quot;%Installer Name%.exe&quot;<br />
ExecShell OPEN &quot;$TEMP\%Installer Name%.exe&quot; SW_SHOWNORMAL<br />
WriteRegStr &quot;HKLM&quot; &quot;Software\%Software Name%&quot; &quot;CD Dir&quot; &quot;$EXEDIR&quot;<br />
SectionEnd<br />
<br />
<br />
The second installer that actually 'installs' should include:<br />
<br />
InstallDirRegKey &quot;HKLM\Software\%Software Name%\CD Dir&quot;<br />
CheckCD:<br />
IfFileExists &quot;$INSTDIR\CD1.id&quot; CD1<br />
MB_OK &quot;Please insert CD 1 to start installation.&quot;<br />
Goto CheckCD<br />
<br />
CD1:<br />
Section &quot;%Section Name%&quot;<br />
CopyFile &quot;$INSTDIR\File1.exe&quot;<br />
CopyFile &quot;$INSTDIR\File2.dll&quot;<br />
Etc, etc, etc, etc.<br />
IfFileExists &quot;$INSTDIR\CD2.id&quot; CD2<br />
MB_OK &quot;Please insert CD 2 to continue installation.&quot;<br />
Goto CheckCD<br />
SectionEnd<br />
<br />
CD2:<br />
Section &quot;%Section Name%&quot;<br />
CopyFile &quot;$INSTDIR\File1.exe&quot;<br />
CopyFile &quot;$INSTDIR\File2.dll&quot;<br />
Etc, etc, etc, etc.<br />
IfFileExists &quot;$INSTDIR\CD3.id&quot; CD3<br />
MB_OK &quot;Please insert CD 3 to continue installation.&quot;<br />
Goto CheckCD<br />
SectionEnd<br />
<br />
CD3:<br />
Continue on with this for however many CDs you have<br />
<br />
Let me know if it works or not...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>