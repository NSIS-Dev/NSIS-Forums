<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" writing to an INI after a NOTIFY flag, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  writing to an INI after a NOTIFY flag NSIS Discussion" />
	
	<title> writing to an INI after a NOTIFY flag [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  writing to an INI after a NOTIFY flag</div>
<hr />
<div class="pda"><a href="t-348011.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=348011">writing to an INI after a NOTIFY flag</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">spkelly86</div><div class="date">6th September 2012, 21:11</div></div><div class="posttext">im new to nsis and have found this forum more then informative. i have hit a snag in my program though. i am reading multiple registries and writing them to a list box on a INI file. when the user selects an item from the list box it throws a NOTIFY flag and should change the active state of a DirRequest to the selected path. it is returning the proper values but doesnt change the state of the Field. Here is the code used to change the state of the DirRequest field.<br />
<br />
Function DirectoryPageLeave<br />
        ;change state of directory request to current selection in list box<br />
        !insertmacro MUI_INSTALLOPTIONS_READ $R0 ${DIR_PG} &quot;Settings&quot; &quot;State&quot;<br />
        ${If} $R0 == 1<br />
            !insertmacro MUI_INSTALLOPTIONS_READ $R1 ${DIR_PG} &quot;Field 1&quot; &quot;State&quot;<br />
           !insertmacro MUI_INSTALLOPTIONS_WRITE ${DIR_PG} &quot;Field 4&quot; &quot;State&quot; $R1<br />
            MessageBox MB_OK $R1<br />
            Abort<br />
        ${EndIf}<br />
FunctionEnd<br />
<br />
any bit of info would be appreciated</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">6th September 2012, 22:35</div></div><div class="posttext">You need to use the HWND and send a message, installoptions does not read from the .ini after the page is displayed IIRC</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spkelly86</div><div class="date">6th September 2012, 22:39</div></div><div class="posttext">thanks a lot. never used the HWND so im not to sure how to do that. ill do some more reading</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">6th September 2012, 23:36</div></div><div class="posttext">Look at the .ini in %temp% while the installer is running, you will find the HWND there.<br />
SendMessage $0 ${WM_SETTEXT} 0 &quot;STR:New text&quot; if the HWND was read into $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th September 2012, 11:58</div></div><div class="posttext">You may also want to look into using nsDialogs (with MUI2) instead of InstallOptions.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spkelly86</div><div class="date">7th September 2012, 20:50</div></div><div class="posttext">Got it working with install options. read the hwnd from the ini field and set it to a veriable. was able to use the send message function. thnx for the tips</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>