<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Changing the language on the fly., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Changing the language on the fly. NSIS Discussion" />
	
	<title> Changing the language on the fly. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Changing the language on the fly.</div>
<hr />
<div class="pda"><a href="t-228155.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228155">Changing the language on the fly.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">11th October 2005, 14:42</div></div><div class="posttext">I am trying to make a mutli language installer using the modern UI however I want to have the language selection box on the welcome page.<br />
<br />
Now I managed to get a drop down box on the Welcome page that will allow them to select a language but I get an error if i try doing   !insertmacro MUI_LANGUAGE &quot;$Lang&quot; or any combination that I can think of.<br />
<br />
Does anyone know how to do this?  It doesn't even need to change the welcome page through that would be nice if it could.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th October 2005, 14:46</div></div><div class="posttext">You can't do that. The language can only be selected in .onInit. If you really want, you can wrap the real installer in an installer that shows this welcome page and passes the selection to the wrapped installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">11th October 2005, 17:44</div></div><div class="posttext">well if I was to use !insertmacro MUI_LANGDLL_DISPLAY to display the choose a language option before the welcome page is there anyway to get what language they choose.  I need that because I set the language that my program is in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th October 2005, 17:51</div></div><div class="posttext">$LANGUAGE contains the selected language id.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">11th October 2005, 18:28</div></div><div class="posttext">thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">12th October 2005, 10:49</div></div><div class="posttext">Hi mscoville, I hope kichik will not get mad ;) since I post the moreinfo plugin as a possible solution to your problem again.<br />
If you would be contend that the OS GUI language, that is the part that people need to understand before being able to use a OS GUI anyway.<br />
Just embed the languagus you want to support, get the OS GUI languageID and set this language. It's is best just to read the Moreinfo plugin documentation on the Wiki and try it, can save you a lot of time.<br />
<br />
I wish you success and thank you for using NSIS as an installer solution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">12th October 2005, 15:57</div></div><div class="posttext">okay I tried doing it using the MUI_LANGDLL_DISPLAY and $LANGUAGE contains a number so where can I find the language codes or is there any way to convert this back to the language that was choosen.  I'd rather just be able to convert it back into the language without having to know the number for each language so that I only have to edit it in one place when we add more languages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th October 2005, 16:18</div></div><div class="posttext">You can use LogicLib to create a switch and the LANG_* defines:!include LogicLib.nsh<br />
# ...<br />
${Switch} $LANGUAGE<br />
  ${Case} ${LANG_ENGLISH}<br />
    MessageBox MB_OK &quot;English&quot;<br />
    ${Break}<br />
  ${Case} ${LANG_FRENCH}<br />
    MessageBox MB_OK &quot;French&quot;<br />
    ${Break}<br />
${EndSwitch}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">12th October 2005, 16:20</div></div><div class="posttext">okay well I found a list of the codes would still like to know if there is any easy way without doing a comparsion to convert the code into the name of the language.<br />
<br />
ie 1033 is english and I would like the installer to know that when they choose english to use it later in my setting.<br />
<br />
looking at the page for moreinfo says<br />
<br />
Several CD/DVD methods and properties return locale identifier (LCID) values that identify which languages are available on the soundtracks or subtitles. To make use of this information, your application will need to extract the primary language ID from the returned LCID. To do this, perform a bitwise AND operation on the value of iLCID and $3FF. (The primary language ID is contained in the least significant 10 bits of the LCID.) The following code snippet shows how to do this.<br />
<br />
iPrimaryLang = iLCID &amp; $3FF;<br />
<br />
To obtain an human-readable string from the primary language ID, call GetLangFromLangID as shown in this example:<br />
<br />
sLanguage = DVD.GetLangFromLangID(iPrimaryLang); <br />
<br />
but I'm getting an error on iPrimaryLang <br />
<br />
Invalid command: iPrimaryLang<br />
Error in script</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mscoville</div><div class="date">12th October 2005, 16:22</div></div><div class="posttext">Originally posted by kichik <br />
You can use LogicLib to create a switch and the LANG_* defines:!include LogicLib.nsh<br />
# ...<br />
${Switch} $LANGUAGE<br />
  ${Case} ${LANG_ENGLISH}<br />
    MessageBox MB_OK &quot;English&quot;<br />
    ${Break}<br />
  ${Case} ${LANG_FRENCH}<br />
    MessageBox MB_OK &quot;French&quot;<br />
    ${Break}<br />
${EndSwitch}  <br />
<br />
thanks will try that.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>