<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" root drive as INSTDIR, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  root drive as INSTDIR NSIS Discussion" />
	
	<title> root drive as INSTDIR [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  root drive as INSTDIR</div>
<hr />
<div class="pda"><a href="t-267765.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=267765">root drive as INSTDIR</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">aditu.g</div><div class="date">14th March 2007, 15:35</div></div><div class="posttext">Hi,<br />
does anyone know a how to set the INSTDIR to be the root drive (like C:\ or D:\ depending on where the Windows has been installed). I try to find a variable for this, but I only found $WINDIR or $SYSDIR. I need to use a variable instead of just type hardcoded value C:\</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">14th March 2007, 16:32</div></div><div class="posttext">Might no work under 98/ME<br />
OutFile 'test.exe'<br />
ShowInstDetails show<br />
AllowRootDirInstall true<br />
<br />
page directory<br />
page instfiles<br />
<br />
Function .onInit<br />
   ReadEnvStr $INSTDIR SYSTEMDRIVE<br />
FunctionEnd<br />
<br />
Section &quot;boo&quot;<br />
   SetOutPath &quot;$INSTDIR&quot;<br />
SectionEnd<br />
<br />
Works in all Windows versions<br />
OutFile 'test.exe'<br />
ShowInstDetails show<br />
AllowRootDirInstall true<br />
<br />
page directory<br />
page instfiles<br />
<br />
Function .onInit<br />
   StrCpy $INSTDIR &quot;$WINDIR&quot; 2<br />
FunctionEnd<br />
<br />
Section &quot;boo&quot;<br />
   SetOutPath &quot;$INSTDIR&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KenA</div><div class="date">14th March 2007, 16:32</div></div><div class="posttext">Originally posted by aditu.g <br />
Hi,<br />
does anyone know a how to set the INSTDIR to be the root drive (like C:\ or D:\ depending on where the Windows has been installed). I try to find a variable for this, but I only found $WINDIR or $SYSDIR. I need to use a variable instead of just type hardcoded value C:\ <br />
Hi, <br />
<br />
with $WINDIR and the GetRoot macro, you should be able to retrieve the root drive.<br />
<br />
Now, I'm not sure that it's good practice to set the INSTDIR to the rootdrive. :o <br />
<br />
KenA</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aditu.g</div><div class="date">14th March 2007, 16:48</div></div><div class="posttext">Yes, I can use one of the solution posted above, but both are not allowed to be used outside sections. <br />
I would like to define the InstallDir as &quot;%rootdrive%\my application&quot; and then on installation time if the person who install it want, to be possible to change.<br />
I have attached the script to be more specific.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aditu.g</div><div class="date">14th March 2007, 16:49</div></div><div class="posttext">Originally posted by aditu.g <br />
Yes, I can use one of the solution posted above, but both are not allowed to be used outside sections. <br />
I would like to define the InstallDir as &quot;%rootdrive%\my application&quot; and then on installation time if the person who install it want, to be possible to change.<br />
I have attached the script to be more specific.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">14th March 2007, 17:07</div></div><div class="posttext">!define MY_APP &quot;My application Name&quot;<br />
OutFile 'test.exe'<br />
ShowInstDetails show<br />
AllowRootDirInstall true<br />
<br />
page directory<br />
page instfiles<br />
<br />
Function .onInit<br />
   StrCpy &quot;$INSTDIR&quot; &quot;$WINDIR&quot; 2<br />
   StrCpy &quot;$INSTDIR&quot; &quot;$INSTDIR\${MY_APP}&quot;<br />
FunctionEnd<br />
<br />
Section &quot;boo&quot;<br />
   SetOutPath &quot;$INSTDIR&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aditu.g</div><div class="date">14th March 2007, 17:09</div></div><div class="posttext">Done. I get rid of the InstallDir and use only $INSTDIR. It seems that it is used also on the choose directory page so it better like this. Sorry to waste forum space for such stupid question, but this root installation poped out with Vista. NSIS installer is able to do the installation using RequestExecutionLevel admin but then if you install the app on program files and on runtime wants to write there it will not work, that's why I wanted to install it on the system root (not directly there but in a folder :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>