<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" can't cancel from a custom page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  can't cancel from a custom page NSIS Discussion" />
	
	<title> can't cancel from a custom page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  can't cancel from a custom page</div>
<hr />
<div class="pda"><a href="t-233081.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=233081">can't cancel from a custom page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jhegge</div><div class="date">13th December 2005, 17:34</div></div><div class="posttext">I've added a custom page to an installer, to call a function that in turn calls a DLL to check whether a selected port TCP port is open or already bound.  <br />
<br />
I want the install to stay on that page until either an open port is provided or the user uses the Cancel button to quit the installer.  <br />
<br />
I have this function partly working:<br />
<br />
<br />
Function SetChoosePorts<br />
<br />
    choose_again:<br />
    ;Set up the port config page<br />
    !insertmacro MUI_HEADER_TEXT &quot;Manager Port and User Options&quot; &quot;Choose port, user and password&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;portconfig.ini&quot;<br />
 <br />
    Call configure<br />
    pop $R7<br />
    StrCmp $R7 &quot;1&quot; choose_again proceed<br />
<br />
    proceed:   <br />
    return<br />
    <br />
FunctionEnd<br />
<br />
<br />
Not too elegant, but I thought it was sufficient.  The trouble is that when a Cancel is selected, I get the warn dialog but selecting Yes still takes me back to the page.  Also, pressing Back sends me back to the loop.  <br />
<br />
How can I break out of the loop correctly?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th December 2005, 17:59</div></div><div class="posttext">You should put the test code in the leave function of the page. This way, the page won't be destroyed until you don't call Abort, and you won't have to worry about recreating the page.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>