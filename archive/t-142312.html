<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Bug or am I insane?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Bug or am I insane? NSIS Discussion" />
	
	<title> Bug or am I insane? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Bug or am I insane?</div>
<hr />
<div class="pda"><a href="t-142312.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142312">Bug or am I insane?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bSecRes</div><div class="date">15th July 2003, 19:24</div></div><div class="posttext">I can't figure this one out at all. Please see the attached file. Ignore the random section stuff. There are two functions, getfilename and getfilenamebroke. The only difference is a comment line. But, one function works and the other is broke. I don't have any relative jumps using line numbers so it can't be that. It looks like the IntOp isn't finishing before the StrCpy (though how a comments slows that down I don't honestly know). When I check the stack and variables with Dumpstate::debug, the IntOp looks fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th July 2003, 19:27</div></div><div class="posttext">As the last character of the line before the comment you've removed ends with a \ NSIS treats the next line as an extension of the line before the removed comment. So NSIS reads it like this:<br />
<br />
IntOp $R1 $R1 + 1   ;account for StrCpy $R0 $R0 $R2 $R1<br />
<br />
As you can see the StrCpy part is a part of the comment.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bSecRes</div><div class="date">15th July 2003, 20:04</div></div><div class="posttext">Thanks Kichik I thought I was going insane. Of course I use \ everywhere but completely forgot about its significance because of the context and the context in which it was used. I also wouldn't have expected it to work on comment lines.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bSecRes</div><div class="date">15th July 2003, 20:07</div></div><div class="posttext">HM NIS Edit also doesn't interpret this as a comment line, the color isn't the comment color gray. I'll E-mail that guy and let him know.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ranametal</div><div class="date">19th July 2003, 00:40</div></div><div class="posttext">I forgot this NSIS feature when I wrote the highlighter, but I'm working in solve this.<br />
<br />
BTW: The block comments have some issues, see this script:<br />
<br />
OutFile TestComments.exe<br />
Name &quot;Test Comments&quot;<br />
<br />
Section<br />
  This text is ignored /* block comment begin here<br />
     some text to fill te comment<br />
  block comment end. */ MessageBox MB_OK &quot;This line work fine&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>