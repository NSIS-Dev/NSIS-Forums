<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSISdl crash when finishing download, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSISdl crash when finishing download NSIS Discussion" />
	
	<title> NSISdl crash when finishing download [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSISdl crash when finishing download</div>
<hr />
<div class="pda"><a href="t-294273.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294273">NSISdl crash when finishing download</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">4everskiff</div><div class="date">10th July 2008, 16:59</div></div><div class="posttext">Hi all,<br />
<br />
in the last two days I'm getting crazy with the following problem:<br />
<br />
in the installer script attached there's an optional section that downloads and extracts an archive. The problem is that it downloads the tar.gz archive but it crashes (app not responding) when the download is finished. If I watch the destination folder I can see the file that reports 0 Kb dimension... but when I kill the application, magically the dimension of the file turns to the dimension that it should be... it seems that the installer downloads the file but it's unable to &quot;finalize&quot; the task...<br />
<br />
I also tried to put the same download script &quot;alone&quot; (that is only the content of the section of download and untar), I compiled it and launched... it works!!!!<br />
<br />
I modified the whole script many times to let it work... but now I really don't know what I could do more...<br />
<br />
could someone help me please? many thanks,<br />
<br />
Marco</div></div><hr />


<div class="post"><div class="posttop"><div class="username">4everskiff</div><div class="date">10th July 2008, 19:57</div></div><div class="posttext">This may help with the debugging:<br />
if I simply add a MessageBox right before the nsisdl instruction, it works!<br />
<br />
an example:<br />
<br />
MessageBox MB_OKCANCEL &quot;$ARCHIVE_SIZE_MB MB&quot; IDOK download IDCANCEL cancel_download<br />
<br />
download:	<br />
SetShellVarContext current	<br />
InitPluginsDir<br />
NSISdl::download &quot;$HTTP_PATH/$ARCHIVE_NAME&quot; &quot;$TEMP\$ARCHIVE_NAME&quot;<br />
Pop $0<br />
StrCmp $0 &quot;success&quot; download_ok download_failed<br />
<br />
I feel it very strange, don't you?<br />
<br />
Thanks,<br />
<br />
Marco</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">11th July 2008, 07:39</div></div><div class="posttext">Yes, this happens sometimes with NSISdl. And with InetLoad in NSISdl mode (uses code fragment from NSISdl). Inetc (http://nsis.sourceforge.net/Inetc_plug-in) looks free from this bug. Use something like this:inetc::get &quot;$HTTP_PATH/$ARCHIVE_NAME&quot; &quot;$TEMP\$ARCHIVE_NAME&quot; /END<br />
Pop $0<br />
StrCmp $0 &quot;OK&quot; download_ok download_failed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">4everskiff</div><div class="date">11th July 2008, 09:36</div></div><div class="posttext">Hi Takhir,<br />
<br />
many thanks for your reply. Very useful.<br />
Regards,<br />
<br />
Marco</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>