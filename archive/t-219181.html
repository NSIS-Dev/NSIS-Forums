<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" inetload not passing info to MUI ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  inetload not passing info to MUI ? NSIS Discussion" />
	
	<title> inetload not passing info to MUI ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  inetload not passing info to MUI ?</div>
<hr />
<div class="pda"><a href="t-219181.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=219181">inetload not passing info to MUI ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">18th June 2005, 20:54</div></div><div class="posttext">Is there a way to force InetLoad to pass its stuff to the MUI? something like: /MUI or /NSIS<br />
<br />
For some odd reason,since I converted to logiclib, inetload is not passing downloads to the MUI.  Instead, InetLoad is treating the below as a /BANNER.  I ran the code in a clean test project and  it works fine, so there must be a variable conflicting with InetLoad with my current project?<br />
<br />
InetLoad::load &quot;$source&quot; &quot;$destination&quot; /END<br />
Pop $0<br />
${IF} $0 != &quot;OK&quot;<br />
MessageBox MB_OK|MB_ICONEXCLAMATION|MB_TOPMOST  \<br />
&quot;Download Error: $0 for file: $theFile,         \<br />
Click OK to abort installation&quot; IDOK<br />
Abort<br />
${ENDIF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">18th June 2005, 22:14</div></div><div class="posttext">On that note:<br />
be great if setting the Mode would overide all the variables passed to inetLoad ...like $title and $bannerText<br />
Then you could build a very handy generic download function<br />
<br />
this below code works....but only if the mode = &quot;/Banner&quot;<br />
<br />
Be great to input variables for inetLoad to process<br />
So if $mode = &quot;&quot;, only the $source and $dest variables are passed while $title and $bannerText is ignored<br />
<br />
the code:<br />
strcpy $theFile &quot;version.xml&quot;<br />
strcpy $source &quot;http://www.server.cc/$theFile&quot;<br />
strcpy $dest &quot;$PLUGINSDIR\$theFile&quot;<br />
strcpy $bannerText &quot;Checking for Updates...Please Wait&quot;<br />
strcpy $mode &quot;/BANNER&quot;<br />
strcpy $title &quot;My Title&quot;<br />
;<br />
InetLoad::load &quot;$mode&quot;    \<br />
&quot;$title&quot; &quot;$bannerText&quot;    \<br />
&quot;$source&quot; &quot;$dest&quot; /END<br />
Pop $0 <br />
${IF} $0 != &quot;OK&quot;<br />
MessageBox MB_OK|MB_ICONEXCLAMATION|MB_TOPMOST \<br />
&quot;Download Error: $0 for file: $theFile, \<br />
Click OK to abort installation&quot;  IDOK<br />
Abort<br />
${ENDIF}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">19th June 2005, 10:08</div></div><div class="posttext">InetLoad worked fine with Modern UI in my tests. The only szBanner string definition comes to plug-in with /banner option, and not empty szBanner string is the only case when Banner dialog is active. Your problem really looks like a messed variables in your code (and may be LogicLib macros).<br />
/mode - I don't see what improvement this may give. And BTW /popup mode requires one string parameter (prefix), but /banner - 2 strings (caption and text), this case I'll need to add second empty parameter for /popup.. I am not sure right now if this is a real step forward :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">19th June 2005, 15:46</div></div><div class="posttext">is there a specific variable I need to clear out in NSIS before I call  inetLoad ... kind of like the /END variable does? Is this the $szBanner variable?<br />
strcpy $szBanner &quot;&quot;, then call  inetLoad<br />
<br />
I thought about the above and then put the above into a CASE statement with $mode....Case &quot;/POPUP&quot;, Case &quot;/BANNER&quot;<br />
this works pretty well as I sometimes use inetload in the .oInit and sometimes in sections :)<br />
<br />
be back in a week, as I am now off to the Grand Canyone for a white water vacation :) Full week of being totally unplugged...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">19th June 2005, 16:44</div></div><div class="posttext">No, szBanner is internal C variable in the InetLoad.c file. The only parameter plug-in takes from installer is extra-&gt;exec_flags-&gt;silent mode.<br />
Off: ;) I already had 2 weeks of the 'spring bike vacations' -  900 km of mountain roads, Caucasus and Crimea http://ineum.narod*****g05s.htm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">27th June 2005, 23:52</div></div><div class="posttext">Hi Takhir<br />
I'm back from a week of class 5 rapids,flash floods, hail, and 11 mile uphill hikes :) From looking at your pictures, Caucasus and Crimea look quite beautiful.<br />
<br />
I still can't seem to keep inetload from using /BANNER mode :( I tried using /POPUP too...but still get /BANNER.  As an alternative, nsisdl:download works fine, but I am quite wary of using it as I have had many problems with this plugin.<br />
<br />
is there no way to totally reset inetload or force it to pass info to the MUI<br />
<br />
Or, for those who use LogicLib, is there some way to clear its variables so they do not conflict with inetLoad ?<br />
My problems began the moment I began using LogicLib<br />
In a simple example, LogicLib and inetLoad work fine. So, I am not sure where the error is....<br />
<br />
guess I'll also see if there is a new version of LogicLib.  Would really like to continue using it as it really simplifes the code<br />
g</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">28th June 2005, 01:27</div></div><div class="posttext">within my project I killed all the variables like &quot;$sourceURL/$theFile&quot; in inetLoad and  used a simple inetload::load &quot;sourceUrl&quot; &quot;destination&quot; /END<br />
<br />
I'm still getting the /BANNER ?<br />
this debug is getting a bit baffling<br />
would hate to rebuild the entire project if clearing a couple of variables would do the trick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">28th June 2005, 06:49</div></div><div class="posttext">Can you give me a script with this problem? Please minimize it's size if possible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ElvenProgrammer</div><div class="date">28th June 2005, 06:58</div></div><div class="posttext">I had this problem when I wrong typed the name of a temp copy of the setup to be run. This way the temp copy wasn't updated but run, not receiving my modifications to the code. Maybe it could be the case, if not post further code ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">28th June 2005, 18:50</div></div><div class="posttext">I finally got it....<br />
Thinking this would take hours, I disabled the first function run in the .onInit....<br />
What do you know, everything returned to normal. :) <br />
Being on a deadline for this project, I have moved on to finish . Will probably get back to the WHY in two days as I would like to put this function back in the onInit.<br />
Anyone know what would conflict here ?<br />
<br />
the conflicting funtion:<br />
Function preventLaunchingTwice<br />
System::Call 'kernel32::CreateMutexA(i 0, i 0, t &quot;myMutex&quot;) i .r1 ?e'<br />
Pop $R0<br />
StrCmp $R0 0 +3<br />
MessageBox MB_OK|MB_TOPMOST &quot;The installer is already running.&quot;<br />
Abort<br />
FunctionEnd<br />
;--------------------<br />
<br />
here is a script I am using for inetload...it is pretty simple, but has come in handy for me as I use inetload for all sorts of things :)<br />
<br />
Function GenericDownload<br />
<br />
/*<br />
Example Variables<br />
strcpy $theFile &quot;version.xml&quot;<br />
strcpy $source &quot;$xmlDirectory/$theFile&quot;<br />
strcpy $dest &quot;$PLUGINSDIR\$theFile&quot;<br />
strcpy $title &quot;${FILETITLE}&quot;<br />
strcpy $bannerText &quot;Downloading ${FILETITLE}...Please Wait&quot;<br />
strcpy $mode &quot;/POPUP&quot; | &quot;&quot; | &quot;/BANNER&quot; | &quot;nsisdl&quot;<br />
*/<br />
<br />
${Select} $mode<br />
    ${Case} &quot;&quot;<br />
            InetLoad::load  &quot;$source&quot; &quot;$dest&quot; /END<br />
    ${Case} &quot;nsisdl&quot;<br />
            NSISdl::download /TIMEOUT=30000 $source $dest<br />
            POP $R0<br />
            strcpy $0 $R0<br />
    ${Case} &quot;/BANNER&quot;<br />
             InetLoad::load &quot;$mode&quot; &quot;$title&quot; &quot;$bannerText&quot;    \                           $source&quot; &quot;$dest&quot; /END<br />
    ${Case} &quot;/POPUP&quot;<br />
            InetLoad::load  &quot;$mode&quot; &quot;${FILETITLE}&quot;     \<br />
                            &quot;$source&quot; &quot;$dest&quot; /END<br />
${EndSelect}<br />
;<br />
Pop $0<br />
  ${IF} $0 != &quot;OK&quot;<br />
  MessageBox MB_OK|MB_ICONEXCLAMATION|MB_TOPMOST &quot;Download Error: $0 for file: $theFile, \<br />
  Click OK to abort installation&quot;  IDOK<br />
  Abort<br />
  ${ENDIF}<br />
FunctionEND<br />
<br />
I'm sure its not flawless but it has helped me reduced my code bloat a bit.<br />
<br />
what would be cool...maybe a future nsis thing for functions:<br />
Call GenericDownload($mode,$title,$bannerText,$source,$dest)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>