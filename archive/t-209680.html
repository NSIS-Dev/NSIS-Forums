<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Serials and txt files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Serials and txt files NSIS Discussion" />
	
	<title> Serials and txt files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Serials and txt files</div>
<hr />
<div class="pda"><a href="t-209680.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=209680">Serials and txt files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">6th March 2005, 18:39</div></div><div class="posttext">Hey, first of all I love the program and that is why I wanted to ask something.<br />
<br />
I have a list of about 9999 serials in xxxx-xxxxxx-xxxx form and I would like to be able to make a page where a user can enter in a serial and a Username and if the serial is a good one and is in the .txt that is some where in the installer or in the actual code, it will save the username and serial to the registry in HKLM/Software/Digital Matrix/registration and continue with the installation, if it is a bad one and does not match a key in the .txt, I want it to say something like &quot;you have entered a serial that is not valid&quot; and when the click ok it will dump them back into windows.<br />
<br />
Thx, if you need any more info just ask</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Shea</div><div class="date">6th March 2005, 23:03</div></div><div class="posttext">That would not be a very secure way of registering your product.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">6th March 2005, 23:34</div></div><div class="posttext">it is pre regestration, the encryption algos and everything comes in after the program is first run and needs to be activated</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">6th March 2005, 23:37</div></div><div class="posttext">either way that is how the developer wants it and I want to do it this way and have the database of serials inside of the installer since otherwise I don't get payed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">7th March 2005, 02:46</div></div><div class="posttext">Well as long as you have each serial on its own line within your txt file (with no white space before or after the serial), you could use the below function written by Afrow UK.  Just make a loop and keep incramenting the line nuumber till you get a match...something like this should do (I have not tested this but it should give you the idea):<br />
<br />
<br />
<br />
StrCpy $5 xxx ;set this var to user's entered serial<br />
StrCpy $6 0<br />
<br />
Loop:<br />
IntOp $6 $6 + 1<br />
StrCmp $6 10000 Invalid ;1 more than the # serials in file<br />
Push $6 ;line number to read from <br />
Push &quot;$INSTDIR\file.txt&quot; ;text file to read <br />
Call ReadFileLine <br />
Pop $0 ;output string (read from file.txt) <br />
StrCmp $0 $5 End<br />
Goto Loop<br />
<br />
Invalid:<br />
Abort &quot;Your serial is invalid&quot;<br />
<br />
End:<br />
MessageBox MB_OK &quot;Your serial is good&quot;<br />
<br />
<br />
Function ReadFileLine<br />
Exch $0 ;file<br />
Exch<br />
Exch $1 ;line number<br />
Push $2<br />
Push $3<br />
<br />
  FileOpen $2 $0 r<br />
 StrCpy $3 0<br />
<br />
Loop:<br />
 IntOp $3 $3 + 1<br />
  ClearErrors<br />
  FileRead $2 $0<br />
  IfErrors +2<br />
 StrCmp $3 $1 0 loop<br />
  FileClose $2<br />
<br />
Pop $3<br />
Pop $2<br />
Pop $1<br />
Exch $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">7th March 2005, 03:21</div></div><div class="posttext">what section should everything go in?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">7th March 2005, 03:36</div></div><div class="posttext">simply taking one of the basic example scripts and plugging the code in where it is supposed to go will work very nicely</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dragon_Z</div><div class="date">8th March 2005, 19:42</div></div><div class="posttext">we decieded to not have a cheack inside the installer, what i need now is to be able to take the username and serial that a person enters on install and save it to the registry with the time of install, from there the developer will do the activation, how do I make these kind of fields?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>