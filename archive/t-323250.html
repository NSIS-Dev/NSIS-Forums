<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" What is the default font in NsDialogs?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  What is the default font in NsDialogs? NSIS Discussion" />
	
	<title> What is the default font in NsDialogs? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  What is the default font in NsDialogs?</div>
<hr />
<div class="pda"><a href="t-323250.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323250">What is the default font in NsDialogs?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">19th October 2010, 16:04</div></div><div class="posttext">I am trying to let a user check whether he want the password shown or hidden, but when that checkbox is unchecked, the &quot;hidden password&quot; character does NOT return to the original &quot;fat dot&quot; per:<br />
<br />
http://nsis.sourceforge.net/NsDialogs_FAQ#How_to_set_the_character_used_by_a_Text_Password_control<br />
<br />
Yes, ASCII 149 is a fat dot, but not fat enough. :)<br />
<br />
What is the default font in NsDialogs and what is that &quot;truly fat&quot; dot that appears by default before sending the EM_SETPASSWORDCHAR message?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">19th October 2010, 16:21</div></div><div class="posttext">Why not create two fields, and hide/show them depending on the checkbox? Create a regular textfield and a password field, and you won't need to worry about the font.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th October 2010, 16:28</div></div><div class="posttext">Note that you would only use 'EM_SETPASSWORDCHAR' if you want to set a -custom- character.<br />
<br />
The fat dots you're thinking about are the replacement for the asterisk (*) you'll get when using &quot;XPStyle on&quot; in your installer script.  I'll update that wiki to note this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">19th October 2010, 16:39</div></div><div class="posttext">Note that you would only use 'EM_SETPASSWORDCHAR' if you want to set a -custom- character.I understand, but currently this is the only way I know to toggle hide/show password.<br />
<br />
The fat dots you're thinking about are the replacement for the asterisk (*) you'll get when using &quot;XPStyle on&quot; in your installer script.  I'll update that wiki to note this.Is there an EM_GETPASSWORDCHAR message? If so, how do I use it in the context of nsDialogs?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th October 2010, 17:46</div></div><div class="posttext">It's the ES_PASSWORD style you want.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">19th October 2010, 19:03</div></div><div class="posttext">It's the ES_PASSWORD style you want.<br />
True, but I've already got that by merely using ${NSD_CreatePassword}.<br />
<br />
It's not that critical, I am simply curious to know why is that character so illusive.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th October 2010, 21:11</div></div><div class="posttext">I understand, but currently this is the only way I know to toggle hide/show password.<br />
That wouldn't toggle it, though.  You can toggle it -off- by using the character value 0 (zero).. make sure you refresh the control for it to update.<br />
<br />
Is there an EM_GETPASSWORDCHAR message? If so, how do I use it in the context of nsDialogs?<br />
Yes.. you can use it with the same SendMessage format, adding an additional variable at the end that contains the result.<br />
<br />
That result, by the way, is char 9679 for the original fat dot.  And that's where a problem comes in.. EM_SETPASSWORDCHAR doesn't accept values outside of 0..255 , so you can't re-set the original fat dot that way, it seems.<br />
Some coder changed the font (to Marlett) and used the letter 'n', which I guess would be a fat dot in that font.<br />
<br />
I suspect there -is- an appropriate method, as I've seen this sort of toggle you speak of, but for all I know they're just doing what MSG suggested.. hide/unhide controls as applicable :)<br />
Edit: and the answer may lay in Unicode... SendMessageA vs SendMessageW?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th October 2010, 21:18</div></div><div class="posttext">Edit: and the answer may lay in Unicode... SendMessageA vs SendMessageW?<br />
Yup...<br />
<br />
System::Call &quot;user32::SendMessageW(i $hwnd, i ${EM_SETPASSWORDCHAR}, i 9679, i 0)&quot;<br />
<br />
<br />
Quick and very dirty sample script:<br />
<br />
!include &quot;nsDialogs.nsh&quot;<br />
!include &quot;winmessages.nsh&quot;<br />
!include &quot;logiclib.nsh&quot;<br />
OutFile &quot;test.exe&quot;<br />
<br />
Page Custom pre<br />
<br />
var dialog<br />
var hwnd<br />
<br />
XPStyle on<br />
<br />
Function pre<br />
	nsDialogs::Create 1018<br />
		Pop $dialog<br />
	${NSD_CreatePassword} 0 0 50% 8% &quot;This is a password field&quot;<br />
	    Pop $hwnd<br />
	${NSD_CreateButton} 0 10% 33% 10% &quot;Remove password style&quot;<br />
	    Pop $0<br />
	    ${NSD_OnClick} $0 remove<br />
	${NSD_CreateButton} 33% 10% 34% 10% &quot;Get char &amp;&amp; msg&quot;<br />
	    Pop $1<br />
	    ${NSD_OnClick} $1 get<br />
	${NSD_CreateButton} 67% 10% 33% 10% &quot;Set char / restore&quot;<br />
	    Pop $2<br />
	    ${NSD_OnClick} $2 set<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function remove<br />
	Pop $0<br />
	SendMessage $hwnd ${EM_SETPASSWORDCHAR} 0 0 # wparam = 0 -&gt; remove password style<br />
	${NSD_GetText} $hwnd $0   # dirty redraw<br />
	${NSD_SetText} $hwnd &quot;$0&quot; # dirty redraw<br />
FunctionEnd<br />
<br />
Function get<br />
	Pop $1<br />
	SendMessage $hwnd ${EM_GETPASSWORDCHAR} 0 0 $5<br />
	MessageBox MB_OK &quot;Char: $5&quot;<br />
FunctionEnd<br />
<br />
Function set<br />
	Pop $2<br />
	/* Must use unicode call */<br />
	System::Call &quot;user32::SendMessageW(i $hwnd, i ${EM_SETPASSWORDCHAR}, i 9679, i 0)&quot;<br />
	${NSD_GetText} $hwnd $0   # dirty redraw<br />
	${NSD_SetText} $hwnd &quot;$0&quot; # dirty redraw<br />
FunctionEnd<br />
<br />
Section &quot;&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>