<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Output Language choice to Config File, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Output Language choice to Config File NSIS Discussion" />
	
	<title> Output Language choice to Config File [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Output Language choice to Config File</div>
<hr />
<div class="pda"><a href="t-289669.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=289669">Output Language choice to Config File</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Red27</div><div class="date">5th April 2008, 02:21</div></div><div class="posttext">Hi there,<br />
<br />
I am trying to output the language selected by the user for the install to a config.txt file in the Installation directory (for use by the actual installed application).<br />
<br />
Essentially, I need the config.txt file to contain an entry<br />
<br />
language=eng<br />
<br />
(or language=fra, language=deu etc depending on presumably (?) the $LANGUAGE variable)<br />
<br />
Can anyone help me to do this?<br />
<br />
Apologies if this is a completely noob question; I did search the forums but could not find anything specifically relating to this.<br />
<br />
Many thanks,<br />
<br />
Pete.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">5th April 2008, 10:36</div></div><div class="posttext">See the included example languages.nsi on section number two.<br />
Instead of a message box, write config.txt with FileOpen FileWrite FileClose.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red27</div><div class="date">6th April 2008, 00:47</div></div><div class="posttext">Thanks for the reply.<br />
<br />
I'm still not entirely sure I know what to do though; the example language.nsi mentions &quot;old slow&quot; way.<br />
<br />
Would anyone have a real world (new) example of how to achieve this?<br />
<br />
Thanks again,<br />
<br />
Pete.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wag2639</div><div class="date">8th April 2008, 07:54</div></div><div class="posttext">I just figured this out last week :)<br />
<br />
If you are using !insertmacro MUI_LANGDLL_DISPLAY, it sets a ${LANGUAGE} variable thats mostly useless do you cause its just a number.<br />
<br />
My way around this, and its not the most elegant, is to use a LangString to say which language I am in text.<br />
<br />
LangString MY_LANGUAGE ${LANG_ENGLISH} &quot;english&quot;<br />
LangString MY_LANGUAGE ${LANG_MALAY} &quot;malay&quot;<br />
...<br />
You'll have to make a list for all the languages you heave available.<br />
<br />
To write this stuff to a config file: (here's a striped version of mine)<br />
<br />
Section -WriteMyLang<br />
<br />
FileOpen $9 &quot;$INSTDIR\config.txt&quot; w ;Opens a Empty File an fills it<br />
FileWrite $9 &quot;myLanguage$\t$(MY_LANGUAGE)$\r$\n&quot;<br />
#FileWrite $9 &quot;my_id   $\t$0$\r$\n&quot;<br />
FileClose $9 ;Closes the filled file<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red27</div><div class="date">8th April 2008, 10:04</div></div><div class="posttext">Wag,<br />
<br />
Thanks for that, I'll try that!<br />
<br />
Red.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>