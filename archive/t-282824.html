<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Get File Version at Compile, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Get File Version at Compile NSIS Discussion" />
	
	<title> Get File Version at Compile [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Get File Version at Compile</div>
<hr />
<div class="pda"><a href="t-282824.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=282824">Get File Version at Compile</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Fightin_Foo</div><div class="date">7th December 2007, 18:11</div></div><div class="posttext">Does anybody know if it is possible to get the version of a file at compile time?  Hopefully storing it in a variable or constant. I would like to do my version compare in the .onInit function, so if the user is trying to install an old version on top of a new version it will stop them asap.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">7th December 2007, 19:04</div></div><div class="posttext">Would be bette during in &quot;runtime&quot;..IfFileExists.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fightin_Foo</div><div class="date">7th December 2007, 19:14</div></div><div class="posttext">I have no problems getting the version of the file that is actually installed.  I am having troubles getting the version of the file that is bundled in the installer.  I came up with the idea of setting a variable with the version of the bundled file on compile.  That way I can get it set when the installer is built and use it where I need to.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th December 2007, 19:32</div></div><div class="posttext">http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">7th December 2007, 19:36</div></div><div class="posttext">Does anybody know if it is possible to get the version of a file at compile time?<br />
 GetDLLVersionLocal might do what you want:<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.3.6</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fightin_Foo</div><div class="date">7th December 2007, 21:54</div></div><div class="posttext">Thanks Afrow UK that worked great!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">8th December 2007, 13:15</div></div><div class="posttext">One suggestion that might save you needing an extra script to get this at runtime:<br />
<br />
why dont you extract the new file (at runtime) to the temp directory and get the file versions and compare them?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th December 2007, 14:10</div></div><div class="posttext">Having the version before hand will save you having to extract the files.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">8th December 2007, 14:43</div></div><div class="posttext">Considering that the installer already extract quite a few files to the plugins dir, one more file for version checking wouldn't add considerable overhead.<br />
<br />
The compile time method doesnt add much either, but I would (personally) do it at runtime and have a simpler script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ClayDowling</div><div class="date">8th December 2007, 17:09</div></div><div class="posttext">If you're wanting to save yourself the trouble I just included getversion.nsi in the Registration plugin (see the wiki in Plugins).  It's written for you and creates a macro you can insert directly into your compiler.  An example of how to use it is also included.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>