<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" components&amp;custompage, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  components&amp;custompage NSIS Discussion" />
	
	<title> components&amp;custompage [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  components&amp;custompage</div>
<hr />
<div class="pda"><a href="t-189351.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=189351">components&amp;custompage</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">9th August 2004, 00:02</div></div><div class="posttext">Hi all!<br />
I'm rather newbie with nsis, I need some help..<br />
I got 3 (Install options) custompage.<br />
I'd like my installer show them only when a certain components on components page is chose.<br />
How can I do this?<br />
<br />
Here it's what I understand:<br />
I can make a (pre)function before inserting macro (!insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;config1.ini&quot;)<br />
but what is the parameter that I've to control? what is the flag components set if a component is checked?<br />
Thank's in advance..<br />
dilox</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">9th August 2004, 20:21</div></div><div class="posttext">test, do not read</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coho</div><div class="date">10th August 2004, 19:04</div></div><div class="posttext">I use a PRE page after the COMPONENTS page to set some variables - then I just check the variables later on to make decisions like &quot;should I show this page?&quot;.<br />
<br />
After the components page, there is the SetComponentVariables PRE function - focus here.<br />
...<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE SetComponentVariables<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
...<br />
<br />
In this SetComponentVariables function, add things like this:<br />
<br />
!insertmacro SectionFlagIsSet ${Section1} ${SF_SELECTED} it_is it_is_not<br />
<br />
it_is:<br />
  StrCpy $vSection1 &quot;yes&quot;<br />
it_is_not:<br />
  StrCpy $vSection1 &quot;no&quot;<br />
<br />
Then later, just use a StrCmp or some ${If} $vSection1 == &quot;yes&quot; logic.<br />
<br />
-Coho</div></div><hr />


<div class="post"><div class="posttop"><div class="username">razor_x</div><div class="date">11th August 2004, 16:33</div></div><div class="posttext">give your sections a section index then use.<br />
<br />
SectionGetFlags ${your index} $R0<br />
  IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
  IntCmp $R0 ${SF_SELECTED} show<br />
Abort<br />
  <br />
show:<br />
 !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;your.ini&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dilox77</div><div class="date">12th August 2004, 18:57</div></div><div class="posttext">Thank's a lot both coho and razor!<br />
I find razor explanation very good.. I wasted some times because I didn't include Section.nsh so ${SF_SELECTED} was always undefined.<br />
Now I've included it and everything works fine!<br />
Thank's again, bye!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>