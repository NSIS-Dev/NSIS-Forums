<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Play a video in NSIS Installer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Play a video in NSIS Installer NSIS Discussion" />
	
	<title> Play a video in NSIS Installer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Play a video in NSIS Installer</div>
<hr />
<div class="pda"><a href="t-322384.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322384">Play a video in NSIS Installer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">13th September 2010, 14:08</div></div><div class="posttext">Hi, I've found a tool made in nsis that play a video in the main page. I'm very curious, cause I don't know any plugin able to do something like this. <br />
<br />
Can anyone take a look in this program I post here how to this? I'll attach the file below.<br />
<br />
EDIT: I uploaded in megaupload, cause I can't attach the files here.<br />
The file contain a virus. I'll upload a clean file later. Sorry.<br />
<br />
The name of the video using in this installer, is: &quot;ý«€&quot; just rename it and open in any video player. You can find it in PLUGINSDIR o extracting this installer.<br />
<br />
I'm waiting fot answers, thanx...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">13th September 2010, 14:23</div></div><div class="posttext">You forgot to include the link.  Not that it would help much, as 'decompiling' an installer is tough at best.  Why not ask the authors of the installer in question?<br />
<br />
If I wanted to do something like that - without programming something myself or poking at the System plugin - I'd probably check if http://nsis.sourceforge.net/NsWeb_plug-in would allow me to display a page that has the video as an embedded object.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">13th September 2010, 14:48</div></div><div class="posttext">You forgot to include the link.  Not that it would help much, as 'decompiling' an installer is tough at best.  Why not ask the authors of the installer in question?<br />
<br />
If I wanted to do something like that - without programming something myself or poking at the System plugin - I'd probably check if http://nsis.sourceforge.net/NsWeb_plug-in would allow me to display a page that has the video as an embedded object.<br />
<br />
I have no idea who made this installer, and my pc os with virus, so, I'll upload it later.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">15th September 2010, 01:17</div></div><div class="posttext">Sorry for the double post, but here don't appear the 'Edit' button this time, so, I can't edit my posts. Here is the link clean of virus. Plese, check it out ,if you can.<br />
http://www.megaupload.com/?d=2JHSCSC8<br />
<br />
And this is the video used by the installer:<br />
http://www.megaupload.com/?d=11A2TIVX <br />
You can also find it in the $PLUGINSDIR folder when the installer is running.<br />
<br />
If an admin edit my first post with this link, will be great. Thanx...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">15th September 2010, 07:44</div></div><div class="posttext">They're creating a SysAnimate32 control.. probably just through nsDialogs.<br />
http://msdn.microsoft.com/en-us/library/bb761884%28VS.85%29.aspx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">17th September 2010, 23:41</div></div><div class="posttext">Can you make me a nsis example file?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">18th September 2010, 08:42</div></div><div class="posttext">Can you make me a nsis example file?<br />
<br />
<br />
!addincludedir &quot;.&quot;<br />
!addplugindir &quot;.&quot;<br />
!include &quot;nsDialogs.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
!include &quot;WinCore.nsh&quot;<br />
!include &quot;WinMessages.nsh&quot;<br />
OutFile &quot;$%temp%\temp.exe&quot;<br />
<br />
Section<br />
SectionEnd<br />
<br />
!define ACS_CENTER 0x0001<br />
!define ACS_AUTOPLAY 0x0004<br />
!define /math ACM_OPENA ${WM_USER} + 100<br />
!define /math ACM_OPENW ${WM_USER} + 103<br />
!define ACM_OPEN ${ACM_OPENA} ; lets use the ANSI one.<br />
!define /math ACM_PLAY ${WM_USER} + 101<br />
!define /math ACM_STOP ${WM_USER} + 102<br />
<br />
Page Custom customPage<br />
<br />
Var dialog<br />
Var hwnd<br />
Var null<br />
<br />
Var animationControl<br />
<br />
Function customPage<br />
  nsDialogs::Create 1018<br />
  Pop $dialog<br />
  ${If} $dialog == error<br />
    Abort<br />
  ${EndIf}<br />
<br />
  /* match dimentions to that of your AVI, otherwise it will center within control */<br />
  nsDialogs::CreateControl &quot;SysAnimate32&quot; ${ACS_CENTER}|${ACS_AUTOPLAY}|${WS_VISIBLE}|${WS_CHILD} &quot;&quot; 0 0 422 132 ''<br />
    Pop $animationControl<br />
    SetOutPath $PluginsDir<br />
      File &quot;test.avi&quot;<br />
    StrCpy $1 &quot;$PluginsDir\test.avi&quot;<br />
    StrLen $2 $1<br />
<br />
    System::Call '*(&amp;t$2 &quot;$1&quot;) i.r0'<br />
    SendMessage $animationControl ${ACM_OPEN} 0 $0<br />
    System::Free $0<br />
<br />
  ${NSD_CreateButton} 0 150 64 32 &quot;[  ]&quot;<br />
    Pop $hwnd<br />
    ${NSD_OnClick} $hwnd animation.stop<br />
<br />
  ${NSD_CreateButton} 72 150 64 32 &quot;|&gt;&quot;<br />
    Pop $hwnd<br />
    ${NSD_OnClick} $hwnd animation.play<br />
<br />
  ${NSD_CreateButton} 144 150 64 32 &quot;|&gt; (x3)&quot;<br />
    Pop $hwnd<br />
    ${NSD_OnClick} $hwnd animation.play3<br />
<br />
  ${NSD_CreateButton} 216 150 64 32 &quot;oo&quot;<br />
    Pop $hwnd<br />
    ${NSD_OnClick} $hwnd animation.loop<br />
<br />
  ${NSD_CreateButton} 288 150 64 32 &quot;???&quot;<br />
    Pop $hwnd<br />
    ${NSD_OnClick} $hwnd animation.twitchy<br />
<br />
  InitPluginsDir<br />
<br />
  nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function animation.stop<br />
  Pop $null<br />
  SendMessage $animationControl ${ACM_STOP} 0 0<br />
FunctionEnd<br />
<br />
Function animation.play<br />
  Pop $null<br />
  ${MAKELONG} $0 $1 0 -1<br />
  /* $0 = output variable<br />
     $1 = temporary variable used by ${MAKELONG}<br />
     $2 = start frame<br />
     $3 = end frame (-1 = end of video) */<br />
  SendMessage $animationControl ${ACM_PLAY} 1 $0<br />
  /* 1 = play once */<br />
FunctionEnd<br />
<br />
Function animation.play3<br />
  Pop $null<br />
  ${MAKELONG} $0 $1 0 -1<br />
  SendMessage $animationControl ${ACM_PLAY} 3 $0<br />
  /* 1 = play three times */<br />
FunctionEnd<br />
<br />
Function animation.loop<br />
  Pop $null<br />
  ${MAKELONG} $0 $1 0 -1<br />
  SendMessage $animationControl ${ACM_PLAY} -1 $0<br />
  /* 1 = play indefinitely */<br />
FunctionEnd<br />
<br />
Function animation.twitchy<br />
  Pop $null<br />
  StrCpy $R2 0<br />
  ${NSD_CreateTimer} animation.twitchy.next 1000<br />
FunctionEnd<br />
<br />
Function animation.twitchy.next<br />
  /* there's 86 frames in the animation */<br />
  ${If} $R2 &lt; 76<br />
    IntOp $R3 $R2 + 10<br />
    ${MAKELONG} $0 $1 $R2 $R3<br />
    SendMessage $animationControl ${ACM_PLAY} -1 $0<br />
    IntOp $R2 $R2 + 10<br />
  ${Else}<br />
    ${NSD_KillTimer} animation.twitchy.next<br />
    SendMessage $animationControl ${ACM_STOP} 0 0<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
Note that the AVI should -not- have a sound stream in it, or supposedly the control will refuse to play the video.  I'm not sure what restrictions there are on the video codec used, but the example installer used an 8bit RLE video which works... re-encoding that to MS-VIDEO1 (a common, albeit old, codec on the Windows platform) and trying with that didn't work.  So you may have to find an authoring suite or converter tool that lets you encode to 8bit MS-RLE for your own videos.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">20th September 2010, 15:10</div></div><div class="posttext">thanx dude, I'll try.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">27th January 2011, 22:45</div></div><div class="posttext">I'm back here to another question:<br />
<br />
How to show the video during the installation files in the system?<br />
<br />
I want that just only during the installation files, the video plays in loop and the window of NSIS still hide, showing only the video, and after finish the  installation of the files, the video stops to play, and the window of NSIS appear again in the finish page.<br />
<br />
I know how to do this using images, but I've tried with videos using the script provided above by: Animaether, but I can't handle this, cause this is too complex to me.<br />
<br />
Someone can help?<br />
<br />
This is the video that I want to use in the script (if someone write one to me):<br />
<br />
http://www.mediafire.com/?rl2kw12xv6fo6bk<br />
<br />
Thanx...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">2nd November 2013, 10:41</div></div><div class="posttext">Code of Animaether why it does not work ... I can not play the files DivX, xVid...<br />
The reason ?<br />
Why there is no plug-in for video playback ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">2nd November 2013, 16:34</div></div><div class="posttext">AVI is a container for different video formats (codecs). His code work with 8-bit RLE AVIs that has NO audio stream. I think the code for DivX and xVid will be much more complex.<br />
<br />
...Note that the AVI should -not- have a sound stream in it, or supposedly the control will refuse to play the video. I'm not sure what restrictions there are on the video codec used, but the example installer used an 8bit RLE video which works... re-encoding that to MS-VIDEO1 (a common, albeit old, codec on the Windows platform) and trying with that didn't work. So you may have to find an authoring suite or converter tool that lets you encode to 8bit MS-RLE for your own videos...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">3rd November 2013, 11:56</div></div><div class="posttext">8-bit RLE<br />
This is not the format, and the misunderstanding ... It is a pity that no one has figured out how to play videos in NSIS ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">3rd November 2013, 14:00</div></div><div class="posttext">You´re right that this explanation was not 100% exact. Runlengthencoding is a simple kompression. An the first AVIs were compressed with MJPEG &amp; RLE. Both of them have very low requirements on hardware. You can create those Videos with VirtualDUB i think...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>