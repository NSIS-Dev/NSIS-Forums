<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Check to continue, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Check to continue NSIS Discussion" />
	
	<title> Check to continue [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Check to continue</div>
<hr />
<div class="pda"><a href="t-278290.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=278290">Check to continue</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">azzzrail</div><div class="date">4th October 2007, 14:51</div></div><div class="posttext">Hi there,<br />
<br />
I want the user to confirm that he has read some warningtext before the installation continues.<br />
<br />
i tried to use the notify flag with the mui but it doesn't seem to work somehow.<br />
<br />
Here's the code<br />
<br />
insertmacro MUI_INSTALLOPTIONS_READ $0 &quot;warnings.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
<br />
${if} $0 == 1<br />
!insertmacro MUI_INSTALLOPTIONS_READ $3 &quot;warnings.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
${if} $3 == 1<br />
<br />
GetDlgItem $R2 $HWNDPARENT 1<br />
EnableWindow $R2 1<br />
<br />
${else}<br />
GetDlgItem $R2 $HWNDPARENT 1<br />
EnableWindow $R2 0<br />
${endif}<br />
abort<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ $2 &quot;warnings&quot; &quot;Field 2&quot; &quot;HWND&quot;<br />
SendMessage $2 ${BM_SETCHECK} 0 0<br />
abort<br />
${endif}<br />
<br />
<br />
i almost completly copied the code for the manual,only changing the commands for using the mui.<br />
<br />
the example code disables the next button until the checkbox is checked. after clicking the next button the installer continues. in my example the installer directly continues after clicking the checkbox, which isn't supposed to happen.<br />
<br />
Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th October 2007, 15:10</div></div><div class="posttext">You're calling Abort in the wrong places. You must always call abort if [Settings]\STATE is set. If you don't, it'll skip to the next page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">azzzrail</div><div class="date">4th October 2007, 15:23</div></div><div class="posttext">hmm. this doesn't seem to work either. <br />
i now use the abort command when the checkbox is set<br />
${if} $3 == 1<br />
<br />
GetDlgItem $R2 $HWNDPARENT 1<br />
EnableWindow $R2 1<br />
abort<br />
<br />
and it still skip to the next page.<br />
am i getting you wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th October 2007, 15:27</div></div><div class="posttext">Yes, you're getting me wrong. You must always call Abort. This shouldn't depend on whether the checkbox is checked or not, but only on [Settings]\STATE. If STATE is set, the leave function is called because the user did something to a control with the NOTIFY flag. If you fail to call Abort in this case, it'll move to the next page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">azzzrail</div><div class="date">4th October 2007, 16:03</div></div><div class="posttext">ok. now i understand what you mean. i have to call abort in the settings/state branch to stop the leave function from skipping to the next page. but this doesn't work either. it still skips to the next page. abortning after the ${endif} of the state branch results in leaving the next button disabled.<br />
maybe i got my stupid day but really can't figure it out, or maybe i'm still getting you wrong.<br />
could you perhabs edit my code example to be sure?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th October 2007, 16:08</div></div><div class="posttext">Seems like the problem is in the first ${If}. You check if [Settings]\STATE is 1, but then check the state of Field 2. If your checkbox is Field 2, you should check for 2 in the first ${If}.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">azzzrail</div><div class="date">4th October 2007, 16:18</div></div><div class="posttext">omfg.. yeah that's it. thx. especially for your patience.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>