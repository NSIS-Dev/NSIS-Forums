<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help with my function, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help with my function NSIS Discussion" />
	
	<title> Help with my function [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help with my function</div>
<hr />
<div class="pda"><a href="t-136837.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136837">Help with my function</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th May 2003, 22:34</div></div><div class="posttext">I re-wrote this script here (http://nsis.sourceforge.net/archive/nsisweb.php?page=300&amp;instances=0,11) after finding that it sometimes goes into a infinite loop (and crashes my installer)<br />
Right now, I found out that it never replaces the last occurence of text, no matter what I do.<br />
<br />
I'm currently using:<br />
<br />
Push &quot;cls$\r$\n&quot;<br />
Push &quot;&quot;<br />
Push &quot;1&quot;<br />
Push &quot;all&quot;<br />
Push &quot;${INSTDIR}\compile.bat&quot;<br />
 Call AdvReplaceInFile<br />
<br />
So, my script will use these and it should replace like so...<br />
cls$\r$\n<br />
cls$\r$\n<br />
cls$\r$\n<br />
cls$\r$\n<br />
...becomes...<br />
cls$\r$\n<br />
<br />
<br />
cls$\r$\n<br />
See that it always leaves another &quot;cls$\r$\n&quot; on the end, when it is not meant to.<br />
Can anyone find out what is either wrong with the script, or what I should do to fix this problem.<br />
<br />
Thanks<br />
<br />
-Stu<br />
<br />
Edit:<br />
I think it would be a good idea to add a &quot;Text file manipulation&quot; directory on the archive, unless it's ok that I create one myself?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">27th May 2003, 23:08</div></div><div class="posttext">You are more than welcome to create directories yourself. Do whatever you want, if you're not allowed the Archive should stop you :) (don't quote me on that :P)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th May 2003, 23:27</div></div><div class="posttext">Ok thanks :)<br />
I'm still not sure why it is not writing the last line down though (or removing it in my case)<br />
<br />
Maybe it's just because in the example I was testing under, it's because it is the last line of the file, and IfErrors is bypassing it.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th May 2003, 23:33</div></div><div class="posttext">How would I go about adding a subdir within the &quot;Useful Functions&quot; section?<br />
I would like to add &quot;Text file manipulation&quot; as a subsection within the &quot;Useful Functions&quot; section.<br />
<br />
Sorry if I am sounding stupid, but I don't want to make a mess of anything :p<br />
<br />
-Stu :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 13:32</div></div><div class="posttext">To add a directory to the archive go to Contribute and choose &quot;a new section that can contain other pages.&quot;<br />
<br />
I'll have a look at the script and tell you if I find anything.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 13:36</div></div><div class="posttext">I think the problem in the script is in the loop_filter label. The first comparison you do there is with a copy of $7 minus the last character. While this will work for lines where the last character is not a line break it won't work for the last line that probably doesn't have a line break after it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 14:34</div></div><div class="posttext">You are right!<br />
Anyone know how I would go about fixing this?<br />
<br />
Edit: Made the new section, and put all the scripts in.<br />
Could somone delete the old ones for me?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 14:36</div></div><div class="posttext">Afrow, just start the counter from -1 :)<br />
<br />
About the sections in the archive you should be able to delete the instances yourself assuming the pages were created by you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 14:40</div></div><div class="posttext">I have went ahead and did it myself since not all of the pages were yours.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 14:41</div></div><div class="posttext">LOL<br />
I was able to insert other peoples' pages into my section, but I couldn't delete the old ones (made by me) because it said I need administrator rights!<br />
<br />
Edit; ok I changed StrCpy $5 -1 and it still doesn't work, unless you mean something else?<br />
<br />
-Stu :) :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 14:46</div></div><div class="posttext">Oops, should be 1. You decrease it by one, not increase.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 14:51</div></div><div class="posttext">Yes, thats what I thought.<br />
The only thing is, once $5 becomes 0, doesn't $6 become &quot;&quot;?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2003, 14:58</div></div><div class="posttext">No since 0 is the same as &quot;&quot; and is the same as not specifying anything which never results in &quot;&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th May 2003, 15:23</div></div><div class="posttext">It didn't work using $5 as 1, it stops any lines being changed in the file at all.<br />
The function is pretty much ok<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>