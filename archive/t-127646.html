<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Super Function Task, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Super Function Task NSIS Discussion" />
	
	<title> Super Function Task [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Super Function Task</div>
<hr />
<div class="pda"><a href="t-127646.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=127646">Super Function Task</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th March 2003, 23:45</div></div><div class="posttext">I have a super task that I would like to see if anyone can do it...<br />
<br />
1. It will search for any .wal files listed inside a .map file<br />
2. It will assign the list of .wal files to a string.<br />
2x. There will be more than 1 of the .wal files in the .map file.<br />
3. It will print a list of all .wal files used in the .map.<br />
4. It will check if the .wal files exist in a directory. If they do not, then it will alert the user with a 'texture.wal was not found in textures dir' message.<br />
<br />
Seems a task that is very complex!<br />
<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th March 2003, 11:07</div></div><div class="posttext">Open the file, read line by line, if the line ends with .wal (StrCpy $0 $1 -4) check if the file exists, and if it doesn't print a warning.<br />
<br />
That assumes of course that the files are listed line by line. If they are not just process it. For example, if they are listed in the form of FileSize=filename.wal then just use StrStr to skip the equal sign.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 11:20</div></div><div class="posttext">Anyone going to write the code though :p<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">8th March 2003, 11:21</div></div><div class="posttext">I might have a go later tonight, depends if I pass my motorbike test I've got to do sometime in the next few hours :) (depends 'cause if I don't pass I might be miserable :P)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 13:25</div></div><div class="posttext">Heh!<br />
Good luck, and don't fall off :p<br />
<br />
Btw, my dad used to ride motor bikes till he fell off and did a lot of damage to himself and what ever he went into lol.<br />
Sorry, musn't put you off!<br />
<br />
I should try doing this script myself, but I have no idea how or what to do, let alone where to start.<br />
<br />
-Stuart :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 14:02</div></div><div class="posttext">New modified task...<br />
<br />
1. Gets list of wal files in map<br />
2. Prints only wal files from list that aren't found in the textures directoy.<br />
<br />
Also, the wal files will have directories assigned to them...<br />
e.g.<br />
afrowuk/afrow_wall2.wal<br />
<br />
It will then have to check whether textures\afrowuk\afrow_wall2.wal exists or not. If it doesn't then it needs to print a message saying that it doesn't exist.<br />
<br />
I still can't think how this would be done.<br />
Some sort of function with a loop in it.<br />
First loop, gets wal file no1 and finds if it exists.<br />
Loops, and goes to next wal file etc<br />
<br />
-Stuart :o</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">8th March 2003, 20:32</div></div><div class="posttext">Hee hee I passed :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th March 2003, 20:55</div></div><div class="posttext">????<br />
<br />
Goo you really are god you!<br />
<br />
Show us the script and I shall give you a prize!!!!<br />
<br />
-Stuart :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th March 2003, 17:00</div></div><div class="posttext">First one:<br />
<br />
ClearErrors<br />
FileOpen $0 file.map<br />
IfErrors error<br />
<br />
loop:<br />
	FileRead $0 $1<br />
	StrCmp $1 &quot;&quot; done<br />
	StrCpy $2 $1 -4<br />
	StrCmp $2 &quot;.wal&quot; 0 loop<br />
		DetailPrint $1<br />
		IfFileExists &quot;$INSTDIR\\$1&quot; loop<br />
			DetailPrint &quot;Warning: file doesn't exist!&quot;<br />
			Goto loop<br />
<br />
error:<br />
	Abort &quot;Error&quot;<br />
<br />
done:<br />
	FileClose $0<br />
	<br />
<br />
Not so hard to get to the second.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th March 2003, 17:00</div></div><div class="posttext">Oh, and congratulations Sunjammer! :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2003, 18:52</div></div><div class="posttext">What comes next?<br />
I tried the script but $1 prints nothing<br />
I have set it to target a definate map file too.<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th March 2003, 20:56</div></div><div class="posttext">If that script prints nothing attach a zip with an example .map file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th March 2003, 19:37</div></div><div class="posttext">http://myweb.tiscali.co.uk/imker/afrowuk/downloads/gbrdday3.zip<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th March 2003, 10:35</div></div><div class="posttext">There are no .wal files listed in that file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th March 2003, 12:58</div></div><div class="posttext">Really?<br />
The .map file is what stores all the map structure data including what textures go on which surface.<br />
I shall try the script on a .bsp file instead.<br />
<br />
Does that mean the .map file stores the .wal files in an encipted way?<br />
<br />
-Stuart</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th March 2003, 13:04</div></div><div class="posttext">Right OK, I found the textures.<br />
They don't have .wal on the end of them...<br />
<br />
<br />
( -10 2250 664 ) ( -10 2376 664 ) ( 117 2250 664 ) e1u1/sky1 0 2304 0 1.000000 1.000000 0 133 0<br />
<br />
<br />
The e1u1/sky1 bit is the texture (goes in C:\quake2\baseq2\textures\e1u1\sky1.wal)<br />
<br />
This makes it even harder to get only the .wal bits out of it.<br />
<br />
<br />
I will look at other ways of getting it, for example..<br />
<br />
Search for<br />
<br />
<br />
) path/file<br />
<br />
<br />
<br />
Edit:<br />
.bsp files are the same. They don't have the .wal extension on the ends.<br />
<br />
-Stuart</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>