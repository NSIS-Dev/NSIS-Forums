<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" help button for pages needed, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  help button for pages needed NSIS Discussion" />
	
	<title> help button for pages needed [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  help button for pages needed</div>
<hr />
<div class="pda"><a href="t-149292.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149292">help button for pages needed</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">norial</div><div class="date">15th September 2003, 10:46</div></div><div class="posttext">Hello,<br />
<br />
it could be very helpful to add a 'help' button to each installation page with a user defined text. so all addditional infos could be placed in this text box. This help text must be opened by clicking on the button or pressing F1.<br />
<br />
Or it's already possible? How?<br />
<br />
regards<br />
norial</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">15th September 2003, 10:55</div></div><div class="posttext">You would have to modify the source code.<br />
<br />
Usually the page text should give enough information, seperate help pages are not that user friendly.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">norial</div><div class="date">15th September 2003, 11:16</div></div><div class="posttext">why not?<br />
<br />
there is only place for a short text. and why additional info are not that user friendly?<br />
normally noboby reads this text (normally reads any installastion text and klick only 'next') but sometimes a user needs a explination of some words or options.<br />
<br />
regards<br />
/norial</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th September 2003, 14:28</div></div><div class="posttext">You can do it with a plug-in too, but there is currently no way to do it just by script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">norial</div><div class="date">15th September 2003, 14:31</div></div><div class="posttext">is any plugin available which insert a help/extra button in pages?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th September 2003, 14:37</div></div><div class="posttext">Not that I know of, you'd have to write one.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">25th September 2003, 16:40</div></div><div class="posttext">is this the sort of thing you're looking for?<br />
<br />
it is very basic (no config and a hacked around example) at the moment but if you click on the button or press f1 then a little window will pop up.  if the 'info' window is already open then it will be brought back to be active again.<br />
<br />
still working on how best to implement the setting of the button onto the pages and it's interacting with the running installer.<br />
<br />
note 1: the installer will hang if you press f1 with a messagebox open at the moment (not sure if i'm handling messages, etc correctly)<br />
<br />
note 2: if the info window is open when the installer is closed then it likely to cause a crash<br />
<br />
note 3: not all parts of the button will react at the moment due to it overlapping other controls on the dialog<br />
<br />
basically this is just a test to see if it'll work and to check how the handling of the nsis window works for such a feature<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">norial</div><div class="date">26th September 2003, 21:03</div></div><div class="posttext">Hello daz,<br />
<br />
Originally posted by DrO <br />
[B]is this the sort of thing you're looking for?<br />
<br />
<br />
it's exactly what I need. Is this the first release ? You gave some extra infos about possible problems. Do you like to fix the problems? <br />
<br />
I believe there only a few options needed. e.g button text, info text (formated? means normal text an bold or italic text).<br />
<br />
thanks for your help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">27th September 2003, 15:49</div></div><div class="posttext">glad i got the correct idea of what you meant ;) <br />
Is this the first release ?more of a test version to just see how feasible it is to do.<br />
<br />
i should have a few more bits done by monday (bit busy with work and things at the moment).<br />
<br />
will get it to be configurable but not entirely sure what you mean with the formatted bit.<br />
do you mean the text will be normal or italic or bold<br />
or<br />
(normal and bold) or (normal and italic)?<br />
<br />
parameters i'm likely to have for the next release will be:<br />
button_position  button_text  info_text<br />
e.g.<br />
&quot;0,0&quot; &quot;blah&quot; &quot;information is a killer&quot;<br />
<br />
note: &quot;0,0&quot; would put it in the top left corner (may make the button be autosized to the passed text length)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">29th September 2003, 13:34</div></div><div class="posttext">updated a few bits so that this is now more configurable to use ie font is taken from the installer, button can be repositioned, etc.<br />
<br />
problem is that when a page is finished, the installer will crash if the 'end' function is used (don't use for the moment). posting more to see how the font placement, etc works on other systems.<br />
<br />
-daz<br />
<br />
ps<br />
@the devs: when a page is changed, is the window proc being altered? asking since i can never get the 'end' function to successfully unsubclass the window - seems to be trying to access memory from where the dll was mapped into the address space even though i've restored the original window proc i had :(<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">29th September 2003, 13:37</div></div><div class="posttext">ooops, forgot to attach :cry:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2003, 14:06</div></div><div class="posttext">Originally posted by DrO <br />
@the devs: when a page is changed, is the window proc being altered? asking since i can never get the 'end' function to successfully unsubclass the window - seems to be trying to access memory from where the dll was mapped into the address space even though i've restored the original window proc i had :( <br />
<br />
There are two window procs, one for the outer dialog and one for the inner dialog. The problem you're having is probably caused by unloading the plug-in in the leave function which is called when processing a windows message. That message is sent to the dialog by no other but your own plug-in. When the control returns to your plug-in's code it's no longer there, and that causes the crash. Sub-classing is so wonderful, don't you think? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">29th September 2003, 14:26</div></div><div class="posttext">Sub-classing is so wonderful, don't you think?i know what you mean ;)<br />
<br />
thought that might be the case. with plugins, the hwndParent is the outer dialog (which i'm hoping is right) since that's the one i've been subclassing.<br />
<br />
in the code, i have in the start function the plugin using loadlibrary to keep the plugin loaded (removing the need for the /nounload) and then doing the required freelibrary in the end function after it all return values indicate i have unsubclassed the window.<br />
<br />
will have a better look at the installer exe source later on i think to see better what's going on<br />
<br />
thanks for the info kichik<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">3rd October 2003, 16:32</div></div><div class="posttext">finally worked out how to get around the problems with the plugin crashing (window hooks, doh! but no more subclassing :D)<br />
<br />
now it is possible to get a button onto any page and fixed the message deadlocks from the initial release when the installer was not the active window (messageboxes, etc). now it will allow the 'f1' to work when a messagebox is open.<br />
<br />
will post the latest version soon (need some testing on other systems to make sure that the dll is freed correctly so the plugins directory of the installer can be correctly removed on close)<br />
[would have posted it now but i brought the wrong version with me :eek: )<br />
<br />
@kichik - the info was much appreciated :) found the message id for a page change which makes it able to automatically unhook a page without calling other functions, cheers for the pointer<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">4th October 2003, 15:26</div></div><div class="posttext">latest version attached (check the example script on how to use)<br />
<br />
works on 2k and 98 (just ran on the work machine and it crashes - NT4 :()<br />
<br />
can people please test so i can get an idea of what is / isn't wrong with the code, thanks<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">12th October 2003, 16:08</div></div><div class="posttext">attached is a test version of the dll, can people with NT systems test it please<br />
<br />
it will put up messageboxes to show where in the startup process things are (also will beep when the dll is loaded and unloaded).<br />
<br />
tried it on a NT test machine and now it does not crash but on loading it will cause the installer to exit immediately<br />
(wierd how all other oses i've tried the code on work fine :weird: )<br />
<br />
thanks<br />
-daz<br />
<br />
p.s. the code shown will cope with reading text and rtf files now by using /file=blah.rtf in the window text parameter (see earlier posts for an example script) and i'm working on html display.<br />
just a pain that it's not running correctly with NT :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">15th October 2003, 13:34</div></div><div class="posttext">a few versions later and now the NT4 issue is fixed :) (see below for reason)<br />
<br />
i'm putting the updated version up in a bit after i get a readme on how to use it done.<br />
<br />
overall features are:[list=1] add a button onto a page where you want it to go (resizes to the text)<br />
 define your own button text e.g. &quot;Help&quot; or &quot;Readme...&quot;<br />
 show text you set in the script or use a file<br />
 support for plain text and rich text files<br />
 basic support of showing a html file (still need to correctly embed the window)<br />
 opens the window when pressing 'F1'<br />
[/list=1]the reasons for the crashing under NT4 where related to trying to hook the window in the dll which it doesn't seem to like doing when the hook function is in the dll calling it (though it works fine under all other oses tested :hang: ).<br />
<br />
the reason for this was trying to drop the need for a /NOUNLOAD to be used for all calls but i guess it wasn't meant to be :rolleyes:<br />
<br />
now i've gone back to a hybrid of the earlier code which just subclasses BUT i've improved the handling so it will now cope with the 'show' function being called in the page's leave function (useful for getting a button shown once the install has completed :cool: )<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">15th October 2003, 15:58</div></div><div class="posttext">attached is the latest version :) (both the dll and an example installer with it in use)<br />
<br />
see above for what it can do and check out the example for an idea of how to use the plugin.<br />
<br />
more info will be available soon (proper readme file and also an archive page -&gt; off to do that now)<br />
<br />
-daz<br />
<br />
<br />
now in the archive here (http://nsis.sourceforge.net/archive/nsisweb.php?page=444) so check it out for how to use the plugin :cool:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th October 2003, 16:23</div></div><div class="posttext">Good work!!!<br />
<br />
-Stu :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2003, 22:55</div></div><div class="posttext">Great, good job :)<br />
<br />
But why is there no source code? :(<br />
<br />
BTW, you can link directly to the attachment from the Archive, no need to link to the thread itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">16th October 2003, 07:17</div></div><div class="posttext">Originally posted by kichik <br />
But why is there no source code? :(forgot to bring the files with me :( will have it up for the next version + need to make it readable (other than by me ;) )<br />
<br />
forgot about a direct link (was trying to get at least something on the archive before leaving work), thanks for the pointer though<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">28th October 2003, 16:30</div></div><div class="posttext">version 0.9 attached<br />
<br />
changes to the plugin are:[list=1] fixed a few crash issues with related to string lengths :(<br />
 button is now hidden if no text is passed for the title<br />
 FULLY integrated webbrowser control (now it acts like the text window :cool: )<br />
 source code provided for your viewing pleasure<br />
[/list=1]the project assumes it is in .\contrib and the plugin will go into .\plugins for those of you interested and the example files are all in there too<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">norial</div><div class="date">10th December 2003, 15:10</div></div><div class="posttext">Hello !<br />
<br />
How can I use the Plugin with Modern UI<br />
 !insertmacro MUI_PAGE_WELCOME start<br />
<br />
Function start<br />
	HelpButton::show /NOUNLOAD &quot;246,231&quot; &quot;blah blah blah&quot; &quot;built to the power of the llama ^o^&quot; &quot;/html=$EXEDIR\winampmb.htm&quot;<br />
FunctionEnd<br />
<br />
Gives an error: !insertmacro: macro &quot;MUI_PAGE_WELCOME&quot; requires 0 parameter(s), passed 1!<br />
<br />
Must I modify system.nsh directly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">10th December 2003, 15:46</div></div><div class="posttext">u need to define the function in other way:<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE start<br />
!insertmacro MUI_PAGE_WELCOME<br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MÃ¦ster</div><div class="date">20th May 2004, 10:19</div></div><div class="posttext">It seems there are still several &quot;problems&quot; of this plugin together with the Modern UI:<br />
<br />
(1)The button is not displayed the XP styled way.<br />
(2)It seems that every window-refresh unloads the button espeacially a refresh of an InstallOptions-Dialog, so u have to call the HelpButton::show - method at least in every show and leave-function.<br />
<br />
Anyway - keep up the good work.<br />
Hope there will be some new versions in the future.<br />
<br />
Greez.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">1st April 2005, 12:07</div></div><div class="posttext">there should be a 1.0 out in the next few days which adds in chm support, more control over the positioning of the window (for both the chm window and the one the plugin makes) plus a few other tweaks, etc.<br />
<br />
there was the xp issue which may be sorted now as well (not too sure since i still don't have an xp install to run on myself but the last screenshot i got from a recent test build showed the button was xp themed *shrugs*<br />
<br />
anyhoo, expect a v1.0 soon :up:<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HansH</div><div class="date">9th April 2005, 13:20</div></div><div class="posttext">Originally posted by DrO <br />
there should be a 1.0 out in the next few days which adds in chm support, more control over the positioning of the window (for both the chm window and the one the plugin makes) plus a few other tweaks, etc.<br />
<br />
anyhoo, expect a v1.0 soon :up:<br />
<br />
-daz  <br />
<br />
I was looking for just this feature (chm) and I found the 0.9 version, but no 1.0 version.<br />
<br />
Any change of getting a 1.0 version ?<br />
<br />
thx<br />
<br />
Hans</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">9th April 2005, 14:58</div></div><div class="posttext">i've been a bit side tracked with work so the 1.0 release is a few days behind. if i can i'll do it sunday night (depends on work and 'real life' giving me the time to sit down and do some coding :) ) otherwise it'll be monday night<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HansH</div><div class="date">10th April 2005, 11:12</div></div><div class="posttext">never mind, I can wait.<br />
Sounds much better, 1.0 than 0.9  :)<br />
<br />
thx, Hans</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">10th April 2005, 20:34</div></div><div class="posttext">Help Support plugin v1.0 RC1<br />
<br />
download 1.0 RC1 (http://www.nunzioweb.com/daz/nsis/releases/HelpButton_v1_0_RC1.zip)<br />
<br />
archive reference page for 0.9 sytnax (http://nsis.sourceforge.net/archive/viewpage.php?pageid=379)<br />
<br />
main changes are that you can now use /help to use chm files e.g. &quot;/help=${NSISDIR}\nsis.chm&quot;<br />
<br />
as well it's now possible to specify the top left corner of the window as &quot;x,y&quot; or center (centers in the middle of the desktop) or centerp (centers in the middle of the installer).<br />
<br />
and also the size of the window can be set via &quot;width,height&quot; after the top left corner value.<br />
<br />
until it's documented/tweaked any of the new parts not used need to be set as &quot;&quot; in the script where you'd otherwise place the information. depending on feedback, etc i'll potnetially modify this and i will update the help file about this in the next day or so<br />
<br />
syntax example:<br />
HelpButton::show /NOUNLOAD &quot;232,231&quot; &quot;?&quot; &quot;&quot; &quot;/help=${NSISDIR}\nsis.chm&quot; &quot;&quot; &quot;&quot; &quot;centerp&quot; &quot;500,500&quot;<br />
<br />
this will place a '?' button to the left of one of the 'back' button in a classic UI installer and open the nsis.chm file centered over the installer window and 500x500 pixels in size<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">10th April 2005, 20:47</div></div><div class="posttext">could you please post at least the basic syntax??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">10th April 2005, 20:53</div></div><div class="posttext">Comm@nder21: post editted now ;)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HansH</div><div class="date">10th April 2005, 21:08</div></div><div class="posttext">Two words, absolutely great ! <br />
<br />
thx for the quick response<br />
<br />
Hans</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">11th April 2005, 13:14</div></div><div class="posttext">HansH: cool, good to hear it's working for you. i've been trying to get to a 1.0 state with it for almost a year now so it's good to know the updates haven't screwed things up too much :)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">os@multimed.dk</div><div class="date">2nd December 2005, 15:30</div></div><div class="posttext">Using version 1.0RC1 (and older) I can't get the html helpwindow large enough. I'm using: HelpButton::show /NOUNLOAD &quot;232,231&quot; &quot;?&quot; &quot;&quot; &quot;/html=xxx.html&quot; &quot;&quot; &quot;&quot; &quot;centerp&quot; &quot;800,800&quot;<br />
It's as if there is a max limit for the window size.<br />
Is it possible to fix?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">2nd December 2005, 17:30</div></div><div class="posttext">there shouldn't be a limit with the size (from the plugin side of things). the only thing i can think of is that the html help window enforces a size limit itself but without looking into this i can't say for certain. will try and look at it over the weekend (and update the wiki page as well)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">theaskingman</div><div class="date">4th August 2010, 16:16</div></div><div class="posttext">Has anyone tested this plugin with Windows 7/ Vista and the latest nsis version. 5 Years are a loooong time. <br />
I will give it a try, or are there already any other possibilities to give the user an extra information window? (The user needs to choose between several installing options which can't be explained in the short description box)<br />
<br />
The Help Button shows up after 3 seconds, don't know why it takes so long?<br />
Does anyone has a complete documentation for 1.0 or could tell me what's important to set?<br />
<br />
The screen size of the html is always the same, can't make it bigger. It's opened on the upper left corner of the desktop.<br />
<br />
Function helpCombo<br />
 HelpButton::show /NOUNLOAD &quot;300,100&quot; &quot;?&quot; &quot;&quot; &quot;/html=c:\gps\gpsbabel.html&quot; &quot;&quot; &quot;&quot; &quot;centerp&quot; &quot;1024,768&quot;<br />
FunctionEnd<br />
<br />
--&gt; should open in the center of the installer window, but it's on upper left coprner of the desktop<br />
--&gt; should be 1024 x 768, but it's only about 150 x 150<br />
--&gt; using MUI2.nsh<br />
<br />
Can I insert an html link instead of this help button, so that a browser window is opened? maybe this would be easier?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">4th August 2010, 17:07</div></div><div class="posttext">i've never tested it on Vista/Win7 (no idea if anyone else has) but i don't think i've even got the source code for this anymore (and it'd need a complete re-code anyway to make it compatible with ansi and unicode installers that are now available). however it's been so long since i've done NSIS plug-in coding i don't think i'm going to have the time to make a new version.<br />
<br />
as for the size limits it sounds like it's an issue with the plug-in's ability to control the html control (though i had thought it allowed for larger sizes when i'd developed it so maybe something with the IE web browser control has changed, dunno).<br />
<br />
you might be able to make a link control with nsDialogs and go that way, am sure i'll be corrected if i'm wrong, heh<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">theaskingman</div><div class="date">4th August 2010, 17:13</div></div><div class="posttext">thanks for your quick answer!<br />
Ok, that's good to know. I will try it with nsdialogs or the linker plugin.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>