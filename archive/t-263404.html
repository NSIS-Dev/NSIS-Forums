<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 2 in 1, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  2 in 1 NSIS Discussion" />
	
	<title> 2 in 1 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  2 in 1</div>
<hr />
<div class="pda"><a href="t-263404.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=263404">2 in 1</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">10th January 2007, 20:53</div></div><div class="posttext">I like to save in a variable the state of the LAN<br />
Ive this sample code and ive 2 problems, first i dont know how compare with LOGICALLY OR like this<br />
 var1 = 18 OR var1 = 86<br />
<br />
And second, why    Strcpy ${LANDETECTED} 'no' 2 shows me an error when compiling?<br />
<br />
<br />
Code :<br />
--------------------------------------------------<br />
!define LANDETECTED 'yes'<br />
<br />
outfile IsLAN.exe<br />
showinstdetails show<br />
<br />
Section<br />
   Call IsLanDetected<br />
<br />
   StrCmp $1 '1' ildConectado<br />
      Strcpy ${LANDETECTED} 'no' 2<br />
      Goto ildFin<br />
   ildConectado:<br />
      Strcpy ${LANDETECTED} 'yes' 2<br />
      StrCmp $0 '18' ildFin<br />
      ;86 compare<br />
      Strcpy ${LANDETECTED} 'no' 2<br />
   ildFin:<br />
   Messagebox mb_ok 'Cconnected (1) : $1  /  Plugged (18/86) : $0  / LANDETECTED ${LANDETECTED}&quot;<br />
<br />
sectionend<br />
<br />
 Function IsLanDetected<br />
   System::Call 'wininet.dll::InternetGetConnectedState(*i .r0, i 0) i.r1'<br />
; Detailprint '$$1==$1 (connected state)'<br />
; When plugged at this point $1 = 1<br />
; When plugged+proxy at this point $1 = 1<br />
; When unplugged at this point $1 = 0<br />
<br />
;Detailprint '$$0==$0 (connection)'<br />
; When plugged at this point $0 = 18<br />
; When plugged+proxy at this point $0 = 86<br />
; When unplugged at this point $0 = 16<br />
<br />
FunctionEnd<br />
--------------------------------------------------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">10th January 2007, 21:19</div></div><div class="posttext">var CONNECT_STATE<br />
var LAN_STATE<br />
<br />
outfile IsLAN.exe<br />
showinstdetails show<br />
<br />
Section<br />
Call IsLanDetected<br />
<br />
StrCmp $1 '1' ildConectado<br />
Strcpy $CONNECT_STATE 'no'<br />
Strcpy $LAN_STATE 'no'<br />
Goto ildFin<br />
ildConectado:<br />
Strcpy $CONNECT_STATE 'yes'<br />
StrCmp $0 '18' 0 +3<br />
Strcpy $LAN_STATE 'yes'<br />
goto ildFin<br />
StrCmp $0 '86' 0 +3<br />
Strcpy $LAN_STATE 'yes'<br />
goto ildFin<br />
Strcpy $LAN_STATE 'no'<br />
ildFin:<br />
Messagebox mb_ok &quot;Connected (1) : $1 $CONNECT_STATE$\r$\n\<br />
LAN State (18/86) : $0 $LAN_STATE&quot;<br />
<br />
sectionend<br />
<br />
Function IsLanDetected<br />
System::Call 'wininet.dll::InternetGetConnectedState(*i .r0, i 0) i.r1'<br />
; Detailprint '$$1==$1 (connected state)'<br />
; When plugged at this point $1 = 1<br />
; When plugged+proxy at this point $1 = 1<br />
; When unplugged at this point $1 = 0<br />
<br />
;Detailprint '$$0==$0 (connection)'<br />
; When plugged at this point $0 = 18<br />
; When plugged+proxy at this point $0 = 86<br />
; When unplugged at this point $0 = 16<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">11th January 2007, 13:17</div></div><div class="posttext">Thanks RW, but for i saw in your code i ask you again, it is no way to perform a Logical OR betwen 2 expressions??<br />
<br />
Bye</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">11th January 2007, 13:20</div></div><div class="posttext">Definitely it is possible, see included LogicLib.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">11th January 2007, 13:46</div></div><div class="posttext">Ok Thanks again<br />
By the way ive modify the code using Logiclib<br />
Wich is best??<br />
<br />
It looks like this<br />
-------------------------------------------<br />
var CONNECT_STATE<br />
var LAN_STATE<br />
#Include LogicLib<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
outfile IsLAN.exe<br />
showinstdetails show<br />
<br />
Section<br />
Call IsLanDetected<br />
Strcpy $CONNECT_STATE 'no'<br />
Strcpy $LAN_STATE 'no'<br />
StrCmp $1 '0' ildEnd 0<br />
  Strcpy $LAN_STATE 'yes'<br />
  ${Select} $0<br />
    ${Case} '18'<br />
        Strcpy $CONNECT_STATE 'yes'<br />
    ${Case} '86'<br />
        Strcpy $CONNECT_STATE 'yes'<br />
    ${CaseElse}<br />
        Strcpy $CONNECT_STATE 'no'<br />
  ${EndSelect}<br />
  ildEnd:<br />
Messagebox mb_ok &quot;Connected (1) : $1 $CONNECT_STATE$\r$\n\LAN State (18/86) : $0 $LAN_STATE&quot;<br />
<br />
<br />
sectionend<br />
<br />
 Function IsLanDetected<br />
   System::Call 'wininet.dll::InternetGetConnectedState(*i .r0, i 0) i.r1'<br />
; Detailprint '$$1==$1 (connected state)'<br />
; When plugged at this point $1 = 1<br />
; When plugged+proxy at this point $1 = 1<br />
; When unplugged at this point $1 = 0<br />
<br />
;Detailprint '$$0==$0 (connection)'<br />
; When plugged at this point $0 = 18<br />
; When plugged+proxy at this point $0 = 86<br />
; When unplugged at this point $0 = 16<br />
<br />
IntFmt $R1 &quot;0x%X&quot; &quot;$0&quot;<br />
;Detailprint '$$R1==$R1 (connection in hex)'<br />
; When plugged at this point $R1 = 0x12<br />
; When plugged+proxy at this point $R1 = 0x56<br />
; When unplugged at this point $R1 = 0x10<br />
<br />
IntOp $R0 $0 &amp; 1<br />
;Detailprint '$$R0==$R0 (modem bit)'<br />
; When plugged at this point $R0 = 0<br />
; When plugged+proxy at this point $R0 = 0<br />
; When unplugged at this point $R0 = 0<br />
FunctionEnd<br />
-------------------------------------------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">11th January 2007, 15:55</div></div><div class="posttext">LogicLib is always a better way cause it saves a lot of typing :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Boyito</div><div class="date">11th January 2007, 15:58</div></div><div class="posttext">Thanks<br />
See you in my next post :-D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>