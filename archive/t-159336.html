<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to call *only* one function and ignore all others from an include.nsh file?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to call *only* one function and ignore all others from an include.nsh file? NSIS Discussion" />
	
	<title> How to call *only* one function and ignore all others from an include.nsh file? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to call *only* one function and ignore all others from an include.nsh file?</div>
<hr />
<div class="pda"><a href="t-159336.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=159336">How to call *only* one function and ignore all others from an include.nsh file?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">11th December 2003, 17:19</div></div><div class="posttext">Hello,<br />
<br />
I am trying to exclude files from a recursive directive. I found one solution who's thread died two months ago, and the program unfinished without documentation. This is the approach I am taking on excluding certain files. I am not wildcarding extensions. I am only pin-pointing certain files in which I know their name and path. My target OS is 2000/NT/XP/2003.<br />
<br />
This is what the section looks like...<br />
<br />
  Section<br />
Call &quot;file_move&quot;<br />
    SetOutPath &quot;$INSTDIR&quot;<br />
      SetOverwrite on<br />
        File /r &quot;C:\filepath&quot;	<br />
  SectionEnd<br />
  <br />
This is what the function in the include.nsh file looks like...  <br />
<br />
<br />
Function file_move<br />
!system '&quot;CMD/C|MOVE /Y &quot;C:\filepath\file.ext&quot; &quot;C:\file.ext&quot;'<br />
FunctionEnd<br />
<br />
The objective is to move the file before it gets recursed and included with the section. The above section, function and call work but this is the problem.<br />
<br />
If I add a new function to the include.nsh to restore the moved file, it seems all commands within the include.nsh are executed. This is what the include.nsh file looks like...<br />
<br />
Function file_move<br />
!system '&quot;CMD/C|MOVE /Y &quot;C:\filepath\file.ext&quot; &quot;C:\file.ext&quot;'<br />
FunctionEnd<br />
<br />
Function file_restore<br />
!system '&quot;CMD/C|MOVE /Y &quot;C:\file.ext&quot; &quot;C:\filepath\file.ext&quot;'<br />
FunctionEnd<br />
<br />
What basically happens is when I call file_move, both file_move and file_restore are executed. Is this correct? I thought by calling a single function by it's name only that function would be executed. If I am wrong, how then can I only call one function and shut out all others?<br />
<br />
I am using a NSIS 2.05b snapshot from only a few days ago. There is no call anywhere in the entire script.nsi which calls function file_restore. Am I doing something wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">11th December 2003, 18:56</div></div><div class="posttext">You are using run-time instructions (Call) to do something that you want to happen at compile-time. Your two functions should instead be macros. I.e. your .nsh file should contain !macro file_move <br />
!system '&quot;CMD/C|MOVE /Y &quot;C:\filepath\file.ext&quot; &quot;C:\file.ext&quot;' <br />
!macroend and your main script Section <br />
!insertmacro &quot;file_move&quot; <br />
SetOutPath &quot;$INSTDIR&quot; <br />
SetOverwrite on <br />
File /r &quot;C:\filepath&quot; <br />
SectionEnd etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vbgunz</div><div class="date">11th December 2003, 19:22</div></div><div class="posttext">Hello Eccles,<br />
<br />
So sweet, it works like a charm. Thank's a million :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>