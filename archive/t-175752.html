<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Back Button not working properly, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Back Button not working properly NSIS Discussion" />
	
	<title> Back Button not working properly [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Back Button not working properly</div>
<hr />
<div class="pda"><a href="t-175752.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=175752">Back Button not working properly</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">8th April 2004, 00:56</div></div><div class="posttext">Hi All,<br />
From a NSIS script file, I'm trying to do something like this <br />
<br />
If the user forgets to enter input, display a messagebox that forces him to enter input. <br />
<br />
This works fine but when I hit the back button, it displays the message box instead of navigating to the previous page.<br />
<br />
Is there any way to read the value of Back, Next etc from the code? Do they live in register variables? I checked $R1, it's empty!<br />
<br />
Would really appreciate any help,<br />
Thanks in advance,<br />
M.J.S<br />
<br />
P.S. I'm using NSIS 2.0 and the modern UI.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th April 2004, 11:16</div></div><div class="posttext">After you have called the DLL, InstallOptions adds one string to the stack, with one of the following values. [Except for the function &quot;InitDialog&quot; which returns the page handle.]:<br />
<br />
success - The user has pressed the Next button <br />
back - The user has pressed the Back button <br />
cancel - The user has pressed the Cancel button <br />
error - An error has occurred, the dialog cannot be displayed.<br />
<br />
An example:<br />
<br />
InstallOptions::ShowPage &quot;Test.ini&quot;<br />
Pop $0<br />
<br />
The return value is returned to variable $0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">8th April 2004, 13:26</div></div><div class="posttext">Using the leave function is easier.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">8th April 2004, 17:06</div></div><div class="posttext">I tried the leave function approach before I posted to the forum.<br />
<br />
page custom Foo &quot;&quot; leaveFoo<br />
<br />
Function leaveFoo<br />
;do something<br />
FunctionEnd<br />
<br />
When I compiled the script, it zeroed this code out...<br />
<br />
Any idea why?<br />
<br />
<br />
Thanks,<br />
M.J.S</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">8th April 2004, 17:25</div></div><div class="posttext">Page custom Foo leaveFoo</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">13th April 2004, 00:04</div></div><div class="posttext">Cool, thanks for the help. This works for me. I'm still a little unclear on how I would find the variable in which &quot;back&quot; is stored.<br />
<br />
Thanks,<br />
Malathi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 18:50</div></div><div class="posttext">Just wonderinf if anyone has answers to the question that I posted...<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 19:09</div></div><div class="posttext">You mean the text of the button? See the language file for the language string name.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 19:35</div></div><div class="posttext">Thanks for your response. I'm actually trying to get this to work for me...<br />
<br />
Function customPage<br />
<br />
; Do something to get R1. Not sure what exactly...<br />
StrCmp $R1 &quot;back&quot; _goback done<br />
_goback:<br />
     Call Foo ;to go back to the previous custom page<br />
 done:<br />
<br />
FunctionEnd<br />
<br />
<br />
Thanks Again,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 19:37</div></div><div class="posttext">If you want to stay on the current page use Abort in the leave function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 19:43</div></div><div class="posttext">Nope. Want to go back to the previous screen. Foo actually  reads in values from Foo.ini.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 20:21</div></div><div class="posttext">You can also use Abort in the pre function to stay on the current page.<br />
<br />
What exactly are you trying to do? When do you want to go back?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 21:17</div></div><div class="posttext">Function Bar LeaveBar<br />
_start:<br />
;If the user forgets to enter input<br />
goto _start<br />
FunctionEnd<br />
<br />
Function Foo<br />
_start:<br />
;If the user forgets to enter input<br />
goto _start<br />
Function End<br />
<br />
Function LeaveBar<br />
; If the user hit the back button( how do I know this?) Call Foo<br />
;else goto _done<br />
_done:<br />
FunctionEnd<br />
<br />
Here Screen 1 inovolves Foo. We are on screen 2 (involving Bar) trying to hit back to get to Screen 1 again...<br />
<br />
If the goto _start is not present it works perfectly but this is not an option for me as I want to force the user to enter input.<br />
<br />
Thanks,<br />
Malathi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 22:01</div></div><div class="posttext">I don't really understand what you mean. Do you want to go back to page 1 when validating page 2? Why?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 22:10</div></div><div class="posttext">Nope. What I want to do is to go back to Page 1 whenever the user hits back even if all the entries for the required fields are blank. I'm able to accomplish this for cancel i.e irrespective of the state of the required fields, I'm able to cancel out of the installer by inserting a simple strcmp function. All I want is to do the same for back but I dont know how to get hold of the variable that is populated when the user hits back.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th April 2004, 22:13</div></div><div class="posttext">The leave function is only called when the user clicks Next.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">14th April 2004, 22:24</div></div><div class="posttext">Ahh..Any other options? All I want to do is <br />
StrCmp $UserHitBack &quot;Back&quot; Call Page1<br />
<br />
Problem is I dont know how I can get the variable that the installer stores the value of the back button in...Is it one of the register variables?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">15th April 2004, 09:52</div></div><div class="posttext">Please explain exactly what feature you want. If a user clicks Back it will of course go the to previous page. What else do you want?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mj_igx</div><div class="date">21st April 2004, 22:46</div></div><div class="posttext">I think I have this figured out. Thanks for your help. Will let you know how it goes...<br />
<br />
Basically, the problem stems from the loop that I'm using to force the user to enter input. Moving the loop to the leave function fixes it.<br />
<br />
Thanks,<br />
Malathi</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>