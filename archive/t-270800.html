<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" LogicLab loops, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  LogicLab loops NSIS Discussion" />
	
	<title> LogicLab loops [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  LogicLab loops</div>
<hr />
<div class="pda"><a href="t-270800.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270800">LogicLab loops</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">neil.benn</div><div class="date">7th May 2007, 19:15</div></div><div class="posttext">Hello,<br />
<br />
      I just discovered the logiclab header which looks like it will really help me to produce more readable code.  So I tried to use it and have come into problems.  Here is what I have done : <br />
<br />
At the top of the file, I have the line<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
Later on I have the following function (cut down to a smaller example) : <br />
<br />
Function ModifyShortcutFile<br />
<br />
    ;we need to get the machine list and tokenise it<br />
    StrCpy $1 &quot;DropPaq&quot;<br />
    StrCpy $2 &quot;.lnk&quot;<br />
    StrCpy $LOOP_COUNT 0<br />
    <br />
    ${Do}<br />
        StrCpy $9 &quot;&quot;<br />
        ${StrTok} $R0 ${MACHINE_LIST} &quot;|&quot; $LOOP_COUNT 1<br />
        IntOp $LOOP_COUNT $LOOP_COUNT + 1<br />
        ${If} $R0 == ``<br />
            ${ExitDo}<br />
        StrCpy $9 &quot;$1 $R0$2&quot;<br />
        DetailPrint &quot;Accessing PDA for $R0 on file $9&quot; <br />
<br />
    ${Loop}<br />
    <br />
FunctionEnd<br />
<br />
However when I attempt to compile this, I get the following error:<br />
<br />
     [exec] FunctionEnd<br />
     [exec] Function: &quot;ModifyShortcutFile&quot;<br />
     [exec] StrCpy $1 &quot;DropPaq&quot; () ()<br />
     [exec] StrCpy $2 &quot;.lnk&quot; () ()<br />
     [exec] StrCpy $LOOP_COUNT &quot;0&quot; () ()<br />
     [exec] !insertmacro: _Do<br />
     [exec] !insertmacro: end of _Do<br />
     [exec] StrCpy $9 &quot;&quot; () ()<br />
     [exec] !insertmacro: StrTok<br />
     [exec] Push: wellmate<br />
     [exec] Push: |<br />
     [exec] Push: $LOOP_COUNT<br />
     [exec] Push: 1<br />
     [exec] Call &quot;StrTok&quot;<br />
     [exec] Pop: $R0<br />
     [exec] !insertmacro: end of StrTok<br />
     [exec] IntOp: $LOOP_COUNT=$LOOP_COUNT+1<br />
     [exec] !insertmacro: _If<br />
     [exec] !insertmacro: end of _If<br />
     [exec] !insertmacro: _Goto<br />
     [exec] !insertmacro: end of _Goto<br />
     [exec] StrCpy $9 &quot;$1 $R0$2&quot; () ()<br />
     [exec] DetailPrint: &quot;Accessing PDA for $R0 on file $9&quot;<br />
     [exec] !insertmacro: _Loop<br />
     [exec] !error: Cannot use Loop without a preceding Do<br />
     [exec] Error in macro _Loop on macroline 4<br />
     [exec] Error in script &quot;C:\Documents and Settings\Neil Benn\My Documents\svn_new\trunk\DropPaq/installer/CE/DropPaq CE.nsi&quot; on line 254 -- aborting creation process<br />
<br />
  I can't work out what, I'm doing wrong - I took a look at the macro in StrTok which has an examaple of the LogicLab headers and I think I am doing the right thing but I'm not sure.<br />
<br />
  Apologies for the length of this post - I hope you can help and thanks for reading this far.<br />
<br />
Cheers,<br />
<br />
Neil</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">7th May 2007, 20:28</div></div><div class="posttext">${If} $R0 == ``<br />
${ExitDo}<br />
${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">7th May 2007, 20:54</div></div><div class="posttext">You don't have an '${EndIf}' before the ${Loop} - I guess you want that after the ${ExitDo} line.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>