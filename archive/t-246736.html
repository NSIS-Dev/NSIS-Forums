<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Can't get AddBrandingImage/SetBrandingImage to work, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Can't get AddBrandingImage/SetBrandingImage to work NSIS Discussion" />
	
	<title> Can't get AddBrandingImage/SetBrandingImage to work [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Can't get AddBrandingImage/SetBrandingImage to work</div>
<hr />
<div class="pda"><a href="t-246736.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=246736">Can't get AddBrandingImage/SetBrandingImage to work</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Nils Schneider</div><div class="date">22nd May 2006, 11:42</div></div><div class="posttext">Hello,<br />
<br />
I'm trying to insert a branding image at the top of the installer without success. I used AddBrandingImage to reserve space for the image and this part works.<br />
<br />
But in my main installing section I'm using SetBrandingImage title.bmp but the bitmap isn't being displayed although it resides in the same directory where the installer is located in.<br />
<br />
Another question, isn't it possible to link the bitmap to the installer instead of the need to ship it?<br />
<br />
EDIT: Why do I have to set the branding image in a section? Isn't it possible to set the branding image for the whole installer?<br />
<br />
Thanks in advance,<br />
<br />
Nils</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd May 2006, 18:42</div></div><div class="posttext">If you are using the MUI (Modern User Interface) you just need to add these 3 lines below your &quot;!include &quot;MUI.nsh&quot;&quot; line:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;LeftPanel.bmp&quot;<br />
!define MUI_HEADERIMAGE<br />
!define MUI_HEADERIMAGE_BITMAP &quot;Header.bmp&quot;<br />
<br />
<br />
Hope this helps.<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Nils Schneider</div><div class="date">23rd May 2006, 09:43</div></div><div class="posttext">I didn't use the MUI but tried it with the same result. Space is reserved for the image, but it isn't being displayed.<br />
<br />
Any other tips?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">23rd May 2006, 20:20</div></div><div class="posttext">How about show us your code, what you have so we can see what's wrong</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Nils Schneider</div><div class="date">23rd May 2006, 20:33</div></div><div class="posttext">No problem, here it is:<br />
<br />
<br />
; Installation Script (C) 2006 by MyCompanyName Software GmbH<br />
<br />
!include &quot;versioncheck.nsi&quot;<br />
!include &quot;Sections.nsh&quot;<br />
<br />
; __________________________________________________________<br />
;<br />
<br />
!define		NAME					&quot;MyProgramName&quot;<br />
!define		EDITORNAME				&quot;MyProgramName - Karteneditor&quot;<br />
!define		EXE						&quot;bin\S2C.exe&quot;<br />
!define		EDITOREXE				&quot;bin\S2CEditor.exe&quot;<br />
<br />
!define		SECTION_PROGRAMFILES	&quot;Programmdateien (benötigt)&quot;<br />
!define		SECTIONGROUP_SHORTCUTS	&quot;Verknüpfungen&quot;<br />
!define		SECTION_STARTMENU		&quot;Startmenü&quot;<br />
!define		SECTION_DESKTOP			&quot;Desktop&quot;<br />
<br />
; __________________________________________________________<br />
;<br />
<br />
Name			&quot;${NAME}&quot;<br />
OutFile			&quot;..\Autorun\setup.exe&quot;<br />
<br />
Icon			&quot;fun_32x32.ico&quot;<br />
UninstallIcon	&quot;fun_32x32.ico&quot;<br />
<br />
InstallDir 		&quot;$PROGRAMFILES\MyPublisherName\MyCompanyName\${NAME}&quot;<br />
<br />
LicenseData		license.txt<br />
LicenseForceSelection	checkbox	&quot;Ich habe die Lizenzbestimmungen gelesen und stimme ihnen zu&quot;<br />
<br />
CompletedText			&quot;Installation abgeschlossen&quot;<br />
DetailsButtonText		&quot;Details anzeigen&quot;<br />
InstallButtonText		&quot;Installieren&quot;<br />
<br />
SpaceTexts				&quot;Benötigter Speicherplatz: &quot; &quot;Verfügbarer Speicherplatz: &quot;<br />
<br />
SubCaption		0		&quot;Lizenzbestimmungen&quot;<br />
SubCaption		1		&quot; &quot;<br />
SubCaption		2		&quot;Installationsverzeichnis&quot;<br />
SubCaption		3		&quot;Installiere Dateien&quot;<br />
SubCaption		4		&quot;Abgeschlossen&quot;<br />
<br />
MiscButtonText 			&quot;Zurück&quot; &quot;Weiter &gt;&quot; &quot;Abbrechen&quot; &quot;Beenden&quot;<br />
<br />
UninstallButtonText		&quot;Deinstallieren&quot;<br />
UninstallCaption		&quot;${NAME} Deinstallation&quot;<br />
UninstallText			&quot;Die folgende Anwendung wird ${NAME} deinstallieren. Drücken sie Weiter um fortzufahren.&quot; &quot;Verzeichnis:&quot;<br />
<br />
UninstallSubCaption	0	&quot; &quot;<br />
UninstallSubCaption	1	&quot; &quot;<br />
UninstallSubCaption	2	&quot; &quot;<br />
<br />
DirText					&quot;Wählen sie das Verzeichnis aus, in welches ${NAME} installiert werden soll:&quot; &quot;Zielverzeichnis&quot; &quot;Durchsuchen...&quot; &quot;Verzeichnis wählen&quot;<br />
ComponentText			&quot;Die folgende Anwendung wird ${NAME} auf ihrem Computer installieren. Bitte wählen sie aus, welche Komponenten sie installieren möchten.&quot; &quot; &quot; &quot;Wählen sie die zu installierenden Komponenten&quot;<br />
<br />
; THIS ONE DOESN'T WORK<br />
AddBrandingImage		top 124<br />
BrandingText			&quot; &quot;<br />
<br />
; _______________________<br />
;<br />
<br />
AutoCloseWindow true<br />
XPStyle         on<br />
ShowInstDetails show<br />
<br />
; Registry key to check for directory (so if you install again, it will <br />
; overwrite the old one automatically)<br />
InstallDirRegKey HKLM &quot;SOFTWARE\MyPublisherName\MyCompanyName\${NAME}&quot; &quot;Install_Dir&quot;<br />
<br />
; _______________________<br />
; Program files<br />
; <br />
<br />
Section &quot;${SECTION_PROGRAMFILES}&quot;<br />
<br />
	; AND THIS ONE DOESN'T WORK EITHER<br />
	SetBrandingImage /RESIZETOFIT &quot;title.bmp&quot;<br />
<br />
	; Set output path to the installation directory.<br />
	; Put files there<br />
<br />
	SetOutPath $INSTDIR\bin<br />
	File &quot;..\${EXE}&quot;<br />
	File &quot;..\${EDITOREXE}&quot;<br />
	File &quot;..\bin\*.dll&quot;<br />
<br />
	SetOutPath $INSTDIR\data<br />
	;File /r &quot;..\data\*.*&quot;<br />
<br />
	SetOutPath $INSTDIR<br />
<br />
	; Write the installation path into the registry<br />
	WriteRegStr HKLM &quot;SOFTWARE\MyPublisherName\MyCompanyName\${NAME}&quot; &quot;Install_Dir&quot; &quot;$INSTDIR&quot;<br />
<br />
	; Write the uninstall keys for Windows<br />
	WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}&quot; &quot;DisplayName&quot; &quot;${NAME}&quot;<br />
	WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}&quot; &quot;UninstallString&quot; '&quot;$INSTDIR\uninstall.exe&quot;'<br />
	WriteUninstaller &quot;uninstall.exe&quot;<br />
SectionEnd<br />
<br />
; _______________________<br />
; Shortcuts<br />
; <br />
<br />
Var DirectXVersion<br />
Var Result<br />
<br />
Section &quot;DirectX 9.0c&quot;<br />
	ReadRegStr $DirectXVersion HKLM &quot;Software\Microsoft\DirectX&quot; &quot;Version&quot;<br />
	!define Ver2 &quot;4.09.00.0904&quot;<br />
	${VersionCheck} &quot;$DirectXVersion&quot; &quot;${Ver2}&quot; $Result<br />
<br />
	IntCmp $Result 2 equal less more<br />
		less:<br />
		more:<br />
			;!insertmacro UnselectSection &quot;DirectX 9.0c&quot;<br />
			SectionIn RO<br />
			Goto done<br />
		equal:<br />
			ExecWait &quot;DirectX/directx_9c_redist.exe&quot;<br />
	done:<br />
SectionEnd<br />
<br />
; _______________________<br />
; Shortcuts<br />
; <br />
<br />
SectionGroup &quot;${SECTIONGROUP_SHORTCUTS}&quot;<br />
	Section &quot;${SECTION_STARTMENU}&quot;<br />
		CreateDirectory	&quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}&quot;<br />
		CreateShortCut	&quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot; &quot;&quot; &quot;$INSTDIR\uninstall.exe&quot; 0<br />
		CreateShortCut	&quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\${NAME}.lnk&quot; &quot;$INSTDIR\${EXE}&quot; &quot;&quot; &quot;$INSTDIR\${EXE}&quot; 0<br />
		CreateShortCut	&quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\${NAME}.lnk&quot; &quot;$INSTDIR\${EDITOREXE}&quot; &quot;&quot; &quot;$INSTDIR\${EDITOREXE}&quot; 0<br />
	SectionEnd<br />
	<br />
	Section &quot;${SECTION_DESKTOP}&quot;<br />
		CreateShortCut	&quot;$DESKTOP\${NAME}.lnk&quot; &quot;$INSTDIR\${EXE}&quot; &quot;&quot; &quot;$INSTDIR\${EXE}&quot; 0<br />
		CreateShortCut	&quot;$DESKTOP\${NAME}.lnk&quot; &quot;$INSTDIR\${EDITOREXE}&quot; &quot;&quot; &quot;$INSTDIR\${EDITOREXE}&quot; 0<br />
	SectionEnd<br />
SectionGroupEnd<br />
<br />
; _______________________<br />
; Uninstall<br />
;<br />
<br />
Section &quot;Uninstall&quot;<br />
	; remove registry keys<br />
	DeleteRegKey HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\MyPublisherName\MyCompanyName\${NAME}&quot;<br />
	DeleteRegKey HKLM &quot;SOFTWARE\MyPublisherName\MyCompanyName\${NAME}&quot;<br />
<br />
	; remove shortcuts, if any.<br />
	Delete &quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}\*.*&quot;<br />
	RMDir  &quot;$SMPROGRAMS\MyPublisherName\MyCompanyName\${NAME}&quot;<br />
	Delete &quot;$DESKTOP\${NAME}.lnk&quot;<br />
<br />
	; remove files<br />
	RMDir /r &quot;$INSTDIR&quot;<br />
SectionEnd<br />
<br />
; _______________________<br />
; Callbacks<br />
;<br />
<br />
Function .onInstSuccess<br />
;	MessageBox MB_YESNO &quot;Möchten sie ${NAME} nun starten?&quot; IDNO NoStart<br />
	Exec &quot;autorun.exe&quot;<br />
;	NoStart:<br />
FunctionEnd<br />
<br />
Function .onUserAbort<br />
	Exec &quot;autorun.exe&quot;<br />
FunctionEnd<br />
<br />
<br />
The bitmap has a size of 342x124 pixels, 24bit.<br />
<br />
Many thanks,<br />
<br />
Nils</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd May 2006, 20:34</div></div><div class="posttext">MUI_HEADERIMAGE_BITMAP would most likely require you to put your bitmap images in $PLUGINSDIR, not $EXEDIR.<br />
If your bitmap resides in the same folder as your installer, you still need to tell the installer that it is there by using the $EXEDIR constant, e.g. SetBrandingImage `$EXEDIR\title.bmp`<br />
or by setting the working folder to $EXEDIR with SetOutPath first. Without calling SetOutPath, the working directory is usually $DESKTOP (which is the highest level directory in the directory hierarchy).<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>