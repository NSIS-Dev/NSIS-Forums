<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Automatic generation of Detele items in Uninstall section, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Automatic generation of Detele items in Uninstall section NSIS Discussion" />
	
	<title> Automatic generation of Detele items in Uninstall section [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Automatic generation of Detele items in Uninstall section</div>
<hr />
<div class="pda"><a href="t-178773.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=178773">Automatic generation of Detele items in Uninstall section</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mfreed</div><div class="date">3rd May 2004, 05:49</div></div><div class="posttext">I am using &quot;File /r path_to_application/*.*&quot; to install all files for my application. Is it possible to somehow get NSIS to keep track of this list of files, and automatically generate the Uninstall section with &quot;Delete&quot; commands for each file?<br />
<br />
From my reading and searches, it appears that there are only two ways to remove the application. The first is to manually enter &quot;Delete&quot; commands for each file, which is too tedious when the application is large and the list of files changes often. The second is to use an &quot;RMDir /r &quot;$INSTDIR&quot;&quot; statement, which I don't like because it will remove any other files that the user put into the installation directory.<br />
<br />
Is there any way to accomplish this automatic uninstallation?<br />
<br />
By the way, I am new to NSIS (looks VERY cool so far!), so hopefully I didn't miss something obvious. I couldn't find the answer in any of my searches.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">3rd May 2004, 08:52</div></div><div class="posttext">You can create a macro so you only have to enter all filenames once or let the installer create a log-file with all filenames and delete these files when uninstalling.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">3rd May 2004, 08:59</div></div><div class="posttext">Hi mfreed and welcome to the forums :) <br />
<br />
Well, if you want to do that I'm afraid you'll have to write a couple of functions... <br />
<br />
Actually there are several ways to achieve that. <br />
<br />
You can for instance write a wrapper (macro) for the 'File' command that would write the files/directories into an Ini file. Then write a function for the uninstaller that loops through the files/directories read from the Ini file to remove them.<br />
<br />
The 'problem' with this method is that if your application is big and has a lot of files/directories, it takes a little time during installation to write all the entries in the file. <br />
<br />
In this case, an alternative could be to write the files/directories in the Ini file using an NSIS function *BEFORE* the compilation of your script. Then put this file in your installer (File myIniFile.ini), and at runtime just write the installation directory in the Ini file. This would save some time, but it's only worth it if your application is really big...<br />
<br />
You can also check this thread but only half of it is relevant to your problem:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=146048<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">3rd May 2004, 09:02</div></div><div class="posttext">Ooops, didn't see you answered Joost :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mfreed</div><div class="date">3rd May 2004, 15:50</div></div><div class="posttext">Thanks for the suggestions evilO and Joost!<br />
<br />
The only thing I am still missing is how I get NSIS to give me the list of files that it is including when I use a &quot;File /r *.*&quot; command. Or are you suggesting that I write my own recursive file inclusion macro, so that I can get each filename individually?<br />
<br />
I think I am now at the point where I might make a separate (C++) executable that I run before I run NSIS, which recursively goes through the files and builds up a .NSI file.<br />
<br />
Might be a good feature suggestion to have a &quot;AutoGenerateUninstall on&quot; command that tells NSIS to record everything that it does on the install side of things, and then builds an Uninstall section that reverses the process. Just a thought.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>