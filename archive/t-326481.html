<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A question regarding File command, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A question regarding File command NSIS Discussion" />
	
	<title> A question regarding File command [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A question regarding File command</div>
<hr />
<div class="pda"><a href="t-326481.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=326481">A question regarding File command</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">25th January 2011, 20:53</div></div><div class="posttext">I tried to use File command as, <br />
File /nofatal $1<br />
<br />
NSIS couldn't find $1 but if I print out $1, I check the file does exist. If I use File as,<br />
File /nofatal &quot;C:\temp\test.txt&quot; (assume $1=&quot;C:\temp\test.txt&quot;),<br />
then it works. What is wrong with File /nofatal $1? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">25th January 2011, 21:09</div></div><div class="posttext">The FILE command is used during the compile time to compress the files into the setup program. $1 does not have a value during compile time, so the file you want to point to later cannot be put into the setup program.<br />
<br />
During execution, FILE $1 would try to extract the file named by &quot;$1&quot; to the current working directory; unfortunately it will fail because the compile time function won't have worked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">25th January 2011, 21:46</div></div><div class="posttext">The FILE command is used during the compile time to compress the files into the setup program. $1 does not have a value during compile time, so the file you want to point to later cannot be put into the setup program.<br />
<br />
During execution, FILE $1 would try to extract the file named by &quot;$1&quot; to the current working directory; unfortunately it will fail because the compile time function won't have worked.<br />
I see. Thanks so much for your explanations!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">25th January 2011, 21:54</div></div><div class="posttext">The FILE command is used during the compile time to compress the files into the setup program. $1 does not have a value during compile time, so the file you want to point to later cannot be put into the setup program.<br />
<br />
During execution, FILE $1 would try to extract the file named by &quot;$1&quot; to the current working directory; unfortunately it will fail because the compile time function won't have worked.<br />
I have one more question. Since File command is used during the compile time. I wonder if there is any similar command which could be used during the run time? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th January 2011, 22:30</div></div><div class="posttext">Use the /oname= (out name) switch.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">25th January 2011, 23:22</div></div><div class="posttext">Use the /oname= (out name) switch.<br />
<br />
Stu<br />
Could you explain what could be done by using /oname that could NOT be done by using /nofatal? Basically, my trouble is that the file after the command File doesn't exist in compile time. So File command always complains file not found. I wonder if there is any way to execute File command or similar command in run time since the output file can only be determined in run time. Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">26th January 2011, 06:44</div></div><div class="posttext">Could you explain what could be done by using /oname that could NOT be done by using /nofatal? Basically, my trouble is that the file after the command File doesn't exist in compile time. So File command always complains file not found. I wonder if there is any way to execute File command or similar command in run time since the output file can only be determined in run time. Thanks.<br />
<br />
You're mistaken: You cannot make an installer that only contains file XYZ if some condition is met. If you need it installed at ANY point, the installer MUST have it compressed inside.<br />
<br />
What you probably want is this:<br />
${If} (some condition here)<br />
File Yourfile.ext<br />
${EndIf}<br />
<br />
The above will always compile Yourfile into the installer, but it will only be extracted (at runtime) if the condition is met.<br />
<br />
<br />
Or if your problem is that you want to include files dynamically (to make different installers depending on what files you have on your compiling PC), you'll probably have to use this:<br />
File YourDynamicFolder\*.*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">26th January 2011, 16:57</div></div><div class="posttext">You're mistaken: You cannot make an installer that only contains file XYZ if some condition is met. If you need it installed at ANY point, the installer MUST have it compressed inside.<br />
<br />
What you probably want is this:<br />
${If} (some condition here)<br />
File Yourfile.ext<br />
${EndIf}<br />
<br />
The above will always compile Yourfile into the installer, but it will only be extracted (at runtime) if the condition is met.<br />
<br />
<br />
Or if your problem is that you want to include files dynamically (to make different installers depending on what files you have on your compiling PC), you'll probably have to use this:<br />
File YourDynamicFolder\*.*<br />
No, my question is that the files to be extracted do not exist before installation and they will be generated during installation. Is there any way I can do that? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th January 2011, 17:47</div></div><div class="posttext">You need to think to yourself how you would go about generating these files? What will the files contain? To write to a file at run time, use FileOpen, FileWrite and FileClose.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dullboy</div><div class="date">26th January 2011, 18:40</div></div><div class="posttext">I resolved the problems. Thanks for you guys' suggestions. Is there any way to give you guys credits? :-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>