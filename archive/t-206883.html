<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 2.05 released, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  2.05 released NSIS Discussion" />
	
	<title> 2.05 released [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  2.05 released</div>
<hr />
<div class="pda"><a href="t-206883.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=206883">2.05 released</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th February 2005, 21:22</div></div><div class="posttext">2.05 was released a couple of hours ago. Changelog and release notes can be found at:<br />
<br />
http://sourceforge.net/project/shownotes.php?release_id=302407<br />
<br />
Downloads can be found at:<br />
<br />
http://sourceforge.net/project/showfiles.php?group_id=22049&amp;package_id=15374&amp;release_id=302407<br />
<br />
Known problems: The version of Russian.nsh which is supplied with 2.05 doesn't compile. Use the attached version instead. If a section group is the first section, other section groups will not behave properly. Add an empty hidden section at the very top of the script to work around this problem.All of the these problems were already fixed in the latest CVS version. I predict some more glitches will be found because of all of the changes in the components code. Therefore, I will not release a fix-up version right now, but 2.06 next week.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Koen van de Sande</div><div class="date">5th February 2005, 23:20</div></div><div class="posttext">Will 2.06 be bugfix-only or will there be room for something like an updated VPatch plug-in? This depends of course on the time schedule because VPatch should be tested properly before it is put into a stable NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Koen van de Sande</div><div class="date">6th February 2005, 20:29</div></div><div class="posttext">VPatch 3 RC3 is feature-ready (NSIS-wise):  VPatch 3 RC topic (http://forums.winamp.com/showthread.php?postid=1585626#post1585626) <br />
<br />
Only the GUI needs some work and the documentation (the NSIS one is up to date though, just not the stand-alone one).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th February 2005, 19:32</div></div><div class="posttext">Bug fix only.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ImmortAlex</div><div class="date">15th February 2005, 04:09</div></div><div class="posttext">I think adding hidden Section still doesn't fix all problems with groups. In my script in some cases I need to hide and deselect some other sections inside groups, so in components  page pre-function I use<br />
<br />
SetSectionFlags ${sec} 0<br />
SetSectionText ${sec} &quot;&quot;<br />
<br />
And I don't see this section in components page. But when I leave this page, selection bit in section flags is set (and I can see it in page leave-function), so my Section installs.<br />
<br />
All works fine in 2.04.<br />
<br />
I'm trying to isolate this bug, writting some simple script, but can't reproduce it, and it's very strange...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th February 2005, 18:22</div></div><div class="posttext">It's not a bug, it's a fixed bug.Invisible sections weren't always affected by a change of the installation type (bug #1045722)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ImmortAlex</div><div class="date">16th February 2005, 05:00</div></div><div class="posttext">OK, waiting for 2.06</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th February 2005, 08:17</div></div><div class="posttext">AdvSplash and LangDLL plug-ins problem in the NSIS 2.05 - installer goes to background after splash/lang window disappears. AdvSplash worked fine in 2.03 (and probably in 2.04, but I am not sure). LangDLL had the same problems in 2.04 (and may be earlier).<br />
This happens on the one of my comps only - Win2K Server Rus SP2, PII-350 256 MB (and bad video card). On the other comp with Win2K Pro Eng SP4, PIII-533 128 MB plug-ins work fine. The same with MSI Banner plug-in. My NewAdvSplash still works correct on both comps. May be first comp works too slowly? But why AdvSplash plug-in worked correct on the same comp in 2.03 version? Any &quot;fixed bugs&quot;? ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th February 2005, 08:26</div></div><div class="posttext">Forgot to attach test script - reproduces situation with AdvSplash.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 18:28</div></div><div class="posttext">It works fine for me on both slow and fast computers. Since it only happens on one of your computers, maybe it's a problem with it? Have you tried running it in safe mode where some programs will not interfere? Have you tried finding the differences between &quot;your NewAdvSplash&quot; and the other plug-ins?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th February 2005, 18:50</div></div><div class="posttext">I only wanted to help with 2.05. First versions of my plug-in had this problem, but I did few iterations and made it working like AdvSplash in previous NSIS releases (i.e. correct). I don't want my post looks like advertisement (and this is why I not gave any links :) ), may be this is my problem only, I know how to solve it for me and it's OK ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 19:23</div></div><div class="posttext">I was not suggesting you're trying to advertise anything. I was simply putting up suggestion to solve this problem of yours. But now you tell me you already have the solution. So why not just submit a patch instead of just reporting the problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th February 2005, 21:29</div></div><div class="posttext">As you all have probably noticed already, I didn't release 2.06 last weekend. I didn't have too much time last weekend, and I won't have this time too. Other than the Russian language file bug, there aren't any major problems with 2.05 that affect everyone, so it's not that bad anyway. 2.06 should be released in two or three weeks, on schedule. Hopefully, it will include some more automated testing to prevent problems, such as the language file problem, in the future.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">18th February 2005, 08:05</div></div><div class="posttext">KichiK, I have not clear understanding of &quot;background&quot; problem in AdvSplash. This is why while adding my little changes to base version (C-file header includes change history from Justin to my add-ons) I had to repeat changes step-by-step moving from old to new version and finally it began and continue working (and this is my solution ;) ). AdvSplash.c 2.03 and 2.05 &quot;diff -B --ignore-all-space&quot; 7 kB shows that someone worked hard with file formatting (and made little changes in &quot;state&quot; var). But finally I do not see any reasons for AdvSplash to change behavior, something weird again..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th February 2005, 09:05</div></div><div class="posttext">CVS provides a log:<br />
<br />
http://cvs.sourceforge.net/viewcvs.py/nsis/NSIS/Contrib/AdvSplash/advsplash.c<br />
<br />
Nothing was changed in AdvSplash. The only thing that was changed in 2.03 is in Ui.c:<br />
<br />
http://cvs.sourceforge.net/viewcvs.py/nsis/NSIS/Source/exehead/Ui.c?r1=1.215&amp;r2=1.216</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PerditionC</div><div class="date">27th February 2005, 20:41</div></div><div class="posttext">(I'm using latest NSIS available via the menu-&gt;Update latest<br />
 development and this is the AbiWord installer.)<br />
I'm not sure if this is a bug (either in NSIS or my script) or a change somewhere between 2.02 and 2.05, but my installer script builds fine but there are two major differences:<br />
- the default install type is now custom instead of typical<br />
  Is there a new command that must be used (or maybe one I<br />
  should have been using) to indicate the default one?<br />
- subsections don't work like they used to, in particular,<br />
  when only partial subitems are selected the check box in<br />
  the parent remains clear or selected (whichever it was)<br />
  instead of the former grey+check, even unselecting all<br />
  items does not clear the parent (group) checkbox (only<br />
  directly clicking on it).  Is this the expected bevahiour,<br />
  part of the bugs you are talking about above, or something<br />
  that requires a change in my installer [if so I would <br />
  appreciate directions as what to look into]?<br />
<br />
Thanks for helping me determine where the problem is.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st March 2005, 17:56</div></div><div class="posttext">According to the latest abi/src/pkg/win/setup/NSISv2/AbiWord.nsi (http://www.abisource.com/bonsai/cvsblame.cgi?file=abi/src/pkg/win/setup/NSISv2/AbiWord.nsi&amp;rev=&amp;root=/cvsroot), you have a section group (subsection) as the very first section. This is the trigger for the second known problem described in the first post. Your description also matches the bug symptoms. Simply add an invisible section before the first section group to avoid this bug.<br />
<br />
Using the latest from CVS didn't help because you probably didn't recompile makensis.exe. I no longer upload a new version of makensis.exe to CVS for every change. I only upload a new version when I release a new version of NSIS. I intend to remove all executables from CVS once I finish a build system I'm currently working on. The new build system will build the entire NSIS package so it'll be easy to make a complete nightly package.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PerditionC</div><div class="date">4th March 2005, 19:56</div></div><div class="posttext">Thanks, I recompiled latest cvs version and using it the<br />
selection of sections within groups now appears to be fine,<br />
however, the default install type is still always Custom.<br />
I added an initial hidden empty section and it made no<br />
difference regarding the install type, I even added explicit<br />
calls to SetCurInstType (1st tried in .onit function, and<br />
then even tried in my 1st section).  Should I file a bug for<br />
this or do you have any ideas/suggestions I should try first? Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2005, 21:33</div></div><div class="posttext">I have tried to reproduce this with the latest CVS version, but couldn't get it to start with the custom install type selected. It always starts with typical. It might be because of the many changes I've made to the script.<br />
<br />
I couldn't find anything in the script that would make SetCurInstType in .onInit, placed after !insertmacro SectionList &quot;InitSection&quot;, not work. Any chance you can get a smaller script reproducing this problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PerditionC</div><div class="date">4th March 2005, 22:12</div></div><div class="posttext">I narrowed down my problem to the add/remove aspect of<br />
my installer.  When a previous install exists (ie it finds<br />
the list of installed components) it should set the <br />
corresponding sections to match, but apparently is failing<br />
somewhere and pretty much just deselects everything;<br />
but when I remove the entries so as to mimic a fresh<br />
install it does correctly start with typical.<br />
I will do some more testing and see if I can track down<br />
what is causing the difference.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2005, 22:17</div></div><div class="posttext">There was another change in 2.05 that might have caused this. Selecting a section group with SetSectionFlags now affects its children too, just like when the user clicks a section group. However, I didn't notice any section groups on the list in SectionList. Is there another place in the script that might set flags for section groups?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PerditionC</div><div class="date">4th March 2005, 22:43</div></div><div class="posttext">That is it then, as groups are also set/unset.<br />
Thanks for the help, I will change the installer<br />
to check and skip [un]selection for groups.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">11th March 2005, 10:56</div></div><div class="posttext">AdvSplash - GlobalFree(bad pointer) bug I guess. Updated code of my plug-in is here http://forums.winamp.com/showthread.php?s=&amp;postid=1612419#post1612419</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th March 2005, 11:28</div></div><div class="posttext">Thanks, fixed.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>