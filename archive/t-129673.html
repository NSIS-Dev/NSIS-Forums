<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Partial selection &amp; instdir autodetect, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Partial selection &amp; instdir autodetect NSIS Discussion" />
	
	<title> Partial selection &amp; instdir autodetect [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Partial selection &amp; instdir autodetect</div>
<hr />
<div class="pda"><a href="t-129673.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129673">Partial selection &amp; instdir autodetect</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dirkdeftly</div><div class="date">25th March 2003, 03:58</div></div><div class="posttext">Bwahahahah, more newbie questions...<br />
I'm working on another installer, but there's an odd &quot;bug&quot;.  When a subsection has one section disabled and readonly and another section enabled, the subsection can appear either partially enabled or fully enabled; i.e. here:<br />
Subsection<br />
-Off (readonly)<br />
-On<br />
the subsection can appear either fully enabled or partially enabled.  Now, this wouldn't really be a problem, except for that I want the subsection to be disabled after the user clicks on it when it's components are enabled.  (That and it looks rather odd.)  My question is, what flag defines partial selection?<br />
<br />
Also, how do I autodetect the Winamp install directory?  I want to be able to detect Winamp 2.x's or, if 2.x isn't there, Winamp 3's install directory, on different Windows platforms (which, as far as I can tell, changes the location of the registry keys).<br />
<br />
I searched the forum on this and nothing came up, so sorry if any of it's been brought up before.  Attached is the</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th March 2003, 21:16</div></div><div class="posttext">Please post that bug report in SF.<br />
<br />
You should implement the logic to $INSTDIR in .onInit using ReadRegStr, StrCmp and friends.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirkdeftly</div><div class="date">25th March 2003, 22:50</div></div><div class="posttext">umm...that's the problem...i dunno how (what keys to read etc.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2003, 13:50</div></div><div class="posttext">Try their uninstall key, maybe you can find some useful information there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirkdeftly</div><div class="date">26th March 2003, 19:44</div></div><div class="posttext">yes, i know, but it's location changes with the windows version, doesn't it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2003, 19:46</div></div><div class="posttext">Nope, it's always HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall. You can also use HKCU but that's another story.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dirkdeftly</div><div class="date">27th March 2003, 05:19</div></div><div class="posttext">mm...i bet i've been checking hkcu.<br />
so when i read hklm\software\microsoft\windows\currentversion\uninstall\winamp\uninstallstring, do i get &quot;blablabla\winamp\uninstallwa.exe&quot; or just &quot;blablabla\winamp\&quot;?<br />
<br />
as for the &quot;bug&quot;, IS there any flag that defines a partial selection?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th March 2003, 12:54</div></div><div class="posttext">You'll get the uninstaller path, possibly quoted with parameters so you should parse it.<br />
<br />
There is no such flag, it's auto processed and as you can see it's auto processed the wrong way so a bug report is in place ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">28th March 2003, 13:34</div></div><div class="posttext">KiCHiK: NSIS is supposed to be a Winamp Plugin installer. How do you want to do that when you don't know where Winamp is? Weird! :weird:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YtseJam</div><div class="date">28th March 2003, 13:45</div></div><div class="posttext">NSIS is an all-around installer, not just for Winamp plugins. Just thought I'd point that out...<br />
<br />
When making an installer for a Winamp plugin, I suppose the author of the script will have to insert some function that will auto-search for the Winamp dir, no?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">28th March 2003, 13:52</div></div><div class="posttext">That's what bothers me:<br />
Originally the second line of the documentation of NSIS<br />
NSIS exists largely because of the need to distribute Winamp.<br />
Originally the fifth paragraph of the documentation of NSIS<br />
Another thing we needed was a good way to distribute Winamp plug-ins.<br />
And now you're telling me that NSIS doesn't even know where Winamp is? That's weird, very weird for an installer that only exists because of Winamp. I know, nant, that NSIS is primairly ment to install somewhat about everything, but... you know.:blah:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th April 2003, 13:01</div></div><div class="posttext">Changes in latest CVS version:<br />
<br />
Rewrote a lot of the components tree code:<br />
- Added SF_PSELECTED for partially selected sub-sections<br />
- SF_EXPAND now refreshes the components tree<br />
- Fixed problems with sub-sections with RO sections as children<br />
- (-1) sent to .onMouseOverSection when mouse over nothing<br />
- RO sections can now be in InstTypes too (default to old behavior)<br />
- Optimized code</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>