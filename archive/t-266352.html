<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Varibles in File, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Varibles in File NSIS Discussion" />
	
	<title> Varibles in File [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Varibles in File</div>
<hr />
<div class="pda"><a href="t-266352.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266352">Varibles in File</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 09:16</div></div><div class="posttext">Hi,<br />
<br />
Just a quick question are you able to use variables in File.<br />
<br />
For example <br />
<br />
<br />
<br />
StrCpy $DISTRIBUTION_CD_LOCATION &quot;G:\generic\bbRad distribution CD\bbRad v1.11 ib0\Enterprise\Program Files\bbRad\&quot;<br />
  <br />
SetOutPath &quot;$INSTDIR&quot;<br />
SetOverwrite try<br />
File $DISTRIBUTION_CD_LOCATION&quot;bbRadCLI.exe&quot;<br />
<br />
<br />
<br />
Using the above I get the following error:<br />
<br />
File: &quot;$DISTRIBUTION_CD_LOCATION&quot;bbRadCLI.exe&quot;&quot; -&gt; no files found.<br />
Usage: File [/nonfatal] [/a] ([/r] [/x filespec [...]] filespec [...] |<br />
/oname=outfile one_file_only)<br />
Error in script &quot;C:\Documents and Settings\james\workspace\bbRad installer\setup.nsi&quot; on line <br />
75 -- aborting creation process<br />
<br />
Is it that you must specify the whole dir to the file when using File, or have I just done something wrong with the var side of things....<br />
<br />
Thanks<br />
James</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd February 2007, 09:20</div></div><div class="posttext">It is that you can't use variables at compile time, instead try to !define DISTRIBUTION_CD_LOCATION</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 09:23</div></div><div class="posttext">What just like this,<br />
<br />
<br />
!define DISTRIBUTION_CD_LOCATION &quot;Path here&quot;<br />
<br />
<br />
Because if thats correct im still getting the same error :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd February 2007, 09:26</div></div><div class="posttext">!define DISTRIBUTION_CD_LOCATION &quot;D:\My Local Path&quot;<br />
File: &quot;${DISTRIBUTION_CD_LOCATION}\bbRadCLI.exe&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 09:28</div></div><div class="posttext">You legend. Thanks a lot :D that works brill</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 11:15</div></div><div class="posttext">Keeping to a similar topic. Is it possible to use a variable in an unistall part.<br />
<br />
For example :<br />
<br />
<br />
Section Uninstall<br />
      Delete &quot;$INSTDIR\config\bbRadGateway$INI_NACS.ini&quot;<br />
SectionEnd<br />
<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd February 2007, 12:22</div></div><div class="posttext">Yes but its value won't be magically copied from the installer to the uninstaller. You need to store its value in the registry or an INI file.<br />
<br />
If its value does not change then use a !define instead.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd February 2007, 13:15</div></div><div class="posttext">Originally posted by James4563 <br />
You legend. Thanks a lot :D that works brill  The only legend that I know around here is kichik, I'm just a consistent of...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 23:48</div></div><div class="posttext">Originally posted by Afrow UK <br />
Yes but its value won't be magically copied from the installer to the uninstaller. You need to store its value in the registry or an INI file.<br />
<br />
If its value does not change then use a !define instead.<br />
<br />
-Stu <br />
<br />
Ok thanks. So if I use !define instead will that mean I can just put it into the uninstaller? Or will I still need to store in the reg or an ini file.<br />
<br />
Cheers for the help peeps :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd February 2007, 23:57</div></div><div class="posttext">!define makes a compile time constant. Once your installer is compiled, it's value is sustained in a static form wherever it's used. Variables on the other hand are used if your value needs to change while the installer is being executed by the end user. If your value will never change, then use a constant (define) and not a variable. Once you've created a constant, you can use it anywhere in your script whether it's inside or outside sections and functions.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">22nd February 2007, 23:59</div></div><div class="posttext">Well the value I want to use is acctually enter by the user in the installation config. So im guessing that I cant used !define.<br />
<br />
Is it fairly easy to store the values into the Registry? Or would you recommend storing them in an ini file instead?<br />
<br />
James</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">23rd February 2007, 00:02</div></div><div class="posttext">So if I use !define instead will that mean I can just put it into the uninstaller? Or will I still need to store in the reg or an ini file.<br />
!define is ok while its value is global, hence you can't change it at run time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd February 2007, 00:10</div></div><div class="posttext">The registry is probably your safest bet. Use WriteRegStr and ReadRegStr.<br />
<br />
There are pros and cons for using the registry or initialisation files, but most people would rather use the registry simply because you don't need to worry about a particular file on the hard drive.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">James4563</div><div class="date">23rd February 2007, 00:23</div></div><div class="posttext">Cheers mate. Ill try it out and see what I can do.<br />
<br />
Ill post back if I get anymore problems, which I probably will :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>