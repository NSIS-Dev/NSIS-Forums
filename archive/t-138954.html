<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Short pathnames (not 8.3), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Short pathnames (not 8.3) NSIS Discussion" />
	
	<title> Short pathnames (not 8.3) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Short pathnames (not 8.3)</div>
<hr />
<div class="pda"><a href="t-138954.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=138954">Short pathnames (not 8.3)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">yugemos</div><div class="date">14th June 2003, 02:52</div></div><div class="posttext">I am having trouble getting a full path name (ie not 8.3) for my installer. For some unknown reason, the software I'm configuring (PHP) doesn't cope with ~'s too well, so I need to write to the configuration file using long path names.<br />
<br />
I am using NSIS v2.0b3 and this is the code extract that does not seem to be functioning (the ReplaceInFile macro is from the NSIS Archive)<br />
GetFullPathName $1 $TEMP<br />
!insertmacro ReplaceInFile &quot;$INSTDIR\Apache\php.ini&quot; &quot;§Temp§&quot; &quot;$1&quot;<br />
However, this writes the following to php.ini<br />
session.save_path = C:\DOCUMEN~1\ADMINI~1\LOCALS~1\Temp<br />
Is this how GetFullPathName should be used?<br />
Any suggestions welcome! The full file is attached.<br />
<br />
Thanks in advance,<br />
Stefan Norman</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th June 2003, 13:50</div></div><div class="posttext">Note that the GetFullPathName command does something else, it does not convert short files names to long file names.<br />
<br />
You can call the GetLongPathName API using the System plug-in. However, this is not supported on Windows 95/NT4. If you want it to be compatible with Windows 95/NT4, you have to find another solution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">yugemos</div><div class="date">15th June 2003, 03:32</div></div><div class="posttext">Sorry, I'm new to NSIS and I haven't used windows for tasks like this before.<br />
Could you please explain how I would do this exactly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">15th June 2003, 03:48</div></div><div class="posttext">lol even I didn't understand :igor:<br />
Well, you can first check all about the APIs (http://www.mentalis.org/)...<br />
then... check the info in ${NSISDIR}\Contrib\System<br />
In there you'll find the info. about the system.dll plugin...<br />
Also check in this web archive (http://nsis.sourceforge.net/archive/nsisweb.php?page=135&amp;instances=0,32) about how to use extra features<br />
about the plugin...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th June 2003, 18:02</div></div><div class="posttext">This will only work on Windows 98+ and 2000+.<br />
<br />
StrCpy $0 &quot;C:\Progra~1&quot;<br />
StrCpy $1 &quot;&quot;<br />
System::Call &quot;Kernel32::GetLongPathNameA(t '$0', &amp;t .r1, i \<br />
  ${NSIS_MAX_STRLEN}) i .s&quot;<br />
Pop $0<br />
IntCmp $0 ${NSIS_MAX_STRLEN} +2 +2 0<br />
  Abort &quot;failed!&quot;<br />
DetailPrint &quot;$0 - $1&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>