<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" variable size on install page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  variable size on install page NSIS Discussion" />
	
	<title> variable size on install page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  variable size on install page</div>
<hr />
<div class="pda"><a href="t-255089.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255089">variable size on install page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">flatface</div><div class="date">8th September 2006, 10:55</div></div><div class="posttext">Hi, This website is a godsend and I have searched on this topic and found many useful links and ideas but I need a little help tying it all together.<br />
<br />
I need to install:<br />
1. .net 2 if not present (240MB required by .net installer)<br />
2. files to $APPDATA (10MB)<br />
3. files to $INSTDIR (350MB) installing from zips<br />
<br />
So if a user needs .net installed when they hit the install page I can use SetSectionSize to set the size to 240+10+350. <br />
but if the user then chooses another drive for the install I would need 350 on that drive and 250 free on the C:<br />
<br />
I could after do a disk check for the available 250 on C: and give a warning but is there a cleaner way to do it?<br />
<br />
many thanks in advance...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2006, 17:26</div></div><div class="posttext">You could have the .NET test done before the directory page shows, e.g. in .onInit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flatface</div><div class="date">9th September 2006, 09:01</div></div><div class="posttext">I have that been checked in the .onInit but if .NET is needed the example still applies - how do I indicate on the install page that space is needed on the C: drive regardless of what drive they choose as the install location?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th September 2006, 10:08</div></div><div class="posttext">You said it yourself, you use SetSectionSize to set the correct section size. The directory page will use that section size to determine how much space is needed for the installation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flatface</div><div class="date">9th September 2006, 12:33</div></div><div class="posttext">sorry if I am not being clear, thank you for trying to help kichik.<br />
<br />
I can indeed setSectionSize to be 240+10+350 on the install page but if they have no space on their C: drive and choose say their D: to install to - they will not have enough space on the C: to install .NET.<br />
<br />
I would like an install page like:<br />
<br />
space required - 600MB<br />
<br />
and then if they choose a different location (D:)<br />
<br />
space required - C: 250MB<br />
                 D: 350MB<br />
<br />
so that it still lets them know they have insuficient space for the install.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th September 2006, 14:22</div></div><div class="posttext">In that case, you'll have to implement a custom test. You can use CheckSpaceFree (http://nsis.sourceforge.net/CheckSpaceFree) for that. I'd put the test on the leave function of the directory page along with a little text change in that page to note about the additional required space.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flatface</div><div class="date">9th September 2006, 16:33</div></div><div class="posttext">The ideal place to put it would be after the browse button returns the location of the install - then you could update the install sizes. I dont know if that is possible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th September 2006, 16:34</div></div><div class="posttext">It's possible. Use .onVerifyInstDir, it's called whenever the installation directory changes, including changes by the browse button.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flatface</div><div class="date">10th September 2006, 11:20</div></div><div class="posttext">brilliant! exactly what i was looking for. cheers</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>