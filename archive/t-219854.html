<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Issue with SetCtlColors, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Issue with SetCtlColors NSIS Discussion" />
	
	<title> Issue with SetCtlColors [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Issue with SetCtlColors</div>
<hr />
<div class="pda"><a href="t-219854.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=219854">Issue with SetCtlColors</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th June 2005, 22:59</div></div><div class="posttext">This is probably just me, but SetCtlColors doesn't seem to work properly anymore (unless this has always been a problem).<br />
I'm trying to set the colour of a control on an InstallOptions page in the page's Leave function. Everything else works (like EnableWindow and SendMessage) but if I try using SetCtlColors on it, nothing happens. This may also explain why someone in another recent topic couldn't get SetCtlColors to work on one of the 111 dialog labels (Banner).<br />
<br />
This is the script (it's an example script I'm making for someone... I'm sure you can guess who ;) )<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2005, 23:14</div></div><div class="posttext">SetCtlColors doesn't update the control, you have to do that manually using UpdateWindow, RedrawWindow or some other Windows API.<br />
<br />
SetCtlColors doesn't work on 111, because 111 doesn't support it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jsbach</div><div class="date">25th June 2005, 23:24</div></div><div class="posttext">not sure this MS journal article may help (it's quite old).<br />
<br />
http://www.microsoft.com/msj/archive/S1DCC.aspx<br />
and this (better):<br />
http://www.developeriq.com/articles/view_article.php?id=186&amp;cid=1<br />
<br />
Found searching &quot;WM_CTLCOLOR problem&quot;.<br />
<br />
Abstract:<br />
...&quot;In Windows, there are no simple properties for setting the foreground and background colors of an edit control (or any other dialog control). In Visual Basic, you can simply write, <br />
<br />
 Edit1.BackColor = Yellow<br />
Edit1.ForeColor = Red<br />
but behind the scenes, Visual Basic goes through a lot of rigamarole to make this work. The mechanics for setting the color of a Windows control require handling the special message WM_CTLCOLOR, which Windows sends when it's about to paint a control. I won't go into a detailed explanation here, as this topic is covered in the Win32&quot; documentation for WM_CTLCOLOR and numerous articles in MSDN (including some of my own, probably). I'll just give you the quick recap for edit controls. To set the color of an edit control, you must first handle WM_CTLCOLOR and check for the code CTLCOLOR_EDIT, in which case you must return the brush you want to use for the background. Second, you must call SetBkColor and SetTextColor on the HDC that Windows passes as part of the WM_CTLCOLOR message. If you think all this is strange, you're in good company....&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th June 2005, 23:33</div></div><div class="posttext">Right thanks guys. I remember you already mentioned that kichik when I had the same problem a while ago (just had forgotten!)<br />
Can anyone show me how to call UpdateWindow in the right way?<br />
I've found that hiding the label and showing it again seems to update it too, but it seems a bit cheap (but then again, you don't need to use the System plugin).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th June 2005, 09:44</div></div><div class="posttext">I've found a small bug which I felt could go in here rather than create a new topic.<br />
<br />
If you do:<br />
FindFirst $R0 $R1 &quot;$EXEDIR\*.tx&quot;<br />
and say you've got files with .txt entension, those files are found! Is this a bug?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">27th June 2005, 12:23</div></div><div class="posttext">Hi Afro UK, the subject above really should go somewere else ;) I almost missed the trick of hiding and unhiding to redraw the labels. I have(had?) problems if I make the labels transparent and move to the previous screen, the lables do not refresh correcly, this tip just might solve my problem, will try and report back with a full example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th June 2005, 08:34</div></div><div class="posttext">Righto, I'll put an archive page up.<br />
I'll check that bug again and submit a bug report.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">21st May 2012, 22:23</div></div><div class="posttext">Can anyone show me how to call UpdateWindow in the right way?<br />
any news on this?<br />
<br />
i have similar issue here in a leave function - unless i define a background color, <br />
but this will probably only here with standard colors - &quot;transparent&quot; leaves <br />
always a shadow and i cannot turn off for 100% text with empty text.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>