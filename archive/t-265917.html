<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsisunz plugin and file dates, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsisunz plugin and file dates NSIS Discussion" />
	
	<title> nsisunz plugin and file dates [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsisunz plugin and file dates</div>
<hr />
<div class="pda"><a href="t-265917.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265917">nsisunz plugin and file dates</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">16th February 2007, 09:16</div></div><div class="posttext">Hi.<br />
<br />
It seems the nsisunz plugin doesn't restore file dates when extracting them. They all contains the extraction date. Does anybody have the same problem ? Any idea ?<br />
<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">16th February 2007, 14:42</div></div><div class="posttext">4.8.2.7 SetDateSave This command sets the file date/time saving flag which is used by the File command to determine whether or not to save the last write date and time of the file, so that it can be restored on installation. Valid flags are 'on' and 'off'. 'on' is the default.<br />
<br />
It sounds like your script contains the statement SetDateSave off. Remove that statement and see what happens.<br />
<br />
If the plugin is doing it, and you don't have a SetDateSave statement, maybe you need to look for options in that plugin, or change to another unzip plugin?<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">16th February 2007, 14:49</div></div><div class="posttext">Hi and thanks for your answer.<br />
<br />
In fact, my script does not include that statement and it should not have any effect to have it or not. In fact, I don't call the File command in my script but I call the following :<br />
nsisunz::Unzip &quot;file.zip&quot; &quot;c:\dest_dir&quot;<br />
<br />
It extract the content of a zip file and put it in the &quot;c:\dest_dir&quot; directory. When it extracts the content of the zip archive it sets the date of these files to the extraction date/time and not to the original date/time.<br />
<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">17th February 2007, 11:13</div></div><div class="posttext">I don't think I can help you. I tried to look at the nsisunz plugin code, but the download links are broken. I think the plugin is writing the file and not setting the stored date, but I'm only guessing.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebarnolds</div><div class="date">19th February 2007, 08:34</div></div><div class="posttext">Yeah, thanks anyway for looking at it. I just wanted to warn people and maybe reach the author of the plugin.<br />
<br />
I didn't have time to look to modify the plugin so I searched for other alternatives. In the zlib distribution, there is a small utility called &quot;minizip&quot; which produces 2 executables &quot;minizip.exe&quot; and &quot;miniunz.exe&quot;. I use the later to extract my zip files with the correct date. nsisunz is a bit easier but it is only a matter of copying the exe to a temp place, extracting the zip and deleting the exe.<br />
<br />
Sebastien</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">19th February 2007, 14:01</div></div><div class="posttext">it is only a matter of copying the exe to a temp place, extracting the zip and deleting the exe The $PLUGINSDIR is a good temp directory that gets deleted (along with its contents) when the installer finishes.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">daveb</div><div class="date">9th February 2009, 13:29</div></div><div class="posttext">Is this filedate issue resolvable by using either<br />
<br />
nsis7z <br />
http://forums.winamp.com/showthread.php?postid=2471397<br />
<br />
or  <br />
<br />
ZipDLL<br />
http://nsis.sourceforge.net/ZipDLL<br />
<br />
?<br />
Not sure if 7z handles regular zips and not sure if either of above preserve filedates correctly?<br />
<br />
Note also, filedate issue when unpacking NSIS in multiple timezones... see separate discussion at <br />
https://sourceforge.net/tracker/index.php?func=detail&amp;aid=2581469&amp;group_id=22049&amp;atid=373085</div></div><hr />


<div class="post"><div class="posttop"><div class="username">daveb</div><div class="date">10th February 2009, 02:46</div></div><div class="posttext">Further... just tried ZipDLL and it works fine, preserves dates. Just grab the dll, add to plugins folder, and call the extractall method.<br />
<br />
Here's a little sample download and unpack...<br />
<br />
InitPluginsDir<br />
NSISdl::download ftp://ftp.somewhere.com/myfile.zip &quot;$PLUGINSDIR\myfile.zip&quot;<br />
ZipDLL::extractall &quot;$PLUGINSDIR\myfile.zip&quot; &quot;$INSTDIR&quot;<br />
<br />
If myfile.zip has subfolders inside the zip, they all unpack correctly to a little tree at wherever (eg above to $INSTDIR)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>