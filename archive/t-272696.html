<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Variable losing a character when retrieving, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Variable losing a character when retrieving NSIS Discussion" />
	
	<title> Variable losing a character when retrieving [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Variable losing a character when retrieving</div>
<hr />
<div class="pda"><a href="t-272696.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272696">Variable losing a character when retrieving</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th June 2007, 05:05</div></div><div class="posttext">I am having some trouble with a variable.<br />
Basically, I'm storing a code in a variable.<br />
Inconsistantly it will drop the last character of the code when writing it back into the registry.<br />
Any ideas? Am I supposed to pass it some space to store in or something?<br />
<br />
<br />
<br />
; Var to store Activation code in for upgrading app<br />
Var ACTIVATION<br />
<br />
<br />
<br />
<br />
; Read activation and store for later<br />
${PPC-registry::Read} &quot;HKEY_LOCAL_MACHINE\Software\MyApp\&quot; &quot;Activation&quot; $R6 $R7<br />
StrCpy $ACTIVATION $R6<br />
<br />
<br />
<br />
; Write activation code back into registry<br />
${PPC-registry::Write} &quot;HKEY_LOCAL_MACHINE\Software\MyApp\&quot; &quot;Activation&quot; &quot;$ACTIVATION&quot; &quot;REG_SZ&quot; $R0<br />
${If} $R0 == &quot;0&quot;<br />
      ;MessageBox MB_OK &quot;Success in writing activation&quot;<br />
${ElseIf} $R0 == &quot;-1&quot;<br />
      MessageBox MB_OK &quot;Failed to write activation code!&quot;<br />
${EndIf}<br />
<br />
<br />
Thanks if anyone can help.<br />
Is there a better way to store and write information?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">12th June 2007, 08:31</div></div><div class="posttext">Are you sure that the value is stored properly in registry before the execution of your script?<br />
Did you try to debug the script with message boxes to verify that on 1st step the plugin reads the correct value, on 2nd step that the value is stored in the $ACTIVATION variable and so on?<br />
Also to manage the string as expand?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">12th June 2007, 23:31</div></div><div class="posttext">Hi Red Wine,<br />
<br />
I have put debug statements before each of the code excerpts posted previously.<br />
<br />
At each point, the entire code is in tact. At no point is the value stored in $ACTIVATION not what it should be.<br />
<br />
I think the problem is in the way it is written, I was just thinking that maybe it needs some time to write? I could try making it wait for a second after the write command is called.<br />
<br />
But apart from that, i may have to store it in halves and then  run a check to confirm it was written correctly.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th June 2007, 09:38</div></div><div class="posttext">May I ask why you have to use this plugin here. Will Read/WriteRegStr not do?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">17th June 2007, 14:21</div></div><div class="posttext">Am I able to use that for a Windows Mobile PDA? Is it the PPC-Registry plugin you are asking about?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th June 2007, 15:05</div></div><div class="posttext">Ah I see you have to use the plugin. You should contact the plugin author.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>