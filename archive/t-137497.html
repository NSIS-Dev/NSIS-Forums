<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Path does not expand after installer run, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Path does not expand after installer run NSIS Discussion" />
	
	<title> Path does not expand after installer run [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Path does not expand after installer run</div>
<hr />
<div class="pda"><a href="t-137497.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=137497">Path does not expand after installer run</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">shortpasta</div><div class="date">2nd June 2003, 10:12</div></div><div class="posttext">Here is how my path looks like in &quot;System | Advanced | Environment Variables&quot;:<br />
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;c:\b;%ANT_HOME%\bin;%JAVA_HOME%\bin<br />
<br />
This is what i get when I type &quot;set&quot; from my command prompt:<br />
Path=C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;c:\b;c:\java\ant1.5.1\bin;c:\java\jdk1.3.1\bin<br />
<br />
I run the installer which adds a variable to the path.<br />
<br />
Now this is what i get when I type &quot;set&quot; from my command prompt after i run the installer (as you can see now, the %VARIABLEs% are NOT expanded anymore, consequently java &amp; ant don't run anymore):<br />
Path=%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;c:\b;%ANT_HOME%\bin;%JAVA_HOME%\bin<br />
<br />
<br />
At this point i manually open up &quot;System | Advanced | Environment Variables&quot;, I make an insignificant change: I add a semicolon to the end of the value.<br />
This is what i get when I type &quot;set&quot; from my command prompt:<br />
Path=C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;c:\b;c:\java\ant1.5.1\bin;c:\java\jdk1.3.1\bin<br />
<br />
As you can see the variables are expanded again.<br />
<br />
Conclusion:<br />
The %VARIABLEs% inside the PATH value are only filled when saved through the Windows XP UI.<br />
<br />
Any clues?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd June 2003, 13:45</div></div><div class="posttext">I have updated the script to use WriteRegExpandStr instead of WriteRegStr. This will make sure that even if the registry value was REG_EXPAND_SZ it will still be written right, and if not, the type will just change to REG_EXPAND_SZ.<br />
<br />
It should work now (worked for me).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shortpasta</div><div class="date">2nd June 2003, 21:49</div></div><div class="posttext">looking good.<br />
<br />
thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>