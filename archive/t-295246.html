<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Setting File permissions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Setting File permissions NSIS Discussion" />
	
	<title> Setting File permissions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Setting File permissions</div>
<hr />
<div class="pda"><a href="t-295246.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295246">Setting File permissions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">LynnRW</div><div class="date">29th July 2008, 20:38</div></div><div class="posttext">I'm writing an installer for an application used by several different users who log onto the Win-XP at different times.<br />
<br />
I use the following code (+ more) and everything works OK for me.  However if another user logs-on, they get &quot;can't write file...&quot; errors in the Log directory, etc.<br />
<br />
InstallDir $PROGRAMFILES\MyApp<br />
<br />
CreateDirectory &quot;$INSTDIR\Bin&quot;<br />
CreateDirectory &quot;$INSTDIR\Logs&quot;<br />
<br />
I know I can make the Shortcuts available to ALL-users, but how can I give All-users the necessary file permissions?<br />
<br />
Thanks for your help.<br />
<br />
Lynn</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">29th July 2008, 20:49</div></div><div class="posttext">I am a newbie, don't know much yet, but I think that what you're looking for is SetShellVarContext :<br />
<br />
Sets the context of $SMPROGRAMS and other shell folders. If set to 'current' (the default), the current user's shell folders are used. If set to 'all', the 'all users' shell folder is used. The all users folder may not be supported on all OSes. If the all users folder is not found, the current user folder will be used. Please take into consideration that a &quot;normal user&quot; has no rights to write in the all users area. Only admins have full access rights to the all users area. You can check this by using the UserInfo plug-in. See Contrib\UserInfo\UserInfo.nsi for an example.<br />
<br />
Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KrisAster</div><div class="date">29th July 2008, 21:25</div></div><div class="posttext">LynnRW, can another user navigate to that location?  It seems that they have read access to execute the application, but it seems that it is trying to write a file to that location.  Is this what you'd like to happen?  Most applications in today's Vista / XP world probably shouldn't be writing files (or opening files with those permissions) to '\Program Files' directory.  Customarily, the files a program would want to write are program settings and the like, which would be better stored in a user's directory (ie C:\Documents and Settings\&lt;username&gt;\Application Data\&lt;Your program&gt;).<br />
<br />
That being said, I think that the 'AccessControl' plugin might be what you're looking for.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">29th July 2008, 22:15</div></div><div class="posttext">In order to support multi-user OS properly (e.g. WinXP), your application should be prepared that the user, who runs the application, might have limited access rights. Hence your application might run with limited access rights! Therefore user-specific data should be saved to &quot;C:\Documents and Settings\John Doe\Application Data\My Program&quot; and data that applies to all users should be saved at &quot;C:\Documents and Settings\All Users\Application Data\My Program&quot;. If you need to save data at a different location, a privileged user with Admin rights is required...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>