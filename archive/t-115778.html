<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" cant compile latest snapshot: error RC2104, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  cant compile latest snapshot: error RC2104 NSIS Discussion" />
	
	<title> cant compile latest snapshot: error RC2104 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  cant compile latest snapshot: error RC2104</div>
<hr />
<div class="pda"><a href="t-115778.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=115778">cant compile latest snapshot: error RC2104</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">neomaniakov</div><div class="date">27th November 2002, 12:25</div></div><div class="posttext">When I try to compile NSIS from latest developments snapshots(today and yesterday):<br />
<br />
http://nsis.sourceforge.net<br />
http://nsis.sourceforge.net/nightly/nsis.zip<br />
<br />
Development Snapshot <br />
NSIS CVS directory zipped up<br />
Updated: Wed, 27 Nov 2002, 08:44:08 GMT <br />
<br />
Listed below error occure:<br />
<br />
//------------ ERROR:<br />
<br />
<br />
--------------------Configuration: exehead_bzip2 - Win32 Release--------------------<br />
Compiling resources...<br />
E:\downl\nsis271102_844\NSIS\Source\exehead\resource.rc (35): error RC2104 : undefined keyword or key name: DS_SHELLFONT<br />
Error executing rc.exe.<br />
<br />
nsis20a7271102pm.exe - 1 error(s), 0 warning(s)<br />
<br />
//------------ ERROR:<br />
<br />
in resource.rc err line is:<br />
STYLE DS_CONTROL | DS_SHELLFONT | WS_CHILD<br />
<br />
My OS is WinXPpro no SP, VC 6.0 with SP<br />
<br />
Result is the same when i try to compile on PC with installed SDK.<br />
<br />
Any help will be appreciated</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2002, 15:01</div></div><div class="posttext">Please download the latest Platform SDK (http://www.microsoft.com/msdownload/platformsdk/sdkupdate/).<br />
I will make sure it is defined anyway in the resource file, but for now download the PSDK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th November 2002, 15:05</div></div><div class="posttext">You can also use DS_FIXEDSYS | DS_SETFONT instead of DS_SHELLFONT.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">neomaniakov</div><div class="date">28th November 2002, 08:32</div></div><div class="posttext">10ks for the answer<br />
I 'll get the latest SDK and will post when compile OK</div></div><hr />


<div class="post"><div class="posttop"><div class="username">neomaniakov</div><div class="date">29th November 2002, 08:46</div></div><div class="posttext">At the and I compile latest snapshot NSIS without installing new SDK, 10ks :D for the changes which made it possible:<br />
:up:<br />
 <br />
//---code:<br />
#ifndef DS_SHELLFONT <br />
 #define DS_SHELLFONT (DS_SETFONT | DS_FIXEDSYS) <br />
#endif <br />
//---code:<br />
<br />
:up:<br />
<br />
...<br />
one last thing, I changed one line in file &quot;util.c&quot;, because &quot;INVALID_FILE_ATTRIBUTES &quot; return undefined error<br />
<br />
 <br />
//--- original code in util.c:<br />
<br />
d=GetFileAttributes(dir);<br />
if (d == INVALID_FILE_ATTRIBUTES || !(d&amp;FILE_ATTRIBUTE_DIRECTORY)) dir=0;<br />
<br />
//--- original code in util.c:<br />
<br />
with <br />
<br />
//--- changed code in util.c:<br />
<br />
d=GetFileAttributes(dir);<br />
if (d == 0xffffffff || !(d&amp;FILE_ATTRIBUTE_DIRECTORY)) dir=0;<br />
<br />
//--- changed code in util.c:<br />
 <br />
because in old MSDN and SDK:<br />
<br />
//---------- from old: Platform SDK: Files and I/O<br />
GetFileAttributes<br />
...<br />
If the function succeeds, the return value contains the attributes of the specified file or directory.<br />
<br />
If the function fails, the return value is 0xffffffff. To get extended error information, call GetLastError. <br />
...<br />
//---------- from old: Platform SDK: Files and I/O<br />
<br />
and i think that INVALID_FILE_ATTRIBUTES is macro name of 0xffffffff in new SDK, some kind of:<br />
<br />
<br />
//---code:<br />
#define INVALID_FILE_ATTRIBUTES 0xffffffff<br />
/---code:<br />
<br />
<br />
May be some piece of code, same solution as DS_SHELLFONT <br />
in &quot;util.c&quot; will be usefull for someone who have not installled SDK yet(or crazy slow SDK downloading like me) <br />
and want to compile NSIS:<br />
<br />
//--- offered code:<br />
#ifndef INVALID_FILE_ATTRIBUTES<br />
 #define INVALID_FILE_ATTRIBUTES 0xffffffff<br />
#endif <br />
//--- offered code:<br />
<br />
I hope &quot;INVALID_FILE_ATTRIBUTES&quot; is same as 0xffffffff, cant be shure untill new SDK arrived from microsoft.com ;-(, <br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th November 2002, 10:58</div></div><div class="posttext">Thanks, I have fixed that too. I will upload this file later though because it has some code in progress.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>