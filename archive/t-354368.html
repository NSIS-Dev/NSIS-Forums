<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS silent installer with logging of the internal commands, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS silent installer with logging of the internal commands NSIS Discussion" />
	
	<title> NSIS silent installer with logging of the internal commands [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS silent installer with logging of the internal commands</div>
<hr />
<div class="pda"><a href="t-354368.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=354368">NSIS silent installer with logging of the internal commands</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">talu</div><div class="date">9th January 2013, 16:53</div></div><div class="posttext">Hello,<br />
<br />
1) I need a silent installer whose log file contains all the log messages that the internal NSIS commands (File, SetOutPath, CreateShortCut, etc) would normally display in the interactive log window.<br />
<br />
2) The community-provided logging mechanisms that I have studied (DumpLog-plugin, LogEx-plugin, etc.) do not capture the log output of the internal NSIS commands. Or am I wrong, does some such plugin exist?<br />
<br />
3) Now, DumpLog only works with non-silent installers, because it -- if I understood correctly -- retrieves the log data from a log window object, and that window is not instantiated in silent mode (please correct if this explanation does not make sense).<br />
<br />
4) Some background: we are deploying our software both to land-based premises and ships sailing overseas behind unreliable communications networks. We can not always assume a standard environment where the software will be run, so need to capture quite verbose installation logs.<br />
<br />
5) Because we also deploy different versions and configurations of our program suite depending on the client, we want to trace each installation attempt made in some system with its own installation log file and place all logs in a certain directory (e.g. INSTDIR\logs).<br />
<br />
6) I think the best solution would be that the internal NSIS commands should be changed to save their logging information *also* into some small internal storage that is always accessible to some (new, yet-to-be-invented?) DumpLog-style mechanism. Or can their logging info be accessed already in some fashion?<br />
<br />
7) Would &quot;LogSet on&quot; work for us?<br />
<br />
Thanks in advance for Your time and insights...<br />
<br />
Cheers,<br />
Tapio L.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th January 2013, 17:19</div></div><div class="posttext">Detailprints do not exist in silent mode, so there is nothing to capture for the normal logging functions. You'll have to write strings to a log file manually. You can for example exchange the File command with a ${File} macro that does both the File command and writes a log line.<br />
<br />
As for verbosity, NSIS does not provide much of it. You may need to replace everything with win api commands using the system plugin, and use windows's getlasterror function if something goes wrong. This will not work with the File command, obviously. If you need a higher level of integration, maybe a plugin can do it, but otherwise you'll have to modify the NSIS source code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">talu</div><div class="date">11th January 2013, 13:35</div></div><div class="posttext">Thanks a lot for your answer -- I think we now understand the options.<br />
<br />
For the moment, in silent mode we shall use the special build and &quot;LogSet on&quot;. At the end, its default &quot;$INSTDIR\install.log&quot; will be closed (&quot;LogSet off&quot;) and copied into a release-specific name into directory &quot;$INSTDIR\setuplogs&quot;.<br />
<br />
In interactive mode we shall only use &quot;DumpLog&quot; as it creates a less verbose log.<br />
<br />
This seems to work adequately for us now, but we might study using a ${File} -style macro and your other suggestions at some later time.<br />
<br />
Thank You and Cheers,<br />
Tapio L.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>