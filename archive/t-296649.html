<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Really disabling 'Next' button in a custom page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Really disabling 'Next' button in a custom page NSIS Discussion" />
	
	<title> Really disabling 'Next' button in a custom page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Really disabling 'Next' button in a custom page</div>
<hr />
<div class="pda"><a href="t-296649.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296649">Really disabling 'Next' button in a custom page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zorg117</div><div class="date">29th August 2008, 21:47</div></div><div class="posttext">I am trying to figure out a way to really disable 'Next' button in a custom page created using nsDialogs. <br />
<br />
Here is the code for disabling next button in my nsdialogs page leave function.<br />
--------------<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
--------------<br />
<br />
On my nsDialogs page after the user enters some input and click's 'Next' button (to enter the page's leave function), I disable the 'Next' button and validate some things before enabling it again. This is necessary so that I can control the flow. Unfortunately even when the button appears disabled its not truly disabled and clicking on it multiple times runs the validation step again and again.<br />
<br />
Note: I also tried hiding it, but since I know where it is, clicking on the seemingly non-existent button still counts as a 'Next' button click and the nsDialogs page leave function is entered.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zorg117</div><div class="date">30th August 2008, 14:54</div></div><div class="posttext">Anyone?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">31st August 2008, 17:17</div></div><div class="posttext">I'm not sure if I understand your problem. If I disable a button via &quot;GetDlgItem&quot; + &quot;EnableWindow&quot; then it is REALLY disabled. However you could use an additional Var and set this Var to some value which signals whether your &quot;validation step&quot; should run or not. You change that Var every time you enable/disable your button. Now simply check the value of the Var in your &quot;validation&quot; code. In case the Var has the &quot;wrong&quot; value (that is: the Button should be disabled) then you simply skip the validation. Otherwise run the validation normally...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zorg117</div><div class="date">2nd September 2008, 15:17</div></div><div class="posttext">Thank you for the response Lord. GetDlgItem+EnableWindow works on every other page but for custom pages for me. Here is how my code looks (I removed some unnecessary information but it should give you a basic idea):<br />
#############################################################<br />
Page custom PreReqPage CheckPreReqs<br />
<br />
###############################################################################<br />
Function DisableNextButton<br />
#1 - Next, 2 - Cancel, 3 - Back<br />
GetDlgItem $0 $HWNDPARENT 1 #1 for 'Next' button<br />
EnableWindow $0 0<br />
FunctionEnd<br />
###############################################################################<br />
Function EnableNextButton<br />
#1 - Next, 2 - Cancel, 3 - Back<br />
GetDlgItem $0 $HWNDPARENT 1 #1 for 'Next' button<br />
EnableWindow $0 1<br />
FunctionEnd<br />
###############################################################################<br />
Function PreReqPage<br />
Call ValidatePreReqs<br />
Pop $0<br />
strcpy $PreReqPass $0<br />
${If} $PreReqPass == &quot;1&quot;<br />
    abort<br />
${EndIf}<br />
Call HideBackButton<br />
nsDialogs::Create /NOUNLOAD 1018<br />
Pop $Dialog<br />
<br />
${If} $Dialog == error<br />
Abort<br />
${EndIf}<br />
${NSD_CreateLabel} 0 0 100% 100% &quot;&quot;<br />
Pop $Label<br />
<br />
!insertmacro MUI_HEADER_TEXT &quot;Prerequisites Check&quot; &quot;Checking Prerequisites&quot;<br />
nsDialogs::Show<br />
FunctionEnd<br />
###############################################################################<br />
Function CheckPreReqs<br />
Call DisableNextButton<br />
<br />
Call ValidatePreReqs<br />
Pop $0<br />
strcpy $PreReqPass $0<br />
${If} $PreReqPass == &quot;-1&quot;<br />
    Call EnableNextButton<br />
    abort   <br />
${EndIf}<br />
Call EnableNextButton<br />
FunctionEnd<br />
###############################################################################</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ready3</div><div class="date">3rd September 2008, 19:44</div></div><div class="posttext">This is what worked for me.  I use this in a function that is called based on:<br />
        ${NSD_OnChange} $Text SerNoChanged<br />
<br />
<br />
; call this to get a handle to the next button<br />
GetDlgItem $sNext $HWNDPARENT 1 # next/install button<br />
;then based on different criteria call:<br />
        EnableWindow $sNext 1 ; to enable<br />
; or call<br />
        EnableWindow $sNext 0 ; to disable</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">3rd September 2008, 20:53</div></div><div class="posttext">This what I use:<br />
<br />
nsDialogs::Create /NOUNLOAD 1018<br />
&lt;Snip building of said custom page&gt;<br />
<br />
/* Disable Cancel */<br />
GetDlgItem $0 $HWNDPARENT 2<br />
EnableWindow $0 0 <br />
<br />
nsDialogs::Show</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">3rd September 2008, 20:54</div></div><div class="posttext">Oops, mine is disabling Cancel, but the same thing applies for Next as well, just different value for the GetDlgItem.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>