<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how can i make radiobuttons in an INI file work?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how can i make radiobuttons in an INI file work? NSIS Discussion" />
	
	<title> how can i make radiobuttons in an INI file work? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how can i make radiobuttons in an INI file work?</div>
<hr />
<div class="pda"><a href="t-302711.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302711">how can i make radiobuttons in an INI file work?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joe1202</div><div class="date">3rd February 2009, 03:29</div></div><div class="posttext">Hi, I'm a newbie. i really need help to write my script but i couldn't find a way yet. so i have to write this.<br />
<br />
i'm really tired of watching scripts for days.<br />
i'm trying to make a WOW(world of warcraft) Addon package with Nsis. I have some plug-ins like HM NIS, advsplash, UMUI, InstallOptionsEx and so on. I already read the most of tutorials and reademe files but i can't find how to make the radio buttons in INI file work with NSI file.<br />
I hope someone show me the way.<br />
<br />
======================= this is INI file contents<br />
[Settings]<br />
NumFields=8<br />
<br />
[Field 1]<br />
Type=Groupbox<br />
Text=resolution<br />
Left=0<br />
Right=284<br />
Top=22<br />
Bottom=153<br />
<br />
[Field 2]<br />
Type=Bitmap<br />
Text=crt.bmp<br />
Left=8<br />
Right=86<br />
Top=38<br />
Bottom=108<br />
Flags=RESIZETOFIT<br />
<br />
[Field 3]<br />
Type=Bitmap<br />
Text=wide2.bmp<br />
Left=99<br />
Right=179<br />
Top=37<br />
Bottom=108<br />
Flags=RESIZETOFIT<br />
<br />
[Field 4]<br />
Type=Bitmap<br />
Text=wide.bmp<br />
Left=188<br />
Right=272<br />
Top=36<br />
Bottom=108<br />
Flags=RESIZETOFIT<br />
<br />
[Field 5]<br />
Type=Label<br />
Text=choose your monitor resolution~!!!<br />
Left=17<br />
Right=211<br />
Top=4<br />
Bottom=14<br />
<br />
[Field 6]<br />
Type=RadioButton<br />
Text=1280 X 1024<br />
Left=9<br />
Right=89<br />
Top=110<br />
Bottom=144<br />
<br />
[Field 7]<br />
Type=RadioButton<br />
Text=1680 X 1050 wide <br />
Left=95<br />
Right=186<br />
Top=115<br />
Bottom=147<br />
<br />
[Field 8]<br />
Type=RadioButton<br />
Text=1680x1050 wide with larger font<br />
Left=189<br />
Right=272<br />
Top=113<br />
Bottom=148<br />
<br />
=========================================================<br />
field 6,7,8 are the buttons but i don't know how to call these buttons in NSI file<br />
<br />
in the installer, i can see the BMPs and buttons but it doesn't work which one i choose.<br />
<br />
======= i found the BMP and button showing script =======<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;AccountInf.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;AccountInf.ini&quot; &quot;Field 2&quot; &quot;State&quot; &quot;$PLUGINSDIR\crt.bmp&quot;<br />
  SetOutPath &quot;$PLUGINSDIR&quot;<br />
  File &quot;crt.bmp&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;AccountInf.ini&quot; &quot;Field 3&quot; &quot;State&quot; &quot;$PLUGINSDIR\wide2.bmp&quot;<br />
  SetOutPath &quot;$PLUGINSDIR&quot;<br />
  File &quot;wide2.bmp&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;AccountInf.ini&quot; &quot;Field 4&quot; &quot;State&quot; &quot;$PLUGINSDIR\wide.bmp&quot;<br />
  SetOutPath &quot;$PLUGINSDIR&quot;<br />
  File &quot;wide.bmp&quot;<br />
<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION &quot;AccountInf.ini&quot; &quot;Field 6&quot; &quot;1&quot; ;1280 X 1024<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION &quot;AccountInf.ini&quot; &quot;Field 7&quot; &quot;0&quot; ;1680 X 1050<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $INI_RESOLUTION &quot;AccountInf.ini&quot; &quot;Field 8&quot; &quot;0&quot; ;1680 X 1050<br />
  FunctionEnd<br />
===========================================================  <br />
now, here is the problem. there is no connection between INI and NSI file. <br />
<br />
Please, someone help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">3rd February 2009, 03:42</div></div><div class="posttext">before FunctionEnd, add this:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;AccountInf.ini&quot;<br />
<br />
<br />
Or, alternatively (if you might have to poke at the UI before it is popped up onto the screen)<br />
<br />
<br />
; initialize dialog<br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;AccountInf.ini&quot;<br />
Pop $0 ; the installoptions inner dialog HWND<br />
; display dialog<br />
!insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
<br />
That should be all that you're missing.  Look for this info in the &quot;Using InstallOptions for custom pages&quot; section of the Modern UI (MUI) docs.<br />
<br />
Note that Modern UI has been superseded by Modern UI 2 (MUI2), which no longer uses installoptions, instead creating your custom dialogs programatically - you can still use the old MUI, of course.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joe1202</div><div class="date">3rd February 2009, 04:01</div></div><div class="posttext">//Animaether<br />
i added the code above and I think it doesn;t work.<br />
as i added the code and recompiled my files, the installer bashed of in the middle of installation.<br />
<br />
i can see the buttons and BMPs while installation but it doesn't work properly. i mean, radiobutton page(accountinf.ini) is shown while installation but doesn't work no matter which button i choose.<br />
<br />
my installer contains below<br />
1. welcome page<br />
2. agreement page<br />
3. resolution select page (accountinf.ini)<br />
4. account info ipput page(accountinf1.ini)<br />
5. addons select page <br />
6. destination folder page<br />
7. finish page<br />
<br />
but only the resolution page doesn't work.<br />
other parts work well.<br />
so i think there's missing link between INI and NSI file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">3rd February 2009, 05:27</div></div><div class="posttext">You need to have a create functions for each of your pages.  (in other words two separate functions in your case because you have 2 separate custom pages.)  An example is in the MUI docs as Animaether points out.<br />
<br />
Also, for a group of radiobuttons to function correctly using an INI file based page, you need to make sure you add FLAGS=GROUP to the first radiobutton in the group (Field 6 in your example).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joe1202</div><div class="date">4th February 2009, 04:52</div></div><div class="posttext">radio buttons still don't work.<br />
page 3(resoultion)and page 4(account info) page are the custom pages. <br />
<br />
======== this is accountinf.ini ===========================<br />
[Settings]<br />
NumFields=9<br />
<br />
[Field 1]<br />
Type=Label<br />
Text=choose your resoultion!<br />
Left=17<br />
Right=211<br />
Top=4<br />
Bottom=14<br />
<br />
[Field 2]<br />
Type=Groupbox<br />
Text=Resoultion<br />
Left=0<br />
Right=84<br />
Top=22<br />
Bottom=153<br />
<br />
[Field 3]<br />
Type=Groupbox<br />
Text=Description Image<br />
Left=88<br />
Right=228<br />
Top=23<br />
Bottom=153<br />
<br />
[Field 4]<br />
Type=RadioButton<br />
Text=1280 X 1024<br />
Left=10<br />
Right=68<br />
Top=43<br />
Bottom=71<br />
Flags=NOTIFY<br />
<br />
[Field 5]<br />
Type=RadioButton<br />
Text=1680 X 1050<br />
Left=10<br />
Right=75<br />
Top=76<br />
Bottom=99<br />
Flags=NOTIFY<br />
<br />
[Field 6]<br />
Type=RadioButton<br />
Text=1680 x 1050 Large Font<br />
Left=10<br />
Right=72<br />
Top=108<br />
Bottom=128<br />
Flags=NOTIFY<br />
<br />
[Field 7]<br />
Type=Bitmap<br />
Text=crt.bmp<br />
Left=95<br />
Right=220<br />
Top=35<br />
Bottom=144<br />
Flags=RESIZETOFIT<br />
<br />
[Field 8]<br />
Type=Bitmap<br />
Text=wide2.bmp<br />
Left=94<br />
Right=218<br />
Top=33<br />
Bottom=144<br />
Flags=RESIZETOFIT<br />
<br />
[Field 9]<br />
Type=Bitmap<br />
Text=wide.bmp<br />
Left=95<br />
Right=219<br />
Top=32<br />
Bottom=144<br />
Flags=RESIZETOFIT<br />
<br />
<br />
========== this is the part of NSI file =================<br />
!include &quot;UMUI.nsh&quot;<br />
...<br />
!include &quot;Sections.nsh&quot;<br />
!include logiclib.nsh<br />
<br />
ReserveFile &quot;AccountInf.ini&quot;<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
ReserveFile &quot;AccountInf1.ini&quot;<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
ReserveFile &quot;${NSISDIR}\Plugins\InstallOptions.dll&quot;<br />
<br />
Var VER<br />
Var INI_RESOLUTION<br />
Var INI_ACCOUNT<br />
Var INI_SERVER<br />
Var INI_CHARACTER<br />
;Var INI_CLASS<br />
Var RE_ACCOUNT_TOTAL<br />
Var RE_ACCOUNT_NUM<br />
Var INI_Macrosetting<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\splash.bmp &quot;boddalhee_1.bmp&quot;<br />
  File /oname=$PLUGINSDIR\splash.wav &quot;sound.wav&quot;<br />
  advsplash::show 2400 1200 1200 0xDE3E48 $PLUGINSDIR\splash<br />
  Pop $0 ;$0 has '1' if the user closed the splash screen early,<br />
          ;'0' if everything closed normally, and '-1' if some error occurred.<br />
  Delete $PLUGINSDIR\splash.bmp<br />
  ## Extract InstallOptions INI files<br />
  File /oname=$PLUGINSDIR\crt.bmp &quot;crt.bmp&quot;<br />
  File /oname=$PLUGINSDIR\wide2.bmp &quot;wide2.bmp&quot;<br />
  File /oname=$PLUGINSDIR\wide.bmp &quot;wide.bmp&quot;<br />
  File /oname=$PLUGINSDIR\AccountInf.ini &quot;AccountInf.ini&quot;<br />
  File /oname=$PLUGINSDIR\AccountInf1.ini &quot;AccountInf1.ini&quot;<br />
  Pop $VER<br />
  Pop $5<br />
<br />
FunctionEnd<br />
!insertmacro MUI_PAGE_WELCOME <br />
!insertmacro MUI_PAGE_LICENSE &quot;License.txt&quot;<br />
<br />
<br />
Page custom Monitor MonitorLeave  &quot;: Select Resoultion&quot;<br />
<br />
Function Monitor<br />
  InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\AccountInf.ini&quot;<br />
  Pop $0<br />
  InstallOptions::show<br />
  Pop $0<br />
FunctionEnd<br />
<br />
Function MonitorLeave<br />
  ; At this point the user has either pressed Next or one of our custom buttons<br />
  ; We find out which by reading from the INI file<br />
  ReadINIStr $0 &quot;AccountInf.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
  ${Unless} $0 = 0<br />
  StrCmp $0 4 RadioButton ;1280<br />
  StrCmp $0 5 RadioButton ;1680<br />
  StrCmp $0 6 RadioButton ;1680 big<br />
  Abort ; Return to the page<br />
  ${EndUnless}<br />
<br />
RadioButton:<br />
  ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 7&quot; &quot;HWND&quot;<br />
  ShowWindow $1 $0<br />
  <br />
  ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 5&quot; &quot;State&quot; <br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
  ShowWindow $1 $0<br />
  <br />
  ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 9&quot; &quot;HWND&quot;<br />
  ShowWindow $1 $0<br />
  Abort ; Return to the page<br />
<br />
FunctionEnd<br />
<br />
Page custom AccountPage Accountinfo &quot;:Enter Account Info&quot;<br />
<br />
Function AccountPage<br />
  InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\AccountInf1.ini&quot;<br />
  Pop $0<br />
  InstallOptions::show<br />
  Pop $0<br />
FunctionEnd<br />
<br />
Function Accountinfo<br />
  ; At this point the user has either pressed Next or one of our custom buttons<br />
  ; We find out which by reading from the INI file<br />
  ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Field 3&quot; &quot;HWND&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Field 5&quot; &quot;HWND&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Field 7&quot; &quot;HWND&quot;<br />
  ;ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Field 9&quot; &quot;HWND&quot;<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf1.ini&quot; &quot;Field 11&quot; &quot;HWND&quot;<br />
  Abort ; Return to the page<br />
..........    <br />
==========================================================<br />
now i can't go to page 4 from page 3.<br />
if i don't put AccountInf.ini file, it works well.<br />
but i really want to let the users choose the resolution by showing the resoultion image when they click a radiobutton.<br />
<br />
it is really annoying.<br />
please, your know-how will lit my way.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">4th February 2009, 05:09</div></div><div class="posttext">Please attach large files next time as it's easier to read posts when you don't have to scroll through all the code....<br />
<br />
Don't mix LogicLib and labels.<br />
<br />
The solution here is the same as in your previous post (http://forums.winamp.com/showthread.php?s=&amp;threadid=302712)<br />
Function MonitorLeave<br />
ReadINIStr $0 &quot;AccountInf.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
${Unless} $0 = 0<br />
   ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
   ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 7&quot; &quot;HWND&quot;<br />
   ShowWindow $1 $0<br />
<br />
   ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 5&quot; &quot;State&quot;<br />
   ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 8&quot; &quot;HWND&quot;<br />
   ShowWindow $1 $0<br />
<br />
   ReadINIStr $0 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
   ReadINIStr $1 &quot;$PLUGINSDIR\AccountInf.ini&quot; &quot;Field 9&quot; &quot;HWND&quot;<br />
   ShowWindow $1 $0<br />
   Abort ; Return to the page<br />
${EndUnless}<br />
<br />
FunctionEnd<br />
<br />
edit:  Also change your page's INI file, field 4 to this:[Field 4]<br />
Type=RadioButton<br />
Text=1280 X 1024<br />
Left=10<br />
Right=68<br />
Top=43<br />
Bottom=71<br />
Flags=NOTIFY<br />
Flags=Group</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>