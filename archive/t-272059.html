<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" php &amp; php-gtk, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  php &amp; php-gtk NSIS Discussion" />
	
	<title> php &amp; php-gtk [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  php &amp; php-gtk</div>
<hr />
<div class="pda"><a href="t-272059.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272059">php &amp; php-gtk</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">31st May 2007, 08:37</div></div><div class="posttext">Hi guys...<br />
 I am new as a nsis programming, making package for my project for that i have to check is php and php- gtk is installed or not and get the correct version <br />
Can someone pls direct me or tell links <br />
how to do that??<br />
thanx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">31st May 2007, 13:53</div></div><div class="posttext">i have tried to code but unable to detect php<br />
 as<br />
 Section &quot;PHP&quot;<br />
  ReadRegStr $4 HKLM &quot;Software\Microsoft\PHP&quot; &quot;CurrentVersion&quot;<br />
  IfErrors 0 done<br />
  MessageBox MB_OK &quot;Your system has PHP&quot;<br />
   call peoceed<br />
<br />
   done:<br />
   MessageBox MB_OK &quot;Your system doesn't have php&quot;<br />
   Abort<br />
<br />
   proceed:<br />
  SectionEnd<br />
<br />
<br />
it is giving me the error as::<br />
Error:resolving install function &quot;proceed&quot; in install section &quot;PHP&quot; <br />
Note:uninstall functionsmust begin with &quot;un.&quot; ,and install function must not<br />
<br />
<br />
Can somebody help in finding wat is the error</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">31st May 2007, 14:52</div></div><div class="posttext">Let's see:<br />
<br />
Section &quot;PHP&quot;<br />
ReadRegStr $4 HKLM &quot;Software\Microsoft\PHP&quot; &quot;CurrentVersion&quot;<br />
IfErrors 0 done<br />
MessageBox MB_OK &quot;Your system has PHP&quot;<br />
call peoceed<br />
<br />
done:<br />
MessageBox MB_OK &quot;Your system doesn't have php&quot;<br />
Abort<br />
<br />
proceed:<br />
SectionEnd<br />
<br />
1. What's peoceed? Do you mean proceed? If so, use goto instead of Call.<br />
2. Do you reall need Abort there?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">31st May 2007, 15:38</div></div><div class="posttext">When i put tried this in my example you can see the exaple at<br />
<br />
http://students.iiit.ac*****~dinesh/example.html<br />
<br />
it compiles but it behaves starange which i can't understand <br />
<br />
in the installer it comes as ...............<br />
<br />
InstallDir: &quot;$PROGRAMFILES\example2&quot;<br />
InstallRegKey: &quot;HKLM\Software\NSIS_example2\Install_Dir&quot;<br />
Section: &quot;PHP&quot;<br />
ReadRegStr $4 HKLM\Software\MicrosoftPHP\CurrentVersion<br />
IfErrors ?0:done<br />
MessageBox: 0: &quot;Your system has PHP&quot;<br />
Goto: proceed<br />
MessageBox: 0: &quot;Your system doesn't have php&quot;<br />
Quit<br />
SectionEnd<br />
<br />
................<br />
it should not go in done and proceed function then why it is going i used quit instead of &quot;Abort&quot;<br />
<br />
Thanx for yr reply</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">31st May 2007, 15:40</div></div><div class="posttext">example is ..<br />
<br />
; example2.nsi<br />
;<br />
; This script is based on example1.nsi, but it remember the directory,<br />
; has uninstall support and (optionally) installs start menu shortcuts.<br />
;<br />
; It will install example2.nsi into a directory that the user selects,<br />
<br />
;--------------------------------<br />
<br />
; The name of the installer<br />
Name &quot;example2&quot;<br />
<br />
; The file to write<br />
OutFile &quot;example2.exe&quot;<br />
<br />
<br />
<br />
<br />
; The default installation directory<br />
InstallDir $PROGRAMFILES\example2<br />
<br />
; Registry key to check for directory (so if you install again, it will<br />
; overwrite the old one automatically)<br />
<br />
InstallDirRegKey HKLM &quot;Software\NSIS_example2&quot; &quot;Install_Dir&quot;<br />
<br />
;--------------------------------<br />
<br />
; The stuff to install<br />
<br />
/* php detection  */<br />
Section &quot;PHP&quot;<br />
  ReadRegStr $4 HKLM &quot;Software\MicrosoftPHP&quot; &quot;CurrentVersion&quot;<br />
  IfErrors 0 done<br />
   MessageBox MB_OK &quot;Your system has PHP&quot;<br />
   goto proceed<br />
<br />
  done:<br />
  MessageBox MB_OK &quot;Your system doesn't have php&quot;<br />
  Quit<br />
<br />
proceed:<br />
  SectionEnd<br />
<br />
Section &quot;file_association&quot;<br />
<br />
  SectionIn RO<br />
<br />
  ; Set output path to the installation directory.<br />
  SetOutPath $INSTDIR<br />
<br />
  ; Put file there<br />
  File &quot;example2.nsi&quot;<br />
<br />
<br />
<br />
<br />
  ; Write the installation path into the registry<br />
  WriteRegStr HKLM SOFTWARE\NSIS_example2 &quot;Install_Dir&quot; &quot;$INSTDIR&quot;<br />
<br />
  ; Write the uninstall keys for Windows<br />
  WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\example2&quot; &quot;DisplayName&quot; &quot;NSIS_example2&quot;<br />
<br />
   WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\example2&quot; &quot;UninstallString&quot; '&quot;$INSTDIR\uninstall.exe&quot;'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">31st May 2007, 16:17</div></div><div class="posttext">Maybe you are using IfErrors incorrectly, because I have php installer..and this both works propertly:<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
Name &quot;example2&quot;<br />
OutFile &quot;example2.exe&quot;<br />
ShowInstDetails show<br />
<br />
InstallDir $EXEDIR<br />
<br />
<br />
Section &quot;PHP&quot;<br />
ReadRegStr $4 HKLM &quot;Software\\Microsoft\\PHP&quot; &quot;CurrentVersion&quot;<br />
${IF} $4 = &quot;&quot;<br />
DetailPrint &quot;Your system doesn't has PHP&quot;<br />
${ELSE}<br />
DetailPrint &quot;Your system does have php: $4&quot;<br />
${ENDIF}<br />
SectionEnd<br />
<br />
BTW, use [ code ][ /code ] tags</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">31st May 2007, 17:14</div></div><div class="posttext">thanx a lot it solved my problem</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">1st June 2007, 16:48</div></div><div class="posttext">Onr more thing ,, I will ckecks the presence of php and php-gtk in the system by regisrty keys .. it they will not there i have to install them first ans then continue further ..<br />
 for this issue I just need to attach windows binaries as <br />
 File &quot;php-5.2.2-win32.zip&quot;  or should i also make an seprate package in which i will put all of the files for php-5.2.2<br />
<br />
thanx foe the replis.......</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">1st June 2007, 18:54</div></div><div class="posttext">There's a ZipDll plugin for extractig ZIPs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">2nd June 2007, 08:01</div></div><div class="posttext">I am trying to download the files using NSISdl as<br />
<br />
&gt;NSISdl::download  http://www.programmersheaven.com/d/click.aspx?ID=F6656&amp;AltURL=2 $0<br />
<br />
i have also tried &quot;download_quiet&quot;<br />
 But it also didn't work.. <br />
 it always shows error as &quot;unable to open &quot;<br />
I can  further extract it by zipdll plugin...<br />
Can you suggest the error ....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">2nd June 2007, 22:03</div></div><div class="posttext">unable to open can be:<br />
1. bad url format.<br />
2. url doesn't exists.<br />
3. Can't connect to the server.<br />
4. Firewall blocked.<br />
5. No internet connection.<br />
6. Connection to the server was too long or busy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">4th June 2007, 08:20</div></div><div class="posttext">instead of , nsisdl i used &quot;inetload&quot;  but it is always giving <br />
tranfer error;;;<br />
 code is <br />
InetLoad::load  &quot;http://www.awitness.org/prophecy.zip&quot; $4<br />
  Pop $0<br />
  StrCmp $0 &quot;OK&quot; dlok<br />
  MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Download Error, { $0 }click OK to abort installation&quot; /SD IDOK<br />
  ;Abort<br />
 dlok: <br />
.....<br />
<br />
 $0 always contains transfer error ...<br />
Can anybody help me in this</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AxelMock</div><div class="date">4th June 2007, 09:58</div></div><div class="posttext">Just saw this thread today,<br />
<br />
Originally posted by Joel <br />
[B]Maybe you are using IfErrors incorrectly, because I have php installer..and this both works propertly:<br />
<br />
<br />
Yes, that's what I stumbled upon, when I read the initial post.<br />
<br />
ReadRegStr ....<br />
IfErrors &lt;JumptoIfError&gt; &lt;JumpToIfNoError&gt;<br />
<br />
In all the snippets except the one using LogicLib the jumps were vice-versa.<br />
<br />
So the following should work:<br />
<br />
<br />
ReadRegStr $4 HKLM &quot;Software\\Microsoft\\PHP&quot; <br />
IfErrors 0 proceed<br />
DetailPrint &quot;Your system does have php: $4&quot;<br />
proceed:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dinesh_oi</div><div class="date">4th June 2007, 10:13</div></div><div class="posttext">I am still struggling with &quot;Transfer error&quot;...<br />
can anybody give me a hint ..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th June 2007, 14:45</div></div><div class="posttext">Originally posted by dinesh_oi <br />
I am still struggling with &quot;Transfer error&quot;...<br />
can anybody give me a hint .. <br />
Originally posted by Joel <br />
unable to open can be:<br />
1. bad url format.<br />
2. url doesn't exists.<br />
3. Can't connect to the server.<br />
4. Firewall blocked.<br />
5. No internet connection.<br />
6. Connection to the server was too long or busy <br />
Just pick one or more...!!!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>