<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Plugin arguments question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Plugin arguments question NSIS Discussion" />
	
	<title> Plugin arguments question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Plugin arguments question</div>
<hr />
<div class="pda"><a href="t-187868.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187868">Plugin arguments question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">26th July 2004, 16:57</div></div><div class="posttext">In a plugin procedure, how can I know or detect the many of arguments inputed by the user?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">26th July 2004, 21:47</div></div><div class="posttext">popstring until it returns something other than 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">26th July 2004, 21:53</div></div><div class="posttext">I though that I will be something in:<br />
<br />
(HWND hwndParent, int string_size, char *variables, stack_t **stacktop)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">26th July 2004, 23:24</div></div><div class="posttext">ooops (from NSIS\Contrib\ExDLL\exdll.c):<br />
you should empty the stack of your parameters, and ONLY your<br />
 parameters.<br />
<br />
so i guess its not so smart to popstring like that.<br />
<br />
the way the system plugin does it(i think, was to lazy to check) is to have all parameters in one string and then it parses that string</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2004, 00:17</div></div><div class="posttext">The Banner plugin uses popstring I think...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">27th July 2004, 06:32</div></div><div class="posttext">Originally posted by Lobo Lunar <br />
I though that I will be something in:<br />
<br />
(HWND hwndParent, int string_size, char *variables, stack_t **stacktop)<br />
  <br />
yes, i think you could parse the variables string<br />
<br />
<br />
Originally posted by Afrow UK <br />
The Banner plugin uses popstring I think...<br />
<br />
-Stu  <br />
<br />
yes The Banner plugin and alot of other plugins use  popstring, but not like this:<br />
<br />
while( popstring(buf)==0 )DoSomething(but); //&lt;--bad, dont do this</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">27th July 2004, 14:53</div></div><div class="posttext">I think that it will be a nice idea to have this, with it the developer can stop the execution when isn't enough paramters...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">27th July 2004, 17:27</div></div><div class="posttext">while( popstring(buf)==0 )DoSomething(but); //&lt;--bad, dont do thisBecause buf will be null if you use the function and all the strings poped are destroyed in this case.<br />
<br />
I suggest you to make a counter, like:<br />
<br />
int nCounter;<br />
char* buf;<br />
<br />
while(popstring(buf)) {<br />
  nCounter += 1;<br />
<br />
  // Do something with the string or you'll lose it...<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">27th July 2004, 18:40</div></div><div class="posttext">the easy option is to have a known end item such as '--' and only take off values upto then. that's what kichik suggested when i asked way back.<br />
<br />
if the plugin has a fixed parameter list then just a fixed number of popstrings is fine, it's variable ones that cause the most problems and other values already on the stack don't help things either. but that's how things are with plugins at the moment.<br />
<br />
-daz</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>