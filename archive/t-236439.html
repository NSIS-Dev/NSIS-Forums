<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Simple question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Simple question NSIS Discussion" />
	
	<title> Simple question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Simple question</div>
<hr />
<div class="pda"><a href="t-236439.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236439">Simple question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tbednarz</div><div class="date">26th January 2006, 17:01</div></div><div class="posttext">I have my core application and a tool, which should only be installed, if it is not already there. The tool is 3rd party so I do have two cab files.<br />
<br />
Currently I have in my script:<br />
<br />
Section &quot;my app&quot; SEC01  ;(required section)<br />
<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  SectionIn 1, RO  <br />
  SetOverwrite on<br />
<br />
  File &quot;myAppFiles\Setup_MyApp.ini&quot;<br />
  File &quot;MyAppFiles\MyApp.CAB&quot;<br />
  StrCpy $0 &quot;$INSTDIR\Setup_MyApp.ini&quot;<br />
<br />
  Call InstallCAB<br />
  MessageBox MB_OK|MB_ICONINFORMATION \<br />
    &quot;Please wait for the myApp application install to finish on your device before continuing.&quot;<br />
<br />
SectionEnd <br />
<br />
<br />
No I use RAPI to query the registry of the PPC to find out, if the tool is already installed or not. If it is NOT, I need to add another CAB file and also need to change Setup_MyApp.ini.<br />
<br />
Could anybody please explain me, where to do this and how?<br />
<br />
Tom</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th January 2006, 18:26</div></div><div class="posttext">I don't understand what's the problem. Are you having problems with defining the logic? If so, see the tutorial (http://nsis.sourceforge.net/Docs/Chapter2.html#2.3.5.1). Are you have problems using RAPI? If so, see the Wiki page (http://nsis.sourceforge.net/Copying_files_to_pda).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tbednarz</div><div class="date">26th January 2006, 19:42</div></div><div class="posttext">Well RAPI is not the problem since thats all in C/C++ which I use as programming language for almost 15 years! <br />
<br />
The problem is the script where I still do not see the real program flow. There is no main (entry point), from which you can call functions and define a program flow. Instead there are tons of macros and jumps from one place to another, variables can be defined everywhere and seem to be only of type String. So I do not understand where to do what! <br />
<br />
Here the structure of my script which works but I do not understand how!!<br />
<br />
- It starts with some defines followed by some includes.<br />
- Then many !insertmacro follow to define the pages shown<br />
- Then there are some ReserveFile for my custom dialogs<br />
- Then follow three sections<br />
- After that the section descriptions!<br />
- Then follows a .onInit function<br />
- Then all functions containing my code for the custom pages<br />
<br />
So the program flow cannot be along line numbers, it is magic to me where it starts and when it does what. The documentation describes what a page is, what a section, how variables are declared etc. But I could not find something explaining in which order all those things are processed!<br />
<br />
So to install multiple CAB files on a PDA depending on some conditions NOT definable by the user should I :<br />
<br />
- define multiple sections, for every cab file one? Then call InstallCAB inside every section? (If so where is defined in which order and when a section is processed? How can I conditionally execute a section?  To me there is a lot of magic in many of the samples!)<br />
<br />
- Write a separate INI file for every CAB file and put the logic in the myApp section using some ${if} statements and call there InstallCAB? <br />
<br />
Many thanks for your help!<br />
<br />
Tom</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th January 2006, 10:53</div></div><div class="posttext">The program flow is explained in the tutorial. Was it not clear enough? How do you think it can be improved?<br />
<br />
How you wish to install multiple CABs is up to you. If you want to give the user the option, you'd want two sections so the user will see two components he can select from. If you want it to be based on some other logic, then yes, you'd need ${If} and friends.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>