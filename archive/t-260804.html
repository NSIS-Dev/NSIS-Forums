<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" need urgent help, is it a bug?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  need urgent help, is it a bug? NSIS Discussion" />
	
	<title> need urgent help, is it a bug? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  need urgent help, is it a bug?</div>
<hr />
<div class="pda"><a href="t-260804.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260804">need urgent help, is it a bug?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zjckwht</div><div class="date">30th November 2006, 23:35</div></div><div class="posttext">As you see, the default checked radiobutton is &quot;test2&quot;, why it will change to &quot;test1&quot; if I press any of taskbar button. <br />
<br />
This issue only occured when the page was shown and I press the taskbar button before any buttons was pressed on the page. So what's the cause? Someone helps?<br />
<br />
<br />
test.nsi<br />
<br />
!include             'MUI.nsh'<br />
!include             'WinMessages.nsh'<br />
!include             'LogicLib.nsh'<br />
<br />
ReserveFile          'cutmpage.ini'<br />
Page custom create check<br />
OutFile test.exe<br />
Var DLGITEM<br />
<br />
!macro SendCMD INI Field hwnd CODE wparam lparam<br />
       !insertmacro MUI_INSTALLOPTIONS_READ $DLGITEM '${INI}' '${Field}' '${hwnd}'<br />
       ${Select} ${CODE}<br />
                ${Case} 'EnableWin'<br />
                        EnableWindow $DLGITEM ${wparam}<br />
                ${Case} 'ShowWin'<br />
                        ${IfThen} ${wparam} == 0 ${|} ShowWindow $DLGITEM ${SW_HIDE} ${|}<br />
                        ${IfThen} ${wparam} == 1 ${|} ShowWindow $DLGITEM ${SW_SHOW} ${|}<br />
                ${CaseElse}<br />
                        SendMessage $DLGITEM ${CODE} ${wparam} ${lparam}<br />
       ${EndSelect}<br />
<br />
!macroend<br />
<br />
Function .onInit<br />
         InitPluginsDir<br />
         !insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS 'cutmpage.ini' 'cutmpage.ini'<br />
FunctionEnd<br />
<br />
Function create<br />
         !insertmacro MUI_INSTALLOPTIONS_INITDIALOG 'cutmpage.ini'<br />
         Call checktest2<br />
         !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
FunctionEnd<br />
<br />
Function check<br />
         !insertmacro MUI_INSTALLOPTIONS_READ $0 'cutmpage.ini' 'Settings' 'State'<br />
         StrCmp $0 0 done<br />
         StrCmp $0 1 test1<br />
         StrCmp $0 2 test2<br />
         StrCmp $0 3 test3<br />
         Abort<br />
<br />
         test1:<br />
         Call Checktest1<br />
         Abort<br />
<br />
         test2:<br />
         Call Checktest2<br />
         Abort<br />
<br />
         test3:<br />
         Call Checktest3<br />
         Abort<br />
         <br />
         done:<br />
FunctionEnd<br />
<br />
Function checktest1<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 1' 'HWND' ${BM_SETCHECK} 1 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 2' 'HWND' ${BM_SETCHECK} 0 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 3' 'HWND' ${BM_SETCHECK} 0 0<br />
FunctionEnd<br />
<br />
Function checktest2<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 1' 'HWND' ${BM_SETCHECK} 0 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 2' 'HWND' ${BM_SETCHECK} 1 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 3' 'HWND' ${BM_SETCHECK} 0 0<br />
FunctionEnd<br />
<br />
Function checktest3<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 1' 'HWND' ${BM_SETCHECK} 0 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 2' 'HWND' ${BM_SETCHECK} 0 0<br />
         !insertmacro SendCMD 'cutmpage.ini' 'Field 3' 'HWND' ${BM_SETCHECK} 1 0<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
<br />
cutmpage.ini<br />
<br />
[Settings]<br />
NumFields=3<br />
<br />
[Field 1]<br />
Type=RadioButton<br />
Text=test1<br />
Left=0<br />
Right=298<br />
Top=43<br />
Bottom=54<br />
Flags=NOTIFY<br />
<br />
[Field 2]<br />
Type=RadioButton<br />
Text=test2<br />
Left=0<br />
Right=301<br />
Top=57<br />
Bottom=65<br />
Flags=NOTIFY<br />
<br />
[Field 3]<br />
Type=RadioButton<br />
Text=test3<br />
Left=0<br />
Right=298<br />
Top=68<br />
Bottom=78<br />
Flags=NOTIFY</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st December 2006, 11:49</div></div><div class="posttext">There's a bug in the WM_COMMAND handling of InstallOptions which causes it to notify the leave function of buttons being painted. That happens because LBN_SELCHANGE has the same value of BN_PAINT.<br />
<br />
That will be fixed in the next version. To fix it in your script, drop everything related to NOTIFY and simply use the GROUP on the first radio button. That'd handle the selection of the radio buttons automatically.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">18th January 2007, 17:44</div></div><div class="posttext">still not fixed, is it? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">18th January 2007, 21:29</div></div><div class="posttext">probably fixed with patch #1638984, see:<br />
http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1638984&amp;group_id=22049&amp;atid=373087</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>