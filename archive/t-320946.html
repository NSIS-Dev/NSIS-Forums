<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Save File dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Save File dialog NSIS Discussion" />
	
	<title> Save File dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Save File dialog</div>
<hr />
<div class="pda"><a href="t-320946.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320946">Save File dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 18:30</div></div><div class="posttext">Hi,<br />
<br />
I have created a custom installer. On the installer main page, i have a save button. On click of this button. I want to open a Save File dialog, that will save the licence.rtf file.<br />
<br />
how to do this.<br />
<br />
Thanx.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th July 2010, 19:24</div></div><div class="posttext">if you are using nsDialogs, just add an ${NSD_OnClick} event to that button, and in the function called by that event, call the nsDialogs::SelectFileDialog function specifying the mode as 'save'.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 19:44</div></div><div class="posttext">Thanx for the reply. I have file $LICENCE. So when I am doing <br />
nsDialogs::SelectFileDialog /NOUNLOAD save $LICENSE &quot;*.txt&quot;<br />
<br />
it is not saving it. Am i doing something wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 19:58</div></div><div class="posttext">What exactly i want is I have displayed License in the nsis installer screen. I have a save button on the installer, so when the user clicks on save button, it should save the license on the user system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 20:03</div></div><div class="posttext">I tried this way<br />
<br />
nsDialogs::SelectFileDialog /NOUNLOAD &quot;save&quot; $PLUGINSDIR\license.rtf &quot;*.txt&quot;<br />
<br />
It is opening save file dialog with my file name and save as type &quot;*.txt&quot;. But when I am clicking save, it is not actually saving it on the system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 20:04</div></div><div class="posttext">I tried this way<br />
<br />
nsDialogs::SelectFileDialog /NOUNLOAD &quot;save&quot; $PLUGINSDIR\license.rtf &quot;*.txt&quot;<br />
<br />
It is opening save file dialog with my file name and save as type &quot;*.txt&quot;. But when I am clicking save, it is not actually saving it on the system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th July 2010, 20:06</div></div><div class="posttext">any recent version of nsDialogs doesn't require /NOUNLOAD - not sure if it ever did :)<br />
<br />
You may also wish to put quotation marks around your $license if that is the variable being used for the default location on the user's computer to save the file to.<br />
<br />
<br />
!include &quot;nsDialogs.nsh&quot;<br />
<br />
outfile &quot;$%temp%\test.exe&quot;<br />
<br />
Section<br />
	nsDialogs::SelectFileDialog save &quot;$DOCUMENTS\hello_world.txt&quot; &quot;*.txt&quot;<br />
	Pop $0<br />
	MessageBox MB_OK &quot;Save location: [$0]&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th July 2010, 20:09</div></div><div class="posttext">It is opening save file dialog with my file name and save as type &quot;*.txt&quot;. But when I am clicking save, it is not actually saving it on the system.<br />
<br />
Yeah, it doesn't work that way - it simply returns the path\filename that the user chose in the dialog on the stack.<br />
<br />
To actually save the file, you'd need to add a GetParent (from FileFunc.nsh) and File combination or maybe use CopyFiles - presuming your license text file is already in the PLUGINSDIR anyway:<br />
<br />
!include &quot;nsDialogs.nsh&quot;<br />
<br />
outfile &quot;$%temp%\test.exe&quot;<br />
<br />
Section<br />
	nsDialogs::SelectFileDialog save &quot;$DOCUMENTS\hello_world.txt&quot; &quot;*.txt&quot;<br />
	Pop $0<br />
	MessageBox MB_OK &quot;Save location: [$0]&quot;<br />
	CopyFiles /SILENT &quot;$PLUGINSDIR\hello_world.txt&quot; &quot;$0&quot;<br />
SectionENd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">axysharma</div><div class="date">19th July 2010, 21:24</div></div><div class="posttext">Thanx..it is working that way. But if the file is already at the location where I am trying to save, it overwrites it without prompting any message. is there any way we can handle it. i mean if file is already there, then it should prompt message to overwrite it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">19th July 2010, 22:12</div></div><div class="posttext">Thanx..it is working that way. But if the file is already at the location where I am trying to save, it overwrites it without prompting any message. is there any way we can handle it. i mean if file is already there, then it should prompt message to overwrite it.<br />
<br />
sure - you'd use something like:<br />
<br />
!include &quot;nsDialogs.nsh&quot;<br />
<br />
outfile &quot;$%temp%\test.exe&quot;<br />
<br />
Section<br />
	_getSavePath:<br />
	nsDialogs::SelectFileDialog save &quot;$DOCUMENTS\hello_world.txt&quot; &quot;*.txt&quot;<br />
	Pop $0<br />
	StrCmp &quot;$0&quot; &quot;&quot; _skip<br />
	MessageBox MB_OK &quot;Save location: [$0]&quot;<br />
	IfFileExists &quot;$0&quot; 0 _copyFile<br />
	    MessageBox MB_YESNO &quot;The file '$0' already exists. Do you wish to overwrite?&quot; /SD IDNO IDNO _getSavePath<br />
	_copyFile:<br />
	CopyFiles /SILENT &quot;$PLUGINSDIR\hello_world.txt&quot; &quot;$0&quot;<br />
	_skip:<br />
SectionEnd<br />
<br />
<br />
This checks if the path was empty (user canceled), in which case all the code is skipped.<br />
This checks if the path already exists, in which case the installers asks the user if they want to overwrite, first.  If they do not want to overwrite (the default), the user is prompted for a new path by going back to the beginning of the code.<br />
If the path does not already exist, or the user chooses to overwrite, it will continue with the CopyFiles code as before.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>