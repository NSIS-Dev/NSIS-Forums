<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Sections must be selected, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Sections must be selected NSIS Discussion" />
	
	<title> Sections must be selected [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Sections must be selected</div>
<hr />
<div class="pda"><a href="t-143888.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143888">Sections must be selected</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">28th July 2003, 15:35</div></div><div class="posttext">I have an installer with sections all unselected(SECTION_OFF)<br />
the customer must be select the section if he want to continue the installation.<br />
Now if I dont select any section the I have the installation folder on my desktop with the readme and license installed because i have the following code(I WANT THIS)<br />
Section &quot;-General Readme/License&quot;<br />
<br />
SectionIn RO<br />
SetOutPath &quot;$INSTDIR&quot;<br />
File &quot;${NSISDIR}\Examples\License.txt&quot;<br />
File &quot;${NSISDIR}\Examples\Readme.txt<br />
<br />
The others section are:<br />
 Function .onInit<br />
<br />
 SectionGetFlags ${sec1} $0<br />
 IntOp $0 $0 &amp; ${SECTION_OFF}<br />
 SectionSetFlags ${sec1} $0<br />
there is a total of 10 sections<br />
Thank you in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2003, 15:47</div></div><div class="posttext">Sorry, what is your question?<br />
Do you want it so that atleast 1 section has to be selected to install?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2003, 15:58</div></div><div class="posttext">If so, then you need to do this...<br />
For Modern UI, you need to have a leave function of your components page<br />
<br />
!define MUI_CUSTOMFUNCTION_COMPONENTS_LEAVE &quot;CheckComponents&quot;<br />
<br />
Function CheckComponents<br />
## Check if atleast one component is selected<br />
## ------------------------------------------<br />
SectionGetFlags ${Sec1} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec2} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec3} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec4} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec5} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec6} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec7} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec8} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec9} $R0<br />
StrCmp $R0 1 done<br />
SectionGetFlags ${Sec10} $R0<br />
StrCmp $R0 1 done<br />
<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Please select a component to install!&quot;<br />
Abort ;goes back to page<br />
<br />
done: ;if component was selected<br />
FunctionEnd<br />
<br />
If you aren't using Modern UI (you should!) then define the custom leave function like so:<br />
Page Components &quot;&quot; &quot;&quot; &quot;CheckComponents&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">28th July 2003, 17:48</div></div><div class="posttext">Thank you ...yes I forgot to mention it &quot;Im using MUI&quot;.<br />
I wrote your code in the installer, it work very well.<br />
Now m going to understaind<br />
Thank you a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2003, 17:58</div></div><div class="posttext">No problem :)<br />
Its very simple.<br />
<br />
Sections are &quot;1&quot; if selected and &quot;0&quot; if not selected.<br />
SectionGetFlags gets the section state.<br />
&quot;StrCmp $R0 1 done&quot; will goto the end of the function (done label) because that shows that one of the components is selected.<br />
If none are selected (all are state &quot;0&quot;) then it will reach the error message box.<br />
<br />
Btw, remove the &quot;Push $R0&quot; from the start, that isn't needed.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">28th July 2003, 18:49</div></div><div class="posttext">Another question...<br />
You wrote this command MB_ICONEXCLAMATION.<br />
ITS possible to change the ICON????<br />
Insert another icon.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2003, 19:14</div></div><div class="posttext">You cannot insert any icon unfortunately.<br />
You can only have ICONS from Windows standard message boxes:<br />
<br />
See section 4.9.4.14 of the NSIS user manual on the MessageBox command:<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.14<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">28th July 2003, 19:42</div></div><div class="posttext">Ok thanks again ...I can use the stop icon or the icon in the script.<br />
I think the Stop icon will be great.<br />
Its coming more intresting .......<br />
Probably Im bothering you but my installer have a long name about 50 letters (I have different collection for every years) and i want see the collection name during the installation.<br />
May I change the lenght of the installer &quot;MUI_CUSTOMFUNCTION_COMPONENTS_LEAVE&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th July 2003, 20:34</div></div><div class="posttext">So, you have a piece of text that is &lt;50 characters long and you want it to be displayed in a MessageBox?<br />
You can indeed add a MessageBox anywhere you like - in Functions and Sections.<br />
<br />
You should have a look at all of the MUI Custom Functions available (read Contrib\Modern UI\Readme.html) - there's PRE SHOW and LEAVE functions for all Modern UI pages.<br />
PRE is called before the page loads<br />
SHOW is called when the page loads<br />
LEAVE is of course called when the user clicks the next button<br />
<br />
E.g.<br />
!define MUI_CUSTOMFUNCTION_WELCOME_PRE WelcomeFunction<br />
!define MUI_CUSTOMFUNCTION_INSTFILES_LEAVE InstFilesFunction<br />
<br />
etc<br />
<br />
It's probably better to display your string on an InstallOptions dialog (look in Contrib\InstallOptions and compile test.nsi script, also look at the Readme.html file.)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">28th July 2003, 21:31</div></div><div class="posttext">Thanks so much ....im going to try tonight...ill let you know tomorrow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SGI</div><div class="date">29th July 2003, 14:40</div></div><div class="posttext">Thank you Afrow UK its wworking ...great</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>