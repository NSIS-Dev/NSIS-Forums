<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Mui_installoptions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Mui_installoptions NSIS Discussion" />
	
	<title> Mui_installoptions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Mui_installoptions</div>
<hr />
<div class="pda"><a href="t-283779.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283779">Mui_installoptions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">iliytch</div><div class="date">26th December 2007, 07:12</div></div><div class="posttext">If I press back or cancel, this function repeats.<br />
What in this code incorrectly?<br />
<br />
<br />
Function ComponentsPage<br />
  SectionGetFlags ${ISRM} $0<br />
  StrCmp $0 1 ShowPage<br />
  abort<br />
<br />
  ShowPage:<br />
<br />
   !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_SETUPSCENARIOS_TITLE)&quot; &quot;$(TEXT_SETUPSCENARIOS_SUBTITLE)&quot;<br />
<br />
  ;Clearing up all radiobuttons' values<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 1&quot; &quot;State&quot; &quot;0&quot;    ;All Components<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 2&quot; &quot;State&quot; &quot;0&quot;    ;Server Component<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 3&quot; &quot;State&quot; &quot;0&quot;    ;RMC Component<br />
<br />
  ;Retrieving installed ISA Server components using external helper dll-plugin<br />
  isacInstallDll::InstalledComponents<br />
  pop $ISARequestCredentials<br />
  pop $ISAInstallationFolder<br />
  pop $InstalledISAComponents<br />
<br />
  StrCmp $InstalledISAComponents &quot;0&quot; NoFPC_NoRMC<br />
  StrCmp $InstalledISAComponents &quot;1&quot; NoFPC<br />
  StrCmp $InstalledISAComponents &quot;2&quot; AllComponents<br />
<br />
 AllComponents:<br />
  ;Both FPC and RMC components are installed on the computer<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 1&quot; &quot;State&quot; &quot;1&quot;          ;Selecting &quot;All components&quot; field<br />
  goto Display<br />
<br />
 NoFPC_NoRMC:<br />
  ;Both FPC and RMC components are not installed on the computer. Disabling all fields except &quot;Data Center Component&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 1&quot; &quot;Flags&quot; &quot;DISABLED&quot;  ;All Components<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 2&quot; &quot;Flags&quot; &quot;DISABLED&quot;  ;Server Component<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 3&quot; &quot;Flags&quot; &quot;DISABLED&quot;  ;RMC Component<br />
  goto Display<br />
<br />
 NoFPC:<br />
  ;FPC component is not installed on the computer. Disabling all fields except &quot;Data Center Component&quot; and &quot;RMC Component&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 1&quot; &quot;Flags&quot; &quot;DISABLED&quot;  ;All Components<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;setupscenarios.ini&quot; &quot;Field 2&quot; &quot;Flags&quot; &quot;DISABLED&quot;  ;Server Component<br />
  goto Display<br />
<br />
 Display:<br />
<br />
  ;Initializing the dialog and bolding radiobuttons<br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;setupscenarios.ini&quot;<br />
  pop $R0<br />
<br />
  GetDlgItem $R1 $R0 1200<br />
  GetDlgItem $R2 $R0 1201<br />
  GetDlgItem $R3 $R0 1202<br />
  CreateFont $R5 $(^Font) $(^FontSize) 700<br />
<br />
  SendMessage $R1 ${WM_SETFONT} $R5 0<br />
  SendMessage $R2 ${WM_SETFONT} $R5 0<br />
  SendMessage $R3 ${WM_SETFONT} $R5 0<br />
<br />
  ;Let's show the dialog<br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
    pop $R0<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$R0&quot;<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$R1&quot;<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$R2&quot;<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$R3&quot;<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$MUI_TEMP&quot;<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$MUI_TEMP1&quot;<br />
  ;saving result of dialog execution(cancel, back or success)<br />
<br />
  StrCpy $R1 $MUI_TEMP1<br />
<br />
  ;User have selected components to install. Let's save this value for future use<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R2 &quot;setupscenarios.ini&quot; &quot;Field 1&quot; &quot;State&quot;          ;All Components<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R3 &quot;setupscenarios.ini&quot; &quot;Field 2&quot; &quot;State&quot;          ;Server Component<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R4 &quot;setupscenarios.ini&quot; &quot;Field 3&quot; &quot;State&quot;          ;RMC Component<br />
<br />
  StrCpy $SetupScenario &quot;0&quot; ; By default no one scenario is selected<br />
<br />
  StrCmp $R2 &quot;1&quot; 0 +2<br />
    StrCpy $SetupScenario &quot;1&quot;<br />
<br />
  StrCmp $R3 &quot;1&quot; 0 +2<br />
    StrCpy $SetupScenario &quot;2&quot;<br />
<br />
  StrCmp $R4 &quot;1&quot; 0 +2<br />
    StrCpy $SetupScenario &quot;3&quot;<br />
<br />
  ;If $SetupScenario is &quot;0&quot;, this means that user have not selected any setup scenario<br />
StrCmp $R1 &quot;success&quot; 0 do<br />
abort<br />
do:<br />
MessageBox MB_OK|MB_ICONSTOP &quot;$R1&quot;<br />
StrCmp $SetupScenario &quot;0&quot; 0 Done<br />
goto Display<br />
MessageBox MB_OK|MB_ICONSTOP &quot;Please select setup scenario and try again&quot;<br />
<br />
  Done:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iliytch</div><div class="date">26th December 2007, 09:17</div></div><div class="posttext">Please help!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>