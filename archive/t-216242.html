<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Create the installation exe before compiler finish, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Create the installation exe before compiler finish NSIS Discussion" />
	
	<title> Create the installation exe before compiler finish [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Create the installation exe before compiler finish</div>
<hr />
<div class="pda"><a href="t-216242.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=216242">Create the installation exe before compiler finish</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Gabriel Sieben</div><div class="date">17th May 2005, 09:05</div></div><div class="posttext">Hi There!<br />
<br />
I created a compiler entry to create an installation ISO file. But the exe file will be created on the end of the script. Is there a way to create the install exe before?<br />
<br />
Cheers<br />
Gabriel<br />
<br />
# Create a installation CD Image<br />
!ifdef CreateISO<br />
      !system '${InstallScriptInput}\mkisofs -R -V &quot;eCognition-${PRODUCT_VERSION}&quot; \<br />
              -P Definiens -J -joliet-long &quot;${Output}&quot; &gt; &quot;${Output}\..\${FileName}.iso&quot;'<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th May 2005, 09:45</div></div><div class="posttext">For what you need that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gabriel Sieben</div><div class="date">17th May 2005, 09:54</div></div><div class="posttext">Well... to create a iso file within the script</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th May 2005, 10:24</div></div><div class="posttext">But the exe file will be created on the end of the script. Is there a way to create the install exe before?For what you need that? <br />
<br />
What algorithm you trying to realize?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gabriel Sieben</div><div class="date">17th May 2005, 10:33</div></div><div class="posttext">I create a whole installation package using NIS. I use one script for 10 different products. This works perfect. At the end of the compilation I would create an ISO file within all files to be able to burn cd’s. But if the installation executable doesn’t exist I couldn’t create such an ISO. I’m would be happy if I don’t need external scripts to do that.<br />
[code]<br />
<br />
#######################################################<br />
### FINAL COMPILER COMMANDS<br />
#######################################################<br />
<br />
# copy files which are neede on the installation CD<br />
!system '${InstallScriptInput}\robocopy /NFL /E &quot;${ProductInput}\cd-Root&quot; &quot;${Output}&quot; '<br />
!system '${InstallScriptInput}\robocopy /NFL /E &quot;${InstallInput}\AllVersions-CD-Root&quot; &quot;${Output}&quot;'<br />
!system '${InstallScriptInput}\robocopy /NFL /E &quot;${ProductInput}\UserGuides&quot; &quot;${Output}&quot; '<br />
<br />
# Create a installation CD Image<br />
!ifdef CreateISO<br />
      !system '${InstallScriptInput}\waitForFile.bat &quot;${Output}\Setup.exe&quot;'<br />
      !system '${InstallScriptInput}\mkisofs -R -V &quot;eCognition-${PRODUCT_VERSION}&quot; \<br />
              -P Definiens -J -joliet-long &quot;${Output}&quot; &gt; &quot;${Output}\..\${FileName}.iso&quot;'<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th May 2005, 11:16</div></div><div class="posttext">I’m would be happy if I don’t need external scripts to do that. :) I suppose no other ways. You need just one external exe that will be run with !execute and do all FINAL COMPILER COMMANDS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th May 2005, 11:31</div></div><div class="posttext">Hm.. There is another way.<br />
<br />
Compile.bat (in the same directory of the script)<br />
@echo off<br />
SET NSISDIR=C:\Program Files\NSIS<br />
SET SCRIPT=MyProgram.nsi<br />
<br />
IF EXIST &quot;%temp%\CreateISO.bat&quot; DEL &quot;%temp%\CreateISO.bat&quot;<br />
&quot;%NSISDIR%\makensis.exe&quot; %SCRIPT%<br />
&quot;%temp%\CreateISO.bat&quot;<br />
DEL &quot;%temp%\CreateISO.bat&quot;<br />
SET NSISDIR=<br />
SET SCRIPT=<br />
<br />
MyProgram.nsi<br />
Name &quot;MyProgram.exe&quot;<br />
OutFile &quot;MyProgram.exe&quot;<br />
<br />
Section<br />
	!define EXEC MyProgram.exe<br />
	!system `ECHO START ${EXEC}&gt;&quot;$%temp%\CreateISO.bat&quot;`<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gabriel Sieben</div><div class="date">17th May 2005, 12:46</div></div><div class="posttext">Ok. This is a possible solution. Thanks.<br />
<br />
But the better would be a compiler command like… :-)<br />
<br />
!CreateInstallallationExeNOW<br />
<br />
Cheers<br />
Gabriel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th May 2005, 16:51</div></div><div class="posttext">Well how is that possible when the compiler has to parse the whole script from start to finish before creating the exe? That is defeating logic in one way or another!<br />
<br />
Edit: A better solution would be for NSIS to reserve a special macro name which would be used when the exe has been created - e.g. !macro .onCompileComplete<br />
Obviously the macro can only be allowed to contain compile time (!) instructions.<br />
<br />
Similarely, an .onCompileEnd would be useful too, i.e. just before the exe is created.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>