<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Browse button, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Browse button NSIS Discussion" />
	
	<title> Browse button [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Browse button</div>
<hr />
<div class="pda"><a href="t-327294.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327294">Browse button</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">14th February 2011, 12:23</div></div><div class="posttext">Hi, I wanna a nsis script that changes the 'Browse' button properties. Instead show this when I click in 'Browse' button:<br />
<br />
http://img153.imageshack.us/img153/8653/snap1wl.jpg<br />
<br />
I need to replace to this:<br />
<br />
http://img831.imageshack.us/img831/6826/snap2d.jpg<br />
<br />
Cause i'm a game translator, and my translations need to be installed in game install dir, so, if I can replace this function to search for the .exe of the game, instead of indicate the folder, would be nice.<br />
<br />
Maybe it can do using installoptions with .ini file, or nsdialogs, but I don't know how.<br />
<br />
Thanks in advance...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">14th February 2011, 13:08</div></div><div class="posttext">You can use the standard Folder Dialog and combine it with .onVerifyInstDir.<br />
<br />
Quote from NSIS Manual:<br />
This callback enables control over whether or not an installation path is valid for your installer. This code will be called every time the user changes the install directory, so it shouldn't do anything crazy with MessageBox  or the likes. If this function calls Abort, the installation path in $INSTDIR is deemed invalid.<br />
<br />
Example:<br />
<br />
Function .onVerifyInstDir<br />
    IfFileExists $INSTDIR\Winamp.exe PathGood ;replace with &quot;somegame.exe&quot; or &quot;somegame.str&quot;<br />
      Abort ; if $INSTDIR is not the game directory, don't let us install there<br />
    PathGood:<br />
  FunctionEnd<br />
<br />
Should work for you and you don´t have to create a custom Page.<br />
<br />
Sincerely...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">herdell</div><div class="date">14th February 2011, 16:14</div></div><div class="posttext">I already use this to prevent the user choice the incorrect folder.<br />
<br />
Anyway, thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th February 2011, 17:58</div></div><div class="posttext">Search for the exe before you display the directory page. You just need to set $INSTDIR. Also, avoid searching the file system if possible. You really should look for a registry value that tells you where the exe is. If you can't avoid searching the file system, make sure you indicate that a search is occurring using the Banner plug-in (or one of the more advanced ones such as nxs).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Highcoder</div><div class="date">15th February 2011, 08:49</div></div><div class="posttext">You want the installer to find the gamedir automatically so that the user don´t have to browse for thr right directory. Right?<br />
<br />
Why don´t you simply read out the game install dir from registry?<br />
Almost all games/apps store it´s installdir in registry under HKEY_LOCAL_MACHINE\Software\myGame\installdir or something...<br />
Just look into registry an search for the right key.<br />
So you can predefine $instdir in your nsis script.<br />
<br />
InstallDirRegKey HKLM &quot;SOFTWARE\Activision\Call of duty Black ops&quot; &quot;installdir&quot; &lt;- example, i don´t know the right key<br />
<br />
If the key was found $instdir contains the gamedirectory. If not it contains &quot;&quot; and you have to browse or you can do more checkups.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>