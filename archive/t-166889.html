<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Batch File Search, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Batch File Search NSIS Discussion" />
	
	<title> Batch File Search [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Batch File Search</div>
<hr />
<div class="pda"><a href="t-166889.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=166889">Batch File Search</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2004, 14:20</div></div><div class="posttext">i'm stuck for several hours now, i hope someone here can help me fixing my problem. i have combined two scripts which both work independently. since i combined them, the text-search doesn't work anymore.. and i have no idea why.<br />
<br />
Name &quot;FindHello&quot;<br />
OutFile &quot;FindHello.exe&quot;<br />
!include &quot;FileSearch.nsh&quot;<br />
<br />
Section -bla<br />
<br />
  Push $R0<br />
  FindFirst $R0 $R1 &quot;C:\*.txt&quot;<br />
<br />
 AVSAgain:<br />
<br />
  StrCmp $R1 &quot;&quot; AVSEnd<br />
<br />
<br />
  !insertmacro FileSearch &quot;$R1&quot; &quot;hello&quot;<br />
  StrCmp $1 yes 0 +2<br />
  MessageBox MB_OK &quot;$1, was found in the file $0 times.&quot;<br />
<br />
  FindNext $R0 $R1<br />
<br />
  Goto AVSAgain<br />
<br />
 AVSEnd:<br />
  FindClose $R1<br />
<br />
SectionEnd<br />
<br />
help is highly appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th January 2004, 16:00</div></div><div class="posttext">FindFirst/FindNext return only the file name, use a full path with FileSearch.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2004, 16:23</div></div><div class="posttext">thanks, works now.<br />
<br />
when i try searching the attached file for &quot;Convolution&quot;, it does not find that. so far it worked on standard .txt and .ini files, not on the attached file.<br />
<br />
is there a solution?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2004, 19:49</div></div><div class="posttext">..maybe i should add that avs files are basically a text-file, finding the mentioned expression works in any text-editor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th January 2004, 20:01</div></div><div class="posttext">That AVS file is not a normal text file, it has null characters in it. You'd have to read it using FileReadByte.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2004, 20:07</div></div><div class="posttext">which is what i did (at least i replaced FileRead with FileReadByte), or do i have to search for a different expression then?<br />
<br />
if so, how do i convert my plain-text search strings to work with FileReadByte?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th January 2004, 20:54</div></div><div class="posttext">Just replacing FileRead with FileReadByte is not enough as FileReadByte reads byte by byte and not line by line. You'd need to run FileReadByte in a loop and build a string, converting each byte to a character using IntFmt. I think Afrow UK made an example for this once. I think he even created an archive page that reads a string using FileReadByte.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">27th January 2004, 21:01</div></div><div class="posttext">super, works!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>