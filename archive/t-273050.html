<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Using replaceable strings in the /D commandline option, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Using replaceable strings in the /D commandline option NSIS Discussion" />
	
	<title> Using replaceable strings in the /D commandline option [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Using replaceable strings in the /D commandline option</div>
<hr />
<div class="pda"><a href="t-273050.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273050">Using replaceable strings in the /D commandline option</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">99999999</div><div class="date">18th June 2007, 23:16</div></div><div class="posttext">Hi I am working on changing our code, so that our package manager, can download packages, and they can be installed to the base path, chosen by a user.<br />
<br />
The problem is that the current installer packages we download, (which are NSIS installers,) set their $INSTALLDIR to &quot;$PROGRAMFILES\${INSTALLDIRECTORYNAME}&quot; ${INSTALLDIRECTORYNAME} is determined at build time for the installer, and is different for each package.<br />
<br />
When we use the /D command the issue I have is that our package manager, doesn't know what &quot;${INSTALLDIRECTORYNAME}&quot; is.  And as a result we can't use the /D commandline this way.<br />
<br />
What I am wondering is if there is means of using some replacement in the command line.  for instance /D=c:\mynewdirectory\${INSTALLDIRECTORYNAME}<br />
<br />
And I was wondering if this, or something like it, was possible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th June 2007, 23:26</div></div><div class="posttext">Why not use two defines, one of which (INSTALLDIRECTORYNAME) is hard coded into the script, and another which is defined on the command line (say INSTALLROOTDIRECTORY).<br />
<br />
Assuming you don't have this already, you might have:<br />
!ifndef INSTALLROOTDIRECTORY<br />
!define INSTALLROOTDIRECTORY &quot;$PROGRAMFILES&quot;<br />
!endif<br />
!ifndef INSTALLDIRECTORYNAME<br />
!define INSTALLDIRECTORYNAME &quot;MyApp&quot;<br />
!endif<br />
InstallDir &quot;${INSTALLROOTDIRECTORY}\${INSTALLDIRECTORYNAME}&quot;<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">99999999</div><div class="date">18th June 2007, 23:42</div></div><div class="posttext">Ahh sorry, I didn't explain.  We want to be able to do this, for what amounts to some 1300 packages, which we don't want to have to rebuild.<br />
<br />
And we want to let the user choose, during the package manager's installation, where packages should be installed to.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2007, 09:57</div></div><div class="posttext">I'm totally lost sorry lol<br />
/D is a makensis switch, or have you added support for it in your installer?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrDan</div><div class="date">19th June 2007, 16:22</div></div><div class="posttext">Look in section 4.12 of the documenation, it explains this well. The quote is:<br />
<br />
<br />
Since the directory page can not be shown on silent installers, the user has an option to specify the installation directory on the command line (this also works on non-silent installers/uninstallers). To do that, the user uses the /D switch as in the following example:<br />
<br />
foo.exe /S /D=C:\Program Files\Foo</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th June 2007, 17:14</div></div><div class="posttext">So basically you want to append a directory name onto the end of $INSTDIR in .onInit if it isn't already appended...<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>