<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS CopyFiles, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS CopyFiles NSIS Discussion" />
	
	<title> NSIS CopyFiles [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS CopyFiles</div>
<hr />
<div class="pda"><a href="t-299820.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=299820">NSIS CopyFiles</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">12th November 2008, 11:14</div></div><div class="posttext">Hi,<br />
I am doing one istaller with NSIS and i need to copy a file from previously installed program. I managed to do that and the file destination is desktop. But the question is that, is it possible that installer will ask where to paste that copyed file? Please help me if possible.<br />
<br />
Russell</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">12th November 2008, 12:20</div></div><div class="posttext">Yea it's possible, you'd need to build and add a custom dialog (page), before the InstFiles page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">12th November 2008, 13:10</div></div><div class="posttext">Hello there,<br />
Anybody has time to say more details!! Thanks for the reply.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">12th November 2008, 13:35</div></div><div class="posttext">Or it possible to send the copied file to usb memory stick?<br />
CopyFiles &quot;$Source&quot; &quot;$Destination&quot;<br />
So i did like this:<br />
CopyFiles &quot;$C:\....&quot; &quot;$DESKTOP&quot;<br />
But I want that it will promt that where to save the file. or go to usb memory stick.<br />
Please help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">13th November 2008, 17:10</div></div><div class="posttext">You must get the desired location into $Destination somehow before calling CopyFiles. I guess you'd better do this before proceeding to the &quot;instfiles&quot; page. You should use a &quot;custom&quot; page as suggested by Red Wine. First of all have a look at section &quot;2.3.2 Pages&quot; and &quot;4.5.4 Page&quot; in the NSIS manual! Then you must learn how to actually create a custom page, either via InstallOptions(Ex) or via nsDialogs. Have a look at &quot;NSIS\Docs\InstallOptions\Readme.html&quot;, &quot;NSIS\Docs\InstallOptionsEx\Readme.html&quot; or &quot;NSIS\Docs\nsDialogs\Readme.html&quot;. On your custom page you simply put a &quot;DirRequest&quot; control, which allows the user to choose the desired folder...<br />
<br />
There are also examples in the &quot;NSIS\Examples&quot; folder ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">17th November 2008, 12:12</div></div><div class="posttext">Thanks for reply. But seems to be so difficult to do.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">17th November 2008, 15:10</div></div><div class="posttext">Originally posted by Russell81 <br />
Thanks for reply. But seems to be so difficult to do.  <br />
<br />
In fact it's not that hard ;) <br />
<br />
Look at the docs or simply adapt one of the example files...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">17th November 2008, 15:53</div></div><div class="posttext">Originally posted by LoRd_MuldeR <br />
On your custom page you simply put a &quot;DirRequest&quot; control, which allows the user to choose the desired folder...<br />
<br />
There are also examples in the &quot;NSIS\Examples&quot; folder ;) <br />
LoRd_MuldeR, I am also facing a similar challenge (ask the end user select a directory). I found the examples you were referring to for InstallOptions, but I prefer using the nsDialog approach.<br />
<br />
Which means that, instead of a &quot;DirRequest&quot; control inside a custom dialog, I am using NSIS's pre-made nsDialogs::SelectFolderDialog.<br />
<br />
However, I am having some weird problems, as described in this post (http://forums.winamp.com/showthread.php?s=&amp;threadid=300008). Apparently it's not that simple - or it is simple but I am missing something really fundamental.<br />
<br />
Any suggestion as to how to proceed from here? Perhaps I should have taken the DirRequest approach?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">17th November 2008, 16:29</div></div><div class="posttext">What is the &quot;nsDialogs::Show&quot; at the end of your &quot;PageDirSelect&quot; function supposed to do?<br />
<br />
Is it needed with nsDialogs::SelectFolderDialog ??? :confused:<br />
<br />
(I'm not at home right now, so I cannot test it from here - no NSIS)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nsnb</div><div class="date">17th November 2008, 18:32</div></div><div class="posttext">Originally posted by LoRd_MuldeR <br />
What is the &quot;nsDialogs::Show&quot; at the end of your &quot;PageDirSelect&quot; function supposed to do?<br />
<br />
Is it needed with nsDialogs::SelectFolderDialog ??? :confused:<br />
<br />
(I'm not at home right now, so I cannot test it from here - no NSIS) <br />
Wow! You were right on the money :up: - I just commented out that nsDialogs::Show line and all works now perfectly. :) <br />
<br />
Thank you so much, LoRd_MuldeR! I will now post the solution in the other thread as well, so that it may help others in the future.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">18th November 2008, 02:16</div></div><div class="posttext">Originally posted by nsnb <br />
I just commented out that nsDialogs::Show line and all works now perfectly. :) <br />
<br />
&quot;One of my most productive days was throwing away 1000 lines of code.&quot;<br />
 - Ken Thompson</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">18th November 2008, 06:29</div></div><div class="posttext">I have a code that is making an installer with some normal pages such as:WELCOME,COMPONETNS,DIRECTORY,INSTFILES AND FINISH. So what i am trying to do is that after WELCOME page i need to copy a file from previous installed SW and save it somewhere. And wishing that installer will copy it and ask the user where to save. After saving that file in desired place the COMPONENTS page will appear and go forward. So do i need to do i need to make a totally separate page and call it somehow for saving file or i can make a custom page between WELCOME and COMPONENTS page? I am so out of my knowledge. Help......</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">18th November 2008, 16:16</div></div><div class="posttext">Since you mention &quot;Welcome&quot; and &quot;Finish&quot; pages, I have to assume you user MUI or MUI2. So simply put an addtional  &quot;custom&quot; page between the MUI_WELCOME_PAGE and MUI_COMPONENTS_PAGE macros, just like:<br />
<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  Page custom MyCustomPageFun<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
  !insertmacro MUI_PAGE_DIRECTORY<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  !insertmacro MUI_PAGE_FINISH<br />
<br />
Then let your custom page show the dialog box:<br />
<br />
Var varSelectedFolder<br />
<br />
Function MyCustomPageFun<br />
  !insertmacro MUI_HEADER_TEXT $(PAGE_TITLE) $(PAGE_SUBTITLE)<br />
<br />
  FolderForceSelection:<br />
  nsDialogs::SelectFolderDialog /NOUNLOAD &quot;Select Folder&quot; &quot;$DOCUMENTS&quot;<br />
  Pop $varSelectedFolder    ;where selected folder string is returned<br />
<br />
  ; Check A Folder Has Been Selected<br />
  StrCmp $varSelectedFolder &quot;error&quot; 0 FolderWasSelected<br />
  MessageBox MB_OK|MB_ICONWARNING &quot;You must select a folder a folder!&quot;<br />
  Goto FolderForceSelection<br />
<br />
  FolderWasSelected:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">19th November 2008, 09:55</div></div><div class="posttext">Thanks for the details and helpful reply. I am glad you loan me some knowledge from you.<br />
So I make this custom page and need to use this custom page for saving a file which is copied by command &quot;CopyFiles&quot;. So the idea is that i wish to use this custom page for saving that copied file to my desired destination.<br />
CopyFiles &quot;$Source&quot; &quot;$Destination&quot;. Do you suggest me that i can use this custom page as a destination somehow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">19th November 2008, 20:49</div></div><div class="posttext">In fact you only use the &quot;custom&quot; page to display the SelectFolder dialog and let the user choose the desired destination folder. That folder will be stored in $varSelectedFolder and can be used at a later time. For example you can call CopyFiles in one of your install sections and use the target folder obtained before (it's still stored in $varSelectedFolder, unless you overwrote it ^^).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">20th November 2008, 11:44</div></div><div class="posttext">Do u think, it is possible to choose &quot;USB Memory stick&quot; as a destination folder? For example if i choose the memory stick from the custom window and use that as a destination when i call CopyFiles.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">20th November 2008, 13:29</div></div><div class="posttext">Originally posted by Russell81 <br />
Do u think, it is possible to choose &quot;USB Memory stick&quot; as a destination folder? For example if i choose the memory stick from the custom window and use that as a destination when i call CopyFiles.  <br />
<br />
Why not? :confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">20th November 2008, 20:23</div></div><div class="posttext">So what i will right on the desttination?<br />
CopyFiles &quot;$Source&quot; &quot;$?????&quot; if i like to choose memory stick?<br />
Sorry for bothering you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">20th November 2008, 20:30</div></div><div class="posttext">If you use the code above, the folder selected by the user (via &quot;Browse for Folder&quot; dialog on the &quot;custom&quot; page) will be stored in $varSelectedFolder. That folder may or may not be located on an USB Memory Stick, depending on the user's choice. Anyways you can copy the files to the selected folder like this:<br />
<br />
Section &quot;Some Section&quot;<br />
  CopyFiles &quot;$Source&quot; &quot;$varSelectedFolder&quot;<br />
SectionEnd<br />
<br />
(Given that the correct source folder is stored in $Source already)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">21st November 2008, 06:30</div></div><div class="posttext">Thanks for the guide. I am so glad. I am quite new in this field that's why i am always bothering you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">5th December 2008, 09:55</div></div><div class="posttext">Is there any way to check how many processor in pc by NSIS script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">5th December 2008, 16:35</div></div><div class="posttext">Originally posted by Russell81 <br />
Is there any way to check how many processor in pc by NSIS script? <br />
How is this related to copyfiles? Take a look on the wiki, maybe you'll find something</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Russell81</div><div class="date">8th December 2008, 12:08</div></div><div class="posttext">Really?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>