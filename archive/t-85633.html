<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS 1.97 - well, hopefully, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS 1.97 - well, hopefully NSIS Discussion" />
	
	<title> NSIS 1.97 - well, hopefully [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS 1.97 - well, hopefully</div>
<hr />
<div class="pda"><a href="t-85633.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=85633">NSIS 1.97 - well, hopefully</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">23rd April 2002, 07:22</div></div><div class="posttext">Hi all, sorry I've been slacking for so long (just been working on some other projects). So here's NSIS 1.97, well, if it doesn't have any major problems anyway.. If all goes well I'll link it on the web page.<br />
<br />
http://firehose.net/free/nsis/nsis197.exe<br />
<br />
Changes:<br />
<br />
<br />
  Added config.h option: NSIS_CONFIG_CRC_ANAL <br />
This is for everybody who is paranoid about their installers getting virus infected. In this mode, the entire installer is used for CRC.<br />
  Made Sleep instruction not print &quot;Wait...&quot; to output. <br />
  Updated to MakensisW 1.2 <br />
  Updated exdll.dpr (Delphi port) <br />
  Added LogText and LogSet commands <br />
This is for manual log printing/setting if you really want it.<br />
  Reworked heavily the section system. <br />
     - Added SectionHide, SectionSetFlags, SectionGetFlags, and SectionGetVisible <br />
     - Added .onSelChange callback. <br />
   You can now have dynamic section dependency, and select sections based on what's installed, or whatever you want. You can even set sections that are read-only, meaning the only way you can change whether or not they are selected is through code. <br />
  Made size estimation display nicer (now shows .1 for MB and GB).<br />
<br />
<br />
Let me know if you find any problems, there were some pretty major changes for the section shit, so it may have broken things. If nobody gives me any reports in a few days, I'll put it on the page.<br />
<br />
Oh, one more thing. Soon I will start designing NSIS 2.0, which will not be a big rewrite or anything stupid like that, but will just have two basic but fundamental improvements:<br />
1) support for multiple languages in one installer<br />
2) support for section hierarchies. just gotta figure out the best way to do an owner drawn treeview with checkboxes. Or something.<br />
oh and 3) maybe a slightly bigger install window? :)<br />
<br />
-Justin<br />
<br />
[I editted this to add the 2.0 plans]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Thor</div><div class="date">23rd April 2002, 08:54</div></div><div class="posttext">l33tness :D<br />
gonna test it later today J!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ALoR</div><div class="date">23rd April 2002, 09:17</div></div><div class="posttext">I've tested it and recompiled with BZIP2 support...<br />
<br />
I've noticed that if I enable the COMPRESS_WHOLE option, the installer will crash on startup (this program has caused... classic window error)<br />
<br />
without the COMPRESS_WHOLE it runs fine.<br />
<br />
only my 2 cents<br />
<br />
bye</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">23rd April 2002, 10:33</div></div><div class="posttext">Originally posted by ALoR <br />
I've tested it and recompiled with BZIP2 support...<br />
<br />
I've noticed that if I enable the COMPRESS_WHOLE option, the installer will crash on startup (this program has caused... classic window error)<br />
<br />
without the COMPRESS_WHOLE it runs fine.<br />
<br />
only my 2 cents<br />
<br />
bye <br />
Make sure when you recompile you rebuild all.. Just don't do a make and then you probably won't get this error.. I just recompiled NSIS with bzip and compress all + xp support and it works just fine..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">23rd April 2002, 18:03</div></div><div class="posttext">You forgot to include Contrib\Makensisw\makensisw.xml in the installer, so you can't compile the makensisw source.  While I'm at it I updated makensisw to 1.3.  You can get it here (http://prdownloads.sourceforge.net/nsisext/makensisw-1.3-source.zip).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">23rd April 2002, 19:20</div></div><div class="posttext">Here is an update to 1.97:<br />
<br />
http://firehose.net/~deadbeef/free/nsis/nsis197-2.exe<br />
<br />
<br />
Changes:<br />
  changed SectionHide to a more general SectionSetText<br />
  changed SectionGetVisible to a more general SectionGetText<br />
  included makensisw 1.3, and makensisw.xml<br />
  added RO flag for SectionIn (read-only)<br />
  made section names support variables<br />
<br />
<br />
This is nice, because now you can completely hide/show sections, change section names, etc. You can make sections visible dependent on other sections, and whatnot.<br />
<br />
Let me know what we all think..<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">futuris</div><div class="date">23rd April 2002, 23:19</div></div><div class="posttext">Everything fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">24th April 2002, 06:12</div></div><div class="posttext">Justin, I am quite pleased to see that we can set sections with the install script now.  I will update my script to remember previously selected sections to set them next time the installer is run.  This way a user doesn't have to customize the installation each time they run my installer.  ;) <br />
<br />
If you're thinking about modifying the installer windows may I suggest you add the ability to add images (to the top, sides, and/or bottom) to each installation screen?<br />
<br />
As I've said many times before, great job on NSIS!  :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">24th April 2002, 08:05</div></div><div class="posttext">OK I just had to do these two things:<br />
<br />
1) SetShellVarContext  - changes where $SMPROGRAMS etc point to (Current user or all users)<br />
2) Parameter suppport for macros. you can now do things like:<br />
<br />
!macro Test PARM1<br />
DetailPrint &quot;This is a test: ${PARM1}&quot;<br />
!macroend<br />
<br />
<br />
...<br />
<br />
<br />
!insertmacro Test &quot;Booga&quot;<br />
<br />
<br />
and so on.<br />
<br />
http://firehose.net/~deadbeef/free/nsis/nsis197-3.exe<br />
<br />
Hopefully I didn't break too much =)<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">24th April 2002, 10:24</div></div><div class="posttext">Justin,<br />
   Just an idea.. since you added paramater support for macros.. would it be possible to add paramaters for certain functions so for instance..<br />
Function .onNextPage PAGE<br />
${PAGE} would then be the page number of what the next page is.. this would be better then having to keep track of the numbers yourself. even though it is simple.. I think this would be better use for the onSelChange so you can have a parameter of which one changed making it easier and alot less script to make changes.. But not sure how much would need to change existing code to support this..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">24th April 2002, 15:38</div></div><div class="posttext">Ok, here's another update to makensisw here (http://prdownloads.sourceforge.net/nsisext/makensisw-1.4-source.zip).  It fixes a problem with the documentation menu item causing a recompile.  It also makes the edit script action work even if the file association is not set.  I also cleaned up some of the code and removed a file or two.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">24th April 2002, 16:14</div></div><div class="posttext">I found this small bug in the installer.  If you define NSIS_CONFIG_XPSTYLE_SUPPORT and set InstProgressFlags and InstallColors, the progress bar does not change colors.  If you remove the NSIS_CONFIG_XPSTYLE_SUPPORT then the progress bar shows the correct colors.  The details window will always show the correct colors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">futuris</div><div class="date">24th April 2002, 17:07</div></div><div class="posttext">So... when NSIS 1.97 can be expected ? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bballer182</div><div class="date">24th April 2002, 18:04</div></div><div class="posttext">its out right now can't you see the links.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Nideco</div><div class="date">24th April 2002, 18:33</div></div><div class="posttext">I have problems with Logset command. It doesn't write any log. I've tried tu put it in function .onInit and in the first Section. The compiler doesn't give me any error, thus it fails in run time. I've already uncomment #define NSIS_CONFIG_LOG in congif.h and recompile teh source code with Visual C++.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">24th April 2002, 19:04</div></div><div class="posttext">Logset works for me when i put it in a section.  Make sure you are checking in the $INSTDIR.  Shouldn't this be a global option though, not for each section?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">24th April 2002, 20:34</div></div><div class="posttext">Originally posted by Schultz <br />
Justin,<br />
   Just an idea.. since you added paramater support for macros.. would it be possible to add paramaters for certain functions so for instance..<br />
Function .onNextPage PAGE<br />
${PAGE} would then be the page number of what the next page is.. this would be better then having to keep track of the numbers yourself. even though it is simple.. I think this would be better use for the onSelChange so you can have a parameter of which one changed making it easier and alot less script to make changes.. But not sure how much would need to change existing code to support this.. <br />
<br />
<br />
Since functions are compiled ahead of time, this isn't really possible in the same way. I'd like to do something that passes parameters on the stack, though.<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">24th April 2002, 20:35</div></div><div class="posttext">Originally posted by rainwater <br />
Logset works for me when i put it in a section.  Make sure you are checking in the $INSTDIR.  Shouldn't this be a global option though, not for each section? <br />
<br />
Logset is a global option, but it is implemented as an instruction, so that it can be toggled on or off whenever.<br />
<br />
-J</div></div><hr />


<div class="post"><div class="posttop"><div class="username">futuris</div><div class="date">24th April 2002, 20:48</div></div><div class="posttext">its out right now can't you see the links. <br />
<br />
I'm talking about official release on:<br />
http://www.firehose.net/~deadbeef/free/nsis/</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">24th April 2002, 22:40</div></div><div class="posttext">Originally posted by justin <br />
2) Parameter suppport for macros. you can now do things like:<br />
<br />
Yay!  Yet another feature I've often wanted (but never mentioned... :hang: )<br />
<br />
I've not thrashed it yet, but the things I use appear to still work ok! :) <br />
<br />
-- <br />
Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bballer182</div><div class="date">25th April 2002, 00:16</div></div><div class="posttext">Originally posted by futuris <br />
<br />
<br />
I'm talking about official release on:<br />
http://www.firehose.net/~deadbeef/free/nsis/ <br />
<br />
i've never seen the &quot;~deadbeef&quot; before. must be a mirror site?:igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">futuris</div><div class="date">25th April 2002, 00:25</div></div><div class="posttext">Originally posted by bballer182 <br />
<br />
<br />
i've never seen the &quot;~deadbeef&quot; before. must be a mirror site?:igor: <br />
<br />
May be ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">25th April 2002, 04:17</div></div><div class="posttext">It's Justin's user directory.  The same content (~deadbeef/free/) is mapped to /free/.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hotice</div><div class="date">25th April 2002, 07:00</div></div><div class="posttext">http://www.gzip.org/zlib/<br />
Current release: <br />
zlib 1.1.4 <br />
<br />
This version fixes a potential security problem, see details here. Any software that is linked against or derived from an earlier version of zlib should be upgraded immediately. A partial list of over 500 applications using zlib is given here (uncompressed).<br />
<br />
<br />
and bzip2 has updated to 1.02<br />
http://sources.redhat.com/bzip2/<br />
Getting the latest version: bzip2-1.0.2<br />
1.0.2 is a minor maintenance release which fixes some security holes and various minor problems in 1.0.0/1.0.1. See the CHANGES file in the sources for details. Upgrading to 1.0.2 is recommended.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">25th April 2002, 07:07</div></div><div class="posttext">Originally posted by hotice <br />
http://www.gzip.org/zlib/<br />
Current release: <br />
zlib 1.1.4 <br />
<br />
This version fixes a potential security problem, see details here. Any software that is linked against or derived from an earlier version of zlib should be upgraded immediately. A partial list of over 500 applications using zlib is given here (uncompressed).<br />
<br />
<br />
and bzip2 has updated to 1.02<br />
http://sources.redhat.com/bzip2/<br />
Getting the latest version: bzip2-1.0.2<br />
1.0.2 is a minor maintenance release which fixes some security holes and various minor problems in 1.0.0/1.0.1. See the CHANGES file in the sources for details. Upgrading to 1.0.2 is recommended. <br />
<br />
 <br />
<br />
<br />
Security issues really don't apply to NSIS, since the code and data come together anyway. I.e. you will never have a NSIS installer decompressing data other than what makensis generates. And if you do, there are far worse problems that could result.<br />
<br />
-J</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Thor</div><div class="date">25th April 2002, 08:03</div></div><div class="posttext">heh<br />
well using up to date libs is always better no? :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Nideco</div><div class="date">25th April 2002, 08:43</div></div><div class="posttext">Perhaps I can't write a log with Logset because I'm changing INSTIR in a Section with 'StrCpy $INSTDIR $R1'. I also hide the dirshow dialog with 'DirShow hide' as I ask for the installation directory before, in a InstOpt dialog. :eek: What's is more surprising is that at the beginning, Logset worked in my installer, but suddenly it has stopped working.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spanky</div><div class="date">25th April 2002, 11:37</div></div><div class="posttext">Originally posted by Thor <br />
heh<br />
well using up to date libs is always better no? :) <br />
<br />
How's that?  you know how the saying goes... &quot;if it ain't broke don't fix it&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thomas.lentzsch</div><div class="date">26th April 2002, 09:46</div></div><div class="posttext">The default value $TEMP for the SetShellVarContext is not very useful:<br />
if you try to create a start menu item in the all users start menu and the folder cannot be located, the value for the current user would be much better. Using the temp directory will never show a start menu item.<br />
<br />
I think the default values must be the current user values (may be this case can be indicated by an error code).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">28th April 2002, 22:56</div></div><div class="posttext">Originally posted by justin <br />
2) Parameter suppport for macros. you can now do things like:<br />
<br />
!macro Test PARM1<br />
DetailPrint &quot;This is a test: ${PARM1}&quot;<br />
!macroend<br />
<br />
...<br />
<br />
!insertmacro Test &quot;Booga&quot;<br />
<br />
This doesn't work with multiple parameters :( <br />
Name Test<br />
OutFile Test.exe<br />
<br />
!macro Testing one two three<br />
  MessageBox MB_OK '&quot;${one}&quot; &quot;${two}&quot; &quot;${three}&quot;'<br />
!macroend<br />
<br />
Section<br />
  !insertmacro Testing 1 2 3<br />
SectionEnd<br />
This gives two compiler warnings about unknown variables {two} and {three} and, when run, shows &quot;3&quot; &quot;{two}&quot; &quot;{three}&quot;<br />
<br />
Love the idea tho :p <br />
<br />
-- <br />
Dave.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">28th April 2002, 23:11</div></div><div class="posttext">Ah stupid little bug on my end :) fixing...<br />
<br />
-Justin<br />
<br />
Originally posted by eccles <br />
<br />
This doesn't work with multiple parameters :( <br />
Name Test<br />
OutFile Test.exe<br />
<br />
!macro Testing one two three<br />
  MessageBox MB_OK '&quot;${one}&quot; &quot;${two}&quot; &quot;${three}&quot;'<br />
!macroend<br />
<br />
Section<br />
  !insertmacro Testing 1 2 3<br />
SectionEnd<br />
This gives two compiler warnings about unknown variables {two} and {three} and, when run, shows &quot;3&quot; &quot;{two}&quot; &quot;{three}&quot;<br />
<br />
Love the idea tho :p <br />
<br />
-- <br />
Dave.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eccles</div><div class="date">28th April 2002, 23:27</div></div><div class="posttext">Cheers,<br />
<br />
Dave.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">28th April 2002, 23:33</div></div><div class="posttext">OK I fixed the macro parameter bug, and made it so if you set shit to all users, but all users is not found, it drops back to current user. and I'm calling it 1.98 for fun. It's up on firehose.net/free/nsis/.<br />
<br />
-Justin</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>