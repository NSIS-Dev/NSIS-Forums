<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsis installer with dev/qa/prod config settings, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsis installer with dev/qa/prod config settings NSIS Discussion" />
	
	<title> nsis installer with dev/qa/prod config settings [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsis installer with dev/qa/prod config settings</div>
<hr />
<div class="pda"><a href="t-293654.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293654">nsis installer with dev/qa/prod config settings</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">26th June 2008, 18:24</div></div><div class="posttext">Hi,<br />
After successful install, I would like to launch an url but I don't want to hard code the production url inside the installer.<br />
Is there a way we can have a external config file where nsis can read during the installation? <br />
Thanks<br />
Suresh M</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th June 2008, 19:00</div></div><div class="posttext">Yes of course. Use ReadINIStr, ConfigRead or FileRead etc<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">26th June 2008, 19:08</div></div><div class="posttext">Thanks for your reply. So, I have to deploy the config file as part of the installer and read the settings on successful installation, right?<br />
I also launch an url on end of uninstall or install failed, in this case we may not have the config file. How to handle this?<br />
thanks again<br />
Suresh M</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th June 2008, 19:28</div></div><div class="posttext">I also launch an url on end of uninstall or install failed, in this case we may not have the config file. How to handle this?<br />
Use functions un.onUninstSuccess and .onUserAbort/.onInstFailed respectively .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">26th June 2008, 19:34</div></div><div class="posttext">Thanks Red Wine. That was not my question, I already do that. My question is if config file gets removed during uninstall or failed to install, how can I use ConfigRead?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th June 2008, 19:48</div></div><div class="posttext">The url could be stored in a definition I guess, I can't see the point of reading the url from an external file.<br />
Anyway, simply exclude the config.cfg or whatever is the name from the uninstall list.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">26th June 2008, 21:06</div></div><div class="posttext">ok may be I didnt explain it well. Let me try again.<br />
I create an installer with the url defined in the installer script, say http://qa.server.com. <br />
QA team tests the installer and wants to deploy to production. Instead of creating the installer again with the production url &quot;http://prod.server.com&quot;, we want to release the installer tested in qa (thats what we should do, right)<br />
Thats why I want to externalize the config settings out of the installer, so we can deploy in various stages (qa, staging, production) etc.,<br />
I am not sure I understand config.cfg, if you could send me any documentation, I would appreciate it.<br />
thanks a lot</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th June 2008, 21:48</div></div><div class="posttext">Config.cfg is just a random name for the external configuration file.<br />
So, you could also copy it into $PLUGINSDIR as first action of the installer/uninstaller and read the values from there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">26th June 2008, 21:52</div></div><div class="posttext">Well, you can either have the URL hardcoded in your installer or you can load it from an external file at runtime. In the latter case your installer will depend on the external file. So it will fail if the external file was deleted, moved, renamed or never installed. The only way to overcome this dependency (and of course the preferred way) is having the URL hardcoded in the installer itself. So the best way is having the URL implemented as a define in your installer script and passing it via commandline to the MakeNSIS compiler. After your QA team has verified your installer, you re-compile that installer with the 100% identical install script. So they won't have to re-validate it. You only change the URL passed to the compiler via commandline...<br />
<br />
!ifndef MY_URL<br />
  !error &quot;URL not specified, aborting compilation!&quot;<br />
!endif<br />
<br />
...<br />
<br />
Section MySection<br />
  ExecShell &quot;open&quot; &quot;${MY_URL}&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">26th June 2008, 21:59</div></div><div class="posttext">Thanks guys. <br />
Lord_Mulder,<br />
It makes sense to have url encoded in the installer. I do agree with you about the external file dependency. I will implement the recompiling command line options.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th June 2008, 23:08</div></div><div class="posttext">Pass it via command-line like so:<br />
<br />
makensis /DMY_URL=&quot;http://...&quot; script.nsi<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">msureshkr</div><div class="date">27th June 2008, 22:56</div></div><div class="posttext">Thanks Afrow.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>