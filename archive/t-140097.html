<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" custom pages that only open conditionally, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  custom pages that only open conditionally NSIS Discussion" />
	
	<title> custom pages that only open conditionally [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  custom pages that only open conditionally</div>
<hr />
<div class="pda"><a href="t-140097.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140097">custom pages that only open conditionally</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">putaQ</div><div class="date">25th June 2003, 18:00</div></div><div class="posttext">this is my first try with NSIS and i have a little problem.<br />
the whole point of this script is to replace part of someone else's installer - The main program requires two others to fucntion properly; the old installer Exec'ed a seperate program that took care of it, but it was too crappy so i have to make one that is integrated and not as crappy.  I have the thing pretty much like i want it, but then there comes the issue of getting the paths of the satelite programs:  i want to have the user input where these programs are, but only if they aren't in their default places.  i sort of understand the InstallOptions .ini thing, but it confuses me.  even the whole page system is over my head.  can anyone help me out?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">putaQ</div><div class="date">25th June 2003, 18:01</div></div><div class="posttext">you may need this too</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">26th June 2003, 00:11</div></div><div class="posttext">PutaQ,<br />
<br />
Here's some snippets of code from my install script.<br />
I started with InstallOptions.nsi in the Examples Modern UI folder<br />
and modified it to accomplish my task, then I incorporated that<br />
code in my actual script.<br />
<br />
My .ini file defines a custom page that looks something like this:<br />
<br />
Make this application available to (groupbox)<br />
  (*) Current user (radiobutton)<br />
  (_) All users    (radiobutton)<br />
The users choice is used to set SetShellVarContext for the installer and the uninstaller. I write it to the registry and read it back during the uninstall.<br />
<br />
I skip this page if Windows version is 95 or 98, as shown below.<br />
You would replace this logic with your own (if directory is not as expected, display page that allows user to input the directory).<br />
<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
Page custom InstallOptionsCreator InstallOptionsLeave <br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
Function InstallOptionsCreator<br />
<br />
  StrCmp ${WIN_VER} &quot;95&quot; SkipPage<br />
  StrCmp ${WIN_VER} &quot;98&quot; SkipPage<br />
  <br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;InstallOptions_ShellContext.ini&quot;<br />
<br />
  SkipPage:<br />
  ; note: when this page is skipped, InstallOptionsLeave function is <br />
  ; not called, ie is automatically skipped. This is good!<br />
  <br />
FunctionEnd<br />
<br />
Function InstallOptionsLeave<br />
  ; verify user input if desired, or do stuff...<br />
FunctionEnd<br />
<br />
Hope this helps,<br />
Lilla</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">26th June 2003, 00:37</div></div><div class="posttext">i want to have the user input where these programs are, but only if they aren't in their default places<br />
<br />
Did you use the IO's &quot;DirRequest&quot;<br />
That will give the user to search for the folder...<br />
and:<br />
<br />
ReadIniStr $0 $PLUGINSDIR\io.ini &quot;Field #&quot; State<br />
;$0 will give you the folder in runtime.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Lilla</div><div class="date">26th June 2003, 03:40</div></div><div class="posttext">In the archives there is a script titled:<br />
<br />
Setting Default Location for 2nd Directory Page<br />
<br />
It includes a URL for displaying two directories. <br />
<br />
I came across this and thought it might be helpful to you two.<br />
<br />
Lilla</div></div><hr />


<div class="post"><div class="posttop"><div class="username">putaQ</div><div class="date">26th June 2003, 16:13</div></div><div class="posttext">thanks, i'll try it out.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>