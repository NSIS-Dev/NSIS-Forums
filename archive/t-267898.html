<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Add &quot;Advanced Configurations&quot; option to Components Page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Add &quot;Advanced Configurations&quot; option to Components Page NSIS Discussion" />
	
	<title> Add &quot;Advanced Configurations&quot; option to Components Page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Add &quot;Advanced Configurations&quot; option to Components Page</div>
<hr />
<div class="pda"><a href="t-267898.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=267898">Add &quot;Advanced Configurations&quot; option to Components Page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jholguin</div><div class="date">16th March 2007, 20:07</div></div><div class="posttext">I'd like to add an optional &quot;Advanced Configuration&quot; page(s) to my installer. If anyone's familiar with the SQL Express Installation you may remember that theres a &quot;hide advanced configuration options&quot; checkbox on the bottom left corner of the Registration Page.<br />
<br />
Using MUI + InstallOptions Ive managed to the create the page I need, but I'm not sure how to make this page only appear when the user has selected the option.<br />
<br />
I supposed it'd work similar to MUI_FINISHPAGE_RUN but instead of being on the finish page, it would appear at the components  page.<br />
<br />
*note* I think making it a component would work, but I'm not looking to have it part of the component list if possible.<br />
*update* I can get the page to display if I make it as a component, but all the buttons are enabled and it won't let me quit the install...<br />
<br />
Any guidance anyone can provide would be a great help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">16th March 2007, 20:46</div></div><div class="posttext">I'm thinking of 2 custom pages, if specific component which may has advanced config is selected then shows the 1st custom page with a checkbox &quot;enable advanced config&quot; which shows the 2nd custom page with all settings a user may select.<br />
If that specific component isn't selected then skip both pages and go on.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jholguin</div><div class="date">16th March 2007, 21:02</div></div><div class="posttext">That might work I think but I think I might just opt to always show the page if the components are selected (its only 2 browse boxes and a checkbox which will all be defaulted). I was trying to <br />
<br />
I think I'd need to check if the components were selected and then display the page but I'm not sure how to do this. Last time I tried to display a page on the fly like that, all the buttons were disabled (even when I tried to turn them on) and I couldn't close the install at all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">16th March 2007, 21:18</div></div><div class="posttext">I think I'd need to check if the components were selected and then display the page but I'm not sure how to do this.<br />
I've posted an example the other day that might help you start,<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=264758</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jholguin</div><div class="date">19th March 2007, 20:17</div></div><div class="posttext">Thanks a bunch Red Wine, using your example I think I got it all figured out.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">19th March 2007, 20:23</div></div><div class="posttext">You're welcome!<br />
In the meantime I transfered my imagination about this kind of installer (if I got it right) to a sample script that you might want to take a look over :)<br />
OutFile &quot;Test.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\boo&quot;<br />
<br />
InstType Typical<br />
InstType Full<br />
<br />
!include &quot;mui.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
!define MUI_FINISHPAGE_NOAUTOCLOSE<br />
!define MUI_COMPONENTSPAGE_SMALLDESC<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;${NSISDIR}\Docs\Modern UI\License.txt&quot;<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
Page Custom custcreate1<br />
Page Custom custcreate2 custleave2<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Section &quot;common (required)&quot; sec1<br />
   SectionIn ro<br />
SectionEnd<br />
<br />
Section &quot;some extras&quot; sec2<br />
   SectionIn 1 2<br />
SectionEnd<br />
<br />
Section /o &quot;stuff with advanced config&quot; sec3<br />
   SectionIn 2<br />
SectionEnd<br />
<br />
Function custcreate1<br />
   push $0<br />
   SectionGetFlags ${Sec3} $0<br />
   IntOp $0 $0 &amp; 1<br />
   ${If} $0 == 0<br />
   pop $0<br />
   Abort<br />
   ${endIf}<br />
   !insertmacro MUI_HEADER_TEXT &quot;Advanced configuration for stuff&quot; \<br />
   &quot;Advanced configuration for stuff description.&quot;<br />
   InstallOptions::Dialog &quot;$PLUGINSDIR\custom1.ini&quot;<br />
   pop $0<br />
   pop $0<br />
FunctionEnd<br />
<br />
Function custcreate2<br />
   push $0<br />
   ReadINIStr $0 &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;state&quot;<br />
   ${If} $0 == 1<br />
   SectionGetFlags ${Sec3} $0<br />
   IntOp $0 $0 &amp; 1<br />
   ${AndIf} $0 == 1<br />
   ${Else}<br />
   pop $0<br />
   Abort<br />
   ${EndIf}<br />
   !insertmacro MUI_HEADER_TEXT &quot;Advanced configuration for stuff&quot; \<br />
   &quot;Advanced configuration for stuff settings.&quot;<br />
   InstallOptions::Dialog &quot;$PLUGINSDIR\custom2.ini&quot;<br />
   pop $0<br />
   pop $0<br />
FunctionEnd<br />
<br />
Function custleave2<br />
   MessageBox MB_OK &quot;checking user's selections and setting required actions&quot;<br />
FunctionEnd<br />
<br />
Function .onInit<br />
   InitPluginsDir<br />
<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;settings&quot; &quot;numfields&quot; &quot;3&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;type&quot; &quot;groupbox&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;text&quot; &quot;Advanced configuration wizard&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;left&quot; &quot;2&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;right&quot; &quot;-2&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;top&quot; &quot;6&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 1&quot; &quot;bottom&quot; &quot;-1&quot;<br />
<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;type&quot; &quot;checkbox&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;text&quot; &quot;Enable Advanced configuration&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;left&quot; &quot;30&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;right&quot; &quot;-3&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;top&quot; &quot;22&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;bottom&quot; &quot;34&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 2&quot; &quot;state&quot; &quot;0&quot;<br />
<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;type&quot; &quot;label&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;text&quot; &quot;Advanced configuration description bla bla&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;left&quot; &quot;20&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;right&quot; &quot;-21&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;top&quot; &quot;50&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom1.ini&quot; &quot;field 3&quot; &quot;bottom&quot; &quot;-4&quot;<br />
<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;settings&quot; &quot;numfields&quot; &quot;1&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;type&quot; &quot;groupbox&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;text&quot; &quot;Advanced configuration settings fields&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;left&quot; &quot;2&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;right&quot; &quot;-2&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;top&quot; &quot;2&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom2.ini&quot; &quot;field 1&quot; &quot;bottom&quot; &quot;-2&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jholguin</div><div class="date">19th March 2007, 22:12</div></div><div class="posttext">That's pretty slick man, I really like the !define MUI_COMPONENTSPAGE_SMALLDESC too,  I didn't know that existed. I'm currently using it with normal descriptions but I think I like that layout a little bit more. I think the flow on your is not as bad as I expected too. <br />
<br />
I thought adding an extra page would make it a little more complicated (I've lost all faith in our customer's technical ability) but it's pretty harmless.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>