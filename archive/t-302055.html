<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI2 finish page two lines for run, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI2 finish page two lines for run NSIS Discussion" />
	
	<title> MUI2 finish page two lines for run [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI2 finish page two lines for run</div>
<hr />
<div class="pda"><a href="t-302055.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302055">MUI2 finish page two lines for run</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">14th January 2009, 10:20</div></div><div class="posttext">I'm moving to MUI2 and have a problem with the finish page.<br />
I used the run checkbox to start my function and the text for the checkbox was to long for one line so I used that code to make it two lines high.<br />
But it does not work any more since MUI2 is based on nsDialog. So how could I do the same for MUI2?<br />
<br />
<br />
Function fin_pre<br />
    ;two lines for the install checkbox<br />
    WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 4&quot; &quot;Bottom&quot; &quot;120&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">14th January 2009, 10:43</div></div><div class="posttext">To modify MUI2's default pages, check the files in your NSIS\Contrib\Modern UI 2\Pages directory and look for variables such as mui.FinishPage.Run . They contain the HWND of the dialog (visual object). Use that HWND to change the dialog's properties (in the page SHOW function, if I recall correctly).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">14th January 2009, 15:24</div></div><div class="posttext">thanks MSG for the right direction,<br />
<br />
so now I have the handle of the checkbox and can check/uncheck it using SendMessage.<br />
<br />
I also found the right function to resize it, but first I want to get the position of the checkbox inside the window. System plugin is a powerfull tool, but I cannot get the result I wish, so I hope someone can help.<br />
<br />
here is the code wich should get the coordinates of the checkbox (RECT), but all values I get back are  0.<br />
<br />
<br />
    System::Alloc 16<br />
    Pop $1<br />
    System::Call &quot;User32::GetClientRect (i $mui.FinishPage.Run,i r1)&quot;<br />
    ;System::Call &quot;User32::GetWindowRect (i $HWNDPARENT, i r1)&quot;<br />
    System::Call &quot;*$1(i .r2, i .r3, i .r4, i .r5)&quot;<br />
    System::Free $1<br />
<br />
    MessageBox MB_OK|MB_ICONEXCLAMATION &quot;left: $2 $\r$\n top: $3 $\r$\n right: $4 $\r$\n bottom: $5&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">14th January 2009, 15:33</div></div><div class="posttext">All right, the definition of the called function was wrong <br />
<br />
this works:<br />
<br />
System::Call &quot;User32::GetClientRect(i, i) i ($mui.FinishPage.Run, r1) .r9&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivanov</div><div class="date">14th January 2009, 16:10</div></div><div class="posttext">Here is the complete code for resizing the checkbox, can be also used to resize any control.<br />
<br />
<br />
    ; allocate memory for RECT structure<br />
    System::Alloc 16<br />
    Pop $1<br />
    ; Get the current height of the checkbox, save it in $2 and make it double size<br />
    ; save the width too<br />
    System::Call &quot;User32::GetClientRect(i, i) i ($mui.FinishPage.Run, r1) .r9&quot;<br />
    System::Call &quot;*$1(i , i , i .r3, i .r2)&quot;<br />
    IntOp $2 $2 * 2<br />
    <br />
    ; get the position of the window and the position of the checkbox to<br />
    ; calculate the relative position (top,left corner) of the checkbox inside the window<br />
    System::Call &quot;User32::GetWindowRect(i, i) i ($HWNDPARENT, r1) .r9&quot;<br />
    System::Call &quot;*$1(i .r6, i .r7, i, i)&quot;<br />
    <br />
    System::Call &quot;User32::GetWindowRect(i, i) i ($mui.FinishPage.Run, r1) .r9&quot;<br />
    System::Call &quot;*$1(i .r4, i.r5, i, i)&quot;<br />
    System::Free $1<br />
    <br />
    ; save x in $4 and y in $5<br />
    IntOp $4 $4 - $6<br />
    IntOp $5 $5 - $7<br />
<br />
    ; resize the control using MoveWindow call and force redraw<br />
    System::Call &quot;User32::MoveWindow(i, i, i, i, i, i) b ($mui.FinishPage.Run, $4, $5, $3, $2, 1)&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>