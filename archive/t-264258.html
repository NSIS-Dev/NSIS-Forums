<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File ownership and RequestExecutionLevel, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File ownership and RequestExecutionLevel NSIS Discussion" />
	
	<title> File ownership and RequestExecutionLevel [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File ownership and RequestExecutionLevel</div>
<hr />
<div class="pda"><a href="t-264258.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264258">File ownership and RequestExecutionLevel</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">reprobate</div><div class="date">24th January 2007, 05:21</div></div><div class="posttext">We install a driver and futz with HKLM a bit, so our setup runs as Administrator. The application itself doesn't need to run as admin and we'd like to keep it that way if possible. However any files created or installed by the installer have &quot;Administrators&quot; for an owner and aren't modifiable if the app is not running as admin.<br />
<br />
When running the installer is there any way of (a) determining the user prior to UAC elevation to &quot;Administrators&quot;, and (b) setting the owner of the installed writable files to that user -- or -- setting the permissions within the installer such that other users can modify the files?<br />
<br />
Thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th January 2007, 09:24</div></div><div class="posttext">You can use AccessControl (http://nsis.sourceforge.net/AccessControl_plug-in) to modify file permissions. I don't know how to determine the original user, but a better solution would be having your application keep data in the Application Data folder and not Program Files anyway.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">24th January 2007, 16:17</div></div><div class="posttext">...but anyway if you do it not as advised you should get the GROUP the user belongs to, not the user itself only.<br />
<br />
There is an API for this, do not recall from top of my head. Searching the web will help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">reprobate</div><div class="date">24th January 2007, 16:42</div></div><div class="posttext">Thanks both. Absolutely we should be storing volatile files in Application Data, but we've got to change the documentation, modify tech behavior, etc. So for the short term I'll try the above.<br />
<br />
The USERNAME variable has the current user in it even when running as admin.<br />
<br />
The UserMgr plugin has some nice user/group management features, but nothing to get the group from the user. I'll keep scrounging around or write my own if I have to.<br />
<br />
Thanks again!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>