<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" BgImage and taskbar: how to hide?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  BgImage and taskbar: how to hide? NSIS Discussion" />
	
	<title> BgImage and taskbar: how to hide? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  BgImage and taskbar: how to hide?</div>
<hr />
<div class="pda"><a href="t-205927.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205927">BgImage and taskbar: how to hide?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">laker</div><div class="date">25th January 2005, 20:16</div></div><div class="posttext">Hello,<br />
<br />
I'm trying to use BgImage plugin to change the background of my installer. Unfortunately it seems that my BgImage plugins can't write over my taskbar and so the final result is very bad.<br />
<br />
I've read some old thread and say that it's possible to hide or write over the taskbar ... unfortuantely is not happening on my PC.<br />
What is wrong?<br />
Is my PC drunk? or it's a known problem?<br />
<br />
I'm just trying standard BgImage example on the latest NSIS 2.04 release and my PC has Win2k (taskbar is normal and without auto-hide).<br />
<br />
Many thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">laker</div><div class="date">26th January 2005, 16:06</div></div><div class="posttext">Auto answer :)<br />
<br />
I've checked on another computer with Windows XP and sometimes the taskbar get hidden (sometimes not).<br />
<br />
So, I've slightly modified the source code of BgImage.cpp to hide the taskbar in any case.<br />
<br />
Here attached the source code modified. <br />
Somebody to check this? suggestions?<br />
<br />
Taskbar hidden when calling SetBg, restored when calling Destroy.<br />
<br />
Many Thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">26th January 2005, 20:05</div></div><div class="posttext">This works till installer works correct, on any error user can suddenly find his desktop without (hidden) task bar. SHAppBarMessage with ABM_SETAUTOHIDEBAR or ABM_SETSTATE is also a possible way, and on installer crash user can restore alwaysontop task bar mode from autohide (but VS 7 headers says, this may also fails). google finds few ABM_SETAUTOHIDEBAR code samples. SystemParametersInfo SPI_GETWORKAREA can give screen rect for any case.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">laker</div><div class="date">30th January 2005, 08:53</div></div><div class="posttext">Many thanks for your answer ;)<br />
<br />
I've found that:<br />
http://www.experts-exchange.com/Programming/Programming_Languages/Delphi/Q_20140981.html<br />
<br />
Unfortunately is not possibile to turn Auto Hide on and off. That's because windows task bar is a system process and it's locked to this.<br />
<br />
So, there is no way ... I've tried and it's not working.<br />
<br />
The only solution is to work in my direction (hiding the taskbar window).<br />
<br />
Question:<br />
There is a way to get a callback when the installer crashes or quits without calling .onGUIEnd?<br />
:-)<br />
<br />
<br />
I think not ... but ... who knows ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">30th January 2005, 09:45</div></div><div class="posttext">Yes, I tested ABM_SETAUTOHIDEBAR too - not wokrs with system task bar :( <br />
To work with SW_HIDE/SHOW you should also track focus lost and window minimize events.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">laker</div><div class="date">31st January 2005, 15:43</div></div><div class="posttext">Many thanks,<br />
<br />
Now I've hooked minimize, maximize and focus lost messages. You can switch application with ALT+TAB without problem even if some popup appears. It seems to be the best solution.<br />
<br />
The only problem is when the installer for some reason crashes, the user will not have anymore a taskbar :) but after a reboot everything will be back in the original state ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>