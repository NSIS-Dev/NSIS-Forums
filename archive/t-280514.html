<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Radio buttons and Next Button, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Radio buttons and Next Button NSIS Discussion" />
	
	<title> Radio buttons and Next Button [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Radio buttons and Next Button</div>
<hr />
<div class="pda"><a href="t-280514.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=280514">Radio buttons and Next Button</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Fuzzybunny</div><div class="date">1st November 2007, 19:08</div></div><div class="posttext">I've searched through the forums and i've found part of my answer however i still can't seem to get the Next button to be active.<br />
<br />
If i had this ini:<br />
[Settings]<br />
NumFields=3<br />
<br />
[Field 1]<br />
Type=RadioButton<br />
Text=Option1<br />
Left=42<br />
Right=-1<br />
Top=11<br />
Bottom=20<br />
<br />
[Field 2]<br />
Type=RadioButton<br />
Text=Option2<br />
Left=42<br />
Right=-1<br />
Top=33<br />
Bottom=48<br />
<br />
[Field 3]<br />
Type=RadioButton<br />
Text=Option3<br />
Left=42<br />
Right=-1<br />
Top=59<br />
Bottom=73<br />
<br />
and my nsi was something like this:<br />
<br />
Page custom ChooseSetup<br />
.<br />
.<br />
.<br />
<br />
Function ChooseSetup<br />
<br />
  ;******Disable the NEXT button, until a radio button has been clicked<br />
   GetDlgItem $1 $HWNDPARENT 1<br />
   EnableWindow $1 0<br />
   !insertmacro MUI_HEADER_TEXT &quot;Choose a Setup&quot; &quot;Choose which Setup you want to install.&quot;<br />
   !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;$PLUGINSDIR\SetupOptions.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
How do I enable the &quot;Next&quot; button once a radio button has been clicked?  I've looked at testnotify.nsi, but if i did the &quot;Page custom ChooseSetup ChooseSetup_Leaving&quot; the ChooseSetup_Leaving only works if I left the page and thus have already clicked Next.<br />
<br />
I thought if i did the follwing it would work:<br />
<br />
ReadIniStr $0 '$PLUGINSDIR\SetupOptions.ini' &quot;Field 1&quot; &quot;State&quot;<br />
ReadIniStr $1 '$PLUGINSDIR\SetupOptions.ini' &quot;Field 2&quot; &quot;State&quot;<br />
ReadIniStr $2 '$PLUGINSDIR\SetupOptions.ini' &quot;Field 3&quot; &quot;State&quot;<br />
<br />
  ${If} $1 == 1<br />
  ${OrIf) $2 == 1<br />
  $(OrIf) $3 == 1<br />
     GetDlgItem $1 $HWNDPARENT 1<br />
     EnableWindow $1 0<br />
  ${EndIf}<br />
<br />
where am i going wrong?  Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st November 2007, 19:57</div></div><div class="posttext">You must use the NOTIFY flag on the radio buttons for the leave function to be called when they're clicked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fuzzybunny</div><div class="date">1st November 2007, 20:31</div></div><div class="posttext">great thanks! but what if i didn't want to leave the page and i wanted them to have to click NEXT in order to get to the next page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st November 2007, 21:05</div></div><div class="posttext">NOTIFY ensures the leave function is called. In there you need to check which radio button was selected (read from Settings&gt;State to get the field # of the radio button). Call Abort to go back to the page, or rather to prevent the user leaving the page.<br />
<br />
GetDlgItem $R0 $HWNDPARENT 1<br />
EnableWindow $R0 0<br />
<br />
That will disable the next button.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fuzzybunny</div><div class="date">2nd November 2007, 14:20</div></div><div class="posttext">ok i tried what you suggested.  However the is still something wrong.  my leave function looks like this:<br />
<br />
Function ChooseSetup_Leave<br />
    GetDlgItem $R0 $HWNDPARENT 1<br />
    EnableWindow $R0 1<br />
    IntCmp $0 0 validate<br />
    Abort<br />
<br />
    validate:<br />
      MessageBox MB_ICONEXCLAMATION|MB_OK &quot;Just a Message&quot;<br />
      Abort<br />
FunctionEnd<br />
<br />
<br />
what happens is that when I select one of my radio buttons, it will automatically generate the MessageBox.  The MessageBox should only appear when I hit Next.  From what I've read 0 is the Next Button.<br />
<br />
I'm using V2.1, if it helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fuzzybunny</div><div class="date">2nd November 2007, 15:29</div></div><div class="posttext">one more thing, because of the Abort in <br />
.<br />
.<br />
.<br />
validate:<br />
   MessageBox MB_ICONEXCLAMATION|MB_OK &quot;You must select at least one install option!&quot;<br />
   Abort<br />
<br />
I also can't leave the page when I press Next.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd November 2007, 18:40</div></div><div class="posttext">Page custom ChooseSetup ChooseSetupLeave<br />
<br />
Function ChooseSetup<br />
  GetDlgItem $R0 $HWNDPARENT 1<br />
  EnableWindow $R0 0<br />
  !insertmacro MUI_HEADER_TEXT &quot;Choose a Setup&quot; &quot;Choose which Setup you want to install.&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY SetupOptions.ini<br />
FunctionEnd<br />
<br />
Function ChooseSetupLeave<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R0 SetupOptions.ini Settings State<br />
  ${If}   $R0 == 1<br />
  ${OrIf} $R0 == 2<br />
  ${OrIf} $R0 == 3<br />
    GetDlgItem $R0 $HWNDPARENT 1<br />
    EnableWindow $R0 1<br />
    Abort<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Fuzzybunny</div><div class="date">2nd November 2007, 18:52</div></div><div class="posttext">awesome! thanks a bunch!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>