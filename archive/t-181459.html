<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" confusion with variables..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  confusion with variables... NSIS Discussion" />
	
	<title> confusion with variables... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  confusion with variables...</div>
<hr />
<div class="pda"><a href="t-181459.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=181459">confusion with variables...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">28th May 2004, 14:42</div></div><div class="posttext">Hi all!<br />
<br />
I am a bit confused with the following function included in the InstallOptions docu:<br />
<br />
Function ValidateCustom<br />
<br />
  ReadINIStr $R0 &quot;$PLUGINSDIR\test.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
  StrCmp $0 &quot;&quot; 0 +3<br />
    MessageBox MB_ICONEXCLAMATION|MB_OK &quot;Please enter your name.&quot;<br />
    Abort<br />
<br />
FunctionEnd<br />
<br />
Isn't the value stored in $R0? so then why do you compare $0? thanxs!<br />
<br />
cheers,<br />
alej</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2004, 14:53</div></div><div class="posttext">Both should be either $0 or $R0. $0 and $R0 are not the same variable.<br />
<br />
Fixed, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">28th May 2004, 14:56</div></div><div class="posttext">Ok i was getting a bit confused....another thing regarding this example, what does it mean the following from the 'return value' paragraph?<br />
<br />
Usually, you don't need to check this value, but you still have to remove it from the stack (have a look at the example above).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2004, 14:58</div></div><div class="posttext">The return value is the value InstallOptions pushes on the stack. It's usually &quot;success&quot; but can be &quot;back&quot;, &quot;cancel&quot; or &quot;error&quot; IIRC.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">28th May 2004, 14:59</div></div><div class="posttext">yep this i get but we need to manually remove it from the stack every time??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th May 2004, 15:01</div></div><div class="posttext">That refers to the usage of Pop which gets the top item on the stack and removes it. As mentioned in the documentation, the example shows it. The examples outside of the documentation show this too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">28th May 2004, 15:04</div></div><div class="posttext">aha, ok thought there was something special to be done with the return value. thanxs!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">1st June 2004, 14:52</div></div><div class="posttext">upsss, $R0 will still be valid out of the function?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st June 2004, 16:23</div></div><div class="posttext">Yes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">1st June 2004, 16:37</div></div><div class="posttext">but i try to use it and instead of the value i get 'success'.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st June 2004, 16:58</div></div><div class="posttext">Then you stored the return value from the stack in $R0 too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">1st June 2004, 17:00</div></div><div class="posttext">and how do i know that?<br />
<br />
here is my code:<br />
<br />
Function SetParams ;FunctionName defined with Page command<br />
<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\params.ini  params.ini<br />
<br />
  ;Display the Install Options dialog<br />
<br />
  Push $R0<br />
<br />
  InstallOptions::dialog $PLUGINSDIR\params.ini<br />
  Pop $R0<br />
<br />
FunctionEnd<br />
<br />
Function ValidateParams<br />
<br />
  ReadINIStr $R0 &quot;$PLUGINSDIR\params.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
  MessageBox MB_ICONEXCLAMATION|MB_OK $R0<br />
  StrCmp $R0 &quot;&quot; 0 +3<br />
    MessageBox MB_ICONEXCLAMATION|MB_OK &quot;Please enter an address.&quot;<br />
    Abort<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">1st June 2004, 17:13</div></div><div class="posttext">If you remove Push $R0 and replace Pop $R0 with Pop $R1 it will work fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">almoes</div><div class="date">1st June 2004, 17:31</div></div><div class="posttext">ok now i understand! :-S</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>