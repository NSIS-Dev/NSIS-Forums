<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsDialog CreateControl Negative Height, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsDialog CreateControl Negative Height NSIS Discussion" />
	
	<title> nsDialog CreateControl Negative Height [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsDialog CreateControl Negative Height</div>
<hr />
<div class="pda"><a href="t-288252.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=288252">nsDialog CreateControl Negative Height</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">KRFournier</div><div class="date">10th March 2008, 19:18</div></div><div class="posttext">NSIS 2.35<br />
<br />
I am in the process of replacing all INI custom page logic to the new (and improved IMO) nsDialogs. I have no problem creating the controls, but I can't seem to use a negative height on an EDIT control without it becoming clipped at the bottom:<br />
<br />
http://isupport.srpcs.com/kevin/NSIS_NegHeight.png <br />
<br />
I tried changing the height from -1 to -30, but it doesn't seem to have any effect. Here is my complete custom page logic<br />
<br />
<br />
Function DocMagicSettingsPage<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Start Copying Files&quot; &quot;Review settings before copying files.&quot;<br />
<br />
  ; set the install path<br />
  ${If} $ExistingDSIDir != &quot;&quot;<br />
    StrCpy $INSTDIR $ExistingDSIDir<br />
  ${EndIf}<br />
  <br />
  ; application information<br />
  StrCpy $R9 &quot;Application Name: ${PRODUCT_NAME}$\r$\n$\r$\nDocMagic Directory: $INSTDIR$\r$\n$\r$\nClick &lt;Install&gt; to start client installation.&quot;<br />
<br />
  ; create the dialog<br />
  nsDialogs::Create /NOUNLOAD 1018<br />
  Pop $R0<br />
  ${If} $R0 == error<br />
    Abort<br />
  ${EndIf}<br />
  <br />
  ; create Label 1<br />
  ${NSD_CreateLabel} 0u 0u -1u 24u &quot;Setup has enough information to start copying the program files If you want to review or change any settings, click Back. If you are satisfied with the settings, click Install to begin copying files.&quot;<br />
  Pop $R0<br />
<br />
  ; create Label 2<br />
  ${NSD_CreateLabel} 0u 32u -1u 8u &quot;Current Settings:&quot;<br />
  Pop $R0<br />
  <br />
  ; create text box<br />
  nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} ${__NSD_Text_STYLE}|${WS_VSCROLL}|${ES_MULTILINE}|${ES_READONLY} ${__NSD_Text_EXSTYLE} 0u 41u -1u -1u $R9<br />
  Pop $R0<br />
<br />
  ; show it<br />
  nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Any help would be greatly appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">10th March 2008, 20:13</div></div><div class="posttext">you're extending the area of 1018, but you can resize it using a resource hacker to modify the ui.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KRFournier</div><div class="date">10th March 2008, 21:39</div></div><div class="posttext">I don't follow. How does setting the height of the control affect the size of 1018? Am I wrong, or does a negative height compute from the bottom of 1018?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KRFournier</div><div class="date">10th March 2008, 21:51</div></div><div class="posttext">Okay, I see now. When specifying a negative height, it calculates the height by subtracting the negative value from the total height. So, to have my text box stop at the very bottom, I have to specify -42u, to get 140 - 42. <br />
<br />
This is not consistent with the behavior I see when setting the Width to -1u. In that case, the control goes to the far right side of 1018.<br />
<br />
So, width set to -1u does not provide the same results of height set to -1u? Can someone confirm or clarify this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">10th March 2008, 22:07</div></div><div class="posttext">i should've read more carefully.. tiiired :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KRFournier</div><div class="date">10th March 2008, 22:34</div></div><div class="posttext">No problem. This isn't a show stopper as I can get around it by specifying absolute values. Still, if some can take a deeper look into this, I'd be very cursious to know if it's a bug or if I'm just missing something.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th March 2008, 20:43</div></div><div class="posttext">Specifying -1u for width worked because the control started at 0u. Unlike InstallOptions, it's not the point where the control ends, it's its actual width.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>