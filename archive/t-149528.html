<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Crash in latest nsis20b4.exe, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Crash in latest nsis20b4.exe NSIS Discussion" />
	
	<title> Crash in latest nsis20b4.exe [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Crash in latest nsis20b4.exe</div>
<hr />
<div class="pda"><a href="t-149528.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149528">Crash in latest nsis20b4.exe</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">17th September 2003, 15:54</div></div><div class="posttext">I just downloaded the nightly built NSIS. I extracted the archive and run !InstallNSIS.bat. The Installer starts correctly (after building it) and finishes the setup without problems. But then it crashes. Here are the details:<br />
<br />
AppName: nsis20b4.exe	 <br />
AppVer: 0.0.0.0	 <br />
ModName: xpfprot.dll<br />
ModVer: 1.1.0.0	 <br />
Offset: 00001a8e<br />
<br />
I use Windows XP SP1. Hope you find the bug soon and fix it. Just write if you need more information.<br />
<br />
Regards<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2003, 16:08</div></div><div class="posttext">Which version of makensis.exe are you using? Open CVS\Entries and look for a number such as 1.241 in the makensis.exe line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">21st September 2003, 12:25</div></div><div class="posttext">I just downloaded the newest nightly built NSIS. The crash appears at exact the same time. The offset and modules are the same as in my first post.<br />
The version number of makensis.exe I found in ENTRIES is 1.243.<br />
Please help.<br />
Konrad<br />
<br />
P.S. Sorry for the late answer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st September 2003, 15:09</div></div><div class="posttext">I need some more information:<br />
<br />
 What is xpfprot.dll? I can't find a thing about it on the internet. Is it part of F-PROT?<br />
 Does it happen on any other installers?<br />
 Where exactly does it crash? Before .onGUIEnd? Before .onInstFailed/.onInstSuccess? During the last section? Use message boxes to find out.<br />
 Does it happen on the uninstaller too?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">21st September 2003, 15:12</div></div><div class="posttext">So you are running the F-PROT anti-virus software?<br />
<br />
Did it work fine with previous snapshot and the same anti-virus software?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">21st September 2003, 15:40</div></div><div class="posttext">XPFPROT.dll is a DLL of Mediafours XPlay. It is a DLL which grants access to Apples iPod. Don't know what the problem is...<br />
The NSIS installer is the only one, which crashes. Anyway the crash doesn't seem to have any effect on the installation. It occurs after pressing the Finish button on the last page of the installer, no matter if Readme should be displayed or not (which actually works). My own installer written with NSIS doesn't crash.<br />
<br />
I don't know if older setups did work, because I just installed XPlay.<br />
<br />
Hope that helps.<br />
Regards<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st September 2003, 15:45</div></div><div class="posttext">iPod, good choice ;)<br />
<br />
What about the other things?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">21st September 2003, 15:52</div></div><div class="posttext">The other points you wanted to know:<br />
<br />
It happens on the uninstaller, too.<br />
<br />
Could you please send me an makensis.nsi which displays MessageBoxes in the critical methods, I can find out in which method the crash occurs.<br />
Sorry but I don't have much time, otherwise I would do it on my own. I think it is only seconds for you because you know that code pretty well ;-)<br />
<br />
Hope, we find that bug.<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st September 2003, 16:09</div></div><div class="posttext">Try without the finish page too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">21st September 2003, 21:27</div></div><div class="posttext">It only crashes if a old version of NSIS is already installed. It crashes after the .onGUIEnd method. It crashes everytime after the uninstallation.<br />
<br />
Regards Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 12:23</div></div><div class="posttext">Try compiling with this one:<br />
<br />
http://nsis.sf.net/makensis.zip<br />
<br />
And test without the finish page too.<br />
<br />
Can you also test with older setups? b3, b2, etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">22nd September 2003, 12:44</div></div><div class="posttext">It crashes even if the installer doesn't use the Finish page after the message box &quot;clean up $PLUGINSDIR&quot;.<br />
You can download a free trial of XPlay at www.mediafour.com. You don't need an iPod to reproduce the error. I think that is a lot simpler, because you can then debug the setup.<br />
If you need more help, just ask.<br />
<br />
Regards Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 14:11</div></div><div class="posttext">I'm afraid it doesn't work that way, my computer almost never crashes, including this case. Download the same zip again (updated) and try again. Let me know what's the last message box you see.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">22nd September 2003, 14:35</div></div><div class="posttext">Juhu, you got it. The crash doesn't occur any more with this makensis.exe. I can see all message boxes (including the last &quot;exiting process...&quot;). What did you change?<br />
Thank you very much.<br />
<br />
Regards Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 14:38</div></div><div class="posttext">It seems that DLL was expecting COM to still be initialized. I just made NSIS call the uninitialization after the SHFileOperation call so it will still have COM stuff ready when it tries to hook to our folder deletion.<br />
<br />
Can you get it to crash again (using the old version) and attach the full crash report, including the registers, memory dump, etc.? I want to make a complete report for MediaFour and I need that information to do so.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 14:55</div></div><div class="posttext">Test the attached file too please.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">22nd September 2003, 15:00</div></div><div class="posttext">I can only save a xml-file called appcompat.txt. The dmp-file which is created in the temp folder isn't accessible. I can't copy nor open it. When I close the crash dialog the file is automatically deleted. I can also not copy the technical details via copy and paste.  How can I save that dump file without sending it to MS?<br />
<br />
Thanks in advance<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">22nd September 2003, 15:02</div></div><div class="posttext">There occurs no crash with the xplaycrash.exe. It only displays one messagebox with a filename and &quot;Delete&quot; as caption.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 15:20</div></div><div class="posttext">I will try to find a utility that allows you to copy from that window later. For now, I could do with the value of ESI. It should be listed below the DLLs list and before the memory dump.<br />
<br />
Try the attached file please.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">22nd September 2003, 15:25</div></div><div class="posttext">New zip file still doesn't crashs. Just displays 4 messageboxes.<br />
The ESI value for thread 1 at crash is: 0x00000000</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 15:32</div></div><div class="posttext">Finally got it to crash here too. I'll let you know what turns up.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd September 2003, 16:56</div></div><div class="posttext">I have uploaded a new version, with no debug information that should no longer crashed. I have also reported this to MediaFour:<br />
<br />
http://forums.mediafour.com/showthread.php?s=&amp;threadid=3202</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd September 2003, 22:35</div></div><div class="posttext">MediaFour have fixed XPlay's part of this bug. I was told the fix will be included in the next version after it passes through QA.<br />
<br />
Thank you Konard for your report.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>