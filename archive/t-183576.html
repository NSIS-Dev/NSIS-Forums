<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Using Env Var as source directory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Using Env Var as source directory NSIS Discussion" />
	
	<title> Using Env Var as source directory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Using Env Var as source directory</div>
<hr />
<div class="pda"><a href="t-183576.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183576">Using Env Var as source directory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">thammr</div><div class="date">17th June 2004, 00:07</div></div><div class="posttext">Hi,<br />
<br />
I'm trying to work out how to use an environment variable<br />
as the source directory in an NSIS script<br />
<br />
ExpandEnvStrings $0 &quot;HIL_DEVELOP&quot;<br />
SetOutputPath &quot;$INSTDIR\test&quot;<br />
File &quot;$0\test\test.exe&quot;<br />
<br />
This just doesn't seem to work. NSIS doesn't seem to expand<br />
$0 (assuming that ExpandEnvStrings works).<br />
<br />
BTW is there any documentation describing the syntax used<br />
in the NSIS Manual? I'm having real problems trying<br />
to understand the syntax of some NSIS Instructions<br />
<br />
eg.<br />
<br />
4.9.2.7 ExpandEnvStrings<br />
user_var(output) string<br />
<br />
Expands environment variables in &quot;string&quot; into user variable $x.<br />
<br />
Usage: ExpandEnvStrings $(user_var: output) string<br />
<br />
Firstly, we have two apparently different syntaxes!<br />
<br />
Secondly where is $x mentioned in syntax (I presume that<br />
the description should say user_var rather than $x)?<br />
<br />
What the %$@#&amp;* is output?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coho</div><div class="date">17th June 2004, 00:47</div></div><div class="posttext">I think you have to wrap your Env Var in ${ }<br />
Try:<br />
ExpandEnvStrings $0 ${HIL_DEVELOP}<br />
<br />
Output is $0 in your case, that should work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coho</div><div class="date">17th June 2004, 01:01</div></div><div class="posttext">Crap - tried that to make sure, and it don't work...<br />
<br />
This syntax does:<br />
<br />
$%HOMEPATH%<br />
<br />
Bury your env var inside the %'s and use it inside quotes.<br />
<br />
Like: File &quot;$%HIL_DEVELOP%\test\test.exe&quot;<br />
Or: StrCpy $0 &quot;$%HOMEPATH%&quot; to set $0 to be your var.<br />
<br />
This syntax gets replaced at compile-time, so make sure you have the Env Var defined correctly when you compile.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>