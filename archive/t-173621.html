<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Compile time: reading value from a .ini file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Compile time: reading value from a .ini file NSIS Discussion" />
	
	<title> Compile time: reading value from a .ini file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Compile time: reading value from a .ini file</div>
<hr />
<div class="pda"><a href="t-173621.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=173621">Compile time: reading value from a .ini file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">thelliez</div><div class="date">16th March 2004, 23:40</div></div><div class="posttext">Trying to write a generic installer for different flavors of a product, I would like to have the name of the compiled installer to reflect few options (like a build number).<br />
<br />
For example, instead of setup.exe, I would like something like setup_123.exe where 123 is a dynamic string available in a .ini file (built from an ant/cvs script).<br />
<br />
If I could do some sort of ReadINIStr at compile time I would be set.<br />
<br />
I guess I could try passing parameters to the compiler but it would not be as convenient.<br />
<br />
Suggestions?<br />
Thierry</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">17th March 2004, 01:41</div></div><div class="posttext">You will have to create a 'wrapper' installer using NSIS or any other programming language, then call that wrapper from your nsis script using the '!system' command.  This wrapper should read your ini file(s) and either define the required defines automatically or generate an include file which can then be included into the script.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">17th March 2004, 03:29</div></div><div class="posttext">How about building a config.nsh file that !define's the properties?  Otherwise, if you are forced to read a certain ini, then you will need to do what Vytautas said.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tolan</div><div class="date">30th November 2006, 07:56</div></div><div class="posttext">You may use some bat magic :) <br />
My solution (tested on WinXP):<br />
<br />
!tempfile VAR_FILE<br />
!system '@for /f &quot;eol=# delims== tokens=1,2&quot; %i in (ini_file.ini) do @echo ^!define &quot;%i&quot; &quot;%j&quot; &gt;&gt; &quot;${VAR_FILE}&quot;'<br />
!include &quot;${VAR_FILE}&quot;<br />
!delfile &quot;${VAR_FILE}&quot;<br />
!undef VAR_FILE<br />
<br />
Hope this helps.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>