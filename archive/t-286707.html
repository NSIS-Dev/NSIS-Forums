<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 32-bit NSIS installer launching 64-bit child processes?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  32-bit NSIS installer launching 64-bit child processes? NSIS Discussion" />
	
	<title> 32-bit NSIS installer launching 64-bit child processes? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  32-bit NSIS installer launching 64-bit child processes?</div>
<hr />
<div class="pda"><a href="t-286707.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286707">32-bit NSIS installer launching 64-bit child processes?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Otac0n</div><div class="date">11th February 2008, 21:20</div></div><div class="posttext">Hey guys, I'm having trouble launching DPInst from NSIS (to install my NIC drivers) on 64-bit versions of windows.  It seems that no matter how I launch the executable from NSIS (Exec, ExecWait, ExecShell, or through a .cmd scripte with any of the 3), i can not get the Process to show up as a 64-bit process...<br />
<br />
If I run it from the shell or from CMD, it works fine...<br />
DPInst must be run as a 64-bit process to function...<br />
<br />
any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th February 2008, 21:26</div></div><div class="posttext">Where is it installed? Is it $SYSDIR? Did you turn off redirection?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Otac0n</div><div class="date">11th February 2008, 21:41</div></div><div class="posttext">well, take a look:<br />
<br />
setup.nsi<br />
<br />
Name &quot;CDIF&quot;<br />
SetCompressor lzma<br />
RequestExecutionLevel highest<br />
.<br />
.<br />
.<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
OutFile &quot;setup.exe&quot;<br />
CRCCheck on<br />
<br />
<br />
Section &quot;Driver&quot;<br />
 SetOutPath &quot;$TEMP\cdif\&quot;<br />
 File /r &quot;installer\&quot;<br />
 ExecWait &quot;$TEMP\cdif\setup.cmd&quot;<br />
 RMDir /r &quot;$TEMP\cdif\&quot;<br />
SectionEnd<br />
<br />
<br />
<br />
setup.cmd<br />
<br />
((echo %PROCESSOR_ARCHITECTURE% | find &quot;IA64&quot; /C) &gt;&gt; nul) &amp;&amp; goto win64<br />
((echo %PROCESSOR_ARCHITECTURE% | find &quot;64&quot; /C) &gt;&gt; nul) &amp;&amp; goto winx64<br />
<br />
:win32<br />
cd Win32<br />
goto install<br />
<br />
:win64<br />
cd Win64<br />
goto install<br />
<br />
:winx64<br />
cd Winx64<br />
goto install<br />
<br />
:install<br />
DPInst.exe /C /LM /Q<br />
pause<br />
<br />
<br />
<br />
The DPInst in each folder (for 32, AMD64, or IA64) is the correct version.<br />
<br />
I just need to launch them as a process with the right bit-depth...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th February 2008, 21:57</div></div><div class="posttext">PROCESSOR_ARCHITECTURE will return x86 when probed in 32-bit cmd.exe. Check for the executable to run with RunningX64 instead.${If} ${RunningX64}<br />
  ExecWait `&quot;$TEMP\cdif\winx64\dpinst.exe&quot; /C /LM /Q`<br />
${Else}<br />
  ExecWait `&quot;$TEMP\cdif\win32\dpinst.exe&quot; /C /LM /Q`<br />
${EndIf}You can also probe PROCESSOR_ARCHITEW6432 instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dusal</div><div class="date">9th November 2008, 02:45</div></div><div class="posttext">Hello. Please help me. I'm newbee.<br />
<br />
I have i386, ia64, amd64, wow64 different dll files. How can I choose and copy files to system folder?<br />
Can I use it like this?<br />
<br />
SetOutPath &quot;$SYSDIR\&quot;<br />
if (processor==ia64) { File &quot;ia64\kbdmon.dll&quot; }<br />
elseif (processor==amd64) { File &quot;amd64\kbdmon.dll&quot; }<br />
elseif (processor==wow64) { File &quot;wow64\kbdmon.dll&quot; }<br />
else { File &quot;i386\kbdmon.dll&quot; }<br />
<br />
If yes please help me how to I write in my *.nsi file. I don't know much about programming language.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>