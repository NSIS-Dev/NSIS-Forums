<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Background Image ... .OnGUIEnd ..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Background Image ... .OnGUIEnd ... NSIS Discussion" />
	
	<title> Background Image ... .OnGUIEnd ... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Background Image ... .OnGUIEnd ...</div>
<hr />
<div class="pda"><a href="t-175472.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=175472">Background Image ... .OnGUIEnd ...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">5th April 2004, 23:21</div></div><div class="posttext">I want a background in my installer. And it works .. because I tested it. But if I insert it to my &quot;good&quot; script then it will say that Function .onGUIInit allready is used ... but It isnt ... Could somebody help me ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">5th April 2004, 23:54</div></div><div class="posttext">I mean &quot;.onGUIInit&quot; sorry :)<br />
<br />
insted of .OnGUIEnd in the name of this topic</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">6th April 2004, 00:10</div></div><div class="posttext">This usually happens when certain MUI defines are defined in the wrong order.  Check the MUI readme for any hints on where the problem might be.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">6th April 2004, 09:21</div></div><div class="posttext">Ok . Thanks Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">6th April 2004, 10:00</div></div><div class="posttext">.. I have checked it .. but I can't see a solution .. please help ... When I use this script .<br />
<br />
<br />
; script<br />
;..................................<br />
;BACKGROUND-IMAGE-SCRIPT<br />
;.................................<br />
<br />
;Languages<br />
<br />
;  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;French&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;German&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Spanish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;SimpChinese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;TradChinese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Japanese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Korean&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Italian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Dutch&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Danish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Swedish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Norwegian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Finnish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Greek&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Russian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Portuguese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;PortugueseBR&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Polish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Ukrainian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Czech&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Slovak&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Croatian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Bulgarian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Hungarian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Thai&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Romanian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Macedonian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Estonian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Turkish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Lithuanian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Catalan&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Slovenian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Serbian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Arabic&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Hebrew&quot;<br />
 <br />
<br />
Then It will compile without any errors<br />
<br />
but when I delete the ; before the !insertmacros then It will give a error saying <br />
<br />
 <br />
!insertmacro: MUI_LANGUAGE<br />
Error: Function named &quot;.onGUIInit&quot; already exists.<br />
Error in macro MUI_FUNCTION_GUIINIT on macroline 2<br />
Error in macro MUI_INSERT on macroline 11<br />
Error in macro MUI_LANGUAGEFILE_BEGIN on macroline 4<br />
!include: error in script: &quot;C:\Program Files\NSIS\Contrib\Modern UI\Language files\English.nsh&quot; on line 9<br />
Error in macro MUI_LANGUAGE on macroline 5<br />
Error in script &quot;C:\Documents and Settings\VegetaS an\Bureaublad\backgroundtest.nsi&quot; on line 172 -- aborting creation process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">6th April 2004, 12:52</div></div><div class="posttext">The MUI uses .onGUIInit itself, so your script cannot use .onGUIInit - instead you need to use a MUI define. This is described in the MUI manual:<br />
<br />
Customize Modern UI Functions<br />
<br />
If you want add your own code to functions inserted by the Modern UI, such as the .onGUIInit function and the Page functions, create your own function and let the Modern UI functions call them. Use the defines to define the name of your functions.<br />
<br />
Example:<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
<br />
Function myGUIInit<br />
  ...your own code...<br />
FunctionEnd<br />
<br />
General Custom Functions<br />
<br />
These defines should be set before inserting the language macros.<br />
<br />
MUI_CUSTOMFUNCTION_GUIINIT function<br />
MUI_CUSTOMFUNCTION_UNGUIINIT function<br />
MUI_CUSTOMFUNCTION_ABORT function<br />
MUI_CUSTOMFUNCTION_UNABORT function</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">6th April 2004, 13:26</div></div><div class="posttext">So this would be right ....<br />
<br />
<br />
<br />
  !define MUI_CUSTOMFUNCTION_GUIINIT myGUIInit<br />
  !define MUI_CUSTOMFUNCTION_UNGUIINIT myGUIInit<br />
  !define MUI_CUSTOMFUNCTION_ABORT myGUIInit<br />
  !define MUI_CUSTOMFUNCTION_UNABORT myGUIInit<br />
<br />
;  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;French&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;German&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Spanish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;SimpChinese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;TradChinese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Japanese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Korean&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Italian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Dutch&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Danish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Swedish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Norwegian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Finnish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Greek&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Russian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Portuguese&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;PortugueseBR&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Polish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Ukrainian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Czech&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Slovak&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Croatian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Bulgarian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Hungarian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Thai&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Romanian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Macedonian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Estonian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Turkish&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Lithuanian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Catalan&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Slovenian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Serbian&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Arabic&quot;<br />
;  !insertmacro MUI_LANGUAGE &quot;Hebrew&quot;<br />
<br />
Function myGUIInit<br />
<br />
<br />
<br />
; THE BACKGROUND <br />
<br />
<br />
<br />
<br />
!define DEBUG<br />
!macro GetReturnValue<br />
!ifdef DEBUG<br />
	Pop $R9<br />
	StrCmp $R9 success +2<br />
		DetailPrint &quot;Error: $R9&quot;<br />
!endif<br />
!macroend<br />
<br />
<br />
<br />
<br />
	InitPluginsDir<br />
	# lets extract some bitmaps...<br />
	File /oname=$PLUGINSDIR\1.bmp &quot;C:\1.bmp&quot;<br />
	;File /oname=$PLUGINSDIR\2.bmp &quot;${NSISDIR}\Contrib\Graphics\Checks\modern.bmp&quot;<br />
<br />
!ifdef DEBUG<br />
	# turn return values on if in debug mode<br />
	BgImage::SetReturn /NOUNLOAD on<br />
!endif<br />
<br />
	BgImage::SetBg /NOUNLOAD /GRADIENT 0 0x80 0 0x80 0 0<br />
	!insertmacro GetReturnValue<br />
        BgImage::AddImage /NOUNLOAD $PLUGINSDIR\1.bmp 0 0<br />
	!insertmacro GetReturnValue<br />
  ;      BgImage::AddImage /NOUNLOAD /TRANSPARENT 255 0 255 $PLUGINSDIR\1.bmp 150 16<br />
	!insertmacro GetReturnValue<br />
	CreateFont $R0 &quot;Comic Sans MS&quot; 50 700<br />
      ;  BgImage::AddText /NOUNLOAD &quot;Testing 1... 2... 3...&quot; $R0 0 0 255 48 48 798 198<br />
	!insertmacro GetReturnValue<br />
      ;  BgImage::AddText /NOUNLOAD &quot;Testing 1... 2... 3...&quot; $R0 0 255 0 52 52 802 202<br />
	!insertmacro GetReturnValue<br />
     ;   BgImage::AddText /NOUNLOAD &quot;Testing 1... 2... 3...&quot; $R0 255 0 0 50 50 800 200<br />
	!insertmacro GetReturnValue<br />
        BgImage::Redraw /NOUNLOAD<br />
FunctionEnd<br />
<br />
<br />
It compiles but doesnt work :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th April 2004, 14:29</div></div><div class="posttext">Why do you set all custom function to the same GUI initialization functions? You only need GUIINIT and UNGUIINIT.<br />
<br />
As you can find in the readme, these defines should be set before inserting the language macros.<br />
<br />
Using language macros is required.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>