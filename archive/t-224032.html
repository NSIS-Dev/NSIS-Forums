<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Str2Bin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Str2Bin NSIS Discussion" />
	
	<title> Str2Bin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Str2Bin</div>
<hr />
<div class="pda"><a href="t-224032.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=224032">Str2Bin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">15th August 2005, 19:46</div></div><div class="posttext">Hi,<br />
<br />
has anyone an idea to convert a string into it's binary values?<br />
<br />
I need to set the username for ms office and its written as Binary Registry Key.<br />
<br />
My problem is that parsing through an input variable byte by byte won't help me because nsis Strcpy isn't case sensitive.<br />
<br />
regards<br />
<br />
flizebogen</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">15th August 2005, 21:38</div></div><div class="posttext">1)To convert an entire string into decimal numbers, you can use the CharToASCII Function (http://nsis.sf.net/wiki/CharToASCII). It's case insensitive, so it will help you in your cause.<br />
<br />
2)To convert a decimal number to a hexadecimal number to be used in the hex2bin (said on step 3) use:<br />
<br />
IntFmt $var &quot;%08x&quot; $var<br />
<br />
3)To convert an hexadecimal number into a binary number, you  need to call hex2bin (found in CreateBitmap Function Thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=177306&amp;highlight=Bitmap+Create)). Probably it has limitations, like the number can't have the &quot;0x&quot; string appended to the start of the number, and 8 digits length limit (the function is too old for me to remember how to use it...). I re-posted the function here for reference:<br />
<br />
<br />
;Hex2Bin<br />
<br />
;Converts a hexadecimal number string to binary.<br />
<br />
;Push &quot;HexadecimalNumber&quot;<br />
;Call bin2dec<br />
;Pop &quot;BinaryNumberVariable&quot;<br />
<br />
Function Hex2Bin<br />
<br />
Push $0<br />
Exch<br />
Exch $1<br />
Exch<br />
Push $2<br />
Push $3<br />
Push $4<br />
Push $5<br />
Push $6<br />
Push $7<br />
<br />
; Set/Get Source Hex Number<br />
<br />
StrLen $0 $1<br />
StrCpy $3 $0<br />
<br />
; loop - Get 1 Letter per loop from right for process<br />
NextLetter:<br />
StrCpy $4 '$5 $4'<br />
StrCpy $5 ''<br />
<br />
StrCmp $3 '0' End<br />
<br />
IntOP $3 $3 - 1<br />
StrCpy $2 $1 1 $3<br />
StrCpy $6 '256'<br />
<br />
IntOP $6 $6 / 2<br />
IntOP $7 0x$2 &amp; $6<br />
IntCmp $7 '0' +2<br />
 StrCpy $7 '1'<br />
StrCpy $5 '$5$7'<br />
StrCmp $6 '1' NextLetter -5<br />
<br />
End:<br />
<br />
StrCpy $1 $4 &quot;&quot; 4<br />
StrCpy $1 $1 4<br />
<br />
Pop $7<br />
Pop $6<br />
Pop $5<br />
Pop $4<br />
Pop $3<br />
Pop $2<br />
Pop $0<br />
Exch $1<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">16th August 2005, 06:07</div></div><div class="posttext">Here's another solution using AfrowUk's NSISArray plugin (http://nsis.sourceforge.net/wiki/File:NSISArray.zip).  (see attached.)<br />
<br />
here's the overview of the steps:<br />
1.  Create an array containing the binary equivalents of each hex number, starting with zero. (0000,0001,0010,etc.)<br />
<br />
2. The Hex2Bin function then converts the number to hex using IntFmt.  (This ensures that the number is really hex.  If an invalid string is used, then IntFmt converts it to zero)<br />
<br />
3.  Now, read each hex digit one at a time (left to right).  Convert the digit back to a number.  This digit becomes the index of the array.  Substitue the array's value.  concatenate all values and you get the binary number. <br />
<br />
It's hard to explain, so have a look at the sample script.  (You need to have the NSISArray installed.)<br />
<br />
using this method, you are limited to a 64-digit binary number, but that should more than adequate for what you'd ever need! The only caveat is that you may have to trim off the excess zeros at the beginning of the number.<br />
<br />
Let me know if you find this useful. (Perhaps when I get time, I'll add a function to strip off the leading zeros and add it to the Wiki...)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">16th August 2005, 08:53</div></div><div class="posttext">I was finally able to convert the characters using deguix logiclib and now i'm failing to add it to the registry :-)<br />
<br />
WriteRegBin only accepts hardcoded values. No Variables allowed.<br />
<br />
The only solution i see is to create a valid .reg file, and than to execute regedit silently. What a hack.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">16th August 2005, 14:11</div></div><div class="posttext">There is a Registry plug-in (http://forums.winamp.com/showthread.php?s=&amp;postid=1746990&amp;highlight=Registry+plugin#post1746990) by Instructor. I never tested it, but it as it says in the feature list, it can write any type of data to registry.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">18th August 2005, 00:33</div></div><div class="posttext">http://forums.winamp.com/showthread.php?postid=1753856#post1753856<br />
<br />
see:<br />
registry::StrToHex<br />
registry::Write</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">18th August 2005, 07:55</div></div><div class="posttext">@Instructor<br />
<br />
Your Plugin enhancements are really cool. The key i want to store in Registry is Unicode. Unfortunately Unicode is not supported by NSIS. That means the content of my variable is cut after the first byte. And ideas how to store a unicode string that needs to be converted to BIN in registry?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">19th August 2005, 09:41</div></div><div class="posttext">As I know NSIS variable can't hold unicode string, because one of two bytes often equal to &quot;00&quot; (end of string). <br />
To store a unicode string in registry probably you need stand alone program with unicode support.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th August 2005, 12:37</div></div><div class="posttext">The System plug-in can handle Unicode strings. Just allocate a buffer instead of using internal variables.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>