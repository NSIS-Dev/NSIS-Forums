<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Section / SectionGroup order of execution, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Section / SectionGroup order of execution NSIS Discussion" />
	
	<title> Section / SectionGroup order of execution [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Section / SectionGroup order of execution</div>
<hr />
<div class="pda"><a href="t-244601.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=244601">Section / SectionGroup order of execution</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">25th April 2006, 21:18</div></div><div class="posttext">Hi There,<br />
<br />
I was wondering if there was a way to override the Section or SectionGroup order of execution without re-arranging things.  From what I have seen and read, Sections are executed in the order they appear in the script.<br />
<br />
Here's a long-winded description of whats going on - in case my above question isnt clear:<br />
<br />
I have a script that sets up a queue of pages like this: (I oversimplified the following to save space)<br />
------------------------------------------<br />
Page components<br />
Page directory ; window to select main install dir<br />
Page directory ; window to select secondary install dir<br />
Page instfiles<br />
------------------------------------------<br />
<br />
Then I setup my SectionGroups and Sections like this:<br />
------------------------------------------<br />
SectionGroup &quot;base components&quot;<br />
  Section &quot;base config files&quot;<br />
  SectionEnd<br />
  Section &quot;base cgi scripts&quot;<br />
  SectionEnd<br />
  Section &quot;base fast-cgi scripts&quot;<br />
  SectionEnd<br />
SectionGroupEnd<br />
SectionGroup &quot;3rd party components&quot;<br />
  Section &quot;apache webserver&quot;<br />
  SectionEnd<br />
  Section &quot;activeperl&quot;<br />
  SectionEnd<br />
SectionGroupEnd<br />
------------------------------------------<br />
<br />
Based on this configuration, what happens is:<br />
- User selects components<br />
*if any base compoents were selected:<br />
  - install base components<br />
*if any 3rd party components were selected:<br />
  - install 3rd party components<br />
Finish<br />
<br />
<br />
What I want to happen is:<br />
- User selects components<br />
*if any 3rd party components were selected:<br />
  - install 3rd party components<br />
*if any base components were selected:<br />
  - prompt user to select target dirs for each selection<br />
  - install base components<br />
- Finish<br />
<br />
<br />
I am pretty sure puting the 3rd Party selection group above the base component group would do this ... BUT  I really want the base components at the top of the select list.<br />
<br />
Thanks,<br />
Nick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">25th April 2006, 21:36</div></div><div class="posttext">I found this thread after a little searching:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=228983&amp;highlight=section+order<br />
<br />
I'm not sure I completely get what is being described here and if I do, I was kind of hoping there was a cleaner way to do this in NSIS, since its almost the exact kluge that innoSetup relies on to accomplish this and the reason I came to NSIS.  I really like NSIS btw - the eclipse plugin is very nice!<br />
<br />
So anyway, if I understand what was being said, I strip out all of the executing code from my sections and replace them with code that sets flags so I know if that section was selected.<br />
<br />
I then create a hidden section that executes last, inside of which I evaluate each flag and conditionally run the code I originally had in the sections themselves.<br />
<br />
Is that the cleanest solution possible?<br />
<br />
Thanks in advance!<br />
<br />
Nick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">25th April 2006, 22:16</div></div><div class="posttext">Ok...I tried to implement the flags idea...and it looks like I couldnt do it on my own...im not so sure the flags suggestion will work, at least the way currently I understand it.<br />
<br />
My best guess is that Page instfiles is what is controlling the 'when' of things.  I'll keep reading and checking back here to see if anybody has some advice for me.<br />
<br />
Thanks,<br />
Nick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">26th April 2006, 00:57</div></div><div class="posttext">I found a solution - part of the problem was my oversight of something pretty obvious: my particular problem ended up having nothing to do with the order of sections and sectiongroups and everything to do with pages.<br />
<br />
I solved my particular issue by registering a callback for leave_function with the components page.  In the callback I extract and install the 3rd party components, if any were selected.<br />
<br />
Kinda ugly but at least it works.<br />
<br />
Nick</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>