<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Load existing Language Strings into custom page., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Load existing Language Strings into custom page. NSIS Discussion" />
	
	<title> Load existing Language Strings into custom page. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Load existing Language Strings into custom page.</div>
<hr />
<div class="pda"><a href="t-343836.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=343836">Load existing Language Strings into custom page.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MeRuud</div><div class="date">6th April 2012, 10:25</div></div><div class="posttext">Hello all..<br />
<br />
I am trying to create a custom page and load already existing language strings into it. For example &quot;MUI_TEXT_WELCOME_INFO_TITLE&quot;.<br />
<br />
I am using the following code, but it doesn't seem to work.<br />
;--------------------------------<br />
;Include all libs<br />
<br />
  !include &quot;MUI.nsh&quot; ; --- MUI 1.66 compatible<br />
  !include &quot;LogicLib.nsh&quot; ; --- Include logic statement capabilities<br />
  !include &quot;nsDialogs.nsh&quot; ; --- Include custom pages capabilities<br />
<br />
;--------------------------------<br />
;General Information<br />
<br />
  Name <br />
  BrandingText <br />
  OutFile <br />
  InstallDir <br />
<br />
  Var Dialog<br />
  Var Label<br />
  Var mui.WelcomePage.Title<br />
  Var mui.WelcomePage.Title.Font<br />
  Var mui.WelcomePage.Text    <br />
<br />
;--------------------------------<br />
;Define images and include pages<br />
<br />
  !define MUI_ABORTWARNING<br />
  Page custom nsDialogsPage<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
<br />
;--------------------------------<br />
;Languages	<br />
<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot; ;first language is the default language<br />
<br />
  !insertmacro MUI_DEFAULT MUI_WELCOMEPAGE_TITLE &quot;$(MUI_TEXT_WELCOME_INFO_TITLE)&quot;<br />
  !insertmacro MUI_DEFAULT MUI_WELCOMEPAGE_TEXT &quot;$(MUI_TEXT_WELCOME_INFO_TEXT)&quot;<br />
  <br />
  !insertmacro MUI_UNSET MUI_WELCOMEPAGE_TITLE<br />
  !insertmacro MUI_UNSET MUI_WELCOMEPAGE_TITLE_3LINES<br />
  !insertmacro MUI_UNSET MUI_WELCOMEPAGE_TEXT<br />
<br />
;--------------------------------<br />
;Custom Page - Welcome<br />
Function nsDialogsPage<br />
<br />
        nsDialogs::Create 1018<br />
        Pop $Dialog<br />
<br />
        ${NSD_CreateLabel} 0 0 100% 12u &quot;Hello, welcome to nsDialogs!&quot;<br />
        Pop $Label<br />
<br />
    ;Positiong of controls<br />
    ;Title    <br />
    !ifndef MUI_WELCOMEPAGE_TITLE_3LINES<br />
      !define MUI_WELCOMEPAGE_TITLE_HEIGHT 28<br />
    !else<br />
      !define MUI_WELCOMEPAGE_TITLE_HEIGHT 38<br />
    !endif<br />
    <br />
    ;Text<br />
    ;17 = 10 (top margin) + 7 (distance between texts)<br />
    !define /math MUI_WELCOMEPAGE_TEXT_TOP 17 + ${MUI_WELCOMEPAGE_TITLE_HEIGHT}<br />
<br />
    ;Title<br />
    ${NSD_CreateLabel} 120u 10u 195u ${MUI_WELCOMEPAGE_TITLE_HEIGHT}u &quot;$(MUI_WELCOMEPAGE_TITLE)&quot;<br />
    Pop $mui.WelcomePage.Title<br />
    CreateFont $mui.WelcomePage.Title.Font &quot;$(^Font)&quot; &quot;12&quot; &quot;700&quot;<br />
    SendMessage $mui.WelcomePage.Title ${WM_SETFONT} $mui.WelcomePage.Title.Font 0<br />
<br />
    ;Welcome text<br />
    ${NSD_CreateLabel} 120u ${MUI_WELCOMEPAGE_TEXT_TOP}u 195u 130u &quot;${MUI_WELCOMEPAGE_TEXT}&quot;<br />
    Pop $mui.WelcomePage.Text<br />
<br />
    !insertmacro MUI_UNSET MUI_WELCOMEPAGE_TITLE_HEIGHT<br />
    !insertmacro MUI_UNSET MUI_WELCOMEPAGE_TEXT_TOP<br />
<br />
        nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
<br />
Section<br />
SectionEnd<br />
<br />
This only displays: &quot;$(MUI_WELCOMEPAGE_TITLE)&quot; and &quot;${MUI_WELCOMEPAGE_TEXT}&quot;.<br />
If I replace &quot;${MUI_WELCOMEPAGE_TEXT}&quot; with (as according to the manual) $(^MUI_TEXT_WELCOME_INFO_TEXT) it stays blank.<br />
<br />
Am I missing something?<br />
<br />
All I am trying to do is recreate the Welcome page but include a piece of text. Because as far as I can't include a custom text string into the welcome page?<br />
MUI_TEXT_WELCOME_INFO_TITLE<br />
 *Some Custom Text*<br />
MUI_TEXT_WELCOME_INFO_TEXT<br />
<br />
Thanks in advanced,<br />
Ruud</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MeRuud</div><div class="date">6th April 2012, 11:09</div></div><div class="posttext">A different forum recommended to do the following, they said this should add a box to the welcome page. However it does not display anything<br />
<br />
<br />
  !define MUI_PAGE_CUSTOMFUNCTION_SHOW MyWelcomeShow<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
<br />
;--------------------------------<br />
;Custom Page - Welcome<br />
<br />
  Function MyWelcomeShow<br />
	${NSD_CreateLabel} 100u 100u 50% 100u &quot;TEXT&quot;<br />
	Pop $0<br />
  FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
<br />
And the following created a new custom page (not adding to it).<br />
<br />
  !define MUI_PAGE_CUSTOMFUNCTION_SHOW MyWelcomeShow<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
<br />
;--------------------------------<br />
;Custom Page - Welcome<br />
<br />
  Function MyWelcomeShow<br />
	nsDialogs::Create 1044<br />
        Pop $Dialog<br />
<br />
	${NSD_CreateLabel} 100u 100u 50% 100u &quot;TEXT&quot;<br />
	Pop $0<br />
<br />
	nsDialogs::Show<br />
  FunctionEnd<br />
<br />
Section<br />
SectionEnd<br />
<br />
<br />
<br />
Both results are as expected and as described in the manual.. <br />
But maybe they have misquoted something? And there is a possibility to add text into the welcome page? (without editing the language files)<br />
<br />
Thanks,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th April 2012, 14:39</div></div><div class="posttext">You have two mistakes:<br />
1. You need to use MUI2.nsh if you are using nsDialogs (MUI.nsh uses old InstallOptions for its Welcome/Finish pages).<br />
2. You don't need to do nsDialogs::Create/nsDialogs::Show; MUI2 already does that.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MeRuud</div><div class="date">6th April 2012, 16:02</div></div><div class="posttext">Thank you!<br />
Can't believe I missed that.<br />
<br />
Thanks,<br />
Ruud</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>