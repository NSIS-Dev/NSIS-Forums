<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" CopyFiles IfErrors, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  CopyFiles IfErrors NSIS Discussion" />
	
	<title> CopyFiles IfErrors [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  CopyFiles IfErrors</div>
<hr />
<div class="pda"><a href="t-236281.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236281">CopyFiles IfErrors</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nlpaufr</div><div class="date">24th January 2006, 13:11</div></div><div class="posttext">Hello!<br />
<br />
Can somebody please help me?<br />
I'm trying to find out why my CopyFiles statement generates an error in the logging:<br />
<br />
CopyFiles &quot;E:\sattmate\target\Patches\Patch_2\Backup\FILES\GLOBAL\transport_handler.txt&quot;-&gt;&quot;E:\sattmate\user\nlpaufr&quot;<br />
Call: 2164<br />
detailprint: File E:\sattmate\user\nlpaufr\transport_handler.txt could not be installed<br />
<br />
My code is:<br />
    ExpandEnvStrings $MY_TEMP ${TO_FOLDER_NAME}<br />
    ClearErrors<br />
    CopyFiles /FILESONLY /SILENT $TARGET_FOLDER_PATCH\${FROM_FOLDER_NAME}\${FILE_NAME} &quot;$MY_TEMP&quot;<br />
    IfErrors 0 +2<br />
      !InsertMacro Logging &quot;File $MY_TEMP\${FILE_NAME} could not be installed&quot;<br />
<br />
<br />
I've been searching the NSIS forum for help on this, but I can't seem to find a thread that explains why my IfErrors statement doesn't do what I expect.<br />
By the way, how do I find out what the actual error is? I found a thread about kernel32.dll but I don't understand how that is supposed to work. The results I get are numbers, not texts...<br />
<br />
Many thanks,<br />
<br />
Pauline</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nlpaufr</div><div class="date">24th January 2006, 14:23</div></div><div class="posttext">I actually found out what the problem was myself!<br />
The !InsertMacro statement just below the IfErrors is what made it all go wrong. The jump from the Iferrors jumps into the Logging macro statements, instead of to the statements after the Logging Macro.:tinfoil:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">24th January 2006, 14:36</div></div><div class="posttext">yep, u need to use absolute jumps with labels rather than relative jumps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nlpaufr</div><div class="date">24th January 2006, 14:41</div></div><div class="posttext">I changed the IfErrors statement to<br />
<br />
${If} ${Errors}<br />
  !InsertMacro Logging &quot;File $MY_TEMP\${FILE_NAME} could not be installed&quot;<br />
${EndIf}</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>