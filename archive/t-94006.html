<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MBCS patches, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MBCS patches NSIS Discussion" />
	
	<title> MBCS patches [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MBCS patches</div>
<hr />
<div class="pda"><a href="t-94006.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=94006">MBCS patches</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Sangpil Yoon</div><div class="date">10th July 2002, 06:02</div></div><div class="posttext">I found out that if I use Korean characters in the Name property and doesn't specify the Caption, or if I use Korean chars in the InstallDir, the installer messes up the display.<br />
Here are the patches. I want these to be accepted so that I won't have to apply the same patches every time new version is released. :)<br />
<br />
diff -r -C2 src1/build.cpp src2/build.cpp<br />
*** src1/build.cpp	Wed Jul 10 12:16:52 2002<br />
--- src2/build.cpp	Thu Jul  4 11:47:46 2002<br />
***************<br />
*** 1268,1272 ****<br />
      char buf[1024];<br />
      wsprintf(buf,&quot;%s Setup&quot;,build_strlist.get()+build_header.common.name_ptr);<br />
!     build_header.common.caption_ptr=add_string_main(buf,0);<br />
    }<br />
   <br />
--- 1268,1272 ----<br />
      char buf[1024];<br />
      wsprintf(buf,&quot;%s Setup&quot;,build_strlist.get()+build_header.common.name_ptr);<br />
!     build_header.common.caption_ptr=add_string_main(buf);<br />
    }<br />
   <br />
diff -r -C2 src1/exehead/Ui.c src2/exehead/Ui.c<br />
*** src1/exehead/Ui.c	Wed Jul 10 12:17:55 2002<br />
--- src2/exehead/Ui.c	Thu Jul  4 18:10:19 2002<br />
***************<br />
*** 511,514 ****<br />
--- 511,515 ----<br />
          const char *post_str;<br />
          const char *p;<br />
+ 				char proc_str[NSIS_MAX_STRLEN];<br />
          IMalloc *m;<br />
  				SHGetPathFromIDList( idlist, name );<br />
***************<br />
*** 519,523 ****<br />
            m-&gt;lpVtbl-&gt;Release(m);<br />
          }<br />
!         post_str=GetStringFromStringTab(g_inst_header-&gt;install_directory_ptr);<br />
  <br />
          p=scanendslash(post_str);<br />
--- 520,525 ----<br />
            m-&gt;lpVtbl-&gt;Release(m);<br />
          }<br />
!         process_string_fromtab(proc_str, g_inst_header-&gt;install_directory_ptr);<br />
!         post_str = proc_str;<br />
  <br />
          p=scanendslash(post_str);</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">10th July 2002, 16:05</div></div><div class="posttext">Why do you need to change:<br />
<br />
build_header.common.caption_ptr=add_string_main(buf,0);<br />
<br />
to<br />
<br />
build_header.common.caption_ptr=add_string_main(buf);</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">10th July 2002, 18:43</div></div><div class="posttext">as Sangpil Yoon, when using some french special caracters like ç é è à, these are just skiped in the title bar (using Name or  Compiling makensis using french strings) !<br />
I hope this will be corrected in the news release :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">10th July 2002, 19:26</div></div><div class="posttext">-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">10th July 2002, 20:01</div></div><div class="posttext">Nevermind my previous post.  I see why that is not working.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">10th July 2002, 20:10</div></div><div class="posttext">I this could be corrected, this would be a great thing for me :)<br />
thanks a lot about that :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">10th July 2002, 20:19</div></div><div class="posttext">Try my updated version of NSIS 2.0a1 here (http://www.robertrainwater.com/nsis/nsis20a1.exe).  Let me know if this fixes the problems.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">10th July 2002, 20:31</div></div><div class="posttext">corrected in the title bar, but another bug has appear in the select directory caption !<br />
When using<br />
Name &quot;Yahoo! 5 é fr&quot;<br />
<br />
This displays &quot;Select the directory to install Yahoo! 5 ÿé fr in :&quot;<br />
:D hey hey, still some work, but thing are better ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>