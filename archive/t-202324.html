<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" create a form that allows the installer to change setoutpath, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  create a form that allows the installer to change setoutpath NSIS Discussion" />
	
	<title> create a form that allows the installer to change setoutpath [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  create a form that allows the installer to change setoutpath</div>
<hr />
<div class="pda"><a href="t-202324.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202324">create a form that allows the installer to change setoutpath</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dariusa</div><div class="date">17th December 2004, 17:23</div></div><div class="posttext">How do i create a form that allows the Installer to change the output path of each option selected?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">17th December 2004, 23:22</div></div><div class="posttext">InstallOptions, but better use the free form page creation from HM NSIS edit... also see info about dirrequest.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th December 2004, 11:18</div></div><div class="posttext">It would probably be easier to use multiple Directory pages (the same amount as your Sections).<br />
You'd call Abort in the page's Pre function's if a Section wasn't selected (using the SectionGetFlags).<br />
For all your Directory page's you should use PageEx, and in each PageEx block use DirVar to specify the variable for that Directory.<br />
<br />
Example:<br />
Var Outpath1<br />
Var Outpath2<br />
<br />
PageEx directory<br />
 DirVar $Outpath1<br />
 DirText &quot;Choose Install Location for Section 1&quot; &quot;Setup will install \<br />
Section 1 to the following folder$\r$\n$\r$\nTo install to a different \<br />
folder, click Browse and select another folder.&quot; &quot;&quot; &quot;&quot;<br />
 PageCallbacks directory1_Pre &quot;&quot; &quot;&quot;<br />
PageExEnd<br />
<br />
Function directory1_Pre<br />
 SectionGetFlags ${Section1} $R0<br />
 StrCmp $R0 1 +2 ;Section 1 is selected<br />
  Abort<br />
FunctionEnd<br />
<br />
PageEx directory<br />
 DirVar $Outpath2<br />
 DirText &quot;Choose Install Location for Section 2&quot; &quot;Setup will install \<br />
Section 2 to the following folder$\r$\n$\r$\nTo install to a different \<br />
folder, click Browse and select another folder.&quot; &quot;&quot; &quot;&quot;<br />
 PageCallbacks directory2_Pre &quot;&quot; &quot;&quot;<br />
PageExEnd<br />
<br />
Function directory2_Pre<br />
 SectionGetFlags ${Section2} $R0<br />
 StrCmp $R0 1 +2 ;Section 2 is selected<br />
  Abort<br />
FunctionEnd<br />
<br />
Section &quot;Section 1&quot; Section1<br />
 SetOutPath &quot;$Outpath1&quot;<br />
  File &quot;blah.txt&quot;<br />
 SetOutPath &quot;$Outpath1\otherblah&quot;<br />
  File &quot;otherblah.txt&quot;<br />
SectionEnd<br />
<br />
Section &quot;Section 2&quot; Section2<br />
 SetOutPath &quot;$Outpath2&quot;<br />
  File &quot;grky.txt&quot;<br />
 SetOutPath &quot;$Outpath2\othergrky&quot;<br />
  File &quot;othergrky.txt&quot;<br />
SectionEnd<br />
<br />
Should work nicely :)<br />
Not sure about using it with Modern UI though...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">18th December 2004, 12:39</div></div><div class="posttext">Every option to separate directory - this looks like few applications in the package (Acrobat Reader, IE 6.0 and others) - if so, you can write super installer with options and few mini-installers - for every application, I saw sample somewhere on the forum pages. Hide 'super' when 'mini' is running.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dariusa</div><div class="date">19th December 2004, 03:33</div></div><div class="posttext">AFROW <br />
<br />
I need a reply asap...<br />
Is there a way for :<br />
<br />
1. the sections to show on one window [standard nsis interface]<br />
2. the decription on right as your select them[standard nsis interface<br />
3. directory dialog at hte bottom below the selection[just the attached pic]<br />
3a. When you change the selection the setoutpath changes in the directory dialog and you can click the browse button to chang the directory of that selection on the same page.<br />
<br />
I have over 10 items and don't want the installer to page through each selection to change the browse directory of each selection. <br />
I would love the installer to allow the End User to change the directory information that pops in the directory dialog based on the selection he has highlighted on the same page.<br />
<br />
See the picture i included. I am not sure how to get this done. Need some help.<br />
<br />
Thanx in advance.<br />
<br />
Darius</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th December 2004, 15:53</div></div><div class="posttext">Hmm this is a very very big task, even for someone like myself.<br />
<br />
There is no default behaviour for any of this. NSIS' directory dialogue is standardised as being seperate as no one has ever requested for seperate directories for each Section.<br />
<br />
If you were to do any of this you'd firstly need to use Modern UI (which would make the above code unworkable).<br />
Modern UI allows for Section descriptions. NSIS' classic UI does not.<br />
<br />
To add the directory controls like you showed on the attached image, you would have to write a plugin. You can hack Modern UI's UI exe with Resource Hacker and add them yourself, but that would be useless as you cannot have 'clickable' buttons on non InstallOptions dialogues without modifying NSIS' source code (you won't be able to have a 'Change' button on there).<br />
<br />
I'm sorry but you will have to either use my solution or use multiple installers for each program/Section you want to install. You can have 1 main installer with the components page. In each Section of this main installer, the secondary installers are uncompressed and executed (using say ExecWait). They'll just have the basic directory page and InstFiles page.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dariusa</div><div class="date">20th December 2004, 21:13</div></div><div class="posttext">How do I assign a default variable to dirrequest?<br />
How do I assign the directory the user selected by using the dirrequest browse button to the setoutpath?<br />
<br />
Is there a way to activate OnClick for a checkbox? I want to enable or disable a box based the user checking the checkbox</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 00:02</div></div><div class="posttext">Use WriteINIStr to manipulate your InstallOptions INI file before you call InstallOptions::dialog<br />
Use ReadINIStr to read values from your INI file.<br />
Use the SelectSection macro in Sections.nsh to select Sections on the Components page, and the UnselectSection macro to unselect them.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dariusa</div><div class="date">21st December 2004, 05:54</div></div><div class="posttext">Can  you send me an example or sample script that I can use? I would very much appreciate it.<br />
<br />
Thanx in advance.<br />
Darius</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2004, 11:54</div></div><div class="posttext">There are examples in your Examples, and Contrib\InstallOptions folder that contain code for manipulating/reading user input.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>