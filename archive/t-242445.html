<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Copy file directory structure instead of archive into exe, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Copy file directory structure instead of archive into exe NSIS Discussion" />
	
	<title> Copy file directory structure instead of archive into exe [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Copy file directory structure instead of archive into exe</div>
<hr />
<div class="pda"><a href="t-242445.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242445">Copy file directory structure instead of archive into exe</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Chris_J_W</div><div class="date">3rd April 2006, 00:12</div></div><div class="posttext">Hi, I'm fairly new to NSIS etc, and I've got a question.  I notice that a lot of the time spent by my installer is on verifying the exe file (as it gets quite large with 400mb's of files archived in there).  Anyway, what I was wondering is if there's an option you can set that basically just copies a directory structure from the source location (in this case, the CD drive) to the install directory rather than adding all the files into the exe file when the script is compiled, and then the installer extracting them from there?<br />
<br />
I imagine this would significantly reduce the installation verification time, and also the file copying stage would be a little quicker as it is just a straight copy rather than extract then copy.<br />
<br />
Thanks for any help :D <br />
<br />
- Chris</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">3rd April 2006, 00:28</div></div><div class="posttext">You have to get the path to your source files, and the path of where you want to install your files, then use CopyFiles (4.9.3.2 in nsis manual) :).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd April 2006, 18:35</div></div><div class="posttext">You can also disable installer verification using CRCCheck off.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chris_J_W</div><div class="date">4th April 2006, 00:47</div></div><div class="posttext">Thanks for your help.  I did see the CopyFiles option, but couldn't see an obvious way of finding where the CD drive is on the system, and hence find where the source files would be.<br />
<br />
Disabling the CRC Check should provide enough of a boost though.  I didn't notice that one before, so thanks  :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">4th April 2006, 01:49</div></div><div class="posttext">Useful with $EXEDIR if you want to copy from installation media, or to copy from one place to another on the system.I am pretty sure $EXEDIR refers to where the installer .exe is, because that would mean the installer is on the cd, so your source files would be like:CopyFiles &quot;$EXEDIR\sourcefiles\*.*&quot; &quot;$INSTDIR&quot; Here is a working example:<br />
Name &quot;CopyFiles test&quot;<br />
OutFile &quot;CopyFiles-Test.exe&quot;<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Section &quot;Files&quot;<br />
  ;create a file in the exedir to copy<br />
  FileOpen $0 &quot;$EXEDIR\Hi.txt&quot; w<br />
  FileWrite $0 &quot;Test Text&quot;<br />
  FileClose $0<br />
  <br />
  ;copy files in $EXEDIR to hi folder on desktop<br />
  CreateDirectory &quot;$DESKTOP\hi&quot;<br />
  CopyFiles &quot;$EXEDIR\*.*&quot; &quot;$DESKTOP\hi&quot; ;copies files recursivly<br />
  <br />
  ;prevent installer from closing<br />
  SetAutoClose false<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>