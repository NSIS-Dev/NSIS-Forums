<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ini files language strings, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ini files language strings NSIS Discussion" />
	
	<title> ini files language strings [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ini files language strings</div>
<hr />
<div class="pda"><a href="t-271668.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271668">ini files language strings</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">23rd May 2007, 20:39</div></div><div class="posttext">Hi,<br />
<br />
I am new to NSIS and would like to know how to use laguage strings in ini files using custom pages using the new interface.<br />
<br />
Thanks in advance,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd May 2007, 20:45</div></div><div class="posttext">You should write the language string into the INI file using WriteINIStr or the MUI_INSTALLOPTIONS_WRITE macro at runtime.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">24th May 2007, 08:38</div></div><div class="posttext">Thanks,<br />
<br />
I tried the WriteINISTr command like this:<br />
<br />
Function CustomPageA<br />
<br />
------------------------<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ioA.ini&quot;<br />
   WriteINISTR &quot;ioA.ini&quot; &quot;Field 1&quot; &quot;databasemessage1&quot; dbMessage1<br />
<br />
FunctionEnd<br />
------------------------<br />
<br />
The compiler will give me the following log.<br />
<br />
------------------------<br />
Function: &quot;CustomPageA&quot;<br />
!insertmacro: MUI_HEADER_TEXT<br />
!insertmacro: end of MUI_HEADER_TEXT<br />
!insertmacro: MUI_INSTALLOPTIONS_DISPLAY<br />
!insertmacro: end of MUI_INSTALLOPTIONS_DISPLAY<br />
WriteINIStr: [Field 1] databasemessage1=dbMessage1 in ioA.ini<br />
FunctionEnd<br />
------------------------<br />
<br />
So he sort of have seemed to understood.<br />
<br />
My ini file starts as follows:<br />
<br />
-------------------------<br />
[Settings]<br />
NumFields=5<br />
<br />
[Field 1]<br />
Type=label<br />
Text=databasemessage1<br />
Left=0<br />
Right=-1<br />
Top=0<br />
Bottom=9<br />
<br />
-------------------------<br />
<br />
<br />
So I have no errors but nothing is changed as still have the databasemessage1 displayed on my custum page instead of the contents of the language string dbMessage1.<br />
<br />
<br />
I haven't found any doculentation on the MUI_INSTALLOPTIONS_WRITE macro ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th May 2007, 11:15</div></div><div class="posttext">MUI_INSTALLOPTIONS_WRITE is documented in the MUI readme and is the macro you should use in this case. If you're using the MUI to extract and display the page, you should use it to modify the page.<br />
<br />
If you use WriteINIStr, you must use a full path ($PLUGINSDIR\ioA.ini).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">24th May 2007, 12:21</div></div><div class="posttext">My custompage function is now as follows:<br />
<br />
<br />
--------------------------------<br />
Function CustomPageA<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(TEXT_IO_TITLE)&quot; &quot;$(TEXT_IO_SUBTITLE)&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;ioA.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioA.ini&quot; &quot;Field 1&quot; &quot;databasemessage1&quot; &quot;hi&quot;<br />
<br />
FunctionEnd<br />
--------------------------------<br />
<br />
Again no errors but no results either.<br />
<br />
Is this the right place to put this macro ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th May 2007, 16:11</div></div><div class="posttext">There's not much point writing the language string to the page after displaying it.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">29th May 2007, 15:51</div></div><div class="posttext">The thing is that I tried to place the installoptions_write in many places but all without succes.<br />
<br />
Maybe I should give up.<br />
<br />
<br />
Maarten</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th May 2007, 16:02</div></div><div class="posttext">What is databasemessage1?<br />
It should either be Text or State depending on the control.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">29th May 2007, 16:35</div></div><div class="posttext">Hi<br />
<br />
Thanks for the reply. <br />
<br />
databasemessage1 is what is to be replaced in my ini.file which starts as follows:<br />
<br />
[Settings]<br />
NumFields=5<br />
<br />
[Field 1]<br />
Type=label<br />
Text=databasemessage1<br />
Left=0<br />
Right=-1<br />
Top=0<br />
Bottom=9</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th May 2007, 17:54</div></div><div class="posttext">!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioA.ini&quot; &quot;Field 1&quot; &quot;Text&quot; &quot;hi&quot;<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Maartenmostert</div><div class="date">31st May 2007, 13:10</div></div><div class="posttext">Thanks very much I got it working now</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>