<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to make sure files and directories are deleted after uninstall ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to make sure files and directories are deleted after uninstall ? NSIS Discussion" />
	
	<title> How to make sure files and directories are deleted after uninstall ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to make sure files and directories are deleted after uninstall ?</div>
<hr />
<div class="pda"><a href="t-314046.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314046">How to make sure files and directories are deleted after uninstall ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">klasdfe</div><div class="date">21st October 2009, 03:46</div></div><div class="posttext">In my uninstaller, i try to delete some files and directories.<br />
Ex: <br />
     delete &quot;$INSTDIR\images\*.*&quot;<br />
     rmdir &quot;$INSTDIR\images&quot;<br />
But the result is different each time i run the uninstaller, one time every files and directories are deleted, one time some files and directories are exists. <br />
How to make sure files and directories are deleted after uninstall ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ChocJunkie</div><div class="date">21st October 2009, 10:21</div></div><div class="posttext">If you're sure you want to delete a directory you can use:RMDir /rinstead of using Delete+RMDir on the same directory.<br />
This way you'll delete the directory recursively - all files and subfolders will be deleted too.<br />
<br />
And are you checking for errors after Delete/RMDir?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">21st October 2009, 17:41</div></div><div class="posttext">Also:<br />
If you add the /REBOOTOK switch it will remove the directories on the next reboot if the installer is unable to.<br />
<br />
RMDir /r /REBOOTOK ${DIRTOKILL}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">klasdfe</div><div class="date">22nd October 2009, 07:56</div></div><div class="posttext">Originally posted by ChocJunkie <br />
<br />
<br />
And are you checking for errors after Delete/RMDir? [/B] <br />
How to check for errors ? I think may be when i deleted these files they were in use. <br />
<br />
<br />
If you add the /REBOOTOK switch it will remove the directories on the next reboot if the installer is unable to.<br />
 <br />
<br />
Thank you for your suggestion, i want to know the detail errors when i can't delete a file. In my circumstance, i know that it doesn't necessary to reboot computer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">22nd October 2009, 12:46</div></div><div class="posttext">Try this...<br />
<br />
ClearErrors<br />
RMDir $INSTDIR<br />
IfErrors +1 NoErrors<br />
	DetailPrint &quot;Everytime an error occurs, God kills a kitten.&quot;<br />
NoErrors:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">klasdfe</div><div class="date">26th October 2009, 08:56</div></div><div class="posttext">In order to simple, i try :<br />
<br />
ClearErrors<br />
RMDir /r $INSTDIR<br />
  IfErrors +1 +2<br />
    MessageBox MB_OK &quot;Can't delete&quot;<br />
<br />
I got that message box ! I also reinstall and try to uninstall again, that time no error. Why one time i can't delete a file, and other time i can. How to make the result always the same.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">klasdfe</div><div class="date">10th November 2009, 08:15</div></div><div class="posttext">These files were in used when the uninstaller try to delete.<br />
Try:<br />
RMDir /r /rebootok $INSTDIR<br />
<br />
And after reboot my computer, these files were deleted. In order to avoid reboot, the application must close before the uninstaller run. How do i know if my application was running, and exit it ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">10th November 2009, 08:46</div></div><div class="posttext">you can implement a DDE server in your application (quite easy under MFC) and use nsisDDE plugin (http://wiz0u.free.fr/prog/nsisDDE/) to detect and exit your running application</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>