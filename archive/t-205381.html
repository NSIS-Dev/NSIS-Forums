<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" AccessControl Plugin Registry Problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  AccessControl Plugin Registry Problem NSIS Discussion" />
	
	<title> AccessControl Plugin Registry Problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  AccessControl Plugin Registry Problem</div>
<hr />
<div class="pda"><a href="t-205381.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205381">AccessControl Plugin Registry Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">19th January 2005, 21:19</div></div><div class="posttext">My install uses the AccessControl plugin to set the &quot;SetValue&quot; permission in the registry on the Winlogon area for the &quot;Users&quot; group, and it works fine in most cases.  However, I have a few customers receiving the message from the plugin &quot;Cannot build new access control list. Error Code 1332&quot;.  I've searched for this error, and found a description, but the info is not very helpful.<br />
<br />
Here is the script code I use (which again works most of the time):<br />
<br />
strcpy $R0 &quot;SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon&quot;<br />
AccessControl::GrantOnRegKey HKLM $R0 &quot;Users&quot; &quot;SetValue&quot;<br />
<br />
Note that I require the user to be logged onto Windows with an Admin account (so I can change this registry area), otherwise I stop the install, so that's not the problem.<br />
<br />
Does anyone have any thoughts on what could be wrong or what to try?  I have had customers manually edit the registry and make this change which works fine, so it doesn't appear to be a corrupt registry.<br />
<br />
Joe A.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th January 2005, 18:33</div></div><div class="posttext">Seems like it doesn't know the Users group for some reasons. Have you tried using the SID instead? Is there anything special about the machines it didn't work on? The Users group might not exist on some network configurations.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">20th January 2005, 20:06</div></div><div class="posttext">I thought the &quot;Users&quot; group was a builtin group on all NT/2000/XP systems.  Is that not the case?  Hmmm...<br />
<br />
On a related note, how do I debug an NSIS plugin using VisualStudio?  I know the plugin gets compiled into the .exe when the install is built, and extracted when you run it.  So I do I debug this extracted, temporary DLL?  I want to play around with the AccessControl DLL to see if I can reproduce the problem changing values in the debugger.<br />
<br />
Thanks,<br />
Joe A.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th January 2005, 20:13</div></div><div class="posttext">Compiling the plug-in in debug mode and calling DebugBreak (http://msdn.microsoft.com/library/en-us/debug/base/debugbreak.asp) in it should do the trick.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">20th January 2005, 20:42</div></div><div class="posttext">Ahhh, the old &quot;int 3&quot; trick (debug interrupt), I should have know.  Thanks kichik, I'll give that a try.<br />
<br />
Have there been any bug fixes to AccessControl since 2003-04-20?  I just checked the NSIS Archive, and that's the latest version, and the one I've been using.<br />
<br />
Joe A.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th January 2005, 20:52</div></div><div class="posttext">Nope, no bug fixes. Sadly, the developer has disappeared.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">20th January 2005, 23:23</div></div><div class="posttext">I found another posting with an updated AccessControl plugin from May, 2005:<br />
<br />
http://forums.winamp.com/showthread.php?threadid=179060<br />
<br />
Is anyone using this update?  Any problems or issues with it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">21st January 2005, 15:52</div></div><div class="posttext">No, but I'm hoping to start using it in 4 months.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">21st January 2005, 22:26</div></div><div class="posttext">I found the problem, and  kichik you were right!  The &quot;Users&quot; group didn't exist because these customers are NOT using the English version of Windows, thus this group is NOT called &quot;Users&quot;.  The solution is to use the SID, as you suggested, in this case &quot;(S-1-5-32-545)&quot; for the &quot;Users&quot; group.  Thanks!<br />
<br />
Joe A.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>