<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Setting Focus, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Setting Focus NSIS Discussion" />
	
	<title> Setting Focus [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Setting Focus</div>
<hr />
<div class="pda"><a href="t-266735.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=266735">Setting Focus</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 18:00</div></div><div class="posttext">I went through the forum looking and havn't managed to find a post regarding my particular circumstances to setting focus with custom dialogs. <br />
<br />
I am looking for a way to change the focus of the &quot;Install&quot; to default to &quot;Back&quot; on the buttons at the bottom of the screen.  For one of my custom dialogs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2007, 18:15</div></div><div class="posttext">Instructor has wrote a very nice example at this thread,<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=240492<br />
<br />
You need only the SetFocus call with system plugin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 18:40</div></div><div class="posttext">That has information on changing information on stuff located in the custom dialog but how do I get focus to a button that belongs to the ui (back button) ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2007, 18:54</div></div><div class="posttext">back button id is 3, so GetDlgItem $0 $HWNDPARENT 3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2007, 19:09</div></div><div class="posttext">Just found a thread that is identical to your request,<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=149265</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 19:55</div></div><div class="posttext">Originally posted by Red Wine <br />
back button id is 3, so GetDlgItem $0 $HWNDPARENT 3  <br />
<br />
I currently running with<br />
<br />
GetDlgItem $r2 $HWNDPARENT 3<br />
System::Call &quot;user32::SetFocus(i r2)&quot;<br />
<br />
When I messagebox the $r2 value it comes out as the right handle according to my spy++ app but I can't seem to get this to actually set focus to cancel.<br />
<br />
Is it possible that the installer is setting the Install Button to focus after the fact? thus overriding it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">27th February 2007, 20:01</div></div><div class="posttext">Hold on a couple of seconds, both we shall learn from kichik</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 20:45</div></div><div class="posttext">$R2 and $2 are not the same. For the System plug-in r2 is $2 and R2 is $R2.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 20:50</div></div><div class="posttext">Originally posted by kichik <br />
$R2 and $2 are not the same. For the System plug-in r2 is $2 and R2 is $R2.  <br />
<br />
So then the following should work?<br />
<br />
GetDlgItem $2 $HWNDPARENT 3<br />
System::Call &quot;user32::SetFocus(i r2)&quot;<br />
<br />
Back is still not getting selected as a focus.. :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 20:57</div></div><div class="posttext">Where exactly did you put this code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 21:01</div></div><div class="posttext">Hmm... You probably want to set it as the default button and not have focus on it. For that, there's WM_NEXTDLGCTL. Include WinMessages.nsh and use:GetDlgItem $2 $HWNDPARENT 3<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $2 1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 21:01</div></div><div class="posttext">I am loading up a custom dialog using InstallOptions::initdialog so its after loading that, and before InstallOptions::show</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Tanerax</div><div class="date">27th February 2007, 21:05</div></div><div class="posttext">Originally posted by kichik <br />
Hmm... You probably want to set it as the default button and not have focus on it. For that, there's WM_NEXTDLGCTL. Include WinMessages.nsh and use:GetDlgItem $2 $HWNDPARENT 3<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $2 1  <br />
<br />
Actually that worked perfectly thanks a bunch.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>