<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" BassMOD syntax for streaming a wma, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  BassMOD syntax for streaming a wma NSIS Discussion" />
	
	<title> BassMOD syntax for streaming a wma [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  BassMOD syntax for streaming a wma</div>
<hr />
<div class="pda"><a href="t-197349.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197349">BassMOD syntax for streaming a wma</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 04:11</div></div><div class="posttext">Does this seem like plausible syntax for streaming a wma with BassMod ?<br />
<br />
Kind of like fixing my car by throwing a wrench at it ;)<br />
<br />
System::Call /NOUNLOAD &quot;BASSMOD::BASS_StreamCreateURL\(PChar('http://64.236.34.97:80/stream/1012'+#0),0,BASS_STREAM_BLOCK,nil,0)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 04:26</div></div><div class="posttext">I tried this as a macro<br />
!macro BASSMOD_STREAMPLAY<br />
System::Call 'BASSMOD::BASS_StreamCreateURL(PChar($\'http://64.236.34.97:80/stream/1012$\'+#0),0,BASS_STREAM_BLOCK,nil,0)'<br />
!macroend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 04:28</div></div><div class="posttext">got a 'encountered a systems error and needs to quit'  Thought I might get lucky ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th October 2004, 18:56</div></div><div class="posttext">PChar? System doesn't work with Pascal syntax ;)<br />
<br />
Use simple quotes, the string passed is already &quot;PChar&quot;.<br />
<br />
Also replace nil with 0 and BASS_STREAM_BLOCK with its real value.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 19:21</div></div><div class="posttext">this a little closer?<br />
!macro BASSMOD_WMASTREAMPLAY</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 19:25</div></div><div class="posttext">System::Call 'BASSMOD::BASS_StreamCreateURL(&quot;http://www.mysite.com/afile.wma&quot;, 0, 0, NULL, 0)'<br />
!macroend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">25th October 2004, 21:05</div></div><div class="posttext">tried this..but it is not yet working<br />
<br />
!include BassMod.nsi<br />
Function .onInit<br />
InitPluginsDir<br />
File  bassmod.dll<br />
!insertmacro BASSMOD_Init<br />
!insertmacro BASSMOD_MusicLoad <br />
Section<br />
System::Call 'BASSMOD::BASS_STREAMCREATEURL(&quot;http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma&quot;,0,0,NULL,0)'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">26th October 2004, 00:40</div></div><div class="posttext">replaced the NULL with 0...not quite working yet...<br />
BASSMOD::BASS_STREAMCREATEURL(&quot;http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma&quot;,0,0,0,0)'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th October 2004, 03:21</div></div><div class="posttext">First of all, BASSMOD doesn't support WMA, but BASSWMA does.<br />
<br />
Second, you should define each parameter type for each one of the parameters. Like this out-topic example:<br />
<br />
System::Call &quot;user32::MessageBox(i $HWNDPARENT, t 'NSIS System Plug-in', t 'Test', i 0)&quot;I suggest you to try this below (not tested):System::Call 'BASSWMA::BASS_WMA_StreamCreateFile(i,t &quot;http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma&quot;,i,i,i)'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">26th October 2004, 04:51</div></div><div class="posttext">no...that was a no go too :(<br />
Do I need to call another !macro to get the stream to play. Should play automatically I from what I have read....Sure there are some on the list who have attempted this :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">26th October 2004, 19:03</div></div><div class="posttext">I posted this on the Bass forum too...<br />
if they give me answer, I'll post it here</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">26th October 2004, 20:32</div></div><div class="posttext">got this back from the BASS forum:<br />
I don't know how to make NSIS call a function from a DLL, but if it is how you say, that should work fine. Although I don't know if the &quot;i&quot; in there first, third, fourth and fifth parameters is just for showing purposes, because if they are like that in the source code, that seems wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th October 2004, 22:21</div></div><div class="posttext">The dll I'm using is BASSWMA:<br />
<br />
BASSWMA 2.0 (.0.4)<br />
An extension to BASS, enabling the playback of WMA files and streams, and also WMA file encoding and network broadcasting. Requires the Windows Media Format modules, which come installed with Windows Media Player, or can be installed separately (wmfdist.exe). C/C++, Visual Basic, Delphi and MASM APIs are included. <br />
<br />
To work, the dll has to be in the same folder as your script at the time you compile it.<br />
<br />
The &quot;i&quot;'s are parameter types, which are &quot;integers&quot;. The same is for &quot;t&quot; which is &quot;pointer to the first character of string&quot;. Maybe this is quite complicated for you, but it's how it works.<br />
<br />
no...that was a no go too <br />
Do I need to call another !macro to get the stream to play. Should play automatically I from what I have read....Sure there are some on the list who have attempted this This is not another macro, this is a plugin call.<br />
<br />
Sorry if sometimes I'm rude. I before didn't even know what System plugin was. Now that I'm pretty familiar with it, I can make a real use of it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">26th October 2004, 22:57</div></div><div class="posttext">not necessarily complicated...just new :)<br />
I'll put the plugins in the project folder and see how it goess</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">27th October 2004, 21:08</div></div><div class="posttext">not quite working yet...<br />
no errors...just not launching the wma<br />
I posted this code to the BASS forum to...<br />
OutFile &quot;example.exe&quot;<br />
!include BassMod.nsi<br />
;<br />
Function .onInit<br />
InitPluginsDir<br />
SetOutPath $PLUGINSDIR<br />
File &quot;bassmod.dll&quot;<br />
File &quot;basswma.dll&quot;<br />
!insertmacro BASSMOD_Init<br />
System::Call &quot;BASSWMA::BASS_WMA_StreamCreateFile(i,'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma',i,i,i)&quot;<br />
FunctionEnd<br />
;<br />
Function .onGUIEND<br />
!insertmacro BASSMOD_Free<br />
FunctionEnd<br />
;<br />
Section<br />
;dummy<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">28th October 2004, 00:47</div></div><div class="posttext">You forgot a t before 'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma', like my code mentions.<br />
<br />
I posted this code to the BASS forum to...Since when they can read NSIS syntax. It is quite difficult to have NSIS help on other sites than this forums. NSIS support is only available right here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">28th October 2004, 05:07</div></div><div class="posttext">yep...added the 't' to no avail<br />
Why I posted the code....<br />
thought there might be some NSIS folks on the base forum...who had figured this one out. Nsis is pretty easy to read and the code I posted is pretty cut and dried.<br />
many thanks<br />
g</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">28th October 2004, 12:20</div></div><div class="posttext">What is !insertmacro BASSMOD_Init and !insertmacro BASSMOD_Free on your code, initializing BASSMOD which shouldn't exist in your code for WMA? Didn't I tell you why BASSMOD isn't the correct plugin for your code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">28th October 2004, 20:39</div></div><div class="posttext">yes...I'm sure you did<br />
on the bass forum, someone said you needed the bass [not BassMod] to work in conjunction with basswma..here is newest post from the Bass forum I try to incorporate :)<br />
Todays Post:<br />
As I expected, you've confused two things. Bassmod is for playing MOD-type files. It is cross-platform, but not with as many features. In order to use BassWMA, you need to use Bass, not Bassmod. Your script should be something like this (though I'm not very sure about the syntax):<br />
<br />
<br />
OutFile &quot;example.exe&quot;<br />
;<br />
Function .onInit<br />
InitPluginsDir<br />
SetOutPath $PLUGINSDIR<br />
File &quot;bass.dll&quot;<br />
File &quot;basswma.dll&quot;<br />
System::Call &quot;BASS::BASS_Init(i, i, i, i, i) i(1, 44100, 0, 0, 0).r0&quot;<br />
; figure out if there's an error in r0, or whatever...<br />
System::Call &quot;BASSWMA::BASS_WMA_StreamCreateFile(i, t, i, i, i) i(0,'http://www.siren.cc/Univision/fonovisa/DavidRolas_Coqueta.wma',0,0,0).r0&quot;<br />
; figure out if there's an error in r0, or whatever...<br />
System::Call &quot;BASS::BASS_StreamPlay(i, i, i) i(r0, 0, $(BASS_SAMPLE_LOOP)).r0&quot;<br />
; figure out if there's an error in r0, or whatever...<br />
FunctionEnd<br />
;<br />
Function .onGUIEND<br />
System::Call &quot;BASS::BASS_Free()&quot;<br />
FunctionEnd<br />
;<br />
Section<br />
;dummy<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>