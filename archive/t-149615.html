<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" bug report: bzip2 leads to 'corrupt' uninstallers, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  bug report: bzip2 leads to 'corrupt' uninstallers NSIS Discussion" />
	
	<title> bug report: bzip2 leads to 'corrupt' uninstallers [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  bug report: bzip2 leads to 'corrupt' uninstallers</div>
<hr />
<div class="pda"><a href="t-149615.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149615">bug report: bzip2 leads to 'corrupt' uninstallers</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">18th September 2003, 06:16</div></div><div class="posttext">Hello. :)<br />
<br />
I believe I have found a bug with bzip2 compression. (I'm using the latest nightly snapshot). I certainly hope it's a bug, otherwise something is really messed up for me. ;)<br />
<br />
Basically, when using bzip2 compression, everything seems to work wonderfully (although the compression doesn't seem all that great but maybe it's my installer data... anyway) except when one goes to uninstall, one is greeted with the dreaded dialog:<br />
<br />
---------------------------<br />
NSIS ERROR<br />
---------------------------<br />
Installer corrupted or incomplete.<br />
<br />
This could be the result of a failed download or corruption from a virus.<br />
<br />
If desperate, try the /NCRC command line switch (NOT recommended)<br />
OK<br />
<br />
First I thought it was my fault, but then I found the same thing occurs with Example2.nsi (${NSISDIR}\Examples\Example2.nsi). Without bzip, everything works fine, including uninstall, and with bzip2 the uninstaller is corrupt. I've attached two differently compiled versions of Example2.nsi for you to test.<br />
<br />
I hope this information is helpful and that the problem can be resolved. :)<br />
<br />
salaam/peace<br />
<br />
(this attachment has the crashing example2 - the next post has the one that's fine. i had to split them because one attachment with both was too big.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">18th September 2003, 06:17</div></div><div class="posttext">and here's the working example2, compiled without bzip compression.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th September 2003, 15:03</div></div><div class="posttext">Which version of makensis.exe are you using? Open CVS\Entries and look for a number such as 1.241 in the makensis.exe line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">18th September 2003, 16:18</div></div><div class="posttext">Short answer: /makensis.exe/1.241/Tue Sep 16 19:07:57 2003/-kb/<br />
<br />
Long answer: I always do a normal install of NSIS (without source) and when I searched through the 'Entries' files in my NSIS install dir I found no reference to makensis.exe. I re-downloaded the latest snapshot, unzipped it, and checked the Entries file in the root CVS directory - that's where I got my short answer above from. ;)<br />
<br />
Just to be sure, I re-installed the latest snapshot again, but the problem persists. It seems to affect everything, even NSIS itself refuses to uninstall, complaining about corruption! :P<br />
<br />
As a test, I recompiled the NSIS installer without bzip compression and now it uninstalls fine.<br />
<br />
By the way, here are the file sizes for the compiled NSIS installer:<br />
<br />
nsis20b4.exe 1,719,114 bytes (with zlib)<br />
nsis20b4.exe 1,511,271 bytes (with bzip2)<br />
<br />
does that amount of compression with bzip2 seem about right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th September 2003, 12:47</div></div><div class="posttext">Thanks, fixed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">19th September 2003, 15:22</div></div><div class="posttext">Thank you Kichik, I'm glad you were able to fix it. :) I'm surprised no one else seemed to notice the bug though. :weird:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">clio44</div><div class="date">25th February 2006, 01:32</div></div><div class="posttext">How can a non-computer whiz fix this problem?  I try to open the installer for WinAmp and it gives me that message that maybe it has a virus (ooooEEEEoooo) or that it just refuses to open it (jerk).  I don't understand how to do the things you guys suggested.....<br />
<br />
Any help?<br />
Thanks,<br />
Laura :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th February 2006, 09:30</div></div><div class="posttext">See &quot;Why do I get NSIS Error?&quot; (http://nsis.sourceforge.net/Why_do_I_get_NSIS_Error) from the FAQ.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>