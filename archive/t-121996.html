<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Version checking, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Version checking NSIS Discussion" />
	
	<title> Version checking [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Version checking</div>
<hr />
<div class="pda"><a href="t-121996.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=121996">Version checking</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">19th January 2003, 13:03</div></div><div class="posttext">I need to implement a following feature for my installer:<br />
<br />
Check for version string in registry, and if<br />
a)it's &lt; than current (old version of me detected) - do normal install (simply overwrite old files).<br />
b)not found (I wasn't installed before) - do backup and proceed with install.<br />
c)it's the same as current (user already has me installed) - start with uninstall page instead.<br />
<br />
I quess the check has to be done using user variables? But how do they work? I kinda tried to stay away from that stuff before. Or is there a simple way?<br />
And I don't know how to put all this into one function. Should it be .onGUIInit ? And how to call those different types of install?<br />
<br />
Uhh...my head hurts :))</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">19th January 2003, 13:18</div></div><div class="posttext">Once you have read your version string from the registry you might find this useful: http://nsis.sourceforge.net/archive/viewpage.php?pageid=57</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">23rd January 2003, 03:25</div></div><div class="posttext">Ok, here's my yet another problem:<br />
<br />
I made a script to check for a correct version<br />
<br />
<br />
Function .onVerifyInstDir<br />
    IfFileExists $INSTDIR\exefile.exe exe_found<br />
      Abort<br />
      exe_found:<br />
      Push &quot;$INSTDIR\exefile.exe&quot;<br />
  	Call FileSize<br />
  	Pop $0<br />
  	StrCmp $0 2748447 exe_ok<br />
  	Abort<br />
      exe_ok:<br />
      IfFileExists $INSTDIR\Data\data.dat dat_found<br />
      Abort <br />
  dat_found:<br />
FunctionEnd<br />
 <br />
<br />
It works, but I'm not quite happy how. The check works in the InstallationFolder window. It grays out the &quot;install&quot; button, but before that it lets the user to select wrong folder. So it could be pretty confusing. I'd like it to prevent the user from selecting the wrong dir somehow. Any help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd January 2003, 09:46</div></div><div class="posttext">It does prevent him from the selecting the wrong directory. It will only allow the user to click install when he points to the directory where exefile.exe file is 2748447 bytes and data.dat exists. What's wrong with that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">23rd January 2003, 11:36</div></div><div class="posttext">Nothing wrong, it just could confuse the user. I wanted to &quot;gray out&quot; the ok button of the &quot;browse for folder&quot; window (like Windows does, when you don't select the correct folder).<br />
Oh well. I quess I'm just too picky, right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd January 2003, 11:40</div></div><div class="posttext">But it does. When you use Abort from .onVerifyInstDir it grays out the OK button (next/install in this case).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">23rd January 2003, 12:11</div></div><div class="posttext">No no, I had in mind that folder-tree window that pops up when you click browse.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd January 2003, 12:13</div></div><div class="posttext">Oh... That can be done. Add it to the feature requests in SF (http://nsis.sf.net/ -&gt; Project Page).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">23rd January 2003, 12:31</div></div><div class="posttext">I'd do it, if I only could describe it in short and using tech speech :o <br />
My babblings about &quot;graying out some stuff in that pops ups&quot; won't make much sense I guess...<br />
Though this could be really usefull (maybe not that common, but still usefull) feature, imho.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">24th January 2003, 13:58</div></div><div class="posttext">There's nothing wrong with your babbelings :), it's just that KiCHiK never reads a post completely. It happens most of the time ;)!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>