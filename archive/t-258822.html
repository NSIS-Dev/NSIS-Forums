<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" convertion from string to defined constant, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  convertion from string to defined constant NSIS Discussion" />
	
	<title> convertion from string to defined constant [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  convertion from string to defined constant</div>
<hr />
<div class="pda"><a href="t-258822.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=258822">convertion from string to defined constant</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bjorlykke</div><div class="date">3rd November 2006, 09:30</div></div><div class="posttext">I'm wondering if there is any way to convert a string to a defined constant. I've made some definitions like this (the number of defined constants could vary):<br />
<br />
!define DEF1 &quot;help&quot;<br />
!define DEF2 &quot;me&quot;<br />
!define DEF3 &quot;please&quot;<br />
<br />
And I want to create a loop where I increment the number in the defined name. I've tried something like this (without the loop, and without success...):<br />
<br />
StrCpy $R0 1<br />
<br />
StrCpy $R1 &quot;DEF$R0&quot;  # $R1 is now &quot;DEF1&quot;<br />
<br />
;Now I try to refer to $DEF1 without success<br />
WriteRegStr HKLM &quot;Path&quot; &quot;Name&quot; &quot;${$R1}&quot;<br />
<br />
Is there any way to solve this? Alternatively another way to do this operation?<br />
<br />
Thanks...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd November 2006, 10:56</div></div><div class="posttext">You can't do that with StrCpy and friends because that's mixing runtime and build time. StrCpy is executed at runtime on the user's computer while the processing of defines is done at build time.<br />
<br />
You can use an external application (http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time) to calculate the sum of your variables and have it save the result in a .nsh file you can later !include.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ZmAn3</div><div class="date">11th September 2008, 18:40</div></div><div class="posttext">I need some help I was trying to do the same thing with defines but since its compile time its not gonna work, Im trying to ,at run time set the custom nsdialogs page that is shown<br />
based on info gathered in Function .onInit so i have<br />
<br />
<br />
so like i have<br />
Function .onInit<br />
  !insertmacro MULTIUSER_INIT<br />
;---misc code to check if $=ok or not here<br />
${If} $1 != 'ok'<br />
  !define PAGETOSHOW NsdialogsErrorPage<br />
${EndIf}<br />
<br />
${If} $1 == &quot;ok&quot;<br />
!define PAGETOSHOW NsdialogsEverythingGoodPage<br />
${EndIf}<br />
FunctionEnd<br />
 <br />
<br />
<br />
then for the pages section I have<br />
Page custom &quot;${PAGETOSHOW}&quot;<br />
<br />
soo this will dot work since defines are compile time Ive tryed it as a Var instead but then the page custom throws a error</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th September 2008, 08:51</div></div><div class="posttext">Use GetFuncAddress instead and put the result in a global variable. Then, in the custom page function, use Call on that variable. Or simply add an ${If} in the custom page on the value of some variable and call the appropriate function.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>