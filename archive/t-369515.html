<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Include Page only if Macros are Defined, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Include Page only if Macros are Defined NSIS Discussion" />
	
	<title> Include Page only if Macros are Defined [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Include Page only if Macros are Defined</div>
<hr />
<div class="pda"><a href="t-369515.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=369515">Include Page only if Macros are Defined</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gretty</div><div class="date">22nd August 2013, 04:26</div></div><div class="posttext">Hello<br />
<br />
In NSIS is there a Pre-Processor directive called 'defined'? I am attempting to include a specific page in my installer only if a macro/s are defined. <br />
<br />
<br />
!define INSTALL_V8     1<br />
!define INSTALL_V10   1<br />
<br />
#if we are installing to more than 1 version of 12d Model: Show 'Version Selector' Page<br />
!if defined(INSTALL_V8) &amp;&amp; defined(INSTALL_V9) || defined(INSTALL_V8) &amp;&amp; defined(INSTALL_V10) || defined(INSTALL_V9) &amp;&amp; defined(INSTALL_V10)<br />
   Page Custom CustomPageInitialise CustomPageFinalise<br />
!endif<br />
<br />
The above code gives a compile error saying:<br />
!if expects 1-4 parameters, got 11<br />
<br />
Do you know how I could check if multiple macros are defined?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd August 2013, 06:05</div></div><div class="posttext">NSIS is not C compatible, use !ifdef foo | bar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gretty</div><div class="date">22nd August 2013, 06:12</div></div><div class="posttext">Thanks for the reply :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">22nd August 2013, 13:36</div></div><div class="posttext">A macro to count the defines would simplify the test!define INSTALL_V8<br />
!define INSTALL_V9<br />
...<br />
!define count 0<br />
# call the macro for every possible def value<br />
${CountDefs} count INSTALL_V8<br />
${CountDefs} count INSTALL_V9<br />
${CountDefs} count INSTALL_V10<br />
!if ${count} &gt; 1<br />
Page Custom ...<br />
!endifHere's the macro to do that!macro CountDefs Counter DefName<br />
!ifdef ${DefName}<br />
  !define tmpval ${${Counter}}<br />
  !undef  ${Counter}<br />
  !define /math ${Counter} ${tmpval} + 1<br />
  !undef  tmpval<br />
!endif<br />
!macroend<br />
!define CountDefs &quot;!insertmacro CountDefs&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gretty</div><div class="date">23rd August 2013, 00:51</div></div><div class="posttext">Thanks for the code example :D Much appreciated. <br />
<br />
Some people when you ask if its possible to do something in programming its always littered with, cant or not possible. Whereas some people like yourself see the outcome that is desired and come up with a way to achieve it within the parameters of the language. I vehemently believe there is no such a thing as not possible in programming. I often wonder how the former people are able to get employed. I like to think I am firmly in the latter category.<br />
<br />
Thanks again.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>