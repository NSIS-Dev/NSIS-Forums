<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" editing text vars, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  editing text vars NSIS Discussion" />
	
	<title> editing text vars [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  editing text vars</div>
<hr />
<div class="pda"><a href="t-201192.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=201192">editing text vars</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joshhh</div><div class="date">5th December 2004, 11:42</div></div><div class="posttext">I want to edit some variables in text file after installation inside custom page before finish page.<br />
Custom page (see attached file) must include vars and fields to edit path to applications.<br />
Vars stored in vars.ini file in $INSTDIR\cfg\.<br />
Need help to make this custom page!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th December 2004, 12:04</div></div><div class="posttext">It really isn't hard to make custom InstallOptions dialogues. Please read the Contrib\InstallOptions\Readme.html documentation and see the examples in Contrib\InstallOptions and Examples.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joshhh</div><div class="date">5th December 2004, 20:53</div></div><div class="posttext">OK I'v made *.ini file for my custom page.<br />
Next - what command i must to use to read var and var's path from vars.ini - ReadINIStr or fileopen/read/write. And what will installer do after I choose custom path to var. Will it automatic save new path to vars.ini when I push OK button in file select dialog or next button in installer window.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joshhh</div><div class="date">5th December 2004, 20:57</div></div><div class="posttext">vars.ini exsample:<br />
var1 &quot;path to app1&quot;<br />
var2 &quot;path to app2&quot;<br />
var3 &quot;path to app3&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th December 2004, 11:54</div></div><div class="posttext">ReadINIStr $R0 &quot;$PLUGINSDIR\vars.ini&quot; &quot;Field X&quot; &quot;State&quot;<br />
<br />
The values are saved on the custom page directly to the ini file when the user clicks the Next button. You should read the values from the ini file on the custom page's Leave function. Here you can verify entered information (ie paths exist) and call Abort to jump back to the custom page if necessary.<br />
<br />
e.g.Page Custom myCustomPage myCustomPageLeave<br />
<br />
Function .onInit<br />
 InitPluginsDir<br />
 ReserveFile &quot;/oname=$PLUGINSDIR\vars.ini&quot; &quot;vars.ini&quot;<br />
FunctionEnd<br />
<br />
Function myCustomPage<br />
 InstallOptions::dialogue &quot;$PLUGINSDIR\vars.ini&quot;<br />
 Pop $R0<br />
FunctionEnd<br />
<br />
Function myCustomPageLeave<br />
<br />
 ReadINIStr $R0 &quot;$PLUGINSDIR\vars.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
 StrCmp $R0 &quot;&quot; +2<br />
 IfFileExists &quot;$R0\*.*&quot; +3<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;The path entered in Var1 does not exist!&quot;<br />
  Abort<br />
<br />
 ReadINIStr $R0 &quot;$PLUGINSDIR\vars.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
 StrCmp $R0 &quot;&quot; +2<br />
 IfFileExists &quot;$R0\*.*&quot; +3<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;The path entered in Var2 does not exist!&quot;<br />
  Abort<br />
<br />
 ReadINIStr $R0 &quot;$PLUGINSDIR\vars.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
 StrCmp $R0 &quot;&quot; +2<br />
 IfFileExists &quot;$R0\*.*&quot; +3<br />
  MessageBox MB_OK|MB_ICONSTOP &quot;The path entered in Var3 does not exist!&quot;<br />
  Abort<br />
<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joshhh</div><div class="date">23rd December 2004, 21:30</div></div><div class="posttext">One more question - how to change text in header of custom page. I see text from previous page header and couldnt find any info about it in help files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd December 2004, 22:54</div></div><div class="posttext">You can use the MUI_HEADER_TEXT macro (!insertmacro MUI_HEADER_TEXT &quot;blah&quot; &quot;ja&quot;) if your installer isn't multilingual, else see the section entitled &quot;Custom pages&quot; in the Modern UI readme.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>