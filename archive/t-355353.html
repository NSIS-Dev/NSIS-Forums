<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Crash while using a Variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Crash while using a Variable NSIS Discussion" />
	
	<title> Crash while using a Variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Crash while using a Variable</div>
<hr />
<div class="pda"><a href="t-355353.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=355353">Crash while using a Variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sols_HeG</div><div class="date">31st January 2013, 15:27</div></div><div class="posttext">Hey there,<br />
<br />
since the last update (2.45-&gt; 2.46) one of my scripts will not work any longer.<br />
<br />
First a Variable is defined:<br />
<br />
!define SER_NUM '01000000131242342361\<br />
01000000134623424486\<br />
01000000135234534532\<br />
01000000136123423457'<br />
<br />
<br />
after the script copied some files, it will check the Serial with a Macro and in this Macro the crash appears:<br />
!macro checkSerialMacro userSerial Result<br />
    StrCpy $1 0<br />
    StrCpy $2 20<br />
    StrCpy $3 20 <br />
    StrCpy $4 1<br />
    StrCpy ${Result} ''<br />
    StrCpy $0 ${SER_NUM} $2 $1                                  &lt;-----Crash<br />
     loopbegin:<br />
           StrCmp $0 '' failed<br />
           StrCmp $0 ${userSerial} success<br />
           StrCpy $0 ${SER_NUM} $3 $2          <br />
           IntOp $2 $2 + $3<br />
           Intop $4 $4 + 1<br />
           goto loopbegin<br />
     success:<br />
        StrCpy ${Result} 'success'<br />
         goto macroend<br />
     failed:<br />
       StrCpy $1 0<br />
       StrCpy $2 20<br />
       StrCpy $3 20 <br />
       StrCpy $4 1<br />
       StrCpy ${Result} ''<br />
      StrCpy $0 ${SER_NUM_2} $2 $1<br />
       goto failedLoop<br />
     failedLoop:<br />
           StrCmp $0 '' failedSecond<br />
           StrCmp $0 ${userSerial} success<br />
          StrCpy $0 ${SER_NUM_2} $3 $2          <br />
           IntOp $2 $2 + $3<br />
           Intop $4 $4 + 1<br />
           goto failedLoop<br />
     failedSecond:<br />
       StrCpy $1 0<br />
       StrCpy $2 20<br />
       StrCpy $3 20 <br />
       StrCpy $4 1<br />
       StrCpy ${Result} ''<br />
      StrCpy $0 ${SER_NUM_3} $2 $1<br />
       goto failedLoopSecond<br />
     failedLoopSecond:<br />
           StrCmp $0 '' failedFinaly<br />
           StrCmp $0 ${userSerial} success<br />
           StrCpy $0 ${SER_NUM_3} $3 $2          <br />
           IntOp $2 $2 + $3<br />
           Intop $4 $4 + 1<br />
           goto failedLoopSecond<br />
     failedFinaly:<br />
        StrCpy ${Result} 'failed'<br />
macroend:  <br />
!macroend<br />
<br />
Just when it trys to compile the row StrCpy $0 ${SER_NUM} $2 $1 it crashes.<br />
If I delete the rows where I try to access the SER_NUM(or _2/3) the script will run without any problems.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sols_HeG</div><div class="date">31st January 2013, 15:38</div></div><div class="posttext">Time 2 Close due tu stupidity...<br />
Just use the large String build for large String functions ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">31st January 2013, 20:09</div></div><div class="posttext">Code like this should never crash, I'll take a look and see if I can reproduce it...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">5th February 2013, 07:31</div></div><div class="posttext">I was unable to reproduce this crash, please post a complete sample script here or on the bug tracker...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>