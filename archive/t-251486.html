<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to get OS version?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to get OS version? NSIS Discussion" />
	
	<title> How to get OS version? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to get OS version?</div>
<hr />
<div class="pda"><a href="t-251486.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251486">How to get OS version?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Vitaly</div><div class="date">19th July 2006, 15:25</div></div><div class="posttext">Please help me with this simple task who knows...<br />
<br />
I have a few EXE-files, each installs JET SP8 on a specific OS. I need to find out in the script version of OS, and install the corresponding file.<br />
<br />
I cannot even find out how to get the OS version within NSIS...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nvit</div><div class="date">19th July 2006, 15:41</div></div><div class="posttext">See NSIS help, <br />
Appendix C: Useful Scripts<br />
;------------------------------------------------------------------------------------------<br />
Function GetWindowsVersion<br />
<br />
   Push $R0<br />
   Push $R1<br />
<br />
   ReadRegStr $R0 HKLM \<br />
   &quot;SOFTWARE\Microsoft\Windows NT\CurrentVersion&quot; CurrentVersion<br />
<br />
   IfErrors 0 lbl_winnt<br />
<br />
   ; we are not NT<br />
   ReadRegStr $R0 HKLM \<br />
   &quot;SOFTWARE\Microsoft\Windows\CurrentVersion&quot; VersionNumber<br />
<br />
   StrCpy $R1 $R0 1<br />
   StrCmp $R1 '4' 0 lbl_error<br />
<br />
   StrCpy $R1 $R0 3<br />
<br />
   StrCmp $R1 '4.0' lbl_win32_95<br />
   StrCmp $R1 '4.9' lbl_win32_ME lbl_win32_98<br />
<br />
   lbl_win32_95:<br />
     StrCpy $R0 '95'<br />
   Goto lbl_done<br />
<br />
   lbl_win32_98:<br />
     StrCpy $R0 '98'<br />
   Goto lbl_done<br />
<br />
   lbl_win32_ME:<br />
     StrCpy $R0 'ME'<br />
   Goto lbl_done<br />
<br />
   lbl_winnt:<br />
<br />
   StrCpy $R1 $R0 1<br />
<br />
   StrCmp $R1 '3' lbl_winnt_x<br />
   StrCmp $R1 '4' lbl_winnt_x<br />
<br />
   StrCpy $R1 $R0 3<br />
<br />
   StrCmp $R1 '5.0' lbl_winnt_2000<br />
   StrCmp $R1 '5.1' lbl_winnt_XP<br />
   StrCmp $R1 '5.2' lbl_winnt_2003 lbl_error<br />
<br />
   lbl_winnt_x:<br />
     StrCpy $R0 &quot;NT $R0&quot; 6<br />
   Goto lbl_done<br />
<br />
   lbl_winnt_2000:<br />
     Strcpy $R0 '2000'<br />
   Goto lbl_done<br />
<br />
   lbl_winnt_XP:<br />
     Strcpy $R0 'XP'<br />
   Goto lbl_done<br />
<br />
   lbl_winnt_2003:<br />
     Strcpy $R0 '2003'<br />
   Goto lbl_done<br />
<br />
   lbl_error:<br />
     Strcpy $R0 ''<br />
   lbl_done:<br />
<br />
   Pop $R1<br />
   Exch $R0<br />
<br />
 FunctionEnd<br />
;------------------------------------------------------------------------------------------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kgobel</div><div class="date">19th July 2006, 15:50</div></div><div class="posttext">Also, Afrow UK (I beleive) wrote a pretty nice plugin, you might want to check out this thread<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=221621</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>