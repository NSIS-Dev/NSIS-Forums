<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Goto's based on string from registry, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Goto's based on string from registry NSIS Discussion" />
	
	<title> Goto's based on string from registry [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Goto's based on string from registry</div>
<hr />
<div class="pda"><a href="t-78232.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=78232">Goto's based on string from registry</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mark_Ive</div><div class="date">4th March 2002, 11:48</div></div><div class="posttext">Hi all,<br />
      I want to jump to different sections based on registry key i thought the following would work...but it compiles then fails when i run it...im guessing it clears the labels on compile because it thinks they are not used ?? any ideas anyone the code is pretty self explanatory<br />
<br />
Section &quot;getversion&quot;<br />
readregstr $1 HKEY_LOCAL_MACHINE &quot;Software\mycompany\myapp\&quot; &quot;Version&quot;<br />
goto $1<br />
  V2.3.0:<br />
    Call 2.3.1<br />
  V2.3.1:<br />
    Call 2.3.2<br />
  V2.3.2:<br />
    Call 2.3.3<br />
  V2.3.3:<br />
    Call 2.3.4<br />
  V2.3.4:<br />
    Call 2.3.5<br />
  V2.3.5:<br />
    Call 2.3.6<br />
  V2.3.6:<br />
    Call 2.3.7<br />
  V2.3.7:<br />
    Call DONE<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">4th March 2002, 12:01</div></div><div class="posttext">Mark_Ive,<br />
<br />
i didn't test it yet, but i think what you said is right: it might delete labels at compile because of no use.<br />
Try to do it differently:<br />
<br />
in NSIS: create seperate functions for the commands to execute at different versions and use a user variable to indicate whether or not to execute the function, eg:<br />
function v2.1.0<br />
Pop $0<br />
StrCmp $0 &quot;1&quot; Continue210<br />
Return<br />
Continue210:<br />
&quot;commands...&quot;<br />
functionend<br />
<br />
Now visit all functions in .oninit with the parameter 0 of course. Now it should be possible to use any function at runtime. Again, i didn't test it yet, so i'm not completely sure, but you could try it.<br />
<br />
Or create a NSISdll that does the job, depending on an argument or a by reading a user variable.<br />
<br />
Good luck,<br />
greetz,<br />
Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">6th March 2002, 07:48</div></div><div class="posttext">So, did it work out???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dTomoyo</div><div class="date">12th March 2002, 15:55</div></div><div class="posttext">Mark_Ive,<br />
<br />
my style of sample code...<br />
<br />
<br />
Section &quot;GetVersion&quot; <br />
ReadRegStr $1 HKEY_LOCAL_MACHINE &quot;Software\mycompany\myapp\&quot; &quot;Version&quot;<br />
  StrCmp $1 &quot;2.3.0&quot; v230<br />
  StrCmp $1 &quot;2.3.1&quot; v231<br />
  StrCmp $1 &quot;2.3.2&quot; v232<br />
  StrCmp $1 &quot;2.3.3&quot; v233<br />
  StrCmp $1 &quot;2.3.4&quot; v234<br />
  StrCmp $1 &quot;&quot; InstError Done<br />
InstError:<br />
  ...<br />
  Goto Done<br />
v230:<br />
  Call v233_commands<br />
  Goto Done<br />
v231:<br />
  Call v233_commands<br />
  Goto Done<br />
v232:<br />
  Call v233_commands<br />
  Goto Done<br />
v233:<br />
  Call v233_commands<br />
  Goto Done<br />
Done:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">12th March 2002, 20:17</div></div><div class="posttext">That's also a solution. Just choose what you like...<br />
<br />
-Hn3 :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>