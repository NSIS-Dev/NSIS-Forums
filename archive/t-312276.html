<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ChDir missing? (Working directory / CurDir), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ChDir missing? (Working directory / CurDir) NSIS Discussion" />
	
	<title> ChDir missing? (Working directory / CurDir) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ChDir missing? (Working directory / CurDir)</div>
<hr />
<div class="pda"><a href="t-312276.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=312276">ChDir missing? (Working directory / CurDir)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">13th September 2009, 20:39</div></div><div class="posttext">Seems there is no built-in way of setting the current working directory (for installer process). Just copying a value to $OUTDIR does not work. I didn't try SetOutPath since this will create a directory (if missing) and maybe it just sets $OUTDIR, too.<br />
<br />
I want to set the current working directory to something specific so I can use commands like FileOpen with relative paths. If the directory is missing the original working directory is a valid fallback.<br />
<br />
Ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">13th September 2009, 21:19</div></div><div class="posttext">To set the working directory you have to use SetOutPath indeed.<br />
If you want to prevent the folder to be created, you have to check if the folder exists, and if not, SetOutPath to the original working directory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">13th September 2009, 21:44</div></div><div class="posttext">Ok, seems that SetOutPath sets $OUTDIR, creates that directory if missing _and_ changes current working dir to that directory.<br />
<br />
BTW: $OUTDIR is initially empty. Might need an API call to get the working directory at script start (GetCurrentDirectory).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th September 2009, 00:09</div></div><div class="posttext">Yes, you will need GetCurrentDirectory:<br />
http://forums.winamp.com/showthread.php?postid=1973815</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">14th September 2009, 06:31</div></div><div class="posttext">I just found some note in documentation of &quot;Rename&quot;:<br />
<br />
&quot;If no absolute path is specified the current folder will be used. The current folder is the folder set using the last SetOutPath instruction. If you have not used SetOutPath the current folder is $EXEDIR.&quot;<br />
<br />
I think something like this would be useful at documentation for $OUTDIR and especially SetOutPath. And it might be wrong since the working directory and $EXEDIR are generally NOT the same before using SetOutPath. So if &quot;current folder&quot; means the working directory the documentation is wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">14th September 2009, 06:38</div></div><div class="posttext">Documentation for &quot;FileOpen&quot; has same comment, &quot;RegDll&quot; similar. Docs for &quot;Exec&quot;, &quot;ExecShell&quot; and &quot;CreateShortCut&quot; should say what the working directory is if $OUTDIR is still empty.<br />
<br />
The notion &quot;current directory&quot; is used for &quot;File&quot;, too. But I guess this means the current working directory of makensis/makensisw process. This is not the working directory when starting makensis/makensisw but is the directory of the nsi file getting compiled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">14th September 2009, 13:54</div></div><div class="posttext">To get the current working directory I use GetFullPathName $WORKING_DIR &quot;.\&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>