<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Howto change un-normal ini entries?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Howto change un-normal ini entries? NSIS Discussion" />
	
	<title> Howto change un-normal ini entries? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Howto change un-normal ini entries?</div>
<hr />
<div class="pda"><a href="t-287713.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287713">Howto change un-normal ini entries?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 10:39</div></div><div class="posttext">Hi together.<br />
<br />
I have a problem with an .ini file. It looks like this:<br />
[section]<br />
entry = whatever.dll<br />
entry = another.dll<br />
entry = andsoon.dll<br />
<br />
When I say &quot;writeinistr&quot; it replaces the first 'entry' with the new value. :|<br />
<br />
How can I arrange this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 10:44</div></div><div class="posttext">I doubt if this is a proper INI when all entries have the same name.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 10:48</div></div><div class="posttext">Originally posted by Red Wine <br />
I doubt if this is a proper INI when all entries have the same name.  <br />
Thanks for your reply. <br />
My problem is that the main product is already released and my installation is an addon for this product which requires to add this setting.<br />
Any ideas?<br />
<br />
Edit: I talked to one of the devs. He told me that they just read the &quot;entry&quot;'s in a array and uses them. Of course, the .ini isnt nicely designed but I still need to fix this problem. :|</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 10:54</div></div><div class="posttext">You may use word functions header to find/replace the required value, however, I guess you understand that the INI is useless whatsoever.<br />
<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 11:18</div></div><div class="posttext">Originally posted by Red Wine <br />
You may use word functions header to find/replace the required value, however, I guess you understand that the INI is useless whatsoever.<br />
<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.3  <br />
<br />
Well my problem is that I don't know what to find bcs the value doesn't exists yet and has to been included to the section so that it looks something like this:<br />
<br />
[section]<br />
entry = whatever.dll<br />
entry = another.dll<br />
entry = andsoon.dll<br />
entry = myadded.dll<br />
<br />
On unInstall I could use a WordReplace function but I have currently no idea how to <br />
.) check if this entry was already written to the ini<br />
.) add the entry without destroying another value<br />
<br />
Thank you very much for your help so far, Red Wine!<br />
<br />
Edit: The programm itself (for which the INI settings for) has no problems parsing the INI file and using the values. The only problem is myself adding more ununique values.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 11:30</div></div><div class="posttext">Then remove the old INI (no matter if the entry is written or not) and install a new one which includes myadded.dll.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 11:34</div></div><div class="posttext">Originally posted by Red Wine <br />
Then remove the old INI (no matter if the entry is written or not) and install a new one which includes myadded.dll.  <br />
<br />
Also not possible bcs values could have been changed in this ini as well (its one big .ini file with settings for nearly all settings). :-|</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 11:43</div></div><div class="posttext">Hmm! The INI has only one section, or several?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 12:01</div></div><div class="posttext">Originally posted by Red Wine <br />
Hmm! The INI has only one section, or several? <br />
<br />
The Ini has serveral sections with unique names, but in the sections the names are not longer unique. :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 12:40</div></div><div class="posttext">What about this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th February 2008, 13:52</div></div><div class="posttext">Easiest solution is to loop through the existing file and compare each line with entry = myadded.dll$\r$\n. If that line  isn't found, seek to the end then write the new line.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">28th February 2008, 13:55</div></div><div class="posttext">Thanks for you replies. I will test the init.zip today (very special thanks!!) and report if its working for me. A dev told me that if he has to much time he will write a command-line util for me that handles this behaviour.<br />
<br />
Thanks all!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">28th February 2008, 14:11</div></div><div class="posttext">The example above works fine if the entry doesn't exist, though, it fails when the entry already exists.<br />
<br />
The following example should work in every case,</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>