<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Auto-uninstall old...Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Auto-uninstall old...Question NSIS Discussion" />
	
	<title> Auto-uninstall old...Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Auto-uninstall old...Question</div>
<hr />
<div class="pda"><a href="t-149310.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149310">Auto-uninstall old...Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jaschulz</div><div class="date">15th September 2003, 17:11</div></div><div class="posttext">This is from the &quot;Auto-uninstall old before installing new...&quot; script in the archive:<br />
<br />
uninst:<br />
  ClearErrors<br />
  ExecWait '$1'<br />
  IfErrors cont     ; if problems off the bat, yell again<br />
  <br />
  ; wait until the uninstaller is really not running anymore<br />
uninst_wait:<br />
  Sleep 500<br />
  FindWindow $0 &quot;&quot; &quot;${PROGRAM_NAME} Uninstall&quot;<br />
  IsWindow $0 uninst_wait uninst_wait<br />
  <br />
It looks to me as if the last line is an infinte loop.  Shouldn't it be:<br />
<br />
  IsWindow $0 uninst_wait &quot;&quot;<br />
<br />
Thanks,<br />
<br />
JAS</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">15th September 2003, 18:02</div></div><div class="posttext">Fixed that page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jaschulz</div><div class="date">15th September 2003, 18:16</div></div><div class="posttext">Here's the link:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=385&amp;instances=0,11</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">17th September 2003, 16:17</div></div><div class="posttext">Sorry for my question.....remember im a newbie.<br />
For this feature I need to have a INI file??<br />
Like:<br />
Page custom unInstall<br />
and,<br />
LangString TEXT_IOSTARTINSTALL_TITLE ${LANG_ENGLISH} &quot;Updating system files&quot;<br />
LangString TEXT_IOSTARTINSTALL_SUBTITLE ${LANG_ENGLISH} &quot;${MUI_PRODUCT} Uninstall previous software&quot;<br />
ReserveFile &quot;ioUnInstall.ini&quot;<br />
!insertmacro MUI_RESERVEFILE_UNINSTALLOPTIONS</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th September 2003, 16:22</div></div><div class="posttext">No, it's all in the .onInit function.<br />
This is called before the installer loads.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">18th September 2003, 02:48</div></div><div class="posttext">I have this error:<br />
1 warning:<br />
  label &quot;check&quot; not used</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">18th September 2003, 13:45</div></div><div class="posttext">The is no label called check in the code. You must have added it somewhere else.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">18th September 2003, 14:03</div></div><div class="posttext">I just did a copy and paste of the script from the link to my .onInit <br />
Function .onInit<br />
check:<br />
  ReadRegStr $1 HKCU<br />
&quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Parsimonia 2.1&quot;<br />
&quot;UninstallString&quot;<br />
<br />
Other changed = ${PROGRAM_NAME} now they are Parsimonia 2.1<br />
<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">19th September 2003, 14:46</div></div><div class="posttext">There is the &quot;check:&quot; in the script....autouninstall script.<br />
If Im going to insert &quot;;&quot; before &quot;check:&quot;  I dont have any error.<br />
But doesnt work, can someone help me.<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">19th September 2003, 15:17</div></div><div class="posttext">It doesn't look like the check label is being used. Did you define PROGRAM_NAME etc.?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">19th September 2003, 16:11</div></div><div class="posttext">No any more :)<br />
!define PROD_NAME &quot;Parsimonia&quot;<br />
!define PROD_VER &quot;2.1&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">emiste7</div><div class="date">19th September 2003, 16:12</div></div><div class="posttext">Sorry I forgot my script</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">19th September 2003, 16:23</div></div><div class="posttext">So what is exactly the problem? The FindWindow caption detection is not that reliable. You should check that PROGRAM_NAME is defined and similar to the uninstaller window caption.<br />
<br />
I don't think that extra check is really required.<br />
<br />
You can also close the installer and make the uninstaller run the installer again.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>