<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Adding a menu item to Opera, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Adding a menu item to Opera NSIS Discussion" />
	
	<title> Adding a menu item to Opera [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Adding a menu item to Opera</div>
<hr />
<div class="pda"><a href="t-261495.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=261495">Adding a menu item to Opera</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cmbll</div><div class="date">10th December 2006, 14:04</div></div><div class="posttext">hi, i'm pretty newbie to nsis and got some questions about search in file functions, the forum search feature haven't helped me<br />
here is how opera menu file looks like (Opera\defaults\standard_menu.ini):<br />
...<br />
[Link Popup Menu]<br />
<br />
Item, 67389		= Open link<br />
Item, 53018		= Open link in new page<br />
Item, 53019		= Open link in background page<br />
%the_place_i_need_to_put_an_item_to%<br />
--------------------1<br />
...<br />
so i need to put a string to that place, the only method how to do that is finding the postition of '[Link Popup Menu]' and increase the line number pointer by 5<br />
could some1 provide a sample code that implements that? thanx in advance!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">10th December 2006, 18:14</div></div><div class="posttext">Compile the following script:<br />
outfile 'test.exe'<br />
<br />
section -<br />
writeinistr &quot;$EXEDIR\test.ini&quot; &quot;Link Popup Menu&quot; &quot;Item, 00000&quot; &quot;This is New Item&quot;<br />
sectionend <br />
Save the following example as test.ini in the same place with the compiled script:<br />
[Link Popup Menu]<br />
<br />
Item, 67389 = Open link<br />
Item, 53018 = Open link in new page<br />
Item, 53019 = Open link in background page<br />
%the_place_i_need_to_put_an_item_to%</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cmbll</div><div class="date">10th December 2006, 20:47</div></div><div class="posttext">wow, thamx man! never thought it would be so easy )<br />
i got another question now, how to implement the check whether the item is already added? (e.g. if user would run the installer twice)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">10th December 2006, 20:56</div></div><div class="posttext">http://nsis.sourceforge.net/Docs/AppendixE.html#E.3.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">10th December 2006, 20:58</div></div><div class="posttext">You don't need that. It's not possible for the same record to be added twice. Run the test several times to see by your self :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cmbll</div><div class="date">10th December 2006, 23:58</div></div><div class="posttext">thanks 4 the answers fellas ) now i got some troubles with quotations<br />
the string i need 2 add is:<br />
<br />
Item, &quot;Text&quot; = &quot;Go to Page, &quot;javascript:document.location='http://url/?url='+escape('%l')&quot;&quot;<br />
<br />
the method described by kichik here http://forums.winamp.com/showthread.php?s=&amp;threadid=95854&amp;highlight=quotation isn't suitable cuz i need both single and double quotation marks in the output string<br />
got any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">11th December 2006, 00:31</div></div><div class="posttext">Hi cmbll!<br />
<br />
Just escape quotation marks with $\&quot;<br />
<br />
WriteINIStr &quot;inifile.ini&quot; &quot;???&quot; &quot;Item, $\&quot;Text$\&quot;&quot; &quot;$\&quot;Go to Page, $\&quot;java script:document.location='http://url/?url='+escape('%l')$\&quot;$\&quot;&quot;<br />
<br />
Cheers<br />
<br />
Bruno<br />
<br />
edit:<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.1<br />
<br />
Instead using the escaping trick you could use ` (backward single quote).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">11th December 2006, 08:44</div></div><div class="posttext">writeinistr &quot;$EXEDIR\test.ini&quot; &quot;Link Popup Menu&quot; 'Item, &quot;Text&quot;' \<br />
`&quot;Go to Page, &quot;java script:document.location='http://url/?url='+escape('%l')&quot;&quot;`</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cmbll</div><div class="date">11th December 2006, 15:29</div></div><div class="posttext">thanks dudes ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>