<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" changing text, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  changing text NSIS Discussion" />
	
	<title> changing text [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  changing text</div>
<hr />
<div class="pda"><a href="t-253551.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=253551">changing text</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Potz</div><div class="date">18th August 2006, 19:29</div></div><div class="posttext">I was wondering how I would change some text. Not really changing to much but more like adding to it.  Here is an example of what I need to do.<br />
<br />
The user would enter a word<br />
<br />
Company<br />
<br />
and the code would change it to<br />
<br />
/C/o/m/p/a/n/y<br />
<br />
I would know how to do this with something like java but I am still not to familiar with NSIS to be able to do this.  I would appreciate any help... and some examples :) thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">18th August 2006, 19:54</div></div><div class="posttext">you need to loop through the string:<br />
<br />
<br />
StrCpy $0 &quot;Company&quot; # set your custom string<br />
StrCpy $1 &quot;/&quot; # set the character to insert<br />
StrLen $2 $0 # get the length of your string to loop through it<br />
StrCpy $3 &quot;0&quot; # init the loop counter<br />
StrCpy $4 &quot;&quot; # init output var<br />
<br />
loop: # begin of the loop<br />
 StrCpy $5 $0 1 $3 # copy one character of your string to a temp var (offset $3 counts up)<br />
 StrCpy $4 &quot;$4$1$5&quot; # add the character extracted and the one to insert everytime<br />
 IntOp $3 $3 + 1 # increase counter/offset<br />
 IntCmp $2 $3 end loop #stop the loop if end of string reached, else continue<br />
end:<br />
# at this stage, $4 will be &quot;/C/o/m/p/a/n/y&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Potz</div><div class="date">18th August 2006, 20:31</div></div><div class="posttext">Awesome thanks a lot :)  I do have one question though<br />
<br />
I am having a problem running it twice in the same function.  here is my code of what I am trying to do...<br />
<br />
<br />
Function leaveRegEdit<br />
<br />
ReadINIStr $6 &quot;$PLUGINSDIR\Regedit.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
ReadINIStr $7 &quot;$PLUGINSDIR\Regedit.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
<br />
StrCpy $0 &quot;$6&quot; # set your custom string<br />
StrCpy $1 &quot;/&quot; # set the character to insert<br />
StrLen $2 $0 # get the length of your string to loop through it<br />
StrCpy $3 &quot;0&quot; # init the loop counter<br />
StrCpy $4 &quot;&quot; # init output var<br />
<br />
loop: # begin of the loop<br />
StrCpy $5 $0 1 $3 # copy one character of your string to a temp var (offset $3 counts up)<br />
StrCpy $4 &quot;$4$1$5&quot; # add the character extracted and the one to insert everytime<br />
IntOp $3 $3 + 1 # increase counter/offset<br />
IntCmp $2 $3 end loop #stop the loop if end of string reached, else continue<br />
end:<br />
# at this stage, $4 will be &quot;/C/o/m/p/a/n/y&quot;<br />
<br />
Push &quot;/I/I/M/S&quot; #text to be replaced<br />
Push $4 #replace with<br />
Push all #replace all occurrences<br />
Push all #replace all occurrences<br />
Push &quot;$INSTDIR\WARN\Dashboard\dashboard.properties&quot; #file to replace in<br />
Call AdvReplaceInFile<br />
<br />
<br />
StrCpy $0 &quot;$7&quot; # set your custom string<br />
StrCpy $1 &quot;/&quot; # set the character to insert<br />
StrLen $2 $0 # get the length of your string to loop through it<br />
StrCpy $3 &quot;0&quot; # init the loop counter<br />
StrCpy $4 &quot;&quot; # init output var<br />
<br />
loop: # begin of the loop<br />
StrCpy $5 $0 1 $3 # copy one character of your string to a temp var (offset $3 counts up)<br />
StrCpy $4 &quot;$4$1$5&quot; # add the character extracted and the one to insert everytime<br />
IntOp $3 $3 + 1 # increase counter/offset<br />
IntCmp $2 $3 end loop #stop the loop if end of string reached, else continue<br />
end:<br />
# at this stage, $4 will be &quot;/C/o/m/p/a/n/y&quot;<br />
<br />
Push &quot;/C/A/S/P/O/D&quot; #text to be replaced<br />
Push $4 #replace with<br />
Push all #replace all occurrences<br />
Push all #replace all occurrences<br />
Push &quot;$INSTDIR\WARN\Dashboard\dashboard.properties&quot; #file to replace in<br />
Call AdvReplaceInFile<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">18th August 2006, 23:13</div></div><div class="posttext">Change your second &quot;loop:&quot; to &quot;loop2:&quot; and your second &quot;IntCmp $2 $3 end loop&quot; to &quot;IntCmp $2 $3 end loop2&quot;.<br />
<br />
Hope this helps.<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">19th August 2006, 16:37</div></div><div class="posttext">You'll also need to do the same with the end lables.  (You can't have 2 lables named the same within your script.)<br />
<br />
Other alternatives:<br />
1) You could make each loop it's own function<br />
<br />
2) You can use logiclib's ${do} and ${loop} commands instead of lables (To see how this is done, look at the logiclib.nsi in the ${NSISDIR}\examples folder)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Potz</div><div class="date">21st August 2006, 13:43</div></div><div class="posttext">ok I decided to make them in there own functions... but the installer crashes when it gets to this function.  I am trying to get this resolved today so any help would be verry much apreciated.  Here is my code...<br />
<br />
<br />
;show regEdit gui---------------------------<br />
Function regEdit<br />
<br />
!insertmacro MUI_HEADER_TEXT &quot;Edit the Registry,&quot; &quot;read instruction below for this step.&quot;<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;RegEditing.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;RegEditing.ini&quot;<br />
<br />
FunctionEnd<br />
;-----------------------------------------------------<br />
<br />
;Edit Generic NBC Reg Key------------------------------<br />
Function leaveRegEdit<br />
<br />
Call Regedit1<br />
Call Regedit2<br />
<br />
FunctionEnd<br />
<br />
Function Regedit1<br />
<br />
ReadINIStr $6 &quot;$PLUGINSDIR\Regedit.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
<br />
StrCpy $0 &quot;$6&quot; # set your custom string<br />
StrCpy $1 &quot;/&quot; # set the character to insert<br />
StrLen $2 $0 # get the length of your string to loop through it<br />
StrCpy $3 &quot;0&quot; # init the loop counter<br />
StrCpy $4 &quot;&quot; # init output var<br />
<br />
loop: # begin of the loop<br />
StrCpy $5 $0 1 $3 # copy one character of your string to a temp var (offset $3 counts up)<br />
StrCpy $4 &quot;$4$1$5&quot; # add the character extracted and the one to insert everytime<br />
IntOp $3 $3 + 1 # increase counter/offset<br />
IntCmp $2 $3 end loop #stop the loop if end of string reached, else continue<br />
end:<br />
# at this stage, $4 will be &quot;/C/o/m/p/a/n/y&quot;<br />
<br />
Push &quot;/I/I/M/S&quot; #text to be replaced<br />
Push $4 #replace with<br />
Push all #replace all occurrences<br />
Push all #replace all occurrences<br />
Push &quot;$INSTDIR\WARN\Dashboard\NBC\Generic NBC reg keys.reg&quot; #file to replace in<br />
Call AdvReplaceInFile<br />
FunctionEnd<br />
<br />
Function Regedit2<br />
<br />
ReadINIStr $7 &quot;$PLUGINSDIR\Regedit.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
StrCpy $0 &quot;$7&quot; # set your custom string<br />
StrCpy $1 &quot;/&quot; # set the character to insert<br />
StrLen $2 $0 # get the length of your string to loop through it<br />
StrCpy $3 &quot;0&quot; # init the loop counter<br />
StrCpy $4 &quot;&quot; # init output var<br />
<br />
loop1: # begin of the loop<br />
StrCpy $5 $0 1 $3 # copy one character of your string to a temp var (offset $3 counts up)<br />
StrCpy $4 &quot;$4$1$5&quot; # add the character extracted and the one to insert everytime<br />
IntOp $3 $3 + 1 # increase counter/offset<br />
IntCmp $2 $3 end loop1 #stop the loop if end of string reached, else continue<br />
end:<br />
# at this stage, $4 will be &quot;/C/o/m/p/a/n/y&quot;<br />
<br />
Push &quot;/C/A/S/P/O/D&quot; #text to be replaced<br />
Push $4 #replace with<br />
Push all #replace all occurrences<br />
Push all #replace all occurrences<br />
Push &quot;$INSTDIR\WARN\Dashboard\NBC\Generic NBC reg keys.reg&quot; #file to replace in<br />
Call AdvReplaceInFile<br />
FunctionEnd<br />
;------------------------------------------------------</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>