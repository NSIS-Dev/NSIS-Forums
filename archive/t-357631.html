<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Nsdialogs skipping pages backwards, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Nsdialogs skipping pages backwards NSIS Discussion" />
	
	<title> Nsdialogs skipping pages backwards [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Nsdialogs skipping pages backwards</div>
<hr />
<div class="pda"><a href="t-357631.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=357631">Nsdialogs skipping pages backwards</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">shadowpoa</div><div class="date">19th March 2013, 20:16</div></div><div class="posttext">Hello,<br />
<br />
I'm used to create installers with nsis, but now im facing a problem.<br />
<br />
What I currently have:<br />
A full working installer with about 6 custom pages, the only default page is instfiles, all others are custom pages.<br />
<br />
What I want to achieve:<br />
When clicking the &quot;back&quot; buttom, go back 2 pages (custom pages)<br />
<br />
The problem:<br />
<br />
Im using some code of the forum, calling the function 'RelGotoPage' to skip pages forward and back.<br />
When I use the function on leave function, it works ok, but when I use in conjunction with ${NSD_OnBack} it does not work.<br />
<br />
I even tried to set a variable ($CP_SKIP) at OnBack function and the parse with the code below to go one page back, but no success.<br />
$CP_SKIP will be set to 1 only when user click back at certain page.<br />
<br />
If I use the RelGotoPage at OnBack it does not work and neither on the page's code.<br />
The onback function is called correctly, i've tested with a messagebox<br />
<br />
Here the snippet to back 1 (one) page, written on a custom page (before the create function)<br />
${IF} $CP_SKIP == &quot;1&quot;<br />
   StrCpy $R9 &quot;-1&quot;<br />
  Call RelGotoPage<br />
  STRCPY $CP_SKIP 0<br />
${ENDIF}<br />
<br />
Function to skip pages:<br />
<br />
Function RelGotoPage<br />
  IntCmp $R9 0 0 Move Move<br />
  StrCmp $R9 &quot;X&quot; 0 Move<br />
  StrCpy $R9 &quot;120&quot;<br />
<br />
  Move:<br />
  SendMessage $HWNDPARENT &quot;0x408&quot; &quot;$R9&quot; &quot;&quot;<br />
FunctionEnd<br />
<br />
If more information needed, just ask.<br />
<br />
ps: sorry the bad english, i'm brazilian</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th March 2013, 13:07</div></div><div class="posttext">What you can do instead is call Abort before calling nsDialogs if a custom variable is 1. This will skip the page when going backwards (or forwards). You can set the variable to 1 in OnBack on the next page.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shadowpoa</div><div class="date">1st April 2013, 16:35</div></div><div class="posttext">I accidentally found the answer doing just like you sad when testing something else with nsWindows (showing a window on next click and keep the page until user clicks a buttom) simulating a message box.<br />
<br />
Thank you Afrow, I always read your posts because your tip's are great!<br />
<br />
If anyone have the same problem, just try this.<br />
<br />
Anyway, problem solved, doing just like Afrow said.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>