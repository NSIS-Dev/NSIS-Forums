<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" GetOptions question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  GetOptions question NSIS Discussion" />
	
	<title> GetOptions question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  GetOptions question</div>
<hr />
<div class="pda"><a href="t-261358.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=261358">GetOptions question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">8th December 2006, 17:33</div></div><div class="posttext">Hi, I noticed that GetOptions macro is giving me different results depending on the presence os spaces on path name. For example, c:\path gives me 'result' and c:\pa th gives me '&quot;result&quot;' (with &quot;s). I got errors depending on which path I use command line params with NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">9th December 2006, 09:18</div></div><div class="posttext">Well, $CMDLINE is the culprit. The second part of params does not have quotations marks if path name does not have spaces. Is this a bug?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">9th December 2006, 10:20</div></div><div class="posttext">Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro GetParameters<br />
!insertmacro GetOptions<br />
<br />
Section<br />
	${GetParameters} $0<br />
	${GetOptions} '$0' '/LOG=' $1<br />
<br />
	MessageBox MB_OK '$$0={$0}$\n$$1={$1}'<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">9th December 2006, 16:53</div></div><div class="posttext">Pardon me, Instructor! I meant GetParameters and not GetOptions macro, sorry!<br />
<br />
As I said in my last post, the problem is with $CMDLINE and not with the macros.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">9th December 2006, 17:07</div></div><div class="posttext">Test this sript in 2 different directories, one like 'c:\test' and another like 'c:\test 2'. You will see that one result has quotations marks and the other does not have.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">9th December 2006, 18:50</div></div><div class="posttext">What the contents of the $CMDLINE?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th December 2006, 10:00</div></div><div class="posttext">Let me explain in another way. The contents of $CMDLINE (and of GetParameters macro too) will differ depending on the folder name. If there are spaces in path name where the installer is (like c:\test 2\installer.exe), when I drag and drop a file (for example test.txt) in the same path over installer.exe $CMDLINE will be '&quot;C:\test 2\commandline.exe&quot; &quot;C:\test 2\test.txt&quot;' and GetParameters macro '&quot;C:\test 2\test.txt&quot;'. If I change the folder's name to c:\test and drag and drop test.txt again over installer.exe the $CMDLINE will be '&quot;C:\test\commandline.exe&quot; C:\test\test.txt' and GetParameters macro 'C:\test\test.txt' (without quotations marks).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">10th December 2006, 10:36</div></div><div class="posttext">'&quot;C:\test 2\commandline.exe&quot; &quot;C:\test 2\test.txt&quot;' -&gt; '&quot;C:\test 2\test.txt&quot;'<br />
'&quot;C:\test\commandline.exe&quot; C:\test\test.txt' -&gt; 'C:\test\test.txt'<br />
It is correct GetParameters simply cut first part that contain exe name.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th December 2006, 11:25</div></div><div class="posttext">I know that. I have put an if statement to overcome these extra quotations marks depending on spaces in the path. I just wonder why $CMDLINE is giving me theses different results.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">10th December 2006, 16:04</div></div><div class="posttext">The system (OS) adds the quotes; $CMDLINE is just showing you what it gets.<br />
<br />
I did a couple little tests to try to prove this, first by using Notepad (drag a file onto it, and then check its CMDLINE by using Process explorer), and also by dragging files into a cmd window. Both experiments show quotes being added when the pathnames include spaces.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">10th December 2006, 17:10</div></div><div class="posttext">Thanks for the info, demiller9. I have fixed my script to deal with this strange OS behavior.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>