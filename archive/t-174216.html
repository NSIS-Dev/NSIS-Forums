<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File save, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File save NSIS Discussion" />
	
	<title> File save [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File save</div>
<hr />
<div class="pda"><a href="t-174216.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=174216">File save</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">26th March 2004, 17:07</div></div><div class="posttext">I would like to know how we can make to look if the files which we want to extract are already present in a file. And if yes, then it is copied and stuck in a file back up.<br />
<br />
Thank you :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th March 2004, 17:11</div></div><div class="posttext">Use IfFileExists.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">26th March 2004, 17:49</div></div><div class="posttext">I'am sorry but I don't know any syntax... I'am a noob and I must learn with examples :) lol. Can you say me just the syntax? Thanks you<br />
<br />
<br />
<br />
<br />
<br />
P.S Is my English good :D?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th March 2004, 18:07</div></div><div class="posttext">You can find the syntax of this command in the users manual.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">26th March 2004, 19:43</div></div><div class="posttext">I found:<br />
<br />
file_to_check_for jump_if_present [jump_otherwise]<br />
<br />
and I read the explication but it don't better help me... I replace that: file_to_check_for jump_if_present by my file's name? but what is it [jump_otherwise] ?<br />
<br />
edit: I found too:<br />
[/SILENT] [/FILESONLY] filespec_on_destsys destination_path [size_of_files_in_kb]<br />
and<br />
path_to_create<br />
<br />
I don't know where I must put it and what Replace...<br />
Thank ou :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th March 2004, 20:00</div></div><div class="posttext">IfFileExists &quot;$INSTDIR\myfile.exe&quot; 0 notexist<br />
<br />
  ;Backup the file here<br />
<br />
notexist:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">27th March 2004, 13:42</div></div><div class="posttext">For example:<br />
<br />
IfFileExists &quot;$INSTDIR\logo.bmp&quot; 0 notexist<br />
<br />
     &quot;$INSTDIR\SavesMdl\logo.bmp&quot;<br />
<br />
     notexist:<br />
<br />
I am not sure that &quot;$INSTDIR\SavesMdl\logo.bmp&quot; is good...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th March 2004, 14:56</div></div><div class="posttext">That looks like a valid path.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">27th March 2004, 17:58</div></div><div class="posttext">Sorry but I don't understand... :/ Can you write me an example? That looks like a valid path and you don't know what I have to do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th March 2004, 18:08</div></div><div class="posttext">&gt;&gt;  &quot;$INSTDIR\SavesMdl\logo.bmp&quot;<br />
<br />
this is only parameter, where is the function ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th March 2004, 20:23</div></div><div class="posttext">Use CopyFiles for the backup.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">28th March 2004, 10:49</div></div><div class="posttext">So:<br />
<br />
<br />
IfFileExists &quot;$INSTDIR\logo.bmp&quot; 0 notexist<br />
[/SILENT] [/FILESONLY] &quot;logo.bmp&quot; &quot;$INSTDIR\SavesMdl\logo.bmp&quot; [100]<br />
notexist:?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th March 2004, 11:10</div></div><div class="posttext">No, you should use the CopyFiles command with the syntax as described in the manual, not copy the syntax description.<br />
CopyFiles /SILENT &quot;$INSTDIR\SavesMdl\logo.bmp&quot; &quot;$INSTDIR\SavesMdl\logo-backup.bmp&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">28th March 2004, 12:36</div></div><div class="posttext">Ok thx I begin to understand :) But for what I replace that: filespec_on_destsys? I saw, you had twice the same thing and I don't understand that. And what is /FILEONLY then?<br />
My new code:<br />
<br />
SetOutPath &quot;$INSTDIR&quot;<br />
  SetOverwrite on<br />
     File &quot;logo.bmp&quot;<br />
     IfFileExists &quot;$INSTDIR\logo.bmp&quot; 0 notexist<br />
CreateDirectory &quot;$INSTDIR\SavesMdl\&quot;<br />
CopyFiles /SILENT &quot;$INSTDIR\SavesMdl\logo.bmp&quot; &quot;$INSTDIR\SavesMdl\logo-backup.bmp&quot;<br />
notexist:<br />
<br />
But even if the file exists not it created a save, moreover which does not work. It is written during the install &quot;Copy failed &quot;... What is the problem?<br />
thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th March 2004, 14:27</div></div><div class="posttext">filespec_on_destsys is the source for the file copy. /FILEONLY is a flag that is useful if you want to copy a whole folder but not the folders inside that folder.<br />
<br />
You didn't say that it was the backup directory for the file. Try:<br />
<br />
SetOutPath &quot;$INSTDIR&quot;<br />
<br />
IfFileExists &quot;$INSTDIR\logo.bmp&quot; 0 notexist<br />
<br />
  CreateDirectory &quot;$INSTDIR\SavesMdl&quot;<br />
  CopyFiles /SILENT &quot;$INSTDIR\logo.bmp&quot; &quot;$INSTDIR\SavesMdl\logo.bmp&quot;<br />
<br />
notexist:<br />
<br />
File &quot;logo.bmp&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">28th March 2004, 16:59</div></div><div class="posttext">Thank you very much that works! But I would like to know if it is possible actually an IfFileExists generally, not file by file, simply &quot; if A file exists to copy IT... &quot; <br />
Thank you very much :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th March 2004, 17:13</div></div><div class="posttext">If you want to do the same thing for many files, create a macro or function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">28th March 2004, 17:34</div></div><div class="posttext">Sorry but I don't see what do you want to say...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th March 2004, 18:44</div></div><div class="posttext">Please read the manual for information about function and macros. This forum is not a script writing service.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">28th March 2004, 18:50</div></div><div class="posttext">yes lol I know but I think a look not on the good page... I read here: http://nsis.sourceforge.net/Docs/<br />
That's good?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">28th March 2004, 19:16</div></div><div class="posttext">That is indeed the users manual. A macro can be used to insert certain commands multiple times, with different parameters.<br />
<br />
Example:<br />
!macro FILEWITHBACKUP FILE<br />
<br />
  IfFileExists &quot;$INSTDIR\${FILE}&quot; 0 notexist<br />
<br />
    CreateDirectory &quot;$INSTDIR\SavesMdl&quot;<br />
    CopyFiles /SILENT &quot;$INSTDIR\${FILE}&quot; &quot;$INSTDIR\SavesMdl\${FILE}&quot;<br />
<br />
  notexist:<br />
<br />
  File &quot;${FILE}&quot;<br />
<br />
!macroend<br />
!insertmacro FILEWITHBACKUP &quot;logo.bmp&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:05</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:10</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:11</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:11</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:11</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:11</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anduriel</div><div class="date">29th March 2004, 19:13</div></div><div class="posttext">Thx I tested that but I have a very big problem, I need three different roads for the same file: the problem during the compilation:<br />
<br />
<br />
IfFileExists: $&quot;INSTDIR\maps\cs_deagle5.bsp? 0: CopyFiles notexist: silent ) $&quot;INSTDIR\maps\cs_deagle5.bsp - &gt; &quot; $INSTDIR\CS-Combo\save_map\maps\cs_deagle5.bsp &quot;, size=0KB File: &quot;maps\cs_deagle5.bsp&quot; - &gt; no File found.<br />
<br />
<br />
Here it looks if the file exists, that it is good. <br />
Here is where it going to copy it, but it resumes the same road, what distorts everything! <br />
Here it is the file which is not found because it is not situated! I simple used !insertmacro FILEWITHBACKUP &quot; map\cs_deagle.bsp... <br />
<br />
Thx</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>