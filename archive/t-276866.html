<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Install directory dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Install directory dialog NSIS Discussion" />
	
	<title> Install directory dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Install directory dialog</div>
<hr />
<div class="pda"><a href="t-276866.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=276866">Install directory dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">3rd September 2007, 14:48</div></div><div class="posttext">Hello,<br />
<br />
  I have searched in the forum, FAQ, etc, but could not find a solution to my problem.<br />
  Most clients, that use the installer, use the default installation top directory (C:\). However, a few need to change this top directory to D: or even a directory (like E:\system\deploy).<br />
  In the installation procedure that problem would be easy to solve. I could show a page with a button that shows a directory dialog, as I have seen in the examples directory shiped with NSIS.<br />
  But, after the first install, users need only to upgrade (this is performed many times). In the upgrader (a completely different program) I would like to check if the default directory was used in the installation, if not, then use a dialog to let the user choose the correct directory.<br />
  I could use the Windows registry to save the installation dir, but most clients never use the installer (and this is desired, the possibility to not use the installer).<br />
  I could resume the question like this: How to create an if statement that shows a choose directory dialog<br />
<br />
Thanks for the attention, and sorry for typing too much text. Any help is appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">3rd September 2007, 14:54</div></div><div class="posttext">If they don't use the installer, how do they install ? Direct unzipping somewhere ? And in this case, you don't have a way to know where they did unzip the application ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">3rd September 2007, 15:02</div></div><div class="posttext">Hi, thanks for the reply.<br />
<br />
The answer is: yes. The installer is quite recent in my company. Most clients installed the application in the old fashion. I could not distribute the installer instead of the upgrader for some reasons:<br />
- Installer is much bigger due to support third-party software <br />
- They do different things (installer create databases, create users, create services)<br />
<br />
I could use a page with the directory button always, but I would like to make the upgrader the most automatic as possible (nowdays the user just run it and receive a confirmation message if everything was ok, it is fully automatic). <br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">3rd September 2007, 15:51</div></div><div class="posttext">You didn't answer my second question..<br />
If the user installed the application manually by unzipping it, how will you know the application folder ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">3rd September 2007, 15:54</div></div><div class="posttext">Oh, sorry.<br />
<br />
There is a default installation directory. I would check if this directory is created. If the directory is not there, then I could not know where the user unzipped, that is the reason I need the browser dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">4th September 2007, 13:58</div></div><div class="posttext">alright, then I would suggest in your Upgrader that you use<br />
InstallDir with that default directory<br />
In the &quot;pre&quot; function for the directory page, you could check if the files have already been installed at the $INSTDIR location (the default directory).<br />
If yes, you could skip the directory page by using Abort</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gustavo-serra</div><div class="date">4th September 2007, 20:37</div></div><div class="posttext">Thanks, I search for the abort function and saw this:<br />
<br />
Skipping Pages (http://nsis.sourceforge.net/Skipping_Pages) <br />
<br />
Thanks so much. :-)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>