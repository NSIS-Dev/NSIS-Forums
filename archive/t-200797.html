<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MySQL Service Problems, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MySQL Service Problems NSIS Discussion" />
	
	<title> MySQL Service Problems [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MySQL Service Problems</div>
<hr />
<div class="pda"><a href="t-200797.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=200797">MySQL Service Problems</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mikej0h</div><div class="date">1st December 2004, 10:40</div></div><div class="posttext">After trying all possible combinations I hope you guys can help me out with this frustrating problem.<br />
<br />
When I try to register a service, it does not insert the service, or it inserts a faulty commandline.<br />
The service-commandline must be as following (or must look like it):<br />
&quot;C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqld-nt&quot; --defaults-file=&quot;C:\Program Files\MySQL\MySQL Server 4.1\my.ini&quot; MySQL41<br />
<br />
<br />
Here an example of one of the lines I tried(it were more  strings, but they all give the same problem).<br />
ExecWait `&quot;$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld&quot; --install MySQL41 --defaults-file=&quot;$INSTDIR\logres.ini&quot;`<br />
<br />
This creates a service but with the wrong commandline (which causes it cannot be started). The commandline is like this:<br />
&quot;C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqld&quot; &quot;--defaults-file=C:\Program Files\Logres\Promis Project\logres.ini&quot; MySQL41<br />
<br />
<br />
Can anybody help me out with a working solution ?<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">scrose</div><div class="date">1st December 2004, 19:43</div></div><div class="posttext">I'm taking a wild guess at this. Perhaps quotations need to go around each parameter in its entirety.ExecWait '&quot;$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld&quot; &quot;--install MySQL41&quot; &quot;--defaults-file=$INSTDIR\logres.ini&quot;'Or perhaps you could try reversing the order of the parameters.ExecWait '&quot;$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld&quot; &quot;--defaults-file=$INSTDIR\logres.ini&quot; &quot;--install MySQL41&quot;'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mikej0h</div><div class="date">1st December 2004, 22:59</div></div><div class="posttext">I've tried your suggestion but it just doing nothing. No service appeared in the serviceslist.<br />
<br />
I cannot change the lineup of the commands because of its prefixed at that way. According to the MySQL Manual I have to execute this in a command prompt:<br />
mysqld --install MySQL41 --defaults-file=&quot;C:\Program Files\MySQL\MySQL Server 4.1\my.ini&quot;<br />
<br />
When I copy/paste that into a command windows, it works when I use it in NSIS it's not working.<br />
<br />
Are there any other people who succesfully added a mysql service to windows ?<br />
Or if you have other suggestions.... :)<br />
<br />
Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">2nd December 2004, 14:01</div></div><div class="posttext">Try this:<br />
<br />
ExpandEnvStrings $0 &quot;%COMSPEC%&quot;<br />
nsExec::Exec '&quot;$0&quot; /C &quot;$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld&quot; &quot;--defaults-file=C:\Program Files\Logres\Promis Project\logres.ini&quot;' MySQL41<br />
<br />
Or some variation, but keeping the ExpandEnvStrings, and the nsExec::Exec &quot;$0&quot; /C bit.<br />
<br />
have fun :)<br />
<br />
[edited code slightly, missed a closing quotation mark]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mikej0h</div><div class="date">2nd December 2004, 14:36</div></div><div class="posttext">Thanks for you reply, I tried your code. But it does not add anything to the registry/services list.<br />
I made some changes to your code, in hope it would work, but it doesn't.<br />
<br />
I tried the following code:<br />
ExpandEnvStrings $0 &quot;%COMSPEC%&quot;<br />
nsExec::Exec '&quot;$0&quot; /C &quot;$PROGRAMFILES\MySQL\MySQL Server 4.1\bin\mysqld&quot; --install MySQL41 --defaults-file=`&quot;C:\Program Files\Logres\Promis Project\logres.ini&quot;`'<br />
 <br />
According to the manual of MySQL first the executable must call itself, then the option &quot;--install &lt;servicename&gt;&quot; and then I need to feed it with a config file where the quotations must be within the program path. Like this:<br />
--defaults-file=&quot;C:\Program Files\Logres\Promis Project\logres.ini&quot;<br />
<br />
I'm out off suggestions and ideas, anybody ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mikej0h</div><div class="date">4th December 2004, 13:18</div></div><div class="posttext">Well, we solved the problem.<br />
The solution was to use a different my.ini file. The first code I posted also worked after changing the .ini file.<br />
<br />
So people if your MySQL service-installation fails to install, just use an other my.ini file.<br />
The problem was not caused by NSIS in any way.<br />
<br />
<br />
Keywords (for people who are seaching): MySQL, quotes, quotations, service, service-installation.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>