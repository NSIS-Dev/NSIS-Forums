<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Call Function from DLL witch returns True or False, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Call Function from DLL witch returns True or False NSIS Discussion" />
	
	<title> Call Function from DLL witch returns True or False [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Call Function from DLL witch returns True or False</div>
<hr />
<div class="pda"><a href="t-303522.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=303522">Call Function from DLL witch returns True or False</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">marcel-slip</div><div class="date">26th February 2009, 09:36</div></div><div class="posttext">Hello,<br />
<br />
I have a library. Dll file that has the function of checking the key in the registry. Library returns the value true or false. Can this somehow be supported by NSIS?<br />
Here is an code with InstallShield:<br />
<br />
<br />
prototype BOOL werk.werk(); <br />
prototype NUMBER werk.WriteToReg(POINTER, POINTER, POINTER);<br />
prototype NUMBER werk.CreateRegKey();<br />
<br />
function BOOL VerifySerial()<br />
STRING szFileName;<br />
ã€€ã€€NUMBER nResult;<br />
ã€€ã€€BOOL bVerified;<br />
beginã€€ <br />
ã€€ szFileName = SUPPORTDIR ^ &quot;some.dll&quot;;<br />
<br />
ã€€ nResult = UseDLL(szFileName);<br />
ã€€ if (nResult=0) then <br />
ã€€ã€€ã€€bVerified = some.some();<br />
ã€€ elseã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<br />
ã€€ ã€€bVerified = FALSE;<br />
ã€€ ã€€MessageBox(@MSG_DLLERROR, INFORMATION);<br />
ã€€ endif;<br />
ã€€ nResult = UnUseDLL(szFileName);<br />
ã€€<br />
ã€€ return bVerified;<br />
end;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th February 2009, 11:12</div></div><div class="posttext">Call it with the System plug-in.<br />
<br />
Edit: Or convert it to an NSIS plug-in.<br />
Or write the code in NSIS.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">marcel-slip</div><div class="date">26th February 2009, 12:01</div></div><div class="posttext">Thank you for your reply.<br />
I don't know how to do this. I do not have access to the source libraries and at the worst I have enough time to perform;)<br />
Any example?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th February 2009, 12:11</div></div><div class="posttext">There are many many examples of the 3 options I have outlined. You will find them here, on the Wiki and with your NSIS installation.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">marcel-slip</div><div class="date">27th February 2009, 09:07</div></div><div class="posttext">Hello<br />
<br />
<br />
I'm not as good with nsis-a. I tried to do is this:<br />
<br />
<br />
Function some<br />
  SetOutPath c:\temp<br />
  File test.dll         <br />
System::Call 'test.dll::work() b(r0)'<br />
DetailPrint 'Path: &quot;$0&quot;'<br />
Dumpstate::debug ;test variable<br />
FunctionEnd<br />
 <br />
<br />
<br />
<br />
I do not see any effect, the variable 0 has no value assigned</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">27th February 2009, 09:18</div></div><div class="posttext">there is no such thing as b, you need to read the system plugin readme, you can't just make up types!<br />
<br />
the windows BOOL type is 4 bytes, use i<br />
the c++ bool type is 1 byte</div></div><hr />


<div class="post"><div class="posttop"><div class="username">marcel-slip</div><div class="date">27th February 2009, 10:22</div></div><div class="posttext">Thank you very much for your help.<br />
The following function works:<br />
<br />
Function werk<br />
  SetOutPath c:\temp<br />
  File test.dll                  <br />
  System::Call 'test.dll::work() i() .r3' <br />
FunctionEnd<br />
 <br />
<br />
The $3 is the state of 0-folse or 1-true</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>