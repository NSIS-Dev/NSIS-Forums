<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Registry with full permission, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Registry with full permission NSIS Discussion" />
	
	<title> Registry with full permission [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Registry with full permission</div>
<hr />
<div class="pda"><a href="t-359460.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=359460">Registry with full permission</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">winman2004</div><div class="date">15th April 2013, 15:13</div></div><div class="posttext">I am trying to give full permission for a registry in nsis but its not working.Below is a sample code.<br />
WriteRegStr HKEY_LOCAL_MACHINE &quot;SOFTWARE\Demo\&quot; &quot;mydemo&quot; &quot;abc&quot;<br />
    AccessControl::GrantOnRegKey HKEY_LOCAL_MACHINE &quot;SOFTWARE\Demo\&quot; &quot;PC116\Users&quot; &quot;FullAccess&quot; <br />
<br />
I tried doing it in a windows XP PC. I tried using REGINI using a vbscript which gives full permission for user &quot;Everyone&quot;.So can anyone help me on this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th April 2013, 00:58</div></div><div class="posttext">http://stackoverflow.com/questions/16017546/registry-with-full-permission</div></div><hr />


<div class="post"><div class="posttop"><div class="username">winman2004</div><div class="date">17th April 2013, 14:34</div></div><div class="posttext">As you have told i have done the coding in NSIS and created registry.<br />
When i checked permission for that registry in regedit(by right clicking node and then permission) the users group has got full permission.<br />
Then i used a vb6 code by using RegSetValueEx function which writes and modifies the registry value of registry which i created.<br />
Now in windows 8 and windows 7 PC i just run the vb6 code(i created exe file) and found that registry is not changing for users.Even if i run in administrator the registry is not changing.<br />
when i run the same using run as administrator the registry changes.<br />
So what is the use of the access control if i am not able to change with just a user login?<br />
I think windows 8 is done such a way that registry cannot be edited without running it as administrator.<br />
There is also an interesting this if i change registry manually by using regedit and then changing key manually then it works.I mean access control helps in this case. But any developer will be wanting to change registry using code which it does not allow.<br />
So please help me on this.<br />
Also see the thread here (http://stackoverflow.com/questions/16062343/regsetvalueex-requires-run-as-administrator-to-work) for more information<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Davemays</div><div class="date">28th April 2013, 15:48</div></div><div class="posttext">I am using Windows 7 and trying to set the permissions on a Software key that I have created.<br />
<br />
<br />
SetRegView 64<br />
  AccessControl::GrantOnRegKey HKLM &quot;SOFTWARE\test&quot; &quot;S-1-5-32-545&quot; &quot;FullAccess&quot;<br />
    Pop $R0<br />
  ${If} $R0 == error<br />
    Pop $R0<br />
    DetailPrint `AccessControl error: $R0`<br />
  ${EndIf}<br />
<br />
Doing this I get the error:<br />
<br />
Wrote HKLM\SOFTWARE\test<br />
AccessControl error: Cannot build new access control list. Error code: 1332<br />
Completed<br />
<br />
Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Davemays</div><div class="date">28th April 2013, 16:09</div></div><div class="posttext">Found what the problem was, it doesn't like the &quot; &quot; of the SID for some reason.<br />
<br />
!define StringSID_BUILTIN_Users S-1-5-32-545<br />
AccessControl::GrantOnRegKey HKLM &quot;SOFTWARE\test&quot; &quot;(${StringSID_BUILTIN_Users})&quot; &quot;FullAccess&quot;<br />
<br />
Works like a charm now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">28th April 2013, 20:23</div></div><div class="posttext">Your first post used &quot;SID-xxx&quot; but the required format is &quot;(SID-xxx)&quot;, one set of quotes should not matter if there are no spaces, the compiler will strip them away so they are never passed to the plugin...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>