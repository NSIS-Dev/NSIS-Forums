<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" detecting a logical drive, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  detecting a logical drive NSIS Discussion" />
	
	<title> detecting a logical drive [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  detecting a logical drive</div>
<hr />
<div class="pda"><a href="t-148030.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148030">detecting a logical drive</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mdm</div><div class="date">3rd September 2003, 20:02</div></div><div class="posttext">I can use FindFirst or IfFileExists with an argument of &quot;D:\*.*&quot; and find if there is something in the D:\ drive. What about if D:\ exists, but is empty? How can I detect it?<br />
<br />
mdm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th September 2003, 14:04</div></div><div class="posttext">You can use:<br />
<br />
System::Call &quot;kernel32::GetDriveTypeA(t 'D:\') i .s&quot;<br />
Pop $0<br />
StrCmp $0 0 doesntExist<br />
StrCmp $0 1 doesntExist<br />
# exists code here<br />
doesntExist:<br />
# doesn't exist code here</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mdm</div><div class="date">4th September 2003, 16:42</div></div><div class="posttext">Thanks, <br />
mdm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">atsuk</div><div class="date">6th October 2003, 17:48</div></div><div class="posttext">hi!<br />
but what about detecting all logical drivers(HD's)?<br />
 I would need something, that would detect, if computer has more than one logical driver, and if it has more, then put all avaliable drivers to variables. <br />
And if it is possible, what i asked, then maybe this scipt could put driver of default program files($PROGRAMFILES) to sertain variable.<br />
<br />
i really hope, that it is possible..tnx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th October 2003, 17:52</div></div><div class="posttext">That is possible. Check MSDN for the GetDriveType return values.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">atsuk</div><div class="date">6th October 2003, 18:22</div></div><div class="posttext">ok, but i'm really not familiar to MSDN...haven't used it :S<br />
 could you please help me with a part of nsi script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th October 2003, 18:30</div></div><div class="posttext">These are the return values from the MSDN page on &quot;Using the GetDriveType Function&quot; (http://msdn.microsoft.com/archive/default.asp?url=/archive/en-us/dnarvbtips/html/msdn_msdn165.asp)<br />
<br />
Value / Drive Type<br />
0 - Unknown media type<br />
1 - No such root directory exists<br />
DRIVE_REMOVABLE - Drive can be removed<br />
DRIVE_FIXED - Drive cannot be removed<br />
DRIVE_REMOTE - Network disk drive<br />
DRIVE_CDROM - CD-ROM disk drive<br />
DRIVE_RAMDISK - RAM disk drive<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">6th October 2003, 18:47</div></div><div class="posttext">DRIVE_CDROM = 5<br />
DRIVE_FIXED = 3<br />
DRIVE_RAMDISK = 6<br />
DRIVE_REMOTE = 4<br />
DRIVE_REMOVABLE = 2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th October 2003, 19:08</div></div><div class="posttext">There is already a function on the Archive that does this for you, no need to reinvent the wheel:<br />
<br />
http://nsis.sourceforge.net/archive/viewpage.php?pageid=277</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">6th October 2003, 22:22</div></div><div class="posttext">no need to reinvent the wheel<br />
<br />
Hehe.<br />
<br />
Maybe I didn't add the DRIVE_RAMDISK = 6, DRIVE_REMOTE = 4. I didn't know they are from... If &quot;More is better&quot; I will add those at once today or tomorrow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">atsuk</div><div class="date">10th October 2003, 21:20</div></div><div class="posttext">hi..sry, but i expressed myself wrongly :$ what i really needed as a result was a names or letters of hard drives. for example, i have in my pc sutch driver letters: <br />
A:\ - Floppy ; C:\ - HD ; D:\ - HD ; E:\ - HD ; F:\ - CD-R ; G:\ - CD-WR <br />
(c:\ and d:\ are partitions of one hard driver). The results what i would need script to give are:<br />
$R1 - a:\<br />
$R2 - c:\<br />
$R3 - d:\<br />
$R4 - e:\<br />
$R5 - f:\<br />
$R6 - g:\<br />
or if it is possible, then only letters of hard drivers (c:\ ; d:\ ; e:\ )<br />
so, is this possible? tnx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">10th October 2003, 21:29</div></div><div class="posttext">In the callback function:<br />
<br />
You can use any variables, but the $R0 have a function result, the drive letter detected.But to do this below, you have to include your code in this callback function, because the number of variables can vary, so:<br />
<br />
Function Callback<br />
<br />
  # In your code, the variable $R0 will be the hard drive letter<br />
  # detected<br />
<br />
  # Push &quot;go&quot; if want to go<br />
  # Push &quot;stop&quot; to stop<br />
<br />
FunctionEndThe code will be executed EVERYTIME that detects a hard drive.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>