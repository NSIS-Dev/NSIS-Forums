<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Customizing the welcome message, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Customizing the welcome message NSIS Discussion" />
	
	<title> Customizing the welcome message [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Customizing the welcome message</div>
<hr />
<div class="pda"><a href="t-264032.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264032">Customizing the welcome message</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">19th January 2007, 23:22</div></div><div class="posttext">How do I go about changing the welcome/instructions text in my installer?  And possibly add a bitmap and/or icon?  (I have not yet found this in the help areas I've searched, or I would not be posting such a simple question.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">19th January 2007, 23:31</div></div><div class="posttext">Discussed already a few threads below,<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=263442</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">19th January 2007, 23:56</div></div><div class="posttext">Well, thanks, but I do not see how that thread answers my questions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 00:02</div></div><div class="posttext">Okay, I guess you're referring me to the Modern User Interface, which I must admit I almost -- but didn't quite -- examine.  Thank you very much.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 00:07</div></div><div class="posttext">I'm definitely referring to MUI :)<br />
I redirected you to that page mainly because of the attached picture (even from UMUI) so we'd know about what we're talking :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 00:49</div></div><div class="posttext">Related to this situation:  The name of my software includes an ampersand (&amp;), such as This&amp;That.  If I use a double ampersand, i.e. This&amp;&amp;That, the name is rendered correctly everywhere but in the title bar, where the string is rendered exactly as typed in my nsi file.  Any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 01:18</div></div><div class="posttext">you may use caption instead<br />
e.g.<br />
name &quot;this&amp;&amp;this&quot;<br />
caption &quot;this&amp;this&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 01:43</div></div><div class="posttext">I sure appreciate the help, Red Wine!  But I still have a lingering ampersand problem.  When I cancel the  installation, I get the message &quot;Are you sure you want to quit This&amp;&amp;That setup?&quot;<br />
<br />
The only place I am now using the double ampersand is in the name.<br />
<br />
!define PRODUCT_NAME &quot;This&amp;&amp;That&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 10:40</div></div><div class="posttext">Sorry Steve perhaps I'm not getting your point correctly,<br />
if you need to use the product name on several different places in your script and the single &amp; causes problems everywhere but the name, you may use,<br />
!define PRODUCT_NAME &quot;This&amp;That&quot;<br />
!define PRODUCT_DESCRIPTION &quot;This&amp;&amp;That&quot;<br />
Name &quot;${PRODUCT_NAME}&quot;<br />
on every other place where you're referring that it causes the problem use ${PRODUCT_DESCRIPTION}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 13:32</div></div><div class="posttext">Thank you.  I am further experimenting with your suggestions.  However, let me state myself more clearly:<br />
<br />
After I tried your prevous directions:<br />
<br />
name &quot;this&amp;&amp;this&quot;<br />
caption &quot;this&amp;this&quot; ,<br />
<br />
all was well except for the double ampersand in the Cancel message.  I don't know how to control that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th January 2007, 13:41</div></div><div class="posttext">Use:Name &quot;this&amp;this&quot; &quot;this&amp;&amp;this&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 13:47</div></div><div class="posttext">See my last post above, should do the trick.<br />
Either remove caption or use caption &quot;${PRODUCT_NAME}&quot; or something else that you may desire as caption.<br />
Now messagebox's title should be equal with the name definition.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 13:52</div></div><div class="posttext">It seems that everything is being rendered correctly now, after using kichik's suggestion.  Thank you both very much!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 15:22</div></div><div class="posttext">Coming back now to the bigger picture, I want to completely replace the Welcome page text.  In looking for an example of this, the closest I have come is http://forums.winamp.com/printthread.php?threadid=263388.<br />
<br />
Could I get a little direction in how to proceed?  Or perhaps point me to a clear example of this very thing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 16:22</div></div><div class="posttext">After experimenting with variations on the link I mentioned above, I am starting to see the light.  I don't want to be posting unnecessary questions, so I'll see how far I can get before asking any more.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 19:26</div></div><div class="posttext">I have implemented a few lines for my Welcome page, based on http://forums.winamp.com/printthrea...hreadid=263388.<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE 'WelPre'<br />
; Welcome page<br />
!insertmacro MUI_PAGE_WELCOME<br />
 . . .<br />
Function WelPre<br />
WriteINIStr '$PLUGINSDIR\iospecial.ini' 'Settings' 'NumFields' '2'<br />
WriteINIStr '$PLUGINSDIR\iospecial.ini' 'Field 2' 'Text' 'This&amp;&amp;That is ready to install.'<br />
WriteINIStr '$PLUGINSDIR\iospecial.ini' 'Field 3' 'Text' 'Click &quot;Next&quot; to get going!'<br />
FunctionEnd<br />
<br />
But I can't seem to get something similar to work for the Directory page.  My testing looks like this:<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE 'WelPreDir'<br />
; Directory page<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
 . . .<br />
Function WelPreDir<br />
WriteINIStr '$PLUGINSDIR\ioB.ini' 'Field 1' 'Text' 'Now choose the install directory.'<br />
WriteINIStr '$PLUGINSDIR\ioB.ini' 'Field 2' 'Text' 'field 2 test'<br />
WriteINIStr '$PLUGINSDIR\ioB.ini' 'Field 3' 'Text' 'field 3 test'<br />
FunctionEnd<br />
<br />
Any comments?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 19:41</div></div><div class="posttext">Steve allow me to say that you seem a bit confused so far :)<br />
To change the Welcome/Finish page title and text you need<br />
MUI_PAGE_HEADER_TEXT text<br />
Text to display on the header of the page.<br />
<br />
MUI_PAGE_HEADER_SUBTEXT text<br />
Subtext to display on the header of the page.<br />
<br />
See MUI documentation http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html<br />
Also see this wiki page,<br />
http://nsis.sourceforge.net/Adding_3_Extra_Text_Lines_on_MUI_Welcome-Finish_Pages<br />
<br />
For all other pages see these wiki pages to get a frame on how you may deal with their controls,<br />
http://nsis.sourceforge.net/Changing_Title_and_Subtitle_Fonts_on_MUI_Pages<br />
http://nsis.sourceforge.net/Demonstrating_Page%27s_Custom_Functions_Pre_Show_Leave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">20th January 2007, 20:30</div></div><div class="posttext">Thanks, Red Wine.  This too is enlightening, but I still don't see a relationship with the text below the subtitle, i.e. in the gray area of the Directory page.  How do I get to that area?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">20th January 2007, 20:47</div></div><div class="posttext">Open the MUI WelcomeFinish.nsi example and add the following line along with other Language Strings descriptions<br />
  LangString ^DirText ${LANG_ENGLISH} &quot;my text&quot;<br />
Should be repeated for every language that included in your installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">21st January 2007, 06:03</div></div><div class="posttext">I guess what I was looking for was <br />
MUI_WELCOMEPAGE_TEXT, etc.  Your comments led me to relevant documentation.<br />
<br />
Thank you again for helping me as I have been taking my first deeper look into NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">21st January 2007, 06:58</div></div><div class="posttext">guess what I was looking for was<br />
MUI_WELCOMEPAGE_TEXT, etc. Your comments led me to relevant documentation.Certainly this is what you were looking related to welcome/finish page. I got confused with the text from MUI readme while I was trying to copy/paste a part in order to show the way to go! Sorry :)<br />
What about the directory page, did you change the DirText?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">21st January 2007, 14:49</div></div><div class="posttext">Yes, I did change the text on the Directory page too, as well as all bitmaps.  But I have not yet found it possible to place my gradient bitmap across the entire window without wiping out the text.  So maybe I need to learn some more about using .ini files and laying out the areas of the dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">25th January 2007, 23:37</div></div><div class="posttext">What would I have to do to make this ioSpecial.ini configuration show the text of Field 2 against the wide bitmap, rather than apparently being wiped out by the bitmap?<br />
<br />
[Settings]<br />
Rect=1044<br />
NumFields=3<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=-1 ;109<br />
Top=0<br />
Bottom=193<br />
Flags=RESIZETOFIT<br />
[Field 2]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=10<br />
[Field 3]<br />
Type=label<br />
Left=120<br />
Right=315</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 00:02</div></div><div class="posttext">Edit: From InstallOptions manual,<br />
<br />
TRANSPARENT:<br />
<br />
Used by &quot;Bitmap&quot; controls. Hides every pixel with the same color as of the top left pixel. This allows to see-through to controls behind it. This flag doesn't work well with a combination of the RESIZETOFIT flag and bitmaps with more than 256 colors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">26th January 2007, 01:35</div></div><div class="posttext">Thank you for that, Red Wine.  Here's what I now have, using a pure red bitmap that fits the window, and again the text is no longer visible:<br />
<br />
[Settings]<br />
Rect=1044<br />
NumFields=3<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=-1  ;109<br />
Top=0<br />
Bottom=193<br />
Flags=TRANSPARENT   ;| RESIZETOFIT<br />
[Field 2]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=10<br />
[Field 3]<br />
Type=label<br />
Left=120<br />
Right=315<br />
<br />
What am I missing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 05:14</div></div><div class="posttext">You haven't specified all needed values regarding to width/height e.g.<br />
top=10<br />
bottom=20</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">26th January 2007, 11:15</div></div><div class="posttext">Which field are you referring to?  Except for a few changes, this is the actual ioSpecial.ini file.  Why would I need to change dimensions of any field other than the bitmap in order to see the text?<br />
<br />
I did experiment after your response, but I still can't see anything but red where there had been text.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 11:55</div></div><div class="posttext">Hmm, I didn't realize that you were referring to iospecial.ini that is used by MUI in order to display the welcome/finish pages.<br />
This file edited dynamically by MUI macro system within .onGuiInit function, (see the file system.nsh at contrib\modern ui folder).<br />
You need either edit the file dynamically within welcome/finish pages custom functions pre/show, or use MUI_SPECIALINI, (see MUI manual chapter Customize standard dialogs).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">24th October 2007, 20:13</div></div><div class="posttext">Here are my notes about customizing the welcome message on MUI_PAGE_WELCOME  via defining MUI_WELCOMEPAGE_TEXT.<br />
My task was to add some text after string $(MUI_TEXT_WELCOME_INFO_TEXT) (This wizard will guide you...). Problem was that this string uses $\r and $\n but MUI_WELCOMEPAGE_TEXT expects \r and \n. (If you pass original $(MUI_TEXT_WELCOME_INFO_TEXT) value then it is trimmed after first \r\n.) Easy solution was to use StrReplace (http://nsis.sourceforge.net/wiki/StrReplace) and delete 'control' characters.<br />
I feel ashamed that my first attempt was editing the ioSpecial.ini. :)<br />
Finally, after comparing this two ways I decide to create another label because I want to have the added text BOLD. :cool:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>