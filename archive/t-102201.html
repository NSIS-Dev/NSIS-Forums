<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" FileOpen and FileWrite, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  FileOpen and FileWrite NSIS Discussion" />
	
	<title> FileOpen and FileWrite [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  FileOpen and FileWrite</div>
<hr />
<div class="pda"><a href="t-102201.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=102201">FileOpen and FileWrite</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MysticEmpires2k</div><div class="date">27th August 2002, 10:16</div></div><div class="posttext">I want Open a file an than i want Write a Strin i this file.But how is the Problem.<br />
<br />
<br />
Function open<br />
FileOpen $0 $INSTDIR\dir1\file1.cfg w<br />
FileWrite $0 Read this<br />
FunctionEnd<br />
<br />
Soory for my bad english.<br />
Soory for the so simpel Problem but i was a beginner.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th August 2002, 10:37</div></div><div class="posttext">What is the problem?<br />
<br />
A few possible reasons for whatever problem it is:<br />
1) You forgot FileClose<br />
2) If you want to add to the file use the a mode (append) instead of w (write).<br />
3) You must seek to the end of the file using FileSeek if you don't wish to overwrite anything.<br />
4) You forgot to quote Read This. The line should be FileWrite $0 &quot;Read This&quot;. If you don't quote, NSIS will treat this as two strings and the word &quot;This&quot; will be treated as the maximum length of the string to write.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MysticEmpires2k</div><div class="date">27th August 2002, 10:54</div></div><div class="posttext">Function open<br />
FileOpen $0 $INSTDIR\dir1\file1.cfg a<br />
FileSeek $0 offset END $1<br />
FileWrite $0 &quot;Read This&quot;<br />
FileClose $0<br />
FunctionEnd<br />
<br />
<br />
1 warning:<br />
  install function &quot;open&quot; not referenced - zeroing code (6-10) out</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th August 2002, 11:05</div></div><div class="posttext">Functions don't get executed by the installer just like that. Sections are executed according to the user selection, callback functions (.on* and un.on*) get called according to special events, but regular functions must be called manaually using Call.<br />
<br />
Offset should be a number. If you wish to seek to the end use `FileSeek $0 0 END`.<br />
<br />
Here is an example script for the functions stuff:<br />
<br />
Name &quot;asd&quot;<br />
OutFile &quot;asdsad.exe&quot;<br />
<br />
Function doStuff<br />
  DetailPrint &quot;i am doing stuff...&quot;<br />
FunctionEnd<br />
<br />
Section &quot;install files&quot;<br />
  ; install files<br />
  ; write to the registry<br />
  Call doStuff ; do other stuff<br />
  ; install some more<br />
  ; Call doStuff ; do other stuff again<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MysticEmpires2k</div><div class="date">27th August 2002, 11:24</div></div><div class="posttext">ok thx it is super.<br />
<br />
but ihave test it.<br />
<br />
File before<br />
<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
<br />
File after<br />
<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsfRead This<br />
<br />
But the file must be<br />
<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
sdfsdfsf<br />
Read This<br />
<br />
The srcibt is.<br />
<br />
Section open<br />
FileOpen $0 $INSTDIR\cstrike\autoexec.cfg a<br />
FileSeek $0 0 END<br />
FileWrite $0 &quot;Read This&quot;<br />
FileClose $0<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th August 2002, 11:29</div></div><div class="posttext">If you want to make sure it goes down a line just add $\r$\n to the beginning of the line. FileWrite $0 &quot;$\r$\nNew line!&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>