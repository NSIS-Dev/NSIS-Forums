<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" WriteUninstaller doesn't ever return error, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  WriteUninstaller doesn't ever return error NSIS Discussion" />
	
	<title> WriteUninstaller doesn't ever return error [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  WriteUninstaller doesn't ever return error</div>
<hr />
<div class="pda"><a href="t-252911.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=252911">WriteUninstaller doesn't ever return error</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">9th August 2006, 15:12</div></div><div class="posttext">Hi all,<br />
<br />
I noticed that the WriteUninstaller is always returning success even if it fails.<br />
<br />
Let's consider the following code uninstaller-generator.nsi (everything we have in the installer part is to just generate the uninstaller):<br />
<br />
Section -Post<br />
  WriteUninstaller &quot;$EXEDIR\uninst.exe&quot;<br />
SectionEnd<br />
<br />
<br />
Samples of failures:<br />
a) When running the exe generated when building the uninstaller-generator.nsi above, if I already have an uninst.exe in the $EXEDIR which is read-only, the WriteUninstaller fails, but still it returns success<br />
<br />
b) If I change the code to:<br />
<br />
Section -Post<br />
  WriteUninstaller &quot;K:\uninst.exe&quot;<br />
SectionEnd<br />
<br />
and K: doesn't exist on my system the WriteUninstaller fails, but actually again it returns success.<br />
<br />
Is this is a bug? I mean for this kind of installer, I'll never be able to check if there was an error when running it right?<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th August 2006, 11:04</div></div><div class="posttext">How exactly does it return success? The following piece of code works fine for me.WriteUninstaller $TEMP\uninst.exe<br />
SetFileAttributes $TEMP\uninst.exe READONLY<br />
ClearErrors<br />
WriteUninstaller $TEMP\uninst.exe<br />
${If} ${Errors}<br />
  DetailPrint &quot;errors&quot;<br />
${Else}<br />
  DetailPrint &quot;no errors&quot;<br />
${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">21st August 2006, 14:27</div></div><div class="posttext">Hi kichik,<br />
<br />
I actually got confused between error codes and error levels. I thought that that if any instruction fails, then the error code returned by default is different than 0. Seems it's not the case. Seems that you need to check it yoursef with IfErrors and in case use SetErrorLevel so that it will return a value different than 0.<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>