<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI Components Page -- How can I control features checked and highlighted, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI Components Page -- How can I control features checked and highlighted NSIS Discussion" />
	
	<title> MUI Components Page -- How can I control features checked and highlighted [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI Components Page -- How can I control features checked and highlighted</div>
<hr />
<div class="pda"><a href="t-256132.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=256132">MUI Components Page -- How can I control features checked and highlighted</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">24th September 2006, 21:15</div></div><div class="posttext">I'm using MUI with the Components page. The desired features show up, both checked, and the first one is highlighted. Is there a way to control which features are selected and/or highlighted by default?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th September 2006, 23:10</div></div><div class="posttext">To make a section not selected by default, use the /o switch in the section definition line.<br />
<br />
To highlight a different section by default, send the appropriate message to the tree view in the show callback function of the components page. WinMessages.nsh contains definitions of messages, including tree view messages, iirc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">25th September 2006, 01:30</div></div><div class="posttext">Thanks. Sorry I somehow overlooked the /o switch info in the documentation.<br />
<br />
Regarding sending a tree view message, can you point me to some background info to read about using window messages? I don't see anything in the docs about them, other than elliptical references here and there; and I have no idea of the context of WinMessages.nsh. I see all the !defines but I have no idea how to make use of them, and tree-view is mentioned only in the comments.<br />
<br />
Is it possible to highlight no section by default? That's all I'm trying to do, cause I think the user might confuse the highlight with the check.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2006, 10:38</div></div><div class="posttext">Windows messages are probably best described in MSDN. All you need to know is that it's a form of communicating between windows. You can send the tree view a message saying &quot;select nothing&quot;.<br />
<br />
Use the following as your components page show function.!define TVM_SELECTITEM 0x110B<br />
!define TVGN_CARET 0x0009<br />
<br />
Function compShow<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $0 $0 1032<br />
SendMessage $0 ${TVM_SELECTITEM} ${TVGN_CARET} 0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">10th October 2006, 01:35</div></div><div class="posttext">Thanks, kichik. Just got around to trying this, and it does exactly what I need.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">15th June 2007, 04:35</div></div><div class="posttext">Resurrecting this old thread. Kichik gave me a solution for un-highligting sections in my Components page during installation. Now I'd like to do the same thing for uninstalling, but calling the same function doesn't work. I assume one of the values needs to be different, but I'm still completely in the dark as to what all the numbers and symbols in the solution mean, probably cause I'm not a Windows programmer. Can someone help me make this work for uninstalling as well?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">15th June 2007, 05:27</div></div><div class="posttext">Are you getting compiler errors? If so, make a copy of that function and rename it un.compShow</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">15th June 2007, 05:39</div></div><div class="posttext">That sounds like it may be the problem, but I can't seem to do what you suggested. Here's the function<br />
<br />
Function un.compShow<br />
   FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
   GetDlgItem $0 $0 1032<br />
   SendMessage $0 ${TVM_SELECTITEM} ${TVGN_CARET} 0<br />
FunctionEnd<br />
<br />
And here's how I invoke it<br />
<br />
!define MUI_UNPAGE_CUSTOMFUNCTION_SHOW un.compShow<br />
!insertmacro MUI_UNPAGE_COMPONENTS<br />
<br />
And here's what the compiler says<br />
<br />
uninstall function &quot;un.compShow&quot; not referenced - zeroing code (284-288) out<br />
<br />
This is exactly how I do it for the installation components page, except of the &quot;UN&quot; prefixes. I don't understand why the compiler thinks I haven't referenced the function</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MidnightJava</div><div class="date">15th June 2007, 05:55</div></div><div class="posttext">I found the problem<br />
<br />
I needed to change<br />
<br />
!define MUI_UNPAGE_CUSTOMFUNCTION_SHOW un.compShow<br />
<br />
to<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW un.compShow<br />
<br />
i.e. got rid of the &quot;UN&quot; in the macro name<br />
<br />
I had put the &quot;UN&quot; in earlier when it wasn't working right, not realizing I just needed to use it in the function name. I thought the compiler would warn me if I got it wrong, but I'm just now realizing that since it's a define and not a macro name, there's no way the compiler would know.<br />
<br />
Thanks for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>