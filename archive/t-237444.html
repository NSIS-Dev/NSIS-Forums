<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Check boxes not working, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Check boxes not working NSIS Discussion" />
	
	<title> Check boxes not working [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Check boxes not working</div>
<hr />
<div class="pda"><a href="t-237444.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=237444">Check boxes not working</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mike U</div><div class="date">7th February 2006, 21:01</div></div><div class="posttext">Hi,<br />
<br />
I have tried several scripts with checkboxes including the one below. For some reason when the checkbox is checked, the functions associated with the checkbox are not running.<br />
Any Ideas??<br />
<br />
<br />
;Pages<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_LICENSE $(MUILicense)<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
  !insertmacro MUI_PAGE_DIRECTORY<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
; Finish page<br />
CheckBitmap &quot;${NSISDIR}\Contrib\Graphics\Checks\aquachecks.bmp&quot;<br />
!define MUI_FINISHPAGE_RUN<br />
!define MUI_FINISHPAGE_RUN_NOTCHECKED<br />
!define MUI_FINISHPAGE_RUN_TEXT &quot;Edit Agent.ini Configuration File&quot;<br />
!define MUI_FINISHPAGE_RUN_FUNCTION &quot;runfile&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME<br />
!define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT &quot;Edit Default.txt Configuraton File&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME_FUNCTION &quot;runfile2&quot;<br />
<br />
Function &quot;runfile&quot;<br />
  ExecWait &quot;$INSTDIR\${PROJ_NAME}Agent.ini&quot;<br />
FunctionEnd<br />
<br />
Function &quot;runfile2&quot;<br />
  ExecWait &quot;$INSTDIR\${PROJ_NAME}default.txt&quot;<br />
FunctionEnd<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE PreFinishPage<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowFinishPage<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveFinishPage<br />
<br />
Function PreFinishPage<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Settings&quot; &quot;NumFields&quot; &quot;6&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Type&quot; &quot;CheckBox&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Text&quot; &quot;Start ${PROJ_NAME} Service&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Left&quot; &quot;120&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Right&quot; &quot;315&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Top&quot; &quot;130&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;Bottom&quot; &quot;140&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;State&quot; &quot;0&quot;<br />
  ;line above: Initial state of the control: 0=Unchecked, 1=Checked<br />
FunctionEnd<br />
<br />
Function ShowFinishPage<br />
  GetDlgItem $MUI_TEMP1 $MUI_HWND 1205 ;ID for the 6th InstallOptions control<br />
  SetCtlColors $MUI_TEMP1 &quot;&quot; &quot;${MUI_BGCOLOR}&quot;<br />
FunctionEnd<br />
<br />
Function LeaveFinishPage<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $MUI_TEMP1 &quot;ioSpecial.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
  StrCmp $MUI_TEMP1 1 Checked Unchecked<br />
  Checked:			    nsSCM::start /NOUNLOAD &quot;${PROJ_NAME}&quot;<br />
  Goto end<br />
  Unchecked:<br />
  end:<br />
FunctionEnd<br />
<br />
!insertmacro MUI_PAGE_FINISH<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_COMPONENTS<br />
!insertmacro MUI_UNPAGE_INSTFILES</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">7th February 2006, 23:03</div></div><div class="posttext">Have you tried adding another command to your &quot;Checked&quot; label? There's only one command there, so do you know for sure that there's not a problem with that plugin?<br />
<br />
Suggestion:<br />
...<br />
Checked:<br />
 MessageBox MB_OK &quot;checkbox state is ${MUI_TEMP1}&quot;<br />
 nsSCM::start /NOUNLOAD &quot;${PROJ_NAME}&quot;<br />
 Goto end<br />
...<br />
<br />
If the debug message box displays, then the problem is probably with the plugin call. If not, then the state of the checkbox must not be getting read correctly.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mike U</div><div class="date">8th February 2006, 14:39</div></div><div class="posttext">I have it working now. I forgot the back slash before the files:<br />
<br />
Function &quot;runfile&quot;<br />
ExecWait &quot;$INSTDIR\${PROJ_NAME}\Agent.ini&quot;<br />
FunctionEnd<br />
<br />
Function &quot;runfile2&quot;<br />
ExecWait &quot;$INSTDIR\${PROJ_NAME}\default.txt&quot;<br />
FunctionEnd<br />
<br />
<br />
Ahhh the simple things!<br />
<br />
A problem I am still having is the 3rd checkbox is to start a service if checked. I have confirmed the check box works properly, but the nsSCM::start /NOUNLOAD &quot;${FILE_NAME}&quot; does not start the service.<br />
<br />
I install the service else where in the install as below and it works properly. Why won't the service start? I can also start it manually within the SCM with no problems.<br />
<br />
   nsSCM::Install /NOUNLOAD &quot;${FILE_NAME}&quot; &quot;${FILE_NAME} service&quot; 16 3 \<br />
                           &quot;$INSTDIR\${FILE_NAME}\${FILE_EXEC} /service&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>