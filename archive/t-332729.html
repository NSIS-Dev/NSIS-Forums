<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" I just want to copy fileS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  I just want to copy fileS NSIS Discussion" />
	
	<title> I just want to copy fileS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  I just want to copy fileS</div>
<hr />
<div class="pda"><a href="t-332729.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332729">I just want to copy fileS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jay_m</div><div class="date">22nd July 2011, 05:43</div></div><div class="posttext">I need to distribute files to my customers.  They are stored in the shared user folder<br />
<br />
EX: C:\Users\Public\Documents\FOURLEAF\<br />
\MACHINE\SAMPLE.CON<br />
\MACHINE\OTHER.TMT<br />
\FOLLOWER\SETTING\MAINFILE.SPT<br />
<br />
The folder structure will always be the same (at least to start) as will the file extensions.  The file names will vary with each customer.  I would like to create an executable that will simply copy these files into the folders.  Assume that the user will always have admin privileges.<br />
<br />
I want the easist way to package up these files and send them to my customers.  I have looked at other extracting tools and NSIS looks good for what I want.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">22nd July 2011, 06:10</div></div><div class="posttext">To learn NSIS, start with NSIS\Examples\Example1.nsi and Example2.nsi. Find out what all the commands do and why. (Use the command reference, http://nsis.sourceforge.net/Docs/Chapter4.html )  Once you've done that, you'll be well underway to being able to answer your own question(s).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jay_m</div><div class="date">22nd July 2011, 13:34</div></div><div class="posttext">I know that there are examples, and am capable of using them to teach myself the language.  I just have such a simple case and want to get started that I hoped someone would be able to help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">22nd July 2011, 14:01</div></div><div class="posttext">If you need to package multiple files in the installer, how about just using a wildcard?<br />
File &quot;C:\Users\Public\Documents\FOURLEAF\MACHINE\*.CON&quot;<br />
<br />
Either way, these forums aren't about writing installers for other people, it's about helping people learning/using the language to solve specific issues. Particularly for beginners, this means we point to the manual whenever applicable - we prefer to teach people the proverbial fishing, rather than force-feed them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jay_m</div><div class="date">22nd July 2011, 18:43</div></div><div class="posttext">Ok here is what I have so far....<br />
<br />
; Basic.nsi<br />
;<br />
; This script will install mastercam machine definitions in standard locations<br />
<br />
; The name of the installer<br />
Name &quot;MLC Post Installer&quot;<br />
<br />
; Output filname<br />
OutFile &quot;MLCPostSetup.exe&quot;<br />
 <br />
Section &quot;Copy&quot;<br />
<br />
; Change user context to ALL USERS<br />
SetShellVarContext all<br />
<br />
; Copy machine defs<br />
SetOutPath &quot;$DOCUMENTS\shared mcamx5\CNC_MACHINES\&quot;<br />
File *.control-5<br />
File *.lmd-5<br />
File *.mmd-5<br />
File *.rmd-5<br />
<br />
; Copy post files<br />
SetOutPath &quot;$DOCUMENTS\shared mcamx5\lathe\Posts&quot;<br />
File *.pst<br />
<br />
SectionEnd<br />
<br />
Now what I need a way to include the .lmd-5, .mmd-5, .rmd-5 only if they exist.  There will only be on or the other files.  Then I need to adjust where the &quot;post&quot; file get installed based on whether the .lmd-5, .mmd-5, or .rmd-5 files are included.  The post file will be in ..\lathe\Posts for .lmd-5, ..\mill\Posts for .mmd-5 and ..\router\Posts for rmd-5.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">22nd July 2011, 22:44</div></div><div class="posttext">I think you want to do something like this...<br />
!include LogicLib.nsh<br />
...<br />
; Copy machine defs<br />
SetOutPath &quot;$DOCUMENTS\shared mcamx5\CNC_MACHINES\&quot;<br />
File *.control-5<br />
${If}{FileExists} *.lmd-5<br />
   File *.lmd-5<br />
   strcpy $0 lathe<br />
${EndIf}<br />
${If}{FileExists} *.mmd-5<br />
   File *.mmd-5<br />
   strcpy $0 mill<br />
${EndIf}<br />
${If}{FileExists} *.rmd-5<br />
   File *.rmd-5<br />
   strcpy $0 router<br />
${EndIf}<br />
<br />
; Copy post files<br />
SetOutPath &quot;$DOCUMENTS\shared mcamx5\$0\Posts&quot;<br />
File *.pst<br />
<br />
<br />
The compiler will include the ?md-5 files for all three machine types (lathe, mill, router), but will only extract the one that has existing files. This won't work right for new installations; I'd recommend using the Component page to select mill/lathe/router and put each into its own section. You can use the radio button logic to be sure that only one gets selected.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jay_m</div><div class="date">26th July 2011, 14:01</div></div><div class="posttext">Thanks Don!<br />
<br />
I am pretty full this week, but I will get back on it next week.  Looks like it will work.  It is always a difficult process learning a new language when you want to do the most basic stuff.:D<br />
<br />
One question, you said it won't work for new installations?  Is this if the folders do not exist?  And could I do a check &quot;if exists ....&quot; to modify the behavior if the folder does not exist. <br />
<br />
Of course this really shouldn't be a problem because that folder structure will ALWAYS be there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">26th July 2011, 15:42</div></div><div class="posttext">The folder structure is not the problem (SetOutPath would create the structure), the problem is that the code needs to see existing files to decide which machine type you have (mill/router/lathe) and thus the correct files to extract.<br />
<br />
Adding the component page and letting the user choose the machine would do it; you could detect their machine if the installation already exists and pre-set the components for them.<br />
<br />
Don</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>