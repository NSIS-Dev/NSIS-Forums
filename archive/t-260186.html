<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Setting Folder Permissions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Setting Folder Permissions NSIS Discussion" />
	
	<title> Setting Folder Permissions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Setting Folder Permissions</div>
<hr />
<div class="pda"><a href="t-260186.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260186">Setting Folder Permissions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">f1nn</div><div class="date">23rd November 2006, 12:06</div></div><div class="posttext">Hi I am trying to set the permissions on my root folder to be normal other than read only does anyone know how to do this. I have tried using setfileattributes I have also seen other people have had to try and do this can anyone advise me can this be done ie set the attributes of a folder.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">23rd November 2006, 12:48</div></div><div class="posttext">Hi f1nn!<br />
<br />
Have a look:<br />
<br />
http://nsis.sourceforge.net/AccessControl_plug-in<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f1nn</div><div class="date">24th November 2006, 11:28</div></div><div class="posttext">Hi Bholliger,<br />
<br />
I cam across the access control plug in and tryed it I believe that I am using it in the proper way. I installed the plug in to the NSIS plug in folder. Then I added a section to the script and in the section used the following from the web site example<br />
AccessControl::GrantOnFile \<br />
    &quot;$INSTDIR&quot; &quot;(BU)&quot; &quot;GenericRead + GenericWrite&quot;<br />
<br />
The problem now is that when i first installl the application as admin. and then check the permissions onthe folder under users ie. Right click on the start menu click on explorer navigate to the app folder in c program files right click here on properties then security tab and highlight users users do not have the Write permission. However If I run the installer a second time without uninstalling and recheck the permission the users now have Write permissions. I am at a loss here to understand why this is requires two runs of the installer to set the write permissions on the users. I would be glad of any suggestions or help with what is the cause of this.<br />
<br />
Many Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th November 2006, 11:36</div></div><div class="posttext">You probably created the folder after you gave it permissions. Move the AccessControl call below the code where you create the folder.<br />
<br />
BTW, giving all users permissions for the Program Files folder or anything under it is a bad idea. You are allowing users to interfere with what other users do. Not only you are giving users to change program settings for each other, you also give them permissions to change the program itself. This is a security hole at worst and an annoyance for users at best. You should save your program settings in the application data folder instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f1nn</div><div class="date">24th November 2006, 11:45</div></div><div class="posttext">Hi Kichik,<br />
<br />
Thhanks for the reply I agree with what you are saying this is just a quick fix for now to let try to sort out what is happening with another problem I am having with all user install on XP as I have been getting some strange results. On XP Home edition the desktop icons show up on any users drive and some XP PRO machines on others the icons dont show up. This may be related to the way a new user is added I think but i am not sure and I think it may be related to the problem at this thread.<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=248693<br />
<br />
So what I am trying to do is get it running on others users accounts to gather some info on the behaviour. I will try what you suggest and let you know <br />
<br />
Many thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f1nn</div><div class="date">24th November 2006, 13:09</div></div><div class="posttext">Hi Kichik,<br />
<br />
Thank you for the suggestion it solved my problem I was setting the permission to early in the script, I now do it after the mainsection were the files are added and it works fine, the folder now has write permission.<br />
<br />
Many thanks</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>