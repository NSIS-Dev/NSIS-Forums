<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help With INI Istall Options, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help With INI Istall Options NSIS Discussion" />
	
	<title> Help With INI Istall Options [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help With INI Istall Options</div>
<hr />
<div class="pda"><a href="t-158214.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=158214">Help With INI Istall Options</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Woodbark</div><div class="date">1st December 2003, 15:30</div></div><div class="posttext">I am trying to create an installer that gets the components to install from an INI file extracted .oninit but I am unsure as to how to go about this. Depending on the INI file setting will depend on which components get selected to install, follows an example of what i am trying to do:-<br />
<br />
ReadINIStr $INI_VALUE &quot;c:\Install.ini&quot; &quot;CONFIG&quot; &quot;Email&quot;<br />
StrCmp $INI_VALUE &quot;1&quot; &quot;&quot; +8 ;NO_EMAIL<br />
SectionEnd<br />
<br />
SubSection /e &quot;Extra Options&quot; SecExtra<br />
<br />
Section &quot;E-mail Option&quot; SecEmail<br />
StrCmp $INI_VALUE &quot;1&quot; +6 &quot;&quot;;NO_EMAIL<br />
<br />
NO_EMAIL:<br />
SectionEnd<br />
Section /o &quot;E-mail Option&quot; SecEmail2<br />
<br />
Main:<br />
SectionIn 1 RO<br />
<br />
So if the StrCmp is true it should select the component to install, if the StrCmp is False then is should deselect the component not to install.<br />
<br />
I hope this makes sense to someone and I am trying to do something that is possible within NSIS.<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st December 2003, 17:48</div></div><div class="posttext">You need to unselect the sections before the components page is shown. Probably the best place to do this is .onInit. To unselect a section you don't jump over its definition (you can only jump over instructions, see docs about relative jumps), instead you set the section's flags and remove SF_SELECTED. There are macros that make this easier in Include\Sections.nsh. To include those in your script simply use !include &quot;Sections.nsh&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Woodbark</div><div class="date">1st December 2003, 17:50</div></div><div class="posttext">Thanks I will give it a try</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Woodbark</div><div class="date">1st December 2003, 18:22</div></div><div class="posttext">Right I cannot work out what i need to include in my installer to do this yet (apart from !include Sections.nsh) thanks for pointing me in the right direction, if you can give any more help it would be appreciated (if you have a moment) as I am new to this I will get there eventually i think but may take some time.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>