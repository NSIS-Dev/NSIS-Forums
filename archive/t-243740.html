<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problems with MUI custom dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problems with MUI custom dialog NSIS Discussion" />
	
	<title> Problems with MUI custom dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problems with MUI custom dialog</div>
<hr />
<div class="pda"><a href="t-243740.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=243740">Problems with MUI custom dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">tbednarz</div><div class="date">17th April 2006, 16:16</div></div><div class="posttext">I have two problems with custom dialogs using MUI:<br />
<br />
1) If I enable the back button, how do I jump to a previous custom dialog? I tried call CustDialog1 where CustDialog1 is the function to process the previous dialog (see code below). This shows the dialog but when clicking on one of its standard buttons (back, next, cancel) it terminates the installer<br />
<br />
2) I use the following code to process a custom dialog:<br />
<br />
Function CustDialog2<br />
  ${If} $IsNewSubscriber = 0<br />
    ; call !insertmacro MUI_HEADER_TEXT<br />
    ; call !insertmacro MUI_INSTALLOPTIONS_WRITE to write     multilanguage Field and validation messages<br />
    ......<br />
    ; -- Show page<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;SubscriptionKey.ini&quot;<br />
    ; -- Read data<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY_RETURN &quot;SubscriptionKey.ini&quot;<br />
    Pop $R0<br />
    ${if} $R0 == &quot;cancel&quot;<br />
          Quit<br />
    ${EndIf}<br />
    ${if} $R0 == &quot;back&quot;<br />
          call CustDialog1<br />
    ${EndIf}<br />
<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $SubscriberLicense &quot;SubscriptionKey.ini&quot; &quot;Field 3&quot; &quot;State&quot;<br />
<br />
    Loop:<br />
<br />
    ;.... do some processing here <br />
<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Since I added 'Pop $R0' to find out which button was pressed users need to click the NEXT button TWICE to get one step forward. Any idea why and what the problem is????<br />
<br />
Many thanks for your help.<br />
<br />
Tom</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th April 2006, 17:02</div></div><div class="posttext">You should be reading data from the INI file in the Leave function. You don't need to manage the Cancel or Back buttons at all. NSIS will do that for you.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tbednarz</div><div class="date">17th April 2006, 18:11</div></div><div class="posttext">Many thanks for the quick reply. However I fear I do not quite understand:<br />
<br />
Do I need to define a pre and leave function for every custom dialog I create?<br />
<br />
In which order are they processed? Is there any documentation about it? My main job is to write complex software, installation programms I only write very rarely and therefore I do not understand how these things really work.<br />
<br />
So it would help me a lot, if you could point me to articles on that topic.<br />
<br />
Many thanks<br />
Tom</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th April 2006, 21:23</div></div><div class="posttext">Page Custom ShowFunc LeaveFunc<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>