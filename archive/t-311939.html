<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" [nsDialogs] How to create Checkbox with transparent background?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  [nsDialogs] How to create Checkbox with transparent background? NSIS Discussion" />
	
	<title> [nsDialogs] How to create Checkbox with transparent background? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  [nsDialogs] How to create Checkbox with transparent background?</div>
<hr />
<div class="pda"><a href="t-311939.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=311939">[nsDialogs] How to create Checkbox with transparent background?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">10th September 2009, 11:57</div></div><div class="posttext">Hello,<br />
I am trying to write custom page using nsdialogs.<br />
I am using bitmap control on the background. On that bitmap<br />
I put some other controls, like labels and few checkboxes.<br />
There are no problems with Label transparency, however I cant do the same with Checkbox (or RadioButton).<br />
Is there any possibility to do that?<br />
<br />
Here is a pseudocode I use:<br />
<br />
<br />
Function CreateFinishPage<br />
<br />
	Var /Global Finish_Dialog<br />
	Var /GLOBAL Finish_Image<br />
	Var /GLOBAL Finish_Image_Handle<br />
	File /oname=$PLUGINSDIR\Finish_Image.bmp &quot;Graphics\\Wizard\\Welcome_Image.bmp&quot;	<br />
	<br />
	Var /Global Finish_Header<br />
	Var /Global Finish_Header_Font<br />
	Var /Global Finish_Text	<br />
	Var /Global Finish_Run<br />
<br />
<br />
	<br />
    LockWindow on<br />
	GetDlgItem $0 $HWNDPARENT 3<br />
	EnableWindow $0 0<br />
	GetDlgItem $0 $HWNDPARENT 2<br />
	EnableWindow $0 0	<br />
	GetDlgItem $R0 $HWNDPARENT 1<br />
	SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR:$(FINISH_QUIT)&quot;	<br />
    GetDlgItem $0 $HWNDPARENT 1028<br />
    ShowWindow $0 ${SW_HIDE}<br />
    GetDlgItem $0 $HWNDPARENT 1256<br />
    ShowWindow $0 ${SW_HIDE}<br />
    GetDlgItem $0 $HWNDPARENT 1045<br />
    ShowWindow $0 ${SW_NORMAL}<br />
    LockWindow off<br />
<br />
    nsDialogs::Create /NOUNLOAD 1044<br />
	Pop $Finish_Dialog<br />
	<br />
	${If} $Finish_Dialog == error<br />
		Abort<br />
	${EndIf}<br />
	<br />
;Header Text<br />
	${NSD_CreateLabel} 125u 15u 63% 30u &quot;$(FINISH_TITLE)&quot;<br />
	Pop $Finish_Header<br />
	${NSD_AddStyle} $Finish_Header ${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS}<br />
	CreateFont $Finish_Header_Font &quot;TAHOMA&quot; &quot;12&quot; &quot;700&quot;<br />
	SendMessage $Finish_Header ${WM_SETFONT} $Finish_Header_Font 0	<br />
    SetCtlColors $Finish_Header &quot;0x000000&quot; &quot;TRANSPARENT&quot;	<br />
; Text	<br />
	${NSD_CreateLabel} 130u 50u 185u 90u &quot;$(FINISH_TEXT)&quot;<br />
	Pop $Finish_Text<br />
	${NSD_AddStyle} $Finish_Text ${WS_VISIBLE}|${WS_CHILD}|${WS_CLIPSIBLINGS}<br />
    SetCtlColors $Finish_Text &quot;0x000000&quot; &quot;TRANSPARENT&quot;	<br />
<br />
; Run	<br />
	${NSD_CreateCheckBox} 125u 142u 60% 16u &quot;Some text I use&quot;<br />
	Pop $Finish_Run	<br />
    SetCtlColors $Finish_Run &quot;0x000000&quot; &quot;TRANSPARENT&quot;		<br />
<br />
; The checkbox is not transparent!<br />
<br />
; Background Image	<br />
	${NSD_CreateBitmap} 0u 0u 100% 100% &quot;&quot;<br />
	Pop $Finish_Image<br />
	${NSD_SetImage} $Finish_Image $PLUGINSDIR\Finish_Image.bmp $Finish_Image_Handle<br />
	<br />
<br />
	nsDialogs::Show<br />
	${NSD_FreeImage} $Finish_Image_Handle	<br />
	<br />
FunctionEnd<br />
 <br />
<br />
I hope, someone of you can help. Thanks<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f0rt</div><div class="date">14th September 2009, 23:52</div></div><div class="posttext">One way would be to separate the text from the checkbox.<br />
<br />
So your code would change like the following:<br />
<br />
...<br />
; Run    <br />
    ${NSD_CreateCheckBox} 125u 145u 9u 9u &quot;&quot;<br />
    Pop $0<br />
    ${NSD_CreateLabel} 140u 145u 60% 16u &quot;Some text I use&quot;<br />
    Pop $Finish_Run    <br />
    SetCtlColors $Finish_Run &quot;0x000000&quot; &quot;TRANSPARENT&quot;   <br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">15th September 2009, 08:31</div></div><div class="posttext">Originally posted by f0rt <br />
One way would be to separate the text from the checkbox.<br />
<br />
So your code would change like the following:<br />
<br />
...<br />
; Run    <br />
    ${NSD_CreateCheckBox} 125u 145u 9u 9u &quot;&quot;<br />
    Pop $0<br />
    ${NSD_CreateLabel} 140u 145u 60% 16u &quot;Some text I use&quot;<br />
    Pop $Finish_Run    <br />
    SetCtlColors $Finish_Run &quot;0x000000&quot; &quot;TRANSPARENT&quot;   <br />
...<br />
  <br />
<br />
Yes, you are right. Thanks. I did that before. But, I want to learn how to do it normally (in that solution, I had to add .onclick functions for all labels, to simulate checkbox - more code, but works well). There must be some trick to do that.<br />
I need some Windows API guru :p<br />
Checkboxes, RadioButtons, GroupBoxes... I found this are not transparent.<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">6th April 2011, 08:17</div></div><div class="posttext">I have solved this problem a long time ago.<br />
Recently I was creating some nsDialogs page and I was not able to remember on it and I had to search in my old scripts...<br />
So I put it on the forum now for everyone (also for me :D)<br />
<br />
Var /Global CHECKBOX <br />
${NSD_CreateCheckbox} 0 -50 100% 8u Test <br />
Pop $CHECKBOX <br />
# Set tranparent color for control <br />
SetCtlColors $CHECKBOX &quot;0xFF00FF&quot; transparent <br />
# Add special style <br />
${NSD_AddExStyle} $CHECKBOX ${WS_EX_TRANSPARENT}|${WS_EX_TOPMOST} <br />
<br />
Works fine for CheckBox and RadioButtons</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">6th April 2011, 18:15</div></div><div class="posttext">On Windows XP, it works only fine for a push button if you had specified &quot;XPStyle on&quot;, but doesn't support checkbox or radiobutton.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">7th April 2011, 07:24</div></div><div class="posttext">Actually it works ONLY for checkbox and radiobutton, because with labels there are no such problems...<br />
I tried Win XP + Win 7 both were fine, also XPStyle on/off.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">7th April 2011, 08:43</div></div><div class="posttext">I just try your script again and I found that it works for a push-button and a radio button but not a checkbox. See my screenshot.<br />
<br />
My customize checkbox:<br />
http://forums.winamp.com/attachment.php?attachmentid=48707<br />
This customize checkbox also draw a focus rectangle when either checkbox or label is clicked to imitate a real checkbox. But still has problem sometimes.<br />
<br />
Using your script:<br />
http://forums.winamp.com/attachment.php?attachmentid=48708<br />
I also try to remove the line &quot;${NSD_AddExStyle}&quot;, it is the same as before.<br />
<br />
I am using official NSIS 2.46.<br />
<br />
Click to download the attachment for these two example:<br />
http://forums.winamp.com/attachment.php?attachmentid=48706</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mandy56</div><div class="date">18th July 2011, 07:42</div></div><div class="posttext">i have some checkbox and text controls on a tab, but only text control can use BackgroundTrans to make it looks good.<br />
BackgroundTrans doesn't works on the text label of checkbox and radio.<br />
anyone knows how to solve this?<br />
thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>