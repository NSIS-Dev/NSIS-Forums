<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Variable request  and code help, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Variable request  and code help NSIS Discussion" />
	
	<title> Variable request  and code help [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Variable request  and code help</div>
<hr />
<div class="pda"><a href="t-84278.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=84278">Variable request  and code help</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bballer182</div><div class="date">10th April 2002, 05:13</div></div><div class="posttext">I don't know what i'll do if there isn't another release of NSIS soon i'm just dying to get a new one. No just kinding i could live without, but there is one thing that would nice is to have $WINAMP and $WINAMP3 variables. I would do it my self and add it to the source and create my own but i don't know how to compile all of the source.<br />
<br />
What i'm trying to do is convert the installer in my sig for WA3 Iconpack into an NSIS install. I have code here that you can look at<br />
CRCCheck off<br />
Name &quot;WA3 Icons&quot;<br />
Caption 'WA3 Icons &quot;Setup&quot;'<br />
BrandingText &quot;Biff's custom install ver. 1.96&quot;<br />
MiscButtonText &quot;&lt; Go Back&quot; &quot;Next Step &gt;&quot; &quot;I'm scared&quot; &quot;Close&quot;<br />
InstallButtonText &quot;Do It&quot;<br />
DetailsButtonText &quot;Show Me&quot;<br />
BGGradient 0000EE 00EE00  EE0000<br />
InstProgressFlags smooth colored<br />
InstallColors 50EE05 000000<br />
OutFile &quot;WA3_Icons.exe&quot;<br />
ComponentText &quot;This Will Install Icons For WA3 Beta x&quot;<br />
EnabledBitmap &quot;jarsonic-checked.bmp&quot;<br />
DisabledBitmap &quot;jarsonic-unchecked.bmp&quot;<br />
DirText &quot;It is perfered that you choose a place were the <br />
files will stay safe!&quot; &quot;&quot; &quot;Look for it&quot;<br />
AutoCloseWindow false<br />
<br />
Section <br />
SetOutPath $INSTDIR<br />
file &quot;Installstuff\WA3Icons\file.ico&quot;<br />
file &quot;Installstuff\WA3Icons\avs.ico&quot;<br />
file &quot;Installstuff\WA3Icons\wal.ico&quot;<br />
file &quot;Installstuff\WA3Icons\wac.ico&quot;<br />
SectionEnd<br />
<br />
Section<br />
WriteRegStr HKCR .mp1 &quot;&quot; Winamp3.poop<br />
WriteRegStr HKCR .mp2 &quot;&quot; Winamp3.poop<br />
WriteRegStr HKCR .mp3 &quot;&quot; Winamp3.poop<br />
WriteRegStr HKCR .mpa &quot;&quot; Winamp3.poop<br />
WriteRegStr HKCR Winamp3.poop &quot;&quot; &quot;Winamp3 audio file&quot;<br />
WriteRegStr HKCR Winamp3.poop\DefaultIcon &quot;&quot; $INSTDIR\file.ico<br />
WriteRegStr HKCR Winamp3.poop\shell &quot;&quot; Play<br />
WriteRegStr HKCR Winamp3.poop\shell\Enqueue &quot;&quot; &quot;&amp;Enqueue in Winamp&quot;<br />
WriteRegStr HKCR Winamp3.poop\shell\Enqueue\command\ &quot;&quot; '&quot;$WINAMP3\Studio.exe&quot; /ADD &quot;%1&quot;'<br />
SectionEnd<br />
<br />
So you can see how it would help because no matter where they wanted to put the icons i would still have a direct of getting to  studio.exe no matter where they have WA3 installed. <br />
<br />
Not even close to being done with all of the reg keys. <br />
But what i was looking for was a way to force the install to the WA3 dir instead of letting the user choose it and mess something up. Or there is always the option of buring it somewhere where they won't know where it went. I would much rather let them know where it is and give them fair warning what will happen if they mess. <br />
<br />
Oh and &quot;poop&quot; is a temp name of the key so far i still have a long ways to go. And i'm doing this to cut down on the size of the original<br />
 install made by mc^^^^<br />
<br />
any help or sugggestions would be greatly appriciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">10th April 2002, 12:33</div></div><div class="posttext">you can try and use the GetWinampInstPath function in the functions.htm file that is included with NSIS but you just have to modify the registry strip to search for <br />
  ReadRegStr $0 HKLM \<br />
     &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp3&quot; \ <br />
     &quot;UninstallString&quot;<br />
instead of <br />
  ReadRegStr $0 HKLM \<br />
     &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\Winamp&quot; \ <br />
     &quot;UninstallString&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">10th April 2002, 12:49</div></div><div class="posttext">and also change the search for winamp.exe into a search for studio.exe as i described in the e-mail I've send to you, since the browser didn't allow me to post anything this morning...<br />
<br />
Greetz,<br />
Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">10th April 2002, 13:29</div></div><div class="posttext">So here's the complete script...<br />
<br />
Good luck, hope this answers all questions,<br />
greetz, Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bballer182</div><div class="date">10th April 2002, 23:07</div></div><div class="posttext">that was stupid of me i should have researched it a little more bofore bothering you guys. But thatnx for the help Smile2Me:winamp: :up: <br />
<br />
BTW i didn't get the e-mail you said you send so i tried to send on to my self and it didn't work and my e-mail address is correct.:eek:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bballer182</div><div class="date">11th April 2002, 01:37</div></div><div class="posttext">OK i'm all done and i have the source here for any one who wants to look.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>