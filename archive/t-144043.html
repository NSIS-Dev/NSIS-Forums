<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" I have a query???, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  I have a query??? NSIS Discussion" />
	
	<title> I have a query??? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  I have a query???</div>
<hr />
<div class="pda"><a href="t-144043.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=144043">I have a query???</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">29th July 2003, 23:24</div></div><div class="posttext">Hi I have a little query<br />
<br />
I have this in my script<br />
<br />
The first part of the onInit lines works fine, thats not the problem<br />
<br />
First it check the Reg to see if the program I am patching is version 2.02<br />
<br />
If not it give you the message to update and quits<br />
<br />
When the update has been install My program then installs<br />
<br />
Thats fine it works, like I said<br />
<br />
It's the seccond part of the onInit lines, once my patch is installed, if you try to install it again, it checks the Reg for the second part of the onInit script<br />
<br />
It checks to see if my version is 1.0, if it is then you get the message saying that it has already been installed and quits <br />
<br />
Function .onInit<br />
ReadRegStr $0 HKLM &quot;Other Software\v1.0&quot; &quot;Version&quot;<br />
IntCmp $0 1 +1 +1 +3<br />
MessageBox MB_ICONINFORMATION|MB_OK &quot;WARNING: Your version of Blah has not yet been updated to version 2.02.$\n$\nPlease install the update,/$\n$\nbefore attempting to install ${MUI_PRODUCT} ${MUI_VERSION}&quot;<br />
Abort<br />
<br />
<br />
ReadRegStr $0 HKLM &quot;Software\My Application\${MUI_PRODUCT}&quot; &quot;Version&quot;<br />
IntCmp $0 1 +1 +3<br />
MessageBox MB_ICONINFORMATION|MB_OK &quot;${MUI_PRODUCT} ${MUI_VERSION} has already been installed&quot;<br />
Abort<br />
FunctionEnd<br />
<br />
This is the line I put in for the second part of the onInit line to check the Reg<br />
WriteRegStr HKLM &quot;Software\My Application\${MUI_PRODUCT}\&quot; &quot;Version&quot; &quot;${MUI_VERSION}&quot; <br />
<br />
Q1. My actual query is, are the numbers correct next to the IntCmp line in the second part of the onInit lines, sorry but the numbers confuse me a little, not really knowing what they mean. I know it explains it in the help file, but could someone explain to me in laymans terms what they actually mean and used for, please.<br />
<br />
Q2. I tried changing the version of my script to version 2.0 to see if the program would install on top of the 1.0 version, like I said it first checks the Reg to see if version 1.0 has been installed. but I just get the message that the program has already been installed.<br />
<br />
Q3. What would I have to change so that version 2.0 installs on top of version 1.0<br />
<br />
Thanks in advance<br />
<br />
-Tony</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th July 2003, 23:38</div></div><div class="posttext">Try<br />
IntCmp $0 1 +1 +3 +3 for the second part.<br />
<br />
-Su</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">29th July 2003, 23:53</div></div><div class="posttext">Thanks for the quick responce, but it didn't work<br />
<br />
I'm not too bothered as it was only a query and the script works fine<br />
<br />
All I really want to know is what the numbers means</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th July 2003, 00:11</div></div><div class="posttext">IntCmp works like this<br />
<br />
IntCmp $0 $1 if$0=$1 if$0&lt;$1 if$0&gt;$1<br />
<br />
I'm too tired to think right now.<br />
Maybe you should do another IntCmp for checking 2.0 and 1.0 versions<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">30th July 2003, 01:26</div></div><div class="posttext">So basically its 0 1 if 0 equals 1, if 0 less than 1, if 0 greater than 1<br />
<br />
Thanks I that make sence now<br />
<br />
Anyhow I was seaching through the forum and found a thread so I adapted the script<br />
<br />
<br />
Function .onInit<br />
ReadRegStr $1 HKLM &quot;Software\\My App\${MUI_PRODUCT}&quot; &quot;Version&quot;<br />
StrCmp $1 &quot;${MUI_VERSION}&quot; 0 continue<br />
MessageBox MB_ICONINFORMATION|MB_OK &quot;${MUI_PRODUCT} ${MUI_VERSION} has already been installed.&quot;<br />
Abort<br />
continue:<br />
FunctionEnd<br />
<br />
This works just fine<br />
<br />
Thank you anyhow</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>