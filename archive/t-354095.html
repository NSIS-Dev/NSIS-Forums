<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI macros not working anymore in my script, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI macros not working anymore in my script NSIS Discussion" />
	
	<title> MUI macros not working anymore in my script [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI macros not working anymore in my script</div>
<hr />
<div class="pda"><a href="t-354095.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=354095">MUI macros not working anymore in my script</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">3rd January 2013, 13:37</div></div><div class="posttext">i've been away from nsis from months, in fact i haven't even touched my old windows machine lately. however, i found myself in the position that i needed to update an old script of mine, but all of a sudden it produces errors that didn't happen before.<br />
<br />
!insertmacro: MUI_PAGE_LICENSE<br />
Error in macro MUI_INTERFACE on macroline 54<br />
Error in macro MUI_PAGE_INIT on macroline 3<br />
Error in macro MUI_PAGE_LICENSE on macroline 5<br />
<br />
it took me a while to figure out, that for unknown reasons, the nsis projected which is sitting in a dropbox folder, suffered from synchronization problems. my custom ui, basically a modified MUI_nodesc, was 0kb in size. i changed the ui in the script to MUI_nodesc, but the problem persists. any ideas what could be the problem, all other resources by my script are intact. nothing was changed on the license page or the license itself since i last compiled my project successfully.<br />
<br />
edit: interestingly, the standard MUI compiles the script</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">3rd January 2013, 19:01</div></div><div class="posttext">1) Why colon after !insertmacro ??? <br />
2) MUI_PAGE_LICENSE requires license file (parameter)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">3rd January 2013, 20:11</div></div><div class="posttext">1) Why colon after !insertmacro ???<br />
ah, that was copied from the makensis window, it's not my actual code<br />
<br />
2) MUI_PAGE_LICENSE requires license file (parameter)<br />
<br />
my actual code goes like this (and as i said, it worked for years!)<br />
<br />
!define MUI_COMPONENTSPAGE_CHECKBITMAP &quot;ui\yi-${LOWERCASE}.bmp&quot;<br />
!define MUI_ICON &quot;ui\yi-${LOWERCASE}.ico&quot;<br />
!define MUI_UI &quot;ui\nodesc.exe&quot;<br />
!define MUI_LICENSEPAGE<br />
!define MUI_LICENSEPAGE_BGCOLOR &quot;FFFFFF&quot;<br />
!define MUI_INSTFILESPAGE_COLORS &quot;000000 FFFFFF&quot;<br />
!define MUI_INSTFILESPAGE_PROGRESSBAR &quot;colored smooth&quot;<br />
!define MUI_BGCOLOR &quot;0x1b1b1b&quot;<br />
...<br />
!define MUI_LICENSEPAGE_TEXT_BOTTOM &quot;$(LabelLicense)&quot;<br />
!define MUI_LICENSEPAGE_CHECKBOX<br />
!insertmacro MUI_PAGE_LICENSE &quot;license.txt&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd January 2013, 21:48</div></div><div class="posttext">&quot;!define MUI_LICENSEPAGE&quot; is supposed to do what?<br />
<br />
Anyway, I know the ChangeUI command does not output errors in all cases so make sure those UI exe files are not corrupt...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">4th January 2013, 10:51</div></div><div class="posttext">&quot;!define MUI_LICENSEPAGE&quot; is supposed to do what?<br />
<br />
frankly, i don't know (or remember). it has been there since march 2009 and it never produced a problem in the 20 versions that came out since. anyway, commenting that line doesn't change a thing as i still get the same error from the compiler.<br />
<br />
reinstalled nsis to make sure MUI_nodesc isn't corrupted. no success. did the same in a clean vm. no success.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">4th January 2013, 11:22</div></div><div class="posttext">well, nevermind. i simply copied my gui modifications to modern.exe (at the cost of extra 2kb). i don't know what's wrong all of a sudden with modern_nodesc.exe, everybody knows nothing in nsis changed in over 4 years.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">4th January 2013, 21:24</div></div><div class="posttext">Heh, one more time :) - Correct syntax is:<br />
!insertmacro MUI_PAGE_LICENSE &quot;License.rtf&quot;<br />
<br />
You used !define MUI_LICENSEPAGE (without parameter) which is definitely wrong for MUI2 (I think it is for MUI1).<br />
<br />
You cannot use MUI stuff in MUI2 script - either include MUI.nsh (and do not use MUI2 stuff) or update whole script to MUI2 ( so rewrite most of MUI1 commands).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th January 2013, 07:50</div></div><div class="posttext">MUI1 and MUI2 use exactly the same commands. Only the internal implementation is different (IO vs nsDialogs), and MUI2 adds some variables for nsDialogs-based welcome/finish page customization.<br />
<br />
The MUI_LICENSEPAGE define was never used by MUI, as far as I know. It probably never did anything.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">8th January 2013, 21:06</div></div><div class="posttext">!insertmacro MUI_PAGE_LICENSE &quot;License.rtf&quot;<br />
<br />
take a good look, that's exactly what i've been using in the last line. apparently and for unknown reason, there was a define that does nothing - and it had nothing to do with nsis no longer compiling my script.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>