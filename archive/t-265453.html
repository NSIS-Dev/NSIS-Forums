<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" InstallOptionsEx 2.4.5 beta 1 unofficial Released, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  InstallOptionsEx 2.4.5 beta 1 unofficial Released NSIS Discussion" />
	
	<title> InstallOptionsEx 2.4.5 beta 1 unofficial Released [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  InstallOptionsEx 2.4.5 beta 1 unofficial Released</div>
<hr />
<div class="pda"><a href="t-265453.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265453">InstallOptionsEx 2.4.5 beta 1 unofficial Released</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">9th February 2007, 11:41</div></div><div class="posttext">Hello,<br />
<br />
I have released an unofficial version (2.4.5 beta 1) of the InstallOptionEx plugin.<br />
<br />
This version consists mainly of the correction of bugs (in particular on RichText and TreeView controls) and the update with lastest CVS version of InstallOption.<br />
<br />
Changelog:<br />
# Compiled with VisualStudio 2005. Fixed warnings and use the secure fopen_s function instead of fopen.<br />
# Fixed: The selection of a subitem in TreeView returned only the root item.<br />
# Fixed: Empty items appeared sometimes in TreeView.<br />
# Fixed: RichText files were not loaded if they were situated in a directory starting with &quot;n&quot;, &quot;r&quot; or &quot;t&quot;.<br />
# Fixed: Richtext fields were selected and scrolled down even if they used the READONLY and MULTILINE flags.<br />
# RichText files are not rewritten any more in the leave function if the READONLY flag is used.<br />
# Added: VSCROLL flag support for RichText controls.<br />
# Added: ONCLICK flag by default on Notify key if not specified for Link controls for IO compatibility.<br />
# Added: HWND entry to the INI file to avoid messy calculations of the correct control id.<br />
# Added: WS_EX_LEFTSCROLLBAR in RTL mode (IO bug #1283528).<br />
# Added: FOCUS flag for setting focus to a control other than the first (IO patch #1634704).<br />
<br />
<br />
Could you help me to correct the few problems which remain?<br />
- If we change the background color of a Link control to transparent, the background color become white...<br />
- We cannot change the text and background colors of a GroupBox control, it remains color of Windows....<br />
See the NSISDIR\Example\InstallOptionsEx\test.nsi script to see this problems.<br />
<br />
Post your patchs/bugs/remarks in this topic, Tanks.<br />
<br />
Download InstallOptionsEx (http://sourceforge.net/project/showfiles.php?group_id=161090&amp;package_id=182272&amp;release_id=507798)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">14th February 2007, 07:07</div></div><div class="posttext">Hi SuperPat, all,<br />
<br />
Not sure if this is causing all your problems or not,<br />
but I have discovered quite a big bug in the Notify parsing in InstallOptionsEx...<br />
<br />
I was running into a problem when trying to set 2 Notify options for a ListBox.<br />
<br />
For example:<br />
<br />
Notify=ONSELCHANGE|ONDBLCLICK<br />
<br />
Not only did this not work, but it actually STOPPED delivering Notify's for that Box completely!<br />
<br />
I could do one or the other, but not both.<br />
<br />
Just looking at the code, I see the problem...<br />
<br />
For the ListBox parser:<br />
<br />
    case FIELD_LISTBOX:<br />
    {<br />
      switch(pField-&gt;nNotify)<br />
      {			  <br />
		Notification(NOTIFY_CONTROL_ONSELCHANGE, CBN_SELCHANGE);<br />
        Notification(NOTIFY_CONTROL_ONDBLCLICK, CBN_DBLCLK);<br />
        Notification(NOTIFY_CONTROL_ONSETFOCUS, CBN_SETFOCUS);<br />
        Notification(NOTIFY_CONTROL_ONKILLFOCUS, CBN_KILLFOCUS);<br />
      }<br />
      break;<br />
    }<br />
<br />
This code will work fine as long as only *1* Notify option is set, but if you set 2 or more, the &quot;switch&quot; code is simply wrong!<br />
<br />
The values for multiple options are bit Or'ed together, thus the case: statements will *NOT* trigger.<br />
<br />
The Notification() #define really makes the problem hard to find and debug... It took me awhile to find it.<br />
<br />
The problem exists on all Notify's for all the various types of pages/dialogs, so maybe its causing you problems as well...<br />
<br />
Its too late tonight for me to really fix it up, I gotta get some sleep.<br />
<br />
BTW, When is your beta 2 coming out of UMUI?<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">14th February 2007, 07:37</div></div><div class="posttext">BTW,<br />
<br />
Here is the &quot;fixed&quot; code for the ListBox.<br />
<br />
Its not particularly elegant, and we could probably clean it up behind some defines, but I am too tired to do that tonight.<br />
<br />
Anywhere, here is the &quot;fixed&quot; code:<br />
<br />
		if (codeNotify == CBN_SELCHANGE) {<br />
			if(pField-&gt;nNotify &amp; NOTIFY_CONTROL_ONSELCHANGE) {<br />
				g_aNotifyQueueTemp-&gt;iNotifyId = NOTIFY_CONTROL_ONSELCHANGE;<br />
				goto notify;<br />
			}<br />
		}<br />
		else if (codeNotify == CBN_DBLCLK) {<br />
			if(pField-&gt;nNotify &amp; NOTIFY_CONTROL_ONDBLCLICK) {<br />
				g_aNotifyQueueTemp-&gt;iNotifyId = NOTIFY_CONTROL_ONDBLCLICK;<br />
				goto notify;<br />
			}<br />
		}<br />
		else if (codeNotify == CBN_SETFOCUS) {<br />
			if(pField-&gt;nNotify &amp; NOTIFY_CONTROL_ONSETFOCUS) {<br />
				g_aNotifyQueueTemp-&gt;iNotifyId = NOTIFY_CONTROL_ONSETFOCUS;<br />
				goto notify;<br />
			}<br />
		}<br />
		else if (codeNotify == CBN_KILLFOCUS) {<br />
			if(pField-&gt;nNotify &amp; NOTIFY_CONTROL_ONKILLFOCUS) {<br />
				g_aNotifyQueueTemp-&gt;iNotifyId = NOTIFY_CONTROL_ONKILLFOCUS;<br />
				goto notify;<br />
			}<br />
		}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">14th February 2007, 17:25</div></div><div class="posttext">Hello,<br />
<br />
Thank you to have reported this problem,<br />
Currently, I have not tested it but if you replace the code  by this one, you should obtain the same result as your code<br />
<br />
case FIELD_LISTBOX:<br />
{<br />
  switch(codeNotify)<br />
  {<br />
    Notification(NOTIFY_CONTROL_ONSELCHANGE, CBN_SELCHANGE);<br />
    Notification(NOTIFY_CONTROL_ONDBLCLICK, CBN_DBLCLK);<br />
    Notification(NOTIFY_CONTROL_ONSETFOCUS, CBN_SETFOCUS);<br />
    Notification(NOTIFY_CONTROL_ONKILLFOCUS, CBN_KILLFOCUS);<br />
  }<br />
  break;<br />
}#define Notification(ID, CODE) \<br />
  case CODE: \<br />
  { \<br />
    if(pField-&gt;nNotify &amp; ID) \<br />
    { \<br />
       g_aNotifyQueueTemp-&gt;iNotifyId = ID; \<br />
       goto notify; \<br />
    } \<br />
    break; \<br />
  } <br />
<br />
I will fix it this week end an released a new development build.<br />
<br />
Moreover, I will remove this horrible goto!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">14th February 2007, 18:50</div></div><div class="posttext">Hi SuperPat,<br />
<br />
Ah yes, that should work as well, and cleans up all the various NOTIFY's for *all* the dialogs all at once!<br />
<br />
Last night, I was worried about changing Notification(), as I only have started working on the code since last night.<br />
I didn't know what ramifications changing that #define might have on the rest of the code!<br />
<br />
Also,<br />
I am trying to use your code dump, and I don't have &quot;fopen_s&quot;, I am assuming that must in a new lib that ships with VS 2005?<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">14th February 2007, 19:48</div></div><div class="posttext">BTW,<br />
<br />
The 2 problems you still have pending...<br />
<br />
Are you sure they are InstallOptionEx problems?<br />
<br />
You are using SetCtlColors, which is a function provided by the base NSIS Installer, right?<br />
<br />
Looking at InstallOptionEx, it sure doesn't look like it does much deaking with Group Boxes...<br />
<br />
Maybe you can avoid using SetCtlColors, and instead just call the needed things directly by using System/calls directly into the OS...<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">14th February 2007, 20:06</div></div><div class="posttext">I found this thread from google, not sure if their comment is still valid, (its from 98!)<br />
<br />
http://groups.google.com/group/comp.os.ms-windows.programmer.controls/browse_thread/thread/b433ef1bdb30bdaa/8eb14167916e8fa9%238eb14167916e8fa9<br />
<br />
The post and response:<br />
<br />
Dexter Sinister wrote in message &lt;363C943C.C21F2...@lotus.com&gt;... <br />
&gt;I have a property page object with a groupbox on it.  I want to be able <br />
&gt;to set the background color of the groupbox on the fly.  The point of <br />
&gt;this is to output examples of text settings (font, foreground color, <br />
&gt;background color) in the groupbox. <br />
<br />
&gt;I cannot figure out how to set the background color of the entire <br />
&gt;groupbox.  Any hints would be very much appreciated. <br />
<br />
<br />
Groupbox controls don't HAVE a background colour - they are just a &quot;frame&quot; <br />
with a transparent interior. One solution would be to put an empty static <br />
text control on the dialog, then put the groupbox on top of it. Set the <br />
colour of the static control in the usual way.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">15th February 2007, 08:41</div></div><div class="posttext">But the groupbox colors can be set with the original InstallOption fine. it's this that I don't understand...<br />
<br />
The fopen_s function is appeared with Visual Studio 2005</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">15th February 2007, 13:58</div></div><div class="posttext">@Sheik<br />
I am sure they are InstallOptionEx problems because the SetCtlColors work fine with the original InstallOption GroupBox and Link controls.<br />
<br />
Thus, It must be possible to make it work with IOEx.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">16th February 2007, 22:23</div></div><div class="posttext">This is the last development version of the unofficial InstallOptionsEx  plugin<br />
<br />
Changelog (2.4.5 beta 2 14/Feb/2007):<br />
Fixed: If more than one notify flags is used for a control, any action was notified.<br />
A goto was removed.<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-14.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-14.exe)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">18th February 2007, 04:32</div></div><div class="posttext">Hi SuperPat,<br />
<br />
I will take a look deeper into your problem.<br />
<br />
Couple things about the source...<br />
<br />
1) Using Visual Studio 6, I get this error:<br />
c:\nsis\installoptionsex2.4.5b2_2007-02-14\contrib\installoptionsex\installeroptions.cpp(2120) : error C2374: 'nIdx' : redefinition; multiple initialization<br />
c:\nsis\installoptionsex2.4.5b2_2007-02-14\contrib\installoptionsex\installeroptions.cpp(252) : see declaration of 'nIdx'<br />
<br />
I just went and cleaned it up by changing it to nIdx2 on line 2120, as well as in that for() loop.<br />
<br />
2) This one is minor, but it sure would be nice. =)<br />
I don't seem to have COLOR_MENUHILIGHT defined in my headers, so I tacked this in the .h file right below<br />
the #ifndef USER_TIMER_MINIMUM section:<br />
<br />
#ifndef COLOR_MENUHILIGHT<br />
  #define COLOR_MENUHILIGHT 29<br />
#endif<br />
<br />
Finally, the fopen_s()...<br />
I am wondering if you could ifdef that one by having it as a regular fopen() for anyone using anything less than VS 2005...<br />
If not, no biggie, I just keep having to change it back to fopen() all the time. =)<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">18th February 2007, 15:11</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 18/Feb/2007):<br />
Fixed: VisualStudio 6 errors and warning:<br />
_ multiple initialization of the nIdx variable;<br />
_ definition of COLOR_MENUHILIGHT if it doesn't exist in your headers;<br />
_ by default, the fopen function is used instead of fopen_s except if you define USE_FOPEN_S in the compilation options (for VisualStudio 2005 only).<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-18.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-18.exe)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">19th February 2007, 03:32</div></div><div class="posttext">Hi SuperPat,<br />
<br />
Thanks for the changes, the compile goes much smoother now. =)<br />
<br />
After spending a considerable amount of time trying to track down your GroupBox problem, I am getting pretty convinced that it can't be something in the &quot;GroupBox&quot; handling, or lack of handling...<br />
<br />
I am now starting to think that maybe its parent window is causing the problem.<br />
<br />
What have you found in your debugging?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">19th February 2007, 13:10</div></div><div class="posttext">I have also spending a lot of time but I never have succeeds found the problem.<br />
All what I have succeeds to obtain, it is a black background on the groupbox and link. <br />
For the link controls, I tested by looking how was made the checkbox and radiobutton but without more successâ€¦ <br />
<br />
We may be compare the code of IOEx with the original InstallOption.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">19th February 2007, 18:34</div></div><div class="posttext">Hi SuperPat,<br />
Ya, I am trying to figure out what the difference is between IO and IOEx...<br />
Nothing really sticks out.<br />
<br />
I am thinking we might be able to use &quot;Spy++&quot; to try to capture the various messages sent to these WIndows, and maybe catch the message that we seem to be missing...<br />
<br />
What do you think?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">20th February 2007, 09:49</div></div><div class="posttext">Good idea, but for my part, I don't know how to do this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">20th February 2007, 15:54</div></div><div class="posttext">Hi SuperPat,<br />
<br />
Spy++ ships with VS 6, and presumably VS 2005 as well.<br />
<br />
You run it, and then tell it what &quot;Window&quot; to watch,<br />
by dragging the &quot;pointer&quot; to the window we care about.<br />
<br />
In this case, I drag it to the window with the text of &quot;This is a group box with a...&quot;<br />
(Class of a Button).<br />
(Window 20600 for this run)<br />
<br />
Here are the messages I get when I &quot;hide&quot; the window, then bring the window back to the foreground, which should cause it to redraw everything.<br />
<br />
&lt;00001&gt; 00020600 S ..WM_GETDLGCODE<br />
&lt;00002&gt; 00020600 R ..WM_GETDLGCODE fuDlgCode:DLGC_STATIC<br />
&lt;00003&gt; 00020600 P WM_PAINT hdc:00000000<br />
&lt;00004&gt; 00020600 S .WM_NCPAINT hrgn:00000001<br />
&lt;00005&gt; 00020600 R .WM_NCPAINT<br />
&lt;00006&gt; 00020600 S .WM_ERASEBKGND hdc:820116CD<br />
&lt;00007&gt; 00020600 R .WM_ERASEBKGND fErased:True<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">20th February 2007, 15:55</div></div><div class="posttext">Odd, we got a smiley face in the output.<br />
Its &quot;DLGC_STATIC&quot; in there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">20th February 2007, 16:38</div></div><div class="posttext">Hi SuperPat.<br />
<br />
I have found/fixed your problem!<br />
<br />
Go to ReadSettings().<br />
<br />
Look for this code:<br />
    // Remove FLAG_CUSTOMDRAW_TEMP flag only when the user<br />
    // specifies any of the color commands.<br />
    switch(pField-&gt;nType)<br />
    {<br />
      case FIELD_LABEL:<br />
      case FIELD_LINK:<br />
      case FIELD_TEXT:<br />
      case FIELD_LISTBOX:<br />
      case FIELD_COMBOBOX:<br />
      {<br />
        pField-&gt;nFlags |= FLAG_CUSTOMDRAW_TEMP;<br />
        break;<br />
      }<br />
    }<br />
<br />
If we add:<br />
      case FIELD_GROUPBOX:<br />
<br />
To the switch, this fixes the problem.<br />
<br />
Hopefully this fixes most (all?) of your problems, so that a new version of UMUI can get released!<br />
<br />
(I am *really* looking forward to it!)<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">20th February 2007, 19:59</div></div><div class="posttext">Hi SuperPat,<br />
<br />
And another fix for your &quot;Transparent&quot; Link problem.<br />
<br />
(ie, the one where if you have transparent on, it displays the background of the link in white)<br />
<br />
The code is just not taking into account that the transparent mode is already on.<br />
<br />
Specifically, go to:<br />
<br />
        if (lpdis-&gt;itemAction &amp; ODA_DRAWENTIRE)<br />
<br />
To this line:<br />
          // Draw Background on the whole control<br />
          if(crBgColor != 0xFFFFFFFF)<br />
<br />
And change it to be:<br />
<br />
          // Draw Background on the whole control<br />
          if(crBgColor != 0xFFFFFFFF &amp;&amp; GetBkMode(lpdis-&gt;hDC) != TRANSPARENT) {<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">20th February 2007, 20:13</div></div><div class="posttext">And finally,<br />
<br />
After that change, the &quot;link&quot; text has a weird &quot;white&quot; shadow effect purposely put around the characters in the link.<br />
This is just plain strange looking, and I suspect it should NOT be done when in TRANSPARENT mode...<br />
<br />
So this code:<br />
<br />
          if(crTxtShwColor != 0xFFFFFFFF) {<br />
          <br />
<br />
            // Draw Shadow Text<br />
            ++rc.left;<br />
               ++rc.right;<br />
            ++rc.top;<br />
            ++rc.bottom;<br />
            SetTextColor(lpdis-&gt;hDC, crTxtShwColor);<br />
<br />
            DrawText(lpdis-&gt;hDC, pField-&gt;pszText, -1, &amp;rc, DT_EXPANDTABS | DT_WORDBREAK | (pField-&gt;nTxtAlign == ALIGN_TEXT_LEFT ? DT_LEFT : 0) | (pField-&gt;nTxtAlign == ALIGN_TEXT_CENTER ? DT_CENTER : 0) | (pField-&gt;nTxtAlign == ALIGN_TEXT_RIGHT ? DT_RIGHT : 0));<br />
<br />
            // Draw Normal Text<br />
            --rc.left;<br />
            --rc.right;<br />
            --rc.top;<br />
            --rc.bottom;<br />
          }<br />
<br />
Probably should be changed to be like<br />
          if(crTxtShwColor != 0xFFFFFFFF &amp;&amp; GetBkMode(lpdis-&gt;hDC) != TRANSPARENT) {<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">22nd February 2007, 12:59</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 22/Feb/2007):<br />
Fixed: Groupbox and Link controls colors problems (thanks Sheik).<br />
<br />
<br />
I have found an other problem with button using the OPEN_FILEREQUEST, SAVE_FILEREQUEST, DIRREQUEST... flags, when I click on these buttons, it does not occur anything.<br />
See the the test.ini example.<br />
<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-22.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-22.exe)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">22nd February 2007, 16:45</div></div><div class="posttext">Thanks.<br />
<br />
These are the messages being sent to the button when clicked (from Spy++):<br />
<br />
&lt;00201&gt; 00020B66 S .WM_MOUSEACTIVATE hwndTopLevel:01970ABA nHittest:HTCLIENT uMsg:WM_LBUTTONDOWN<br />
&lt;00202&gt; 00020B66 R .WM_MOUSEACTIVATE fuActivate:MA_ACTIVATE<br />
&lt;00203&gt; 00020B66 S .WM_SETCURSOR hwnd:00020B66 nHittest:HTCLIENT wMouseMsg:WM_LBUTTONDOWN<br />
&lt;00204&gt; 00020B66 R .WM_SETCURSOR fHaltProcessing:False<br />
&lt;00205&gt; 00020B66 P WM_LBUTTONDBLCLK fwKeys:MK_LBUTTON xPos:12 yPos:12<br />
&lt;00206&gt; 00020B66 S .WM_NCHITTEST xPos:924 yPos:376<br />
&lt;00207&gt; 00020B66 R .WM_NCHITTEST nHittest:HTCLIENT<br />
&lt;00208&gt; 00020B66 S .WM_SETCURSOR hwnd:00020B66 nHittest:HTCLIENT wMouseMsg:WM_LBUTTONUP<br />
&lt;00209&gt; 00020B66 R .WM_SETCURSOR fHaltProcessing:False</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">22nd February 2007, 21:13</div></div><div class="posttext">Hi SuperPat,<br />
<br />
I think you forgot to set up a NOTIFY:<br />
Put this in your .ini file for each of those BUTTON controls:<br />
<br />
Notify=ONCLICK<br />
<br />
This isn't ideal either tho, cuz it will still call into our &quot;validate&quot; function, which we really don't want.<br />
<br />
You probably want to muck around with having the<br />
Notify=ONCLICK in the .ini file,<br />
but process it differently in the dll.<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">24th February 2007, 13:35</div></div><div class="posttext">Hello,<br />
<br />
Indeed, when we add the Notify=ONCLICK on the button field, the dialog appear, but I don't want that it calls the leave function because it is not very clean. <br />
<br />
This is why it would really have to be modified the DLL so that it do not need Notify=ONCLICK to show File/Dir.. dialogs <br />
<br />
An other problem found with the FileDialog:<br />
The filter key contain<br />
Filter=Poop Files|*.poop|All files|*.*<br />
The filter is constructed by putting pairs of entries together, each item separated by a | character. The first value in each pair is the text to display for the filter. The second value is the pattern to use to match files.<br />
But it doesn't work, I have only one entry and his name is Poop Files|*.poop|All files|*.*<br />
Obviously, It does not have succeeds in cutting out the pairs...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">24th February 2007, 21:16</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 24/Feb/2007):<br />
Fixed: A filter key problem for button using the OPEN_FILEREQUEST and the SAVE_FILEREQUEST flags, it did not cut the string in items.<br />
<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-24.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-24.exe)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">25th February 2007, 12:35</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 25/Feb/2007):<br />
Fixed: The Notify=ONCLICK is not necessary any more for a boutton using OPEN_FILEREQUEST, SAVE_FILEREQUEST, DIRREQUEST, FONTREQUEST and COLORREQUEST flags to show the dialog. Thus the leave function is not called any more unnecessarily.<br />
<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-25.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-25.exe)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">26th February 2007, 16:40</div></div><div class="posttext">Thanks SuperPat,<br />
<br />
Are there any more outstanding bugs we need to find/fix?<br />
Or are you finally good to go?<br />
<br />
(All my outstanding problems have been resolved)<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">26th February 2007, 18:14</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 26/Feb/2007):<br />
Fixed: The Notify=ONCLICK and Notify=ONDBLCLICK didn't work with the Link control.<br />
Link an Button can now be used in the same way.<br />
The Notify=ONCLICK is not necessary any more for a link or a button using OPEN_FILEREQUEST, SAVE_FILEREQUEST, DIRREQUEST, FONTREQUEST and COLORREQUEST flags to show the dialog. As for if the State key containing something to be executed or opened. Thus the leave function is not called any more unnecessarily.<br />
Documentation updated.<br />
<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-26.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-26.exe)<br />
<br />
<br />
Sheik, I did not find any additional bugs for the moment ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">27th February 2007, 19:17</div></div><div class="posttext">I have found 2 bugs in InstallOptionEx:<br />
<br />
First:<br />
Transparent Icons are not transparent in the page...<br />
Second:<br />
Button are not drawn if I use my SkinnedButton plugin...<br />
<br />
whereas that work very well with InstallOptions <br />
<br />
<br />
See the test2.nsi Example<br />
<br />
<br />
Download as zip (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-27.zip) <br />
Download as exe (http://guerin45.free.fr/UltraModernUI/InstallOptionsEx2.4.5b2_2007-02-27.exe)<br />
<br />
<br />
Sheik, can you see this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">27th February 2007, 20:32</div></div><div class="posttext">Yup, I see exactly what you see.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th February 2007, 20:49</div></div><div class="posttext">With so many changes, wouldn't it be nicer to arrange it under http://sf.net/projects/nsis-ioex?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">27th February 2007, 21:32</div></div><div class="posttext">False translation, I wanted to say:<br />
Can you look at that?<br />
<br />
I have found a third problem with DIRREQUEST Dialog:<br />
When you click on it, It doesn't go to the directory indicated in the Text control.<br />
<br />
I have reuploaded the lastest dev version with a little fix (but we must check it):<br />
Sometime, the plugin crach when it tries to show the  DIRREQUEST Dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">28th February 2007, 00:56</div></div><div class="posttext">Hi SuperPat,<br />
<br />
This one is pretty tough...<br />
<br />
I can &quot;capture&quot; the drawing by going to:<br />
<br />
    case WM_DRAWITEM:<br />
<br />
And changing:<br />
<br />
      if(pField-&gt;nType == FIELD_LABEL || pField-&gt;nType == FIELD_LINK) {<br />
<br />
to:<br />
<br />
      if(pField-&gt;nType == FIELD_LABEL || pField-&gt;nType == FIELD_LINK || pField-&gt;nType == FIELD_BUTTON) {<br />
<br />
But it doesn't really draw it right...<br />
But we do get &quot;...&quot; which is more than we got before...<br />
<br />
Hopefully this can help you track it down more.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">28th February 2007, 17:20</div></div><div class="posttext">Hi kichik,<br />
<br />
Yes.<br />
Quite honestly, I am hoping this thread dies soon, that means all the bugs that SuperPat and I are finding are fixed. =)<br />
<br />
We aren't actually doing any new developement on IoEx...<br />
(At least, I sure am not).<br />
<br />
We are just trying to clean up most of the bugs.<br />
Once thats done, this thread will go away.<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">28th February 2007, 17:23</div></div><div class="posttext">SuperPat,<br />
BTW, there is obviously an interaction problem with it and your skinnedbutton plugin.<br />
If I yank the skinnedbutton from your test, the buttons get drawn right.<br />
Maybe the fix here is as simple as sending a message to the skinnedbutton to redraw itself...<br />
(This obviously should be happening automagically, but maybe thats the bug, that IOEX isn't sending it.)<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">28th February 2007, 21:40</div></div><div class="posttext">SuperPat,<br />
Another test I did.<br />
Get rid of all your color changing stuff from the test2 script.<br />
<br />
Even with doing that, the 2 pushbuttons don't show up.<br />
<br />
The only way I can get them to show up, is if I get rid of <br />
the skinnedbutton calls, so that the regular buttons get used.<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">4th March 2007, 04:37</div></div><div class="posttext">Hi SuperPat,<br />
Any luck or progress fixing the current set of bugs?<br />
<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">4th March 2007, 15:28</div></div><div class="posttext">not nothing alas...<br />
<br />
And you for the problem of the transparent icons on a coloured background where the SetCtlColors function doesn't have any effects?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2007, 17:03</div></div><div class="posttext">Originally posted by Sheik <br />
Hi kichik,<br />
<br />
Yes.<br />
Quite honestly, I am hoping this thread dies soon, that means all the bugs that SuperPat and I are finding are fixed. =)<br />
<br />
We aren't actually doing any new developement on IoEx...<br />
(At least, I sure am not).<br />
<br />
We are just trying to clean up most of the bugs.<br />
Once thats done, this thread will go away.<br />
<br />
Scott  That too should be on the project page. It's the centralized place for ioex development. I'm sure deguix will not mind giving you access so you can upload the fixes there as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">5th March 2007, 19:44</div></div><div class="posttext">That too should be on the project page. It's the centralized place for ioex development. I'm sure deguix will not mind giving you access so you can upload the fixes there as well.Unbelievable as it may be seen, I thought about this yesterday, but I forgot about it. I now assigned full rights to SuperPat.<br />
<br />
I can also help you with development, but sincerely, I can't stand coding in C++...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">6th March 2007, 13:17</div></div><div class="posttext">Thank you but just a detail, my login on sourceforge is superpat45, not superpat (it was already taken).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">6th March 2007, 20:06</div></div><div class="posttext">lol... ok then... done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">9th March 2007, 04:02</div></div><div class="posttext">I updated the project file releases. Now it shows all SuperPat's versions merged into beta package (2.4.5 beta 1) and alpha package (2.4.5 beta 2 alpha 1-6 -&gt; I named your builds as alphas there). Also, I updated the InstallOptionsEx page at the nsis.sf.net to reflect this. I don't like to update CVS when there's only few people working on project (yields 1 as I still don't want to come back to development). If there's anything wrong with all this, just ask me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">7th April 2007, 13:36</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 alpha 7 7/Apr/2007):<br />
# From now, it is an official version.<br />
# Added: setFocus dll function: Set the focus on the specified control in parameter. It was designed to be used in your leave script functions. Prefer to use the FOCUS flag if you can.<br />
# The compilation option USE_FOPEN_S was renamed in USE_SECURE_FUNCTIONS (in VisualStudio 2005 only)).<br />
# Fixed: Applied IO Patch that kill some compiler warnings under Linux and mingw32.<br />
# Fixed: Use installer's name for message boxes (IO patch #1661677).<br />
# Size optimization: msdn now says SHGetMalloc returns the same allocator CoTaskMemFree uses and a little debugging backs this even on Windows 95.<br />
<br />
<br />
Known bugs: <br />
_ Transparent Icons are not transparent in the page...<br />
_ Button are not drawn if I use my SkinnedButton plugin... whereas that work very well with InstallOptions<br />
_ When you use the  DIRREQUEST Dialog, It doesn't go to the directory indicated in the Text control.<br />
See the test2.nsi Example<br />
<br />
<br />
Download (http://sourceforge.net/project/showfiles.php?group_id=161090&amp;package_id=182272&amp;release_id=499401)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">20th April 2007, 21:47</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 alpha 8 20/Apr/2007):<br />
# Added: New control type VLine and HLine (IO patch #1683189).<br />
<br />
Known bugs: <br />
_ Transparent Icons are not transparent in the page...<br />
_ Button are not drawn if I use my SkinnedButton plugin... whereas that work very well with InstallOptions<br />
_ When you use the  DIRREQUEST Dialog, It doesn't go to the directory indicated in the Text control.<br />
See the test2.nsi Example<br />
<br />
<br />
Download (http://sourceforge.net/project/showfiles.php?group_id=161090&amp;package_id=182272&amp;release_id=502700)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">21st April 2007, 00:15</div></div><div class="posttext">will there ever be drag&amp;drop support for file and directory dialogs (i havn't checked &quot;your&quot; version yet)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">21st April 2007, 17:40</div></div><div class="posttext">There is not support for Drag&amp;Drop yet....<br />
<br />
It is a good idea for later.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">12th May 2007, 13:03</div></div><div class="posttext">New development version:<br />
<br />
Changelog (2.4.5 beta 2 alpha 9 12/May/2007):<br />
* Fixed: A problem in the DIRREQUEST that doesn't go to the folder indicated in the RefFields State or in its State key.<br />
* Disable the X button for InstallOptions pages as well when CancelEnabled is used.<br />
<br />
Known bugs: <br />
* Transparent Icons are not transparent in the page...<br />
* Button are not drawn if I use my SkinnedButton plugin... whereas that work very well with InstallOptions<br />
<br />
<br />
Download (http://sourceforge.net/project/showfiles.php?group_id=161090&amp;package_id=182272&amp;release_id=507798)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th May 2007, 13:16</div></div><div class="posttext">I've updated the link in the first post. In my experience people tend to click the first link for a download in a topic without checking if it is the latest.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">6th February 2009, 10:27</div></div><div class="posttext">I just realized that, as of NSIS 2.42, InstallOptionsEx will fail if used as a drop-in replacement of the existing InstallOptions.  The new MUI header no longer uses the /NOUNLOAD flags, thus causing crashes with InstallOptionsEx which has not been updated to take advantage of the new API.<br />
<br />
I understand there will be no further updates to InstallOptionsEx, and moving to nsDialogs is encouraged, just dropping this note here (will also adjust the wiki) for the record.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">12th June 2009, 10:45</div></div><div class="posttext">I will release a new version 2.4.5 b2 (not alpha) of the plugin this week-end with a lot of bug fixes.<br />
Two versions of the DLL will be released, a legacy version and a version using the new NSIS plugin API. The last one can be use as replacement of InstallOptions for ModernUI with NSIS 2.42 and more.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>