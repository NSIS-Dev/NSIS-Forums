<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Create multiple XML Nodes, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Create multiple XML Nodes NSIS Discussion" />
	
	<title> Create multiple XML Nodes [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Create multiple XML Nodes</div>
<hr />
<div class="pda"><a href="t-300824.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=300824">Create multiple XML Nodes</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SilverShadow08</div><div class="date">8th December 2008, 16:09</div></div><div class="posttext">Using xml.nsh plugin created by Instructor.<br />
I am trying to create three similar Nodes at the end of Server/Services/Engine/Host. When I create just one Node everything works fine. When I generate multiples, the result is less than desirable.<br />
<br />
My test script:<br />
#XML Plugin Examples<br />
Name &quot;XMLTest&quot;<br />
OutFile &quot;XMLTest.exe&quot;<br />
!include &quot;XML.nsh&quot;<br />
<br />
# open section<br />
section<br />
; Example of usage<br />
<br />
${xml::LoadFile} &quot;C:\Contenta36Install\NSIS Scripts\test.xml&quot; $0<br />
${xml::GotoPath} &quot;/config/local/host&quot; $0<br />
${xml::CreateNode} '&lt;Context docBase=&quot;E:\ContentaView\&quot; path=&quot;/servlets3&quot;&gt;&lt;/Context&gt;' $0<br />
${xml::InsertEndChild} &quot;$0&quot; $0<br />
${xml::CreateNode} '&lt;Context docBase=&quot;G:\ContentaViewData\collections\NIAPS_ContentaView3.6\httpdocs\&quot; path=&quot;/wietmsd&quot;&gt;&lt;/Context&gt;' $0<br />
${xml::InsertEndChild} &quot;$0&quot; $0<br />
${xml::CreateNode} '&lt;Context docBase=&quot;G:\ContentaViewData\collections\&quot; path=&quot;/collections&quot;&gt;&lt;/Context&gt;' $0<br />
${xml::InsertEndChild} &quot;$0&quot; $0<br />
${xml::SaveFile} &quot;C:\Contenta36Install\NSIS Scripts\test.xml&quot; $0<br />
${xml::Unload} ; unload plugin<br />
# end the section<br />
SectionEnd<br />
<br />
Test Results:<br />
&lt;config&gt;<br />
    &lt;local&gt;<br />
        &lt;host&gt;<br />
            &lt;Context docBase=&quot;E:\ContentaView\&quot; path=&quot;/servlets3&quot;&gt;<br />
                &lt;Context docBase=&quot;G:\ContentaViewData\collections\NIAPS_ContentaView3.6\httpdocs\&quot; path=&quot;/wietmsd&quot;&gt;<br />
                    &lt;Context docBase=&quot;G:\ContentaViewData\collections\&quot; path=&quot;/collections&quot; /&gt;<br />
                &lt;/Context&gt;<br />
            &lt;/Context&gt;<br />
        &lt;/host&gt;<br />
    &lt;/local&gt;<br />
&lt;/config&gt;<br />
<br />
Target Results for Production:<br />
  &lt;Valve className=&quot;org.jboss.web.tomcat.tc5.jca.CachedConnectionValve&quot; cachedConnectionManagerObjectName=&quot;jboss.jca:service=CachedConnectionManager&quot; transactionManagerObjectName=&quot;jboss:service=TransactionManager&quot; /&gt; <br />
<br />
  &lt;Context docBase=&quot;E:\ContentaView\&quot; path=&quot;/servlets3&quot; /&gt; <br />
  &lt;Context docBase=&quot;G:\ContentaViewData\collections\NIAPS_ContentaView3.6\httpdocs\&quot; path=&quot;/wietmsd&quot; /&gt; <br />
  &lt;Context docBase=&quot;G:\ContentaViewData\collections\&quot; path=&quot;/collections&quot; /&gt;<br />
&lt;/Host&gt;<br />
&lt;/Engine&gt;<br />
&lt;/Service&gt;<br />
&lt;/Server&gt;<br />
Notes for desired result:<br />
The last three Context Nodes are added just before the closing Host Element without deleting any of the other Host children, i.e Valve.<br />
<br />
Any suggestions would be gratefully appreciated.<br />
Thank you in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">HolyKami</div><div class="date">8th December 2008, 22:03</div></div><div class="posttext">After the first {InsertEndChild} you need to move the node forward by using {InsertAfterNode}.<br />
<br />
The XML NSIS plugin has good documentation on usage.<br />
Below I pasted a working solution to your problem.<br />
(Variable changes didn't matter, so don't worry about that)<br />
<br />
# open section<br />
section<br />
; Example of usage<br />
<br />
${xml::LoadFile} &quot;C:\Documents and Settings\Administrator\Desktop\NSI XML\test.xml&quot; $0<br />
${xml::GotoPath} &quot;/config/local/host&quot; $0<br />
${xml::CreateNode} '&lt;Context docBase=&quot;E:\ContentaView\&quot; path=&quot;/servlets3&quot;&gt;&lt;/Context&gt;' $1<br />
${xml::InsertEndChild} &quot;$1&quot; $0<br />
${xml::CreateNode} '&lt;Context docBase=&quot;G:\ContentaViewData\collections\NIAPS_ContentaView3.6\httpdocs\&quot; path=&quot;/wietmsd&quot;&gt;&lt;/Context&gt;' $2<br />
${xml::InsertAfterNode} &quot;$2&quot; $1<br />
${xml::CreateNode} '&lt;Context docBase=&quot;G:\ContentaViewData\collections\&quot; path=&quot;/collections&quot;&gt;&lt;/Context&gt;' $3<br />
${xml::InsertAfterNode} &quot;$3&quot; $2<br />
${xml::SaveFile} &quot;C:\Documents and Settings\Administrator\Desktop\NSI XML\test.xml&quot; $0<br />
${xml::Unload} ; unload plugin<br />
# end the section<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>