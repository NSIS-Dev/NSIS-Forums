<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with external dll, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with external dll NSIS Discussion" />
	
	<title> Problem with external dll [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with external dll</div>
<hr />
<div class="pda"><a href="t-347158.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=347158">Problem with external dll</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">alexfelix</div><div class="date">20th August 2012, 15:25</div></div><div class="posttext">Hi guys, i'm newby on nsis programming.<br />
i'm trying to call a method of dll from nsis using system plugin but i always get a chaine of char 'error' like value in the register of the result.<br />
check is the name of dll<br />
<br />
Code:<br />
System::Call 'check::Sum(i, i) i (R0, R1) .R3'<br />
<br />
and the prototype of function Sum is<br />
int Sum(int s1, int s2)<br />
<br />
i'm using the function Sum just to try if system:call works..<br />
<br />
what's wrong in my code???<br />
May someone help me????<br />
thks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">20th August 2012, 18:50</div></div><div class="posttext">Use http://www.dependencywalker.com/ and make sure the exported function name is not decorated.<br />
<br />
If the function is cdecl and not stdcall then you need to to use a switch, check the system readme.<br />
<br />
Is this dll in the path so it can be found by LoadLibrary?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alexfelix</div><div class="date">21st August 2012, 12:50</div></div><div class="posttext">The libray is found by the progam.<br />
I find the problem. VS2008 has created the library with non solved dipendecies, so i can't call correctly the functions in the dll.<br />
Now i have another problem:<br />
when i call the method of dll with systrem:call and i use .rX or .s the program rise a runtime error and stop working.<br />
Why i have an error using . before registry or stack?<br />
Have you any idea about this stuff?<br />
tnk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">22nd August 2012, 02:23</div></div><div class="posttext">.rX means no input, so if you have MyFunc(char*foo) then foo will be 0 and not a string in your function. It is generally used like this: For void GetNumber(int*num){*num=666;} you would use System::Call &quot;dll::GetNumber(*i.r0)&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>