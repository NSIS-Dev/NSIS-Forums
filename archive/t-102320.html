<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to use this windows., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to use this windows. NSIS Discussion" />
	
	<title> How to use this windows. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to use this windows.</div>
<hr />
<div class="pda"><a href="t-102320.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=102320">How to use this windows.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cxji3275</div><div class="date">28th August 2002, 03:56</div></div><div class="posttext">How can I make this window using nsis's Instruction.<br />
If modify 'MessageBox' then is it possible?<br />
<br />
This Windows<br />
http://edps.cc/pds/me/nsis-windows.jpg <br />
<br />
I'm sorry my broken English. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">28th August 2002, 08:59</div></div><div class="posttext">The feature you want doesn't exist in NSIS.<br />
<br />
You could write a plugin DLL to do it. It wouldn't need much code, a function to display a modeless window, the icon and the text, and another function to dismiss the window (you need two so you can continue to let NSIS run in the background and do your registry stuff).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2002, 09:50</div></div><div class="posttext">A DLL won't do the trick here. NSIS automatically unloads the DLL after it exectutes the required function. Make an EXE and use Exec without wait. Do your stuff, and then call your destroy function.<br />
<br />
unloads not uploads :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">28th August 2002, 14:28</div></div><div class="posttext">Okay I see that your suggestion would work KiCHiK but I can't see what's wrong with a DLL in this case. A DLL provides extended functionality on the installation machine, so instead of saying MessageBox you'd say MyCustomMessageBox, and the benefit of it being in the DLL is that it's in the same process and so can be an owned window of the NSIS window. Where am I going wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2002, 14:40</div></div><div class="posttext">When the DLL gets unloaded the window will be destroyed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">28th August 2002, 14:45</div></div><div class="posttext">So are you saying that the DLL is loaded/executed/unloaded for every instruction that uses it. I *thought* it used to persist until the end of the installer and was cleaned up then, that allowed it to have persistent state.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2002, 14:49</div></div><div class="posttext">Nope, that's not the way it works :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">28th August 2002, 22:56</div></div><div class="posttext">If you write a dll to do it for instance, it would have to be responsible for creating the registry entries as well as you can't execwait a dll.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CodeSquid</div><div class="date">29th August 2002, 08:39</div></div><div class="posttext">I think a new instruction would solve this, something like<br />
KeepPluginLoaded MyMessageBox.dll  <br />
<br />
When this instruction is used, the specified dlls will not be unloaded until the installer quits and not directly after the function call.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">29th August 2002, 08:53</div></div><div class="posttext">Originally posted by rainwater <br />
If you write a dll to do it for instance, it would have to be responsible for creating the registry entries as well as you can't execwait a dll. <br />
<br />
Not necessary, the dll would have two functions (or one with a switch parameter, or that is context sensitive) so that you make one call to show the dialog, then in NSIS do yer registry stuff, then another call to dismiss the dialog.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2002, 11:01</div></div><div class="posttext">Coming in alpha 7... :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">29th August 2002, 11:06</div></div><div class="posttext">If for some reason it doesn't make it I'll be happy to have a go at adding it. By about the end of next week I should have my free time back at last, yay! :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CodeSquid</div><div class="date">29th August 2002, 11:42</div></div><div class="posttext">Ah, the /NOUNLOAD parameter to CallInstDLL is already in the CVS repository. Great work. But does it work with the alternative way to call plugins? Does /NOUNLOAD work there as well?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2002, 11:50</div></div><div class="posttext">Not yet :(<br />
I need to think of a way to make this happen... Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">29th August 2002, 12:02</div></div><div class="posttext">Weeeelllll you could use a cryptic approach, something like if the command is followed by ! (immediately with no whitespace) then don't unload it, or you could have /NOUNLOAD and if u see that as the first plugin argument obey it and don't send it to the plugin, start the arguments after if u see what I mean, or .... hundreds of other ideas :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CodeSquid</div><div class="date">29th August 2002, 12:18</div></div><div class="posttext">if one of the parameters (or the first, just as you like it) is /NOUNLOAD, then don't unload the dll. If the string /NOUNLOAD should be passed to the DLL for some reason, it has to be quoted.<br />
<br />
myfunction /NOUNLOAD<br />
this does not unload the DLL<br />
<br />
myfunction &quot;/NOUNLOAD&quot;<br />
this passes /NOUNLOAD as parameter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2002, 12:24</div></div><div class="posttext">Quotes gets killed by the pre-processor. If you want to use /NOUNLOAD as a parameter, just push it. Soon to be in the CVS.<br />
<br />
Done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">29th August 2002, 12:32</div></div><div class="posttext">Don't forget to mention use of /NOUNLOAD with the automagical plugin calling somewhere in the docs. I'd add it myself but I have no CVS access at the mo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2002, 12:37</div></div><div class="posttext">Right, almost forgot :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>