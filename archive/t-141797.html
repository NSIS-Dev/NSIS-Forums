<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Add Check for Flash Function in Modern UI flow example, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Add Check for Flash Function in Modern UI flow example NSIS Discussion" />
	
	<title> Add Check for Flash Function in Modern UI flow example [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Add Check for Flash Function in Modern UI flow example</div>
<hr />
<div class="pda"><a href="t-141797.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=141797">Add Check for Flash Function in Modern UI flow example</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mikemanczur</div><div class="date">11th July 2003, 00:25</div></div><div class="posttext">Can someone give me an example of how I can insert a page after the license page that checks for Flash using the below function:<br />
<br />
Function IsFlashInstalled<br />
  Push $R0<br />
  ClearErrors<br />
  ReadRegStr $R0 HKCR &quot;CLSID\{D27CDB6E-AE6D-11cf-96B8-444553540000}&quot; &quot;&quot;<br />
  IfErrors lbl_na<br />
    StrCpy $R0 1<br />
  Goto lbl_end<br />
  lbl_na:<br />
    StrCpy $R0 0<br />
  lbl_end:<br />
  Exch $R0<br />
FunctionEnd<br />
<br />
I am having a little trouble with it.  Do I use an *.ini, just a message box?  I am pretty new at this so please give me an example.  I attached my *.nsi file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">11th July 2003, 02:33</div></div><div class="posttext">You could do it with an INI or just a message box.  Although you did mention you wanted a page which would require an INI file.  You could do it with a message box using the function,<br />
<br />
  MUI_CUSTOMFUNCTION_LICENSE_LEAVE <br />
<br />
Check out the Modern UI docs for more details.  Add<br />
<br />
  !define MUI_CUSTOMFUNCTION_LICENSE_LEAVE myLicensePgLeave<br />
<br />
to your script.  Then add the leaving license page function and make it something like this.  I pretty much just made it pseudo code to give you an idea of what it might look like.<br />
<br />
  Function myLicensePgLeave<br />
    IsFlashInstalled<br />
<br />
    ; If it is then display message box A<br />
<br />
    ; If not then display message box B<br />
  FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th July 2003, 11:53</div></div><div class="posttext">Why check after the license is shown? If you want to check before the license is shown do it in .onInit or .onGUIInit (if you're using the MUI see the MUI readme before you try using .onGUIInit).<br />
<br />
If you want to show a page then you need an INI file and InstallOptions. Take a look at the InstallOptions.nsi example in Examples\Modern UI.<br />
<br />
Ignore what's below in the little writing, it's just another solution that isn't possible yet.<br />
<br />
You might also consider putting the warning in the welcome page. For that you'd have to change the text in it. To do that you need to define a pre function for the welcome page (!define MUI_CUSTOMFUNCTION_WELCOME_PRE myFunction), and in that function write to the INI file the values you need (use the MUI_INSTALLOPTIONS_WRITE macro, for example: !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 2&quot; &quot;Text&quot; &quot;Flash is not installed... bla bla bla&quot;). You should also define a leave function for the welcome page so the user won't be able to leave it and continue the installtion. I'm afraid this is not yet possible...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>