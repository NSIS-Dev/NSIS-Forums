<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Managing dependent sections, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Managing dependent sections NSIS Discussion" />
	
	<title> Managing dependent sections [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Managing dependent sections</div>
<hr />
<div class="pda"><a href="t-260127.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=260127">Managing dependent sections</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MrEyes</div><div class="date">22nd November 2006, 17:08</div></div><div class="posttext">Hello all,<br />
<br />
I am looking for a way to manage multiple dependent sections.  Basically I have a set of sections similar to this:<br />
<br />
<br />
SectionGroup<br />
	Section &quot;Primary Section&quot; ps<br />
	SectionEnd<br />
	Section &quot;Dependent Section 1&quot; ds1<br />
	SectionEnd<br />
	Section &quot;Dependent Section 2&quot; ds2<br />
	SectionEnd<br />
	Section &quot;Dependent Section 3&quot; ds3<br />
	SectionEnd<br />
	Section &quot;Dependent Section 4&quot; ds4<br />
	SectionEnd<br />
SectionGroupEnd<br />
 <br />
<br />
I need to ensure that if any of the dependent sections are selected the primary section is also selected, also I need to ensure that if the primary section is unselected then all dependents are unselected.<br />
<br />
I have been playing around with .onSelChange and the code found at:<br />
<br />
http://nsis.sourceforge.net/Section_Dependency<br />
<br />
However, I am too thick to get this working</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">22nd November 2006, 17:49</div></div><div class="posttext">Try this code:<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
...<br />
${If} ${SectionIsSelected} ds1<br />
${OrIf} ${SectionIsSelected} ds2<br />
${OrIf} ${SectionIsSelected} ds3<br />
${OrIf} ${SectionIsSelected} ds4<br />
!insertmacro SelectSection ps<br />
${EndIf}<br />
${Unless} ${SectionIsSelected} ps<br />
!insertmacro UnselectSection ds1<br />
!insertmacro UnselectSection ds2<br />
!insertmacro UnselectSection ds3<br />
!insertmacro UnselectSection ds4<br />
${EndUnless}<br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MrEyes</div><div class="date">22nd November 2006, 21:08</div></div><div class="posttext">Thanks for the reply, unfortunately I could not get it to work either.  However, your use of LogicLib got me thinking and I came up with an alternative solution.<br />
<br />
Basically, if a user deselects the primary section all dependent sections are unchecked and disabled.  If the user then reselects the primary section they now have the option of choosing which dependant sections they want.<br />
<br />
<br />
!DEFINE SF_DISABLED 16<br />
!DEFINE SF_ENABLED_UNCHECKED 0<br />
<br />
Function .onSelChange<br />
 SectionGetFlags ${ps} $0<br />
 SectionGetFlags ${ds1} $1<br />
	<br />
 ${If} $0 != ${SF_SELECTED}<br />
  SectionSetFlags ${ds1} ${SF_DISABLED}<br />
  SectionSetFlags ${ds2} ${SF_DISABLED}<br />
  SectionSetFlags ${ds3} ${SF_DISABLED}<br />
  SectionSetFlags ${ds4} ${SF_DISABLED}<br />
 ${ElseIf} $1 == ${SF_DISABLED}<br />
  SectionSetFlags ${ds1} ${SF_ENABLED_UNCHECKED}<br />
  SectionSetFlags ${ds2} ${SF_ENABLED_UNCHECKED}<br />
  SectionSetFlags ${ds3} ${SF_ENABLED_UNCHECKED}<br />
  SectionSetFlags ${ds4} ${SF_ENABLED_UNCHECKED}<br />
 ${EndIf}		<br />
FunctionEnd<br />
<br />
<br />
While this works, I would still be curious to find out if there is a way of doing it as I originally planned</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">23rd November 2006, 17:02</div></div><div class="posttext">:p<br />
Small typo - forget ${} for all section id, i.e. ${ps}, ${ds1}.<br />
<br />
While this works, I would still be curious to find out if there is a way of doing it as I originally planned<br />
Why this code does not work as you planned?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>