<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how to detect (and kill) if a process is running for *all* users?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how to detect (and kill) if a process is running for *all* users? NSIS Discussion" />
	
	<title> how to detect (and kill) if a process is running for *all* users? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how to detect (and kill) if a process is running for *all* users?</div>
<hr />
<div class="pda"><a href="t-274475.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=274475">how to detect (and kill) if a process is running for *all* users?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bobics</div><div class="date">16th July 2007, 23:11</div></div><div class="posttext">I'm using FindProcDLL to detect if a process is running, but it appears it only detects it for the currently logged in user.  In some cases this might be okay, but our app may be running with multiple users logged in (i.e. with Fast User Switching in XP).<br />
<br />
At the minimum we'd like to detect if our app is running from another user's account.  We may also want to kill the other user's process (which I assume should be pretty straightforward once I have the handle).<br />
<br />
TIA,<br />
bobics</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th July 2007, 17:46</div></div><div class="posttext">Have you tried one of the other process detection plug-ins?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bobics</div><div class="date">17th July 2007, 20:57</div></div><div class="posttext">It took me some time but here are the results.<br />
<br />
Of the plugins/sample scripts I tried, only nsProcess::FindProcess detected another user's process (and I think I picked one implementation out of every bucket).  In case it might be helpful to anyone else, here's my sample script:<br />
<br />
<br />
SetCompressor /solid lzma<br />
<br />
!include &quot;nsProcess.nsh&quot;<br />
!include &quot;FindProcess.nsh&quot;<br />
<br />
;--- Project Settings --------<br />
OutFile &quot;setup.exe&quot;<br />
<br />
Section<br />
SectionEnd<br />
<br />
Function .onInit<br />
	FindProcDLL::FindProc &quot;firefox.exe&quot;<br />
	MessageBox MB_OK &quot;FindProcDLL::FindProc = $R0 (found=1)&quot;<br />
	<br />
	${nsProcess::FindProcess} &quot;firefox.exe&quot; $0<br />
	MessageBox MB_OK &quot;nsProcess::FindProcess = $0 (found=0)&quot;<br />
	<br />
	Processes::FindProcess &quot;firefox.exe&quot;<br />
	MessageBox MB_OK &quot;Processes::FindProcess = $R0 (found=1)&quot;<br />
	;Call listProcesses<br />
<br />
	FindWindow $0 &quot;MozillaUIWindowClass&quot; &quot;&quot;<br />
	MessageBox MB_OK &quot;FindWindow = $0 (found&lt;&gt;0)&quot;<br />
	<br />
	${FindProcess} &quot;firefox.exe&quot; $0<br />
	MessageBox MB_OK &quot;FindProcess = $0 (found=1)&quot;<br />
	<br />
	;I think there's a bug in fct, it just kills the process<br />
	fct::fct /MSGONLY /QUESTION &quot;Terminate?&quot; /WC &quot;MozillaUIWindowClass&quot; /WTP &quot;Firefox&quot;<br />
	<br />
	abort<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>