<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Different folders, same filenames, different files!, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Different folders, same filenames, different files! NSIS Discussion" />
	
	<title> Different folders, same filenames, different files! [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Different folders, same filenames, different files!</div>
<hr />
<div class="pda"><a href="t-214402.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214402">Different folders, same filenames, different files!</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">CobraA1</div><div class="date">28th April 2005, 08:17</div></div><div class="posttext">OK, I've been having a problem - I'm trying to create an installer for a Torque game I am working on, however, I've run into some problems.<br />
<br />
-I need to include two folders, a &quot;common&quot; folder, and a folder containing the data for my game.<br />
<br />
-There are files named the same in each folder, but they are not the same file! NSIS, however, treats them the same.<br />
<br />
-I need a way to automate it or use wildcards. There are many files at different levels of the hierarchy.<br />
<br />
Example:<br />
<br />
  SetOutPath &quot;$INSTDIR\common&quot;<br />
  File /r &quot;*.dso&quot;<br />
<br />
  SetOutPath &quot;$INSTDIR\Data&quot;<br />
  File /r &quot;*.dso&quot;<br />
<br />
<br />
If I have two &quot;main.dso&quot;  - one in common and one in Data, it will only use one and not the other :(. This is not the behavior I want.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th April 2005, 08:54</div></div><div class="posttext">There's an instruction to stop NSIS from not including a second file if it has the same name as a previously compressed one, but I can't find it in the docs.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CobraA1</div><div class="date">1st May 2005, 08:20</div></div><div class="posttext">Oh well. I was hoping for an answer, but I guess I'll have to create my own software to automatically create the NSIS script. It's not the best way, but it appears to be the only way :(.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">2nd May 2005, 09:02</div></div><div class="posttext">Maybe NSIS could check this automatically:<br />
<br />
Include all files only once which have the same content (check this on compile time). Add filename (and attributes) to this file content for each occurence of &quot;File&quot;.<br />
<br />
So files with same name and different content wouldn't be a problem, files with possibly different name and same content, neither.<br />
<br />
Just an idea for some future NSIS release.  :) <br />
<br />
PS: The check for equal files could calculate CRC32 first, sort the file table and then compare byte-by-byte files with same CRC32 (just to be sure).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd May 2005, 18:31</div></div><div class="posttext">NSIS already includes the content of identical files only once.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CobraA1</div><div class="date">3rd May 2005, 19:00</div></div><div class="posttext">Yeah, but in my case they are not identical files! They only happen to have the same filename, and are located in different folders :(.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd May 2005, 19:17</div></div><div class="posttext">In your case, NSIS did what you told it to. You told it to include all the files under the current directory which have the extension of .dso twice. What you probably want to do is:SetOutPath $INSTDIR\common<br />
File /r common\*.dso<br />
SetOutPath $INSTDIR\Data<br />
File /r Data\*.dso</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CobraA1</div><div class="date">4th May 2005, 04:47</div></div><div class="posttext">Got it to work, thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>