<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Path,Version, Name...multible installers, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Path,Version, Name...multible installers NSIS Discussion" />
	
	<title> Path,Version, Name...multible installers [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Path,Version, Name...multible installers</div>
<hr />
<div class="pda"><a href="t-334281.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=334281">Path,Version, Name...multible installers</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Harner</div><div class="date">1st September 2011, 07:23</div></div><div class="posttext">I´m trying to read from a Ini File and then define this string. Easier to understand with some code:<br />
<br />
!define NAME $Name<br />
!define VERSION $Version       <br />
!define InstallDirectory $customINSTDIR<br />
...<br />
Name &quot;${NAME} ${VERSION}&quot; <br />
InstallDir &quot;$customINSTDIR&quot;<br />
...<br />
<br />
Thats in my .nsh file which I include in a main installer and another installer which is executed from the main one. In the main installer I call:<br />
<br />
Function .onInit<br />
ReadINIStr $Name &quot;$EXEDIR\Settings.ini&quot; &quot;Settings&quot; &quot;Product_Name&quot;<br />
ReadINIStr $Version &quot;$EXEDIR\Settings.ini&quot; &quot;Settings&quot; &quot;Product_Version&quot;<br />
ReadINIStr $customINSTDIR &quot;$EXEDIR\Settings.ini&quot; &quot;Settings&quot; &quot;Install_Path&quot;<br />
//StrCpy $Instdir $customINSTDIR ;I need this one to set the Instdir <br />
<br />
FunctionEnd<br />
<br />
My questions is why the variables are not set in other installer which have the same .nsh file? And why do I have to use strcpy in the .oninit function to set the Instdir?<br />
Name and Version are with a !define so it should be set like a constant and when I call other installers they should see this variable right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2011, 07:43</div></div><div class="posttext">The other installer may be set to use the variable, but the variable will have no contents. You need to read the ini in the second installer as well.<br />
<br />
As for why you need to strcpy $instdir, perhaps you're using an installdirregkey command somewhere? Anyway, you should probably use $instdir directly, no need to use a separate variable for that:<br />
ReadINIStr $INSTDIR &quot;$EXEDIR\Settings.ini&quot; &quot;Settings&quot; &quot;Install_Path&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Harner</div><div class="date">1st September 2011, 08:07</div></div><div class="posttext">But what if I change the INSTDIR...<br />
Then I´ll have to change the ini str read it in the other installers...<br />
<br />
The best way would it be if Name and Version would be set so I can use them in the other installers. (Without reading the ini)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2011, 09:42</div></div><div class="posttext">There are several ways you can pass information to the second installer. None of them are automatic (almost nothing in NSIS is).<br />
<br />
- Write to ini or registry before starting second installer<br />
- Use commandline parameters (see http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.11 )<br />
- Use FileWriteByte to append info to the second installer (comedy option)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>