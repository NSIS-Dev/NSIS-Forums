<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Double variable expansion, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Double variable expansion NSIS Discussion" />
	
	<title> Double variable expansion [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Double variable expansion</div>
<hr />
<div class="pda"><a href="t-282158.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=282158">Double variable expansion</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">wraithdu</div><div class="date">26th November 2007, 21:31</div></div><div class="posttext">Is there a way to make NSIS do double variable expansions?  I'm trying to set some environment variables that are read from an INI file.  The values in the INI file reference variables set in the launcher.  For ex the INI has sections like -<br />
<br />
[1]<br />
name=TCDrive<br />
value=$MEDIAROOT<br />
<br />
The var $MEDIAROOT is derived in the launcher.  The name and value are read from the INI into $R0 and $R1, and the System call uses &quot;$R0&quot; and &quot;$R1&quot;.  What I get is an environment variable like (type set at command prompt) -<br />
<br />
TCDrive=$MEDIAROOT<br />
<br />
So how can I get NSIS to do the double expansion so I get the correct env var?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th November 2007, 23:24</div></div><div class="posttext">You'll have to manually implement that as all of the expansion is done in the compiler at build time and the installer itself doesn't know how to expand them. The installer itself isn't even aware the variables have names.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wraithdu</div><div class="date">27th November 2007, 01:43</div></div><div class="posttext">Do you have any tips on how I should go about doing that?  I've got no idea.  Also, how is that possible that all expansion is done at compile time?  Any of the contstants must be expanded at runtime as they change from system to system and based on the current script directory.<br />
<br />
Anyways, I can't figure out how to accomplish what I want.  Reading from the INI seems to cause the problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th November 2007, 17:59</div></div><div class="posttext">You can use the WordReplace function (http://nsis.sourceforge.net/Docs/AppendixE.html).<br />
<br />
The variables aren't actually expanded at compile-time. That was wrong term usage on my end. But they are stripped of their names and assigned a number, so the installer doesn't know of names at all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wraithdu</div><div class="date">28th November 2007, 05:55</div></div><div class="posttext">Thanks!  My brain just needed a kick in the right direction.  Works like a charm now :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>