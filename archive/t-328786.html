<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Inserting a line into an .ini file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Inserting a line into an .ini file NSIS Discussion" />
	
	<title> Inserting a line into an .ini file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Inserting a line into an .ini file</div>
<hr />
<div class="pda"><a href="t-328786.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=328786">Inserting a line into an .ini file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Rajada</div><div class="date">22nd March 2011, 21:19</div></div><div class="posttext">I have recently taken over (read, been given control unexpectedly) leading a project wherein a NSIS installer is used. I've had code experience before, but this is very different than Java and C based code I know moderately well. My installer uses the following function, allowing me to rewrite lines in an ini file. For example...<br />
<br />
WriteINIStr &quot;$INSTDIR\System\Nerf.ini&quot; &quot;Engine.GameEngine&quot; &quot;CacheSizeMegs&quot; &quot;256&quot;<br />
<br />
 would affect in the ini the line &quot;CacheSizeMegs=256&quot; under the heading &quot;[Engine.GameEngine]&quot;.<br />
<br />
My first question would be is this function something that came with the language? In other words a native or built in function? I can't seem to find a definition for it in the installer.<br />
<br />
My second question is can I insert lines using the same or a similar function? To be more clear, I need it to change a section in the ini from this:<br />
<br />
...<br />
[Engine.HUD]<br />
HudMode=0<br />
Crosshair=10<br />
<br />
[Card1]<br />
...<br />
<br />
to this:<br />
<br />
...<br />
[Engine.HUD]<br />
HudMode=0<br />
Crosshair=10<br />
<br />
[NerfI.NerfHUD]<br />
CrosshairColor=(R=0,G=160,B=225,A=0)<br />
bAllowCustomCrosshairs=True<br />
<br />
[Card1]<br />
...<br />
<br />
<br />
which involves adding a new header and two lines below it. So I need to know the best way to go about it.<br />
<br />
Thanks in advance, and excuse me if my terminology is a bit off, I've only got what I know from previous code experience and what I have managed to self teach myself about this language in the very few hours I've had to tinker with it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd March 2011, 21:34</div></div><div class="posttext">WriteINIStr is in the user manual. It uses the WritePrivateProfileString Win32 function underneath. If you need to add more entries, add more WriteINIStr lines. The order that they are in the INI file is not important. WriteINIStr will add the entries under the section if it already exists (after any existing values) or if the section does not already exist, will add the section to the end of the INI file.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rajada</div><div class="date">22nd March 2011, 21:54</div></div><div class="posttext">Okay! Thanks for clearing that up. Yes I knew the order isn't important as you said, but I had no idea it could create the sections too. That helps immensely, thanks a bunch.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>