<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" ReadRegStr - what's wrong, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  ReadRegStr - what's wrong NSIS Discussion" />
	
	<title> ReadRegStr - what's wrong [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  ReadRegStr - what's wrong</div>
<hr />
<div class="pda"><a href="t-220915.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=220915">ReadRegStr - what's wrong</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 20:30</div></div><div class="posttext">Hello Guys,<br />
i'm new and excuse me for me english, i'm austrian. <br />
<br />
I tried for a couple of days and search here in the forum and in the FAQ and in the documents, but i haven't found an solution. <br />
<br />
I will install a addon for a Program. The program is existing installed on the pc's from the users. But i don't know, in which location. Under c:\programme oder d<br />
:\program files  and so one. <br />
<br />
Now i have see the ReadRegStr but i become an error:<br />
<br />
Error: command ReadRegStr not valid outside section or function <br />
<br />
My lines are here: <br />
<br />
<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Microsoft\Microsoft Games\Flight Simulator\9.0&quot; &quot;EXE Path&quot;<br />
StrCpy $0 $INSTDIR &quot;&quot;<br />
 <br />
<br />
In the EXE Path (this is a String) there i will find the correct path to the application.<br />
<br />
And in this path i will installe my file, as the same folder structure. Does this go? I have search and tried, but i have no idea what's wrong.<br />
<br />
And the next was in my script: <br />
<br />
OutFile setup.exe<br />
InstallDir $INSTDIR<br />
.....<br />
SetOutPath &quot;$INSTDIR $0&quot;<br />
File &quot;..\Microsoft Games\Flig<br />
<br />
<br />
I know, any user will say, i should search in the forum, but believe me, i have search for a long time. <br />
<br />
Seeming i'm too stupid. <br />
:rolleyes: <br />
<br />
I hope everyone can help me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ParallaxTZ</div><div class="date">7th July 2005, 20:32</div></div><div class="posttext">Do you have a &quot;Section&quot; in your installer?  Many functions only work between &quot;Section&quot; and &quot;SectionEnd&quot;.<br />
<br />
example:<br />
<br />
<br />
Section &quot;my program&quot; SEC01<br />
  ReadRegStr $0 HKLM &quot;SOFTWARE\Microsoft\Microsoft Games\Flight Simulator\9.0&quot; &quot;EXE Path&quot;<br />
  StrCpy $INSTDIR $0<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  File &quot;&quot;..\Microsoft Games\Flig<br />
.<br />
.<br />
.<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 20:36</div></div><div class="posttext">Yes i have a section. Here are the lines.<br />
<br />
<br />
; Main Install settings<br />
<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Microsoft\Microsoft Games\Flight Simulator\9.0&quot; &quot;EXE Path&quot;<br />
StrCpy $0 $INSTDIR &quot;&quot;<br />
<br />
Name &quot;${APPNAMEANDVERSION}&quot;<br />
<br />
InstallDir &quot;$0&quot;<br />
InstallDirRegKey HKLM &quot;Software\${APPNAME}&quot; &quot;&quot;<br />
OutFile &quot;OutFile.exe&quot;<br />
<br />
; Modern interface settings<br />
!include &quot;MUI.nsh&quot;<br />
<br />
!define MUI_ABORTWARNING<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;lizenz.txt&quot;<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
; Set languages (first is default language)<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_RESERVEFILE_LANGDLL<br />
<br />
Section &quot;Tongass&quot; Section1<br />
<br />
	; Set Section properties<br />
	SetOverwrite on<br />
<br />
	; Set Section Files and Shortcuts<br />
	SetOutPath &quot;$INSTDIR $0&quot;<br />
	File &quot;..\Microsoft Games\Flight Simulator 9\Scenery\UTCanada\TFUTback\FSAddon 'Tongass Fjords' UT file backup directory.txt&quot;<br />
	File &quot;..\Microsoft Games\Flight Simulator 9\Scenery\UTCanada\TFUTback\TF install - backup of UT files.bat&quot;<br />
	File &quot;..\Microsoft Games\Flight Simulator 9\Scenery\UTCanada\TFUTback\TF uninstall - moving back UT files.bat&quot;<br />
	CreateShortCut &quot;$DESKTOP\Tongass.lnk&quot; &quot;$INSTDIR\TFUTback\TF install - backup of UT files.bat&quot;<br />
	CreateDirectory &quot;$SMPROGRAMS\Tongass&quot;<br />
	CreateShortCut &quot;$SMPROGRAMS\Tongass\Tongass.lnk&quot; &quot;$INSTDIR\TFUTback\TF install - backup of UT files.bat&quot;<br />
	CreateShortCut &quot;$SMPROGRAMS\Tongass\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot;<br />
<br />
SectionEnd<br />
<br />
<br />
I have this install file create with Venis IX the Free Version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ParallaxTZ</div><div class="date">7th July 2005, 20:42</div></div><div class="posttext">I had been editing my post as you posted that.  Does the example above help a little?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 20:48</div></div><div class="posttext">Hello, <br />
the error message is now away, i can compile and test, but i can't see the destination Folder.<br />
<br />
The installer can't presumably read the string. Hhmm.... i will make a littel screenshot for this string in the registry. <br />
<br />
Should you know &quot;Installe Creator&quot; from Clickteam? With this installer that's work, but this installer have no enough functions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 20:52</div></div><div class="posttext">Here is the screenshot:<br />
http://www.bush-pilots.net/pics/registry.jpg</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Homer1969</div><div class="date">7th July 2005, 20:57</div></div><div class="posttext">Move the following lines into your section:<br />
<br />
ReadRegStr $0 HKLM &quot;SOFTWARE\Microsoft\Microsoft Games\Flight Simulator\9.0&quot; &quot;EXE Path&quot;<br />
StrCpy $0 $INSTDIR &quot;&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 21:04</div></div><div class="posttext">I have this line in the section, but i can't see any Destination path. :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Homer1969</div><div class="date">7th July 2005, 21:15</div></div><div class="posttext">Get rid of the StrCpy line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bushpilot</div><div class="date">7th July 2005, 21:18</div></div><div class="posttext">Yiippppiiiee, that's it! Wow... it's great. <br />
Many thanks for your help. <br />
<br />
I 've sitting about 3 days for this problem... :igor: but, i think, this was not the only. ;) <br />
<br />
Also thanks. What a great helpfully forum.:up:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>