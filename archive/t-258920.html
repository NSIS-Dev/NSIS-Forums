<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" disable next button in a custom page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  disable next button in a custom page NSIS Discussion" />
	
	<title> disable next button in a custom page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  disable next button in a custom page</div>
<hr />
<div class="pda"><a href="t-258920.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=258920">disable next button in a custom page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mdlazreg</div><div class="date">5th November 2006, 00:58</div></div><div class="posttext">I am having a weird problem. I can not seem to be able to disable the install button in the following script. Just to make sure I am doing everything right I played with disabling the Cancel button and it worked! But I have no idea why the Install button is stubborn or is it me being stupid?<br />
<br />
The script creates a simple license custom page and I want to disable the Install button until the I Agree Radio button is selected otherwise it needs to stay disabled.<br />
<br />
<br />
[Settings]<br />
NumFields=3<br />
[Field 1]<br />
Type=Text<br />
Left=10<br />
Right=-10<br />
Top=10<br />
Bottom=110<br />
State=blabla<br />
Flags=MULTILINE|VSCROLL|READONLY<br />
<br />
[Field 2]<br />
Type=RadioButton<br />
Text=I AGREE<br />
Flags=NOTIFY<br />
State=0<br />
Left=10<br />
Right=110<br />
Top=120<br />
Bottom=128<br />
<br />
[Field 3]<br />
Type=RadioButton<br />
Text=I DO NOT AGREE<br />
Flags=NOTIFY<br />
State=1<br />
Left=10<br />
Right=110<br />
Top=131<br />
Bottom=139<br />
<br />
<br />
<br />
!define FILE_INI           &quot;LicensePage.ini&quot;<br />
!include &quot;MUI.nsh&quot;<br />
!include &quot;Sections.nsh&quot;<br />
!include WinMessages.nsh<br />
<br />
Page custom License LicenseLeave &quot;&quot;<br />
!insertmacro MUI_PAGE_INSTFILES<br />
OutFile &quot;test.exe&quot;<br />
<br />
Section &quot;dummy&quot;<br />
SectionEnd<br />
<br />
<br />
Function .onInit<br />
        !insertmacro MUI_INSTALLOPTIONS_EXTRACT ${FILE_INI}<br />
FunctionEnd<br />
<br />
Function License<br />
        !insertmacro MUI_HEADER_TEXT &quot;License the product&quot; &quot;Please read the license carefully.&quot;<br />
        InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\${FILE_INI}&quot;<br />
        GetDlgItem $1 $HWNDPARENT 1<br />
        EnableWindow $1 0<br />
        InstallOptions::show<br />
FunctionEnd<br />
<br />
Function LicenseLeave<br />
        ReadINIStr $0 &quot;$PLUGINSDIR\${FILE_INI}&quot; &quot;Settings&quot; &quot;State&quot;<br />
        IntCmp $0 0 validate<br />
        IntCmp $0 2 I_AGREE<br />
        IntCmp $0 3 I_DO_NOT_AGREE<br />
        Abort<br />
        I_DO_NOT_AGREE:<br />
                GetDlgItem $1 $HWNDPARENT 1<br />
                EnableWindow $1 0<br />
                GetDlgItem $1 $HWNDPARENT 2<br />
                EnableWindow $1 0<br />
                Abort<br />
        I_AGREE:<br />
                GetDlgItem $1 $HWNDPARENT 1<br />
                EnableWindow $1 1<br />
                GetDlgItem $1 $HWNDPARENT 2<br />
                EnableWindow $1 1<br />
                Abort<br />
        validate:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">5th November 2006, 16:30</div></div><div class="posttext">Your code is dropping through from the &quot;I_DO_NOT_AGREE&quot; section into the &quot;I_AGREE&quot; section. That re-enables the button. You need to exit the funtion or jump to the validate label.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th November 2006, 17:48</div></div><div class="posttext">Abort also returns from the function, so that's not the problem.<br />
<br />
But when testing the script, I don't see the problem. The Install button is disabled and enabled according to the radio button selection. I don't see any reason with that script that'd happen. Have you any more details for reproducing this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mdlazreg</div><div class="date">6th November 2006, 17:41</div></div><div class="posttext">Hi kichik,<br />
<br />
When you said that you were not able to reproduce the problem, I told myself maybe you are using a different version of NSIS. So I went ahead and downloaded the NSIS 2.21 and recompiled my script and now it works.<br />
<br />
The version I found this problem with is NSIS 2.0. NSIS 2.21 does fix the problem. I have no explanation why it does not work with NSIS 2.0.<br />
<br />
Thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>