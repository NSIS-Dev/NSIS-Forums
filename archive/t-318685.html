<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Expand macros (flatten code), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Expand macros (flatten code) NSIS Discussion" />
	
	<title> Expand macros (flatten code) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Expand macros (flatten code)</div>
<hr />
<div class="pda"><a href="t-318685.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318685">Expand macros (flatten code)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stb</div><div class="date">26th April 2010, 18:04</div></div><div class="posttext">Hi,<br />
<br />
is there a way to get the result of the preprocessing of makensis? I want to get a single file with the final code (all includes inline and macros/defines resolved). Makensis does something similar on stdout but that is no real (compilable) code. Source Code that is included with NSIS (e.g. MUI2) should stay in it's original form (no expansion for includes like that). It would be ok to mark the things to expand (!insertmacro and !include statements with a special switch or something like that).<br />
<br />
Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">26th April 2010, 18:57</div></div><div class="posttext">search-and-replace? :)<br />
<br />
( you could even write an 'installer' with NSIS that did this for you ;) )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2010, 19:49</div></div><div class="posttext">It's definitely a lot more complicated than that. What about the conditional compilation instructions (among other compile time instructions)? Even replacing macro parameters with their corresponding values would require a bit of code (and in NSIS? no thanks!) I'm not sure how makensis processes scripts so I do not know if it will hold the expanded script in memory (I doubt it) or a compiled version. So as Animaether suggests (albeit a lot more work) would be to write your own parser. Another option of course would be to modify makensis but I cannot say if that is more work.<br />
<br />
Edit: FYI Java has a Scanner class for tokenizing strings which will definitely cut the work load.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th April 2010, 06:57</div></div><div class="posttext">This tool called Universal Extractor has some rudimentary support for ripping an nsi file from an NSIS installer, if it was compressed with the default compressor and if it's not too complex. It's a lot of pops and pushes and not very understandable, and even then it's definitely not the same as the precompiler output. Either way, it may help in your case.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>