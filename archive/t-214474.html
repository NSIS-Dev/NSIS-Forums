<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Building CVS with scons, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Building CVS with scons NSIS Discussion" />
	
	<title> Building CVS with scons [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Building CVS with scons</div>
<hr />
<div class="pda"><a href="t-214474.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214474">Building CVS with scons</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">29th April 2005, 07:54</div></div><div class="posttext">Hello,<br />
<br />
I tried to compile NSIS with Scons and the MS Toolkit, but it fails, the command prompt tells me that the sdk path could not be found in the registry, i tried to use CPPPATH and LIBPATH to set the path manually but it did not help.<br />
Can someone please help me?<br />
<br />
<br />
D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES<br />
scons: Reading SConscript files ...<br />
<br />
scons: *** Path does not exist for option CPPPATH:<br />
File &quot;SConstruct&quot;, line 61, in ?<br />
D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES CPPPATH=&quot;C:\Program Files\Microso<br />
ft Visual C++ Toolkit 2003\Bin&quot;<br />
scons: Reading SConscript files ...<br />
<br />
scons: *** Path does not exist for option LIBPATH:<br />
File &quot;SConstruct&quot;, line 61, in ?<br />
D:\Downloads\nsis\NSIS&gt;scons -j4 MSTOOLKIT=YES CPPPATH=&quot;C:\Program Files\Microso<br />
ft Visual C++ Toolkit 2003\Bin&quot; LIBPATH=&quot;C:\Program Files\Microsoft Visual C++ T<br />
oolkit 2003\lib&quot;<br />
scons: Reading SConscript files ...<br />
internal error<br />
Traceback (most recent call last):<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Script\__init__.py&quot;, line 1103, in<br />
 main<br />
    _exec_main()<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Script\__init__.py&quot;, line 1097, in<br />
 _exec_main<br />
    _main(args, parser)<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Script\__init__.py&quot;, line 903, in<br />
_main<br />
    SCons.Script.SConscript._SConscript(fs, script)<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Script\SConscript.py&quot;, line 239, i<br />
n _SConscript<br />
    exec _file_ in stack[-1].globals<br />
  File &quot;SConstruct&quot;, line 71, in ?<br />
    defenv.Tool('mstoolkit', toolpath = ['SCons/Tools'])<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Environment.py&quot;, line 906, in Tool<br />
<br />
    return SCons.Tool.Tool(tool, map(self.subst, toolpath))(self)<br />
  File &quot;C:\Program Files\Python24\scons\SCons\Tool\__init__.py&quot;, line 53, in __c<br />
all__<br />
    apply(self.generate, ( env, ) + args, kw)<br />
  File &quot;SCons/Tools\mstoolkit.py&quot;, line 283, in generate<br />
    include_path, lib_path, exe_path, sdk_path = get_msvctoolkit_paths()<br />
  File &quot;SCons/Tools\mstoolkit.py&quot;, line 82, in get_msvctoolkit_paths<br />
    raise SCons.Errors.InternalError, &quot;The Platform SDK directory was not found<br />
in the registry.&quot;<br />
InternalError: The Platform SDK directory was not found in the registry.<br />
D:\Downloads\nsis\NSIS&gt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LIGHTNING UK!</div><div class="date">29th April 2005, 08:51</div></div><div class="posttext">Did you install the Windows SDK?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">29th April 2005, 13:08</div></div><div class="posttext">Yes I installed it, one time without to register the environment variables and one time with these variables and the problem still occurs.<br />
Any idea???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2005, 16:22</div></div><div class="posttext">The error &quot;The Platform SDK directory was not found in the registry&quot; shows if there was an error reading the HKLM\SOFTWARE\Microsoft\MicrosoftSDK\Directories\Install Dir registry key. Make sure the key exists and contains a valid value. If it doesn't, either create it or reinstall the Platform SDK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">29th April 2005, 17:28</div></div><div class="posttext">Thanks Kichik,<br />
<br />
I created the registry values and it worked, but i still get errors:<br />
<br />
D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes<br />
scons: Reading SConscript files ...<br />
<br />
scons: *** Path does not exist for option CPPPATH:<br />
File &quot;SConstruct&quot;, line 61, in ?<br />
D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes CPPPATH=&quot;C:\program files\Microsoft Vi<br />
sual C++ Toolkit 2003\bin&quot;<br />
scons: Reading SConscript files ...<br />
<br />
scons: *** Path does not exist for option LIBPATH:<br />
File &quot;SConstruct&quot;, line 61, in ?<br />
D:\Downloads\NSIS&gt;scons -j4 MSTOOLKIT=Yes CPPPATH=&quot;C:\program files\Microsoft Vi<br />
sual C++ Toolkit 2003\bin&quot; LIBPATH=&quot;C:\Program Files\Microsoft Visual C++ Toolki<br />
t 2003\Lib&quot;<br />
scons: Reading SConscript files ...<br />
Using Microsoft tools configuration<br />
Checking for main() in C library gdi32... no<br />
Checking for main() in C library user32... no<br />
Checking for main() in C library version... no<br />
Checking for main() in C library pthread... no<br />
Checking for main() in C library stdc++... no<br />
Checking for main() in C library iconv... no<br />
Checking for main() in C library libiconv... no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
cl /nologo /O1 /W3 /GX /TP &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003<br />
\bin&quot; /c Contrib\Library\LibraryLocal\LibraryLocal.cpp /Fobuild\release\Library\<br />
LibraryLocal\LibraryLocal.obj<br />
cl /nologo /O1 /W3 /TP &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin<br />
&quot; /c Contrib\MakeLangId\MakeLangId.cpp /Fobuild\release\MakeLangId\MakeLangId.ob<br />
j<br />
rc &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /fobuild\release\M<br />
akeLangId\resource.res Contrib\MakeLangId\resource.rc<br />
cl /nologo /O1 /W3 /TP &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin<br />
&quot; /c Contrib\zip2exe\main.cpp /Fobuild\release\zip2exe\main.obj<br />
MakeLangId.cpp<br />
LibraryLocal.cpp<br />
main.cpp<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\adler32.c /Fobuild\release\zip2exe\zlib\adler32.obj<br />
adler32.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\crc32.c /Fobuild\release\zip2exe\zlib\crc32.obj<br />
crc32.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\inffast.c /Fobuild\release\zip2exe\zlib\inffast.obj<br />
inffast.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\inflate.c /Fobuild\release\zip2exe\zlib\inflate.obj<br />
inflate.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\inftrees.c /Fobuild\release\zip2exe\zlib\inftrees.obj<br />
inftrees.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\ioapi.c /Fobuild\release\zip2exe\zlib\ioapi.obj<br />
ioapi.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\unzip.c /Fobuild\release\zip2exe\zlib\unzip.obj<br />
unzip.c<br />
cl /nologo /O1 /W3 &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /c<br />
 Contrib\zip2exe\zlib\zutil.c /Fobuild\release\zip2exe\zlib\zutil.obj<br />
zutil.c<br />
rc &quot;/IC:\Program Files\Microsoft Visual C++ Toolkit 2003\bin&quot; /fobuild\release\z<br />
ip2exe\res.res Contrib\zip2exe\res.rc<br />
&quot;C:\Program Files\Microsoft Platform SDK for Windows XP SP2\\bin\Win64\link.exe&quot;<br />
 /nologo /opt:nowin98 /entry:WinMain /map /OUT:build\release\MakeLangId\MakeLang<br />
Id.exe &quot;/LIBPATH:C:\Program Files\Microsoft Visual C++ Toolkit 2003\Lib&quot; kernel3<br />
2.lib user32.lib build\release\MakeLangId\MakeLangId.obj build\release\MakeLangI<br />
d\resource.res<br />
&quot;C:\Program Files\Microsoft Platform SDK for Windows XP SP2\\bin\Win64\link.exe&quot;<br />
 /nologo /opt:nowin98 /map /OUT:build\release\zip2exe\zip2exe.exe &quot;/LIBPATH:C:\P<br />
rogram Files\Microsoft Visual C++ Toolkit 2003\Lib&quot; user32.lib gdi32.lib comctl3<br />
2.lib comdlg32.lib advapi32.lib shell32.lib build\release\zip2exe\main.obj build<br />
\release\zip2exe\zlib\adler32.obj build\release\zip2exe\zlib\crc32.obj build\rel<br />
ease\zip2exe\zlib\inffast.obj build\release\zip2exe\zlib\inflate.obj build\relea<br />
se\zip2exe\zlib\inftrees.obj build\release\zip2exe\zlib\ioapi.obj build\release\<br />
zip2exe\zlib\unzip.obj build\release\zip2exe\zlib\zutil.obj build\release\zip2ex<br />
e\res.res<br />
Le chemin d'accès spécifié est introuvable.<br />
scons: *** [build\release\MakeLangId\MakeLangId.exe] Error 1<br />
Le chemin d'accès spécifié est introuvable.<br />
scons: *** [build\release\zip2exe\zip2exe.exe] Error 1<br />
scons: building terminated because of errors.<br />
D:\Downloads\NSIS&gt;<br />
<br />
<br />
Thanks a lot for your help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2005, 22:25</div></div><div class="posttext">To get rid of the CPPPATH and LIBPATH errors, upgrade to SCons 0.96.90.<br />
<br />
As for the second error, build without -j4 to get an ordered output and post that instead. I can't tell which file it couldn't find by the log you've posted above.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">30th April 2005, 06:13</div></div><div class="posttext">Thanks Kichik,<br />
<br />
i did what you said and still get the errors:<br />
<br />
Setting environment for using Microsoft Visual C++ 2003 Toolkit.<br />
(If you have another version of Visual Studio or Visual C++ installed and wish<br />
to use its tools from the command line, run vcvars32.bat for that version.)<br />
<br />
Thank you for choosing the Visual C++ Toolkit 2003!  Get started quickly by<br />
building the code samples included in the &quot;Samples&quot; directory.  Each sample<br />
includes a short whitepaper discussing the Visual C++ features, and a batch<br />
file for building the code.<br />
<br />
Type &quot;cl /?&quot; for brief documentation on compiler options.<br />
<br />
Visit http://msdn.microsoft.com/visualc/using/documentation/default.aspx for<br />
complete compiler documentation.<br />
<br />
C:\Program Files\Microsoft Visual C++ Toolkit 2003&gt;d:<br />
<br />
D:\&gt;cd downloads\nsis<br />
<br />
D:\Downloads\NSIS&gt;scons MSTOOLKIT=YES<br />
scons: Reading SConscript files ...<br />
Using Microsoft tools configuration<br />
Checking for main() in C library gdi32... no<br />
Checking for main() in C library user32... no<br />
Checking for main() in C library version... no<br />
Checking for main() in C library pthread... no<br />
Checking for main() in C library stdc++... no<br />
Checking for main() in C library iconv... no<br />
Checking for main() in C library libiconv... no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
cl /nologo /O1 /W3 /GX /TP /c Contrib\Library\LibraryLocal\LibraryLocal.cpp /Fob<br />
uild\release\Library\LibraryLocal\LibraryLocal.obj<br />
LibraryLocal.cpp<br />
&quot;C:\Program Files\Microsoft Platform SDK for Windows XP SP2\bin\Win64\link.exe&quot;<br />
/nologo /opt:nowin98 /map /OUT:build\release\Library\LibraryLocal\LibraryLocal.e<br />
xe kernel32.lib oleaut32.lib version.lib build\release\Library\LibraryLocal\Libr<br />
aryLocal.obj<br />
Le chemin d'accès spécifié est introuvable.<br />
scons: *** [build\release\Library\LibraryLocal\LibraryLocal.exe] Error 1<br />
scons: building terminated because of errors.<br />
D:\Downloads\NSIS&gt;<br />
<br />
<br />
I use pythons 2.41, scons 0.96.90, platform sdk for Winxp sp2, visual c++ toolkit 2003 and i work on Windows XP MCE 2005.<br />
<br />
Hope you can help me<br />
Bye</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th April 2005, 13:21</div></div><div class="posttext">Looks like the Platform SDK is improperly detected. It doesn't find link.exe or the libraries. Does &quot;C:\Program Files\Microsoft Platform SDK for Windows XP SP2\bin\Win64\link.exe&quot; really exists? What about &quot;C:\Program Files\Microsoft Platform SDK for Windows XP SP2\lib\gdi32.lib&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">1st May 2005, 17:07</div></div><div class="posttext">Kichik, there is probably a problem with my install of the platform, because i dont find the files you mentionned in your message... But i tried to reinstall the platform and it didnt help there is no Win64 folder, no link.exe...<br />
I dont know why???<br />
Can someone help me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">1st May 2005, 17:57</div></div><div class="posttext">Ok I tried with another SDK for Windows Server 2003 SP1 and it seems to work correctly, previously i used the sdk for Windows XP SP2... I dont understand why it didnt work???<br />
<br />
But once again thanks a lot for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd May 2005, 10:04</div></div><div class="posttext">Hello,<br />
<br />
I tried to compile NSIS source with SCONS and it worked, but when i tried to test the file makensis.exe, i got an error message<br />
<br />
<br />
D:\Downloads\NSIS\build\release\makensis&gt;makensis<br />
Error: opening stub &quot;D:\Downloads\NSIS\build\release\makensis\Stubs\zlib&quot;<br />
Error initalizing CEXEBuild: error setting default stub<br />
<br />
D:\Downloads\NSIS\build\release\makensis&gt;<br />
<br />
<br />
<br />
What did i wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd May 2005, 18:35</div></div><div class="posttext">You're not supposed to run it from the build directory. Get the latest CVS version and run:scons PREFIX=&quot;C:\Program Files\NSIS&quot; installto install it to C:\Program Files\NSIS, or[/code]scons dist[/code]to get a zip file.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>