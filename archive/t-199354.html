<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Coding 101:  How to tell NSIS what files to include in build?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Coding 101:  How to tell NSIS what files to include in build? NSIS Discussion" />
	
	<title> Coding 101:  How to tell NSIS what files to include in build? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Coding 101:  How to tell NSIS what files to include in build?</div>
<hr />
<div class="pda"><a href="t-199354.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=199354">Coding 101:  How to tell NSIS what files to include in build?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Gato Muerto</div><div class="date">16th November 2004, 00:21</div></div><div class="posttext">Just picking up the installer for help with another project.  I have looked at sample code, but still do not quite understand how NSIS &quot;knows&quot; what files to include in the install setup.  Aside from using the HM NIS Edit wizard, I am still fuzzy on what part of the script describes what files to include.  <br />
<br />
Would someone be able to link a simple zip that includes the script and say 3 files to be installed into 1 directory?  That way i can see how the files are called and stored when the script is compiled.<br />
<br />
If there is a better way to describe it, I would not be adverse to seeing it, as well.<br />
<br />
Thanks<br />
<br />
Gato Muerto</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">16th November 2004, 01:42</div></div><div class="posttext">Including a file to the installer:<br />
<br />
For including a file to the installer, you can use the command File. The path you supply with this command is the one saying where is the file on your computer. Like for example:<br />
<br />
File &quot;Test.exe&quot;(Include the file &quot;Test.exe&quot; from the folder the script is located and extract it on $OUTDIR (= $INSTDIR in this case) when the user runs it)<br />
<br />
Specifying where you want to extract a file:<br />
<br />
You can specify where do you want to extract the file by using the command &quot;SetOutDir&quot; before using the file command. Example:<br />
<br />
SetOutDir &quot;C:\MyDir&quot;<br />
File &quot;Test.exe&quot;(Include the file &quot;Test.exe&quot; from the folder the script is located and extract it on $OUTDIR (&quot;C:\MyDir&quot; in this case) when the user runs it)<br />
<br />
As you could see above, that first example I showed you is the same exact thing as using:<br />
<br />
SetOutDir &quot;$INSTDIR&quot;<br />
File &quot;Test.exe&quot;(Include the file &quot;Test.exe&quot; from the folder the script is located and extract it on $OUTDIR (= $INSTDIR in this case) when the user runs it)<br />
<br />
Including a whole tree of a folder:<br />
<br />
There are 2 ways to include every single file inside a folder:<br />
<br />
1) Extracting the folder as it is:File /r &quot;C:\MyDir&quot;When you extract, it will look like this:<br />
<br />
$OUTDIR\MyDir<br />
$OUTDIR\MyDir\Test.exe<br />
<br />
2) Extracting all the files contained on a folder to $OUTDIR:File &quot;C:\MyDir\*.*&quot;When you extract, it will look like this:<br />
<br />
$OUTDIR\Test.exe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gato Muerto</div><div class="date">16th November 2004, 01:53</div></div><div class="posttext">Including a whole tree of a folder:<br />
<br />
There are 2 ways to include every single file inside a folder:<br />
<br />
1) Extracting the folder as it is:File /r &quot;C:\MyDir&quot;When you extract, it will look like this:<br />
<br />
$OUTDIR\MyDir<br />
$OUTDIR\MyDir\Test.exe <br />
<br />
So, when using the file command in this way, it is both telling the script to include these files in the installer, as well as the files to be extracted later?  What system do you use if you want to include files into the installer, but yet do not want to have all the files extracted unless specified? <br />
Secondly, does this method above decribed allow for recursive directory storage?<br />
<br />
I'm currently using the wizard's setup for calling my files, but I really want to know the how/why it works so I can be a bit cleaner with the code.  Long lists of &quot;File XXX&quot; just doesn't look clean enough.  Blah</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">16th November 2004, 08:49</div></div><div class="posttext">If you write a macro that you can give lots of arguments to then you could end up with something like <br />
<br />
!InsertMacro addfiles file01 file02 file03 <br />
<br />
But it is just a script, not the Sistine Chapel so you could just stick with lots of File commands :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th November 2004, 09:05</div></div><div class="posttext">You can skip the extraction of certain files by jumping over the File commands, e.g.<br />
IfFileExists &quot;$INSTDIR\file.exe&quot; NoExtract<br />
 File &quot;/oname=$INSTDIR\file.exe&quot; &quot;file.exe&quot;<br />
NoExtract:<br />
You can also use other flow-control Commands like MessageBox, IntCmp, StrCmp etc<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gato Muerto</div><div class="date">16th November 2004, 17:40</div></div><div class="posttext">Thanks for the help.  It still seems a little unwieldy, but I suppose the information has to be included somehow. I prefer clean, organized code, since I tend to get disorganized and confused enough as it is.  :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">16th November 2004, 17:42</div></div><div class="posttext">Comments are your friend, and so is LogicLib.nsh (see Include\LogicLib.nsh).<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>