<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_WELCOMEPAGE problems, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_WELCOMEPAGE problems NSIS Discussion" />
	
	<title> MUI_WELCOMEPAGE problems [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_WELCOMEPAGE problems</div>
<hr />
<div class="pda"><a href="t-227440.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=227440">MUI_WELCOMEPAGE problems</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">smonijhay</div><div class="date">2nd October 2005, 00:18</div></div><div class="posttext">Hi,<br />
<br />
I'm new to the forums and new to developing using NSIS for creating an installer.  I have searched the forums and read the wiki and the NSIS manuals, but I can figure out why my Welcome and Finish page do not have anything in them!  Not even the title and text that I assigned to it!  I think there is something I'm missing (between the manuals and the example scripts I thought I was doing everything right).  Here is my set up.<br />
<br />
**not sure if there is a format for posting code here so forgive me!***<br />
<br />
Start<br />
!define MUI_PRODUCT &quot;Vmerse 1.0&quot;<br />
!include &quot;${NSISDIR}\Contrib\Modern UI\System.nsh&quot;<br />
<br />
;--------------------------------------------------------------<br />
<br />
;General<br />
<br />
# The name of the installer<br />
Name &quot;Vmerse&quot;<br />
Caption &quot;Law School Vmerse Installer&quot;<br />
XPStyle On<br />
<br />
!define MUI_ABORTWARNING<br />
<br />
# The file to write<br />
OutFile &quot;Vmerse-setup.exe&quot;<br />
<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-install-colorful.ico&quot;<br />
!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-uninstall-colorful.ico&quot;<br />
<br />
;--------------------------------------------------------------------------<br />
;Header<br />
!define MUI_UI_HEADERIMAGE &quot;${NSISDIR}\Contrib\UIs\modern_headerbmp.exe&quot;<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Wizard\nsis.bmp&quot;<br />
<br />
!define MUI_UI &quot;${NSISDIR}\Contrib\UIs\modern.exe&quot;<br />
;--------------------------------------------------------------------------------<br />
;Modern UI Configuration<br />
<br />
; Pages<br />
!define MUI_WELCOMEPAGE_TITLE &quot;Welcome to the MyApplication Setup Wizard&quot;<br />
<br />
!define MUI_WELCOMEPAGE_TEXT &quot;This wizard will guide you through the installation of my test application.\r\n\r\n$_CLICK&quot;<br />
!insertmacro MUI_PAGE_WELCOME <br />
<br />
!define MUI_LICENSEPAGE_TEXT_TOP &quot;My End Users License Agreement&quot;<br />
!define MUI_LICENSEPAGE_RADIOBUTTONS<br />
!insertmacro MUI_PAGE_LICENSE &quot;my-eula.rtf&quot;<br />
<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
!define MUI_FINISHPAGE_RUN &quot;$INSTDIR\MyApp.exe&quot;<br />
!define MUI_FINISHPAGE_RUN_TEXT &quot;Launch My Application&quot;<br />
<br />
!define MUI_FINISHPAGE_SHOWREADME &quot;README.txt&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT &quot;View Readme&quot;<br />
!define MUI_TEXT_FINISH_SHOWREADME &quot;README.txt&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_UNPAGE_WELCOME<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
!insertmacro MUI_UNPAGE_FINISH<br />
<br />
I also have some functions defined (which I'm not sure if they are conflicting) at the end of my script<br />
<br />
Function .onInit<br />
# the plugins dir is automatically deleted when the installer exits<br />
	InitPluginsDir<br />
	File /oname=$PLUGINSDIR\splash.bmp &quot;${NSISDIR}\Contrib\Graphics\Wizard\mysplash.bmp&quot;<br />
	splash::show 6000 $PLUGINSDIR\splash<br />
<br />
	Pop $0 ; $0 has '1' if the user closed the splash screen early,<br />
			; '0' if everything closed normal, and '-1' if some error occured.<br />
<br />
    IfFileExists &quot;$INSTDIR\MyApp.exe&quot; Ask_Question<br />
    Goto INSTALL<br />
    Ask_Question:<br />
     MessageBox MB_YESNO &quot;You seem to have this program \<br />
                          already installed. Would you like to \<br />
                          uninstall it first?&quot; \<br />
                          IDYES UNINSTALL IDNO INSTALL<br />
<br />
    UNINSTALL:<br />
     ExecWait '&quot;$INSTDIR\Uninstall.exe&quot;'<br />
<br />
FunctionEnd<br />
<br />
<br />
Function un.onInit<br />
    MessageBox MB_YESNO &quot;This will uninstall my application. Do you wish to continue?&quot; IDYES NoAbort<br />
      Abort ; causes uninstaller to quit.<br />
    NoAbort:<br />
FunctionEnd<br />
<br />
Function un.onUninstSuccess<br />
  MessageBox MB_OK &quot;You have successfully uninstalled ${MUI_PRODUCT}.&quot;<br />
FunctionEnd<br />
<br />
;eof<br />
<br />
I'm sorry if the post comes out unformatted.  Please and thank you for your help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd October 2005, 11:04</div></div><div class="posttext">Put !insertmacro MUI_LANGUAGE &quot;English&quot; after all your !insertmacro MUI_UNPAGE_...<br />
<br />
Also, !include &quot;${NSISDIR}\Contrib\Modern UI\System.nsh&quot; is not really necessary. You can use !include &quot;MUI.nsh&quot; to do the same thing.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">smonijhay</div><div class="date">2nd October 2005, 21:18</div></div><div class="posttext">Hi Afrow UK!<br />
<br />
Thank you so much for your reply.  Maybe I'm still missing something (by the way, if it helps I'm using NSIS 2.0.9)?  <br />
<br />
What I did was to add !insertmacro MUI_LANGUAGE &quot;English&quot; 4 times.  That is, after each MUI_UNPAGE in my script.<br />
<br />
I also changed the header file to just be MUI.nsh (should have realized that it referenced the System.nsh header anyway :)).<br />
<br />
I did receive compiler errors after addining the !insertmacro line.  Here are the errors that I receive.<br />
<br />
Error in macro MUI_LANGUAGEFILE_BEGIN on macroline 15<br />
!include: error in script: &quot;C:\Program Files\NSIS\Contrib\Modern UI\Language files\English.nsh&quot; on line 9<br />
Error in macro MUI_LANGUAGE on macroline 5<br />
<br />
<br />
I looked at the file in question but really couldn't make heads or tails of the error mesage.  <br />
<br />
Thanks again for your help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd October 2005, 13:13</div></div><div class="posttext">You only need to insert MUI_LANGUAGE once after all MUI_PAGE* and MUI_UNPAGE. Take a look at the examples in Examples\Modern UI.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">smonijhay</div><div class="date">3rd October 2005, 21:22</div></div><div class="posttext">Hi,<br />
<br />
Yes I started with the example, which is why I'm now posting.  I followed the example but still get the error message when I add the line !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Here is the error message I get, it looks like it is happening in the English.nsh header file first.<br />
<br />
Error in macro MUI_LANGUAGEFILE_BEGIN on macroline 15<br />
!include: error in script: &quot;C:\Program Files\NSIS\Contrib\Modern UI\Language files\English.nsh&quot; on line 9<br />
Error in macro MUI_LANGUAGE on macroline 5<br />
Error in script &quot;C:\Documents and Settings\jonessm\Desktop\MyApplication\installer.nsi&quot; on line 65 -- aborting creation process<br />
<br />
Does this error message look familiar to anyone?<br />
<br />
Thank you again for your help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd October 2005, 21:27</div></div><div class="posttext">That's a generic message saying where the error was (execution stack, if you wish). The error itself is at least one line above that.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>