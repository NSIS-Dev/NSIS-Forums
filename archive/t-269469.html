<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" howto using macro, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  howto using macro NSIS Discussion" />
	
	<title> howto using macro [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  howto using macro</div>
<hr />
<div class="pda"><a href="t-269469.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269469">howto using macro</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 07:48</div></div><div class="posttext">Hi,<br />
<br />
call me stupid or something, but what i have to do with given macros ( http://nsis.sourceforge.net/RadioButtons#Macros )?<br />
i don't know where to save this code to use it. can somebody give me one (or more) tipps?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 08:03</div></div><div class="posttext">http://nsis.sourceforge.net/Macro_vs_Function</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 08:09</div></div><div class="posttext">I've seen this site before, it shows me how they work, but not how to implement. the question is, can i &quot;outsourcing&quot; the macro code to another file?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 08:20</div></div><div class="posttext">Yes you can do it in one or more headers (nsh) and include 'em in your main script e.g. !include &quot;myheader.nsh&quot;<br />
You may want to take a look at the included within NSIS installation headers e.g. FileFunc.nsh would give you a start.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 08:22</div></div><div class="posttext">mmh, i already try that.... i will try it again. thx for help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 08:34</div></div><div class="posttext">Well, take a look here, download the full project and examine it, should be easier to go with it.<br />
<br />
http://nsis.sourceforge.net/NSIS_Beyond_a_Traditional_Installation_II</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 10:28</div></div><div class="posttext">!include: closed: &quot;C:\Program Files\NSIS\Include\LogicLib.nsh&quot;<br />
!macro: macro named &quot;StartRadioButtons&quot; already found!<br />
!include: error in script: &quot;RadioButtons.nsh&quot; on line 10</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 11:54</div></div><div class="posttext">I'd like me to be helpful, could you be more specific?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 12:56</div></div><div class="posttext">sorry, yes, ok, here what i want to do:<br />
<br />
Maybe you know Daemon Tools for virtually mounting CDs/DVDs and awxDTools is a helpfull tool mounting CDs/DVDs directly from context menu. But there are some buggy problems (under vista) i want to change. one of them is the language selection via registry. so i want to create a tool, that can change the language. thats why i need radiobuttons.<br />
<br />
<br />
Name &quot;awxDTools Language Selector&quot;<br />
<br />
SetCompressor /SOLID lzma<br />
<br />
# Defines<br />
!define REGKEY &quot;SOFTWARE\$(^Name)&quot;<br />
!define VERSION 1.0<br />
!define COMPANY &quot;Torsten Burschka&quot;<br />
!define URL www.fantasquad.de/amt<br />
<br />
# MUI defines<br />
!define MUI_ICON awxDTools.ico<br />
!define MUI_FINISHPAGE_NOAUTOCLOSE<br />
<br />
# Included files<br />
!include Sections.nsh<br />
!include MUI.nsh<br />
!include RadioButtons.nsh<br />
<br />
<br />
The RadioButtons.nsh is the postat macro.<br />
<br />
ps, ist an autogeneratet code, so some things might be not correct.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 17:03</div></div><div class="posttext">Well, $(^Name) might be useless because it might contain invalid characters for the registry, better use a string that you know it's gonna be acceptable, also writing to registry requires a root which might be defined as well e.g !define REG_ROOT `HKCU`<br />
!define REG_KEY `SOFTWARE\My Company\My Application` RadioButtons is a macro included in NSIS header Sections.nsh, you do not need to include it as separate header while actually there is not such header named RadioButtons.nsh.<br />
Even more, sections.nsh is a header dedicated to make the life easy regarding to control of components/sections, it won't help you do such things like you mentioned above.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 17:13</div></div><div class="posttext">my intension was this:<br />
<br />
SectionGroup /e !Language SECGRP0000<br />
    Section &quot;English - English&quot; SEC0000<br />
        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language English<br />
    SectionEnd<br />
<br />
    Section /o &quot;German - Deutsch&quot; SEC0001<br />
        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language German<br />
    SectionEnd<br />
<br />
    Section &quot;Dutch - Nederlands&quot; SEC0002<br />
        WriteRegStr HKEY_CURRENT_USER Software\arniWORX\awxDTools Language Dutch<br />
    SectionEnd<br />
SectionGroupEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 17:21</div></div><div class="posttext">This makes sense :)<br />
Provided that you show the components page, include sections.nsh and use readiobuttons into .OnSelChange function to have only one section selected.<br />
The included example one-section.nsi is almost identical for such a case.<br />
It needs quotes here:<br />
WriteRegStr HKEY_CURRENT_USER &quot;Software\arniWORX\awxDTools&quot; &quot;Language&quot; &quot;English&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 17:25</div></div><div class="posttext">yes, but also one-section.nsi has the same problem with &quot;already found&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 17:39</div></div><div class="posttext">This is weird, the example works pretty fine with or without logiclib included.<br />
Just found an identical for your case example that I've posted here the other day.<br />
Could you please copy/paste my code compile it and let us know if the same problem occurs?<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=267375</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 19:27</div></div><div class="posttext">yepp, thats weird. your example works....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th April 2007, 19:40</div></div><div class="posttext">So what is this &quot;RadioButtons.nsh&quot;?<br />
I suspect is a header that you've made which causes the conflict. If you have copied there the RadioButtons macros you don't need to do that, simply include the sections.nsh header.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">torstenburschka</div><div class="date">13th April 2007, 19:44</div></div><div class="posttext">yes, so it is. i think i will rewrite your code an implement it.<br />
<br />
thx for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>