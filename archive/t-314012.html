<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Finish Page - addition checkbox not showing (MUI2), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Finish Page - addition checkbox not showing (MUI2) NSIS Discussion" />
	
	<title> Finish Page - addition checkbox not showing (MUI2) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Finish Page - addition checkbox not showing (MUI2)</div>
<hr />
<div class="pda"><a href="t-314012.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314012">Finish Page - addition checkbox not showing (MUI2)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rizwanjavaid</div><div class="date">20th October 2009, 01:09</div></div><div class="posttext">Apologies for asking this question again. I have looked on all the forum posting on this topic that I could find, but to no avail.<br />
<br />
I am trying to add a third checkbox to the finish page in addition to the usual two that are present there (README and RUN ones). The 2 standard ones are being used and I need an extra checkbox to open the install folder if the user selects it. I am using MUI 2.<br />
<br />
I have the following code (snipped to make it more clear):<br />
<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;EULA.txt&quot;<br />
PageEx directory<br />
	DirVerify leave<br />
	PageCallbacks &quot;&quot; &quot;&quot; leaveDirPage<br />
PageExEnd<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!define MUI_FINISHPAGE_RUN<br />
!define MUI_FINISHPAGE_SHOWREADME<br />
!define MUI_FINISHPAGE_SHOWREADME_FUNCTION createDesktopIcon<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT &quot;&amp;Create Desktop Icon&quot;<br />
!define MUI_FINISHPAGE_RUN_FUNCTION startApplicationNow<br />
!define MUI_FINISHPAGE_RUN_TEXT &quot;&amp;Start GWAT Demo now&quot;<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE InitFinishPage<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowFinishPage<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE LeaveFinishPage<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_UNPAGE_WELCOME<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
!insertmacro MUI_UNPAGE_FINISH<br />
<br />
<br />
the pre finish page code is:<br />
<br />
Function InitFinishPage<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Settings&quot; &quot;NumFields&quot; &quot;6&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Type&quot; &quot;CheckBox&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Text&quot; &quot;&amp;Show Install Folder&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Left&quot; &quot;120&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Right&quot; &quot;315&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Top&quot; &quot;80&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;Bottom&quot; &quot;140&quot;<br />
  WriteINIStr &quot;$PLUGINSDIR\iospecial.ini&quot; &quot;Field 6&quot; &quot;State&quot; &quot;0&quot;<br />
FunctionEnd<br />
<br />
<br />
I have a function that deals with whether this additional checkbox is pressed or not and that works fine.<br />
<br />
When the finish page is displayed, only the two checkboxes appear. The third one does not but when ticked it works as normal. I set the state to 0 and 1 of the checkbox in code and it works. Only problem is checkbox not displayed.<br />
<br />
Afrow mentioned to use SetWindowPos function call (win32 API) to resize and the checkbox should show, but I cannot get it to work. I tried using:<br />
<br />
<br />
System::Call &quot;User32::SetWindowPos(i, i, i, i, i, i, i) i ($mui.FinishPage, 0, 0, 0, 510, 230, ${SWP_NOZORDER}|${SWP_NOMOVE})&quot;<br />
<br />
<br />
But I cannot see which handle to use for resizing.<br />
<br />
Any code would be helpful and useful.<br />
Thanks.<br />
Rizwan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">20th October 2009, 13:58</div></div><div class="posttext">If you are using MUI 2 then you cannot modify iospecial.ini to add an extra checkbox to the FINISH page because MUI 2 does not use an ini file for the FINISH page.<br />
<br />
The MUI 2 ReadMe explains this in the &quot;Modern UI 2.0&quot; section:The welcome and finish page are no longer implemented using InstallOptions. Instead, the new nsDialogs plug-in is used. nsDialogs allows you to create custom pages or customize existing pages directly from the script.<br />
...<br />
Rewrite customization code for the Modern UI 1.8 welcome and finish pages in which the InstallOptions INI file is used. nsDialogs commands should be used instead.<br />
The old InstallOptions version of the MUI is included with NSIS and it has its own ReadMe file. Perhaps you looked at the wrong ReadMe?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rizwanjavaid</div><div class="date">20th October 2009, 16:30</div></div><div class="posttext">thanks for your prompt reply.<br />
<br />
I had a feeling I should not be using iospecial as that is for MUI, not MUI2.<br />
<br />
How do I then add an additional checkbox to the end page. I can try using nsDialogs in the init section of the finish page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">20th October 2009, 17:07</div></div><div class="posttext">I am still using the original version of MUI for my installers so I cannot answer that question. Sorry.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">f0rt</div><div class="date">20th October 2009, 22:37</div></div><div class="posttext">I would recommend reading through the following:<br />
<br />
nsDialogs documentation: Docs\nsDialogs\Readme.html<br />
<br />
Finish page (customized via nsDialogs)<br />
forums.winamp.com/showthread.php?threadid=310323<br />
<br />
[nsDialogs] How to create Checkbox with transparent background?<br />
forums.winamp.com/showthread.php?threadid=311939</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>