<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem under Windows NT SP3, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem under Windows NT SP3 NSIS Discussion" />
	
	<title> Problem under Windows NT SP3 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem under Windows NT SP3</div>
<hr />
<div class="pda"><a href="t-136943.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=136943">Problem under Windows NT SP3</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">28th May 2003, 22:09</div></div><div class="posttext">While the setup created by NSIS runs without problems under Windows XP, there are problems with a fresh installation of Windows NT 4 SP3!<br />
The setup always displays a messagebox if i wanted to start it, which says: Error! Can't initialize plug-ins directory. Please try again later. <br />
<br />
Has anyone else the same problem? How can it be fixed? <br />
(The version before the latest CVS displayed another error message!)<br />
<br />
Thanks in advance, Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th May 2003, 22:51</div></div><div class="posttext">Did you use &quot;InitPluginsDir&quot;<br />
before that call?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">28th May 2003, 23:04</div></div><div class="posttext">Even if i use InitPluginsDir in .onInit (I don't do it before), it displays the same error message. This message appears just after executing the setup.<br />
Please help!<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 23:09</div></div><div class="posttext">Have you had a look in the %TEMP% folder were the $PLUGINS dir is created?<br />
Could there be something stopping anything being dumped in the %TEMP% dir (e.g. antivirus software or something)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">28th May 2003, 23:12</div></div><div class="posttext">If you are using Install Options, put if on the top<br />
of the page creator:<br />
<br />
Page custom Task &quot;&quot; &quot;: Some tasks&quot;<br />
<br />
Function &quot;Task&quot;<br />
InitPluginsDir<br />
...<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">28th May 2003, 23:17</div></div><div class="posttext">Juhu, just solved the problem. On a fresh NT Installation it might be possible that the Temp folder isn't yet created, although there is an environment variable for it!<br />
To prevent this error from occuring, please check in the setup if the Temp directory is already created and if not -&gt; create it!!!<br />
Please implement that in the NSIS code!<br />
Thanks<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th May 2003, 23:46</div></div><div class="posttext">IfFileExists &quot;$TEMP\*.*&quot; +2<br />
CreateDirectory $TEMP<br />
<br />
I am wondering however, how does NSIS find the $TEMP dir if there is no temp dir on the PC?<br />
Does it get it from %TEMP%, or does it work it out from the OS.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">29th May 2003, 09:06</div></div><div class="posttext">The TEMP folder is stored in an environment variable! Because NSIS uses the TEMP file before any code is executed, the creating of the TEMP folder must happen, before NSIS tries to write to it.<br />
Please implement this, NSIS developers!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 10:15</div></div><div class="posttext">This will be improved soon, thank you for the information.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th May 2003, 10:34</div></div><div class="posttext">Afrow, NSIS uses GetTempPath (http://msdn.microsoft.com/library/en-us/fileio/base/gettemppath.asp). The linked page contains information about how GetTempPath gets the temporary path.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>