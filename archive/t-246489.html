<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" execwait not aware of path?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  execwait not aware of path? NSIS Discussion" />
	
	<title> execwait not aware of path? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  execwait not aware of path?</div>
<hr />
<div class="pda"><a href="t-246489.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=246489">execwait not aware of path?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">19th May 2006, 04:48</div></div><div class="posttext">I have an installer that begins by installing a series of 3rd party applications, one of them being ActiveState Perl.<br />
<br />
After the 3rd party applications are installed I then attempt to use the ppm.bat file which is installed as part of ActivePerl.  Inside ppm.bat, a call is made to the perl binary that was also installed as part of ActivePerl.  When this call is made,  I get:<br />
<br />
 &quot;'perl' is not recognized as an internal or external command...bla bla...ou do not have Perl in your PATH.&quot;<br />
<br />
The exact command I am using to invoke ppm is this:<br />
<br />
ExecWait '$perl_dirbin\ppm.bat install $Temp\perl_modules\Crypt-SSLeay.ppd'<br />
<br />
$perl_dir and $Temp both contain valid paths...(I verified this.)<br />
<br />
What's odd about this is that if I stop the installer after it installs ActivePerl and before it tries to use ppm.bat and then open up a command prompt and type 'perl', it knows where perl is and uses it.  So obviously it has been placed in my PATH variable and is useable.<br />
<br />
It gets wierder though...If I re-run the installer after ActivePerl has been installed, the calls to ppm.bat work just fine.<br />
<br />
Obviously the ActivePerl installer modifies the PATH variable during installation, but the modification should be immediately available.  So it seems to me that somehow the PATH variable available to anything called by ExecWait is locked into the state it was at before the NSIS installer was ran.  Is this correct?  If not, where did I go wrong...and if so, what are my options?<br />
<br />
Thanks,<br />
Nick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">19th May 2006, 08:35</div></div><div class="posttext">Perhaps if you're calling these things all in the same ExecWait it's as though you ran them all in the same command window: the path is set when the window is opened. If this is the case, just use multiple ExecWaits.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th May 2006, 12:49</div></div><div class="posttext">The environment variable modification is immediately available only to Explorer. Every new process that is executed from Explorer will get the new variable, but running processes will keep their old environment block.<br />
<br />
To set environment variables for the running installer, use:<br />
<br />
http://nsis.sourceforge.net/Setting_Environment_Variables_to_Active_Installer_Process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">halfhp</div><div class="date">19th May 2006, 18:35</div></div><div class="posttext">Thanks very much kichik, that did the trick.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>