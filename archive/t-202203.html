<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" WriteINIStr feature, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  WriteINIStr feature NSIS Discussion" />
	
	<title> WriteINIStr feature [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  WriteINIStr feature</div>
<hr />
<div class="pda"><a href="t-202203.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202203">WriteINIStr feature</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">moop</div><div class="date">16th December 2004, 02:16</div></div><div class="posttext">In this thread: http://forums.winamp.com/showthread.php?s=&amp;threadid=167252&amp;highlight=writeinistr<br />
Kichik says You can't assign more than one value to a certain entry in an INI section. If that was possible you couldn't have changed entries.<br />
<br />
Use Delete /REBOOTOK.<br />
<br />
The Unreal engines (UT, UT2, and expectedly UT3) use .ini files to pass package information to the engine, and can be stacked.  Here are two sections from one of the .ini files:<br />
<br />
<br />
[Core.System]<br />
PurgeCacheDays=0<br />
SavePath=..\Save<br />
CachePath=..\Cache<br />
CacheExt=.uxx<br />
Suppress=DevLoad<br />
Suppress=DevSave<br />
Suppress=DevNetTraffic<br />
Suppress=DevGarbage<br />
Suppress=DevKill<br />
Suppress=DevReplace<br />
Suppress=DevSound<br />
Suppress=DevCompile<br />
Suppress=DevBind<br />
Suppress=DevBsp<br />
Paths=..\System\*.u<br />
Paths=..\Maps\*.dx<br />
Paths=..\Textures\*.utx<br />
Paths=..\Sounds\*.uax<br />
Paths=..\Music\*.umx<br />
Paths=..\System\Demos\*.dem<br />
<br />
[DeusEx.DeusExGameEngine]<br />
CacheSizeMegs=16<br />
UseSound=True<br />
ServerActors=IpDrv.UdpBeacon<br />
ServerActors=IpServer.UdpServerQuery<br />
ServerActors=IpServer.UdpServerUplink MasterServerAddress=master0.gamespy.com MasterServerPort=27900<br />
ServerPackages=DXMTL152b1<br />
ServerPackages=DXIpServer.u<br />
ServerPackages=DXMapVote100<br />
ServerPackages=smg_mod<br />
ServerActors=MiniMTL13.MiniMTL<br />
ServerPackages=MiniMTL13<br />
ServerActors=MMSkinsV01.SkinsMutator<br />
ServerPackages=MMSkinsV01<br />
<br />
<br />
With my installer, I would like to offer the user the ability to add various ServerPackages= lines, yet WriteINIStr would of course overwrite redunant occurances.  Right now, in my installer's current form, I read lines from a text-file and re-write the .ini using FileWrite insertions .  I don't see a &quot;clean&quot; way to insert and remove ServerPackages= lines except by the sloppy process or writing a text file and inserting new packages one-by-one, which seems cumbersome and sloppy.<br />
<br />
So... <br />
<br />
Is there a way, or a plan, to have WriteINIStr allow repeat entries?  <br />
...A simple flag like /a for &quot;/append&quot; similar entry_name parameters.<br />
<br />
WriteINIStr ini_filename section_name entry_name value<br />
<br />
...I'm not much of a programmer, so using Perl or Python isn't really an option for me, especially since the WriteINIStr function in NSIS seems so close to being capable of what I need without tons of extra work for any future changes, so I'm open to suggestions.<br />
<br />
I'd recommend it as a feature to implement in the next build since a few other posts on this forum have referenced the .ini files of various UT-engine games.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th December 2004, 07:26</div></div><div class="posttext">WriteINIStr uses the windows API to write to the file and this api only supprots a single item per entry.<br />
<br />
not sure if this ugly hack works but u could give it a try:<br />
WriteINIStr &quot;somefile.ini&quot; &quot;sec&quot; &quot;a&quot; &quot;1$\r$\na=2&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">moop</div><div class="date">16th December 2004, 07:59</div></div><div class="posttext">That would work, yes, but I was hoping to make a series of self-installing add-ons which would append themselves to the existing .ini section.  Looks like the long-route, I suppose.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">16th December 2004, 14:52</div></div><div class="posttext">you will have to do that with various string and file functions.<br />
have a look at the stringfunc/wordfunc and filefunc header files. they contain some macros that may help you.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>