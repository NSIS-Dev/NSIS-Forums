<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" execshell problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  execshell problem NSIS Discussion" />
	
	<title> execshell problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  execshell problem</div>
<hr />
<div class="pda"><a href="t-70724.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=70724">execshell problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Darktrain</div><div class="date">4th January 2002, 08:37</div></div><div class="posttext">Hello,<br />
<br />
ive got a question about using execshell. <br />
<br />
-ExecShell open '&quot;$INSTDIR\php\php.exe&quot;' '&quot;$INSTDIR\php\myfile.php&quot;' <br />
-ExecShell open &quot;$INSTDIR\apache\apache&quot; &quot;-i&quot; <br />
-ExecShell open &quot;$INSTDIR\apache\apache&quot; &quot;-k start -n Apache&quot;<br />
these are working fine.<br />
<br />
ExecShell open '&quot;$INSTDIR\mysql\bin\mysql&quot;' '&quot;databasename &lt; $INSTDIR\mysql\bin\myfile.sql&quot;'<br />
but this one doesnt work correctly. (tried with(out)'&quot;). Its seeing the whole commandline as the databasename instead of the first part of the line. <br />
<br />
im using a .bat file now but i would like to use execshell.<br />
Any suggestions?<br />
<br />
Regards,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Schultz</div><div class="date">4th January 2002, 11:41</div></div><div class="posttext">I would suggest trying this<br />
<br />
ExecShell open `&quot;$INSTDIR\mysql\bin\mysql&quot;` `'databasename &lt; $INSTDIR\mysql\bin\myfile.sql'` <br />
<br />
but now that i think about it that probably isn't much different then what you used. could you just use the Exec command like<br />
<br />
Exec `&quot;$INSTDIR\mysql\bin\mysql&quot; &quot;databasename &lt; $INSTDIR\mysql\bin\myfile.sql&quot;`</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darktrain</div><div class="date">7th January 2002, 15:59</div></div><div class="posttext">well...i think ive tried all combinations. :confused: <br />
<br />
Do you know why the code is working for php en apache and not for mysql?<br />
<br />
regards,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">7th January 2002, 22:39</div></div><div class="posttext">Use this:<br />
<br />
<br />
Exec '&quot;$INSTDIR\mysql\bin\mysql&quot; &quot;databasename&quot; &lt; $INSTDIR\mysql\bin\myfile.sql'<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darktrain</div><div class="date">8th January 2002, 09:27</div></div><div class="posttext">Hi Justin, <br />
<br />
i tried your code. But its still seeing the whole commandline as the databasename instead of the first part of the line.<br />
<br />
the .bat file im running looks like this:<br />
<br />
 cd mysql<br />
 cd bin<br />
 mysql databasename &lt; &quot;path\myfile.sql&quot;<br />
 <br />
<br />
Maybe ive to go to the bin dir and then execute this?<br />
<br />
Exec `&quot;mysql&quot; &quot;databasename &lt; $INSTDIR\mysql\bin\myfile.sql&quot;`<br />
<br />
//Darktrain</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">8th January 2002, 13:29</div></div><div class="posttext">Originally posted by Darktrain <br />
Hi Justin, <br />
<br />
Maybe ive to go to the bin dir and then execute this?<br />
<br />
Exec `&quot;mysql&quot; &quot;databasename &lt; $INSTDIR\mysql\bin\myfile.sql&quot;`<br />
<br />
<br />
<br />
You've still got the syntax wrong.  You don't want quotes around the parameters.  Mysql will think the whole string is the database name.<br />
<br />
You sure you haven't tried:<br />
Exec '&quot;$INSTDIR\mysql\bin\mysql&quot; &quot;databasename&quot; &lt;&quot;$INSTIDR\mysql\bin\myfile.sql&quot;'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darktrain</div><div class="date">9th January 2002, 09:54</div></div><div class="posttext">yes, and it also isnt working.<br />
Exec '&quot;$INSTDIR\mysql\bin\mysql&quot; &quot;databasename&quot;&lt;&quot;$INSTIDR\mysql\bin\myfile.sql&quot;'<br />
 <br />
The last part of the commandline doesnt work with mysql(?).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th January 2002, 14:32</div></div><div class="posttext">Hi!<br />
<br />
This code:<br />
Exec '&quot;$SYSDIR\command.com&quot; /c echo asdasd &gt; asd.txt'<br />
seems to work. If it works for &gt; it should work for &lt; too.<br />
<br />
KiCHiK</div></div><hr />


<div class="post"><div class="posttop"><div class="username">petersa</div><div class="date">9th January 2002, 14:41</div></div><div class="posttext">Hi DarkTrain,ExpandEnvStrings $0 %COMSPEC%<br />
Exec `&quot;$0&quot; /C &quot;$INSTDIR\mysql\bin\mysql&quot; &quot;databasename&quot; &lt; &quot;$INSTDIR\mysql\bin\myfile.sql&quot;`This piece of code should solve your problem. If it doesn't work, try modifying your myfile.sql file so that it loads databasename from it. Then, you would use:ExpandEnvStrings $0 %COMSPEC%<br />
Exec `&quot;$0&quot; /C &quot;$INSTDIR\mysql\bin\mysql&quot; &lt; &quot;$INSTDIR\mysql\bin\myfile.sql&quot;`You might prefer to use ExecWait. DarkTrain stated that his command line worked with a batch file. The command line contains '&lt; filename', meaning 'use filename as the input device'.This means that a command interpreter is required for it to work properly. I would have thought someone would pick that up. :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darktrain</div><div class="date">10th January 2002, 08:51</div></div><div class="posttext">Yes, that piece of code solved my problem.<br />
<br />
Thanks petersa,<br />
<br />
//Darktrain</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>