<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" makensis : cmd for changing default setup path, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  makensis : cmd for changing default setup path NSIS Discussion" />
	
	<title> makensis : cmd for changing default setup path [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  makensis : cmd for changing default setup path</div>
<hr />
<div class="pda"><a href="t-242578.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242578">makensis : cmd for changing default setup path</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">youn75</div><div class="date">4th April 2006, 15:52</div></div><div class="posttext">I would like to have by makensis a command line available for changing default path of the 'setup.exe' compiled.<br />
For exemple, my project setup.nsi is in folder 'toto' and my setup compiled will be available in the folder 'titi'.<br />
<br />
Is there a method for that?<br />
<br />
Sincerely,<br />
Yves</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th April 2006, 15:58</div></div><div class="posttext">Use OutFile from the command line using the /X switch.makensis /XOutFile titi\setup.exe setup.nsiYou can also define some constants from the command line which can later be processed by the script.makensis /DSETUP_DIR=titi!ifdef SETUP_DIR<br />
OutFile &quot;${SETUP_DIR}\setup.exe&quot;<br />
!else<br />
OutFile setup.exe<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">youn75</div><div class="date">4th April 2006, 16:51</div></div><div class="posttext">That's alright!<br />
Thanks a lot!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">11th July 2006, 16:05</div></div><div class="posttext">hi,<br />
<br />
i use a batch file to set<br />
<br />
set RepScrFiles=c:\projects\build\app<br />
<br />
E:\NSIS\makensis /V4 /XOutFile %RepScrFiles%\Dist\setup.exe %RepScrFiles%\ScriptFiles\setup.nsi<br />
<br />
but still have an error :<br />
<br />
OutFile expects 1 parameters, got 0.<br />
Usage: OutFile install_output.exe<br />
<br />
if i delete /XOutFile ... the setup is created in the %RepScrFiles%\ScriptFiles\ directory<br />
<br />
what's wrong ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th July 2006, 16:53</div></div><div class="posttext">Try quotes around the OutFile path.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">11th July 2006, 22:29</div></div><div class="posttext">i tried :<br />
<br />
E:\NSIS\makensis /V4 /XOutFile &quot;%RepScrFiles%\Dist\setup.exe&quot; %RepScrFiles%\ScriptFiles\setup.nsi<br />
<br />
E:\NSIS\makensis /V4 &quot;/XOutFile %RepScrFiles%\Dist\setup.exe&quot; %RepScrFiles%\ScriptFiles\setup.nsi<br />
<br />
Added environment variable to NSIS program so in my ScriptFile directory i tried (Dist are directories i created under and above ScriptFiles):<br />
<br />
makensis /V4 /XOutFile &quot;Dist\setup.exe&quot; setup.nsi<br />
<br />
makensis /V4 /XOutFile &quot;..\Dist\setup.exe&quot; setup.nsi<br />
<br />
Each with no success<br />
<br />
i'll try kichik's other trick (makensis /DSETUP_DIR=titi) or   i'll finally add code in the batch file to move the file to the correct directory ! ^^</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th July 2006, 22:38</div></div><div class="posttext">You could just set a !define value and use that !define in the OutFile instruction in the script itself.<br />
<br />
Also, just in case, you could define a default value if the constant does not already exist...<br />
<br />
!ifndef OutFile<br />
 !define OutFile &quot;default_name.exe&quot;<br />
!endif<br />
<br />
OutFile &quot;${OutFile}&quot;<br />
<br />
I'm not sure why it doesn't work on the command line. Do you have another OutFile instruction in your script perhaps?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">11th July 2006, 22:49</div></div><div class="posttext">!define value is set by /D in the command line ?<br />
<br />
In my script i have already an instruction like :<br />
<br />
Outfile setup.exe<br />
<br />
Is it possible that there is a conflict with command line ?<br />
<br />
EDIT : <br />
<br />
Command line :<br />
<br />
makensis /V4 /DOutFile=&quot;..\\Dist\\setup_myApp.exe&quot; setup.nsi<br />
<br />
<br />
Script code:<br />
<br />
!ifndef OutFile<br />
 !define OutFile &quot;setup.exe&quot;<br />
!endif<br />
<br />
OutFile &quot;${OutFile}&quot;<br />
<br />
<br />
Now it works as expected, i can now improve my batch file to  compile scripts in given path and specific ini files<br />
<br />
Thank you Afro UK</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th July 2006, 23:20</div></div><div class="posttext">I'm pretty sure you can't have two OutFile instructions for the same installer. But that works as well if not better.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>