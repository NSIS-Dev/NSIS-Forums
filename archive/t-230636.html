<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Add stuff to a form, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Add stuff to a form NSIS Discussion" />
	
	<title> Add stuff to a form [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Add stuff to a form</div>
<hr />
<div class="pda"><a href="t-230636.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=230636">Add stuff to a form</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">10th November 2005, 16:12</div></div><div class="posttext">I'd like to add a label or a text box into the form which shows the destination folder to install, but I don't know how? Please help. thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th November 2005, 21:09</div></div><div class="posttext">Why not set the text using DirText? You can add multiple lines using $\r$\n.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">11th November 2005, 00:00</div></div><div class="posttext">I meaned I want to add another DIRREQUEST box into dir-page (original page which comes with NSIS package).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">11th November 2005, 00:35</div></div><div class="posttext">You'll have to create a custom one using InstallOptions or InstallOptionsEx.  The first is documented and available from the NSIS help, the latter you can find a discussion on here :<br />
http://forums.winamp.com/showthread.php?threadid=181087</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">11th November 2005, 00:38</div></div><div class="posttext">By the way.. I've done a directory page with two directory fields - it's a bit intricate and has a few 'hacks' to get things looking well.  I would recommend using InstallOptionsEx instead of InstallOptions for this.<br />
<br />
Two reasons that pop into mind:<br />
1. you can get a NOTIFY event from a user changing the directory path - you can't with InstallOptions (only when going through the browse button, and technically that's not supported - but hey, it works)<br />
<br />
2. you can specify the text of the browse button (defaults to &quot;...&quot;) - can't do that in InstallOptions, so you have to set the text on the control manually, re-size the control, move it to the left, an then re-size the directory path textbox control to fit. Totally doable, but not preferable ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">17th November 2005, 15:47</div></div><div class="posttext">thank you very much.<br />
I have a droplist on my custom page, and I used GetDrive to get all available drives on my computer. How to list all drives under listItems of droplist (it means when I click the arrow of droplist, it displays drives so I can select one). Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th November 2005, 16:44</div></div><div class="posttext">You need to write to ListItems with WriteINIStr before showing the page. The value that you write should be in the format &quot;str1|str2|etc&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">21st November 2005, 22:29</div></div><div class="posttext">thanks<br />
when I call GetDrive &quot;ALL&quot; &quot;FunctionName&quot;, in FunctionName I got drive in $9 and drive type in $8, and I have more than 4 dif. drives, how can I write these drives to my droplist. Please help, thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">21st November 2005, 23:22</div></div><div class="posttext">Function SomePrePageFunction<br />
# clear variable R9, just in case<br />
# we'll be using it to store the list of drives<br />
StrCpy $R9 &quot;&quot;<br />
# call the GetDrives function<br />
${GetDrives} &quot;ALL&quot; &quot;CallBackFunc&quot;<br />
# $R9 now contains e.g. &quot;|C:\|D:\|E:\&quot;<br />
# chop the first &quot;|&quot; off<br />
StrCpy $R9 $R9 -1 1<br />
# now you have a list of drives in the format a listbox requires<br />
<br />
# if you're using MUI, you can then write it to your<br />
# InstallOptions file using the following:<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;InstallOptions.ini&quot; &quot;Field 1&quot; &quot;ListItems&quot; $R9<br />
# please keep in mind that you need to put in the correct ini filename<br />
# and the correct Field number<br />
<br />
# initialize the dialog<br />
!insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;InstallOptions.ini&quot;<br />
# and show it<br />
!insertmacro MUI_INSTALLOPTIONS_SHOW<br />
SectionEnd<br />
<br />
Function CallBackFunc<br />
  # add the drive to the drives list<br />
  StrCpy $R9 &quot;$R9|$9&quot;<br />
  Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">22nd November 2005, 15:43</div></div><div class="posttext">Thank you very much. I really appreciate your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">6th December 2005, 15:45</div></div><div class="posttext">I have a custom page, in there I have a DirRequest control, and I want to change the text of Browse button. This is what I did, but it didn't work:<br />
GetDlgItem $1 $HWND 1200<br />
SendMessage $1 ${WM_SETTEXT}1 &quot;STR:Browse&quot;<br />
When I compile, this gives me a warning and ignore the line GetDlgItem because it doesn't recognize the constant HWND. What should I do? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th December 2005, 15:56</div></div><div class="posttext">FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $R1 $R0 1200<br />
SendMessage $R1 ${WM_SETTEXT} 1 &quot;STR:Browse&quot;<br />
<br />
$HWND is a variable not a constant that you'd have to define yourself.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">6th December 2005, 21:42</div></div><div class="posttext">I got it. Thank u very much. Can you show me how to resize the browse button of DirRequest? (since after I change its text from &quot;...&quot; to &quot;browser&quot;, it doesn't not display right) thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th December 2005, 00:14</div></div><div class="posttext">You need to use Resource Hacker for that. Search Google.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">7th December 2005, 15:40</div></div><div class="posttext">I got it. Thank you.<br />
I have a DirRequest on a custom page, when I click browse button it displays browser window, is there any way that I can add text to this window (below the title &quot;Browse for folder&quot;)? thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th December 2005, 15:52</div></div><div class="posttext">The Text= attribute changes that for DirRequest controls.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">7th December 2005, 16:04</div></div><div class="posttext">Thank you very much Afrow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">8th December 2005, 01:39</div></div><div class="posttext">I have a DIrRequest on a custom page. Right after I click OK button on the browser window, is there any way that I can get the selected path, so I can modify it, and display a message box to user before it (selected path) is displayed on the text box of DirRequest? Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">8th December 2005, 16:03</div></div><div class="posttext">I have a DIrRequest on a custom page. Right after I click OK button on the browser window, is there any way that I can get the selected path, so I can modify it, and display a message box to user before it (selected path) is displayed on the text box of DirRequest? Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th December 2005, 17:53</div></div><div class="posttext">All the InstallOptions examples show you how to validate input on an InstallOptions page.<br />
Tip: From the Leave function with ReadINIStr (DirRequest&gt;State). To go back to a page, call Abort from the pages' Leave function.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">8th December 2005, 21:17</div></div><div class="posttext">Thank you Afrow UK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">9th December 2005, 03:08</div></div><div class="posttext">I think I didn't state clearly my problem before. This is it: I have a DirRequest on a custom page. I click browse button-&gt; browser window appears-&gt; I select a dir ( C:\ProgramFiles)-&gt; I click OK on browser window-&gt; the selected dir (C:\ProgramFiles) is displayed on text box of dirRequest, but I don't want this, I want to change C:\ProgramFiles to C:\balba and display a message-&gt; and user click OK button on the message wind.-&gt; then new path(C:\balba)is displayed on the text box of dirRequest. It means somehow I can read and modify the selected path before it is displayed on the textbox of DirRequest control. I have tried many times in many ways, couldn't do it. Please help. Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th December 2005, 11:39</div></div><div class="posttext">Use Flags=NOTIFY<br />
This will act like the user clicking next when he clicks OK (on the browse window) but the field number of the DirRequest control will be written to Settings&gt;State which you can check with ReadINIStr. For examples see Examples\InstallOptions\NotifyTest.nsi<br />
<br />
-Stu<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anvinh173</div><div class="date">12th December 2005, 16:13</div></div><div class="posttext">Thank you very much. I got it. Really appreciate your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>