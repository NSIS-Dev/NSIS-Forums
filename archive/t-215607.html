<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Catch Button Event, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Catch Button Event NSIS Discussion" />
	
	<title> Catch Button Event [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Catch Button Event</div>
<hr />
<div class="pda"><a href="t-215607.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215607">Catch Button Event</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">10th May 2005, 15:16</div></div><div class="posttext">Hi.<br />
<br />
First of all: I'm new to NSIS.<br />
<br />
I edited an installation script of our company. I inserted a new customized MUI Page. There you can input two file names, looking like this:<br />
<br />
Function PAGE_PRIVATE_KEY<br />
  START_PAGE_PRIVATE_KEY:<br />
  !insertmacro MUI_HEADER_TEXT &quot;Private Key&quot; &quot;Wählen Sie hier den privaten Schlüssel aus.&quot;<br />
  ;!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 3&quot; State &quot;config\keys\mycert.key&quot;<br />
  ;!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 5&quot; State &quot;config\keys\mycert.crt&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 8&quot; State &quot;$INSTDIR\config\keys&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;PAGE_PRIVATE_KEY.ini&quot;<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_READ $private_key &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 3&quot; &quot;State&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $private_cert &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 5&quot; &quot;State&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $private_dir &quot;PAGE_PRIVATE_KEY.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
  <br />
<br />
    call CheckPrivateKey<br />
    StrCmp $return &quot;false&quot; 0 +3<br />
      MessageBox MB_ICONEXCLAMATION|MB_OK &quot;$error&quot;<br />
      goto START_PAGE_PRIVATE_KEY<br />
    <br />
    call CheckPrivateCert<br />
    StrCmp $return &quot;false&quot; 0 +3<br />
      MessageBox MB_ICONEXCLAMATION|MB_OK &quot;$error&quot;<br />
      goto START_PAGE_PRIVATE_KEY<br />
<br />
<br />
    <br />
FunctionEnd<br />
 <br />
<br />
<br />
$return is a global var. after reading some examples I know that it could be done better/another way (stack).<br />
<br />
My question: how can I depend the Checkxxx functions on a button event? currently the script calls the function even if you want to go back or abort the installation. that's not very user friendly, because you have to input those file names although you just want to abort.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th May 2005, 15:27</div></div><div class="posttext">You have to do do validation in the Custom Page's Leave function:<br />
<br />
Page Custom showFunc leaveFunc<br />
<br />
In fact the way that you are doing it now will not work at all, because InstallOptions only saves data from the InstallOptions page to the INI file after you leave the page (when you reach the Leave function).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 07:33</div></div><div class="posttext">It works.<br />
<br />
Thank you!!<br />
<br />
<br />
have to learn more about nsis, i think it's great ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>