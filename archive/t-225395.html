<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Dynamically change text in shown dialog in leave function, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Dynamically change text in shown dialog in leave function NSIS Discussion" />
	
	<title> Dynamically change text in shown dialog in leave function [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Dynamically change text in shown dialog in leave function</div>
<hr />
<div class="pda"><a href="t-225395.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=225395">Dynamically change text in shown dialog in leave function</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">7th September 2005, 12:44</div></div><div class="posttext">I need to set text for a field in my dialog that is already shown with MUI_INSTALLOPTIONS_DISPLAY. This should be done in the dialog leave function.<br />
I've tried MUI_INSTALLOPTIONS_WRITE and SendMessage $DlgItem ${WM_SETTEXT} 0 &quot;STR:$0&quot; but none of these two ways works.<br />
How to do this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">7th September 2005, 13:22</div></div><div class="posttext">I don't think you can do that. AFAIK, the leave function is called after the dialog has been closed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th September 2005, 13:52</div></div><div class="posttext">This script changes the colours on the dialog from the leave function:<br />
http://nsis.sourceforge.net/wiki/File:IoColors.zip<br />
<br />
What you want to do is pretty similar so you should get the idea.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">7th September 2005, 15:04</div></div><div class="posttext">Nice.<br />
However, you are not actually leaving the page.<br />
You are aborting so that the dialog is shown again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th September 2005, 15:44</div></div><div class="posttext">Sorry forgot to mention the actual code you want is in between the MUI_INSTALLOPTIONS_INITDIALOG and MUI_INSTALLOPTIONS_SHOW calls.<br />
<br />
Edit: That's if you want the changes to be made as the page is shown, otherwise what you want as iceman_k rightly said is impossible.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">7th September 2005, 19:34</div></div><div class="posttext">Originally posted by Afrow UK <br />
Sorry forgot to mention the actual code you want is in between the MUI_INSTALLOPTIONS_INITDIALOG and MUI_INSTALLOPTIONS_SHOW calls.<br />
<br />
Edit: That's if you want the changes to be made as the page is shown, otherwise what you want as iceman_k rightly said is impossible.<br />
<br />
-Stu  <br />
The matter is that I call possibly long external application with ExecWait from the page leave function. So to not to confuse a user, I want to write something at this page as it is still shown. Also, I disable all buttons to not to confuse him.<br />
So, dialog window is still here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">7th September 2005, 20:58</div></div><div class="posttext">If you run ExecWait from within the leave function you cannot update the buttons and text until the ExecWait is complete- at which point it is moot, really. On the other hand if you update the buttons and text before calling ExecWait, your ExecWait will not be called until the user clicks a button in the IO page, which again renders the whole text update pointless.<br />
Looks like there is no solution to your problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th September 2005, 09:07</div></div><div class="posttext">Just display a Banner.<br />
<br />
Edit: Here's an idea that could be possible with InstallOptionsEx perhaps. I haven't checked this but here's the idea. You execute the process with Exec not ExecWait in the custom page's PRE function. If it is possible to get InstallOptionsEx to leave the page every say 5 seconds you could use FindProcDLL to check if the process is still running in the LEAVE function. If it is still running you Abort back to the page, otherwise you re-enable the Next button and set some text to say the process has finished and call Abort.<br />
<br />
If you want to run the process only if the user clicks on a button, then that'll be a bit different. You'd probably have to have some boolean variable set or something...<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">8th September 2005, 18:49</div></div><div class="posttext">Hm, thanks for idea about displaying a banner - don't know how to do still, but will search. Dealing button - I am able to disable Next button in leave function - this works by simply call to EnableWindow. But I cannot change the text even with WinApi call and cannot understand, why.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th September 2005, 19:51</div></div><div class="posttext">Banner plugin. Docs\Banner<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">9th September 2005, 07:27</div></div><div class="posttext">Thanks, Afrow UK!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>