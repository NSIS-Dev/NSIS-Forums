<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS assembler, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS assembler NSIS Discussion" />
	
	<title> NSIS assembler [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS assembler</div>
<hr />
<div class="pda"><a href="t-326563.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=326563">NSIS assembler</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th January 2011, 13:43</div></div><div class="posttext">Hi all. It's my birthday today so I thought it would be a good time to post a project that I am working on for my University degree. It's an assembler for NSIS which takes a language that borrows syntax from all the popular high level languages such as Java, C and PHP and translates it into pure NSIS instructions.<br />
<br />
For example,function myFunc($arg1)<br />
{<br />
  $myVar = $arg1 * 10;<br />
  $var2 = 99 % (87 + $myVar);<br />
  return ($var2 + 6, $var2 * 6);<br />
}<br />
<br />
section blah()<br />
{<br />
  ($retA, $retB) = myFunc(12);<br />
  if ($retA &lt; $retB || $retB == 55)<br />
    detailPrint(&quot;hi!&quot;);<br />
}I still need to implement a lot of the NSIS functions such as MessageBox which require special treatment. For example, I plan to allow:<br />
$result = MessageBox(MB_OK, &quot;lolzzzzz&quot;);<br />
if ($result == IDOK)<br />
{<br />
  ...<br />
}<br />
Still to be done:<br />
* The preprocessor stuff but for my degree I will likely have the most basic form of #include, #define, #ifdef etc with perhaps macros via #macro akin to the C #define preprocessor directive. Extras can be added after.<br />
* Plugin calls<br />
* Variables optimisation (i.e. replace variable names with $0-$9, $R0-$R9 where possible (these are already used by the assembler for mathematical ops etc)).<br />
* Properties<br />
<br />
I have not yet decided on the properties such as Name, OutFile etc. Kichik had the idea to have a a separate file for properties in XML or some other format. However I am just thinking of keeping it simple so outFile(&quot;blah.exe&quot;); and Name(&quot;Blah!&quot;); for example which would be used outside a section/function just like in NSIS.<br />
<br />
I'm not sure whether this project will become the new face of NSIS or not because it may need a lot of existing stuff to be rewritten (I will be adding an __asm like instruction for inline NSIS script though). However it is an interesting exercise, especially for myself. Either way if anyone has any nice ideas I would love to hear it.<br />
<br />
Thanks<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">27th January 2011, 15:52</div></div><div class="posttext">Ufff, this seems like a tough nut...<br />
But I keep  my fingers crossed for you, GL in University</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">27th January 2011, 16:37</div></div><div class="posttext">Sounds interesting. Good luck!<br />
<br />
Ps: Happy birthday, Stu :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">28th January 2011, 06:19</div></div><div class="posttext">Very cool idea! I'm wondering how/whether you'll handle global vs local variables?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th January 2011, 17:48</div></div><div class="posttext">Very cool idea! I'm wondering how/whether you'll handle global vs local variables?<br />
<br />
Yes I have provisions for that. The assembler will just throw an error.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">29th January 2011, 22:32</div></div><div class="posttext">Great thing, but will it generate NSIS scripts as output ?<br />
Why not have it generate directly NSIS bytecode so it could be integrated as an alternative script format into makeNSIS ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">30th January 2011, 08:59</div></div><div class="posttext">Using round brackets is more convenient.<br />
I want that NSIS would be more easy to use that now, such as:<br />
(1)Command support more operations on one line. e.g.:<br />
IntOp $R0 $R1 * $R2 * $R3<br />
or like: IntOp $R2 $R0*$R0 - $R1*$R1, etc.<br />
(2)With built-in command if, endif, for, switch, case and more supported as you said.<br />
if (hwnd)<br />
 ;code<br />
endif<br />
if (GetDlgItem(hwnd, 1))<br />
 ;code<br />
endif<br />
or use braces as well.<br />
(2)Define a macro like C++:<br />
#define MYMINUS(a,b) (a-b)<br />
(3)Define a fuction with parameters as you said:<br />
(4)Use a result of an equation as input, like in c++. e.g.:<br />
SetWindowPos(hwnd, NULL, rc.left, rc.top, rc.right - rc.left, rc.top - rc.bottom, NULL)<br />
or usage like: <br />
SetWindowPos(hwnd, NULL, rc.left, rc.top, MYMINUS(rc.right,rc.left),...)<br />
(5)Use the return value of a function as input to save more variables, like c++. e.g.:<br />
SendMessage(GetDlgItem(hwnd, 1), BM_CLICK, 0, 0)<br />
(6)For each variable in NSIS needs NSIS_MAX_STRLEN bytes, I thought it would declare an int, int64 or a string with specified size so that use less memory.<br />
(7)Merge the Function of System plugin to NSIS compiler or build-in a function for calling a third-part dll easily as System plugin.<br />
<br />
Certainly, I means it would be better that NSIS support script like these styles but not written like these command in C++. I hope NSIS 2.5 or NSIS 3.0 will be stronger that before as well as the progress of AutoIt.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>