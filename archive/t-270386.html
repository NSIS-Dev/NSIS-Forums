<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Callback Function?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Callback Function? NSIS Discussion" />
	
	<title> Callback Function? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Callback Function?</div>
<hr />
<div class="pda"><a href="t-270386.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270386">Callback Function?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SportsQs</div><div class="date">30th April 2007, 10:44</div></div><div class="posttext">Hi,<br />
     I have a dll that is called from NSIS, in order to prepare the syatem for upgrade (is an EPOS application). I want to the instal to support a callback function, so that if the 'Prepare' fails, I can alert the user and abort the installation. The DLL is written in delphi (don't ask!), and the prepeare function has the following signature:<br />
<br />
function Prepare(CallbackMethod : TCallbackMethod) : Boolean<br />
<br />
<br />
How do I pass the callback function to my dll to respond to callbacks?<br />
<br />
Thanks in advance<br />
Peter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">30th April 2007, 13:14</div></div><div class="posttext">You can consider writing a C++ NSIS plugin that acts as a wrapper around your Delphi dll<br />
<br />
Also, you can write a Plugin for NSIS in Delphi as well (if it makes things any easier)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">30th April 2007, 15:07</div></div><div class="posttext">callback functions are not used for such things.<br />
<br />
therefore, you use return values.<br />
<br />
you just execute the function using the system.dll plugin for nsis and then check the return value of your function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SportsQs</div><div class="date">2nd May 2007, 17:28</div></div><div class="posttext">Originally posted by Comm@nder21 <br />
callback functions are not used for such things.<br />
<br />
therefore, you use return values.<br />
<br />
you just execute the function using the system.dll plugin for nsis and then check the return value of your function.  <br />
<br />
Hi Comm@nder21,<br />
   If only it was that simple, unfortulately the dll function call is required to asynchronously callback with it's current state based on the operation it is currently performing. Just checking the return value is not enough, as I need to inform the user of the current state of the install. I'll be passing back things such as 'Install Started', 'Backing Up Database', 'Contacting devices' etc... and a load more.<br />
  So I need to call mydll::Prepare() with a NSIS function as a parameter which will then display the messages to the user as they are recieved.<br />
<br />
Peter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd May 2007, 18:40</div></div><div class="posttext">The System plug-in can handle callbacks (http://nsis.sourceforge.net/Docs/System/System.html#callback). There is an example in the documentation.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>