<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" What's with NSIS namespaces?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  What's with NSIS namespaces? NSIS Discussion" />
	
	<title> What's with NSIS namespaces? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  What's with NSIS namespaces?</div>
<hr />
<div class="pda"><a href="t-346607.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=346607">What's with NSIS namespaces?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nawfal</div><div class="date">26th July 2012, 21:50</div></div><div class="posttext">Ok I called those parts of the NSIS script that look like !include MUI2.nsh namespaces. I need a little more clarity on which are the namespaces that I really should !include in my code. Here are my confusions:<br />
<br />
1) I have codes like this:<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
Page custom DbPage &quot;&quot; &quot;: Information Page&quot;<br />
Page instfiles<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
<br />
which basically means I am using a custom InstallOptions page as well. So I thought I need to include !include InstallOptions.nsh and !include MUI.nsh. It works. But to my surprise even if I am not including !include InstallOptions.nsh the code compiles, and I see no difference in end result !! But if I am including only !include MUI2.nsh, the code doesn't compile. But it compiles and works normally if I include !include MUI2.nsh &amp; !include InstallOptions.nsh. So what should I include, !include MUI.nsh alone or a combo of !include MUI2.nsh &amp; !include InstallOptions.nsh ?? . The code compiles if I include all !include MUI2.nsh, !include InstallOptions.nsh and !include MUI.nsh. In that case, the macros and functions will be loaded from !include MUI2.nsh or !include MUI.nsh ??<br />
<br />
<br />
<br />
2) I use a function defined here (http://nsis.sourceforge.net/Show_custom_page_when_a_section_has_been_selected) to see if a section is selected or not like this: <br />
<br />
SectionGetFlags ${Section_Name} $R0 <br />
IntOp $R0 $R0 &amp; ${SF_SELECTED} <br />
IntCmp $R0 ${SF_SELECTED} show <br />
<br />
The link asks to include !include Sections.nsh, but for me the script compiles even without including that. Why is it?? Should I ideally !include it?<br />
<br />
<br />
<br />
3) I have code like:<br />
<br />
${If} ${FileExists} `$0\*.*`<br />
${Else}<br />
    CreateDirectory $0<br />
${EndIf}<br />
<br />
  ${If} $2 != &lt;<br />
    StrCpy $2 &gt;<br />
  ${EndIf}<br />
<br />
  ${If} $3 != &lt;<br />
    StrCpy $3 &gt;<br />
  ${EndIf}<br />
<br />
etc. So shouldn't I !include LogicLib ? I get the code compiled even without using !include LogicLib.<br />
<br />
Why is that I am able to compile NSIS script without including appropriate packages/references?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th July 2012, 06:07</div></div><div class="posttext">1. MUI1 uses InstallOptions, so if you include the MUI1 headers it will then include the installoptions headers for you. MUI2 uses nsDialogs instead of installoptions, so if you want to use IO you'll have to include it manually. Note that nsDialogs has superceded IO long ago, please use nsDialogs for your custom pages.<br />
<br />
2. The ${SF_SELECTED} define is defined in sections.nsh. You must include it, otherwise the compiler won't know what ${SF_SELECTED} means. It should give you a compiler warning about it.<br />
<br />
3. Yes, you should. Again, if the defines and macros work it's only because logiclib has already been included by some other header file. It's all very logical: As long as logiclib is included *somewhere* before you use the macros/defines in your script, the compiler will be able to use those macros without trouble.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nawfal</div><div class="date">27th July 2012, 07:53</div></div><div class="posttext">Hi MSG, thanks for reply. <br />
<br />
1. Ok I understand IO.nsh is deprecated, but it will be too much work now to replace it with nsDialogs. My script is fully working, and compiles with no warning, no errors. My question now is should I include MUI alone or a combo of MUI2 and InstallOptions. I suppose the latter since I think MUI2 is better than MUI.<br />
<br />
2. That is my confusion MSG, the code works perfectly even without adding sections.nsh. It compiles with no errors, no warnings, and even works exactly as expected (regarding section selected logic and all). So my confusion is why is it working even without adding !include Sections.nsh ? In case its working, I can drop that include header right? Just thinking of right coding practice.<br />
<br />
3. Which is that somewhere? Because all the header I'm including is just MUI as of now. Does MUI have even LogicLib?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th July 2012, 10:47</div></div><div class="posttext">1. As far as I know the only difference between MUI 1 and 2 is the use of IO vs nsD. If you're using IO anyway, there's little point to using MUI2 - only adds to installer size.<br />
<br />
2. If the compiler does not throw a warning about an unknown + ignored define, then sections.nsh was already included somewhere. Probably by one of your other includes. But if you're thinking of good coding practice, you should always !include everything you know you need. Because you cannot be certain that the other nsh files will keep including your requirements forever - they might change with different NSIS versions.<br />
<br />
3. If you want to know whether MUI.nsh includes logiclib.nsh, why don't you just take a look in MUI.nsh? (Pro tip: mui.nsh includes nsis\contrib\modern ui\system.nsh, which in turn includes installoptions.nsh, which in turn includes logiclib.nsh.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nawfal</div><div class="date">27th July 2012, 12:01</div></div><div class="posttext">MSG, thanks for the tips, it was helpful. <br />
<br />
2. I was wondering all I included was just MUI, and not any other headers, but only now I know they were included inside the includes of MUI. <br />
<br />
3. I didn't have a clue I could check it that way. (Pro tip: mui.nsh includes nsis\contrib\modern ui\system.nsh, which in turn includes installoptions.nsh, which in turn includes logiclib.nsh which in turn includes Sections.nsh :):):))<br />
<br />
Your tip on coding practice was helpful, thanks again. Chapter/Thread Closed !! :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2012, 12:08</div></div><div class="posttext">Page instfilesThis should be replaced with !insertmacro MUI_PAGE_INSTFILES. You should not mix MUI and non MUI pages (you still use Page Custom for custom pages though).SectionGetFlags ${Section_Name} $R0 <br />
IntOp $R0 $R0 &amp; ${SF_SELECTED} <br />
IntCmp $R0 ${SF_SELECTED} showYou can use this instead:${If} ${SectionIsSelected} ${Section_Name}And finally, instead of this:${If} ${FileExists} `$0\*.*`<br />
${Else}<br />
    CreateDirectory $0<br />
${EndIf}You have ${IfNot}:${IfNot} ${FileExists} `$0\*.*`<br />
    CreateDirectory $0<br />
${EndIf}Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nawfal</div><div class="date">27th July 2012, 20:47</div></div><div class="posttext">Afrow UK, very many thanks.. makes sense..</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>