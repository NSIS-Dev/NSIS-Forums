<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" debian scons build failure win cvs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  debian scons build failure win cvs NSIS Discussion" />
	
	<title> debian scons build failure win cvs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  debian scons build failure win cvs</div>
<hr />
<div class="pda"><a href="t-226136.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=226136">debian scons build failure win cvs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">16th September 2005, 04:04</div></div><div class="posttext">scons .91 was uploaded to debian, so I can try to build nsis cvs again. I got this error when I tried today's CVS:pabs@chianamo:~/devel/debian/misc/nsis/NSIS$ scons SKIPPLUGINS=System<br />
scons: Reading SConscript files ...<br />
Delete(&quot;nsis-16-Sep-2005.cvs&quot;)<br />
Delete(&quot;.instdist&quot;)<br />
Delete(&quot;.test&quot;)<br />
Using GNU tools configuration<br />
AttributeError: 'module' object has no attribute 'CommandGenerator':<br />
  File &quot;SConstruct&quot;, line 179:<br />
    envs = SConscript('SCons/Config/gnu')<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Script/SConscript.py&quot;, line 557:<br />
    return apply(method, args, kw)<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Script/SConscript.py&quot;, line 494:<br />
    return apply(_SConscript, [self.fs,] + files, {'exports' : exports})<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Script/SConscript.py&quot;, line 226:<br />
    exec _file_ in call_stack[-1].globals<br />
  File &quot;SCons/Config/gnu&quot;, line 37:<br />
    cross_env(stub_env)<br />
  File &quot;SCons/Config/gnu&quot;, line 9:<br />
    env.Tool('crossmingw', toolpath = ['../Tools'])<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Environment.py&quot;, line 1090:<br />
    tool = apply(SCons.Tool.Tool, (tool, toolpath), kw)<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Tool/__init__.py&quot;, line 78:<br />
    module = self._tool_module()<br />
  File &quot;/usr/lib/scons-0.96.91/SCons/Tool/__init__.py&quot;, line 90:<br />
    return imp.load_module(self.name, file, path, desc)<br />
  File &quot;../Tools/crossmingw.py&quot;, line 107:<br />
    None</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th September 2005, 11:36</div></div><div class="posttext">The attached patch solves it for me. Let me know if it works for you as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">16th September 2005, 16:57</div></div><div class="posttext">It worked for me too. However, now I get the following build errors when building each of the stubs (everything else builds fine) .&lt;snip&gt;<br />
Source/exehead/Ui.c:1496: warning: implicit declaration of function `ListView_SetExtendedListViewStyleEx'<br />
&lt;snip&gt;<br />
i586-mingw32msvc-g++ -o build/release/stub_bzip2/stub_bzip2.exe -s -mwindows -nostdlib -Wl,--exclude-libs,msvcrt.a -Wl,--file-alignment,512 -Wl,-e,_WinMain@16 -Wl,-Map,build/release/stub_bzip2/stub_bzip2.map -T /home/pabs/devel/debian/misc/nsis/NSIS/SCons/Config/linker_script build/release/stub_bzip2/bgbg.o build/release/stub_bzip2/components.o build/release/stub_bzip2/exec.o build/release/stub_bzip2/fileform.o build/release/stub_bzip2/Main.o build/release/stub_bzip2/Ui.o build/release/stub_bzip2/util.o build/release/stub_bzip2/crc32.o build/release/stub_bzip2/bzlib.o build/release/stub_bzip2/decompress.o build/release/stub_bzip2/huffman.o build/release/stub_bzip2/resource.o SCons/Config/memcpy.c SCons/Config/memset.c -lkernel32 -luser32 -lgdi32 -lshell32 -ladvapi32 -lcomdlg32 -lcomctl32 -lole32 -lversion -luuid<br />
build/release/stub_bzip2/Ui.o:Ui.c:(.text+0x1be7): undefined reference to `_ListView_SetExtendedListViewStyleEx'<br />
collect2: ld returned 1 exit status<br />
scons: *** [build/release/stub_bzip2/stub_bzip2.exe] Error 1<br />
scons: building terminated because of errors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th September 2005, 16:59</div></div><div class="posttext">Is ListView_SetExtendedListViewStyleEx not defined in CommCtrl.h?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">16th September 2005, 17:25</div></div><div class="posttext">it should be unless someone is using an old/incomplete version of that header<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">17th September 2005, 02:15</div></div><div class="posttext">It is, but it is only defined if _WIN32_IE is greater than 0x0400. I think it is best to define this as 0x0500 or greater in the NSIS source to enable as many features as possible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2005, 09:34</div></div><div class="posttext">It's actually already 0x0500. The problem was that it was defined in Platform.h which was included after CommCtrl.h in Ui.c. I've moved it to the SConscript and it works now with my MinGW.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>