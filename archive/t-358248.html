<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to compare two files in NSIS?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to compare two files in NSIS? NSIS Discussion" />
	
	<title> How to compare two files in NSIS? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to compare two files in NSIS?</div>
<hr />
<div class="pda"><a href="t-358248.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=358248">How to compare two files in NSIS?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">28th March 2013, 05:42</div></div><div class="posttext">I have created exe file using nsis.Installer working both ways silent and non-silent mode.If the user run second time i will take backup old property values and compare new property values.If mismatches i will write old property value into new property.<br />
In the following code compare two and copy into temp file mismatched values. <br />
Function compare<br />
    StrCpy $R0 &quot;$INSTDIR\old.properties&quot; <br />
    StrCpy $R1 &quot;$INSTDIR\new.properties&quot;<br />
 <br />
    GetTempFileName $R2<br />
    FileOpen $R3 $R2 w<br />
    ${TextCompare} &quot;$R0&quot; &quot;$R1&quot; &quot;FastDiff&quot; &quot;Example2&quot;<br />
    IfErrors 0 +2<br />
    MessageBox MB_OK &quot;Error&quot; IDOK +2<br />
 <br />
    Exec &quot;notepad.exe $R2&quot;<br />
FunctionEnd<br />
<br />
Function Example2<br />
     FileWrite $R3 '$9'<br />
    Push $0<br />
FunctionEnd<br />
<br />
<br />
Problem:<br />
In the temp File[$R3] have mismatched values.I want to replace mismatched values into new property.<br />
How to achieve this?.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">28th March 2013, 12:58</div></div><div class="posttext">What is the format of your property files? Can you use ConfigRead/ConfigWrite?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">28th March 2013, 13:32</div></div><div class="posttext">I dont understand what is the format of your property file?.In my code i have put .properties.<br />
<br />
Also how to use config read in this file comparison? <br />
<br />
Problem:<br />
compare two property files named old and new.if any string value mismatches that value should be replaced in new property.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">28th March 2013, 14:58</div></div><div class="posttext">Please upload an example property file to pastebin.com .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">1st April 2013, 11:07</div></div><div class="posttext">#DEFAULT - PATH<br />
DIRECTORY=C:/programfile/myproject<br />
INDEXFILE=C:/programfile/myproject/index.xml<br />
Temp INDEXFILE=C:/programfile/myprojec/temp.xml<br />
DAYS=3<br />
.........<br />
........<br />
<br />
In the above are sample values in property file.Also i have put in pastebin.com.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st April 2013, 13:31</div></div><div class="posttext">Use ConfigRead/ConfigWrite. It's in the NSIS manual.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">1st April 2013, 14:01</div></div><div class="posttext">thanks.I have used configwrite for writing mismatched values.but it will raised another problem.<br />
<br />
If i use ${ConfigWrite} it will enter<br />
<br />
 ${ConfigWrite} &quot;$INSTDIR\conf.properties&quot; &quot;$R0&quot; &quot; $R1&quot; $R3 <br />
<br />
$R0 -variable<br />
$R1-value<br />
After writing property file it will add new line every written.e.g<br />
<br />
#DEFAULT - PATH<br />
DIRECTORY=C:/programfile/myproject<br />
<br />
INDEXFILE=C:/programfile/myproject/index.xml<br />
<br />
Temp INDEXFILE=C:/programfile/myprojec/temp.xml<br />
<br />
DAYS=3<br />
<br />
<br />
I dont know why this new line added for every writing.How erase this new line ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st April 2013, 18:46</div></div><div class="posttext">ConfigRead may not trim new-line characters. Use TrimNewLines on the value before writing it.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">2nd April 2013, 07:20</div></div><div class="posttext">yes.I have tried same function.but i have used after written.Now its working.Thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>