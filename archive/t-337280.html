<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Multilingual installation: Version number in caption, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Multilingual installation: Version number in caption NSIS Discussion" />
	
	<title> Multilingual installation: Version number in caption [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Multilingual installation: Version number in caption</div>
<hr />
<div class="pda"><a href="t-337280.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=337280">Multilingual installation: Version number in caption</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stopasking</div><div class="date">10th November 2011, 16:44</div></div><div class="posttext">Hello!<br />
<br />
I want to add a version number to my installation caption, but leave the name without the version number in all other places.<br />
<br />
makensis does it the following way:<br />
Name &quot;NSIS&quot;<br />
Caption &quot;NSIS ${VERSION} Setup&quot;<br />
<br />
This works only for an English-only installation.<br />
<br />
I tried to do the following:<br />
!searchreplace &quot;ASDF_${LANGLOAD}&quot; &quot;$(^SetupCaption)&quot; &quot;$(^Name)&quot; &quot;$(^Name) v${VERSION}&quot;<br />
LangString &quot;^SetupCaption&quot; &quot;${LANG_${LANG_LOADING}}&quot; &quot;${ASDF_${LANGLOAD}}&quot;<br />
Where &quot;${LANGLOAD}&quot; is every loaded language. It does not work.<br />
<br />
Any suggestions? Another option I see is editing .nlf files, but this is quite an ugly solution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th November 2011, 16:50</div></div><div class="posttext">Use another language string for the caption?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stopasking</div><div class="date">10th November 2011, 16:57</div></div><div class="posttext">Well, I can do a LangString for every supported language, but I think the method sucks.<br />
What if, e.g., a new version of NSIS is released with a better translation for some language?<br />
<br />
I don't want to copy the strings from nsis .nlf files to my installation script, I just want to append a version number to ^Name in ^SetupCaption.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th November 2011, 17:11</div></div><div class="posttext">There is no way to do this. You have to either just put the version in Name or create your own LangString.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stopasking</div><div class="date">10th November 2011, 17:30</div></div><div class="posttext">Can't you get the contents of &quot;$(^SetupCaption)&quot; somehow?<br />
There's also this trick I saw (I think you are the author of it):<br />
http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time<br />
<br />
Which might get the job done, but is ugly as well.<br />
Seems like the easiest way here is to modify the .nlf files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">13th November 2011, 09:29</div></div><div class="posttext">The easy solution is of course to put the version number in &quot;Name&quot;, if you don't want to do that you can use this ugly workaround:<br />
<br />
outfile test.exe<br />
requestexecutionlevel user<br />
<br />
Name &quot;Test&quot;<br />
!define VERSION 1.2.3<br />
<br />
!macro CreateSetupCaptionLangstring lang prefix suffix<br />
!tempfile tnsi<br />
!appendfile &quot;${tnsi}&quot; 'outfile &quot;${tnsi}.exe&quot;$\nrequestexecutionlevel user$\nLoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\${lang}.nlf&quot;$\n'<br />
!appendfile &quot;${tnsi}&quot; 'section$\nFileOpen $0 &quot;${tnsi}.nsh&quot; w$\n'<br />
!appendfile &quot;${tnsi}&quot; 'FileWrite $0 `!define SetupCaption &quot;$(^SetupCaption)&quot;`$\nsectionend$\nName &quot;xxx&quot;$\n'<br />
!system '&quot;${NSISDIR}\makensis&quot; &quot;${tnsi}&quot;' = 0<br />
!delfile &quot;${tnsi}&quot;<br />
!system '&quot;${tnsi}.exe&quot; /S' = 0<br />
!delfile &quot;${tnsi}.exe&quot;<br />
!include &quot;${tnsi}.nsh&quot;<br />
!delfile &quot;${tnsi}.nsh&quot;<br />
!undef tnsi<br />
!searchreplace SetupCaption &quot;${SetupCaption}&quot; &quot;xxx &quot; &quot;${prefix}&quot;<br />
!ifndef LANG_${lang}<br />
	LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\${lang}.nlf&quot;<br />
!endif<br />
LangString &quot;^SetupCaption&quot; ${LANG_${lang}} &quot;${SetupCaption}${suffix}&quot;<br />
!undef SetupCaption<br />
!macroend<br />
!macro LOAD_MUILANGUAGE_AND_SETUPCAPTION lang prefix suffix<br />
!insertmacro MUI_LANGUAGE &quot;${lang}&quot;<br />
!insertmacro CreateSetupCaptionLangstring &quot;${lang}&quot; &quot;$(^Name) v${VERSION} &quot; &quot;&quot;<br />
!macroend<br />
<br />
!include &quot;MUI2.nsh&quot;<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
!insertmacro LOAD_MUILANGUAGE_AND_SETUPCAPTION &quot;English&quot; &quot;$(^Name) v${VERSION} &quot; &quot;&quot;<br />
!insertmacro LOAD_MUILANGUAGE_AND_SETUPCAPTION &quot;Swedish&quot; &quot;$(^Name) v${VERSION} &quot; &quot;&quot;<br />
!insertmacro LOAD_MUILANGUAGE_AND_SETUPCAPTION &quot;Norwegian&quot; &quot;$(^Name) v${VERSION} &quot; &quot;&quot;<br />
!insertmacro MUI_RESERVEFILE_LANGDLL<br />
<br />
Function .onInit<br />
!insertmacro MUI_LANGDLL_DISPLAY<br />
FunctionEnd<br />
<br />
section<br />
sectionend</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>