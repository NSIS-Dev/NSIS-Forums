<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Set  permission failed on files generated with CopyFiles, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Set  permission failed on files generated with CopyFiles NSIS Discussion" />
	
	<title> Set  permission failed on files generated with CopyFiles [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Set  permission failed on files generated with CopyFiles</div>
<hr />
<div class="pda"><a href="t-314631.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314631">Set  permission failed on files generated with CopyFiles</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">frodelan</div><div class="date">16th November 2009, 07:24</div></div><div class="posttext">Hi, my installer includes some files I generate with CopyFiles during the installation process. I use AccessControl to give these files permissions. When I give permission on folder I do not get correct permission on the files I generated, but all others files in these folders get correct permission. I have to specify permission for each file I have generated to get correct permission.<br />
<br />
Anyone who know why it is like that?<br />
<br />
My code:<br />
<br />
SetOutPath $EXEDIR\test<br />
File /r C:\test\test.conf-dist<br />
	<br />
CopyFiles /SILENT &quot;$EXEDIR\test\test.conf-dist&quot; &quot;$EXEDIR\test\test.conf&quot;<br />
<br />
; FAILED	<br />
AccessControl::GrantOnFile &quot;$EXEDIR\test&quot; &quot;IUSR_TEST&quot; &quot;GenericRead + GenericExecute&quot;<br />
<br />
; OK<br />
AccessControl::GrantOnFile &quot;$EXEDIR\test\test.conf&quot; &quot;IUSR_TEST&quot; &quot;GenericRead + GenericExecute&quot;<br />
<br />
Best regards, Frode</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th November 2009, 07:49</div></div><div class="posttext">Well, if the file is copied (created) by an Administrator installer, the file's owner will be Administrator, not IUSR_TEST. Thus the file may not be accessible by IUSR_TEST. On the other hand, generic read + execute would normally be allowed to any user, except guests maybe... I think.<br />
<br />
Another thing I can think of is $EXEDIR\test\test.conf-dist having inheriting disabled in its access settings. Though I'm not even sure if that is supposed to be maintained when a file is copied...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">frodelan</div><div class="date">16th November 2009, 08:26</div></div><div class="posttext">I do not understand why it should matter if the file is copied by an Administrator. I set the permissions on the created file in the installer, hence the file should get these permission and not the permission from the user who installed it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">16th November 2009, 08:53</div></div><div class="posttext">You may try to change the permission before extracting file into the test folder, rather than after ?<br />
(I don't see why, but the permission may not be inherited automatically to files if the ACL is changed afterwards?)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th November 2009, 09:46</div></div><div class="posttext">Originally posted by frodelan <br />
I do not understand why it should matter if the file is copied by an Administrator. I set the permissions on the created file in the installer, hence the file should get these permission and not the permission from the user who installed it.  <br />
The way I see it, you're setting permissions to the directory. Now I'm not an expert on ntfs permissions at all, but I could imagine an admin-owned file in a user-owned dir might do funky unexpected stuff. Then again it might not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">frodelan</div><div class="date">17th November 2009, 09:42</div></div><div class="posttext">MSG: As I tried to explain in my original post every other files which is copied into that folder by the installer does get correct permission.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>