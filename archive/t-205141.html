<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Why doesn't this work?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Why doesn't this work? NSIS Discussion" />
	
	<title> Why doesn't this work? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Why doesn't this work?</div>
<hr />
<div class="pda"><a href="t-205141.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205141">Why doesn't this work?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Chilli24</div><div class="date">17th January 2005, 12:21</div></div><div class="posttext">Hi...I don't know why doesn't this work:<br />
<br />
InstallDirRegKey HKLM &quot;Software\MyCompany\MyKey&quot; &quot;Root path&quot;<br />
<br />
Function .onInit<br />
<br />
  StrCpy $INSTDIR InstallDirRegKey\folder1<br />
<br />
FunctionEnd<br />
<br />
Section &quot;Copy files&quot; SEC01<br />
<br />
  SetOutPath $INSTDIR\Components<br />
  SetOverwrite on<br />
  File &quot;source\${DLLname1}&quot;<br />
  File &quot;source\${DLLname2}&quot;<br />
<br />
SectionEnd<br />
<br />
When I run this install the path is shown as: &quot;InstallDirRegKey\folder1&quot;...i want it to be &quot;C:\rootFolder\folder1&quot;, where &quot;C:\rootFolder&quot; is in the registry.<br />
So, can anyone help me? I'm a newbie :)...Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th January 2005, 12:43</div></div><div class="posttext">StrCpy $INSTDIR &quot;$INSTDIR\folder1&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chilli24</div><div class="date">17th January 2005, 12:58</div></div><div class="posttext">Thanks Takhir but I want to use InstallDirRegKey, not INSTDIR. I want the installer to take the path from regisstry, not to be predefined by me. Can you help me with that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th January 2005, 13:09</div></div><div class="posttext">InstallDirRegKey is Attribute, not a variable. <br />
&quot;This attribute tells the installer to check a string in the registry, and use it for the install dir if that string is valid. If this attribute is present, it will override the InstallDir attribute if the registry key is valid, otherwise it will fall back to the InstallDir default.&quot;<br />
So installer reads InstallDirRegKey to $INSTDIR if key is valid or uses InstallDir attribute otherwise.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chilli24</div><div class="date">17th January 2005, 13:16</div></div><div class="posttext">I have done exactly like you said but it's just showing me : &quot;\folder1&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">17th January 2005, 13:27</div></div><div class="posttext">Before sending first reply I tested attached script on my Win2K server, NSIS 2.04 and I could see correct paths. The question may be when installer checks for InstallDirRegKey in the registry, but this is strange... It looks like your registry node exists and it's value is &quot;&quot; or registry has not this string and InstallDir is not defined.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Chilli24</div><div class="date">17th January 2005, 13:57</div></div><div class="posttext">Thanks man...The problem was that I have entered the path in the registry wrong.Now it works.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>