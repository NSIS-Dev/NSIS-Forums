<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Does NSIS support driver installation?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Does NSIS support driver installation? NSIS Discussion" />
	
	<title> Does NSIS support driver installation? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Does NSIS support driver installation?</div>
<hr />
<div class="pda"><a href="t-273261.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273261">Does NSIS support driver installation?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">22nd June 2007, 21:19</div></div><div class="posttext">I have written a (Windows XP) driver with a corresponding .inf file that can be used in the standard way: Control Panel's Add Hardware.<br />
<br />
However, &quot;Add Hardware&quot; is interactive and now I would like to automate this (preferrably using NSIS).<br />
<br />
Is this possible? Does NSIS have built-in API for handling drivers?<br />
<br />
If so, where do I look?<br />
<br />
Thanks,<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">23rd June 2007, 01:04</div></div><div class="posttext">I don't know try this (http://nsis.sourceforge.net/InstDrv_plug-in).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Theresias</div><div class="date">23rd June 2007, 02:58</div></div><div class="posttext">Check out DPInst, this is according to our experience the best choice - especially when you plan on having your drivers installed on Vista etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">23rd June 2007, 19:27</div></div><div class="posttext">Originally posted by Theresias <br />
Check out DPInst, this is according to our experience the best choice - especially when you plan on having your drivers installed on Vista etc. <br />
<br />
Thanks. I was unaware of the existence of DPInst. My initial search yielded this:<br />
<br />
Driver Package Installer (DPInst) (http://msdn2.microsoft.com/en-us/library/ms790308.aspx)<br />
http://msdn2.microsoft.com/en-us/library/ms790308.aspx<br />
msdn2.microsoft.com/en-us/library/ms790308.aspx<br />
<br />
I was not sure whether it supports totally quiet mode (i.e. not even a single dialog prompting the user), but then I found this:<br />
<br />
Setting DPInst Configuration Flags (http://msdn2.microsoft.com/en-us/library/ms791062.aspx)<br />
http://msdn2.microsoft.com/en-us/library/ms791062.aspx<br />
msdn2.microsoft.com/en-us/library/ms791062.aspx<br />
<br />
Could you confirm my understanding that it supports totally quiet installation?<br />
<br />
Thanks also to Joel who provide the link to InstDrv. I will take a look at it too.<br />
<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Theresias</div><div class="date">23rd June 2007, 19:35</div></div><div class="posttext">Depending on the actual OS a fully quite installation would need signed and verified drivers I guess - not sure if you are willing to pay MÂ§ for that. :)<br />
<br />
For my/our purposes DPInst is just fine, so we ended up using that instead of InstDrv which had problems on Vista in our case.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">24th June 2007, 12:39</div></div><div class="posttext">Originally posted by Theresias <br />
Depending on the actual OS a fully quite installation would need signed and verified driversOf course. Thanks for the clarification.<br />
<br />
Originally posted by Theresias <br />
For my/our purposes DPInst is just fine, so we ended up using that instead of InstDrv which had problems on Vista in our case. I believe that I will eventually switch (for the same reasons as yours) to DPInst. For now I am looking into InstDrv since I already have an NSIS script for the entire package that I am writing (which includes a driver).<br />
<br />
Do you happen to know what drvHWID in InstDrv's InstDrv::InitDriverSetup means?<br />
<br />
Is it the same thing as what's under HKLM\SYSTEM\CurrentControlSet\Enum?<br />
<br />
Thanks,<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">25th June 2007, 04:02</div></div><div class="posttext">Never mind. InstDrv turned out to be a total waste of time for me. Its documentation is not that great either.<br />
<br />
I am going to try DPInst now. It is also a better investement (I do intend to eventually target Vista as well, not only XP).<br />
<br />
Thanks,<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JungiX</div><div class="date">12th August 2007, 09:28</div></div><div class="posttext">Hello,<br />
<br />
I have a problem with installing drivers on windows 2k.<br />
Our setup installs driver from windows 2k up to vista, so we tried to use DPInst from the DIFx (part of WDK 6000).<br />
An older version of the setup used the Inst_Drv plugin (SetupOEMInf) for installation. Switched for vista compatibility.<br />
<br />
It works fine for xp/vista, but on 2k it has a strange behaviour. If an older version of the driver is installed (eigher SetupOEMInf or DPInst) DPInst will not install the newer driver. You have to uninstall the old driver first. I tried the SetupUninstallOEMInf (or similar) until i saw, that api function does not exist in windows 2k. A manual check of the driver version (which works) and then force DPInst to install the driver will only install the driver for a plugged device. Every other devices will still use the old driver.<br />
<br />
Continue using of the Inst_Drv plugin for windows 2k setup seems to end in not installing the driver at all.<br />
<br />
I'm at the end of ideas.<br />
I hope one of you can help me with this problem</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Truth Unknown</div><div class="date">27th December 2008, 00:38</div></div><div class="posttext">Originally posted by vc6 <br />
Do you happen to know what drvHWID in InstDrv's InstDrv::InitDriverSetup means? <br />
<br />
This is the Hardware ID that Windows will use to install drivers, you can also use the Compatibility IDs. This is easily found in the details tab of the Device's Properties page in Device Manager and in the INF file of the driver.<br />
<br />
---<br />
<br />
In my opinion, the InstDRV plugin isn't completely bad, it does have its shortcomings and quirks, but it's usable. Heck, I use it now, but I should really move on to DPInst.<br />
<br />
Yes, I know this a 2 month old topic.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">27th December 2008, 04:55</div></div><div class="posttext">[off topic] Its actually 16 months old :eek: .</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>