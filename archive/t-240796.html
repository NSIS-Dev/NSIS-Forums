<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" building nsis on macos: some solutions &amp; some questions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  building nsis on macos: some solutions &amp; some questions NSIS Discussion" />
	
	<title> building nsis on macos: some solutions &amp; some questions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  building nsis on macos: some solutions &amp; some questions</div>
<hr />
<div class="pda"><a href="t-240796.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240796">building nsis on macos: some solutions &amp; some questions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">farialima</div><div class="date">14th March 2006, 10:10</div></div><div class="posttext">I tried to build on MacOS. I had some compilation errors, which I was able to solve by editing SCons/Config/gnu and changing the line 25 from:<br />
  defenv['MAP_FLAG'] = '-Wl,-Map,${TARGET.base}.map'<br />
to<br />
  defenv['MAP_FLAG'] = '-Wl'<br />
<br />
I don't know if it qualify as a patch... maybe I had this error because I'm not using the right tools ? I use gcc version 3.3 20030304 (Apple Computer, Inc. build 1666), and scons v0.96.91.D001.<br />
<br />
in anycase, running:<br />
  scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all PREFIX=/Users/farialima install<br />
now works, it creates a 'makensis' in my personal bin folder, but it's missing some stubs, for zlib and other things. Running 'makensis' gives<br />
  Error: opening stub &quot;/Users/farialima/share/nsis/Stubs/zlib&quot;<br />
  Error initalizing CEXEBuild: error setting default stub<br />
<br />
How can I complete my installation on the Mac ? should I take some other files from another installation ? I could not find any documentation beside the &quot;appendix G&quot; at http://nsis.sourceforge.net/Docs/AppendixG.html (great name BTW) ? <br />
<br />
I am not familiar with the internals of NSIS; is there any hope to have a complete NSIS (including the MUI...) running on MacoS ?<br />
<br />
<br />
thanks<br />
<br />
Fran√ßois</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th March 2006, 12:25</div></div><div class="posttext">You should use the compiled makensis along with files from a matching compiled version. As said in the documentation, right below the scons command line you've used:This should only build makensis. Once you have makensis, you can drop it in a downloaded precompiled package such as the nightly build. Note that the in order for this to work, the precompiled package must be compiled using the exact same sources as makensis. In particular, Source\exehead\config.h and Source\exehead\fileform.h must be identical.<br />
<br />
However, even if you do that, you won't be able to run makensis on MacOS X. makensis doesn't yet run on big-endian platforms like PowerPC. The current CVS version almost runs, but not yet. Unless you have the new mactel, you won't be able to run makensis.<br />
<br />
I'll a test to the code that'll check if the -map flag is available or not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">farialima</div><div class="date">14th March 2006, 17:12</div></div><div class="posttext">Sorry for not knowing how to read. :(. Thanks for pointing me to the right info.<br />
<br />
I had also looked at the DarwinPort, which I was able to compile, and which seems to take care of the BigEnding thing, but it is an older version (2.05) and it has other problems. You may be interesting in knowing about it. I've entered two bugs on it, I'm not sure it's still maintained:<br />
http://bugzilla.opendarwin.org/show_bug.cgi?id=7502<br />
http://bugzilla.opendarwin.org/show_bug.cgi?id=7504<br />
<br />
I'm not familiar enough with the code, and with MacOS, to be able to help on the coding side, but if you need testing or anything, please contact me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th March 2006, 17:23</div></div><div class="posttext">The DarwinPort took care of only one of many big endian problems. It took care of the one that made makensis crash immediately and that's it. SourceForge compile farm has a PowerPC to test on and I also have a MacOS X machine in the house, so testing is not needed. But if you'd like to get into the code, patches are always appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">farialima</div><div class="date">14th March 2006, 17:35</div></div><div class="posttext">OK. Just one last thing, I'll waste bandwidth but it has to be said: thanks for this excellent tool. NSIS is clearly the best. Just right between complexity and features. Extensible to hell if needed. Clearly the best. Congratulations.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">16th March 2006, 04:35</div></div><div class="posttext">With the next version, or CVS, I recommend that you turn on the NSIS_CONFIG_CONST_DATA_PATH option when building on MacOSX. This will make makensis look for stuff in the subdirectory where makensis is located, instead of some predefined location. This way you can move the directory around and it will still work. I think this should be made the default on MacOSX, should notify any mac packagers though. What do you think kichik?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th March 2006, 17:26</div></div><div class="posttext">Why should it be the default for MacOS X? makensis is a console application, like ls and tar, and should therefore be installed to /usr/bin. If it was a GUI (cocoa?) application, it should have had the ability to move.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">18th March 2006, 04:43</div></div><div class="posttext">Hmm, didn't really consider that.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>