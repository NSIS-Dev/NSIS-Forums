<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to display a custom page based on a setup type, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to display a custom page based on a setup type NSIS Discussion" />
	
	<title> How to display a custom page based on a setup type [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to display a custom page based on a setup type</div>
<hr />
<div class="pda"><a href="t-264758.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264758">How to display a custom page based on a setup type</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">vkoldenh</div><div class="date">31st January 2007, 17:24</div></div><div class="posttext">Hi,<br />
<br />
I have created a small installer with a custom page, asking for a specific path. Now I want to be able to show this dialog only, if the customer/user has selected a specific setup type. So for instance, only when he chooses Custom as the setup type. <br />
<br />
Now I have read a number of the forums, and I looked into the documentation, but I need so help or guidance on how this could be done. <br />
<br />
Any help or just ideas would be very much appreciated.<br />
<br />
Thanks in advance.<br />
<br />
Vincent</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st January 2007, 17:33</div></div><div class="posttext">See NSIS documentation 4.9.13.10 GetCurInstType<br />
Once you manage this, on custom page's create function before the InstallOptions call, check the var and if for instance is anything else than 32 which is the custom install, add abort to skip the page,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vkoldenh</div><div class="date">31st January 2007, 18:18</div></div><div class="posttext">Thanks. I will have a good read into that chapter.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rochi</div><div class="date">13th March 2007, 09:51</div></div><div class="posttext">Hi,<br />
<br />
I want to get the current install type with GetCurInstType<br />
but i can't get the custom install type.<br />
<br />
InstType Full<br />
<br />
GetCurInstType get 0 for &quot;Full&quot; but also 0 for custom ( i think the documentation says custom is ${NSIS_MAX_INST_TYPES} ?)<br />
I'm really confused about.<br />
<br />
Thx<br />
Frank</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th March 2007, 09:55</div></div><div class="posttext">${NSIS_MAX_INST_TYPES} == 32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rochi</div><div class="date">13th March 2007, 10:09</div></div><div class="posttext">InstType &quot;Full&quot;<br />
<br />
Function .onSelChange<br />
    ;MessageBox MB_OK &quot;Hallo?&quot;<br />
    GetCurInstType $R1<br />
    ${If} $R1 == ${NSIS_MAX_INST_TYPES}<br />
        MessageBox MB_OK &quot;Custom&quot;<br />
    ${EndIf}<br />
FunctionEnd<br />
<br />
The messagebox appears never.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">13th March 2007, 10:20</div></div><div class="posttext">Well custom or not (32) is depended on selected/deselected components, e.g. if you select custom from dropdown without changing the components selection then the current install type is still full.<br />
Here is a related example:<br />
OutFile &quot;Test.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\boo&quot;<br />
<br />
InstType Typical<br />
InstType Full<br />
<br />
!include &quot;mui.nsh&quot;<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;${NSISDIR}\Docs\Modern UI\License.txt&quot;<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
Page Custom custcreate custleave<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Section &quot;common&quot; sec1<br />
   SectionIn 1 2<br />
SectionEnd<br />
<br />
Section &quot;data&quot; sec2<br />
   SectionIn 1 2<br />
SectionEnd<br />
<br />
Section /o &quot;examples&quot; sec3<br />
   SectionIn 2<br />
SectionEnd<br />
<br />
Function custcreate<br />
   GetCurInstType $0<br />
   StrCmp $0 32 next<br />
   Abort<br />
 next:<br />
   !insertmacro MUI_HEADER_TEXT &quot;Warning! Custom Installation&quot; \<br />
   &quot;You may see this page whenever your selection is custom installation!&quot;<br />
   push $0<br />
   InstallOptions::Dialog &quot;$PLUGINSDIR\custom.ini&quot;<br />
   pop $0<br />
   pop $0<br />
FunctionEnd<br />
<br />
Function custleave<br />
   MessageBox MB_OK &quot;This is a custom installation&quot;<br />
FunctionEnd<br />
<br />
Function .onInit<br />
   InitPluginsDir<br />
   GetTempFileName $0<br />
   Rename $0 &quot;$PLUGINSDIR\custom.ini&quot;<br />
<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;settings&quot; &quot;numfields&quot; &quot;1&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;type&quot; &quot;groupbox&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;text&quot; &quot;I'm a GroupBox, or not...&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;left&quot; &quot;10&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;right&quot; &quot;-10&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;top&quot; &quot;10&quot;<br />
   WriteINIStr &quot;$PLUGINSDIR\custom.ini&quot; &quot;field 1&quot; &quot;bottom&quot; &quot;-10&quot;<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>