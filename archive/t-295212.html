<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Setting background color of dialogs (using MUI)?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Setting background color of dialogs (using MUI)? NSIS Discussion" />
	
	<title> Setting background color of dialogs (using MUI)? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Setting background color of dialogs (using MUI)?</div>
<hr />
<div class="pda"><a href="t-295212.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=295212">Setting background color of dialogs (using MUI)?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BadInstincts</div><div class="date">29th July 2008, 02:20</div></div><div class="posttext">I know there have been other posts relating to this topic, but they seem to be about setting the background color of controls within a dialog and not setting the background color of the dialog itself.  I need the color of my MUI based installer to be white instead of the Window's default.  <br />
<br />
I have gotten most of the way there by using a call to:<br />
<br />
SetCtlColors $HWNDPARENT &quot;&quot; ffffff<br />
<br />
within the MUI's MUI_INITGUI_BASIC macro (system.nsh).  The problem is, on pages that include controls from the various dialogs defined in the modern.exe UI (i.e. the license controls, the component selection controls, etc.), the background not used by the controls themselves is still the Window's default.<br />
<br />
There's a couple of caveats:<br />
<br />
1) Using reshacker.exe, I have enlarged the main installer window by altering the size of the 105 Dialog (modern_headerbmp.exe) and moving around the contained controls accordingly.  This includes the 1018  WS_BLACKRECT control which seems to define the relative location of all the subsequent controls defined within modern.exe.  <br />
<br />
2) I have also enlarged the sizes of the dialogs and controls within the modern.exe that I use.  But haven't changed the size of the 105 dialog within the modern.exe, since it doesn't seem to make a difference.<br />
<br />
Questions:<br />
<br />
1) Is there a way to get the handle of the different dialogs (not just controls) so I can try to set the background color /w the SetCtlColors instruction?  I've tried doing a:<br />
<br />
SetCtlColors 105 &quot;&quot; ffffff<br />
<br />
but that doesn't work (I didn't expect it to).<br />
<br />
2) Is there a way to staticaly define the background color of a dialog within the resource definition itself, or does it have to be done programmatically?<br />
<br />
3) I've also seen a message (WM_) that the dialog can handle that sets it's background color, but don't understand how that would be used within the context of NSIS/MUI.<br />
<br />
Any help on this would be greatly appreciated.  This is the first post on the forum, and I hope I haven't asked something obvious.  But per the rules, I have tried to read most of the posts on this subject.  I'm not a GUI writer by trade and very well would be helped by a better understanding of resources and GUI programming.<br />
<br />
Thanks in advance,<br />
John</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KrisAster</div><div class="date">29th July 2008, 21:41</div></div><div class="posttext">I know there's a define for MUI called 'MUI_BGCOLOR'.  I haven't used it, but I know that it doesn't modify everything.  Do you need something more than what this offers?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BadInstincts</div><div class="date">29th July 2008, 21:46</div></div><div class="posttext">I'm afraid so.<br />
<br />
The MUI_BGCOLOR is just for the Welcome and Finish pages.  None of which I am using.  There's also a MUI_LICENSEPAGE_BGCOLOR, but that's for the license text box, not the background color of the window.<br />
<br />
Thanks anyway.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KrisAster</div><div class="date">29th July 2008, 21:59</div></div><div class="posttext">Have you tried setting callbacks functions for the dialogs that aren't displaying correctly and doing the SetCtlColors for the window handle of the currently displaying dialog?  You'd have to do a FindWindow or something along those lines to get the window handle.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BadInstincts</div><div class="date">29th July 2008, 22:09</div></div><div class="posttext">Yes and no.  I've tried doing SetCtlColors calls from the .onGUIInit callback, but the issue is more getting the handle for the dialog and not an individual control.  Are there individual callbacks for each dialog?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th July 2008, 22:57</div></div><div class="posttext">Use FindWindow to get the handle of the inner dialog. The example in the documentation does this.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BadInstincts</div><div class="date">30th July 2008, 00:34</div></div><div class="posttext">So Stu,<br />
<br />
You mean use:<br />
<br />
  FindWindow $MUI_TEMP1 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $MUI_TEMP1 $MUI_TEMP1 ${CONTROL}<br />
  SetCtlColors $MUI_TEMP1 &quot;&quot; &quot;${MUI_BGCOLOR}&quot;<br />
<br />
What identifies the inner dialog?  Control 1018?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BadInstincts</div><div class="date">31st July 2008, 07:38</div></div><div class="posttext">I have tried every combination of the FindWindow calls I can think of, but to no avail.<br />
<br />
How does one get the handle of dialog 102 (defined within the modern.exe)?  <br />
<br />
I've also tried downloading the source and have modified the dialogProc() within the exehdr/ui.cpp to return a brush object set to RGB(255, 255, 255).  But that hasn't worked either.  Next I am going to try and modify the different LicenseProc(), InstFilesProc(), etc.?<br />
<br />
Help,<br />
John</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>