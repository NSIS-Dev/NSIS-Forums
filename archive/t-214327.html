<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom page problem with 2.06, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom page problem with 2.06 NSIS Discussion" />
	
	<title> Custom page problem with 2.06 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom page problem with 2.06</div>
<hr />
<div class="pda"><a href="t-214327.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=214327">Custom page problem with 2.06</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sbellon</div><div class="date">27th April 2005, 14:12</div></div><div class="posttext">I had a NSIS installer working with Modern UI and one custom page with NSIS 2.04, running with wine from Debian Linux. Now, Debian ships a Linux-native version of NSIS 2.06 and the installer doesn't show the custom page anymore. The rest is working fine. I wonder whether it's a change between 2.04 and 2.06 or whether the Linux version has a problem.<br />
<br />
The relevant part of the install script looks like this:<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE &quot;LICENSE.txt&quot;<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
Page custom LicenseKeyInstallation &quot;&quot;<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
; later on<br />
<br />
Var TempFile<br />
<br />
Function LicenseKeyInstallation<br />
  GetTempFileName $TempFile<br />
  File /oname=$TempFile &quot;win32\instkey.ini&quot;<br />
  !insertmacro MUI_HEADER_TEXT &quot;Install License Key&quot; \<br />
	&quot;Now you can optionally install your license key.&quot;<br />
  Push $R0<br />
  InstallOptions::dialog $TempFile<br />
  Pop $R0<br />
  StrCmp $R0 &quot;success&quot; 0 isNotSuccess<br />
  ReadINIStr $R0 $TempFile &quot;Field 2&quot; &quot;State&quot;<br />
  StrCmp $R0 &quot;&quot; isNotSuccess<br />
  CopyFiles /SILENT $R0 &quot;$INSTDIR\license.key&quot;<br />
  isNotSuccess:<br />
  Delete $TempFile<br />
FunctionEnd<br />
<br />
Previously (with makensis 2.04, using wine from Linux) it created an installer that showed that custom page and you could enter a file or leave it blank. Now, with native 2.06 on Linux that page does not appear at all. And the final &quot;Installation finished, click to exit&quot; page does not appear either.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th April 2005, 18:06</div></div><div class="posttext">Make sure the INI file has Windows line endings. Windows doesn't seem to like INI files with just LF.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sbellon</div><div class="date">29th April 2005, 15:24</div></div><div class="posttext">Ok, I just checked that.<br />
<br />
But even if I don't use a custom page, the installer terminates after the MUI_PAGE_INSTFILES page without any other page. If I don't add a custom page, the MUI_PAGE_FINISH page is not displayed either. The installer scripts do have DOS endings. I checked with wine and 2.06 and that works.<br />
<br />
So, it's in fact a problem with the Linux version: 2.06 windows works (even under wine), but 2.06 native Linux doesn't.<br />
<br />
Any further ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2005, 16:19</div></div><div class="posttext">Does the custom page show now, or did already have Windows line endings?<br />
<br />
The finish page's INI file also needs to have Windows line endings. The file is located at /path/to/nsis/Contrib/Modern UI/ioSpecial.ini. The script doesn't need Windows line endings because makensis parses it and not Windows.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sbellon</div><div class="date">29th April 2005, 16:57</div></div><div class="posttext">Changing the line endings of the custom page's .ini file didn't change anything. The .ini file of the finish page has already DOS line endings.<br />
<br />
Are you saying you are using Modern UI successfully by building installers from Linux?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th April 2005, 22:39</div></div><div class="posttext">Using the original package (http://prdownloads.sourceforge.net/nsis/nsis206.tar.bz2?download), I have no problems building scripts using the Modern UI. It works with custom, welcome and finish pages. It might be a problem with the InstallOptions plug-in compiled under MinGW, or one of the patches applied to the Debian package. You should submit a bug report to the package maintainer (http://forums.winamp.com/member.php?s=&amp;action=getinfo&amp;userid=167723).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>