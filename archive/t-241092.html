<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SkinnedButton 1.21 development version, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SkinnedButton 1.21 development version NSIS Discussion" />
	
	<title> SkinnedButton 1.21 development version [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SkinnedButton 1.21 development version</div>
<hr />
<div class="pda"><a href="t-241092.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=241092">SkinnedButton 1.21 development version</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">17th March 2006, 09:05</div></div><div class="posttext">Hi everybody,<br />
<br />
after quite some tedious work, I have a new version ready for testing. It still contains quite some diagnostic code so don't bother about the size ;) This version of the dll performs proper skinning of bigtest.nsi with the UltraModernUI, without additional tweaks to the NSIS sources. Well, at least for me it is working now ;)<br />
<br />
So I'm asking everybody who is interested in skinned buttons to test the plugin and check if really all buttons will be skinned properly now. If you find some that won't work, please tell me :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">17th March 2006, 09:39</div></div><div class="posttext">Same unskinned buttons problem after messagebox appearance.<br />
<br />
<br />
The sript:<br />
 <br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
 <br />
!include &quot;MUI.nsh&quot;<br />
!define MUI_CUSTOMFUNCTION_GUIINIT begin<br />
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE Messagebox<br />
!insertmacro MUI_PAGE_WELCOME<br />
Page Custom Custom Leave<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
 <br />
XPStyle off<br />
 <br />
Function .onInit<br />
  InitPluginsDir<br />
  File &quot;/oname=$PLUGINSDIR\button.bmp&quot; \<br />
    &quot;${NSISDIR}\Contrib\skinnedbutton\skins\ishield.bmp&quot;<br />
FunctionEnd<br />
 <br />
Function Messagebox<br />
  #here is the problem, try to remove leave function to see that<br />
  #buttons on the custom page become skinned again<br />
  MessageBox MB_OK &quot;This button is not skinned and this messagebox \<br />
    makes next custom page buttons unskinned...&quot;<br />
Functionend<br />
 <br />
Function Custom<br />
 InstallOptions::dialog &quot;$EXEDIR\test.ini&quot;<br />
 Pop $R0<br />
FunctionEnd<br />
 <br />
Function Leave<br />
  ReadINIStr $R0 &quot;$EXEDIR\test.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
  StrCmp $R0 1 0 Continue<br />
   #after clicking here the buttons are skinned again <br />
   MessageBox MB_OK|MB_ICONEXCLAMATION &quot;You clicked me!&quot;<br />
   Abort<br />
 Continue:<br />
FunctionEnd<br />
 <br />
Function begin<br />
  skinnedbutton::skinit /NOUNLOAD &quot;$PLUGINSDIR\button.bmp&quot;<br />
Functionend<br />
 <br />
Function .onGUIEnd<br />
  skinnedbutton::unskinit<br />
FunctionEnd<br />
 <br />
Section &quot;&quot;<br />
SectionEnd<br />
 <br />
test.ini file:<br />
 <br />
[Settings]<br />
NumFields=2<br />
 <br />
[Field 1]<br />
Type=Button<br />
Left=20<br />
Right=-20<br />
Top=20<br />
Bottom=33<br />
Text=Click me!<br />
Flags=NOTIFY<br />
 <br />
[Field 2]<br />
Type=GroupBox<br />
Left=10<br />
Right=-10<br />
Top=9<br />
Bottom=-9<br />
Text=Test</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">17th March 2006, 10:16</div></div><div class="posttext">The message box is a system message box which is created as another top-level window, not as a child window, so I can't skin it directly. I'll see what I can do about that. The unskinned back button on the next page is astonishing, though. Up to now, I just played with the UltraModernUI which has an integrated message box pane - so this bug does not show up at all. Thanks for the feedback, gotta see what I can do about the additional top level window.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">17th March 2006, 15:32</div></div><div class="posttext">Okay, I can now skin the message box button. The method of wansis and skinnedbutton plugins are not sufficient to accomplish this, so I stripped a lot of code and rewrote most of the rest. The only strange thing is that after clicking the message box button, the back button becomes unskinned again *big sigh* <br />
<br />
Oh, btw, should the large &quot;Click me!&quot; button become skinned too? It looks pretty ugly *g*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">17th March 2006, 19:20</div></div><div class="posttext">Originally posted by OldGrumpy <br />
...<br />
<br />
Oh, btw, should the large &quot;Click me!&quot; button become skinned too? It looks pretty ugly *g*  <br />
<br />
Yes, this button should be skinned (all buttons on the custom page should be too).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">17th March 2006, 19:30</div></div><div class="posttext">Hmm, the &quot;Click me!&quot; is a html link, isn't it?<br />
By the way, I can skin all of them now, except for &quot;Click me&quot; and I have to fix some redraw issues. Put it in the background and bring it to the foreground again and everything looks okay *sigh*</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">17th March 2006, 19:56</div></div><div class="posttext">Nope, &quot;Click me&quot; calls MessageBox MB_OK|MB_ICONEXCLAMATION &quot;You clicked me!&quot;, no html here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat45</div><div class="date">17th March 2006, 21:24</div></div><div class="posttext">I have tested this version:<br />
<br />
there is no more problem withe the startmenu page :-),<br />
<br />
I have modified with ressourceshacker the modern.exe UI to replace the property of &quot;Show Detail&quot; button from BS_PUSHBUTTON to BS_OWNERDRAW but it remain unskinned, and if I click on it, the next button is unskinned.<br />
<br />
We are on the good way!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">17th March 2006, 21:37</div></div><div class="posttext">SuperPat45:<br />
<br />
If you followed my old instructions, you have to edit ui.c from the NSIS sources and recompile NSIS to get the exehead files with the required modifications. With these modifications, the Show Details button will be skinned and the Next button too. But this is already outdated by now. I've implemented a new way of skinning buttons, I just have some minor problems with keeping an eye on childwindows and some window refresh problems I don't fully understand by now. I can launch the test.exe and it looks misdrawn, place another window in front of it and when I remove the other window, test.exe looks okay. So everything gets drawn nicely, just not at the right time ;)<br />
<br />
I've broken some bits while implementing the new system for the messageboxes. I have to re-implement the skinning for childwindows completely. That means I'll still use the draw routines from wansis but that's about all that's left from the old skinnedbutton plugin. A lot of new code has been integrated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat45</div><div class="date">17th March 2006, 21:48</div></div><div class="posttext">OK,<br />
<br />
I am impatient to see that, and in particular the source code.<br />
<br />
If you could add some comments for the comprehension in the source code, that would help me much to understand it...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">18th March 2006, 09:43</div></div><div class="posttext">I'll attach the sample installer I built from zeeh3's script for demo purposes. As I said, it still has some issues I am currently investigating. But the messagebox is skinned now ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">18th March 2006, 11:56</div></div><div class="posttext">Don't forget to put test.ini in the same directory of test.exe or the custom page won't appear. Can you post the script? It is not working for me, no skinned buttons at all :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">18th March 2006, 12:00</div></div><div class="posttext">I tested the example but no button is skinned.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">18th March 2006, 12:40</div></div><div class="posttext">Yeah, simple but effective fault. I forgot to replace the debug version of the dll with the release version. Most systems out there have no debug runtime dlls installed, that means loading of the skinnedbutton.dll fails and thus no skinned buttons at all. Find the correct version attached, please :)<br />
<br />
And BTW, SuperPat45: Please shrink the picture in your signature a bit, it voids the forum formatting :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">21st March 2006, 11:49</div></div><div class="posttext">OldGrumpy,<br />
<br />
Now what SkinnedButton can skin the messagebox buttons,<br />
<br />
Would be possible to make small NSIS plug-in making possible to change the text color and the background color of the messagesbox?<br />
(il would make very pretty with UltraModernUI and SkinnedButton)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OldGrumpy</div><div class="date">21st March 2006, 18:07</div></div><div class="posttext">Hmm, I can't promise that it will work, but I'll see what I can do. But first of all, I'd like to fix the still unskinned buttons. Lots of work... Unfortunately, my real life consumes almost all of my time. It will take about 1-2 weeks until things get better. So stay tuned :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">23rd March 2006, 14:47</div></div><div class="posttext">OK Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">22nd July 2006, 22:48</div></div><div class="posttext">Hello,<br />
<br />
OldGumpy, please, can you send me the lastest version of your SkinnedButton source-code modifiactions?<br />
<br />
I need it to continue its developpment and that of UltraModernUI.<br />
<br />
Thank you in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">30th July 2006, 22:36</div></div><div class="posttext">Hi<br />
I made installer with full background image and I would like to use your plugin with<br />
XPStyle turned ON<br />
<br />
Check my topic: http://forums.winamp.com/showthread.php?s=&amp;threadid=251710<br />
<br />
But I did it with XPStyle off ........<br />
<br />
Could you fix it to work with v XPStyle turned ON ?<br />
<br />
It would greatly help me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SuperPat</div><div class="date">30th July 2006, 23:22</div></div><div class="posttext">I would like to, but, I think that it is impossible because if you see the skinned installshield installers, they are all with the XPStyle at off.<br />
<br />
 And unfortunately, I am not necessary knowledges in the win32 api.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>