<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to create user defined directory page?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to create user defined directory page? NSIS Discussion" />
	
	<title> How to create user defined directory page? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to create user defined directory page?</div>
<hr />
<div class="pda"><a href="t-369855.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=369855">How to create user defined directory page?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">28th August 2013, 12:49</div></div><div class="posttext">!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
In the code can be used to display the built-in directory page.<br />
<br />
Is possible to create user defined page directory? because i need to call many times this page.<br />
<br />
How to create user defined page directory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">28th August 2013, 13:12</div></div><div class="posttext">You can probably just use multiple built-in directory pages. Simply insert the macro multiple times. You can customize each page using these defines:<br />
MUI_DIRECTORYPAGE_TEXT_TOP text<br />
MUI_DIRECTORYPAGE_TEXT_DESTINATION<br />
MUI_DIRECTORYPAGE_VARIABLE<br />
<br />
See the MUI2 readme: http://nsis.sourceforge.net/Docs/Modern%20UI%202/Readme.html</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">29th August 2013, 06:30</div></div><div class="posttext">Thanks MSG.<br />
I have tried following way to create directory page manually.<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE MyDir<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowDirectory<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
<br />
Function MyDir<br />
${DriveSpace} &quot;C:\&quot; &quot;/D=F /S=G&quot; $R0<br />
${If} $R0 &lt;= 2<br />
    MessageBox MB_OK &quot;Going to display&quot;<br />
    call ShowDirectoryPage<br />
 ${EndIf}   <br />
Function ShowDirectory<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $1 $0 1020 ; IDC_SELDIRTEXT<br />
StrCpy $2 &quot;$(SelDirText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $0 1006<br />
StrCpy $2 &quot;$(IntroText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $HWNDPARENT 1037<br />
StrCpy $2 &quot;$(DirText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $HWNDPARENT 1038<br />
StrCpy $2 &quot;$(DirSubText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $0 1023 ; IDC_SPACEREQUIRED<br />
System::Call 'user32.dll::ShowWindow(i, i) v($1, 0)'<br />
GetDlgItem $1 $0 1024 ; IDC_SPACEAVAILABLE<br />
System::Call 'user32.dll::ShowWindow(i, i) v($1, 0)'<br />
FunctionEnd<br />
<br />
<br />
but in the ShowDirectory function didnot display directory page.Also i got warning messages for this function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th August 2013, 08:54</div></div><div class="posttext">You're missing a FunctionEnd after MyDir</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">29th August 2013, 09:35</div></div><div class="posttext">oh sorry.Its my mistake i  didnot copy the code properly.<br />
<br />
define MUI_PAGE_CUSTOMFUNCTION_PRE MyDir<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ShowDirectory<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
<br />
Function MyDir<br />
${DriveSpace} &quot;C:\&quot; &quot;/D=F /S=G&quot; $R0<br />
${If} $R0 &lt;= 2<br />
MessageBox MB_OK &quot;Going to display&quot;<br />
call ShowDirectoryPage<br />
${EndIf}<br />
FunctionEnd<br />
<br />
Function ShowDirectory<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $1 $0 1020 ; IDC_SELDIRTEXT<br />
StrCpy $2 &quot;$(SelDirText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $0 1006<br />
StrCpy $2 &quot;$(IntroText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $HWNDPARENT 1037<br />
StrCpy $2 &quot;$(DirText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $HWNDPARENT 1038<br />
StrCpy $2 &quot;$(DirSubText)&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:$2&quot;<br />
GetDlgItem $1 $0 1023 ; IDC_SPACEREQUIRED<br />
System::Call 'user32.dll::ShowWindow(i, i) v($1, 0)'<br />
GetDlgItem $1 $0 1024 ; IDC_SPACEAVAILABLE<br />
System::Call 'user32.dll::ShowWindow(i, i) v($1, 0)'<br />
FunctionEnd<br />
<br />
<br />
Following warnings displayed <br />
<br />
LangString &quot;SelDirText&quot; is not set in language table of language English<br />
LangString &quot;IntroText&quot; is not set in language table of language English<br />
LangString &quot;DirText&quot; is not set in language table of language English<br />
LangString &quot;DirSubText&quot; is not set in language table of language English</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st September 2013, 08:09</div></div><div class="posttext">You need to !insertmacro MUI_LANGUAGE &quot;English&quot; after all (un)page macros are inserted.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ilaiyaraja</div><div class="date">2nd September 2013, 07:03</div></div><div class="posttext">I have already included this macro after all page macros are inserted.<br />
!insertmacro MUI_LANGUAGE English<br />
<br />
Is there need to insert before this page ShowDirectory load?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">2nd September 2013, 08:44</div></div><div class="posttext">Maybe it is easier to create custom directory page (few labels, edit box and button with nsDialogs::SelectFolder function) with nsDialogs?<br />
<br />
It can be shown many times with appropriate parameters without using a lot of code.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>