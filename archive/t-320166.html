<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Font Install, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Font Install NSIS Discussion" />
	
	<title> Font Install [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Font Install</div>
<hr />
<div class="pda"><a href="t-320166.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320166">Font Install</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">23rd June 2010, 09:14</div></div><div class="posttext">My nsis installer needs to install a font. I use CopyFile the .ttf file to fonts folder in windows xp and then executing this :: <br />
<br />
System::Call &quot;GDI32::AddFontResourceA(t) i ('BIRDMAN_.TTF') .s&quot;<br />
Pop $0<br />
SendMessage ${HWND_BROADCAST} ${WM_FONTCHANGE} 0 0<br />
<br />
but still my application doesnt catch the font at first time after install.. If I open fonts folder manually after installation it works fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">23rd June 2010, 09:56</div></div><div class="posttext">When I look at the Register Fonts entry in the wiki (google~~) I see that it also writes a registry key. Maybe that's what you're missing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">23rd June 2010, 11:23</div></div><div class="posttext">Im trying with FontName plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">23rd June 2010, 14:41</div></div><div class="posttext">Please check this method.. <br />
<br />
http://nsis.sourceforge.net/Register_Fonts<br />
<br />
Im trying this. Lets see. Have anyone tried it before and got success..??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">23rd June 2010, 16:46</div></div><div class="posttext">!include &quot;FontReg.nsh&quot;<br />
!include &quot;FontName.nsh&quot;<br />
<br />
..... Main Section here<br />
<br />
Section &quot;Fonts&quot;<br />
  StrCpy $FONT_DIR $FONTS<br />
  !insertmacro InstallTTFFont 'BIRDMAN_.TTF'<br />
  SendMessage ${HWND_BROADCAST} ${WM_FONTCHANGE} 0 0 /TIMEOUT=5000<br />
SectionEnd<br />
<br />
Is it okay for installing and registering the specified font with windows. I put BIRDMAN_.TTF file in the same directory of my nsi script file. Is it Okay ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">25th June 2010, 15:53</div></div><div class="posttext">No one tried FontName plugin before ??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th June 2010, 17:04</div></div><div class="posttext">Looks fine to me. Why don't you test it?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">25th June 2010, 17:18</div></div><div class="posttext">the matter is.. fro testing it in my system i need to remove that font manually and deleting the windows FNTCACHE.DAT file.. moreover i tried this but not so sure. have to check in other system. thats why I asked here if anyone use this method and got a success..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th June 2010, 13:40</div></div><div class="posttext">Are you saying you are having to manually uninstall the font before you install it? In other words - the font is already installed? If so, how about using RemoveTTFFont first?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">26th June 2010, 15:53</div></div><div class="posttext">See, I did manually what RemoveTTFFont used to do with codes. ie: removing .ttf file from fonts folder and deleting its entry from registry. Moreover if you follow this process to delete a font it'll be deleted but next time if you only copy .ttf file to the fonts folders it'll be activated in all application, note this time you didnt register it with window, so it was previously registered with windows, for this I have to delete FNTCACHE.dat file from system. This should be done now, but still I cant be sure that the script works for registering fonts with windows until i use my installer to a system that has never registered the font before..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th June 2010, 17:00</div></div><div class="posttext">That is the whole point - if it's a brand new font then why should it already exist on the system? If the installation is being run again then you should detect this and either run the uninstall first or use RemoveTTFFont directly before InstallTTFFont. InstallTTFFont probably has not been written to cope with the issue of the font already existing because this is not usually the case.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hypheni9</div><div class="date">26th June 2010, 19:10</div></div><div class="posttext">In previously build of my installer I was aware of this fact and I just coded to put .ttf file to fonts folder by CopyFiles method. That works well in my system as I opens fonts folders most of the time and thus installing that .ttf file. But when I tried my installer in other systems the application did not detect it though installer has copied the .ttf file in the system's font directory. In this case it only copied the file but not registering .ttf. There after I tried new installer with InstallTTF method in my system where .ttf file has already registered. So here lies the problem. Anyways I'll check my new installer in other system in few days and will get back here.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>