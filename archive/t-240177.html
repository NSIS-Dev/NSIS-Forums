<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Know which app was fired?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Know which app was fired? NSIS Discussion" />
	
	<title> Know which app was fired? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Know which app was fired?</div>
<hr />
<div class="pda"><a href="t-240177.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240177">Know which app was fired?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ehrens</div><div class="date">7th March 2006, 14:48</div></div><div class="posttext">I'm posting this because I received a good response to my previous post and really have no idea where to post this or how to phrase it.  I have the installer working beautifully and it makes my file associations in the registry.  So, here's my question...<br />
<br />
if I have two files...say, like emails...and one is stuff.abc and the other is things.abc...  I click on one.  The association launches my ABCReader.  Now, how do I know which file was clicked on so that my Reader can bring that file up in the viewer?<br />
<br />
Thanks for any help either on the question or insight as to where I should ask this question.<br />
<br />
Aaron</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th March 2006, 14:51</div></div><div class="posttext">Usually, when you associate file types, you set the command line to be something like &quot;C:\myprog\prog.exe %1&quot;. That %1 is replaced with the path to the opened file. The command line can be read in your program using GetCommandLine (http://msdn.microsoft.com/library/en-us/dllproc/base/getcommandline.asp?frame=true) or argc and argv in main if it's a command line program.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ehrens</div><div class="date">7th March 2006, 15:49</div></div><div class="posttext">Thanks!  Do you have to do anything to specify the path then of the file that is being opened or does the OS handle that for you and just put it in there for the %1?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th March 2006, 15:53</div></div><div class="posttext">The shell automatically replaces %1 with the file. You just need to call GetCommandLine and parse the result.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ehrens</div><div class="date">7th March 2006, 16:58</div></div><div class="posttext">getCommandLine...  Is this a Java call?  If so, do you know what library I would need?  I can't seem to find it in the basic jdk stuff.<br />
<br />
Also, I have two ways that I need to support things...  1 is by launching an .exe with the file and 2 would be to launch a batch script.  In the batch script, how would I snag the value of the %1 without using the getCommandLine (or have I gone off the deep end?)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th March 2006, 17:10</div></div><div class="posttext">It's a Windows API. I've added a link to it in the first reply. In Java, the arguments passed on the command line are passed as parameters to your 'main' function.<br />
<br />
In a batch file, use %1 to get the first command line parameter, %2 to get the second, etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ehrens</div><div class="date">8th March 2006, 19:00</div></div><div class="posttext">Very cool....  I have it passing in the filename and now have 1 last question...  It's running the exe local to the directory of the file that I doubleclicked (so, if on the desktop, app is launched from Docs and Settings but if in c:\app\export, then the app is launched relative to that dir).  Is there a way to specify, regardless of where the app was launched, where it should be run relative to the directory structure that was installed (ie, always run relative to the app\bin directory that installed)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th March 2006, 19:10</div></div><div class="posttext">No that I know. You'll have to handle that in your application.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ehrens</div><div class="date">8th March 2006, 19:15</div></div><div class="posttext">Thanks so much for the help and for the quick responses...  Last question for a while....  if I click on 3 files, it opens 3 instances of my app.  Is there a way to only open 1 instance and pass in all 3 filenames?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th March 2006, 19:18</div></div><div class="posttext">There's probably some value you can write in the association registry key that'd do that. MSDN or an existing example could help there. If not, you can always have your application check if it's already running.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>