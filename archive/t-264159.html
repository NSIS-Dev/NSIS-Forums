<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to ask for a second install directory, in MUI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to ask for a second install directory, in MUI NSIS Discussion" />
	
	<title> How to ask for a second install directory, in MUI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to ask for a second install directory, in MUI</div>
<hr />
<div class="pda"><a href="t-264159.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264159">How to ask for a second install directory, in MUI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Kjh</div><div class="date">22nd January 2007, 12:11</div></div><div class="posttext">Hi,<br />
my application consists of a few standalone exe as well as a couple of plugin dlls for another application.<br />
<br />
The user should be able to choose the combination of which things they want, either the standalone bits, the plugins for another app, or in the normal case both.<br />
<br />
The MUI_PAGE_DIRECTORY macro is used to ask the user for the main program directory, which is where all the standalone stuff is found.<br />
<br />
For the plugins for the 3rd party app, it checks the registry to find out where the 3pa is installed.<br />
<br />
However in some special cases the 3pa might be installed twice, say 2 different versions, and I would like a second MUI_PAGE_DIRECTORY type window to pop up and let the user either confirm the directory discovered in the registry or supply another one, ideally only if the user chooses the plugins section.<br />
<br />
I am not sure how to do that, and havent found anything in the docs or examples that seems to do that.<br />
<br />
After that I would like to be able to supress the standard MUI_PAGE_DIRECTORY in case the user only selects the plugins and not the standalone exes.<br />
<br />
Basically I am looking for some per-section MUI_PAGE_DIRECTORY rather than a MUI_PAGE_DIRECTORY thats global to all sections.<br />
<br />
Any hints? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd January 2007, 13:14</div></div><div class="posttext">Var INSTDIR2<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE Directory2Pre<br />
!define MUI_DIRECTORYPAGE_VARIABLE $INSTDIR2<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
Function Directory2Pre<br />
 ReadRegStr $INSTDIR2 ...<br />
 StrCmp $INSTDIR2 &quot;&quot; ShowPage<br />
 IfFileExists $INSTDIR2\*.* 0 ShowPage<br />
  Abort<br />
 ShowPage:<br />
FunctionEnd<br />
<br />
Abort when called in a page's PRE function will skip that page.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kjh</div><div class="date">22nd January 2007, 14:05</div></div><div class="posttext">Ahh thanks a lot, it looks a lot like the Add-on Custom Install example I was looking at. I have pretty much got what I wanted now, except for 1 small thing, both directory pages appear, even if I have don't select any sections that need INSTDIR2. Is there anyway to suppress a page being shown unless a section actually needs its var?<br />
<br />
Thanks a lot you saved me a heap of time.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>