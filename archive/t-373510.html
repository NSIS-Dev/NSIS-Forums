<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How can I disable (turn off) drag windows (pages)?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How can I disable (turn off) drag windows (pages)? NSIS Discussion" />
	
	<title> How can I disable (turn off) drag windows (pages)? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How can I disable (turn off) drag windows (pages)?</div>
<hr />
<div class="pda"><a href="t-373510.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=373510">How can I disable (turn off) drag windows (pages)?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">5th November 2013, 16:56</div></div><div class="posttext">How can I disable (turn off) drag windows (pages) ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aerDNA</div><div class="date">5th November 2013, 18:14</div></div><div class="posttext">What do you mean, prevent user from moving the installer window? You could do that by removing the titlebar (whether it's a good idea or not).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">6th November 2013, 12:53</div></div><div class="posttext">aerDNA<br />
You could do that by removing the titlebar<br />
How can this be implemented ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aerDNA</div><div class="date">6th November 2013, 15:28</div></div><div class="posttext">The simplest and also the best way is to reshack the UI: create a copy of Contrib\UIs\modern.exe, open in ResHacker, in dialog 105 remove WS_MINIMIZEBOX, WS_CAPTION and WS_SYSMENU styles and add WS_DLGFRAME. Then use this UI in your script with !define MUI_UI.<br />
<br />
I was playing to see if this can all be done programmatically from within the script, just out of curiosity. You can use the attached script to get a preview of what the installer will look like and see if this is what you really want. Then if you decide to go for it, I suggest you use the reshack method.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th November 2013, 21:15</div></div><div class="posttext">I was playing to see if this can all be done programmatically from within the script, just out of curiosity. You can use the attached script to get a preview of what the installer will look like and see if this is what you really want. Then if you decide to go for it, I suggest you use the reshack method.<br />
<br />
You shouldn't use the XOR (^) operator to clear flags unless you also test that they are actually set. It will end up adding the flag value when it isn't set, which is not what you want (XOR toggles). Using the ~ and &amp; operators is better. These are semantically equal:<br />
<br />
IntOp $R1 ${WS_SYSMENU} ~<br />
IntOp $R0 $R0 &amp; $R1<br />
IntOp $R0 $R0 &amp; ${WS_SYSMENU}<br />
${If} $R0 = ${WS_SYSMENU}<br />
  IntOp $R0 $R0 ^ ${WS_SYSMENU}<br />
${EndIf}Edit: And assuming they are always set is not good practice.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aerDNA</div><div class="date">6th November 2013, 22:29</div></div><div class="posttext">Snippet #2 is what I would normally use, in this case I didn't think it was necessary. But fair enough, never assume anything.<br />
<br />
Edit: ...and you clarified something I didn't fully understand before (XOR toggles).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">7th November 2013, 04:59</div></div><div class="posttext">aerDNA<br />
Thank you for the example. Is it possible to make a travel ban windows &quot;by the rules&quot; ?<br />
 For example, like this:<br />
<br />
unit Unit1;<br />
<br />
interface<br />
<br />
uses<br />
   Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,<br />
   Dialogs, StdCtrls;<br />
const<br />
   SC_MOVING =61458;<br />
type<br />
   TForm1 = class(TForm)<br />
     Label1: TLabel;<br />
     procedure WndProc(var Msg: TMessage); override;<br />
   private<br />
     { Private declarations }<br />
<br />
   public<br />
     { Public declarations }<br />
   end;<br />
<br />
var<br />
   Form1: TForm1;<br />
<br />
implementation<br />
<br />
{$R *.dfm}<br />
<br />
procedure TForm1.WndProc(var Msg: TMessage);<br />
begin<br />
     if (Msg.WParam = SC_MOVING) {or (Msg.WParam = SC_MOVE)} then Exit;<br />
     inherited WndProc(msg);<br />
end;<br />
<br />
end.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">7th November 2013, 08:19</div></div><div class="posttext">http://stackoverflow.com/questions/15471983/nsis-maximize-minimize-button-event-handling</div></div><hr />


<div class="post"><div class="posttop"><div class="username">stass</div><div class="date">11th November 2013, 04:53</div></div><div class="posttext">jpderuiter<br />
http://stackoverflow.com/questions/15471983/nsis-maximize-minimize-button-event-handling<br />
And as it applies to the question you asked?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>