<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" DlgProc plugin by gfm688 - Set call back functions for dialogs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  DlgProc plugin by gfm688 - Set call back functions for dialogs NSIS Discussion" />
	
	<title> DlgProc plugin by gfm688 - Set call back functions for dialogs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  DlgProc plugin by gfm688 - Set call back functions for dialogs</div>
<hr />
<div class="pda"><a href="t-323180.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323180">DlgProc plugin by gfm688 - Set call back functions for dialogs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">16th October 2010, 20:56</div></div><div class="posttext">The member named gfm688 from the Chinese NSIS forum &quot;Dreams8&quot; writes a plugin.<br />
It allows you to add callback funtions for dialogs in your script.<br />
<br />
example code:<br />
Function .onGUIInit<br />
<br />
    GetFunctionAddress $0 onGUICallback<br />
    DlgProc::onCallback $HWNDPARENT $0<br />
<br />
FunctionEnd<br />
<br />
Function onGUICallback<br />
<br />
    ${If} $MUI.Msg = ${WM_COMMAND}<br />
        ${If} $MUI.wParam = 1034<br />
            MessageBox MB_OK|MB_ICONINFORMATION &quot;This is the example of header link.&quot;<br />
        ${EndIf}<br />
    ${EndIf}<br />
<br />
FunctionEnd<br />
It can be also used for custom control, and you can handle the page the pages and controls more easily.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">17th October 2010, 00:28</div></div><div class="posttext">sounds similar-ish to...<br />
http://nsis.sourceforge.net/WndSubclass_plug-in<br />
...?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">17th October 2010, 09:20</div></div><div class="posttext">I don't know the plugin you said before, now I just know there is such one, and the author may not know. In 2004, bluenet (http://forums.winamp.com/member.php?u=140402) compile a Chinese (Simplified) version of NSIS 2.14. It is called a classic version of NSIS, because the dialog call back funtions support feature was built-in. Here is some example script that can be compiled directly using the version, but do not need any plugin:<br />
!define IDC_ABOUT 1300<br />
!define IDC_LINK 1301<br />
!define IDM_ABOUT 1<br />
Function .onPageCallback<br />
<br />
  ${If} $MSG = ${WM_INITDIALOG}<br />
    Push $0<br />
    Push $1<br />
    Push $2<br />
    Push $3<br />
    ${GetDlgItemRect} $0 $1 $2 $3 $HWNDPARENT ${IDC_CANCEL}<br />
    IntOp $0 $2 - $0<br />
    IntOp $2 $3 - $1<br />
    ${CreateButton} &quot;关于(&amp;A)&quot; 20 $1 $0 $2 $HWNDPARENT ${IDC_ABOUT}<br />
    IntOp $3 $0 + 30<br />
    IntOp $1 $1 + 3<br />
    IntOp $2 $2 - 2<br />
    ${CreateLink} $3 $1 130 $2 $HWNDPARENT ${IDC_LINK}<br />
    ${GetSystemMenu} $0 $HWNDPARENT<br />
    ${AppendMenu} $0 ${MF_SEPARATOR} 0 0<br />
    ${AppendMenu} $0 ${MF_STRING} ${IDM_ABOUT} &quot;关于(&amp;A)&quot;<br />
    Pop $3<br />
    Pop $2<br />
    Pop $1<br />
    Pop $0<br />
  ${ElseIf} $MSG = ${WM_COMMAND}<br />
    ${If} $WPARAM = ${IDC_ABOUT}<br />
    ${MessageBox2} `${PRODUCT_NAME}$\n版权所有 (C) ${PRODUCT_PUBLISHER}.$\n$\n我的主页:$\n${PRODUCT_WEB_SITE}` `关于` ${MB_OK}|${MB_ICONINFORMATION}<br />
    ${ElseIf} $WPARAM = ${IDC_LINK}<br />
        ExecShell open `${PRODUCT_WEB_SITE}`<br />
    ${EndIf}<br />
  ${ElseIf} $MSG = ${WM_DRAWITEM}<br />
    ${DrawLink} `访问 ${PRODUCT_PUBLISHER} 的网站` ${IDC_LINK} $LPARAM<br />
  ${ElseIf} $MSG = ${WM_SYSCOMMAND}<br />
    ${If} $WPARAM = ${IDM_ABOUT}<br />
        ${MessageBox2} `${PRODUCT_NAME}$\n版权所有 (C) ${PRODUCT_PUBLISHER}.$\n$\n我的主页:$\n${PRODUCT_WEB_SITE}` `关于` ${MB_OK}|${MB_ICONINFORMATION}<br />
    ${EndIf}<br />
  ${EndIf}<br />
  <br />
FunctionEnd<br />
The script also needs the header &quot;UsefulLib.nsh&quot; (in the above attachment) written by bluenet.<br />
<br />
The idea of author is to make the dialog call back funtion be independent of NSIS 2.14.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>