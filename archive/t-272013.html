<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Findfirst/next issue, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Findfirst/next issue NSIS Discussion" />
	
	<title> Findfirst/next issue [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Findfirst/next issue</div>
<hr />
<div class="pda"><a href="t-272013.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272013">Findfirst/next issue</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fishweasel</div><div class="date">30th May 2007, 17:20</div></div><div class="posttext">Hi,<br />
<br />
I am attempting to locate 2 subfolders within a given path and output them to a text file.<br />
<br />
The problem i have is locating the second subfolder.<br />
<br />
For example : <br />
The full path is<br />
c:\top\mid\parent\child<br />
<br />
I already know the c:\top\mid but subfolders parent and child will have different names depending on configuration within a 3rd party application.<br />
<br />
Using findfirst i can locate and register the folder 'parent'. I append this to a text file with the original path and search again but this time find nothing.<br />
I have even tried to split the searches into 2 seprate functions - only the parent function returns a result.<br />
Obviously - in testing this i know for sure that folders parent and child exist.<br />
<br />
Function Parent<br />
<br />
ClearErrors<br />
FindFirst $0 $1 &quot;C:\top\mid\*.*&quot;<br />
StrCmp $1 &quot;.&quot; +2<br />
StrCpy $2 &quot;$1$\r$\n&quot;<br />
<br />
loop:<br />
FindNext $0 $1<br />
IfErrors end<br />
StrCmp $1 &quot;..&quot; loop<br />
StrCpy $2 &quot;$2$1$\r$\n&quot;<br />
goto loop<br />
<br />
end:<br />
StrCmp $2 &quot;&quot; 0 +2<br />
MessageBox MB_OK &quot;Error! No Files found&quot; IDOK +2<br />
MessageBox MB_OK &quot;Files found: $\r$\n$2&quot;<br />
<br />
FileOpen $9 C:\Path1.txt w<br />
FileWrite $9 &quot;C:\top\mid\&quot;<br />
FileWrite $9 &quot;$2&quot;<br />
FileClose $9<br />
FindClose $0<br />
<br />
FunctionEnd<br />
<br />
Function Child<br />
<br />
ClearErrors<br />
FileOpen $3 C:\Path1.txt r<br />
FileRead $3 $4<br />
Messagebox MB_OK &quot;$4&quot;<br />
FindFirst $0 $1 &quot;$4\*.*&quot;<br />
<br />
StrCmp $1 &quot;.&quot; +2<br />
StrCpy $2 &quot;$1$\r$\n&quot;<br />
<br />
loop1:<br />
FindNext $0 $1<br />
IfErrors end<br />
StrCmp $1 &quot;..&quot; loop1<br />
StrCpy $2 &quot;$2$1$\r$\n&quot;<br />
goto loop1<br />
<br />
end:<br />
StrCmp $2 &quot;&quot; 0 +2<br />
MessageBox MB_OK &quot;Error! No Files found&quot; IDOK +2<br />
MessageBox MB_OK &quot;Files found: $\r$\n$2&quot;<br />
<br />
FunctionEnd<br />
<br />
<br />
I think it must be something really simple but i just cant see what it is. Function child returns a blank result - not an error <br />
<br />
Can anyone see where i am failing ?<br />
<br />
Thanks<br />
<br />
Fish</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th May 2007, 17:24</div></div><div class="posttext">You probably forgot to remove the new lines after reading from the text file again.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>