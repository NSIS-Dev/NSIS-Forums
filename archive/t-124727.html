<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionFlags Q, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionFlags Q NSIS Discussion" />
	
	<title> SectionFlags Q [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionFlags Q</div>
<hr />
<div class="pda"><a href="t-124727.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=124727">SectionFlags Q</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">11th February 2003, 21:20</div></div><div class="posttext">Trying this code:<br />
<br />
<br />
Function BuscarArch<br />
Pop $9<br />
ifFileExists $SYSDIR\$9 NoEsta<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Can't find $9, it will be downloaded.&quot;<br />
SectionSetFlags down0 5<br />
NoEsta:<br />
FunctionEnd<br />
<br />
Function .onInit<br />
Push ${MSVBVM60}.dll<br />
Call BuscarArch<br />
FunctionEnd<br />
<br />
Section &quot;GetWEBFile&quot; down0<br />
...<br />
SectionEnd<br />
<br />
<br />
It suppost to, if the file doesn't exists, autoselect the section, <br />
but is not working, any ideas?<br />
<br />
Thanks :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th February 2003, 14:08</div></div><div class="posttext">As down0 can only be used after it is defined you should put that function after the section. It should also be ${down0} in SectionSetFlags instead of down0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">12th February 2003, 19:29</div></div><div class="posttext">Works fine... :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">12th February 2003, 19:50</div></div><div class="posttext">works fine, I know:<br />
SectionSetFlags ${var} flag<br />
<br />
where flag:<br />
1.- Enabled<br />
2.- subsection<br />
3.- subsection end<br />
4.- bold  or not<br />
5.- section is read-only <br />
6.- subsection automatically expanded<br />
<br />
is there a flag for autoselect the section?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">13th February 2003, 09:07</div></div><div class="posttext">Not exactly. The numbers you mentioned are the serial numbers of the bits in the flags integer. The right numbers are 1, 2, 4, 8, 16, 32.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">13th February 2003, 19:44</div></div><div class="posttext">yeap, that was my problem, thanks dude :thumbsup:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">21st February 2003, 05:06</div></div><div class="posttext">Is it possible to set flags for hidden sections?<br />
---<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">21st February 2003, 09:21</div></div><div class="posttext">Yes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">21st February 2003, 15:35</div></div><div class="posttext">OK, this is what my situation is:<br />
I have a hidden section (name starting with &quot;-&quot;) that I initially need to be disabled. I try to do this in the .onInit like this:<br />
<br />
	SectionGetFlags ${Hidden} $0<br />
	IntOp $0 $0 &amp; ${SECTION_OFF} ;0xFFFFFFFE<br />
	SectionSetFlags ${Hidden} $0<br />
<br />
Later, depending upon user input, I may turn it on like this:<br />
<br />
	SectionGetFlags ${Hidden} $0<br />
	IntOp $0 $0 | ${SF_SELECTED} ;1<br />
	SectionSetFlags ${Hidden} $0<br />
<br />
However, the install page seems to ignore this flag altogether and always executes the section whether it is off or not.<br />
Any suggestions?<br />
---<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">23rd February 2003, 05:18</div></div><div class="posttext">*bump*<br />
<br />
Any suggestions?<br />
---<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">23rd February 2003, 16:45</div></div><div class="posttext">Download the latest CVS and read the new one-section.nsi<br />
<br />
you now may include in the script a macro like this:<br />
<br />
<br />
!insertmacro UnselectSection ${Hidden}<br />
!insertmacro SelectSection ${Hidden}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd February 2003, 16:49</div></div><div class="posttext">If you have installation types (InstType) then when you get to the component selection page the sections, including hidden sections,  will be selected according to the installation type. To get around this you'll have to set the selected state of the hidden section in every call to .onSelChange.<br />
<br />
If this is not the case then ensure you are using the latest version of NSIS, and if it doesn't work with that either attach the script.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>