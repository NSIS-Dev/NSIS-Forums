<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with pluggins, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with pluggins NSIS Discussion" />
	
	<title> Problem with pluggins [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with pluggins</div>
<hr />
<div class="pda"><a href="t-242588.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242588">Problem with pluggins</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">4th April 2006, 18:36</div></div><div class="posttext">Hello Everybody.<br />
<br />
I have a problem with my installer I try to use two pluggins but they use the same variable $1 How can I change this variable?<br />
<br />
I need to use this pluggins for my installer<br />
<br />
<br />
FontName.nsh<br />
FileFunc.nsh<br />
WriteEnvStr.nsh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th April 2006, 19:26</div></div><div class="posttext">In what way are they using $1? Do they use it internally, or by how you are using them?<br />
Some sample code would help us identify the problem and produce a solution.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">4th April 2006, 21:01</div></div><div class="posttext">Hello I send you the code of my installer</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">4th April 2006, 21:08</div></div><div class="posttext">Sorry a forget the file. But I send you.<br />
<br />
The file contains my intaller and the pluggins that I used</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th April 2006, 22:21</div></div><div class="posttext">I still don't understand what the problem is. You aren't even using $1 in any of your own code and the BgImage plugin doesn't use it.<br />
<br />
If you want to use $1 in your script and find that something is changing its value, just use a different variable or perhaps create your own with the Var instruction.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">5th April 2006, 19:11</div></div><div class="posttext">Thanks a lot I sorted out the problem with my installer. but I have another problem, when I try to create a Shortcut  with this instruction <br />
<br />
CreateShortCut &quot;$DESKTOP\SIG-TC ZMVM.lnk&quot; &quot;$BLA&quot; &quot;&quot;<br />
<br />
The variable $BLA contains the value <br />
<br />
&quot;C:\Archivos de programa\TransCAD\tcw.exe&quot; -q -a C:\SIG-TC\compilacion\gis-tc -ai SIG-TC -n &quot;SIG-Transporte de carga ZMVM&quot;<br />
<br />
But when the installer creates the shortcut on the DESKTOP, it has this value:<br />
<br />
&quot;C:\&quot;C:\Archivos de programa\TransCAD\tcw.exe&quot; -q -a C:\SIG-TC\compilacion\gis-tc -ai SIG-TC -n &quot;SIG-Transporte de carga ZMVM&quot; &quot;<br />
<br />
How I can clear value &quot;C:\ at the begining of the string and &quot; in the last part?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">6th April 2006, 03:41</div></div><div class="posttext">Try using ' around the value.'&quot;C:\Archivos de programa\TransCAD\tcw.exe&quot; -q -a C:\SIG-TC\compilacion\gis-tc -ai SIG-TC -n &quot;SIG-Transporte de carga ZMVM&quot;'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th April 2006, 09:09</div></div><div class="posttext">CreateShortCut requires the parameters to be separate from the target path:<br />
<br />
CreateShortCut<br />
link.lnk target.file [parameters [icon.file [icon_index_number [start_options [keyboard_shortcut [description]]]]]]<br />
<br />
Where does your target path come from exactly?<br />
Is it a constant value set at compile time or a path read from somewhere at run time?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">6th April 2006, 19:02</div></div><div class="posttext">Hello<br />
<br />
I send you a basic example, it only creates a Shortcut on the desktop. <br />
<br />
In the code I read from the registry, this value is the target path that I want in the shortcut, but I don't know why in the shorcut the value appears like this:<br />
<br />
&quot;C:\&quot;C:\Archivos de programa\Microsoft Office\OFFICE11\WINWORD.EXE&quot; \n \dde&quot;<br />
<br />
And the correct path is:<br />
<br />
&quot;C:\Archivos de programa\Microsoft Office\OFFICE11\WINWORD.EXE&quot; \n \dde<br />
<br />
<br />
Thanks a lot for help me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th April 2006, 19:20</div></div><div class="posttext">Well like I've already said, CreateShortCut must be like the following:<br />
<br />
CreateShortCut &quot;icon file.lnk&quot; &quot;target file.exe&quot; &quot;parameters&quot;<br />
<br />
Use this function to get the path in the quotes:<br />
http://nsis.sourceforge.net/GetInQuotes:_Get_string_from_between_quotes<br />
If you need the parameters as well, I can probably update the function to return the rest of the string not in quotes (in this case it'd be the parameters).<br />
<br />
ReadRegStr $R0 HKLM SOFTWARE\Classes\Applications\WINWORD.EXE\shell\edit\command &quot;&quot;<br />
<br />
Push $R0<br />
 Call GetInQuotes<br />
Pop $R0<br />
<br />
CreateShortCut &quot;$DESKTOP\TEST.lnk&quot; $R0<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">6th April 2006, 21:46</div></div><div class="posttext">Hello Again  Thaks a lot  for help me.<br />
<br />
I did all that you said me. but the target path now is:<br />
<br />
 &quot;C:\Archivos de programa\Microsoft Office\OFFICE11\WINWORD.EXE&quot;  <br />
<br />
and the correct is <br />
<br />
&quot;C:\Archivos de programa\Microsoft Office\OFFICE11\WINWORD.EXE&quot; \n \dde<br />
<br />
How can I obtain the rest of the string not in quotes?<br />
<br />
I send you again my code<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">6th April 2006, 22:01</div></div><div class="posttext">Code of TEST</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">7th April 2006, 02:23</div></div><div class="posttext">Assuming that the path part of the string you read from registry is always in quotes...<br />
!include &quot;StrFunc.nsh&quot;<br />
${StrStrAdv}<br />
<br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
Section &quot;&quot;<br />
<br />
ReadRegStr $0 HKLM SOFTWARE\Classes\Applications\WINWORD.EXE\shell\edit\command &quot;&quot;<br />
${StrStrAdv} $R0 $0 &quot;$\&quot; &quot; &gt; &lt; 1 0 0 #get path<br />
${StrStrAdv} $R1 $0 &quot;$\&quot; &quot; &gt; &gt; 0 0 0 #get the rest<br />
StrCpy $R0 $R0 -1 #trim ending space character from path<br />
CreateShortCut &quot;$DESKTOP\TEST.lnk&quot; $R0 $R1<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RaulFlores</div><div class="date">7th April 2006, 04:48</div></div><div class="posttext">Thanks for help me. My installer is OK</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>