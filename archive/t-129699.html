<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstall check, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstall check NSIS Discussion" />
	
	<title> Uninstall check [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstall check</div>
<hr />
<div class="pda"><a href="t-129699.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=129699">Uninstall check</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DVDK</div><div class="date">25th March 2003, 12:36</div></div><div class="posttext">I have made a modern installer, and now have a question about the uninstall section.<br />
<br />
Lets say that my installer includes 3 different sections. The user only installs one of the 3 sections, because he has the needed files that are located in the other 2 sections.<br />
<br />
When the user wants to uninstall, then all sections are being uninstalled, but I only want the section he installed with my installer to be uninstalled. How do I do that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th March 2003, 13:36</div></div><div class="posttext">Use InstallOptions to create a custom page.<br />
<br />
A components page for the uninstaller is on the TODO list.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th March 2003, 21:18</div></div><div class="posttext">Or save in the registry, an INI file or in a regular file what sections have been selected. To do so just write a certain value at the end of each section and read it in the uninstaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">25th March 2003, 21:23</div></div><div class="posttext">I'll have the same thing, but<br />
When I called the uninstaller, it<br />
delete all the files... installed and NOT installed<br />
and it doesn't return in error ... <br />
so maybe you want like the old fashion way...<br />
Delete all the files ... installed and not installed <br />
<br />
Just my opinion :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DVDK</div><div class="date">25th March 2003, 22:40</div></div><div class="posttext">Yup, also having big trouble still, but also very hard to understand when english is second languges fro me.<br />
<br />
But I have maneced to solve the problem meanwhile with som CMD files which are being executed upon uninstall instead. In that way I can control it, but far from optimal.<br />
<br />
Its very easy to understand when you read faqs, but the problem sneaks in when all those foreign words comes along. :igor:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2003, 13:39</div></div><div class="posttext">I am sorry but I don't understand how CMD files help you in uninstalling more then one component... What exactly are you trying to do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DVDK</div><div class="date">26th March 2003, 15:06</div></div><div class="posttext">Its because I have made some CMD files for each component, which are being executed after each other upon uninstall.<br />
<br />
I want the uninstall section to uninstall the things that where installed by my installer. Lets say that my installer includes:<br />
<br />
something.txt<br />
something.exe<br />
someotherthing.exe<br />
<br />
Lets say that the user already has someotherthing.exe. He will offcause not install this component again since there is no reason to. But when he execute the uninstaller, will the someotherthing.exe also be uninstalled and I do not want this, since it was not included in the installation.<br />
<br />
So the thing I want is that my uninstall section only will uninstall the things the user has included. But I dont know how to make this custom page, since the words are very hard to understand. :igor: Do someone have an example of this, since this will make it easier for me to understand.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th March 2003, 15:17</div></div><div class="posttext">You don't need a custom page for this. All you need to do is remember what the user have installed. You can do this by writing the installed sections into an INI file, the registry or a regular file. Lets take the INI file for example. In the installer you'll have:<br />
<br />
Section 1<br />
  #install section 1 stuff<br />
  WriteIniStr $INSTDIR\uninstall.ini comps section1 yes<br />
SectionEnd<br />
<br />
Section 2<br />
  #install section 2 stuff<br />
  WriteIniStr $INSTDIR\uninstall.ini comps section2 yes<br />
SectionEnd<br />
<br />
In the uninstaller:<br />
<br />
Section uninstall<br />
  ReadIniStr $0 $INSTDIR\uninstall.ini comps section1<br />
  StrCmp $0 &quot;yes&quot; 0 dontUninstallSection1<br />
    # uninstall section1<br />
  dontUninstallSection1:<br />
<br />
  ReadIniStr $0 $INSTDIR\uninstall.ini comps section2<br />
  StrCmp $0 &quot;yes&quot; 0 dontUninstallSection2<br />
    # uninstall section2<br />
  dontUninstallSection2:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DVDK</div><div class="date">26th March 2003, 15:41</div></div><div class="posttext">Thanks alot. Just what I was looking for. Real easy actually.  :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kukymann</div><div class="date">30th July 2003, 11:42</div></div><div class="posttext">Hi, my question is little different.<br />
A user installed section1, section2 and section3. But, what if  he wants uninstall only section1 and section3. I thought about Custom page in Uninstall procces, where he selects what section he wants uninstall. It's possible? Or i must wait for A components page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">30th July 2003, 12:22</div></div><div class="posttext">kukymann, the NSIS Archive has something that seems to do what you want: <br />
<br />
&quot;This example demonstrates how to implement Add/Remove functionality in the installer. It operates similar to MS Office installer for example. Unlike conventional NSIS installer it does not only install (upgrade) selected components but also removes unselected components.&quot;<br />
<br />
http://nsis.sourceforge.net/archive/viewpage.php?pageid=298<br />
<br />
An example is included so you can see how the idea works.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kukymann</div><div class="date">30th July 2003, 12:40</div></div><div class="posttext">thx, it's useful :o]</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>