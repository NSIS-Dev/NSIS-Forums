<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Replace \ with \\, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Replace \ with \\ NSIS Discussion" />
	
	<title> Replace \ with \\ [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Replace \ with \\</div>
<hr />
<div class="pda"><a href="t-318456.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318456">Replace \ with \\</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">hawkmaster</div><div class="date">16th April 2010, 11:10</div></div><div class="posttext">Hello <br />
<br />
I want to replace a placeholder in a file with the InstDir .<br />
But the path should be with double backslashes.<br />
e.g.<br />
C:\\Program<br />
<br />
I tried this:<br />
<br />
Push &quot;$INSTDIR&quot; ;original string<br />
Push &quot;\&quot; ;needs to be replaced<br />
Push &quot;\\&quot; ;will replace wrong characters<br />
Call StrReplace<br />
Pop $0<br />
<br />
Then MessageBox MB_OK $0  shows a lot of \\\\\\\\\\\\\\\\\\\\\\\\\\<br />
<br />
what did I wrong or how can I do this?<br />
regards<br />
hawk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">16th April 2010, 11:38</div></div><div class="posttext">I guess when the first backslash is replaced, and the next character is checked, it'll see a backslash again, causing a infinite loop.<br />
You could first replace the backslashes with another character, like a hash, and then replace that character with a double backslash.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">hawkmaster</div><div class="date">16th April 2010, 12:05</div></div><div class="posttext">Hello,<br />
thanks a lot for your help.<br />
<br />
I guess when the first backslash is replaced, and the next character is checked, it'll see a backslash again, causing a infinite loop.<br />
You could first replace the backslashes with another character, like a hash, and then replace that character with a double backslash.<br />
<br />
Yes, good idea.<br />
I did it in this way:<br />
Push &quot;$INSTDIR&quot; ;original string<br />
Push &quot;\&quot; ;needs to be replaced<br />
Push &quot;#&quot; ;will replace wrong characters<br />
Call StrReplace<br />
Pop $0<br />
<br />
Push $0 ;original string<br />
Push &quot;#&quot; ;needs to be replaced<br />
Push &quot;\\&quot; ;will replace wrong characters<br />
Call StrReplace<br />
Pop $0<br />
<br />
It works now. No idea if you can do this easier.<br />
<br />
regards<br />
hawk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">16th April 2010, 12:13</div></div><div class="posttext">No idea if you can do this easier.<br />
Of course you can, but you'd need to edit the StrReplace function (or write your own, maybe as a macro to get rid of the push/pops).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">19th April 2010, 05:02</div></div><div class="posttext">!include &quot;MUI2.nsh&quot;<br />
!include &quot;WordFunc.nsh&quot;<br />
<br />
Name &quot;PROGRAM&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
InstallDir &quot;$TEMP&quot;<br />
<br />
ShowInstDetails show<br />
!insertmacro WordReplace<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Section installl<br />
<br />
 StrCpy $0 &quot;C:\\Program Files\\Internet Explorer\\iexplore.exe&quot;<br />
 DetailPrint &quot;original: $0&quot;<br />
 ${WordReplace} $0 &quot;\\&quot; &quot;\&quot; &quot;+&quot; $0<br />
 DetailPrint &quot;replaced: $0&quot;<br />
<br />
Sectionend</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>