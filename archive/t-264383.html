<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Need help this is confusing, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Need help this is confusing NSIS Discussion" />
	
	<title> Need help this is confusing [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Need help this is confusing</div>
<hr />
<div class="pda"><a href="t-264383.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264383">Need help this is confusing</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">eyeinthesky43</div><div class="date">26th January 2007, 03:06</div></div><div class="posttext">Alright basically what I am trying to do is make a small updater that will download an ini file from the web and compare the version number in the ini with the ini file that is on the system and if the version number is newer then it will download the update. This is what I have:<br />
<br />
NSISdl::download &quot;http://www.site.com/new.ini&quot; &quot;C:\new.ini&quot;<br />
<br />
ReadINIStr $0 &quot;C:\old.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
ReadINIStr $1 &quot;C:\new.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
 IntCmp $0 $1 lessthan$1 morethan$0<br />
lessthan$1:<br />
  DetailPrint &quot;No Update&quot;<br />
  Goto done<br />
morethan$0:<br />
  DetailPrint &quot;Update&quot;<br />
NSISdl::download &quot;http://www.site.com/Update.zip&quot; &quot;C:\Update.zip&quot;<br />
MessageBox MB_OK|MB_ICONINFORMATION &quot;Downloaded file update!&quot;<br />
done:<br />
<br />
The only part that seems to work is the first part that downloads new.ini, I'm a noob to NSIS so any help on this would be great.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 05:25</div></div><div class="posttext">See documentation, 4.9.4.13 IntCmp<br />
<br />
val1 val2 jump_if_equal [jump_if_val1_less] [jump_if_val1_more]<br />
<br />
e.g.<br />
intCmp $1 $0 no_download no_download download</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eyeinthesky43</div><div class="date">26th January 2007, 06:49</div></div><div class="posttext">Ugh ok I have been trying hard to figure this out but can't seem to get it, I read the documentation and changed the code which now it looks like it makes more sense and should work but sadly still not working like it should.<br />
<br />
NSISdl::download &quot;http://www.site.com/new.ini&quot; &quot;C:\new.ini&quot;<br />
<br />
ReadINIStr $0 &quot;C:\old.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
ReadINIStr $1 &quot;C:\new.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
 IntCmp $0 $1 is$0 lessthan$0 morethan$0<br />
is$0:<br />
  DetailPrint &quot;No Updates&quot;<br />
  Goto done<br />
lessthan$0:<br />
  DetailPrint &quot;No Updates&quot;<br />
  Goto done<br />
morethan$0:<br />
  DetailPrint &quot;Updates&quot;<br />
NSISdl::download &quot;http://www.site.com/Update.zip&quot; &quot;C:\Update.zip&quot;<br />
MessageBox MB_OK|MB_ICONINFORMATION &quot;Downloaded file update!&quot;<br />
done:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 07:17</div></div><div class="posttext">val1 val2 jump_if_equal [jump_if_val1_less] [jump_if_val1_more]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 07:19</div></div><div class="posttext">EDIT: double post :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">26th January 2007, 07:21</div></div><div class="posttext">1. Good idea is to get result code from stack (Pop) after every download - see NSISdl examples.<br />
2. Use labels without $<br />
3. Use MessageBox for debugging-tracing.MessageBox MB_OK &quot;old=$0 new=$1&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eyeinthesky43</div><div class="date">26th January 2007, 07:36</div></div><div class="posttext">Ok so it's now setup just like you posted yet it's not downloading the update.zip:<br />
<br />
NSISdl::download &quot;http://www.site.com/new.ini&quot; &quot;C:\new.ini&quot;<br />
<br />
ReadINIStr $0 &quot;C:\old.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
ReadINIStr $1 &quot;C:\new.ini&quot; &quot;File Version&quot; &quot;Version&quot;<br />
 IntCmp $0 $1 jump_if_equal jump_if_$0_less jump_if_$0_more<br />
jump_if_equal:<br />
  DetailPrint &quot;No Updates&quot;<br />
  Goto done<br />
jump_if_$0_less:<br />
  DetailPrint &quot;No Updates&quot;<br />
  Goto done<br />
jump_if_$0_more:<br />
  DetailPrint &quot;Updates&quot;<br />
NSISdl::download &quot;http://www.site.com/Update.zip&quot; &quot;C:\Update.zip&quot;<br />
MessageBox MB_OK|MB_ICONINFORMATION &quot;Downloaded file update!&quot;<br />
done:<br />
<br />
Could it be I have my ini files setup wrong and it's not reading them correctly? I mean I am pretty sure they are set up right:<br />
<br />
new.ini text:<br />
[File Version]<br />
Version=1.1<br />
<br />
old.ini text:<br />
[File Version]<br />
Version=1.0<br />
<br />
Sorry for being a complete noob at this.....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eyeinthesky43</div><div class="date">26th January 2007, 07:38</div></div><div class="posttext">Thanks Takhir, I will try it and see if I have some luck.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">26th January 2007, 07:46</div></div><div class="posttext">versions are not integers<br />
you should try E.3.16 VersionCompare</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eyeinthesky43</div><div class="date">26th January 2007, 11:59</div></div><div class="posttext">Thank you so much for helping it finally works. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rein Masamuri</div><div class="date">13th September 2009, 03:19</div></div><div class="posttext">Will make a new thread &gt;.&lt;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>