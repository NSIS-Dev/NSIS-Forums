<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" langdll and oninit, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  langdll and oninit NSIS Discussion" />
	
	<title> langdll and oninit [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  langdll and oninit</div>
<hr />
<div class="pda"><a href="t-215463.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215463">langdll and oninit</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Satsuki</div><div class="date">9th May 2005, 11:22</div></div><div class="posttext">hello,<br />
<br />
i use nsis for some time but i've spotted a bug or maybe i misunderstood myself.<br />
<br />
i want to do a multi-langual installer.<br />
<br />
hre's a part of my script:<br />
...<br />
!insertmacro MUI_LANGUAGE &quot;French&quot;<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_RESERVEFILE_LANGDLL<br />
!include &quot;nsiscripts\langs\langfiles\fre.nsh&quot;<br />
!include &quot;nsiscripts\langs\langfiles\eng.nsh&quot;<br />
...<br />
 function .oninit<br />
!insertmacro MUI_LANGDLL_DISPLAY<br />
....<br />
but in the function oninit i do some system verif, like directX , windows version.... and messagebox the user if there is some error or bad version.<br />
these messagebox remain in the french language all the time.<br />
once the oninit function over, the GUI and all message are well translated in the selected language, but not in the oninit function.<br />
<br />
so bug or bad nsis utilisation from me ?<br />
<br />
i could do a StrCmp $LANGUAGE witch works in oninit but i've a dozen of sentence in oninit and the installer will add more and more language (at time there's already 5 language) so it would be realy uncool to do dozen and dozen of strcomp + goto and will complex the traduction a lot.<br />
<br />
any possible solution to use the langstring in oninit ?<br />
<br />
thanks a lot.<br />
++</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">9th May 2005, 11:34</div></div><div class="posttext">i came across this some time ago. in my script i simply called a custom function right after oninit and before my installer sections.<br />
Page custom PostInit<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
Section bla<br />
; some code<br />
SectionEnd<br />
<br />
Function .onInit<br />
; LangDLL code<br />
FunctionEnd<br />
<br />
Function PostInit<br />
; some code<br />
FunctionEnd<br />
i used the MUI! if you don't, you have to replace the insertmacro commands with the fitting page commands.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Satsuki</div><div class="date">9th May 2005, 13:15</div></div><div class="posttext">Thanks a lot !!!<br />
it's realy works great.<br />
i've send 1 hour yesterdays on that probleme and never thought of this kind of solution ^^<br />
<br />
++</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th May 2005, 19:26</div></div><div class="posttext">You can also use the .onGUIInit function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">guilhem.martin</div><div class="date">20th May 2005, 14:10</div></div><div class="posttext">Hello all,<br />
<br />
could someone explain me more in details the code to produce to reach the solution:<br />
What code do you put in .onInit and PostInit (and where do you call PostInit)<br />
<br />
<br />
The problem I encounter is similar to the one described by Satsuki I guess: I still have some French messages when checking installation and instead of the first button &quot;cancel&quot; I get &quot;annuler&quot;.<br />
<br />
Thanks in advance,<br />
<br />
Guilhem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">20th May 2005, 14:35</div></div><div class="posttext">Search for forum is rulez-z.<br />
Code example here (http://forums.winamp.com/showthread.php?postid=1641306#post1641306) is.<br />
Discussion (http://forums.winamp.com/showthread.php?threadid=147907).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">guilhem.martin</div><div class="date">20th May 2005, 15:55</div></div><div class="posttext">Hi glory_man,<br />
<br />
thank you for your answer. Yet, I'm not exactly in that case. I mean, the text which I would like to be translated is not set by myself in the .nsi file. It appears before the dialog in which you select the language (I attach you the screenshot). Note that generally this window won't have the time to display when launched locally (I have to launch it from a remote drive to get a chance to see it).<br />
As you can see, the text is half French half English.<br />
<br />
Have you got an idea of what can cause that?<br />
<br />
Thanks,<br />
<br />
Guilhem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">20th May 2005, 16:22</div></div><div class="posttext">Try to read here (http://forums.winamp.com/showthread.php?s=&amp;threadid=151947&amp;highlight=wait+while+setup).<br />
Hope this helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">guilhem.martin</div><div class="date">24th May 2005, 09:58</div></div><div class="posttext">Hi glory_man,<br />
<br />
thank you for your answer.<br />
Eventually, I found a solution for my problem: I installed the English version of NSIS, and then the default language for this &quot;verifiying install(...)&quot; message is English whatever language is set on the machine which installs it.<br />
<br />
Regards,<br />
<br />
Guilhem.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>