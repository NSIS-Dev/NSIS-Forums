<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" $PROGRAMFILES Default Won't Change, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  $PROGRAMFILES Default Won't Change NSIS Discussion" />
	
	<title> $PROGRAMFILES Default Won't Change [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  $PROGRAMFILES Default Won't Change</div>
<hr />
<div class="pda"><a href="t-288906.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=288906">$PROGRAMFILES Default Won't Change</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">twosouth</div><div class="date">22nd March 2008, 23:09</div></div><div class="posttext">Hi All,<br />
<br />
I am new with this tool and I've created an install setup.exe that works perfectly when I install to the default location of $PROGRAMFILES\MyAPP<br />
<br />
However, during an install, if I change the install-to dirctory to something else, it installs to $PROGRAMFILES anyway and creates a shortcut in the target directory of my choosing.  Perhaps $PROGRAMFILES is the wrong choice but in reviewing the docs, I didn't see a better option.<br />
<br />
Thanks,<br />
Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd March 2008, 23:59</div></div><div class="posttext">Is there the instruction SetOutPath &quot;$INSTDIR&quot; on the top of your section?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">twosouth</div><div class="date">23rd March 2008, 00:04</div></div><div class="posttext">Here is what I see.  <br />
<br />
Section &quot;MainSection&quot; SEC01<br />
  SetOutPath &quot;$PROGRAMFILES\sqlsnap\apache-tomcat-6.0.16\bin&quot;<br />
  SetOverwrite try<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\bootstrap.jar&quot;<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\catalina-tasks.xml&quot;<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\catalina.bat&quot;<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\catalina.sh&quot;<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\commons-daemon.jar&quot; ....<br />
<br />
...<br />
<br />
Thanks for your help!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">23rd March 2008, 00:07</div></div><div class="posttext">SetOutPath &quot;$PROGRAMFILES\sqlsnap\apache-tomcat-6.0.16\bin&quot; is wrong.<br />
It has to be SetOutPath &quot;$INSTDIR&quot; otherwise you install to &quot;$PROGRAMFILES\sqlsnap\apache-tomcat-6.0.16\bin&quot; no matter what users selected in directory page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">twosouth</div><div class="date">23rd March 2008, 00:17</div></div><div class="posttext">Thanks!  I appreciate your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">twosouth</div><div class="date">23rd March 2008, 01:02</div></div><div class="posttext">OK, that worked. now it installs in the correct location if I choose not to take the default...however, now the default location is all goofed up when the Choose Install Location panel shows up.  How can I force it to $PROGRAMFILES\myapp every single time.  Here is a snippet of my code:<br />
<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\sqlsnap&quot;<br />
InstallDirRegKey HKLM &quot;${PRODUCT_DIR_REGKEY}&quot; &quot;&quot;<br />
ShowInstDetails show<br />
ShowUnInstDetails show<br />
<br />
Section &quot;MainSection&quot; SEC01<br />
  SetOutPath &quot;$INSTDIR\snapsql&quot;<br />
  SetOverwrite try<br />
  File &quot;..\SQLsnap_Install_Clean\apache-tomcat-6.0.16\bin\bootstrap.jar&quot;<br />
....<br />
<br />
Also, is there away to execute a file after everything is installed in the target directory?  I'd rather not allow the user to check/un-check the box to Run the app.  I'd rather control that it gets run within the install itself.  In this case its a .bat file.<br />
<br />
Thanks!@!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">23rd March 2008, 02:01</div></div><div class="posttext">InstallDir &quot;$PROGRAMFILES\sqlsnap&quot;<br />
......<br />
......<br />
......<br />
 SetOutPath &quot;$INSTDIR&quot;<br />
<br />
Remove the directory page so users won't have the choice to select/change the target path.<br />
<br />
You can execute a bat file within your section with included plugin nsExec. Or in the function .onInstSuccess if you prefer to launch it at the very end of the installation.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>