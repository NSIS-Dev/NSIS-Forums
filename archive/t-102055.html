<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Question and Suggestion, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Question and Suggestion NSIS Discussion" />
	
	<title> Question and Suggestion [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Question and Suggestion</div>
<hr />
<div class="pda"><a href="t-102055.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=102055">Question and Suggestion</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">srelysian</div><div class="date">26th August 2002, 19:28</div></div><div class="posttext">I will cut right to the chase here, I am sure many of you have played games based on the unreal engine such as Unreal, Unreal Tournament, Rune, Deus Ex, etc. My question is, is it possible to do blind INI writes in NSIS somehow, or could it be done in another way?  What I mean by this is, sometimes INI's in Deus EX (which is what I need this for), use multiple entry names under the same section, IE:<br />
<br />
ServerActors=IpDrv.UdpBeacon<br />
ServerActors=IpServer.UdpServerQuery<br />
ServerActors=IpServer.UdpServerUplink<br />
<br />
I want to be able to add one, without it over-writing the first entry it finds. And being able to delete the entire string with an un-install would be great too. Of course that would be my suggestion part of this post. Add a few extra cmds such as:<br />
<br />
BlindINIWrite<br />
BlindINIReplace<br />
BlindINIDelete<br />
<br />
Write would be for writing the sting at the end regardless of an existing entry, Replace would search for a specific value of an entry say, ServerActors=IpDrv.UdpBeacon and replace with ServerActors=IpDrv.UdpBeacon2 and Delete would remove ServerActors=IpDrv.UdpBeacon completely. I'd add these myself but I am a &quot;script kiddie&quot; as it were, I can script in a few languages, know a tiny bit of vc++ (still learning), so I wouldnt know where to begin to add such things.<br />
<br />
Sorry Post is so long, Any help here would be great since I can't stand the Unreals &quot;UMOD&quot; engine (being a pain in the ass to make installers for plus I prefer executables).<br />
<br />
Many Thanks in Advance,<br />
Aaron</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th August 2002, 19:33</div></div><div class="posttext">You should write an extension DLL for NSIS (read the docs for more info). I don't think that many people need these functions, so they won't be added to NSIS because it adds extra overhead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">26th August 2002, 19:33</div></div><div class="posttext">(someone correct me if I'm wrong) but AFAIK the Windows API INI functions don't support blind writes, in fact the INI file format doesn't allow multiple keys with the same name in a single section. So really the problem lies with programs like UT that abuse the INI file format.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th August 2002, 19:33</div></div><div class="posttext">You can always just edit the file as if it was a regular file using FileOpen, FileRead, FileWrite and FileClose. Have a look here (http://forums.winamp.com/showthread.php?s=&amp;threadid=95719&amp;highlight=fileopen). It shows you how to replace a line in a text file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th August 2002, 19:35</div></div><div class="posttext">Originally posted by Sunjammer <br />
(someone correct me if I'm wrong) but AFAIK the Windows API INI functions don't support blind writes, in fact the INI file format doesn't allow multiple keys with the same name in a single section. So really the problem lies with programs like UT that abuse the INI file format. <br />
You're right about that Sunjammer, it's not the correct INI format, so it's not possible to use Win32 API. That's why it requires quite some extra code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th August 2002, 19:38</div></div><div class="posttext">Originally posted by kichik <br />
You can always just edit the file as if it was a regular file using FileOpen, FileRead, FileWrite and FileClose. Have a look here (http://forums.winamp.com/showthread.php?s=&amp;threadid=95719&amp;highlight=fileopen). It shows you how to replace a line in a text file. <br />
That's a good solution. Maybe a DLL will be faster, but I don't think srelysian needs to write that many values.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">srelysian</div><div class="date">27th August 2002, 00:01</div></div><div class="posttext">Originally posted by kichik <br />
You can always just edit the file as if it was a regular file using FileOpen, FileRead, FileWrite and FileClose. Have a look here (http://forums.winamp.com/showthread.php?s=&amp;threadid=95719&amp;highlight=fileopen). It shows you how to replace a line in a text file. <br />
<br />
That will actually help quite a bit, I was aware btw, that Unreals engine was abusing INI formats, I just thought it might be a nice addition to NSIS just because alot of people play games based on the engine, might be nice to have an install engine that will work for it. Other than UMOD that is, but eh, if its that much trouble? A quick work around is just as good, so I will try to use the file open stuff. Thanks all :)<br />
<br />
PS. I suppose I could write a DLL, I've been slowly learning to work with them in VC++ so maybe it will be in my list of things to accomplish.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>