<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Use NSH file for custom page code, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Use NSH file for custom page code NSIS Discussion" />
	
	<title> Use NSH file for custom page code [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Use NSH file for custom page code</div>
<hr />
<div class="pda"><a href="t-320957.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320957">Use NSH file for custom page code</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Roger_wgnr</div><div class="date">20th July 2010, 00:04</div></div><div class="posttext">Can it be done or am I just barking up the wrong tree here.<br />
<br />
I have an NSIS installer (that works) but it has ablut 50 custom pages with both enter and leave functions. In addition many of the pages have several other functions and macros that are used to manipulate the entry data. Since the Installer is now over 20,000 lines I wanted to make things a bit morre manageable by moving code for the custom page functions to NSH files for each page. For example I have a custom page<br />
<br />
Page custom Whatever WhateverLeave<br />
I wanted to move these functions to a Whatever.nsh and then just have <br />
!Include &quot;Whatever.nsh&quot; at the start of my script (After I defined the variables used)<br />
But I get an error in the MUI_Header_Text of the function. :eek:<br />
<br />
Is it a matter of the placement of the Include and if so What is the order in which the Define, Include, Var, Page, ReserveFile should be (I have all of these prior to any section code)<br />
<br />
Any help with this would be appriciated as I am somewhat inexperienced ith NSIS but am learning fast.:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">20th July 2010, 00:46</div></div><div class="posttext">well if you're going to use includes at all - and we do, too.. every page is a separate include - you should at least use .nsi rather than .nsh.  It may be semantic, but .nsh is intended for Headers, and .nsi for actual installer scripts.  I suppose neither technically fit the bill, but .nsi seems more appropriate - we use a main.nsi that has all the main installer code and page.*.nsi to hold the pages with their locally-required defines, variables (typically nsDialogs-related), macros, etc.<br />
<br />
That said - if you put the !include in -exactly- the same spot where the code used to be before, you should be fine.<br />
<br />
Odds are that your MUI_Header_Text define -is- missing *something* that you had defined earlier before, and is now lost in context after putting all of your includes near the top.<br />
<br />
So the order of placement really depends on what you had originally - try keeping that structure at first and make sure that's still working.. you can distill things later if it is.<br />
<br />
<br />
For scripting itself there's not much of a 'standard' in how people order things.  The only important ones that I can think of right now is that defines, variables and macros you use -must- be defined -before- you use them.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>