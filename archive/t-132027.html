<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" turn off modern Select-StartMenu-Folder UI, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  turn off modern Select-StartMenu-Folder UI NSIS Discussion" />
	
	<title> turn off modern Select-StartMenu-Folder UI [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  turn off modern Select-StartMenu-Folder UI</div>
<hr />
<div class="pda"><a href="t-132027.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=132027">turn off modern Select-StartMenu-Folder UI</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xRMB!</div><div class="date">17th April 2003, 00:02</div></div><div class="posttext">Hi, I try to setup a (Modern UI) nsi script for my tool :), and I have a problem...<br />
<br />
The user has the option (a section) to enable/disable startmenu icon creation, but I dont know how I can disable the MUI_STARTMENUPAGE, once I defined it...<br />
<br />
What I do now is: at the beginning of the Script I !define MUI_STARTMENUPAGE, but now I dont know how to turn it off if the startmenu-icnos section was disabled, meaning dont create icons, so no need for asking for the folder...<br />
<br />
does anybody understand what I wanna do, and has an idea?<br />
<br />
(I hope is no dupe post, i really search a while...)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">17th April 2003, 09:15</div></div><div class="posttext">!define MUI_CUSTOMFUNCTION_STARTMENU_PRE Abort<br />
<br />
Function Abort<br />
  SectionGetFlags ${SectionDefineName} $R0<br />
  StrCmp $R0 1 +2 0<br />
    Abort<br />
FunctionEnd<br />
<br />
Change the &quot;SectionDefineName&quot; to the component name (like SecStartMenuIcons)<br />
<br />
You can use the same function to other NSIS pages (welcome, licence ...) in pre function (i.e. !define MUI_CUSTOMFUNCTION_DIRECTORY_PRE Abort), to make this page only appears when the Start Menu Icons Section are selected in components page.<br />
<br />
The one problem is: the Install Button, when the Start Menu Page is before the InstFiles Page, if you skip, the Install Button in the page that come before the Start Menu Page show &quot;Next &gt;&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th April 2003, 11:44</div></div><div class="posttext">You forgot IntOp deguix:<br />
<br />
!define MUI_CUSTOMFUNCTION_STARTMENU_PRE Abort<br />
!include Sections.nsh<br />
<br />
Function Abort<br />
  SectionGetFlags ${SectionDefineName} $R0<br />
  IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
  StrCmp $R0 ${SF_SELECTED} +2 0<br />
    Abort<br />
FunctionEnd<br />
<br />
Also make sure you put this function after the definition of the section so it can recognize the define.<br />
<br />
BTW, there is a check box at the bottom of the start menu for disabling the creation of start menu items, why is that not enough?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">18th April 2003, 12:26</div></div><div class="posttext">Because he put Start Menu Icons section in Components Page to create the icons, so for what to show the page? He choosed this way to make his installator.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">18th April 2003, 14:12</div></div><div class="posttext">Putting related content on multiple pages is confusing for the user.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>