<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" $PLUGINSDIR stays behind, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  $PLUGINSDIR stays behind NSIS Discussion" />
	
	<title> $PLUGINSDIR stays behind [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  $PLUGINSDIR stays behind</div>
<hr />
<div class="pda"><a href="t-229965.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=229965">$PLUGINSDIR stays behind</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">scully13</div><div class="date">2nd November 2005, 17:16</div></div><div class="posttext">I noticed while working on my installer that the $PLUGINSDIR stays around after I exit.  The folder is empty and if I delete it manually it goes away immediately.  I then noticed that it only occurs if $OUTDIR is set to my $PLUGINSDIR.  Is this something I'm doing wrong?  I've attached an example using basic.nsi to show the problem.    Look at the code in .onInit.  If you leave it the way it is the $PLUGINSDIR will not get deleted.  If you comment the last line in it will get deleted.  Also, don't run all the way through the installer.  Just get the first dialog and then exit the installer.<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  SetOutPath $PLUGINSDIR<br />
  ;SetOutPath $TEMP<br />
FunctionEnd<br />
<br />
I'm using NSIS 2.10.  During the Init I copy some files that are needed into the plugins directory.  If I complete the install everything is fine because the $OUTDIR gets changed when installing the program.  As a workaround I could just change the $OUTDIR to something else but thought I'd ask.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">2nd November 2005, 18:09</div></div><div class="posttext">the un/installer cannot remove $OUTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd November 2005, 18:52</div></div><div class="posttext">Best thing to do is to change the OutPath to $TEMP.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">scully13</div><div class="date">2nd November 2005, 19:19</div></div><div class="posttext">Thanks for the help.  I will set the $OUTDIR to $TEMP.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>