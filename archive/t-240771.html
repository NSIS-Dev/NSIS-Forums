<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" CopyFiles is slow, one file per second, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  CopyFiles is slow, one file per second NSIS Discussion" />
	
	<title> CopyFiles is slow, one file per second [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  CopyFiles is slow, one file per second</div>
<hr />
<div class="pda"><a href="t-240771.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240771">CopyFiles is slow, one file per second</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jtbalogh</div><div class="date">14th March 2006, 01:24</div></div><div class="posttext">CopyFiles copies any file I have slowly, about one file every 1.1 seconds. I tried different types of examples with CopyFiles and different scripts. To duplicate the problem, try the example below and let me know what's up. Remember it creates a few temporary files in the current folder. Thanks.<br />
<br />
<br />
!include &quot;MUI.nsh&quot;<br />
OutFile &quot;temp.exe&quot;<br />
ShowInstDetails show<br />
!define MUI_FINISHPAGE_NOAUTOCLOSE<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
Function .onInit<br />
  FileOpen $1 &quot;test0.txt&quot; a ; create file if not exist<br />
  FileClose $1<br />
FunctionEnd<br />
<br />
Section &quot;Component&quot; Sec1<br />
  CopyFiles &quot;test0.txt&quot; &quot;test1.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test2.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test3.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test4.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test5.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test6.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test7.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test8.txt&quot;<br />
  CopyFiles &quot;test0.txt&quot; &quot;test9.txt&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">14th March 2006, 02:11</div></div><div class="posttext">The install finishes in under a second for me. Maybe it's because I'm using a Pentium 4 machine :rolleyes:. I am using nsis 2.15. It could be just your system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jtbalogh</div><div class="date">14th March 2006, 02:34</div></div><div class="posttext">You have no problem ?<br />
<br />
I also have a P4-3GHz machine and NSIS 2.15. Using 'File','Delete','RMDir' command is instantaneous for me, but not 'CopyFiles'. (I just realized you were being sarcastic .. :))<br />
<br />
Time to reinstall nsis or windows if it is just my system ...<br />
<br />
Now what worries me is that what if I gave the installation to other people and they run into this problem too. They can not be expected to reinstall windows ... ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">14th March 2006, 02:40</div></div><div class="posttext">I don't use copy files myself, so I can't really help you. Maybe you were running harddisk/cpu intensive apps in the background.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jtbalogh</div><div class="date">14th March 2006, 02:55</div></div><div class="posttext">Without it, do you have a way to make a backup of files before you extract your package?. Without it, do you have a way to be able to setup installation to copy files from CD instead of extracting? Would be nice to know an alternative.<br />
<br />
BTW, nothing is in the background. I am not sure how else to say that only that command is slow. Using 'File' to extract 10 megabytes of files takes a few seconds. Using 'CopyFiles' would take the same process 24 minutes (1440 files). I tried deleting files before copying. I tried other drives, harddisks, network drive, usb drive.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">14th March 2006, 04:33</div></div><div class="posttext">CopyFiles /SILENT ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jtbalogh</div><div class="date">14th March 2006, 04:47</div></div><div class="posttext">OMG. It works. I would never have known that by looking at the tutorial in section 4.9.3.2. The description is completely different. Thanks Instructor.<br />
<br />
Do I need error checking? The tutorial says error checking is turned off when using silent?<br />
<br />
P.S. Sorry the code above saves files in 'C:\Program Files\NSIS\'. I thought it was going to the current folder and forgot to use $OUTDIR and $EXEDIR.<br />
<br />
Function .onInit<br />
  SetOutPath &quot;$EXEDIR&quot;<br />
  FileOpen $1 &quot;test0.txt&quot; a ; create file if not exist<br />
  FileClose $1<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">14th March 2006, 06:45</div></div><div class="posttext">Error flag is set if any error appeared:Name &quot;Output&quot;<br />
OutFile &quot;Output.exe&quot;<br />
<br />
Section<br />
	CopyFiles /SILENT &quot;C:\NotExisted.ext&quot; &quot;D:\&quot;<br />
<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK &quot;error&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jtbalogh</div><div class="date">14th March 2006, 06:59</div></div><div class="posttext">Thanks. That is good news.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">16th October 2007, 10:35</div></div><div class="posttext">I don't want to create new thread, so I'll post here.<br />
<br />
I have problem with copying (and deleting, moving, reading also) NSIS installers. It is very slow (about 300 kB/s) on my decent machine. I am using LZMA compression and my installer has about 9 MBs. By the way, compress ratio is very good (under 25%), I think that it is because I have packed 3 very similar and large binaries.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">16th October 2007, 18:56</div></div><div class="posttext">maybe you should also take as the security program that you have may decrease processor speed...mostly if you have symantec's :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">17th October 2007, 05:56</div></div><div class="posttext">Joel, If I have 9 MBs NSIS .exe and 9MBs zip file and try to copy them, then both copies takes same time. BUT after copying the .exe is copy progressbar on 100% for approximately 3-4 seconds. It disappears immediately when I am copying the .zip or other file. I don't understand this. I think, that it has nothing to do with security programs (I am using NOD 32 on my &quot;NSIS&quot; machine).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">17th October 2007, 19:24</div></div><div class="posttext">Originally posted by pospec <br />
Joel, If I have 9 MBs NSIS .exe and 9MBs zip file and try to copy them, then both copies takes same time. BUT after copying the .exe is copy progressbar on 100% for approximately 3-4 seconds. It disappears immediately when I am copying the .zip or other file. I don't understand this. I think, that it has nothing to do with security programs (I am using NOD 32 on my &quot;NSIS&quot; machine).  <br />
I have a project of 100 MB of the nsis .exe.<br />
Inside I have a 25~ MB of 7zip, 10~MB of zip, plus files inside, and some files are in $EXEDIR of my CD-ROM.<br />
The only problem, if that is a problem, is when nsis dump all to $PLUGINSDIR...but decompressing the single files aren't for me one per sec, even I use nod32 3.x beta...<br />
Normally nod32 scans in each file compress, so maybe id your memory, processor...don't know...I've using nsis since 1.98 as far I remember, and trust me...hog isn't part of its specs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">18th October 2007, 05:16</div></div><div class="posttext">I think that you don't understand me. If I say COPYING, DELETING, MOVING, then I mean operations done by my OS, not by NSIS. I compared copying 9MBs NSIS .exe and 9MBs .zip FROM ONE FOLDER TO ANOTHER in my previous post.<br />
I know that it was confusing to post this here to this thread, but I didn't want to start a new one. Maybe I had to...<br />
So, I am just curious why system waits ~4 seconds after copying NSIS .exe file and doesn't wait after copying another one. If I close NOD32 it happens too.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>