<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" PreSelect a component by language, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  PreSelect a component by language NSIS Discussion" />
	
	<title> PreSelect a component by language [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  PreSelect a component by language</div>
<hr />
<div class="pda"><a href="t-267375.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=267375">PreSelect a component by language</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">8th March 2007, 12:33</div></div><div class="posttext">Hi together.<br />
<br />
I've got a problem. I've have templates to install. Only one template should be selectable at once (problem solved). The other thing is that the installer should check which Language the system has and preselect the correct template for the user. I've startet with the following code:<br />
<br />
<br />
var PreSelect<br />
<br />
[... in the .oninit function ...]<br />
StrCmp $LANGUAGE ${LANG_FRENCH} 0 +3<br />
StrCpy $PreSelLang ${template_french}<br />
goto PreSelectEnd<br />
<br />
StrCmp $LANGUAGE ${LANG_GERMAN} 0 +3<br />
StrCpy $PreSelLang ${template_german}<br />
goto PreSelectEnd<br />
<br />
StrCmp $LANGUAGE ${LANG_ITALIAN} 0 +3<br />
StrCpy $PreSelLang ${template_italian}<br />
goto PreSelectEnd<br />
<br />
StrCmp $LANGUAGE ${LANG_SPANISH} 0 PreSelectEnd<br />
StrCpy $PreSelLang ${template_spanish}<br />
goto PreSelectEnd<br />
<br />
StrCpy $PreSelLang ${template_english}<br />
goto PreSelectEnd<br />
<br />
PreSelectEnd:<br />
<br />
[... the sections ...]<br />
SectionGroup &quot;Template language&quot; templates<br />
  Section /o &quot;English&quot; templates_english<br />
  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;German&quot; templates_german<br />
  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;French&quot; templates_french<br />
  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;Italian&quot; templates_italian<br />
  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;Spanish&quot; templates_spanish<br />
  [stuff]<br />
  SectionEnd<br />
SectionGroupEnd<br />
<br />
<br />
.... and ...<br />
<br />
Function .onSelChange<br />
# EN, DE, IT, ES, FR<br />
  !insertmacro StartRadioButtons $PreSelLang<br />
    !insertmacro RadioButton ${templates_english}<br />
    !insertmacro RadioButton ${templates_french}<br />
    !insertmacro RadioButton ${templates_german}<br />
    !insertmacro RadioButton ${templates_italian}<br />
    !insertmacro RadioButton ${templates_spanish}   <br />
  !insertmacro EndRadioButtons<br />
FunctionEnd<br />
<br />
<br />
<br />
What am I doing wrong? THe Buttons are RadioButtons but whatever language I have nothing is preselected. Any ideas? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">8th March 2007, 12:59</div></div><div class="posttext">TIP:<br />
<br />
Note that OS GUI language has nothing to do with the Targetcountry of your installer, make sure you do not confuse Language with Country, e.g. a person could have an Spanish OS GUI langiage but still have his country set to United States, since he/she lives there but prefers Spanish as OS language.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">8th March 2007, 13:06</div></div><div class="posttext">Hi onad,<br />
<br />
thanks for the tip. I almost forgot to post the following lines which are also in my Installer:<br />
System::Call &quot;kernel32::GetUserDefaultLangID()i .r0&quot;<br />
StrCpy $LANGUAGE $0<br />
<br />
So the Regional Settings should be used.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">8th March 2007, 17:16</div></div><div class="posttext">LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\English.nlf&quot;<br />
LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\French.nlf&quot;<br />
LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\German.nlf&quot;<br />
LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\Italian.nlf&quot;<br />
LoadLanguageFile &quot;${NSISDIR}\Contrib\Language files\Spanish.nlf&quot;<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
!include &quot;Sections.nsh&quot;<br />
<br />
outfile 'test.exe'<br />
<br />
Var PreSelLang<br />
<br />
Page Components<br />
Page InstFiles<br />
<br />
SectionGroup /e &quot;Template language&quot; templates<br />
  Section /o &quot;English&quot; templates_english<br />
;  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;German&quot; templates_german<br />
;  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;French&quot; templates_french<br />
;  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;Italian&quot; templates_italian<br />
;  [stuff]<br />
  SectionEnd<br />
<br />
  Section /o &quot;Spanish&quot; templates_spanish<br />
;  [stuff]<br />
  SectionEnd<br />
SectionGroupEnd<br />
<br />
Function .onInit<br />
System::Call &quot;kernel32::GetUserDefaultLangID()i .r0&quot;<br />
StrCpy $LANGUAGE $0<br />
<br />
${if} $LANGUAGE == ${LANG_FRENCH}<br />
!insertmacro SelectSection ${templates_french}<br />
StrCpy $PreSelLang ${templates_french}<br />
<br />
${elseif} $LANGUAGE == ${LANG_GERMAN}<br />
!insertmacro SelectSection ${templates_german}<br />
StrCpy $PreSelLang ${templates_german}<br />
<br />
${elseif} $LANGUAGE == ${LANG_ITALIAN}<br />
!insertmacro SelectSection ${templates_italian}<br />
StrCpy $PreSelLang ${templates_italian}<br />
<br />
${elseif} $LANGUAGE == ${LANG_SPANISH}<br />
!insertmacro SelectSection ${templates_spanish}<br />
StrCpy $PreSelLang ${templates_spanish}<br />
<br />
${else}<br />
!insertmacro SelectSection ${templates_english}<br />
StrCpy $PreSelLang ${templates_english}<br />
${endif}<br />
<br />
MessageBox MB_OK &quot;$$0 = $0 - $$LANGUAGE = $LANGUAGE - $$PreSelLang = $PreSelLang&quot;<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
# EN, DE, IT, ES, FR<br />
  !insertmacro StartRadioButtons $PreSelLang<br />
    !insertmacro RadioButton ${templates_english}<br />
    !insertmacro RadioButton ${templates_french}<br />
    !insertmacro RadioButton ${templates_german}<br />
    !insertmacro RadioButton ${templates_italian}<br />
    !insertmacro RadioButton ${templates_spanish}<br />
  !insertmacro EndRadioButtons<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dbach</div><div class="date">9th March 2007, 08:58</div></div><div class="posttext">Thanks RedWine - this works. Now I have to solve another problem. My onInit function is before my sections. When I move my oninit function after the section the installers starts again and again and again (3 times before the first dialog appears). I have to investigate to solve this problem. Thanks again :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>