<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Nullsoft Error Handling, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Nullsoft Error Handling NSIS Discussion" />
	
	<title> Nullsoft Error Handling [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Nullsoft Error Handling</div>
<hr />
<div class="pda"><a href="t-283441.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283441">Nullsoft Error Handling</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">slloyd</div><div class="date">19th December 2007, 19:29</div></div><div class="posttext">I was hoping to start a discussion on error handling.  I have been using nullsoft for quite some time and still find it quite difficult, if not impossible, to determine what causes some errors. I am interested in how others are handling errors  and whether or not they feel the error handling in nullsoft lacking. Mostly, I would love to be able to capture the windows error(number or message) for errors.  Some examples of problems I have had are:<br />
<br />
 CopyFiles errors: Copy failed when the file on a CD had a crc error. The script called CopyFiles on a directory with many files so I was unable to determine what one failed. The only way I was able to determine what happened is to manually try to copy each file from the CD until I saw the windows error.<br />
 RegDLL errors: Unable to see the failure message when registering a dll or ocx file. It would sure be nice to capture the windows error on this one also.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">19th December 2007, 20:08</div></div><div class="posttext">I agree that error handling should be beefed up. Making your installer easy to troubleshoot is i feel an important aspect to consider while coding your installer. A suggestion would be able to set a type of error rather than a generic one.  Kind of like a sudo exception.  Then you could check to see if FileNotFoundError was set.<br />
<br />
For my current error handling techniques, I include a detailedprint in the functions or macros I build to declare problems.  An example would be:<br />
<br />
<br />
StrCpy $R0 &quot;c:\test\file.txt&quot;<br />
IfFileExists $R0 FileExists FileNotExists<br />
<br />
FileExists:<br />
<br />
<br />
FileNotExists:<br />
detailprint 'Error: $R0 does not exist.'<br />
<br />
<br />
Building this into my macros at least gives me some type of clue when it fails.<br />
<br />
Also, to centralize my error catching and notification, I created a macro that checks if errors were set and prints a specified message in the installer console or a messagebox.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd February 2008, 12:52</div></div><div class="posttext">End of discussion?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">carlosfocker</div><div class="date">24th February 2008, 17:37</div></div><div class="posttext">I guess it isn't that important to anybody.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Daniel James</div><div class="date">11th March 2008, 20:22</div></div><div class="posttext">Originally posted by slloyd <br />
I was hoping to start a discussion on error handling.<br />
I'm glad you did! Pity it didn't get further.<br />
<br />
Mostly, I would love to be able to capture the windows error(number or message) for errors.<br />
I agree. It would be very nice to have a $ERROR variable that could be checked just as one checks errno in C, or a GetLastError function, and some way to return a textual error message based on this (in the local language, of course).<br />
<br />
It might also be nice to have some sort of ON ERROR construct (as in Basic), but I'm not sure it wold be easy to get agreement on the most useful semantics for that :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">yilmaz</div><div class="date">28th August 2008, 03:54</div></div><div class="posttext">I am so surprised and disappointed to know taht NSIS does not have a useful error handling mechanism. <br />
Hopefully in the next version, NSIS adds this feature.<br />
Otherwise, we will keep on guessing on errors  :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sheik</div><div class="date">29th August 2008, 16:56</div></div><div class="posttext">Or even better, have a callback function that we can set up that NSIS will call when it detects an error during the install of files.<br />
<br />
We have lots of .On* functions, why not  .OnError where it sends us the filename, location where it was to be installed, filesize.  We can parse it, determine if we care about it or not, and send back some sort of code, like &quot;IGNORE&quot; or &quot;RETRY&quot; to tell NSIS what to do about the error.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>