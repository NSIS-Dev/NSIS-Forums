<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Passing UNC path to setup with /D switch, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Passing UNC path to setup with /D switch NSIS Discussion" />
	
	<title> Passing UNC path to setup with /D switch [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Passing UNC path to setup with /D switch</div>
<hr />
<div class="pda"><a href="t-252885.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=252885">Passing UNC path to setup with /D switch</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">9th August 2006, 03:41</div></div><div class="posttext">Hi guys,<br />
<br />
Any idea why it is not possible to set the installation path to an UNC path during the execution of the setup? <br />
<br />
For example:<br />
setup.exe /D=\\mycomputer\install<br />
<br />
Doing this does nothing because it is detecting it as an invalid path for some reason.<br />
<br />
Any response will be much appreciated.<br />
<br />
Cheers,<br />
<br />
Jasmin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">9th August 2006, 03:53</div></div><div class="posttext">----- EDIT -----<br />
READ POST BELLOW<br />
----- EDIT -----</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">9th August 2006, 04:20</div></div><div class="posttext">Ok, its me again. :)<br />
I found that UNC paths are OK but UNC paths without a folder are not ok.<br />
<br />
For example:<br />
You can install into \\mycomputer\share\folder<br />
<br />
But you cannot install into \\mycomputer\share directly because it seems to not allow the installation path to be the root of a drive or a share.<br />
<br />
I can understand the root of the drive being disallowed as the installation path but the root of the share should be ok?<br />
<br />
What are your thoughts?<br />
<br />
Regards,<br />
<br />
Jasmin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">niteflyer</div><div class="date">9th August 2006, 11:16</div></div><div class="posttext">Just an idea: did you allow &quot;AllowRootDirInstall&quot; (NSIS-instruction, see Help 4.8.1.2). The default is false, so if dont use this instruction, you wont be allowed to install in the root.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th August 2006, 12:01</div></div><div class="posttext">It should allow root install for that path if it doesn't point to the root of a hard drive, but I don't know if NSIS can be coded to detect that quickly.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">niteflyer</div><div class="date">9th August 2006, 12:17</div></div><div class="posttext">According to the documentation, network shares are also prohibited by &quot;AllowRootDirInstall False&quot;, but I did not test that. I am not an API-expert, but I _guess_ that NSIS cannot detect that a share represents the root of a drive.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">10th August 2006, 02:06</div></div><div class="posttext">Thanks for the replies guys.<br />
<br />
I tried using the AllowRootDirInstall true and that seems to allow installation to the root of a drive with the use of the /D switch<br />
<br />
For example this works now:<br />
<br />
setup.exe /D=C:\<br />
<br />
But unfortunatelly this still doesn't work for me:<br />
<br />
setup.exe /D=\\mycomputer\share<br />
<br />
Even when the AllowRootDirInstall is set to true.<br />
<br />
So this bit of text from the help section seems to be incorrect since a share cannot be selected at all:<br />
<br />
 <br />
AllowRootDirInstall controls whether or not installs are enabled to the root directory of a drive, or directly into a network share. Set to 'true' to change the safe behavior, which prevents users from selecting C:\ or \\Server\Share as an install (and later on, uninstall) directory.<br />
 <br />
<br />
I've even tried using .onVerifyInstDir but it doesn't seem to help as the /D switch UNC paths deemed invalid are ignored.<br />
<br />
I really didn't want to resort to modifying the exehead to do what I need but I guess I will have to if I cannot find a solution.<br />
<br />
Regards,<br />
<br />
Jasmin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">10th August 2006, 02:12</div></div><div class="posttext">Oops. I found what I was doing wrong. Seems you need an additional backslash at the end of the UNC path for it to be deemed valid. So now this works:<br />
<br />
setup.exe /D=\\mycomputer\share\<br />
<br />
Whereas before this didn't work:<br />
<br />
setup.exe /D=\\mycomputer\share<br />
<br />
Thanks for eveyone's help! :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">niteflyer</div><div class="date">10th August 2006, 11:03</div></div><div class="posttext">Just to know: does this work with or without &quot;AllowRootDirInstall TRUE&quot; and does your share map to the root of a logical partition (driveletter) ? Can you test these scenarios ?<br />
/D should also preset the default directory presented by the DirPage in nonsilent mode (without /S). Watch if the Nextbutton is enabled with this default. Even without /D you should be able to select the root of your share with &quot;AllowRootDirInstall TRUE&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jasmin Sehic</div><div class="date">11th August 2006, 03:29</div></div><div class="posttext">Yes this only works when AllowRootDirInstall is set to TRUE and yes it works on any share regardless of what is being shared (i.e. root of a logical drive) as long as you end the UNC path with a backslash.<br />
<br />
I've also found a way to install to a root of a share without using AllowRootDirInstall TRUE.<br />
<br />
All you have to do is this:<br />
<br />
setup.exe /D=\\mycomputer\share\..\share\<br />
<br />
The backreference seems to trick the installer into thinking its a folder in the root of the share so it allows it.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>