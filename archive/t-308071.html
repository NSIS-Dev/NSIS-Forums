<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" INI file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  INI file NSIS Discussion" />
	
	<title> INI file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  INI file</div>
<hr />
<div class="pda"><a href="t-308071.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308071">INI file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">8th July 2009, 08:44</div></div><div class="posttext">Hi evryone,<br />
I am trying to add components to the page directory of the installer.<br />
<br />
I use ressource hacker to add groupbox, bouton, etc..<br />
<br />
Now those components are visible when i launch this installer but i can t use them in my code to specify their use.<br />
 <br />
For exemple, I would like my button to be a dirRequest. <br />
<br />
I think I have to declare them in a file .ini but I don't know where I can get the ini file for the default installation pages in order to add field for the components <br />
<br />
If someone can help me it will be greatfull <br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">8th July 2009, 14:12</div></div><div class="posttext">You have to use the ButtonEvent Plugin: http://nsis.sourceforge.net/ButtonEvent_plug-in<br />
<br />
Read the readme in the zip for more info.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">8th July 2009, 17:57</div></div><div class="posttext">Thanks for your reply :)<br />
I was reading doc of ButtonEvent. I don't think i can't make this button become a DirRerquest like the one which is already exist in the directory page.<br />
I am newbie and maybe I am not doing the right thing to obtain what i want. <br />
<br />
I just need to add another directory request in the default MUI_PAGE_DIRECTORY.<br />
<br />
Do you have any ideas to do that because i am looking evrywhere and i can't get a solution to my problem ?<br />
<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2009, 22:14</div></div><div class="posttext">Easier just to add another MUI_PAGE_DIRECTORY.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">8th July 2009, 22:24</div></div><div class="posttext">OK, if you just need a second directory page, you can do three things: Use two Directory pages: (http://nsis.sourceforge.net/Two_installations_in_one_installer)<br />
 Add a textbox and a browse button with resource hacker, add a callbackfunction for the browse button, and call the DialogsEx plug-in (http://nsis.sourceforge.net/Dialog****plug-in) in this callback to show a folder browse dialog box.<br />
 Don't use the standard Directory page, and create your own custom page with two nsDialogs DirRequest controls.<br />
JP</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2009, 22:40</div></div><div class="posttext">That example with two directory pages is probably more than you need as it also has two components and instfiles pages. To have two directory pages you just need to specify a different variable to use for the second using !define MUI_DIRECTORYPAGE_VARIABLE INSTDIR2 (say).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">9th July 2009, 09:55</div></div><div class="posttext">Thanks for your reply i really appreciate :)<br />
<br />
I know that we can add another MUI_PAGE_DIRECTORY but really want to put the two DirRequest in the same page.<br />
 <br />
So i might use the second solution of JP but I am not familiar to callback function and plugin.<br />
<br />
If i use this plugin does the path of the folder will appear in the textbox? will INSTDIR2 be automatically the variable for the second DirRequest ?<br />
<br />
I'm going to have a look of the plugin and try to use it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">9th July 2009, 11:59</div></div><div class="posttext">With the callback function I meant using the ButtonEvent Plugin I mentioned before.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">9th July 2009, 12:42</div></div><div class="posttext">Ok, as I'm not very familiar with plugin i decide to create my own custom directory page to replace the default MUI_DIRECTORY_PAGE.<br />
<br />
Now I would like to know how can I insert a default path to each DirRequest (Like $InstDIR before)<br />
<br />
I tried with MUI_INSTALLATIONS_WRITE but it doesn't seem to work.<br />
<br />
Do you have any idea ?<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th July 2009, 12:55</div></div><div class="posttext">Assuming you're using nsDialogs to create your custom page: You can set the default path in the dir request creation macro, like this:<br />
<br />
  ${NSD_CreateDirRequest} 10u 85u 210u 12u &quot;YOUR DEFAULT GOES HERE&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">9th July 2009, 12:56</div></div><div class="posttext">You can set the root of a DirRequest in an InstallOptions ini file with!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;CustomDialog.ini&quot; &quot;Field 1&quot; &quot;Root&quot; &quot;c:\Program Files\xyz&quot;(Note the MUI_INSTALLOPTIONS_WRITE instead of MUI_INSTALLATIONS_WRITE).<br />
<br />
However, I recommend using nsDialogs instead of InstallOptions .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">9th July 2009, 13:51</div></div><div class="posttext">I am using IstallOptions... Sorry<br />
<br />
I have tried to put a Root parameter but i still can't see the path in the TextBox !<br />
<br />
However I would like to put a variable instad of &quot;C:\...\&quot; like INSTDIR for exemple. I need to switch the both default path if the user is admin or not.<br />
<br />
Thanks again for your help :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">9th July 2009, 15:28</div></div><div class="posttext">If I have understand,<br />
MUI_INSTALLOPTIONS_WRITE allow to write dynamicly in the ini file :<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;NewDirectoryPage.ini&quot; &quot;Field 2&quot;  &quot;Text&quot; &quot;$INSTDIR&quot;<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;NewDirectoryPage&quot;<br />
<br />
So after this instruction the textbox of the DirRequest should show my INSTDIR value... but it doesn't happen.<br />
<br />
Do you have any explaination ?<br />
<br />
I extract the ini file in my function .oninit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th July 2009, 16:49</div></div><div class="posttext">You have some inconsistencies here. Are you extracting as NewDirectoryPage.ini or NewDirectoryPage? You are writing to NewDirectoryPage.ini but showing NewDirectoryPage.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">9th July 2009, 17:30</div></div><div class="posttext">Exactly I was writing the wrong file... Hard day...<br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">9th July 2009, 17:54</div></div><div class="posttext">And you should set the &quot;State&quot; field to $INSTDIR instead of the &quot;Text&quot; field.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">10th July 2009, 09:50</div></div><div class="posttext">Thanks JP i changed that. <br />
So now in my DirRequest textbox i have $PROGRAMFILES or $APPDATA depending on the user status. But the user can still change the directory and i can't get dynamicly the path he entered. I would like his choice become the $INSTDIR variable. I tried with this :<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ $INSTDIR &quot;NewDirectoryPage&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
but that doesn't change anything.<br />
<br />
Is there a way to do this ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th July 2009, 10:25</div></div><div class="posttext">That will work if done from the leave function. If that is what you are doing then post some code. You can also put in some message boxes to pause the installer then you can look in %TEMP%\ns???.tmp\* to find your INI file.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">10th July 2009, 10:37</div></div><div class="posttext">Thanks <br />
Exactly what i tried and it works now !!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">13th July 2009, 10:42</div></div><div class="posttext">I really want to thank you for your help :)!<br />
I put this discussion to resolve</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">13th July 2009, 10:44</div></div><div class="posttext">[RESOLVE]Originally posted by xma <br />
I really want to thank you for your help :)!<br />
I put this discussion to resolve [/QUOTE]</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>