<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How can I force the language to get re-read after onInit?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How can I force the language to get re-read after onInit? NSIS Discussion" />
	
	<title> How can I force the language to get re-read after onInit? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How can I force the language to get re-read after onInit?</div>
<hr />
<div class="pda"><a href="t-318551.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=318551">How can I force the language to get re-read after onInit?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rgerard</div><div class="date">20th April 2010, 21:31</div></div><div class="posttext">For my installer, I was using the LangDialog DLL for a while to have users choose a language, but there was an issue: it's a really small window that opens, and it would commonly get &quot;lost&quot; on users machines.  They would try to open the exe, not see the small language picker, and end up never installing.<br />
<br />
Instead what I did was create a droplist on the first main page that users see, which is a CustomPage I created.  The custom page allows the users to select the language from a drop-down list, and in the leave function of the custom page, I copy the selection to the $LANGUAGE variable.<br />
<br />
The problem I'm having is that even though the $LANGUAGE variable is set correctly, the strings being used in the installer aren't the language set in $LANGUAGE.  From what I'm reading in these forums, it looks like NSIS will somehow set the appropriate language to show sometime after onInit exits, but before any custom pages are shown.<br />
<br />
Is there a way to force the installer to re-init the language for the installer after onInit has finished and pages are showing?  I've tried manually calling onInit again from my custom page (after the $LANGUAGE is set correctly), and that mostly worked, but that seems like a buggy solution, and in my case calling onInit twice causes some other problems.<br />
<br />
Any ideas?<br />
<br />
Thanks,<br />
Ryan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd April 2010, 14:36</div></div><div class="posttext">The easiest solution would be to move your custom dialog to another NSIS executable and run that from .onInit. You can store the chosen language in the registry temporarily or pass it as the exit code (error level): http://nsis.sourceforge.net/Docs/AppendixD.html#D.1.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">htome</div><div class="date">28th June 2010, 12:17</div></div><div class="posttext">Hi<br />
<br />
I need to do the same thing with the Welcome page<br />
<br />
I was able to create my own Welcome nsDialog based on Welcome.nsh, but I don't even know how to populate the dropdown list with the available languages.<br />
<br />
Does anybody have a working code for this? An example that I can base on?<br />
<br />
I am new to NSIS but have this enormous task to do...<br />
<br />
&quot;rgerard&quot;, have you been able to create this? Would it be possible for you to share some of your code?<br />
<br />
Any help is much appreciated!<br />
<br />
Many thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">28th June 2010, 12:53</div></div><div class="posttext">I was able to create my own Welcome nsDialog based on Welcome.nsh, but I don't even know how to populate the dropdown list with the available languages.<br />
<br />
See:<br />
http://nsis.sourceforge.net/Move_data_between_ListBoxes<br />
and<br />
http://forums.winamp.com/showthread.php?t=318395 (read full thread)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rgerard</div><div class="date">30th June 2010, 08:49</div></div><div class="posttext">Hi htome,<br />
<br />
I was using InstallOptions, not nsDialogs, so it might be a bit different for you.  Basically, I defined the Droplist in my INI file, like so:<br />
<br />
[Field 6]<br />
Type=DropList<br />
Left=230<br />
Right=300<br />
Top=125<br />
Bottom=136<br />
Flags=Notify<br />
ListItems=English|Japanese|German|Dutch<br />
<br />
When you render the Droplist, it should have the items already.  I hope that helps!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>