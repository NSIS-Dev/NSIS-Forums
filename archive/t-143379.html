<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" StrCmp not working for me??, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  StrCmp not working for me?? NSIS Discussion" />
	
	<title> StrCmp not working for me?? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  StrCmp not working for me??</div>
<hr />
<div class="pda"><a href="t-143379.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143379">StrCmp not working for me??</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 05:18</div></div><div class="posttext">My code below displays the message box whether $R1 is empty or not. Any ideas on what my problem is? Thanks in advance!!!<br />
<br />
Function UninstallOldVersion<br />
  push $R1<br />
  ReadRegStr $R1 HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\${MUI_PRODUCT}&quot; &quot;UninstallString&quot;<br />
  StrCmp $R1 &quot;&quot; UninstallOldVersion_noold<br />
  MessageBox MB_OK $R1<br />
  ExecWait '&quot;$INSTDIR\uninstall.exe upgrade&quot; _?=$INSTDIR'<br />
UninstallOldVersion_noold:<br />
  pop $R1<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 06:03</div></div><div class="posttext">Works for me, which version of nsis are you using?<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">24th July 2003, 07:59</div></div><div class="posttext">I created a function that shows me the contents of the $0-$9 and $R0 - $R9. I have found it usefull when coming to debug the code.<br />
<br />
I have included it in the attached script. Tryit and let us know if you have managed to solve the problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">24th July 2003, 08:00</div></div><div class="posttext">Oops. Forgot the attachment.:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 08:13</div></div><div class="posttext">If you want a program to show the status of nsis script, i.e. variables, stack, etc. you should use the dumpstate plugin available on the NSIS Archive.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">24th July 2003, 09:01</div></div><div class="posttext">The more I work with this product and find these jewels and pearls that people have written to improve and enhance the more I LOOOVE the product. Guys I have to say this. Keep it up. You Rock.<br />
:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 14:03</div></div><div class="posttext">Vytautas, I am using version 2.0 beta 3. So, you're saying that if $R1 is filled, your version skips the MessageBox? I don't get that at all???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 14:09</div></div><div class="posttext">Yes I have tried your code with the latest CSV version and it worked fine, i.e. if the registry key did not exist it skipped the MessageBox and if it did it showed it.<br />
<br />
You might have to download the newest NSIS version, however you should note that you most likely have to modify your existing scripts to compile with the CSV version.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 14:12</div></div><div class="posttext">I'm glad you brought that up...CSV that is. What exactly is that (I'm pretty new to NSIS, if you couldn't tell)? And, what is different with the CSV version from the version I have?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mhollander</div><div class="date">24th July 2003, 14:24</div></div><div class="posttext">CVS (Concurrent Versions System) is a tool used by many software developers to manage changes within their source code tree. CVS provides the means to store not only the current version of a piece of source code, but a record of all changes (and who made those changes) that have occurred to that source code. Use of CVS is particularly common on projects with multiple developers, since CVS ensures changes made by one developer are not accidentally removed when another developer posts their changes to the source tree.<br />
<br />
http://sourceforge.net/cvs/?group_id=22049<br />
<br />
If this helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 14:28</div></div><div class="posttext">In other words CSV is the newest version of the software available, it quite often contains bugs and always contains new features.  The most recent version of nsis can be found here (http://nsis.sourceforge.net/nightly/nsis.zip).<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">24th July 2003, 14:29</div></div><div class="posttext">CVS (not CSV) is Concurrent Versioning System and is a sytem used by SourceForge and others to store source code. The NSIS source code is stored on cvs.sourceforge.net and a tool like TortoiseCVS or NSIS Update (which uses TortoiseCVS for you) can &quot;sync&quot; to the latest copy of the source code and executables stored in CVS, i.e. copy them to your computer. NSIS Update goes one step further, it compiles the makensis.nsi file with makensis and then runs the created installer so that you get a properly installed latest copy of NSIS.<br />
<br />
The NSIS developers make their changes to the source code in CVS and so when you get this code and the executables you get the most recent copy of NSIS that exists. This page (http://nsis.sourceforge.net/changelog.php) shows what changes developers made and when (but bear in mind that due to current SourceForge problems the links on that page sometimes take a day or two after the date of the change to show you the correct information).<br />
<br />
The only caveat is that when &quot;syncing&quot; you will get the most recent source code but the executables (makensis.exe, makensisw.exe and the plugins) aren't necessarily built from that source code, they might be slightly older. When this happens you just have to wait for an NSIS developer to &quot;check in&quot; a more recently compiled version of the executables, or use the version you got.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 14:44</div></div><div class="posttext">Sorry about the mixup:igor: at midnight CVS can get spelled as CSV <br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">24th July 2003, 15:00</div></div><div class="posttext">Hehe it would be funny if the NSIS source code was stored as CSV (comma separated values) instead of in CVS :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 15:01</div></div><div class="posttext">So, do I have to install some CVS software on my computer? If so, where do I get that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 15:07</div></div><div class="posttext">Well I have CVS on my system and your code appears to work OK, so my guess is that if you did install CVS your problem should be fixed, however you should note that there are quite a few changes to the script syntax in the CVS version and you will need to modify your script especially if using ModernUI.  I posted the link to the newest CVS version of NSIS a couple of posts back.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 15:09</div></div><div class="posttext">Sorry did not read your question properly.  You only need to have CVS software if you are a developer and want to upload modified code to the server.<br />
<br />
It has been a very long day :p !!!<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 15:15</div></div><div class="posttext">No problem...it's been a long day for me, too.<br />
<br />
So, once I've installed the NSIS version that you linked me to, it should &quot;link&quot; to CVS so that I can keep up-to-date on the newest versions of NSIS (I'm talking about the &quot;Update&quot; button in the NSIS menu)? I supposed I click on one of the CVS radial buttons on the NSIS menu to get the latest version????</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">24th July 2003, 15:15</div></div><div class="posttext">Originally posted by jcagle <br />
So, do I have to install some CVS software on my computer? If so, where do I get that? <br />
<br />
NSIS Update will get the latest CVS copy of NSIS for you automatically, you don't need anything else unless you are an NSIS developer and want to submit code (like Vytautas said). NSIS Update can be run from the NSIS.exe menu program in your NSIS directory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th July 2003, 15:20</div></div><div class="posttext">Yep, you can use NSIS Update, however I have found that the update sometimes reports unusual errors, this I believe is due to some work being done on the SourceForge CVS Servers so the link above can be used if the Update program fails.  The link has a nightly build, a zipped version of NSIS which can be up to 24 hours out of date, but thats better than nothing.<br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcagle</div><div class="date">24th July 2003, 15:48</div></div><div class="posttext">When you talk about the &quot;CVS&quot; version...how is that different from the &quot;regular&quot; version? For example, I told you that I had version 2.0 beta 3. Is that the CVS version? If not, how did I get that version and not the CVS version?<br />
<br />
Finally, I'm assuming that if there is syntax differences between my &quot;regular&quot; version and the &quot;CVS&quot; version, I will see errors when I compile the script and will just have to fix them one-by-one?<br />
<br />
Thanks again!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">24th July 2003, 16:01</div></div><div class="posttext">2.0 beta 3 is probably a version you downloaded from sourceforge.net. If you type makensis at the command prompt you'll see some blurb including a line link &quot;MakeNSIS v2.0b4 (CVS) - Copyright 1999-2003 Nullsoft, Inc.&quot;. As you can see mine says (CVS) in brackets to indicate it is a CVS version, yours won't have this if it is a proper release.<br />
<br />
A CVS version is NOT a proper release, it's just a version that developers created to include their latest changes. New CVS versions are compiled all the time as developers improve NSIS, every now and again a version is considered to be stable enough and to contain enough new features to warrant it being provided for download on sf.net as a PROPER release, then the (CVS) bit will vanish.<br />
<br />
Anytime you use NSIS Update and choose &quot;Download the latest development files from CVS&quot; (either &quot;merge your changes&quot; or &quot;clean copy&quot;) or you use a CVS client (like TortoiseCVS) to grab the latest files you will be getting a CVS version.<br />
<br />
If you want a PROPER release look here instead: http://sourceforge.net/project/showfiles.php?group_id=22049<br />
<br />
Edits are in blue</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">24th July 2003, 16:03</div></div><div class="posttext">As for syntax errors, well if the CVS version has had changes made to it by developers that change existing syntax then yes your script will need modifying. On the plus side you'll also be able to use any new features that have been added but not &quot;released&quot; yet (ie. a PROPER release version of NSIS doesn't exist yet that contains that new feature or features, but the CVS code will contain them).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>