<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" VPatch3 failed on multi-patch, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  VPatch3 failed on multi-patch NSIS Discussion" />
	
	<title> VPatch3 failed on multi-patch [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  VPatch3 failed on multi-patch</div>
<hr />
<div class="pda"><a href="t-219063.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=219063">VPatch3 failed on multi-patch</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">shaohao</div><div class="date">16th June 2005, 18:26</div></div><div class="posttext">I found the latest VPatch3 can't work.<br />
<br />
Hint to author:<br />
<br />
case 255:   // read the file modified time from the patch<br />
if(!ReadFile(hPatch,&amp;targetModifiedTime,sizeof(targetModifiedTime),&amp;read,NULL)) {<br />
            return PATCH_CORRUPT;<br />
          }<br />
<br />
I think there should be a time marker for each file need to be patched.<br />
But I found new GenPat only create one time marker and added it to the end of patch file.<br />
So, If I generated multi-patch into one patch, I can only apply the last one, and others will be failed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">shaohao</div><div class="date">16th June 2005, 18:44</div></div><div class="posttext">HaHa, here is a stupid method to fix the bug:<br />
open source-code file &quot;apply_path.c&quot; under &quot;\Source\NSISPlugin\&quot;.<br />
goto line 112<br />
modify:<br />
<br />
while (patch_blocks--) {<br />
<br />
to:<br />
<br />
while (--patch_blocks) {<br />
<br />
<br />
If the author of VPatch read this post, I think he will know how to solve it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Koen van de Sande</div><div class="date">19th August 2005, 19:31</div></div><div class="posttext">The problem was actually that the generated patches are invalid/corrupt. As soon as you have more than one patch in a file, only the last one will work.<br />
<br />
Upgrade to VPatch 3.0 RC7. There is a critical bugfix which should solve your corrupt patches (if you make them again from scratch :rolleyes: ).<br />
<br />
Get it now: http://www.tibed.net/vpatch</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>