<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to set an environment variable in system variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to set an environment variable in system variable NSIS Discussion" />
	
	<title> How to set an environment variable in system variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to set an environment variable in system variable</div>
<hr />
<div class="pda"><a href="t-345834.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=345834">How to set an environment variable in system variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Gowrisankar</div><div class="date">27th June 2012, 14:37</div></div><div class="posttext">Hai,<br />
<br />
     I want to set the environment variable in system variable path for my application. How can I set that using nsis?...........:rolleyes:<br />
<br />
For ex: C:\Program Files\Sample\bin, I want to set this path in System variable.. <br />
pls help me..<br />
<br />
<br />
Thanks in advance...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">28th June 2012, 06:00</div></div><div class="posttext">Try this: http://nsis.sourceforge.net/Setting_Environment_Variables_to_Active_Installer_Process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gowrisankar</div><div class="date">29th June 2012, 08:08</div></div><div class="posttext">Hai,<br />
        Thank for your guidelines, I downloaded the plugin and update the SetEnv.dll in application path plugin folder. Also I tried the code the following code<br />
<br />
1:The First Way<br />
ReadEnvStr $R0 &quot;PATH&quot;<br />
StrCpy $R0 &quot;$R0;C:\MYAPP&quot;<br />
System::Call 'Kernel32::SetEnvironmentVariableA(t, t) i(&quot;PATH&quot;, R0).r0'<br />
<br />
2:The Second Way<br />
ReadEnvStr $R0 &quot;PATH&quot;<br />
StrCpy $R0 &quot;$R0;C:\MYAPP&quot;<br />
SetEnv::SetEnvVar &quot;PATH&quot; $R0<br />
 <br />
when I using the first way code, it writes the environment variable in user variable path but it won't write in system variable path.<br />
<br />
When I using the second way code, there is no effect on that code, it does not write the environment variable any where. <br />
<br />
But I want to set the environment variable as in System variable path.<br />
Pls suggest for that.......:)<br />
<br />
thanks in advance.....:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">29th June 2012, 11:30</div></div><div class="posttext">Changing %path% this way can corrupt the entire string if it is longer than the NSIS max string length. To be safe you should allocate and manipulate strings directly with the system plugin (kernel32::lstrcat)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>