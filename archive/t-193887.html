<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Refresh a label on a custom window, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Refresh a label on a custom window NSIS Discussion" />
	
	<title> Refresh a label on a custom window [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Refresh a label on a custom window</div>
<hr />
<div class="pda"><a href="t-193887.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=193887">Refresh a label on a custom window</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">FaKo</div><div class="date">17th September 2004, 16:36</div></div><div class="posttext">Hello, <br />
(I'm very very  very bad in english)<br />
I'm a newbie on NSIS, and I try to make an easy thing : <br />
<br />
On a custom window,I have a label and a button<br />
<br />
before MUI_INSTALLOPTIONS_SHOW, I verify something and I modify the color and the text of the label like that : <br />
<br />
GetDlgItem $label $HWND 1204 <br />
SetCtlColors $label 0xFF0000 &quot;transparent&quot; <br />
SendMessage $label ${WM_SETTEXT} 0 &quot;STR:non installé&quot; <br />
<br />
and it works :D <br />
<br />
if I click on the button, I want to change the color and the text of the label. I do that :<br />
GetDlgItem $label $HWND 1204 <br />
SetCtlColors $label 0x00AA00 &quot;transparent&quot; <br />
SendMessage $label ${WM_SETTEXT} 0 &quot;STR:Installé&quot; <br />
<br />
The new text overwrites the older but the older is not erased ; it can be seen under ????!!!!!! :weird: <br />
If I open a window on the custom window, the label is refreshed. How can I refresh the label  ?  :cry:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2004, 16:41</div></div><div class="posttext">The best way to get around this would be not to use a transparent background. If you can't, try calling RedrawWindow or UpdateWindow using System.dll.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FaKo</div><div class="date">17th September 2004, 16:50</div></div><div class="posttext">I must use transparent background because I don't know the background color of the window (it's a system color)...<br />
<br />
But how can I use System.dll and RedrawWindow or UpdateWindow ? (sorry,I'm a really newbie !...)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2004, 16:53</div></div><div class="posttext">If you want the system dialog background color you can simply not specify a background color:SetCtlColors $label 0xFF0000</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FaKo</div><div class="date">17th September 2004, 16:59</div></div><div class="posttext">If I not specify a background color, the foreground color don't works : it stay black !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th September 2004, 17:45</div></div><div class="posttext">Hmm... Right, can't have text color without background, it will be ignored. You can hide and show the control using:ShowWindow $0 ${SW_HIDE}<br />
SendMessage $0 ${WM_SETTEXT} &quot;&quot; STR:$0<br />
ShowWindow $0 ${SW_SHOW}Make sure you include WinMessages.nsh before using that code:!include WinMessages.nsh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FaKo</div><div class="date">17th September 2004, 17:56</div></div><div class="posttext">It wooooooooooooorks !!!!!!!!!!!!!!!!!!!!<br />
<br />
It's a work-around but It works ! Thx you !!<br />
<br />
Thx thx !</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>