<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Unselect a subsection, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Unselect a subsection NSIS Discussion" />
	
	<title> Unselect a subsection [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Unselect a subsection</div>
<hr />
<div class="pda"><a href="t-143805.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=143805">Unselect a subsection</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BlueTrin</div><div class="date">27th July 2003, 20:19</div></div><div class="posttext">I've searched across the examples on NSIS website and trough this forum and I have not seen any example of code that let the user unselect a subsection.<br />
<br />
In all the examples that I have seen, the subsection checkbox is grey. My question is: Is there any way to make a subsection unselectable ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2003, 20:23</div></div><div class="posttext">You need to do exactly the same as with Sections:<br />
<br />
SubSection &quot;My Sub Section&quot; SubSec1<br />
### blah ###<br />
SubSectionEnd<br />
<br />
Now, you need to put this code in the .oninit function.<br />
<br />
!define SECTION_OFF 0xFFFFFFFE ## define once<br />
<br />
## Place in oninit<br />
Push $R0<br />
SectionGetFlags ${SubSec1} $R0<br />
IntOP $R0 $R0 &amp; ${SECTION_OFF}<br />
SectionSetFlags ${SubSec1} $R0<br />
Pop $R0<br />
<br />
This should work, unless it works differently with subsections?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BlueTrin</div><div class="date">27th July 2003, 20:40</div></div><div class="posttext">Thanks very much for your answer, I'm gonna try it and tell you if it works =).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BlueTrin</div><div class="date">28th July 2003, 03:29</div></div><div class="posttext">It has worked perfectly, but I had to add this value defined in sections.nsh:<br />
<br />
!define SF_SUBSECEND  4<br />
<br />
(just add an include)<br />
<br />
<br />
which defines that this particular item is a subsection (if you don't all the subsections become sections).<br />
<br />
I also saw your example in the tutorials on the NSIS website, and I found some sample containing this code in another example:<br />
<br />
<br />
<br />
!ifdef USE_SUBSECTION<br />
; Check if the user have selected all of the sections using the sub-section<br />
	Push $2<br />
	StrCpy $2 ${SF_SELECTED}<br />
	SectionGetFlags ${sec1} $0<br />
	IntOp $2 $2 &amp; $0<br />
	SectionGetFlags ${sec2} $0<br />
	IntOp $2 $2 &amp; $0<br />
	SectionGetFlags ${sec3} $0<br />
	IntOp $2 $2 &amp; $0<br />
	SectionGetFlags ${sec4} $0<br />
	IntOp $2 $2 &amp; $0<br />
	StrCmp $2 0 skip<br />
		SectionSetFlags ${sec1} 0<br />
		SectionSetFlags ${sec2} 0<br />
		SectionSetFlags ${sec3} 0<br />
		SectionSetFlags ${sec4} 0<br />
	skip:<br />
	Pop $2<br />
!endif<br />
<br />
<br />
It makes that when you click on the top section the values in subsections are not changed (without this, when you click on top section, all the subs go fuzzy).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st July 2003, 21:17</div></div><div class="posttext">This should be included in Sections.nsh<br />
<br />
I will notify Kichik<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd August 2003, 11:46</div></div><div class="posttext">This piece of code was taken from one-section.nsi. It can't be in sections.nsh because it's not abstract enough.<br />
<br />
I have updated one-section.nsi to make this test a bit more efficient and use some of the latest changes. You should take a look if controlling sub-sections is what you're after.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>