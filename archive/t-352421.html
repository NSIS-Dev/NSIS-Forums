<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to recognize NSIS and NSIS Unicode version, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to recognize NSIS and NSIS Unicode version NSIS Discussion" />
	
	<title> How to recognize NSIS and NSIS Unicode version [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to recognize NSIS and NSIS Unicode version</div>
<hr />
<div class="pda"><a href="t-352421.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=352421">How to recognize NSIS and NSIS Unicode version</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">T.Slappy</div><div class="date">23rd November 2012, 15:19</div></div><div class="posttext">Hi all.<br />
<br />
Is there any safe way how to recognize whether UNICODE version of NSIS is installed?<br />
I want to detect a) NSIS is installed? b) is NSIS UNICODE or not?<br />
<br />
Checking &quot;HKLM Software\NSIS\Unicode&quot; or &quot;HKLM Software\NSIS&quot; for installation path sometimes fails - or in some cases user removes the &quot;Unicode&quot; from installation path.<br />
<br />
How can I safe recognize these versions?<br />
<br />
The very quick and hacky solution is to execute makensis.exe and read first line (saying &quot;MakeNSIS v2.46.5-Unicode - Copyright 1995-2009 Contributors&quot;) but maybe there is an easier solution for this.<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">23rd November 2012, 20:52</div></div><div class="posttext">If, inside your script, you want to check whether it is being compiled by Unicode NSIS or not, you simply use:<br />
!ifdef NSIS_UNICODE<br />
<br />
If you want to check whether (Unicode) NSIS is installed on the computer, I think your Registry method is the only good way. Other than that you could check if MakeNSIS.exe exist under the default install path in &quot;%ProgramFiles%\NSIS&quot; or &quot;%ProgramFiles%\NSIS\Unicode&quot;, but that's not very reliable, obviously - the user might have installed NSIS to another location.<br />
<br />
And if you want to check whether a given MakeNSIS executable is Unicode or not, parsing the console output and checking for &quot;-Unicode&quot;, as you suggested, probably is the best way. Alternatively call MakeNSIS.exe with &quot;/HDRINFO&quot; switch and check whether &quot;NSIS_UNICODE&quot; is among the pre-defined symbols. Last but not least, you could call the MakeNSIS.exe and let it compile a script of yours and inside that script you use the &quot;!ifdef&quot; from above to destinguish between &quot;Unicode&quot; and &quot;ANSI&quot; NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th November 2012, 01:41</div></div><div class="posttext">...and the current code in SVN can generate both types. (NSIS_UNICODE is not defined until you use the &quot;Unicode true&quot; attribute)<br />
<br />
!if 0x2046000 &gt;= ${NSIS_PACKEDVERSION}<br />
  !echo &quot;check NSIS_UNICODE&quot;<br />
!else<br />
  Unicode True<br />
!endif<br />
(This version check looks a little weird but provides the best compatibility with !if in older versions of makensis)<br />
<br />
<br />
The question is really, why do you need to know?<br />
<br />
Is it because you need to know what the generated .exe is going to be or is it related to makensis input/output?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>