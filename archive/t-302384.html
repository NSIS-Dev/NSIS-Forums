<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" oninit+after, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  oninit+after NSIS Discussion" />
	
	<title> oninit+after [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  oninit+after</div>
<hr />
<div class="pda"><a href="t-302384.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302384">oninit+after</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Anno-Domini</div><div class="date">24th January 2009, 00:20</div></div><div class="posttext">Hey. First off all, I'm pretty new to this whole nsis script thing. Now...I've been modifying the zip2exe classic script and managed pretty well, it does what it's supposed to but I can't get the cosmetics of the installer to work the way I want. What I want is to have a BMP (with an logo) fade in while music starts playing and then have it fade out while the music continues to play throughout the installer as it'll be a long installation. As it is now the music starts playing and then stops as the BMP fades out...<br />
<br />
My code looks like this:<br />
Page license <br />
Page instfiles<br />
<br />
XPStyle on<br />
ShowInstDetails hide<br />
<br />
BrandingText &quot; &quot;<br />
<br />
LicenseText &quot;Before continuing the installation process you must read through and accept this installer's license.&quot;<br />
LicenseData &quot;${NSISDIR}\Contrib\lala2.txt&quot;<br />
Icon &quot;${NSISDIR}\contrib\lala1.ico&quot;<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\sound.wav &quot;${NSISDIR}\Contrib\lala3.wav&quot;<br />
 <br />
; Play the sound or song<br />
  StrCpy $0 &quot;$PLUGINSDIR\sound.wav&quot;  ; location of the wav file<br />
  IntOp $1 &quot;SND_ASYNC&quot; || 1<br />
  System::Call 'winmm::PlaySound(t r0, i 0, i r1) b'<br />
<br />
File /oname=$PLUGINSDIR\splash.bmp &quot;${NSISDIR}\Contrib\lala4.bmp&quot;<br />
<br />
advsplash::show 1000 600 400 -1 $PLUGINSDIR\splash<br />
<br />
FunctionEnd<br />
<br />
Tryed everything I can think of, please help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th January 2009, 00:37</div></div><div class="posttext">this code is insane, what is IntOp $1 &quot;SND_ASYNC&quot; || 1 supposed to do? you would also need SND_FILENAME, but you need to use the actual value, or ${SND_FILENAME} if it exists as a define...<br />
<br />
Why would you even want to play a long music file? Think of your poor users</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th January 2009, 00:53</div></div><div class="posttext">both Splash and AdvSplash are hardcoded to call PlaySound(0,0,0); and this will abort the playing file even if you did not give it anything to play, you could file a bug report about this if you really care, for now you must start playing the sound AFTER the splash and the code for that would look something like:<br />
<br />
System::Call 'winmm::PlaySound(t &quot;C:\WINDOWS\Media\winSpaceSysStart.wav&quot;, i 0,i 0x20001)'<br />
<br />
(all parameters hardcoded here, replace path ofcourse)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>