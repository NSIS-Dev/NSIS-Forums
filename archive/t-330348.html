<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to check if it is a directory or a file?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to check if it is a directory or a file? NSIS Discussion" />
	
	<title> How to check if it is a directory or a file? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to check if it is a directory or a file?</div>
<hr />
<div class="pda"><a href="t-330348.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330348">How to check if it is a directory or a file?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JohnChen</div><div class="date">5th May 2011, 15:02</div></div><div class="posttext">Is there way to do that by using IfFileExists? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2011, 15:15</div></div><div class="posttext">Use \*.* on the end to check a path is a directory rather than a file.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JohnChen</div><div class="date">5th May 2011, 15:22</div></div><div class="posttext">Use \*.* on the end to check a path is a directory rather than a file.<br />
<br />
Stu<br />
That is a clever idea. But how to check a file rather than a directory? Obviously we can't use $IfFileExists File, because here File could be either a file or a directory. Am I right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2011, 15:27</div></div><div class="posttext">Swap the logic around then.<br />
<br />
${If} ${FileExists} Path<br />
${AndNot} ${FileExists} Path\*.*<br />
# Is a file<br />
${EndIf}<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JohnChen</div><div class="date">5th May 2011, 15:36</div></div><div class="posttext">Swap the logic around then.<br />
<br />
${If} ${FileExists} Path<br />
${AndNot} ${FileExists} Path\*.*<br />
# Is a file<br />
${EndIf}<br />
<br />
Stu<br />
But {AndNot} is a valid command...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JohnChen</div><div class="date">5th May 2011, 15:37</div></div><div class="posttext">But {AndNot} is a valid command...<br />
I meant {AndNot} is NOT a valid command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th May 2011, 15:38</div></div><div class="posttext">I was hoping you would look it up :) AndIfNot.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JohnChen</div><div class="date">5th May 2011, 15:46</div></div><div class="posttext">I was hoping you would look it up :) AndIfNot.<br />
<br />
Stu<br />
Sorry, I should have figured out. Thanks a lot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">5th May 2011, 17:14</div></div><div class="posttext">...Man, now you made me remember back when LogicLib still used ${AndUnless}. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">6th May 2011, 03:03</div></div><div class="posttext">Hi all, I have tested these two lines long ago :<br />
IfFileExists &quot;C:\AnEmptyFolderName\*.*&quot; 0 +2<br />
MessageBox MB_OK &quot;C:\AnEmptyFolderName is a directory!&quot;<br />
IfFileExists &quot;C:\AnEmptyFolderName&quot; 0 +2<br />
MessageBox MB_OK &quot;C:\AnEmptyFolderName is a directory!&quot;<br />
I get the same result. It will show you two same message boxes.<br />
That is to say whether the path is a file name or a directory, the results are the same only if it is really existed.<br />
<br />
If you want to determine whether a path is directory or not, I think you must use PathIsDirectory (http://msdn.microsoft.com/en-us/library/bb773621.aspx) Function.<br />
System::Call `shlwapi::PathIsDirectory(t)i(&quot;C:\AnEmptyFolderName&quot;).R0`<br />
${If} $R0 &lt;&gt; 0<br />
    MessageBox MB_OK Path `&quot;C:\AnEmptyFolderName&quot; is a directory!`<br />
${EndIf}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th May 2011, 05:56</div></div><div class="posttext">Hi all, I have tested these two lines long ago :<br />
IfFileExists &quot;C:\AnEmptyFolderName\*.*&quot; 0 +2<br />
MessageBox MB_OK &quot;C:\AnEmptyFolderName is a directory!&quot;<br />
IfFileExists &quot;C:\AnEmptyFolderName&quot; 0 +2<br />
MessageBox MB_OK &quot;C:\AnEmptyFolderName is a directory!&quot;<br />
I get the same result. It will show you two same message boxes.<br />
Err... Yes, and that's exactly what should happen. The directory exists, so both Ifs return true. If a file is NOT a directory, THEN only one of the two ifs will be true. That's how you distinguish files from directories. (As Stu has already explained, in his post.)<br />
<br />
There's really no need to call PathIsDirectory or anything like that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th May 2011, 09:27</div></div><div class="posttext">Yes, with your code if AnEmptyFolderName is a directory you get both message boxes. If it is a file, you only get one (the 2nd). (And yes I just tried it to be sure :)).<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>