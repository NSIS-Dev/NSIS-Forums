<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsExec/ExecDos return 128...why?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsExec/ExecDos return 128...why? NSIS Discussion" />
	
	<title> nsExec/ExecDos return 128...why? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsExec/ExecDos return 128...why?</div>
<hr />
<div class="pda"><a href="t-323599.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=323599">nsExec/ExecDos return 128...why?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Mike1975</div><div class="date">30th October 2010, 04:07</div></div><div class="posttext">I have a 2003 Windows Server I am attempting to install an application.  The install fails as the nsExec command in my nis script I am using all return 128 and the supplied command is not executed.  <br />
<br />
I than used the following test.nsi script provided with a nsi compiler tool and received the same 128 errors.<br />
<br />
Name &quot;nsExec Test&quot;<br />
<br />
OutFile &quot;nsExec Test.exe&quot;<br />
<br />
ShowInstDetails show<br />
<br />
Section &quot;Silent MakeNSIS&quot;<br />
	nsExec::Exec '&quot;${NSISDIR}\makensis.exe&quot;'<br />
	Pop $0 # return value/error/timeout<br />
	DetailPrint &quot;&quot;<br />
	DetailPrint &quot;       Return value: $0&quot;<br />
	DetailPrint &quot;&quot;<br />
SectionEnd<br />
<br />
Section &quot;MakeNSIS commands help&quot;<br />
	nsExec::ExecToLog '&quot;${NSISDIR}\makensis.exe&quot; /CMDHELP'<br />
	Pop $0 # return value/error/timeout<br />
	DetailPrint &quot;&quot;<br />
	DetailPrint &quot;       Return value: $0&quot;<br />
	DetailPrint &quot;&quot;<br />
SectionEnd<br />
<br />
Section &quot;Output to variable&quot;<br />
	nsExec::ExecToStack '&quot;${NSISDIR}\makensis.exe&quot; /VERSION'<br />
	Pop $0 # return value/error/timeout<br />
	Pop $1 # printed text, up to ${NSIS_MAX_STRLEN}<br />
	DetailPrint '&quot;${NSISDIR}\makensis.exe&quot; /VERSION printed: $1'<br />
	DetailPrint &quot;&quot;<br />
	DetailPrint &quot;       Return value: $0&quot;<br />
	DetailPrint &quot;&quot;<br />
SectionEnd<br />
<br />
I have no idea what has chaned on this server cause it once looked.  <br />
<br />
I have been searching the forum for the past couple of hours but didn't find any answer.  There was one post which kinda describe the same problem but the solution didn't seem to apply.  Any ideas?<br />
<br />
Mike</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">30th October 2010, 09:45</div></div><div class="posttext">Exit codes of your script are 1/1/0 both for nsExec and ExecDos in my Vista. Two versions of error 128 (no child process to wait for) from Google: 1) incorrect cmd.exe; 2) adware or computer infections. For me it looks like process was created (CreateProcess not returned error), but just after this process was terminated by system.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mike1975</div><div class="date">2nd November 2010, 02:53</div></div><div class="posttext">Looks like it is Symantec Endpoint Protection as when it is removed everything works fine.  I have searched Symantec's site and google and there is nothing about this.  I find it hard to believe I am the first to come across this false positive.<br />
<br />
I'll be sending information to Symantec to ensure this is resolved. <br />
<br />
As a side note, I tried it on a different computer with Symatec Endpoint Protection (version 11.0.5002.333 with Nov 1st, 2010 defintions) and the return value was -1073741819 (instead of 128) but this was a Windows XP version 2002 SP3.<br />
<br />
Mike</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>