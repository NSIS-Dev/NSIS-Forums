<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom dialogs -- Idea request, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom dialogs -- Idea request NSIS Discussion" />
	
	<title> Custom dialogs -- Idea request [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom dialogs -- Idea request</div>
<hr />
<div class="pda"><a href="t-273600.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273600">Custom dialogs -- Idea request</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">29th June 2007, 13:17</div></div><div class="posttext">Hello!<br />
<br />
I don't want to make new thread every day, but I didn't find the answer in forum. Or I searched bad...<br />
<br />
Problem is following:<br />
I'd like to have couple of custom pages with 2 edit-boxes. They will appear after installing files. After filling-in the information will appear similar page, but not editable - just for confirmation - and it do some post-install things. Each PAIR of this pages will appear only on user demand. My solution is following:<br />
...<br />
Page Custom Page1PRE Page1LEAVE<br />
Page Custom Page1_ConfirmPRE Page1_ConfirmLEAVE<br />
...<br />
Function Page1PRE<br />
${If} ${Cmd} &quot;MessageBox MB_YESNO|MB_ICONQUESTION 'Page1?' IDYES&quot;<br />
  StrCpy $PAGE1 &quot;1&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;Page1.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;Page1.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
${Else}<br />
  StrCpy $PAGE1 &quot;0&quot;<br />
  Abort<br />
${EndIf}<br />
FunctionEnd<br />
...<br />
Function Page1LEAVE<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $FIELD1 &quot;Page1.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $FIELD2 &quot;Page1.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
FunctionEnd<br />
...<br />
Function Page1_ConfirmPRE<br />
  ${If} $PAGE1 == &quot;0&quot; ;<br />
    Abort<br />
  ${EndIf}<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;Page1.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;Page1.ini&quot; &quot;Field 1&quot; &quot;Text&quot; $FIELD1<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;Page1.ini&quot; &quot;Field 2&quot; &quot;State&quot; $FIELD2<br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;Page1.ini&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
FunctionEnd<br />
...<br />
Function Page1_ConfirmLEAVE<br />
  ; here I would like to do some work with $FIELD1 and $FIELD2<br />
FunctionEnd<br />
...<br />
<br />
Is this a good way? Can I do it better (maybe using sections instead of asking with MessageBox)? Won't this make any problems if user will step back in installer?<br />
<br />
Thank you for your opinions! (And sorry for huge post)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th June 2007, 15:57</div></div><div class="posttext">Sure you can. Add some sections and in those sections set the $PAGE1 (and $PAGE2) variables.<br />
<br />
Also, you don't need to use INITDIALOG and SHOW. You can just use MUI_INSTALLOPTIONS_DISPLAY.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">29th June 2007, 23:48</div></div><div class="posttext">Thx Afrow!<br />
<br />
And what about going back in instalator? Can I put that pairs of the pages together in any way? E.g. if I want user to go through one pair of pages and then avoid him to go back. I know the DisableBackButton trick, how to use it on the pairs of pages?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">1st July 2007, 14:23</div></div><div class="posttext">Use the GotoNSISPage function on the Wiki to jump backwards or forwards a number of pages.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">1st July 2007, 19:30</div></div><div class="posttext">Thx Afrow! I didn't know about this function... I hope this will help. Then I imply, that using Sections instead of asking messageboxes won't be necessary - am I right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">4th July 2007, 23:30</div></div><div class="posttext">I'd like to ask another question, if I can.<br />
<br />
I noticed, that you can't do something like<br />
...<br />
StrCpy $INI_NAME &quot;my-dialog.ini&quot;<br />
!insertmacro MUI_INSTALLOPTIONS_EXTRACT $INI_NAME<br />
...<br />
<br />
OK, then I tried<br />
Function Page_Po_Instalaci_pre<br />
  StrCpy $DDVERZE &quot;SD&quot;<br />
  MessageBox MB_OK &quot;*$DDVERZE*&quot;<br />
  !if $DDVERZE == &quot;SD&quot;<br />
    MessageBox MB_OK &quot;!!!&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;dlg_Po_Instalaci_SD.ini&quot;<br />
    ...<br />
  !else<br />
    MessageBox MB_OK &quot;???&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;dlg_Po_Instalaci.ini&quot;<br />
    ...<br />
  !endif<br />
FunctionEnd<br />
It shows *SD* dialog and then ??? dialog. What is wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th July 2007, 00:06</div></div><div class="posttext">!if is for compile time. You want ${If}<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">5th July 2007, 08:39</div></div><div class="posttext">I know that I can use ${If}. But why doesn't work !if? I thought that it will just ommit lines between !if / !else / !endif. ${If} will pack all these lines (instructions) into installer, won't it?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>