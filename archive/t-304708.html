<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Can I use name one of function for the Installer and the Uninstaller ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Can I use name one of function for the Installer and the Uninstaller ? NSIS Discussion" />
	
	<title> Can I use name one of function for the Installer and the Uninstaller ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Can I use name one of function for the Installer and the Uninstaller ?</div>
<hr />
<div class="pda"><a href="t-304708.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=304708">Can I use name one of function for the Installer and the Uninstaller ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dong</div><div class="date">28th March 2009, 10:59</div></div><div class="posttext">I wrote one function and Function name's DeleteFontKey. This Function run good in Section Installer but it's not run in Uninstaller. It's warning error: Call must be used with function names starting with &quot;un.&quot; in the uninstall section. Usage: Call function_name | [:label_name] Error in script &quot;C:\Program Files\NSIS\Examples\Setup1.5_final.nsi&quot; on line 272 -- aborting creation process. Can i use only one function for Installer and Uninstaller ? This is my program structure:<br />
<br />
.....<br />
Function DeleteFontKey<br />
   ..... command<br />
FunctionEnd<br />
<br />
Section<br />
  .... Command<br />
  Call DeleteFontKey<br />
  .... Command<br />
SectionEnd<br />
<br />
Section Uninstall<br />
  .... command<br />
  Call DeleteFontKey  # This is line error 272 -- aborting creation process<br />
  .... command<br />
SectionEnd<br />
<br />
Can i use only one name function for Installer and Uninstaller ? How can i set name for function ? I don't want to write two function have same one content but It's two name different. Help me ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pawel</div><div class="date">28th March 2009, 12:34</div></div><div class="posttext">Originally posted by dong <br />
 Can i use only one function for Installer and Uninstaller ? <br />
<br />
Yes, you can.<br />
You have to write little macro, that will do it for you.<br />
It shoud like this:<br />
<br />
<br />
!macro SharedFunction un<br />
  <br />
Function ${un}DeleteFontKey<br />
<br />
; Your function code...<br />
<br />
FunctionEnd<br />
<br />
!macroend<br />
<br />
; Insert function as an installer and uninstaller function.<br />
!insertmacro SharedFunction &quot;&quot;<br />
!insertmacro SharedFunction &quot;un.&quot;<br />
 <br />
<br />
And in sections code you call that function like that:<br />
In Installer code:<br />
Call DeleteFontKey <br />
<br />
In uninstaller code:<br />
Call un.DeleteFontKey <br />
<br />
Regards,<br />
-Pawel</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dong</div><div class="date">28th March 2009, 13:39</div></div><div class="posttext">Thank you wrote to me.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>