<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how to add music throughout the installation program?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how to add music throughout the installation program? NSIS Discussion" />
	
	<title> how to add music throughout the installation program? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how to add music throughout the installation program?</div>
<hr />
<div class="pda"><a href="t-184194.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=184194">how to add music throughout the installation program?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 10:47</div></div><div class="posttext">I know how to add music during the splash screen period. <br />
<br />
I want to know how to add music during the whole installation process<br />
<br />
thanx :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flizebogen</div><div class="date">22nd June 2004, 11:52</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=169817</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 13:06</div></div><div class="posttext">ok how do u convert a .wma or .mp3 file to .mod?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">22nd June 2004, 13:21</div></div><div class="posttext">Lots of audio conversion utilities can be found here (http://www.tucows.com/audiocon95_license.html).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">22nd June 2004, 13:41</div></div><div class="posttext">Looking from my corner MCIWndCreate() MCIWndPlay() MCIWndStop() MCIWndDestroy() Win32 API calls via system plugin is a good way too (compare with using bassmod.dll). Some problems with mp3 files on old Windows versions may occur. While NSIS installer uses a set of dialog windows, it would be better to use 'parent' MCI window /MCIWndCreate(NULL,...)/ and hide it if need. This can also play avi files :)<br />
In one of my apps I had to re-write and add compact mp3 decoder for Win95 compatibility - customer request :-((.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 14:07</div></div><div class="posttext">ok i was wondering, can i use BASSWMA 2.0 ? As the file i want to play is a .WMA<br />
<br />
* my prog will be used on xp systems only</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd June 2004, 14:16</div></div><div class="posttext">Yes, but you need the original BASS.dll plugin to work, as the BASSWMA.dll plugin is an add-on plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 14:37</div></div><div class="posttext">ok im so confused with all that was written on the other topic that i dont know what to do.<br />
<br />
cud someone explain to me what n how do i go about playing a mp3, or wma file when the installer is running n what files do i need n where to place them. <br />
<br />
or if someone cud zip them all up n give them to me as im not really good at this<br />
<br />
I would really appreciate it thanx :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 14:43</div></div><div class="posttext">theres one more thing, I think NSIS has this plug-in already. have a look at this directory : C:\Program Files\NSIS\Contrib\BgImage<br />
<br />
read the BgImage.txt or Example.nsi <br />
<br />
so does it play music when the installer program is running?<br />
<br />
n which part of that code do i exactly have to copy on to my script?<br />
<br />
thanx :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 15:31</div></div><div class="posttext">can someone help me with my installer? as im having problems compiling it apart from the music thing as i havent added it to my script yet. <br />
<br />
I really need someones help here. If someone would like to help me pls pm me so i can give u my msn id</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">22nd June 2004, 18:49</div></div><div class="posttext">This forum is not a script writing service, you can post specific questions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 20:59</div></div><div class="posttext">where did u read i asked someone to make a acript for me. All of them were questions and whether someone could tell me how to go about it. I already have the script ready except for the plug-in parts. And get rid of your tone, It sucks.<br />
<br />
Can someone tell me whether the BgImage plugin that comes with NSIS has the abilty to play music during the installation process?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zimsms</div><div class="date">22nd June 2004, 21:24</div></div><div class="posttext">Why not read the documentation, I'm sure it covers all your questions. If not search the forum or the archive, I'm sure someone else has done it.<br />
<br />
Wouldn't playing music in the background of an install make the install painfully slow and annoying?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">22nd June 2004, 21:29</div></div><div class="posttext">I did read the documentation, and i still wasnt sure whether it would do that. That why i asked about it.<br />
<br />
how slow wud it make the installation process? I dont think it will be much</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">22nd June 2004, 23:33</div></div><div class="posttext">I'm now trying to make a .wma example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">23rd June 2004, 00:14</div></div><div class="posttext">Originally posted by anoopparwani <br />
where did u read i asked someone to make a acript for me (..)<br />
I mean that you have to attach script examples of what you have tried and the problems you have.<br />
<br />
I'm only trying to keep the forums a bit clean and useful. If you post specific questions in the forum everyone can help and find the results later. That way it also helps other people with similar questions. That is also the reason why you should post in the forum instead of asking people for e-mail addresses etc.<br />
<br />
I think you can imagine how much time it takes us to write all this software for free, all we ask in return is that you follow a few basic forum rules.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">23rd June 2004, 00:27</div></div><div class="posttext">It's here. As I said, it requires BASS.dll, BASSWMA.dll, and the plugin to call those which is the System plugin. I didn't post a .wma because I only have huge files. The usage is simple, replace &quot;music.wma&quot; with another music file. I put a Sleep command to make the music play for 20 seconds. I activated the looping (see ${BASS_SAMPLE_LOOP}), if you want to disable it, just remove it:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">23rd June 2004, 00:44</div></div><div class="posttext">I apologize, sorry :)<br />
<br />
well i got the music thing set up now. so thats not a problem.<br />
<br />
now what i want to do is add more install options like full, mini, standard, basic which will have different components selected. How do i add them to the script without having to go through the wizard?<br />
<br />
whats the difference in quality between a .mod file n the other normal formats like mp3, wma, etc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">23rd June 2004, 01:02</div></div><div class="posttext">now what i want to do is add more install options like full, mini, standard, basic which will have different components selected. How do i add them to the script without having to go through the wizard?<br />
For adding install types you can use InstType outside of Functions and Sections. Now about what selections will be selected by each install type, you can use the command SectionIn and put in the parameter insttype_index the indexes of the install types you want the section to be included in (i.e. SectionIn 1 2 3). The indexes are the order of installer types.<br />
<br />
whats the difference in quality between a .mod file n the other normal formats like mp3, wma, etc<br />
<br />
MOD music has a reduced size compared to other types. But it has a number of defined pitches (like playing a instrument) limiting the possibilities of making some varieties of songs. The quality is not as good as other types of files also.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">23rd June 2004, 01:03</div></div><div class="posttext">cool thanx. will try that out :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">23rd June 2004, 09:13</div></div><div class="posttext">Following script (2 lines only) works fine on my W2K server. On installer end, MCI window auto-closes (or use MCIWndDestroy if need). Try to add ShowWindow(HIDE). And MCIWndSetRepeat(true) - please note, this is macro, use SendMessage like I did it with MCIWndPlay(). See MSDN for details. <br />
yo-a-o_(fight_song_of_the_brunnen-g).mp3<br />
<br />
  !include &quot;MUI.nsh&quot;<br />
<br />
  !define APP_NAME &quot;sound_test&quot;<br />
Name ${APP_NAME}<br />
OutFile ${APP_NAME}.exe<br />
InstallDir $PROGRAMFILES\${APP_NAME}<br />
  !define MUI_ABORTWARNING<br />
  !insertmacro MUI_PAGE_WELCOME<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  !insertmacro MUI_PAGE_FINISH<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
;!macro MUI_CUSTOMFUNCTION_GUIINIT<br />
;!macroend<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\yo-a-o.mp3 yo-a-o.mp3<br />
  System::Call 'msvfw32.dll::MCIWndCreate(i 0, i 0,i 0x0070, t &quot;$PLUGINSDIR\yo-a-o.mp3&quot;) i .R0'<br />
  SendMessage $R0 0x0806 0 0<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
;Installer Sections<br />
Section &quot;Dummy Section&quot; SecDummy<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">23rd June 2004, 14:38</div></div><div class="posttext">Is there a way to cover the taskbar when the installation has an outer background? It leaves the taskbar on top. I would like the installer to cover the taskbar.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">24th June 2004, 22:49</div></div><div class="posttext">how do u go about changing the way u accept the license part of the installer?<br />
<br />
and which is the best compression?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">24th June 2004, 23:36</div></div><div class="posttext">ive been having problems compiling the script due to the license page n the language files.<br />
<br />
do the text files used for the license page have to have any special header?<br />
<br />
this is the error i get when compiling :<br />
NSIS Modern User Interface version 1.69 - © 2002-2004 Joost Verburg (C:\Program Files\NSIS\Contrib\Modern UI\System.nsh:11)<br />
!define: &quot;MUI_VERBOSE&quot;=&quot;3&quot;<br />
!include: closed: &quot;C:\Program Files\NSIS\Contrib\Modern UI\System.nsh&quot;<br />
!include: closed: &quot;C:\Program Files\NSIS\Include\MUI.nsh&quot;<br />
!define: &quot;MUI_ABORTWARNING&quot;=&quot;&quot;<br />
!insertmacro: MUI_PAGE_WELCOME<br />
!insertmacro: end of MUI_PAGE_WELCOME<br />
!insertmacro: MUI_PAGE_LICENSE<br />
LicenseData: open failed &quot;data\app.txt&quot;<br />
Usage: LicenseData local_file_that_has_license_text | license_lang_string<br />
Error in macro MUI_PAGE_LICENSE on macroline 21<br />
Error in script &quot;stdin&quot; on line 103 -- aborting creation process<br />
 <br />
<br />
I get this lanuguage error when i disable the license page n reaches the language part :<br />
<br />
!insertmacro: end of MUI_UNPAGE_INSTFILES<br />
!insertmacro: MUI_LANGUAGE<br />
File: &quot;data\wizard.jpg&quot; -&gt; no files found.<br />
Usage: File [/nonfatal] [/a] ([/r] filespec [...]|/oname=outfile one_file_only)<br />
Error in macro MUI_WELCOMEFINISHPAGE_INIT on macroline 5<br />
Error in macro MUI_GUIINIT on macroline 2<br />
Error in macro MUI_FUNCTION_GUIINIT on macroline 4<br />
Error in macro MUI_INSERT on macroline 11<br />
Error in macro MUI_LANGUAGEFILE_BEGIN on macroline 4<br />
!include: error in script: &quot;C:\Program Files\NSIS\Contrib\Modern UI\Language files\English.nsh&quot; on line 9<br />
Error in macro MUI_LANGUAGE on macroline 5<br />
Error in script &quot;stdin&quot; on line 115 -- aborting creation process<br />
 <br />
<br />
ive attached my .nsi file incase something is wrong with that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 09:24</div></div><div class="posttext">somebody help me plss</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 10:42</div></div><div class="posttext">Read the error messages:LicenseData: open failed &quot;data\app.txt&quot;File: &quot;data\wizard.jpg&quot; -&gt; no files found.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 11:09</div></div><div class="posttext">ok thats fixed. i had to keep the license file name &quot;license.txt&quot; it wouldnt work otherwise. and by fixing that, the language errors also disappeared.<br />
<br />
now i have a new problem<br />
<br />
<br />
IfFileExists: &quot;$WINDIR\ServicePackFiles\i386\$R2&quot; ? 0 : upgradefile.next1_400.6<br />
CopyFiles: &quot;$TEMP\SysFiles\$R2&quot; -&gt; &quot;$WINDIR\ServicePackFiles\i386\&quot;, size=0KB<br />
IfFileExists: &quot;$SYSDIR\dllcache\$R2&quot; ? 0 : upgradefile.next2_400.6<br />
CopyFiles: &quot;$TEMP\SysFiles\$R2&quot; -&gt; &quot;$SYSDIR\dllcache\&quot;, size=0KB<br />
CopyFiles: &quot;$TEMP\SysFiles\$R2&quot; -&gt; &quot;$R1\&quot;, size=0KB<br />
Delete: /REBOOTOK &quot;$R1\$R2.SysFile.tmp&quot;<br />
Delete: &quot;$TEMP\SysFiles\$R2&quot;<br />
!undef: &quot;UPGRADEFILE_UNIQUE&quot;<br />
Push: $R0<br />
Push: $R1<br />
Push: $R2<br />
!insertmacro: end of UpgradeFile<br />
SectionEnd<br />
SubSection Misc CPL Files -&gt;(MiscCPL)<br />
Section: &quot;Adobe Gamma&quot; -&gt;(AdobeGamma)<br />
!insertmacro: UpgradeFile<br />
!insertmacro: macro &quot;UpgradeFile&quot; requires 3 parameter(s), passed 4!<br />
Error in script &quot;stdin&quot; on line 412 -- aborting creation process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 11:14</div></div><div class="posttext">Read the error message.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 11:39</div></div><div class="posttext">!insertmacro: macro &quot;UpgradeFile&quot; requires 3 parameter(s), passed 4!<br />
<br />
i dont understnd it :confused: <br />
<br />
I didnt even understand the previous one where the .txt file name had to be named license.txt n no other. All it said was &quot;open failed &quot;data\app.txt&quot;<br />
<br />
but as i was trying with different file names n named it license.txt. surprisingly, it worked</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 11:47</div></div><div class="posttext">It says it needs 3 parameters and that you've passed 4. Go to the line mentioned, make it 3 parameters.<br />
<br />
As for the previous error, it said it couldn't open data\app.txt. That usually means it can't find the file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 11:52</div></div><div class="posttext">whats a parameter?<br />
<br />
this is the part in the script :<br />
<br />
Section &quot;Adobe Gamma&quot; AdobeGamma<br />
                !insertmacro UpgradeFile &quot;files\cpl\optional&quot; adobe gamma.cpl &quot;$ProgramFiles\Common Files\Adobe\Calibration&quot;<br />
        SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 11:54</div></div><div class="posttext">!insertmacro UpgradeFile &quot;files\cpl\optional&quot; adobe gamma.cpl &quot;$ProgramFiles\Common Files\Adobe\Calibration&quot;<br />
^ command    ^ macro     ^ 1st parameter      ^ 2nd ^ 3rd     ^ 4th</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 12:09</div></div><div class="posttext">damn.. that file is named as &quot;adobe gamma.cpl&quot; if i remove the space between it, it wont have any effect on the users comp when its installed. The file name has to be&quot;adobe gamma.cpl&quot;<br />
<br />
how do i solve this problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 12:10</div></div><div class="posttext">The fourth parameter, which should be the thrid, also has spaces. To avoid it being treated as two parameters, you've quoted it. Do the same for the second parameter.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 12:29</div></div><div class="posttext">is this how it should be ?<br />
<br />
!insertmacro UpgradeFile &quot;files\cpl\optional\adobe gamma.cpl&quot; &quot;$ProgramFiles\Common Files\Adobe\Calibration&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 12:40</div></div><div class="posttext">Have you tried compiling it?<br />
<br />
Now you have just 2 parameters. It still needs 3.<br />
<br />
You should read the UpgradeDLL documentation again. Even after the parameters separation will be sorted out, the parameters' values will not be right.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 12:47</div></div><div class="posttext">so trying to add this file is useless?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 12:50</div></div><div class="posttext">No, that's not what I said. I said you should read UpgradeDLL's documentation again because the parameters are wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">25th June 2004, 12:56</div></div><div class="posttext">ok will read that.<br />
<br />
I have a few more questions<br />
<br />
how do i make the components page have the description window at the bottom?<br />
<br />
and how do i make the installer page have the &quot;check box&quot; agree style?<br />
<br />
n my installer has come out to be 92 MB without the adobegamma.cpl<br />
<br />
how do i make it compress more? i really need to compress this as low as possible. I know the installer has quite a few methods of compression. which is the best? and how do i make it use it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2004, 13:09</div></div><div class="posttext">All of your questions can be answered by a short forum search. The first and third questions were just recently discussed. The second questions was probably discussed sometime ago, and if not, there is always the documentation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">27th June 2004, 10:39</div></div><div class="posttext">i still havent found .wma/.mp3 to .mod/.xm converter<br />
<br />
ive tried cdmaster from the link posted above. but that just converts .mod to mp3/wav<br />
<br />
I need one that does the opposite. <br />
<br />
anyone know of one?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">28th June 2004, 12:09</div></div><div class="posttext">is there no such converter??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">28th June 2004, 16:43</div></div><div class="posttext">What does this have to do with NSIS?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">28th June 2004, 17:38</div></div><div class="posttext">I don't know what converter u need for wma file.<br />
1. Load attached script sound.nsi<br />
2. Change wma file name in !define SND_NAME &quot;Blues.wma&quot;<br />
3. Compile script<br />
4. Run sound_test.exe<br />
5. Update your script<br />
6. Have fun</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">28th June 2004, 17:40</div></div><div class="posttext">Originally posted by anoopparwani <br />
is there no such converter??  <br />
<br />
no. next time try google, as this is nsis unrelated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">28th June 2004, 22:45</div></div><div class="posttext">ive tried google. the reason y i want that is im using music in my installer n the script uses .mod\.xm etc type files. <br />
<br />
i need help on this last thing :<br />
ive added a custom page with this code :<br />
<br />
PageEx license <br />
Caption &quot;Readme&quot; <br />
     LicenseData &quot;files\extra\readme.txt&quot; <br />
     LicenseText &quot;Read Me File&quot; &quot;Next &gt;&quot; <br />
     LicenseForceSelection off <br />
     PageExEnd <br />
<br />
now the thing with this is, the header and sub header shows the license agreement header n sub header.<br />
<br />
how do i change the header n sub header with the code ive used.<br />
<br />
these commands dont work with it :<br />
<br />
<br />
<br />
!define MUI_PAGE_HEADER_TEXT &quot;Read Me&quot;<br />
!define MUI_PAGE_HEADER_SUBTEXT &quot;Please review the Read Me before proceeding.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">29th June 2004, 03:22</div></div><div class="posttext">Now I can catch it, you're saying about converting that script that Takhir gave you to be .mod playable. There was an example on that older thread about .mod music some script examples which played .mod/.xm music. Give a search and you'll find what you want.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anoopparwani</div><div class="date">29th June 2004, 03:59</div></div><div class="posttext">lol no. i want a real music format .mp3/.wav to .mod/.xm conveter/encoder.<br />
<br />
and anyone know the header n sub header command for the custom page script ive used ?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>