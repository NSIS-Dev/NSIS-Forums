<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Search the hard drive For Delete, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Search the hard drive For Delete NSIS Discussion" />
	
	<title> Search the hard drive For Delete [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Search the hard drive For Delete</div>
<hr />
<div class="pda"><a href="t-271966.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=271966">Search the hard drive For Delete</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 15:32</div></div><div class="posttext">Hi<br />
<br />
<br />
${GetDrives} &quot;[Option]&quot; &quot;Function&quot;<br />
&quot;[Option]&quot; ; [FDD+HDD+CDROM+NET+RAM]<br />
; FDD Floppy Disk Drives<br />
; HDD Hard Disk Drives<br />
; CDROM CD-ROM Drives<br />
; NET Network Drives<br />
; RAM RAM Disk Drives<br />
;<br />
; [ALL]<br />
; Find all drives by letter (default)<br />
;<br />
&quot;Function&quot; ; Callback function when found<br />
<br />
Function &quot;Function&quot;<br />
; $9 &quot;drive letter&quot; (a:\ c:\ ...)<br />
; $8 &quot;drive type&quot; (FDD HDD ...)<br />
<br />
; $R0-$R9 are not used (save data in them).<br />
; ...<br />
<br />
Push $var ; If $var=&quot;StopGetDrives&quot; Then exit from function<br />
FunctionEnd<br />
<br />
for Example<br />
<br />
${locate::Open} &quot;j:\&quot; &quot;/F=1 /D=1 /S=,Kb /T=,Creation delete/M=*.nsi /SD=NAME /B=1&quot; $R0<br />
<br />
Search For only .nsi file for delete<br />
<br />
THANKS:cry: :cry: :cry:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 16:05</div></div><div class="posttext">plz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 16:37</div></div><div class="posttext">plz hlp<br />
<br />
Name &quot;Locate&quot;<br />
OutFile &quot;Locate.exe&quot;<br />
<br />
!include &quot;Locate.nsh&quot;<br />
!include &quot;Sections.nsh&quot;<br />
<br />
Page components<br />
Page instfiles<br />
<br />
Section &quot;Search and write founded in text file&quot; SearchAndWriteInFile<br />
	GetTempFileName $1<br />
	FileOpen $2 $1 w<br />
<br />
	${locate::Open} &quot;j:\&quot; &quot;/M=*.nsi /L=F&quot; $R0<br />
<br />
<br />
        loop:<br />
	${locate::Find} $R0 $R1 $R2 $R3 $R4 $R5 $R6<br />
<br />
        RMDir $R0<br />
	StrCmp $R1 '' close<br />
	StrCmp $R4 '' 0 +3<br />
	FileWrite $2 '$R1 $\r$\n'<br />
	goto +2<br />
	FileWrite $2 '@del $0 $R1 $\r$\n'<br />
	goto loop<br />
<br />
	close:<br />
	${locate::Close} $R0<br />
	${locate::Unload}<br />
	FileClose $2<br />
	Exec '&quot;notepad.exe&quot; &quot;$1&quot;'<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 22:00</div></div><div class="posttext">helllllllllllllllllllllppppppppppppppppppp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th May 2007, 22:30</div></div><div class="posttext">What exactly are you trying to do?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 22:42</div></div><div class="posttext">merci Afrow UK<br />
<br />
I WISHING Search the hard drive For Delete File Example nsi file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th May 2007, 22:57</div></div><div class="posttext">Please use this:<br />
http://babelfish.altavista.com/<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">29th May 2007, 23:06</div></div><div class="posttext">1-Finds files .nsi all hard drive c:\ d:\ e:\ f:\ ....<br />
2-delete .nsi files<br />
3- end</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 00:22</div></div><div class="posttext">helooooo..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">30th May 2007, 04:20</div></div><div class="posttext">I don't mean to offend the original poster, but I don't see a valid use for his request. If there are nsi files on the target system they should not be deleted unless you are uninstalling your own program and the nsi files were put there by your installer. In such a situation you should know where they were installed and not need to search every hard drive.<br />
<br />
I would be furious if some installer I ran deleted all of the nsi files on my computer.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 09:45</div></div><div class="posttext">no. i am for Example EXPLAINED<br />
<br />
ok for Example .db</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 11:22</div></div><div class="posttext">plz.....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">30th May 2007, 11:53</div></div><div class="posttext">:)<br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
!include &quot;Locate.nsh&quot;<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro GetDrives<br />
<br />
Section<br />
	${GetDrives} &quot;HDD&quot; &quot;GetDrivesCallback&quot;<br />
<br />
	${locate::Unload}<br />
SectionEnd<br />
<br />
Function GetDrivesCallback<br />
	StrCpy $9 $9 2<br />
	${locate::Open} &quot;$9&quot; &quot;/F=1 /D=0 /M=*.nsi /B=1&quot; $0<br />
	StrCmp $0 0 close<br />
<br />
	loop:<br />
	${locate::Find} $0 $1 $2 $3 $4 $5 $6<br />
	StrCmp $1 '' close<br />
<br />
	#Your code<br />
;	Delete $1<br />
	goto loop<br />
<br />
	close:<br />
	${locate::Close} $0<br />
<br />
	Push 0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 17:04</div></div><div class="posttext">Thanks Instructor , I can test the code vrey good Thanks <br />
<br />
But Never not delete file<br />
 <br />
Example <br />
<br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
!include &quot;Locate.nsh&quot;<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro GetDrives<br />
<br />
Section<br />
	${GetDrives} &quot;HDD&quot; &quot;GetDrivesCallback&quot;<br />
<br />
	${locate::Unload}<br />
SectionEnd<br />
<br />
Function GetDrivesCallback<br />
	StrCpy $9 $9 2<br />
	${locate::Open} &quot;$9&quot; &quot;/F=1 /D=0 /M=*.db /B=1&quot; $0<br />
	StrCmp $0 0 close<br />
<br />
	loop:<br />
	${locate::Find} $0 $1 $2 $3 $4 $5 $6<br />
	StrCmp $1 '' close<br />
<br />
	#Your code<br />
;	Delete $1<br />
	goto loop<br />
<br />
	close:<br />
	${locate::Close} $0<br />
<br />
	Push 0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 17:27</div></div><div class="posttext">Plz hlp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th May 2007, 17:40</div></div><div class="posttext">The ; in front of the Delete means that line is commented out.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 17:54</div></div><div class="posttext">tanks<br />
<br />
so..  plz BENEFICIAL Example .db THANKS AGAIN<br />
<br />
Name &quot;Test&quot;<br />
OutFile &quot;Test.exe&quot;<br />
<br />
!include &quot;Locate.nsh&quot;<br />
!include &quot;FileFunc.nsh&quot;<br />
!insertmacro GetDrives<br />
<br />
Section<br />
	${GetDrives} &quot;HDD&quot; &quot;GetDrivesCallback&quot;<br />
<br />
	${locate::Unload}<br />
SectionEnd<br />
<br />
Function GetDrivesCallback<br />
	StrCpy $9 $9 2<br />
	${locate::Open} &quot;$9&quot; &quot;/F=1 /D=0 /M=*.db /B=1&quot; $0<br />
	StrCmp $0 0 close<br />
<br />
	loop:<br />
	${locate::Find} $0 $1 $2 $3 $4 $5 $6<br />
	StrCmp $1 '' close<br />
<br />
        Delete $0<br />
        Delete &quot;c:\*.db&quot;<br />
	goto loop<br />
<br />
	close:<br />
	${locate::Close} $0<br />
<br />
	Push 0<br />
FunctionEnd   PLZ Example for me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 18:48</div></div><div class="posttext">PLZ Example for me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">30th May 2007, 21:55</div></div><div class="posttext">HI<br />
hellp me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">31st May 2007, 08:23</div></div><div class="posttext">plz hlp....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">31st May 2007, 11:59</div></div><div class="posttext">PLZ Example for me</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">31st May 2007, 14:28</div></div><div class="posttext">All your multiple posts and the whining and crying aren't going to get you answers any faster.  In fact, they only serve to do the opposite!!  :mad: <br />
<br />
Instructor's post should give you what you want. However, as Afrow already stated, you need to remove the semicolon from the Delete statement.  In other words, change this:<br />
 #Your code<br />
; Delete $1<br />
goto loop to this:  #Your code<br />
Delete $1<br />
goto loop<br />
<br />
You might also need to adjust the parameters of the search ( ${locate::Open}) in order to remove the files you want to remove.<br />
<br />
If you are still confused, download and read the docs regarding the Locate plugin (http://nsis.sourceforge.net/Locate_plugin).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">didava</div><div class="date">31st May 2007, 16:57</div></div><div class="posttext">Comperio THANKFUL :o ;) :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>