<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" one file bundle, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  one file bundle NSIS Discussion" />
	
	<title> one file bundle [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  one file bundle</div>
<hr />
<div class="pda"><a href="t-332664.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332664">one file bundle</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">corneliu</div><div class="date">20th July 2011, 16:26</div></div><div class="posttext">Hey everyone,<br />
<br />
I have built an installer which does the job just fine. Now I would like to bundle all the files (icons, logos, licenses, nsi installer and other dependencies) in one installer file. I can't find a tutorial that explains this stuff. I know it exists. Can anybody point to it, please?<br />
<br />
Thank you in advance,<br />
<br />
Corneliu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">20th July 2011, 16:34</div></div><div class="posttext">What exactly are you trying to accomplish? You can put any file in your installer by using the File command...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">20th July 2011, 19:31</div></div><div class="posttext">Once you have compiled your installer script (.nsi) with MakeNSIS.exe, you get a fully self-contained installer EXE file. That EXE contains all the required resources (like Icon, License, etc). And, as MSG said, if any files are extracted from your installer (during the install process) using the &quot;File&quot; command, then these file are included into the installer EXE automatically. No need to &quot;bundle&quot; anything manually.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">corneliu</div><div class="date">20th July 2011, 20:11</div></div><div class="posttext">Thank you MSG and LoRd_MuldeR,<br />
<br />
That's what I was looking for, the File command. One thing I want to mention for those who are looking for help and are reading this thread. You must set SetOutPath before using the File command otherwise the files are not found.<br />
Everything works well now.<br />
<br />
Cheers,<br />
<br />
Corneliu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">20th July 2011, 20:23</div></div><div class="posttext">You must set SetOutPath before using the File command otherwise the files are not found.<br />
<br />
Not found?<br />
<br />
SetOutPath sets the output path ($OUTDIR) where the files are extracted to - at install time.<br />
Usually you will do &quot;SetOutPath $INSTDIR&quot;, so the files are extracted to the install path ($INSTDIR) the user has selected.<br />
And this is documented quite clear, I think.<br />
<br />
4.9.1.5 File<br />
Adds file(s) to be extracted to the current output path ($OUTDIR).<br />
Note that the output file name is $OUTDIR\filename_portion_of_file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">corneliu</div><div class="date">20th July 2011, 21:15</div></div><div class="posttext">When the script is compiled the files are added to the executable. All good so far, the executable is fat. Now when you execute the executable, it extracts the files somewhere where it can't find them. I want to copy the extracted files to the installation folder in Program Files. But they are not found anymore. That's why I have to set SetOutPath  before using the File command. I know it is documented, just it can be easily overlooked. It took me quite a while to figure it out.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">20th July 2011, 21:22</div></div><div class="posttext">File is an install time command. It is executed when the user runs the installer. And, as the documentation explains, File extracts to the path specified by $OUTDIR. You can change $OUTDIR by using SetOutPath. You could use this to extract to some fixed path, e.g. a specific sub-dir of &quot;Program Files&quot;. However it usually is better to set $OUTDIR to $INSTDIR, i.e. the install dir chosen by the user. You can set a default for $INSTDIR via InstallDir. And always use $PROGRAMFILES instead of &quot;hard-coded&quot; paths.<br />
<br />
<br />
Extremely bad idea:<br />
Section &quot;Application&quot;<br />
    SetOutPath &quot;C:\Program Files\Your Company\Your Product&quot;<br />
    File &quot;MySuperDuperApplication.exe&quot;<br />
SectionEnd<br />
<br />
Works okay, but usually not recommended:<br />
Section &quot;Application&quot;<br />
    SetOutPath &quot;$PROGRAMFILES\Your Company\Your Product&quot;<br />
    File &quot;MySuperDuperApplication.exe&quot;<br />
SectionEnd<br />
<br />
Recommended:<br />
InstallDir &quot;$PROGRAMFILES\Your Company\Your Product&quot;<br />
<br />
Section &quot;Application&quot;<br />
    SetOutPath $INSTDIR<br />
    File &quot;MySuperDuperApplication.exe&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>