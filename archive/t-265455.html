<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Check for 64 bit CPU, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Check for 64 bit CPU NSIS Discussion" />
	
	<title> Check for 64 bit CPU [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Check for 64 bit CPU</div>
<hr />
<div class="pda"><a href="t-265455.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265455">Check for 64 bit CPU</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">switt</div><div class="date">9th February 2007, 12:44</div></div><div class="posttext">I am looking for a way to check the architecture of the cpu (32bit or 64bit). My installation script should deny a installation on a 64 bit system.<br />
<br />
Thanks for your help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th February 2007, 12:53</div></div><div class="posttext">The Debian installer (http://goodbye-microsoft.com/) has a plug-in that uses cupid to find out the processor architecture.<br />
<br />
In case you just want to install on a 32-bit OS, you can use ${RunningX64} from x64.nsh.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">9th February 2007, 13:57</div></div><div class="posttext">!ifndef PROC<br />
  !define PROC 32 ; to be defined in cmd line<br />
!endif<br />
LangString wrongWow ${LANG_ENGLISH} &quot;This distribution is for ${PROC} bits computers only.&quot;<br />
<br />
Function .onInit<br />
<br />
  System::Call &quot;kernel32::GetCurrentProcess() i .s&quot;<br />
  System::Call &quot;kernel32::IsWow64Process(i s, *i .r0)&quot;<br />
  IntCmp $0 0 is32<br />
  IntCmp ${PROC} 64 procOk<br />
wrongProc:<br />
  MessageBox MB_OK|MB_ICONSTOP $(wrongWow)<br />
  Abort $(wrongWow)<br />
is32:<br />
  IntCmp ${PROC} 32 procOk wrongProc wrongProc<br />
procOk:<br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th February 2007, 14:05</div></div><div class="posttext">That would only work if the user is running on x64 OS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">9th February 2007, 14:21</div></div><div class="posttext">This script works on all systems. Attached is a popup of x64 package on my 32-bits XP. Normall command file defines PROC for makensis.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th February 2007, 14:28</div></div><div class="posttext">IsWow64Process tests if the OS is running x64. It won't tell you the real processor capability. It's what ${RunningX64} does.<br />
<br />
If you want to know the real capability of the processor itself and not the OS, you have to use cpuid. Even GetNativeSystemInfo returns x86 while running XP on x64. And that API is not even available on versions below XP.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">12th February 2007, 15:22</div></div><div class="posttext">You probably have a good reason for deny the installer to run on 64Bit Win OS,<br />
<br />
But keep in mind that 32Bit installer and applications just work fine in most cases.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">12th February 2007, 15:36</div></div><div class="posttext">SCSI passthrough driver included to package and it not works on wrong OS.. So we have 2 packages, 32 and 64.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">13th February 2007, 14:40</div></div><div class="posttext">&quot;SCSI passthrough driver&quot;, yes that IS a good reason! ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>