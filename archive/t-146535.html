<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Modern UI and multilanguage installers, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Modern UI and multilanguage installers NSIS Discussion" />
	
	<title> Modern UI and multilanguage installers [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Modern UI and multilanguage installers</div>
<hr />
<div class="pda"><a href="t-146535.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=146535">Modern UI and multilanguage installers</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">21st August 2003, 18:11</div></div><div class="posttext">I've recently been trying to create a multilanguage installer using the Modern UI but have run into some issues regarding some of the MUI defined constants.<br />
<br />
The following constants,<br />
<br />
!define MUI_INNERTEXT_LICENSE_TOP    <br />
!define MUI_INNERTEXT_LICENSE_BOTTOM <br />
<br />
Are used for defining text on the license screen.  Is there anyway to specify text for these constants in different languages within the same file?<br />
<br />
Doing the following will not work as I expected,<br />
<br />
!define MUI_INNERTEXT_LICENSE_TOP  &quot;Hi&quot;  <br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
!define MUI_INNERTEXT_LICENSE_TOP &quot;Bonjour&quot;<br />
!insertmacro MUI_LANGUAGE &quot;French&quot;<br />
<br />
All you get is errors because makensis sees a multiply defined constant.  Is there a way using the LangDLL plugin to find the selected language at runtime and then define the constants that the Modern UI should use based on the selected language?<br />
<br />
If the language is known before when the script is being created there are no problems because you only need to have one MUI_LANGUAGE declaration. The issues arise when you want to have a string for each language for the same Modern UI constant.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">21st August 2003, 21:33</div></div><div class="posttext">If you want to change one of the MUI language strings, use !insertmacro instead of !define.<br />
<br />
For example:!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP &quot;Bonjour&quot;<br />
!insertmacro MUI_LANGUAGE &quot;FrenchThis assumes you are using NSIS 2.0b4 with CVS updates.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">21st August 2003, 22:09</div></div><div class="posttext">First, thanks for the reply pengyou.<br />
<br />
<br />
!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP &quot;Bonjour&quot;<br />
!insertmacro MUI_LANGUAGE &quot;French<br />
 <br />
<br />
The above would seem to work, however when I try to define the same string for a different language it just shows up as blank when I run the installer.  <br />
<br />
For example,<br />
<br />
<br />
!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP &quot;Hello&quot;<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP <br />
&quot;Hello in Japanese&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Japanese&quot;<br />
 <br />
<br />
In the above case the english string will be loaded but the Japanese will appear as blank text.  Any thoughts?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">21st August 2003, 22:26</div></div><div class="posttext">Perhaps the problem is simply that the text string &quot;Hello in Japanese&quot; is not in Japanese?<br />
<br />
If you want to see what some &quot;real&quot; Japanese looks like, have a look at the Japanese.nsh file in the &quot;Contrib\Modern UI\Language files&quot; folder under the main NSIS folder.<br />
<br />
If you want to test things, try using English and French:!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP &quot;Hello&quot;<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
!insertmacro MUI_LANGUAGEFILE_STRING MUI_INNERTEXT_LICENSE_TOP &quot;Hello in French&quot;<br />
!insertmacro MUI_LANGUAGE &quot;French&quot;<br />
<br />
You should see both text strings this time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">21st August 2003, 22:37</div></div><div class="posttext">pengyou, your code is wrong.<br />
<br />
The code above:!define MUI_INNERTEXT_LICENSE_TOP &quot;Hi&quot; <br />
!insertmacro MUI_LANGUAGE &quot;English&quot; <br />
<br />
!define MUI_INNERTEXT_LICENSE_TOP &quot;Bonjour&quot; <br />
!insertmacro MUI_LANGUAGE &quot;French&quot;Is just fine and works for me. Are you sure you are using the right NSIS version and did not make scripting mistakes?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">21st August 2003, 22:45</div></div><div class="posttext">I still get a blank string, even if I create an installer in French.  <br />
I'm using the development snapshot from yesterday (Aug 20th) so I would think everything is up to date.  Is it possible the LangDLL plugin could be causing some issues?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">21st August 2003, 22:50</div></div><div class="posttext">Can you attach your script (remove files etc. so it will compile on other system)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">21st August 2003, 23:08</div></div><div class="posttext">Sure, here is the toned down version of it.  I can't even get it to compile as makensis complains of multiply defined symbols.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">21st August 2003, 23:23</div></div><div class="posttext">Joost,<br />
<br />
Your code does not work on my system. I am using the latest CVS snapshot (21 August 2003, 19:44 GMT) on Win98SE.<br />
<br />
Attached is a modified version of the standard MultiLanguage.nsi script. I have reduced it to three languages and tried adding a !define to customise the MUI_INNERTEXT_LICENSE_TOP string.<br />
<br />
When I try to compile this script, it fails:!define: &quot;MUI_INNERTEXT_LICENSE_TOP&quot;=&quot;Hi-English&quot;<br />
!insertmacro: MUI_LANGUAGE<br />
!insertmacro: end of MUI_LANGUAGE<br />
!define: &quot;MUI_INNERTEXT_LICENSE_TOP&quot; already defined!<br />
Error in script &quot;C:\Program Files\panic\MultiLanguage.nsi&quot; on line 55 -- aborting creation processIf I change the !define statements to !insertmacro ones, as described in my earlier posting, the script compiles OK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">21st August 2003, 23:34</div></div><div class="posttext">You have not added a license page to your script. That's why you get errors.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">22nd August 2003, 00:06</div></div><div class="posttext">Joost, thanks for the explanation. Some things are so obvious, I have trouble seeing them ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rsegal</div><div class="date">22nd August 2003, 01:04</div></div><div class="posttext">Yeh thanks Joost, I definitely missed that one.<br />
<br />
Is there anyway to localize MUI_PRODUCT?.  If I try to define it for different languages I get a multiply defined symbol error.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">22nd August 2003, 12:09</div></div><div class="posttext">Yes, use !undef after inserting the language file.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>