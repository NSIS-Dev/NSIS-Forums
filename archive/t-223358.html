<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" system.dll remains in $plugindir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  system.dll remains in $plugindir NSIS Discussion" />
	
	<title> system.dll remains in $plugindir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  system.dll remains in $plugindir</div>
<hr />
<div class="pda"><a href="t-223358.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223358">system.dll remains in $plugindir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">4th August 2005, 14:15</div></div><div class="posttext">Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\bass.dll &quot;bass.dll&quot;<br />
  File /oname=$PLUGINSDIR\winstart.mp3 &quot;winstart.mp3&quot;<br />
<br />
  System::Call /NOUNLOAD '${BASS_Init} (1, 44100,, r0,)'<br />
  System::Call /NOUNLOAD '${BASS_SampleLoad} (0, &quot;$PLUGINSDIR\${MUSICNAME}&quot;, 0, 0, 1, 0) .r0'<br />
  System::Call /NOUNLOAD '${BASS_SamplePlay} (r0).r0'<br />
<br />
  ;wait ~41 sec<br />
  Banner::show /NOUNLOAD &quot;Startsequenz - bitte warten.&quot;<br />
  sleep 41000<br />
  Banner::destroy<br />
<br />
  ;stop sound<br />
  System::Call '${BASS_Free}'<br />
FunctionEnd<br />
<br />
Function .onGUIEnd<br />
  Delete &quot;$PLUGINSDIR\*.*&quot;<br />
  RMdir &quot;$PLUGINSDIR&quot;<br />
FunctionEnd<br />
<br />
<br />
nsis 2.07<br />
<br />
whats wrong?<br />
<br />
(either a sleep 1000 in .onGuiend does not work)<br />
<br />
#<br />
theres no other code - thats all</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th August 2005, 19:10</div></div><div class="posttext">Where're BASS_* defined? Attach a complete example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">5th August 2005, 19:41</div></div><div class="posttext">;--------------------------------<br />
; Base names definition (to be changed)<br />
<br />
  !define APP_NAME &quot;winstart&quot;<br />
  !define MUSICNAME &quot;winstart.mp3&quot;<br />
<br />
;--------------------------------<br />
; General Attributes<br />
<br />
  !include '${NSISDIR}\Contrib\BASS\Bass.nsh'<br />
<br />
  Name &quot;${APP_NAME}&quot;<br />
  OutFile &quot;${APP_NAME}.exe&quot;<br />
<br />
  ShowInstDetails nevershow<br />
  ShowUninstDetails nevershow<br />
<br />
  ;automatically close the installer when done.<br />
  AutoCloseWindow true<br />
<br />
<br />
;--------------------------------<br />
; Installer Sections<br />
<br />
Section<br />
SectionEnd<br />
<br />
;--------------------------------<br />
; Installer Functions<br />
<br />
Function .onInit<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\bass.dll &quot;bass.dll&quot;<br />
  File /oname=$PLUGINSDIR\winstart.mp3 &quot;winstart.mp3&quot;<br />
<br />
  System::Call /NOUNLOAD '${BASS_Init} (1, 44100,, r0,)'<br />
  System::Call /NOUNLOAD '${BASS_SampleLoad} (0, &quot;$PLUGINSDIR\${MUSICNAME}&quot;, 0, 0, 1, 0) .r0'<br />
  System::Call /NOUNLOAD '${BASS_SamplePlay} (r0).r0'<br />
<br />
  ;wait ~41 sec<br />
  Banner::show /NOUNLOAD &quot;Startsequenz - bitte warten.&quot;<br />
  sleep 41000<br />
  Banner::destroy<br />
<br />
  ;stop sound<br />
  System::Call '${BASS_Free}'<br />
FunctionEnd<br />
<br />
<br />
Function .onGUIEnd<br />
  call delete<br />
  Delete &quot;$PLUGINSDIR\*.*&quot;<br />
  RMdir &quot;$PLUGINSDIR&quot;<br />
FunctionEnd<br />
;--------------------------------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th August 2005, 19:42</div></div><div class="posttext">Where's Bass.nsh? Attach a complete example, preferably with a minimal amount of code and external dependencies.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">5th August 2005, 20:43</div></div><div class="posttext">I know where the header comes from:<br />
<br />
http://forums.winamp.com/showthread.php?postid=1318917#post1318917<br />
<br />
The header is quite old (I need to update it later). But I don't know what might be happening here. Maybe that's because you added other files to $PLUGINSDIR, or maybe the BASS_FREE needs a &quot;?u&quot; option attached to its end to unload the BASS.dll plugin, or even maybe to use System::Call &quot;&quot; after the BASS_FREE is called.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">6th August 2005, 01:15</div></div><div class="posttext">@deguix - thats right - that source. i never needed it till this week. formerly i used bassmod for mod files but i need mp3 now.<br />
<br />
&gt;&gt;   System::Call ''<br />
<br />
that did it - to easy for me &lt;lol&gt; <br />
<br />
Thx !</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>