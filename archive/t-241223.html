<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" plugin code question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  plugin code question NSIS Discussion" />
	
	<title> plugin code question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  plugin code question</div>
<hr />
<div class="pda"><a href="t-241223.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=241223">plugin code question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">18th March 2006, 23:11</div></div><div class="posttext">I am currently re-writing one of my plugins for nsis and I have a question. I am re-writing the bgimage plugin to suit my needs, and I have made the background window have a title bar and system controls (icon, minimize, maximize, and close). The window (not deing a dialog) has a default application icon instead of having the icon from the nsis installer. In the past I have included the icon in the installer and extracted it to the plugins dir, then the plugin loads the icon from the file. <br />
<br />
My question is can I load the icon from the nsis installer instead of from the file in the plugins dir. I have already tried loading the icon from the nsis installer with no luck.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">19th March 2006, 05:39</div></div><div class="posttext">what about WM_GETICON? or ExtractIcon(Ex)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">19th March 2006, 06:51</div></div><div class="posttext">ExtractIcon is the best way, but LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(103)), 0); works as well ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">19th March 2006, 22:11</div></div><div class="posttext">I have tried those but not with the parameters in the example. Thanks for the answer, I will try it tonight.<br />
<br />
[edit]: I now use scons to build all of my software... all two of my projects :o. I still use VC 6 IDE to edit the source code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">20th March 2006, 21:57</div></div><div class="posttext">It does work. Almost everything else I tried did not work. I didn't know I could use GetModuleHandle(NULL) as the instance handle. Thanks guys.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">21st March 2006, 01:39</div></div><div class="posttext">Originally posted by JasonFriday13 <br />
I didn't know I could use GetModuleHandle(NULL) as the instance handle. Thanks guys. <br />
Why not :)<br />
<br />
From msdn:<br />
<br />
If this parameter is NULL, GetModuleHandle returns a handle to the file used to create the calling process (.exe file).<br />
<br />
<br />
:p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">21st March 2006, 02:59</div></div><div class="posttext">I actually meant that I didn't know the function existed :rolleyes:. You learn something everyday :o.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">23rd March 2006, 00:47</div></div><div class="posttext">I have another question. It is the same question I asked last year about moving a progress bar in my custom dialog, where the value is taken from the instfiles page progress bar. Kichik already gave a solution, but I don't know what subclassing is, and I don't know how to forward messages either. Giving an example .cpp and/or .rc file would be a big help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">23rd March 2006, 08:22</div></div><div class="posttext">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/windowing/windowprocedures/usingwindowprocedures.asp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">23rd March 2006, 23:55</div></div><div class="posttext">Thanks guys, thats just what I need.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">26th March 2006, 22:10</div></div><div class="posttext">I have managed to get it working but in a different way. I have noticed there are no PBM_SETPOS messages being sent during the install, so I used PBM_GETPOS and PBM_SETPOS in a window procedure so that it is redrawn whenever the windows procedure gets a message. Problem is that the progress bar does not always move with the installers progress bar. I have attached the test installer that illustrates this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">27th March 2006, 05:51</div></div><div class="posttext">Your custom popup dialog is unavailable all the time it is visible. Nxs plug-in (http://nsis.sourceforge.net/Nxs_plug-in) may become a good start point for dialog &quot;with progress bar and cancel button&quot; :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">28th March 2006, 00:44</div></div><div class="posttext">Thanks man, this will be a great starting point. I am still trying to learn C/C++ (hence my bad programming).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">28th March 2006, 22:20</div></div><div class="posttext">This is off topic, but I just found out that Afrow UK has been made a moderator. I knew it would be someone with a long history on the forums. Way to go man.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th March 2006, 13:39</div></div><div class="posttext">Thank you :)<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">29th March 2006, 22:26</div></div><div class="posttext">I just relized I was not creating my dialog in a thread (like the banner plugin does). This might fix one of my problems :o.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">30th March 2006, 05:20</div></div><div class="posttext">Originally posted by JasonFriday13 <br />
This is off topic, but I just found out that Afrow UK has been made a moderator. I knew it would be someone with a long history on the forums. Way to go man. <br />
So Stu, how many cookies did you sell? :p <br />
<br />
Congratulations</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">23rd May 2006, 23:39</div></div><div class="posttext">I have a code question, but it is not a plugin question :weird:. It is about the NSIS source code. I am trying to make a stub that has no compression support (smaller exehead, and I am bored :rolleyes: ). <br />
<br />
My question is: If the compiler encounters a 'SetCompress off' command,<br />
can I skip the code in the '#ifdef NSIS_COMPRESSION_SUPPORT' and/or 'NSIS_COMPRESS_WHOLE' using a run-time variable? Would that work? <br />
<br />
I relise this requires no stub, but it is one of the easiest ways I can think of to have a smaller no compression exehead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st June 2006, 08:15</div></div><div class="posttext">Compression code is already skipped if SetCompress off is used. When parsed, it sets a variable that's checked before compression. Simply set that variable and change the stub for a compression-less installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">1st June 2006, 23:17</div></div><div class="posttext">Cool :cool: . Thanks for that. I have already modified the build system to build a compression-less stub, and now to put it all together.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>