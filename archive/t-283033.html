<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" AccessControl: Change Inheritance without copying inherited permissions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  AccessControl: Change Inheritance without copying inherited permissions NSIS Discussion" />
	
	<title> AccessControl: Change Inheritance without copying inherited permissions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  AccessControl: Change Inheritance without copying inherited permissions</div>
<hr />
<div class="pda"><a href="t-283033.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=283033">AccessControl: Change Inheritance without copying inherited permissions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">CoBrad</div><div class="date">11th December 2007, 14:51</div></div><div class="posttext">I'm working on an installer which needs to have specific permissions set on a directory.  This works well using the &quot;DisableFileInheritance&quot; function, except for one specific thing in my case.<br />
<br />
The DisableFileInheritance function seems to use the newer &quot;SetNamedSecurityInfo&quot; function, and the behavior of this is that, when disabling inheritance, it automatically makes copies of the permissions that were being inherited.  My desired behavior is to not do this, and to only end up with the properties that have been specified on that directory.<br />
<br />
Has anyone run into this and come up with a solution?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th December 2007, 17:39</div></div><div class="posttext">Won't calling AccessControl::ClearOnFile on the directory do the trick?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CoBrad</div><div class="date">12th December 2007, 18:58</div></div><div class="posttext">D'OH!  I didn't even see those new API's that were added.  Guess the wiki wasn't completely up to date.<br />
<br />
Anyway, thanks for the pointer.  Looks like that'll work if I do:<br />
<br />
DisableFileInheritance &lt;dir&gt;  // This will copy the currently inherited permissions, making them non-inherited.<br />
ClearOnFile &lt;Administrators group&gt; &lt;dir&gt; // This will remove all non-inherited permissions and replace it with just these permissions<br />
// Add other permissions that I want.<br />
<br />
A little bit of a roundabout way to do it, but it ends up working just fine.<br />
<br />
Thanks again for the tip!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th December 2007, 19:07</div></div><div class="posttext">Well, I actually took those from the Wiki page. Where is it not up-to-date?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th December 2007, 19:32</div></div><div class="posttext">Yeh that page does need updating. It's missing the functions from under the Functions heading.<br />
<br />
CoBrad, that is the way to do it!<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>