<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionIn and SetCurInstType, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionIn and SetCurInstType NSIS Discussion" />
	
	<title> SectionIn and SetCurInstType [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionIn and SetCurInstType</div>
<hr />
<div class="pda"><a href="t-176371.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=176371">SectionIn and SetCurInstType</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">YooperNC</div><div class="date">12th April 2004, 16:13</div></div><div class="posttext">I am trying to design an Installer that will in some cases ask the user for an Installation type (&quot;Client&quot; or &quot;Server&quot;), and in other cases default to &quot;Server&quot;. In the latter case, in .onInit, I use SetCurInstType to set the value to &quot;1&quot; -- &quot;0&quot; being the Client installation.<br />
<br />
I realize that the Installation Type is 0-based, and SectionIn values are 1-based. But when I set the Installation Type to &quot;1&quot; in the onInit function, a section that has a &quot;SectionIn 2&quot; statement is not included during that installation.<br />
<br />
The script has the following order:<br />
<br />
- General definitions and macros<br />
- Configuration<br />
- Install Options<br />
- Modern UI Configuration<br />
- Pages<br />
- Languages<br />
- Language Strings<br />
- Data<br />
- Reserve Files<br />
- Install Sections<br />
- Descriptions<br />
- Uninstall Section<br />
- Functions:<br />
  - .onInit<br />
  - etc.<br />
<br />
Any thoughts?<br />
<br />
Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th April 2004, 18:59</div></div><div class="posttext">Can you attach an example script that compiles on every system?<br />
<br />
Also note that SetCurInstType only works when your installer has a components page that is shown during the installer configuration.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">YooperNC</div><div class="date">13th April 2004, 14:02</div></div><div class="posttext">See, that's just it. For this particular installation, I don't want to display a components page. There is no choice to make, so I want to bypass it altogether and set the installation type myself.<br />
<br />
As for attaching example script, I'm not sure how to pick out the parts that might be relevant. It's just as I described above. During .onInit, I set the current installation type to &quot;1&quot;, but the SectionIn commands don't seem to care.<br />
<br />
Why is a components page required? Why doesn't the SectionIn command simply check the current installation type? I suppose I could include a components page if required...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">13th April 2004, 14:15</div></div><div class="posttext">This is a limitation of the current installation type system. If you don't want to display a components page you'll have to add some script code in your sections (for example, check the value of a variable you have set).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>