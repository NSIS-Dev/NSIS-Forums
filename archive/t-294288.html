<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Complicated section selection, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Complicated section selection NSIS Discussion" />
	
	<title> Complicated section selection [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Complicated section selection</div>
<hr />
<div class="pda"><a href="t-294288.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=294288">Complicated section selection</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">bwinterscheidt</div><div class="date">10th July 2008, 20:48</div></div><div class="posttext">I've been trying to modify any sample I can find, RadioButtons, Mutually Exclusive Sections, Section Dependency, to make some extremely complex section interactions work, but can't get anything to function the way I'd like.<br />
<br />
The biggest problems I keep running into are<br />
1) needing three or more mutually exclusive sections (RadioButtons does this, but any other way I can't figure out how to have more than two)<br />
2) with the option to uncheck ALL choices in a group (RadioButtons *doesn't* do this), and<br />
3) multiple dependencies/interactions for a single section: as outlined below, I can get interaction A to work, but then interaction C is ignored for section 1.1 .<br />
<br />
Is this complexity even possible?<br />
<br />
Here's more detail on my specific scenario:<br />
<br />
Group1<br />
-1.1<br />
-1.2<br />
<br />
Group2<br />
-2.1<br />
-2.2<br />
-2.3<br />
<br />
Group3<br />
-Group4<br />
--3.1<br />
--Group5<br />
---3.1.a<br />
-3.2<br />
<br />
<br />
Interactions:<br />
<br />
A) 1.1 and 1.2 are mutually exclusive, but need to be able to have all unchecked.<br />
<br />
B) 2.1, 2.2 and 2.3 are mutually exclusive, but need to be able to have all unchecked.<br />
<br />
C) 1.1 and 2.1 are required for/dependent on each other.  If you check one, the other should check.  If you uncheck one, the other should uncheck.<br />
<br />
D) 3.1 (but not Group5/3.1.a) should become disabled if anything in Group1, or item 3.2 are checked.  Re-enabled when these conditions are no longer met.<br />
<br />
E) When 2.3 is checked, or when all of Group2 is unchecked, 3.2 should be checked by default, but able to be unchecked.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bwinterscheidt</div><div class="date">11th July 2008, 14:32</div></div><div class="posttext">Here's one piece of code I'm having trouble with:<br />
<br />
<br />
Function .onSelChange<br />
<br />
  Push $0<br />
<br />
;Can't Select multiple sections here<br />
  check_one:<br />
  StrCmp $R9 ${ONE} check_two<br />
<br />
    SectionGetFlags ${ONE} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done_one done_one<br />
      StrCpy $R9 ${ONE}<br />
      SectionGetFlags ${TWO} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${TWO} $0<br />
<br />
    Goto done_one<br />
<br />
  check_two:<br />
<br />
    SectionGetFlags ${TWO} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done_one done_one<br />
      StrCpy $R9 ${TWO}<br />
      SectionGetFlags ${ONE} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${ONE} $0<br />
<br />
  done_one:<br />
<br />
;Can't Select multiple sections, except third one doesn't work<br />
  check_three:<br />
  StrCmp $R8 ${THREE} check_four<br />
<br />
    SectionGetFlags ${THREE} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done_three done_three<br />
      StrCpy $R8 ${THREE}<br />
      SectionGetFlags ${FOUR} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${FOUR} $0<br />
      SectionGetFlags ${FIVE} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${FIVE} $0<br />
<br />
    Goto done_three<br />
<br />
  check_four:<br />
  StrCmp $R8 ${FOUR} check_five<br />
<br />
    SectionGetFlags ${FOUR} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done_three done_three<br />
      StrCpy $R8 ${FOUR}<br />
      SectionGetFlags ${THREE} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${THREE} $0<br />
      SectionGetFlags ${FIVE} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${FIVE} $0<br />
<br />
    Goto done_three<br />
<br />
  check_five:<br />
<br />
    SectionGetFlags ${FIVE} $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}<br />
    IntCmp $0 ${SF_SELECTED} 0 done_three done_three<br />
      StrCpy $R8 ${FIVE}<br />
      SectionGetFlags ${THREE} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${THREE} $0<br />
      SectionGetFlags ${FOUR} $0<br />
      IntOp $0 $0 &amp; ${SECTION_OFF}<br />
      SectionSetFlags ${FOUR} $0<br />
<br />
  done_three:<br />
<br />
<br />
  Pop $0<br />
  <br />
FunctionEnd<br />
<br />
Function .onInit<br />
<br />
  Push $0<br />
<br />
;Setup initial state for Group1 to match initial InstType<br />
  StrCpy $R9 ${TWO}<br />
  SectionGetFlags ${TWO} $0<br />
  IntOp $0 $0 | ${SF_SELECTED}<br />
  SectionSetFlags ${TWO} $0<br />
<br />
  SectionGetFlags ${ONE} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${ONE} $0<br />
<br />
;Setup initial state for Group2 to match initial InstType<br />
  StrCpy $R8 ${THREE}<br />
  SectionGetFlags ${THREE} $0<br />
  IntOp $0 $0 | ${SF_SELECTED}<br />
  SectionSetFlags ${THREE} $0<br />
<br />
  SectionGetFlags ${FOUR} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${FOUR} $0<br />
<br />
  SectionGetFlags ${FIVE} $0<br />
  IntOp $0 $0 &amp; ${SECTION_OFF}<br />
  SectionSetFlags ${FIVE} $0<br />
<br />
  Pop $0<br />
<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bwinterscheidt</div><div class="date">11th July 2008, 20:53</div></div><div class="posttext">After much work, I've abandoned the strategies here, and come *close* (not perfect) using If/Select/etc. from LogicLib, combined with a lot of manual flag setting/unsetting...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>