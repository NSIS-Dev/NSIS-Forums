<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_PAGE_DIRECTORY not  shown in some cases, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_PAGE_DIRECTORY not  shown in some cases NSIS Discussion" />
	
	<title> MUI_PAGE_DIRECTORY not  shown in some cases [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_PAGE_DIRECTORY not  shown in some cases</div>
<hr />
<div class="pda"><a href="t-250790.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250790">MUI_PAGE_DIRECTORY not  shown in some cases</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">10th July 2006, 14:57</div></div><div class="posttext">Hi all,<br />
<br />
When my setup is run, if the product is already installed, I show a custom page with the following options: uninstall before installing, uninstall only, overwrite files only. In case &quot;overwrite files only&quot; is chosen I would like _not_ to show the installation-directory-page MUI_PAGE_DIRECTORY, as I don't want the user to choose another directory, b/c I want the INSTDIR to be the one from previous installation.<br />
<br />
So, how can I not show the MUI_PAGE_DIRECTORY page in case a specific option was chosen on a custom page.<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">10th July 2006, 15:17</div></div><div class="posttext">From NSIS manual, about Pages...<br />
&quot;The pre-function allows you to skip the page using Abort.&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coco_vc</div><div class="date">10th July 2006, 16:06</div></div><div class="posttext">Thx galil,<br />
<br />
I'm using the Modern UI so the Pages section from help doesn't really apply. But following that info, I was able to find the info I need in the NSIS\Docs\Modern UI\Readme.html in the &quot;Page Custom Functions&quot;. Seems that I need to define the<br />
MUI_PAGE_CUSTOMFUNCTION_PRE function<br />
just before the <br />
!insertmacro MUI_PAGE_DIRECTORY<br />
and then in function to just Abort in case needed.<br />
<br />
Thx,<br />
Viv</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">10th July 2006, 16:36</div></div><div class="posttext">Originally posted by coco_vc <br />
I'm using the Modern UI so the Pages section from help doesn't really apply. <br />
How does it not apply if you can skip a page with Abort command in callback &quot;pre&quot; function regardless of which UI you are using?<br />
Everything does apply. Concept and mechanics are the same. It's just a matter of different syntax in some cases between Standard and Modern UI (which uses defines and macros more). In fact you could even define pages in modern script the &quot;old&quot; way:<br />
Page directory prefunc<br />
instead of the &quot;modern&quot; and more cumbersome way with define and insertmacro, and still get the same working modern UI.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th July 2006, 23:17</div></div><div class="posttext">Of course it isn't recommended.<br />
Just create the callbacks like so:<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE DirectoryPre<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
All of this is in the Modern UI documentation.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saschagottfried</div><div class="date">5th September 2006, 15:27</div></div><div class="posttext">There is a perfect &quot;builtin&quot;-example for such a feature which coco_vc tries to realize.<br />
<br />
The installer file for NSIS itself.<br />
$NSISDIR\examples\makensis.nsi<br />
<br />
!ifdef VER_MAJOR &amp; VER_MINOR &amp; VER_REVISION &amp; VER_BUILD<br />
Page custom PageReinstall PageLeaveReinstall<br />
!endif<br />
<br />
The PRE function &quot;PageReinstall&quot; checks the registry which  NSIS version is already installed and shows a custom dialog depending on the result. It's very modern usage of MUI macros. <br />
<br />
By the way, NSIS installer offers the selection of another target directory even if it is already installed. Thats exactly what coco_vc tries to avoid. <br />
<br />
Is there a reason why this is still enabled???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2006, 16:23</div></div><div class="posttext">Is there a reason why this is still enabled???Why shouldn't this be enabled? The user shouldn't be forced to install the application anywhere. What if he wants to have two versions side-by-side?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">27th June 2007, 19:10</div></div><div class="posttext">Originally posted by Afrow UK <br />
Put of course it isn't recommended.<br />
Just create the callbacks like so:<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE DirectoryPre<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
All of this is in the Modern UI documentation.<br />
<br />
-Stu  <br />
<br />
I spend several hours trying to figure out why my custom function named &quot;SkipDirectory&quot; was zero'ed out by the compiler as an unreferenced custom function.  Of course when I renamed the function to DirectoryPre it worked fine.  This would seem to be a bug when you have to guess at what the custome function should be called.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th June 2007, 19:26</div></div><div class="posttext">You don't have to guess, you set it with MUI_PAGE_CUSTOMFUNCTION_PRE.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kalverson</div><div class="date">3rd July 2007, 14:21</div></div><div class="posttext">Originally posted by kichik <br />
You don't have to guess, you set it with MUI_PAGE_CUSTOMFUNCTION_PRE.  <br />
<br />
I did that with many different names that did not work including the one in my previous post.  The only one that worked for me was DirectoryPre.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd July 2007, 15:20</div></div><div class="posttext">No, you still have the wrong end of the stick!<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE MyFunc<br />
...<br />
<br />
Function MyFunc<br />
...<br />
<br />
If the function name set with MUI_PAGE_CUSTOMFUNCTION_PRE does not exist then your script will not compile.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>