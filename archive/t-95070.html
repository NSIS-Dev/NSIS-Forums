<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" env vars in win.all, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  env vars in win.all NSIS Discussion" />
	
	<title> env vars in win.all [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  env vars in win.all</div>
<hr />
<div class="pda"><a href="t-95070.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=95070">env vars in win.all</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">skldhxr</div><div class="date">19th July 2002, 18:28</div></div><div class="posttext">hi!<br />
<br />
i'm farily new with the NSIS installer, and my next project is to try and make some installers for common GNUish utils on windows platforms. I found that i need to set some environment variables for some utils to work, and in the NSIS docs, i cant find any command for setting env vars, only read them (ReadEnvStr)..<br />
<br />
So how do i put new enviromnent vars into windows? i found the registry key HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Session Manager\Environment in the Win2000 registry but a friend told me he didnt find the key on his 98 box. that left out the registry hacking option. So, how do i set a env var with nsis ?? or could i make nsis just run a .bat file with only 'set blah=blah' in it?<br />
<br />
skldhxr<br />
(be sure to check my matrix screensaver (beta version for a few more days), just follow my url-&gt;projects-&gt;starmatrix...made w/nsis installer too :)):weird:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th July 2002, 18:34</div></div><div class="posttext">To add environment variables in Win9x you need to put it in the autoexec.bat file. Your Windows 2000 registry &quot;hack&quot; is the way to go on Windows NT.<br />
<br />
If you want an example of changing environment variables in Win9x and Win NT (current user only) you can look at my Path script over here:<br />
http://www.clantpa.co.uk/nsis/wiki/index.php/Path</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skldhxr</div><div class="date">19th July 2002, 18:50</div></div><div class="posttext">thanks, that script was just what the doctor ordered. i never realized nsis code could look that good :) very inspiring. well, off to finishing my installer!<br />
<br />
btw, what exactly does refreshenv.exe do? i ask because i think i once saw an util that let you change 9x env vars w/o reboot...does it do that? (cant really tell from the win32 code right away) (and can i use it?)<br />
<br />
:up:  :: skldhxr :: :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th July 2002, 20:07</div></div><div class="posttext">Glad I can help :D<br />
<br />
RefreshEnv.exe only works on Windows NT, and it lets you apply the changes without logging in and out/rebooting. My script automatically uses it if it is used on Windows NT.<br />
I have never heard of such a utility for Win9x. If you can find it again I will be very greatful.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">skldhxr</div><div class="date">19th July 2002, 22:06</div></div><div class="posttext">i will do a search for that util and report here if i'm lucky. i'm pretty sure it was such an util. maybe we can make a refreshenv.win.all.exe, that'd solve a lot of problems. (as over 60% still use win98)<br />
<br />
<br />
:up: ..(_`·.: ..:: skldhxr ::.. :.·`_)..  :cool:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>