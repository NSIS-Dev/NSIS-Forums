<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to get an errorlevel ..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to get an errorlevel ... NSIS Discussion" />
	
	<title> How to get an errorlevel ... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to get an errorlevel ...</div>
<hr />
<div class="pda"><a href="t-109934.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=109934">How to get an errorlevel ...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dizzy007</div><div class="date">15th October 2002, 16:07</div></div><div class="posttext">Hi All,<br />
<br />
i want to start a batch-file using execwait and want to have<br />
the errorlevel back.<br />
<br />
So i tried :<br />
<br />
ExecWait '&quot;$TEMP\test.bat $0&quot;'<br />
<br />
but i didn't get any exit code back :mad: <br />
What is wrong?<br />
<br />
<br />
Thanks Jens</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2002, 16:09</div></div><div class="posttext">The parameters shouldn't be quoted together. Use ExecWait $TEMP\test.bat $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dizzy007</div><div class="date">15th October 2002, 16:39</div></div><div class="posttext">Thanks for your help !!<br />
<br />
<br />
I didn't get the return code ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th October 2002, 18:32</div></div><div class="posttext">Don't quote the parameters together...<br />
ExecWait '&quot;$TEMP\alive&quot; /Repeat=3 /Timeout=3 11.2.20.4' $R0<br />
<br />
And plase attache large scripts. I have attached your script to this message.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Player 1</div><div class="date">19th October 2002, 06:00</div></div><div class="posttext">have the bat create a file that can be read by nsis:<br />
<br />
@echo off<br />
cd %TEMP%<br />
if exist errlvl.ini attrib -S -H -R<br />
echo [errorlevel]&gt;errlvl.ini<br />
alive /Repeat=3 /Timeout=3 11.2.20.4 %1<br />
<br />
if errorlevel 255 echo value=255&gt;&gt;errlvl.ini<br />
if errorlevel 8 echo value=8&gt;&gt;errlvl.ini<br />
if errorlevel 7 echo value=7&gt;&gt;errlvl.ini<br />
if errorlevel 6 echo value=6&gt;&gt;errlvl.ini<br />
if errorlevel 5 echo value=5&gt;&gt;errlvl.ini<br />
if errorlevel 4 echo value=4&gt;&gt;errlvl.ini<br />
if errorlevel 3 echo value=3&gt;&gt;errlvl.ini<br />
if errorlevel 2 echo value=2&gt;&gt;errlvl.ini<br />
if errorlevel 1 echo value=1&gt;&gt;errlvl.ini<br />
if errorlevel 0 echo value=0&gt;&gt;errlvl.ini<br />
cls<br />
Then ExecWait the bat file like so:<br />
Function alive <br />
  ExecWait &quot;$TEMP\runh.exe $TEMP\test2.bat $R0&quot; <br />
  ReadINIStr $2 $TEMP\errlvl.ini errorlevel value<br />
  ; done: <br />
  MessageBox MB_YESNO|MB_ICONQUESTION &quot;Errorlevel : $R0&quot; IDYES <br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">19th October 2002, 11:55</div></div><div class="posttext">You don't need no batch file for it...<br />
<br />
ExecWait command [user_var(exit code)]<br />
<br />
Execute the specfied program and wait for the executed process to quit. See Exec for more information. If no output variable is specified ExecWait sets the error flag if the program executed returns a nonzero error code, or if there is an error. If an output variable is specified, ExecWait sets the variable with the exit code (and only sets the error flag if an error occurs; if an error occurs the contents of the user variable are undefined). Note, if the command could have spaces, you may with to put it in quotes to delimit it from parameters. i.e.: ExecWait '&quot;$INSTDIR\command.exe&quot; parameters'</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>