<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Prompting for directory install, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Prompting for directory install NSIS Discussion" />
	
	<title> Prompting for directory install [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Prompting for directory install</div>
<hr />
<div class="pda"><a href="t-289818.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=289818">Prompting for directory install</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gregf</div><div class="date">7th April 2008, 19:41</div></div><div class="posttext">Hello all,<br />
<br />
I got my first script working today. Cross compiling it from Linux!<br />
<br />
Pretty chuffed.<br />
<br />
I tested it using some of the scripts in the tutorials and examples section of the NSIS documentation.<br />
<br />
Having had a quick play I can get my installer to install three things in one go(!). One is an msi for which I use msiexec. The other two are straight forward files.<br />
<br />
I want to have the installer prompt for the directory to install the files, but it doesn't make sense to have it prompt for the install location of the msi.<br />
<br />
Question: how do I get it to prompt for a directory install, but only after the msi package has been installed.<br />
<br />
At the moment the screen that prompts me for an install directory appears very early on. <br />
<br />
Where do I put the: !insertmacro MUI_PAGE_DIRECTORY<br />
<br />
I've seen posts that will tell me how to specify different install directories for each section. And one post that shows me how to selectively prompt for install location based on whether the section is selected for install. I can't find anything that lets me delay prompting for directory until just before the section is installed.<br />
<br />
Any guidance on which bits of the documentation to focus on would be very much appreciated. Any tips at all would gratefully appreciated. <br />
<br />
<br />
Many thanks in advance.<br />
<br />
Greg<br />
<br />
<br />
The script is:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
!include &quot;WinMessages.nsh&quot;<br />
<br />
!define PRODUCT_NAME &quot;My Product&quot;<br />
!define PRODUCT_VERSION &quot;1.0&quot;<br />
!define PRODUCT_PUBLISHER &quot;blah blah&quot;<br />
<br />
SetCompressor lzma<br />
 <br />
; MUI Settings / Icons<br />
!define MUI_ABORTWARNING<br />
<br />
;... some icon and header graphics defs.. <br />
 <br />
!insertmacro MUI_PAGE_WELCOME<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
 <br />
; MUI end ------<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;MySetup.exe&quot;<br />
ShowInstDetails show<br />
InstallDir &quot;$PROGRAMFILES\ProductOne&quot;<br />
 <br />
Section -SETTINGS<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  SetOverwrite ifnewer<br />
SectionEnd<br />
 <br />
Section &quot;PostgreSQL&quot;<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  File &quot;thirdpartypackage.msi&quot;<br />
  ExecWait 'msiexec /i &quot;$INSTDIR\thirdpartypackage.msi&quot;<br />
SectionEnd<br />
<br />
Section &quot;MyDirTree&quot;<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  File /r &quot;./mydirectory&quot;<br />
SectionEnd<br />
<br />
Section &quot;MyFileInstance&quot;<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
  File &quot;./myfile&quot;<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>