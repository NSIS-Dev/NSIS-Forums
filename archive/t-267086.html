<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstaller in a subdirectory, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstaller in a subdirectory NSIS Discussion" />
	
	<title> Uninstaller in a subdirectory [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstaller in a subdirectory</div>
<hr />
<div class="pda"><a href="t-267086.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=267086">Uninstaller in a subdirectory</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">4th March 2007, 04:03</div></div><div class="posttext">I am moving a group of uninstallers to their respective subdirectories of the common install directory.  (This is because a number of exe's will share files.)  Under certain conditions, I want an installer to be able to remove what's left of the install directory (all other exe's having been uninstalled).  However, I find that RMDir and Delete are no longer succeeding in the install path for anything except the installer's directory.  What do I need to do?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2007, 07:23</div></div><div class="posttext">$INSTDIR is the directory where the uninstaller is located. You can use GetParent (http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.15) to get the parent directory of $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">4th March 2007, 14:57</div></div><div class="posttext">Are you saying that it is a mistake to place the uninstaller in a subdirectory of $INSTDIR?  Currently I have it in $INSTDIR\test.  In this position, I am only able to delete \test and its contents.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">4th March 2007, 15:13</div></div><div class="posttext">Uninstaller recognizes as $INSTDIR the directory from where is executed.<br />
You should either use GetParent as kichik suggested or read the $INSTDIR from registry, see NSIS manual about,<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter3.html#3.2.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">4th March 2007, 16:00</div></div><div class="posttext">I am beginning to understand.  Thank you both very much.<br />
<br />
Here's what I'm doing now, along with the error I'm getting.  Please advise:<br />
<br />
  !include FileFunc.nsh<br />
  !insertmacro un.GetParent<br />
  . . .<br />
  ${GetParent} &quot;$INSTDIR\uninst.exe&quot; $R0<br />
<br />
Compile error --&gt;&gt; Invalid command: ${GetParent}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">4th March 2007, 16:04</div></div><div class="posttext">!insertmacro un.GetParent  --&gt;  ${un.GetParent}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SteveRussell</div><div class="date">4th March 2007, 16:47</div></div><div class="posttext">Again I say:  THANKS SO VERY MUCH! !</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>