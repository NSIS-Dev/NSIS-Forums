<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" drivers install, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  drivers install NSIS Discussion" />
	
	<title> drivers install [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  drivers install</div>
<hr />
<div class="pda"><a href="t-273385.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273385">drivers install</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ramses123</div><div class="date">25th June 2007, 15:23</div></div><div class="posttext">hi,<br />
<br />
could anybody please tell me how to proceed if i want to install drivers on e.g. WinXP and i have folowing files available:<br />
<br />
- *.cat<br />
- *.inf<br />
- *.sys<br />
<br />
the drivers should be preinstalled, so when the user attach the hardware to the laptop the drivers should be installed without user interaction. The installation is indicated in the ballon messages in the taskbar. Also the pre-installation procedure should be not visible for the user (only the progress on installation). <br />
<br />
the more precise questions are:<br />
- where to copy this files<br />
- what registry keys must be set and how<br />
- any other steps to do...<br />
<br />
maybe an plug in that handle these steps automatically ?<br />
<br />
thanks a lot !<br />
<br />
br<br />
ramsi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th June 2007, 15:37</div></div><div class="posttext">Have you searched this forum?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">25th June 2007, 16:47</div></div><div class="posttext">Ramsi, I had a very similar question not long ago. You can read all about it here:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=273261<br />
<br />
forums.winamp.com/showthread.php?s=&amp;threadid=273261<br />
<br />
Basically, it all boils down to using Microsoft's DPInst.<br />
<br />
HTH,<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vc6</div><div class="date">25th June 2007, 20:11</div></div><div class="posttext">Another possibility, if you're in a hurry, is to use Microsoft's DevCon (devcon.exe).<br />
<br />
You can read all about it here (and download it, too):<br />
<br />
http://msdn2.microsoft.com/en-us/library/ms792824.aspx<br />
msdn2.microsoft.com/en-us/library/ms792824.aspx<br />
<br />
The most useful commands for me are:<br />
<br />
devcon install &lt;hardwareid&gt;<br />
devcon install &lt;.inffile&gt; &lt;hardwareid&gt;<br />
<br />
<br />
Good luck!<br />
Victor</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ramses123</div><div class="date">26th June 2007, 08:54</div></div><div class="posttext">thanks a lot guys !<br />
i will check this and will come back to you if something is going wrong :up:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ramses123</div><div class="date">29th June 2007, 22:58</div></div><div class="posttext">after reading a lot about devcon and install drivers i assume that this issue is not a easy one.<br />
it would be very helpful for me if you can post some code examples of how to integrate the devcon in the nsis (special call to @vc6).<br />
and yes, it must work on W2K, XP and Vista (32/64bit)<br />
<br />
thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">29th June 2007, 23:25</div></div><div class="posttext">Before you get too deep into using Devcon, please note that Microsoft says it is not redistributable. (First sentence in 'More Information' here http://support.microsoft.com/kb/311272/ )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ramses123</div><div class="date">29th June 2007, 23:33</div></div><div class="posttext">great news :-(<br />
and how it is possible then to install drivers with nsis ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ramses123</div><div class="date">29th June 2007, 23:42</div></div><div class="posttext">something found again about SetupCopyOEMInf but no idea how to integrate this into nsis...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CancerFace</div><div class="date">30th June 2007, 15:27</div></div><div class="posttext">If you got as far as SetupCopyOEMInf you have probably seen this (http://forums.winamp.com/showthread.php?s=&amp;threadid=269865) thread and this (http://nsis.sourceforge.net/Driver_installation_and_update) wiki page. Between the two you can get an idea of what you need to come up with using the System plugin to call SetupCopyOEMInf (http://msdn2.microsoft.com/en-us/library/aa376990.aspx) and UpdateDriverForPlugAndPlayDevices (http://msdn2.microsoft.com/en-us/library/ms792968.aspx) to get your driver installed.<br />
<br />
If you have an MSDN subscription you can download the windows driver kit (WDK) according to MS (http://www.microsoft.com/whdc/DevTools/WDK/WDKpkg.mspx)<br />
It contains Devcon along with its source code. You can then look at the APIs used and either create a plugin for NSIS or use the System plugin to call those APIs.<br />
<br />
Alternatively you can download the DDK (http://www.microsoft.com/whdc/devtools/ddk/default.mspx) (Windows Driver Development Kit) which also includes information about installing devices and drivers.<br />
<br />
Also check my post on this (http://forums.winamp.com/showthread.php?s=&amp;threadid=270024) thread. The Driver Install Frameworks Tools (which can be downloaded from this (http://www.microsoft.com/whdc/driver/install/DIFxtls.mspx) page) contains detailed description of the APIs needed to go through an installation of a device, but you would still need to translate those API calls to System plugin commands in NSIS (look for the documentation of DIFxAPI within the MSI file).<br />
<br />
Hope this helps<br />
<br />
CF</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>