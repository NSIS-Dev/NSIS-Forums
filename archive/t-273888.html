<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Vista: Set Access to Full Control after install, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Vista: Set Access to Full Control after install NSIS Discussion" />
	
	<title> Vista: Set Access to Full Control after install [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Vista: Set Access to Full Control after install</div>
<hr />
<div class="pda"><a href="t-273888.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=273888">Vista: Set Access to Full Control after install</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">paraLogic</div><div class="date">5th July 2007, 03:20</div></div><div class="posttext">After looking through a lot of posts here about UAC and so forth, I'm not able to find the answer for this. Apologies if it's been discussed before.<br />
<br />
I'd like to know if it's possible to set ALL installed files to Full Control for &quot;user&quot; level.<br />
<br />
I have an install script using the Required Level set to admin, because we do HKLM writes and so forth. The problem is, after the install finishes ALL files are set to Read/Execute only to the user level. This makes it so our update software doesn't work (invalid rights).<br />
<br />
Rather than force the user to &quot;Run as Admin&quot;, I'm curious if it's possible to set all the files to Full Control for &quot;user&quot; level, maybe at the end of the install. Even if it takes some sort of system call?<br />
<br />
I've installed a few other programs with UAC on, that don't seem to be aware of Vista (much like ours originally), and their files are not read/execute only. So I'm wondering if it's an NSIS thing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">paraLogic</div><div class="date">5th July 2007, 04:00</div></div><div class="posttext">I guess I found a solution, maybe not the best, but I added :<br />
<br />
ExecWait 'icacls &quot;$INSTDIR&quot; /grant BUILTIN\Users:F /T /Q'<br />
<br />
To the end of the install section. Probably bad practice, eh?<br />
<br />
Anyway to suppress the command prompt pop up?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th July 2007, 06:10</div></div><div class="posttext">Very bad practice. You're allowing every user to modify executables all other users are running as well. That's a security breach. What you really should do is run the update mechanism as admin. If it happens when the program starts, have it pop-up UAC when the update itself runs. If it's a service running in the background, make it a real service, running under SYSTEM.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">paraLogic</div><div class="date">5th July 2007, 14:08</div></div><div class="posttext">Originally posted by kichik <br />
Very bad practice. You're allowing every user to modify executables all other users are running as well. That's a security breach. What you really should do is run the update mechanism as admin. If it happens when the program starts, have it pop-up UAC when the update itself runs. If it's a service running in the background, make it a real service, running under SYSTEM.  <br />
<br />
We were doing the update as admin except the way our update works right now is that it runs first every time the app is launched. This forces a Allow/Deny prompt every time the app is opened. Our employer doesn't like that idea very much at all :P<br />
<br />
We've been trying to rewrite the update procedure for over 1.5 years now, but we're never given enough dev time to do it. Maybe I can convince them now, since it is a security breach as you say.<br />
<br />
Thanks for the tip.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>