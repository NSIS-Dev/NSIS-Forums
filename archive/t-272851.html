<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" disable MUI_PAGE_DIRECTORY  Directory field, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  disable MUI_PAGE_DIRECTORY  Directory field NSIS Discussion" />
	
	<title> disable MUI_PAGE_DIRECTORY  Directory field [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  disable MUI_PAGE_DIRECTORY  Directory field</div>
<hr />
<div class="pda"><a href="t-272851.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272851">disable MUI_PAGE_DIRECTORY  Directory field</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">thek</div><div class="date">15th June 2007, 12:51</div></div><div class="posttext">Hello Guys<br />
<br />
Is it possible to set in the MUI_PAGE_DIRECTORY the destination folder field to readonly and disabling the browse button? All this during runtime.<br />
<br />
The reason for this:<br />
I have an installer which only works if you are an admin...<br />
so far so good...<br />
now I'd like to allow a non admin user to update the software meaning:<br />
If the software is already installed<br />
he is allowed to update/replace the executables + config files<br />
but he is not allowd to change the installationpath and so on...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th June 2007, 13:01</div></div><div class="posttext">!include WinMessages.nsh<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW DirectoryPageShow<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
Function DirectoryPageShow<br />
<br />
StrCmp ... SkipDisable<br />
<br />
  FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $R1 $R0 1019<br />
    SendMessage $R1 ${EM_SETREADONLY} 1 0<br />
  GetDlgItem $R1 $R0 1001<br />
    EnableWindow $R1 0<br />
<br />
SkipDisable:<br />
<br />
FunctionEnd<br />
<br />
<br />
Not tested but should work.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thek</div><div class="date">18th June 2007, 11:35</div></div><div class="posttext">thanks for the help<br />
<br />
exactly what needed</div></div><hr />


<div class="post"><div class="posttop"><div class="username">highlader</div><div class="date">30th August 2007, 19:42</div></div><div class="posttext">Hey there I just started learning NSIS yesterday and I need to do exactly what the topics says, but I dunno where and how, Could u please gimme a more detailed explanation about this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thek</div><div class="date">31st August 2007, 08:35</div></div><div class="posttext">To make a field readonly you have to tell the edit box that it is &quot;readonly&quot; no<br />
In &quot;Windows you do this by sending a Message to the edit box  (in Windows everything is a Windows, even a button and so on)<br />
<br />
and this does the code above<br />
  FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT <br />
gets the ID of the dialog which contains the edit box<br />
  GetDlgItem $R1 $R0 1019 <br />
gets the id of the edit box in this dialog<br />
      SendMessage $R1 ${EM_SETREADONLY} 1 0 <br />
sends the message &quot;Readonly&quot; to the editbox<br />
after this the editbox is &quot;readonly&quot;<br />
    GetDlgItem $R1 $R0 1001<br />
gets the id of the Browse Button in this dialog<br />
      EnableWindow $R1 0<br />
A Button cannot be set &quot;readonly&quot; so you have to disable it completly (you can do this with the edit box to)<br />
<br />
but this is some homework for you to find out whats the difference between setting readonly and disable an edit box ;-)<br />
<br />
hope it helps<br />
nobs</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pozbremser</div><div class="date">31st August 2007, 09:05</div></div><div class="posttext">where can I find the Id's of components (pages, buttons,editboxes a.s.o.)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thek</div><div class="date">31st August 2007, 09:25</div></div><div class="posttext">try and error  :( <br />
<br />
sorry but as far as I know there is no other way<br />
it sound's more diffecult than it is<br />
<br />
the numbers are all over 1000<br />
often you can get it via the code... (e.g. UMUI.nsh)<br />
or by trying around a little bit  (there a not so many items on a dialog</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">31st August 2007, 12:53</div></div><div class="posttext">open the appropriate UI stub (C:\Program Files\NSIS\Contrib\UIs) with a resource editor (Visual Studio,  ResHacker, etc...)<br />
and find the ID in the page (dialog) you're interested in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pozbremser</div><div class="date">31st August 2007, 14:54</div></div><div class="posttext">ok, thanks!<br />
<br />
I use directory page now.<br />
if I detect some components installed, I disable the directory change.<br />
But it is possible to change directory!<br />
If You press any key on keybord for example.<br />
sie Attachment please.<br />
Can I disable this?<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Wizou</div><div class="date">31st August 2007, 15:24</div></div><div class="posttext">try this<br />
<br />
FindWindow $R0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
  GetDlgItem $R1 $R0 1019<br />
    SendMessage $R1 ${EM_SETREADONLY} 1 0<br />
    EnableWindow $R1 0<br />
  GetDlgItem $R1 $R0 1001<br />
    EnableWindow $R1 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pozbremser</div><div class="date">3rd September 2007, 09:52</div></div><div class="posttext">exact! thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>