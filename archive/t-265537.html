<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" any ideas..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  any ideas... NSIS Discussion" />
	
	<title> any ideas... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  any ideas...</div>
<hr />
<div class="pda"><a href="t-265537.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=265537">any ideas...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">soylentyellow</div><div class="date">10th February 2007, 21:07</div></div><div class="posttext">for why my install button on this custom page that should start another installer on a given drive isnt doing anything?  I've been staring at it too long and I don't think I'm trying the right things anymore...<br />
<br />
<br />
<br />
Page custom ShowInTouch InTouch<br />
<br />
...<br />
<br />
var itdrive<br />
<br />
...<br />
<br />
Function .onInit<br />
    InitPluginsDir<br />
    !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;InTouch.ini&quot;<br />
  ...<br />
FunctionEnd<br />
<br />
Function ShowInTouch<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;InTouch.ini&quot;<br />
FunctionEnd<br />
<br />
Function InTouch<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $0 &quot;InTouch.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
    StrCmp $0 0 done  ; Next button?<br />
    StrCmp $0 1 install  ; install button?<br />
    Abort ; Return to the page<br />
<br />
install:<br />
!insertmacro MUI_INSTALLOPTIONS_READ $itdrive &quot;InTouch.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
ExecWait $itdrive\Setup.exe<br />
Abort<br />
<br />
done:<br />
FunctionEnd<br />
<br />
<br />
<br />
<br />
<br />
#Contents of intouch.ini<br />
<br />
[Settings]<br />
NumFields=2<br />
<br />
[Field 1]<br />
Type=Button<br />
Flags=NOTIFY<br />
Left=40<br />
Top=40<br />
Right=100<br />
Bottom=55<br />
Text=Install InTouch<br />
<br />
[Field 2]<br />
Type=DropList<br />
Left=165<br />
Top=40<br />
Right=231<br />
Bottom=169<br />
State=D:<br />
ListItems=A:|B:|C:|D:|E:|F:|G:|H:|I:|J:|K:|L:|M:|N:|O:|P:|Q:|R:|S:|T:|U:|V:|W:|X:|Y:|Z:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">10th February 2007, 21:39</div></div><div class="posttext">I think the problem is with the ini, Settings - NumFields.<br />
<br />
EDIT: I don't know, provided that Drive D: exists and file setup.exe also exists for me works fine.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">soylentyellow</div><div class="date">12th February 2007, 17:48</div></div><div class="posttext">Thanks for taking a look at it.<br />
I got it working, I scripted it to catch when the file isn't even there and pop up a warning.<br />
It wasn't long after that I realised I was trying to use the wrong drive...  doh &gt;.&lt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">12th February 2007, 18:07</div></div><div class="posttext">Well done!<br />
Although they don't harm, you may want to remove a few unnecessary lines of code, e.g.<br />
Function InTouch<br />
!insertmacro MUI_INSTALLOPTIONS_READ $0 &quot;InTouch.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
StrCmp $0 1 0 done<br />
!insertmacro MUI_INSTALLOPTIONS_READ $itdrive &quot;InTouch.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
ExecWait &quot;$itdrive\Setup.exe&quot;<br />
Abort<br />
<br />
done:<br />
FunctionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>