<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Register Product, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Register Product NSIS Discussion" />
	
	<title> Register Product [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Register Product</div>
<hr />
<div class="pda"><a href="t-238191.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=238191">Register Product</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mlavwilson</div><div class="date">16th February 2006, 14:10</div></div><div class="posttext">I want to add register page to track the users that have installed the application.  if they choose to skip the register, I would likt to hit a url to &quot;log&quot; the install.  Does this exist, or should i start from scratch?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">16th February 2006, 16:02</div></div><div class="posttext">Not sure if you mean an HTTP GET or POST, but InetLoad can do either one.<br />
http://nsis.sourceforge.net/wiki/InetLoad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mlavwilson</div><div class="date">17th February 2006, 13:27</div></div><div class="posttext">I know its easy to hit a url.  I am looking for a registartion form.  A place for the user to enter name, address...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">17th February 2006, 16:30</div></div><div class="posttext">You need a php/cgi/asp type of page that can connect to a database and write in the data entered by your users? If so, you should probably look into a mysql/php solution and find a relevant forum to get help with on that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">18th February 2006, 18:02</div></div><div class="posttext">Either that, or create the form in NSIS using a custom page and then use inetload to pass the info back to the web server.  (But you'd still need the code on the web server to process the request.)<br />
<br />
But, having the form on the web page itself makes more sense becuaes then you could allow the user to come back later and register without having to run the setup again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">baxissimo</div><div class="date">13th March 2006, 03:10</div></div><div class="posttext">I want to add register page to track the users that have installed the application. if they choose to skip the register, I would likt to hit a url to &quot;log&quot; the install.  <br />
<br />
@mlavwilson: This is also pretty much exactly the functionality I'm looking for.  You didn't say this explicitly, but in my case at least, I would like the install to fail if the user can't or doesn't want to register.  I'm not looking for something uncrackable, just something that makes it so average joe user can't install unless he pings my web site.  I don't mind if Joe Hacker can figure out how to unzip the installer and install manually, or something like that.<br />
<br />
@dienjd: is InetLoad definitely the way to go for the inet connection part, as opposed to NSISdl?<br />
<br />
@comperio: I want the install to fail if the user can't connect, so for me I'd rather the installer didn't have to launch the user's browser to complete the install. The &quot;custom page&quot; (with a web-cgi form back end) you speak of sounds like what I'll want then.<br />
<br />
I've never given much thought to developing these sorts of &quot;registration code&quot; installers, so I'm not very knowledgeable in this area.  Are there any gotchas?  Will a simple ack from the web server side be enough, or should I be using some kind of passcode or hash of a machine-specific id as the server response?  Again, I'm not that concerned with even a novice hacker being able to circumvent the registration, I just want it so grandma will have no idea how to install without going through the registration.<br />
<br />
Thanks for any advice.  I'm brand new to NSIS.  Been using InnoSetup up till now, but I don't think it's up to this task.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">13th March 2006, 04:26</div></div><div class="posttext">Originally posted by baxissimo <br />
@dienjd: is InetLoad definitely the way to go for the inet connection part, as opposed to NSISdl? <br />
I'd recommend going with InetLoad since it has more functionality (I don't think NSISdl can do an HTTP POST)--that way you won't find yourself changing later and then having to retest all your Internet-related stuff.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lai</div><div class="date">3rd May 2006, 22:27</div></div><div class="posttext">I'm having trouble using inetload to post data by calling a cgi script (written in perl) on the server side. Has anyone able to get it working on their machine?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th May 2006, 11:30</div></div><div class="posttext">php POST sample (handling GET parameters as well) included to the package, this worked correct in all tests. So may be problem is in you perl script or server settings? Can you attach a script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lai</div><div class="date">15th May 2006, 13:32</div></div><div class="posttext">I got it working. <br />
the problem I had was that I forgot to include response page. <br />
<br />
e.g.<br />
    InetLoad::load /post name=$NAME &quot;http://localhost/cgi-bin/test.cgi&quot; &quot;$EXEDIR\response.html&quot;<br />
<br />
When &quot;$EXEDIR\response.html&quot; was omitted in the statement, the CGI script would not send registration information throgh email to me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Inspirator</div><div class="date">17th May 2006, 12:49</div></div><div class="posttext">Hi I am really interested in that registration issue.<br />
Can you please provide a step-by-step quide or more details how to implement that. I would be great help to a lot of people. <br />
<br />
Thanks a lot <br />
<br />
Regards<br />
Stephan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lai</div><div class="date">17th May 2006, 20:43</div></div><div class="posttext">Here is basically what I have in the nsi script (I only attached the relevant part),<br />
<br />
I put registration page after license page,<br />
<br />
e.g.<br />
# Installer pages<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_LICENSE license.txt<br />
Page custom RegistrationPage<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_STARTMENU Application $StartMenuGroup<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!insertmacro MUI_UNPAGE_WELCOME<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
!insertmacro MUI_UNPAGE_FINISH<br />
<br />
<br />
# define function<br />
Function RegistrationPage<br />
    !insertmacro MUI_HEADER_TEXT &quot;My Product&quot; <br />
&quot;Registration Form&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;register.ini&quot;<br />
<br />
    ; read user input<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $FIRSTNAME &quot;register-nwspro.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $LASTNAME &quot;register-nwspro.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $COMPANY &quot;register-nwspro.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $ADDRESS &quot;register-nwspro.ini&quot; &quot;Field 8&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $CITY &quot;register-nwspro.ini&quot; &quot;Field 10&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $STATE &quot;register-nwspro.ini&quot; &quot;Field 12&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $EMAIL &quot;register-nwspro.ini&quot; &quot;Field 14&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ $PHONE &quot;register-nwspro.ini&quot; &quot;Field 16&quot; &quot;State&quot;<br />
<br />
    InetLoad::load /post &quot;product_name=$(^Name)&amp;version=${VERSION}&amp;firstname=$FIRSTNAME&amp;lastname=$LASTNAME \<br />
	&amp;company=$COMPANY&amp;address=$ADDRESS&amp;city=$CITY&amp;state=$STATE&amp;email=$EMAIL&amp;phone=$PHONE&quot; \<br />
	&quot;http://localhost/cgi-bin/register.cgi&quot; &quot;$EXEDIR\response.html&quot;<br />
    Pop $0 # return value = exit code, &quot;OK&quot; if OK<br />
    StrCmp $0 &quot;OK&quot; done<br />
    MessageBox MB_OK &quot;Failed to register: $0&quot;<br />
    Abort<br />
    done:<br />
FunctionEnd<br />
<br />
<br />
<br />
<br />
Here is the content of register.ini file<br />
; Auto-generated by EclipseNSIS InstallOptions Script Wizard<br />
; May 2, 2006 5:35:58 PM<br />
[Settings]<br />
NumFields=16<br />
Title=Registration Form<br />
<br />
[Field 1]<br />
Type=Label<br />
Left=9<br />
Top=26<br />
Right=47<br />
Bottom=35<br />
Text=First Name<br />
<br />
[Field 2]<br />
Type=Text<br />
Left=47<br />
Top=25<br />
Right=95<br />
Bottom=36<br />
State=<br />
MaxLen=20<br />
MinLen=1<br />
<br />
[Field 3]<br />
Type=Label<br />
Left=154<br />
Top=27<br />
Right=190<br />
Bottom=35<br />
Text=Last Name<br />
<br />
[Field 4]<br />
Type=Text<br />
Left=195<br />
Top=25<br />
Right=257<br />
Bottom=36<br />
State=<br />
MaxLen=20<br />
MinLen=1<br />
<br />
<br />
[Field 5]<br />
Type=Label<br />
Left=9<br />
Top=46<br />
Right=41<br />
Bottom=54<br />
Text=Company<br />
<br />
[Field 6]<br />
Type=Text<br />
Left=47<br />
Top=44<br />
Right=141<br />
Bottom=54<br />
State=<br />
MaxLen=30<br />
MinLen=1<br />
<br />
[Field 7]<br />
Type=Label<br />
Left=9<br />
Top=65<br />
Right=41<br />
Bottom=73<br />
Text=Adddress<br />
<br />
[Field 8]<br />
Type=Text<br />
Left=47<br />
Top=63<br />
Right=141<br />
Bottom=73<br />
State=<br />
MaxLen=50<br />
MinLen=2<br />
<br />
[Field 9]<br />
Type=Label<br />
Left=154<br />
Top=65<br />
Right=167<br />
Bottom=73<br />
Text=City<br />
<br />
[Field 10]<br />
Type=Text<br />
Left=167<br />
Top=63<br />
Right=212<br />
Bottom=73<br />
State=<br />
MaxLen=20<br />
<br />
[Field 11]<br />
Type=Label<br />
Left=218<br />
Top=65<br />
Right=236<br />
Bottom=73<br />
Text=State<br />
<br />
[Field 12]<br />
Type=Text<br />
Left=236<br />
Top=63<br />
Right=268<br />
Bottom=73<br />
MaxLen=2<br />
MinLen=1<br />
<br />
[Field 13]<br />
Type=Label<br />
Left=9<br />
Top=86<br />
Right=37<br />
Bottom=93<br />
Text=Email<br />
<br />
[Field 14]<br />
Type=Text<br />
Left=47<br />
Top=83<br />
Right=128<br />
Bottom=94<br />
State=<br />
MaxLen=30<br />
MinLen=5<br />
<br />
[Field 15]<br />
Type=Label<br />
Left=9<br />
Top=104<br />
Right=35<br />
Bottom=112<br />
Text=Phone<br />
<br />
[Field 16]<br />
Type=Text<br />
Left=47<br />
Top=102<br />
Right=128<br />
Bottom=113<br />
State=<br />
MaxLen=20<br />
MinLen=10<br />
<br />
<br />
<br />
Here is the content of register.cgi file<br />
#!/usr/bin/perl<br />
use CGI<br />
$q = new CGI;<br />
<br />
$product_name = $q-&gt;param('product_name');<br />
$version = $q-&gt;param('version');<br />
$firstname = $q-&gt;param('firstname');<br />
$lastname = $q-&gt;param('lastname');<br />
$company = $q-&gt;param('company');<br />
$address = $q-&gt;param('address');<br />
$city = $q-&gt;param('city');<br />
$state = $q-&gt;param('state');<br />
$email = $q-&gt;param('email');<br />
$phone = $q-&gt;param('phone');<br />
<br />
<br />
$mailto = &quot;localdomain&quot;;<br />
open(MAIL,&quot;| /usr/sbin/sendmail -oi -n -t&quot;);<br />
print MAIL &lt;&lt;END;<br />
To:$mailto<br />
From:$mailto<br />
Subject: Registration<br />
<br />
Registered User Contact Information<br />
***********************************<br />
<br />
Product Name = $product_name<br />
Version = $version<br />
<br />
First Name = $firstname<br />
Last Name = $lastname<br />
Company = $company<br />
Address = $address<br />
City = $city<br />
State = $state<br />
Email = $email<br />
Phone = $phone<br />
<br />
END<br />
<br />
close(MAIL);<br />
<br />
<br />
print &quot;Content-type:text/html\n\n&quot;;<br />
print &lt;&lt;HTML_RESPONSE;<br />
&lt;html&gt;<br />
&lt;body&gt;<br />
Name: $lastname, $firstname&lt;/br&gt;<br />
Company: $company&lt;/br&gt;<br />
Address: $address, $city, $state&lt;/br&gt;<br />
Email: $email&lt;/br&gt;<br />
Phone: $phone&lt;/br&gt;<br />
&lt;/body&gt;<br />
&lt;/html&gt;<br />
HTML_RESPONSE<br />
<br />
<br />
hope this helps!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Inspirator</div><div class="date">17th May 2006, 21:07</div></div><div class="posttext">cool thanks a lot I will test it - it is very usefull.<br />
<br />
Regards<br />
Stephan</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>