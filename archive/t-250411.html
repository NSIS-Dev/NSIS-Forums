<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Executing command after JBoss server is started ..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Executing command after JBoss server is started ... NSIS Discussion" />
	
	<title> Executing command after JBoss server is started ... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Executing command after JBoss server is started ...</div>
<hr />
<div class="pda"><a href="t-250411.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250411">Executing command after JBoss server is started ...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nagaraju</div><div class="date">5th July 2006, 08:05</div></div><div class="posttext">Hi,<br />
I am new to this forum. I have an issue with my nsis installer. During the install process i need to start JBoss application server and execute a command from command line. I was able to run JBoss using the command nsExec::ExecToLog but unable to execute the successive command as the the installer doesnt execute any further after starting JBoss server. Is there any way in running both the commands in two consecutive command line consoles as my first JBoss start console doesnt return to command prompt upon starting.<br />
<br />
I have tried with various options like <br />
ExecWait<br />
nsExec::Exec<br />
nsExec::ExecToStack and<br />
system::call<br />
<br />
Is there any way in which my issue could be resolved... ?<br />
Thank you in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th July 2006, 11:08</div></div><div class="posttext">Just use Exec. All the others that you have tried execute the executable and wait until it is finished.<br />
Exec will run it and just carry on.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nagaraju</div><div class="date">5th July 2006, 12:28</div></div><div class="posttext">Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yurik</div><div class="date">7th July 2006, 17:45</div></div><div class="posttext">I had similar issue with JBoss - my script should do something after JBoss stop. I decided to just look for server.log file. Maybe it will be useful for you:<br />
<br />
Function MainJBossClosingRoutine<br />
  Pop $JBossPath<br />
<br />
  StrCpy $JBossSubdir $JBossPath<br />
<br />
  ; This will stop JBoss in case it is FULLY loaded.<br />
  ; Exception will occur when it is loading, JBoss won't be stopped<br />
  SetOutPath &quot;$JBossSubdir\bin&quot;<br />
  nsExec::ExecToLog '&quot;$JBossSubdir\bin\shutdown.bat&quot; -S'<br />
<br />
  ; Wait until JBoss is closed since it takes some time.<br />
  ; The possible time is when server.log could be deleted.<br />
  StrCpy $1 0<br />
  ${while} ${FileExists} &quot;${JBossLogFile}&quot;<br />
    ; Try to delete it<br />
    Delete &quot;${JBossLogFile}&quot;<br />
    ; ...and wait till it is deleted.<br />
    ; The following algorithm is used:<br />
    ;   if log file exists, it means that<br />
    ;   JBoss is not shut down<br />
    ;   continuously check this file for 10 minutes.<br />
    ;   in case this file disappear - go on.<br />
    ;   in case in 10 minutes nothing happened, issue a message<br />
    ;   and continue.<br />
    ;   The latter situation may be caused by exceptions in<br />
    ;   shutdown batch.<br />
    IntOp $1 $1 + 1<br />
    ${if} $1 &lt;= 120 ; 2 minutes to close JBoss<br />
      Sleep 1000 ; one second<br />
    ${else}<br />
      MessageBox MB_ICONEXCLAMATION|MB_OK &quot;${CannotCloseJBoss}&quot;<br />
    ${endif}<br />
  ${endwhile}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nagaraju</div><div class="date">10th July 2006, 05:59</div></div><div class="posttext">Hi Yurik,<br />
Thanks for your suggestion.<br />
Anyways, i got my issue resolved using &quot;start run&quot; instead of &quot;run&quot; to start the JBoss server. This command opens the server in a separate command window than the existing. The issue is resolved.<br />
Regards,<br />
Nagaraju.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>