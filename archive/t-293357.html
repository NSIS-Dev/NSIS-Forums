<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Directory structure preservation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Directory structure preservation NSIS Discussion" />
	
	<title> Directory structure preservation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Directory structure preservation</div>
<hr />
<div class="pda"><a href="t-293357.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293357">Directory structure preservation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">khartley</div><div class="date">19th June 2008, 18:57</div></div><div class="posttext">I'm using &quot;File /r Ancillaries\*.*&quot; to write a complex directory tree &amp; file structure during my install.  According to the documentation the directory structure is supposed to be preserved when I do this, but I see all of the files throughout the tree being written to the directory I've specified via SetOutPath.  I'm trying to avoid having to call SetOutPath to write to each subdirectory in the tree.  Is there a way to actually have the File command preserve the directory structure without calling out each subdirectory b name in a command somewhere?<br />
<br />
Thanks for any help you can provide!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">19th June 2008, 19:14</div></div><div class="posttext">File /r Ancillaries\*<br />
<br />
All files and subdirectories under Ancillaries.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">khartley</div><div class="date">19th June 2008, 19:31</div></div><div class="posttext">Same thing with \* instead of \*.* - all of the files in the subdirectories (Ancillaries and below) end up at the same directory level.  None of the subdirectories are created.  I'm setting my output location to a directory called &quot;data&quot;.  What I 'd like to have happen is to end up with <br />
<br />
data\Ancillaries<br />
           files under Ancillaries<br />
data\Ancillaries\dir1<br />
           files under dir1<br />
data\Ancillaries\dir1\someOtherDir<br />
           files under someOtherDir<br />
<br />
instead I'm getting<br />
<br />
data<br />
           files under Ancillaries<br />
           files under dir1<br />
           files under someOtherDir</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">19th June 2008, 19:47</div></div><div class="posttext">Weird... worked for me 1000 times and still working.<br />
<br />
If you create a directory e.g. My application Setup and add inside there the Ancillaries the instruction has to be:<br />
File /r &quot;C:\My application Setup\*&quot;<br />
So when you run the installer &quot;My application Setup&quot; is replaced by the $INSTDIR and Ancillaries with its complete structure resides it tact under $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">khartley</div><div class="date">19th June 2008, 20:38</div></div><div class="posttext">Thanks for the help - I figured out the problem.  What I needed to do was:<br />
<br />
SetOutPath &quot;$INSTDIR\Ancillaries&quot;  <br />
File /r Ancillaries\*.*<br />
<br />
Since I didn't want everything in the directory above Ancillaries, this was the way to do it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">20th June 2008, 13:11</div></div><div class="posttext">You could just do File /r Ancillaries then. That retains the Ancillaries folder as well.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th June 2008, 13:24</div></div><div class="posttext">But then it'll recursively look for other files or folders named &quot;Ancillaries&quot; under the current working directory.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>