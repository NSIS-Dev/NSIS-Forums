<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help -&gt; nsDiaglogs issue: some label is overlap in second page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help -&gt; nsDiaglogs issue: some label is overlap in second page NSIS Discussion" />
	
	<title> Help -&gt; nsDiaglogs issue: some label is overlap in second page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help -&gt; nsDiaglogs issue: some label is overlap in second page</div>
<hr />
<div class="pda"><a href="t-313137.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=313137">Help -&gt; nsDiaglogs issue: some label is overlap in second page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">yudyzhao</div><div class="date">29th September 2009, 10:32</div></div><div class="posttext">I use created 2 custom pages by nsDialogs.nsh. The first show the label, button and link very well. But after go to next page, the label looks like be overlapped by some other controls. <br />
I post the code and the sreenshort here, someone please take a look and give me some idea how to solve it. <br />
Thanks!<br />
<br />
The first page show the Window Installer 3.1 installation:<br />
==========================================================<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $WindowsInstallerDialogHandle<br />
	<br />
	${If} error == $WindowsInstallerDialogHandle<br />
		Abort<br />
	${EndIf}<br />
	<br />
	${NSD_CreateIcon} 5u 8u -40u 31u<br />
	<br />
	${NSD_CreateLabel} 40u 8u -40u 31u &quot;$(WindowsInstallerIniField2Text)&quot;<br />
	Pop $WindowsInstallerInfoLabelHandle<br />
	<br />
	${NSD_CreateLabel} 40u 28u -40u 31u &quot;$(WindowsInstallerIniField3Text)&quot;<br />
	Pop $SecondInstallerInfoLabelHandle<br />
	<br />
	Call IsWindows3Dot1RedistibutablePresent<br />
	Pop $0<br />
	${If} 1 == $0<br />
		; show button<br />
		${NSD_CreateButton} 60u 93u 144u 14u &quot;$(WindowsInstallerIniField5Text)&quot;<br />
		Pop $WinInstallerFromDiskButtonHandle<br />
		${NSD_OnClick} $WinInstallerFromDiskButtonHandle InstallWindows3Dot1		; button clicked event<br />
	${EndIf}<br />
	<br />
	${NSD_CreateLink} 60u 72u -40u 10u &quot;$(WindowsInstallerIniField4Text)&quot;<br />
	Pop $WinInstallerLinkHandle<br />
	${NSD_OnClick} $WinInstallerLinkHandle OnWindowsInstallerLinkClicked	<br />
	<br />
	; Show the dialog<br />
	nsDialogs::Show<br />
	Return<br />
============================================================<br />
<br />
The second page show the .NET 3.5 installation:<br />
============================================================<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $DotNetDialogHandle<br />
	<br />
	${If} error == $DotNetDialogHandle<br />
		Abort<br />
	${EndIf}<br />
	<br />
	${NSD_CreateIcon} 5u 9u -40u 31u<br />
	<br />
	${NSD_CreateLabel} 40u 9u -40u 31u &quot;$(DotNet3IniField2Text)&quot;<br />
	Pop $DotNetInfoLabelHandle<br />
	<br />
	${NSD_CreateLabel} 40u 30u -40u 31u &quot;$(DotNet3IniField3Text)&quot;<br />
	Pop $SecondDotNetInfoLabelHandle<br />
	<br />
	Call IsDotNet3RedistibutablePresent<br />
	Pop $0<br />
	${If} 1 == $0<br />
		; show button<br />
		${NSD_CreateButton} 60u 91u 144u 14u &quot;$(DotNet3IniField5Text)&quot;<br />
		Pop $NetFromDiskButtonHandle<br />
		${NSD_OnClick} $NetFromDiskButtonHandle InstallDotNet3		; button clicked event<br />
	${EndIf}<br />
	<br />
	${NSD_CreateLink} 60u 70u -40u 10u &quot;$(DotNet3IniField4Text)&quot;<br />
	Pop $NetFromLinkHandle<br />
	${NSD_OnClick} $NetFromLinkHandle OnDotNetOnLinkClicked	<br />
	<br />
	; Show the dialog<br />
	nsDialogs::Show<br />
	Return<br />
============================================================</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">29th September 2009, 16:23</div></div><div class="posttext">As best as I can tell, you are seeing the exact same bug that I am seeing.<br />
<br />
This really seems to be a NSIS/nsDialogs redraw issue. I don't think that there is anything that we can do about it unless it is fixed in the code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">2nd October 2009, 21:02</div></div><div class="posttext">In the last 2 days, I have actively fighting with this issue. The common point seems to be that for the first Label control on the first nsDialogs custom page, that label will eventually turn invisible. It feels like a redraw issue as you can drag another window over the misbehaving installer window and you will see your label text come back.<br />
<br />
Today, at the suggestion of one of our programmers, his idea has actually solved the problem, but I doubt it is a good permanent fix and that the true bug is still hidden. For now, this solution works for us and I wanted to post about it here to get some feedback.<br />
<br />
Our programmer remembered a problem a year ago or so with a Windows app that was having a similar label redraw issue and the solution ended up being to remove the EX Transparent style from the control. nsDialogs sets this extended style for label controls. What we did was go into the nsDialogs.nsh file and comment out line 189:<br />
<br />
!define __NSD_Label_EXSTYLE ${WS_EX_TRANSPARENT}<br />
<br />
We now have two different installers who's first-nsDialogs-label-disappearing bug no longer occurs.<br />
<br />
So, how do we go about getting this fixed properly?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">5th October 2009, 16:55</div></div><div class="posttext">Sorry, the commenting out of the line was a dumb move, as it just caused warnings. We have since changed the line to<br />
!define __NSD_Label_EXSTYLE 0<br />
<br />
So, any ideas on how to address this issue properly? Anyone?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th October 2009, 07:53</div></div><div class="posttext">You might want to submit this as a bug report in the bug tracker?<br />
<br />
http://nsis.sourceforge.net/Bug_Reports</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">6th October 2009, 08:46</div></div><div class="posttext">Wow, I feel dumb now. I was looking for the bug link, but I think I kept searching for &quot;tracker&quot;. /selfsmack<br />
<br />
I will get this filed tomorrow. Thanks MSG!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">CrushBug</div><div class="date">6th October 2009, 18:41</div></div><div class="posttext">OK, bugs filed. Thanks for the help MSG.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">10th September 2010, 12:50</div></div><div class="posttext">Don't mean to resurrect this super-old thread - but I was going to log a bug and noticed this one in the queue there.<br />
One way to make this 'bug' show up is by moving the window off-screen, them moving it back on-screen.. forcing a repaint of the dialog, and making the portions disappear.<br />
<br />
I say 'bug' because you mention...<br />
I use created 2 custom pages by nsDialogs.nsh. The first show the label, button and link very well. But after go to next page, the label looks like be overlapped by some other controls.<br />
 <br />
What makes you think that the controls are, in fact, not overlapped?<br />
If you replace CreateLabel with CreateButton, you can check the bounds of the control you're creating.. and you'll see that they do overlap.<br />
<br />
That said.. I don't see the first label disappearing - it's the second one that goes away for me - so it might be unrelated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">10th September 2010, 13:50</div></div><div class="posttext">Could you be using mouse driver ipoint.exe v6.1? That caused redraw issues for me until I updated it to v7 (see this thread (http://forums.winamp.com/showthread.php?t=319883&amp;highlight=intellipoint))<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">10th September 2010, 17:39</div></div><div class="posttext">Yes, one control covers another:<br />
<br />
${NSD_CreateLabel} 40u 8u -40u 31u &quot;$(WindowsInstallerIniField2Text)&quot;<br />
Pop $WindowsInstallerInfoLabelHandle<br />
<br />
8+31=39, but the following top is only 28:<br />
<br />
${NSD_CreateLabel} 40u 28u -40u 31u &quot;$(WindowsInstallerIniField3Text)&quot;<br />
Pop $SecondInstallerInfoLabelHandle<br />
<br />
and the second one also:<br />
<br />
${NSD_CreateLabel} 40u 9u -40u 31u &quot;$(DotNet3IniField2Text)&quot;<br />
Pop $DotNetInfoLabelHandle<br />
<br />
31+9=40, but top position of next control is 30:<br />
<br />
${NSD_CreateLabel} 40u 30u -40u 31u &quot;$(DotNet3IniField3Text)&quot;<br />
Pop $SecondDotNetInfoLabelHandle</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>