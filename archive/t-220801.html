<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI - Conditional custom and Components page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI - Conditional custom and Components page NSIS Discussion" />
	
	<title> MUI - Conditional custom and Components page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI - Conditional custom and Components page</div>
<hr />
<div class="pda"><a href="t-220801.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=220801">MUI - Conditional custom and Components page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">6th July 2005, 16:23</div></div><div class="posttext">I have been working on an application portal and ended up in a bit of a predicament.<br />
<br />
I am using a MUI interface with a custom page containing a text field and a password field.  I only want the custom page to come up if a registry value does not exist.  If it does exist, I want it to go straight to the components page.<br />
<br />
The second part that I am needing help with is that I want the sections under the Component page altered by data that is read and verified by a seperate function of the installer.  I need sections created/checked/disabled(RO)/hidden depending on the data that is provided.  Using SectionSetFlags, I can do everything but create dynamic sections and make the sections visable or hidden.<br />
<br />
Thanks for any help you might provide.<br />
<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2005, 16:28</div></div><div class="posttext">Look at this:<br />
http://forums.winamp.com/showthread.php?threadid=220709<br />
and<br />
http://forums.winamp.com/showthread.php?threadid=220713<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">6th July 2005, 16:51</div></div><div class="posttext">Thanks again Afro UK.  I got the first part of skipping a custom MUI page based on a registry key.<br />
<br />
The second part is still a problem though.  I looked at your second link, and in that case, x-nem wanted to skip custom pages based on if a component was selected to install or not.<br />
<br />
What I am looking at doing is using an INI file to specify the components.  Like so:<br />
<br />
[1]<br />
Name=MyApp<br />
Location=\\blah\subfolder\blah.exe<br />
Required=Yes<br />
<br />
[2]<br />
...<br />
<br />
So I would need to use a loop to read out the components to be displayed (as well as what to execute) on the first Components page.<br />
<br />
Thanks again<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2005, 16:56</div></div><div class="posttext">You cannot dynamically add components. There's a fixed amount (set with Section's) on compile-time.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">6th July 2005, 17:02</div></div><div class="posttext">Ok, last question.<br />
<br />
Is there a way to hide a section from the components page?  I didnt see an option like that with SectionSetFlags.<br />
<br />
 - DF<br />
<br />
edit: Besides hard-coding it into the section syntax.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2005, 17:06</div></div><div class="posttext">You just need to set the section name to &quot;&quot; with SectionSetText<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">6th July 2005, 17:09</div></div><div class="posttext">Awsome.  Thanks a ton Afrow UK.  Your the best. :D <br />
<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">6th July 2005, 22:27</div></div><div class="posttext">Gah!  Thought I was all done.  I am having a problem with the SetSectionText command.<br />
<br />
This is the scenario right now:<br />
There are 2 sections, MyApp and AnotherApp, in that order.  Both components are hidden by default.  My functions display and enable AnotherApp.  With using the .onSelChange function, when I check and uncheck the box, it enables and disables both components.<br />
<br />
Any suggestions?<br />
<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2005, 23:14</div></div><div class="posttext">Sorry, what's the actual question / problem.<br />
<br />
Edit: Or rather, what do you need it to do instead.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">7th July 2005, 13:25</div></div><div class="posttext">Ok, heres what Im trying to do.<br />
<br />
By default, I hide all my sections.  In this case, there are only 2.<br />
<br />
So I got something like this:<br />
<br />
Section &quot;-MyApp&quot; MyApp<br />
 DetailPrint &quot;Blah1&quot;<br />
SectionEnd<br />
<br />
Section &quot;-AnotherApp&quot; AnotherApp<br />
 DetailPrint &quot;Blah2&quot;<br />
SectionEnd<br />
<br />
---<br />
Then I have a function reading an ini file and making the sections visible as needed.<br />
<br />
For the test I was running, MyApp was going to stay hidden, and AnotherApp was going to appear.  The syntax I am using is this:<br />
<br />
SetSectionText AnotherApp &quot;AnotherApp&quot;<br />
<br />
This makes only AnotherApp be displayed on the componets page.  So, that works so far.<br />
<br />
To test this, I made the following function.<br />
<br />
Function .onSelChange<br />
 SectionGetFlags MyApp $0<br />
 MessageBox MB_OK &quot;MyApp: $0&quot;<br />
 SectionGetFlags AnotherApp $0<br />
 MessageBox MB_OK &quot;AnotherApp: $0&quot;<br />
FunctionEnd<br />
<br />
Now, when I check the AnotherApp box on the components page, I get MyApp Flags = 1 and AnotherApp Flags = 1.  When I uncheck the box, I get MyApp = 0 and AnotherApp = 0.<br />
<br />
So the one checkbox that is being displayed is really controlling both MyApp and AnotherApp.<br />
<br />
What Im going to try to do this morning (USA) is take out my functions.  I have a lot of other things going on in the background and it could be causing problems.<br />
<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">7th July 2005, 14:01</div></div><div class="posttext">Just finished with my testing.  The problem seems to be with how the Section Flags really work.  Even if the SectionGetFlags = 1, then that doesnt necessarily mean that it will run the install for that app.  Same with 0 and not running the specified section.<br />
<br />
Maybe I am just trying to use the Section Flags in a way that they arent meant to be used.  Attached is my concept nsi.  Under the .onInit function, I am setting AnotherApp Section Flags to 1.  <br />
If I do that, then the MyApp checkbox on the components page is checked and so is the AnotherApp checkbox.<br />
If AnotherApp Section Flags is set to 0, then the MyApp Checkbox on the components page is UNchecked and AnotherApp checkbox is still checked.<br />
<br />
What I am needing to do is have the ability to control which checkboxes are checked and which ones arent.  I thought SectionSetFlags could do that, but maybe Im missing something?<br />
<br />
 - DF</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th July 2005, 15:23</div></div><div class="posttext">Ideally you should use the SetSectionFlag and ClearSectionFlag macros in Sections.nsh:<br />
<br />
!include Sections.nsh<br />
<br />
Function .onInit<br />
 !insertmacro SetSectionFlag ${secID} ${SF_SELECTED}<br />
FunctionEnd<br />
<br />
Edit: And to check if a Section is selected, use the SectionIsSelected macro.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">7th July 2005, 15:23</div></div><div class="posttext">Section flags are combinations of different settings. Use the Section.nsh macros to check whether a section is selected or not.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">7th July 2005, 15:56</div></div><div class="posttext">Ok, got another one.  Sorry for all the questions...<br />
<br />
When using the macro:<br />
<br />
 !insertmacro SetSectionFlag ${secID} ${SF_SELECTED}<br />
<br />
is there a way to use a variable for the SectionID?<br />
<br />
Thanks again,<br />
<br />
 - DF<br />
<br />
[EDIT]<br />
That and I just noticed that I cant use plain numbers instead of the SF_SELECTED.  How would I control RO/RW (setflags bit would be 17) using the macro?<br />
<br />
Nevermind the above statement... no coffee... :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th July 2005, 16:07</div></div><div class="posttext">SF_SELECTED and SF_RO are plain numbers. They're defines in Sections.nsh<br />
<br />
The SectionID is also just a plain number. The first Section will have an index of 0 (also SectionGroup and SectionGroupEnd's take up section slots).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DennisFeiock</div><div class="date">7th July 2005, 16:17</div></div><div class="posttext">Alright!  Got everything working.  Hopefully for sure this time.  Thanks again for all the help. :up:<br />
<br />
 - DF</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>