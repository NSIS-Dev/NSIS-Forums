<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" $INSTALL DIR depending on User Status, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  $INSTALL DIR depending on User Status NSIS Discussion" />
	
	<title> $INSTALL DIR depending on User Status [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  $INSTALL DIR depending on User Status</div>
<hr />
<div class="pda"><a href="t-307940.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307940">$INSTALL DIR depending on User Status</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xma</div><div class="date">3rd July 2009, 11:06</div></div><div class="posttext">Hi evryone<br />
I really hope someone could help me for my problem<br />
I would like to put a default path in the installer depending on the status of the user<br />
<br />
** If the user is Administrator $INSTDIR would have the value  $PROGRAMFILES<br />
<br />
** If the user is NOT Administrator $INSTDIR would have the value  $APPDATA<br />
<br />
In order to realize that I compute this section<br />
<br />
<br />
section &quot;Default Directory&quot;<br />
<br />
userInfo::getAccountType<br />
pop $0<br />
strCmp $0 &quot;Admin&quot; +2<br />
<br />
StrCpy $INSTDIR &quot;$APPDATA\myproject&quot;<br />
StrCpy $INSTDIR &quot;$PROGRAMFILES\myproject&quot;<br />
<br />
<br />
sectionEnd<br />
<br />
I can't access the value of $INSTDIR and i don tknow if this section is working<br />
<br />
Someone has a suggestion?? <br />
Thank you</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd July 2009, 12:04</div></div><div class="posttext">Use LogicLib.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ryanpager</div><div class="date">6th July 2009, 16:50</div></div><div class="posttext">Function getAccountType<br />
<br />
	userInfo::getAccountType<br />
	pop $0<br />
	strCmp $0 &quot;Admin&quot; +2<br />
<br />
<br />
	${if} $0 == administrator (not the value but you get what i mean)<br />
		StrCpy $INSTDIR &quot;$PROGRAMFILES\myproject&quot;<br />
	${else}<br />
		StrCpy $INSTDIR &quot;$APPDATA\myproject&quot;<br />
FunctionEnd<br />
<br />
<br />
Then just call the function during the install process right before the files are installed.<br />
<br />
To find out what to set $0 equal to, run a message box displaying the value. Make sure to use global variables as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">6th July 2009, 23:31</div></div><div class="posttext">Actually $0 will be 'Admin'. You don't need the StrCmp in that code and also you've missed an ${EndIf}.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>