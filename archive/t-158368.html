<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" @Afrow Write to text file line number, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  @Afrow Write to text file line number NSIS Discussion" />
	
	<title> @Afrow Write to text file line number [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  @Afrow Write to text file line number</div>
<hr />
<div class="pda"><a href="t-158368.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=158368">@Afrow Write to text file line number</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">3rd December 2003, 02:24</div></div><div class="posttext">Hi Afrow or anyone, I'm trying to use your script to write to a text file, but I'm having a problem, I'm trying to place a bit of text onto the first line of the text file, I'm only presuming that the other text in the file will be move down by on row, but when I try it, it deleted the whole text file and only places the &quot;hello&quot; on the second line down.<br />
<br />
<br />
Could you or anyone else tell me where I'm going wrong please<br />
<br />
<br />
<br />
Function .onInit<br />
Push hello<br />
Push 1<br />
Push &quot;$INSTDIR\file.txt&quot;<br />
Call WriteToFileLine<br />
<br />
<br />
Function WriteToFileLine<br />
Exch $0 ;file<br />
Exch<br />
Exch $1 ;line number<br />
Exch 2<br />
Exch $2 ;string to write<br />
Exch 2<br />
Push $3<br />
Push $4<br />
<br />
  FileOpen $4 $0 w<br />
 StrCpy $3 0<br />
<br />
loop:<br />
IntOp $3 $3 + 1<br />
   ClearErrors<br />
  FileRead $4 $0<br />
   IfErrors +2<br />
StrCmp $3 $1 0 loop<br />
  FileWrite $4 &quot;$\r$\n$2$\r$\n&quot;<br />
  FileClose $4<br />
<br />
Pop $4<br />
Pop $3<br />
Pop $2<br />
Pop $1<br />
Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd December 2003, 11:31</div></div><div class="posttext">You can't just stick text in the middle of the file, it won't push the following text further. You must open another file, write what you want into it, delete the original file and then copy over the new file. There are examples in the Archive that do that, you can use them as a reference.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">3rd December 2003, 23:01</div></div><div class="posttext">Oh well thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th December 2003, 16:43</div></div><div class="posttext">Sorry, I wrote the script while lacking a bit of skills.<br />
It now works.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">5th December 2003, 18:55</div></div><div class="posttext">Thanks Afrow I'll try it :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">5th December 2003, 21:03</div></div><div class="posttext">Yep it does work, now, I looked thorugh the archive but I wasn't sure which script was right, the thing is, how would I go about writing to more than one line <br />
Say I wanted for example<br />
<br />
Hello<br />
Hi again<br />
Bye Bye<br />
Im outta here<br />
Gone<br />
<br />
would it work if I placed $/r$/n and so on (if thats right I've forgotten this is correct or not)<br />
<br />
or say I wanted to write different lines to lines 1 5 10 7 22 and so on is this possible?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th December 2003, 23:29</div></div><div class="posttext">Originally posted by TonyDS <br />
Yep it does work, now, I looked thorugh the archive but I wasn't sure which script was right, the thing is, how would I go about writing to more than one line <br />
Say I wanted for example<br />
<br />
Hello<br />
Hi again<br />
Bye Bye<br />
Im outta here<br />
Gone<br />
<br />
would it work if I placed $/r$/n and so on (if thats right I've forgotten this is correct or not)<br />
<br />
or say I wanted to write different lines to lines 1 5 10 7 22 and so on is this possible?<br />
<br />
Thanks <br />
<br />
Yes all of this is possible.<br />
Write multiple lines to a single line number using $\r$\n, and as for writing to multiple line numbers, you will have to call the function multiple times.<br />
Don't forget that once a line has been entered, the preceeding lines will be moved down. Therefore, what used to be line 14 will now be line 15. You will have to take this into account while writing to different lines one after another.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lewellyn</div><div class="date">5th December 2003, 23:43</div></div><div class="posttext">Of course, you could always write from the bottom up and not worry about the numbers changing :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">5th December 2003, 23:48</div></div><div class="posttext">Originally posted by lewellyn <br />
Of course, you could always write from the bottom up and not worry about the numbers changing :) <br />
<br />
Good idea!<br />
<br />
-Stu :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TonyDS</div><div class="date">6th December 2003, 00:46</div></div><div class="posttext">True I could do it bottom up, but for this specific file it need to be top down<br />
<br />
Thanks again Afrow :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>