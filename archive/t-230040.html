<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NOTIFY not doing what it Should, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NOTIFY not doing what it Should NSIS Discussion" />
	
	<title> NOTIFY not doing what it Should [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NOTIFY not doing what it Should</div>
<hr />
<div class="pda"><a href="t-230040.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=230040">NOTIFY not doing what it Should</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ddod</div><div class="date">3rd November 2005, 20:35</div></div><div class="posttext">I have had this working before but it seems to have broken since I upgraded to the latest version NSIS (or I am missing something very subtle).  I have searched to Docs and the forums and I don't see what I might be doign wrong.  Everything appears to be right yet it still does not work.<br />
<br />
I am trying to get the installer to add a link to the desktop if the user pushes a button.<br />
<br />
My ini looks like this<br />
<br />
[Settings]<br />
NumFields=2<br />
<br />
[Field 1]<br />
Type=Label<br />
Text=&quot;...Some text here..&quot;<br />
Left=4<br />
Right=293<br />
Top=4<br />
Bottom=96<br />
<br />
[Field 2]<br />
Type=Button<br />
Text=Help Remove Software Now!<br />
Left=94<br />
Right=203<br />
Top=103<br />
Bottom=119<br />
Flags=NOTIFY<br />
<br />
My code looks like this:<br />
<br />
in the on init I load the ini<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;ini\noNAV.ini&quot; &quot;NONAV&quot;<br />
<br />
After the button is pushed (and from another page's function) I check to see what the state is...<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;NONAV&quot; &quot;Settings&quot; &quot;State&quot;<br />
         StrCmp $R0 2 func1 func2 <br />
<br />
<br />
Whether I push the button or not $R0 is always 0.  I am not sure what is going on</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd November 2005, 20:44</div></div><div class="posttext">The NOTIFY flag should be used along with the leave function, not another later function. The STATE field is reset when the page is destroyed. I'm not sure how it worked before, it was always reset.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ddod</div><div class="date">3rd November 2005, 20:48</div></div><div class="posttext">OK, that makes sense.<br />
<br />
So I need to check the state in the leave function of the same page where the button lives?<br />
<br />
Now that I think about it.  That is originally how I had it set up.  I decided that I wanted to use that info later on inthe installer so I moved it.<br />
<br />
So it looks as though if I want that info later I can copy the state to a variable that will not be written over.<br />
<br />
Thanks for your help I will give it a shot.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ddod</div><div class="date">3rd November 2005, 21:10</div></div><div class="posttext">That did the trick.  Thanks again.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>