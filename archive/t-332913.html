<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Fast and versatile recompilation process, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Fast and versatile recompilation process NSIS Discussion" />
	
	<title> Fast and versatile recompilation process [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Fast and versatile recompilation process</div>
<hr />
<div class="pda"><a href="t-332913.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332913">Fast and versatile recompilation process</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jai123</div><div class="date">27th July 2011, 16:58</div></div><div class="posttext">Hello,<br />
<br />
I am migrating my vb6 installer into NSIS installer. One of my priorities/requirements is to recompile all the needed files in the least number of steps possible. Ideally, a 1 click build-to-release process.<br />
<br />
At the moment, I am planning to create several folders. One for app_path files, one for system_files, etc. So, every time that a file is modified or a new file added, I just drop it in the right folder and recompile. However, if a completely new file is included, steps like registering a DLL still need to be implemented in code. <br />
<br />
Do you have any suggestions on how to create a fast and versatile recompilation process?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th July 2011, 17:11</div></div><div class="posttext">You can for example execute a bat or vbs script (or nsis exe, for that matter) during compilation using the !system command etc, and let it create a file list and save as NSIS script. Then !include that list.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jai123</div><div class="date">27th July 2011, 20:21</div></div><div class="posttext">MSG, I am a newbie, so I am not sure what you mean nor how to implement it.<br />
<br />
By chance, do you have a concrete example that I can look at? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">27th July 2011, 21:06</div></div><div class="posttext">Well my idea is basically to run an external script/program that lists all the files in your project directory, and writes it to an .nsh file for you, using either<br />
SetOutPath $INSTDIR<br />
File &quot;FoundFileXYZ.ext&quot;<br />
or<br />
SetOutPath $SYSDIR<br />
File &quot;FoundFileZYX.dll&quot;<br />
call DLLRegisterFunction<br />
...depending on whether it found a dll or another file. Then, if you !include that file list into your section, the NSIS compiler will simply paste the contents of the list into your NSIS script, and compile it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jai123</div><div class="date">9th August 2011, 19:08</div></div><div class="posttext">Sorry for the late reply.<br />
<br />
I am not sure if I understand well the advantage of including the files using an external file instead of directly including them in my NSIS script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th August 2011, 21:20</div></div><div class="posttext">The advantage is that you can execute external scripts/exe's during compilation, but you cannot add dll-registration code if one of the release files happens to have the .dll extension, during compilation. As far as I know, anyway.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jai123</div><div class="date">16th August 2011, 18:29</div></div><div class="posttext">Hey MSG, <br />
<br />
I was just wondering what do you mean with &quot;you cannot add dll-registration code if one of the release files happens to have the .dll extension&quot;.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">17th August 2011, 05:21</div></div><div class="posttext">What I mean with that is that it's just not possible to do what you want to do using NSIS script. Here's what: Try to find a way to do it in NSIS code, and you'll find out it's impossible. My method IS possible. Let's just say the advantage is that it works. &gt;_&gt;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>