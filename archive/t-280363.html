<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" blanking out the Install button, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  blanking out the Install button NSIS Discussion" />
	
	<title> blanking out the Install button [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  blanking out the Install button</div>
<hr />
<div class="pda"><a href="t-280363.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=280363">blanking out the Install button</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xthematrix</div><div class="date">30th October 2007, 20:30</div></div><div class="posttext">how do i blank out the install button.  i want it to appear, just faded out, and the user can't click on it until they select at least one component on MUI_PAGE_COMPONENTS<br />
<br />
is there a code that I can use to set the install button temporarily off, then when the user clicks on one of the components (each component is in a different section)it will become active.<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th October 2007, 20:32</div></div><div class="posttext">Disable/enable it with EnableWindow.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xthematrix</div><div class="date">30th October 2007, 22:23</div></div><div class="posttext">ok , i tried the following code and it removed the next button on the welcome page...<br />
<br />
!define MUI_WELCOMEFINISHPAGE_CUSTOMFUNCTION_INIT disableInstallButton<br />
<br />
Function disableInstallButton<br />
GetDlgItem $1 $HWNDPARENT 1<br />
EnableWindow $1 0<br />
FunctionEnd<br />
<br />
but now i want it to do the same thing, only on the components page, and this time the install button.<br />
I have a bunch of sections on the components page.<br />
How do I get this code to work on the MUI_PAGE_COMPONENTS?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th October 2007, 22:59</div></div><div class="posttext">Replace MUI_WELCOMEFINISHPAGE_CUSTOMFUNCTION_INIT with MUI_PAGE_CUSTOMFUNCTION_SHOW and place the entire line (!define ...) before !insertmacro MUI_PAGE_COMPONENTS.<br />
<br />
As for enabling/disabling the button dynamically on section check/uncheck, you need to do this in .onSelChange and use ${If} ${SectionIsSelected} (LogicLib.nsh).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xthematrix</div><div class="date">31st October 2007, 01:15</div></div><div class="posttext">ok replacing the line and placing it before MUI_PAGE_COMPONENTS worked successfully!<br />
The Install option is now blanked out.<br />
<br />
The next problem is this...<br />
<br />
I have included LogicLib at the top of my script as <br />
!include LogicLib.nsh<br />
<br />
However, when I add the following code to .onSelChange, which is located at the very bottom of my script, i get a compiler error message<br />
<br />
Function .onSelChange<br />
${If} ${SectionIsSelected}<br />
GetDlgItem $1 $HWNDPARENT 1<br />
EnableWindow $1 1<br />
FunctionEnd<br />
<br />
The error message is <br />
<br />
!insertmacro: macro &quot;_If&quot; requires 4 parameter(s), passed 3!<br />
Error in script &quot;G:\setup.nsi&quot; on line 398 -- aborting creation process<br />
<br />
<br />
If I take out the code<br />
${If} ${SectionIsSelected}<br />
the install button appears from its blanked out state when the user clicks on a component.  However, it does not return to the blanked out state when they unclick it.<br />
<br />
Any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">31st October 2007, 05:02</div></div><div class="posttext">${SectionIsSelected} requires a section index (the identifier you add after the section name). And you are missing the ${EndIf}. You probably want an ${Else} to reset (disable) the button when the section is not selected.<br />
Function .onSelChange<br />
GetDlgItem $1 $HWNDPARENT 1<br />
${If} ${SectionIsSelected} ${mySectionId}<br />
  EnableWindow $1 1<br />
${Else}<br />
  EnableWindow $1 0<br />
${EndIf}<br />
FunctionEnd<br />
<br />
With more than one section, the logic will have to be more complex, but this is the basic idea. You will want to check that the user has selected enough sections before you enable the button, and disable the button when they don't have enough sections selected.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">31st October 2007, 11:24</div></div><div class="posttext">Make sure this function goes after all sections.<br />
<br />
I.e.<br />
Section &quot;A section&quot; mySection1<br />
SectionEnd<br />
<br />
Section &quot;Another section&quot; mySection2<br />
SectionEnd<br />
<br />
Function .onSelChange<br />
GetDlgItem $1 $HWNDPARENT 1<br />
${If} ${SectionIsSelected} ${mySection1}<br />
${OrIf} ${SectionIsSelected} ${mySection1}<br />
  EnableWindow $1 1<br />
${Else}<br />
  EnableWindow $1 0<br />
${EndIf}<br />
FunctionEnd<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>