<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" !tempfile - most bizarre problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  !tempfile - most bizarre problem NSIS Discussion" />
	
	<title> !tempfile - most bizarre problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  !tempfile - most bizarre problem</div>
<hr />
<div class="pda"><a href="t-251842.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251842">!tempfile - most bizarre problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ikoonman</div><div class="date">24th July 2006, 17:16</div></div><div class="posttext">On my dev machine I have C and D drives (D is working drive), so HM NIS Editor and makensis executables are installed on that drive. When I create the installer.exe, and copy it to a test machine (only C drive), the strangest thing happen.<br />
<br />
When, in the beginning of my script, I call four macros (!tempfile) to create temporary filenames, they all point to &quot;D:\temp....&quot; !!!!! Surely it must now be &quot;C:\temp...&quot;?<br />
<br />
How is this possible? Even more, how do I fix it?<br />
<br />
makensis ver 2.18, hm nis edit 2.0.3<br />
<br />
Please advise!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th July 2006, 18:27</div></div><div class="posttext">!tempfile simply uses the directory Windows reports as the temporary directory. If you've set it to D:\temp, that's what it'd be.<br />
<br />
If you want to create temporary file names on runtime, you should use GetTempFileName.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ikoonman</div><div class="date">24th July 2006, 19:19</div></div><div class="posttext">Originally posted by kichik <br />
!tempfile simply uses the directory Windows reports as the temporary directory. If you've set it to D:\temp, that's what it'd be. <br />
<br />
That's what is so bizarre. The test machine has no D drive - why is it trying to create a tempfile on that drive?<br />
<br />
If you want to create temporary file names on runtime, you should use GetTempFileName.  <br />
<br />
Thanks will try</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">24th July 2006, 19:27</div></div><div class="posttext">Because that piece of code is not running on the test machine, it's running on the developer machine. Preprocessor instructions are executed at compile time, not runtime. What you're looking for is GetTempFileName.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>