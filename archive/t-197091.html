<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" adding a field into MUI_PAGE_DIRECTORY, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  adding a field into MUI_PAGE_DIRECTORY NSIS Discussion" />
	
	<title> adding a field into MUI_PAGE_DIRECTORY [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  adding a field into MUI_PAGE_DIRECTORY</div>
<hr />
<div class="pda"><a href="t-197091.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=197091">adding a field into MUI_PAGE_DIRECTORY</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">22nd October 2004, 19:02</div></div><div class="posttext">Is there an easy way to add a field to the install folder page? I'm just starting to use MUI and didn't see anything obvious. What I would like to do is to display a text field or a number field below the folder selection page. Any help is appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd October 2004, 19:07</div></div><div class="posttext">InstallOptions can be easier...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">22nd October 2004, 19:24</div></div><div class="posttext">I can define the field using InstallOptions, but how do I duplicate the folder selection and the browser button functionalities?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">22nd October 2004, 19:59</div></div><div class="posttext">For the folder dialog, use DirRequest<br />
<br />
See InstallOptions docs.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">2nd November 2004, 15:56</div></div><div class="posttext">Originally posted by Lobo Lunar <br />
For the folder dialog, use DirRequest<br />
<br />
See InstallOptions docs. <br />
<br />
OK, I looked at InstallOptions example test.nsi, and used the part for DirRequest. Now I have 2 questions:<br />
<br />
1. State=C:\Program Files\default_install_dir, can I use  some variable like $INSTDIR so it's not dependent of the C drive?<br />
<br />
2. How do I show 'Browse' inside the browse button? Now it's showing only &quot;...&quot;<br />
<br />
Thanks for the help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">2nd November 2004, 21:34</div></div><div class="posttext">1. State=C:\Program Files\default_install_dir, can I use some variable like $INSTDIR so it's not dependent of the C drive?You have to write the folder name to the INI file with WriteINIStr everytime you need to show the page.<br />
<br />
2. How do I show 'Browse' inside the browse button? Now it's showing only &quot;...&quot;It's not possible only with InstallOptions. You would need to use SendMessage and use System plugin to call SetWindowLong to set text and adjust the browse button.<br />
<br />
<br />
1. There is a plugin called InstallOptionsEx (see my signature) which enables you to just write a common variable ($0-$9, $R0-$R9) to the INI file. The plugin automatically gets its contents when you reserve or show a page. (I plan to put the support for $INSTDIR in the future)<br />
<br />
2. InstallOptionsEx also have the DirRequest control separated into Text + Button w/ DIRREQUEST flag so you can customize every aspect of the two controls, even use different notifications for each one.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">5th November 2004, 01:40</div></div><div class="posttext">Thanks very much, major dude. I'll play around with your InstallOptionsEx.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">5th November 2004, 03:07</div></div><div class="posttext">Ok, for the browse button, how do I make the folder selection to show?<br />
<br />
my test.ini looks like this:<br />
<br />
[Settings]<br />
<br />
[Field 1]<br />
Type=label<br />
Text=Select Destination Folder<br />
Left=0<br />
Right=-20<br />
Top=0<br />
Bottom=16<br />
<br />
[Field 2]<br />
Type=Text<br />
Left=0<br />
Right=-40<br />
Top=20<br />
Bottom=32<br />
Width=180<br />
MaxLen=260<br />
State=C:\Program Files\Netscape\Netscape10<br />
<br />
<br />
[Field 3]<br />
Type=Button<br />
Text=Browse<br />
Left=200<br />
Right=-1<br />
Top=20<br />
Bottom=32<br />
Flags=DIRREQUEST<br />
State=???<br />
ListItems=Text above the tree view<br />
<br />
What should I use for State? And do I need to code to put what the user selects from the Browse button into the Text field (Field 2)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">5th November 2004, 12:15</div></div><div class="posttext">What should I use for State?<br />
Just put the number 2.<br />
<br />
And do I need to code to put what the user selects from the Browse button into the Text field (Field 2)?<br />
Absolutely not. This is done by the plugin itself. The only thing it depends on is the Field number where it outputs text.<br />
<br />
And you also have to put the notification ONCLICK on the Notify INI value name or it won't execute. Like for example:<br />
<br />
Notify=ONCLICK<br />
<br />
Remove the Width or Right INI value name from Field 2. Width has an higher priority in the latest version, so it will be used, even if Right is set. (I should fix this on the next version)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">5th November 2004, 12:50</div></div><div class="posttext">Umm, the straight question related to the test.ini above is, why doesn't the browse button show the folder selection window when I click it? I can see that the default install folder is displayed in the text box, I can even use WriteINIStr to set it to $INSTDIR, but the browse button does nothing (this is on Win2K).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">5th November 2004, 12:52</div></div><div class="posttext">Sorry, deguix, I saw your last post just when I submitted my post. You can ignore my last question.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wiki</div><div class="date">5th November 2004, 17:16</div></div><div class="posttext">One more question, please. I was able to put the folder selection controls on the same page as an (optional) zip code field. However, the back button doesn't show up, the buttons i see are Install and Cancel, whereas I expect to see Back, Next, Cancel. As soon as a folder is selected by clicking the Browse button, it goes to install.<br />
I also noticed my INI file is updated with State=0 right below &quot;Settings&quot;. Is that a clue? I have none right now :)<br />
<br />
 Here's a snippet of the code for my pages:<br />
<br />
  Page custom WelcomePage<br />
<br />
  !insertmacro MUI_PAGE_LICENSE &quot;license.txt&quot;<br />
<br />
  Page custom SetCustom ValidateCustom &quot;: Select Folder and US zip code&quot;  <br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  !insertmacro MUI_UNPAGE_INSTFILES</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">5th November 2004, 22:15</div></div><div class="posttext">the back button doesn't show upYou can enable that on the Settings INI section with BackEnabled=1.<br />
<br />
I also noticed my INI file is updated with State=0 right below &quot;Settings&quot;.There should appear also a Notify INI value on Settings INI section. That's because you used a notification (ONCLICK).<br />
<br />
Thanks for warning me of those. One person doing everything is really difficult and bugs generally escape from my hands. I'll be going to fix both of them on the next version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">6th November 2004, 11:20</div></div><div class="posttext">You can enable that on the Settings INI section with BackEnabled=1.Whooops! It's BackShow=1 to show the back button. BackEnabled=1 only enables the button if it's already visible.<br />
<br />
There should appear also a Notify INI value on Settings INI section. That's because you used a notification (ONCLICK).In this case it wasn't appearing... Another thing to take care of.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>