<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to detect if a Text field is filled, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to detect if a Text field is filled NSIS Discussion" />
	
	<title> How to detect if a Text field is filled [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to detect if a Text field is filled</div>
<hr />
<div class="pda"><a href="t-332195.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332195">How to detect if a Text field is filled</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Doursin</div><div class="date">6th July 2011, 16:56</div></div><div class="posttext">Hello,<br />
<br />
I would like to enable Next button only if every text field is filled:<br />
<br />
<br />
<br />
Function Veto1<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Information&quot; $(InfoUser)<br />
<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
<br />
 nsDialogs::Create 1018<br />
  Pop $Dialog<br />
  <br />
  ${If} $Dialog == error<br />
    Abort<br />
<br />
  ${EndIf}<br />
<br />
 ${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br />
 Pop $Label<br />
<br />
 ${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br />
 Pop $Text<br />
 ${NSD_SetTextLimit} $Text 25<br />
 ${NSD_setFocus} $Text<br />
<br />
 ${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br />
 Pop $Label3<br />
<br />
 ${NSD_CreateText} 0 35u 100u 12u $C_Service<br />
 Pop $Text3 <br />
 ${NSD_SetTextLimit} $Text3 40<br />
<br />
 ${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br />
 Pop $Label4<br />
<br />
 ${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br />
 Pop $Text4<br />
 ${NSD_SetTextLimit} $Text4 55<br />
<br />
 ${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br />
 Pop $Label1<br />
<br />
 ${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br />
 Pop $Text1<br />
 ${NSD_SetTextLimit} $Text1 80<br />
<br />
 ${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br />
 Pop $Label2<br />
<br />
 ${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br />
 Pop $Text2<br />
 ${NSD_SetTextLimit} $Text2 80<br />
<br />
 nsDialogs::Show <br />
<br />
<br />
FunctionEnd<br />
<br />
Function Veto1Leave<br />
<br />
 StrCmp $Text &quot;&quot; -1 0<br />
 StrCmp $Text1 &quot;&quot; -2 0<br />
 StrCmp $Text3 &quot;&quot; -3 0<br />
 StrCmp $Text4 &quot;&quot; -4 0<br />
 EnableWindow $0 1<br />
<br />
 ${NSD_GetText} $Text $C_Clinique<br />
 ${NSD_GetText} $Text1 $C_Adresse1<br />
 ${NSD_GetText} $Text2 $C_Adresse2<br />
 ${NSD_GetText} $Text3 $C_Service<br />
 ${NSD_GetText} $Text4 $C_NomVets<br />
<br />
<br />
FunctionEnd<br />
<br />
<br />
<br />
Do I have to make an .INI file or am I on the good way to do it ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th July 2011, 17:49</div></div><div class="posttext">First, disable the Next button before you nsDialogs::Show. Then add OnChange macros for every text field, which all refer to the same function. Make this function check the contents of all fields (gettext macro), and then depending on their contents:<br />
${If} $Field1 != &quot;&quot;<br />
${AndIf} $Field2 != &quot;&quot;<br />
...<br />
${AndIf} $FieldLast != &quot;&quot;<br />
        GetDlgItem $0 $HWNDPARENT 1<br />
        EnableWindow $0 1<br />
${Else}<br />
        GetDlgItem $0 $HWNDPARENT 1<br />
        EnableWindow $0 0<br />
${EndIf}<br />
<br />
That's all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">6th July 2011, 22:42</div></div><div class="posttext">And of course you first need to call NSD_GetText and then check its value</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">7th July 2011, 06:53</div></div><div class="posttext">Yeah, that's what I said. :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Doursin</div><div class="date">8th July 2011, 11:45</div></div><div class="posttext">Thanks you !<br />
It works well.<br />
I let the new script below :<br />
<br />
<br />
<br />
Function Veto1<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Information&quot; $(InfoUser)<br />
<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
<br />
 nsDialogs::Create 1018<br />
  Pop $Dialog<br />
  <br />
  ${If} $Dialog == error<br />
    Abort<br />
<br />
  ${EndIf}<br />
<br />
 ${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br />
 Pop $Label<br />
<br />
 ${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br />
 Pop $Text<br />
 ${NSD_SetTextLimit} $Text 25<br />
 ${NSD_setFocus} $Text<br />
 ${NSD_OnChange} $Text Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br />
 Pop $Label3<br />
<br />
 ${NSD_CreateText} 0 35u 100u 12u $C_Service<br />
 Pop $Text3 <br />
 ${NSD_SetTextLimit} $Text3 40<br />
 ${NSD_OnChange} $Text3 Fd_Filled<br />
 <br />
<br />
 ${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br />
 Pop $Label4<br />
<br />
 ${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br />
 Pop $Text4<br />
 ${NSD_SetTextLimit} $Text4 55<br />
 ${NSD_OnChange} $Text4 Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br />
 Pop $Label1<br />
<br />
 ${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br />
 Pop $Text1<br />
 ${NSD_SetTextLimit} $Text1 80<br />
 ${NSD_OnChange} $Text1 Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br />
 Pop $Label2<br />
<br />
 ${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br />
 Pop $Text2<br />
 ${NSD_SetTextLimit} $Text2 80<br />
 ${NSD_OnChange} $Text2 Fd_Filled<br />
<br />
 nsDialogs::Show <br />
<br />
FunctionEnd<br />
<br />
Function Fd_Filled<br />
<br />
${NSD_GetText} $Text $C_Clinique<br />
${NSD_GetText} $Text1 $C_Adresse1<br />
${NSD_GetText} $Text2 $C_Adresse2<br />
${NSD_GetText} $Text3 $C_Service<br />
${NSD_GetText} $Text4 $C_NomVets<br />
<br />
${If} $C_Clinique == &quot;&quot;<br />
${OrIf} $C_Adresse1 == &quot;&quot;<br />
${OrIf} $C_Adresse2 == &quot;&quot;<br />
${OrIf} $C_Service == &quot;&quot;<br />
${OrIf} $C_NomVets == &quot;&quot;<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
${Else}<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 1<br />
${EndIf}<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Doursin</div><div class="date">8th July 2011, 11:48</div></div><div class="posttext">Thank you for reply ! <br />
I let my new script below :<br />
<br />
<br />
Function Veto1<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Information&quot; $(InfoUser)<br />
<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
<br />
 nsDialogs::Create 1018<br />
  Pop $Dialog<br />
  <br />
  ${If} $Dialog == error<br />
    Abort<br />
<br />
  ${EndIf}<br />
<br />
 ${NSD_CreateLabel} 0 0 100% 12u $(L_Clinique)<br />
 Pop $Label<br />
<br />
 ${NSD_CreateText} 0 10u 100u 12u $C_Clinique<br />
 Pop $Text<br />
 ${NSD_SetTextLimit} $Text 25<br />
 ${NSD_setFocus} $Text<br />
 ${NSD_OnChange} $Text Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 25u 100% 12u $(L_Service)<br />
 Pop $Label3<br />
<br />
 ${NSD_CreateText} 0 35u 100u 12u $C_Service<br />
 Pop $Text3 <br />
 ${NSD_SetTextLimit} $Text3 40<br />
 ${NSD_OnChange} $Text3 Fd_Filled<br />
 <br />
<br />
 ${NSD_CreateLabel} 0 50u 100% 12u $(L_NomVets)<br />
 Pop $Label4<br />
<br />
 ${NSD_CreateText} 0 60u 100u 12u $C_NomVets<br />
 Pop $Text4<br />
 ${NSD_SetTextLimit} $Text4 55<br />
 ${NSD_OnChange} $Text4 Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 75u 100% 12u $(L_Adresse1)<br />
 Pop $Label1<br />
<br />
 ${NSD_CreateText} 0 85u 200u 12u $C_Adresse1<br />
 Pop $Text1<br />
 ${NSD_SetTextLimit} $Text1 80<br />
 ${NSD_OnChange} $Text1 Fd_Filled<br />
<br />
 ${NSD_CreateLabel} 0 100u 100% 12u $(L_Adresse2)<br />
 Pop $Label2<br />
<br />
 ${NSD_CreateText} 0 110u 200u 12u $C_Adresse2<br />
 Pop $Text2<br />
 ${NSD_SetTextLimit} $Text2 80<br />
 ${NSD_OnChange} $Text2 Fd_Filled<br />
<br />
 nsDialogs::Show <br />
<br />
<br />
FunctionEnd<br />
<br />
Function Fd_Filled<br />
<br />
${NSD_GetText} $Text $C_Clinique<br />
${NSD_GetText} $Text1 $C_Adresse1<br />
${NSD_GetText} $Text2 $C_Adresse2<br />
${NSD_GetText} $Text3 $C_Service<br />
${NSD_GetText} $Text4 $C_NomVets<br />
<br />
${If} $C_Clinique == &quot;&quot;<br />
${OrIf} $C_Adresse1 == &quot;&quot;<br />
${OrIf} $C_Adresse2 == &quot;&quot;<br />
${OrIf} $C_Service == &quot;&quot;<br />
${OrIf} $C_NomVets == &quot;&quot;<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0<br />
${Else}<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 1<br />
${EndIf}<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2011, 12:17</div></div><div class="posttext">As already mentioned you need to set up OnChange events for each text box. There's no point disabling the buttons on page leave because that's too late! Personally I just throw an error message in page leave.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Doursin</div><div class="date">11th July 2011, 09:35</div></div><div class="posttext">About OnChange events, Didn't I make ? Did I missunderstand ?<br />
I didn't copy the page leave because I removed the StrCmp lines but it's clearer in my mind now.<br />
<br />
Thanks Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th July 2011, 15:29</div></div><div class="posttext">Yeah, you did it correctly.<br />
<br />
(Although, I just realized you might need to do a 'call Fd_Filled' before you nsDialogs::Show, so that the Next button will not be disabled when the user goes Back from a later page.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>