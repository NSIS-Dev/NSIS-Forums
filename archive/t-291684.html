<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SQL error handling, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SQL error handling NSIS Discussion" />
	
	<title> SQL error handling [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SQL error handling</div>
<hr />
<div class="pda"><a href="t-291684.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=291684">SQL error handling</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MHK</div><div class="date">12th May 2008, 09:06</div></div><div class="posttext">hey all<br />
<br />
Excecutes a SQL query<br />
    &lt;query&gt; - SQL query to execute <br />
<br />
Returns<br />
<br />
        * &quot;0&quot; Success, &quot;1&quot; Failure<br />
        * A message string <br />
<br />
this is in MSSQL_OLEDB_plug-in page<br />
****************************************<br />
the problem is:<br />
some time i get errors like this<br />
<br />
Output folder: C:\DOCUME~1\basharh\LOCALS~1\Temp\1\sqls<br />
Extract: 01.sql<br />
Extract: 02.sql<br />
<br />
C:\DOCUME~1\basharh\LOCALS~1\Temp\1\sqls\01.sql<br />
128<br />
<br />
C:\DOCUME~1\basharh\LOCALS~1\Temp\1\sqls\02.sql<br />
128<br />
******************************************<br />
<br />
&quot;C:\DOCUME~1\MHK\LOCALS~1\Temp\osql.exe&quot; -Sserver -FD4C06 -ddb1 -Usa -Ppazz -i &quot;Temp\CreateDB\Functions.sql&quot; -n<br />
-1073741515<br />
<br />
**********************************************<br />
<br />
the 1st error (128) was at SQLserver2005 (64-bit)<br />
<br />
the 2nd error (-1073741515)was in SQLserver2000 sp1<br />
<br />
how we can know each error means? and i guess there is many errors like this! where to find them all?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sgiusto</div><div class="date">12th May 2008, 21:26</div></div><div class="posttext">Hello,<br />
don't sure what you are missing...<br />
The SQL Plugin pushes on the stack a couple of return values each time.<br />
One value is for success/fail<br />
the other value is for descriptive message. If you get 128 as descriptive message, that is what the sql server returns (and this is strange). Both error codes does not seem to have any meaning on SQL technical documentation. Can you provide some sql script code that shows this behaviour?<br />
<br />
Regards<br />
  Stefano</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MHK</div><div class="date">13th May 2008, 08:20</div></div><div class="posttext">thanks for reply,<br />
<br />
my SQLs are normal, and it works well.<br />
but i have this errors whn i use my paych @ sql2000sp1 or sql2005 64-bit<br />
<br />
when we run sql.sql for ex:<br />
<br />
<br />
nsExec::ExecToStack '&quot;$Temp\osql.exe&quot; -S${DB_HOST_NAME} -d ${DB_NAME} -U${DB_USERNAME} -P${DB_PASSWORD} -i &quot;$TEMP\sqls\${sqlFile}&quot; -n'<br />
pop $0<br />
DetailPrint $0 ;$0 = 128<br />
pop $0<br />
DetailPrint $0 ;$0 = '' empty</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sgiusto</div><div class="date">13th May 2008, 13:14</div></div><div class="posttext">With that usage, 128 is the return value from OSQL<br />
The OSQL documentation states that the return values due to sql errors will be negative (from -1 to -102).<br />
You can force other error codes using RAISERROR or EXIT() in your sql code.<br />
<br />
If you use the sql_oledb plugin you get the same result?<br />
if so check if you have something like a 'select 128' as last select in your code (128 could be the value of a variable or of an expression)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>