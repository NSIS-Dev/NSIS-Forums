<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Delete external files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Delete external files NSIS Discussion" />
	
	<title> Delete external files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Delete external files</div>
<hr />
<div class="pda"><a href="t-215692.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215692">Delete external files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 11:03</div></div><div class="posttext">In my installation script I copy two self chosen files to a self chosen directory. These files are NOT compiled within the installer.<br />
Is it possible to delete them with the uninstaller? I retrieve error when trying that with: Delete &quot;filename&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2005, 14:10</div></div><div class="posttext">Try:Delete &quot;$INSTDIR\filename&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 14:45</div></div><div class="posttext">the files are copied to a &quot;self chosen&quot; directory. so maybe the files are not in $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2005, 14:52</div></div><div class="posttext">In the uninstaller, $INSTDIR is the directory where the uninstaller resides. If the uninstaller is not written to the same directory as those files, you'd have to find the path of those files first and pass it on to Delete.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 16:16</div></div><div class="posttext">hm sorry. in my first post i wrote Delete &quot;filename&quot; but filename contains also the complete path.<br />
<br />
like: c:\temp\example.txt<br />
<br />
I read this out from an config file of the application. I succesfully checked the filename with a MessageBox. The file exists but I can not delete it. <br />
<br />
??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th May 2005, 16:22</div></div><div class="posttext">Then you're probably experiencing the problem described in the following FAQ item:<br />
http://nsis.sourceforge.net/index.php?id=19&amp;backPID=15&amp;tx_faq_faq=20</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 20:06</div></div><div class="posttext">hm. I found that faq, too and tried it. but it does not work. maybe i did something wrong. tomorrow i can post the code (it's at work).<br />
<br />
or it's the filename... at the installation process i have to escape &quot;\&quot; and &quot; &quot;, because the installed programm (openVPN) need it in the config file. on deinstallation i have to &quot;re&quot;escape the string (from &quot;\\&quot; to &quot;\&quot; and &quot;\ &quot; to &quot; &quot;). maybe there went something wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th May 2005, 20:10</div></div><div class="posttext">When you say the file exists, did you do it with IfFileExists?<br />
<br />
IfFileExists &quot;filepath&quot; 0 +2<br />
MessageBox MB_OK &quot;filepath exists!&quot;<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">11th May 2005, 20:46</div></div><div class="posttext">I'll check that tomorrow! If I remember I did not check with IfFileExist.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">12th May 2005, 06:51</div></div><div class="posttext">I checked it with IfFileExists (see code)<br />
<br />
<br />
    delete:<br />
      ${UnStrRep} $tmp $tmp &quot;\\&quot; &quot;\&quot;<br />
      ${UnStrRep} $tmp $tmp &quot;\ &quot; &quot; &quot;<br />
      ${UnStrTrimNewLines} $tmp $tmp<br />
      DetailPrint &quot;LÃ¶sche Datei $tmp&quot;<br />
      <br />
      IfFileExists $tmp FileExists FileNotExists<br />
      FileExists:<br />
        MessageBox MB_OK &quot;Die Datei $tmp existiert&quot;<br />
        goto loop<br />
      FileNotExists:<br />
        MessageBox MB_OK &quot;Die Datei $tmp existiert nicht&quot;<br />
        goto error<br />
 <br />
<br />
The installer goes to the FileNotExists: label. I don't know why. The content of $tmp 'seemed' to be correct (for me, but apparent not for the uninstaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">blue_raptor</div><div class="date">12th May 2005, 07:02</div></div><div class="posttext">*oh oh* I feel so ashamed. Sorry guys for waisting your time!<br />
<br />
I did a &quot;noob&quot; mistake in programming. I cut the filepath with  StrCpy $tmp $2 &quot;&quot; 4<br />
but it has to be<br />
StrCpy $tmp $2 &quot;&quot; 5<br />
<br />
:igor: <br />
<br />
For this weekend I'll creep away.<br />
<br />
<br />
edit: my installer und uninstaller works fine for now (in that way it should work)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>