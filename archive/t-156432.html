<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" FileRequest, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  FileRequest NSIS Discussion" />
	
	<title> FileRequest [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  FileRequest</div>
<hr />
<div class="pda"><a href="t-156432.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=156432">FileRequest</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Dacore</div><div class="date">16th November 2003, 18:49</div></div><div class="posttext">I created some custom pages for user input. There I use a FileRequest control to let the user enter the path and filename to a log file which is created later on by the installed application<br />
<br />
[Field 3]<br />
Type=FileRequest<br />
Flags=FILE_EXPLORER|REQ_SAVE|WARN_IF_EXIST|PROMPT_CREATE<br />
Filter=Comma Delimited Text (*.csv)|*.csv|Text (*.txt)|*.txt<br />
Left=63<br />
Right=255<br />
Top=62<br />
Bottom=75<br />
<br />
When I use the browse button, to create a new file in the specified path, the result I get is the correct path and filename but without an extension. The PROMPT_CREATE flag is also not to executed, whereas WARN_IF_EXIST works as expected. <br />
How can I get the path and filename to be displayed with the correct extension according to the chosen filter?<br />
<br />
I'm using a development snap shot downloaded on 2003-11-08. <br />
<br />
Many thanks for this highly useful piece of software. Great work.<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th November 2003, 19:15</div></div><div class="posttext">On both XP and 98 PROMPT_CREATE only works without REQ_SAVE. Since those two just translate to flags for GetOpenFileName or GetSaveFileName I have to assume this is a Windows bug, feature, documentation bug or whatever you want to call it. I'll update InstallOptions' readme. Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dacore</div><div class="date">16th November 2003, 20:43</div></div><div class="posttext">Yes, without the REQ_SAVE the PROMPT_CREATE works.<br />
Sadly, it doesn't matter if I use REQ_SAVE or PROMPT_CREATE the result which is displayed in the State field does not contain the extension specified by the filter. Any idea how to get this?<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th November 2003, 20:51</div></div><div class="posttext">Works fine for me. Mind attaching an example installer with source code?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dacore</div><div class="date">16th November 2003, 21:22</div></div><div class="posttext">I would highly appreciate if you could tell me what I did wrong. Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th November 2003, 21:54</div></div><div class="posttext">Still works fine here. Try RC1 (http://forums.winamp.com/showthread.php?s=&amp;threadid=156288). You'd need to update the icon paths once upgrading as they've moved to Contrib\Graphics.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dacore</div><div class="date">17th November 2003, 20:25</div></div><div class="posttext">Thanks for trying my script kichik. I reall don't understand why it works for you. I now use rc2 and asked a friend to download nsis and compile the script for me. It still doesn't work here.<br />
<br />
To get straight thta we really talk about the same....I use the browse button to call the save file dialog. the filter is set to *.txt. I enter the filename *without* the extension and confirm the dialog. The path and filename appears in the input box but is missing the extension. I could even specify a filename with *.exe although the filter is set to *.txt. It is like in Word when saving a document, I only type the name and I know it will be saved with the extension *.doc as specified in the file dialog.<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th November 2003, 23:09</div></div><div class="posttext">The filter parameter only sets filters the user will be able to choose from. It doesn't force him to use those. A user can easily type *.* and hit and enter to get a complete list of all of the files, regardless of the filter.<br />
<br />
There is a parameter that auto appends a default extension for this API function. Add a feature request on SourceForge and we'll probably add it. Just not at the moment because we want to get b4 out first.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pyjamarama</div><div class="date">18th November 2003, 08:44</div></div><div class="posttext">The code runs ok.<br />
I have a question.<br />
The script came very handy because I wanted to prompt the user to enter the directory of the sqlserver databases.<br />
Of course with the filerequest the user selects a certain file.<br />
Is there a way, except string manipulation, that the user can just select a folder using this dialog?<br />
<br />
ps how do I get the full path in astring?Does State do the job?<br />
thanx!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th November 2003, 11:19</div></div><div class="posttext">You can use DirRequest instead of FileRequest to get the user to select a directory. If you want to get the directory according to the selected file, you'd have to use string manipulation. But there is a pre-ready function called GetParent in the documentation, so you don't have to reinvent the wheel.<br />
<br />
Yes, state contains the full path.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pyjamarama</div><div class="date">18th November 2003, 11:50</div></div><div class="posttext">thank u very much!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>