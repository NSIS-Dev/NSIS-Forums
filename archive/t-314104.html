<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with the plug-in processes, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with the plug-in processes NSIS Discussion" />
	
	<title> Problem with the plug-in processes [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with the plug-in processes</div>
<hr />
<div class="pda"><a href="t-314104.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314104">Problem with the plug-in processes</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">23rd October 2009, 16:54</div></div><div class="posttext">I had a strange situation. I'm using the plug-in processes to find out whether the application that I want to install or uninstall is currently running. Let's imagine that my application is named ApplicationName.exe and my installer - SetupApplicationName.exe.<br />
Before to preform installation I use in my code the following line:<br />
Processes::FindProcess &quot;ApplicationName&quot;<br />
I'm sure that the ApplicationName.exe is not running, but I always get result &quot;1&quot; that means running application. When I rename my installer to Setup.exe instead of SetupApplicationName.exe, everything works just fine. Is it possible that the plug-in recognizes wrongly the process, because the installer's executable contains in his name the name of the installed application?<br />
Please, give me advice how to solve this problem...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Zinthose</div><div class="date">23rd October 2009, 17:00</div></div><div class="posttext">Interesting, my first thought is that the plugin is seeing the &quot;ApplicationName&quot; at the end of the &quot;SetupApplicationName&quot;. If this is indeed true then it would be a definite bug in the plugin.<br />
<br />
Try renaming the Setup exe and try again to test the theory.  It's my Birthday and frankly I'm going to lazy and not test it myself   :P</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">23rd October 2009, 20:48</div></div><div class="posttext">What is the displayed name of the installer? The one defined by the Name command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">25th October 2009, 18:37</div></div><div class="posttext">The name of the installer is the same like the installed application - ApplicationName. Is it a problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">25th October 2009, 20:28</div></div><div class="posttext">Well it shouldn't be a problem, seeing how renaming the installer exe solves the problem... But it might be relevant to finding the cause of the bug, so I just thought I'd ask. Does using a different Name have any effect?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">26th October 2009, 07:36</div></div><div class="posttext">No, the name doesn't change anything. I have made several installers. Some of them have the same name like the installed application, but some of them not. The problem always exists. I made some further tests. I renamed the installer's executable to SetupApplicationName1.exe. I still have the mentioned problem. But if I change only one letter from ApplicationName than everything works fine. It really looks like a bug. Can you advice me how to solve my problem (with some kind of workaround or another plug-in), because I can not wait until somebody fixes the bug. I will try now to use the plug-in FindProcDll. From it's description it looks that it makes the same (and I hope that the same bug is not inside :))...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">TrifonovS</div><div class="date">26th October 2009, 09:45</div></div><div class="posttext">Now I can make a concussion. There is a bug in Processes.dll. When I look in the source I see the following code on line 143:<br />
if( NULL != strstr( szCurrentProcessName, szProcessName ) )<br />
The function strstr() makes this behavior. It searches for a sub-string in a string. I think that the function strcmp() must be used instead of it, then everything will be ok. By the way, I used FindProcDll plug-in and I don't have such a problem with it. It work fine with nsProcess plug-in too.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>