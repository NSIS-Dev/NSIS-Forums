<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Directing NSIS deteilprint to log file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Directing NSIS deteilprint to log file NSIS Discussion" />
	
	<title> Directing NSIS deteilprint to log file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Directing NSIS deteilprint to log file</div>
<hr />
<div class="pda"><a href="t-317622.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=317622">Directing NSIS deteilprint to log file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">10th March 2010, 10:21</div></div><div class="posttext">I'm using LogEx to log installation activities to a log file<br />
Is it possible to make all NSIS DetailPrint write to the log file as well?<br />
<br />
For example:<br />
1. Instruction File a.txt writes to DetailPrint <br />
<br />
Extract: a.txt... 100%<br />
<br />
2. delete instruction does the same...<br />
<br />
Tx<br />
<br />
Jammusi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">10th March 2010, 13:48</div></div><div class="posttext">http://forums.winamp.com/showthread.php?postid=2344868</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">10th March 2010, 16:43</div></div><div class="posttext">Thanks - but this is not what i need.<br />
I am already using LogEx plugin <br />
<br />
What I want is that NSIS instructions (like delete , extract) will also write to that log file - as they will write to the DetailPrint window in the installfiles page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">10th March 2010, 17:10</div></div><div class="posttext">Sorry, missed that.<br />
http://forums.winamp.com/showthread.php?postid=2540163</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">10th March 2010, 18:14</div></div><div class="posttext">no worries mate<br />
<br />
The Dump_to_log_file is not good enough as we need silent mode for our application<br />
<br />
LogEx - Unless i miss something is not good as well <br />
<br />
As for the special build feature - I checked that and it seems to be OK, but i still need to think about that a bit more. <br />
I want to choose the log name and so I can keep the log history - to follow the application version history. <br />
<br />
In addition - our setup is actually running in two phases. When the setup is being executed - it does some activities and than reboot the machine.<br />
After rebooting the process continues and the log file is being appended<br />
 <br />
Currently i achieve both requirements with the LogEx which is being initialized while setup (1. file name 2. appending to the log file that was created before rebooting)<br />
Also it work with silent mode.<br />
<br />
Can i do that with the LogSet?<br />
<br />
<br />
tx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">11th March 2010, 09:12</div></div><div class="posttext">I have no experience with the Logging Special Build, but I don't think so, or you will have to make your own special build of NSIS.<br />
To work around this, you could rename the logging file after the first install, and append the new logging file created after reboot to this file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">11th March 2010, 10:41</div></div><div class="posttext">Renaming the file and creating new file might be a sufficient workaround - only I think it is not applicable.<br />
<br />
The reason is that the second part of the setup is not a manual operation - but rather being performed automatically by using Windows RunOnce mechanism. <br />
Before rebooting I add the setup to the Windows registry RunOnce - so it will executed by Windows right after the machine reboots.<br />
<br />
This means that I can not rename the file as when the setup runs it was already been overridden<br />
<br />
What do you think?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">11th March 2010, 10:53</div></div><div class="posttext">What I meant:<br />
 - Run install with log to $INSTDIR\install.log<br />
 - Before reboot -&gt; Rename $INSTDIR\install.log to  e.g. $INSTDIR\Logging.txt <br />
 - Reboot<br />
 - Run second part of installer with log to $INSTDIR\install.log<br />
 - append install.log to Logging.txt</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">11th March 2010, 11:49</div></div><div class="posttext">Now i got you ....but still no can do ;) <br />
<br />
The reboot takes place from within the first part of the setup.<br />
<br />
The first step actually prepare the surface to the second part and reboots the machine. <br />
Meaning - the &quot;first&quot; install.log can not rename as it is still being used by the setup.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th March 2010, 11:58</div></div><div class="posttext">There is no need to rename install.log. As long as both installs run from the same folder they will both append to the same install.log file.<br />
<br />
Personally I just stick to using the NSIS logging build and do away with other logging methods. However if you really want to append the logs you'll have to launch another executable at the end of the last installer to do the merge after a set time.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">11th March 2010, 14:08</div></div><div class="posttext">Stu,<br />
<br />
If I understand correctly what you say - using the NSIS logging build will append to the same log, so there is no need to do this using another application. That is because the after reboot setup is actually the same executable that knows its state.<br />
<br />
This is good enough for me (assuming it works with silent mode - I still need to verify that). I guess I can workaround - the other requirements this way or another.<br />
<br />
I'll check and keep you posted<br />
<br />
Jammusi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jammusi</div><div class="date">14th March 2010, 14:10</div></div><div class="posttext">Hi,<br />
I checked that - and it's really being appended - but here is another problem I didn't think about<br />
<br />
The setup / uninstall processes also activates an external utility to perform some tasks.<br />
<br />
Using the LogEx, and by transferring the log file full name, this utility is also able to write to the log file.<br />
<br />
But when using the log file created by the LogSet - it canâ€™t write to the file as the file is locked.<br />
<br />
Can the locking be bypassed somehow?<br />
<br />
Tx<br />
<br />
Jammusi</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>