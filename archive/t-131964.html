<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" IMPORTANT: Bug with CopyFiles in latest CVS, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  IMPORTANT: Bug with CopyFiles in latest CVS NSIS Discussion" />
	
	<title> IMPORTANT: Bug with CopyFiles in latest CVS [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  IMPORTANT: Bug with CopyFiles in latest CVS</div>
<hr />
<div class="pda"><a href="t-131964.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=131964">IMPORTANT: Bug with CopyFiles in latest CVS</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">16th April 2003, 18:18</div></div><div class="posttext">Hello, I am quite confident that I have found some kind of problem with CopyFiles in the latest development snapshot.<br />
<br />
The bug can be experienced with Examples\bigtest.nsi. Essentially the installer crashes when it hits the CopyFiles instruction on line 192.<br />
<br />
To reproduce bug:<br />
1. get latest NSIS version from sourceforge<br />
2. compile ${NSISDIR}\Examples\bigtest.ini<br />
3. run bigtest.exe (you can disable all sections except for 'Test CopyFiles' since that's what we're interested in ;))<br />
4. CRASH!!<br />
<br />
This is happening on XP Pro no service packs.<br />
<br />
To verify that it is the CopyFiles instruction, I commented out line 192 and went through steps 2 - 4. No crash.<br />
<br />
I hope this can be resolved without too much difficulty, I don't have a copy of the April 14th snapshot handy so I can't go ahead with my installer unless CopyFiles works. ;)<br />
<br />
Oh, I'm attaching a screenshot that is in chronological order from top to bottom showing exactly what happens.<br />
<br />
Cheers. :)<br />
<br />
Salaam/Peace</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th April 2003, 19:51</div></div><div class="posttext">I have uploaded a recompiled version of makensis.exe. It solves the problem. Last time we got rid of this problem by simply updating the Platform SDK, and as far as I know Joost (who uploaded the last makensis.exe) has the latest Platform SDK. If he really did have it then I intend to go a little deeper this time and find out the cause for this beyond the Platform SDK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">16th April 2003, 19:56</div></div><div class="posttext">Thanks Kichik. :)<br />
<br />
I'll head over and grab that new makenisis then. Hope it was just a platform SDK issue so you don't have to spend any more time on this.<br />
<br />
Salaam/Peace.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th April 2003, 20:06</div></div><div class="posttext">From a first glimpse over this it seems something with the import table is seriously defected with whatever is causing this. The numbers are off by a set number for every imported DLL. As I have focused more on the resource section of the PE format when I learned about it (for the full color icons, etc.) I don't yet fully understand the import table structure so I'll have to go learn some more :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">16th April 2003, 20:45</div></div><div class="posttext">He forgot to install the latest Platform SDK on his new computer. Phew! :D<br />
<br />
From what I have read up until now I have discovered that the hint number that helps Windows search for the export was wrong for almost all of the imported functions. I don't understand why it disrupted SHFileOperation and nothing else, I guess we'll never know... A corporate secret or something like that :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">psyke</div><div class="date">16th April 2003, 21:13</div></div><div class="posttext">lol - i guess so, they've got plenty of secrets. ;)<br />
<br />
I'm glad it was just a matter of needing the latest PSDK. :)<br />
<br />
Thanks for your help. :)<br />
<br />
Salaam/Peace.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">17th April 2003, 09:01</div></div><div class="posttext">It may be that all of the other functions were being looked up by name and for some reason SHFileOperation was being looked up by ordinal which would from what you've said be wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">17th April 2003, 11:17</div></div><div class="posttext">Nope, it was looked by name too :weird:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>