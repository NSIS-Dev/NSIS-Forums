<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" branching installation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  branching installation NSIS Discussion" />
	
	<title> branching installation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  branching installation</div>
<hr />
<div class="pda"><a href="t-269686.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269686">branching installation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">theblazingangel</div><div class="date">17th April 2007, 12:39</div></div><div class="posttext">i'm having a problem trying to branch my installation instructions depending on something the user defined earlier in the script.<br />
<br />
if the user is packing a 'full' release (${REL_TYPE} == 'Full'), one set of installation instructions should be used, if the user defined it as an 'update' release another set would be used.<br />
<br />
the problem is that both use the same instructions, except only the 'update' branch uses the /nonfatal switch. basically if any files are missing when compiling a 'full' release i want it to error out, but when compiling an 'update' release i want it to just display the warning.<br />
<br />
how can i do this? currently it's displaying errors on the 'full' set of instructions when compiling an 'update' release because files are missing.<br />
<br />
is it even possible to do what i'm attempting?<br />
<br />
${If} ${REL_TYPE} == 'Full'<br />
        File file1.exe<br />
        File file2.exe<br />
${Else}<br />
        File /nonfatal file1.exe<br />
        File /nonfatal file1.exe<br />
${EndIf}<br />
File: &quot;file1.exe&quot; -&gt; no files found.<br />
(line number was from the 'full' branch!)<br />
<br />
although finding a solution may not sound important, actually it is. the 'full' install also needs to copy dll's to system32, dll's which won't be included in 'update' releases (quite large).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">17th April 2007, 13:09</div></div><div class="posttext">LogicLib is suitable for runtime, won't help you in compile time.<br />
Instead you may use !ifdef e.g.<br />
!ifdef UPDATE<br />
File .....<br />
File .....<br />
!else ifdef FULL<br />
File .....<br />
File .....<br />
!endif<br />
And pass the selected definition either update or full to the compiler through the /D swich.<br />
You may even organize your files in a macro with parameters so you'll have not to retype the same code twice.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">theblazingangel</div><div class="date">17th April 2007, 14:44</div></div><div class="posttext">awesome, thanks @Red Wine<br />
<br />
i suspected it would be something like that. i replaced ${If} with !if and it works :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>