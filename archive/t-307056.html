<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" RequestExecutionLevel and XP - Help Required, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  RequestExecutionLevel and XP - Help Required NSIS Discussion" />
	
	<title> RequestExecutionLevel and XP - Help Required [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  RequestExecutionLevel and XP - Help Required</div>
<hr />
<div class="pda"><a href="t-307056.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307056">RequestExecutionLevel and XP - Help Required</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kevin_gale</div><div class="date">3rd June 2009, 17:46</div></div><div class="posttext">Hi.<br />
<br />
We are converting our installers from Inno Setup to NSIS and one thing that we would like to continue to do is force the user to run the installer with admin privileges (XP &amp; Vista). Currently, this is achieved via the Inno Setup 'PrivilegesRequired' command.<br />
<br />
I know this can be done with NSIS installers when running under Vista via 'RequestExecutionLevel' but is there a way to force the same under XP? Currently, the installer just runs as the current user level and fails while copying files due to locked down privileges.<br />
<br />
We would prefer to do it in such a way that the operating system stops the installer from running as it means that all messages will be localized by the operating system (the way it works with our Inno Setup installers). It is also much nicer than letting the installer run, checking the privileges and then quitting with a message telling the user to re-launch.<br />
<br />
Our installer will be using the Unicode version of NSIS if this makes a difference to the solution.<br />
<br />
<br />
<br />
Best Regards,<br />
Kev.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd June 2009, 20:12</div></div><div class="posttext">use the UserInfo plugin in .onInit or .onGuiInit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kevin_gale</div><div class="date">3rd June 2009, 20:19</div></div><div class="posttext">Hi Anders.<br />
<br />
Thanks for your reply.<br />
<br />
I guess using this plug-in means that the installer has to actually run before we can detect the authentication level?<br />
<br />
This is something we can do as a last resort but it means translating the message into 11 (soon to be 15+) languages.<br />
<br />
It would be nice if we could embed the relevant manifest so that Windows handles this in the same way as it does for Vista rather than our installer script having to do it.<br />
<br />
<br />
Regards,<br />
Kevin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd June 2009, 20:32</div></div><div class="posttext">That feature was added to Vista because of UAC, on XP, you are on your own</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kevin_gale</div><div class="date">4th June 2009, 10:24</div></div><div class="posttext">Hi Anders.<br />
<br />
Thanks for your reply.<br />
<br />
Is there an official place to post enhancement requests?<br />
<br />
We can live with this limitation for the moment but it would be great if we could address it in a future version.<br />
<br />
Technically, it is possible as Inno Setup does it so I guess it is just a case of someone implementing the relevant code.<br />
<br />
<br />
<br />
Cheers,<br />
Kev</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">4th June 2009, 10:33</div></div><div class="posttext">Other than having to translate the strings, I don't understand what more you want. I guess you could request a generic admin required message to be added to the official language files @ http://sourceforge.net/tracker/?atid=373088&amp;group_id=22049&amp;func=browse</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kevin_gale</div><div class="date">4th June 2009, 11:10</div></div><div class="posttext">Hi Anders.<br />
<br />
It looks like I was mistaken.<br />
<br />
I was under the impression that XP was handling the alert when running our Inno Setup installer. However, it appears that it is actually Inno Setup doing the checking rather than Windows.<br />
<br />
<br />
Sorry, for wasting everyone's time.<br />
<br />
<br />
Kev.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>