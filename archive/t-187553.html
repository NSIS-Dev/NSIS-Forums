<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Next Button or something else?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Next Button or something else? NSIS Discussion" />
	
	<title> Next Button or something else? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Next Button or something else?</div>
<hr />
<div class="pda"><a href="t-187553.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=187553">Next Button or something else?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">monidon</div><div class="date">23rd July 2004, 17:09</div></div><div class="posttext">Hello,<br />
I am having problem with the behaviour of the custom dialog box I have created. This dialog box displays 'Next' button disabled until you click on CheckBox. Selecting Check box make the 'Next' button enabled. Which works perfectly fine until you click on 'Next'. Once you click 'Next' and again if I come back to the same page by clicking 'Back' then Clicking checkbox take me to the <br />
previous screen Where it should just enable or disable the Next button. Following is the code..Can someone help me to sort the problem. Thanks, Monika<br />
<br />
Function .onInit<br />
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;Warning.ini&quot;<br />
FunctionEnd<br />
<br />
Function WarningPage<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUESTATE &quot;Warning.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
  ;Before Displaying the page retain the settings to display next button enabled/disabled accordingly.<br />
<br />
  GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />
  EnableWindow $NEXTWINDOW 0<br />
  <br />
  StrCmp $CHK_CONTINUESTATE &quot;1&quot; +3<br />
  EnableWindow $NEXTWINDOW 0<br />
  Goto +2<br />
  EnableWindow $NEXTWINDOW 1<br />
<br />
   <br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;Warning.ini&quot; &quot;Field 1&quot; &quot;Text&quot; $(WARNING_MAIN_TEXT)<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;Warning.ini&quot; &quot;Field 2&quot; &quot;Text&quot; $(WARNING_CONTINUE)<br />
<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;Warning.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
Function WarningPage_Leave<br />
<br />
 !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUE &quot;Warning.ini&quot; &quot;Settings&quot; &quot;State&quot;<br />
 <br />
   <br />
  StrCmp $CHK_CONTINUE 0 ClickNextBtn<br />
  StrCmp $CHK_CONTINUE 2 NextBtnState<br />
<br />
  <br />
NextBtnState:<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $CHK_CONTINUESTATE &quot;Warning.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
  <br />
  GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />
    <br />
  StrCmp $CHK_CONTINUESTATE &quot;1&quot; +3<br />
  EnableWindow $NEXTWINDOW 0<br />
  Goto +2<br />
  EnableWindow $NEXTWINDOW 1<br />
<br />
  Abort<br />
  <br />
<br />
ClickNextBtn:<br />
<br />
<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd July 2004, 20:06</div></div><div class="posttext">You cannot disable the Next button with InstallOptions unfortunately. However, what you can do is stop the user from leaving the dialogue.<br />
<br />
E.g.<br />
<br />
Function CustomDialogue<br />
Push $R0<br />
Top:<br />
InstallOptions::dialog &quot;dlg.ini&quot;<br />
 Pop $R0<br />
 StrCmp $R0 next 0 +3<br />
  ReadINIStr $R0 &quot;dlg.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
  StrCmp $R0 0 Top ;if checkbox unchecked, go back<br />
Pop $R0<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">24th July 2004, 03:33</div></div><div class="posttext">monidon:<br />
Attach a reduced, but compilable version of your script.<br />
Then it will be easier to help you.<br />
<br />
Afrow:<br />
The code that monidon has included:<br />
<br />
GetDlgItem $NEXTWINDOW $HWNDPARENT 1<br />
EnableWindow $NEXTWINDOW 0<br />
<br />
actually does disable the &quot;Next&quot; button.<br />
Try it and see.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">monidon</div><div class="date">26th July 2004, 12:22</div></div><div class="posttext">Thanks for your replies.<br />
What Iceman_K saying is right, I can enable disable Next button with the code I posted. Only problem I am facing is that when I check the checkbox which makes the Next button enabled, I go to next page and come back to change my settings by clicking the checkbox again takes me to previous page. Where it should just disable the button again. <br />
Can't understand why this is happening.<br />
Any help would be appriciated.<br />
Thanks,<br />
Monika</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">26th July 2004, 13:11</div></div><div class="posttext">Again: attach a compilable version of your script demonstrating the problem.<br />
Maybe then someone will be able to help you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">monidon</div><div class="date">26th July 2004, 14:12</div></div><div class="posttext">Now I have attached sample NSIS script which I wrote to demonstrate what is happening. Please have a look..can download and try running it to see its behaviour. YOu will need DynamicDlg2.ini file as well. Which includes the following fields <br />
************************************************<br />
[Settings]<br />
NumFields=3<br />
<br />
[Field 1]<br />
Type=Groupbox<br />
Text=&quot;This is a group box...&quot;<br />
Left=0<br />
Right=-1<br />
Top=0<br />
Bottom=-4<br />
<br />
[Field 2]<br />
Type=Checkbox<br />
Text=Enable/Disable Next<br />
Flags=NOTIFY<br />
State=0<br />
Left=10<br />
Right=100<br />
Top=17<br />
Bottom=25<br />
<br />
[Field 3]<br />
Type=Label<br />
Text=This is just an example script<br />
Left=9<br />
Right=436<br />
Top=84<br />
Bottom=102<br />
*******************************************<br />
<br />
Thanks and any help will be appriciated.<br />
Monika</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">26th July 2004, 18:15</div></div><div class="posttext">I don't know what to tell you.... it works perfectly for me.<br />
Are you sure you have all the latest CVS updates?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">monidon</div><div class="date">27th July 2004, 15:57</div></div><div class="posttext">Hello Iceman_K,<br />
What you were saying is right. Updating latest CVS files made my program run perfectly fine. But I can't really use this update for building our product release as the code is not tested and it won't be good idea to use updated CVS files for building release product. <br />
<br />
But thanks a lot for your help. It did helped me and now atleast I know that there is a solution. So I will wait until NSIS release next version with this bug fix.<br />
<br />
Thanks once again,<br />
Monika</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th July 2004, 16:53</div></div><div class="posttext">That will probably be some time.<br />
I myself would rather use the CVS version than the 'stable' release. It's been often that the last 'stable' release has had more bugs than the CVS because the CVS has had the bug fixes implemented.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>