<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Passing a parameter to the .nsi file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Passing a parameter to the .nsi file NSIS Discussion" />
	
	<title> Passing a parameter to the .nsi file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Passing a parameter to the .nsi file</div>
<hr />
<div class="pda"><a href="t-311839.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=311839">Passing a parameter to the .nsi file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 09:56</div></div><div class="posttext">Hello,<br />
<br />
I developped an NSIS installer who works.<br />
<br />
But now I would like to modify its reaction when it is called with different parameters.<br />
<br />
For exemple &quot;my_intaller.exe /P parameter&quot; (where /P significate that the parameter exists and parameter is its value) will allow the installer to know that it has a page to show that it doesn't show if the parameter doesn't exist.<br />
<br />
I really don't know how to control if this parameter exists or not and how to read its value(s) (there can be many), could you please help me, it is very important and urgent.<br />
<br />
Thank you very much.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th September 2009, 10:05</div></div><div class="posttext">Have you tried googling for 'parameter NSIS'?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 10:52</div></div><div class="posttext">Sure I did it, but I can't find a suitable answer to my case, I don't know how to read if there is a parameter and it's value. I found solutions to compile a new .exe with parameters but it is not that I want to do.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 11:00</div></div><div class="posttext">I found this kind of answer but I don't understand what is the variable $CMDLINE and how it is passed and to read it. The description of this Funtion says &quot;This function gets all parameters given to the installer on the command-line.&quot;<br />
<br />
<br />
 ; GetParameters<br />
 ; input, none<br />
 ; output, top of stack (replaces, with e.g. whatever)<br />
 ; modifies no other variables.<br />
 <br />
Function GetParameters<br />
 <br />
  Push $R0<br />
  Push $R1<br />
  Push $R2<br />
  Push $R3<br />
 <br />
  StrCpy $R2 1<br />
  StrLen $R3 $CMDLINE<br />
 <br />
  ;Check for quote or space<br />
  StrCpy $R0 $CMDLINE $R2<br />
  StrCmp $R0 '&quot;' 0 +3<br />
    StrCpy $R1 '&quot;'<br />
    Goto loop<br />
  StrCpy $R1 &quot; &quot;<br />
 <br />
  loop:<br />
    IntOp $R2 $R2 + 1<br />
    StrCpy $R0 $CMDLINE 1 $R2<br />
    StrCmp $R0 $R1 get<br />
    StrCmp $R2 $R3 get<br />
    Goto loop<br />
 <br />
  get:<br />
    IntOp $R2 $R2 + 1<br />
    StrCpy $R0 $CMDLINE 1 $R2<br />
    StrCmp $R0 &quot; &quot; get<br />
    StrCpy $R0 $CMDLINE &quot;&quot; $R2<br />
 <br />
  Pop $R3<br />
  Pop $R2<br />
  Pop $R1<br />
  Exch $R0<br />
 <br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 11:23</div></div><div class="posttext">Is it possible to show the license page just when there is a parameter add to the .exe file ?<br />
<br />
Someone could tell me how to do, because the '!insertmacro MUI_PAGE_LICENSE &quot;license.rtf&quot;' line can't be add in a function and the function &quot;${If} ...&quot; has to be include in a function, how to do ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 12:02</div></div><div class="posttext">I found this post who seems to convain perfectly to my problem <br />
<br />
forums.winamp.com/showthread.php?postid=2211896<br />
<br />
but I don't uderstand how to modify the third part named parseParameters function to adapt it to my case. For exemple I need to show the license page IF there is a parameter and only in this case.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">9th September 2009, 13:37</div></div><div class="posttext">Use the license page Pre function to call 'abort' unless the parameter was supplied. Abort in a pre function will skip the page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th September 2009, 15:05</div></div><div class="posttext">Use GetParameters and GetOptions from the manual.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Icks92</div><div class="date">9th September 2009, 15:56</div></div><div class="posttext">What is the Pre Function ?<br />
<br />
I have now :<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro GetParameters<br />
!insertmacro GetOptions<br />
!include &quot;pages\licenseshow.nsh&quot;<br />
<br />
... in my .nsi file but the license page appears before the welcome one.<br />
<br />
Does someone have a explanation ?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>