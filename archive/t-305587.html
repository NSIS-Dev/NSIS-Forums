<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Delay Installer until unstall finishes?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Delay Installer until unstall finishes? NSIS Discussion" />
	
	<title> Delay Installer until unstall finishes? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Delay Installer until unstall finishes?</div>
<hr />
<div class="pda"><a href="t-305587.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=305587">Delay Installer until unstall finishes?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">phungus420</div><div class="date">22nd April 2009, 02:21</div></div><div class="posttext">I have my script set up pretty good, but one minor problem still remains.  If there is a previous version, the automatic uninstaller trips fine, but the user can simply skip the uninstaller, install, then uninstall after the fact, which of course leads to the program simply being uninstalled.  It's minor, I just note this and say to hold off and let the uninstaller finish and then install, but I'd rather have it automatically wait.  Is there anyway to do this?<br />
<br />
This is the current relevant script code:<br />
Function .onInit<br />
<br />
  ReadRegStr $R0 HKLM \<br />
  &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\${MOD_LOC}&quot; \<br />
  &quot;UninstallString&quot;<br />
  StrCmp $R0 &quot;&quot; done<br />
<br />
  MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION \<br />
  &quot;${NAME} is already installed. $\n$\nDo you wish to uninstall?&quot; \<br />
  IDOK uninst<br />
  Abort<br />
<br />
;Run the uninstaller<br />
uninst:<br />
  ClearErrors<br />
  Exec $INSTDIR\Mods\${MOD_LOC}\Uninstall.exe<br />
<br />
done:<br />
<br />
FunctionEnd<br />
<br />
;--------------------------------<br />
;Interface Settings<br />
<br />
  !define MUI_ABORTWARNING<br />
  !define MUI_UNABORTWARNING<br />
  !define MUI_FINISHPAGE_NOAUTOCLOSE<br />
  !define MUI_UNFINISHPAGE_NOAUTOCLOSE<br />
  !define MUI_HEADERIMAGE<br />
<br />
  ShowInstDetails show<br />
  ShowUninstDetails show<br />
<br />
;--------------------------------<br />
;Pages<br />
<br />
Edit:  I found this but I don't understand it clearly.  My knowledge of code is all self taught, so I am not very proficient here:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=302664&amp;highlight=Uninstaller</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">10th May 2009, 14:43</div></div><div class="posttext">Don't give the user the option to skip the uninstaller by running it silently. Simply pass it /S on the command line.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>