<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Authentication in Installer possible?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Authentication in Installer possible? NSIS Discussion" />
	
	<title> Authentication in Installer possible? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Authentication in Installer possible?</div>
<hr />
<div class="pda"><a href="t-250905.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=250905">Authentication in Installer possible?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">11th July 2006, 22:13</div></div><div class="posttext">Hello everyone,<br />
<br />
I'm new with NSIS and I've searched the FAQ's but couldn't find any info regarding this matter:<br />
is it possible to make user authentication in an installer? I want to make authentication based on username/password in a remote HTTP server. Is it possible?<br />
<br />
Thanks everyone</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">11th July 2006, 22:23</div></div><div class="posttext">Sure. Use the PassDialog plugin (http://nsis.sf.net/File:PassDialog.zip) or create a custom NSIS installer page with the InstallOptions plugin.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">12th July 2006, 09:56</div></div><div class="posttext">Thanks for the quick reply<br />
<br />
OK, but how can I add that plugin? I am using EclipseNSIS, and I have just realized that I can make my own custom installer dialogs (INI files, right?).<br />
But how can I add actions to the buttons? (example: Next Button moves to next page, a Validate Button will authenticate the provided username/password in a remote server, etc)<br />
<br />
Thank you once more</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th July 2006, 09:58</div></div><div class="posttext">I wouldn't recommend using a InstallOptions INI files because it means your username and password is stored in the INI file until the installer is closed.<br />
<br />
With PassDialog, just put the dll in the Plugins folder, then read the readme.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">12th July 2006, 10:19</div></div><div class="posttext">Thanks again, Afrow!<br />
<br />
I managed to make it work, but the usernames and passwords are just placed directly in the code (btw, nsis scripts have their own language, right? Do you know some page where I can learn the basics of Nsis scripting?), but how can I make the validation in a remote HTTP server (something like http://foo.com/authenticate?username=xxx&amp;passwd=xxx, which gives me the result of validation: valid or invalid user)<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">12th July 2006, 12:03</div></div><div class="posttext">Hey, in the meanwhile, I am trying this:<br />
I've created a DLL which receives 2 Strings, username and password, and returns a String indicating if the user is valid  or not;<br />
I've red this: http://nsis.sourceforge.net/Calling_an_external_DLL_using_the_System.dll_plugin but i don't understand where the dll must be placed and how exactly to call the function with the right parameters and to receive the result<br />
<br />
Can anybody help?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th July 2006, 12:49</div></div><div class="posttext">Use the InetLoad plugin to send a POST request.<br />
<br />
Your DLL must be extracted first, preferably to $PLUGINSDIR and then you need to register it with RegDLL and then unregister it afterwards with UnRegDLL.<br />
<br />
Why would you want to check the username and password in a DLL anyway? What happens when you need to add more usernames and passwords to existing installers? You'd have to rebuild the DLL.<br />
<br />
If you're only going to have one username and one password, you might as well just validate them with StrCmp (or use LStrCmp on the Wiki for case sensitive comparison).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">12th July 2006, 12:57</div></div><div class="posttext">No, that's not the idea, the usernames and passwords are not in the DLL file.<br />
The DLL has a function which receives 2 strings (username and password) and returns a string indicating that the user is or is not valid.<br />
<br />
All I need to do right now is to call the DLL with the right parameters and to get the answer. How can I do that?<br />
What is the syntax of a DLL call with two string inputs and a return string output?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th July 2006, 13:05</div></div><div class="posttext">There's dozens of System examples in the Examples\System folder.<br />
<br />
Use t for text (strings).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedroac</div><div class="date">12th July 2006, 14:52</div></div><div class="posttext">Hi again<br />
<br />
I've seen the System script you mentioned, but I couldn't find any example in which the function actually returned a value.<br />
<br />
All I need to do is to get the result of<br />
System::Call 'Authenticator::ValidateClass.validate($R0, $R1) $R3'<br />
<br />
So that I can print it, like: <br />
<br />
MessageBox MB_OK &quot;Result: $R3&quot;<br />
<br />
But why doesn't appear anything in $R3? <br />
<br />
What am I doing wrong?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vitoco</div><div class="date">13th July 2006, 20:51</div></div><div class="posttext">Just guessing:<br />
System::Call 'Authenticator::ValidateClass.validate(t R0,  t R1) t.R3'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th July 2006, 23:51</div></div><div class="posttext">I've already told him that it won't work:<br />
http://forums.winamp.com/showthread.php?threadid=250936<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">vitoco</div><div class="date">14th July 2006, 15:10</div></div><div class="posttext">:up: <br />
<br />
My post was about syntax :D<br />
<br />
:rolleyes: I was not aware about the .NET thing...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>