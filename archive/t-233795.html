<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" $R0 vs. $0... should it make a difference?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  $R0 vs. $0... should it make a difference? NSIS Discussion" />
	
	<title> $R0 vs. $0... should it make a difference? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  $R0 vs. $0... should it make a difference?</div>
<hr />
<div class="pda"><a href="t-233795.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=233795">$R0 vs. $0... should it make a difference?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd December 2005, 19:31</div></div><div class="posttext">Hello all.<br />
<br />
I'm using the Processes Plug-in (http://nsis.sourceforge.net/Processes_plug-in) to check to see if a certain process is running or not.<br />
<br />
Try the below code.  If you don't have the Windows Calculator (Start--&gt;Run--&gt;calc) running you will get 0 in the message box.  If you do have it running, you will get a 1.  This is great, however now re-compile the below code and change the two instances of &quot;$R0&quot; below to just &quot;$0&quot;.<br />
<br />
Now you don't any answer in the message box...what gives?  I'm so confused.  Thanks for your help.<br />
<br />
<br />
<br />
Name Test<br />
OutFile Test.exe<br />
Section &quot;&quot;<br />
  Processes::FindProcess Calc<br />
  Pop $R0<br />
  MessageBox MB_OK &quot;Result:  $R0&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2005, 21:51</div></div><div class="posttext">Strange. If you check the variables with dumpstate::debug, you'll find that $R0 contains the value and not $0.<br />
<br />
This works:<br />
<br />
Name Test<br />
OutFile Test.exe<br />
Section &quot;&quot;<br />
  Processes::FindProcess Calc<br />
  Pop $0<br />
  MessageBox MB_OK &quot;Result:  $R0&quot;<br />
SectionEnd<br />
<br />
Could this guy be having the same problem?<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=233453<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd December 2005, 22:06</div></div><div class="posttext">Thanks for checking this out Afrow.  This is very strange.  I found this works too:<br />
<br />
Name Test<br />
OutFile Test.exe<br />
Section &quot;&quot;<br />
  Processes::FindProcess Calc<br />
  MessageBox MB_OK &quot;Result:  $R0&quot;<br />
SectionEnd<br />
<br />
It looks like you don't even need to pop it.  It is like the plug-in sets the $R0 variable before it finishes.<br />
<br />
So if the $R0 is all ready set (to 0 or 1), then by popping it, I would think that it would erase the value, and set it to null.  That would be the case if the stack was empty, but it can't be empty because when we &quot;Pop $R0&quot; and then &quot;MessageBox $R0&quot;, we get a value (0 or 1).<br />
<br />
So then if the stack is not empty, Popping $0 and then MessageBox'in $0 should also work....:confused: <br />
<br />
I'm so confused.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2005, 22:36</div></div><div class="posttext">Perhaps kichik or the plugin author can shed some light on this.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">22nd December 2005, 23:08</div></div><div class="posttext">I emailed the author, good idea Afrow, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd December 2005, 10:07</div></div><div class="posttext">In the plug-in's source code, it always uses $R0 to pass the data, not the stack.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">23rd December 2005, 15:42</div></div><div class="posttext">Originally posted by kichik <br />
In the plug-in's source code, it always uses $R0 to pass the data, not the stack.  <br />
Ahhhhh..... the source code!  Thanks for your help kichik.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th December 2005, 13:51</div></div><div class="posttext">In the wiki, there are still plug-ins that output to either $0 or $R0 generally because of the old syntax with CallInstDLL instruction. Maybe it would be a good idea to change those plug-ins to use the stack syntax to pass values, like most of the other plug-ins.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>