<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Detect Firefox running under vista &amp; W7, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Detect Firefox running under vista &amp; W7 NSIS Discussion" />
	
	<title> Detect Firefox running under vista &amp; W7 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Detect Firefox running under vista &amp; W7</div>
<hr />
<div class="pda"><a href="t-307436.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=307436">Detect Firefox running under vista &amp; W7</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">17th June 2009, 08:40</div></div><div class="posttext">hello,<br />
I try to detect if firefox is running.<br />
I use the plugins fct and findprocdll but they do not work under vista and seven.<br />
And for example in the wiki, you must have the exact title of the firefox window if it does not work.<br />
<br />
Any idea to detect correctly firefox ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">17th June 2009, 09:29</div></div><div class="posttext">I found the solution with nsProcess plugin.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">23rd June 2009, 19:33</div></div><div class="posttext">The processes-plugin will do same.<br />
nsprocess was longer time ago recognized from Eset NOD as malware - so i changed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">24th June 2009, 09:46</div></div><div class="posttext">Look this code<br />
<br />
Name    &quot;Test Firefox&quot;       ; The name of the installation<br />
OutFile &quot;Test Firefox.exe&quot;   <br />
<br />
Function .onInit<br />
    Processes::FindProcess &quot;firefox&quot;<br />
    MessageBox MB_ICONSTOP|MB_OK &quot;$R0&quot;<br />
    StrCmp $R0 1 firefox_is_running firefox_not_running<br />
    firefox_is_running:<br />
      MessageBox MB_YESNO|MB_ICONQUESTION| &quot;Mozilla Firefox et en cours de fonctionnement.$\r$\nVoulez vous l'arrÃªter ?&quot; IDNO quit<br />
      fct::fct /WTP 'Mozilla Firefox' /TIMEOUT 2000<br />
      call .onInit<br />
    firefox_not_running:<br />
      goto ContinueInstall<br />
    quit:<br />
      MessageBox MB_ICONSTOP|MB_OK &quot;Mozilla Firefox est en cours de fonctionnement.$\r$\nVous devez le fermer avant de continuer&quot;<br />
      quit<br />
    ContinueInstall:<br />
FunctionEnd<br />
<br />
Section &quot;dummy&quot;<br />
<br />
SectionEnd<br />
<br />
With the firefox process name the value is always 1 although firefox is not running.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th June 2009, 12:23</div></div><div class="posttext">Processes plug-in works fine under Vista 32-bit for me but I can't say for 64-bit and Windows 7.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">24th June 2009, 16:18</div></div><div class="posttext">This code does not running under xp.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">27th June 2009, 22:51</div></div><div class="posttext">The Script works here - but it needs some modification:<br />
Name    &quot;Test Firefox&quot;       ; The name of the installation<br />
OutFile &quot;Test_Firefox.exe&quot;   <br />
<br />
Function .onInit<br />
    Processes::FindProcess &quot;firefox.exe&quot;<br />
    MessageBox MB_ICONSTOP|MB_OK &quot;$R0&quot;<br />
    StrCmp $R0 1 firefox_is_running firefox_not_running<br />
    firefox_is_running:<br />
      MessageBox MB_YESNO|MB_ICONQUESTION| &quot;Mozilla Firefox et en cours de fonctionnement.$\r$\nVoulez vous l'arrÃªter ?&quot; IDNO quit<br />
      Processes::KillProcess &quot;firefox.exe&quot;<br />
      IntCmp $R0 0 firefox_is_running<br />
      call .onInit<br />
    firefox_not_running:<br />
      goto ContinueInstall<br />
    quit:<br />
      MessageBox MB_ICONSTOP|MB_OK &quot;Mozilla Firefox est en cours de fonctionnement.$\r$\nVous devez le fermer avant de continuer&quot;<br />
      quit<br />
    ContinueInstall:<br />
    Quit<br />
FunctionEnd<br />
<br />
Section &quot;dummy&quot;<br />
<br />
SectionEnd<br />
<br />
1. dont mix process plugins - use ONLY ONE (fct sux)<br />
2. be more specific with names -&gt; &quot;firefox.exe&quot; instead &quot;firefox&quot; - last could kill all windows with the name in it<br />
3. script need admin power - does not work as normal user<br />
(otherwise it returns always &quot;0&quot;)<br />
<br />
Check the README for the processes plugin!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">3rd July 2009, 09:12</div></div><div class="posttext">hi,<br />
Brummelchen, have tested your code and the return value is always 1.<br />
my tests are done under windows xp with an administrator account.<br />
If firefox is running, the process is not killed by Processes::KillProcess &quot;firefox.exe&quot; <br />
according to the wiki (http://nsis.sourceforge.net/Processes_plug-in), we should not put .exe in the name of the process, but even so this does not</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Xarkam</div><div class="date">7th July 2009, 19:31</div></div><div class="posttext">This code use the KillProc plugin<br />
<br />
Function .onInit<br />
  loop:<br />
   StrCpy $0 &quot;firefox.exe&quot; <br />
   KillProc::FindProcesses<br />
   StrCmp $1 &quot;-1&quot; wooops<br />
<br />
   StrCmp $0 &quot;0&quot; completed<br />
<br />
   MessageBox MB_OK &quot;You must close firefox before continue&quot; <br />
   Goto loop<br />
<br />
   wooops:<br />
    MessageBox MB_OK &quot;-&gt; Error: Something went wrong :-(&quot; <br />
    Abort<br />
<br />
   completed:<br />
    MessageBox MB_OK &quot;Firefox is not running, all clear :-)&quot; <br />
FunctionEnd<br />
<br />
<br />
Running under windows seven.<br />
I'm check under Xp and Vista.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>