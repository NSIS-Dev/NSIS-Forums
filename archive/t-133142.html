<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Another question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Another question NSIS Discussion" />
	
	<title> Another question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Another question</div>
<hr />
<div class="pda"><a href="t-133142.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=133142">Another question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">25th April 2003, 23:09</div></div><div class="posttext">I'm going to make up an updates program for our Quake2 D-Day: Normandy mod, and I am wondering if it is possible for my program to download all kinds of files off a webserver.<br />
<br />
This might be just standard .txt files, or maybe in someother puretext format (I'm currently unsure)<br />
<br />
This isn't for the purpose of downloading the updates, but is for getting the list of updates which we can update using php onto their local computer. My program can then use that list.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th April 2003, 09:47</div></div><div class="posttext">Can be downloaded any type of file (with NSISdl plugin). In my program (for example), I download .zip and .ini files to upgrade it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2003, 13:08</div></div><div class="posttext">Good good!<br />
In my experiance, I was thinking NSISdl would not when it would not download from links like this:<br />
<br />
http://myweb.tiscali.co.uk/afrowuk/downloads.php?id=102<br />
<br />
This won't work with NSISdl, sine it hasnn't got any file extension on the end.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th April 2003, 13:53</div></div><div class="posttext">That's not true. NSIS Update uses NSISdl to check for updates, it's also a PHP page. Maybe you did not send the required headers, what is the error message?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2003, 18:36</div></div><div class="posttext">Here's what I have right now:<br />
<br />
<br />
StrCpy $R1 0<br />
updateloop:<br />
IntOp $R1 $R1 + 1<br />
StrCmp $R1 10 0 +2<br />
Quit<br />
<br />
ReadINIStr $R0 &quot;$EXEDIR\settings.txt&quot; &quot;Settings&quot; &quot;MasterServer&quot;<br />
<br />
NSISdl::download $R0 &quot;$TEMP\ddayupdater\main\updates.txt&quot;<br />
Pop $R0<br />
  StrCmp $R0 &quot;success&quot; +3<br />
    MessageBox MB_OK &quot;Error: Not connected to internet,$\nor the updates MasterServer is down.&quot;<br />
    Goto updateloop<br />
<br />
<br />
The address it reads out of the INI file is http://myweb.tiscali.co.uk/afrowuk/ddayupdates/updates.txt<br />
<br />
You click on that link and it will load fine, but if I try and download it like the code shows, it just fails.<br />
<br />
What's wrong?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2003, 18:45</div></div><div class="posttext">Ok, I founf the problem. I have to create the directory before hand and then it will download to that directory.<br />
<br />
It would be nice if NSISdl would work without having to specify a SaveAs path / file, since you may be downloading from one of those php links I described above, you won't know what the file name or extension will be, so therefore you cannot do a SaveAs.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">26th April 2003, 18:50</div></div><div class="posttext">Create the subfolder $TEMP\ddayupdater\main\ before downloading.<br />
<br />
I posted some minutes after Afrow UK found the answer! (beat by the time):)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th April 2003, 17:01</div></div><div class="posttext">Afrow, you can create another PHP script that will output the name of the file and use it as the path to save the file with the second download.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>