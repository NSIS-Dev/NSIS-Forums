<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File Append broken, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File Append broken NSIS Discussion" />
	
	<title> File Append broken [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File Append broken</div>
<hr />
<div class="pda"><a href="t-314121.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=314121">File Append broken</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">24th October 2009, 09:24</div></div><div class="posttext">I'm using the following code while in Silent mode (via /S). It's overwriting the log file instead of appending the data to it.  My buggy code or something buggy with NSIS 2.45?<br />
<br />
<br />
Function WriteErrorCode<br />
    Exch $0   ; message<br />
    Exch<br />
    Exch $1   ; error code<br />
    !define /date DATESTAMP &quot;%Y-%m-%d %H:%M:%S&quot;<br />
    <br />
    SetOutPath $EXEDIR<br />
    FileOpen $9 $EXEDIR\Install_Errors.log a        <br />
    FileWrite $9 &quot;${DATESTAMP} - ErrorCode:$1 - $0$\r$\n&quot;    <br />
    FileClose $9 <br />
    SetErrorLevel $1<br />
    Abort<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">820815</div><div class="date">24th October 2009, 10:54</div></div><div class="posttext">;FileOpen<br />
FileSeek $9 0 END<br />
;FileWrite</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">24th October 2009, 17:48</div></div><div class="posttext">I agree FileSeek should accomplish what I want.  Isn't the point of the FileOpen append option to save the existing content and write the new at its end?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">24th October 2009, 17:55</div></div><div class="posttext">Isn't the point of the FileOpen append option to save the existing content and write the new at its end?The manual says FileOpen's &quot;a&quot; mode means &quot;append, meaning opened for both read and write, contents preserved&quot;. It then says In all open modes, the file pointer is placed at the beginning of the fileSee http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.5.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">BSOD2600</div><div class="date">24th October 2009, 18:02</div></div><div class="posttext">Ah, assumed it would do that for me automatically.  With the FileSeek, all works as expected after all.  Thanks for the clarification and another round of RTFM ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">24th October 2009, 18:53</div></div><div class="posttext">I have lost count of how many times I have re-read the manual!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>