<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" toggle bold on/off, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  toggle bold on/off NSIS Discussion" />
	
	<title> toggle bold on/off [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  toggle bold on/off</div>
<hr />
<div class="pda"><a href="t-270226.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270226">toggle bold on/off</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dev_akm</div><div class="date">26th April 2007, 19:13</div></div><div class="posttext">Does anyone here know how to make a function to toggle SF_BOLD on/off for a SectionGroup without any negative side-effects?<br />
<br />
I've tried numerous variations of the suggested SectionGetFlags, IntOp, SectionSetFlags combinations without success. <br />
<br />
For example, I have two required main files, one of which has no options and one of which has a lot of options. So, it works great if I do simple code like:<br />
<br />
<br />
Function .onSelChange<br />
  ${If} ${SectionIsSelected} ${MainFileNoOptions}<br />
    !insertmacro UnSelectSection ${OptionGroup}<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
This prevents selection of anything in the OptionGroup if MainFileNoOptions is selected. Thus, if MainFileWithOptions is selected, then the test fails and I can pick things from the OptionGroup. <br />
<br />
Great, but I'd also like to indicate whether the OptionGroup  is active or not by making it bold if you can use it, non-bold if you can't use it. So, if I expand the logic to say something like:<br />
<br />
<br />
Function .onSelChange<br />
  ${If} ${SectionIsSelected} ${MainFileNoOptions}<br />
    !insertmacro UnSelectSection ${OptionGroup}<br />
    SectionGetFlags ${OptionGroup} $R0<br />
    IntOp $R0 $R0 - ${SF_BOLD}<br />
    SectionSetFlags ${OptionGroup} $R0<br />
  ${ElseIf} ${SectionIsSelected} ${MainFileWithOptions}<br />
    SectionGetFlags ${OptionGroup} $R0<br />
    IntOp $R0 $R0 + ${SF_BOLD}<br />
    SectionSetFlags ${OptionGroup} $R0<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
Then it adds/removes SF_BOLD correctly when I toggle between MainFileNoOptions and MainFileWithOptions, but now OptionGroup stops working correctly (clicking any of the sections inside it merely toggles the bold on/off and nothing can be selected because the SectionSetFlags command is blocking my change attempts).<br />
<br />
Any suggestions would be greatly appreciated. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dev_akm</div><div class="date">26th April 2007, 19:38</div></div><div class="posttext">FYI, I also tried this:<br />
<br />
<br />
Function .onSelChange<br />
  ${If} ${SectionIsSelected} ${MainFileNoOptions}<br />
    !insertmacro UnSelectSection ${OptionGroup}<br />
    !insertmacro ClearSectionFlag ${OptionGroup} ${SF_BOLD}<br />
  ${ElseIf} ${SectionIsSelected} ${MainFileWithOptions}<br />
    !insertmacro SetSectionFlag ${OptionGroup} ${SF_BOLD}<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
And it works a bit better, but still prevents me from selecting anything in the OptionGroup.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th April 2007, 21:09</div></div><div class="posttext">Don't use plus and minus. Use bitwise or and bitwise and. You have the SetSectionFlag and ClearSectionFlag macros to handle that for you.<br />
<br />
Since setting the flags of a section group also sets the flags of its children and there's no way to prevent that, you'd have to remember the flags of those sections manually.Function .onSelChange<br />
  SectionGetFlags ${a} $0<br />
  SectionGetFlags ${b} $1<br />
  ${If} ${SectionIsSelected} ${MainFileNoOptions}<br />
    !insertmacro UnSelectSection ${OptionGroup}<br />
    !insertmacro ClearSectionFlag ${OptionGroup} ${SF_BOLD}<br />
  ${ElseIf} ${SectionIsSelected} ${MainFileWithOptions}<br />
    !insertmacro SetSectionFlag ${OptionGroup} ${SF_BOLD}<br />
  ${EndIf}<br />
  SectionSetFlags ${a} $0<br />
  SectionSetFlags ${b} $1<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dev_akm</div><div class="date">26th April 2007, 21:54</div></div><div class="posttext">Thanks for the reply. <br />
<br />
Sounds like it's more trouble than it's worth, especially since the SectionGroup loses any ability to track the state of the children once you force it to SF_BOLD.<br />
<br />
It's really too bad NSIS doesn't use something more like an XHTML DOM<br />
<br />
Although I suppose there's probably good reasons for the way the section and sectiongroup properties are handled, it's very cumbersome and frustrating to work with when you're trying to do anything out of the norm.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>