<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Get File path and use as variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Get File path and use as variable NSIS Discussion" />
	
	<title> Get File path and use as variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Get File path and use as variable</div>
<hr />
<div class="pda"><a href="t-301697.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=301697">Get File path and use as variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">eliteeservices</div><div class="date">4th January 2009, 22:04</div></div><div class="posttext">How is this possible:<br />
<br />
find an installation of a program by searching for the filename (program could be installed in any folder:<br />
<br />
$programfiles\abc1<br />
$programfiles\abc2<br />
<br />
Wherever it is installed, the file will exist.  Then, set the path to where it is found, i.e. if it's in abc1 then copy entire directory structure from abc3 to abc1.  <br />
<br />
Is this possible / how is it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">4th January 2009, 22:13</div></div><div class="posttext">Try one of this:<br />
http://nsis.sourceforge.net/Search_for_a_File_or_Directory_(Alternative)<br />
http://nsis.sourceforge.net/Search_For_a_File<br />
http://nsis.sourceforge.net/Locate_plugin<br />
<br />
Just don't expect Windows keep track of every file you copy or install, without registering its path.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">4th January 2009, 23:52</div></div><div class="posttext">You don't need to use any recursion for this. Just a simple loop will do:<br />
<br />
StrCpy $INSTDIR ``<br />
ClearErrors<br />
FindFirst $R0 $R1 $PROGRAMFILES\*.*<br />
${DoUnless} ${Errors}<br />
  ${If} $R1 != .<br />
  ${AndIf} $R1 != ..<br />
  ${AndIf} ${FileExists} $PROGRAMFILES\$R1\*.* # is it a folder?<br />
  ${AndIf} ${FileExists} $PROGRAMFILES\$R1\some_file.exe<br />
    StrCpy $INSTDIR $PROGRAMFILES\$R1<br />
    ${Break} # found install dir; break out of loop<br />
  ${EndIf}<br />
  ClearErrors<br />
  FindNext $R0 $R1<br />
${Loop}<br />
FindClose $R0<br />
<br />
${If} $INSTDIR == ``<br />
  MessageBox MB_OK|MB_ICONINFORMATION `App not found blah!`<br />
  Abort<br />
${EndIf}<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>