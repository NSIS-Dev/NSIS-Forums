<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Jumping to a conditional page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Jumping to a conditional page NSIS Discussion" />
	
	<title> Jumping to a conditional page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Jumping to a conditional page</div>
<hr />
<div class="pda"><a href="t-316154.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=316154">Jumping to a conditional page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th January 2010, 11:24</div></div><div class="posttext">From my first page's SHOW function I jump six pages forward, into a custom nsDialogs page. This custom page is a conditional one. Like this:Function MyCustomPage<br />
  ${If} $MyVar == &quot;ShowThePage&quot;<br />
    nsDialogs::Create 1018<br />
    Pop $2<br />
    nsDialogs::Show<br />
  ${EndIf}<br />
FunctionEnd<br />
In the case that the page is NOT shown, the installer crashes. How can I jump into this conditional page properly?<br />
<br />
<br />
<br />
(Note: Adding an ${Else} statement with a 'skip to next page' command is not a solution, because in that case you can't go Back from the following page.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">11th January 2010, 11:37</div></div><div class="posttext">Maybe this helps?<br />
http://nsis.sourceforge.net/Go_to_a_NSIS_page<br />
<br />
I'm not sure if this will help you with the Back button.<br />
Maybe you have to make your own Back button code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th January 2010, 11:40</div></div><div class="posttext">Like I said I'm jumping six pages ahead, so obviously I'm already using that code... :rolleyes:  The problem lies in jumping forward into a conditional page.<br />
<br />
<br />
(Edit: Since the page after all this is another nsDialogs page, I can use nsDialogs::OnBack to solve my problem. But IIRC there's no OnBack callback for default pages, is there?)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">11th January 2010, 20:19</div></div><div class="posttext">I think I've got it working... My solution: Using the ${Else} GotoNextPage clause, but only if the previously visited page was before MyCustomPage.<br />
<br />
!define PAGE_NUMBER_MyCustomPage 7<br />
Function MyCustomPage<br />
  ${If} $MyVar == &quot;ShowThePage&quot;<br />
    nsDialogs::Create 1018<br />
    Pop $2<br />
    StrCpy $PREVIOUSPAGE ${PAGE_NUMBER_MyCustomPage}<br />
    nsDialogs::Show<br />
  ${ElseIf} $PREVIOUSPAGE &lt; ${PAGE_NUMBER_MyCustomPage}<br />
      StrCpy $PREVIOUSPAGE ${PAGE_NUMBER_MyCustomPage}<br />
      SendMessage $HWNDPARENT &quot;0x408&quot; &quot;1&quot; &quot;&quot;<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
And then of course updating $PREVIOUSPAGE in every page, just before I leave it.<br />
<br />
<br />
After the installer jumps forward six pages, the ${ElseIf} statement will force it to go forward one more. (Of course the next page should always be shown. If it's another conditional page, I guess you'd need to make it jump forward yet again in the ${Else} case.) This way, the installer will always reach a real page that it can actually draw, preventing it from crashing.<br />
<br />
Naturally if the user clicks the Back button the ${ElseIf} statement will not be true, and there will again not be any page to draw. But this is no problem because the installer will then just go back yet another page. The crash only occurs when manually jumping pages using SendMessage.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>