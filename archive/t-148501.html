<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" need IO with no buttons, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  need IO with no buttons NSIS Discussion" />
	
	<title> need IO with no buttons [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  need IO with no buttons</div>
<hr />
<div class="pda"><a href="t-148501.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148501">need IO with no buttons</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 03:36</div></div><div class="posttext">i have a little problem.<br />
<br />
i have an IO with infos but i dont need any button 'cause behind this IO there is action and when action is done IO is closed.<br />
Unfortunatly IO has those buttons and one has to be pressed to continue action.<br />
<br />
is it possible to have an IO without any button?<br />
<br />
thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 11:04</div></div><div class="posttext">IO allows you to disable the back and cancel button using CancelEnabled and BackEnabled. In the latest CVS version you can also disable and enable windows using EnableWindow from the script. Use this to disable the next button too:<br />
<br />
GetDlgItem $0 $HWNDPARENT 1<br />
EnableWindow $0 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 12:53</div></div><div class="posttext">&gt;&gt;  using CancelEnabled and BackEnabled. <br />
<br />
This is what i already have - all buttons are disabled (0) in IO - i only get &quot;Fertigstellen&quot; (german) (and &quot;Beenden&quot; greyed out)<br />
<br />
hmm, where must i put that code?<br />
Like this it disables the buttons from the next pane not the concerning IO<br />
<br />
;Modern UI Configuration<br />
page custom dosilent<br />
<br />
<br />
Function dosilent<br />
  ;if silent do backup and save all options<br />
  Call IsSilent<br />
  IfSilent notSilent 0<br />
  ;silent stuff<br />
  call checkbackupfolder<br />
<br />
  ;disable all buttons<br />
  GetDlgItem $5 $HWNDPARENT 1<br />
  EnableWindow $5 0<br />
<br />
  dosilent01:<br />
    !insertmacro MUI_HEADER_TEXT &quot;Taskplaner&quot; &quot;These files are saved now.$\nPlease wait a moment&quot;<br />
<br />
  dosilent04:<br />
  Push $INSTDIR<br />
    Call ConvertBStoDBS2<br />
  Pop ${TEMP1}<br />
<br />
<br />
  dosilent05:<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;$R3silent01.ini&quot; &quot;Field 6&quot; &quot;Text&quot; ${TEMP1}<br />
    !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;$R3silent01.ini&quot;<br />
  dosilent06:<br />
<br />
    sleep 5000 ;just testing<br />
    Quit<br />
  notSilent:<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 12:59</div></div><div class="posttext">Replace MUI_INSTALLOPTIONS_DISPLAY with MUI_INSTALLOPTIONS_INITDIALOG and MUI_INSTALLOPTIONS_SHOW and put the code between them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 13:12</div></div><div class="posttext">yeah works so far<br />
i had no success with _SHOW last night - i found it in the changelog and unfortunately i could not work with it. it was very late for me.<br />
<br />
<br />
  dosilent05:<br />
    !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;$R3silent01.ini&quot; &quot;Field 6&quot; &quot;Text&quot; ${TEMP1}<br />
    !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;$R3silent01.ini&quot;<br />
      ;disable all buttons<br />
      GetDlgItem $5 $HWNDPARENT 1<br />
      EnableWindow $5 0<br />
    !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
  dosilent06:<br />
<br />
    sleep 5000<br />
    Quit<br />
<br />
<br />
But now i have another problem - IO is waiting for input again.<br />
i had to kick my prog with the taskmanager.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 13:14</div></div><div class="posttext">What do you mean waiting for input? Isn't that program of yours supposed to close IO?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 13:23</div></div><div class="posttext">i mean - input=button<br />
<br />
i want this behaviour:<br />
if &quot;silent&quot;<br />
- show IO with infos (no user input)<br />
- while showing IO do savings in background<br />
- when done close IO and show messagebox success<br />
<br />
(strip .nsi from attachment)<br />
<br />
is that possible overall?<br />
<br />
PS $R3 in script above contains language shorty - for attachment it is &quot;e&quot; - if you intend to test it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 13:36</div></div><div class="posttext">Works fine for me... IO has no buttons enabled whatsoever. All you need to do is get your program to make IO destroy itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 14:15</div></div><div class="posttext">Does not work here... :(<br />
<br />
you see that sleep command (for test) at the end (before quit) ?<br />
<br />
That command is never reached. thats my trouble</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 14:19</div></div><div class="posttext">So your program doesn't close IO? I thought your problem is just disabling the buttons... What you're trying to do is impossible (without changes to the source of course). IO is not multi-threaded and the script can't continue while IO is still running. For that there is the broken banner. It should work outside of .onInit though...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 14:41</div></div><div class="posttext">damn - so i have to use banners.<br />
<br />
BTW how can i close the IO?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 14:44</div></div><div class="posttext">All you need to do is send the main NSIS window WM_COMMAND with 1 as wParam.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 15:20</div></div><div class="posttext">SendMessage HWND &quot;&quot; WM_COMMAND 1<br />
<br />
?<br />
<br />
when &amp; where?<br />
<br />
:confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 15:32</div></div><div class="posttext">In another application that will do the action. You can create a sub installer that will do all the action and send a message to the main window. To get the $HWNDPARENT into the sub installer you can pass it on the command line.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 16:08</div></div><div class="posttext">hmm, nice idea<br />
<br />
you this one?<br />
<br />
Exec '&quot;prog.exe&quot; $HWNDPARENT' <br />
<br />
And prog.exe gets $CMDLINE and close it afterwards?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 16:22</div></div><div class="posttext">Yep, but don't close it, send the WM_COMMAND message.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 16:31</div></div><div class="posttext">thats what i mean ;)<br />
<br />
SendMessage HWND &quot;&quot; WM_COMMAND #<br />
<br />
(where # is from cmdline)<br />
or - hmm, dont know now - confused...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th September 2003, 16:36</div></div><div class="posttext">SendMessage $HwndFromCMDLINE ${WM_COMMAND} 1 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th September 2003, 16:50</div></div><div class="posttext">i though it was wrong what i wrote :D<br />
<br />
thank you kichik :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>