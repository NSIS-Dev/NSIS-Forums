<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" GetAdaptersInfo problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  GetAdaptersInfo problem NSIS Discussion" />
	
	<title> GetAdaptersInfo problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  GetAdaptersInfo problem</div>
<hr />
<div class="pda"><a href="t-201303.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=201303">GetAdaptersInfo problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">aadya</div><div class="date">6th December 2004, 12:17</div></div><div class="posttext">Hi Guys,<br />
I have an issue arising out of the solution in the following link:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=181908&amp;highlight=mathscript<br />
<br />
If i use the math::script lines, the installer crashes.<br />
If i do not use, i fear i am getting an incorrect decimal representation of the address.<br />
For e.g. if the output by ipconfig /all is AB-CD. Its decimal representation is 43981. Lets assume the output from the code above gives a decimal value 'X', the reciprocal HEX of 'X' comes out to be CDAB (CD-AB).<br />
<br />
In Plain words, the hexadecimal value of the mac address upon usage of the code above, is the reverse output of ipconfig/all.<br />
<br />
Could any one shed any light on this please?<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">6th December 2004, 17:32</div></div><div class="posttext">Have you tried the exact example? If not, can you attach a test script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aadya</div><div class="date">7th December 2004, 08:36</div></div><div class="posttext">Hi Kichik,<br />
The script:<br />
<br />
<br />
!define maxsize 4096<br />
<br />
    System::Alloc ${maxsize}<br />
    pop $3<br />
    System::Call 'iphlpapi::GetAdaptersInfo(i r3r4, *l ${maxsize} r2)i.r1'<br />
    strcmp $1 0 0 finish ;in case of errors<br />
<br />
cont:<br />
    strcmp $4 0 finish ; no more adapters<br />
    System::Call '*$4(i.r4,i,&amp;t260.r5, &amp;t132.r6, i.r7, l.r8)'<br />
<br />
    ;Math::Script &quot;hex={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};&quot;<br />
    ;Math::Script &quot;s=''; a=r8; b=r7; #{b--&gt;0,s=s+hex[a/16%16]+hex[a%16]+#[b&gt;0,'-','']; a=a/256;}; r9=s;&quot;<br />
<br />
MessageBox mb_ok &quot;Adapter name is $5 desc $6 addr len $7 macaddr $8&quot;<br />
    goto cont<br />
<br />
finish:<br />
    System::Free $3<br />
<br />
     ; last plugin call must not have /NOUNLOAD so NSIS will be able to delete the temporary DLL<br />
     SetPluginUnload manual<br />
     ; do nothing<br />
    System::Free 0<br />
    Math::Script &quot;&quot;<br />
<br />
Its exactly the same as in the example. My guess is that problem lies in the second &quot;Math::script&quot; line. Its too cryptic to know whats going on...<br />
<br />
Appreciate your help again!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aadya</div><div class="date">7th December 2004, 08:58</div></div><div class="posttext">Hi Kichik,<br />
<br />
Interesting...works now!<br />
I was missing the following line...<br />
&quot;SetPluginUnload  alwaysoff&quot;<br />
and hence the crash.<br />
<br />
thanks for your attention.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">22nd January 2005, 04:48</div></div><div class="posttext">how can the above script be adapted to work in 98 ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd January 2005, 11:35</div></div><div class="posttext">GetAdaptersInfo is available on Windows 98. It should work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">22nd January 2005, 20:05</div></div><div class="posttext">no.... :( checked it again<br />
does work in 2000 though....<br />
anyone know what it could be ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">23rd January 2005, 00:12</div></div><div class="posttext">Both scripts (the one here and the one in the other thread) work on my Win98SE system. The name string ($5) is empty but the other information is OK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">grahama</div><div class="date">23rd January 2005, 07:16</div></div><div class="posttext">ok<br />
must be an improper install on the Win 98 computer I am using for testing...<br />
no big surprise as the computer is a wreck ;)<br />
thanks for checking for me :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">23rd January 2005, 08:48</div></div><div class="posttext">May require adapter to be installed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">theboth</div><div class="date">9th February 2005, 23:05</div></div><div class="posttext">Please! =)<br />
<br />
I would like to know if anyone out there has taken this solution just a little farther and use something like the wsock32::inet_ntoa to convert the adapters address into human readable format?<br />
<br />
please any help and examples would be much apreciated.<br />
<br />
thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>