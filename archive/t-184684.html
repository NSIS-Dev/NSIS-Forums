<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Pages limited to conditions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Pages limited to conditions NSIS Discussion" />
	
	<title> Pages limited to conditions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Pages limited to conditions</div>
<hr />
<div class="pda"><a href="t-184684.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=184684">Pages limited to conditions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">SupSuper</div><div class="date">27th June 2004, 00:19</div></div><div class="posttext">How do I make pages that only show up if certain conditions are met?<br />
I want to make a page which allows you to select between 3 different pages (only one of them can be selected). Also, none of this page pops up if a registry entry exists.<br />
A page structure like in the attached image.<br />
Also, how do I make sections selectable through a InstallOptions page (using checkboxes) instead of the Components page?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">28th June 2004, 08:46</div></div><div class="posttext">Hi SupSuper :)<br />
<br />
1) About the conditionnal pages, you just have to use the callback functions to skip the page or not, using the instruction &quot;abort&quot;. <br />
<br />
From the doc: <br />
<br />
4.5.3 Callbacks<br />
<br />
Each built-in page has three callback functions. The pre-function, the show-creation function and the leave-function. The pre-function is called right before the page is created, the show-function is called right after it is created and before it is shown and the leave-function is called right after the user has pressed the next button and before the page is left.<br />
<br />
    * The pre-function allows you to skip the page using Abort.<br />
    * The show-function allows you to tweak the page's user interface with CreateFont, SetCtlColors, SendMessage and others.<br />
    * The leave-function allows you to force the user to stay on the current page using Abort.<br />
<br />
A custom page only has two callback functions, one that creates it which is mandatory, and one leave-function that acts just like the leave-function for built-in pages.<br />
<br />
Your can find an example from the doc here:<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.5.3<br />
<br />
<br />
2) About the &quot;sections selectable&quot;, could you be more precise? Why don't you want to use the built-in component page?<br />
<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SupSuper</div><div class="date">28th June 2004, 11:01</div></div><div class="posttext">1) much thanks :)<br />
<br />
2) i still use the components page, but i want some components (sections) only selectable through one of the custom pages (thus i made them hidden so they don't show up in the components page). so how can i enable/disable them without using that page? is there some function to do it?<br />
this is the custom page i'm going to use to select them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">28th June 2004, 13:58</div></div><div class="posttext">Hum, I looked at your page, looked again on your installer structure, and well I'm not sure to really get the logic of it... :weird: <br />
<br />
You have some sections in the component page that are just selectable there, and you have some sections that are hidden in the component page but that are selectable later on in your custom pages... <br />
<br />
Am I right ?<br />
<br />
<br />
Well, in that case you could use that code:<br />
<br />
- to select a section<br />
Push $R0<br />
SectionGetFlags section_index $R0<br />
IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
SectionSetFlags section_index $R0<br />
Pop $R0<br />
<br />
- to deselect a section<br />
Push $R0      <br />
SectionGetFlags section_index $R0<br />
IntOp $R0 $R0 &amp; ${SECTION_OFF}<br />
SectionSetFlags section_index $R0    <br />
Pop $R0<br />
<br />
I hope that is what you asked for :D<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SupSuper</div><div class="date">28th June 2004, 14:49</div></div><div class="posttext">Originally posted by evilO <br />
Hum, I looked at your page, looked again on your installer structure, and well I'm not sure to really get the logic of it... :weird:it's pretty simple, actually. the page the components are selectable on is only displayed if the program's not installed. if the program's already installed (thus upgrading it) it doesn't make sense for the user to need to install those components. if they were all in the Components page they'd always be displayed. besides, it's more organized this way ;)<br />
<br />
Originally posted by evilO <br />
You have some sections in the component page that are just selectable there, and you have some sections that are hidden in the component page but that are selectable later on in your custom pages... <br />
<br />
Am I right ?yep<br />
Originally posted by evilO <br />
Well, in that case you could use that code:<br />
<br />
- to select a section<br />
Push $R0<br />
SectionGetFlags section_index $R0<br />
IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
SectionSetFlags section_index $R0<br />
Pop $R0<br />
<br />
- to deselect a section<br />
Push $R0      <br />
SectionGetFlags section_index $R0<br />
IntOp $R0 $R0 &amp; ${SECTION_OFF}<br />
SectionSetFlags section_index $R0    <br />
Pop $R0<br />
<br />
I hope that is what you asked for :D<br />
<br />
evilO/Olive ummm... it doesn't work. this is what i get:<br />
2 warnings:<br />
  unknown variable/constant &quot;{SF_SELECTED}&quot; detected, ignoring (stdin:317)<br />
  unknown variable/constant &quot;{SECTION_OFF}&quot; detected, ignoring (stdin:326)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">28th June 2004, 15:34</div></div><div class="posttext">it's pretty simple, actually.<br />
...<br />
besides, it's more organized this way<br />
<br />
Yes, once you've got the full explanation it's a lot easier ;) <br />
<br />
ummm... it doesn't work. this is what i get:<br />
2 warnings:<br />
unknown variable/constant &quot;{SF_SELECTED}&quot; detected, ignoring (stdin:317)<br />
unknown variable/constant &quot;{SECTION_OFF}&quot; detected, ignoring (stdin:326)<br />
<br />
Oooops, I forgot to tell you to add this:<br />
<br />
!include Section.nsh<br />
<br />
Sorry about that... It should work now :)<br />
<br />
<br />
evilO/Olive</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SupSuper</div><div class="date">28th June 2004, 16:02</div></div><div class="posttext">Originally posted by evilO <br />
Oooops, I forgot to tell you to add this:<br />
<br />
!include Section.nsh<br />
<br />
Sorry about that... It should work now :)<br />
<br />
<br />
evilO/Olive actually it's Sections.nsh ;)<br />
<br />
anyways thanks it works now :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">evilO</div><div class="date">28th June 2004, 16:14</div></div><div class="posttext">Oooooops again :o <br />
<br />
Well, sorry for the typo, for once I didn't copy/paste :p<br />
<br />
Anyway I'm glad it worked :)<br />
<br />
evilO/Olive</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>