<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with spaces in nsExec, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with spaces in nsExec NSIS Discussion" />
	
	<title> Problem with spaces in nsExec [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with spaces in nsExec</div>
<hr />
<div class="pda"><a href="t-213594.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213594">Problem with spaces in nsExec</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cdsr</div><div class="date">19th April 2005, 17:23</div></div><div class="posttext">Hi, I've read through all the posts/archives/examples/etc. but I can't seem to get my script working.  I'm trying to do the following:  the user presses a &quot;Create Database&quot; button and the installer runs mysql.exe, gives it a .sql file and builds the database.<br />
<br />
My problem is that the default selection for the MySQL 4.3.10 installer are to a) not add the mysql.exe location to PATH and b) install MySQL to c:\program files\mysql\mysql server 4.1\<br />
<br />
I can get this to work if the PATH is set, or if it's installed to somewhere without a space in the path (like c:\mysql) but if the above two conditions are both true then my script fails.  Here is the relevant code:<br />
<br />
nsExec::ExecToStack 'cmd /C &quot;$mysql_path\mysql.exe&quot; -uroot &lt; &quot;$PLUGINSDIR\create_lms_db.sql&quot;'<br />
<br />
where:<br />
$mysql_path = C:\Program Files\MySQL\MySQL Server 4.1\bin<br />
<br />
This returns:<br />
'C:\Program' is not recognized as an internal command, operable program or batch file.<br />
<br />
Other variations I've tried are:<br />
ExecWait '&quot;$mysql_path\mysql.exe&quot; -uroot &lt; &quot;$PLUGINSDIR\create_lms_db.sql&quot;'<br />
<br />
nsExec::ExecToStack '&quot;$mysql_path\mysql.exe&quot; -uroot &lt; &quot;$PLUGINSDIR\create_lms_db.sql&quot;'<br />
<br />
For the above two, and basically all other variations, it seems like mysql.exe is getting called but it doesn't understand its input.  The output of the mysql.exe command is what you get when you run &quot;mysql.exe -?&quot; (not any sort of file not found error -- like when running &quot;mysql &lt; asdf.asdf&quot; -- or unknown option -- like when running &quot;mysql -asdf&quot;).<br />
<br />
Here's what I get:<br />
<br />
C:\Program Files\mysql\MySQL Server 4.1\bin\mysql.exe  Ver 14.7 Distrib 4.1.9, for Win95/Win98 (i32)<br />
Copyright (C) 2002 MySQL AB<br />
This software comes with ABSOLUTELY NO WARRANTY. This is free software, and you are welcome to modify and redistribute it under the GPL license<br />
Usage: C:\Program Files\mysql\MySQL Server 4.1\bin\mysql.exe [OPTIONS] [database]<br />
  -?, --help          Display this help and exit.<br />
  -I, --help          Synonym for -?<br />
  --auto-rehash       Enable automatic rehashing. One doesn't need to use 'rehash' to get table and field completion, but startup and reconnecting may take a longer time. Disable with --disable-auto-rehash.<br />
  -A, --no-auto-rehash<br />
                      No automatic rehashing. One has to use 'rehash' to get table and field completion. This gives a quicker start of mysql and disables r<br />
<br />
Can anybody see what I'm doing wrong?<br />
<br />
Thanks,<br />
Chad Russell</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">19th April 2005, 18:16</div></div><div class="posttext">Both nsExec and ExecDos can only create hidden process with redirected IO (pipes). Real console window also includes shell tricks ( &lt; &gt; ) and terminal emulation. This is why - mysql.exe not gets stdin from nsExec. Vbgunz also found problem with mysqladmin.exe - it looks like this program requires terminal emulation. But ExecWait with black console window should work I guess...<br />
Another variant (with hidden window). If sql file size is less then 1k (or 8k for special NSIS build) you can read it to memory and use in the ExecDos as stdin. This explains how to read file to memory http://nsis.sourceforge.net/archive/nsisweb.php?page=821&amp;instances=0,11,814<br />
ExecDos http://nsis.sourceforge.net/archive/nsisweb.php?page=704&amp;instances=0,32</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>