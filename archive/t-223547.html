<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" scons build problem on RH, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  scons build problem on RH NSIS Discussion" />
	
	<title> scons build problem on RH [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  scons build problem on RH</div>
<hr />
<div class="pda"><a href="t-223547.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=223547">scons build problem on RH</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">8th August 2005, 14:30</div></div><div class="posttext">Hi there,<br />
<br />
I'm having a minor problem building NSIS on a RH 7.3 system.<br />
<br />
I'm running Python 1.5.2<br />
I'm running of scons v0.96.90.D001 (also tried an older version)<br />
I've tried with nsis 7.0 and 8.0<br />
<br />
I'm getting the following error when trying to install under all combinations: <br />
<br />
scons: Reading SConscript files ...<br />
  File &quot;SConstruct&quot;, line 183<br />
<br />
    defenv['INSTVER'] += ' /DVER_MAJOR=$VER_MAJOR'<br />
<br />
                       ^<br />
<br />
SyntaxError: invalid syntax<br />
<br />
I've also tried with <br />
<br />
scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all<br />
<br />
As per the installation guide - that does not change anything. <br />
<br />
Any ideas?<br />
<br />
Another question: the installation guide says the above will only build makensis - and that I can drop it (when i manage to build it) into a downloaded precompiled package such as the nightly build.<br />
<br />
Where do I find the nightly build?<br />
<br />
Thanks<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">8th August 2005, 15:27</div></div><div class="posttext">Hmmm.... NSIS 7.0 and 8.0, you are far ahead of all of us ...<br />
(Could not resist)<br />
But seriously,<br />
<br />
Did you try a Scons -c to clean an old scons? My guess is you used scons &quot;old&quot; upgraded to newer Scons but did not clean.<br />
<br />
Success</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">8th August 2005, 16:06</div></div><div class="posttext">Originally posted by onad <br />
Hmmm.... NSIS 7.0 and 8.0, you are far ahead of all of us ...<br />
(Could not resist)<br />
 <br />
<br />
Rofl :) My bad. Make that 2.x instead ;)<br />
<br />
Originally posted by onad <br />
Did you try a Scons -c to clean an old scons? My guess is you used scons &quot;old&quot; upgraded to newer Scons but did not clean.<br />
<br />
Success [/B] <br />
<br />
Afraid that does not help. Still getting same error. :(<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pabs</div><div class="date">8th August 2005, 19:10</div></div><div class="posttext">As to the syntax error, try running scons like this: scons VERSION=2.08<br />
<br />
Nightly builds are here:<br />
<br />
http://nsis.sourceforge.net/nightly/nsis.zip<br />
http://nsis.sourceforge.net/nightly/build.log<br />
<br />
They are not being generated atm, because kichik's P100 was having problems with the disk-intensive build process. kichik, was there any docs on how your nightly builds were setup?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">9th August 2005, 12:31</div></div><div class="posttext">Originally posted by pabs <br />
As to the syntax error, try running scons like this: scons VERSION=2.08<br />
 <br />
<br />
Afraid that does not help either. Still getting same error. <br />
<br />
Does this indicate an error that has something to do with scons or python? Would it help updating to a newer version of python perhaps?<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">9th August 2005, 16:06</div></div><div class="posttext">I use Python v2.4.1 on Suse v9.3 and FreeBSD v4.11. No time to test compiling there though. On Win32 it works out with v2.4.1. A python update would never hurt either, just try it if you can.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">9th August 2005, 16:36</div></div><div class="posttext">Originally posted by onad <br />
I use Python v2.4.1 on Suse v9.3 and FreeBSD v4.11. No time to test compiling there though. On Win32 it works out with v2.4.1. A python update would never hurt either, just try it if you can.  <br />
<br />
I have previously tried getting older versions running on freebsd (before nsis started using scons) without any luck. I guess getting nsis running is out of my league. <br />
<br />
I am starting to get a bit frustrated and is even considering purchasing a windows server to avoid having to mess with this more.<br />
<br />
Would it be against the rules of this forum to ask if anyone know of any commercial services and/or people that would be willing to take care of installing nsis for money?<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">9th August 2005, 17:25</div></div><div class="posttext">These comming days I WILL compile on FreeBSD, Linux was no problem, could even compile on OSX with the old Makefile anyhow :-). As soon as I have FreeBSD results I'll post it.<br />
<br />
I understand your fustration, but you need only to succeed once to have a stable FreeBSD build process, and that is exactly what I'm also aming at.<br />
<br />
Experiment and hold on, so far I succeded quite well, you can to if we help eachother.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">9th August 2005, 18:10</div></div><div class="posttext">The old Python version might have a problem with the line splitting of the line above. Try merging the two lines above the line where the syntax error occurs and remove the backslash.<br />
<br />
BTW, you can always use WINE to run the Windows version.kichik, was there any docs on how your nightly builds were setup?It just builds it using WINE and uploads to SourceForge.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">11th August 2005, 19:32</div></div><div class="posttext">I tried merging the line and that did not produce any results.<br />
<br />
Then installed Python 2.4.1 (#1, Aug 11 2005, 19:16:33) -- scons still uses same results. I got the feeling that scons might use the old version of python though, but I am unable to find any information regarding how to force it to use 2.4 instead. Any ideas?<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th August 2005, 21:29</div></div><div class="posttext">I've just installed Python 1.5.2 and found the problem. In your original post it's not that clear because you forgot to use [ code ]. The spaces before the error pointer weren't displayed. The error pointer points to the '+=' operator which is not supported in Python 1.5.2. I've fixed that and found more compatibility problems. Lots of them. There were so many and they were getting increasingly annoying. I think it was a weird NameError that got me to stop trying. I've decided I don't want to support Python 1.5.2. Python 1.6 seems to have all that the script needs, so I've added a check for it.<br />
<br />
To get around your problem of SCons running on 1.5.2, find the SCons executable, which should be a shell script, and edit it. It should contain some reference to the Python executable. On Windows, it looks for Python on the PATH. Giving it a fully qualified path forces it to use the right version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">12th August 2005, 01:04</div></div><div class="posttext">Originally posted by kichik <br />
I've just installed Python 1.5.2 and found the problem.  (...) I've fixed that and found more compatibility problems. Lots of them. There were so many and they were getting increasingly annoying. (...) I've decided I don't want to support Python 1.5.2. Python 1.6 seems to have all that the script needs, so I've added a check for it.<br />
 <br />
<br />
I'm sorry I ruined your evening ;)<br />
<br />
Originally posted by kichik <br />
To get around your problem of SCons running on 1.5.2, find the SCons executable, which should be a shell script, and edit it. <br />
 <br />
<br />
Yes. First line of the file. Surely did the trick - managed to get it building. I got a few new errors popping up...<br />
<br />
<br />
Install file: &quot;build/release/Docs/html/Chapter5.html&quot; as &quot;.instdist/Docs/Chapter5.html&quot;<br />
Install file: &quot;build/release/Docs/html/Contents.html&quot; as &quot;.instdist/Docs/Contents.html&quot;<br />
Install file: &quot;build/release/Docs/html/IndexPage.html&quot; as &quot;.instdist/Docs/IndexPage.html&quot;<br />
Install file: &quot;Include/StrFunc.txt&quot; as &quot;.instdist/Docs/StrFunc/StrFunc.txt&quot;<br />
Install file: &quot;Docs/src/style.css&quot; as &quot;.instdist/Docs/style.css&quot;<br />
scons: done building targets.<br />
<br />
scons: *** Dependency cycle: Examples/FileFunc.ini -&gt; Examples/FileFunc.ini -&gt; .instdist/Examples/FileFunc.ini -&gt; .instdist/Examples -&gt; .instdist -&gt; . -&gt; install<br />
File &quot;/usr/lib/scons/SCons/Taskmaster.py&quot;, line 332, in _find_next_ready_node<br />
<br />
<br />
I'll have a look at those in the morning and see if I can figure out whats wrong there :)<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">12th August 2005, 01:17</div></div><div class="posttext">Actually it would be more correct if I write this error as this is the one occuring when trying to build using:<br />
<br />
scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all install<br />
<br />
<br />
build/release/makensis/zlib/trees.o -lpthread -lstdc++<br />
build/release/makensis/strlist.o: In function `DefineList::add(char const *, char const *)':<br />
build/release/makensis/strlist.o(.text+0x4cd): undefined reference to `void quit&lt;define&gt;(void)'<br />
collect2: ld returned 1 exit status<br />
scons: *** [build/release/makensis/makensis] Error 1<br />
scons: building terminated because of errors.<br />
<br />
<br />
/me wonders what he did wrong this time ;)<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2005, 12:18</div></div><div class="posttext">Try using a clean source package. The errors encountered before might have corrupted SCons state files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">12th August 2005, 13:24</div></div><div class="posttext">Hello,<br />
<br />
1) Did big cleanup of old versions etc.<br />
2) Got last version from cvs <br />
3) tried again and got same error as above. <br />
<br />
I'm trying to build this on a RH 7.3, decided that it might be a problem with that: <br />
<br />
Installed scons-0.96.1-1 on a RH enterprise with python:<br />
<br />
Python 2.2.3 (#1, Aug  8 2003, 08:44:02) [GCC 3.2.3 20030502 (Red Hat Linux 3.2.3-13)] on linux2<br />
<br />
Got latest version of NSIS via CVS, tried:<br />
<br />
[root@commander NSIS]# scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all install<br />
scons: Reading SConscript files ...<br />
scons: *** Path does not exist for option PREFIX:<br />
File &quot;SConstruct&quot;, line 85, in ?<br />
<br />
Then I set the path and got: <br />
<br />
[root@commander NSIS]# scons PREFIX=&quot;/root/NSIS/&quot; SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all install<br />
scons: Reading SConscript files ...<br />
scons: *** Path does not exist for option CPPPATH:<br />
File &quot;SConstruct&quot;, line 85, in ?<br />
<br />
Seems like problems follows me no matter what machine I'm at ;)<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2005, 13:48</div></div><div class="posttext">That error is caused by the old SCons version. You must use at least 0.96.90.<br />
<br />
Please use [ quote ][ size=1 ] [/ size ][/ quote ] instead of [ code ] for outputs with long lines, or manually break the lines.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MartinDK</div><div class="date">12th August 2005, 15:49</div></div><div class="posttext">Sorry about installing the wrong version of scons on that 2nd machine. Installing the latest version of scons did the trick. <br />
<br />
<br />
scons: done building targets.<br />
<br />
<br />
And it seems to be working. Seems like it was either red hat 7.3 or the version of python that was causing all of those problems. <br />
<br />
Thanks for all the help!<br />
<br />
Regards<br />
<br />
/Martin</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>