<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" .onInstSuccess not executed with Reboot Flag, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  .onInstSuccess not executed with Reboot Flag NSIS Discussion" />
	
	<title> .onInstSuccess not executed with Reboot Flag [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  .onInstSuccess not executed with Reboot Flag</div>
<hr />
<div class="pda"><a href="t-183574.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=183574">.onInstSuccess not executed with Reboot Flag</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">thantous</div><div class="date">16th June 2004, 23:29</div></div><div class="posttext">Hello All,<br />
<br />
Ran into and interesting problem today and was wondering if anyone else has seen this or if I'm missing something.<br />
<br />
Installing on Win98 SE<br />
Running NSIS 2.0<br />
<br />
The .onInstSuccess callback function is not executed if the Reboot flag is set and the user chooses to reboot the machine. I proved this to myself by placing a Messagebox in the .onInstSuccess function. If the reboot flag is set the message box will not be displayed after clicking Finish. If the reboot flag is not set the message box is displayed after clicking Finish. <br />
<br />
Here is what the manual has to say,<br />
<br />
4.7.2.1.4 .onInstSuccess<br />
<br />
This callback is called when the install was successful, right before the install window closes (which may be after the user clicks 'Close' if AutoCloseWindow or SetAutoClose is set to false).<br />
<br />
Am I crazy?<br />
<br />
Am I missing something obvious in the manual.<br />
<br />
Thank you for any and all replies,<br />
Thantous<br />
<br />
p.s. I briefly searched the forum for this problem and did not come up with anything. I apologize if this has been covered before. If you would, please point me at any posts that references this problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coho</div><div class="date">17th June 2004, 00:40</div></div><div class="posttext">The .onInstSuccess callback might interpret the RebootFlag as technically not a 'successful' install.<br />
Try some more MessageBox Debugs with the ${IfErrors} and ${IfRebootFlag} logic blocks (!include logiclib.nsh) to narrow this down.<br />
Place a messagebox in .onInstFailed as well...<br />
<br />
User Manual for '.onInstFailed':<br />
&quot;This callback is called when the user hits the 'cancel' button after the install has failed (if it could not extract a file, or the install script used the Abort command).&quot;<br />
<br />
Maybe a file could not be extracted, and the error/reboot flag was set because you have SetOverwrite set to 'on' - ?<br />
<br />
User Manual for 'File':<br />
&quot;The File command sets the error flag if overwrite mode is set to 'try' and the file could not be overwritten, or if the overwrite mode is set to 'on' and the file could not be overwritten and the user selects ignore.&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coho</div><div class="date">17th June 2004, 02:05</div></div><div class="posttext">Ah! IfErrors and IfRebootFlag are not logic defines, but standard NSIS reserved words.<br />
Just use as they are...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>