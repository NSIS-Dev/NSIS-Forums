<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Not understanding the results of IntOp Binary AND operation, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Not understanding the results of IntOp Binary AND operation NSIS Discussion" />
	
	<title> Not understanding the results of IntOp Binary AND operation [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Not understanding the results of IntOp Binary AND operation</div>
<hr />
<div class="pda"><a href="t-224890.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=224890">Not understanding the results of IntOp Binary AND operation</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Rapport</div><div class="date">30th August 2005, 22:43</div></div><div class="posttext">Hello,<br />
<br />
  I've been using NSIS for a while but I am not much of a coder.  I am trying to use one of Jan's code samples (thanks Jan) that simply states &quot;If the section &quot;section_index&quot; is selected, show the custom page &quot;Policytool&quot;.  If the section &quot;section_index&quot; is not selected, abort the custom page.&quot;  Jan's code uses IntOp to perform a binary AND operation, and I don't understand the numbers I am getting back.  Since the section I am performing the operation on is a section group, the binary should look like this, assuming the section group is selected:<br />
<br />
00000011 = 3<br />
<br />
If section group is partially selected:<br />
<br />
00100011 = 67<br />
<br />
However, when I read the flag into a variable using SectionGetFlags, it always returns &quot;2&quot; before the IntOp AND operation and it returns &quot;0&quot; after the IntOp AND operation.  This is regardless of what has been selected on the components page.  So apparently, the lowest bit isn't being set when the section group is selected.  I have attached my script.  Could someone tell me what I am doing wrong?  Thanks so much, and thanks to everyone that I have borrowed code from!<br />
<br />
William</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">30th August 2005, 22:49</div></div><div class="posttext">SectionGetFlags's first parameter must be an index, which is a number given by the &quot;Section&quot;'s 2nd parameter and &quot;SectionGroup&quot;'s 3rd parameter.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rapport</div><div class="date">30th August 2005, 23:08</div></div><div class="posttext">Thanks for the feedback deguix.  I changed the following lines in the code:<br />
<br />
&quot;SectionGetFlags POL $R0&quot; to &quot;SectionGetFlags 25 $R0&quot;<br />
<br />
and<br />
<br />
&quot;SectionGroup &quot;Best Practice and Regulatory Policies&quot; POL&quot; to &quot;SectionGroup &quot;Best Practice and Regulatory Policies&quot; POL 25&quot;<br />
<br />
Now when I run it, it returns &quot;5&quot; before the AND operation, and it returns &quot;1&quot; after the AND operation, regardless of what is checked on the components page.  There is still something I am doing wrong.  Am I not understanding the SectionGroup parameters?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">30th August 2005, 23:16</div></div><div class="posttext">Oh, sorry. Put a string in the &quot;Section&quot;'s 2nd parameter or &quot;SectionGroup&quot;'s 3rd parameter to be used as a constant name for the index constant, and then use this constant's value in the SectionGetFlags instruction like you would with a normal NSIS define. Like this below:Section &quot;MySection&quot; Test<br />
  SectionGetFlags ${Test} $0The value of ${Test} is the index of the section &quot;MySection&quot;.<br />
<br />
EDIT: NOTE: Every section or section group has to have a different constant name for the index.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rapport</div><div class="date">30th August 2005, 23:35</div></div><div class="posttext">Ok so I changed the code to look like this:<br />
<br />
SectionGetFlags ${POL} $R0<br />
<br />
But when I compile, I get the warning:<br />
<br />
&quot;unknown variable/constant &quot;{POL}&quot; detected, ignoring&quot;<br />
<br />
<br />
My Section Group looks like this:<br />
<br />
SectionGroup &quot;Best Practice and Regulatory Policies&quot; POL<br />
<br />
<br />
Am I not getting it right?  Am I missing a parameter?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rapport</div><div class="date">31st August 2005, 01:16</div></div><div class="posttext">So I found my problem.  The issue appears in the following thread:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=211774&amp;highlight=SectionGroup+and+index<br />
<br />
Apparently if you try to use the section_index before it is defined, it will choke when compiling.  I just simply moved my function to the end of the script and it works fine now.  Thanks!<br />
<br />
William</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rapport</div><div class="date">31st August 2005, 01:58</div></div><div class="posttext">Just as an additional note, when using Jan's code for section groups, it will not work unless all sections in the section group have been selected.  You can modify the code so that it will continue even if only part of the section group has been selected:<br />
<br />
<br />
<br />
SectionGetFlags ${secID} $R0<br />
IntOp $R1 $R0 &amp; ${SF_SELECTED}<br />
IntOp $R2 $R0 &amp; ${SF_PSELECTED}<br />
StrCmp $R1 ${SF_SELECTED} +3<br />
StrCmp $R2 ${SF_PSELECTED} +2<br />
 Abort<br />
<br />
<br />
<br />
Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>