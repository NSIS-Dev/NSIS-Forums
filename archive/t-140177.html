<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" MUI_UNPAGE_CONFIRM leading to error, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  MUI_UNPAGE_CONFIRM leading to error NSIS Discussion" />
	
	<title> MUI_UNPAGE_CONFIRM leading to error [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  MUI_UNPAGE_CONFIRM leading to error</div>
<hr />
<div class="pda"><a href="t-140177.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=140177">MUI_UNPAGE_CONFIRM leading to error</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 09:47</div></div><div class="posttext">I've got a lengthy script that I'm porting from NSIS 1 to NSIS 2 MUI.<br />
<br />
I'm basically there, but have a problem with the uninstaller confirmation page. As soon as <br />
<br />
  !insertmacro MUI_UNPAGE_CONFIRM<br />
<br />
is used, the compile gives an error:<br />
<br />
Adding plug-ins initializing function... Done!<br />
Error: resolving pre-page function &quot;un.mui.ConfirmPre&quot; in uninstall pages<br />
Note: uninstall functions must begin with &quot;un.&quot;, and install functions must not<br />
Error - aborting creation process<br />
<br />
It seems to work in the examples and I'm not clear which aprt of my script might fuck it up?<br />
<br />
Thanks,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 09:48</div></div><div class="posttext">.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th June 2003, 12:58</div></div><div class="posttext">You are combining old and new MUI code. Remove page defines like MUI_COMPONENTSPAGE, MUI_UNINSTALLER etc. Please check the Modern UI Readme.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 14:15</div></div><div class="posttext">Joost,<br />
<br />
thank you for the suggestion. I've radically downsized the example, but problem still exists:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
;--------------------------------<br />
;Modern UI Configuration<br />
<br />
  !insertmacro MUI_PAGE_STARTMENU<br />
<br />
  !insertmacro MUI_UNPAGE_CONFIRM<br />
  !insertmacro MUI_UNPAGE_INSTFILES<br />
  <br />
<br />
  ;General<br />
  OutFile &quot;CpuIdleInstaller.exe&quot;<br />
<br />
  ;Folder-selection page<br />
  InstallDir &quot;$PROGRAMFILES\myprogram&quot;<br />
<br />
<br />
<br />
;--------------------------------<br />
; The stuff to install<br />
Section &quot;Program Files&quot; CpuIdleProgramFiles<br />
  WriteUninstaller &quot;uninstall.exe&quot;<br />
SectionEnd<br />
<br />
;--------------------------------<br />
;Uninstaller Section<br />
<br />
; special uninstall section.<br />
Section &quot;Uninstall&quot;<br />
<br />
SectionEnd<br />
<br />
<br />
Can you see other old code in here? Error message is still the same?<br />
<br />
Thanks,<br />
Andreas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">26th June 2003, 14:38</div></div><div class="posttext">Are you using the latest version of NSIS (CSV).  I compiled your original script with no problems using CSV, 2003-06-25, version of NSIS.<br />
<br />
Vytautas<br />
<br />
Sorry my edited script did not actually generate the uninstaller, I cut too much stuff out of it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 15:26</div></div><div class="posttext">Version as download just now from nsis.sf.net, yes. Any debugging setting I could turn on? Tried -v9 on the command line, but that didn't give more insight.<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 15:32</div></div><div class="posttext">Just to make sure, tried with CVS snapshot from *now*, doesn't work. I'll retest with tonight's snapshot again.<br />
<br />
Andi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">26th June 2003, 15:32</div></div><div class="posttext">Don't forget SF.net CVS servers are 24 hours behind at the mo.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th June 2003, 15:41</div></div><div class="posttext">This script does not rely on features that have been added &lt; 24 hours ago. Please attach the full script again (with the corrections).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 15:44</div></div><div class="posttext">there you go</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th June 2003, 15:49</div></div><div class="posttext">Please read the Modern UI Readme and check the examples. Lots of things are missing:<br />
<br />
1) MUI_PRODUCT and MUI_VERSION defines<br />
<br />
2) The pages like MUI_PAGE_COMPONENTS, MUI_PAGE_DIRECTORY, MUI_PAGE_INSTFILES etc.<br />
<br />
3) A language (after the page macro's): !insertmacro MUI_LANGUAGE &quot;English&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">26th June 2003, 16:55</div></div><div class="posttext">I may have stripped out too much- but the error message was there even before:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
!define MUI_PRODUCT &quot;test&quot;<br />
!define MUI_VERSION &quot;7&quot;<br />
<br />
;--------------------------------<br />
;Modern UI Configuration<br />
<br />
  !insertmacro MUI_PAGE_STARTMENU<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
  !insertmacro MUI_PAGE_DIRECTORY<br />
  !insertmacro MUI_PAGE_INSTFILES <br />
<br />
  !insertmacro MUI_UNPAGE_CONFIRM<br />
  !insertmacro MUI_UNPAGE_INSTFILES<br />
  <br />
<br />
  ;General<br />
  OutFile &quot;CpuIdleInstaller.exe&quot;<br />
<br />
  ;Folder-selection page<br />
  InstallDir &quot;$PROGRAMFILES\myprogram&quot;<br />
<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
;--------------------------------<br />
; The stuff to install<br />
Section &quot;Program Files&quot; CpuIdleProgramFiles<br />
  WriteUninstaller &quot;uninstall.exe&quot;<br />
SectionEnd<br />
<br />
;--------------------------------<br />
;Uninstaller Section<br />
<br />
; special uninstall section.<br />
Section &quot;Uninstall&quot;<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th June 2003, 17:09</div></div><div class="posttext">Your last script works fine for me. Make sure you have the latest development version from http://nsis.sf.net</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AndiG</div><div class="date">27th June 2003, 09:09</div></div><div class="posttext">Guys, thank you for your support. Issues are resolved, seemed to be an interesting case of old and new MUI syntax mixed (didn't realise *how* much had changed since I've last checked), some clean install issues and too much other stuff going on at the same time.<br />
<br />
Cheers,<br />
Andi</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>