<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File Timestamp Precision, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File Timestamp Precision NSIS Discussion" />
	
	<title> File Timestamp Precision [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File Timestamp Precision</div>
<hr />
<div class="pda"><a href="t-315797.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=315797">File Timestamp Precision</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">intripoon</div><div class="date">28th December 2009, 21:35</div></div><div class="posttext">Hi !<br />
<br />
I'm the creator of a free game I distribute on my website www.walkover.org. Until now, I offered a simple 7z or selfextractor to distribute it. But lately, I realized that it's too complicated to get the game installed for some gamers. So I decided to replace it with an installer that creates a link on the desktop and in the startmenu. I managed to do this with NSIS by modifying an example.<br />
<br />
But now I've got a problem: After the initial setup, there is an autoupdate system that updates the game to the most current version. This system relies on filestamps being correct - if they are not, it redownloads the file. Now comes the strange part: With 7z+selfextractor, the timestamps were correct after the installation, but with nsis and lzma - which is essentially the same I guess - the timestamps are slightly off. This makes my autoupdater redownload every file.<br />
<br />
Is there a way to increase the file timestamp precision?<br />
<br />
Best regards<br />
   Marc</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th December 2009, 07:33</div></div><div class="posttext">Are you using NTFS or FAT? NTFS has more precise timestamps.<br />
<br />
I have to mention that using timestamps for that is less than perfect. Other programs can easily change timestamps and so can users editing your files. You're much better off with proper version numbers.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">intripoon</div><div class="date">30th December 2009, 11:51</div></div><div class="posttext">It's perfectly fine to use timestamps for that. For example, rsync uses them as a hint as well - my patching works similar. So if some files have changed timestamps or just some got modified by the user, that's fine, they'll get patched to the correct version again on the next update run. This is only a problem if all timestamps get corrupted for all players - that would lead to everyone downloading everything again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">30th December 2009, 12:21</div></div><div class="posttext">Well then, why not just make your decision algorithm a little bit less picky? Make it &quot;if dt &gt; 123&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">intripoon</div><div class="date">30th December 2009, 13:09</div></div><div class="posttext">I already did that. But I'm still wondering why timestamp precision with 7z/lzma is higher than with nsis using 7z/lzma.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th December 2009, 13:44</div></div><div class="posttext">NSIS doesn't use 7-zip which is the container that also saves timestamps. We only use lzma compression.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">intripoon</div><div class="date">30th December 2009, 16:33</div></div><div class="posttext">ic. How complicated would it be to modify the code to enhance the precision? Is it more a small change or does it affect the code at a lot of places?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">31st December 2009, 10:49</div></div><div class="posttext">Search for TOK_FILE in Source\script.cpp. I think it's in the function that's called there, near the end of the file.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>