<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" uninstall.exe not always created succesfully, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  uninstall.exe not always created succesfully NSIS Discussion" />
	
	<title> uninstall.exe not always created succesfully [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  uninstall.exe not always created succesfully</div>
<hr />
<div class="pda"><a href="t-291130.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=291130">uninstall.exe not always created succesfully</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">andrewb</div><div class="date">1st May 2008, 17:28</div></div><div class="posttext">Hello,<br />
<br />
I have inherited the task of helping maintain an NSIS script.  This is my first experience with this scripting language.<br />
<br />
Sometimes the script will properly create an uninstaller, sometimes it will not.  I do not know if it has ever worked reliably.<br />
<br />
I have googled, searched through forum postings, the official NSIS documentation and still am unable to come up with a solution.<br />
<br />
The script was written in NSIS 2.32 and I am using version 2.32.  Basically the install script creates an un-installer in the following fashion:<br />
<br />
SetOutPath $INSTDIR<br />
WriteUninstaller $INSTDIR\uninstall.exe<br />
<br />
Under one circumstance (we will call this circumstance A) the uninstall.exe is created and works properly.  Under another set of circumstance (we will call this circumstance B) I receive the error message &quot;Unable to create uninstall.exe&quot;.<br />
<br />
The only difference between the two circumstances is that under circumstance B a component section is run that pipes out and runs a self extracting WinRAR file.  The file is broken into parts across 4 DVDs.  Under circumstance A (when the installer installs correctly) this component is not chosen and therefore the section is not run.<br />
<br />
So my question is why would I be receiving an error when trying to write the uninstall.exe file?  Is WinRAR running and taking so much time to extract files accounting for this?<br />
<br />
I was not quite sure if including the entire code was appropriate here.  If so please let me know and I will attach it.<br />
<br />
Regards,<br />
Andrew</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andrewb</div><div class="date">1st May 2008, 23:17</div></div><div class="posttext">I have discovered a work around for this problem but I am not sure why it works.  Perhaps someone can enlighten me.<br />
<br />
Currently WriteUninstaller is called in a section named Section -post SECMyUninstaller<br />
<br />
I simply moved WriteUninstaller into its own section which runs last (however before the -post section).  Can anyone shed some light?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">2nd May 2008, 00:19</div></div><div class="posttext">I'd guess WinRAR runs asynchronously instead of asynchronously and in some point purges the directory where you install your files and the uninstaller. If moving it somewhere else affects things, you probably have a race condition with something that deletes the directory. Run FileMon.exe and see what happens.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>