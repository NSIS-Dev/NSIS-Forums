<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Behavior of installation directory selection dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Behavior of installation directory selection dialog NSIS Discussion" />
	
	<title> Behavior of installation directory selection dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Behavior of installation directory selection dialog</div>
<hr />
<div class="pda"><a href="t-300815.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=300815">Behavior of installation directory selection dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">froesccn</div><div class="date">8th December 2008, 10:36</div></div><div class="posttext">It seems that MUI_PAGE_DIRECTORY always appends &quot;SOMELASTDIR&quot; to the selected path if the default INSTDIR was set to something like &quot;SOMEPATH\SOMELASTDIR&quot;. Is there an option to suppress this? I suppose it is a safety precaution for those uninstallers which dare to call <br />
  &quot;RMDir /r $INSTDIR&quot;,<br />
but I'd really like to pick any directory name. <br />
<br />
Of course, I could always process the string later, but then I have to be very careful that the selected INSTDIR is different from the default INSTDIR, otherwise nothing may be removed (and with things like UNC and short file names you never feel quite confident that the same string will be returned for the same path).<br />
<br />
Also, when the dialog appends SOMELASTDIR to the selection, it would be more logical if the initial directory selection when opening the dialog would be SOMEPATH, not SOMEPATH\SOMELASTDIR.<br />
<br />
Furthermore, when a path is selected which is different from the default INSTDIR, and the user clicks &quot;Browse&quot; again, the initial directory seems to be wrong (I get My Documents).<br />
<br />
Finally, if the user is logged in with a normal account but starts the installer with &quot;Run As ...&quot; to get administrator privileges, the dialog does not get updated when a new folder is created or renamed in the dialog. But this is probably an issue of the system dialog (tested on W2K SP4 and XP SP3).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th December 2008, 11:13</div></div><div class="posttext">Append a backslash to InstallDir.InstallDir &quot;$PROGRAMFILES\NSIS\&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">froesccn</div><div class="date">8th December 2008, 13:38</div></div><div class="posttext">Thank you, this works. I was looking into the documentation<br />
for MUI, it didn't occur to me to search for this special <br />
behavior under InstallDir, especially as I do my own <br />
initialization of $INSTDIR in onInit.<br />
<br />
It's a bit confusing, am I correct in assuming that<br />
$INSTDIR will never end with &quot;\&quot; even if InstallDir<br />
ends with &quot;\&quot;? Is InstallDir handled differently<br />
from StrCpy $INSTDIR &quot;...&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">8th December 2008, 20:15</div></div><div class="posttext">$INSTDIR can never end with a backslash, no matter how you set it. This is to make sure it always points to a valid path.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>