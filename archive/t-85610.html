<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" LicenseData x 2, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  LicenseData x 2 NSIS Discussion" />
	
	<title> LicenseData x 2 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  LicenseData x 2</div>
<hr />
<div class="pda"><a href="t-85610.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=85610">LicenseData x 2</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Cyric</div><div class="date">23rd April 2002, 00:34</div></div><div class="posttext">Hey all :)  Our legal department just finished with the license agreement and its huge :(  The .txt file is about 47k which is over the 32k limit for the LicenseData attribute.<br />
<br />
The reason the license is so big is because the project is a joint venture between ourselves and another company, so there is basically 2 license agreements in the one .txt file. <br />
<br />
Is there anyway I can either: -<br />
     a) Use a .txt file over 32k<br />
     b) Display the two agreements seperately<br />
     c) Any other suggestions?  Have read about Install Options, is<br />
        that any use to me?<br />
<br />
Thanks everybody :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mmullikin</div><div class="date">23rd April 2002, 02:25</div></div><div class="posttext">Sack the lawyers and start over...??? :D :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cyric</div><div class="date">23rd April 2002, 04:16</div></div><div class="posttext">Yeah thats #($*ing helpful :mad: Anybody got any 'practical' solutions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">23rd April 2002, 06:20</div></div><div class="posttext">you could develop your own plugin that will display the license file over 32kb use use it instead of normal license window !:D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cyric</div><div class="date">23rd April 2002, 06:22</div></div><div class="posttext">no can do, my c isnt good enough :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">23rd April 2002, 06:53</div></div><div class="posttext">From script.cpp starting with line 551<br />
<br />
case TOK_LICENSEDATA:<br />
      if (build_header.licensedata_ptr != -1)<br />
      {<br />
        warning(&quot;LicenseData: specified multiple times, wasting space (%s:%d)&quot;,curfilename,linecnt);<br />
      }<br />
#ifdef NSIS_CONFIG_SILENT_SUPPORT<br />
      if (build_header.common.silent_install)<br />
      {<br />
        warning(&quot;LicenseData: SilentInstall enabled, wasting space (%s:%d)&quot;,curfilename,linecnt);<br />
      }<br />
#endif<br />
      {<br />
        char data[32768];<br />
        FILE *fp;<br />
        int datalen;<br />
        fp=fopen(line.gettoken_str(1),&quot;rb&quot;);<br />
        if (!fp)<br />
        {<br />
          ERROR_MSG(&quot;LicenseData: open failed \&quot;%s\&quot;\n&quot;,line.gettoken_str(1));<br />
          PRINTHELP()<br />
        }<br />
        datalen=fread(data,1,32767,fp);<br />
        if (!feof(fp))<br />
        {<br />
          ERROR_MSG(&quot;LicenseData: license must be &lt; 32 kilobytes.\n&quot;);<br />
          fclose(fp);<br />
          return PS_ERROR;         <br />
        }<br />
        fclose(fp);<br />
        data[datalen]=0;<br />
        build_header.licensedata_ptr=add_string_main(data,0);<br />
        SCRIPT_MSG(&quot;LicenseData: \&quot;%s\&quot;      \n&quot;,line.gettoken_str(1));<br />
      }<br />
    return make_sure_not_in_secorfunc(line.gettoken_str(0));<br />
<br />
<br />
<br />
<br />
<br />
Change 32768 to whatever size you want and recompile the source.  I think that's all you'd need to change.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">23rd April 2002, 06:54</div></div><div class="posttext">Oh and note that in the fread line...<br />
<br />
datalen=fread(data,1,32767,fp);<br />
<br />
You should make that datalen=fread(data,1,(YOUR_SIZE - 1),fp);</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rainwater</div><div class="date">23rd April 2002, 07:07</div></div><div class="posttext">As far as I know, you can't use that solution because you are limited to 32k in the textbox.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">justin</div><div class="date">23rd April 2002, 19:37</div></div><div class="posttext">You could use installoptions to display the second and/or third pages...<br />
<br />
-Justin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cyric</div><div class="date">23rd April 2002, 22:43</div></div><div class="posttext">how would i go about that?  the textfield is only for input and the label isnt big enough and doesnt scroll :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SmartyMan</div><div class="date">23rd April 2002, 23:48</div></div><div class="posttext">Originally posted by rainwater <br />
As far as I know, you can't use that solution because you are limited to 32k in the textbox. <br />
Thats right (AFAIK).<br />
I would prefer NSIS using the RichEditCtrl - not only because there is no size limit but for things like making URLs look like those (blue and underlined, mouse becomes hand when upon the link).<br />
<br />
For the &quot;installer size maniacs&quot;: both the EditCtrl and the RichEditCtrl are used directly from windows, so using .rtf would not increase the size of the installers.<br />
<br />
Compatibility to existing .nsi projects is also given, since the RichEditCtrl can of cause load .txt files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Cyric</div><div class="date">24th April 2002, 00:54</div></div><div class="posttext">Well SmartyMan it is opensource so do you think you could knock something together?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">24th April 2002, 10:17</div></div><div class="posttext">Another idea, not the nice solution of putting it in the lisense textbox but it works already without modifications:<br />
<br />
create an exe that displays the thing nicely. Then execwait this exe and check the return code: 0 if not accepted and 1 if accepted...<br />
<br />
Just an idea...<br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">24th April 2002, 21:42</div></div><div class="posttext">A rich text box would be a very nice feature :) Maybe for 2.0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">SmartyMan</div><div class="date">24th April 2002, 23:21</div></div><div class="posttext">Originally posted by Cyric <br />
Well SmartyMan it is opensource so do you think you could knock something together? <br />
...and do all the work again with the next update?<br />
No way.<br />
I would eventually work on these sources, if there where a guarantee that my workwill be taken over in the next official release.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mmullikin</div><div class="date">25th April 2002, 00:04</div></div><div class="posttext">Another option would be to NOT have the license info in the installer. Instead display the license agreement in an opening dialog of the app. User has to agree to it or exit. Since the license info is obviously important to the company (47k worth of important!) they could also display it in the About dialog or something.<br />
<br />
Just a thought.<br />
<br />
-mmullikin<br />
<br />
:( Sorry about the &quot;sack the lawyers&quot; line in my first reply - I was just trying to bring a little levity to an otherwise bad situation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gombok</div><div class="date">29th April 2002, 19:45</div></div><div class="posttext">who reads a license agreement bigger than 32k ??????</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">30th April 2002, 08:36</div></div><div class="posttext">Gombok,<br />
<br />
reading is up to the user! For legal reasons, you have to display all of the agreement the user is about to sign with or without reading!<br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Pomflain</div><div class="date">2nd May 2002, 20:30</div></div><div class="posttext">Originally posted by rainwater <br />
As far as I know, you can't use that solution because you are limited to 32k in the textbox. <br />
<br />
That's only for user input,  you can throw just about as much data as you want into the box in the program.  The problem I was running into then was running out of stack space,  so I changed the compiler's settings to reserve 4 mb of virtual memory and 2 mb of physical memory for stack space.  I then was able to use a license data file of 913 kb without any problems.  Sure it's quite excessive as to the memory allocation,  but it does allow you to use about as large a license file as you want.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>