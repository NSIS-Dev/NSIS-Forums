<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" dependent checkbox in dialog, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  dependent checkbox in dialog NSIS Discussion" />
	
	<title> dependent checkbox in dialog [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  dependent checkbox in dialog</div>
<hr />
<div class="pda"><a href="t-337570.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=337570">dependent checkbox in dialog</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">gclass</div><div class="date">15th November 2011, 08:57</div></div><div class="posttext">Hello,<br />
I used the dialog designer to generate a dialog.<br />
I have 3 checkboxes and would like to enable #2 and #3 only if #1 is checked.<br />
<br />
these are the functions:<br />
<br />
Function fnc__1_Create<br />
  <br />
  ; === _1 (type: Dialog) ===<br />
  nsDialogs::Create 1018<br />
  Pop $hCtl__1<br />
  ${If} $hCtl__1 == error<br />
    Abort<br />
  ${EndIf}<br />
  <br />
  ; === CheckBox3 (type: Checkbox) ===<br />
  ${NSD_CreateCheckbox} 68 192 291 18 &quot;this is checkbox 3&quot;<br />
  Pop $hCtl__1_CheckBox3<br />
  ${If} $hCtl__1_CheckBox3_state == ${BST_CHECKED}<br />
  		${NSD_Check} $hCtl__1_CheckBox3<br />
  	${EndIf}<br />
  <br />
  ; === CheckBox2 (type: Checkbox) ===<br />
  ${NSD_CreateCheckbox} 68 174 243 18 &quot;this is checkbox 2&quot;<br />
  Pop $hCtl__1_CheckBox2<br />
  ${If} $hCtl__1_CheckBox2_state == ${BST_CHECKED}<br />
  		${NSD_Check} $hCtl__1_CheckBox2<br />
  	${EndIf}<br />
  <br />
  ; === CheckBox1 (type: Checkbox) ===<br />
  ${NSD_CreateCheckbox} 46 155 233 23 &quot;this is checkbox 1&quot;<br />
  Pop $hCtl__1_CheckBox1<br />
  ${If} $hCtl__1_CheckBox1_state == ${BST_CHECKED}<br />
  		${NSD_Check} $hCtl__1_CheckBox1<br />
  	${EndIf}<br />
  ${NSD_Check} $hCtl__1_CheckBox1<br />
  <br />
  FunctionEnd<br />
<br />
<br />
; dialog show function<br />
Function fnc__1_Show<br />
  Call fnc__1_Create<br />
  nsDialogs::Show $hCtl__1<br />
FunctionEnd<br />
<br />
; function to remember the selections made in case of back to previous page<br />
Function nsDialogsPageLeave<br />
	${NSD_GetState} $hCtl__1_CheckBox1 $hCtl__1_CheckBox1_state<br />
	${NSD_GetState} $hCtl__1_CheckBox2 $hCtl__1_CheckBox2_state<br />
	${NSD_GetState} $hCtl__1_CheckBox3 $hCtl__1_CheckBox3_state<br />
FunctionEnd<br />
<br />
and I call them like:<br />
<br />
Page custom fnc__1_Show nsDialogsPageLeave<br />
<br />
<br />
will be glad to have some help,<br />
<br />
Thx<br />
G</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">15th November 2011, 09:55</div></div><div class="posttext">Use the OnClick macro on checkbox 1 to uncheck and disable checkboxes 2&amp;3 if the new checkbox state is unchecked.<br />
http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html#ref-onclick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gclass</div><div class="date">15th November 2011, 10:58</div></div><div class="posttext">MSG, thx for that.<br />
<br />
I added onclick macro to call a function to disable or enable the 2+3 checkboxes and it is working great:<br />
<br />
  ${NSD_CreateCheckbox} 46 155 233 23 &quot;checkbox1&quot;<br />
  Pop $hCtl__1_CheckBox1<br />
  ${NSD_OnClick} $hCtl__1_CheckBox1 DisableCheckbox<br />
  ${If} $hCtl__1_CheckBox1_state == ${BST_CHECKED}<br />
  		${NSD_Check} $hCtl__1_CheckBox1<br />
  	${EndIf}<br />
  ${NSD_Check} $hCtl__1_CheckBox1<br />
<br />
<br />
in the function I cant get it work right:<br />
<br />
Function DisableCheckbox<br />
${If} $hCtl__1_CheckBox1_state == ${BST_UNCHECKED}<br />
EnableWindow $hCtl__1_CheckBox2 0<br />
EnableWindow $hCtl__1_CheckBox3 0<br />
${Else}<br />
EnableWindow $hCtl__1_CheckBox2 1<br />
EnableWindow $hCtl__1_CheckBox3 1<br />
${EndIf}<br />
FunctionEnd<br />
<br />
<br />
when I remove the IF it is working and disable the checkboxes..<br />
<br />
thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">15th November 2011, 11:11</div></div><div class="posttext">First of all: As you can read in the manual, first you need to to pop the control's HWND off the stack. Even if you already know it, you cannot leave it there and cause stack corruption.<br />
<br />
Second, you need to get the new state of the checkbox before you can do If State == unchecked. Use NSD_GetState.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gclass</div><div class="date">15th November 2011, 11:50</div></div><div class="posttext">thx, working fine now.<br />
can you take a look that I handle the stack correctly, I dont get error so I want to be sure :)<br />
<br />
<br />
Function DisableCheckbox<br />
;MessageBox MB_OK &quot;$hCtl__1_CheckBox1_state and $hCtl__1_CheckBox1&quot;<br />
Pop $hCtl__1_CheckBox1<br />
${NSD_GetState} $hCtl__1_CheckBox1 $hCtl__1_CheckBox1_state<br />
${If} $hCtl__1_CheckBox1_state == ${BST_UNCHECKED}<br />
EnableWindow $hCtl__1_CheckBox2 0<br />
EnableWindow $hCtl__1_CheckBox3 0<br />
${Else}<br />
EnableWindow $hCtl__1_CheckBox2 1<br />
EnableWindow $hCtl__1_CheckBox3 1<br />
${EndIf}<br />
FunctionEnd<br />
<br />
<br />
thx<br />
G</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">15th November 2011, 14:28</div></div><div class="posttext">Yeah, a pop is all you need. Looks good.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gclass</div><div class="date">15th November 2011, 14:31</div></div><div class="posttext">thx a lot</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>