<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Pre-compressing data files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Pre-compressing data files NSIS Discussion" />
	
	<title> Pre-compressing data files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Pre-compressing data files</div>
<hr />
<div class="pda"><a href="t-290227.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=290227">Pre-compressing data files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">badger101101</div><div class="date">14th April 2008, 21:07</div></div><div class="posttext">This has been asked previously by someone else, but there was no definitive answer.  So I'll ask in a slightly different context.<br />
<br />
We currently have a Linux web server configured to generate NSIS installers on-the-fly when someone purchases our software online.  The problem we have is that we &quot;stamp&quot; a unique serial number on the software's executable before it gets packaged into an installer, which means the end-user has to wait an uncomfortably long time while makensis compresses everything.  Does makensis currently have a way of utilizing pre-compressed files?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AaronLS</div><div class="date">14th April 2008, 22:47</div></div><div class="posttext">At design time:<br />
1) Create and compile an installer with your compression mode of choice with all files you want pre-compressed and generate the installer exe(we call Premade.exe)<br />
2) Create the main installer script which will:<br />
 a)Extract the serial stamped EXE to its destination<br />
 b)Then use the SetCompress off  command. <br />
 c)Use File command to extract and run the Premade.exe<br />
<br />
By using the SetCompress off command, the precompressed Premade.exe will be included in the final main installer, but it will not be compressed, and thus the time to build the final installer will be much faster.  So your web server will ahve your main isntaller *.nsi, a Premade.exe, and you will generate your serial stamped application *.exe on the fly.<br />
<br />
On demand at user's request:<br />
1) Compile the main installer script which will compress the serial stamped exe, and also package the Premade.exe, but it will not be compressed because of the SetCompress command(since the Premade.exe was created with a compression level of your choice, trying to compress it again would have little gain).<br />
<br />
Hope this is what you need.<br />
<br />
FYI, during testing I set the &quot;SetCompress off&quot; command in all of my scripts because I can compile extremely quickly that way.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">badger101101</div><div class="date">14th April 2008, 23:34</div></div><div class="posttext">Thanks for the suggestion.  That should actually work out nicely.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">99999999</div><div class="date">15th April 2008, 03:14</div></div><div class="posttext">You are talking about a topic which I had originally brought up (well I know I brought it up too.)<br />
<br />
This was only 1/2 of what I needed, unfortunately.  I have been also looking for a way of moving away from the single .exe file installer, and moving to single installer executable  which installs packages which are downloaded to the user's machine, and has customization options in the form of scripting in each of the packages.<br />
<br />
That turned out to be a much taller order than my original suspicions, and will unfortunately take me away from NSIS all together, for our package installer.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>