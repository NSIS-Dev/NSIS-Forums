<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Writing to 2nd last line of file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Writing to 2nd last line of file NSIS Discussion" />
	
	<title> Writing to 2nd last line of file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Writing to 2nd last line of file</div>
<hr />
<div class="pda"><a href="t-264165.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=264165">Writing to 2nd last line of file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">22nd January 2007, 14:06</div></div><div class="posttext">Hello,<br />
<br />
I'm trying to append a string to the 2nd last line of a text file, but I'm not sure how I can do that. Would this be possible with the NSIS functions or is a plugin needed?<br />
<br />
Thanks :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd January 2007, 17:01</div></div><div class="posttext">See the NSIS documentation,<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.2<br />
Name &quot;My Application&quot;<br />
OutFile 'test.exe'<br />
!define TEST_FILE &quot;$EXEDIR\license.txt&quot;<br />
<br />
!include TextFunc.nsh<br />
<br />
!insertmacro LineFind<br />
<br />
<br />
Section<br />
        CopyFiles &quot;${NSISDIR}\license.txt&quot; &quot;${TEST_FILE}&quot;<br />
<br />
	${LineFind} &quot;${TEST_FILE}&quot; &quot;&quot; &quot;-2&quot; Example4<br />
	IfErrors 0 +2<br />
	MessageBox MB_OK &quot;Error&quot;<br />
	ExecShell open &quot;${TEST_FILE}&quot;<br />
SectionEnd<br />
<br />
Function Example4<br />
	FileWrite $R4 &quot;---First Line---$\r$\n&quot;<br />
	FileWrite $R4 &quot;---Second Line ...---$\r$\n&quot;<br />
<br />
	Push $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Backland</div><div class="date">22nd January 2007, 17:19</div></div><div class="posttext">Awesome, thanks a lot red wine!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">22nd January 2007, 17:29</div></div><div class="posttext">You're welcome Backland, thanks goes to Instructor :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>