<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Writing into Config File, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Writing into Config File NSIS Discussion" />
	
	<title> Writing into Config File [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Writing into Config File</div>
<hr />
<div class="pda"><a href="t-303974.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=303974">Writing into Config File</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">subthka</div><div class="date">10th March 2009, 07:24</div></div><div class="posttext">Hi All<br />
I am using NSIS installer from the past 15 days and I would like to make an installer for my project<br />
<br />
Details are as follows<br />
<br />
I created a custom page where we have an drop down with prior databases written  and one option as Create new database<br />
<br />
So now the thing is that when i choose create new database i need to get a textbox in the next page and should accept the name and should write in the config file specified.<br />
 <br />
If i select the database name(existing ones) it should ask for text box and instead i should directly move for the installation directory<br />
<br />
I am in need urgent <br />
<br />
Please help me out regarding this issue...<br />
<br />
Here is the sample code i am using<br />
<br />
<br />
; Script generated by the HM NIS Edit Script Wizard.<br />
<br />
<br />
<br />
; HM NIS Edit Wizard helper defines<br />
<br />
!define PRODUCT_NAME &quot;XXX&quot;<br />
<br />
!define PRODUCT_VERSION &quot;V1.0.0.0&quot;<br />
<br />
!define PRODUCT_PUBLISHER &quot;YYY&quot;<br />
<br />
!define PRODUCT_WEB_SITE &quot;www.example.com&quot;<br />
<br />
!define PRODUCT_UNINST_KEY &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}&quot;<br />
<br />
!define PRODUCT_UNINST_ROOT_KEY &quot;HKLM&quot;<br />
<br />
!define PRODUCT_STARTMENU_REGVAL &quot;NSIS:StartMenuDir&quot;<br />
<br />
<br />
<br />
SetCompressor lzma<br />
<br />
<br />
<br />
;General Variable Declaration and Definitions<br />
<br />
!define LVM_GETITEMCOUNT 0x1004<br />
<br />
!define LVM_GETITEMTEXT 0x102D<br />
<br />
!define REGKEY &quot;SOFTWARE\$(^Name)&quot;<br />
<br />
!define TEMP1 $R0<br />
<br />
!define TEMP2 $R1<br />
<br />
!define TEMP3 $R3<br />
<br />
<br />
<br />
<br />
<br />
; MUI 1.67 compatible ------<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
!include &quot;LogicLib.nsh&quot;<br />
<br />
!include &quot;WinMessages.nsh&quot;<br />
<br />
!include &quot;WordFunc.nsh&quot;<br />
<br />
!include &quot;TextFunc.nsh&quot;<br />
<br />
<br />
<br />
; MUI Settings<br />
<br />
!define MUI_ABORTWARNING<br />
<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\orange-install.ico&quot;<br />
<br />
!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\Icons\orange-uninstall.ico&quot;<br />
<br />
<br />
<br />
; Welcome page<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
<br />
; Custom pages<br />
<br />
Page custom Select_DataBase<br />
<br />
;Page custom EnterUsername_Password<br />
<br />
;!define MUI_PAGE_CUSTOMFUNCTION_PRE txt_box<br />
<br />
; Components page<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
; Directory page<br />
<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
<br />
; Start menu page<br />
<br />
var ICONS_GROUP<br />
<br />
!define MUI_STARTMENUPAGE_NODISABLE<br />
<br />
!define MUI_STARTMENUPAGE_DEFAULTFOLDER &quot;ADB_Setup&quot;<br />
<br />
!define MUI_STARTMENUPAGE_REGISTRY_ROOT &quot;${PRODUCT_UNINST_ROOT_KEY}&quot;<br />
<br />
!define MUI_STARTMENUPAGE_REGISTRY_KEY &quot;${PRODUCT_UNINST_KEY}&quot;<br />
<br />
!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME &quot;${PRODUCT_STARTMENU_REGVAL}&quot;<br />
<br />
!insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP<br />
<br />
; Instfiles page<br />
<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
; Finish page<br />
<br />
!define MUI_FINISHPAGE_RUN &quot;ADB_SETUP&quot;<br />
<br />
!define MUI_FINISHPAGE_SHOWREADME &quot;ReadMe.txt&quot;<br />
<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
<br />
<br />
; Uninstaller pages<br />
<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
<br />
<br />
; Language files<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
<br />
; Reserve files<br />
<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
<br />
<br />
; MUI end ------<br />
<br />
<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION} [${__DATE__}]&quot;<br />
<br />
OutFile &quot;ADB_Setup.exe&quot;<br />
<br />
CRCCheck on<br />
<br />
XPStyle on<br />
<br />
BrandingText &quot;Created By Cytrion Technologies&quot;<br />
<br />
InstallDir &quot;$PROGRAMFILES\ADB_Setup&quot;<br />
<br />
ShowInstDetails show<br />
<br />
ShowUnInstDetails show<br />
<br />
<br />
<br />
Section &quot;ADB_SECTION&quot; SEC01<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
    SetOutPath $INSTDIR<br />
<br />
    SetOverwrite on<br />
<br />
    File /r &quot;D:\CodeIgniter_1.7.1\*&quot;<br />
<br />
    WriteRegStr HKLM &quot;${REGKEY}\Components&quot; Main 1<br />
<br />
    !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;[SEC_READ_CONFIG_FILES]&quot; SEC02<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
    ;Get Install Options dialog user input<br />
<br />
    ReadINIStr ${TEMP2} &quot;$PLUGINSDIR\test.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
    StrCpy $3 &quot;${TEMP2}&quot;<br />
<br />
    DetailPrint &quot;Facility Name: ${TEMP2}&quot;<br />
<br />
    ${ConfigWrite} &quot;$INSTDIR\system\application\config\database.php&quot; &quot;$db['default']['database'] = &quot; '&quot;$3&quot;' ${TEMP3}<br />
<br />
    ;ReadINIStr ${TEMP1} &quot;$PLUGINSDIR\up.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
    ;DetailPrint &quot;Password: ${TEMP1}&quot;<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;SEC_002&quot; SEC03<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
    ;Get Install Options dialog user input<br />
<br />
    ReadINIStr ${TEMP1} &quot;$PLUGINSDIR\db_select.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
<br />
    StrCpy $4 &quot;${TEMP1}&quot;<br />
<br />
    DetailPrint &quot;Facility Name: ${TEMP1}&quot;<br />
<br />
    ${ConfigWrite} &quot;$INSTDIR\system\application\config\database.php&quot; &quot;$db['default']['database'] = &quot; '&quot;$4&quot;' ${TEMP3}<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;SEC_003&quot; SEC04<br />
<br />
<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;SEC_004&quot; SEC05<br />
<br />
<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;SEC_005&quot; SEC06<br />
<br />
<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;[SEC_PATCH_FIXING]&quot; SEC07<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
  <br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section &quot;[SEC_LOG_FILE]&quot; SEC08<br />
<br />
; Shortcuts<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
     StrCpy $0 &quot;$INSTDIR\install.log&quot;<br />
<br />
     Push $0<br />
<br />
     Call DumpLog<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section -AdditionalIcons<br />
<br />
  SetOutPath $INSTDIR<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
<br />
  WriteIniStr &quot;$INSTDIR\${PRODUCT_NAME}.url&quot; &quot;InternetShortcut&quot; &quot;URL&quot; &quot;${PRODUCT_WEB_SITE}&quot;<br />
<br />
  CreateDirectory &quot;$SMPROGRAMS\$ICONS_GROUP&quot;<br />
<br />
  CreateShortCut &quot;$SMPROGRAMS\$ICONS_GROUP\Website.lnk&quot; &quot;$INSTDIR\${PRODUCT_NAME}.url&quot;<br />
<br />
  CreateShortCut &quot;$SMPROGRAMS\$ICONS_GROUP\Uninstall.lnk&quot; &quot;$INSTDIR\uninst.exe&quot;<br />
<br />
  !insertmacro MUI_STARTMENU_WRITE_END<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
Section -Post<br />
<br />
  WriteUninstaller &quot;$INSTDIR\uninst.exe&quot;<br />
<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayName&quot; &quot;$(^Name)&quot;<br />
<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;UninstallString&quot; &quot;$INSTDIR\uninst.exe&quot;<br />
<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayVersion&quot; &quot;${PRODUCT_VERSION}&quot;<br />
<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;URLInfoAbout&quot; &quot;${PRODUCT_WEB_SITE}&quot;<br />
<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;Publisher&quot; &quot;${PRODUCT_PUBLISHER}&quot;<br />
<br />
SectionEnd<br />
<br />
<br />
<br />
; Section descriptions<br />
<br />
!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC01} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC02} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC03} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC04} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC05} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC06} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC07} &quot;&quot;<br />
<br />
  !insertmacro MUI_DESCRIPTION_TEXT ${SEC08} &quot;Log File is Generated and Customer can view the file for complete installation process&quot;<br />
<br />
!insertmacro MUI_FUNCTION_DESCRIPTION_END<br />
<br />
<br />
<br />
#-------------------- Function which initializes------------------------------#<br />
<br />
#------ all the necessary config files specifiedby the user ------------------#<br />
<br />
Function .onInit<br />
<br />
  StrCpy $2 0<br />
<br />
  InitPluginsDir<br />
<br />
  ;File /oname=$PLUGINSDIR\up.ini &quot;up.ini&quot;<br />
<br />
  File /oname=$PLUGINSDIR\db_select.ini &quot;db_select.ini&quot;<br />
<br />
  File /oname=$PLUGINSDIR\test.ini &quot;test.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
#--------------------End of the Functon Init----------------------------------#<br />
<br />
<br />
<br />
#----------------------------Function to Select Database----------------------#<br />
<br />
Function Select_DataBase<br />
<br />
  ;Display the InstallOptions dialog<br />
<br />
  Push ${TEMP2}<br />
<br />
     InstallOptions::dialog &quot;$PLUGINSDIR\db_select.ini&quot;<br />
<br />
     again: InstallOptions::dialog &quot;$PLUGINSDIR\test.ini&quot;<br />
<br />
     Pop ${TEMP2}<br />
<br />
  StrCmp ${TEMP2} &quot;success&quot; 0 continue<br />
<br />
  ReadINIStr $0 &quot;$PLUGINSDIR\db_select.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
<br />
  continue: Pop ${TEMP2}<br />
<br />
  Return<br />
<br />
FunctionEnd<br />
<br />
#----------------------------End of the Function------------------------------#<br />
<br />
<br />
<br />
#---------------------------Function to create custom facilityname------------#<br />
<br />
;Function txt_box<br />
<br />
;       MessageBox MB_OK &quot;Hi&quot;<br />
<br />
;FunctionEnd<br />
<br />
#----------------------------End of the Function------------------------------#<br />
<br />
<br />
<br />
#-----------------------------Enter Username and Password Function -----------#<br />
<br />
/*Function EnterUsername_Password<br />
<br />
  ;Display the InstallOptions dialog<br />
<br />
  Push ${TEMP1}<br />
<br />
    again: InstallOptions::dialog &quot;$PLUGINSDIR\up.ini&quot;<br />
<br />
    Pop ${TEMP1}<br />
<br />
<br />
<br />
  StrCmp ${TEMP1} &quot;success&quot; 0 continue<br />
<br />
  ReadINIStr $0 &quot;$PLUGINSDIR\up.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\up.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
<br />
<br />
<br />
  StrCmp $0 &quot;user1&quot; 0 +2<br />
<br />
    StrCmp $1 &quot;user1 password&quot; continue wrong<br />
<br />
  StrCmp $0 &quot;user2&quot; 0 +2<br />
<br />
    StrCmp $1 &quot;user2 password&quot; continue wrong<br />
<br />
  StrCmp $0 &quot;user3&quot; 0 +2<br />
<br />
    StrCmp $1 &quot;user3 password&quot; continue wrong<br />
<br />
<br />
<br />
  wrong:<br />
<br />
    IntOp $2 $2 + 1<br />
<br />
	StrCmp $2 3 kill<br />
<br />
    MessageBox MB_OK|MB_ICONSTOP &quot;Wrong user name and password, try again&quot;<br />
<br />
    Goto again<br />
<br />
<br />
<br />
  continue: Pop ${TEMP1}<br />
<br />
  Return<br />
<br />
<br />
<br />
  kill: MessageBox MB_OK|MB_ICONSTOP &quot;3 times wrong, bye!&quot;<br />
<br />
  Quit<br />
<br />
FunctionEnd*/<br />
<br />
#------------------------------End of Function------------------------------------#<br />
<br />
<br />
<br />
<br />
<br />
#----------------------------------Function DumpLog Start-------------------------#<br />
<br />
Function DumpLog<br />
<br />
  Exch $5<br />
<br />
  Push $0<br />
<br />
  Push $1<br />
<br />
  Push $2<br />
<br />
  Push $3<br />
<br />
  Push $4<br />
<br />
  Push $6<br />
<br />
<br />
<br />
  FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
<br />
  GetDlgItem $0 $0 1016<br />
<br />
  StrCmp $0 0 exit<br />
<br />
  FileOpen $5 $5 &quot;w&quot;<br />
<br />
  StrCmp $5 &quot;&quot; exit<br />
<br />
    SendMessage $0 ${LVM_GETITEMCOUNT} 0 0 $6<br />
<br />
    System::Alloc ${NSIS_MAX_STRLEN}<br />
<br />
    Pop $3<br />
<br />
    StrCpy $2 0<br />
<br />
    System::Call &quot;*(i, i, i, i, i, i, i, i, i) i \<br />
<br />
      (0, 0, 0, 0, 0, r3, ${NSIS_MAX_STRLEN}) .r1&quot;<br />
<br />
    loop: StrCmp $2 $6 done<br />
<br />
      System::Call &quot;User32::SendMessageA(i, i, i, i) i \<br />
<br />
        ($0, ${LVM_GETITEMTEXT}, $2, r1)&quot;<br />
<br />
      System::Call &quot;*$3(&amp;t${NSIS_MAX_STRLEN} .r4)&quot;<br />
<br />
      FileWrite $5 &quot;$4$\r$\n&quot;<br />
<br />
      IntOp $2 $2 + 1<br />
<br />
      Goto loop<br />
<br />
    done:<br />
<br />
      FileClose $5<br />
<br />
      System::Free $1<br />
<br />
      System::Free $3<br />
<br />
  exit:<br />
<br />
    Pop $6<br />
<br />
    Pop $4<br />
<br />
    Pop $3<br />
<br />
    Pop $2<br />
<br />
    Pop $1<br />
<br />
    Pop $0<br />
<br />
    Exch $5<br />
<br />
FunctionEnd<br />
<br />
#----------------------------------Function DumpLog End-------------------------#<br />
<br />
<br />
<br />
Function un.onUninstSuccess<br />
<br />
  HideWindow<br />
<br />
  MessageBox MB_ICONINFORMATION|MB_OK &quot;$(^Name) was successfully removed from your computer.&quot;<br />
<br />
FunctionEnd<br />
<br />
<br />
<br />
Function un.onInit<br />
<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Are you sure you want to completely remove $(^Name) and all of its components?&quot; IDYES +2<br />
<br />
  Abort<br />
<br />
FunctionEnd<br />
<br />
<br />
<br />
Section Uninstall<br />
<br />
  !insertmacro MUI_STARTMENU_GETFOLDER &quot;Application&quot; $ICONS_GROUP<br />
<br />
  Delete &quot;$INSTDIR\${PRODUCT_NAME}.url&quot;<br />
<br />
  Delete &quot;$INSTDIR\uninst.exe&quot;<br />
<br />
  Delete &quot;$INSTDIR\install.log&quot;<br />
<br />
<br />
<br />
  Delete &quot;$SMPROGRAMS\$ICONS_GROUP\Uninstall.lnk&quot;<br />
<br />
  Delete &quot;$SMPROGRAMS\$ICONS_GROUP\Website.lnk&quot;<br />
<br />
<br />
<br />
  RMDir /REBOOTOK &quot;$SMPROGRAMS\$ICONS_GROUP&quot;<br />
<br />
  RmDir /REBOOTOK $INSTDIR<br />
<br />
  <br />
<br />
  DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot;<br />
<br />
  SetAutoClose true<br />
<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">10th March 2009, 09:10</div></div><div class="posttext">if you want that text box in the next page, then you should<br />
<br />
1. check whether the user selected a database in the database selection's leave function (your current function is pretty messy) and<br />
2. change the state of a variable based on that.<br />
3. Then in your text box page's create function, check the state of that variable<br />
4. call Abort if the variable indicates that the user picked a database, making the installer skip that page.<br />
<br />
<br />
var db_picked<br />
<br />
Page custom Select_DataBase Select_DataBase_leave<br />
Page custom txt_box<br />
<br />
...<br />
Function Select_DataBase_leave<br />
ReadINIStr $0 &quot;$PLUGINSDIR\db_select.ini&quot; &quot;DropDownFieldNUmber&quot; &quot;State&quot;<br />
${If} $0 == 0 ; no selection?<br />
  StrCpy $db_picked 0<br />
${Else}<br />
  StrCpy $db_picked 1<br />
${EndIf}<br />
FunctionEnd <br />
<br />
Function txt_box<br />
${If} $db_picked == 1<br />
  Abort<br />
${EndIf}<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">subthka</div><div class="date">11th March 2009, 13:19</div></div><div class="posttext">Hi <br />
<br />
First of all thank you for your reply to my post.<br />
<br />
Actually i tried your code and checked but still i am unable to get. <br />
<br />
I attached my code please go through that and help me out.<br />
and even i am trying in another way using nsDialog instead of using ini files.even i attached that code also <br />
<br />
Please help me out regarding this.<br />
<br />
Advance Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">11th March 2009, 14:53</div></div><div class="posttext">!include &quot;winmessages.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
!include &quot;nsDialogs.nsh&quot;<br />
<br />
Outfile &quot;test.exe&quot;<br />
<br />
var dialog<br />
var hwnd<br />
var null<br />
<br />
var db_name<br />
<br />
Page custom db_select<br />
Page custom enter_db<br />
Page custom nextpage<br />
<br />
Function db_select<br />
	nsDialogs::Create 1018<br />
		Pop $dialog<br />
<br />
	${NSD_CreateDroplist} 0 0 100% 100% &quot;&quot;<br />
	    Pop $hwnd<br />
		SendMessage $hwnd ${CB_ADDSTRING} 0 &quot;STR:&quot;<br />
		SendMessage $hwnd ${CB_ADDSTRING} 0 &quot;STR:A&quot;<br />
		SendMessage $hwnd ${CB_ADDSTRING} 0 &quot;STR:B&quot;<br />
		SendMessage $hwnd ${CB_ADDSTRING} 0 &quot;STR:C&quot;<br />
		SendMessage $hwnd ${CB_ADDSTRING} 0 &quot;STR:D&quot;<br />
		${NSD_OnChange} $hwnd db_select.onchange<br />
		<br />
	${If} $db_name != &quot;&quot;<br />
		SendMessage $hwnd ${CB_SELECTSTRING} -1 &quot;STR:$db_name&quot;<br />
	${EndIf}<br />
	nsDialogs::Show<br />
FunctionEnd<br />
Function db_select.onchange<br />
	Pop $hwnd<br />
	${NSD_GetText} $hwnd $db_name<br />
FunctionEnd<br />
<br />
Function enter_db<br />
	${If} $db_name != &quot;&quot;<br />
	    Abort<br />
	${EndIf}<br />
	nsDialogs::Create 1018<br />
		Pop $dialog<br />
	<br />
	${NSD_CreateText} 0 0 100% 8% &quot;enter db name manually&quot;<br />
	    Pop $hwnd<br />
	    ${NSD_OnChange} $hwnd enter_db.onChange<br />
	    <br />
	nsDialogs::Show<br />
FunctionEnd<br />
Function enter_db.onChange<br />
	Pop $hwnd<br />
	${NSD_GetText} $hwnd $db_name<br />
FunctionEnd<br />
<br />
Function nextpage<br />
	nsDialogs::Create 1018<br />
		Pop $dialog<br />
	${NSD_CreateLabel} 0 0 100% 8% &quot;DB chosen: $db_name&quot;<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
Section &quot;&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">subthka</div><div class="date">12th March 2009, 06:31</div></div><div class="posttext">Hi <br />
<br />
I am very much thankful to you.. thats really amazing..i got the right code what i am expecting.its working fine..<br />
<br />
Thank you once again for helping me:) <br />
<br />
:winamp:nsis is just rocking.. cool feature.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>