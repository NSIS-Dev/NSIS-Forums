<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom page is not displayed in installer, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom page is not displayed in installer NSIS Discussion" />
	
	<title> Custom page is not displayed in installer [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom page is not displayed in installer</div>
<hr />
<div class="pda"><a href="t-270062.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270062">Custom page is not displayed in installer</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kraza</div><div class="date">24th April 2007, 01:43</div></div><div class="posttext">Hello,<br />
<br />
I am trying to display a custom page in my installer.  It is reading the ini file using a path in the script.  Everything works fine when I run the installer from the same folder as the script (meaning all the referenced paths are correct from that folder).<br />
<br />
As soon as I move my installer to a different location, say desktop and run it, I can view all the pages, display my license (that was a relative path too) but my custom page is not displayed.  The installer hangs and doesn't read my ini file.<br />
<br />
Interesting enough, if I copy all my folders from my orig location to desktop (matching the relative path to ini from desktop now) it starts working.<br />
<br />
Shouldn't my compiler comprress the ini file into the output .exe at the time of compiling?<br />
Seems like the exe is not able to find the ini here.<br />
<br />
Any help would be greatly appreciated.<br />
Thanks,<br />
Kaz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">24th April 2007, 04:20</div></div><div class="posttext">It's hard to tell w/o seeing your code, but if I had to guess, you are not extracting the page file in the correct place (or maybe not at all.)<br />
<br />
If you are using the classic interface, use this in your .onInit function<br />
<br />
Init PluginsDir<br />
File &quot;/oname=$PLUGINSDIR\yourpagefile.ini&quot; &quot;yourpagefile.ini&quot;<br />
...<br />
<br />
and this in your page's show function:<br />
<br />
InstallOptions::dialog &quot;$PLUGINSDIR\yourpagefile.ini&quot;<br />
...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kraza</div><div class="date">24th April 2007, 19:22</div></div><div class="posttext">Thanks a lot for your response!!<br />
<br />
Here is my relevant code.  I'm kinda using both MUI and Old style (had difficulty with MUI only..)<br />
<br />
ReserveFile &quot;..\V1_final_code\hostinput.ini&quot;<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
...<br />
...<br />
<br />
;custom input page<br />
   LangString HOSTPORT_TITLE ${LANG_ENGLISH} &quot;Enter your  Host name and Port #.&quot;<br />
   LangString HOSTPORT_SUBTITLE ${LANG_ENGLISH} &quot; &quot;<br />
   Page custom HostPortPage<br />
<br />
Function .onInit<br />
;my input ini file<br />
;!insertmacro MUI_INSTALLOPTIONS_EXTRACT_AS &quot;hostinput.ini&quot; &quot;HostPort&quot;<br />
<br />
  InitPluginsDir<br />
  File /oname=$PLUGINSDIR\hostinput.ini &quot;..\V1_final_code\hostinput.ini&quot;<br />
<br />
FunctionEnd<br />
<br />
Function HostPortPage<br />
<br />
   !insertmacro MUI_HEADER_TEXT &quot;$(HostPort_TITLE)&quot; &quot;$(HostPort_SUBTITLE)&quot;<br />
<br />
<br />
 Push ${TEMP1}<br />
<br />
    again:<br />
    InstallOptions::dialog &quot;..\V1_final_code\hostinput.ini&quot;<br />
    Pop ${TEMP1}<br />
<br />
<br />
<br />
  ReadINIStr ${Hostname} &quot;..\V1_final_code\hostinput.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
<br />
  ReadINIStr ${Port} &quot;..\V1_final_code\hostinput.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
...<br />
...<br />
<br />
ty!!<br />
Kaz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kraza</div><div class="date">24th April 2007, 19:57</div></div><div class="posttext">ah.. nevermind... I got it.<br />
<br />
Had to do:<br />
 <br />
InstallOptions::dialog &quot;$PLUGINSDIR\hostinput.ini&quot; instead of <br />
my relative path.<br />
<br />
Thanks for the help!!<br />
Kaz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">24th April 2007, 20:50</div></div><div class="posttext">This works, but a better way would be to use the included MUI macros.<br />
<br />
According to the MUI docs (http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html):<br />
<br />
To include a custom page, use MUI_INSTALLOPTIONS_EXTRACT.<br />
<br />
To display a custom page use MUI_INSTALLOPTIONS_DISPLAY.<br />
<br />
And if you want a return value from the page, you can use MUI_INSTALLOPTIONS_DISPLAY_RETURN or MUI_INSTALLOPTIONS_SHOW_RETURN  (The return value is set to the stack and you can then pop from there.)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>