<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Variable in a string, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Variable in a string NSIS Discussion" />
	
	<title> Variable in a string [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Variable in a string</div>
<hr />
<div class="pda"><a href="t-321519.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=321519">Variable in a string</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">9th August 2010, 16:56</div></div><div class="posttext">Hello !<br />
<br />
<br />
I search how to put a variable in a string please.<br />
<br />
I explain, I have this:<br />
<br />
Var           EtudeName<br />
ReadINIStr $R1 			$DESKTOP\Data.ini &quot;Data&quot; &quot;EtudeName&quot;<br />
StrCpy      $EtudeName 	$R1<br />
;----Here I have $EtudeName == Tomcat 6.0----<br />
File           &quot;C:\Program Files\Admin builder\$EtudeName.zip&quot;<br />
<br />
But it don't work !<br />
The command File said that it doesn't find the file &quot;C:\Program Files\Admin builder\$EtudeName.zip&quot;<br />
It is normal because I want to have &quot;C:\Program Files\Admin builder\Tomcat 6.0.zip&quot;<br />
<br />
I tried with '$EtudeName' or with &quot;$EtudeName&quot;, ... I tried everything but...<br />
<br />
Please help... =(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th August 2010, 18:42</div></div><div class="posttext">You're confusing compile time and run time. The compiler needs to know the file path at compile time to compress the file therefore you can't give it a run time variable. Instead you want to use LogicLib and selectively call the correct File instruction depending on the value of $EtudeName.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">9th August 2010, 20:20</div></div><div class="posttext">(sorry for my english I'm French,I posted this question on Todae but no response... =( )<br />
<br />
Oooooooooh thanks for your answer !!! =)<br />
<br />
So I have to use the LogicLib ?<br />
<br />
I don't really understand all I'm sorry...<br />
<br />
I have to do what with the LogicLib ? How can I do that I want to do ?<br />
<br />
I don't want the code but just can you explain me a little bit more please ?<br />
<br />
I'm in Internship in an entreprise (In French &quot;stage en entreprise&quot;^^) and I have my deadline the 19th August... :/<br />
<br />
The C language miss me... snif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">10th August 2010, 05:42</div></div><div class="posttext">As he said, the File command is evaluated at compile time (that means when the installer is being compiled). I think you want to read the INI at the *user's* computer, so you cannot do different File commands for different INI values (obviously).<br />
<br />
ReadINIStr $EtudeName $DESKTOP\Data.ini &quot;Data&quot; &quot;EtudeName&quot;<br />
${If} $EtudeName == &quot;Tomcat 6.0&quot;<br />
  File &quot;C:\Program Files\Admin builder\Tomcat 6.0.zip&quot;<br />
${ElseIf} $EtudeName == &quot;Tomcat 5.0&quot;<br />
  File &quot;C:\Program Files\Admin builder\Tomcat 5.0.zip&quot;<br />
${ElseIf} $EtudeName == &quot;Tomcat 5.1&quot;<br />
  File &quot;C:\Program Files\Admin builder\Tomcat 5.1.zip&quot;<br />
(etc, etc)<br />
{$EndIf}<br />
<br />
Note: Because you want to install a different file for every value in that ini, your installer will probably end up being rather big.<br />
<br />
(If you want to read the INI on the *compiler's* computer, then you cannot use ReadINIStr because you have to use compile-time commands. There is no standard compiletime command to read INI strings. You can use a vbscript, or an exe file you created yourself, or whatever.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 08:49</div></div><div class="posttext">Ah OK !<br />
<br />
I will try something, Thanks for help !<br />
<br />
If the thing I want to do don't works I will be back here =)<br />
<br />
Thanks !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 10:24</div></div><div class="posttext">Now it's okay ! I don't really use your &quot;method&quot; but now it's work !<br />
<br />
it's really hard to tell you how I did it in English but in any case it works great !<br />
<br />
Thanks for your help !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 10:47</div></div><div class="posttext">And just a little last thing.<br />
<br />
I have a full path:<br />
<br />
&quot;C:\Documents and Settings\arelliaud\Bureau\Installeur\Install\Java\JRE.exe&quot;<br />
<br />
And, in my script I want to utilise &quot;File&quot;<br />
<br />
So can I do File /r &quot;C:\Documents and Settings\arelliaud\Bureau\Installeur\Install\Java\JRE.exe&quot; ?<br />
<br />
I don't think so... It do really strange things in compil time !<br />
<br />
And I have no choice, I have to put the full path like this =(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 11:10</div></div><div class="posttext">Nooooo It's okay !<br />
<br />
Thanks for all ! =)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 15:06</div></div><div class="posttext">Hellow !<br />
<br />
I've already a new last question pleaaaase =(<br />
<br />
If my boolean is at 1 I have to compil with &quot;File &quot;${FILEJAVA}&quot;&quot;<br />
<br />
But if my boolean is at 0 I don't want to compil with &quot;File &quot;${FILEJAVA}&quot;&quot;  because if my boolean is at 0, ${FILEJAVA} doesn't exist ! So: error.<br />
<br />
How can I do please ? =(<br />
<br />
<br />
ReadINIStr 	$Bool_Java 		$PLUGINSDIR\SelectElements.ini     &quot;Field 9&quot;  &quot;State&quot;<br />
<br />
;With a manipulation I put the value of $Bool_Java in the !define BOOL_JAVA<br />
;There's no problem with this ;)<br />
<br />
!define BOOL_JAVA 0<br />
<br />
Section &quot;Java&quot; 					Java_JRE<br />
<br />
!if ${BOOL_JAVA} == 1<br />
Goto begin<br />
!else<br />
Goto end<br />
!endif<br />
<br />
begin:<br />
SetOutPath	$TEMP<br />
File		&quot;${FILEJAVA}&quot;<br />
<br />
; Installation JRE<br />
	nsExec::ExecToStack '$TEMP\${JAVA}'<br />
<br />
end:<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th August 2010, 15:37</div></div><div class="posttext">Again you're confusing compile time and run time. Everything beginning with a ! are compile time instructions. Read the docs. Just wrap the entire section in an !if/!endif.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Noude</div><div class="date">10th August 2010, 15:50</div></div><div class="posttext">Ow yeeeeeeeeeees ! It's working ! =)<br />
<br />
Thank you ! <br />
<br />
I read the doc but I've found a lot of things but not this... :(<br />
<br />
Thx a lot !</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>