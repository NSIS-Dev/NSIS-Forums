<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Warning message when unselecting option, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Warning message when unselecting option NSIS Discussion" />
	
	<title> Warning message when unselecting option [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Warning message when unselecting option</div>
<hr />
<div class="pda"><a href="t-215920.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=215920">Warning message when unselecting option</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">13th May 2005, 17:12</div></div><div class="posttext">Hi:<br />
<br />
Here what i'd like to do:<br />
<br />
On the components page, there is an option that whenever the user unselect it, i want to display a warning message warning the user about the importance of that package. So how can i do that?? i've been browsing around and i couln't find anything that let me check if a component has been unselected or not...<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th May 2005, 17:17</div></div><div class="posttext">!include Sections.nsh<br />
<br />
Section &quot;A section&quot; SECID<br />
SectionEnd<br />
<br />
Function .onSelChange<br />
<br />
SectionGetFlags ${SECID} $R0<br />
IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
StrCmp $R0 ${SF_SELECTED} +2<br />
 MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Unchecked #${SECID}!&quot;<br />
<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">13th May 2005, 20:47</div></div><div class="posttext">Afrow UK, this code shows the message box whenever the section is not checked, even when checking/unchecking another section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th May 2005, 21:21</div></div><div class="posttext">Sorry, fixed:<br />
<br />
!include Sections.nsh<br />
<br />
Section &quot;A section&quot; SECID<br />
SectionEnd<br />
<br />
Section &quot;A sectioaan&quot; SECIDa<br />
SectionEnd<br />
<br />
Var SectionVar<br />
<br />
Function .onInit<br />
 StrCpy $SectionVar ${SF_SELECTED}<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
<br />
SectionGetFlags ${SECID} $R0<br />
IntOp $R0 $R0 &amp; ${SF_SELECTED}<br />
<br />
StrCmp $R0 $SectionVar +4<br />
StrCpy $SectionVar $R0<br />
<br />
StrCmp $R0 ${SF_SELECTED} +2<br />
 MessageBox MB_OK|MB_ICONEXCLAMATION &quot;Unchecked #${SECID}!&quot;<br />
<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">restools</div><div class="date">15th May 2005, 18:09</div></div><div class="posttext">try this script~~<br />
!include &quot;MUI.nsh&quot;<br />
<br />
Name &quot;test&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
!insertmacro MUI_LANGUAGE &quot;english&quot;<br />
<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
Var cbState<br />
<br />
Function .onInit<br />
  IntFmt $cbState &quot;%d&quot; 1<br />
FunctionEnd<br />
<br />
Section &quot;section a&quot; SEC1<br />
SectionEnd<br />
<br />
Section &quot;section b&quot; SEC2<br />
SectionEnd<br />
<br />
Function .onSelChange<br />
  Push $0<br />
    SectionGetFlags SEC1 $0<br />
    IntCmp $0 $cbState +4<br />
      IntFmt $cbState &quot;%d&quot; $0<br />
      IntCmp $0 1 +2<br />
        MessageBox MB_OK|MB_ICONEXCLAMATION &quot;SEC1 Unchecked&quot;<br />
  Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">15th May 2005, 19:24</div></div><div class="posttext">You cannot do that way. Sometimes, the SF_CHECKED flag has other flags with it, and that wouldn't work. An hexadecimal number allows setting flags without interferance from the existance of other flags. That's why the number returned by SectionGetFlags is an  hexadecimal number.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">restools</div><div class="date">16th May 2005, 05:09</div></div><div class="posttext">????<br />
SF_SELECTED = 1<br />
<br />
;--------------------------------<br />
<br />
; Generic section defines<br />
<br />
!define SF_SELECTED   1              ; &lt;&lt;&lt;----------  ????????<br />
!define SF_SECGRP     2<br />
!define SF_SUBSEC     2  # deprecated<br />
!define SF_SECGRPEND  4<br />
!define SF_SUBSECEND  4  # deprecated<br />
!define SF_BOLD       8<br />
!define SF_RO         16<br />
!define SF_EXPAND     32<br />
!define SF_PSELECTED  64  # internal<br />
!define SF_TOGGLED    128 # internal<br />
!define SF_NAMECHG    256 # internal<br />
<br />
!define SECTION_OFF   0xFFFFFFFE<br />
<br />
;--------------------------------</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">16th May 2005, 06:59</div></div><div class="posttext">SF_SELECTED, whatever...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">restools</div><div class="date">16th May 2005, 11:35</div></div><div class="posttext">oh~ I see your point.<br />
!include &quot;MUI.nsh&quot;<br />
!include &quot;Sections.nsh&quot;<br />
<br />
Name &quot;test&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_INSTFILES<br />
<br />
!insertmacro MUI_LANGUAGE &quot;english&quot;<br />
<br />
!insertmacro MUI_RESERVEFILE_INSTALLOPTIONS<br />
<br />
Var cbState<br />
<br />
Function .onInit<br />
  IntFmt $cbState &quot;%x&quot; ${SF_SELECTED}<br />
FunctionEnd<br />
<br />
Section &quot;section a&quot; SEC1<br />
SectionEnd<br />
<br />
Section &quot;section b&quot; SEC2<br />
SectionEnd<br />
<br />
Function .onSelChange<br />
  Push $0<br />
    SectionGetFlags SEC1 $0<br />
    IntOp $0 $0 &amp; ${SF_SELECTED}     # &lt;&lt;&lt;&lt;-------- add<br />
    IntCmp $0 $cbState +4<br />
      IntFmt $cbState &quot;%d&quot; $0<br />
      IntCmp $0 ${SF_SELECTED} +2<br />
        MessageBox MB_OK|MB_ICONEXCLAMATION &quot;SEC1 Unchecked&quot;<br />
  Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">18th May 2005, 20:13</div></div><div class="posttext">Thanks to everyone who helped out with this, now i have one more question...could someone explain me the reason for all those &quot;magic numbers&quot; 2,4, etc etc, i dont know why you guys add sometimes 2 or 4...<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">playwin2</div><div class="date">18th May 2005, 21:24</div></div><div class="posttext">Those 4 and 2 are jumps.<br />
<br />
For example:<br />
IntCmp $0 $cbState +4 <br />
<br />
-- this line means that if the vars. you are comp. is same then goto line 4.(i.e. skip the next 3 lines.)<br />
<br />
See the help file for relative jumps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">18th May 2005, 22:17</div></div><div class="posttext">oh ok, I'm sorry if i sound dumb but..how do i make it so the message will be displayed when unselection the second section?? i tried changing sec1 for sec2, didnt work.<br />
<br />
thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">19th May 2005, 03:48</div></div><div class="posttext">Something else is wrong in resttools' code. This line is wrong:<br />
SectionGetFlags SEC1 $0<br />
and it should be:<br />
SectionGetFlags ${SEC1} $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th May 2005, 18:52</div></div><div class="posttext">Just use my code. I've tested it :p<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">slickgoonie</div><div class="date">27th May 2005, 19:17</div></div><div class="posttext">Thanks it works!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>