<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" newAdvSplash problem, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  newAdvSplash problem NSIS Discussion" />
	
	<title> newAdvSplash problem [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  newAdvSplash problem</div>
<hr />
<div class="pda"><a href="t-269486.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=269486">newAdvSplash problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">arfgh</div><div class="date">13th April 2007, 16:46</div></div><div class="posttext">Banner::show /NOUNLOAD 'blahblah'<br />
IntOp $0 $0 + 1<br />
Sleep 10<br />
StrCmp $0 100 0 -2<br />
Banner::destroy<br />
newadvsplash::show /NOUNLOAD 1000 500 500 -1 /BANNER /PASSIVE 'a.bmp'<br />
Pop $0<br />
<br />
<br />
i have this code. And it works. But a so strange anomaly appears in the image. Yes, the image make its effect but only in the dekstop. If i have some window opened, the image is not visible.<br />
<br />
If i remove the banner, then i can see the image over all.<br />
<br />
How can i fix this problem ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">13th April 2007, 17:40</div></div><div class="posttext">Remove /passive key, this should make AdvSplash window topmost after application have lost focus after banner was destroyed. And I guess /nounload has no effect for Banner::show.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arfgh</div><div class="date">14th April 2007, 02:43</div></div><div class="posttext">yes, this works.<br />
but now i have other problem with the banner. Look this code<br />
y use 2 banners and 1 newAdvSplash<br />
<br />
<br />
Banner::show /NOUNLOAD 'blah'<br />
IntOp $0 $0 + 1<br />
Sleep 10<br />
StrCmp $0 100 0 -2<br />
Banner::destroy<br />
newadvsplash::show /NOUNLOAD 2250 500 500 -1 /BANNER 'a.bmp'<br />
Pop $0<br />
Banner::show /NOUNLOAD 'Ready'<br />
IntOp $0 $0 + 1<br />
Sleep 10<br />
StrCmp $0 100 0 -2<br />
Banner::destroy<br />
newadvsplash::wait<br />
<br />
<br />
The problem is, the second banner i want to use, not appear, onyl on the taskbar. But it appear in the middle of the screen if i use the /PASSIVE on the newAdvSplash<br />
<br />
is so strange</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th April 2007, 05:56</div></div><div class="posttext">Sorry, /nounload required for modeless nsis banner. Second banner is hidden by topmost advsplash window if it is not /passive. Another problem is how Windows moves focus to other application if main (the only) window was destroyed (first banner). Try to set banner position outside advsplash rect using System plug-in &amp; MoveWindow or SetWindowPos calls.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arfgh</div><div class="date">14th April 2007, 13:18</div></div><div class="posttext">You mean is possible to move this banners to other location ?<br />
how ??</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th April 2007, 13:52</div></div><div class="posttext">Why not? :) Archive search http://nsis.sourceforge.net/Special:Search?search=SetWindowPos&amp;fulltext=Search<br />
or just...<br />
Banner::getWindow /NOUNLOAD<br />
Pop $0<br />
System::Call &quot;user32::MoveWindow(i r0, i 0, i 0, i 200, i 100) i r2&quot;<br />
...Looks a bit ugly if banner first appear in the center and jumps to corner after this only, but a bit animation can solve the problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arfgh</div><div class="date">14th April 2007, 14:14</div></div><div class="posttext">System::Call &quot;user32::MoveWindow(i r0, i 0, i 0, i 200, i 100) i r2&quot;<br />
<br />
I know to use this api, but i not understand that 'i'<br />
<br />
i r0 = the handle of the window. Where you get that ?<br />
and the other 'i' on the position and size ?<br />
<br />
Is possible to get the current position to a var and then apply this value + 100 pixels for example ?<br />
<br />
<br />
thx<br />
<br />
<br />
<br />
EDIT:  maybe the trick to fix this problem is use the SetWindowLong Api to make the banner appears in front of the image. But i dont knwo how to do that on nsis :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th April 2007, 16:37</div></div><div class="posttext">Use IntOp to update int value. <br />
'i' described in Start-&gt;Programs-&gt;NSIS-&gt;Contrib-&gt;System Readme<br />
Link in my previous post describes how to get current position and window size.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">arfgh</div><div class="date">14th April 2007, 17:07</div></div><div class="posttext">but Takhir  maybe the trick to fix this problem is use the SetWindowLong Api to make the banner appears in front of the image. But i dont knwo how to do that on nsis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">14th April 2007, 20:38</div></div><div class="posttext">Forum search can help you in most cases, for SetWindowLong I see http://forums.winamp.com/showthread.php?s=&amp;threadid=259432&amp;highlight=SetWindowLong (while I guess this is usefull on the dialog init step only, but this is available in the plug-in source code only). Attached script I wrote right now, looks funny ;)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>