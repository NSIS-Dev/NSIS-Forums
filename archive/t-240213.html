<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS and Touch, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS and Touch NSIS Discussion" />
	
	<title> NSIS and Touch [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS and Touch</div>
<hr />
<div class="pda"><a href="t-240213.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=240213">NSIS and Touch</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jaswolf</div><div class="date">7th March 2006, 21:51</div></div><div class="posttext">I'm a novice at this and am trying touch a single file when executing the installer I'm creating using NSIS.  I want this single file to show the install date as the &quot;last modified&quot; so that I know when it was installed (I don't want to use SetDateSave because that changes the date on all the files).  Has anyone had success doing this sort of thing?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th March 2006, 21:59</div></div><div class="posttext">You can open it and close it right away with FileOpen and FileClose.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">8th March 2006, 02:20</div></div><div class="posttext">You can open it and close it right away with FileOpen and FileClose.<br />
<br />
Make sure to make the open mode &quot;a&quot; (as opposed to &quot;r&quot; or &quot;w&quot;) because &quot;r&quot; will only open the file for reading, and &quot;w&quot; will wipe the file clean.<br />
<br />
FileOpen $0 &quot;$INSTDIR\replace_with_file.name&quot; a<br />
FileClose $0<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jaswolf</div><div class="date">8th March 2006, 17:58</div></div><div class="posttext">I try putting that in a fuction and get a 'install function &quot;TouchFile&quot; not referenced - zeroing code (0-4) out<br />
' error.<br />
<br />
Function TouchFile<br />
  FileOpen $0 $INSTDIR\test.txt a<br />
  FileClose $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">8th March 2006, 19:20</div></div><div class="posttext">Here's what you're looking for:<br />
<br />
Function TouchFile<br />
  Exch $0<br />
  Push $1<br />
  FileOpen $1 $0 a<br />
  FileClose $1<br />
  Pop $1<br />
  Exch $0<br />
FunctionEnd<br />
<br />
...and later, in your sections...<br />
<br />
Push &quot;$INSTDIR\text.txt&quot;<br />
Call TouchFile<br />
<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jamyn</div><div class="date">9th March 2006, 08:31</div></div><div class="posttext">Someone has already written a pretty nice function for &quot;touch&quot;. This (http://nsis.sourceforge.net/Touch_File) might be interesting to you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jaswolf</div><div class="date">9th March 2006, 22:28</div></div><div class="posttext">Had tried that Touch function before w/o success, but went back an made it work pretty well with using under a &quot;Function .onGUIEnd&quot; section.  Thanks for all the input.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>