<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Finding Steam ID, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Finding Steam ID NSIS Discussion" />
	
	<title> Finding Steam ID [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Finding Steam ID</div>
<hr />
<div class="pda"><a href="t-327767.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=327767">Finding Steam ID</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">23rd February 2011, 21:41</div></div><div class="posttext">Hello,<br />
I am currently trying to use this code to find the steam ID:<br />
Section<br />
   ClearErrors<br />
   FileOpen $0 &quot;$PROGRAMFILES\Steam\steam.log&quot; r<br />
   ${Do}<br />
      FileRead $0 $1 <br />
      ${If} ${Errors}<br />
         ${ExitDo}<br />
      ${EndIf}<br />
      StrCpy $2 &quot;$2$1&quot;<br />
   ${Loop}<br />
   FileClose $0<br />
   ; contents should now be in $2:<br />
   MessageBox MB_OK &quot;Contents: $\r$2&quot;<br />
;${StrFilter} $2 &quot;31&quot; &quot;1234567890&quot; &quot;(){}.-&quot; $R0<br />
${WordFind} $2 &quot;0:1:&quot; &quot;+8&quot; $R0<br />
MessageBox MB_OK &quot;SteamID: $\r$R0&quot;<br />
SectionEnd<br />
<br />
The steam ID is contained in steam.log in the following context:<br />
CsComm        Session               Oct-11-2010  23:07:41.780  [2904]  ReconnectThread (2904) Starting<br />
CsComm        Session               Oct-11-2010  23:08:31.454  [4368]  CreateSession(xxxxx,7,347)=0 attempt 1<br />
CsComm        ConnectionPool        Oct-11-2010  23:08:31.851  [4368]  Attempting new connection 0,87.248.222.122:27030 for 0:1:55555555<br />
<br />
so you see my dilemma of trying to exclude my output to just the 55555555 after the &quot;0:1:&quot;<br />
<br />
WordFind isn't filtering or excluding anything from the string which I'd like it to.<br />
<br />
Any help would be appreciated. Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd February 2011, 23:58</div></div><div class="posttext">You can't get this from the registry?<br />
<br />
Edit: Ok it's not in there. The problem you are having here is probably due to the 1024 char limit. Why are you concatenating all the lines anyway? Just iterate through each line until you find the one that has &quot;CsComm&quot; followed by &quot;ConnectionPool&quot;.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">parasoul</div><div class="date">24th February 2011, 02:47</div></div><div class="posttext">You can't get this from the registry?<br />
<br />
Edit: Ok it's not in there. The problem you are having here is probably due to the 1024 char limit. Why are you concatenating all the lines anyway? Just iterate through each line until you find the one that has &quot;CsComm&quot; followed by &quot;ConnectionPool&quot;.<br />
<br />
Stu<br />
<br />
Can you provide an example of that? I'm not quite sure how to do that in NSIS.<br />
<br />
I came up with this:<br />
 <br />
Section<br />
   ClearErrors<br />
   FileOpen $0 &quot;$PROGRAMFILES\Steam\steam.log&quot; r<br />
   ${Do}<br />
      FileRead $0 $1 <br />
      ${If} ${Errors}<br />
         ${ExitDo}<br />
      ${EndIf}<br />
      StrCpy $2 &quot;$2$1&quot;<br />
   ${Loop}<br />
   FileClose $0<br />
   ; contents should now be in $2:<br />
   MessageBox MB_OK &quot;Contents: $\r$2&quot;<br />
;${StrFilter} $2 &quot;31&quot; &quot;1234567890&quot; &quot;(){}.-&quot; $R0<br />
${StrStr} $R0 $2 &quot;0:0:&quot;<br />
Pop $R1<br />
${If} $R1 != &quot;&quot;<br />
Goto finishsid<br />
${ElseIf} $R1 == &quot;&quot;<br />
${StrStr} $R0 $2 &quot;0:1:&quot;<br />
;$R0 = &quot;No Steam ID Found&quot;<br />
${EndIf}<br />
;${WordFind} $R0 &quot;$\n&quot; &quot;-8{&quot; $R0<br />
finishsid:<br />
FileOpen $5 &quot;$TEMP\sid.tmp&quot; w<br />
FileWrite $5 $R0<br />
FileClose $5<br />
${LineRead} &quot;$TEMP\sid.tmp&quot; &quot;1&quot; $R0<br />
MessageBox MB_OK &quot;SteamID: $\r$R0&quot;<br />
SectionEnd<br />
<br />
<br />
it's slow, but it works. There's a 90-100% chance that the steam ID will be included in the first 10 or so lines of the log, which is what the concatenated string I'm creating contains.<br />
<br />
I'd love a more optimal way to do it if it, if you have an example of what you're talking about laying around<br />
<br />
thanks Stu :up:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>