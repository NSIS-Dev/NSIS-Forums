<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Files List, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Files List NSIS Discussion" />
	
	<title> Files List [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Files List</div>
<hr />
<div class="pda"><a href="t-54791.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=54791">Files List</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">harshpmn</div><div class="date">13th July 2001, 14:34</div></div><div class="posttext">Hello,<br />
<br />
I am a newbie user. Please forgive my stupid questions.<br />
<br />
How do I go about finding out what files are packaged in my installer? My app is customized for various clients -- all dont get the same #of dlls/services/...<br />
<br />
Therefore I build only the dlls client-x needs and copy them to C:\BuildInstall\Dlls directory. In my script I use:<br />
File C:\BuildInstall\Dlls\*.*  to add all the dlls into the installer.<br />
<br />
Now, when client-y needs a different set of dlls I can simply copy them over to C:\BuildInstall\Dlls and recompile the install script to generate a new installer.<br />
<br />
The drawback is that I no longer have a list of what dlls are packaged in the installer.<br />
<br />
So, during the installation, when I want to do something specific to each dll, say, register each of them, I need to know what dlls exist on the client machine.<br />
<br />
How can I do that?<br />
<br />
Thanks,<br />
Harsh Potlapalli</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">13th July 2001, 21:27</div></div><div class="posttext">Ok, that is a pretty tall order. <br />
Try:<br />
<br />
IfFileExists &quot;$INSTDIR\12112.dll&quot; reg12112 noreg12112<br />
;other things here or you can add a 0 in place of the<br />
;reg12112 which means it goes to the next line<br />
reg12112:<br />
;Register do what you need to do<br />
noreg12112:<br />
<br />
What this does is lets you choose what you want to do for registrating the DLL. If the certain DLL exists, then you write the code for registrating it. The &quot;reg12112&quot; can be replaced by a zero so that it skips to the next line. The &quot;noreg12112&quot; is supposed to be a placer for if the person doesn't have the dll. It can also be renamed. You cannot have the same &quot;tag&quot; more than once.<br />
<br />
-Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">harshpmn</div><div class="date">16th July 2001, 06:31</div></div><div class="posttext">I guess I did not phrase my question correctly. I want to make an &quot;on-the-fly&quot; list of files being installed. More explicity, I want to make a list of dll's, services, proxies and applications as they are being copied/installed on the client machine.<br />
<br />
Then I can parse the list for specific files and then do client specific things.<br />
<br />
Thanks for your patience,<br />
Harsh Potlapalli</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">16th July 2001, 10:07</div></div><div class="posttext">Ok, I got your question. But to answer it, No. There is no program (for NSIS) like that avaliable. My Suggestion is to create an item like that, but it would be hard and would leave more instruction to the Client computer. Another suggestion is just create different &quot;packages&quot;. What that would do is install certain DLLs for Certain computers. But for the &quot;On-the-fly&quot; part. NSIS doesn't support anything like that. I have no clue what this is for, but I sorry.<br />
<br />
-Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">harshpmn</div><div class="date">16th July 2001, 15:43</div></div><div class="posttext">I can see your point about sequentially checking for the existence of specific dll's and then branching (regdll, noregdll, etc.).<br />
<br />
A work-around I am trying is:<br />
File *.dll  &lt;--- for all my regular dll's<br />
File *ps.dll &lt;--- for all my proxy-stubs<br />
File Services\*.exe &lt;--- for all my services<br />
File Apps\*.exe<br />
....<br />
<br />
Followed by <br />
RegDll *.dll &lt;--- to register all (incl. the ps) dll's.<br />
Not sure if this will work -- I think the full path name is required.<br />
<br />
How can I register my services?<br />
FooService.exe /regserver<br />
<br />
There are about a dozen services in this package. Any fast way to do this?<br />
<br />
Thanks,<br />
Harsh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">16th July 2001, 22:46</div></div><div class="posttext">I don't know. Umm, just try it in the sections, but you can try e-mailing justin about it. But this is as far as I get.<br />
<br />
Nice talking to you,<br />
Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Gonzotek</div><div class="date">17th July 2001, 15:24</div></div><div class="posttext">Use batch files, e.g.<br />
<br />
dir /l /b /On &gt; filelist.dat<br />
<br />
would be a lowercase (/l), bare (/b), sorted (/On)list of whatever was in the directory you ran it on.  You can do a DIR *.dll or whatever.  Try http://www.stu.qmw.ac.uk/primer/DOS.html for starters, then do a search on Google.  Should get you started.  To start them from NSIS you can<br />
ExecShell START batch.bat SW_SHOWMINIMIZED<br />
-=Gonzotek=-</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>