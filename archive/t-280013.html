<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Going MORE than Slightly Mad, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Going MORE than Slightly Mad NSIS Discussion" />
	
	<title> Going MORE than Slightly Mad [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Going MORE than Slightly Mad</div>
<hr />
<div class="pda"><a href="t-280013.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=280013">Going MORE than Slightly Mad</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sharkystar</div><div class="date">26th October 2007, 06:34</div></div><div class="posttext">Hi Guys<br />
<br />
Approximately 12 hours into my installer script, I now have no finger nails on my left hand (from nervous biting), and have been pulling large clumps of hair from my head for the past 2 hours.<br />
<br />
My problem is thus:<br />
I am using an HTTP POST request to a server to verify a product key. I have downloaded the PassDialog plugin which works great, except that all the examples simply end by generating a message box with what the user entered. So, I wrote a function to verify if the server response was good or bad. So far so good!<br />
<br />
If the server response is bad I simply call the custom page function to return the user back to the product key page to have another go. Well, this works the first time round, but the second attempt sends the user on to the install page. This is BAD!<br />
<br />
Can someone PLEASE explain to me how I keep this loop going until a good server response is generated?<br />
<br />
At this rate I will be down to the bone on my fingers and will have to wear a hat to work today to cover up all the bald spots....please, please HELP.<br />
<br />
NSI is attached - Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">26th October 2007, 07:41</div></div><div class="posttext">I see that you call verify function by Page Custom verify. Try to do verification in SerialPageLeave function and if verification is &quot;BAD&quot; then reload your &quot;SerialPage&quot;. Use RelGotoPage (http://nsis.sourceforge.net/Go_to_a_NSIS_page) for reloading pages.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th October 2007, 10:54</div></div><div class="posttext">To go back to the serial page, call Abort. Do NOT call the function again. Similarely, you should only use RelGotoPage (WM_NOTIFY_OUTER_NEXT) if you have no other option.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">26th October 2007, 11:02</div></div><div class="posttext">How simple! I really didn't know about this feature... :rolleyes: Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sharkystar</div><div class="date">26th October 2007, 15:41</div></div><div class="posttext">Thanks guys for clearing up the Abort vs Call issue. I will use Abort to return to the Serial Page.<br />
<br />
Pospec:<br />
Thanks for the advice about the RelGotoPage (WM_NOTIFY_OUTER_NEXT) function. I will give this a go.<br />
<br />
Stu:<br />
Can you please clarify something for me...<br />
How does the script know it should jump back to the Serial Page simply by calling Abort, and what other options are there to RelGotoPage?<br />
<br />
As far as I can tell, the program flow as it stands is thus:<br />
1 Init and Defines<br />
2 Standard Welcome Pages<br />
3 Custom Serial Pages calling custom functions<br />
4 Standard Install Pages which use the Section &quot;Install&quot;<br />
<br />
What I cannot figure out is how to keep the loop going so we stay with the custom functions until a good server response is generated. I seem to be able to do this just once, before the script jumps to the Install section.<br />
<br />
Don't get me wrong, I am an experienced programmer of over ten years, but after using NSIS for only one day, this whole program flow thing has be baffled.....<br />
<br />
Thanks again for your help chaps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sharkystar</div><div class="date">26th October 2007, 17:19</div></div><div class="posttext">Guys<br />
<br />
Thank you so much for your help!<br />
After some more learning I have now fixed my script and all is working great.<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th October 2007, 17:52</div></div><div class="posttext">Just to clarify, when Abort is called in any pages' pre function, it will jump over that page. When Abort is called in any pages' leave function it will go back to the previous page, without reloading it. As custom pages do not have pre functions, calling Abort in their show function has the same effect to skip over the page. You can also simple skip over the InstallOptions/nsDialogs/PassDialog/whatever plug-in call to skip a custom page.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pospec</div><div class="date">27th October 2007, 01:53</div></div><div class="posttext">custom pages do not have pre functions <br />
Really? I am confused if they haven't...<br />
MUI_PAGE_CUSTOMFUNCTION_PRE function<br />
MUI_PAGE_CUSTOMFUNCTION_SHOW function<br />
MUI_PAGE_CUSTOMFUNCTION_LEAVE function</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">27th October 2007, 02:09</div></div><div class="posttext">custom pages only have create and leave, but you can emulate pre and show in the create function<br />
<br />
Function MyCustomPageCreate<br />
;PRE code here<br />
!insertmacro INSTALLOPTIONS_INITDIALOG &quot;ioFile.ini&quot;<br />
Pop $HWND ;HWND of dialog<br />
;SHOW code here<br />
!insertmacro INSTALLOPTIONS_SHOW<br />
FunctionEnd<br />
<br />
Page Custom MyCustomPageCreate<br />
<br />
(If you are using modern ui, you also want to set the header text and stuff probably)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>