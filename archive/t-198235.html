<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Comparing Version numbers, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Comparing Version numbers NSIS Discussion" />
	
	<title> Comparing Version numbers [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Comparing Version numbers</div>
<hr />
<div class="pda"><a href="t-198235.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=198235">Comparing Version numbers</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">3rd November 2004, 16:14</div></div><div class="posttext">I want to compare two version numbers (e.g. 1.5 compared to 1.5.1). Easiest way to do that would seem to be to simply strip out the .s (giving 15 vs 151) then compare the two as integers.<br />
<br />
How do I strip out the .s?<br />
<br />
Thanks!<br />
<br />
Rob</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">3rd November 2004, 16:16</div></div><div class="posttext">Bearing in mind the two numbers have to be the same length before I can do that, of course...:) 16 vs 151 (1.6 vs 1.5.1) is not a planned alternative :)<br />
<br />
In fact if any other solutions spring to mind they'd be helpfully received, thanks!<br />
<br />
Rob</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd November 2004, 16:17</div></div><div class="posttext">http://nsis.sourceforge.net/archive/nsisweb.php?page=34<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">3rd November 2004, 16:23</div></div><div class="posttext">Lifesaver thanks. Sorry I didn't look hard enough I'm bloomin knackered today!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">8th November 2004, 10:52</div></div><div class="posttext">Also, I've just found that it thinks that version 6 is a lower version than version 6.0. That's not the most helpful behaviour in the world, and unfortunately I don't have the scripting skill to change it myself...can anyone help?<br />
<br />
Cheers<br />
<br />
-rob-</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th November 2004, 17:40</div></div><div class="posttext">The code looks bad, and I know of a better way to do version comparisons which would definately always work.<br />
<br />
Let me write you a function, will take maybe an hour at most.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th November 2004, 18:34</div></div><div class="posttext">Ok, here it is. I've tested it a lot and it works perfectly.<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=643<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">9th November 2004, 09:37</div></div><div class="posttext">Fantastic, thanks! I'll try it out now.<br />
<br />
-rob-<br />
<br />
P.S. wow I'm mentioned in the archive I'm famous! :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">23rd November 2004, 10:37</div></div><div class="posttext">P.S. guys just so's you know, if you want to detect the Java version number you have to:<br />
a) Look under HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion<br />
b) Take that previous value, look under the subkey of the same name and append to said value the value of &quot;MicroVersion&quot; under that subkey.<br />
<br />
E.g. HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion is &quot;1.4&quot;<br />
<br />
So look for HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment\CurrentVersion\1.4\MicroVersion, say that is 1.<br />
<br />
So the actual version of the current Java install is 1.4.1, NOT 1.4! <br />
<br />
Just thought that might help someone at some point...:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">23rd November 2004, 10:49</div></div><div class="posttext">And that behaviour is documented here: http://java.sun.com/j2se/1.3/runtime_win32.html.<br />
<br />
This info also applies to the JDK, so someone might wanna update the &quot;Detecting the JDK version&quot; archive docs (http://nsis.sourceforge.net/archive/nsisweb.php?page=162&amp;instances=0,110.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">23rd November 2004, 11:12</div></div><div class="posttext">Equally, http://nsis.sourceforge.net/archive/nsisweb.php?page=543&amp;instances=0,110 seems to be incorrect.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd November 2004, 19:08</div></div><div class="posttext">JDK is not the same as JRE. The first Archive page does what it says it does. I haven't looked at the second one.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">24th November 2004, 12:33</div></div><div class="posttext">I agree that JDK isn't the same as JRE, hence my mentioning them separately. The archive page says that it will set $1 to the current version, which it does not currently do properly.<br />
<br />
Sorry for any inconvenience caused by me pointing this stuff out, thought it might help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">24th November 2004, 12:38</div></div><div class="posttext">Updated JDK detection attached.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">24th November 2004, 12:41</div></div><div class="posttext">I can update the Runtime one as well (which currently kinda does it right but in a slightly roundabout way) using the proper version number comparison (so 1.4 = 1.4.0 etc), if you like.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th November 2004, 17:24</div></div><div class="posttext">I don't think it's a good idea to append the minor version of the JRE to the JDK. As for the second example, you can create your own Archive page that uses the registry to get the version. Everyone can create an Archive page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">26th November 2004, 08:38</div></div><div class="posttext">OK, that sounds cool, I'll make an archive page if/when I get some time.<br />
<br />
Also I am of course talking about the JDK Microversion Registry entry, not the JRE Microversion. <br />
<br />
E.g. on this machine  HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Development Kit\CurrentVersion is 1.4, and HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Development Kit\1.4\Microversion is 2.<br />
<br />
So the JDK version is 1.4.2. Incidentally the JRE version on here is 1.5.0.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">26th November 2004, 09:53</div></div><div class="posttext">The script you've attached reads the minor version from the JRE and the rest from the JDK.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">RobGrant</div><div class="date">26th November 2004, 10:12</div></div><div class="posttext">Fair play, didn't notice that cos I adapted it from another script. The overall point I was making was not that specifically my script should be used but that the archive page should be changed...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>