<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Set the bitmap in a custom page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Set the bitmap in a custom page NSIS Discussion" />
	
	<title> Set the bitmap in a custom page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Set the bitmap in a custom page</div>
<hr />
<div class="pda"><a href="t-171003.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=171003">Set the bitmap in a custom page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">25th February 2004, 23:10</div></div><div class="posttext">I tried serveral thing and I can't find anything in the Manual<br />
<br />
Could somebody help have made a custom page with a bitmap in it, But how can I set for example this file to display the bitmap in my custom page &quot;C:\arrow.bmp&quot;<br />
<br />
Thanks Again</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th February 2004, 23:17</div></div><div class="posttext">Extract it to a temporary location ($PLUGINSDIR after using InitPluginsDir) and write the location to the InstallOptions INI file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">heXor</div><div class="date">26th February 2004, 08:59</div></div><div class="posttext">To add a bitmap to your custom page will be very simple if you follow the steps below:<br />
<br />
1. You have to do as Joost writes, i.e. to unpack the bitmap to the pluginsdir<br />
<br />
2. In the Pre function of your custom dialog write this code:<br />
<br />
; Load the dialog<br />
InstallOptions::initDialog /NOUNLOAD &quot;$PLUGINSDIR\YourCustomDialog.ini&quot;<br />
  Pop $R0<br />
<br />
     System::Call '${sysLoadImage} (0, \<br />
                &quot;$PLUGINSDIR\yourbmp.bmp&quot;, \<br />
                ${IMAGE_BITMAP}, \<br />
                0, \<br />
                0, \<br />
                ${LR_CREATEDIBSECTION}|${LR_LOADFROMFILE}) .r6'<br />
<br />
<br />
<br />
  ; Show your bmp in the &quot;field&quot; 1201<br />
  GetDlgItem $R3 $R0 1201 ;1200 + Field number - 1<br />
  SendMessage $R3 ${STM_SETIMAGE} ${IMAGE_BITMAP} $R6<br />
<br />
  ; Show the dialog<br />
  InstallOptions::show<br />
<br />
3. Now you'll be able to see your bmp in the custom page. Ofcourse that the field number might not be the same in your case. If you use HM NSIS Editor, you will ba able to choose the field number. Make sure you set the style &quot;Bitmap&quot; if you load a bitmap and &quot;Icon&quot; of you'll display an icon.<br />
<br />
4. Other definitions that you might need:<br />
<br />
!define sysLoadImage &quot;user32::LoadImageA(i, t, i, i, i, i) i&quot;<br />
<br />
!ifndef IMAGE_BITMAP<br />
  !define IMAGE_BITMAP          0<br />
!endif<br />
<br />
<br />
!ifndef LR_LOADFROMFILE<br />
  !define LR_LOADFROMFILE       0x0010<br />
!endif<br />
<br />
!ifndef LR_CREATEDIBSECTION<br />
  !define LR_CREATEDIBSECTION   0x2000<br />
!endif<br />
<br />
<br />
Good luck<br />
/Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th February 2004, 10:54</div></div><div class="posttext">There is no need to use Windows API. You only have to write the filename to the InstallOptions INI file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">heXor</div><div class="date">26th February 2004, 11:33</div></div><div class="posttext">I didn't knew that...<br />
But now I know.<br />
Anyway, I don't find it hard to use WinAPI either. If you use WinAPI you have other possibilities too, like stretching pictures.<br />
/Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">26th February 2004, 11:36</div></div><div class="posttext">InstallOptions also has a RESIZETOFIT flag that allows you to stretch an image.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">heXor</div><div class="date">26th February 2004, 12:04</div></div><div class="posttext">Using Win32 API in this case is not the best solution. It is not the simplest solutions either. I admit that. The best solutions is to use the built in stuff, ofcourse.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VegetaSan</div><div class="date">27th February 2004, 10:31</div></div><div class="posttext">I got it thanks :  heXor and Joost Verburg</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>