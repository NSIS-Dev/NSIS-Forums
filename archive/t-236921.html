<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Working on my first script for Pocket PC - Need some help, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Working on my first script for Pocket PC - Need some help NSIS Discussion" />
	
	<title> Working on my first script for Pocket PC - Need some help [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Working on my first script for Pocket PC - Need some help</div>
<hr />
<div class="pda"><a href="t-236921.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=236921">Working on my first script for Pocket PC - Need some help</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Loogie</div><div class="date">1st February 2006, 13:47</div></div><div class="posttext">Hi<br />
<br />
I have read through the forums and have used an example off of here to create an install for my application. However it is not working quite right. <br />
<br />
It displays the readme.txt and eula.txt fine and connects to my Pocket PC fine but the installation screen for the Pocket PC has a bunch of files listed there to select for install/remove (why I don't know) but none are the files contained in my script. It appears that my cabs and .mdb file are being ignored even though they are in the same folder as the readme.txt and eula.txt. <br />
<br />
Can some someone figure this out for me and point me in the right direction. I am new to this so simple explainations work best for my simple mind.<br />
<br />
I have pasted my ini file then my installer script.<br />
<br />
Thanks<br />
<br />
L<br />
<br />
*********************<br />
setup.ini start<br />
*********************<br />
[CEAppManager]<br />
Version      = 1.0<br />
Component    = App<br />
<br />
[App]<br />
Description  = Pocket PCT.<br />
CabFiles = pct_PPC.ARM.CAB,pct_PPC.ARMV4.CAB,pct_PPC.MIPS.CAB,pct_PPC.WCE420X86.CAB,pct_PPC.X86.CAB<br />
<br />
*********************<br />
setup.nsi start<br />
*********************<br />
; Script generated with the Venis Install Wizard<br />
<br />
; Define your application name<br />
!define APPNAME &quot;Pocket PCT&quot;<br />
!define APPNAMEANDVERSION &quot;Pocket PCT v1.1&quot;<br />
<br />
; Use compression<br />
SetCompressor /FINAL /SOLID LZMA<br />
<br />
Icon &quot;G:\Visual Studio Projects\Projects\pct.ico&quot;<br />
<br />
<br />
; Main Install settings<br />
Name &quot;${APPNAMEANDVERSION}&quot;<br />
InstallDir &quot;$PROGRAMFILES\Pocket PCT&quot;<br />
InstallDirRegKey HKLM &quot;Software\${APPNAME}&quot; &quot;&quot;<br />
OutFile &quot;pocketpct.exe&quot;<br />
<br />
!define MUI_WELCOMEPAGE_TITLE_3LINES<br />
!define MUI_WELCOMEFINISHPAGE_BITMAP &quot;${NSISDIR}\Contrib\Graphics\Wizard\orange.bmp&quot;<br />
<br />
; Modern interface settings<br />
!include &quot;MUI.nsh&quot;<br />
!include &quot;FileFunc.nsh&quot;<br />
<br />
;!define MUI_FINISHPAGE_SHOWREADME &quot;readme.txt&quot;<br />
;!define MUI_FINISHPAGE_LINK &quot;Pocket PCT: http://www.pct.com&quot;<br />
;!define MUI_FINISHPAGE_LINK_LOCATION http://www.pct.com<br />
  <br />
!define MUI_ABORTWARNING<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
Page custom ReadmePage<br />
!insertmacro MUI_PAGE_LICENSE &quot;eula.txt&quot;<br />
;!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
; Set languages (first is default language)<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_RESERVEFILE_LANGDLL<br />
<br />
ReserveFile &quot;readme.txt&quot;<br />
ReserveFile &quot;eula.txt&quot;<br />
ReserveFile &quot;readme.ini&quot;<br />
<br />
!insertmacro GetParent<br />
<br />
Section &quot;PCT&quot; Section1<br />
<br />
        ReadRegStr $1 HKEY_LOCAL_MACHINE &quot;software\Microsoft\Windows\CurrentVersion\App Paths\CEAppMgr.exe&quot; &quot;&quot;<br />
        IfErrors Error<br />
        Goto End<br />
        Error:<br />
        MessageBox MB_OK|MB_ICONEXCLAMATION \<br />
        &quot;Unable to find an Application Manager for PocketPC applications. \<br />
        Please install Microsoft ActiveSync and reinstall the software.&quot;<br />
        Abort<br />
        End:<br />
<br />
        ${GetParent} &quot;$1&quot; $2<br />
	; Set Section properties<br />
	SetOverwrite on<br />
<br />
	; Set Section Files and Shortcuts<br />
	SetOutPath &quot;$2\Pocket PCT&quot;<br />
	File &quot;pct_PPC.ARM.CAB&quot;<br />
	File &quot;pct_PPC.ARMV4.CAB&quot;<br />
	File &quot;pct_PPC.MIPS.CAB&quot;<br />
	File &quot;pct_PPC.SH3.CAB&quot;<br />
	File &quot;pct_PPC.WCE420X86.CAB&quot;<br />
	File &quot;pct_PPC.X86.CAB&quot;<br />
            File &quot;pct.mdb&quot;<br />
            File &quot;eula.txt&quot;<br />
	File &quot;readme.txt&quot;<br />
	File &quot;setup.ini&quot;<br />
<br />
        StrCpy $0 &quot;$2\setup.ini&quot;<br />
        Call InstallCAB<br />
SectionEnd<br />
<br />
Var HWND<br />
Var DLGITEM<br />
<br />
Function ReadmePage<br />
<br />
  InitPluginsDir<br />
  SetOutPath &quot;$PLUGINSDIR&quot;<br />
  File &quot;readme.txt&quot;<br />
<br />
  !insertmacro MUI_HEADER_TEXT &quot;Release notes&quot; &quot;Pleas read&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;readme.ini&quot;<br />
  Pop $HWND ;HWND of dialog<br />
  GetDlgItem $DLGITEM $HWND 1200 ;1200 + Field number - 1<br />
    <br />
  ;$DLGITEM contains the HWND of the first field<br />
  SetCtlColors $DLGITEM &quot;&quot; &quot;${MUI_BGCOLOR}&quot;<br />
<br />
  ; clear the field<br />
  SendMessage $DLGITEM ${WM_SETTEXT} 1 &quot;STR: &quot;<br />
<br />
  FileOpen $1 &quot;$PLUGINSDIR\readme.txt&quot; &quot;r&quot;<br />
  loop:<br />
     FileRead $1 $2<br />
     SendMessage $DLGITEM 0x00C2 0 &quot;STR:$2&quot;<br />
  IfErrors 0 loop<br />
  FileClose $1<br />
  SendMessage $DLGITEM 0x00B1 0 0  ; EM_SETSEL<br />
  SendMessage $DLGITEM 0x00B7 0 0  ; EM_SCROLLCARET<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
<br />
FunctionEnd<br />
<br />
Function InstallCAB<br />
<br />
   ExecWait '&quot;$1&quot; &quot;$0&quot;'<br />
<br />
FunctionEnd <br />
<br />
; Modern install component descriptions<br />
!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<br />
	!insertmacro MUI_DESCRIPTION_TEXT ${Section1} &quot;&quot;<br />
!insertmacro MUI_FUNCTION_DESCRIPTION_END<br />
<br />
<br />
; On initialization<br />
Function .onInit<br />
<br />
        !insertmacro MUI_INSTALLOPTIONS_EXTRACT &quot;readme.ini&quot;<br />
	!insertmacro MUI_LANGDLL_DISPLAY<br />
<br />
FunctionEnd<br />
<br />
; eof</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd February 2006, 11:56</div></div><div class="posttext">CEAppMgr might be looking for the files in the directory that contains setup.ini because you haven't supplied full paths in the setup.ini. Try extracting setup.ini to the same directory as the CABs.<br />
<br />
Please attach scripts next time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zbd</div><div class="date">7th November 2006, 22:22</div></div><div class="posttext">also<br />
<br />
SetOutPath &quot;$2\Pocket PCT&quot;<br />
<br />
StrCpy $0 &quot;$2\setup.ini&quot;<br />
<br />
wouldn't it need to be<br />
<br />
StrCpy $0 &quot;$2\Pocket PCT\setup.ini&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>