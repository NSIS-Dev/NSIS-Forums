<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Section selection depending on language, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Section selection depending on language NSIS Discussion" />
	
	<title> Section selection depending on language [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Section selection depending on language</div>
<hr />
<div class="pda"><a href="t-261069.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=261069">Section selection depending on language</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">jdannenb</div><div class="date">4th December 2006, 15:03</div></div><div class="posttext">Hi, after searching this forum (maybe not good enough?) I'm still facing this problem:<br />
<br />
I've got several sections which are installed depending on the chosen installer language.<br />
<br />
Section &quot;Bla ENG&quot; SEC_BLA_ENG<br />
  &lt;stuff to install for english language&gt;<br />
SectionEnd<br />
<br />
Section &quot;Bla GER&quot; SEC_BLA_GER<br />
  &lt;stuff to install for german language&gt;<br />
SectionEnd<br />
(...many more language depending sections...)<br />
<br />
I 've written a litte macro for helping me in selecting/unselecting these sections, using Sections.nsh:<br />
<br />
# Macro for selecting language specific sections<br />
!macro SELECT_SECTION GERMAN_SECTION_ID ENGLISH_SECTION_ID<br />
    StrCmp $LANGUAGE ${LANG_GERMAN} German${GERMAN_SECTION_ID} English${ENGLISH_SECTION_ID}<br />
    German${GERMAN_SECTION_ID}:<br />
    !insertmacro SelectSection ${GERMAN_SECTION_ID}<br />
    !insertmacro UnselectSection ${ENGLISH_SECTION_ID}<br />
    Goto done${GERMAN_SECTION_ID}<br />
    English${ENGLISH_SECTION_ID}:<br />
    !insertmacro SelectSection ${ENGLISH_SECTION_ID}<br />
    !insertmacro UnselectSection ${GERMAN_SECTION_ID}<br />
    done${GERMAN_SECTION_ID}:<br />
!macroend<br />
<br />
In my .onInit, I call the macro like this:<br />
    (...)<br />
    !insertmacro MUI_LANGDLL_DISPLAY<br />
    !insertmacro SELECT_SECTION SEC_BLA_GER SEC_BLA_ENG<br />
    !insertmacro SELECT_SECTION SEC_BLA_GER2 SEC_BLA_ENG2<br />
    (...)<br />
<br />
But...disregarding the chosen language, ALL sections are installed. What am I doing wrong?<br />
<br />
Help really appreciated.<br />
Greez<br />
Jens</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n_baua</div><div class="date">5th December 2006, 04:51</div></div><div class="posttext">Hi jdannenb,<br />
<br />
have you tried with &quot;one-section.nsi&quot; example in NSIS installations example folder...?<br />
May be this is what you are looking for.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">5th December 2006, 05:07</div></div><div class="posttext">Hi Jens!<br />
<br />
You have to treat the section descriptors as constants.<br />
<br />
<br />
!insertmacro SELECT_SECTION ${SEC_BLA_GER} ${SEC_BLA_ENG}<br />
<br />
<br />
Have a nice day!<br />
<br />
Cheers<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdannenb</div><div class="date">5th December 2006, 08:21</div></div><div class="posttext">Hi Bruno, thanks for your reply.<br />
I tried it, but unfortunately to no avail.<br />
I switched over to LogicLib now.<br />
<br />
Section &quot;Bla ENG&quot; SEC_BLA_ENG<br />
 ${If} $LANGUAGE == ${LANG_ENGLISH}<br />
 &lt;stuff to install for english language&gt;<br />
 ${EndIf}<br />
SectionEnd<br />
<br />
This works for me. But, I think this has the disadvantage that I am not controlling the language dependencies in a central place like .onInit<br />
Well never mind, it's working and I won't get fired ;)<br />
<br />
Greez<br />
Jens</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bholliger</div><div class="date">5th December 2006, 09:11</div></div><div class="posttext">Hi Jens!<br />
<br />
This works for me. You might try this as well...<br />
<br />
Have a nice day!<br />
<br />
Tschuess!<br />
<br />
Bruno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jdannenb</div><div class="date">5th December 2006, 10:01</div></div><div class="posttext">Gruezi Bruno :)<br />
Excellent, thank you :)<br />
<br />
Greez<br />
Jens</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>