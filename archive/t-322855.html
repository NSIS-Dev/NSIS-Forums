<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" NSIS Newbie: a couple of questions, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  NSIS Newbie: a couple of questions NSIS Discussion" />
	
	<title> NSIS Newbie: a couple of questions [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  NSIS Newbie: a couple of questions</div>
<hr />
<div class="pda"><a href="t-322855.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322855">NSIS Newbie: a couple of questions</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mabian</div><div class="date">1st October 2010, 17:52</div></div><div class="posttext">Hello,<br />
<br />
I'm starting with my first NSIS script, reading docs and looking at examples.<br />
<br />
Two questions:<br />
<br />
I have something like this:<br />
<br />
!define C_VERSION &quot;1.0.0&quot;<br />
!define C_APPNAME &quot;MYTEST&quot;<br />
<br />
Var P_ServiceName<br />
Var P_FullName<br />
<br />
Function .onInit<br />
    ReadEnvStr $P_ServiceName EMS_SERVICEID<br />
    StrCpy $P_FullName &quot;${C_APPNAME}_$P_ServiceName&quot;<br />
<br />
   MessageBox MB_YESNO &quot;This will install $P_FullName. Continue?&quot; IDYES NoAbort<br />
     Abort ; causes installer to quit.<br />
<br />
   NoAbort:<br />
FunctionEnd<br />
<br />
The messagebox shows $P_FullName doesn't include the value set for the EMS_SERVICEID environment variable (through $P_ServiceName). Am I missing something?<br />
<br />
Another question: is it possible to supply a string as parameter to the install program and have the installer get and use the string for building the default install path name etc?<br />
<br />
Thanks a lot,<br />
  Mario</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">1st October 2010, 17:58</div></div><div class="posttext">1. Are you sure the env string -is- in $P_ServiceName after the ReadEnvStr call?  Might want to double-check with a MessageBox.<br />
2. Yes - See the documentation: E.1.11 GetParameters</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st October 2010, 17:59</div></div><div class="posttext">The messagebox shows $P_FullName doesn't include the value set for the EMS_SERVICEID environment variable (through $P_ServiceName). Am I missing something?<br />
Try MessageBoxing the return value of your ReadEnvStr command.<br />
<br />
Another question: is it possible to supply a string as parameter to the install program and have the installer get and use the string for building the default install path name etc?<br />
Yes, there is a standard command line parameter for this. I don't know from memory, but I'm sure google can help you there.<br />
<br />
<br />
Edit: Drats. Foiled again! &gt;_&gt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mabian</div><div class="date">1st October 2010, 18:07</div></div><div class="posttext">1. Are you sure the env string -is- in $P_ServiceName after the ReadEnvStr call?  Might want to double-check with a MessageBox.<br />
2. Yes - See the documentation: E.1.11 GetParameters<br />
<br />
1. Indeed, $P_ServiceName is empty, but why? If I open a command prompt and type SET, the env string is not empty<br />
2. Ok, do I need to do manual parsing of the parameter string?<br />
<br />
Thank you!<br />
<br />
- Mario</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">1st October 2010, 18:10</div></div><div class="posttext">1. No idea - but keep in mind that if you set an evironment variable outside of your installer, your installer may not be aware of that environment variable as it wasn't present when your installer started.<br />
<br />
2. The very next bit in the documentation - E.1.12 GetOptions - should help you ;)  Depending on what you want to do, there may be some manual parsing of values involved, though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mabian</div><div class="date">1st October 2010, 18:16</div></div><div class="posttext">Ok, dunno about the environment variable, but I needed a way to pass a string to the installer, and getparameters + getoptions made it in a breeze.<br />
<br />
Problem solved.<br />
<br />
Thank you!<br />
<br />
- Mario</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">1st October 2010, 18:23</div></div><div class="posttext">oi.. yes, command line parameters are infinitely preferable to environment variables :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>