<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Help!  Writing to files from a Message Box, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Help!  Writing to files from a Message Box NSIS Discussion" />
	
	<title> Help!  Writing to files from a Message Box [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Help!  Writing to files from a Message Box</div>
<hr />
<div class="pda"><a href="t-137162.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=137162">Help!  Writing to files from a Message Box</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">nilpo</div><div class="date">30th May 2003, 15:39</div></div><div class="posttext">I am creating an installer that will write to a text file with the results from a message box.<br />
<br />
I have an INF file that I am installing.  However one line must be changed on each install to reflect a model number provided by the user upon installation.<br />
<br />
I have broken the file into two parts:<br />
<br />
file1.dat (the portion before the edited line)<br />
file2.dat (the portion following the edited line)<br />
<br />
I want the message box to request that the user enter a model number.  Then I want to store that information so that I can write it to a file later in the form:<br />
<br />
model=user info here<br />
<br />
Finally I would like to add the contents of the first dat file, then the line we created above, and finally the contents of the second dat file to create one INF file.  All of the files mentioned can be treated as standard text files.<br />
<br />
Is there a way to do this?<br />
<br />
Any help is appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th May 2003, 16:11</div></div><div class="posttext">See the text file manipulation section on the NSIS archive:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=311&amp;instances=0,11<br />
<br />
For<br />
model=user info here<br />
use WriteINIStr<br />
which will write e.g.<br />
[model]<br />
model=user info here<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nilpo</div><div class="date">30th May 2003, 16:20</div></div><div class="posttext">Sry I'm a newbie.<br />
<br />
I understand what you are saying to write to the file.<br />
<br />
But how can I create a message box (or some sort of text input) in the installer so that the user can enter the value to be used?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th May 2003, 17:19</div></div><div class="posttext">You need to make a custom page using InstallOptions.<br />
See Contrib\InstallOptions\Reamde.html for documentation.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nilpo</div><div class="date">30th May 2003, 17:46</div></div><div class="posttext">Okay now I can create the INI file to display the prompt screen and I can type the returned information to my INF file.<br />
<br />
Still stuck though.<br />
<br />
How do I instruct my installer to load the INI file, and how do I call the return from the prompt (assign it to a variable for example)?<br />
<br />
<br />
Maybe these questions are answered in the documentation, but I must be missing something.<br />
<br />
Thanks for the help so far.<br />
<br />
Also, is there a way to determine the dimensions of the installer window from within the script so that I can center my prompt in the window?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th May 2003, 17:53</div></div><div class="posttext">The examples in Contrib\InstallOptions\test.nsi and Examples\Modern UI\InstallOptions.nsi show you how to show the page, and read the user input.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nilpo</div><div class="date">30th May 2003, 17:54</div></div><div class="posttext">Sorry.  I found the info on how to implement the INI file and how to call up the returned value in my script in the Install Options documentation.<br />
<br />
I'm assuming that the InstallOptions dll will also have to be included in the installer.<br />
<br />
Thanks for all your help.<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th May 2003, 17:56</div></div><div class="posttext">Once you use a line such as:<br />
<br />
InstallOptions::show<br />
<br />
NSIS automatically includes the plug-in into the installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nilpo</div><div class="date">30th May 2003, 18:34</div></div><div class="posttext">Thanks for all the help.  I think I can probably figure it out now.<br />
<br />
I appreciate it.<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">30th May 2003, 20:01</div></div><div class="posttext">No problem.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>