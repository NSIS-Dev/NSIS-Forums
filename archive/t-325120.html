<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" LockedList Plugin on Win2k, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  LockedList Plugin on Win2k NSIS Discussion" />
	
	<title> LockedList Plugin on Win2k [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  LockedList Plugin on Win2k</div>
<hr />
<div class="pda"><a href="t-325120.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=325120">LockedList Plugin on Win2k</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">22nd December 2010, 00:31</div></div><div class="posttext">Hello.<br />
<br />
I'm using the LockedList plug-in in my installer. And so far it seems to work fine on Windows XP as well as on Windows 7. However I noticed that on Windows 2000 there is a problem: It seems every single process is mistakenly detected as conflicting! So is the LockedList plug-in not compatible with Win2k? From the documentation it would seem the plug-in works even on Windows NT 4.0, but apparently this is not the case. Or am I missing something?<br />
<br />
http://img141.imageshack.us/img141/3361/lockedlistwin2kerror.png<br />
<br />
<br />
Here is the code I use:<br />
Function LockedListShow<br />
  !insertmacro MUI_HEADER_TEXT &quot;$(LAMEXP_LANG_LOCKEDLIST_HEADER)&quot; &quot;$(LAMEXP_LANG_LOCKEDLIST_TEXT)&quot;<br />
  LockedList::AddModule &quot;\LameXP.exe&quot;<br />
  LockedList::AddModule &quot;\Uninstall.exe&quot;<br />
  LockedList::AddModule &quot;\Au_.exe&quot;<br />
  LockedList::Dialog /heading &quot;$(LAMEXP_LANG_LOCKEDLIST_HEADING)&quot;<br />
     /noprograms &quot;$(LAMEXP_LANG_LOCKEDLIST_NOPROG)&quot;<br />
     /searching  &quot;$(LAMEXP_LANG_LOCKEDLIST_SEARCH)&quot;<br />
     /colheadings &quot;$(LAMEXP_LANG_LOCKEDLIST_COLHDR1)&quot; &quot;$(LAMEXP_LANG_LOCKEDLIST_COLHDR2)&quot;<br />
  Pop $R0<br />
FunctionEnd<br />
<br />
I'm using the Unicode version, if that matters.<br />
<br />
Thanks in advance! ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2010, 11:18</div></div><div class="posttext">I'm afraid I don't have a Windows 2000 machine to try this on. Can you debug?<br />
<br />
Edit: Also which version of the plug-in?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">22nd December 2010, 12:38</div></div><div class="posttext">I'm afraid I don't have a Windows 2000 machine to try this on. Can you debug?<br />
<br />
I have a Win2k VM running, as some users still insist using such old OS :rolleyes:<br />
<br />
If you tell me what I can do to help debugging, I'll see what I can do...<br />
<br />
Edit: Also which version of the plug-in?<br />
<br />
LockedList.dll v2.2 by Afrow UK<br />
Last build: 19th October 2010</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2010, 15:52</div></div><div class="posttext">Ideally if you can, install VS2010 on the VM and attach the built installer executable to the VS debugger (while using a debug build of the DLL). You can use breakpoints then.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">22nd December 2010, 16:59</div></div><div class="posttext">Ideally if you can, install VS2010 on the VM and attach the built installer executable to the VS debugger (while using a debug build of the DLL). You can use breakpoints then.<br />
<br />
Stu<br />
<br />
Can't it be built with VS2008 ???<br />
<br />
I haven't updated my &quot;production&quot; system to VS2010 yet and I don't want to dirty my &quot;test&quot; system with VS2010. I even doubt it will install on a Win2k system! Moreover VS2010 is a quite huge download. And the last time I downloaded the DVD ISO from the MSDN-AA site, which took hours, it was broken (setup always failed with integrity check failure).<br />
<br />
Another idea: Can't you just throw in a few OutputDebugString()'s at the critical positions and I capture the output on my Win2k system using DbgView (http://technet.microsoft.com/en-us/sysinternals/bb896647)?<br />
<br />
Regards,<br />
MuldeR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2010, 17:09</div></div><div class="posttext">I think I've only included the vcxproj file in the source code which is for VS2010. I'm afraid I'm very busy with work at the moment but if you want to modify the source file I will rebuild and attach the dll here.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">22nd December 2010, 17:21</div></div><div class="posttext">Let me try this:<br />
http://www.codeproject.com/Tips/87570/Converting-VS2010-Solution-to-VS2008.aspx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">22nd December 2010, 18:02</div></div><div class="posttext">Hm, I managed to compile LockedList.dll with VS2008, but my DLL doesn't work.<br />
<br />
The dialog simply doesn't show up. Instead I get a blank page :confused:<br />
<br />
However this simple macro should do to the job:<br />
<br />
#define DEBUG_PRINT(FORMAT,...)                             \<br />
{                                                           \<br />
    char *buffer = new char[1024];                          \<br />
    if(sprintf_s(buffer, 1024, FORMAT, __VA_ARGS__) &gt; 0)    \<br />
    {                                                       \<br />
        OutputDebugStringA(buffer);                         \<br />
    }                                                       \<br />
    delete [] buffer;                                       \<br />
}<br />
<br />
Use like this:<br />
<br />
BOOL WINAPI DllMain(HINSTANCE hInst, ULONG ul_reason_for_call, LPVOID lpReserved)<br />
{<br />
  g_hInstance = hInst;<br />
  DEBUG_PRINT(&quot;LockedList says hello (code %d)&quot;, 42);<br />
  return TRUE;<br />
}<br />
<br />
If you include some DEBUG_PRINT's at the critical places, I'll send you the log...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th December 2010, 15:18</div></div><div class="posttext">Can you try with SilentSearch and see what file paths you get. They should be an empty string, which is what I already test for (and exclude) as of v2.2. I am confused as to why they still get added.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">24th December 2010, 15:20</div></div><div class="posttext">Can you try with SilentSearch and see what file paths you get. They should be an empty string, which is what I already test for (and exclude) as of v2.2. I am confused as to why they still get added.<br />
<br />
Stu<br />
<br />
Will try...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">24th December 2010, 15:38</div></div><div class="posttext">Okay, here is my test script:<br />
http://pastie.org/1403194<br />
<br />
And here the result I get on Win2k:<br />
http://pastie.org/1403196<br />
<br />
-&gt; All paths are empty, as you had expected. And I definitely use v2.2.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>