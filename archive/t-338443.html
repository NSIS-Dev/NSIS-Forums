<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with scirpt &quot;Getsize', media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with scirpt &quot;Getsize' NSIS Discussion" />
	
	<title> Problem with scirpt &quot;Getsize' [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with scirpt &quot;Getsize'</div>
<hr />
<div class="pda"><a href="t-338443.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=338443">Problem with scirpt &quot;Getsize'</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">need_a_help</div><div class="date">29th November 2011, 09:18</div></div><div class="posttext">Hi,<br />
<br />
I try create program who check file size. But I doing something wrong. Some one help me?<br />
<br />
Section<br />
!include LogicLib.nsh<br />
!include &quot;FileFunc.nsh&quot; /* contains ${VersionCompare} */<br />
<br />
${GetSize} &quot;$INSTDIR\test12.exe&quot; $0<br />
<br />
!include &quot;FileFunc.nsh&quot;<br />
!include &quot;WordFunc.nsh&quot; /* contains ${VersionCompare} */<br />
<br />
${GetSize} &quot;$INSTDIR\test.exe&quot; $0<br />
${VersionCompare} &quot;$0&quot; &quot;19103744&quot; $1 <br />
<br />
/*<br />
  $1 now contains one of:<br />
    1: Existing $INSTDIR\test12.exe size is HIGHER than 19103744<br />
    2: Existing $INSTDIR\test12.exe size is LOWER than 19103744<br />
    0: Existing $INSTDIR\test12.exe size IS 19103744<br />
*/ <br />
  ${If} $1 == '1'<br />
  MessageBox MB_YESNO|MB_ICONQUESTION $(Message1) IDYES _yes<br />
<br />
_yes:<br />
 MessageBox MB_YESNO|MB_ICONQUESTION $(Message3) IDYES _yes<br />
  ${EndIf}<br />
  ${If} $1 == '2'<br />
  MessageBox MB_OK '$(Message2)'/SD IDOK<br />
     Abort<br />
  ${EndIf}<br />
  ${If} $1 == '0'<br />
${EndIf}<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2011, 09:21</div></div><div class="posttext">You cannot include logiclib, filefunc or wordfunc.nsh inside a section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">need_a_help</div><div class="date">29th November 2011, 09:42</div></div><div class="posttext">I delete Section ;) But still have this same error:<br />
<br />
&quot;!insertmacro: GetSizeCall<br />
!insertmacro: macro &quot;GetSizeCall&quot; requires 5 parameter(s), passed 2!&quot; I don't know what is wrong.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2011, 10:26</div></div><div class="posttext">How can you not know what's wrong? It clearly states that you need to supply 5 parameters. So you want to find out what the parameter format for GetSize is. You can find this in filefunc.nsh, or even in the NSIS manual.<br />
http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">need_a_help</div><div class="date">29th November 2011, 13:57</div></div><div class="posttext">I still learn so excuse me :) I try correct but still have error<br />
<br />
!include LogicLib.nsh<br />
!include &quot;FileFunc.nsh&quot; /* contains ${VersionCompare} */<br />
<br />
<br />
<br />
	; Find file size &quot;$INSTDIR&quot; in kilobytes<br />
<br />
	${GetSize} &quot;$INSTDIR&quot; &quot;/M=test12.exe /S=0K /G=0&quot; $0 $1 $2<br />
	; $0=&quot;19103744&quot; kb<br />
	<br />
<br />
${VersionCompare} &quot;$0&quot; &quot;19103744&quot; $1 <br />
<br />
/*<br />
  $1 now contains one of:<br />
    1: Existing $INSTDIR\test12.exe version is HIGHER than 19103744<br />
    2: Existing $INSTDIR\test12.exe version is LOWER than 19103744<br />
    0: Existing $INSTDIR\test12.exe version IS 19103744<br />
<br />
	<br />
  ${If} $1 == '1'<br />
  MessageBox MB_YESNO|MB_ICONQUESTION $(Message1) IDYES _yes<br />
  /* IDNO assumed here, as that's the only other option */<br />
  Abort /* abort installation */<br />
<br />
_yes:<br />
 MessageBox MB_YESNO|MB_ICONQUESTION $(Message3) IDYES _yes<br />
/* continue with installation */  <br />
  ${EndIf}<br />
  <br />
 ${If} $1 == '2'<br />
  MessageBox MB_OK '$(Message2)'/SD IDOK<br />
     Abort<br />
  ${EndIf}<br />
  <br />
${If} $1 == '0'<br />
${EndIf}<br />
<br />
And i have &quot;Invalid command: ${VersionCompare}&quot; Check nsis documentations and everything is good ;/</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2011, 14:37</div></div><div class="posttext">VersionCompare is defined in wordfunc.nsh, so you'll have to include that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">need_a_help</div><div class="date">29th November 2011, 16:17</div></div><div class="posttext">Work :) Thanks for help and patience.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2011, 20:45</div></div><div class="posttext">No problem, glad to help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>