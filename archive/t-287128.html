<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File Size limit when using File Read?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File Size limit when using File Read? NSIS Discussion" />
	
	<title> File Size limit when using File Read? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File Size limit when using File Read?</div>
<hr />
<div class="pda"><a href="t-287128.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=287128">File Size limit when using File Read?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">99999999</div><div class="date">18th February 2008, 19:22</div></div><div class="posttext">So I have a problem when using FileRead.  The problem appears to be a file size limit when using FileRead.  For each of the targets I am building, I have a command file, which is read through and parsed, and that command file tells the installer how to extract files from external zip files. <br />
<br />
Keep in mind that these targets can have anywhere from 20 to 200,000 files, and be as large as 20gb.  The problem I've encountered, is that when the target has a large number of files, the command file wil grow accordingly, and when the installer then attempts to call FileOpen, and then FileRead,  FileRead fails and returns me 0 data, on the first read of the file.  This work perfectly with targets that have much smaller sets of files. An example of a failing target would be a target that has 10k of files, and it creates a command file of 500kb.<br />
<br />
So does NSIS have a a buffer it reads the entire file into?  If so what is the length of the buffer?  I can certainly split the command file into multiple files.  By the looks of the command I was expecting maybe a windowed buffer, or straight reads from the file itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">18th February 2008, 19:40</div></div><div class="posttext">FileRead reads one line at the time, so unless you have lines longer than 1024 bytes (buffer size limit for normal nsis builds), I don't see how you can have problems with files smaller than 2GB (or 4GB, not sure what the limit is)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th February 2008, 20:27</div></div><div class="posttext">If the 1024 limit isn't enough, you can try the special build (8192): http://nsis.sf.net/Special_Builds<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">99999999</div><div class="date">18th February 2008, 20:32</div></div><div class="posttext">Yeah, its not the length of the lines, I already do use less than 1024 characters per line, ( I checked,) I can't see any control characters either.<br />
<br />
I am using version 2.24 of NSIS, with the big strings patch.<br />
So I've checked and the file handle is valid, on both calls to FileRead.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>