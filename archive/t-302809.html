<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Name, OutFile, InstallDir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Name, OutFile, InstallDir NSIS Discussion" />
	
	<title> Name, OutFile, InstallDir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Name, OutFile, InstallDir</div>
<hr />
<div class="pda"><a href="t-302809.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=302809">Name, OutFile, InstallDir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">KalleBalle</div><div class="date">5th February 2009, 15:31</div></div><div class="posttext">Hey! I am new to this and have mananged to find answers to most questions that have poped up. But with this one I could use some help. <br />
<br />
I need to be able to change the name, outfile and installdir among other things depending on the users nationality. Right now the installer is a modified version of Modern UIs MultiLanguage.nsi. <br />
<br />
So I have the following code: <br />
<br />
  var PublisherName<br />
  var ProductGroup<br />
  var ProductName<br />
  <br />
  ;Name and file<br />
  Name $ProductName<br />
  <br />
  ;Default installation folder<br />
  InstallDir &quot;$PROGRAMFILES\$(^PublisherName)\$(^ProductGroup)\$(^ProductName)&quot;<br />
<br />
Function .onInit<br />
<br />
  StrCpy $PublisherName &quot;a&quot;<br />
  StrCpy $ProductGroup &quot;b&quot;<br />
  StrCpy $ProductName &quot;c&quot; <br />
<br />
When the installer is run the default path is:<br />
C:\Programs\\\<br />
<br />
Guessing this means that the InstallDir code is run before the .onInit and not update after the .onInit has been run. But there must be some way to make this work...<br />
<br />
Help would be greatly appriciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">5th February 2009, 15:36</div></div><div class="posttext">Function .onInit<br />
...<br />
StrCpy $instdir &quot;c:\some fancy path\$myvar\hello&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th February 2009, 15:37</div></div><div class="posttext">What you're looking for is !define and ${const}.!define PUBLISHER_NAME a<br />
!define PRODUCT_GROUP b<br />
<br />
InstallDir $PROGRAMFILES\${PUBLISHER_NAME}\${PRODUCT_GROUP}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KalleBalle</div><div class="date">5th February 2009, 15:42</div></div><div class="posttext">Wow, those are some fast replies, impressive and much appreciated. Bit confused. Can NSIS !define be changed at run-time? Else I don't understand how that would work...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th February 2009, 15:48</div></div><div class="posttext">NSIS defines can't be changed at runtime, but if you want to change OutFile as well, you have to use !defines as that can never change on runtime.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>