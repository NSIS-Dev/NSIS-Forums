<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" install options : page custom like a welcome page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  install options : page custom like a welcome page NSIS Discussion" />
	
	<title> install options : page custom like a welcome page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  install options : page custom like a welcome page</div>
<hr />
<div class="pda"><a href="t-205674.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=205674">install options : page custom like a welcome page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 00:09</div></div><div class="posttext">hello everybody...<br />
<br />
I'm looking for anyone who would have tried to make himself a page custom which looks like exactly the same as a welcome or a finish page...<br />
<br />
I couldn't do it, and I promise, I'm searching, and searching...<br />
<br />
<br />
<br />
[Settings]<br />
NumFields=3<br />
Rect=1044<br />
[Field 1]<br />
Type=bitmap<br />
Text=c:\install.bmp<br />
Left=0<br />
Right=109<br />
Top=0<br />
Bottom=193<br />
[Field 2]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=10<br />
[Field 3]<br />
Type=label<br />
Left=120<br />
Right=315<br />
<br />
<br />
<br />
<br />
does not work<br />
1) the bitmap does not appear...<br />
2) the branding text is there, I don't know how to make him disappear<br />
3) the backside color isn't white<br />
<br />
<br />
any ideas ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 10:13</div></div><div class="posttext">up :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">23rd January 2005, 11:32</div></div><div class="posttext">Use Modern UI?<br />
<br />
-Stu :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 11:40</div></div><div class="posttext">?<br />
<br />
i'm already using modern UI<br />
<br />
if you're telling me to use the MUI_UNPAGE_WELCOME<br />
<br />
i've already tried...<br />
And I couldn't add a field to the ioSpecial.ini...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 11:49</div></div><div class="posttext">I want to add to my welcome page some radiobuttons if a version of my software is already installed...<br />
(I don't want to add a custom page after my welcome page, one click too much)<br />
<br />
Well, I tried using the command MUI_WELCOMEFINISHPAGE_INI welcome.ini<br />
<br />
I copied ioSpecial.ini to my welcome.ini<br />
Changing the 3 fields of the welcome.ini works...<br />
But I couldn't add fields...<br />
And I want to :D<br />
If somebody knows the solution to add a field to this ini file, this will solve my problem ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">23rd January 2005, 12:55</div></div><div class="posttext">The MUI uses ioSpecial.ini to define the WELCOME and FINISH pages.<br />
<br />
If you want to change these pages, you can either modify ioSpecial.ini at run time (before the page gets displayed) or you can use the MUI_WELCOMEFINISHPAGE_INI setting to make MUI use a different INI file at compile time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 13:00</div></div><div class="posttext">yes pengyou<br />
<br />
I have written that i've tried to do it, and i couldn't add a field to this ini file...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 14:38</div></div><div class="posttext">I don't understand what happens with the inifile and the command MUI_WELCOMEFINISHPAGE_INI<br />
<br />
it is as if the fields had a predefined size... and you can't change it...<br />
<br />
for example :<br />
<br />
this ini :<br />
<br />
<br />
[Settings]<br />
NumFields=5<br />
rect=1044<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=109<br />
Top=0<br />
Bottom=193<br />
Text=install.bmp<br />
Flags=RESIZETOFIT<br />
[Field 2]<br />
Type=radiobutton<br />
Left=120<br />
Right=315<br />
Top=50<br />
Bottom=60<br />
Text=blabla4<br />
[Field 3]<br />
Type=radiobutton<br />
Left=120<br />
Right=315<br />
Top=90<br />
Bottom=100<br />
Text=blabla0<br />
[Field 4]<br />
Type=radiobutton<br />
Text=blabla<br />
Left=120<br />
Right=315<br />
Top=100<br />
Bottom=110<br />
[Field 5]<br />
Type=radiobutton<br />
Text=blabla2<br />
Left=120<br />
Right=315<br />
Top=120<br />
Bottom=130<br />
<br />
this ini gives me the 4 radiobuttons if I use a custompage<br />
<br />
<br />
<br />
<br />
but the same ini in the welcome.ini defined with :<br />
!define MUI_WELCOMEFINISHPAGE_INI<br />
<br />
gives me only one radiobutton<br />
<br />
this is a bug :L</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">23rd January 2005, 15:21</div></div><div class="posttext">this is a bugNo, it is not a bug. When you use the MUI package you can choose various options for the WELCOME and FINISH pages, such as the MUI_WELCOMEPAGE_TITLE_3LINES, MUI_WELCOMEFINISHPAGE_BITMAP and MUI_FINISHPAGE_RUN settings. Some of these MUI settings make the MUI package alter the ioSpecial.ini file.<br />
<br />
So if you want to make some changes to the WELCOME and FINISH pages, you need to make sure that your changes do not conflict with the changes made by the MUI package.<br />
<br />
If you compile your script (without your extra changes) and run it then you can look at the ioSpecial.ini file in the TEMP folder to see what the MUI package has done (e.g. how many fields are present, what are their sizes, etc). Then you can work out how to add your extra fields and update your script.<br />
<br />
Another way to find out what the MUI package will do to ioSpecial.ini is to look at the MUI source code, but looking at the actual ioSpecial.ini used when running your installer is probably easier to do.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 15:37</div></div><div class="posttext">yes I know this is not a bug... just a sort of <br />
<br />
&quot;you can't do anything that you want ;) &quot;<br />
<br />
I'll have a look at it...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 15:45</div></div><div class="posttext">x</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 15:52</div></div><div class="posttext">x</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 16:00</div></div><div class="posttext">I'm sorry, but I think this acts like a bug...<br />
<br />
i do :<br />
!define MUI_WELCOMEFINISHPAGE_INI welcome.ini<br />
this is what happens in my temp folder :<br />
<br />
&quot;welcome code&quot;<br />
[Settings]<br />
Rect=1044<br />
NumFields=5<br />
RTL=0<br />
NextButtonText=<br />
CancelEnabled=<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=109<br />
Top=0<br />
Bottom=193<br />
Flags=RESIZETOFIT<br />
Text=C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\nseBF.tmp\modern-wizard.bmp<br />
[Field 2]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=10<br />
Text=Bienvenue dans le programme d'installation de K!TV<br />
Bottom=38<br />
[Field 3]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=45<br />
Bottom=150<br />
Text=bla<br />
[Field 4]<br />
Type=radiobutton<br />
Text=blabla<br />
Left=120<br />
Right=315<br />
Top=150<br />
Bottom=160<br />
[Field 5]<br />
Type=radiobutton<br />
Text=blabla2<br />
Left=120<br />
Right=315<br />
Top=160<br />
Bottom=170<br />
<br />
<br />
and the page appears wrong...<br />
I have a look at &quot;iospecial.ini&quot; in the temps folder :<br />
<br />
[Settings]<br />
Rect=1044<br />
NumFields=3<br />
RTL=0<br />
NextButtonText=<br />
CancelEnabled=<br />
[Field 1]<br />
Type=bitmap<br />
Left=0<br />
Right=109<br />
Top=0<br />
Bottom=193<br />
Flags=RESIZETOFIT<br />
Text=C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\nssC3.tmp\modern-wizard.bmp<br />
[Field 2]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=10<br />
Text=test<br />
Bottom=38<br />
[Field 3]<br />
Type=label<br />
Left=120<br />
Right=315<br />
Top=45<br />
Bottom=185<br />
Text=test2<br />
[Field 4]<br />
Type=radiobutton<br />
Text=blabla<br />
Left=120<br />
Right=315<br />
Top=150<br />
Bottom=160<br />
[Field 5]<br />
Type=radiobutton<br />
Text=blabla2<br />
Left=120<br />
Right=315<br />
Top=160<br />
Bottom=170<br />
<br />
why is the [Field 3] &quot;bottom&quot; value modified ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pengyou</div><div class="date">23rd January 2005, 17:02</div></div><div class="posttext">'m sorry, but I think this acts like a bug...As I explained earlier, the MUI package will change the ioSpecial.ini file at run time. So your script needs to take these changes into account. The MUI package only uses 3 fields for the WELCOME page so it adjusts ioSpecial.ini to use only 3 fields, as you found out.<br />
<br />
There is more than one way to do what you want. Here is one way:<br />
<br />
(a) let MUI use the default ioSpecial.ini file (do not use MUI_WELCOMEFINISHPAGE_INI in your script)<br />
<br />
(b) use the WELCOME page PRE function to add the two radio buttons to ioSpecial.ini<br />
<br />
(c) use the WELCOME page SHOW function to make the two radio buttons use the same background as the rest of the page<br />
<br />
and here is some code to do this:!define MUI_PAGE_CUSTOMFUNCTION_PRE   &quot;add_radio_buttons&quot;<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW  &quot;fix_background_color&quot;<br />
  <br />
!insertmacro MUI_PAGE_WELCOME<br />
<br />
...<br />
...<br />
<br />
Function add_radio_buttons<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Settings&quot; &quot;NumFields&quot; &quot;5&quot;<br />
  <br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 3&quot; &quot;Bottom&quot; &quot;150&quot;<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Type&quot;   &quot;radiobutton&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Text&quot;   &quot;blabla&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Left&quot;   &quot;120&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Right&quot;  &quot;315&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Top&quot;    &quot;150&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Bottom&quot; &quot;160&quot;<br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Type&quot;   &quot;radiobutton&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Text&quot;   &quot;blabla&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Left&quot;   &quot;120&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Right&quot;  &quot;315&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Top&quot;    &quot;160&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Bottom&quot; &quot;170&quot;<br />
<br />
FunctionEnd<br />
<br />
Function fix_background_color<br />
  Push $0<br />
<br />
  GetDlgItem $0 $MUI_HWND 1203<br />
  SetCtlColors $0 &quot;&quot; &quot;FFFFFF&quot;<br />
  GetDlgItem $0 $MUI_HWND 1204<br />
  SetCtlColors $0 &quot;&quot; &quot;FFFFFF&quot;<br />
<br />
  Pop $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 17:59</div></div><div class="posttext">I really have to thank you<br />
<br />
I try it this evening and come back to thank you...<br />
<br />
want a kiss ? :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">23rd January 2005, 18:41</div></div><div class="posttext">it works fine<br />
<br />
<br />
really, really, thank you pengyou<br />
<br />
:love:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">24th January 2005, 21:23</div></div><div class="posttext">hello, I'm back...<br />
<br />
I have done what you said, pengyou, and it works... that means it is well displayed...<br />
but I can't read the checkbox value, and I don't know where I'm wrong...<br />
<br />
<br />
this is my code :<br />
<br />
<br />
<br />
<br />
;page finish<br />
	!define MUI_PAGE_CUSTOMFUNCTION_PRE &quot;un.add_shortcuts_finishpage&quot;<br />
	!define MUI_PAGE_CUSTOMFUNCTION_SHOW &quot;un.fix_background_color&quot;<br />
	!define MUI_PAGE_CUSTOMFUNCTION_LEAVE &quot;un.finishpage&quot;<br />
	!define MUI_FINISHPAGE_TITLE &quot;$MUI_FINISHPAGE_TITLE&quot;<br />
	!define MUI_FINISHPAGE_TEXT &quot;$MUI_FINISHPAGE_TEXT&quot;<br />
<br />
<br />
;page de fin de désinstallation<br />
	!insertmacro MUI_UNPAGE_FINISH<br />
<br />
<br />
<br />
and then I want to read the checkbox value of the 6th field...<br />
the function that does not work :<br />
<br />
Function un.finishpage<br />
  <br />
	ReadINIStr $R0 &quot;$TEMP\ioSpecial.ini&quot; &quot;Field 6&quot; &quot;State&quot;<br />
	StrCpy $R0 $R0<br />
	StrCmp $R0 &quot;1&quot; shortcut end<br />
	shortcut:<br />
	CreateShortcut &quot;$DESKTOP\K!TV.lnk&quot; &quot;$INSTDIR\K!TV.exe&quot; &quot;&quot; &quot;$INSTDIR\K!TV.exe&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;$(desktv)&quot;<br />
	goto end<br />
end:<br />
<br />
<br />
FunctionEnd<br />
<br />
the command createshortcut works fine outside the readinistr, etc...<br />
<br />
but this command is not called in this function, i can't read a &quot;1&quot; value to the state of my 6th field...<br />
<br />
<br />
why ?<br />
<br />
is it because of my function called by MUI_CUSTOMFUNCTION_LEAVE ?<br />
<br />
and what else can I do ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th January 2005, 21:28</div></div><div class="posttext">ioSpecial.ini will be in $PLUGINSDIR not $TEMP.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">24th January 2005, 21:48</div></div><div class="posttext">arf<br />
<br />
thanks it works now lol<br />
<br />
<br />
I found it on my hard drive on a &quot;temp&quot; directory...<br />
I couldn't know this directory called temp was the pluginsdir directory :D<br />
<br />
<br />
<br />
<br />
thank you...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">24th January 2005, 21:56</div></div><div class="posttext">$PLUGINSDIR is a randomly generated folder inside the $TEMP folder called &quot;nsxxxx.tmp&quot;.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">25th January 2005, 16:54</div></div><div class="posttext">hello I encountered some problem with the page created like pengyou said...<br />
<br />
(with this sort of code :<br />
	!define MUI_PAGE_CUSTOMFUNCTION_PRE &quot;un.add_radio_buttons&quot;<br />
and<br />
<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Settings&quot; &quot;NumFields&quot; &quot;5&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 3&quot; &quot;Bottom&quot; &quot;150&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Type&quot;   &quot;radiobutton&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Text&quot;   &quot;$(reinstktv)&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Left&quot;   &quot;120&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Right&quot;  &quot;315&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Top&quot;    &quot;120&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;Bottom&quot; &quot;130&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 4&quot; &quot;State&quot; &quot;1&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Type&quot;   &quot;radiobutton&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Text&quot;   &quot;$(uninstktv)&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Left&quot;   &quot;120&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Right&quot;  &quot;315&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Top&quot;    &quot;140&quot;<br />
	!insertmacro MUI_INSTALLOPTIONS_WRITE &quot;ioSpecial.ini&quot; &quot;Field 5&quot; &quot;Bottom&quot; &quot;150&quot;<br />
<br />
I have some clipping :L<br />
Seems to be a display bug :L<br />
when I'm hiding the window, and make it come back, the radiobuttons have disappeared and I must put my mouse on it in order to they reappear...<br />
<br />
<br />
why why why... don't know...<br />
<br />
any ideas ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">superwan</div><div class="date">25th January 2005, 21:35</div></div><div class="posttext">problem solved... my bottom value for the third field wasn't correct...<br />
<br />
<br />
dumb am I :D</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>