<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Another NSIS Self-Extractor, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Another NSIS Self-Extractor NSIS Discussion" />
	
	<title> Another NSIS Self-Extractor [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Another NSIS Self-Extractor</div>
<hr />
<div class="pda"><a href="t-213807.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213807">Another NSIS Self-Extractor</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Aaron's rod</div><div class="date">21st April 2005, 22:28</div></div><div class="posttext">Hi! I'm new here.<br />
<br />
Correct if I am wrong, but I'm going to break now Afrow UK's NSIS Self-Extractor monopoly. :)<br />
<br />
So I made new NSIS Self-Extractor kit. It's based on sdbarker_tiny UI what I modified with Resource Hacker and I used Afrow UK's NSIS Self-Extractor as example (Afrow UK's define and macro system is mind blowing). This SE isn't even nearly exhaustive as Afrow UK's, but it does the job.<br />
<br />
I probably should rename this SE kit to NSIS Self-Extractor lite or something to make a difference Afrow's SE kit, hmm maybe later.<br />
<br />
I am not so great scripter/coder so if you know better way to do something or something is just wrong in my scripts please tell it to me.<br />
<br />
<br />
So take a look.<br />
<br />
http://koti.mbnet.fi/ckv/images/ckvse2.png<br />
<br />
Supports also license page (http://koti.mbnet.fi/ckv/images/ckvse1.png)<br />
Install (Extract) files page (http://koti.mbnet.fi/ckv/images/ckvse3.png)<br />
<br />
Download (http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st April 2005, 22:49</div></div><div class="posttext">Nice and simple :)<br />
<br />
If you could change the name, I'd be grateful in case people do not realise they are two different kits.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aaron's rod</div><div class="date">26th April 2005, 20:49</div></div><div class="posttext">Update<br />
<br />
Changes:<br />
 UI improvements (checkbox &amp; radiobuttons license page)<br />
 Back button is now properly disabled <br />
 File replace prompt and checkbox to disable it<br />
 Open readme file function<br />
 Name changed to ckv Self-Extractor<br />
<br />
<br />
Some notes.<br />
You cant use Open dir and replace prompt checkbox at the same time. If you use open dir function you cant use file replace prompt (will be fixed at next release).<br />
<br />
Note:<br />
Heres my macro for file replacing. This works, but now I have to use two parameters (directory and file) to get it work right. Is there any better way to do this?<br />
<br />
Also I am using +offset in the in MessageBox function there are no mention in the NSIS documentation that this would work (seem to work with me :) ). Is it valid? If it is someone should add mention of it in the NSIS documents.<br />
<br />
<br />
!insertmacro EXTRACT_FILE &quot;&quot; &quot;license.txt&quot;<br />
<br />
!macro EXTRACT_FILE DIR FILE<br />
<br />
  !ifdef USE_REPLACE<br />
    StrCmp $checkb_val &quot;0&quot; 0 +5<br />
    IfFileExists &quot;$OUTDIR\${FILE}&quot; 0 +4<br />
      MessageBox MB_YESNOCANCEL &quot;File...?&quot; IDYES +3 IDCANCEL +5<br />
      DetailPrint &quot;Skipped by user: ${FILE}&quot;<br />
      Goto +2<br />
      File &quot;${DIR}${FILE}&quot;<br />
      Goto +2<br />
      Abort<br />
  !else<br />
    File &quot;${DIR}${FILE}&quot;<br />
  !endif<br />
<br />
!macroend<br />
<br />
Download (http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip) ckv Self-Extractor + example<br />
or load the attachment file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">26th April 2005, 21:56</div></div><div class="posttext">I've used two params in my version.<br />
<br />
Relative jumps can be used on any flow-control instructions (including MessageBox).<br />
However, relative jumps do not work for compile-time instructions (such as File). You need to use labels to jump over compile-time instructions properly.<br />
If you use a relative jump (say Goto +2) before a compile-time instruction, you'll find that it jumps over everything including the next run-time instruction, which is usually not what one wants.<br />
<br />
To use labels in macro's that are going to be included many times, see this page:<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=675&amp;instances=0,44<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aaron's rod</div><div class="date">27th April 2005, 10:21</div></div><div class="posttext">Thanks Stu. :)<br />
But would this mean that even if you press no in the file overwrite prompt the file will be still overwritten? Or am i just confused? Because I am sure it don't overwrite files if you press no and it seems to work just like it should work.<br />
<br />
I did little search with google on NSIS documents.<br />
old NSIS document (2004): Relative Jumps (http://2004.cusec.ca/doc/DocSrc/Section4.4.html#4.4)<br />
There was this note.<br />
&quot;Note: relative jumps don't work with Exch, File...&quot;<br />
<br />
Current NSIS document: Relative Jumps (http://nsis.sourceforge.net/Docs/Chapter4.html#4.4)<br />
That note is gone.<br />
<br />
So maybe it's fixed. Maybe in 2.02<br />
NSIS Changelog 2.02 (http://sourceforge.net/project/shownotes.php?release_id=277274)<br />
&quot;Made relative jumps work with instructions that add multiple entries&quot;<br />
:confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th April 2005, 13:55</div></div><div class="posttext">Ah yes, you're right there :)<br />
I'm an old school NSIS so I often miss new things :(<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Aaron's rod</div><div class="date">2nd May 2005, 16:13</div></div><div class="posttext">Update<br />
<br />
Changes: UI improvements and two new UI's (tiny and simple)<br />
 File overwrite prompt macro uses labels<br />
 Can use open dir and overwrite prompt at the same time :D <br />
Screens:<br />
Tiny UI is smaller than default UI (suprise) (http://koti.mbnet.fi/ckv/images/ckvse5.png)<br />
Simple UI is even smaller (http://koti.mbnet.fi/ckv/images/ckvse6.png) <br />
<br />
Download (http://koti.mbnet.fi/ckv/downl.php?id=ckvse.zip)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>