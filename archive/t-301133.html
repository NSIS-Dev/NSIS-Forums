<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Displaying files, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Displaying files NSIS Discussion" />
	
	<title> Displaying files [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Displaying files</div>
<hr />
<div class="pda"><a href="t-301133.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=301133">Displaying files</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mstone42</div><div class="date">16th December 2008, 21:01</div></div><div class="posttext">In my first foray into NSIS (and installers in general) I have almost finished my very first installer, but the last step is causing me some serious headaches.  I would like to read in a file (e.g. Release Notes or Change Log) and display that as the last page of the installer.  It's working (sorta), but the file is over 2K in size.  Registers only hold 1K, so I'm filling registers as the file is read, but the control element on the screen also only holds 1K.  I thought about using the License page, but it has that &quot;I Agree&quot; button on it.  Any (better/alternate) ideas?<br />
<br />
Thanks!<br />
Mitch<br />
<br />
<br />
Here's the code so far:<br />
<br />
; ---------------------------<br />
; header stuff here...<br />
; ---------------------------<br />
<br />
Page instfiles<br />
Page custom PageReleaseNotes &quot;&quot; &quot;&quot;<br />
<br />
; ------------------------------------------------------------------<br />
; Reads in the Release Notes and displays at end of installtion<br />
<br />
Var Dialog<br />
Function PageReleaseNotes  <br />
  nsDialogs::Create /NOUNLOAD 1018<br />
  Pop $Dialog<br />
  ${If} $Dialog == error<br />
    Abort<br />
  ${EndIf}<br />
  <br />
  StrCpy $R1 &quot;&quot;<br />
  StrCpy $R2 &quot;&quot;<br />
  <br />
  ClearErrors<br />
  StrCpy $R0 &quot;Release Notes$\r$\n&quot;<br />
  <br />
  StrCpy $9 0<br />
  FileOpen $1 &quot;$INSTDIR\icw\release_notes.txt&quot; r<br />
  IfErrors ReadErr<br />
  <br />
  ReadLoop:<br />
    FileRead $1 $2<br />
    IfErrors LoopErr<br />
    <br />
    StrLen $5 $R0<br />
    ${If} $5 &gt;= 1000  ;; we're about to exceed register capacity<br />
      StrLen $5 $R1<br />
      ${If} $5 &gt; 0<br />
        StrCpy $R2 $R0<br />
      ${Else}<br />
        StrCpy $R1 $R0<br />
      ${EndIf}<br />
      StrCpy $R0 &quot;&quot;<br />
    ${EndIf}<br />
    StrCpy $4 $R0<br />
    StrCpy $R0 &quot;$4 $\r$\n $2&quot;<br />
    IntOp $9 $9 + 1<br />
      <br />
    GoTo ReadLoop<br />
<br />
  LoopErr:<br />
    StrCpy $4 $R0  ; make sure we grab that last line read in<br />
    StrCpy $R0 &quot;$4 $\r$\n $2&quot;<br />
    <br />
    FileClose $1<br />
  ReadErr:  <br />
  <br />
  nsDialogs::CreateControl /NOUNLOAD ${__NSD_Text_CLASS} \<br />
    ${DEFAULT_STYLES}|${WS_TABSTOP}|${ES_AUTOHSCROLL}|${ES_MULTILINE}|${WS_VSCROLL} \<br />
    ${__NSD_Text_EXSTYLE} 0 0 100% 100% &quot;$R1 $R2 $R3&quot;<br />
  Pop $0<br />
  <br />
  ; Display the dialog<br />
  nsDialogs::Show<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th December 2008, 18:27</div></div><div class="posttext">You could use this:<br />
http://nsis.sourceforge.net/CustomLicense_plug-in<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">18th December 2008, 08:14</div></div><div class="posttext">Also you may want to try this script...<br />
<br />
http://nsis.sourceforge.net/Readme_Page_Based_on_MUI_License_Page</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JasonFriday13</div><div class="date">26th December 2008, 18:31</div></div><div class="posttext">Thanks for suggesting my plugin. Here is the other &quot;half&quot;: http://nsis.sourceforge.net/External_License_file</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>