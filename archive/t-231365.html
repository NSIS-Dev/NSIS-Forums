<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Component Manager, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Component Manager NSIS Discussion" />
	
	<title> Component Manager [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Component Manager</div>
<hr />
<div class="pda"><a href="t-231365.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=231365">Component Manager</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">18th November 2005, 23:13</div></div><div class="posttext">I have created a new way to automatically handle repair, adding/removing components, and removal (uninstall) through dynamic script generation.  I call it Component Manager (http://xpui.sf.net/compmgr), and I have already released the first beta.<br />
<br />
Component Manager (CM for short :P ) replaces the Section, SectionEnd, File, CopyFiles, and SetOutPath commands in NSIS with its own modifications, allowing for a list of files, directories, componens, and (soon) shortcuts to be created without using an MSI-style database system.  CM is kind of big (180-200KB for the runtime incl. the ExperienceUI) but it makes larger programs with a lot of optional components (like Winamp) easy to repair, modify, and remove, plus the installer is much more efficient.  If you've used Winamp recently, you'll notice that it deletes ALL AVS scenes, MilkDrop scenes, etc. when you uninstall it.  It leaves plugins and skins (last I checked) but not much else.  With CM, a list of files is created while the script is compiled, meaning that each file is logged, but at compile time, and that means only, like, 2 lines of code for each file instead of a huge database in the Registry.<br />
<br />
CM's only in beta, so it might (and probably does) have bugs.  One bug in particular is it works great with the ExperienceUI, somewhat with the Modern UI, and hardly at all with the UltraModern UI.  I haven't tried it with the InstallSpider UI yet.<br />
<br />
Behind the scenes, is uses &lt;Program Files&gt;\Common Files\NSIS Installation Data\ComponentDatabase.ini to keep track of which components are installed.  You can't change this filename yet, but I want to make it possible to write to either an INI or a registry key.<br />
<br />
Links:<br />
Wiki Page (http://nsis.sf.net/Component_Manager)<br />
Website (http://xpui.sf.net/compmgr)<br />
Downloads (http://xpui.sf.net/compmgr/?sec=downloads)<br />
Support forum (http://xpui.sf.net/forum/?c=2)<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">19th November 2005, 10:19</div></div><div class="posttext">This looks very nice!<br />
I'll try it some day if I ever need to create a big installer.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">21st November 2005, 04:24</div></div><div class="posttext">Forgot to note in documentation:<br />
${File} command does NOT take wildcards - will try to implement in the future.<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st November 2005, 15:34</div></div><div class="posttext">To implement wildcards with my Self-Extractor I had to use an external executable.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JCD29</div><div class="date">21st November 2005, 22:20</div></div><div class="posttext">I don't understand<br />
I don't manage compiling the example based on your CM...is it normal ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">22nd November 2005, 01:01</div></div><div class="posttext">I'm not sure what you mean by &quot;compiling the example based on my CM&quot;...could you provide more details please?<br />
<br />
-dandaman32</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhaelochon</div><div class="date">22nd November 2005, 13:48</div></div><div class="posttext">He can't compile the example based on your Component Manager. ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dandaman32</div><div class="date">22nd November 2005, 16:45</div></div><div class="posttext">Originally posted by Afrow UK<br />
To implement wildcards with my Self-Extractor I had to use an external executable.How so?  The NSIS 2.11 !tempfile, !appendfile, and !delfile commands would probably be best, but CM includes support for &lt;=2.10 with an external file-writing utility.  It's very limited (files must be under 8kb, and lines must be under 1kb) but it works.<br />
<br />
He can't compile the example based on your Component Manager ;)<br />
<br />
I see...&quot;based on&quot;?  If you're getting compile errors, JCD29, what error are you getting?  I tried installing CM on a fresh copy of NSIS, and it worked fine.  I didn't put a check for this in the installer, but CM requires Windows XP or some files won't copy.  If you really want to know, these files are:<br />
<br />
  &lt;Program Files&gt;\Windows NT\Accessories\Wordpad.exe<br />
  &lt;Program Files&gt;\Windows NT\Accessories\Mswrd6.wpc<br />
  &lt;Program Files&gt;\Windows NT\Accessories\Mswrd8.wpc<br />
  &lt;Program Files&gt;\Windows NT\Accessories\write.wpc<br />
  &lt;Windows&gt;\Notepad.exe<br />
<br />
All of these files go to &lt;NSIS&gt;\Examples\ComponentManager\Data.<br />
<br />
If you aren't using Windows XP (or maybe Win2000) these files will be in &lt;Program Files&gt;\Accessories - I think, it's been a year and a half since I upgraded to Windows XP from Windows ME.<br />
<br />
I copy them around your machine because they're too big to include in the installer, plus I don't want to help pirate Windows components.<br />
<br />
-dandaman32</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>