<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" HKLM and &quot;limited user&quot; installations, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  HKLM and &quot;limited user&quot; installations NSIS Discussion" />
	
	<title> HKLM and &quot;limited user&quot; installations [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  HKLM and &quot;limited user&quot; installations</div>
<hr />
<div class="pda"><a href="t-237355.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=237355">HKLM and &quot;limited user&quot; installations</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">l_d_allan</div><div class="date">6th February 2006, 21:34</div></div><div class="posttext">I'm trying to convert an older InstallShield script that wrote information about the installation directory path to:<br />
HKLM SOFTWARE\Microsoft\Windows\CurrentVersion\Apps Path<br />
<br />
Is this a &quot;no no&quot; as far as writing to HKLM because it assumes the end-user has Administator privilege?<br />
<br />
In the past, I've never worried about this, but perhaps I should have. I've pretty much assumed the end-user was on a system as Administrator.<br />
<br />
My understanding is that a Win2000 / WinXp &quot;limited user&quot; without &quot;power user&quot; or &quot;administator&quot; privilege can read HKLM registry entries, but not write them.<br />
<br />
I've looked at the Microsoft webpages regarding WinXp certification, but I'm not clear about what is recommended vs what is required. A link (or three) for additional information would be appreciated.<br />
<br />
We want to be able to detect previous installations (to re-install) and to leave registry &quot;bread crumbs&quot; as to where the installation was done. Is something related to HKLM a poor choice?<br />
<br />
Some of the webpages I've read seem to indicate that during installation, there may be some increase in privilege for a &quot;limited user&quot;, but that this won't be available during normal running of the app ... but I may not have been clear about what I was reading.<br />
<br />
The examples for classic and MUI use HKCU.<br />
<br />
I'm trying to simplify the &quot;detection sniffer&quot; as to where previous installations have been done. I would prefer not to have to &quot;sort out&quot; that there is a really old installation indicated by HKLM entries, and a newer installation indicated by a HKCU entry.<br />
<br />
I suppose if this stuff was simple, it wouldn't pay so well &lt;g ... written as a freeware developer&gt;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">7th February 2006, 04:10</div></div><div class="posttext">Generally, it's best to make sure any installations are performed using an administrator account.<br />
<br />
Here's a few links I found you might find helpful regarding user accounts:<br />
http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ua_c_account_types.mspx<br />
<br />
http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/luawinxp.mspx<br />
<br />
As far as automatically elevating prevledges, I'm not sure if this is something that can be done with NSIS or not.  (probably the best you could do is check permsission .onInit and if not sufficient, exit the installation.)<br />
<br />
On a related note, I did find elevated installations seem to be possible with Windows Installer:<br />
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/msi/setup/alwaysinstallelevated.asp<br />
<br />
Perhpas other might offer more feedback related to NSIS...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>