<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Disable progress bar, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Disable progress bar NSIS Discussion" />
	
	<title> Disable progress bar [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Disable progress bar</div>
<hr />
<div class="pda"><a href="t-293979.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293979">Disable progress bar</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">wheleph</div><div class="date">4th July 2008, 15:39</div></div><div class="posttext">Hello, guys.<br />
<br />
I wan't to disable progress bar in MUI_PAGE_INSTFILES windows. Any suggestions?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th July 2008, 13:20</div></div><div class="posttext">Hide it using ShowWindow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wheleph</div><div class="date">11th July 2008, 16:35</div></div><div class="posttext">&gt; Hide it using ShowWindow<br />
kichik,<br />
I don't understand what do you mean. I don't need to hide the whole window I just don't want a progress bar to be displayed. Give some script snippet to clarify your idea.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">11th July 2008, 20:25</div></div><div class="posttext">&quot;ShowWindow&quot; is an unfortunately-named function in the Windows APIs that allow you to show/hide an UI element.. be that a window or a textbox, checkbox, progress bar, etc.<br />
<br />
NSIS keeps the same function name for code reasons.<br />
<br />
What kichik means is that you should hide the progressbar by using &quot;ShowWindow &lt;progress bar control hwnd&gt; ${SW_HIDE}&quot;<br />
<br />
That &quot;${SW_HIDE}&quot; is a code that is defined in one of the include files that comes with NSIS.  Add &quot;!include WinMessages.nsh&quot; to the top of your script so that your installer will know what &quot;SW_HIDE&quot; means.<br />
<br />
You can get &quot;&lt;progress bar control hwnd&gt;&quot; from the inner dialog of the installer.  The inner dialog you can find with:<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
Basically this says &quot;Inside $HWNDPARENT (the installer's hwnd), look for the control identified as class #32770 (a dialog) and put the result in $0&quot;.<br />
<br />
Then you need the ID of the control within that dialog.  My suggestion is to download WinSpy++.  Run that and drag the crosshairs over the progress bar when running an installer.  It'll tell you the Control ID.  In my case it's &quot;3EC&quot;.  This is a hexadecimal number, so if you refer to it, put &quot;0x&quot; in front.<br />
<br />
So to get the control's hwnd out of the dialog, you would use:<br />
&quot;GetDlgItem $1 &lt;dialog_hwnd&gt; 0x3ec&quot;<br />
Meaning &quot;From &lt;dialog_hwnd&gt;, get the control with ID 0x3ec, and put that in $1&quot;.<br />
<br />
So now you have all the information you need to hide it.<br />
<br />
Section &quot;&quot;<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $1 $0 0x3ec<br />
ShowWindow $1 ${SW_HIDE}<br />
SectionEnd<br />
<br />
<br />
That &quot;3ec&quot; isn't likely to change - however, if you want to make your code a little more robust, you can also refer to the progress bar's class.  Remember how we got the class &quot;#32770&quot; to get the inner dialog?  We can use the same to get the progressbar out of the inner dialog.  The progressbar's class is &quot;msctls_progress32&quot;.  So the new code would become:<br />
<br />
<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
FindWindow $1 &quot;msctls_progress32&quot; &quot;&quot; $0<br />
ShowWindow $1 ${SW_HIDE}<br />
<br />
<br />
The code above should work fine in your installer (although you may wish to move the code outside of the Section code and inside a function that handles the dialog before any Sections), but I hope the above taught you something about FindWindow, ShowWindow, GetDlgItem and how to get a Control ID using WinSpy++ as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wheleph</div><div class="date">15th July 2008, 09:48</div></div><div class="posttext">Thanks, Animaether, for your great post. It gives a comprehensive answer to my question. I've used the second approach (with 'FindWindow $1 &quot;msctls_progress32&quot; &quot;&quot; $0') in my installer.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>