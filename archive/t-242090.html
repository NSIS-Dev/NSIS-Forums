<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" extract program version from .h file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  extract program version from .h file NSIS Discussion" />
	
	<title> extract program version from .h file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  extract program version from .h file</div>
<hr />
<div class="pda"><a href="t-242090.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242090">extract program version from .h file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">wstokes</div><div class="date">29th March 2006, 16:16</div></div><div class="posttext">I'd like to further automate the release process for my Open Source app. Currently the applications version # is defined in three places:<br />
-a .h file<br />
-the .nsi NSIS script<br />
-a Mac OS X plist file<br />
<br />
I can automatically generate a proper Mac OS X Disk image using a bash script which extracts the version from the .h file like so:<br />
<br />
VERSION=`cat ../src/${appName}/${appname}.h | awk &quot;/${APPNAME}_VERSION/ {print \\$3}&quot; | sed s/\&quot;//g`<br />
<br />
where appName=Reveal and appname and APPNAME are generated like so:<br />
<br />
APPNAME=`echo ${appName} | awk '{print toupper($0)}'`<br />
appname=`echo ${appName} | awk '{print tolower($0)}'`<br />
<br />
A copy of the .h can be seen here:<br />
http://svn.sourceforge.net/viewcvs.cgi/albumshaper/trunk/clay/src/Reveal/reveal.h?view=markup&amp;rev=824<br />
<br />
Currently my NSIS .nsi script defines the version like so:<br />
<br />
!define APPNAME &quot;Reveal&quot;<br />
!define APPNAME_LOWER &quot;reveal&quot;<br />
!define APPVERSION &quot;1.0&quot;<br />
<br />
Is it possible to automatically determine the application version using the .h file like I do under Bash on OSX using NSIS? It would be really nice to get my installer script working great so I don't have to modify it every time I release a new version!<br />
<br />
I looked at the FileOpen and FileRead commands but don't these need to be run within a Function that is inherantly run at installtime? What I'm needing is somethign that is exectued at script compile time so I can appropriately name the generated installer and also properly display the version when running the installer as well. Since the installer is not installing a copy of the source figuring out how to do this at compile time is essential...<br />
<br />
-Will</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th March 2006, 16:28</div></div><div class="posttext">Well unfortunately the Wiki is currently down, but this page will show you (when Wiki is back up) how to use NSIS run time instructions at compile time on the compiling system:<br />
<br />
http://nsis.sourceforge.net/Invoking_NSIS_run-time_commands_on_compile-time<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>