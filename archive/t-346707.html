<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Install Type with specifi choicxe and hidden selection: How?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Install Type with specifi choicxe and hidden selection: How? NSIS Discussion" />
	
	<title> Install Type with specifi choicxe and hidden selection: How? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Install Type with specifi choicxe and hidden selection: How?</div>
<hr />
<div class="pda"><a href="t-346707.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=346707">Install Type with specifi choicxe and hidden selection: How?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">within</div><div class="date">1st August 2012, 08:40</div></div><div class="posttext">Hi everyone,<br />
<br />
Purpose of my Installeur<br />
I'm preparing an installer with the ability to install an application available in 2 versions.<br />
<br />
Principles to follow<br />
For each version, I have dedicated files, and dedicated settings (different network card settings for example).<br />
<br />
I'd like to offer the user to have 2 choices only:<br />
- Install type Development<br />
- Install type Operation_only<br />
<br />
For each choice, I wrote 2 dedicated sections, for which file path, settings and targets are different.<br />
<br />
So, I have 4 sections:<br />
- Section Development_File<br />
- Section Development_Settings<br />
- Section Operation_File<br />
- Section Operation_Settings<br />
<br />
So, for Install type Development, the user should only see the sections Development_File<br />
&amp; Development_Settings, the 2 others should be hidden. He can select or unselect 0, 1 or both of these 2 components. Based on the same idea, if he chooses Install type Operation_only, the 2 Development related sections will be hidden and he will be able to choose among the 2 Operation sections available only.<br />
<br />
Problem<br />
I spent quite some time now, reading the NSIS documentations, examples with install type, or using radio butrtons with slection/unselection macros, but I can't fin a way to properly do this. Either I see all 4 sections, or I have no selection options available... I tried also with SectionIn, but I can't figure out how it works...<br />
<br />
So, if one of you have some remarks, comments and especially some help to provide me, I would be very happy!<br />
<br />
Thanks in advance,<br />
within</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st August 2012, 08:49</div></div><div class="posttext">There's no need to hide sections, you can simply make the Op sections and Dev sections mutually exclusive.<br />
<br />
1. Make two sectiongroups. One containing Dev_File and Dev_Settinsg, and one containing Op_File and Op_Settings. http://nsis.sourceforge.net/Docs/Chapter4.html#4.6.1.5<br />
2. In .onInit, enable the default sections and disable the others (use the macros in Sections.nsh). Also, set a variable to store this selection state (Op or Dev).<br />
3. In .onSelChange:<br />
${If} $State == &quot;Dev&quot;<br />
  ${If} ${SectionIsSelected} ${Op_File}<br />
  ${OrIf} ${SectionIsSelected} ${Op_Settings}<br />
    !insertmacro UnselectSection ${Dev_File}<br />
    !insertmacro UnselectSection ${Dev_Settings}<br />
    StrCpy $State &quot;Op&quot;<br />
  ${EndIf}<br />
${Else}<br />
  ${If} ${SectionIsSelected} ${Dev_File}<br />
  ${OrIf} ${SectionIsSelected} ${Dev_Settings}<br />
    !insertmacro UnselectSection ${Op_File}<br />
    !insertmacro UnselectSection ${Op_Settings}<br />
    StrCpy $State &quot;Dev&quot;<br />
  ${EndIf}<br />
${EndIf}  <br />
<br />
<br />
That's all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">within</div><div class="date">1st August 2012, 09:03</div></div><div class="posttext">MSG, that looks promising.<br />
I will look how to make section groups.<br />
I am not sure there are real &quot;default&quot; sections, just Dev or Ope. If you mean, making one of these 2 as default, I guess it means it is the &quot;on startup&quot; selection of install type...<br />
<br />
Thanks for your help!<br />
Will come back when done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">1st August 2012, 10:57</div></div><div class="posttext">If you mean, making one of these 2 as default, I guess it means it is the &quot;on startup&quot; selection of install type...<br />
<br />
Yes, that's what I mean. If you want none to be selected by default, simply disable all sections and set the state variable to empty.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">within</div><div class="date">2nd August 2012, 01:39</div></div><div class="posttext">I am back with some feedback as promised.<br />
<br />
Method worked perfectly as you mentioned, MSG.<br />
<br />
To summarize, I did add the 2 sebsections:<br />
SectionGroup &quot;Dev&quot;<br />
Section &quot;Dev_File&quot; Dev_File<br />
#code#<br />
SectionEnd<br />
Section &quot;Dev_Settings&quot; Dev_Settings<br />
#code#<br />
SectionEnd<br />
SectionGroupEnd<br />
SectionGroup &quot;Op&quot;<br />
Section &quot;Op_File&quot; Op_File<br />
#code#<br />
SectionEnd<br />
Section &quot;Op_Settings&quot; Op_Settings<br />
#code#<br />
SectionEnd<br />
SectionGroupEnd<br />
<br />
<br />
I defined a varibale to follow:<br />
Var /GLOBAL State<br />
<br />
<br />
and in on.Init function I added the following lines at the end to have the Dev sections to be selected by default:<br />
  StrCpy $State &quot;FAS HMI for Development&quot;<br />
  !insertmacro UnselectSection ${&quot;Op_File}<br />
  !insertmacro UnselectSection ${Op_Settings}</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>