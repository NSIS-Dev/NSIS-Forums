<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" UTF-8 scripts, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  UTF-8 scripts NSIS Discussion" />
	
	<title> UTF-8 scripts [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  UTF-8 scripts</div>
<hr />
<div class="pda"><a href="t-152812.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=152812">UTF-8 scripts</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">16th October 2003, 15:10</div></div><div class="posttext">i figured that utf-8 scripts (like scripts containing Chinese, Japanese, Korean) don't compile, since one has to remove the &quot;ï»¿&quot; at the very beginning of the document. maybe nsis should ignore that, so one does not have to edit the script each time it's been saved.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">16th October 2003, 15:12</div></div><div class="posttext">NSIS does not use Unicode, because it is not supported by Win9x.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">18th October 2003, 15:27</div></div><div class="posttext">you could just have a small program that processes the file beforehand to convert the file into ansi so nsis can cope with it.<br />
<br />
you could use a richedit v2 control to load the file and then save it out as a normal text file.  not the best of ideas since some of the extra characters (especially for languages that need it) would be lost but it would give you a useable file :)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">25th October 2003, 15:38</div></div><div class="posttext">had a few minutes to kill and knocked up this.<br />
<br />
the program will convert a unicode file to ansi (not exactly sure how things will be mapped with files that fully use extended characters) and it requires riched20.dll (richedit v2+ basically on most machines now - checks for this on init).<br />
<br />
usage: create a shortcut to the test program (for the moment) and add the file to convert onto the end of the target string.<br />
<br />
at the moment it will output to 'convert.nsi' but will increase the features for tomorrow (only spent 30 minutes on it ;) )<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th October 2003, 15:57</div></div><div class="posttext">Why would you use richedit to do this conversion? It isn't really something you should use for conversion.<br />
<br />
You can convert text to ANSI using any text editor like Notepad.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">25th October 2003, 17:03</div></div><div class="posttext">i know it's not the best method to use for conversion but it's just doing the same as a text editor would do (though notepad on my win98 system can't do that conversion).<br />
<br />
thought it would be useful to have a simple conversion from a unicode file to ansi which is automatically done, nevermind :(<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th October 2003, 17:08</div></div><div class="posttext">Why not use WideCharToMultiByte (http://msdn.microsoft.com/library/en-us/intl/unicode_2bj9.asp)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">25th October 2003, 17:17</div></div><div class="posttext">hadn't considered that until Joost posted. thought the richedit idea was a simple way to do it since from what i understand it will convert things using WideCharToMultiByte internally (so it will cope with displaying in the ansi version of the richedit control).<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">25th October 2003, 17:25</div></div><div class="posttext">All NT versions of Notepad support this convertion. Because Win9x doesn't support Unicode, it's unlikely that anyone using Win9x would product Unicode files.<br />
<br />
If you want to convert a file, you'd better use standard Windows API than a RichEdit control (which is designed to display data).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">25th October 2003, 17:35</div></div><div class="posttext">oops, should have realised that. using the api's does make more sense now i've had it pointed out, just not sure why i didn't think about it earlier. (feel very stupid now but thank you for pointing things out)<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DrO</div><div class="date">27th October 2003, 15:57</div></div><div class="posttext">taking comments made earlier i had a go at using the WideCharToMultiByte and this is what i've done.<br />
<br />
When calling it just pass the filename to read and the file to save to and if all is fine it will generate a ansi version of the file (will indicate errors via messageboxes at the moment).<br />
<br />
The file paths need to be full paths and if they are long names then it is advisable to put quotes around the path (&quot;c:\blah blah.log&quot;).<br />
<br />
It will also check before conversion to see if the file is unicode or not (which is sensible).<br />
It currently won't strip out the unicode file indicator from the start if there is one (hence the wierd character at the start of converted files)<br />
<br />
Slightly off topic, it could be useful for makensisw to have the ability to run a preprocessing script/program (like vc++, etc can do). Just a thought<br />
<br />
-daz</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OCedHrt</div><div class="date">4th January 2004, 11:08</div></div><div class="posttext">Win9x doesn't need to support unicode because of MSFT's Unicode Layer. I have asked several developers who are familiar with coding w/ unicode and they all say that it is no where near as difficult and daunting a task as most developers think it is.<br />
<br />
-wow..I can't type :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th January 2004, 11:19</div></div><div class="posttext">Then NSIS would have to include huge and buggy Win9x Unicode libraries, which will make your installer more than 10 times larger.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OCedHrt</div><div class="date">4th January 2004, 11:23</div></div><div class="posttext">Dunno, maybe. But the dll itself is &lt; 245k. Maybe that is 10 times larger..hm. dunno how big NSIS is but still..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th January 2004, 11:31</div></div><div class="posttext">The NSIS exehead is only 34 KB large. Supporting this buggy library would require lots of work, we would have to create sepeate Win9x/NT code and include the library which is almost 10 times larger than the installer itself.<br />
<br />
So it is not possible to support it. However, NSIS does support MBCS so you can still use all languages.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>