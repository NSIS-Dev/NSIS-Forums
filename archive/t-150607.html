<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with LANGDLL, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with LANGDLL NSIS Discussion" />
	
	<title> Problem with LANGDLL [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with LANGDLL</div>
<hr />
<div class="pda"><a href="t-150607.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150607">Problem with LANGDLL</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">27th September 2003, 12:35</div></div><div class="posttext">I use the following macros in my NSIS script:<br />
<br />
!define FOLDERNAME &quot;WinCD&quot;<br />
<br />
;-------------------------------<br />
;Language Settings<br />
<br />
!define MUI_LANGDLL_REGISTRY_ROOT &quot;HKLM&quot;<br />
!define MUI_LANGDLL_REGISTRY_KEY &quot;Software\${FOLDERNAME}&quot;<br />
!define MUI_LANGDLL_REGISTRY_VALUENAME &quot;Installer Language&quot;<br />
<br />
;always show language selection dialog<br />
!define MUI_LANGDLL_ALWAYSSHOW <br />
<br />
But unfortunately it also asks for the language if I start the uninstaller, because it doesn't even store the selected value in the registry. In other NSIS versions it worked without problems.<br />
<br />
Please help.<br />
Thanks Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th September 2003, 12:51</div></div><div class="posttext">It is doing what you have told it to do, that is what MUI_LANGDLL_ALWAYSSHOW is supposed to do. From the MUI docs:<br />
<br />
MUI_LANGDLL_ALWAYSSHOW<br />
Always show the language selection dialog, even if a language has been stored in the registry. The language stored in the registry will be selected by default.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">27th September 2003, 12:54</div></div><div class="posttext">But in older versions this only means, if I start a new installer then it displays the language selection dialog. In the uninstaller it took always the language of the installer, because it makes no sense running the uninstaller in another language than the installer.<br />
<br />
How can I accomplish that behaviour with the new version?<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">27th September 2003, 23:48</div></div><div class="posttext">Works fine for me.<br />
<br />
The language is stored after the installation has been completed, so a wrong language choice won't give any problems.<br />
<br />
Therefore, you have to complete the installation before the key will be written.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">8th October 2003, 17:48</div></div><div class="posttext">As I moved the installer language setting to the beginning of the script as in your example it works.<br />
You should change that in you readme, because there the setting made after the pages. For me that doesn't work. The installer doesn't create a language setting key in the registry. It only works if you define it before the pages.<br />
<br />
regards<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">8th October 2003, 18:02</div></div><div class="posttext">That's not true. It should only be before MUI_LANGDLL_DISPLAY.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Konrad</div><div class="date">8th October 2003, 18:17</div></div><div class="posttext">But in my script it is that way I told you:<br />
As soon as I move the language setting after the pages section, it doesn't store the value in the registry. <br />
I also tried to define MUI_ICON after the pages section but then the compiler says, that MUI_ICON is already defined. Moving MUI_ICON above the pages section als fixes that problem.<br />
<br />
Perhaps I can send you the NSIS-file that you can check it out for yourself. Because I don't want to post it in the forum, please send me your e-mail address.<br />
<br />
Regards<br />
Konrad</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">8th October 2003, 18:38</div></div><div class="posttext">I'm sorry, I misunderstood. It's indeed right that the LangDLL registry settings should be before the instfiles page. I'll fix that in the Readme.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>