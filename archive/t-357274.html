<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" LangString and SimpChinese, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  LangString and SimpChinese NSIS Discussion" />
	
	<title> LangString and SimpChinese [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  LangString and SimpChinese</div>
<hr />
<div class="pda"><a href="t-357274.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=357274">LangString and SimpChinese</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Bernmeister</div><div class="date">13th March 2013, 13:45</div></div><div class="posttext">I have a (MUI2) NSI script for an installer which pops up a MessageBox in the main install section.  I have the MUI_LANGUAGE macros for English and SimpChinese and have also defined LangStrings for the message label in the MessageBox (one each for English and SimpChinese).<br />
<br />
<br />
The SimpChinese LangString text is in Chinese - the actual characters are visible/readable in the NSI file (which is saved in UTF8).<br />
<br />
When I run the installer on English Windows, all is well.  When I run the installer on Chinese Windows, not so.  Despite choosing Simplified Chinese in the language chooser dialog (Simplified Chinese is selected by default), the label in the MessageBox is not the Chinese text I specified in the script - it is garbled/corrupted.  The OK button is in Chinese however.<br />
<br />
If I build the same script with Unicode NSIS from www.scratchpaper.com, the label is in correct Chinese.<br />
<br />
My question: Should NSIS be able to show the label correctly or am I getting the &quot;expected&quot; result (and my only option is to use Unicode NSIS)?<br />
<br />
<br />
<br />
Thanks in advance,<br />
<br />
Bernmeister.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">13th March 2013, 17:05</div></div><div class="posttext">With NSIS (Official ANSI) &lt;= 2.46 you should not use UTF8 source files.<br />
<br />
The actual raw byte values in the file need to be correct so you have to change the encoding/codepage in your text editor and then input the text. If you need to support many different languages you need to be careful so your editor does not mess up the other languages, or use one .nsh per language for LangStrings.<br />
<br />
As a final note, ANSI installers will only show the correct text if the codepage for non-unicode programs in the control panel is set correctly...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Bernmeister</div><div class="date">14th March 2013, 01:19</div></div><div class="posttext">Thanks Anders.<br />
<br />
I did originally try all the encoding types (in Notepad) and got the same result as UTF8.<br />
<br />
If I understand what you're saying, I'd need to run Notepad on a computer which runs the language which I want to add...which is impractical for me (given I want to build on Linux as much as possible).<br />
<br />
I guess I'll use scratchpaper for now and look forward to the release of NSIS 3, assuming it will have Unicode goodness...and there will be a Linux build too!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">14th March 2013, 01:28</div></div><div class="posttext">...or just use a better editor, Notepad2 etc that can save in a specific encoding.<br />
<br />
On *nix you can probably use iconv on the command line to change from utf8 to the correct codepage.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>