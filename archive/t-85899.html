<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstall does not work on 1.96 and 1.97, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstall does not work on 1.96 and 1.97 NSIS Discussion" />
	
	<title> Uninstall does not work on 1.96 and 1.97 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstall does not work on 1.96 and 1.97</div>
<hr />
<div class="pda"><a href="t-85899.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=85899">Uninstall does not work on 1.96 and 1.97</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ghverdun</div><div class="date">25th April 2002, 17:35</div></div><div class="posttext">I have a simple installer with a few files in the install section and no license text.<br />
<br />
The uninstaller fails to remove any files because it appears that the $EXEDIR points to the temp dir and the $INSTDIR and $OUTDIR point to the $EXEDIR instead of the  installed dir.<br />
<br />
Anyone else seeing this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">25th April 2002, 17:37</div></div><div class="posttext">No, but post your script and maybe we can find the mistake...<br />
<br />
Greetz,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ghverdun</div><div class="date">25th April 2002, 17:54</div></div><div class="posttext">Ok, so with this script.. In the uninstaller the Messagebox shows that the  $EXEDIR as set to the temp dir and the $INSTDIR is set to what $EXEDIR should have been set to.<br />
<br />
Name			&quot;Test&quot;<br />
Caption			&quot;Test Installer&quot;<br />
OutFile			&quot;Install_Test.exe&quot;<br />
AutoCloseWindow         false<br />
ShowInstDetails         show<br />
ShowUninstDetails       show<br />
DirText			&quot;Please select a location to install Test (or use the default):&quot;<br />
BrandingText		&quot;Test&quot;<br />
SetOverwrite            on<br />
SetDateSave             on<br />
WindowIcon              off<br />
<br />
InstallDir       	$EXEDIR\test<br />
<br />
;<br />
; Test Components<br />
;<br />
Section Test<br />
  SetOutPath $INSTDIR<br />
  file &quot;Test.exe&quot;<br />
SectionEnd<br />
<br />
Section -post<br />
  SetOutPath $INSTDIR<br />
  <br />
  Delete $EXEDIR\Uninstall_Test.exe<br />
  WriteUninstaller $EXEDIR\Uninstall_Test.exe<br />
SectionEnd<br />
<br />
Section Uninstall<br />
  MessageBox MB_OK &quot;$EXEDIR $INSTDIR&quot;<br />
  Delete &quot;$EXEDIR\Uninstall_Test.exe&quot;<br />
  Delete &quot;$INSTDIR\Test.exe&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">25th April 2002, 19:00</div></div><div class="posttext">This is a working script:Name &quot;Test&quot; <br />
OutFile &quot;Test.exe&quot; <br />
<br />
InstallDir $EXEDIR\test <br />
<br />
Section Test <br />
  SetOutPath $INSTDIR <br />
  file &quot;Test.txt&quot; <br />
SectionEnd <br />
<br />
Section -post <br />
  SetOutPath $INSTDIR <br />
  Delete $INSTDIR\Uninst.exe <br />
  WriteUninstaller $INSTDIR\Uninst.exe <br />
SectionEnd <br />
<br />
Section Uninstall <br />
  Delete &quot;$INSTDIR\Uninst.exe&quot; <br />
  Delete &quot;$INSTDIR\Test.txt&quot;<br />
  RMDir $INSTDIR <br />
SectionEndMistake: be carefull not to mix up $EXEDIR and $INSTDIR. If you define $INSTDIR as $EXEDIR, then you could mix up (without problems) the two vars in the installer section. But in the uninstaller section NOT. The reason is that the uninstaller copies itself to the tempdir to be able to delete itself from the install dir. So $EXEDIR then becomes $TEMP (for the uninstaller, as you observed!) and cannot be used to delete files anymore. For this purpose, keep on using $INSTDIR!<br />
<br />
Good luck, greetz,<br />
-Hendri.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>