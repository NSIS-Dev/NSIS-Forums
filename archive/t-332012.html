<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with uninstaller (removing itself), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with uninstaller (removing itself) NSIS Discussion" />
	
	<title> Problem with uninstaller (removing itself) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with uninstaller (removing itself)</div>
<hr />
<div class="pda"><a href="t-332012.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332012">Problem with uninstaller (removing itself)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DubFX</div><div class="date">29th June 2011, 17:57</div></div><div class="posttext">Hi guys,<br />
<br />
I have troubles with my uninstaller.<br />
When started it removes all files of $PROGRAMFILES\MyApp and should delete itself and the dir afterwards.<br />
<br />
Now the strange thing ist: The uninstaller does remove itself in a strange way:<br />
<br />
It removes itself, but Windows7 (x64) doesn't recognize this for approx 30 seconds. So the uninstaller fails on removing the directory because it seems not be empty.<br />
20-30 seconds after the uninstaller finished the uninstaller is gone in windows explorer view as well. (Refresh doesn't help, but if I try to start the uninstaller again in this period windows says that the file isn't existing.)<br />
<br />
So my trouble is that I can't remove the folder from my uninstaller.<br />
<br />
I see this behaviour only on x64. The same thing on x86 is working as expected.<br />
It is not related to $PROGRAMFILES/$PROGRAMFILES32/64 or something, the uninstaller reads the path and files to delete from the registry.<br />
<br />
I already tried to set the uninstaller to $TEMP because it is locking itself? But it didn't help<br />
<br />
Function un.onInit<br />
SetOutPath &quot;$TEMP&quot;<br />
ClearErrors<br />
FunctionEnd<br />
<br />
Thanks in advance from a clueless beginner! <br />
<br />
DubFX</div></div><hr />


<div class="post"><div class="posttop"><div class="username">drovsky</div><div class="date">9th July 2011, 00:39</div></div><div class="posttext">i'm guessing you might have an &quot;error&quot; in the order of the unintall operations, first you make everythin you have to do before the delete/rmdir instructions, and most important, if you are using any EXC instruction in the uninstall, replace it for ExecWait, in this way it will take longer to proced with the actions, but you have ensure that no deleting file is being used in any operation when you make de delete/rmdir instruction</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>