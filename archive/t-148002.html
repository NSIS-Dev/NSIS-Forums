<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Cursor Image reload, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Cursor Image reload NSIS Discussion" />
	
	<title> Cursor Image reload [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Cursor Image reload</div>
<hr />
<div class="pda"><a href="t-148002.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=148002">Cursor Image reload</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">3rd September 2003, 10:38</div></div><div class="posttext">Hi!<br />
<br />
i sometimes use an old app which everytime i use it replaces the windows cursors with custom cursors for the arrow, textselect and the hourglass.<br />
<br />
it should remove the custom cursors after i close the app, but i have read in a faq that this is a known bug since windows 2000/xp and there will be no furthur support for it. the cursors are used globally after i closed the app and even are selected in the pointers tab in the mouse properties in the control panel. but when i logout and login again or restart my computer the cursors are all normal. it seems the only problem that the custom cursors of that app don't go away is that they are not refreshed anymore after closing the app. i wanted to write a small script with the help of the system plugin to refresh the cursors manually but i have (again) no idea how to begin, maybe someone could help me...<br />
<br />
I have looked through the imports of the app and found for user32.dll<br />
LoadCursorA<br />
SetCursor<br />
<br />
so i looked through msdn for it and came to that site (http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/Resources/Cursors/UsingCursors.asp#_win32_Displaying_a_Cursor)<br />
<br />
hope that helps<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">4th September 2003, 00:15</div></div><div class="posttext">Could you post more information about that bug? It will be much easier to know what to do if we will know the way that program corrupts the cursors. may be a link to faq will help.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">4th September 2003, 10:48</div></div><div class="posttext">it does not corrupt the cursors, it loads a new cursor set which replaces the standard windows cursors, but since windows 2000/xp it is unable to unload the cursors after the program has quit, so they stay until i restart, logoff/logon or reset them in the mouse properties in the control panel...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">5th September 2003, 13:07</div></div><div class="posttext">Modified cursors are stored in the registry in &quot;CU\Control Panel\Cursors&quot;. Maybe if you delete values inside that folder, you will regain old cursors on reboot. (I tried the 'refresh icons' thing and didn't refresh cursors)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">5th September 2003, 17:44</div></div><div class="posttext">If he reboots the cursors are restored anyway :) He just wants to do that without rebooting :)<br />
<br />
the following function does what she wants, but where should we look for default cursors? ;)<br />
<br />
BOOL SetSystemCursor(HCURSOR hcur, DWORD id);</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">5th September 2003, 18:04</div></div><div class="posttext">It looks like cursors (changed one) are stored at HKCU\Control Panel\Cursors. Default cursors are default :)<br />
You could load and set listed cursors and try to set not listed to NULL (0) (may be this will restore them).<br />
<br />
Here the functioon prototype (look at msdn for parameters):<br />
System::Call 'user32::SetSystemCursor(i r0, i 32512) i'<br />
<br />
also you will need (will place cursor handle to r0, you should pass it SetSystemCursor).<br />
System::Call 'user32::LoadImage(i 0, t &quot;file name&quot;, i 2, i 0, i 0, i 0x10) i.r0'<br />
<br />
list of constants for SetSystemCursor second arg:<br />
#define OCR_NORMAL          32512<br />
#define OCR_IBEAM           32513<br />
#define OCR_WAIT            32514<br />
#define OCR_CROSS           32515<br />
#define OCR_UP              32516<br />
#define OCR_SIZENWSE        32642<br />
#define OCR_SIZENESW        32643<br />
#define OCR_SIZEWE          32644<br />
#define OCR_SIZENS          32645<br />
#define OCR_SIZEALL         32646<br />
#define OCR_NO              32648<br />
#define OCR_HAND            32649<br />
#define OCR_APPSTARTING     32650</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">6th September 2003, 00:03</div></div><div class="posttext">ok, i got it to work to load a cursor, but thats the same as the program does...so<br />
i attached a sample code to change to cursor to another one, maybe you will find a way, i tried to load a 'null' cursor (to reset to the default arrow), but that does not work<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">6th September 2003, 13:26</div></div><div class="posttext">Originally posted by brainsucker <br />
[B]If he reboots the cursors are restored anyway :) He just wants to do that without rebooting :) <br />
:rolleyes: :hang:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">6th September 2003, 13:33</div></div><div class="posttext">i like the idea to load up custom cursors, and it's a simple but useful function (maybe for more custom setups), now only a way is missing to unload them again to fix the problem with my program, i think the program loads the cursors exact the same way.<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">14th September 2003, 16:06</div></div><div class="posttext">any ideas how to get the default windows cursors back? :)<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">14th September 2003, 16:08</div></div><div class="posttext">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/Resources/Cursors/CursorReference/CursorFunctions/LoadCursor.asp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">14th September 2003, 16:20</div></div><div class="posttext">ok..<br />
now there is<br />
HCURSOR LoadCursor(      <br />
    HINSTANCE hInstance,<br />
    LPCTSTR lpCursorName<br />
);<br />
<br />
so<br />
<br />
hInstance<br />
    [in] Handle to an instance of the module whose executable file contains the cursor to be loaded.<br />
<br />
so, which handle should i use then?<br />
i have no idea.. (i am no programmer :))<br />
<br />
DOCa Cola</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">17th September 2003, 14:19</div></div><div class="posttext">bump<br />
sorry, don't want this thread get lost..please someone help me and load my example program and help me to reset the cursors to standard back after that..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">17th September 2003, 23:51</div></div><div class="posttext">LoadCursor handle: you should give it a handle to the file you want to use as a source for cursor.<br />
<br />
sorry ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">brainsucker</div><div class="date">19th September 2003, 11:27</div></div><div class="posttext">Sorry again :) Lost my mind. This should work:<br />
<br />
System::Call &quot;user32::SystemParametersInfo(i 0x057, i 0, i 0, i 0x02) i.r0&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DOCa Cola</div><div class="date">21st September 2003, 16:46</div></div><div class="posttext">oh! thank you very very much :)<br />
Great work! Works very nice, now i am really happy :)<br />
<br />
DOCa Cola</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>