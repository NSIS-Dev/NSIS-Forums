<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" SectionSetFlags Question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  SectionSetFlags Question NSIS Discussion" />
	
	<title> SectionSetFlags Question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  SectionSetFlags Question</div>
<hr />
<div class="pda"><a href="t-239677.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=239677">SectionSetFlags Question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 08:41</div></div><div class="posttext">I'd like to know how to use SectionSetFlags with a section index that i get from the registry, here is an example:<br />
<br />
ReadRegStr $0 blah blah<br />
SectionSetFlags ${$0} 9<br />
<br />
It doesn't work and i didn't find in the forum a way to make it work.<br />
<br />
Can someone tell me if there is a way to make that work?<br />
Thanks in advance<br />
<br />
MAtze</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">2nd March 2006, 09:40</div></div><div class="posttext">You need to read documentation first.<br />
<br />
4.9.13.1 SectionSetFlags<br />
section_index section_flags<br />
Sets the section's flags. The flag is a 32 bit integer.<br />
<br />
<br />
So if registry key hold section flags you need to use:<br />
<br />
SectionSetFlags ${sec_id} $0<br />
<br />
Where sec_id section_index_output<br />
<br />
4.6.1.2 Section<br />
[/o] [([!]|[-])section_name] [section_index_output]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 09:48</div></div><div class="posttext">Thanks for your comments but I read the docs, the problem is here:<br />
<br />
SectionSetFlags ${$0} 9 <br />
<br />
I want to pass the result of ReadRegStr in the SectionSetFlags command, the result is the section_index...<br />
<br />
Example:<br />
<br />
ReadRegStr $0 HKLM &quot;Soft\&quot; &quot;1&quot;<br />
;$0 is blah<br />
<br />
SetSectionFlags ${$0} 1<br />
  -&gt; $0 should be blah, but it dosn't work<br />
<br />
any idea?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">2nd March 2006, 09:56</div></div><div class="posttext">Waht code you use to define sections?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 10:04</div></div><div class="posttext">Here is a sample...<br />
<br />
Section &quot;SectionName&quot; uniqueidsection<br />
;blah<br />
WriteRegStr HKLM &quot;Soft&quot; id1 &quot;uniqueidsection&quot;<br />
SctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">2nd March 2006, 10:07</div></div><div class="posttext">Attache your code to the post.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">glory_man</div><div class="date">2nd March 2006, 10:12</div></div><div class="posttext">Maybe code with SectionSetFlags is before sections definention. So try to remove it after of all sections.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 10:13</div></div><div class="posttext">Thanks for your help but i cant post the code, i deleted it by mistake and i'm quiet tired of trying to make it work...<br />
<br />
So i think i will search a new way to disable sections...<br />
<br />
Thanks again.<br />
<br />
Matze</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">2nd March 2006, 11:21</div></div><div class="posttext">${$0} doesnt make any sense, unless you had a DEFINE named $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd March 2006, 12:08</div></div><div class="posttext">${} is a define. $0 is a variable. You are trying to put a variable inside a define?<br />
<br />
SetSectionFlags $0 9<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 12:20</div></div><div class="posttext">The problem is that if i want  that sectionsetflag works correctly, it must be in the form:<br />
<br />
SectionSetFlags ${sec_id} 1<br />
<br />
SectionSetFlags sec_id 1<br />
-&gt; doesn't work...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd March 2006, 12:22</div></div><div class="posttext">${sec_id} is just a define that contains the section index (zero based) therefore you can use a variable in its place which may contain the section index. &quot;sec_id&quot; does not work because it's a string not an integer.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd March 2006, 12:24</div></div><div class="posttext">In fact you don't even need to give it a variable or define for the first operand. You could pass it a constant &quot;0&quot; (to specify the first Section) if you happen to be using SectionSetFlags/SectionGetFlags etc further up in your script before the actual Section define is created (with Section &quot;Sec Name&quot; SecID).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 12:33</div></div><div class="posttext">THanks for the explanations,<br />
<br />
i'll try your method, but, perhaps can you help me...<br />
<br />
here is my code sample:<br />
<br />
Section &quot;Sec1&quot; Sec1<br />
;blah<br />
SectionEnd<br />
<br />
Function .oninit<br />
ReadRegStr $0 HKLM &quot;Software\Blah&quot; &quot;String1&quot;<br />
; String1= Sec1<br />
SectionSetFlags $0 8<br />
FunctionEnd<br />
<br />
<br />
Will that work?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">2nd March 2006, 15:58</div></div><div class="posttext">No it will not because like I've already said, Sec1 is a compile-time definition for a constant &quot;0&quot;. Once compiled, the constant name &quot;Sec1&quot; is no longer a part of the installer - it has been replaced with the constant value &quot;0&quot; - so it's the same as putting &quot;0&quot; there instead of &quot;${Sec1}&quot;. If this weren't the case then we'd end up adding extra overhead which is completely pointless.<br />
<br />
Instead of storing &quot;Sec1&quot; in the registry you should store the Section index instead ( ${Sec1} ).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">WebMatze</div><div class="date">2nd March 2006, 18:53</div></div><div class="posttext">Thanks for the reply, this time i understood how section_index works...<br />
<br />
thanks</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>