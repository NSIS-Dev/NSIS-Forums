<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A bug and a question.., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A bug and a question.. NSIS Discussion" />
	
	<title> A bug and a question.. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A bug and a question..</div>
<hr />
<div class="pda"><a href="t-142672.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=142672">A bug and a question..</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 17:01</div></div><div class="posttext">First the bug:<br />
<br />
Latest CVS has a problem with the latest MUI.  The Reboot dialog has incorrect background colours for the reboot now, manual reboot text.<br />
<br />
CVS from a few days ago is fine.<br />
<br />
Now the question:<br />
<br />
I have the following custom dialog:<br />
<br />
http://www.broadband4preston.org.uk/keyfile.JPG <br />
<br />
As you can see, I have my Copy code implemented in the &quot;next&quot;, this works fine, but I'm having a problem in the &quot;skip&quot; button, this is the Cancel action.  Obviously this aborts the install completly.  I want to skip to the next dialog.  Can this be done.  I have tried allsorts, without any luck.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2003, 17:04</div></div><div class="posttext">You can't get the cancel button to skip the page, it only cancels. Nice picture btw ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 17:04</div></div><div class="posttext">I don't know if the picture is showing on this message (it's not for me).  You can see the custom dialog in question here: <br />
<br />
http://www.broadband4preston.org.uk/keyfile.JPG</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th July 2003, 17:04</div></div><div class="posttext">You need to move your code from your next function to here:<br />
Function CustomDialog<br />
InstallOptions::dialog &quot;mydialog.ini&quot;<br />
Pop $R0<br />
StrCmp $R0 cancel exitpage<br />
<br />
myfunction:<br />
##do you're next function ere###<br />
<br />
exitpage:<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 17:06</div></div><div class="posttext">Do you have any other ideas what I can do to accomplish this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th July 2003, 17:06</div></div><div class="posttext">Ok, never mind.<br />
The cancel button can't do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">18th July 2003, 17:07</div></div><div class="posttext">Actually, put &quot;Abort&quot; after &quot;exitpage:&quot; in that function.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2003, 17:10</div></div><div class="posttext">On second thought, you can use the same method that I suggested in this recent thread:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=141867&amp;highlight=back+button<br />
<br />
Just send that message if you get cancel from IO.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 17:12</div></div><div class="posttext">I'm kinda stuck, as the MUI does not allow me to place buttons on it (if I could do this, I could have a dedicated Copy button, and leave next and cancel as they are).<br />
<br />
Looking for inspiration on what to do now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2003, 17:21</div></div><div class="posttext">Take a look at the script I linked to in my last post.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 17:32</div></div><div class="posttext">Not working yet... <br />
<br />
Here is my code.. <br />
<br />
Push $CustomDialogKeyPress <br />
InstallOptions::dialog &quot;$PLUGINSDIR\rtx.ini&quot; <br />
Pop $CustomDialogKeyPress <br />
;process the return from the dialog <br />
StrCmp $CustomDialogKeyPress &quot;cancel&quot; CancelPressed <br />
StrCmp $CustomDialogKeyPress &quot;back&quot; GoodKeyCopy <br />
<br />
CancelPressed: <br />
; sending this OK message (is this too late???) <br />
SendMessage $HWNDPARENT ${WM_COMMAND} ${IDOK} 0 <br />
<br />
<br />
GoodKeyCopy:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">18th July 2003, 17:33</div></div><div class="posttext">Thanks. Fixed the bug :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">18th July 2003, 17:43</div></div><div class="posttext">That would be the quit flag doing its work. I'll let you know if I have another idea.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">18th July 2003, 18:14</div></div><div class="posttext">Thanks.  It turns out the SendMessage is a nogo for the Cancel, as it's already in the process of quitting.<br />
<br />
I have inplemented it on the &quot;back&quot; and kichik  SendMessage trick works fine.<br />
<br />
Thanks.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>