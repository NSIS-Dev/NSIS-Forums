<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Driver Installation Plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Driver Installation Plugin NSIS Discussion" />
	
	<title> Driver Installation Plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Driver Installation Plugin</div>
<hr />
<div class="pda"><a href="t-147002.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=147002">Driver Installation Plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kiszka</div><div class="date">25th August 2003, 18:12</div></div><div class="posttext">Hi,<br />
<br />
I've written a (hopefully) generic plugin for installing and removing device drivers, and I would like to contribute to NSIS.<br />
<br />
There are just some tiny beautifications to do, and I have to revise the example and doc files. But I already want to ask if I should simply post a zip file to this forum and which license terms are prefered here. I usually publish under GPL/LGPL, but I have not problems to select a more relaxed variant in this case.<br />
<br />
If someone is interested: This plugin is going to be used with IrCOMM2k 2.0.0-beta1 (http://www.ircomm2k.de/english) - it's all Open Source :D<br />
<br />
Jan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">26th August 2003, 10:12</div></div><div class="posttext">If you'd like I can add your plugin to the downloads page (http://nsis.sourceforge.net/archive/download.php) on the NSIS Archive (http://nsis.sf.net).<br />
<br />
If what you mean is that you'd like it to be part of the NSIS installation then that's a question for KiCHiK to answer. I must admit I've never understood what determines which plugins are part of the installation and which aren't. It could just be as simple as whether or not one of the developers uploads the code and binaries and modifies makensis.nsi (hehe I guess if that's the case then I'm guilty of not doing this).<br />
<br />
KiCHiK or Joost are more likely to have an opinion about licensing so I'll leave them to address that point.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kiszka</div><div class="date">28th August 2003, 01:17</div></div><div class="posttext">Here it is. If could have a look at it and put it on the Download page, this would already be great. Please let me know if there is something which first needs to be fixed or improved.<br />
<br />
I decided to pick the same license as NSIS itself. So a future integration should be no problem, at least from this point of view.<br />
<br />
Jan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th August 2003, 11:09</div></div><div class="posttext">Contributions that are likely to be used by a majority of NSIS users are included in the package itself. If the contribution is not to be included in the package then the license doesn't really matter. If the contribution is to be included in the package, then the license must premit it of course. We don't care what license it is, but we do prefer it open-source.<br />
<br />
Does this plug-in work on all OSes? According to MSDN, some of the functions you've used there are Windows 98, ME, 2000 and XP only.<br />
<br />
For now, I've uploaded it to the Archive. If you want you can createa a page there that will link to its download, describing it a bit.<br />
<br />
Thank you for your contribution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kiszka</div><div class="date">28th August 2003, 22:44</div></div><div class="posttext">You are right, some of the function calls requires 2000/XP to run. I haven't checked this in details as I don't see that urgent need for the other platforms anymore (at least for driver projects). If someone do need driver setup support there, he/she may rewrite InstDrv appropriately.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th August 2003, 10:52</div></div><div class="posttext">Well, that's worth mentioning in the readme. If you have nothing else to update I can add the note myself. Let me know.<br />
<br />
Would be cool though if you update it to support any Windows version. Maybe /DELAYLOAD can help there.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">29th August 2003, 16:02</div></div><div class="posttext">If you can make it support all Win32 operating system (including Windows 95/NT4), we will add it to the NSIS distribution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kiszka</div><div class="date">11th September 2003, 00:09</div></div><div class="posttext">I can understand that you are looking for widely usable plugins, but unfortunately I currently don't have the time to back-port InstDrv to older platforms. However, during the development of IrCOMM2k, I fixed a bug and added two functions. Here is the latest version, could someone upload it? Thanks<br />
<br />
PS: The readme now includes a note about the supported Windows version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">11th September 2003, 00:24</div></div><div class="posttext">Done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">11th September 2003, 01:30</div></div><div class="posttext">where? 8)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">11th September 2003, 10:41</div></div><div class="posttext">Same place as the previous version, http://nsis.sf.net/archive/download.php at the bottom.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">11th September 2003, 12:57</div></div><div class="posttext">thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andyjin</div><div class="date">8th January 2004, 14:19</div></div><div class="posttext">I try to use this plugin to install a device driver for a PCI card in Win2K, but can't get it work. Below is the problem :<br />
<br />
- First at all, I try the example.nsi which comes with the plugin, it works fine and installs the ircomm2k.sys driver on my test box.<br />
<br />
- I modify the example.nsi, change the GUID, HWID, INF filename and SYS filename, to what I want to install.<br />
<br />
- For the devClass, ClassGUID={4d36e971-e325-11ce-bfc1-08002be10318}, which is &quot;Multifunction card&quot;<br />
<br />
- For the devHWID, it's &quot;PCI\VEN_10E3&amp;DEV_0862&amp;SUBSYS_120210E3&quot;, which is a PCI card HWID<br />
<br />
- The script compiles fine, but the installation fails without install the driver, below is the detail print :<br />
<br />
InitDriverSetup:<br />
DeleteOemInfFiles: 00000103<br />
CreateDevice: E0000205<br />
Output folder: C:\Docume~1\test\LOCALS~1\Temp<br />
Extract: test.inf... 100%<br />
Extract: dummy.sys... 100%<br />
InstallDriver: E000020B<br />
CountDevices:0<br />
Completed<br />
<br />
- You can see &quot;CreateDevice&quot; output error code &quot;E0000205&quot;. I can't find this error code in any Windows error, is it a custom error code ?<br />
<br />
- Interestingly, if I change the HWID from &quot;PCI\VEN_10E3&amp;DEV_0862&amp;SUBSYS_120210E3&quot; to something simpler, e.g. &quot;testdriver&quot;, the installation works fine. Of cause the driver does not talk to the PCI card because the HWID is fake.<br />
<br />
Anyone knows what's going on here? Is the HWID problem, if it's, what should I use for the HWID?<br />
<br />
I attach a zip file which includes the &quot;InstDrv-Test-driver.nsi&quot;, &quot;test.inf&quot; and &quot;dummy.sys&quot;in this post. I am using NSIS 2.0 Beta 4.<br />
<br />
Please help, thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andyjin</div><div class="date">9th January 2004, 04:40</div></div><div class="posttext">Could anybody help ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">9th January 2004, 12:31</div></div><div class="posttext">Try to contact the author of this plug-in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">PanicMan</div><div class="date">18th November 2004, 15:31</div></div><div class="posttext">Originally posted by andyjin <br />
<br />
...<br />
- The script compiles fine, but the installation fails without install the driver, below is the detail print :<br />
<br />
InitDriverSetup:<br />
DeleteOemInfFiles: 00000103<br />
CreateDevice: E0000205<br />
Output folder: C:\Docume~1\test\LOCALS~1\Temp<br />
Extract: test.inf... 100%<br />
Extract: dummy.sys... 100%<br />
InstallDriver: E000020B<br />
CountDevices:0<br />
Completed<br />
...<br />
 <br />
<br />
I have the same problem. Somehow is it intersting. Sometimes it works, and sometimes not, but with an other driver. And the driver i using now bring allways the message above. I find out that the GUID and the DeviceID have to match the settings in the INF-File. But it still does not work.<br />
<br />
Did the Author find out where is the problem?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mac_ou</div><div class="date">21st February 2005, 19:20</div></div><div class="posttext">Hi everybody!<br />
<br />
I'm new at this forum. Just to say I was looking for a solution for my problem with InstDrv plug-in and I found in this thread that some people has exactly the same problem as me.<br />
<br />
I'm trying to develop a creator thar includes the drivers for some PCI cards. If I try InstDrv with the usual &quot;PCI\...&quot; HW ID I get the same errors some of you pointed before. If I edit my .inf file and I use any string as the HW ID value, then the problems when the device is created and the driver installed disappear, but then the yellow exclamation appears in the Device Manager list.<br />
<br />
I've written a mail to the author. I hope we can find a solution because I find this plug-in very interesting and useful.<br />
<br />
<br />
Thank you for your attention and time.<br />
<br />
<br />
Marcos<br />
Ourense, Galicia, Spain.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anir</div><div class="date">21st February 2005, 23:30</div></div><div class="posttext">Hello!<br />
<br />
I don't know if it may help, but I was able to solve my driver installation problem without such a plugin.<br />
<br />
I hope it may help:<br />
<br />
DrvInst         : http://home.arcor.de/_aero/drvinst.zip<br />
DrvInst &quot;Source&quot;: http://home.arcor.de/_aero/tcmagazine/drvinst-project.7z</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mac_ou</div><div class="date">22nd February 2005, 17:36</div></div><div class="posttext">Hello anir! and thank you for your reply.<br />
<br />
I am trying your TC Driver Installer but I can't get it working. I've changed the drvinst.cfg file properly and added the hw id code of my pci card in the first line of the drvinst.lst file. It is not a Pnp device.<br />
<br />
I don't know if the problem has to be with the NumbrSrch of the drvinst.lst file, because I've tried with several values with no result.<br />
<br />
If I first install the driver manually, then the TC Driver Installer works, but it asks for the path where the .sys file is, and I would like to do the installation automatically. Is there any way to get this with your method?<br />
<br />
<br />
Thanks again and I hope you read this post and you would be so gentle to help me.<br />
<br />
Marcos.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mac_ou</div><div class="date">22nd February 2005, 18:10</div></div><div class="posttext"></div></div><hr />


<div class="post"><div class="posttop"><div class="username">anir</div><div class="date">24th February 2005, 14:25</div></div><div class="posttext">mac_ou,<br />
<br />
I think you cannot install non-PNP device drivers with the existing methods.<br />
Both the plugin and &quot;Driver installation and update&quot; (http://nsis.sourceforge.net/archive/viewpage.php?pageid=525) use the same API call: UpdateDriverForPlugAndPlayDevices (http://msdn.microsoft.com/library/default.asp?url=/library/en-us/install/hh/install/di-rtns_a9a559d4-7b81-4bd7-b6a7-f493787a3657.xml.asp)<br />
As the name already suggests, it only works with PNP device drivers, so you cannot use that call for your purpose.<br />
But maybe the script's label &quot;lbl_noupgrade&quot; or &quot;Pre-install the driver&quot; will help you.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>