<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" newbie 'dirshow' question, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  newbie 'dirshow' question NSIS Discussion" />
	
	<title> newbie 'dirshow' question [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  newbie 'dirshow' question</div>
<hr />
<div class="pda"><a href="t-89988.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=89988">newbie 'dirshow' question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kervin</div><div class="date">4th June 2002, 22:30</div></div><div class="posttext">Hi,<br />
<br />
Backgroup:<br />
I'm writing my first NSIS installer.  It's for OpenLDAP, an opensource LDAP server, and I have added some optional packages like an optional password filter dll for syncing user passwords with the operating system.<br />
<br />
Problem:<br />
I have a section for the main program and a section for each of the optional packages.  But I need for the user to be able to install the option packages in different $INSTDIR directories.  For example, I want the server to be installed in $PROGRAMFILES/openldap by default, but the password filter to be installed in $PROGRAMFILES/PasswdHk.  Plus the user should be able to change both of these.  The documentation says that the 'Dirshow' file selectional keyword can *not* be used inside a 'Section'.  So how can I install these optional packages in their own directories?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">5th June 2002, 00:58</div></div><div class="posttext">Here is an Idea. Have the password dll in another installer but just showing the directory selection and the install console. That way, the user can install the password DLL to the directory they want. So, all you have to do in the main installer is:<br />
<br />
Section &quot;Password Plug-in&quot;<br />
File inst-pwpl.exe<br />
ExecWait &quot;inst-pwpl.exe&quot;<br />
SectionEnd<br />
<br />
There.<br />
<br />
-Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">5th June 2002, 07:34</div></div><div class="posttext">An other option is to use InstallOptions to display a page of dirselection boxes and text to help the user. This way, you will not need to write new scripts for all packages, you will not have new windows and problems like &quot;BringToFront&quot; and the total package will be much smaller.<br />
<br />
Good luck,<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kervin</div><div class="date">11th June 2002, 20:24</div></div><div class="posttext">Thanks,<br />
<br />
I went the easy route and built a seperate installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">12th June 2002, 07:52</div></div><div class="posttext">That's NOT the easy way. As I told before, to overcome problems of the main installer loosing focus you may need to perform some tricks with BringToFront. Besides that, it is difficult to control what the separate installers did (install or cancel). You will need additional regentries or IfFileExists' to control this. Moreover, the user will not like all these separate programs that will be started and also not like to download eg 4 times ~35 Kb where you could do it in only one time ~35 Kb (with a small additonal amount for InstOpts.dll and the ini).<br />
<br />
I'll post a simple script later this day.<br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">12th June 2002, 10:45</div></div><div class="posttext">Here's some code, based on MultIni4. With some additional work, you can check which sections have been selected and adapt the ini for that so it doesn't ask for a dir for a component that has not been selected. <br />
<br />
-Hendri.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kervin</div><div class="date">12th June 2002, 14:21</div></div><div class="posttext">Thanks!<br />
<br />
I did not know about these problems.  I'll use the InstallOptions approach then.<br />
<br />
The reason I didn't try the InstallOptions approach originally was because I couldn't find documentation or example code on how to use it.  So thanks for the code.<br />
<br />
--Kervin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Smile2Me</div><div class="date">12th June 2002, 17:38</div></div><div class="posttext">Your welcome.<br />
Good luck with programming the ini. Do not forget to take a look at teh IsSectionSelected macro in MultIni4 (and in my code above). It will help you to find out if a section is selected. All you have to program is that ini settings get deleted when a section is not selected. That way no question will be asked for a component that will not be installed.<br />
<br />
Greetz,<br />
-Hendri.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>