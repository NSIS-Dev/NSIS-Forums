<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Finding NSIS really hard to use - Please Help Me, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Finding NSIS really hard to use - Please Help Me NSIS Discussion" />
	
	<title> Finding NSIS really hard to use - Please Help Me [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Finding NSIS really hard to use - Please Help Me</div>
<hr />
<div class="pda"><a href="t-108204.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=108204">Finding NSIS really hard to use - Please Help Me</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Benoni</div><div class="date">3rd October 2002, 17:15</div></div><div class="posttext">Hello,<br />
I am finding NSIS really hard to use.  I have trying to make an install program with runs as follows.  It would need to run silently and if there were any errors then it would close.<br />
<br />
<br />
<br />
<br />
<br />
Set $mainversion to 1.11<br />
<br />
<br />
If the system directory is c:\windows\system\ set as $installdir (including last \) and set $installdirnum as 1<br />
If the system directory is c:\win95\system\ set as $installdir (including last \) and set $installdirnum as 2<br />
If the system directory is c:\winnt\system\ set as $installdir (including last \) and set $installdirnum as 3<br />
If the system directory is none of the above then exit<br />
<br />
If the registry key: HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\mainversion is &gt; $mainversion Then exit<br />
If there is no such directory or HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\mainversion is less than $mainversion then just continue<br />
<br />
Copy files3.exe to $installdir if the file is newer<br />
Copy files4.exe to $installdir if the file is newer<br />
Copy files5.exe to $installdir if the file is newer<br />
<br />
If the registry key: HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\currentstate is “zero” Then run code section 1<br />
If the registry key: HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\currentstate is “one” Then run code section 2<br />
If there is no such registry key as: HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\currentstate Then run code section 2<br />
<br />
<br />
--------------- Code Section 1 ---------------<br />
<br />
Copy file1.exe to $installdir as file1_1.exe and overwrite if there is a file with the same name<br />
Copy file2.exe to $installdir as file2_1.exe and overwrite if there is a file with the same name<br />
Set HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\currentstate to “one”<br />
Set $currentstate to “one”<br />
<br />
------------ End Code Section 1 ------------<br />
<br />
<br />
--------------- Code Section 2 ---------------<br />
<br />
Copy file1.exe to $installdir and overwrite if there is a file with the same name<br />
Copy file2.exe to $installdir and overwrite if there is a file with the same name<br />
Set HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\currentstate to “zero”<br />
Set $currentstate to “zero”<br />
<br />
------------ End Code Section 2 ------------<br />
<br />
<br />
If $installdirnum = 1 AND $currentstate = “zero” Then copy 1.ini<br />
If $installdirnum = 2 AND $currentstate = “zero” Then copy 2.ini<br />
If $installdirnum = 3 AND $currentstate = “zero” Then copy 3.ini<br />
If $installdirnum = 1 AND $currentstate = “one” Then copy 4.ini<br />
If $installdirnum = 2 AND $currentstate = “one” Then copy 5.ini<br />
If $installdirnum = 3 AND $currentstate = “one” Then copy 6.ini<br />
<br />
Set HKEY_LOCAL_MACHINE\SOFTWARE\mmsoft\mainversion as $mainversion<br />
<br />
If $installdirnum = 1 AND $currentstate = “zero” Then run c:\windows\system\file1.exe<br />
If $installdirnum = 2 AND $currentstate = “zero” Then run c:\win95\system\file1.exe<br />
If $installdirnum = 3 AND $currentstate = “zero” Then run c:\winnt\system\file1.exe<br />
If $installdirnum = 1 AND $currentstate = “one” Then run c:\windows\system\file1_1.exe<br />
If $installdirnum = 2 AND $currentstate = “one” Then run c:\win95\system\file1_1.exe<br />
If $installdirnum = 3 AND $currentstate = “one” Then run c:\winnt\system\file1_1.exe<br />
<br />
<br />
<br />
<br />
<br />
Any help would be great.<br />
Thanks<br />
Benoni<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sdbarker</div><div class="date">3rd October 2002, 21:54</div></div><div class="posttext">Read the documentation and go through the sample scripts.  That should get you started.<br />
<br />
-Scott</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th October 2002, 11:16</div></div><div class="posttext">If you still don't understand something after you read the documents and look over the examples don't be afraid to come again and ask as much as you want.<br />
<br />
Things to look for in the documents:<br />
ReadRegStr<br />
WriteRegStr<br />
$WINDIR<br />
$SYSDIR<br />
File<br />
StrCmp<br />
StrCpy<br />
Exec<br />
ExecWait<br />
ShellExec</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Benoni</div><div class="date">5th October 2002, 10:11</div></div><div class="posttext">Thanks<br />
Will do</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>