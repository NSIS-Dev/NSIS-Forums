<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Detecting all previous postgres install, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Detecting all previous postgres install NSIS Discussion" />
	
	<title> Detecting all previous postgres install [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Detecting all previous postgres install</div>
<hr />
<div class="pda"><a href="t-308674.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=308674">Detecting all previous postgres install</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sebastien61</div><div class="date">21st July 2009, 08:48</div></div><div class="posttext">Hi everybody,<br />
<br />
This is the first time I post in NSIS forum so please forgive my ignorance ;)<br />
<br />
I have to detect if postgreSQL is already installed on a computer. I searched on the web and read many things doing this, but they did not help me.<br />
<br />
Do I have to check in the registry if there is a SOFTWARE\PostgreSQL\... key in the registry or if a service is present ? What is the best solution ?<br />
<br />
The solution I choose is the 2nd one (it may not be the right one...). I use 'Services' plugin for NSIS. But problem is that there are several versions of postgreSQL, so do I have to try every version of them with :<br />
services::IsServiceInstalled 'postgresql-8.3'<br />
services::IsServiceInstalled 'postgresql-8.2'<br />
services::IsServiceInstalled 'postgresql-8.1'...<br />
<br />
?<br />
<br />
Thank you in advance for help/advices.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">21st July 2009, 17:04</div></div><div class="posttext">Yes, you have to try all of them, so I think that is not the best approach.<br />
I think the best would be to get it from the registry.<br />
Have a look here for an idea:<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=278622</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sebastien61</div><div class="date">24th July 2009, 11:10</div></div><div class="posttext">Hi jpderuiter ! <br />
<br />
Thank you so much, thanks to you I found how to do that. For people who still search, I proceed like that : <br />
<br />
 <br />
services::GetServiceNameFromDisplayName 'postgre' <br />
Pop $0 IntCmp $0 0 NotInstalledYet ; if research returned &quot;0&quot; No previous install has been found <br />
IntOp $0 $0 - 1 Pop $1 ; If already installed, we collect the install location in the registry <br />
ReadRegStr $R0 HKLM &quot;SOFTWARE\\PostgreSQL\\Installations\\$1&quot; &quot;Base Directory&quot;<br />
<br />
NotInstalledYet :<br />
  ; install postgres...<br />
 <br />
<br />
Thank you again for your help.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>