<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to Call an NSIS Plugin from C/C++, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to Call an NSIS Plugin from C/C++ NSIS Discussion" />
	
	<title> How to Call an NSIS Plugin from C/C++ [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to Call an NSIS Plugin from C/C++</div>
<hr />
<div class="pda"><a href="t-170776.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=170776">How to Call an NSIS Plugin from C/C++</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">24th February 2004, 17:30</div></div><div class="posttext">I'm writing a C++ class that provides an update-from-web ability.  This class needs to download (via HTTP) an INI file that describes the update (latest version number, URL to the update program, etc.).  The INI will point at an NSIS installer that should be downloaded and then run to perform the update.<br />
<br />
I was originally planning on writing an installer that does nothing more than uses the NSISdl plugin just to obtain the INI file.  However, it would be easier if the C++ class could just download the INI file without having to exec this small NSIS installer.  (I hate to add extraneous programs/files to my app.)<br />
<br />
I've looked at the NSISdl source and see the exported functions of &quot;download&quot; and &quot;download_quiet&quot; used by the plugin architecture.  I'd like to call those functions directly from my C++ class.<br />
<br />
Is there any sample C/C++ code available on how to directly call the NSISdl plugin, or other plugins?  Is there anything I should know about calling an exported function inside an NSIS plugin DLL?  For example, I realize they are &quot;C&quot; style functions and would require the correct declaration in my C++ app.  Anything else?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">24th February 2004, 22:00</div></div><div class="posttext">You should be able to find the right information from the NSIS source code, as it has to call the plugins itself ;) <br />
<br />
Vytautas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">24th February 2004, 22:10</div></div><div class="posttext">Yes, I know I could look at the NSIS source itself, but I was hoping for a small snippet of sample code so I don't have to dig through all of NSIS.  I've yet to crack it open and would like to avoid it if possible.  :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">24th February 2004, 23:02</div></div><div class="posttext">Did you try dllImport (http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vccore/html/vcwlkSysimportAttributeTutorial.asp)?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeAcunzo</div><div class="date">25th February 2004, 01:23</div></div><div class="posttext">I'm trying to call the NSIS plugin from &quot;unmanaged&quot; C++ code, so from what I read on that web page, I don't need to use dllImport.  I just wanted to see some C/C++ sample code that creates the required NSIS &quot;stack&quot; structs and passes it to the plugin function entry point.  In my case, the &quot;download&quot; function of NSISdl.dll, but I'll take any sample for any plugin (again, C/C++ sample).<br />
<br />
So does anyone have a C/C++ sample that calls an entry point in an NSIS plugin that they can share with me?<br />
<br />
BTW, I've quickly become a *big* fan of NSIS installer.  I've used InstallShield for years and as soon as I saw the NSIS install Welcome screen that said &quot;isn't huge and doesn't suck&quot;, like InstallShield does, I knew NSIS was the installer for me and it's been great so far!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Vytautas</div><div class="date">25th February 2004, 06:33</div></div><div class="posttext">Why don't you just port the NSISdl code into your app.  I believe that that would be far simpler to implement than recreating the NSIS variable and stack structures.<br />
<br />
Vytautas</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>