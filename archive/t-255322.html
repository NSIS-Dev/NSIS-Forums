<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" WriteRegStr, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  WriteRegStr NSIS Discussion" />
	
	<title> WriteRegStr [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  WriteRegStr</div>
<hr />
<div class="pda"><a href="t-255322.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255322">WriteRegStr</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">12th September 2006, 12:18</div></div><div class="posttext">HI ,<br />
<br />
I am writing a date as a key into registry using WriteRegStr.But Some times registry varible is not getting created .<br />
<br />
Any body has idea what might go wrong?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">12th September 2006, 13:00</div></div><div class="posttext">where does this date come from, what format?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">javnav07</div><div class="date">12th September 2006, 13:33</div></div><div class="posttext">Using the following function i am getting the date in dd-mm-yyyy format.<br />
<br />
Function GetTime<br />
	!define GetTime `!insertmacro GetTimeCall`<br />
 <br />
	!macro GetTimeCall _FILE _OPTION _R1 _R2 _R3 _R4 _R5 _R6 _R7<br />
		Push `${_FILE}`<br />
		Push `${_OPTION}`<br />
		Call GetTime<br />
		Pop ${_R1}<br />
		Pop ${_R2}<br />
		Pop ${_R3}<br />
		Pop ${_R4}<br />
		Pop ${_R5}<br />
		Pop ${_R6}<br />
		Pop ${_R7}<br />
	!macroend<br />
 <br />
	Exch $1<br />
	Exch<br />
	Exch $0<br />
	Exch<br />
	Push $2<br />
	Push $3<br />
	Push $4<br />
	Push $5<br />
	Push $6<br />
	Push $7<br />
	ClearErrors<br />
 <br />
	StrCmp $1 'L' gettime<br />
	StrCmp $1 'A' getfile<br />
	StrCmp $1 'C' getfile<br />
	StrCmp $1 'M' getfile<br />
	StrCmp $1 'LS' gettime<br />
	StrCmp $1 'AS' getfile<br />
	StrCmp $1 'CS' getfile<br />
	StrCmp $1 'MS' getfile<br />
	goto error<br />
 <br />
	getfile:<br />
	IfFileExists $0 0 error<br />
	System::Call /NOUNLOAD '*(i,l,l,l,i,i,i,i,&amp;t260,&amp;t14) i .r6'<br />
	System::Call /NOUNLOAD 'kernel32::FindFirstFileA(t,i)i(r0,r6) .r2'<br />
	System::Call /NOUNLOAD 'kernel32::FindClose(i)i(r2)'<br />
 <br />
	gettime:<br />
	System::Call /NOUNLOAD '*(&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2) i .r7'<br />
	StrCmp $1 'L' 0 systemtime<br />
	System::Call /NOUNLOAD 'kernel32::GetLocalTime(i)i(r7)'<br />
	goto convert<br />
	systemtime:<br />
	StrCmp $1 'LS' 0 filetime<br />
	System::Call /NOUNLOAD 'kernel32::GetSystemTime(i)i(r7)'<br />
	goto convert<br />
 <br />
	filetime:<br />
	System::Call /NOUNLOAD '*$6(i,l,l,l,i,i,i,i,&amp;t260,&amp;t14)i(,.r4,.r3,.r2)'<br />
	System::Free /NOUNLOAD $6<br />
	StrCmp $1 'A' 0 +3<br />
	StrCpy $2 $3<br />
	goto tolocal<br />
	StrCmp $1 'C' 0 +3<br />
	StrCpy $2 $4<br />
	goto tolocal<br />
	StrCmp $1 'M' tolocal<br />
 <br />
	StrCmp $1 'AS' tosystem<br />
	StrCmp $1 'CS' 0 +3<br />
	StrCpy $3 $4<br />
	goto tosystem<br />
	StrCmp $1 'MS' 0 +3<br />
	StrCpy $3 $2<br />
	goto tosystem<br />
 <br />
	tolocal:<br />
	System::Call /NOUNLOAD 'kernel32::FileTimeToLocalFileTime(*l,*l)i(r2,.r3)'<br />
	tosystem:<br />
	System::Call /NOUNLOAD 'kernel32::FileTimeToSystemTime(*l,i)i(r3,r7)'<br />
 <br />
	convert:<br />
	System::Call /NOUNLOAD '*$7(&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2,&amp;i2)i(.r5,.r6,.r4,.r0,.r3,.r2,.r1,)'<br />
	System::Free $7<br />
 <br />
	IntCmp $0 9 0 0 +2<br />
	StrCpy $0 '0$0'<br />
	IntCmp $1 9 0 0 +2<br />
	StrCpy $1 '0$1'<br />
	IntCmp $2 9 0 0 +2<br />
	StrCpy $2 '0$2'<br />
	IntCmp $6 9 0 0 +2<br />
	StrCpy $6 '0$6'<br />
 <br />
	StrCmp $4 0 0 +3<br />
	StrCpy $4 Sunday<br />
	goto end<br />
	StrCmp $4 1 0 +3<br />
	StrCpy $4 Monday<br />
	goto end<br />
	StrCmp $4 2 0 +3<br />
	StrCpy $4 Tuesday<br />
	goto end<br />
	StrCmp $4 3 0 +3<br />
	StrCpy $4 Wednesday<br />
	goto end<br />
	StrCmp $4 4 0 +3<br />
	StrCpy $4 Thursday<br />
	goto end<br />
	StrCmp $4 5 0 +3<br />
	StrCpy $4 Friday<br />
	goto end<br />
	StrCmp $4 6 0 error<br />
	StrCpy $4 Saturday<br />
	goto end<br />
 <br />
	error:<br />
	SetErrors<br />
	StrCpy $0 ''<br />
	StrCpy $1 ''<br />
	StrCpy $2 ''<br />
	StrCpy $3 ''<br />
	StrCpy $4 ''<br />
	StrCpy $5 ''<br />
	StrCpy $6 ''<br />
 <br />
	end:<br />
	Pop $7<br />
	Exch $6<br />
	Exch<br />
	Exch $5<br />
	Exch 2<br />
	Exch $4<br />
	Exch 3<br />
	Exch $3<br />
	Exch 4<br />
	Exch $2<br />
	Exch 5<br />
	Exch $1<br />
	Exch 6<br />
	Exch $0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">12th September 2006, 15:49</div></div><div class="posttext">sorry, I have no idea.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">15th September 2006, 09:49</div></div><div class="posttext">Is the problem with the date being empty or the key not being created? If the key is empty, the problem is in the function. If it's not created, it's somewhere else. If you attach the script, it'd be easier to see where is the problem.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>