<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" inetc::get, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  inetc::get NSIS Discussion" />
	
	<title> inetc::get [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  inetc::get</div>
<hr />
<div class="pda"><a href="t-320615.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=320615">inetc::get</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zirnevis</div><div class="date">8th July 2010, 06:19</div></div><div class="posttext">Hi Guys,<br />
<br />
I'm writing a small installation / registration that will actually register the user using http forms, however, in the first starting step I want to start downloading the main package which is around 20MB and install this in the last step as soon as the file is available.<br />
<br />
however inetc::get is being runned as modal and it doesn't allow the rest of the code to run.<br />
<br />
1. how to let the rest of the script run while inetc::get is downloading?<br />
<br />
2. how to get the download status from inetc and display in the banner area so user know that there is a main packaging coming at what speed?<br />
<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2010, 10:37</div></div><div class="posttext">The plug-in does not have asynchronous support and even if it were added where would you display the banner? Are your steps custom pages or is all this going on on the instfiles page?<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zirnevis</div><div class="date">8th July 2010, 10:59</div></div><div class="posttext">I can put the process anywhere,<br />
even if we can't place it in banner, it is still okay,<br />
the only important thing is that the download runs in the backgroun upon <br />
launch.<br />
<br />
I'm using Pages for the registration process.<br />
<br />
Cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th July 2010, 13:03</div></div><div class="posttext">You can request the feature be added (Takhir is the author) but for now you could use wget.exe to do the download. You can use ExecDos::Exec with the /ASYNC flag and then ExecDos::Wait just before you have to run the downloaded file.<br />
<br />
http://nsis.sourceforge.net/ExecDos_plug-in<br />
http://gnuwin32.sourceforge.net/packages/wget.htm<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zirnevis</div><div class="date">9th July 2010, 17:45</div></div><div class="posttext">wget is already too large :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">9th July 2010, 19:31</div></div><div class="posttext">439KB is too large? What about after it's compressed in the installer? (I'm not going to check the file size then). Make sure you use /solid lzma.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">9th July 2010, 22:19</div></div><div class="posttext">I wonder how large a separate NSIS installer with inetc with a single purpose (download data from a given location (provided on the command line, perhaps)) would be - could certainly execute that in the background (you'd still get no feedback on progress, though).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th July 2010, 10:09</div></div><div class="posttext">That'd just be wasting more space and at the end of the day you'd still have to extract wget.exe to run it. I don't see the problem with wget's size but another option is to use a VBS to do it (search Google).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">10th July 2010, 13:26</div></div><div class="posttext">That'd just be wasting more space and at the end of the day you'd still have to extract wget.exe to run it.<br />
o_O<br />
<br />
Either I missed something, or maybe you misunderstood :)<br />
<br />
I wasn't suggesting a separate installer that calls wget.exe - I was suggesting a separate installer that calls inetc; replacing wget.exe altogether.<br />
The overhead from that would be the size of a bare installer (31.8k - not counting the size of inetc as that's what he's already using; including inetc.dll: 40.9k) + some code space if he made it command line-driven, rather than hardcoded URIs and conditions.<br />
That would still be less than including wget with any compression (/solid lzma gives 152.6k)<br />
<br />
I don't see the problem with wget's size<br />
neither do I - but if for whatever reason it is a concern, the inetc-in-separate-installer route should work, no?<br />
( as would the VBS route, which would probably be even smaller, yes )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th July 2010, 13:51</div></div><div class="posttext">Ah sorry yes I misunderstood, or rather I didn't think of that :)<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zirnevis</div><div class="date">12th July 2010, 09:42</div></div><div class="posttext">Hi guys,<br />
<br />
Thanks for the response,<br />
I managed to do it by making another installer and using inetload then calling it with exedos /async <br />
<br />
to run it in the background. the only thing i need to do is to check the installer file size and make a timer in main installer to check the downloaded size and compare with original size to draw a process bar.<br />
<br />
I'm not sure how to check file size a file over web?<br />
<br />
any idea?<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">12th July 2010, 10:01</div></div><div class="posttext">You should use inetc rather than inetload (inetc supersedes it). inetc has a ::head function which you can use to get the headers for your file. The headers will contain the file size if the server provides it.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>