<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Zipdll, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Zipdll NSIS Discussion" />
	
	<title> Zipdll [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Zipdll</div>
<hr />
<div class="pda"><a href="t-239785.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=239785">Zipdll</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">lastninja</div><div class="date">3rd March 2006, 10:28</div></div><div class="posttext">hi all,<br />
Im a newbye with zipdll scripting. <br />
I have 2 qurstions. I succesfully create an installer that during installation extract a zip file into an installation dir, but:<br />
1) this works ONLY in the system/machine where I create the installer. In other systems the installer just copy the zip file but it doesnt extract files within. What did I forget?<br />
2) (less crucial) when the installation finished I delete the zip file from installation directory using Nsis' Delete command. Is there a method to extract files from zip file directly during installation without the need to copy the entire file zip in the installation dir?<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Larsen</div><div class="date">3rd March 2006, 10:38</div></div><div class="posttext">Why do you use a zip file? Couldn´t you just add files to your setup and have them compressed and uncompressed by NSIS?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lastninja</div><div class="date">3rd March 2006, 10:54</div></div><div class="posttext">I use Nsis to create game installer. My mork is to protect games which they will be sell in digital delivery. I use a specific program to protect games. After protecting, the program calls nsis to create installer. But the problem is that I have a source dir size over 2GB and nsis doesnt start. I dont know if the problem is related to nsis or the other program. So I have to zip file to reduce the source dir size. Other solution?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Larsen</div><div class="date">3rd March 2006, 11:05</div></div><div class="posttext">I probably can´t help you with that problem as I´m a newbie, too.<br />
<br />
But to narrow the problem down:<br />
- &quot;nsis doesnt start&quot; --&gt; any error message?<br />
- &quot;related to nsis or the other program&quot; --&gt; did you try to compile the script via commandline instead of with that other program?<br />
- What is the file size of the biggest file in that directory?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lastninja</div><div class="date">3rd March 2006, 14:07</div></div><div class="posttext">- &quot;nsis doesnt start&quot; --&gt; any error message?<br />
<br />
error message is diplayed on the other program<br />
<br />
<br />
- &quot;related to nsis or the other program&quot; --&gt; did you try to compile the script via commandline instead of with that other program?<br />
<br />
<br />
no i didnt, but it is irrilevant because I need to use that program.<br />
<br />
<br />
- What is the file size of the biggest file in that directory? [/B]<br />
<br />
files are all small, except for video and sounds (max 50 mb).<br />
<br />
<br />
No one can tell me why file extraction from a zip doenst work on other systems?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Larsen</div><div class="date">3rd March 2006, 14:15</div></div><div class="posttext">You could use the special build of NSIS that creates an install.log.<br />
<br />
http://nsis.sourceforge.net/Special_Builds</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">3rd March 2006, 15:51</div></div><div class="posttext">1) this works ONLY in the system/machine where I create the installer. In other systems the installer just copy the zip file but it doesnt extract files within. What did I forget? <br />
Do you have a sample script you can post that shows the problem?<br />
<br />
2) (less crucial) when the installation finished I delete the zip file from installation directory using Nsis' Delete command. Is there a method to extract files from zip file directly during installation without the need to copy the entire file zip in the installation dir? <br />
If the zip file is an external file (say on a CD/DVD) then you should be able to unzip by specifying the CD/DVD path as the source and $INSTDIR as the destination.  But, if the zip file is part of the installation, you're stuck. <br />
...But the problem is that I have a source dir size over 2GB and nsis doesnt start. <br />
Are you using NTFS on the system building the installs?  (If memory serves me, FAT32 does not support files over 2GB.)  Also: are you getting any errors or other symptoms?  (The advanced logging option suggested by Larsen wouldn't be a bad choice--you might be able to get some more info about where it's failing.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lastninja</div><div class="date">3rd March 2006, 16:37</div></div><div class="posttext">thanks for the reply,<br />
<br />
Originally posted by Comperio <br />
Do you have a sample script you can post that shows the problem?<br />
<br />
<br />
Here there is the most relevant part of the script:<br />
<br />
<br />
;--------------------------------<br />
;Include<br />
  !include &quot;MUI.nsh&quot;<br />
  <br />
  !include ${INSTALL_DEFS}<br />
  !include &quot;ZipDLL.nsh&quot;<br />
;--------------------------------<br />
[...]<br />
;--------------------------------<br />
; Main Section<br />
Section &quot;${AM_APPNAME}&quot; SecStarted<br />
<br />
; BASIC REQUIREMENTS<br />
  AddSize ${AM_SIZEONDISK}<br />
<br />
; INSTALL FILES<br />
  SetOutPath &quot;$INSTDIR&quot;<br />
   <br />
  Call AMInstallFiles<br />
<br />
  ZipDLL::extractall &quot;${AM_SRC}\install.zip&quot; &quot;$INSTDIR&quot;<br />
  Delete /REBOOTOK &quot;$INSTDIR\install.zip&quot;<br />
<br />
[...]<br />
SectionEnd<br />
<br />
<br />
All variables are right setted.<br />
<br />
 <br />
If the zip file is an external file (say on a CD/DVD) then you should be able to unzip by specifying the CD/DVD path as the source and $INSTDIR as the destination.  But, if the zip file is part of the installation, you're stuck.  <br />
<br />
Zip file is part of the installetion, but it isnt so much important... <br />
<br />
<br />
  <br />
Are you using NTFS on the system building the installs?  (If memory serves me, FAT32 does not support files over 2GB.)  Also: are you getting any errors or other symptoms?  (The advanced logging option suggested by Larsen wouldn't be a bad choice--you might be able to get some more info about where it's failing.)  <br />
<br />
I use fat32, ok for files &gt; 2GB, but this is for directory too?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd March 2006, 17:50</div></div><div class="posttext">What is AM_SRC? Are you trying to decompress a file from the local compiler machine or what?<br />
ZipDLL extracts files on the machine running the installer. You need to extract the Zip file first and then uncompress the contents of it afterwards.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lastninja</div><div class="date">3rd March 2006, 18:03</div></div><div class="posttext">Originally posted by Afrow UK <br />
What is AM_SRC? Are you trying to decompress a file from the local compiler machine or what?<br />
ZipDLL extracts files on the machine running the installer. You need to extract the Zip file first and then uncompress the contents of it afterwards.<br />
<br />
-Stu  <br />
<br />
thinking what to reply to you I finally find the error! It is exactly that variable. What in idiot!<br />
Thanks to help me to focus the error...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>