<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Compress file on uninstall, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Compress file on uninstall NSIS Discussion" />
	
	<title> Compress file on uninstall [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Compress file on uninstall</div>
<hr />
<div class="pda"><a href="t-272066.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=272066">Compress file on uninstall</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">31st May 2007, 10:37</div></div><div class="posttext">Hi all,<br />
<br />
i ve been searching posts about compressing files in NSIS installer/uninstaller but was not able to find information about my query.<br />
I'd like to compress some files on uninstalling process before they get deleted by my uninstaller. I wanted to know if they were a NSIS plug-in that can help me. I found ZIPDLL.DLL plug-in but it seems it can only be used to uncompress files.<br />
<br />
Thanks in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st May 2007, 11:20</div></div><div class="posttext">Installer compresses the included files with the best compression choice available nowadays.<br />
<br />
Well, you want to compress files before they get deleted by your uninstaller...<br />
You probably could do that by the stand alone command line 7zip utility (7za.exe) that is available on 7zip download section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">31st May 2007, 12:47</div></div><div class="posttext">Thanks i ll give a try to 7za.exe<br />
Therefore, i think i gave a bad explanation to my problem :<br />
<br />
I made a NSIS script to install my application. With that application user can create projects that are saved into a directory 'Projects' in $INSTDIR. When the user decide to uninstall my application i display a custom page (InstallOptions with checkboxes) that ask user if he want to keep files in the 'Projects' directory. I used to use RMDIR /r $INSTDIR to uninstall my application, i don't know how to skip deletion of a particular directory so i decided to copy this directory to a temporary place and wanted them to be zipped. I thought i could use NSIS script / plug-in to compress this files/sub-directories to store them in case of re-installation of my application.<br />
<br />
Maybe this can be done with 7za.exe embedded in the NSIS script installer.<br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">31st May 2007, 13:24</div></div><div class="posttext">Originally posted by fluidz91 <br />
I used to use RMDIR /r $INSTDIR to uninstall my application, i don't know how to skip deletion of a particular directory...<br />
There's a good chance to achieve that with Advanced Uninstall Log,<br />
<br />
http://nsis.sourceforge.net/User:Red_Wine#Advanced_Uninstall_Log_NSIS_Header</div></div><hr />


<div class="post"><div class="posttop"><div class="username">fluidz91</div><div class="date">31st May 2007, 13:51</div></div><div class="posttext">I first wanted to use uninstall log (i don't remember if it was yours) but my app is 256Mb, 5617 files and 1897 directories, i was afraid that the log file would be too large to be used correctly at uninstall...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>