<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with reading NSIS install dir, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with reading NSIS install dir NSIS Discussion" />
	
	<title> Problem with reading NSIS install dir [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with reading NSIS install dir</div>
<hr />
<div class="pda"><a href="t-62246.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=62246">Problem with reading NSIS install dir</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ametrano</div><div class="date">11th October 2001, 15:13</div></div><div class="posttext">Hi all<br />
<br />
I have a problems reading from the registry the install dir of NSIS and then using it to point to splash.exe<br />
Let's the script speak:<br />
<br />
Function .onInit<br />
  SetOutPath $TEMP<br />
  File /oname=spltmp.bmp &quot;Docs\images\QL-largish.bmp&quot;<br />
; the following 2 lines do not work<br />
;  ReadRegStr $0 HKEY_LOCAL_MACHINE SOFTWARE\NSIS &quot;&quot;<br />
;  File /oname=spltmp.exe &quot;$0\splash.exe&quot;<br />
  File /oname=spltmp.exe &quot;E:\program files\nsis\splash.exe&quot;<br />
  ExecWait '&quot;$TEMP\spltmp.exe&quot; 4000 $HWNDPARENT $TEMP\spltmp'<br />
  Delete $TEMP\spltmp.exe<br />
  Delete $TEMP\spltmp.bmp<br />
FunctionEnd<br />
<br />
Of course I would like the script to be more general, removing the absolute path to my NSIS installation.<br />
<br />
Any suggestion?<br />
<br />
thank you in advance<br />
<br />
ciao -- Nando</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Olfred</div><div class="date">11th October 2001, 17:46</div></div><div class="posttext">try HKLM and not HKEY_LOCAL_MACHINE</div></div><hr />


<div class="post"><div class="posttop"><div class="username">DuaneJeffers</div><div class="date">11th October 2001, 21:55</div></div><div class="posttext">The Splash Function needs the exact location. Relative location is a bad idea. I really needs exact location.<br />
<br />
-Duane</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ametrano</div><div class="date">12th October 2001, 09:05</div></div><div class="posttext">Olfred: I already tried HKLM, but it doesn't work.<br />
<br />
DuaneJeffers:<br />
&gt; The Splash Function needs the exact location.<br />
&gt; Relative location is a bad idea.<br />
<br />
well what I'm trying to do with:<br />
  ReadRegStr $0 HKLM SOFTWARE\NSIS &quot;&quot;<br />
  File /oname=spltmp.exe &quot;$0\splash.exe&quot;<br />
<br />
is to have the string &quot;$0\splash.exe&quot; to hold the full path to the splash executable. The problem is that since I'm not the only one using the .nsi script I do not want to bind the script to my installation. Instead I would like the script to learn from the registry where to find splash.exe<br />
<br />
still confused about why those 2 lines do not work<br />
<br />
thank you<br />
<br />
ciao -- Nando</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Olfred</div><div class="date">12th October 2001, 18:27</div></div><div class="posttext">try ReadRegStr $0 HKLM SOFTWARE\NSIS &quot;(Standard)&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>