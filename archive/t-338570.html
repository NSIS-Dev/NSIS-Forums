<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" how to get the  physical memory size, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  how to get the  physical memory size NSIS Discussion" />
	
	<title> how to get the  physical memory size [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  how to get the  physical memory size</div>
<hr />
<div class="pda"><a href="t-338570.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=338570">how to get the  physical memory size</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">linzhong</div><div class="date">1st December 2011, 11:23</div></div><div class="posttext">how to get the system's physical memory size in the nsis script? Please tell me,thank you!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">1st December 2011, 13:24</div></div><div class="posttext">http://nsis.sourceforge.net/HwInfo_plug-in</div></div><hr />


<div class="post"><div class="posttop"><div class="username">linzhong</div><div class="date">2nd December 2011, 09:08</div></div><div class="posttext">thank you!,but the value is incorrect.My computer is 32bit windowsXP OS,4096MB physical memory.but use:<br />
<br />
Section &quot;Silent MakeNSIS&quot;<br />
	HwInfo::GetSystemMemory<br />
  StrCpy $R0 $0<br />
MessageBox MB_OK &quot;You have $0MB of RAM&quot;<br />
<br />
SectionEnd <br />
<br />
-------------<br />
get the value 2048MB</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">2nd December 2011, 09:19</div></div><div class="posttext">On 32 bits WinXP, the virtual address space of processes and applications is limited to 2 GB, unless the process is image_file_large_address_aware and the /3GB flag is set in boot.ini. http://msdn.microsoft.com/en-us/windows/hardware/gg487508<br />
If you don't have the 3GB option enabled, there's probably no need to &quot;find&quot; the full 4GB because no single process will be able to address more than 2GB anyway. If you do have the option enabled, and NSIS doesn't support large virtual address space (I don't know if this is the case), you'll probably have to create and execute a new process that does support it, and then have that report back to NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">linzhong</div><div class="date">2nd December 2011, 09:41</div></div><div class="posttext">I find in msdn ,it says use &quot;GlobalMemoryStatusEx&quot; instead of &quot;GlobalMemoryStatus&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">linzhong</div><div class="date">2nd December 2011, 09:48</div></div><div class="posttext">void CHardwareInfo::GetTotalSystemMemory( int &amp;sysMem )<br />
{<br />
	MEMORYSTATUS memorystatus;<br />
	GlobalMemoryStatus( &amp;memorystatus );<br />
	sysMem = (int)( ceil( memorystatus.dwTotalPhys / 1048576.f ) ); <br />
}<br />
-----------------------<br />
above is the hwinfo soure,the follow is msdn article:<br />
<br />
How to use the API to obtain the total physical memory value<br />
To retrieve the most accurate value that is under program control, developers should follow these steps: <br />
1.Call the GlobalMemoryStatusEx function.<br />
2.Query the ullAvailPhys member of the MEMORYSTATUSEX structure.<br />
The components use either the GlobalMemoryStatusEx function or the same kernel technique that is used by the GlobalMemoryStatusEx function to calculate the total physical memory on a computer. To programmatically obtain this value, query the ullAvailPhys member of the MEMORYSTATUSEX structure passed as input to the GlobalMemoryStatusEx function.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>