<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Special Option, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Special Option NSIS Discussion" />
	
	<title> Special Option [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Special Option</div>
<hr />
<div class="pda"><a href="t-150705.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=150705">Special Option</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cai_sebas</div><div class="date">28th September 2003, 10:21</div></div><div class="posttext">Could someone help me, :rolleyes: <br />
<br />
because i want that at the end of the (my) setup/instalation. The instalation places a copy of the instalation file in a specific folder.<br />
<br />
I hope you guys know what i mean, because my english is very bad.  :cry: <br />
<br />
cai_sebas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th September 2003, 11:26</div></div><div class="posttext">You can process $CMDLINE to get the installer name and then use CopyFiles to copy it to $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">29th September 2003, 03:45</div></div><div class="posttext">I just needed this on a installer I made, and here's the modification to the GetParameters function I found in the NSIS archive.<br />
<br />
You have to call this function before copying the file, and the name of the installer is saved in the $2 variable.<br />
<br />
Function GetParameters<br />
  Push $R0<br />
  Push $R1<br />
  Push $R2<br />
  StrCpy $R0 $CMDLINE 1<br />
  StrCpy $R1 '&quot;'<br />
  StrCpy $R2 1<br />
  StrCmp $R0 '&quot;' loop<br />
    StrCpy $R1 ' ' ; we're scanning for a space instead of a quote<br />
  loop:<br />
    StrCpy $R0 $CMDLINE 1 $R2<br />
    StrCmp $R0 $R1 loop2<br />
    StrCmp $R0 &quot;\&quot; &quot;&quot; &quot;nofile&quot;<br />
      IntOp $2 $R2 + 1<br />
    nofile:<br />
    ;MessageBox MB_OK &quot;r0: $R0&quot;<br />
    StrCmp $R0 &quot;&quot; loop2<br />
    IntOp $R2 $R2 + 1<br />
    Goto loop<br />
  loop2:<br />
    IntOp $R0 $R2 - $2<br />
    IntOp $R0 $R0 - 4<br />
    ;MessageBox MB_OK &quot;$R2 - $2 = $R0&quot;<br />
    StrCpy $2 $CMDLINE $R0 $2 ; we save the filename<br />
    ;MessageBox MB_OK &quot;$2&quot;<br />
  loop2b:<br />
    IntOp $R2 $R2 + 1<br />
    StrCpy $R0 $CMDLINE 1 $R2<br />
    ;MessageBox MB_OK &quot;rr0: $R0&quot;<br />
    StrCmp $R0 &quot; &quot; loop2b<br />
  StrCpy $R0 $CMDLINE &quot;&quot; $R2<br />
  Pop $R2<br />
  Pop $R1<br />
  Exch $R0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">29th September 2003, 07:31</div></div><div class="posttext">I think that function can be made smaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th September 2003, 19:15</div></div><div class="posttext">This works.<br />
<br />
Usage:<br />
Call GetEXEName<br />
Pop $R0 ;full installer exe file name<br />
<br />
Function GetEXEName<br />
Push $R0<br />
Push $R1<br />
Push $R2<br />
 StrCpy $R0 $CMDLINE -2<br />
 StrLen $R2 $R0<br />
 IntOp $R2 $R2 - 1<br />
 StrCpy $R0 $R0 &quot;&quot; -$R2<br />
 StrCpy $R2 0<br />
Loop:<br />
 IntOp $R2 $R2 - 1<br />
 StrCpy $R1 $R0 1 $R2<br />
 StrCmp $R1 &quot;&quot; Exit<br />
 StrCmp $R1 &quot;\&quot; 0 Loop<br />
 IntOp $R2 $R2 + 1<br />
 StrCpy $R0 $R0 &quot;&quot; $R2<br />
Exit:<br />
Pop $R2<br />
Pop $R1<br />
Exch $R0<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cai_sebas</div><div class="date">29th September 2003, 19:23</div></div><div class="posttext">Thanx, it helped me a lot. ;)<br />
<br />
And special thanx to Deliverator who wrote a tutorial for me!<br />
<br />
Sebas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">29th September 2003, 19:26</div></div><div class="posttext">I'll add this onto the NSIS Archive (http://nsis.sourceforge.net/archive/nsisweb.php?page=427&amp;instances=0).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">n0On3</div><div class="date">29th September 2003, 21:01</div></div><div class="posttext">Originally posted by Joost Verburg <br />
I think that function can be made smaller.  <br />
probably ;) but I needed the filename and parameters.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>