<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Uninstall Files from different location, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Uninstall Files from different location NSIS Discussion" />
	
	<title> Uninstall Files from different location [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Uninstall Files from different location</div>
<hr />
<div class="pda"><a href="t-332787.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=332787">Uninstall Files from different location</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">anandharaja</div><div class="date">24th July 2011, 07:11</div></div><div class="posttext">hi,<br />
i want to create installer for my program, but i install the files in different location for example $PROGRAMFILES\My program1 and some files in $PROGRAMFILES\My program2 and so on. but the installer fail to uninstall files from different location.<br />
<br />
if i write uninstaller in my Program1 folder means it uninstall all files in my program1, failes to uninstall files in other locations. <br />
<br />
How can i create installer to uninstall all files.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th July 2011, 07:52</div></div><div class="posttext">In the uninstaller the value of $INSTDIR is actually $EXEDIR. So while themost straight-forward way may seem to be just making two uninstallers, you'll run into the same problem when you're trying to execute the second one. :P<br />
<br />
So what you need to do is save the exact path that you installed to, either in the uninstaller using FileWriteByte etc, or in the registry or an ini file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anandharaja</div><div class="date">24th July 2011, 10:12</div></div><div class="posttext">Thanks for the reply,<br />
iam not write these type of installer before, can you provide example script.<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th July 2011, 14:00</div></div><div class="posttext">The manual has all the information you'll need. Simply use the INI commands to write the paths to an ini file. Then in un.onInit, read the paths from the INI file and you'll know what paths to delete your files from.<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">24th July 2011, 14:33</div></div><div class="posttext">If, during install, you ignore $INSTDIR (the install path selected by user) and instead install to some &quot;fixed&quot; paths, such as &quot;$PROGRAMFILES\My program1&quot; and &quot;$PROGRAMFILES\My program2&quot;, then I think the uninstaller should also un-install (remove) files from the &quot;fixed&quot; paths &quot;$PROGRAMFILES\My program1&quot; and &quot;$PROGRAMFILES\My program2&quot;. This won't work if the install folders were moved/renamed in the meantime, but in that case storing the original paths in some INI file or in the Registry doesn't help either...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">24th July 2011, 15:35</div></div><div class="posttext">Of course, you should always verify that the path is correct. If for example it has the wrong files, then it's probably not safe to go deleting stuff...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">24th July 2011, 16:27</div></div><div class="posttext">Of course, you should always verify that the path is correct. If for example it has the wrong files, then it's probably not safe to go deleting stuff...<br />
<br />
Sure. But my point was: He ignored the user-selected $INSTDIR and installed to a fixed path, such as &quot;$PROGRAMFILES\My program1&quot; instead. Of course the path is not &quot;fixed&quot; in the sense that it will be identical on every computer (because of $PROGRAMFILES), but it is fixed for a specific computer. So at un-install time it is safe to uninstall from the same fixed path that we installed to at install time. There is no need to remember a fixed path in an INI file or the Regsitry, because... well... it is fixed.<br />
<br />
(Assuming that the suffix &quot;My program1&quot; is unique to his program, of course! Not something commonly used by another product. But if the suffix wasn't unique, then installing to fixed path &quot;$PROGRAMFILES\&lt;suffix&gt;&quot; wouldn't be safe, in the first place)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">anandharaja</div><div class="date">30th August 2011, 09:21</div></div><div class="posttext">Thanks to MSG and LoRd_MuldeR for your replies.<br />
but i still in confusion, where to i use WriteINI Str in Section or i need to create Function.<br />
please can you provide example script with two sections.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">30th August 2011, 11:51</div></div><div class="posttext">I suggest you create a hidden final section in your installer: Section &quot;-LastSection&quot; LastSection<br />
In that section you use the INI instructions to write the path of 'My program2' to an ini file in the 'my program1' directory. The uninstaller, also created in the 'my program1' directory, can read the ini file using ReadINIStr (you can do this in the Uninstall section, or in the un.onInit function).<br />
<br />
I'm not going to write example code here, because it's extremely simple to do and it's a worthwhile exercise for you to figure it out on your own. Look at the INI command examples in the link I provided earlier, they'll show you how to use the commands.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>