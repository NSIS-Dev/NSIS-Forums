<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Compare file sizes, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Compare file sizes NSIS Discussion" />
	
	<title> Compare file sizes [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Compare file sizes</div>
<hr />
<div class="pda"><a href="t-195895.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=195895">Compare file sizes</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">7th October 2004, 19:16</div></div><div class="posttext">Hello.  I want to add a section in my installer that would allow me to compare some file sizes to ensure the installer did its job, and newer files were copied into place.  I'm trying to guard against a user not having rights, or having a file locked, and not updated.  <br />
<br />
I did some searching and I found a thread from about 2 years ago.  It said I could use the following script to compare file sizes.  I don't really understand how to incorporate or use this code within my own.  Could someone help me out.  Thanks.<br />
<br />
<br />
outfile FileSizeNew.exe<br />
name FileSizeNew<br />
<br />
; FileSizeNew<br />
;<br />
; Script to find the size of a file.<br />
; Much more efficient than the<br />
; ExtensionDLL FileSize :-)<br />
;<br />
; by Hendri Adriaens<br />
;    HendriAdriaens@hotmail.com<br />
<br />
section<br />
  Push &quot;$EXEDIR\FileSizeNew.nsi&quot;<br />
  Call FileSizeNew<br />
  Pop $0<br />
  MessageBox MB_OK &quot;File size: $0 bytes.&quot;<br />
sectionend<br />
<br />
function FileSizeNew<br />
  Exch $0<br />
  Push $1<br />
  FileOpen $1 $0 &quot;r&quot;<br />
  FileSeek $1 0 END $0<br />
  FileClose $1<br />
  Pop $1<br />
  Exch $0  <br />
functionend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">7th October 2004, 19:55</div></div><div class="posttext">1) To compare numbers you can use IntCmp command. To compare really big numbers (64-bits) you can use System plugin. To convert these numbers to kb, you can use IntOp $var $var * 1024.<br />
<br />
OR<br />
<br />
2) To make calculations with this number in an advanced way, is prefferable to use Math plugin.<br />
<br />
If you would like me to make an example for you, choose one of the options above.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">8th October 2004, 19:04</div></div><div class="posttext">deguix,  thanks for the reply.  Boy, I'm still a bit confused.  Basically, after my update, there will be a file here called:  &quot;$INSTDIR\GPLoans\GPAdmin.exe&quot;.  I know its file size should be 5,066,752 bytes.  I would like to verify this.  Thanks.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th October 2004, 19:08</div></div><div class="posttext">You would be better of comparing files using MD5 values:<br />
<br />
http://nsis.sourceforge.net/archive/nsisweb.php?page=488<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">8th October 2004, 19:52</div></div><div class="posttext">Yeah, I should use that dll too...</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>