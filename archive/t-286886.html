<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Control script with arguments, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Control script with arguments NSIS Discussion" />
	
	<title> Control script with arguments [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Control script with arguments</div>
<hr />
<div class="pda"><a href="t-286886.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=286886">Control script with arguments</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Ema</div><div class="date">14th February 2008, 17:00</div></div><div class="posttext">Hi all,<br />
Don't know if this is feasible,<br />
I'd like to change the setup executable generation acording to some input variable.<br />
<br />
Let's say when launching the setup generation <br />
makensis.exe myscript.nsi myPar<br />
<br />
if myPar is equal to ADD_WELCOME<br />
I would like to generate the setup adding the following line:<br />
<br />
!define MUI_FINISHPAGE_SHOWREADME &quot;http://www.test.com&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT &quot;Welcome&quot;<br />
<br />
Hope I wasn't too confusing.<br />
Thanks for any help</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">14th February 2008, 17:05</div></div><div class="posttext">have a look at the /D switch for makensis<br />
<br />
http://nsis.sourceforge.net/Docs/Chapter3.html#3.1.1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ema</div><div class="date">14th February 2008, 17:16</div></div><div class="posttext">Thanks for answering<br />
<br />
From the docs it's no t clear to me how to use it, it seems it's used only to set the $INSTDIR.<br />
<br />
installer.exe /D=C:\Program Files\NSIS<br />
<br />
And then I don't know if I can use to comment/uncomment lines in NSIS<br />
<br />
something like<br />
<br />
if !isdefined(Myvar)<br />
{<br />
!define MUI_FINISHPAGE_SHOWREADME &quot;http://www.test.com&quot;<br />
!define MUI_FINISHPAGE_SHOWREADME_TEXT &quot;Welcome&quot;<br />
}<br />
<br />
Thanks again</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th February 2008, 17:21</div></div><div class="posttext">You're looking at the wrong &quot;/D&quot;. Yathosho was referring to section 3.1 and not section 3.2. The first section describes command line arguments passed to the compiler while the second describes those passed to the installer itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ema</div><div class="date">14th February 2008, 17:30</div></div><div class="posttext">sorry, next time I'll read more carefully<br />
<br />
still I don't know how to then use this inside the script to select or unselect lines of code, like the welcome page.<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ema</div><div class="date">14th February 2008, 17:34</div></div><div class="posttext">I found it!<br />
<br />
!ifdef</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">14th February 2008, 17:34</div></div><div class="posttext">It defines constants in the script. If you execute:makensis /DMYVAR myscript.nsiyou'll have MYVAR defined in the context of your script and you could then use:!ifdef MYVAR<br />
# something<br />
!endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jozechu</div><div class="date">21st April 2008, 16:51</div></div><div class="posttext">I was also confused between compiler defines and installer defines.<br />
<br />
But, I've tried a lot of combinations to define a variable from command line but it never make my script works ...<br />
<br />
myinstaller /DMYVAR=bla<br />
<br />
<br />
!ifdef MYVAR<br />
    !define BASE_DIR &quot;${MYVAR}&quot;<br />
!else<br />
    !define BASE_DIR &quot;C:\default&quot;<br />
!endif<br />
<br />
I'm missing something?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>