<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Building on Linux does not generate makensis binary for me, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Building on Linux does not generate makensis binary for me NSIS Discussion" />
	
	<title> Building on Linux does not generate makensis binary for me [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Building on Linux does not generate makensis binary for me</div>
<hr />
<div class="pda"><a href="t-296940.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=296940">Building on Linux does not generate makensis binary for me</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 11:04</div></div><div class="posttext">Hi everybody,<br />
<br />
I've been trying to build a makensis binary w/o cross-compiler on my Linux x86_64 system.<br />
<br />
Here's what happens:<br />
<br />
<br />
intern:~/nsis-2.39-src # scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all \<br />
 NSIS_CONFIG_CONST_DATA=no PREFIX=~/nsis-2.39 install-compiler<br />
scons: Reading SConscript files ...<br />
Delete(&quot;nsis-05-Sep-2008.cvs&quot;)<br />
Delete(&quot;.instdist&quot;)<br />
Delete(&quot;.test&quot;)<br />
Using GNU tools configuration<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag $MAP_FLAG... no<br />
Checking for linker flag -s... no<br />
Checking for linker flag $MAP_FLAG... yes<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag -s... no<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for memcpy requirement... yes<br />
Checking for memset requirement... yes<br />
Checking for linker flag -pthread... no<br />
Checking for __BIG_ENDIAN__... no<br />
Checking for C library gdi32... no<br />
Checking for C library user32... no<br />
Checking for C library pthread... no<br />
Checking for C library iconv... no<br />
Checking for C library dl... no<br />
Checking for C library gdi32... no<br />
Checking for C library iconv... no<br />
Checking for C library pthread... no<br />
Checking for C library user32... no<br />
Checking for C++ library cppunit... no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br />
gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br />
gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br />
gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br />
gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br />
gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br />
gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br />
scons: done building targets.<br />
<br />
<br />
I'm missing a makensis binary?! The build/release/makensis directory has none, neither has the zip installation directory. Or am I just looking in the wrong place?<br />
<br />
Here are my binary versions:<br />
<br />
intern:~ # scons -v<br />
SCons by Steven Knight et al.:<br />
        script: v0.98.3.r2928, 2008/04/29 22:44:09, by knight on bangkok<br />
        engine: v0.98.3.r2928, 2008/04/29 22:44:09, by knight on bangkok<br />
Copyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 The SCons Foundation<br />
<br />
intern:~ # python -V<br />
Python 2.5.1<br />
<br />
intern:~ # gcc -v<br />
Using built-in specs.<br />
Target: x86_64-suse-linux<br />
Configured with: ../configure --enable-threads=posix --prefix=/usr --with-local-prefix=/usr/local <br />
 --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64<br />
 --enable-languages=c,c++,objc,fortran,obj-c++,java,ada --enable-checking=release<br />
 --with-gxx-include-dir=/usr/include/c++/4.2.1 --enable-ssp --disable-libssp --disable-libgcj<br />
 --with-slibdir=/lib64 --with-system-zlib --enable-shared --enable-__cxa_atexit<br />
 --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --program-suffix=-4.2<br />
 --enable-version-specific-runtime-libs --without-system-libunwind --with-cpu=generic --host=x86_64-suse-linux<br />
Thread model: posix<br />
gcc version 4.2.1 (SUSE Linux)<br />
<br />
I'm not familiar with scons and cross-compiling, so any help would be really appreciated. <br />
<br />
Thanks in advance!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 12:38</div></div><div class="posttext">The compiler should be installed into ~/nsis-2.39. Try providing a full path if that does work. I think I came across scons not eating the wave symbol once.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 13:16</div></div><div class="posttext">Thanks for your prompt reply, kichik!<br />
<br />
Originally posted by kichik <br />
The compiler should be installed into ~/nsis-2.39. <br />
It is:<br />
<br />
intern:~ # ll -d nsis*<br />
drwxr-xr-x 10 root root    4096 Sep  5 11:45 nsis-2.39<br />
drwxrwxrwx 12 root root    4096 Sep  5 14:03 nsis-2.39-src<br />
-rw-r--r--  1 root root 1474305 Sep  5 11:44 nsis-2.39-src.tar.bz2<br />
-rw-r--r--  1 root root 2277754 Sep  5 11:44 nsis-2.39.zip<br />
<br />
<br />
Originally posted by kichik <br />
Try providing a full path if that does work. I think I came across scons not eating the wave symbol once. <br />
<br />
Here we go (with a clean extracted source tarball):<br />
<br />
intern:~/nsis-2.39-src # scons SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all \<br />
 SKIPMISC=all NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 install-compiler<br />
scons: Reading SConscript files ...<br />
Delete(&quot;nsis-05-Sep-2008.cvs&quot;)<br />
Delete(&quot;.instdist&quot;)<br />
Delete(&quot;.test&quot;)<br />
Using GNU tools configuration<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag $MAP_FLAG... no<br />
Checking for linker flag -s... no<br />
Checking for linker flag $MAP_FLAG... yes<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag -s... no<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for memcpy requirement... yes<br />
Checking for memset requirement... yes<br />
Checking for linker flag -pthread... no<br />
Checking for __BIG_ENDIAN__... no<br />
Checking for C library gdi32... no<br />
Checking for C library user32... no<br />
Checking for C library pthread... no<br />
Checking for C library iconv... no<br />
Checking for C library dl... no<br />
Checking for C library gdi32... no<br />
Checking for C library iconv... no<br />
Checking for C library pthread... no<br />
Checking for C library user32... no<br />
Checking for C++ library cppunit... no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br />
gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br />
gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br />
gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br />
gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br />
gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br />
gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br />
scons: done building targets.<br />
<br />
intern:~/nsis-2.39-src # ll build/release/makensis/<br />
total 4<br />
drwxr-xr-x 2 root root  71 Sep  5 14:08 bzip2<br />
-rw-r--r-- 1 root root 896 Sep  5 14:08 crc32.o<br />
drwxr-xr-x 2 root root  36 Sep  5 14:08 zlib<br />
<br />
intern:~ # ll /root/nsis-2.39<br />
total 1680<br />
drwxr-xr-x  2 root root    103 Sep  5 11:45 Bin<br />
-rw-rw-rw-  1 root root  15632 Dec 22  2007 COPYING<br />
drwxr-xr-x  8 root root    100 Sep  5 11:45 Contrib<br />
drwxr-xr-x 20 root root   4096 Sep  5 11:45 Docs<br />
drwxr-xr-x 16 root root   4096 Sep  5 11:45 Examples<br />
drwxr-xr-x  2 root root   4096 Sep  5 11:45 Include<br />
drwxr-xr-x  3 root root     36 Sep  5 11:45 Menu<br />
-rw-rw-rw-  1 root root 347464 Aug 16 23:25 NSIS.chm<br />
-rw-r--r--  1 root root 699392 Aug 16 23:25 NSIS.exe<br />
drwxr-xr-x  2 root root   4096 Sep  5 11:45 Plugins<br />
drwxr-xr-x  2 root root    105 Sep  5 11:45 Stubs<br />
-rw-r--r--  1 root root 492544 Aug 16 23:25 makensis.exe<br />
-rw-r--r--  1 root root 136192 Aug 16 23:25 makensisw.exe<br />
-rw-rw-rw-  1 root root   1726 Dec  1  2007 nsisconf.nsh<br />
<br />
<br />
Still the same. I don't know, shouldn't the build output include some lines about the makensis binary, not just the archive libraries?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 13:21</div></div><div class="posttext">It should and it does for me. Try replacing `install-compiler` with `/root/nsis-2.39/makensis`.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 13:31</div></div><div class="posttext">Whoa, this starts to feel like a chatroom.  :)<br />
Originally posted by kichik <br />
It should and it does for me. Try replacing `install-compiler` with `/root/nsis-2.39/makensis`. <br />
Doing that just produces:<br />
...<br />
scons: *** Do not know how to make target `/root/nsis-2.39/makensis'.  Stop.<br />
...<br />
Using only 'makensis' as a target gives:<br />
intern:~/nsis-2.39-src # scons  SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all \<br />
 SKIPMISC=all NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 makensis<br />
scons: Reading SConscript files ...<br />
Delete(&quot;nsis-05-Sep-2008.cvs&quot;)<br />
Delete(&quot;.instdist&quot;)<br />
Delete(&quot;.test&quot;)<br />
Using GNU tools configuration<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag $MAP_FLAG... no<br />
Checking for linker flag -s... no<br />
Checking for linker flag $MAP_FLAG... yes<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for linker flag -s... no<br />
Checking for compiler flag -m32... yes<br />
Checking for linker flag -m32... no<br />
Checking for memcpy requirement... yes<br />
Checking for memset requirement... yes<br />
Checking for linker flag -pthread... no<br />
Checking for __BIG_ENDIAN__... no<br />
Checking for C library gdi32... no<br />
Checking for C library user32... no<br />
Checking for C library pthread... no<br />
Checking for C library iconv... no<br />
Checking for C library dl... no<br />
Checking for C library gdi32... no<br />
Checking for C library iconv... no<br />
Checking for C library pthread... no<br />
Checking for C library user32... no<br />
Checking for C++ library cppunit... no<br />
scons: done reading SConscript files.<br />
scons: Building targets ...<br />
gcc -o build/release/makensis/crc32.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/crc32.c<br />
gcc -o build/release/makensis/bzip2/blocksort.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/blocksort.c<br />
gcc -o build/release/makensis/bzip2/bzlib.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/bzlib.c<br />
gcc -o build/release/makensis/bzip2/compress.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/compress.c<br />
gcc -o build/release/makensis/bzip2/huffman.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/bzip2/huffman.c<br />
gcc -o build/release/makensis/zlib/deflate.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/deflate.c<br />
gcc -o build/release/makensis/zlib/trees.o -c -O2 -Wall -m32 -D_WIN32_IE=0x0500 Source/zlib/trees.c<br />
scons: done building targets.<br />
Sadly, no surprises here. The build and compiler directories look the same as above.<br />
<br />
Anything else I should try?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 17:18</div></div><div class="posttext">What happens when you don't specify a target? Try also running scons with --tree=all and attach the output here.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 17:43</div></div><div class="posttext">Thanks for your patience, kichik!<br />
Originally posted by kichik <br />
What happens when you don't specify a target?<br />
Still no makensis binary. :(  <br />
Originally posted by kichik <br />
Try also running scons with --tree=all and attach the output here. <br />
Exactly the same output. Please see the attached file. I really wish I knew more about scons.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 17:50</div></div><div class="posttext">--tree=all is for debugging, but it was ignored in your case. You're probably using an old version of scons where it's still --debug=dtree or --debug=tree. The output should be huge with that one. Make sure to still pass `install-compiler` along with it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 18:44</div></div><div class="posttext">Originally posted by kichik <br />
--tree=all is for debugging, but it was ignored in your case. You're probably using an old version of scons where it's still --debug=dtree or --debug=tree. The output should be huge with that one. Make sure to still pass `install-compiler` along with it. <br />
I was using scons 0.98.3.r2928; it supports the --tree=all option, so the output above seemed to be correct. :weird: <br />
<br />
BUT: I compiled scons 1.0.0 anyway and tried it again. Now we're getting somewhere: long logfile attached. Not working, but it's a completely different problem.<br />
<br />
Looks like the OpenSuSE 10.3 packaged scons is not working for NSIS - it doesn't detect/use/whatever the g++ compiler? <br />
<br />
Here's the result of intern:~/nsis-2.39-src # scons --tree=all SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all \<br />
 NSIS_CONFIG_CONST_DATA=no PREFIX=/root/nsis-2.39 install-compiler &amp;&gt; ../tree-all-scons100.log</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 21:35</div></div><div class="posttext">What does config.log show after running scons once on a clean source tree?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">eSquire</div><div class="date">5th September 2008, 21:43</div></div><div class="posttext">I really appreciate your dedication. :) Isn't it getting late at your whereabouts? Originally posted by kichik <br />
What does config.log show after running scons once on a clean source tree? Here it is.<br />
<br />
I'll be headed to bed soon myself, so my response times will be delayed for about the next 10 hours. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">5th September 2008, 22:18</div></div><div class="posttext">It successfully discovered there's no need for stdc++ on your system. Is the build log still the same after a clean build? It shouldn't have passed -lstdc++ with this config.log.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>