<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Error when trying to compile, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Error when trying to compile NSIS Discussion" />
	
	<title> Error when trying to compile [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Error when trying to compile</div>
<hr />
<div class="pda"><a href="t-278001.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=278001">Error when trying to compile</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">27th September 2007, 22:06</div></div><div class="posttext">Hi.<br />
I'm new to the program and i have an error when trying to compile my nsi:<br />
<br />
Error: resolving install function &quot;Nsis2Io&quot; in function &quot;mui.WelcomePre_26.5.9&quot;<br />
<br />
I'm using the Modern UI in it.<br />
<br />
Any idea of why im getting this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">27th September 2007, 22:38</div></div><div class="posttext">You must have a call to Nsis2Io in your code - which doesn't exist? There isn't any references in MUI.nsh or MUI2.nsh.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">28th September 2007, 01:53</div></div><div class="posttext">I'm using the MUI.nsh.<br />
I've searched in the System.nsh file and i founded this:<br />
<br />
http://img379.imageshack.us/img379/9237/errorgr1.jpg<br />
<br />
It says something about an uninstaller.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">28th September 2007, 07:04</div></div><div class="posttext">Well, i have decided not to use MUI.<br />
Now my installer is running well.<br />
But i still having a problem.<br />
I want to add a file to the installer, to use it later (at the end of the installation).<br />
I've tried using ReserveFile &quot;name.exe&quot; at the begining of the script, and later use Exec &quot;name.exe&quot; on the .onInstSucces function.<br />
This works if the file exists in the nsi folder.<br />
Then i tried removing the exe from the folder, and it did not work.<br />
<br />
Any idea of how to do this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th September 2007, 09:33</div></div><div class="posttext">ReserveFile doesn't actually extract but only adds the file to the compressed block. Use File instead.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th September 2007, 19:50</div></div><div class="posttext">I can't reproduce your original issue. Can you attach a script that demonstrates this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">28th September 2007, 22:54</div></div><div class="posttext">Sure, here i wrote a script:<br />
<br />
Name &quot;Test&quot;<br />
InstallDir &quot;C:\TestFolder\&quot;<br />
OutFile &quot;Test.exe&quot;<br />
ReserveFile &quot;name.exe&quot;  ; &lt;--------------------<br />
<br />
Page components<br />
Page directory<br />
Page instfiles<br />
<br />
Function .onInstSuccess<br />
Exec &quot;name.exe&quot; ; &lt;--------------------<br />
FunctionEnd<br />
<br />
Section &quot;Message&quot;<br />
MessageBox MB_ICONINFORMATION &quot;Test Message&quot;<br />
SectionEnd<br />
<br />
<br />
Just try doing it.<br />
I won't work if the file &quot;name.exe&quot; doesn't exists until the run-time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">28th September 2007, 23:35</div></div><div class="posttext">That's because ReserveFile doesn't actually extract. You must use File for that.<br />
<br />
But I wasn't asking about that, I was referring to the original problem for which you opened this thread.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">29th September 2007, 00:49</div></div><div class="posttext">But I wasn't asking about that, I was referring to the original problem for which you opened this thread. <br />
<br />
I modified my script.<br />
But i'm sure is something about Modern UI.<br />
<br />
That's because ReserveFile doesn't actually extract. You must use File for that.<br />
<br />
You did not understand me.<br />
This is what i want to do:<br />
<br />
1)Put/add a file to the installer.<br />
2)At the end of the instalation, execute that file that is INSIDE of the installer.<br />
I want to attach a file to installer and later use it.<br />
<br />
Can i do that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2007, 00:57</div></div><div class="posttext">You have to extract the file in order to execute it. You can't execute it from inside the installer. To extract it, use File.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">29th September 2007, 01:23</div></div><div class="posttext">Great, that works.<br />
I used File &quot;name.exe&quot; to extract it, then i used ExecWait &quot;name.exe&quot; and then Delete &quot;$INSTDIR\name.exe&quot;.<br />
It works well.<br />
<br />
Thank you very much.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">29th September 2007, 02:58</div></div><div class="posttext">Now i have another doubt.<br />
I have readed somes scripts but i still can't understand how to change the description of a section.<br />
<br />
How can i do this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">29th September 2007, 03:41</div></div><div class="posttext">In runtime?<br />
See Docs (http://nsis.sourceforge.net/Docs/Chapter4.html#4.7.2.1.6).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">29th September 2007, 03:55</div></div><div class="posttext">That's one of the scripts i've readed.<br />
In fact, i did not understand it at all.<br />
<br />
Can someone explain me the script?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th September 2007, 10:09</div></div><div class="posttext">That's a hard task when not using the MUI and requires knowledge of Win32 API. Without using the MUI, you don't even have a place to put the descriptions.<br />
<br />
In short: Create a UI with a label to display the descriptions by editing Contrib\UIs\default.exe with Resource Hacker. In .onMouseOverSection, get a HWND of that label. Set the appropriate text of that label by sending WM_SETTEXT with SendMessage.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Biasoli</div><div class="date">29th September 2007, 21:24</div></div><div class="posttext">I'm gonna try to do it, but i'll have to read a lot.<br />
<br />
Thanks again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2007, 11:55</div></div><div class="posttext">Originally posted by Biasoli <br />
Error: resolving install function &quot;Nsis2Io&quot; in function &quot;mui.WelcomePre_26.5.9&quot;I just had the same problem. It occured when I remmed the line<br />
!insertmacro MUI_LANGUAGE &quot;CustomLanguagefile1&quot;<br />
Enabling the line back again solved it. Disabling the Finish page also solved it.<br />
<br />
It's got to have something to do with cross-version format changes of the language files, but I don't understand why it would give errors if I remove the entire line. After all, it should just use the default language then, right? And that should always work with the currently installed version of NSIS, right? (Unless the installer failed to overwrite it, but I have no reason to assume that.)<br />
<br />
<br />
Edit: Note that my CustomLanguagefile1 was a copy from the *new* English languagefile, with one line edited. So it should be 100% new-version-compatible.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">29th November 2007, 17:15</div></div><div class="posttext">I don't understand what you've done to get this error. Please attach an example script.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galevsky</div><div class="date">29th November 2007, 17:38</div></div><div class="posttext">I know why.... you have to insert your MUI_PAGES BEFORE including the MUI_LANGUAGE ...<br />
<br />
If you run MUI_LANGUAGE before the MUI_PAGES =&gt; error to resolve Nsis2Io..<br />
<br />
<br />
Gal'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">29th November 2007, 21:00</div></div><div class="posttext">That's strange, because kichik just told me in the channel that it needs to go AFTER the page declarations. <br />
<br />
Either way, the problem occured for me when I disabled the language define, which is of course the very point - MUI doesn't default to a language, it needs the define. So pebkac, once again.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galevsky</div><div class="date">29th November 2007, 21:12</div></div><div class="posttext">? you didn't understand what I wrote ?<br />
<br />
you have to insert your MUI_PAGES BEFORE including the MUI_LANGUAGE ...<br />
<br />
That's strange, because kichik just told me in the channel that it needs to go AFTER the page declarations.<br />
<br />
It is the same thing.... MUI_PAGES come first then MUI_LANGUAGE and LangString.<br />
<br />
And do not skip MUI_LANGUAGE declaration !!!<br />
<br />
Following code is right:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
Name &quot;Modern UI Test&quot;<br />
OutFile test.exe<br />
XPStyle on<br />
<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Dutch&quot;<br />
<br />
<br />
LangString msg ${LANG_ENGLISH} &quot;English msg&quot;<br />
LangString msg ${LANG_DUTCH} &quot;Dutch msg&quot;<br />
<br />
<br />
function .onInit<br />
        !insertmacro MUI_LANGDLL_DISPLAY<br />
functionEnd<br />
<br />
section &quot;Silent&quot; SILENT_SEC<br />
       MessageBox MB_OK &quot;$(msg)&quot; ; $() instead of ${}<br />
sectionEnd<br />
<br />
<br />
Following code generates Nsis2io error:<br />
<br />
!include &quot;MUI.nsh&quot;<br />
<br />
Name &quot;Modern UI Test&quot;<br />
OutFile test.exe<br />
XPStyle on<br />
<br />
<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
!insertmacro MUI_LANGUAGE &quot;Dutch&quot;<br />
<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
<br />
LangString msg ${LANG_ENGLISH} &quot;English msg&quot;<br />
LangString msg ${LANG_DUTCH} &quot;Dutch msg&quot;<br />
<br />
function .onInit<br />
        !insertmacro MUI_LANGDLL_DISPLAY<br />
functionEnd<br />
<br />
section &quot;Silent&quot; SILENT_SEC<br />
       MessageBox MB_OK &quot;$(msg)&quot; ; $() instead of ${}<br />
sectionEnd<br />
<br />
<br />
Gal'</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>