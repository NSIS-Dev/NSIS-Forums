<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Localised UTF8, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Localised UTF8 NSIS Discussion" />
	
	<title> Localised UTF8 [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Localised UTF8</div>
<hr />
<div class="pda"><a href="t-298935.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=298935">Localised UTF8</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">zebedee</div><div class="date">20th October 2008, 22:54</div></div><div class="posttext">I have made our NSIS installer multilingual and the localisation of the 18 LangString files is done by Sisulizer.  <br />
This works fine for most languages. I have problems whereby Russian shows my LangStrings in obscure characters.  Whether or not I have set Russian locale and Unicode on traget PC.<br />
<br />
Main script ANSI<br />
LangString files ANSI<br />
Sisulizer localises in ANSI<br />
C# post processor writes correct per-language header line in each of the localised LangString files (base file is neutral...)  This app writes out UTF8<br />
NSIS compiled<br />
Installer runs OK for most languages.  <br />
NSIS Russian strings appear OK.<br />
Custom Russian strings do not.<br />
<br />
So<br />
<br />
I changed the LangString files to UTF8 and Sisulizer to write out UTF8 localised LangString files.<br />
This still did not work, different garbage at install time.<br />
<br />
I then changed Sisulizer to add the BOM.  Still not working.<br />
<br />
Since NSIS strings work ok in Russian, the ANSI is fine.<br />
<br />
<br />
Question - is there a way to get this to work with UTF8?<br />
<br />
If not, I can revert Sisulizer to write specific code pages for my LangString files,  and change my C# post-process to write out in specified code pages.  Would that work?<br />
<br />
If not, I can switch to the Unicode NSIS.  I have read most of the thread on this option but am nervous about the A/W calls and other concerns that I may not be aware of.<br />
<br />
I am not completely sure what plugins we are using - I inherited the script.  Here are the Includes<br />
!include &quot;FileFunc.nsh&quot;<br />
!include &quot;LogicLib.nsh&quot;<br />
!include &quot;MUI.nsh&quot; <br />
!include &quot;nsProcess.nsh&quot;<br />
!include &quot;ServiceLib.nsh&quot;<br />
!include &quot;WordFunc.nsh&quot;<br />
<br />
What's my best option to get my own strings to display correctly on a Russian locale PC?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zebedee</div><div class="date">23rd October 2008, 04:05</div></div><div class="posttext">update:<br />
<br />
I changed the C# post-process to both read and write in the particular code page, as well as reverting Sisulizer to write out in those code pages.<br />
<br />
It works.<br />
<br />
When will the main product become Unicode?....</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>