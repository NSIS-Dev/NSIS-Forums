<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Not all files being included/.extracted, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Not all files being included/.extracted NSIS Discussion" />
	
	<title> Not all files being included/.extracted [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Not all files being included/.extracted</div>
<hr />
<div class="pda"><a href="t-218543.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=218543">Not all files being included/.extracted</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">deathwish2</div><div class="date">10th June 2005, 15:21</div></div><div class="posttext">Greetings,<br />
<br />
In my script I use the &quot;File&quot; command 8 times and during compilation it indicates that it has included them and displays the compression values.  When I run the program, although it says that they have been extracted only 6 actually get extracted.  I can't figure out why this would be.  Any ideas?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th June 2005, 15:40</div></div><div class="posttext">Yes, attach your script :p<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deathwish2</div><div class="date">10th June 2005, 16:40</div></div><div class="posttext">I have a little more info, since I was testing more...<br />
(BTW v2.06)<br />
<br />
If one does the following:<br />
<br />
;Download area for most up to date files<br />
StrCpy $DOWNLOAD_URL &quot;http://some_url/&quot;<br />
<br />
;Most up to date file at compilation<br />
File &quot;test.txt&quot;<br />
<br />
;Download the newest version if possible (i.e. net available)<br />
StrCpy $DOWNLOAD_FILENAME &quot;test.txt&quot;<br />
NSISdl::download_quiet $DOWNLOAD_URL$DOWNLOAD_FILENAME $TEMP\$DOWNLOAD_FILENAME<br />
Pop $R0<br />
StrCmp $R0 &quot;success&quot; +2 +1<br />
Detail Print &quot;Download of test.txt failed - using local copy.&quot;<br />
.<br />
.<br />
.<br />
<br />
When the network isn't available (which is likely for the intentions of this app) what happens is that the &quot;download&quot; directive seems to delete the file test.txt in the destination directory.  So falling back to the &quot;local&quot; copy fails unless I do:<br />
<br />
StrCmp $R0 &quot;success&quot; +3 +1<br />
Detail Print &quot;Download of test.txt failed - using local copy.&quot;<br />
File &quot;test.txt&quot;<br />
.<br />
.<br />
.<br />
<br />
Which to me is just an UGLY hack.<br />
<br />
Any suggestions on cleaner code?<br />
<br />
Thx.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th June 2005, 16:48</div></div><div class="posttext">Don't use variables for strings if they aren't going to change dynamically. This wastes memory very much!<br />
<br />
<br />
!define DownloadURL  &quot;http://some_url/&quot;<br />
!define DownloadFile &quot;test.txt&quot;<br />
<br />
NSISdl::download_quiet &quot;${DownloadURL}${DownloadFile}&quot; &quot;$TEMP\${DownloadFile}&quot; <br />
Pop $R0<br />
StrCmp $R0 &quot;success&quot; noDownloadFile<br />
<br />
 DetailPrint &quot;Download of test.txt failed - using local copy.&quot;<br />
 SetOutPath $TEMP<br />
 File &quot;test.txt&quot;<br />
<br />
noDownloadFile:<br />
<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deathwish2</div><div class="date">10th June 2005, 17:08</div></div><div class="posttext">Thx,<br />
<br />
I'm going to have to change quite a bit of my code (I only gave an example snippet).  Nonetheless... I see where I have to go.  Also thanks for the info on the variables/memory... but they will be changing through the script so...:up:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>