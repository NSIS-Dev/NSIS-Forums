<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" scoped_ptr.hpp:85: Invalid token in expression on solaris sparc compile, any hints, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  scoped_ptr.hpp:85: Invalid token in expression on solaris sparc compile, any hints NSIS Discussion" />
	
	<title> scoped_ptr.hpp:85: Invalid token in expression on solaris sparc compile, any hints [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  scoped_ptr.hpp:85: Invalid token in expression on solaris sparc compile, any hints</div>
<hr />
<div class="pda"><a href="t-220002.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=220002">scoped_ptr.hpp:85: Invalid token in expression on solaris sparc compile, any hints</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">27th June 2005, 13:14</div></div><div class="posttext">Hi, <br />
<br />
When running &quot;make&quot;..yes, &quot;make&quot; not &quot;Scons&quot; ;) on SunOS 5.8 with NSIS 2.04 PrecompileExeheads I almost get everything compiled except the scoped_ptr.hpp.<br />
<br />
Q: any tips would be welcome.<br />
<br />
thissparc% make makensis                           <br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c zlib/deflate.c -o ../build/zlib/deflate.o<br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c zlib/trees.c -o ../build/zlib/trees.o<br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c bzip2/blocksort.c -o ../build/bzip2/blocksort.o<br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c bzip2/bzlib.c -o ../build/bzip2/bzlib.o<br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c bzip2/compress.c -o ../build/bzip2/compress.o<br />
gcc -Wall -O3 -DCOMPRESS_MF_BT -c bzip2/huffman.c -o ../build/bzip2/huffman.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/7zGuids.cpp -o ../build/7zip/7zGuids.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/Common/CRC.cpp -o ../build/7zip/Common/CRC.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/7zip/Compress/LZ/LZInWindow.cpp -o ../build/7zip/7zip/Compress/LZ/LZInWindow.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/7zip/Compress/LZMA/LZMAEncoder.cpp -o ../build/7zip/7zip/Compress/LZMA/LZMAEncoder.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/7zip/Common/OutBuffer.cpp -o ../build/7zip/7zip/Common/OutBuffer.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/7zip/Compress/RangeCoder/RangeCoderBit.cpp -o ../build/7zip/7zip/Compress/RangeCoder/RangeCoderBit.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c 7zip/Common/Alloc.cpp -o ../build/7zip/Common/Alloc.o<br />
g++ -Wall -O3 -DCOMPRESS_MF_BT -c build.cpp -o ../build/build.o<br />
In file included from util.h:13,<br />
                 from build.cpp:9:<br />
boost/scoped_ptr.hpp:85: Invalid token in expression<br />
boost/scoped_ptr.hpp:92: Invalid token in expression<br />
make: *** [../build/build.o] Error 1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ElvenProgrammer</div><div class="date">27th June 2005, 16:23</div></div><div class="posttext">Do you mind pasting the lines of code where the error is?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">27th June 2005, 17:15</div></div><div class="posttext">Just in the NSIS source as stated on lines 85 and 92<br />
<br />
boost/scoped_ptr.hpp:85: Invalid token in expression<br />
boost/scoped_ptr.hpp:92: Invalid token in expression<br />
<br />
Below is the code anyhow...<br />
----------------------------------------------------<br />
 // implicit conversion to &quot;bool&quot;<br />
<br />
#if defined(__SUNPRO_CC) &amp;&amp; BOOST_WORKAROUND(__SUNPRO_CC, &lt;= 0x530)<br />
<br />
    operator bool () const<br />
    {<br />
        return ptr != 0;<br />
    }<br />
<br />
#elif defined(__MWERKS__) &amp;&amp; BOOST_WORKAROUND(__MWERKS__, BOOST_TESTED_AT(0x3003))<br />
    typedef T * (this_type::*unspecified_bool_type)() const;<br />
    <br />
    operator unspecified_bool_type() const // never throws<br />
    {<br />
        return ptr == 0? 0: &amp;this_type::get;<br />
    }<br />
<br />
#else <br />
    typedef T * this_type::*unspecified_bool_type;<br />
<br />
    operator unspecified_bool_type() const // never throws<br />
    {<br />
        return ptr == 0? 0: &amp;this_type::ptr;<br />
    }<br />
<br />
#endif</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ElvenProgrammer</div><div class="date">27th June 2005, 20:44</div></div><div class="posttext">I should look through the code where the macro BOOST_WORKAROUND(a, b) is defined, I'm sorry I don't have the time for it, maybe if you could find it...<br />
I guess is that one who's giving the problem...:confused:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">onad</div><div class="date">28th June 2005, 09:46</div></div><div class="posttext">Thanks anyhow for looking into it. For now I've disabled the code and see if I can do a full makensis compile on SunOS.<br />
<br />
If I'll finish my quest of creating  Solaris Posix compliant makensis, I will create a Wiki with all the things one needs to do to make it work, in the mean time I see if code improvments will be merged with the CVS.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>