<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with WM_NEXTDLGCTL, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with WM_NEXTDLGCTL NSIS Discussion" />
	
	<title> Problem with WM_NEXTDLGCTL [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with WM_NEXTDLGCTL</div>
<hr />
<div class="pda"><a href="t-303000.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=303000">Problem with WM_NEXTDLGCTL</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">sirbabyface</div><div class="date">11th February 2009, 10:12</div></div><div class="posttext">I'm trying to create a page with 2 buttons. One of them it to replace the NEXT button. So I've used this line to make it default.<br />
<br />
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $BUTTON 1<br />
<br />
The problem is when I click on the other button, instead of running the function click2, it runs the function click1. But on the second click it already goes to the function click2. More strange is, that if I do the first click in any place of the dialog, then when I click on the button2, it goes to the function click2.<br />
<br />
Strange??<br />
<br />
More strange. If I've just 1 page, everything works just fine.<br />
<br />
Where goes a script so you can test it.<br />
<br />
!include LogicLib.nsh<br />
!include nsDialogs.nsh<br />
<br />
Name &quot;nsDialogs Timer Example&quot;<br />
OutFile &quot;nsDialogs Timer Example.exe&quot;<br />
XPStyle on<br />
<br />
Var DIALOG<br />
Var BUTTON<br />
Var BUTTON2<br />
<br />
Page custom nsDialogsPage<br />
Page directory<br />
<br />
Function OnClick<br />
    MessageBox MB_OK &quot;Click 1&quot;<br />
FunctionEnd<br />
<br />
Function OnClick2<br />
    MessageBox MB_OK &quot;Click 2&quot;<br />
FunctionEnd<br />
<br />
Function nsDialogsPage<br />
<br />
    nsDialogs::Create 1018<br />
    Pop $DIALOG<br />
<br />
    ; Create the buttons<br />
    ${NSD_CreateButton} 15% 30% 70% 30% &quot;Go&quot;<br />
    Pop $BUTTON<br />
    ${NSD_OnClick} $BUTTON onClick<br />
    ; Set the Simple Button as the default button<br />
    SendMessage $BUTTON ${BM_SETSTATE} ${SW_SHOWDEFAULT} 1<br />
    SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $BUTTON 1 ; Problem is on this line<br />
    <br />
<br />
    ${NSD_CreateButton} 20% 65% 60% 20% &quot;Advance&quot;<br />
    Pop $BUTTON2<br />
    ${NSD_OnClick} $BUTTON2 onClick2<br />
    <br />
    nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
Section<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">11th February 2009, 10:29</div></div><div class="posttext">It's actually the BM_SETSTATE line that does the trouble. You're specifying (with the wrong constant) that the button is pressed. When the user clicks on something else, it first &quot;unclicks&quot; the button and activates its OnClick function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sirbabyface</div><div class="date">11th February 2009, 10:42</div></div><div class="posttext">Thanks</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>