<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" File, SetOutPath question.., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  File, SetOutPath question.. NSIS Discussion" />
	
	<title> File, SetOutPath question.. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  File, SetOutPath question..</div>
<hr />
<div class="pda"><a href="t-292604.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=292604">File, SetOutPath question..</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">joe131</div><div class="date">2nd June 2008, 02:43</div></div><div class="posttext">Hi All,<br />
<br />
I'm trying to write an install that will just &quot;update&quot;<br />
certain files, and I'm really confused.<br />
<br />
I've tried to look at some code examples from the web,<br />
Google Code Search,<br />
that use SetOutPath and File, but when I try what looks<br />
like should work, I keep getting errors for File.<br />
<br />
For my &quot;Source files&quot; I want to get individual files from different directories.<br />
<br />
Like:<br />
<br />
C:\Foo\bar\bin\xxx.exe<br />
C:\Foo\bar\bin\yyy.dll<br />
C:\Foo\Webserver\lib\xyz.jar<br />
<br />
And since the user can choose a different install<br />
directory path, than my original source directory,<br />
exactly how should I extract the files into the<br />
user's directory?<br />
<br />
(from Foo\ back it will be the same)<br />
<br />
They will probably have something like:<br />
<br />
C:\Program Files\XYZ Corp\Foo\bar\bin<br />
C:\Program Files\XYZ Corp\Foo\Webserver\lib<br />
<br />
I tried to use &quot;File /oname=...&quot; but I keep getting errors..<br />
<br />
What's the best way to do it?<br />
<br />
I'd rather not try to use anything with &quot;File /r&quot;.<br />
<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LoRd_MuldeR</div><div class="date">2nd June 2008, 02:48</div></div><div class="posttext">; set the output directory first<br />
SetOutPath &quot;C:\Program Files\XYZ Corp\Foo\bar\bin&quot;<br />
<br />
; now let's extract some files to that directory<br />
File &quot;C:\Foo\bar\bin\xxx.exe&quot;<br />
File &quot;C:\Foo\bar\bin\yyy.dll&quot;<br />
File &quot;C:\Foo\Webserver\lib\xyz.jar&quot;<br />
<br />
This will include the named files in your installer. The paths after the &quot;File&quot; commands are the paths on your local computer, evaluated at the moment the installer is compiled! Those files will be extracted to the &quot;C:\Program Files\XYZ Corp\Foo\bar\bin&quot; folder on the user's computer. The path after the &quot;SetOutPath&quot; will be evaluated at the moment the user runs the installer.<br />
<br />
<br />
But usually you should do it like this:<br />
<br />
SetOutPath &quot;$PROGRAMFILES\XYZ Corp\Foo\bar\bin&quot;<br />
<br />
Not every user has a &quot;C:\Program Files&quot; folder! For example on German Windows it will be &quot;C:\Programme&quot;. And you even can't know on which drive Windows is installed. Using the &quot;$PROGRAMFILES&quot; variable will detect the location of the user's &quot;Program Files&quot; folder at the moment the installer is run...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joe131</div><div class="date">2nd June 2008, 03:02</div></div><div class="posttext">I already have that to &quot;load&quot; my source files into<br />
the installer.<br />
<br />
I have this, to extract it, and it keeps giving me errors:<br />
<br />
SetOutPath &quot;${InstallDir}\Webserver\bin&quot;<br />
File &quot;/oname=${InstallDir}\Webserver\bin\xyz.dll xyz.dll<br />
<br />
and I tried adding the same &quot;path&quot; to the file on the &quot;end&quot;<br />
and I still get errors.<br />
<br />
What's the proper way to do it?<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">2nd June 2008, 04:20</div></div><div class="posttext">See compiler's log, should claim about ${InstallDir} which probably you should change to $INSTDIR.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">joe131</div><div class="date">2nd June 2008, 08:09</div></div><div class="posttext">Sorry, this is driving me nuts!<br />
<br />
The files are loaded into the installer:<br />
(from the compile)<br />
<br />
Section: &quot;-&quot;<br />
SetOutPath: &quot;$INSTDIR&quot;<br />
File: &quot;WMISrv.dll&quot; 98304 bytes<br />
File: &quot;ADSrv.dll&quot; 217088 bytes<br />
SectionEnd<br />
<br />
<br />
I have the users install path in $Install_Directory<br />
and I'm trying:<br />
<br />
SetOutPath &quot;$Install_Directory\Webserver\bin&quot;<br />
File ...<br />
<br />
I've tried several things for &quot;File&quot; and the<br />
compiler keeps complaining:<br />
<br />
SetOutPath: &quot;$Install_Directory\Webserver\bin&quot;<br />
File: &quot;ADSrv.dll&quot; -&gt; no files found.<br />
<br />
What the heck do I need to do to extract the file<br />
into the user's directory???<br />
<br />
I even tried:<br />
	SetOutPath &quot;$INSTDIR\Webserver\bin&quot;<br />
and I keep getting the same error..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">2nd June 2008, 08:34</div></div><div class="posttext">SetOutPath is a run-time instruction which changes the current working directory when installer runs.<br />
<br />
File is a compile-time instruction which tells the compiler to compress the file e.g. local_path\my_file.ext, hence when you type File ADSrv.dll the file must be located whithin the same directory where the compiling script is located. Otherwise you must give the path to the file on the local machine.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>