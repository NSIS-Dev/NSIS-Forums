<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom Pages, Modern Interface, and User Input, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom Pages, Modern Interface, and User Input NSIS Discussion" />
	
	<title> Custom Pages, Modern Interface, and User Input [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom Pages, Modern Interface, and User Input</div>
<hr />
<div class="pda"><a href="t-127162.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=127162">Custom Pages, Modern Interface, and User Input</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">4th March 2003, 01:36</div></div><div class="posttext">I created an ini file holding 2 textbox fields for a custom page while I'm using the modern2.exe as the MUI interface. I can't seem to figure out how to get what information the user has entered into the installer. Basically, I'm having the user input their registration information for the program on the install page, and then writing the settings to the registry for later use. If anyone could shed some light on this I'd greatly appreciate it. I've looked everwhere and still haven't found any documentation on it. Also, if anyone knows anything about making one of these fields required to continue that would also be great. <br />
<br />
Thanks :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Sunjammer</div><div class="date">4th March 2003, 08:55</div></div><div class="posttext">I can't seem to figure out how to get what information the user has entered into the installer<br />
<br />
The Contrib\InstallOptions.nsi example quite clearly shows how to work out in your script what state the controls were in when the page was closed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">virtlink</div><div class="date">4th March 2003, 11:06</div></div><div class="posttext">If I recall it correctly:<br />
TextBox controls (along with some others), write their return value back into the .ini file. Then you have to use ReadINIStr to read the values from the .ini file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th March 2003, 15:21</div></div><div class="posttext">Use the MUI_INSTALLOPTIONS_READ macro (have a look at the Modern UI\InstallOptions.nsi example).<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP} &quot;inifile.ini&quot; &quot;Field #&quot; &quot;Text&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">4th March 2003, 19:53</div></div><div class="posttext">I looked at the file already I think, I currently have this in the nsi file:<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;ioA.ini&quot; &quot;Field 2&quot; &quot;Text&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP2} &quot;ioA.ini&quot; &quot;Field 4&quot; &quot;Text&quot;<br />
<br />
My problem is getting the user data into the registry. What would that be?<br />
<br />
WriteRegStr HKLM &quot;Software\My Software&quot; &quot;Name&quot; ${TEMP1}  ??<br />
<br />
I'm not sure exactly what to do from this point. Thanks again for the help everyone.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">4th March 2003, 19:56</div></div><div class="posttext">Exactly. The value will get into ${TEMP1} and ${TEMP2}.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">4th March 2003, 21:23</div></div><div class="posttext">Make sure that you defined TEMP1 and TEMP2, for example:<br />
<br />
!define TEMP1 $R0 ;Will be stored in variable $R0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">5th March 2003, 03:42</div></div><div class="posttext">Yup, I have it defined earlier in the script.<br />
<br />
!define TEMP1 $R0<br />
!define TEMP2 $R1<br />
<br />
Section &quot;&quot;<br />
<br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;ioA.ini&quot; &quot;Field 2&quot; &quot;Text&quot;<br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP2} &quot;ioA.ini&quot; &quot;Field 4&quot; &quot;Text&quot;<br />
<br />
WriteRegStr HKLM &quot;Software\MyProgram&quot; &quot;Name&quot; $R0<br />
WriteRegStr HKLM &quot;Software\MyProgram&quot; &quot;Company&quot; $R1<br />
<br />
SectionEnd<br />
<br />
This is what I currently have in my script. By the way, I just stuck the sections in there so you would know that I do have them in a section. Is there something that I'm missing? It just doesn't seem to want to work at all. I've tried using .... &quot;Name&quot; ${R0}, &quot;Name&quot; &quot;${R0}&quot;, &quot;Name&quot; $R0, &quot;Name&quot; &quot;$R0&quot; and nothing just seems to work. I know its something small, things like this always are.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">5th March 2003, 07:36</div></div><div class="posttext">!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;ioA.ini&quot; &quot;Field 2&quot; &quot;Text&quot; <br />
!insertmacro MUI_INSTALLOPTIONS_READ ${TEMP2} &quot;ioA.ini&quot; &quot;Field 4&quot; &quot;Text&quot;<br />
<br />
The name &quot;Text&quot; should be &quot;State&quot; (Text is the text that are show to user in labels, check boxes, radio buttons..., State is the state of the control after the user left the page).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">viper0179</div><div class="date">5th March 2003, 13:34</div></div><div class="posttext">Thanks for all the help everyone. Deguix got the problem fixed for me. I knew it'd be something small hehe. I'm just used to using most ActiveX control textboxes that hold the data in the Text property. Never occurred it could be held somewhere else. <br />
<br />
Thanks again!<br />
<br />
Here's what the finished script looked like:<br />
<br />
!define TEMP1 $R0<br />
!define TEMP2 $R1<br />
<br />
Section &quot;Core Files&quot; SecCore<br />
<br />
    !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP1} &quot;ioA.ini&quot; &quot;Field 2&quot; &quot;State&quot;<br />
    !insertmacro MUI_INSTALLOPTIONS_READ ${TEMP2} &quot;ioA.ini&quot; &quot;Field 4&quot; &quot;State&quot;<br />
<br />
    WriteRegStr HKLM &quot;Software\\MySoftware&quot; &quot;Name&quot; $R0<br />
    WriteRegStr HKLM &quot;Software\\MySoftware&quot; &quot;Company&quot; $R1<br />
<br />
SectionEnd</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>