<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Different user get different install options, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Different user get different install options NSIS Discussion" />
	
	<title> Different user get different install options [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Different user get different install options</div>
<hr />
<div class="pda"><a href="t-360718.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=360718">Different user get different install options</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">citystars</div><div class="date">6th May 2013, 12:32</div></div><div class="posttext">Hi,<br />
Sorry i'm completly new to nsis and i want to make an installer that gives different useres different install options so that they can maybe enter a user name and a password and then get installoptions specific to their user name.I've already tried it with user pass but their i couldnt figure it out how i can seperate installoptions to a signle account.<br />
greets<br />
citytstars</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">6th May 2013, 15:30</div></div><div class="posttext">1) In the user/pass custom page's LEAVE function, set a variable $installtype depending on what user/pass is entered.<br />
2) In each following page's PRE function, do this:<br />
${If} $installtype != &quot;some value&quot;<br />
abort<br />
${EndIf}<br />
<br />
That should be all.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">citystars</div><div class="date">7th May 2013, 10:44</div></div><div class="posttext">i dont know where to define the user name now i'm using the userpass plugin <br />
Name    &quot;PassDialog UserPass&quot;<br />
OutFile &quot;PassDialog-UserPass.exe&quot;<br />
RequestExecutionLevel user<br />
## Include headers<br />
!include MUI.nsh<br />
!include LogicLib.nsh<br />
## Pages<br />
 !insertmacro MUI_PAGE_WELCOME<br />
 Page Custom UserPassPageShow UserPassPageLeave<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ComponentsPageShow<br />
## !insertmacro MUI_PAGE_COMPONENTS<br />
 !insertmacro MUI_PAGE_INSTFILES<br />
<br />
## Password is<br />
!define Username1 &quot;Jeff&quot;  <br />
!define Password1 &quot;blah&quot;<br />
!define Username2 &quot;stealth&quot;<br />
!define Password2 &quot;zero&quot;<br />
<br />
## Control ID's<br />
!define IDC_USERNAME 1215<br />
!define IDC_PASSWORD 1214<br />
<br />
## Languages<br />
!insertmacro MUI_LANGUAGE English<br />
<br />
## Displays the username and password dialog<br />
Function UserPassPageShow<br />
<br />
 !insertmacro MUI_HEADER_TEXT &quot;Enter Username &amp;&amp; Password&quot; &quot;Enter your username and password to continue.&quot;<br />
<br />
 PassDialog::InitDialog /NOUNLOAD UserPass<br />
  Pop $R0 # Page HWND<br />
<br />
  GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
  SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
  GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
  SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
<br />
 PassDialog::Show<br />
<br />
FunctionEnd<br />
<br />
 ## Validate username and password<br />
Function UserPassPageLeave<br />
<br />
<br />
## Pop password &amp; username from stack<br />
Pop $R0<br />
Pop $R1<br />
Pop $R2<br />
Pop $R3<br />
<br />
## A bit of validation<br />
StrCmp $R0 '${Username1}' 0 +2<br />
StrCmp $R1 '${Password1}' Good Bad<br />
StrCmp $R2 '${Username2}' 0 +2<br />
StrCmp $R3 '${Password2}' Good Bad<br />
<br />
Bad:<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;The entered username or password is incorrect!&quot;<br />
Abort<br />
<br />
Good:<br />
<br />
FunctionEnd<br />
<br />
/*Function ComponentsPageShow<br />
<br />
 ## Disable the Back button<br />
 GetDlgItem $R0 $HWNDPARENT 3<br />
 EnableWindow $R0 0<br />
<br />
FunctionEnd<br />
*/<br />
Section 'A section'<br />
SectionEnd<br />
<br />
abort</div></div><hr />


<div class="post"><div class="posttop"><div class="username">citystars</div><div class="date">7th May 2013, 16:43</div></div><div class="posttext">now i mange to get a choice between 2 user but its not hidden so that user 2 can easily install what only user 1 should be able to install. and the other way around. PLease help me one more time :D<br />
Name    &quot;PassDialog UserPass&quot;<br />
OutFile &quot;PassDialog-UserPass.exe&quot;<br />
RequestExecutionLevel user<br />
## Include headers<br />
!include MUI.nsh<br />
!include LogicLib.nsh<br />
## Pages<br />
 !insertmacro MUI_PAGE_WELCOME<br />
 Page Custom UserPassPageShow UserPassPageLeave<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ComponentsPageShow<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
<br />
 !insertmacro MUI_PAGE_INSTFILES<br />
var installtype<br />
<br />
InstType &quot;User1&quot;<br />
InstType &quot;User2&quot;<br />
<br />
## Password is<br />
!define Username1 &quot;Jeff&quot;<br />
!define Password1 &quot;blah&quot;<br />
!define Username2 &quot;stealth&quot;<br />
!define Password2 &quot;zero&quot;<br />
<br />
## Control ID's<br />
!define IDC_USERNAME 1215<br />
!define IDC_PASSWORD 1214<br />
<br />
## Languages<br />
!insertmacro MUI_LANGUAGE English<br />
<br />
<br />
## Displays the username and password dialog<br />
Function UserPassPageShow<br />
<br />
 !insertmacro MUI_HEADER_TEXT &quot;Enter Username &amp;&amp; Password&quot; &quot;Enter your username and password to continue.&quot;<br />
<br />
 PassDialog::InitDialog /NOUNLOAD UserPass<br />
  Pop $R0 # Page HWND<br />
<br />
  GetDlgItem $R1 $R0 ${IDC_USERNAME}<br />
  SetCtlColors $R1 0xFF0000 0xFFFFFF<br />
  GetDlgItem $R1 $R0 ${IDC_PASSWORD}<br />
  SetCtlColors $R1 0x0000FF 0xFFFFFF<br />
<br />
 PassDialog::Show<br />
<br />
FunctionEnd<br />
<br />
 ## Validate username and password<br />
Function UserPassPageLeave<br />
<br />
## Pop password &amp; username from stack<br />
Pop $R0<br />
Pop $R1<br />
<br />
## A bit of validation<br />
StrCmp $R0 '${Username1}' 0 +4<br />
StrCmp $R1 '${Password1}' 0 Bad<br />
SetCurInstType 0<br />
GOTO Good<br />
StrCmp $R0 '${Username2}' 0 +4<br />
StrCmp $R1 '${Password2}' 0 Bad<br />
SetCurInstType 1<br />
GOTO Good<br />
<br />
Bad:<br />
MessageBox MB_OK|MB_ICONEXCLAMATION &quot;The entered username or password is incorrect!&quot;<br />
Abort<br />
<br />
Good:<br />
<br />
FunctionEnd<br />
<br />
<br />
<br />
Function ComponentsPageShow<br />
<br />
${If} $installtype == &quot;0&quot;<br />
<br />
${EndIf}<br />
<br />
<br />
 ## Disable the Back button<br />
 GetDlgItem $R0 $HWNDPARENT 3<br />
 EnableWindow $R0 0<br />
<br />
FunctionEnd<br />
<br />
Section 'A section'<br />
SectionIn 1<br />
SectionEnd<br />
<br />
Section 'B section'<br />
SectionIn 2<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">citystars</div><div class="date">13th May 2013, 08:28</div></div><div class="posttext">any ideas?</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>