<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" custom page won't show, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  custom page won't show NSIS Discussion" />
	
	<title> custom page won't show [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  custom page won't show</div>
<hr />
<div class="pda"><a href="t-257039.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=257039">custom page won't show</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th October 2006, 15:56</div></div><div class="posttext">Code snippet would help.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">7th October 2006, 15:57</div></div><div class="posttext">I'm stuck on a problem. I have an installer that works fine if you run it normally, but when it gets run by another process, it fails at the point where it tries to show the first page, which is a custom page.<br />
<br />
If I make the first page a MUI page, everything works fine. Or if I display a MessageBox before I try to show the custom page, the custom page will appear.<br />
<br />
Here's what I've tried:<br />
-verify custom page init works by writing its HWND to registry<br />
-verify custom page ini file is valid (looks fine and works fine if there's a MB before init)<br />
-system calls ShowWindow and SetWinowPos don't help and their return values indicate success even though the window is not visible<br />
<br />
The process just sits there. The command line parameters don't contain '/S.' I am using !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS.<br />
<br />
I can't attach my script, but does anyone have ideas from my description?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">7th October 2006, 16:09</div></div><div class="posttext">My company is strict about this, so here's the best I can do.<br />
<br />
<br />
  WriteRegStr HKLM &quot;Software\Poop&quot; &quot;cmdline&quot; &quot;$CMDLINE&quot; <br />
<br />
  !insertmacro MUI_INSTALLOPTIONS_INITDIALOG &quot;file.ini&quot;<br />
<br />
  Pop $MUI_HWND<br />
<br />
  ;...<br />
  ;irrelevant page formatting code<br />
<br />
  WriteRegStr HKLM &quot;Software\Poop&quot; &quot;preshow&quot; &quot;show&quot; <br />
  !insertmacro MUI_PAGE_FUNCTION_CUSTOM SHOW<br />
  <br />
  WriteRegStr HKLM &quot;Software\Poop&quot; &quot;hwnd&quot; &quot;$MUI_HWND&quot; <br />
  ShowWindow $MUI_HWND 1 <br />
  System::Call 'user32::SetWindowPos(i $HWNDPARENT, i -1, i 0, i 0, i 0, i 0, i 0x02|0x01) i.r1'<br />
  WriteRegStr HKLM &quot;Software\Poop&quot; &quot;return&quot; &quot;$1&quot; <br />
  System::Call 'user32::ShowWindow(i $MUI_HWND, i 1) i .r0'<br />
 <br />
  !insertmacro MUI_INSTALLOPTIONS_SHOW<br />
  WriteRegStr HKLM &quot;Software\Poop&quot; &quot;postshow&quot; &quot;show&quot; <br />
<br />
<br />
&quot;postshow&quot; never gets written to the registry. It does when I manually launch the installer though, which tells me the problem probably isn't in the custom page code. I guess I should look more at the interaction between the launching process and the installer.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">7th October 2006, 16:24</div></div><div class="posttext">I'm not sure what you're trying to do.<br />
What's wrong with this?<br />
<br />
Page Custom CustomShow<br />
<br />
Function CustomShow<br />
 !insertmacro MUI_INSTALLOPTIONS_DIALOG file.ini<br />
FunctionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">7th October 2006, 16:32</div></div><div class="posttext">arghhhhhhhhhh!!!!<br />
<br />
Just found out that this is only happening for me on a virtual machine. When I try on my own machine, it works ok. Should have thought of that sooner.<br />
<br />
Stu, thanks for your suggestions. To answer your question, I was initializing my custom page, then formatting some text, and then showing it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dienjd</div><div class="date">7th October 2006, 16:38</div></div><div class="posttext">Let me also say that I'm impressed you were able to post your  first response a minute before I even opened the thread :D<br />
<br />
Please use your psychic powers for good and not evil!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">8th October 2006, 10:31</div></div><div class="posttext">On the machine that it doesn't show, does the file.ini file get extracted?<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>