<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A Trap about &quot;/RebootOK&quot; under Win9x System., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A Trap about &quot;/RebootOK&quot; under Win9x System. NSIS Discussion" />
	
	<title> A Trap about &quot;/RebootOK&quot; under Win9x System. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A Trap about &quot;/RebootOK&quot; under Win9x System.</div>
<hr />
<div class="pda"><a href="t-177065.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=177065">A Trap about &quot;/RebootOK&quot; under Win9x System.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">s793016</div><div class="date">18th April 2004, 07:32</div></div><div class="posttext">This topic is only affect for Win9x, NT core OS will not be affect .<br />
==<br />
Sometimes it will make a big trouble about &quot;/REBOOTOK&quot; under Win9x.<br />
<br />
If someone want to update some system files under Win9x, he must use &quot;/REBOOTOK&quot; to do it.<br />
<br />
And &quot;/REBOOTOK&quot; under Win9x is finally using Wininit.ini to do it.<br />
<br />
We known Wininit.exe moving files useing a &quot;rename&quot; function under &quot;DOS&quot;.<br />
<br />
&quot;Rename&quot; under DOS have a big limit: SOURCE Filename and TARGET Filename must on the same disk.<br />
==<br />
OK, now think about this situation:<br />
<br />
If someone put some new system_files outside C: with &quot;/REBOOTOK&quot; function, it will make NSIS to add someline like this into wininit.ini:<br />
<br />
&quot;c:\windows\system\target=d:\dir\source&quot;<br />
<br />
Arter reboot, wininit.exe will make a error message, and DELETE TARGET FIle immediately.<br />
<br />
If that file is a Very Important file (ex: GDI.EXE), this will make Win9x DEAD.<br />
<br />
Could NSIS TEAM add some check inside MAKENSIS to prevent this situation happen?  Thank you very much.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">22nd April 2004, 18:07</div></div><div class="posttext">UpgradeDLL prevents this situation. It puts the temporary file on the same volume as the destination file.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>