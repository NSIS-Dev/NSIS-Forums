<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem with LogicLib Cmd/IfCmd and MessageBox, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem with LogicLib Cmd/IfCmd and MessageBox NSIS Discussion" />
	
	<title> Problem with LogicLib Cmd/IfCmd and MessageBox [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem with LogicLib Cmd/IfCmd and MessageBox</div>
<hr />
<div class="pda"><a href="t-324857.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=324857">Problem with LogicLib Cmd/IfCmd and MessageBox</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">AMock</div><div class="date">14th December 2010, 08:31</div></div><div class="posttext">Hi,<br />
<br />
I'm using Logiclib in my NSIS installers wherever I can. It greatly helps to improve readability.<br />
Now I got a problem where I think that there might be a bug in LogicLib or at least some some documentation missing.<br />
<br />
I stumbled upon this while trying to use<br />
<br />
${Switch}<br />
     ${Case} '0'<br />
         ${IfCmd} MessageBox MB_ICONQUESTION|MB_YESNO &quot;$2&quot; /SD IDYES ${||} ${Break} ${|}<br />
;        some other code<br />
          ${Break}<br />
<br />
;       :<br />
${EndSwitch}<br />
or <br />
<br />
${If} ${Cmd} `MessageBox MB_ICONQUESTION|MB_YESNO &quot;$2&quot; /SD IDYES `<br />
<br />
<br />
First I thought it was the | between the MB_xxx mode options, but then I tried the LogicLib.nsi example.<br />
<br />
The example for IfCmd and Cmd in Examples\LogicLib.nsi works fine, even when adding MB_ICONQUESTION|<br />
But when one adds the /SD parameter to the MessageBox it won't compile anymore.<br />
<br />
Is there a way to pass the /SD through the macros, or is this a &quot;bug&quot;?<br />
<br />
I need the /SD to prevent any Mesagebox to pop up during silent installation.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jpderuiter</div><div class="date">14th December 2010, 08:53</div></div><div class="posttext">Not sure why /SD is not supported, but you can check for a silent installer before calling the messagebox using ${If} ${Silent}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">AMock</div><div class="date">14th December 2010, 09:37</div></div><div class="posttext">Hi jpderuiter,<br />
<br />
good idea! Replacing /SD with ${If} ${Silent}<br />
<br />
Let's me use LogicLib without caring about /SD.<br />
Using inverted logic the code looks like this:<br />
<br />
<br />
			${Switch} $1<br />
				${Case} '0'<br />
					${IfNot} ${Silent}<br />
						StrCpy $2 &quot;This version of ${MYNAME} is already installed. $\n&quot;<br />
						StrCpy $2 &quot;$2Do you want to reinstall?&quot;<br />
						${IfNot} ${Cmd} `MessageBox MB_ICONQUESTION|MB_YESNO &quot;$2&quot; IDYES `<br />
							Call closelog<br />
							Abort<br />
							${Break}<br />
						${EndIf}<br />
					${EndIf}	<br />
					StrCpy $2 &quot;&quot;<br />
					${Break} <br />
<br />
     <br />
<br />
<br />
Thanks!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>