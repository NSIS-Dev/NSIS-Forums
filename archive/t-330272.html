<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" plugin parameters, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  plugin parameters NSIS Discussion" />
	
	<title> plugin parameters [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  plugin parameters</div>
<hr />
<div class="pda"><a href="t-330272.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=330272">plugin parameters</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">coreduo32</div><div class="date">3rd May 2011, 08:43</div></div><div class="posttext">hi,<br />
<br />
when writing plugins, there is a &quot;int string_size&quot; parameter used in the functions.<br />
What value does it get when the function is called?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">3rd May 2011, 09:30</div></div><div class="posttext">Well, I'm no programmer, but I would guess that that should contain ${NSIS_MAX_STRLEN}, because that value differs between different NSIS builds.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coreduo32</div><div class="date">3rd May 2011, 09:47</div></div><div class="posttext">say we have this function<br />
<br />
<br />
extern &quot;C&quot; void __declspec(dllexport) FileReadBytes(HWND hwndParent, int string_size, <br />
                                      TCHAR *variables, stack_t **stacktop)<br />
<br />
<br />
if we call the function with this : &quot;nsisFile::FileReadBytes &lt;file handle&gt; &lt;length&gt;&quot;<br />
will the &quot;string_size&quot; parameter have the value obtained by &quot;sizeof(filehandle)+sizeof(length)&quot; ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd May 2011, 13:09</div></div><div class="posttext">No it's the capacity (in characters) of NSIS strings, as MSG has said. It will always be 1024 unless you use the 8192 NSIS special build. You use string_size to allocate buffers that receive plug-in arguments (use LocalAlloc/GlobalAlloc) via popstring (arguments are passed via the run-time stack).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">coreduo32</div><div class="date">3rd May 2011, 13:41</div></div><div class="posttext">Thank you for your explanations.<br />
<br />
Stu, as far as I see, when we call plugin functions, we dont pass hwndparent,string_size,etc. parameters to them, as you can see in my previous post. Where do our own parameters go?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd May 2011, 14:03</div></div><div class="posttext">I've already explained. You get them from the stack using popstring.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">3rd May 2011, 14:08</div></div><div class="posttext">And it should be noted that nsis strings (on the stack) can only be modified with the Global* memory functions. You should take a look at the exdll example plugin in SVN ( http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Contrib/ExDLL/ )</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>