<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Beginner's Q: Acessing a variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Beginner's Q: Acessing a variable NSIS Discussion" />
	
	<title> Beginner's Q: Acessing a variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Beginner's Q: Acessing a variable</div>
<hr />
<div class="pda"><a href="t-339815.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=339815">Beginner's Q: Acessing a variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">LuP</div><div class="date">22nd December 2011, 09:24</div></div><div class="posttext">Hello,<br />
<br />
the registry key is defined in the following manner:<br />
<br />
# Auto-generated by EclipseNSIS Script Wizard<br />
# 21.12.2011 11:50:16<br />
<br />
Name MyAppName<br />
<br />
# General Symbol Definitions<br />
<br />
!define REGKEY &quot;SOFTWARE\$(^Name)&quot;<br />
<br />
<br />
Could anyone explain to me why<br />
<br />
...<br />
!define REGKEY &quot;SOFTWARE\$Name&quot;<br />
<br />
is wrong?<br />
<br />
I think that the variable &quot;Name&quot; is to be used, so what's wrong accessing it via &quot;$Name&quot;?<br />
<br />
And why the tag [strange for me] &quot;$(^Name)&quot; must be used - what &quot;$(^...)&quot; means or what kind of &quot;syntax sugar&quot; is this? I didn't google anything useful...<br />
<br />
TIA.<br />
<br />
LuP</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">22nd December 2011, 09:31</div></div><div class="posttext">$Name is a variable, and gets a value at runtime. http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.1.1<br />
${Name} is a !define, and therefore gets a value at compiletime. http://nsis.sourceforge.net/Docs/Chapter5.html#5.4.1<br />
${^Name} is an NSIS constant, and always contains the installer's name as set by the (compiletime!) Name command. http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.30<br />
<br />
Theoretically, you could write to a regkey stored in a variable:<br />
StrCpy $Name &quot;Foo&quot;<br />
WriteRegStr HKCU  &quot;Software\$Name&quot; &quot;Bar&quot; &quot;baz&quot;  ; writes the value baz to a regstring called Bar in the regkey HKCU\Software\Foo<br />
<br />
But in your case, you probably want to reference the constant ${^Name}.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LuP</div><div class="date">22nd December 2011, 10:21</div></div><div class="posttext">Thank you for the answer and for the links.<br />
<br />
But in your case, you probably want to reference the constant ${^Name}.<br />
<br />
${^Name} gives syntax error: <br />
<br />
&quot;<br />
warning: unknown variable/constant &quot;{^Name}&quot; detected, ignoring<br />
&quot;<br />
<br />
So I deduce that one cannot write &quot;${^Name}&quot; as there is no &quot;^Name&quot; !define.<br />
<br />
And also that &quot;$(^VARIABLE)&quot; allows to access a NSIS &quot;internal variable&quot; (or what), provided that it exists; in this case, parentheses are required instead of braces.<br />
<br />
So e.g.:<br />
<br />
&quot;SOFTWARE\$(^Name)&quot; yields &quot;SOFTWARE\MyAppName&quot; <br />
(probably ^Name exists due to preceeding Name statement) and<br />
<br />
&quot;SOFTWARE\$(^AAA)&quot; yields &quot;SOFTWARE\&quot;<br />
as there is no [internal] AAA variable.<br />
<br />
Do I understand well?<br />
<br />
One more question:<br />
<br />
Are the following statement equal - can quotes be omitted, is it syntactically OK?<br />
<br />
StrCpy $Name &quot;Foo&quot;<br />
StrCpy $Name Foo<br />
<br />
<br />
LuP</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd December 2011, 11:42</div></div><div class="posttext">MSG meant $(^Name) I think, which is a actually a built-in language string (constant). There are others such as $(^SetupCaption) which you can see in the language files.<br />
<br />
Quotes can be omitted for single tokens (i.e. no spaces).<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LuP</div><div class="date">22nd December 2011, 11:48</div></div><div class="posttext">OK, I see now, thx.<br />
<br />
I found ^Name, ^SetupCaption etc. in c:\Program Files\NSIS\Contrib\Language files\[Czech].nlf.<br />
<br />
LuP</div></div><hr />


<div class="post"><div class="posttop"><div class="username">LuP</div><div class="date">3rd January 2012, 16:05</div></div><div class="posttext">Hello, <br />
<br />
one more question: when to call a macro (?) / function (?) by <br />
${something} <br />
and when via<br />
!insertmacro something<br />
<br />
- I encountered two ways:<br />
<br />
<br />
${EnvVarUpdate} $R0 Ponton A HKLM &quot;$INSTDIR&quot; ; Needs '!include EnvVarUpdate.nsh'<br />
; Versus<br />
!insertmacro APP_ASSOCIATE ext ftype desc ico operation command ; Needs '!include FileAssoc.nsh'<br />
<br />
<br />
Are both ways equal or only one method may be used under which contitions?<br />
<br />
TIA.<br />
<br />
LuP</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd January 2012, 18:23</div></div><div class="posttext">${EnvVarUpdate} is just a constant which the compiler evaluates to an !insertmacro (i.e. !define EnvVarUpdate `!insertmacro EnvVarUpdate`). In other words you can use !insertmacro EnvVarUpdate or ${EnvVarUpdate} and both will evaluate to the same thing on compile. You do not call macros; they are just blocks of code which are inserted at compile time by the compiler. This is very different to Call which actually jumps to another block of code at run time.<br />
<br />
Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>