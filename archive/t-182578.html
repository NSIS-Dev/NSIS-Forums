<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" start actual screensaver - how to ?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  start actual screensaver - how to ? NSIS Discussion" />
	
	<title> start actual screensaver - how to ? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  start actual screensaver - how to ?</div>
<hr />
<div class="pda"><a href="t-182578.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=182578">start actual screensaver - how to ?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">7th June 2004, 19:02</div></div><div class="posttext">i found this code in antoher forum:<br />
<br />
SendMessage(hWnd, 0x112, 0xF140, 0); <br />
<br />
it should start the actual SS<br />
<br />
how to in nsis ???<br />
<br />
thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">7th June 2004, 22:41</div></div><div class="posttext">why dont you just read the registry for the current screensaver and launch it with ExecShell?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">7th June 2004, 22:45</div></div><div class="posttext">&lt;lol&gt; nice idea - better it is...<br />
<br />
thx <br />
<br />
(ps i know where to look)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">7th June 2004, 22:49</div></div><div class="posttext">why go in the registry when u can just do:<br />
SendMessage $HWNDPARENT 0x112 0xF140 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">7th June 2004, 22:56</div></div><div class="posttext">Function .onInit<br />
  ; check screen saver<br />
  check1:<br />
  ClearErrors<br />
    ReadRegStr $INSTDIR HKCU &quot;Control Panel\Desktop&quot; &quot;SCRNSAVE.EXE&quot;<br />
  IfErrors check2 ; not found<br />
    StrCmp $INSTDIR &quot;&quot; check2 ; not set<br />
<br />
  ;control file<br />
  IfFileExists $INSTDIR 0 check2<br />
<br />
  ;start screensaver<br />
  Exec '&quot;$INSTDIR&quot; /S'<br />
<br />
  ;error<br />
  check2:<br />
    Quit<br />
FunctionEnd<br />
<br />
<br />
HTH</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">7th June 2004, 23:01</div></div><div class="posttext">&gt;&gt; SendMessage $HWNDPARENT 0x112 0xF140 0<br />
<br />
does not work here, dunno why...<br />
<br />
Function .onInit<br />
  ;start screensaver<br />
  SendMessage $HWNDPARENT 0x112 0xF140 0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">8th June 2004, 03:02</div></div><div class="posttext">That's because the installer window has not yet been created when .onInit is called.<br />
Try putting it in .onGUIInit:<br />
<br />
Function .onGuiInit<br />
  SendMessage $HWNDPARENT 0x112 0xF140 0<br />
FunctionEnd<br />
<br />
or, if  you are using MUI, something like:<br />
<br />
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit<br />
Function myGuiInit<br />
  SendMessage $HWNDPARENT 0x112 0xF140 0<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th June 2004, 03:37</div></div><div class="posttext">that works :)<br />
<br />
disadvatage - i see for a short period the gui - my first version did not</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">8th June 2004, 04:15</div></div><div class="posttext">use SilentInstall</div></div><hr />


<div class="post"><div class="posttop"><div class="username">iceman_k</div><div class="date">8th June 2004, 04:18</div></div><div class="posttext">Your first version did not show the GUI because (surprise!) it had not yet been created in the .onInit function.<br />
Why do you need to start the screensaver when you kick off your installer, anyway? Seems to be a counter-intuitive thing to do.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">8th June 2004, 17:37</div></div><div class="posttext">&gt;&gt; Why do you need to start the screensaver when you kick off your installer, anyway?<br />
<br />
i am really off with my tools - this is no part of any installer .- this was a question from another forum some1 requestet &quot;actually SS starts on desktop link&quot;<br />
<br />
Setups are not my favorite time wasters - i create some 3rd party apps for my mailer with nsis - i used winbatch before but nsis ist much smaller and more flexible<br />
<br />
eg. i have a selfmade updater for mcafee sdat &amp; stinger<br />
or backup program for my mailer<br />
<br />
btw SilentInstall does nothing - no ss started instead w/o</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th June 2004, 01:05</div></div><div class="posttext">if u want to start it without showing the installer u could call GetDesktopWindow with the system plugin 2 get a handle, or u can try calling DefWindowProc with the system plugin passing 0 as the hwnd (might work, not tried this :) )</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">9th June 2004, 03:33</div></div><div class="posttext">Try using SilentInstall silent in your installer outside sections and functions with SendMessage 0 0x112 0xF140 0 inside the .onInit callback function. (like Anders suggested, without System plugin codes and  using SendMessage command)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">9th June 2004, 15:58</div></div><div class="posttext">try this:<br />
SendMessage 0xFFFF 0x112 0xF140 0<br />
<br />
and if that doesnt work do:<br />
System::Call 'user32::GetDesktopWindow() i .r0'<br />
SendMessage $0 0x112 0xF140 0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">10th June 2004, 00:04</div></div><div class="posttext">try it yourself &quot;silentinstall&quot; NEVER works here :/<br />
<br />
;--------------------------------<br />
;Configuration<br />
<br />
!define PRODUCT &quot;Start Screensaver&quot;<br />
!define VERSION &quot;1.0&quot;<br />
<br />
Name &quot;Start Screensaver 1.0&quot;<br />
Caption &quot;Start Screensaver 1.0&quot;<br />
OutFile &quot;startscr1.exe&quot;<br />
<br />
; automatically close the installer when done.<br />
AutoCloseWindow true<br />
<br />
; hide the &quot;show details&quot; box<br />
ShowInstDetails nevershow<br />
<br />
SilentInstall silent<br />
;--------------------------------<br />
;Languages<br />
<br />
BrandingText &quot; Copyright 2003-2004 Brummelchen &quot;<br />
<br />
;--------------------------------<br />
;Pages<br />
<br />
;--------------------------------<br />
;Installer Sections<br />
<br />
Section &quot;&quot;<br />
SectionEnd<br />
<br />
;--------------------------------<br />
;Installer Functions<br />
<br />
Function .onGuiInit<br />
  System::Call 'user32::GetDesktopWindow() i .r0'<br />
  SendMessage $0 0x112 0xF140 0<br />
FunctionEnd<br />
<br />
Function .onGUIEnd<br />
  Delete $pluginsdir\*.*<br />
  RMdir $PLUGINSDIR<br />
FunctionEnd<br />
<br />
;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">10th June 2004, 01:54</div></div><div class="posttext">yeah, ur code doesnt work, but do u have to call it in .onGuiInit?<br />
<br />
this code works just fine for me:<br />
<br />
!define APP_NAME &quot;Start SS&quot;<br />
Name &quot;${APP_NAME}&quot;<br />
OutFile &quot;${APP_NAME}.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\nsis test\${APP_NAME}&quot;<br />
SilentInstall silent<br />
Page instfiles<br />
Section<br />
SendMessage 0xFFFF 0x112 0xF140 0<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">10th June 2004, 03:14</div></div><div class="posttext">this was a suggest above - first version works fine...<br />
<br />
i dont work with sections if not needed...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">deguix</div><div class="date">10th June 2004, 12:18</div></div><div class="posttext">Mine and Anders' suggestions won't work because (surprise!) SilentInstall silent makes the installer to don't create a GUI. Solution: Put the .onGuiInit code inside Function .onInit.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brummelchen</div><div class="date">14th June 2004, 22:13</div></div><div class="posttext">i should be able to notice that &lt;omg&gt;<br />
thx for that hint - learned something new :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>