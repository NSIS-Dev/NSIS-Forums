<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem running NSIS from ant task, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem running NSIS from ant task NSIS Discussion" />
	
	<title> Problem running NSIS from ant task [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem running NSIS from ant task</div>
<hr />
<div class="pda"><a href="t-311241.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=311241">Problem running NSIS from ant task</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">angus333</div><div class="date">1st September 2009, 09:49</div></div><div class="posttext">I have a working nsis script it runs fine in eclipse and standlone from the command line however when I run it from ant I get an io exception  <br />
<br />
    [nsis] java.io.IOException: CreateProcess: makensis /V4 /DPROD_BUILD_NUMBER=212 &quot;C:\Documents and Settings\angusn\workspace\aisloader_build\installer\install.nsi&quot; error=2<br />
     [nsis] 	at java.lang.ProcessImpl.create(Native Method)<br />
     [nsis] 	at java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:81)<br />
     [nsis] 	at java.lang.ProcessImpl.start(ProcessImpl.java:30)<br />
     [nsis] 	at java.lang.ProcessBuilder.start(ProcessBuilder.java:451)<br />
     [nsis] 	at java.lang.Runtime.exec(Runtime.java:591)<br />
     [nsis] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br />
     [nsis] 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br />
     [nsis] 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
     [nsis] 	at java.lang.reflect.Method.invoke(Method.java:585)<br />
     [nsis] 	at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:828)<br />
     [nsis] 	at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:445)<br />
     [nsis] 	at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:459)<br />
     [nsis] 	at net.sf.nsisant.Task.execute(Unknown Source)<br />
     [nsis] 	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)<br />
     [nsis] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br />
     [nsis] 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br />
     [nsis] 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
     [nsis] 	at java.lang.reflect.Method.invoke(Method.java:585)<br />
     [nsis] 	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:105)<br />
     [nsis] 	at org.apache.tools.ant.Task.perform(Task.java:348)<br />
     [nsis] 	at org.apache.tools.ant.Target.execute(Target.java:357)<br />
     [nsis] 	at org.apache.tools.ant.Target.performTasks(Target.java:385)<br />
     [nsis] 	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)<br />
     [nsis] 	at org.apache.tools.ant.Project.executeTarget(Project.java:1298)<br />
     [nsis] 	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)<br />
     [nsis] 	at org.eclipse.ant.internal.ui.antsupport.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)<br />
     [nsis] 	at org.apache.tools.ant.Project.executeTargets(Project.java:1181)<br />
     [nsis] 	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:423)<br />
     [nsis] 	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:137)<br />
<br />
this is my taskdef<br />
<br />
  &lt;taskdef name=&quot;nsis&quot; classname=&quot;net.sf.nsisant.Task&quot;&gt;<br />
            &lt;classpath location=&quot;lib/nsisant-1.2.jar&quot;/&gt;<br />
    &lt;/taskdef&gt;<br />
<br />
<br />
my target is : <br />
<br />
	&lt;target name=&quot;installer&quot; depends=&quot;deployZip&quot;&gt;<br />
		 &lt;nsis script=&quot;${deployInstallWorkDir}/install.nsi&quot; verbosity=&quot;4&quot;&gt;<br />
		        &lt;define name=&quot;PROD_BUILD_NUMBER&quot; value=&quot;${build.number}&quot;/&gt;<br />
		 &lt;/nsis&gt;	<br />
	&lt;/target&gt;<br />
<br />
<br />
<br />
 I have a workaround calling the makensis as an exec task but any suggestions to have it woking as a task would be appreciated. This is the first time I have used nsis so if I have missed something obvious be gentle with me :) <br />
<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st September 2009, 11:17</div></div><div class="posttext">Looks to me like it doesn't find makensis.exe. But I couldn't tell without more detailed error log. Maybe the author of NSISAnt will know more on his forum (https://sourceforge.net/forum/?group_id=150923).</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>