<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Locate plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Locate plugin NSIS Discussion" />
	
	<title> Locate plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Locate plugin</div>
<hr />
<div class="pda"><a href="t-224837.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=224837">Locate plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">30th August 2005, 09:09</div></div><div class="posttext">Features:<br />
1. Search for directories or empty directories and/or files<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with wildcard<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with extensions filter (include/exclude)<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with times filter<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with size filter<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with attributes filter<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-sort files and/or directories by name, type, size, date (with reverse or not)<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-output first files or directories<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with subdirectories or not<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-search with banner support<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return path\name<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return path<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return name<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return size of file<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return date of file or directory<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-return attributes of file or directory<br />
2. Find the size of a file, files wildcard or directory (locate::GetSize)<br />
3. Find the sum of the files, directories and subdirectories (locate::GetSize)<br />
4. Remove empty directories and/or subdirectories (locate::RMDirEmpty)<br />
<br />
This plugin is the replacement for Locate and GetSize functions.<br />
<br />
<br />
&quot;Locate&quot; plugin v1.0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th September 2005, 14:48</div></div><div class="posttext">Changes:<br />
-Option /X and /-X - Separated by &quot;|&quot; instead of &quot;,&quot; (locate::Open)<br />
-New: option /P - Additional paths to &quot;[Path]&quot; (locate::Open)<br />
-New: option /-PF - Don't locate in these paths (locate::Open)<br />
-New: option /-PN - Don't locate in these directories (locate::Open)<br />
<br />
<br />
&quot;Locate&quot; plugin v1.1</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">17th September 2005, 19:23</div></div><div class="posttext">Changes:<br />
-New: options /N and /-N - names filter (locate::Open)<br />
-Readme improvement<br />
<br />
<br />
&quot;Locate&quot; plugin v1.2</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">20th November 2005, 14:57</div></div><div class="posttext">Does anyone have any example ModernUI code that uses this locate plugin?<br />
<br />
I want to locate several files, and present the user with a way of selecing one of them.<br />
<br />
How would I go about doing this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">21st November 2005, 14:34</div></div><div class="posttext">Here you go. Script also using Takhir's nxs plugin (http://nsis.sourceforge.net/wiki/Banner_with_Cancel_button)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mgillespie</div><div class="date">21st November 2005, 19:00</div></div><div class="posttext">Perfect.  Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">28th November 2005, 14:08</div></div><div class="posttext">Fixed: Case sensitive sort of files and directories (if used sort by &quot;NAME&quot; or &quot;TYPE&quot;). Now case insensitive.<br />
Fixed: Accepted only uppercased sort type &quot;NAME|TYPE|SIZE|DATE&quot;. Now case insensitive.<br />
<br />
<br />
&quot;Locate&quot; plugin v1.3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">14th December 2005, 08:32</div></div><div class="posttext">Fixed: CRT function &quot;tolower&quot; in StrFunc.h didn't return correct national character. &quot;tolower&quot;, (&quot;islower&quot;, &quot;setlocale&quot; ...) replaced with &quot;CharLower&quot; (user32.dll).<br />
<br />
<br />
&quot;Locate&quot; plugin v1.4</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">24th December 2005, 22:21</div></div><div class="posttext">Changed: Now plugin is msvcrt.dll independed -&gt; work on Win95 (thanks kichik)<br />
Updated: &quot;ConvFunc.h&quot; to v1.3<br />
<br />
<br />
&quot;Locate&quot; plugin v1.5</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">9th February 2006, 11:06</div></div><div class="posttext">Changed: Removed option &quot;/P=&quot;, now plugin can accept multi-path in first parameter<br />
Updated: &quot;ConvFunc.h&quot; to v1.5<br />
Updated: &quot;StrFunc.h&quot; to v1.6<br />
Changed: Now plugin used header &quot;Locate.nsh&quot; for custom user variables and<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;better compile errors check.<br />
<br />
Update from previous versions:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Insert line in script:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!include &quot;Locate.nsh&quot;<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Replace:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;locate::Open -&gt; ${locate::Open} ...<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Replace:<br />
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.r0 -&gt; $0, .r1 -&gt; $1 ...  .R0 -&gt; $R0, .R1 -&gt; $R1 ...<br />
<br />
&quot;Locate&quot; plugin v1.6</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">27th May 2006, 11:38</div></div><div class="posttext">Fixed: ignore files/directories names which began with &quot;.&quot;<br />
Fixed: error, if file had more then 16 characters extension<br />
Fixed: &quot;/SF=DATE&quot; &lt;=&gt; &quot;/-SF=DATE&quot;<br />
Updated: &quot;StrFunc.h&quot; to v1.7<br />
Updated: &quot;StackFunc.h&quot; to v1.9<br />
Updated: &quot;ConvFunc.h&quot; to v1.7<br />
Changed: Now if files has same date or size they sorted by name<br />
Added: handles for search<br />
<br />
&quot;Locate&quot; plugin v1.7</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">28th May 2006, 09:58</div></div><div class="posttext">Hi instructor,<br />
<br />
How do I use this syntax<br />
<br />
${locate::Find} &quot;[handle]&quot; $var1 $var2 $var3 $var4 $var5 $var6<br />
<br />
1. I need to find the directory or file exist in C:\Program Files\<br />
2. I need it to change the InstallDIR or setoutpath to the found dir or file in it.<br />
<br />
could u create a function for me to perform the task.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">1st June 2007, 14:25</div></div><div class="posttext">Fixed: locate::Open failed to open paths ended with backslash<br />
Updated: &quot;StrFunc.h&quot; to v1.9<br />
Updated: &quot;StackFunc.h&quot; to v2.0<br />
Updated: &quot;ConvFunc.h&quot; to v2.0<br />
<br />
<br />
&quot;Locate&quot; plugin v1.8</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">2nd March 2010, 00:39</div></div><div class="posttext">Hi, many of our users are having problems when NSIS uses locate plugin inside windows 7, mainly because msvcr71.dll is natively missing. Can this be fixed (removing this dependency)? Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">2nd March 2010, 12:41</div></div><div class="posttext">zeeh3<br />
You are using self-rebuilded dll? You can check with &quot;Dependency Walker&quot; that plugin linked only to kernel32.dll and user32.dll.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zeeh3</div><div class="date">2nd March 2010, 16:25</div></div><div class="posttext">Sorry, there was a mistake... my bad :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ivansobaka</div><div class="date">27th May 2010, 12:34</div></div><div class="posttext">Hi dear Instructor.<br />
I have a problem during using 'locate' with Windows7 32bit<br />
<br />
My code is following:<br />
${locate::Open} &quot;$0&quot; &quot;/F=0 /G=0&quot; $0<br />
StrCmp $0 0 0 loop<br />
MessageBox MB_OK &quot;error&quot; IDOK close<br />
	<br />
loop:<br />
${locate::Find}  $0 $1 $2 $3 $4 $5 $6<br />
StrCmp $1 &quot;&quot; close 0<br />
	<br />
IfFileExists &quot;$1\setup.exe&quot; 0 loop<br />
IfFileExists &quot;$1\config.ini&quot; 0 loop<br />
      ; do smth	<br />
goto loop<br />
	<br />
close:<br />
${locate::Close} $0 ; at this point application going to hang up<br />
${locate::Unload}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dean.g</div><div class="date">11th June 2010, 16:24</div></div><div class="posttext">Hi Instructor,<br />
<br />
I am attempting to cycle through all subdirectories in My Documents.  I have hidden directories, the first one Locate comes across is &quot;$AVG&quot; (hidden, readonly).  This subdirectory has one subdirectory ($AVG/$CHJW) which contains four files (acgch??.dat).<br />
<br />
Following is my open command:<br />
${locate::Open} &quot;$DOCUMENTS&quot; &quot;/F=1 /D=0 /M=*-temp-*.ppp|*Recovered*.ppp /A=-HIDDEN /B=1&quot; $0<br />
<br />
The find command seems to find an &quot;endless&quot; number of empty paths\files in the $AVG/$CHJW directory.  Adding /-PN=$$AVG stops this behavour but I need this script to run on anyones computer.<br />
<br />
Any assistance appreciated!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">14th June 2010, 11:20</div></div><div class="posttext">ivansobaka<br />
Make sure you don't change $0 variable in &quot;; do smth&quot;<br />
<br />
dean.g<br />
I'm out of the active NSIS developing, but you can pack this folder and send me on email I will try to reproduce the bug.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ivansobaka</div><div class="date">14th June 2010, 13:03</div></div><div class="posttext">I dont use $0 variable in &quot;; do smth&quot;<br />
But I've changed following string<br />
<br />
${locate::Close} $0<br />
<br />
to<br />
<br />
${locate::Close} $R1<br />
<br />
Now it works right,<br />
thank you very much</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dean.g</div><div class="date">14th June 2010, 14:39</div></div><div class="posttext">Hi Instructor,<br />
<br />
If you need more information please let me know.<br />
<br />
Cheers!<br />
Dean</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dean.g</div><div class="date">14th June 2010, 14:45</div></div><div class="posttext">Hi Instructor,<br />
<br />
Please find attached.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">14th June 2010, 20:29</div></div><div class="posttext">I'm unable to open .odt files. Lets go the other way. Try to locate in &quot;$CHJW&quot;<br />
${locate::Open} &quot;$DOCUMENTS\....\$$CHJW&quot; If it hang, try to remove by one file. If it not hang try to locate in &quot;$AVG&quot;<br />
${locate::Open} &quot;$DOCUMENTS\....\$$AVG&quot; It simply can be file system error, like bad clusters on HDD etc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dean.g</div><div class="date">14th June 2010, 21:15</div></div><div class="posttext">Hi Instructor,<br />
<br />
Here is contents of .odt file (open office text file).  I was just showing you the directory structor.<br />
<br />
Cheers!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">11th October 2011, 13:38</div></div><div class="posttext">Added: full unicode support on NSIS Unicode.<br />
<br />
Locate plugin v2.0 (http://nsis.sourceforge.net/Locate_plugin)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mlf176f2</div><div class="date">26th October 2011, 23:11</div></div><div class="posttext">For some reason this plugin cannot locate files such as<br />
<br />
c:\.Rhistory<br />
<br />
Is there some work-around?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">31st October 2011, 15:00</div></div><div class="posttext">mlf176f2<br />
Is not reproduced.<br />
<br />
FILE:&quot;c:\IO.SYS&quot; [110080 b] [Created: 08.06.2000 17:00:00] [-a--]<br />
FILE:&quot;c:\.Rhistory&quot; [0 b] [Created: 31.10.2011 19:57:00] [-a--]<br />
FILE:&quot;c:\ntldr&quot; [251152 b] [Created: 13.04.2008 18:02:06] [rahs]</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tinflute</div><div class="date">3rd May 2012, 20:15</div></div><div class="posttext">My installer crashes when I run locate. It always crashes when it hits a particular folder (c:\Program Files (x86)\Oracle\). Runniny on windows 7.<br />
<br />
${locate::Open} &quot;C:\&quot; `/F=1 /D=0 /X=exe /-PN=&quot;Oracle&quot; /-PF=&quot;$WINDIR\System|$WINDIR\System32|$WINDIR\Help&quot; /N=pg_dump.exe /B=1` $0<br />
${locate::Find} $0 $1 $2 $3 $4 $5 $6<br />
StrCpy $backup $0</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">3rd May 2012, 21:34</div></div><div class="posttext">If it is reproducible how about running it through a debugger. If you are up for installing Visual Studio 2010 Express and the Windows 7 SDK then I will explain how.<br />
<br />
Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tinflute</div><div class="date">4th May 2012, 14:59</div></div><div class="posttext">ok thanks. i'll get back to you if i get that installed.<br />
i'm looking at an another approach looking up exe path through the registry.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">karlos34</div><div class="date">15th November 2013, 12:16</div></div><div class="posttext">Hi,<br />
I have some troubles with ${locate::Open}. I use parametr /-PF=${UpgradeExcludeDirectories} to excluding but my string of excluded files is too long and has been truncated.<br />
I found two possible reasons:<br />
1, I found magic constant :) in source code NSIS_MAX_STRLEN. Can you create bigger buffer please?<br />
2, add parameter which will be able to define excluded files as relative path<br />
Have you any idea or is exist any way how can i use relative paths for excluded files?<br />
<br />
Many thanks guys</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>