<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 3.0 vs 2.0 (Winamp), media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  3.0 vs 2.0 (Winamp) NSIS Discussion" />
	
	<title> 3.0 vs 2.0 (Winamp) [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  3.0 vs 2.0 (Winamp)</div>
<hr />
<div class="pda"><a href="t-98492.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=98492">3.0 vs 2.0 (Winamp)</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">11th August 2002, 23:33</div></div><div class="posttext">greatWho pointed me to a problem in his post (http://forums.winamp.com/showthread.php?s=&amp;postid=650273#post650273). winamp plugin authors that want to support both, the old and the new versions of winamp will have to face a problem. winamp 3.0 has a different directory structure and different way to save its settings (ini-files).<br />
<br />
i started writing a function that checks for the installed version of winamp (none, 2.x only, 3.x only, both). but i figured that this doesn't go far enough. even if i can determine the version installed, i still have to blow my code with two various ways to setup the plugin properly.<br />
<br />
winamp 2 saves its settings in winamp.ini and the plugins in winamp\plugins<br />
<br />
winamp 3 saves its settings in studio.ini and the plugins (called components) in winamp\wacs\data<br />
<br />
although i can't figure out a way to avoid two different ways of setup (in one installer) to deal with the ini-files, it would help to get an outdir variable for plugin-directories. i remember older versions of nsis had a variable called $WAVSDIR (or similiar, can't really remember) to adress the plugin directory of winamp. it would be nice to see a feature in future versions of nsis to get back something like this. this should work with both versions of winamp.<br />
<br />
ideas? let us know!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">liquidmotion</div><div class="date">12th August 2002, 04:27</div></div><div class="posttext">correct me if i'm wrong, but wouldn't the problem lie in that winamp3 uses differently structured &quot;components&quot; rather than &quot;plugins&quot;?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 09:29</div></div><div class="posttext">You don't have to split your code. Just create generic functions such as GetPluginsDir that will return the correct plug-ins dir without letting the scripter worry about the version of Winamp.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">12th August 2002, 09:53</div></div><div class="posttext">ah, thats nice (i love you kichik). is there a similiar way for the ini-file? the studio.ini of winamp still has the the structure as the old winamp.ini, although not all commands are supported. but it is possible to widely configure AVS through that .ini, don't know about other plugins.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 09:59</div></div><div class="posttext">What you need is a function that returs the filename of the INI to edit. BTW, I just want to make sure you have noticed that winamp.exe has version info in it so you can use GetDLLVersion to get Winamp's version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">12th August 2002, 12:27</div></div><div class="posttext">the problem might be, that winamp 2 and 3 have different registry-entries and directories. so one still has to query the registry to find that out (i think its the safest way). the getversion would be unnecessary then.<br />
<br />
i think i'll find a clever function to accomplish the problem. will keep you updated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">12th August 2002, 12:31</div></div><div class="posttext">i was wondering if it is possible to label the buttons of the messagebox. in the documentation i found MB_DEFBUTTON1, but i don't know if this helps solving my problem, nor how to use it. i want to buttons for my messagebox, let's name the &quot;button 1&quot; and &quot;button 2&quot; for the example.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 13:44</div></div><div class="posttext">As far as I know it isn't possible to change the buttons captions with just the MessageBox API call.<br />
<br />
Let me know when you finish writing these function and I will add them to functions.htm.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EL-VIS2</div><div class="date">12th August 2002, 14:49</div></div><div class="posttext">For NSIS v1.98<br />
This tests for winamp2 and winamp3 and gives choice if both version are found. Don't know if perfect yet but I've tested it several times and it seems to work correct...<br />
<br />
edited by KiCHiK: script attached below :down:<br />
Please attach large scripts next time to keep the forum tidy.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joost Verburg</div><div class="date">12th August 2002, 15:47</div></div><div class="posttext">Originally posted by EL-VIS2 <br />
For NSISW 1.4<br />
MakeNSISW is just the Window Wrapper, this is not the NSIS version.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EL-VIS2</div><div class="date">12th August 2002, 16:05</div></div><div class="posttext">Sorry..... NSIS v1.98</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">12th August 2002, 18:14</div></div><div class="posttext">For those who noticed that Winamp was using XML files to store config info :<br />
as a member of the french community, i created a little script that will parch an XML file (here, i had to change language used from english to french ;) ) !<br />
I know that the code s***, but this works ;) !<br />
<br />
How to use it :<br />
<br />
Push &quot;$INSTDIR\studio.xnf&quot;<br />
Push '&lt;entry name=&quot;Language&quot; value=&quot;'<br />
Push 'FR&quot; /&gt;'<br />
Push '&lt;section name=&quot;{3CBD4483-DC44-11D3-B608-000086340885}&quot;&gt;'<br />
Call XML_Replace<br />
<br />
edited by KiCHiK: script attached below :down:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 22:06</div></div><div class="posttext">EL-VIS2's code attached.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 22:07</div></div><div class="posttext">veekee's code attached.<br />
Same goes here, please attach large scripts.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">veekee</div><div class="date">12th August 2002, 22:46</div></div><div class="posttext">really sorry about that, Mr. Moderator :cry: :cry: !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">12th August 2002, 23:00</div></div><div class="posttext">Mr. Moderator forgives :D<br />
Just trying to keep the forum readable and easy to navigate.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EL-VIS2</div><div class="date">13th August 2002, 10:18</div></div><div class="posttext">Here's my basic AVS-NSIS script: <br />
<br />
- checking for winamp verions and giving choice if both are found <br />
- verifying install path and giving warning if no winamp is found <br />
- uninstaller <br />
- link to uninstall exe <br />
- running winamp <br />
<br />
I did no reg-entries and no ini-changes. If you need to refer to GreatWhos' scripting:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=98454</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Yathosho</div><div class="date">8th October 2002, 12:13</div></div><div class="posttext">Originally posted by killahbite <br />
i was wondering if it is possible to label the buttons of the messagebox. in the documentation i found MB_DEFBUTTON1, but i don't know if this helps solving my problem, nor how to use it. i want to buttons for my messagebox, let's name the &quot;button 1&quot; and &quot;button 2&quot; for the example. <br />
<br />
still an open question or an requested feature :D <br />
<br />
i want custome messagebox buttons :up:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>