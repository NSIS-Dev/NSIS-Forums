<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" 2.09 Bug, or am I missing something?, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  2.09 Bug, or am I missing something? NSIS Discussion" />
	
	<title> 2.09 Bug, or am I missing something? [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  2.09 Bug, or am I missing something?</div>
<hr />
<div class="pda"><a href="t-227361.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=227361">2.09 Bug, or am I missing something?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">30th September 2005, 22:39</div></div><div class="posttext">Hello all.<br />
<br />
Well I just updated from 2.06 to 2.09 and compiled an install script that I have been using for months.  According to the 2.09 change log, a Root Directory Install problem was suppose to be fixed.<br />
<br />
However I compiled the below code with 2.09 (original and Logging EXE/Stub builds) and in all cases can not install to a root.  Check it out, compile the code below, and should see the Install button grays out when you backspace out the directory path to the root.  Let me know, thanks.<br />
<br />
Jnuw<br />
<br />
<br />
; NSIS 2.09<br />
!include &quot;MUI.nsh&quot;<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
Name &quot;RootTest&quot;<br />
AllowRootDirInstall True<br />
OutFile &quot;RootTest.exe&quot;<br />
InstallDir &quot;$EXEDIR&quot;<br />
<br />
Section &quot;-Test&quot;<br />
  MessageBox MB_OK &quot;Hi&quot;<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th September 2005, 23:15</div></div><div class="posttext">The change log actually said &quot;C:\ &quot; (root directory with a space) is no longer considered valid without AllowRootDirInstall. AllowRootDirInstall worked fine before that fix though, so it's not so much as a fix but a cause :)<br />
<br />
Anyway, thanks for bringing this up. I'll fix it tomorrow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">30th September 2005, 23:48</div></div><div class="posttext">Thanks kichik.  Will I be able to get access to the fix then, or will it only be in the next release?  Or should I be patient :) and shut up and wait till you find the problem first!  Thanks again.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">30th September 2005, 23:54</div></div><div class="posttext">I know what the problem is, I just need to find a better fix to the &quot;C:\ &quot; problem. Once it's done, I'll attach a patch here, but you might want to wait for 2.10. It's not that far away...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">1st October 2005, 00:13</div></div><div class="posttext">Excellent, thanks so much for the info.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">1st October 2005, 13:35</div></div><div class="posttext">Here's a fix. I'm not going to upload it yet, because I want to test it and think about it a bit more. I'd appreciate any comments.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">1st October 2005, 16:21</div></div><div class="posttext">Thanks!  I try to test it today.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">3rd October 2005, 15:35</div></div><div class="posttext">Hey kichik,<br />
<br />
I'm a bit confused on how to test this.  I figured I would have a util.c file that I would replace with this one, but I don't have that file.  I'm guessing that I would have to re-compile my makensis.exe, but I'm not too familiar with that process.<br />
<br />
I'm OK with just waiting to 2.10 for the fix, or if you would like me to test this fix could you post a compiled makensis.exe, that is if I'm correct in how to implement this patch.<br />
<br />
On last question, if I just wanted to roll back to 2.06, is it alright that I just rename my current (2.09) NSIS folder and copy back in my 2.06 NSIS folder I backed up before upgrading?  Or should I run the uninstaller/installer to roll back to 2.06?  Thanks for your time.<br />
<br />
Jnuw</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd October 2005, 15:49</div></div><div class="posttext">It's a patch against the source code of NSIS from CVS. You need to apply it and recompile NSIS.<br />
<br />
Here's a compiled version including this fix:<br />
<br />
http://stashbox.org/uploads/1128351038/root.zip<br />
<br />
To rollback, you can rename the directory and install 2.06 instead. You could also simply install 2.06 to another directory.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jnuw</div><div class="date">3rd October 2005, 17:56</div></div><div class="posttext">Sweet, thanks!<br />
<br />
Jon</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>