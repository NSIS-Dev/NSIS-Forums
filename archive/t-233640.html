<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" RadioButton, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  RadioButton NSIS Discussion" />
	
	<title> RadioButton [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  RadioButton</div>
<hr />
<div class="pda"><a href="t-233640.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=233640">RadioButton</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Ilja</div><div class="date">20th December 2005, 20:44</div></div><div class="posttext">Hi,<br />
I have some Problems with radioButton.<br />
I have following idea i will make the SecttionsGroup and allow to select only one. If the group contain two items it's all right, but if I have more Items and try to select/deselect group i get angry  effect the selectio will be changed to all except one. <br />
Have somebody idea ?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2005, 09:59</div></div><div class="posttext">We need more information (like a script to reproduce the problem).<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KirillKr</div><div class="date">21st December 2005, 11:52</div></div><div class="posttext">http://forums.winamp.com/showthread.php?s=&amp;threadid=173823&amp;highlight=Section</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ilja</div><div class="date">21st December 2005, 12:38</div></div><div class="posttext"># Auto-generated by EclipseNSIS Script Wizard<br />
# 21.12.2005 13:32:10<br />
  <br />
Name TestApp<br />
# Defines<br />
!define REGKEY &quot;SOFTWARE\$(^Name)&quot;<br />
<br />
<br />
<br />
# MUI defines<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-install-colorful.ico&quot;<br />
!define MUI_FINISHPAGE_NOAUTOCLOSE<br />
!define MUI_STARTMENUPAGE_REGISTRY_ROOT HKLM<br />
!define MUI_STARTMENUPAGE_NODISABLE<br />
!define MUI_STARTMENUPAGE_REGISTRY_KEY Software\TestApp<br />
!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME StartMenuGroup<br />
!define MUI_STARTMENUPAGE_DEFAULT_FOLDER TestApp<br />
!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\Icons\orange-uninstall-nsis.ico&quot;<br />
<br />
# Included files<br />
!include Sections.nsh<br />
!include MUI.nsh<br />
!include LogicLib.nsh<br />
  <br />
# Reserved Files<br />
<br />
# Variables<br />
Var StartMenuGroup<br />
<br />
# macrosdef<br />
<br />
 !macro SectionRadioButtons _d _e<br />
    Push $2<br />
    Push $3<br />
    Push $4<br />
    Push $5<br />
    Push $6<br />
    Push $7<br />
 <br />
    !insertmacro StartRadioButtons ${_d}<br />
 <br />
    StrCpy $3 0<br />
    StrLen $5 `${_e}`<br />
    ${For} $2 0 $5<br />
      StrCpy $4 `${_e}` 1 $2<br />
      ${If} $4 == &quot;,&quot;<br />
        IntOp $3 $3 + 1<br />
      ${EndIf}<br />
    ${Next}<br />
 <br />
    StrCpy $7 `${_e}`<br />
    StrCpy $4 0<br />
    ${Do}<br />
 <br />
      StrLen $5 `$7`<br />
      ${For} $2 0 $5<br />
        StrCpy $6 `$7` 1 $2<br />
        ${If} $6 == &quot;,&quot;<br />
          StrCpy $6 `$7` $2<br />
          IntOp $2 $2 + 1<br />
          StrCpy $7 `$7` &quot;&quot; $2<br />
          IntOp $4 $4 + 1<br />
          ${Break}<br />
        ${EndIf}<br />
      ${Next}<br />
 <br />
      ${If} $4 &lt;= $3<br />
      ${AndIf} $6 != &quot;&quot;<br />
        !insertmacro RadioButton $6<br />
        ${If} $4 == $3<br />
          !insertmacro RadioButton $7<br />
        ${EndIf}<br />
      ${EndIf}<br />
 <br />
    ${LoopUntil} $4 &gt;= $3<br />
 <br />
    !insertmacro EndRadioButtons<br />
 <br />
    Pop $7<br />
    Pop $6<br />
    Pop $5<br />
    Pop $4<br />
    Pop $3<br />
    Pop $2<br />
  !macroend<br />
 <br />
  !macro RadioGetChecked _d _e<br />
    Push $2<br />
    Push $3<br />
    Push $4<br />
    Push $5<br />
    Push $6<br />
    Push $7<br />
 <br />
    !ifndef _CheckedButton${_d}<br />
      var /GLOBAL _CheckedButton${_d}<br />
      !define _CheckedButton${_d}<br />
    !endif<br />
 <br />
    StrCpy $3 0<br />
    StrLen $5 `${_e}`<br />
    ${For} $2 0 $5<br />
      StrCpy $4 `${_e}` 1 $2<br />
      ${If} $4 == &quot;,&quot;<br />
        IntOp $3 $3 + 1<br />
      ${EndIf}<br />
    ${Next}<br />
 <br />
    StrCpy $7 `${_e}`<br />
    StrCpy $4 0<br />
    ${Do}<br />
 <br />
      StrLen $5 `$7`<br />
      ${For} $2 0 $5<br />
        StrCpy $6 `$7` 1 $2<br />
        ${If} $6 == &quot;,&quot;<br />
          StrCpy $6 `$7` $2<br />
          IntOp $2 $2 + 1<br />
          StrCpy $7 `$7` &quot;&quot; $2<br />
          IntOp $4 $4 + 1<br />
          ${Break}<br />
        ${EndIf}<br />
      ${Next}<br />
 <br />
      ${If} $4 &lt;= $3<br />
      ${AndIf} $6 != &quot;&quot;<br />
 <br />
        ${If} ${SectionIsSelected} $6<br />
          StrCpy $_CheckedButton${_d} &quot;$6&quot;<br />
          ${ExitDo}<br />
        ${EndIf}<br />
 <br />
        ${If} $4 == $3<br />
        ${AndIf} ${SectionIsSelected} $7<br />
          StrCpy $_CheckedButton${_d} &quot;$7&quot;<br />
        ${EndIf}<br />
      ${EndIf}<br />
 <br />
    ${LoopUntil} $4 &gt;= $3<br />
 <br />
    Pop $7<br />
    Pop $6<br />
    Pop $5<br />
    Pop $4<br />
    Pop $3<br />
    Pop $2<br />
  !macroend<br />
<br />
# Installer pages<br />
!insertmacro MUI_PAGE_WELCOME<br />
!insertmacro MUI_PAGE_COMPONENTS<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
!insertmacro MUI_PAGE_STARTMENU Application $StartMenuGroup<br />
!insertmacro MUI_PAGE_INSTFILES<br />
!insertmacro MUI_PAGE_FINISH<br />
!insertmacro MUI_UNPAGE_CONFIRM<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
# Installer languages<br />
!insertmacro MUI_LANGUAGE English<br />
!insertmacro MUI_LANGUAGE German<br />
<br />
# Installer attributes<br />
OutFile TestAppSetup.exe<br />
InstallDir $PROGRAMFILES\TestApp<br />
CRCCheck on<br />
XPStyle on<br />
ShowInstDetails show<br />
InstallDirRegKey HKLM &quot;${REGKEY}&quot; Path<br />
ShowUninstDetails show<br />
<br />
# Installer sections<br />
Section -Main SEC0000<br />
    SetOutPath $INSTDIR<br />
    SetOverwrite on<br />
    File ..\..\..\Test\main<br />
    WriteRegStr HKLM &quot;${REGKEY}\Components&quot; Main 1<br />
SectionEnd<br />
<br />
SectionGroup Database SECGRP0000<br />
    Section DemoDatabase SEC0001<br />
        SetOutPath $INSTDIR<br />
        SetOverwrite on<br />
        File ..\..\..\Test\demo.txt<br />
        WriteRegStr HKLM &quot;${REGKEY}\Components&quot; DemoDatabase 1<br />
    SectionEnd<br />
<br />
    Section DefaultLocal SEC0002<br />
        SetOutPath $INSTDIR<br />
        SetOverwrite on<br />
        File ..\..\..\Test\default.txt<br />
        WriteRegStr HKLM &quot;${REGKEY}\Components&quot; DefaultLocal 1<br />
    SectionEnd<br />
<br />
    Section &quot;!No Database&quot; SEC0003<br />
        SetOutPath $INSTDIR<br />
        SetOverwrite on<br />
        File ..\..\..\Test\noDB.txt<br />
        WriteRegStr HKLM &quot;${REGKEY}\Components&quot; &quot;No Database&quot; 1<br />
    SectionEnd<br />
SectionGroupEnd<br />
<br />
Section -post SEC0004<br />
    WriteRegStr HKLM &quot;${REGKEY}&quot; Path $INSTDIR<br />
    WriteUninstaller $INSTDIR\TestAppUninstall.exe<br />
    !insertmacro MUI_STARTMENU_WRITE_BEGIN Application<br />
    SetOutPath $SMPROGRAMS\$StartMenuGroup<br />
    CreateShortCut &quot;$SMPROGRAMS\$StartMenuGroup\$(^UninstallLink).lnk&quot; $INSTDIR\TestAppUninstall.exe<br />
    !insertmacro MUI_STARTMENU_WRITE_END<br />
    WriteRegStr HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot; DisplayName &quot;$(^Name)&quot;<br />
    WriteRegStr HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot; DisplayIcon $INSTDIR\TestAppUninstall.exe<br />
    WriteRegStr HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot; UninstallString $INSTDIR\TestAppUninstall.exe<br />
    WriteRegDWORD HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot; NoModify 1<br />
    WriteRegDWORD HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot; NoRepair 1<br />
SectionEnd<br />
<br />
# Macro for selecting uninstaller sections<br />
!macro SELECT_UNSECTION SECTION_NAME UNSECTION_ID<br />
    Push $R0<br />
    ReadRegStr $R0 HKLM &quot;${REGKEY}\Components&quot; &quot;${SECTION_NAME}&quot;<br />
    StrCmp $R0 1 0 next${UNSECTION_ID}<br />
    !insertmacro SelectSection &quot;${UNSECTION_ID}&quot;<br />
    Goto done${UNSECTION_ID}<br />
next${UNSECTION_ID}:<br />
    !insertmacro UnselectSection &quot;${UNSECTION_ID}&quot;<br />
done${UNSECTION_ID}:<br />
    Pop $R0<br />
!macroend<br />
<br />
# Uninstaller sections<br />
Section /o &quot;un.No Database&quot; UNSEC0003<br />
    Delete /REBOOTOK $INSTDIR\noDB.txt<br />
    DeleteRegValue HKLM &quot;${REGKEY}\Components&quot; &quot;No Database&quot;<br />
SectionEnd<br />
<br />
Section /o un.DefaultLocal UNSEC0002<br />
    Delete /REBOOTOK $INSTDIR\default.txt<br />
    DeleteRegValue HKLM &quot;${REGKEY}\Components&quot; DefaultLocal<br />
SectionEnd<br />
<br />
Section /o un.DemoDatabase UNSEC0001<br />
    Delete /REBOOTOK $INSTDIR\demo.txt<br />
    DeleteRegValue HKLM &quot;${REGKEY}\Components&quot; DemoDatabase<br />
SectionEnd<br />
<br />
Section /o un.Main UNSEC0000<br />
    Delete /REBOOTOK $INSTDIR\main<br />
    DeleteRegValue HKLM &quot;${REGKEY}\Components&quot; Main<br />
SectionEnd<br />
<br />
Section un.post UNSEC0004<br />
    DeleteRegKey HKLM &quot;SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)&quot;<br />
    Delete /REBOOTOK &quot;$SMPROGRAMS\$StartMenuGroup\$(^UninstallLink).lnk&quot;<br />
    Delete /REBOOTOK $INSTDIR\TestAppUninstall.exe<br />
    DeleteRegValue HKLM &quot;${REGKEY}&quot; StartMenuGroup<br />
    DeleteRegValue HKLM &quot;${REGKEY}&quot; Path<br />
    DeleteRegKey /ifempty HKLM &quot;${REGKEY}\Components&quot;<br />
    DeleteRegKey /ifempty HKLM &quot;${REGKEY}&quot;<br />
    RMDir /REBOOTOK $SMPROGRAMS\$StartMenuGroup<br />
    RMDir /REBOOTOK $INSTDIR<br />
SectionEnd<br />
<br />
# Installer functions<br />
Function .onInit<br />
    InitPluginsDir<br />
FunctionEnd<br />
<br />
# Uninstaller functions<br />
Function un.onInit<br />
    SetAutoClose true<br />
    ReadRegStr $INSTDIR HKLM &quot;${REGKEY}&quot; Path<br />
    ReadRegStr $StartMenuGroup HKLM &quot;${REGKEY}&quot; StartMenuGroup<br />
    !insertmacro SELECT_UNSECTION Main ${UNSEC0000}<br />
    !insertmacro SELECT_UNSECTION DemoDatabase ${UNSEC0001}<br />
    !insertmacro SELECT_UNSECTION DefaultLocal ${UNSEC0002}<br />
    !insertmacro SELECT_UNSECTION &quot;No Database&quot; ${UNSEC0003}<br />
FunctionEnd<br />
<br />
Function .onSelChange<br />
    !insertmacro SectionRadioButtons  &quot;${SEC0001}&quot; &quot;${SEC0001}, ${SEC0002}, ${SEC0003}&quot;<br />
FunctionEnd<br />
<br />
# Installer Language Strings<br />
# TODO Update the Language Strings with the appropriate translations.<br />
<br />
LangString ^UninstallLink ${LANG_ENGLISH} &quot;Uninstall $(^Name)&quot;<br />
LangString ^UninstallLink ${LANG_GERMAN} &quot;Uninstall $(^Name)&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st December 2005, 13:42</div></div><div class="posttext">I'm confused here... what are all these macros for.<br />
Check out Examples\one-section.nsi<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ilja</div><div class="date">21st December 2005, 14:55</div></div><div class="posttext">Check out Examples\one-section.nsi <br />
<br />
This example allow to use the radiobuttons which are not grouped in the SectionGroup. But I need to group disjunct sections.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">23rd December 2005, 12:08</div></div><div class="posttext">Try this:<br />
<br />
http://forums.winamp.com/showthread.php?s=&amp;threadid=189811</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ilja</div><div class="date">2nd January 2006, 15:18</div></div><div class="posttext">Thanks. <br />
It is exactly what I required.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>