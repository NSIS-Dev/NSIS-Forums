<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" using variables in ReadRegStr, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  using variables in ReadRegStr NSIS Discussion" />
	
	<title> using variables in ReadRegStr [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  using variables in ReadRegStr</div>
<hr />
<div class="pda"><a href="t-156888.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=156888">using variables in ReadRegStr</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">cosmic66</div><div class="date">20th November 2003, 09:41</div></div><div class="posttext">I would like to use my own variables in ReadRegStr:<br />
<br />
Var Test1<br />
Var Test2<br />
[...]<br />
StrCpy $Test1 &quot;HKLM&quot;<br />
StrCpy $Test2 &quot;SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;<br />
<br />
<br />
Why does the following not work?<br />
<br />
ReadRegStr $1 $Test1 $Test2 &quot;PATH&quot;<br />
<br />
<br />
Whereas the following works:<br />
<br />
ReadRegStr $1 &quot;HKLM&quot; $Test2 &quot;PATH&quot;<br />
<br />
<br />
<br />
Thanks!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th November 2003, 09:59</div></div><div class="posttext">ReadRegStr doesn't process the root key on runtime. If you want to make it change on runtime you'd have to add another line of ReadRegStr. Same goes for all other registry instructions.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">cosmic66</div><div class="date">20th November 2003, 10:24</div></div><div class="posttext">I would like to do the following:<br />
<br />
In the function .onInit I check if the user has administration<br />
rights, if so, I would like to register the environment variables<br />
for all users, otherwise they are registered for the current user<br />
(thus I have to use different root_key and sub_key for reading and writing the registry keys).<br />
<br />
How could I achieve that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">20th November 2003, 10:36</div></div><div class="posttext">A simple comparsion. Assuming $0 is set to &quot;admin&quot; if the user can write to HKLM you can use:<br />
<br />
StrCmp $0 &quot;admin&quot; goHKLM<br />
WriteRegStr HKCU ....<br />
Goto done<br />
goHKLM:<br />
WriteRegStr HKLM ....<br />
done:</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>