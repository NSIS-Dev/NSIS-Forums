<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Problem when readinistr in nsis unicode, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Problem when readinistr in nsis unicode NSIS Discussion" />
	
	<title> Problem when readinistr in nsis unicode [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Problem when readinistr in nsis unicode</div>
<hr />
<div class="pda"><a href="t-324563.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=324563">Problem when readinistr in nsis unicode</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Jeperipi</div><div class="date">4th December 2010, 05:53</div></div><div class="posttext">Hi Guys,<br />
<br />
now i working with nsis unicode and i need to read the firefox ini file. <br />
because this ini is not an unicode file. then my nsis return me an empty string when calling readinistr function. this ini is default from firefox, so there is no way for me to make it as a unicode ini file. Any idea to read this file in nsis unicode?<br />
<br />
here the script to read the ini.<br />
ReadINIStr $1 &quot;$APPDATA\Mozilla\Firefox\profiles.ini&quot; &quot;Profile0&quot; &quot;Path&quot;     <br />
<br />
Thank you very much for your help.<br />
<br />
Regards<br />
<br />
Jeperipi</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">4th December 2010, 08:23</div></div><div class="posttext">Unicode NSIS should still be able to read ascii .ini files</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">5th December 2010, 16:58</div></div><div class="posttext">Possibly the path to the ini file is incorrect. I suggest you use a MessageBox to verify:<br />
MessageBox MB_OK &quot;$APPDATA\Mozilla\Firefox\profiles.ini&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jiake</div><div class="date">6th December 2010, 01:33</div></div><div class="posttext">Try this:<br />
<br />
SetShellVarContext current<br />
IfFileExists $APPDATA\Mozilla\Firefox\profiles.ini 0 +8<br />
ReadINIStr $1 $APPDATA\Mozilla\Firefox\profiles.ini Profile0 IsRelative<br />
IntCmp $1 1 +3<br />
ReadINIStr $1 $APPDATA\Mozilla\Firefox\profiles.ini Profile0 Path<br />
Goto +3<br />
ReadINIStr $1 $APPDATA\Mozilla\Firefox\profiles.ini Profile0 Path<br />
StrCpy $1 $APPDATA\Mozilla\Firefox\$1<br />
MessageBox MB_OK &quot;Firefox profile path: $1&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>