<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Header Text / MUI2 / nsDialogs, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Header Text / MUI2 / nsDialogs NSIS Discussion" />
	
	<title> Header Text / MUI2 / nsDialogs [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Header Text / MUI2 / nsDialogs</div>
<hr />
<div class="pda"><a href="t-342308.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=342308">Header Text / MUI2 / nsDialogs</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Liero</div><div class="date">16th February 2012, 18:18</div></div><div class="posttext">Hi,<br />
<br />
I just created my first installer using NSIS. I just can't  set header text nor header image.<br />
I tried:<br />
!define MUI_PAGE_HEADER_TEXT &quot;Title&quot;<br />
or <br />
!insertmacro MUI_HEADER_TEXT &quot;Title&quot; &quot;Subtitle&quot; <br />
<br />
but there's still an empty header bar.<br />
<br />
What I'm doing wrong?<br />
<br />
<br />
Var DotnetInstalled         ; if OK no need to install<br />
<br />
;/////////<br />
; INCLUDES<br />
;/////////<br />
<br />
!include LogicLib.nsh       ; Use more familiar flow control<br />
!include &quot;MUI2.nsh&quot;<br />
!include &quot;x64.nsh&quot;          ; For using {RunningX64}<br />
!include &quot;DotNetVer.nsh&quot;    ; for ${HasDotNet4.0}<br />
!include &quot;nsDialogs.nsh&quot;    ; To create labels on a custom page<br />
                   <br />
Name &quot;MeetVideo DeskShare&quot;<br />
OutFile &quot;MeetVideo DeskShare Setup.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\MeetVideo DeskShare&quot;<br />
InstallDirRegKey HKLM &quot;Software\MeetVideo_DeskShare&quot; &quot;Install_Dir&quot;<br />
RequestExecutionLevel admin<br />
<br />
<br />
;--------------------------------<br />
;Interface Configuration<br />
  !define MUI_PAGE_HEADER_TEXT &quot;MeetVideo&quot;<br />
  !define MUI_ABORTWARNING<br />
  !define MUI_FINISHPAGE_RUN &quot;$INSTDIR\DeskShare.exe&quot;<br />
  !define MUI_FINISHPAGE_RUN_TEXT &quot;Start MeetVideo DeskShare&quot;<br />
;--------------------------------<br />
<br />
; Pages<br />
<br />
  Page custom Welcome<br />
  Page custom CheckAndInstallDotNet &quot;&quot; &quot;: .Net Framework&quot;<br />
  page custom CheckAndInstallVcRedist &quot;&quot; &quot;: VC++ Redistributable&quot;  <br />
<br />
  !insertmacro MUI_PAGE_COMPONENTS<br />
  !insertmacro MUI_PAGE_DIRECTORY<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
  !insertmacro MUI_PAGE_FINISH<br />
<br />
<br />
<br />
<br />
  !insertmacro MUI_UNPAGE_CONFIRM<br />
  !insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
<br />
;--------------------------------<br />
<br />
; The stuff to install<br />
Section &quot;DeskShare (required)&quot;<br />
<br />
  SectionIn RO<br />
  <br />
  ; Set output path to the installation directory.<br />
  SetOutPath $INSTDIR<br />
  <br />
  ; Put file there<br />
  File /r &quot;IncludeFiles\*.*&quot;<br />
  <br />
  ; Write the installation path into the registry<br />
  WriteRegStr HKLM SOFTWARE\MeetVideo_DeskShare &quot;Install_Dir&quot; &quot;$INSTDIR&quot;<br />
  <br />
  ; Write the uninstall keys for Windows<br />
  WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\DeskShare&quot; &quot;DisplayName&quot; &quot;MeetVideo DeskShare&quot;<br />
  WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\DeskShare&quot; &quot;UninstallString&quot; '&quot;$INSTDIR\uninstall.exe&quot;'<br />
  WriteRegDWORD HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\DeskShare&quot; &quot;NoModify&quot; 1<br />
  WriteRegDWORD HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\DeskShare&quot; &quot;NoRepair&quot; 1<br />
  WriteUninstaller &quot;uninstall.exe&quot;<br />
  <br />
SectionEnd<br />
<br />
; Optional section (can be disabled by the user)<br />
Section &quot;Start Menu Shortcuts&quot;<br />
<br />
  CreateDirectory &quot;$SMPROGRAMS\MeetVideo DeskShare&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\MeetVideo DeskShare\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot; &quot;&quot; &quot;$INSTDIR\uninstall.exe&quot; 0<br />
  CreateShortCut &quot;$SMPROGRAMS\MeetVideo DeskShare\DeskShare.lnk&quot; &quot;$INSTDIR\DeskShare.exe&quot; &quot;&quot; &quot;$INSTDIR\DeskShare.exe&quot; 0<br />
  <br />
SectionEnd<br />
<br />
Section &quot;Desktop Shortcut&quot;<br />
  CreateShortCut &quot;$DESKTOP\MeetVideo DeskShare\DeskShare.lnk&quot; &quot;$INSTDIR\DeskShare.exe&quot; &quot;&quot; &quot;$INSTDIR\DeskShare.exe&quot; 0<br />
SectionEnd<br />
<br />
;--------------------------------<br />
<br />
; Uninstaller<br />
<br />
Section &quot;Uninstall&quot;<br />
  <br />
  ; Remove registry keys<br />
  DeleteRegKey HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\DeskShare&quot;<br />
  DeleteRegKey HKLM SOFTWARE\MeetVideo_DeskShare<br />
<br />
  ; Remove files and uninstaller<br />
  Delete $INSTDIR\*.*<br />
  ;Delete $INSTDIR\uninstall.exe<br />
<br />
  ; Remove shortcuts, if any<br />
  Delete &quot;$SMPROGRAMS\MeetVideo DeskShare\*.*&quot;<br />
<br />
  ; Remove directories used<br />
  RMDir &quot;$SMPROGRAMS\MeetVideo DeskShare&quot;<br />
  RMDir &quot;$INSTDIR&quot;<br />
            <br />
SectionEnd<br />
<br />
<br />
Function Welcome<br />
  !insertmacro MUI_HEADER_TEXT &quot;Title&quot; &quot;Subtitle&quot; <br />
  nsDialogs::Create 1018   ;Create a Dialog Window<br />
 <br />
  <br />
  ${NSD_CreateLabel} 0 0 100% 12u &quot;MeetVideo DeskShare is an aplication for capturing and sharing desktop screen.&quot;<br />
  ${NSD_CreateLabel} 0 24u 100% 12u &quot;Following prerequisities will be installed if not present:&quot;<br />
  ${NSD_CreateLabel} 12u 36u 100% 12u &quot;.NET Framework 4&quot;<br />
  ${NSD_CreateLabel} 12u 48u 100% 12u &quot;VC++ Redistibutable&quot;<br />
<br />
  ${NSD_CreateLabel} 0 90% 100% 12u &quot;(c) Copyright 2012, MONOGRAM Technologies. All rights reserved.&quot;    <br />
  nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function CheckAndInstallDotNet<br />
  nsDialogs::Create 1018  ;Create a Dialog Window<br />
  ${NSD_CreateLabel} 0 0 100% 10% &quot;Checking for .NET Framework 4.0 on your system ...&quot;<br />
  ;Check the DotNet Version<br />
  Call CheckDotNetFramework<br />
  ; Install .net if not present<br />
  ${If} $DotnetInstalled == &quot;&quot;<br />
     ${NSD_CreateLabel} 0 40 100% 30u &quot;Your System does not have .Net Framework 4.0 installed. \<br />
     Please click 'Next' to install the .Net Framework ...&quot;<br />
     nsDialogs::Show       ; show the dialog window<br />
     Call InstallDotNet<br />
  ${Else}<br />
  ${NSD_CreateLabel} 0 40 100% 30u &quot;Your System has the required .Net Framework already installed. Please click Next \<br />
  to continue this installation.&quot;<br />
     nsDialogs::Show<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Function CheckDotNetFramework<br />
  ${If} ${HasDotNet4.0}<br />
    Push &quot;Microsoft .NET Framework 4.0 installed.&quot;<br />
    Pop $DotnetInstalled<br />
  ${Else}<br />
    Push &quot;&quot;<br />
    Pop $DotnetInstalled<br />
  ${EndIf}<br />
FunctionEnd<br />
<br />
Function InstallDotNet<br />
    SetOutPath '$TEMP'<br />
    SetOverwrite on<br />
    ;file work UNDO to save time in debugging<br />
    File 'DeploymentResources\dotNetFx40_Client_x86_x64.exe'<br />
    ExecWait '&quot;$TEMP\dotNetFx40_Client_x86_x64&quot; /norestart'<br />
    Delete &quot;$TEMP\dotNetFx40_Client_x86_x64.exe&quot;<br />
FunctionEnd<br />
<br />
Function CheckAndInstallVcRedist<br />
  nsDialogs::Create 1018   ;Create a Dialog Window<br />
  ${NSD_CreateLabel} 0 0 100% 30u &quot;Checking for VC 2010 C++ Redistributable ...&quot;<br />
  Call CheckVCRedist<br />
  StrCmp $R0 &quot;-1&quot; 0 +4<br />
    ${NSD_CreateLabel} 0 40 100% 30u &quot;Installing VC 2010 C++ Redistributable...&quot;<br />
    Call InstallVcRedist<br />
    Goto +2<br />
    ${NSD_CreateLabel} 0 40 100% 30u &quot;VC 2010 C++ Redistributable already installed. \<br />
    Please click next to continue installation&quot;<br />
    nsDialogs::Show       ;show the dialog window<br />
FunctionEnd<br />
<br />
Function CheckVCRedist<br />
   ; check for 2 possible keys in registry, if any one is good, <br />
   ; the distributable has already been installed:       <br />
   <br />
   ReadRegDword $R0 HKLM &quot;SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\VC\VCRedist\x86&quot; &quot;Installed&quot;<br />
   ${If} $R0 == 1<br />
        return<br />
   ${Else}<br />
        ReadRegDword $R0 HKLM &quot;SOFTWARE\Microsoft\VisualStudio\10.0\VC\VCRedist\x86&quot; &quot;Installed&quot;<br />
        ${If} $R0 == 1<br />
           return<br />
        ${Else}<br />
           StrCpy $R0 &quot;-1&quot;<br />
        ${EndIf}<br />
   ${EndIf}<br />
FunctionEnd<br />
<br />
<br />
; install Visual Studio 2010 C++ redistributable<br />
Function InstallVcRedist<br />
         SetOutPath '$TEMP'<br />
         SetOverwrite on<br />
         ;file work<br />
         File 'DeploymentResources\vcredist_x86.exe'<br />
     ExecWait '&quot;$TEMP\vcredist_x86.exe&quot; /norestart'<br />
    Delete &quot;$TEMP\vcredist_x86.exe&quot;<br />
FunctionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">16th February 2012, 19:55</div></div><div class="posttext">No language macros?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kiran654</div><div class="date">18th February 2012, 14:54</div></div><div class="posttext">I have created my first installer and need to add a new page before the FINISH page. Objective is to ask for directory location where a specific file(exe file of another application) is located. Based on the location entered, I need to pass this as a parameter to run a program. I am new to NSIS and having hard time creating a new page by myself. Here is the code I am using:<br />
<br />
<br />
; Script generated by the HM NIS Edit Script Wizard.<br />
<br />
; HM NIS Edit Wizard helper defines<br />
!define PRODUCT_NAME &quot;myfirstapp&quot;<br />
!define PRODUCT_VERSION &quot;1.0&quot;<br />
!define PRODUCT_PUBLISHER &quot;Company XYZ&quot;<br />
!define PRODUCT_WEB_SITE &quot;http://www.companyxyz.com&quot;<br />
!define PRODUCT_UNINST_KEY &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}&quot;<br />
!define PRODUCT_UNINST_ROOT_KEY &quot;HKLM&quot;<br />
<br />
; MUI 1.67 compatible ------<br />
!include &quot;MUI.nsh&quot;<br />
<br />
; MUI Settings<br />
!define MUI_ABORTWARNING<br />
!define MUI_ICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-install.ico&quot;<br />
!define MUI_UNICON &quot;${NSISDIR}\Contrib\Graphics\Icons\modern-uninstall.ico&quot;<br />
<br />
; Welcome page<br />
!insertmacro MUI_PAGE_WELCOME<br />
; License page<br />
!define MUI_LICENSEPAGE_RADIOBUTTONS<br />
!insertmacro MUI_PAGE_LICENSE &quot;Software_License.txt&quot;<br />
; Directory page<br />
!insertmacro MUI_PAGE_DIRECTORY<br />
; Instfiles page<br />
!insertmacro MUI_PAGE_INSTFILES<br />
; Finish page<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
; Uninstaller pages<br />
!insertmacro MUI_UNPAGE_INSTFILES<br />
<br />
; Language files<br />
!insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
; MUI end ------<br />
<br />
Name &quot;${PRODUCT_NAME} ${PRODUCT_VERSION}&quot;<br />
OutFile &quot;Setup.exe&quot;<br />
InstallDir &quot;$PROGRAMFILES\myfirstapp&quot;<br />
ShowInstDetails show<br />
ShowUnInstDetails show<br />
<br />
Section &quot;MainSection&quot; SEC01<br />
  SetOutPath &quot;$INSTDIR\config&quot;<br />
  SetOverwrite try<br />
  File &quot;config\firstfile.xsl&quot;<br />
  File &quot;config\second.xsl&quot;<br />
  File &quot;config\fav.jpg&quot;<br />
  File &quot;config\favicon.ico&quot;<br />
  SetOutPath &quot;$INSTDIR\config\fonts\fonts&quot;<br />
  File &quot;config\fonts\fonts\CALIBRI.TTF&quot;<br />
  File &quot;config\fonts\fonts\CALIBRI.xml&quot;<br />
  File &quot;config\fonts\fonts\CALIBRIB.TTF&quot;<br />
  File &quot;config\fonts\fonts\CALIBRIB.xml&quot;<br />
  File &quot;config\fonts\fonts\CALIBRII.TTF&quot;<br />
  File &quot;config\fonts\fonts\CALIBRII.xml&quot;<br />
  File &quot;config\fonts\fonts\CALIBRIZ.TTF&quot;<br />
  File &quot;config\fonts\fonts\CALIBRIZ.xml&quot;<br />
  File &quot;config\fonts\fonts\times.ttf&quot;<br />
  File &quot;config\fonts\fonts\times.xml&quot;<br />
  File &quot;config\fonts\fonts\timesbd.ttf&quot;<br />
  File &quot;config\fonts\fonts\timesbd.xml&quot;<br />
  File &quot;config\fonts\fonts\timesbi.ttf&quot;<br />
  File &quot;config\fonts\fonts\timesbi.xml&quot;<br />
  File &quot;config\fonts\fonts\timesi.ttf&quot;<br />
  File &quot;config\fonts\fonts\timesi.xml&quot;<br />
  SetOutPath &quot;$INSTDIR\config&quot;<br />
  File &quot;config\helper.xml&quot;<br />
    CreateDirectory &quot;$SMPROGRAMS\myfirstapp&quot;<br />
  CreateShortCut &quot;$SMPROGRAMS\myfirstapp\Help.lnk&quot;   SetOutPath &quot;$INSTDIR&quot;<br />
  File &quot;myfirstapp.jar&quot;<br />
  CreateShortCut &quot;$DESKTOP\myfirstapp.lnk&quot; &quot;$INSTDIR\myfirstapp.jar&quot; &quot; &quot; &quot;$INSTDIR\config\favicon.ico&quot;<br />
  File &quot;Software_License.txt&quot;<br />
SectionEnd<br />
<br />
Section -AdditionalIcons<br />
  CreateShortCut &quot;$SMPROGRAMS\myfirstapp\Uninstall.lnk&quot; &quot;$INSTDIR\uninst.exe&quot;<br />
SectionEnd<br />
<br />
Section -Post<br />
  WriteUninstaller &quot;$INSTDIR\uninst.exe&quot;<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayName&quot; &quot;$(^Name)&quot;<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;UninstallString&quot; &quot;$INSTDIR\uninst.exe&quot;<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;DisplayVersion&quot; &quot;${PRODUCT_VERSION}&quot;<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;URLInfoAbout&quot; &quot;${PRODUCT_WEB_SITE}&quot;<br />
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot; &quot;Publisher&quot; &quot;${PRODUCT_PUBLISHER}&quot;<br />
SectionEnd<br />
<br />
<br />
Function un.onUninstSuccess<br />
  HideWindow<br />
  MessageBox MB_ICONINFORMATION|MB_OK &quot;$(^Name) was successfully removed from your computer.&quot;<br />
FunctionEnd<br />
<br />
Function un.onInit<br />
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 &quot;Are you sure you want to completely remove $(^Name) and all of its components?&quot; IDYES +2<br />
  Abort<br />
FunctionEnd<br />
<br />
Section Uninstall<br />
  Delete &quot;$INSTDIR\uninst.exe&quot;  RMDir &quot;$INSTDIR&quot;<br />
<br />
  DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} &quot;${PRODUCT_UNINST_KEY}&quot;<br />
  SetAutoClose true<br />
SectionEnd</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">19th February 2012, 03:01</div></div><div class="posttext">How is this question related to the original post?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kiran654</div><div class="date">19th February 2012, 06:20</div></div><div class="posttext">Sorry, i am new to this forum and could not find link to start new thread. Instead I saw this thread is related to custom page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Liero</div><div class="date">20th February 2012, 09:44</div></div><div class="posttext">@Anders:<br />
how languages macros are related to the header text?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">MSG</div><div class="date">20th February 2012, 10:12</div></div><div class="posttext">When using MUI, you must include at least one language.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">installer32</div><div class="date">14th September 2012, 13:35</div></div><div class="posttext">@Liero<br />
<br />
Use this macro:<br />
  !insertmacro  MUI_HEADER_TEXT_PAGE &quot;Text&quot; &quot;Subtext&quot;</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>