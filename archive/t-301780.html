<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" nsdialogs DropList Problem when popping variable, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  nsdialogs DropList Problem when popping variable NSIS Discussion" />
	
	<title> nsdialogs DropList Problem when popping variable [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  nsdialogs DropList Problem when popping variable</div>
<hr />
<div class="pda"><a href="t-301780.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=301780">nsdialogs DropList Problem when popping variable</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">xbarns</div><div class="date">6th January 2009, 22:23</div></div><div class="posttext">Hello all, <br />
<br />
i have come across a problem which i cannot explain since it works in another script, i have the following demo script <br />
<br />
<br />
!include &quot;MUI2.nsh&quot;<br />
<br />
Name TestSetup<br />
OutFile TestSetup.exe<br />
<br />
XPStyle on<br />
<br />
    Page custom GetInstallationType ;LeaveGetInstallationType<br />
<br />
Var /GLobal Dialog<br />
Section Test<br />
<br />
SectionEnd<br />
<br />
Function .onInit<br />
        InitPluginsDir<br />
FunctionEnd<br />
<br />
Function GetInstallationType<br />
<br />
        !insertmacro MUI_HEADER_TEXT &quot;$(GetInstallationType_Header)&quot; &quot;$(GetInstallationType_SubHeader)&quot;    <br />
        <br />
        nsDialogs::Create /NOUNLOAD 1018<br />
        Pop $Dialog<br />
        <br />
        ${If} $Dialog == error<br />
            Abort<br />
        ${EndIf}<br />
        <br />
        ${NSD_CreateGroupBox} 0 0 100% 100 GroupBox<br />
        Pop $0<br />
        <br />
        ${NSD_CreateLabel} 10 20 95% 30 Description<br />
        ;Pop $0<br />
        <br />
        <br />
        ${NSD_CreateDropList} 10 60 200 30<br />
        Var /Global GetInstallationType_DropListInstallType<br />
        Pop $GetInstallationType_DropListInstallType<br />
        <br />
        ${NSD_CB_AddString} $GetInstallationType_DropListInstallType one<br />
        ${NSD_CB_AddString} $GetInstallationType_DropListInstallType two<br />
        ${NSD_CB_AddString} $GetInstallationType_DropListInstallType three<br />
        <br />
        ${NSD_CB_SelectString} $GetInstallationType_DropListInstallType two<br />
        <br />
        nsDialogs::Show<br />
<br />
FunctionEnd<br />
<br />
<br />
if you look closely i have remarked the Pop $0 after the line with the ${NSD_CreateLabel}. <br />
<br />
Only then it will show the GroupBox if you enable the Pop command it will not. <br />
<br />
This time its not a problem with Unicode (or not) since it works in neither<br />
<br />
NSIS 2.42<br />
NSIS 2.42 Unicode <br />
NSIS 2.38 Unicode<br />
NSIS 2.37<br />
<br />
Any Ideas?<br />
<br />
Thanks<br />
Regards<br />
Holger</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivan Andreevich</div><div class="date">6th January 2009, 23:15</div></div><div class="posttext">What about changing the order - first create label and then the group box?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xbarns</div><div class="date">7th January 2009, 06:40</div></div><div class="posttext">first create label and then the group box? <br />
<br />
same result i switched it around like this <br />
<br />
        ${NSD_CreateLabel} 10 20 95% 30 Description<br />
        Pop $0<br />
        <br />
        ${NSD_CreateGroupBox} 0 0 100% 100 GroupBox<br />
        Pop $0<br />
<br />
<br />
but i have to remark the Pop of the ${NSD_CreateLabel} to make it work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ivan Andreevich</div><div class="date">7th January 2009, 18:21</div></div><div class="posttext">What's in $0 after you do a Pop $0 after ${NSD_CreateLabel}? Is it a valid HWND?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xbarns</div><div class="date">8th January 2009, 07:40</div></div><div class="posttext">Well i get back a 6 digit number (different every time i start the setup), is that a valid $HWND?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">8th January 2009, 10:26</div></div><div class="posttext">although I haven't the foggiest why it would behave the way it does with/without that pop, the problem does appear to get resolved if you pass the droplist creation function a caption, even if empty..<br />
${NSD_CreateDropList} 10 60 200 30 &quot;&quot;<br />
..perhaps it is always 'required'?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">xbarns</div><div class="date">8th January 2009, 12:54</div></div><div class="posttext">AAAARRRGGHHHHH <br />
<br />
*imagine here sound of forehead hitting a tabletop*<br />
<br />
<br />
<br />
Thanks a lot!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">8th January 2009, 13:21</div></div><div class="posttext">well, don't hit the tabletop yet.. like I said, I'm not sure why it behaves the way it does without the caption.. and to add to that, if you specify a non-empty caption... you still don't actually -see- a caption, which to me would imply it doesn't have a caption.. so why would you have to specify one?<br />
<br />
*eyes the nsDialogs documentation and comes up empty*<br />
<br />
Anyway.. as long as it's resolved :)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>