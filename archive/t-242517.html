<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Add User Without non-stock Plugin, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Add User Without non-stock Plugin NSIS Discussion" />
	
	<title> Add User Without non-stock Plugin [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Add User Without non-stock Plugin</div>
<hr />
<div class="pda"><a href="t-242517.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=242517">Add User Without non-stock Plugin</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ffletch2</div><div class="date">3rd April 2006, 20:26</div></div><div class="posttext">Anyone know of a way to add an OS user (assume 2k or xp) without using a &quot;non-stock&quot; plugin (i.e. a plugin that doesn't come with the default distribution)?  Seems like there would be something I could use with the system plugin but I can't find anything in MSDN.<br />
<br />
TIA for any ideas.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd April 2006, 20:36</div></div><div class="posttext">You could take a look at the source code of one of the plug-ins that do allow creating users and implement that code with the System plug-in. A quick MSDN search turned up NetUserAdd.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ffletch2</div><div class="date">3rd April 2006, 20:54</div></div><div class="posttext">This looks promising - thanks.<br />
<br />
The reason I'm asking about this is that I want to keep our overall build process to a minimum.  I don't want to have to worry about a version of a plugin not working with a future version of NSIS.  Not to mention that I don't want to have to worry about tracking the version of something other than NSIS.<br />
<br />
Right now I have it such that I just say grab the most recent version of NSIS and click the build button.<br />
<br />
For this reason I have generally avoided &quot;non-stock&quot; plugins.  Anyone have any comments on how to best handle these type of issues?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">3rd April 2006, 20:59</div></div><div class="posttext">I usually add the plug-ins to the source control along with the source code. This, however, mostly solves the problem of finding the right version of the plug-in and not having it work with every version of NSIS. But backwards compatibility is very important in NSIS and the user management plug-ins are usually simple and don't depend on anything internal, so they should not suddenly stop working. If they do, it'll probably be a bug with NSIS.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ffletch2</div><div class="date">3rd April 2006, 21:57</div></div><div class="posttext">That makes sense.  There are bugs in NSIS?  ;)<br />
<br />
Thinking this the original problem through, it seems like this would be somewhat easy to just call an external program or script to do this (like something that just says uses the &quot;net&quot; command) as referenced in this post (http://forums.winamp.com/showthread.php?postid=1659094#post1659094).<br />
<br />
Hmm, looks like I have some trial an error ahead of me....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">4th April 2006, 02:39</div></div><div class="posttext">This code works just fine on XP. I have used it several times.<br />
outfile &quot;testuser.exe&quot;<br />
name &quot;accounts&quot;<br />
<br />
section -<br />
nsexec::exec 'net user &quot;test_user&quot; &quot;&quot; /add'<br />
nsexec::exec 'net localgroup &quot;Power Users&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Users&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Guests&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;HelpServicesGroup&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Network Configuration Operators&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Remote Desktop Users&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Replicator&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Backup Operators&quot; &quot;test_user&quot; /delete'<br />
nsexec::exec 'net localgroup &quot;Administrators&quot; &quot;test_user&quot; /add'<br />
nsexec::exec 'net accounts /maxpwage:unlimited'<br />
sectionend <br />
Though, the users who they run the installer must be administrators.<br />
The account behaves normally in control panel once has been made.<br />
I use it always in a small silent exe by adding it to HKLM..../RunOnce, setting the rebootflag etc, so once the machine is rebooted the account is ready for use.<br />
*Originally used in (full) unattended xp installations under the setup paramaters section, (may be used in cmdlines as well) to create the first account.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>