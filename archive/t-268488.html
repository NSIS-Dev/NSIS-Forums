<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" How to reset the password field on a page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  How to reset the password field on a page NSIS Discussion" />
	
	<title> How to reset the password field on a page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  How to reset the password field on a page</div>
<hr />
<div class="pda"><a href="t-268488.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=268488">How to reset the password field on a page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">darora2</div><div class="date">27th March 2007, 19:56</div></div><div class="posttext">Hi,<br />
I am trying to take the installation name and password as input on an NSIS page. But when the user enters an invalid installation name, I want to reset the password field to blank after displaying the warning message.<br />
I have tried: <br />
1. DeleteINIStr with FlushINI<br />
2. ReadINIStr/GetDlgItem with SendMessage<br />
<br />
but nothing seems to reset that field on the page to blank.<br />
<br />
Any help would be greatly appreciated.<br />
<br />
Thanks<br />
DeEpAk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th March 2007, 21:00</div></div><div class="posttext">Option 2 should work. What's the exact code you've used?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">darora2</div><div class="date">27th March 2007, 21:40</div></div><div class="posttext">ReadINIStr $1 &quot;$PLUGINSDIR\pick_installation.ini&quot; &quot;Field 3&quot; &quot;HWND&quot;<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:&quot;<br />
<br />
I also tried using GetDlgItem and but dont know how to get the item_id for this password field. If I use GetDlgItem with Item_ids 1,2,3,etc. I can blank out the text for 'next', 'cancel' and 'back' buttons.<br />
<br />
Thanks<br />
DeEpAk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th March 2007, 21:54</div></div><div class="posttext">That should work assuming it's placed in the leave function and that Abort is called right after it. Attach a complete minimal example to give it some context.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">darora2</div><div class="date">27th March 2007, 22:10</div></div><div class="posttext">Sure,<br />
Here is the page declaration:<br />
Page custom PickInstallation validateinstallation<br />
<br />
now the functions:<br />
Function PickInstallation<br />
 !insertmacro LogFunctionBegin &quot;PickInstallation&quot;<br />
 !insertmacro MUI_HEADER_TEXT &quot;Application Configuration&quot; &quot;Choose a unique installation name.&quot;<br />
 !insertmacro MUI_INSTALLOPTIONS_DISPLAY &quot;pick_installation.ini&quot;<br />
 !insertmacro LogFunctionEnd &quot;PickInstallation&quot;<br />
FunctionEnd<br />
<br />
<br />
Function ValidateInstallation<br />
 !insertmacro LogFunctionBegin &quot;ValidateInstallation&quot;<br />
 IfSilent +3 +1<br />
  ReadINIStr $INSTALLATION &quot;$PLUGINSDIR\pick_installation.ini&quot; &quot;Field 1&quot; &quot;State&quot;<br />
  ${LogText} &quot;USER INPUT-&gt; Installation name: $INSTALLATION&quot;<br />
  StrCmp $INSTALLATION &quot;&quot; 0 CONTINUE1<br />
  ReadINIStr $1 &quot;$PLUGINSDIR\pick_installation.ini&quot; &quot;Field 3&quot; &quot;HWND&quot;<br />
  SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:&quot;<br />
  !insertmacro LogAndAbort  &quot;Please enter a unique installation name&quot;<br />
CONTINUE1:<br />
................<br />
................<br />
<br />
And the defition for LogAndAbort:<br />
<br />
!macro LogAndAbort message<br />
  ${LogText} &quot;Error : ${message}&quot;<br />
  IfSilent +2 +1<br />
  MessageBox MB_OK|MB_ICONEXCLAMATION &quot;${message}&quot;<br />
  Abort<br />
!macroend<br />
<br />
<br />
Thanks<br />
DeEpAk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th March 2007, 22:16</div></div><div class="posttext">Did you include WinMessages.nsh? What about the INI file? Are you sure the right field is no. 3?<br />
<br />
BTW, ValidateInstallation will never be called for silent installers, you can skip IfSilent. In fact, no page functions are called for silent installers. The jump is also malformed because +3 will not jump over $[LogText} which is a macro insertion that can add more than one command.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">darora2</div><div class="date">27th March 2007, 23:50</div></div><div class="posttext">Yes Kichik,<br />
I did include WinMessages.nsh and of course, the INI file as all other fields displayed on the page are picked from this INI itself.<br />
Btw, can you help me know the item_id of this field. Its type is &quot;PASSWORD&quot;.<br />
<br />
DeEpAk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">27th March 2007, 23:53</div></div><div class="posttext">The item id is 1200 + field number - 1 as documented in the InstallOptions readme.<br />
<br />
As for the problem itself, attach a complete minimal example reproducing it. I can't see the problem with the current level of details. It all seems like it should work.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">darora2</div><div class="date">28th March 2007, 00:24</div></div><div class="posttext">Hey,<br />
That works.<br />
I used:<br />
FindWindow $0 &quot;#32770&quot; &quot;&quot; $HWNDPARENT<br />
GetDlgItem $1 $0 1202<br />
SendMessage $1 ${WM_SETTEXT} 0 &quot;STR:&quot;<br />
<br />
So looks like ReadINIStr wasnt doing the job that GetDlgItem did.<br />
<br />
Thanks a ton Kichki :-)<br />
DeEpAk</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>