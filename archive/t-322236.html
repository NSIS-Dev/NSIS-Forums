<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" RichEdit20A control fails to load the License file..., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  RichEdit20A control fails to load the License file... NSIS Discussion" />
	
	<title> RichEdit20A control fails to load the License file... [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  RichEdit20A control fails to load the License file...</div>
<hr />
<div class="pda"><a href="t-322236.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=322236">RichEdit20A control fails to load the License file...</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">manasi1128</div><div class="date">7th September 2010, 05:27</div></div><div class="posttext">Hi guys....<br />
<br />
I hav an installer script which has 2 custom dialogs.......both of dem have a RichEdit20A each and are suppose to load individual files.....but the problem is the first dialog loads the file properly at first....after clicking continue on the first dialog the second dialog appears but it fails to load the file in the RichEdit20A control......after clicking on the back button of the second dialog even the first dialog fails to load the file....<br />
.....any help wud be appreciated.... following is the code snippet from my script...<br />
<br />
Page custom nsDialogsDirectory-----&gt;1st dialog<br />
Page custom nsDialogsLicense---------&gt;2nd dialog<br />
PageEx custom<br />
PageCallbacks PreIntouch<br />
PageExEnd<br />
.....................<br />
.......................<br />
<br />
Function nsDialogsDirectory<br />
	GetDlgItem $0 $HWNDPARENT 1<br />
	SendMessage $0 ${WM_SETTEXT} &quot;0&quot; &quot;STR: Continue&quot;<br />
	<br />
              ........................<br />
              .......................<br />
<br />
	GetDlgItem $0 $HWNDPARENT 1<br />
	EnableWindow $0 0<br />
<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
	Pop $DIALOG<br />
	.........................<br />
              ..........................<br />
              .........................<br />
		<br />
	Call ShowPrivacyPolicy<br />
<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
Function nsDialogsLicense<br />
<br />
	GetDlgItem $0 $HWNDPARENT 1<br />
	SendMessage $0 ${WM_SETTEXT} &quot;0&quot; &quot;STR: I agree&quot;<br />
<br />
	;GetDlgItem $0 $HWNDPARENT 1<br />
      ;  EnableWindow $0 1<br />
<br />
<br />
	nsDialogs::Create /NOUNLOAD 1018<br />
<br />
	Call ShowLicense<br />
<br />
	nsDialogs::Show<br />
FunctionEnd<br />
<br />
<br />
Function ShowLicense<br />
<br />
      ;  GetDlgItem $0 $HWNDPARENT 1<br />
<br />
;	EnableWindow $0 1<br />
<br />
	File /oname=$PLUGINSDIR\amex-license.rtf &quot;..\cpp\bin\amex-license.rtf&quot;<br />
<br />
	nsDialogs::CreateControl /NOUNLOAD &quot;RichEdit20A&quot; ${ES_READONLY}|${WS_VISIBLE}|${WS_CHILD}|${WS_TABSTOP}|${WS_VSCROLL}|${ES_MULTILINE}|${ES_WANTRETURN} ${WS_EX_STATICEDGE} 0 170 100% 79u ''<br />
	Pop $LICENSE<br />
<br />
	FileOpen $4 &quot;$PLUGINSDIR\amex-license.rtf&quot; r<br />
       <br />
	StrCpy $0 $LICENSE<br />
<br />
	SendMessage $LICENSE ${EM_EXLIMITTEXT} 0 0x7fffffff<br />
	; set EM_AUTOURLDETECT to detect URL automatically<br />
	;Do not detect the links<br />
	;SendMessage $LICENSE 1115 1 0<br />
<br />
	System::Get /NoUnload &quot;(i, i .R0, i .R1, i .R2) iss&quot;<br />
	Pop $2<br />
	System::Call /NoUnload &quot;*(i 0, i 0, k r2) i .r3&quot;<br />
<br />
	System::Call /NoUnload &quot;user32::SendMessage(i r0, i ${EM_STREAMIN}, i ${SF_RTF}, i r3) i.s&quot;<br />
<br />
	loop:<br />
	Pop $0<br />
	StrCmp $0 &quot;callback1&quot; 0 done<br />
	System::Call /NoUnload &quot;kernel32::ReadFile(i $4, i $R0, i $R1, i $R2, i 0)&quot;<br />
<br />
	Push 0 # callback's return value<br />
	System::Call /NoUnload &quot;$2&quot;<br />
	goto loop<br />
	done:<br />
	System::Free $2<br />
	System::Free $3<br />
	FileClose $4<br />
FunctionEnd<br />
<br />
Showpriavcypolicy function is same as ShowLicense........am i doin sumthing wrong here?.....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">7th September 2010, 06:28</div></div><div class="posttext">Might want to re-read the original thread, as that issue was resolved there - and a plugin is also available.<br />
http://forums.winamp.com/showthread.php?t=288129 - RichEdit with nsDialogs?<br />
http://forums.winamp.com/showpost.php?p=2524633&amp;postcount=28</div></div><hr />


<div class="post"><div class="posttop"><div class="username">manasi1128</div><div class="date">7th September 2010, 07:33</div></div><div class="posttext">thnx dude......dat LoadRTF.nsh solved my problem.....!!!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>