<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Disable &quot;Back&quot; button in finish page, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Disable &quot;Back&quot; button in finish page NSIS Discussion" />
	
	<title> Disable &quot;Back&quot; button in finish page [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Disable &quot;Back&quot; button in finish page</div>
<hr />
<div class="pda"><a href="t-251051.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=251051">Disable &quot;Back&quot; button in finish page</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">13th July 2006, 22:37</div></div><div class="posttext">Hey guys,<br />
<br />
First off I'd like to thank the community for helping me out with this installer. I'm almost done, but I found one problem with my installer.<br />
<br />
Just before the &quot;Finish&quot; page is displayed prompting the user to restart, I call a function that does some stuff. I only want that function to be called once, but when the user sees the finish page they have the option of pressing the &quot;Back&quot; button, causing the code to be executed again. Normally I would use a combination of GetDlgItem and EnableWindow to disable it, but I don't know how to have this called once the finish page is loaded. I'm using MUI, and this is what I have that's not working:<br />
<br />
<br />
!define MUI_WELCOMEFINISHPAGE_CUSTOMFUNCTION_INIT DisableBackButton<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
. . .<br />
<br />
Function DisableBackButton<br />
     GetDlgItem $BACK $HWNDPARENT 2<br />
     EnableWindow $BACK 0<br />
FunctionEnd<br />
<br />
<br />
I have a couple work-arounds I'm considering.<br />
1) Rewrite the Finish Page using InstallOptions, and disabling the back button<br />
2) Make an empty function that's called just before the Finish Page. With any luck the back button will point to this empty function and it will automatically redirect to the finish page. I will test this option and post updates.<br />
<br />
I'm sure there's some simple solution to the problem. Any help is greatly appreciated!<br />
<br />
Thanks,<br />
Joe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">13th July 2006, 23:49</div></div><div class="posttext">Why not put you code in an invisible install Section which is after all your other Sections?<br />
<br />
Section<br />
...<br />
SectionEnd<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">14th July 2006, 15:08</div></div><div class="posttext">I suppose normally this would work, but I have a custom InstallOptions page displaying right after my MUI_PAGE_INSTFILES. The information that's taken from this dialogue is used in my function, so I can't really do it in a section.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th July 2006, 15:59</div></div><div class="posttext">I see.<br />
<br />
This is what you want then:<br />
!define MUI_PAGE_CUSTOMFUNCTION_SHOW DisableBackButton<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">14th July 2006, 17:49</div></div><div class="posttext">Thanks for the quick replies. I tested !define MUI_PAGE_CUSTOMFUNCTION_SHOW DisableBackButton and the back button was still enabled. Any other ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th July 2006, 17:54</div></div><div class="posttext">That should work, but I guess InstallOptions is re-enabling it again. In which case, disable the button through the INI file itself:<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE DisableBackButton<br />
!insertmacro MUI_PAGE_FINISH<br />
<br />
Function DisableBackButton<br />
 !insertmacro MUI_INSTALLOPTIONS_WRITE ioSpecial.ini Settings BackEnabled 0<br />
FunctionEnd<br />
<br />
Note: Using PRE instead of SHOW.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">14th July 2006, 18:06</div></div><div class="posttext">I also tried my blank function idea, with no luck. The &quot;back&quot; button just pointed to my function that does stuff, not the blank one. I want to find a simpler solution than rewriting the finish page.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">galil</div><div class="date">14th July 2006, 18:06</div></div><div class="posttext">Problem is because Back button ID is &quot;3&quot;, not &quot;2&quot;.<br />
<br />
so use:<br />
     GetDlgItem $BACK $HWNDPARENT 3</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JoeMcC00L</div><div class="date">14th July 2006, 18:19</div></div><div class="posttext">Thank you so much. This is exactly what I needed. Works like a charm. I see the information you gave me in the manual for MUI, I guess I just missread that part. Thank you for your patience with noobs like me :-).<br />
<br />
EDIT: it took me so long to test it, I didn't see the next post about the ID. It was the !define MUI_PAGE_CUSTOMFUNCTION_PRE solution that worked. The ID solution is probably right too, I just haven't tested it yet. Thanks for the reply though.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">14th July 2006, 18:49</div></div><div class="posttext">I assumed your code was right, but it is in fact 3 and not 2.<br />
Both codes should work fine now though.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>