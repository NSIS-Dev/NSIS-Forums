<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" A better tutorial for extract, install, delete, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  A better tutorial for extract, install, delete NSIS Discussion" />
	
	<title> A better tutorial for extract, install, delete [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  A better tutorial for extract, install, delete</div>
<hr />
<div class="pda"><a href="t-243523.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=243523">A better tutorial for extract, install, delete</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 07:12</div></div><div class="posttext">hi pros,<br />
<br />
I am trying to understand most of the stuff provided in here but then I just cannot get it as many of it are refering to different things<br />
<br />
Here's my questions, will it be possible to provide a tutorial<br />
<br />
1. I have an installer.exe<br />
2. I have a file.exe<br />
3. I have a registry.reg file<br />
<br />
How to make<br />
1. Create an installer.exe which will extract it to temp<br />
2. During installation, installer.exe will run and file.exe will run.<br />
3. When installation completes, registry.reg in temp folder will register.<br />
4. Whatever is left in the temp folder will be completely deleted without a single trance, after the finish page.<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2006, 11:29</div></div><div class="posttext">Like all of us have done, you should read the documentation provided. It has everything you need. You just need to use a bit more brain power and work out how to do it.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 11:39</div></div><div class="posttext">Hi Afrow UK<br />
<br />
1.<br />
I actually found something for the .exe extracting but then in this topic here (http://forums.winamp.com/showthread.php?threadid=239371&amp;highlight=install+temp)<br />
<br />
Will this ever happens ? How will I solve it ?<br />
<br />
2.<br />
How can I make a registry.reg to enter into the user registry sliently ?? (codes)<br />
<br />
thanks for your reply is appreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">15th April 2006, 12:20</div></div><div class="posttext">1. If ExecWait doesn't wait then that'd mean the installer being executed passes execution onto another process and then quits. In other words, you need to pass it an extra parameter (say /sms for example) to make it wait.<br />
<br />
2. Either execute regedit to do it with the registry.reg file path as the parameter (which will bring up a confirmation message box), or translate the registry.reg file into WriteRegStr instructions.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 15:05</div></div><div class="posttext">what do you mean by /sms is it a valid codec or you trying to say to add others please further elaborate</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th April 2006, 15:12</div></div><div class="posttext">/sms is a switch used in (older) IShield installations. if you try to execute one of those IShield installations from cmd without /sms you end up with nothing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 16:35</div></div><div class="posttext">then how do I deal with completely deleting my files after installation that are extracted to my temp</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 18:40</div></div><div class="posttext">hi pros<br />
<br />
I done everything is fine but I have some questions here.<br />
<br />
1.Why is it that I have some files, like installoptions.dll,modern-wizard,iospecial.ini in the temp folder during installation ??? <br />
<br />
1.1 Are they supposed to be there or not to be there ??<br />
<br />
1.2 Is there a way to prevent these from appearing in temp ?? because I do want people to know the stuff I am using for the installer.<br />
<br />
2. Please look at the section code<br />
<br />
 SetOutPath $TEMP<br />
    SetOverwrite on ( is there any other code beside SetOverwrite ?? Can you tell me in nsis help which page should I refer for more sections addable code.)<br />
<br />
thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th April 2006, 19:14</div></div><div class="posttext">1. initpluginsdir<br />
2. file /oname=$PLUGINSDIR\myfile.exe 'myfile.exe'<br />
<br />
3. READ THE MANUAL :-)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th April 2006, 19:49</div></div><div class="posttext">function .onInit<br />
# along with anything else you have to do on init<br />
initpluginsdir<br />
<br />
functionend<br />
<br />
<br />
<br />
section -<br />
# suppose you're ready to do the job<br />
<br />
file /oname=$PLUGINSDIR\file1.exe &quot;my local dir\file1.exe&quot;<br />
clearerrors # or use a return var to check for errors<br />
execwait '$PLUGINSDIR\file1.exe'<br />
iferrors # executions failed do something<br />
# execution would fail also but without errors<br />
# if the executed prog requires params e.g. /sms<br />
<br />
file /oname=$PLUGINSDIR\file2.exe &quot;my local dir\file2.exe&quot;<br />
clearerrors # or use a return var to check for errors<br />
execwait '$PLUGINSDIR\file2.exe'<br />
iferrors # executions failed do something<br />
# execution would fail also but without errors<br />
# if the executed prog requires params e.g. /sms<br />
<br />
# this is not recommended, instead try to convert the registry<br />
# entries to NSIS script. Search forum for a tool reg2nsis<br />
# this tool could help you under some conditions, read readme.<br />
file /oname=$PLUGINSDIR\registry.reg &quot;my local dir\registry.reg&quot;<br />
clearerrors # or use a return var to check for errors<br />
execwait 'regedit.exe /s $PLUGINSDIR\registry.reg'<br />
iferrors # write to registry failed do something<br />
<br />
sectionend<br />
<br />
Function .onInstSuccess<br />
# in case you did a convertion from registry.reg to nsh<br />
!include 'registry.nsh'<br />
functionend</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 20:08</div></div><div class="posttext">Thanks alot redwine, I think its ok with the temp<br />
<br />
thanks everyone for giving me a bit hints, manage to compile all the knowledge with full details supports. thanks again</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">15th April 2006, 20:22</div></div><div class="posttext">hi<br />
<br />
1 question<br />
<br />
4.9.3.13 RegDLL<br />
dllfile [entrypoint_name]<br />
Loads the specified DLL and calls DllRegisterServer (or entrypoint_name if specified). The error flag is set if an error occurs (i.e. it can't load the DLL, initialize OLE, find the entry point, or the function returned anything other than ERROR_SUCCESS (=0)).<br />
<br />
Use SetOutPath to set the current directory for DLLs that depend on other DLLs that are now in the path or in the Windows directory. For example, if foo.dll depends on bar.dll which is located in $INSTDIR use:<br />
<br />
 SetOutPath $INSTDIR<br />
 RegDLL $INSTDIR\foo.dll<br />
<br />
Does this register, ocx and other system files ???<br />
<br />
If NO, please verify which script code I should be using.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Red Wine</div><div class="date">15th April 2006, 22:08</div></div><div class="posttext">Read the manual, here is the answer:<br />
Appendix B: DLL/TLB Library Setup</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">17th April 2006, 14:16</div></div><div class="posttext">hi pros<br />
<br />
yes my greatest fear have arrived<br />
<br />
both ExecWait doesn't wait<br />
<br />
1. beside using /sms<br />
<br />
Is there any other safe way to make it wait till it close and launch the next installer ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">17th April 2006, 15:01</div></div><div class="posttext">Depends what InstallShield version installer it is.<br />
<br />
So does<br />
ExecWait `&quot;$INSTDIR\setup.exe&quot; /sms`<br />
not wait?<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rxs2k5</div><div class="date">17th April 2006, 15:35</div></div><div class="posttext">Afrow UK my computer is a bit weird<br />
<br />
Now execwait obeys the installer,<br />
<br />
both one of my installer made from innosetup, the other made from nsis.<br />
<br />
Now it follows orders<br />
<br />
like<br />
<br />
extracting....1<br />
extracting....2<br />
execloading....1 ( freeze ) [when close]<br />
execloading....2 (freeze) [when close]<br />
delete 1<br />
delete 2<br />
<br />
Its like not a single trace to be found cool.<br />
<br />
Thanks for your reply I have manage to solve the problem, <br />
<br />
Thanks for your plugins<br />
File:ScrollLicense.zip <br />
File:PassDialog.zip</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>