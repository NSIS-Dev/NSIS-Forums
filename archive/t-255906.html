<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Select files to install from a list, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Select files to install from a list NSIS Discussion" />
	
	<title> Select files to install from a list [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Select files to install from a list</div>
<hr />
<div class="pda"><a href="t-255906.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=255906">Select files to install from a list</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">Rockem</div><div class="date">21st September 2006, 09:23</div></div><div class="posttext">Hello all,<br />
<br />
I want to have an installer with files loaded in <br />
so that I would have a list (with checkboxes) and I can check what I want to install and what not...<br />
<br />
so far I created a listbox with the Embeddedlists plugin<br />
and it works fine .. <br />
<br />
my problem is .. how do I load the files to be inside<br />
the installer and dynamicly tell the installer what to copy(install) and what not according to my list <br />
<br />
<br />
I hope my problem is clear<br />
thanx<br />
Eli</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Animaether</div><div class="date">21st September 2006, 13:19</div></div><div class="posttext">To include files in your installer, you can use either &quot;ReserveFile &lt;file&gt;&quot; at the top of your script, or &quot;File &lt;filespec&gt;&quot; in a section or Function - even if you never end up using that section or Function. E.g. a hidden unselected section, or just never call that function.<br />
<br />
As for when to install files or not, check the examples for EmbeddedLists.  I found the following bit in ListView_CheckBoxes.nsi:<br />
<br />
<br />
Function ListViewLeave<br />
 StrCpy $R1 ``        ; Clear checked items list.<br />
 Pop $R0              ; Checked item text.<br />
 StrCmp $R0 /END +3   ; No item checked?<br />
  StrCpy $R1 $R1|$R0<br />
 Goto -3              ; Loop.<br />
; etc.<br />
<br />
<br />
<br />
All this does is create a string with each checked item's name delimited by a &quot;|&quot; character.  You can easily retool this to install files, or not:<br />
<br />
<br />
Function ListViewLeave<br />
 StrCpy $R1 ``        ; Clear checked items list.<br />
 _loop:<br />
 Pop $R0              ; Checked item text.<br />
 StrCmp $R0 /END _end   ; No item checked?<br />
  StrCmp $R0 &quot;filename.ext&quot; 0 +3<br />
    SetOutPath &quot;c:\some\path\&quot;<br />
    File &quot;filespec&quot;<br />
  StrCmp $R0 &quot;anotherfilename.ext&quot; 0 +3<br />
    SetOutPath &quot;c:\some\other\path\&quot;<br />
    File &quot;filespec&quot;<br />
  ; etc.<br />
 Goto _loop           ; Loop.<br />
 _end:<br />
<br />
<br />
Note that this would start installing files as soon as you leave the ListView page.  If you want this done later, then you should retool the original code to put the &quot;|&quot;-delimited in a variable that you'll access from a later page.  You can then use the StrCpy and StrCmp commands to go over that list and do much the same as in the adjusted example above.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rockem</div><div class="date">21st September 2006, 14:52</div></div><div class="posttext">Do I HAVE to specify every file I want to work with ?<br />
can't I pass File a parameter ?<br />
<br />
Its just that the files are dynamicly changing<br />
(thers a script that creates th ini file automaticly)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st September 2006, 15:10</div></div><div class="posttext">Using the File instruction puts the file into your installer executable. If you just want to copy the file from one place to another, use CopyFiles.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rockem</div><div class="date">21st September 2006, 15:27</div></div><div class="posttext">can CopyFile copy from inside the installer ??<br />
<br />
How do I direct it ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st September 2006, 15:53</div></div><div class="posttext">As I've already explained, File puts the file into your installer and extracts it to $OUTDIR.<br />
Use the SetOutPath instruction to set the current output folder.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rockem</div><div class="date">21st September 2006, 16:00</div></div><div class="posttext">ok .. but this is the thing<br />
I need to extract only files that have been selected in the list.<br />
and the file list is dynamic, so I need to put parameter <br />
in File, but I can't <br />
<br />
is there something else that I can do ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Rockem</div><div class="date">21st September 2006, 16:43</div></div><div class="posttext">What I eventualy did is <br />
to extract akk the files to a directory in $TEMP <br />
copy what I need and then delete that directory ..<br />
<br />
if there is a smarter way .. pls share :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">21st September 2006, 17:37</div></div><div class="posttext">You can jump over the File instructions if they aren't in your list. It might be easiest to store your file names in an array using the NSISArray plugin.<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">aryu</div><div class="date">22nd September 2006, 02:41</div></div><div class="posttext">how do I load the files to be inside the installer  according to my list, so that I don't have to change my script every time when the files to be installed changed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">22nd September 2006, 11:57</div></div><div class="posttext">I'm confused now. Surely your list needs to be read at run time? You can't modify which files are in the installer at run time, because the files are placed in the installer at compile time!<br />
All you can do, is include all the files inside the installer, and extract only those required.<br />
<br />
-Stu</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>