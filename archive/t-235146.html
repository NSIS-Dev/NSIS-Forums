<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" readRegSTr not working, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  readRegSTr not working NSIS Discussion" />
	
	<title> readRegSTr not working [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  readRegSTr not working</div>
<hr />
<div class="pda"><a href="t-235146.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=235146">readRegSTr not working</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 12:06</div></div><div class="posttext">Section<br />
	ReadRegStr $W HKLM SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\test UninstallString<br />
	IfErrors 0 +2<br />
	ExecWait '$W /S'<br />
SectionEnd<br />
<br />
is there anything incorrect in this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 12:14</div></div><div class="posttext">cannot compile it<br />
Usage: ReadRegStr $(user_var: output) rootkey subkey entry<br />
   root_key=(HKCR|HKLM|HKCU|HKU|HKCC|HKDD|HKPD|SHCTX)<br />
Error in script &quot;C:\save\nsis-2.12\test.nsi&quot; on line 41 -- aborting creation process</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Takhir</div><div class="date">10th January 2006, 12:20</div></div><div class="posttext">Do you have<br />
Var W<br />
definition?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 12:32</div></div><div class="posttext">i dont have,,<br />
do i need it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comm@nder21</div><div class="date">10th January 2006, 12:33</div></div><div class="posttext">yep, you do.<br />
<br />
Var W<br />
should be placed BEFORE you use $W the first time.<br />
<br />
but you may also just use register variables, like $0.<br />
they are already defined by nsis itself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 12:36</div></div><div class="posttext">ReadRegStr $0 HKLM SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\test UninstallString<br />
	IfErrors 0 +2<br />
	ExecWait '$0 /S'<br />
	SetOutPath &quot;$INSTDIR&quot;<br />
------------------------------------------------------------<br />
<br />
is this ok?<br />
but seems not working very well</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 12:48</div></div><div class="posttext">my installer does not ExecWait '$0 /S'<br />
<br />
the reg entry is exist</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Instructor</div><div class="date">10th January 2006, 13:20</div></div><div class="posttext">ExecWait '&quot;$0&quot; /S'</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Afrow UK</div><div class="date">10th January 2006, 15:17</div></div><div class="posttext">And your IfErrors logic is incorrect.<br />
<br />
IfErrors [jump_if_errors] [jump_if_no_errors]<br />
<br />
So, you are only executing the ExecWait instruction if ReadRegStr fails.<br />
Another problem with your code (unless you have just missed it from your code snippet) is that you are not using ClearErrors before ReadRegStr. Therefore if ReadRegStr was successul and something else before caused an error then your ExecWait instruction will still not be executed.<br />
<br />
<br />
Section<br />
  ClearErrors<br />
  ReadRegStr $0 HKLM SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\test UninstallString<br />
  IfErrors +2<br />
    ExecWait '&quot;$0&quot; /S'<br />
SectionEnd<br />
[/code]<br />
<br />
-Stu</div></div><hr />


<div class="post"><div class="posttop"><div class="username">goab</div><div class="date">10th January 2006, 18:01</div></div><div class="posttext">thanks for the help!</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>