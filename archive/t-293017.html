<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Mulitple installation., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Mulitple installation. NSIS Discussion" />
	
	<title> Mulitple installation. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Mulitple installation.</div>
<hr />
<div class="pda"><a href="t-293017.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=293017">Mulitple installation.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">kdeslauriers</div><div class="date">11th June 2008, 20:26</div></div><div class="posttext">I need to install multiple instances of an application using NSIS.  I have a custom page that obtains information about the install (ie. instance name that defines that install).  The instance name obtained form the screen will be appended to the generic default installation folder (using   STRCPY $INSTDIR &quot;$INSTDIR\$instanceName&quot; ).  <br />
<br />
My question is that I want to define values using !define based on the instance name.  <br />
<br />
Am I able to modify the value (i.e. REGKEY for that instance) that I previously defined prior to the !insertmacro sequence once I have the instance name from the custom page?  If not, is there a work around?<br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Comperio</div><div class="date">12th June 2008, 02:24</div></div><div class="posttext">I'm not quit sure I understand.  :confused:<br />
<br />
!define is used at compile time, which means you can't !define something at runtime based on user input.<br />
 <br />
But you could set one or more variables or turn on/off different sections at runtime to control how each instance is installed.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kdeslauriers</div><div class="date">12th June 2008, 15:10</div></div><div class="posttext">Thank you.  I am new to NSIS and after reading the documentation more closely I realised they were compile time constants.  I was able to work around it by modifying a few variables with STRCPY.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VisualCSharp</div><div class="date">6th November 2008, 17:41</div></div><div class="posttext">I have the exact same requirement. I need our support staff to be able to install a test installation and a production installation of the same package on the same server.<br />
<br />
What variables did you modify? The three things I have figured out that need to be changed are:<br />
<br />
PRODUCT_UNINST_KEY<br />
MUI_STARTMENUPAGE_DEFAULTFOLDER<br />
InstallDir<br />
<br />
I am currently unable to make any of these dynamic, i.e., specified by the user selecting from a radio button list. Two of them are constant !defines and InstallDir can't be executed from within a Function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">VisualCSharp</div><div class="date">11th November 2008, 15:00</div></div><div class="posttext">What I ended up doing to &quot;solve&quot; this problem was injecting tokens into my installer script that my NAnt script replaces at time of continuous integration.<br />
<br />
Something like this:<br />
<br />
!define PRODUCT_NAME &quot;My Product %ENVIRONMENT%&quot;<br />
<br />
where %ENVIRONMENT% is replaced with Test and Prod. The drawback to doing this is I have to effectively build the installer twice. This can be a very time-consuming process for bigger installers.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>