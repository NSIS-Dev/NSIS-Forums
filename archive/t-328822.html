<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Custom License Page - big license file, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Custom License Page - big license file NSIS Discussion" />
	
	<title> Custom License Page - big license file [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Custom License Page - big license file</div>
<hr />
<div class="pda"><a href="t-328822.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=328822">Custom License Page - big license file</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">HandShake</div><div class="date">23rd March 2011, 18:16</div></div><div class="posttext">Hello,<br />
<br />
I am new in NSIS.<br />
<br />
I have to add a &quot;Save License File&quot; button on (a custom) license page.<br />
<br />
My problem is that if the license.txt is bigger than 1024 B, the file is displayed trimmed.<br />
<br />
        FileOpen $0 &quot;$INSTDIR/License.txt&quot; r <br />
		 StrCpy $file &quot;&quot; ; initialize! <br />
		 loop: <br />
			  FileRead $0 $2 <br />
			  IfErrors done <br />
			  StrCpy $file &quot;$file$2&quot; <br />
			  Goto loop <br />
		 done: <br />
			  FileClose $0 <br />
	!insertmacro CHANGETEXTFIELD &quot;${DIALOG1}&quot; &quot;${CMD_FIELD_2}&quot; $file<br />
  !macro CHANGETEXTFIELD FILE ELEMENT VALUE<br />
  Push $R0 ; holds value<br />
  !insertmacro MUI_INSTALLOPTIONS_WRITE ${VALUE} &quot;${FILE}&quot; &quot;${ELEMENT}&quot; &quot;State&quot;<br />
  !insertmacro MUI_INSTALLOPTIONS_READ $R0 &quot;${FILE}&quot; &quot;${ELEMENT}&quot; &quot;HWND&quot;<br />
  SendMessage $R0 ${WM_SETTEXT} 0 &quot;STR:${VALUE}&quot;<br />
  Pop $R0<br />
  !macroend<br />
<br />
<br />
I've tried to add a custom button on the a default License page. But if I add a custom button over the existing controls, the &quot;old&quot; controls disappears.<br />
<br />
!define MUI_PAGE_CUSTOMFUNCTION_PRE lic_pre<br />
!insertmacro MUI_PAGE_LICENSE &quot;License.txt&quot;<br />
Function lic_pre<br />
  !insertmacro MUI_HEADER_TEXT &quot;Title&quot; &quot;Subtitle&quot;  <br />
   nsDialogs::Create 1018 <br />
     	${NSD_CreateCheckbox} 60% 90% 50% 6% &quot;Show button below&quot;<br />
		Pop $hwnd<br />
		${NSD_OnClick} $hwnd EnDisableButton<br />
	${NSD_CreateButton} 25% 25% 50% 50% &quot;Hello World&quot;<br />
		Pop $button<br />
		ShowWindow $button ${SW_HIDE} # start out hidden<br />
   nsDialogs::Show <br />
FunctionEnd<br />
<br />
Can you please give me a hint ...? <br />
I must Add a new button...<br />
10x.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Anders</div><div class="date">24th March 2011, 10:05</div></div><div class="posttext">Search the forum for EM_STREAMIN or something like that and you should find a thread about reading large license files</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>