<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" I did something bad., media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  I did something bad. NSIS Discussion" />
	
	<title> I did something bad. [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  I did something bad.</div>
<hr />
<div class="pda"><a href="t-138122.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=138122">I did something bad.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">transnote</div><div class="date">6th June 2003, 22:53</div></div><div class="posttext">Sigh....<br />
<br />
I used NSIS to create an installer, during the installation certain registry keys and values are removed.  Out of about 1000 cases, 1 of the customers blue screened on reboot.  The registry entries removed were all under HKLM/Software and HKCU/Software, removal of the entries themselves could not explain that bluescreen<br />
<br />
a) This is windows and I know these things happen but I may not get a chance to use this installer anymore<br />
<br />
b) The error was 'page fault in non paged area' on Win2K...<br />
<br />
Has anyone experienced anything similar in using NSIS to remove registry entries?  Last known good config did allow the system to boot.<br />
<br />
thanks...<br />
- pat<br />
<br />
PS I'm not slamming the installer in any way, this is the coolest thing since... poptarts! :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Joel</div><div class="date">6th June 2003, 22:58</div></div><div class="posttext">Attach the script dude... :weird:<br />
to see what's up...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">transnote</div><div class="date">6th June 2003, 23:10</div></div><div class="posttext">I would have but it's very simple... <br />
<br />
A few lines of Delete /REBOOTOK which weren't at fault because loading a registry backup fixed the issue, so it wasn't a file being removed...<br />
<br />
And a few lines of DeleteRegKey HKLM/DeleteRegValue HKLM which we did manually on that machine after we restored registry and did not cause the issue.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">7th June 2003, 10:58</div></div><div class="posttext">If this can be reproduced and only fixed after restoring the registry then something is wrong with the DeleteRegKey/Value lines. Please attach the script and state the version NSIS you are using (on the top of the output).</div></div><hr />


<div class="post"><div class="posttop"><div class="username">transnote</div><div class="date">9th June 2003, 00:10</div></div><div class="posttext">Unfortunately it can't be re-produced.<br />
<br />
This was on a customers machine and it worked fine the other 1000 times... unfortunately I was using one of the development snapshots to compile it and don't have that ver around anymore...<br />
<br />
We may open it back up to customers for one more try, and I'll try to get as many details as possible if something like this happens again<br />
<br />
Also.. how does NSIS write to the registry?  Does it make the changes to the file itself or call a windows function? <br />
<br />
I had one other issue, after running my app one a win2k machine the dir where hklm is stored for the reg was not accessible.  I booted to recovery console and a dir told me the directory structure was unreadable and it required a chkdsk/r to repair...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kichik</div><div class="date">25th June 2003, 12:05</div></div><div class="posttext">NSIS uses Windows API functions to change the registry. Nothing out of the ordinary.</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>