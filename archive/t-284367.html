<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content=" Wordfind is not working properly, media player, mp3 player, music player, ipod sync, multimedia player, player, winamp, audio player" />
	<meta name="description" content="[Archive]  Wordfind is not working properly NSIS Discussion" />
	
	<title> Wordfind is not working properly [Archive]  - Winamp Forums</title>
	<link rel="stylesheet" type="text/css" href="archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar">Winamp Forums &gt; Developer Center &gt; <a href="f-65.html">NSIS Discussion</a> &gt;  Wordfind is not working properly</div>
<hr />
<div class="pda"><a href="t-284367.html?login=1" rel="nofollow">Log in</a></div>
<p class="largefont">Try the Internet Archive: <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=284367">Wordfind is not working properly</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">4th January 2008, 15:24</div></div><div class="posttext">hello Friends,<br />
Wordfind is not working properly for me.<br />
I have a big text file I would like to read one word in the text file. While finding application is not giving proper results.<br />
<br />
Code<br />
;--------------------------------<br />
;Include Modern UI<br />
<br />
  !include &quot;MUI.nsh&quot;<br />
<br />
;--------------------------------<br />
;General<br />
<br />
  Outfile test.exe<br />
<br />
;--------------------------------<br />
;Pages<br />
<br />
  !insertmacro MUI_PAGE_INSTFILES<br />
<br />
;--------------------------------<br />
;including files<br />
<br />
	!include TextFunc.nsh<br />
	!insertmacro LineFind<br />
	!include WordFunc.nsh<br />
	!insertmacro WordReplace<br />
	!insertmacro WordFind<br />
<br />
Function &quot;MyFunction&quot;<br />
	; $R9       current line<br />
	; $R8       current line number<br />
	; $R7       current line negative number<br />
	; $R6       current range of lines<br />
	; $R5       handle of a file opened to read<br />
	; $R4       handle of a file opened to write ($R4=&quot;&quot; if &quot;/NUL&quot;)<br />
<br />
	; you can use any string functions<br />
	; $R0-$R3  are not used (save data in them).<br />
	; ...<br />
;        var R0 &quot;C:\Windows\Installer&quot;<br />
<br />
	${WordFind} &quot;$R9&quot; &quot; &quot; &quot;1&quot; &quot;$R0&quot; ; get the First word<br />
        MessageBox MB_ICONQUESTION|MB_YESNO &quot;$R0&quot;<br />
<br />
	Push $0        ; If $var=&quot;StopLineFind&quot;  Then exit from function<br />
	               ; If $var=&quot;SkipWrite&quot;     Then skip current line (ignored if &quot;/NUL&quot;)<br />
FunctionEnd<br />
<br />
<br />
Section &quot;secDummy&quot;<br />
                ${LineFind} &quot;test5.txt&quot; &quot;&quot; &quot;12&quot; &quot;MyFunction&quot;	 ;12 = line number<br />
<br />
SectionEnd<br />
<br />
;--------------------------------<br />
;Languages<br />
<br />
  !insertmacro MUI_LANGUAGE &quot;English&quot;<br />
<br />
<br />
---------------My Text file sample<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af71.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af72.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af73.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af74.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af75.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af76.msi<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af77.msi<br />
v8<br />
v9<br />
<br />
=================================================<br />
<br />
here it should display the result as &quot;MSI&quot;, but it is displaying the result like below<br />
<br />
MSI (s) (04:54) [15:50:28:750]: Package we're running from ==&gt; C:\WINDOWS\Installer\16a9af71.msi<br />
<br />
<br />
<br />
On a sample text file it is working fine, on big text file it is not giving the correct result also, it is just displaying some junk characters.<br />
<br />
Any thing missing in my code. Please do the needfull.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">4th January 2008, 15:40</div></div><div class="posttext">It might be as simple as the &quot;+&quot; that you don't have in the call to WordFind:<br />
 ${WordFind} &quot;$R9&quot; &quot; &quot; &quot;+1&quot; &quot;$R0&quot; ; get the First word<br />
<br />
And the documentation says the second parameter for LineFind should be either a file or &quot;/NUL&quot;; you have an empty string.<br />
<br />
Don</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">4th January 2008, 15:50</div></div><div class="posttext">Opps - Sorry, I got it. Thanks Don.<br />
<br />
But while trying with my original file it is not giving me the result. it is just displaying a Junk character.<br />
<br />
Any file size limit, even I tried with a small file also..it is still giving me the errors.<br />
<br />
I am enclosing the fiel for reference, Please verify.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ameer</div><div class="date">4th January 2008, 15:53</div></div><div class="posttext">sample text file</div></div><hr />


<div class="post"><div class="posttop"><div class="username">demiller9</div><div class="date">4th January 2008, 19:28</div></div><div class="posttext">That file has Unicode in it. I don't know what you can use to read Unicode text. Perhaps the Unicode builds of NSIS could read it?<br />
<br />
Don<br />
<br />
Unicode build thread (http://forums.winamp.com/showthread.php?s=&amp;threadid=277381)</div></div><hr />


<div id="copyright">2001-2013 <a href="http://creativecommons.org/publicdomain/mark/1.0/" target="_blank">Public Domain Mark 1.0</a></div>
</div>
</body>
</html>